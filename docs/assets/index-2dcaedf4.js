var A2=Object.defineProperty;var R2=(c,e,f)=>e in c?A2(c,e,{enumerable:!0,configurable:!0,writable:!0,value:f}):c[e]=f;var $t=(c,e,f)=>(R2(c,typeof e!="symbol"?e+"":e,f),f);function Ah(c,e){for(var f=0;f<e.length;f++){const y=e[f];if(typeof y!="string"&&!Array.isArray(y)){for(const S in y)if(S!=="default"&&!(S in c)){const C=Object.getOwnPropertyDescriptor(y,S);C&&Object.defineProperty(c,S,C.get?C:{enumerable:!0,get:()=>y[S]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))y(S);new MutationObserver(S=>{for(const C of S)if(C.type==="childList")for(const o of C.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&y(o)}).observe(document,{childList:!0,subtree:!0});function f(S){const C={};return S.integrity&&(C.integrity=S.integrity),S.referrerPolicy&&(C.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?C.credentials="include":S.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function y(S){if(S.ep)return;S.ep=!0;const C=f(S);fetch(S.href,C)}})();var Kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rh(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function I2(c){if(c.__esModule)return c;var e=c.default;if(typeof e=="function"){var f=function y(){return this instanceof y?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};f.prototype=e.prototype}else f={};return Object.defineProperty(f,"__esModule",{value:!0}),Object.keys(c).forEach(function(y){var S=Object.getOwnPropertyDescriptor(c,y);Object.defineProperty(f,y,S.get?S:{enumerable:!0,get:function(){return c[y]}})}),f}var jp={exports:{}};(function(c,e){(function(y,S){c.exports=S()})(Kn,()=>(()=>{var f={6659:o=>{var x=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function l(n,h,d){this.fn=n,this.context=h,this.once=d||!1}function a(n,h,d,u,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var v=new l(d,u||n,p),m=t?t+h:h;return n._events[m]?n._events[m].fn?n._events[m]=[n._events[m],v]:n._events[m].push(v):(n._events[m]=v,n._eventsCount++),n}function r(n,h){--n._eventsCount===0?n._events=new s:delete n._events[h]}function i(){this._events=new s,this._eventsCount=0}i.prototype.eventNames=function(){var h=[],d,u;if(this._eventsCount===0)return h;for(u in d=this._events)x.call(d,u)&&h.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},i.prototype.listeners=function(h){var d=t?t+h:h,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,v=u.length,m=new Array(v);p<v;p++)m[p]=u[p].fn;return m},i.prototype.listenerCount=function(h){var d=t?t+h:h,u=this._events[d];return u?u.fn?1:u.length:0},i.prototype.emit=function(h,d,u,p,v,m){var g=t?t+h:h;if(!this._events[g])return!1;var T=this._events[g],w=arguments.length,b,E;if(T.fn){switch(T.once&&this.removeListener(h,T.fn,void 0,!0),w){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,d),!0;case 3:return T.fn.call(T.context,d,u),!0;case 4:return T.fn.call(T.context,d,u,p),!0;case 5:return T.fn.call(T.context,d,u,p,v),!0;case 6:return T.fn.call(T.context,d,u,p,v,m),!0}for(E=1,b=new Array(w-1);E<w;E++)b[E-1]=arguments[E];T.fn.apply(T.context,b)}else{var A=T.length,R;for(E=0;E<A;E++)switch(T[E].once&&this.removeListener(h,T[E].fn,void 0,!0),w){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,d);break;case 3:T[E].fn.call(T[E].context,d,u);break;case 4:T[E].fn.call(T[E].context,d,u,p);break;default:if(!b)for(R=1,b=new Array(w-1);R<w;R++)b[R-1]=arguments[R];T[E].fn.apply(T[E].context,b)}}return!0},i.prototype.on=function(h,d,u){return a(this,h,d,u,!1)},i.prototype.once=function(h,d,u){return a(this,h,d,u,!0)},i.prototype.removeListener=function(h,d,u,p){var v=t?t+h:h;if(!this._events[v])return this;if(!d)return r(this,v),this;var m=this._events[v];if(m.fn)m.fn===d&&(!p||m.once)&&(!u||m.context===u)&&r(this,v);else{for(var g=0,T=[],w=m.length;g<w;g++)(m[g].fn!==d||p&&!m[g].once||u&&m[g].context!==u)&&T.push(m[g]);T.length?this._events[v]=T.length===1?T[0]:T:r(this,v)}return this},i.prototype.removeAllListeners=function(h){var d;return h?(d=t?t+h:h,this._events[d]&&r(this,d)):(this._events=new s,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,o.exports=i},62270:(o,x,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82590),l=function(a,r,i,n){for(var h=a[0],d=1;d<a.length;d++){var u=a[d];s(u,h,r,i,n),h=u}return a};o.exports=l},61148:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"angle",r,i,n,h)};o.exports=l},22015:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){for(var a=0;a<t.length;a++){var r=t[a];s.call(l,r)}return t};o.exports=x},31060:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){l===void 0&&(l=0);for(var a=l;a<t.length;a++){var r=t[a],i=!0;for(var n in s)r[n]!==s[n]&&(i=!1);if(i)return r}return null};o.exports=x},52367:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){l===void 0&&(l=0);for(var a=t.length-1;a>=l;a--){var r=t[a],i=!0;for(var n in s)r[n]!==s[n]&&(i=!1);if(i)return r}return null};o.exports=x},12673:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40327),l=t(84093),a=t(72632),r=t(72283),i=t(71030),n=new i({sys:{queueDepthSort:r,events:{once:r}}},0,0,1,1).setOrigin(0,0),h=function(d,u){u===void 0&&(u={});var p=u.hasOwnProperty("width"),v=u.hasOwnProperty("height"),m=a(u,"width",-1),g=a(u,"height",-1),T=a(u,"cellWidth",1),w=a(u,"cellHeight",T),b=a(u,"position",l.TOP_LEFT),E=a(u,"x",0),A=a(u,"y",0),R=0,I=0,P=m*T,M=g*w;n.setPosition(E,A),n.setSize(T,w);for(var F=0;F<d.length;F++)if(s(d[F],n,b),p&&m===-1)n.x+=T;else if(v&&g===-1)n.y+=w;else if(v&&!p){if(I+=w,n.y+=w,I===M&&(I=0,R+=T,n.y=A,n.x+=T,R===P))break}else if(R+=T,n.x+=T,R===P&&(R=0,I+=w,n.x=E,n.y+=w,I===M))break;return d};o.exports=h},691:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"alpha",r,i,n,h)};o.exports=l},3877:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"x",r,i,n,h)};o.exports=l},71020:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"x",r,n,d,u),s(a,"y",i,h,d,u)};o.exports=l},28970:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"y",r,i,n,h)};o.exports=l},82249:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l===void 0&&(l=0),a===void 0&&(a=6.28);for(var r=l,i=(a-l)/t.length,n=s.x,h=s.y,d=s.radius,u=0;u<t.length;u++)t[u].x=n+d*Math.cos(r),t[u].y=h+d*Math.sin(r),r+=i;return t};o.exports=x},30285:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l===void 0&&(l=0),a===void 0&&(a=6.28);for(var r=l,i=(a-l)/t.length,n=s.width/2,h=s.height/2,d=0;d<t.length;d++)t[d].x=s.x+n*Math.cos(r),t[d].y=s.y+h*Math.sin(r),r+=i;return t};o.exports=x},61557:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8570),l=function(a,r){for(var i=s(r,a.length),n=0;n<a.length;n++){var h=a[n],d=i[n];h.x=d.x,h.y=d.y}return a};o.exports=l},63549:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40053),l=t(77640),a=t(38487),r=function(i,n,h){h===void 0&&(h=0);var d=s(n,!1,i.length);h>0?l(d,h):h<0&&a(d,Math.abs(h));for(var u=0;u<i.length;u++)i[u].x=d[u].x,i[u].y=d[u].y;return i};o.exports=r},51629:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(58813),l=function(a,r,i){var n=s({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},i),h=s({x1:r.x2,y1:r.y2,x2:r.x3,y2:r.y3},i),d=s({x1:r.x3,y1:r.y3,x2:r.x1,y2:r.y1},i);n.pop(),h.pop(),d.pop(),n=n.concat(h,d);for(var u=n.length/a.length,p=0,v=0;v<a.length;v++){var m=a[v],g=n[Math.floor(p)];m.x=g.x,m.y=g.y,p+=u}return a};o.exports=l},1045:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){for(var a=0;a<t.length;a++){var r=t[a];r.anims&&r.anims.play(s,l)}return t};o.exports=x},6124:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r,i){a===void 0&&(a=0),r===void 0&&(r=0),i===void 0&&(i=1);var n,h=0,d=t.length;if(i===1)for(n=r;n<d;n++)t[n][s]+=l+h*a,h++;else for(n=r;n>=0;n--)t[n][s]+=l+h*a,h++;return t};o.exports=x},23646:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r,i){a===void 0&&(a=0),r===void 0&&(r=0),i===void 0&&(i=1);var n,h=0,d=t.length;if(i===1)for(n=r;n<d;n++)t[n][s]=l+h*a,h++;else for(n=r;n>=0;n--)t[n][s]=l+h*a,h++;return t};o.exports=x},4392:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30977),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},94985:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72006),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},63305:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74077),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},90739:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30001),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},91417:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99761),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},26182:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"rotation",r,i,n,h)};o.exports=l},87299:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72395),l=t(53996),a=function(r,i,n){for(var h=i.x,d=i.y,u=0;u<r.length;u++){var p=r[u];s(p,h,d,n,Math.max(1,l(p.x,p.y,h,d)))}return r};o.exports=a},92194:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72395),l=function(a,r,i,n){var h=r.x,d=r.y;if(n===0)return a;for(var u=0;u<a.length;u++)s(a[u],h,d,i,n);return a};o.exports=l},30363:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"scaleX",r,i,n,h)};o.exports=l},51449:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"scaleX",r,n,d,u),s(a,"scaleY",i,h,d,u)};o.exports=l},64895:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"scaleY",r,i,n,h)};o.exports=l},30329:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"alpha",r,i,n,h)};o.exports=l},43954:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n){return s(a,"blendMode",r,0,i,n)};o.exports=l},70688:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"depth",r,i,n,h)};o.exports=l},8314:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){for(var a=0;a<t.length;a++)t[a].setInteractive(s,l);return t};o.exports=x},12894:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"originX",r,n,d,u),s(a,"originY",i,h,d,u),a.forEach(function(p){p.updateDisplayOrigin()}),a};o.exports=l},38767:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"rotation",r,i,n,h)};o.exports=l},18584:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"scaleX",r,n,d,u),s(a,"scaleY",i,h,d,u)};o.exports=l},17381:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"scaleX",r,i,n,h)};o.exports=l},74370:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"scaleY",r,i,n,h)};o.exports=l},27773:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"scrollFactorX",r,n,d,u),s(a,"scrollFactorY",i,h,d,u)};o.exports=l},75257:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"scrollFactorX",r,i,n,h)};o.exports=l},54512:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"scrollFactorY",r,i,n,h)};o.exports=l},69423:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r){for(var i=0;i<t.length;i++)t[i].setTint(s,l,a,r);return t};o.exports=x},58291:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n){return s(a,"visible",r,0,i,n)};o.exports=l},94833:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"x",r,i,n,h)};o.exports=l},14284:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"x",r,n,d,u),s(a,"y",i,h,d,u)};o.exports=l},96574:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"y",r,i,n,h)};o.exports=l},74086:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h){n===void 0&&(n=0),h===void 0&&(h=new s);var d,u,p=a.length;if(p===1)d=a[0].x,u=a[0].y,a[0].x=r,a[0].y=i;else{var v=1,m=0;n===0&&(m=p-1,v=p-2),d=a[m].x,u=a[m].y,a[m].x=r,a[m].y=i;for(var g=0;g<p;g++)if(!(v>=p||v===-1)){var T=a[v],w=T.x,b=T.y;T.x=d,T.y=u,d=w,u=b,n===0?v--:v++}}return h.x=d,h.y=u,h};o.exports=l},86347:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18592),l=function(a){return s(a)};o.exports=l},1558:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5514),l=function(a,r,i,n,h){h===void 0&&(h=!1);var d=Math.abs(n-i)/a.length,u;if(h)for(u=0;u<a.length;u++)a[u][r]+=s(u*d,i,n);else for(u=0;u<a.length;u++)a[u][r]=s(u*d,i,n);return a};o.exports=l},9938:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87736),l=function(a,r,i,n,h){h===void 0&&(h=!1);var d=Math.abs(n-i)/a.length,u;if(h)for(u=0;u<a.length;u++)a[u][r]+=s(u*d,i,n);else for(u=0;u<a.length;u++)a[u][r]=s(u*d,i,n);return a};o.exports=l},71060:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r){if(r===void 0&&(r=!1),t.length===0)return t;if(t.length===1)return r?t[0][s]+=(a+l)/2:t[0][s]=(a+l)/2,t;var i=Math.abs(a-l)/(t.length-1),n;if(r)for(n=0;n<t.length;n++)t[n][s]+=n*i+l;else for(n=0;n<t.length;n++)t[n][s]=n*i+l;return t};o.exports=x},11207:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){for(var s=0;s<t.length;s++)t[s].visible=!t[s].visible;return t};o.exports=x},24404:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1071),l=function(a,r,i){i===void 0&&(i=0);for(var n=0;n<a.length;n++){var h=a[n];h.x=s(h.x,r.left-i,r.right+i),h.y=s(h.y,r.top-i,r.bottom+i)}return a};o.exports=l},83979:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AlignTo:t(62270),Angle:t(61148),Call:t(22015),GetFirst:t(31060),GetLast:t(52367),GridAlign:t(12673),IncAlpha:t(691),IncX:t(3877),IncXY:t(71020),IncY:t(28970),PlaceOnCircle:t(82249),PlaceOnEllipse:t(30285),PlaceOnLine:t(61557),PlaceOnRectangle:t(63549),PlaceOnTriangle:t(51629),PlayAnimation:t(1045),PropertyValueInc:t(6124),PropertyValueSet:t(23646),RandomCircle:t(4392),RandomEllipse:t(94985),RandomLine:t(63305),RandomRectangle:t(90739),RandomTriangle:t(91417),Rotate:t(26182),RotateAround:t(87299),RotateAroundDistance:t(92194),ScaleX:t(30363),ScaleXY:t(51449),ScaleY:t(64895),SetAlpha:t(30329),SetBlendMode:t(43954),SetDepth:t(70688),SetHitArea:t(8314),SetOrigin:t(12894),SetRotation:t(38767),SetScale:t(18584),SetScaleX:t(17381),SetScaleY:t(74370),SetScrollFactor:t(27773),SetScrollFactorX:t(75257),SetScrollFactorY:t(54512),SetTint:t(69423),SetVisible:t(58291),SetX:t(94833),SetXY:t(14284),SetY:t(96574),ShiftPosition:t(74086),Shuffle:t(86347),SmootherStep:t(9938),SmoothStep:t(1558),Spread:t(71060),ToggleVisible:t(11207),WrapInRectangle:t(24404)}},85463:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(16938),r=t(2406),i=t(71519),n=t(10850),h=t(28834),d=new l({initialize:function(p,v,m){this.manager=p,this.key=v,this.type="frame",this.frames=this.getFrames(p.textureManager,n(m,"frames",[]),n(m,"defaultTextureKey",null),n(m,"sortFrames",!0)),this.frameRate=n(m,"frameRate",null),this.duration=n(m,"duration",null),this.msPerFrame,this.skipMissedFrames=n(m,"skipMissedFrames",!0),this.delay=n(m,"delay",0),this.repeat=n(m,"repeat",0),this.repeatDelay=n(m,"repeatDelay",0),this.yoyo=n(m,"yoyo",!1),this.showBeforeDelay=n(m,"showBeforeDelay",!1),this.showOnStart=n(m,"showOnStart",!1),this.hideOnComplete=n(m,"hideOnComplete",!1),this.randomFrame=n(m,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(u,p,v,m){v===null&&m===null?(u.frameRate=24,u.duration=24/p*1e3):v&&m===null?(u.duration=v,u.frameRate=p/(v/1e3)):(u.frameRate=m,u.duration=p/m*1e3),u.msPerFrame=1e3/u.frameRate},addFrame:function(u){return this.addFrameAt(this.frames.length,u)},addFrameAt:function(u,p){var v=this.getFrames(this.manager.textureManager,p);if(v.length>0){if(u===0)this.frames=v.concat(this.frames);else if(u===this.frames.length)this.frames=this.frames.concat(v);else{var m=this.frames.slice(0,u),g=this.frames.slice(u);this.frames=m.concat(v,g)}this.updateFrameSequence()}return this},checkFrame:function(u){return u>=0&&u<this.frames.length},getFirstTick:function(u){u.accumulator=0,u.nextTick=u.msPerFrame+u.currentFrame.duration},getFrameAt:function(u){return this.frames[u]},getFrames:function(u,p,v,m){m===void 0&&(m=!0);var g=[],T,w,b=1,E,A;if(typeof p=="string"){if(A=p,!u.exists(A))return console.warn('Texture "%s" not found',A),g;var R=u.get(A),I=R.getFrameNames();m&&h(I),p=[],I.forEach(function(L){p.push({key:A,frame:L})})}if(!Array.isArray(p)||p.length===0)return g;for(E=0;E<p.length;E++){var P=p[E],M=n(P,"key",v);if(M){var F=n(P,"frame",0),O=u.getFrame(M,F);if(!O){console.warn('Texture "%s" not found',M);continue}w=new i(M,F,b,O),w.duration=n(P,"duration",0),w.isFirst=!T,T&&(T.nextFrame=w,w.prevFrame=T),g.push(w),T=w,b++}}if(g.length>0){w.isLast=!0,w.nextFrame=g[0],g[0].prevFrame=w;var D=1/(g.length-1);for(E=0;E<g.length;E++)g[E].progress=E*D}return g},getNextTick:function(u){u.accumulator-=u.nextTick,u.nextTick=u.msPerFrame+u.currentFrame.duration},getFrameByProgress:function(u){return u=s(u,0,1),r(u,this.frames,"progress")},nextFrame:function(u){var p=u.currentFrame;p.isLast?u.yoyo?this.handleYoyoFrame(u,!1):u.repeatCounter>0?u.inReverse&&u.forward?u.forward=!1:this.repeatAnimation(u):u.complete():this.updateAndGetNextTick(u,p.nextFrame)},handleYoyoFrame:function(u,p){if(p||(p=!1),u.inReverse===!p&&u.repeatCounter>0){(u.repeatDelay===0||u.pendingRepeat)&&(u.forward=p),this.repeatAnimation(u);return}if(u.inReverse!==p&&u.repeatCounter===0){u.complete();return}u.forward=p;var v=p?u.currentFrame.nextFrame:u.currentFrame.prevFrame;this.updateAndGetNextTick(u,v)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(u){var p=u.currentFrame;p.isFirst?u.yoyo?this.handleYoyoFrame(u,!0):u.repeatCounter>0?u.inReverse&&!u.forward?this.repeatAnimation(u):(u.forward=!0,this.repeatAnimation(u)):u.complete():this.updateAndGetNextTick(u,p.prevFrame)},updateAndGetNextTick:function(u,p){u.setCurrentFrame(p),this.getNextTick(u)},removeFrame:function(u){var p=this.frames.indexOf(u);return p!==-1&&this.removeFrameAt(p),this},removeFrameAt:function(u){return this.frames.splice(u,1),this.updateFrameSequence(),this},repeatAnimation:function(u){if(u._pendingStop===2){if(u._pendingStopValue===0)return u.stop();u._pendingStopValue--}u.repeatDelay>0&&!u.pendingRepeat?(u.pendingRepeat=!0,u.accumulator-=u.nextTick,u.nextTick+=u.repeatDelay):(u.repeatCounter--,u.forward?u.setCurrentFrame(u.currentFrame.nextFrame):u.setCurrentFrame(u.currentFrame.prevFrame),u.isPlaying&&(this.getNextTick(u),u.handleRepeat()))},toJSON:function(){var u={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(p){u.frames.push(p.toJSON())}),u},updateFrameSequence:function(){for(var u=this.frames.length,p=1/(u-1),v,m=0;m<u;m++)v=this.frames[m],v.index=m+1,v.isFirst=!1,v.isLast=!1,v.progress=m*p,m===0?(v.isFirst=!0,u===1?(v.isLast=!0,v.nextFrame=v,v.prevFrame=v):(v.isLast=!1,v.prevFrame=this.frames[u-1],v.nextFrame=this.frames[m+1])):m===u-1&&u>1?(v.isLast=!0,v.prevFrame=this.frames[u-2],v.nextFrame=this.frames[0]):u>1&&(v.prevFrame=this.frames[m-1],v.nextFrame=this.frames[m+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var u=0;u<this.frames.length;u++)this.frames[u].destroy();this.frames=[],this.manager=null}});o.exports=d},71519:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h,d){d===void 0&&(d=!1),this.textureKey=r,this.textureFrame=i,this.index=n,this.frame=h,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});o.exports=l},90249:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85463),l=t(56694),a=t(33885),r=t(6659),i=t(16938),n=t(97081),h=t(72632),d=t(10850),u=t(83392),p=t(13401),v=t(76400),m=new l({Extends:r,initialize:function(T){r.call(this),this.game=T,this.textureManager=null,this.globalTimeScale=1,this.anims=new a,this.mixes=new a,this.paused=!1,this.name="AnimationManager",T.events.once(n.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(n.DESTROY,this.destroy,this)},addMix:function(g,T,w){var b=this.anims,E=this.mixes,A=typeof g=="string"?g:g.key,R=typeof T=="string"?T:T.key;if(b.has(A)&&b.has(R)){var I=E.get(A);I||(I={}),I[R]=w,E.set(A,I)}return this},removeMix:function(g,T){var w=this.mixes,b=typeof g=="string"?g:g.key,E=w.get(b);if(E)if(T){var A=typeof T=="string"?T:T.key;E.hasOwnProperty(A)&&delete E[A]}else T||w.delete(b);return this},getMix:function(g,T){var w=this.mixes,b=typeof g=="string"?g:g.key,E=typeof T=="string"?T:T.key,A=w.get(b);return A&&A.hasOwnProperty(E)?A[E]:0},add:function(g,T){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(T.key=g,this.anims.set(g,T),this.emit(i.ADD_ANIMATION,g,T),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,T,w){var b=[],E=this.game.cache.json.get(g);if(!E)return console.warn("No Aseprite data found for: "+g),b;var A=this,R=d(E,"meta",null),I=d(E,"frames",null);if(R&&I){var P=d(R,"frameTags",[]);P.forEach(function(M){var F=[],O=h(M,"name",null),D=h(M,"from",0),L=h(M,"to",0),z=h(M,"direction","forward");if(O&&(!T||T&&T.indexOf(O)>-1)){for(var X=0,H=D;H<=L;H++){var J=H.toString(),G=I[J];if(G){var k=h(G,"duration",u.MAX_SAFE_INTEGER);F.push({key:g,frame:J,duration:k}),X+=k}}var N=X/F.length;F.forEach(function(W){W.duration-=N}),z==="reverse"&&(F=F.reverse());var B={key:O,frames:F,duration:X,yoyo:z==="pingpong"},U;w?w.anims&&(U=w.anims.create(B)):U=A.create(B),U&&b.push(U)}})}return b},create:function(g){var T=g.key,w=!1;return T&&(w=this.get(T),w?console.warn("AnimationManager key already exists: "+T):(w=new s(this,T,g),this.anims.set(T,w),this.emit(i.ADD_ANIMATION,T,w))),w},fromJSON:function(g,T){T===void 0&&(T=!1),T&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var w=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var b=0;b<g.anims.length;b++)w.push(this.create(g.anims[b]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&w.push(this.create(g));return w},generateFrameNames:function(g,T){var w=d(T,"prefix",""),b=d(T,"start",0),E=d(T,"end",0),A=d(T,"suffix",""),R=d(T,"zeroPad",0),I=d(T,"outputArray",[]),P=d(T,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),I;var M=this.textureManager.get(g);if(!M)return I;var F;if(T)for(P||(P=p(b,E)),F=0;F<P.length;F++){var O=w+v(P[F],R,"0",1)+A;M.has(O)?I.push({key:g,frame:O}):console.warn('Frame "%s" not found in texture "%s"',O,g)}else for(P=M.getFrameNames(),F=0;F<P.length;F++)I.push({key:g,frame:P[F]});return I},generateFrameNumbers:function(g,T){var w=d(T,"start",0),b=d(T,"end",-1),E=d(T,"first",!1),A=d(T,"outputArray",[]),R=d(T,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),A;var I=this.textureManager.get(g);if(!I)return A;E&&I.has(E)&&A.push({key:g,frame:E}),R||(b===-1&&(b=I.frameTotal-2),R=p(w,b));for(var P=0;P<R.length;P++){var M=R[P];I.has(M)?A.push({key:g,frame:M}):console.warn('Frame "%s" not found in texture "%s"',M,g)}return A},get:function(g){return this.anims.get(g)},getAnimsFromTexture:function(g){for(var T=this.textureManager.get(g),w=T.key,b=this.anims.getArray(),E=[],A=0;A<b.length;A++)for(var R=b[A],I=R.frames,P=0;P<I.length;P++)if(I[P].textureKey===w){E.push(R.key);break}return E},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(i.PAUSE_ALL)),this},play:function(g,T){Array.isArray(T)||(T=[T]);for(var w=0;w<T.length;w++)T[w].anims.play(g);return this},staggerPlay:function(g,T,w,b){w===void 0&&(w=0),b===void 0&&(b=!0),Array.isArray(T)||(T=[T]);var E=T.length;b||E--;for(var A=0;A<T.length;A++){var R=w<0?Math.abs(w)*(E-A):w*A;T[A].anims.playAfterDelay(g,R)}return this},remove:function(g){var T=this.get(g);return T&&(this.emit(i.REMOVE_ANIMATION,g,T),this.anims.delete(g),this.removeMix(g)),T},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(i.RESUME_ALL)),this},toJSON:function(g){var T={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?T.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(w,b){T.anims.push(b.toJSON())}),T},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});o.exports=m},16569:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85463),l=t(17489),a=t(56694),r=t(33885),i=t(16938),n=t(72632),h=new a({initialize:function(u){this.parent=u,this.animationManager=u.scene.sys.anims,this.animationManager.on(i.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(d){var u=this.parent;if(d===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,u;Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++){var v=d[p];this.nextAnim?this.nextAnimsQueue.push(v):this.nextAnim=v}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(d){this.isPlaying&&this.stop();var u=this.animationManager,p=typeof d=="string"?d:n(d,"key",null),v=this.exists(p)?this.get(p):u.get(p);if(!v)console.warn("Missing animation: "+p);else{this.currentAnim=v;var m=v.getTotalFrames(),g=n(d,"frameRate",v.frameRate),T=n(d,"duration",v.duration);v.calculateDuration(this,m,T,g),this.delay=n(d,"delay",v.delay),this.repeat=n(d,"repeat",v.repeat),this.repeatDelay=n(d,"repeatDelay",v.repeatDelay),this.yoyo=n(d,"yoyo",v.yoyo),this.showBeforeDelay=n(d,"showBeforeDelay",v.showBeforeDelay),this.showOnStart=n(d,"showOnStart",v.showOnStart),this.hideOnComplete=n(d,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=n(d,"skipMissedFrames",v.skipMissedFrames),this.randomFrame=n(d,"randomFrame",v.randomFrame),this.timeScale=n(d,"timeScale",this.timeScale);var w=n(d,"startFrame",0);w>m&&(w=0),this.randomFrame&&(w=l(0,m-1));var b=v.frames[w];w===0&&!this.forward&&(b=v.getLastFrame()),this.currentFrame=b}return this.parent},pause:function(d){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),d!==void 0&&this.setCurrentFrame(d),this.parent},resume:function(d){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),d!==void 0&&this.setCurrentFrame(d),this.parent},playAfterDelay:function(d,u){if(!this.isPlaying)this.delayCounter=u,this.play(d,!0);else{var p=this.nextAnim,v=this.nextAnimsQueue;p&&v.unshift(p),this.nextAnim=d,this._pendingStop=1,this._pendingStopValue=u}return this.parent},playAfterRepeat:function(d,u){if(u===void 0&&(u=1),!this.isPlaying)this.play(d);else{var p=this.nextAnim,v=this.nextAnimsQueue;p&&v.unshift(p),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this.nextAnim=d,this._pendingStop=2,this._pendingStopValue=u}return this.parent},play:function(d,u){u===void 0&&(u=!1);var p=this.currentAnim,v=this.parent,m=typeof d=="string"?d:d.key;if(u&&this.isPlaying&&p.key===m)return v;if(p&&this.isPlaying){var g=this.animationManager.getMix(p.key,d);if(g>0)return this.playAfterDelay(d,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d)},playReverse:function(d,u){u===void 0&&(u=!1);var p=typeof d=="string"?d:d.key;return u&&this.isPlaying&&this.currentAnim.key===p?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d))},startAnimation:function(d){this.load(d);var u=this.currentAnim,p=this.parent;return u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,u.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),p},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(i.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(i.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(i.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(i.ANIMATION_COMPLETE,i.ANIMATION_COMPLETE_KEY)},emitEvents:function(d,u){var p=this.currentAnim;if(p){var v=this.currentFrame,m=this.parent,g=v.textureFrame;m.emit(d,p,v,m,g),u&&m.emit(u+p.key,p,v,m,g)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var d=this.currentFrame;if(!d)return 0;var u=d.progress;return this.inReverse&&(u*=-1),u},setProgress:function(d){return this.forward||(d=1-d),this.setCurrentFrame(this.currentAnim.getFrameByProgress(d)),this.parent},setRepeat:function(d){return this.repeatCounter=d===-1?Number.MAX_VALUE:d,this.parent},globalRemove:function(d,u){u===void 0&&(u=this.currentAnim),this.isPlaying&&u.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(d,u){d===void 0&&(d=!1),u===void 0&&(u=!1);var p=this.currentAnim,v=this.parent;return p?(u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),p.getFirstTick(this),this.emitEvents(i.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!d,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(p.frames[0]),this.parent):v},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(d)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(d)}return this.parent},stopAfterDelay:function(d){return this._pendingStop=1,this._pendingStopValue=d,this.parent},stopAfterRepeat:function(d){return d===void 0&&(d=1),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=d,this.parent},stopOnFrame:function(d){return this._pendingStop=3,this._pendingStopValue=d,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(d,u){var p=this.currentAnim;if(!(!this.isPlaying||!p||p.paused)){if(this.accumulator+=u*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=u,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?p.nextFrame(this):p.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var v=0;do this.forward?p.nextFrame(this):p.previousFrame(this),v++;while(this.isPlaying&&this.accumulator>this.nextTick&&v<60)}}},setCurrentFrame:function(d){var u=this.parent;return this.currentFrame=d,u.texture=d.frame.texture,u.frame=d.frame,u.isCropped&&u.frame.updateCropUVs(u._crop,u.flipX,u.flipY),d.setAlpha&&(u.alpha=d.alpha),u.setSizeToFrame(),u._originComponent&&(d.frame.customPivot?u.setOrigin(d.frame.pivotX,d.frame.pivotY):u.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(i.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===d&&this.stop()),u},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(d){return this.anims?this.anims.get(d):null},exists:function(d){return this.anims?this.anims.has(d):!1},create:function(d){var u=d.key,p=!1;return u&&(p=this.get(u),p?console.warn("Animation key already exists: "+u):(p=new s(this,u,d),this.anims||(this.anims=new r),this.anims.set(u,p))),p},createFromAseprite:function(d,u){return this.animationManager.createFromAseprite(d,u,this.parent)},generateFrameNames:function(d,u){return this.animationManager.generateFrameNames(d,u)},generateFrameNumbers:function(d,u){return this.animationManager.generateFrameNumbers(d,u)},remove:function(d){var u=this.get(d);return u&&(this.currentAnim===u&&this.stop(),this.anims.delete(d)),u},destroy:function(){this.animationManager.off(i.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});o.exports=h},44509:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},84563:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete"},61586:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete-"},72175:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrepeat"},568:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrestart"},37690:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstart"},58525:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstop"},5243:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationupdate"},10598:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"},4860:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},31865:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"},16938:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD_ANIMATION:t(44509),ANIMATION_COMPLETE:t(84563),ANIMATION_COMPLETE_KEY:t(61586),ANIMATION_REPEAT:t(72175),ANIMATION_RESTART:t(568),ANIMATION_START:t(37690),ANIMATION_STOP:t(58525),ANIMATION_UPDATE:t(5243),PAUSE_ALL:t(10598),REMOVE_ANIMATION:t(4860),RESUME_ALL:t(31865)}},13517:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Animation:t(85463),AnimationFrame:t(71519),AnimationManager:t(90249),AnimationState:t(16569),Events:t(16938)}},23740:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(33885),a=t(6659),r=t(69773),i=new s({initialize:function(){this.entries=new l,this.events=new a},add:function(n,h){return this.entries.set(n,h),this.events.emit(r.ADD,this,n,h),this},has:function(n){return this.entries.has(n)},exists:function(n){return this.entries.has(n)},get:function(n){return this.entries.get(n)},remove:function(n){var h=this.get(n);return h&&(this.entries.delete(n),this.events.emit(r.REMOVE,this,n,h.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});o.exports=i},43474:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23740),l=t(56694),a=t(97081),r=new l({initialize:function(n){this.game=n,this.binary=new s,this.bitmapFont=new s,this.json=new s,this.physics=new s,this.shader=new s,this.audio=new s,this.video=new s,this.text=new s,this.html=new s,this.obj=new s,this.tilemap=new s,this.xml=new s,this.custom={},this.game.events.once(a.DESTROY,this.destroy,this)},addCustom:function(i){return this.custom.hasOwnProperty(i)||(this.custom[i]=new s),this.custom[i]},destroy:function(){for(var i=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],n=0;n<i.length;n++)this[i[n]].destroy(),this[i[n]]=null;for(var h in this.custom)this.custom[h].destroy();this.custom=null,this.game=null}});o.exports=r},94762:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},75968:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},69773:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:t(94762),REMOVE:t(75968)}},45820:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BaseCache:t(23740),CacheManager:t(43474),Events:t(69773)}},51052:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(75606),r=t(6659),i=t(89787),n=t(74118),h=t(69360),d=t(93222),u=t(93736),p=new s({Extends:r,Mixins:[l.AlphaSingle,l.Visible],initialize:function(m,g,T,w){m===void 0&&(m=0),g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=0),r.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new n,this.dirty=!0,this._x=m,this._y=g,this._width=T,this._height=w,this._bounds=new n,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new h,this.transparent=!0,this.backgroundColor=d("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new u(T/2,w/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(v){this.renderList.push(v)},setOrigin:function(v,m){return v===void 0&&(v=.5),m===void 0&&(m=v),this.originX=v,this.originY=m,this},getScroll:function(v,m,g){g===void 0&&(g=new u);var T=this.width*.5,w=this.height*.5;return g.x=v-T,g.y=m-w,this.useBounds&&(g.x=this.clampX(g.x),g.y=this.clampY(g.y)),g},centerOnX:function(v){var m=this.width*.5;return this.midPoint.x=v,this.scrollX=v-m,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(v){var m=this.height*.5;return this.midPoint.y=v,this.scrollY=v-m,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(v,m){return this.centerOnX(v),this.centerOnY(m),this},centerToBounds:function(){if(this.useBounds){var v=this._bounds,m=this.width*.5,g=this.height*.5;this.midPoint.set(v.centerX,v.centerY),this.scrollX=v.centerX-m,this.scrollY=v.centerY-g}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(v){if(this.disableCull)return v;var m=this.matrix.matrix,g=m[0],T=m[1],w=m[2],b=m[3],E=g*b-T*w;if(!E)return v;var A=m[4],R=m[5],I=this.scrollX,P=this.scrollY,M=this.width,F=this.height,O=this.y,D=O+F,L=this.x,z=L+M,X=this.culledObjects,H=v.length;E=1/E,X.length=0;for(var J=0;J<H;++J){var G=v[J];if(!G.hasOwnProperty("width")||G.parentContainer){X.push(G);continue}var k=G.width,N=G.height,B=G.x-I*G.scrollFactorX-k*G.originX,U=G.y-P*G.scrollFactorY-N*G.originY,W=B*g+U*w+A,K=B*T+U*b+R,q=(B+k)*g+(U+N)*w+A,_=(B+k)*T+(U+N)*b+R;q>L&&W<z&&_>O&&K<D&&X.push(G)}return X},getWorldPoint:function(v,m,g){g===void 0&&(g=new u);var T=this.matrix.matrix,w=T[0],b=T[1],E=T[2],A=T[3],R=T[4],I=T[5],P=w*A-b*E;if(!P)return g.x=v,g.y=m,g;P=1/P;var M=A*P,F=-b*P,O=-E*P,D=w*P,L=(E*I-A*R)*P,z=(b*R-w*I)*P,X=Math.cos(this.rotation),H=Math.sin(this.rotation),J=this.zoomX,G=this.zoomY,k=this.scrollX,N=this.scrollY,B=v+(k*X-N*H)*J,U=m+(k*H+N*X)*G;return g.x=B*M+U*O+L,g.y=B*F+U*D+z,g},ignore:function(v){var m=this.id;Array.isArray(v)||(v=[v]);for(var g=0;g<v.length;g++){var T=v[g];Array.isArray(T)?this.ignore(T):T.isParent?this.ignore(T.getChildren()):T.cameraFilter|=m}return this},preRender:function(){this.renderList.length=0;var v=this.width,m=this.height,g=v*.5,T=m*.5,w=this.zoomX,b=this.zoomY,E=this.matrix,A=v*this.originX,R=m*this.originY,I=this.scrollX,P=this.scrollY;this.useBounds&&(I=this.clampX(I),P=this.clampY(P)),this.scrollX=I,this.scrollY=P;var M=I+g,F=P+T;this.midPoint.set(M,F);var O=v/w,D=m/b;this.worldView.setTo(M-O/2,F-D/2,O,D),E.applyITRS(this.x+A,this.y+R,this.rotation,w,b),E.translate(-A,-R)},clampX:function(v){var m=this._bounds,g=this.displayWidth,T=m.x+(g-this.width)/2,w=Math.max(T,T+m.width-g);return v<T?v=T:v>w&&(v=w),v},clampY:function(v){var m=this._bounds,g=this.displayHeight,T=m.y+(g-this.height)/2,w=Math.max(T,T+m.height-g);return v<T?v=T:v>w&&(v=w),v},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(v){return v===void 0&&(v=0),this.rotation=a(v),this},setBackgroundColor:function(v){return v===void 0&&(v="rgba(0,0,0,0)"),this.backgroundColor=d(v),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(v,m,g,T,w){return w===void 0&&(w=!1),this._bounds.setTo(v,m,g,T),this.dirty=!0,this.useBounds=!0,w?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(v){v===void 0&&(v=new n);var m=this._bounds;return v.setTo(m.x,m.y,m.width,m.height),v},setName:function(v){return v===void 0&&(v=""),this.name=v,this},setPosition:function(v,m){return m===void 0&&(m=v),this.x=v,this.y=m,this},setRotation:function(v){return v===void 0&&(v=0),this.rotation=v,this},setRoundPixels:function(v){return this.roundPixels=v,this},setScene:function(v,m){m===void 0&&(m=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=v,this.isSceneCamera=m;var g=v.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(v,m){return m===void 0&&(m=v),this.scrollX=v,this.scrollY=m,this},setSize:function(v,m){return m===void 0&&(m=v),this.width=v,this.height=m,this},setViewport:function(v,m,g,T){return this.x=v,this.y=m,this.width=g,this.height=T,this},setZoom:function(v,m){return v===void 0&&(v=1),m===void 0&&(m=v),v===0&&(v=.001),m===0&&(m=.001),this.zoomX=v,this.zoomY=m,this},setMask:function(v,m){return m===void 0&&(m=!0),this.mask=v,this._maskCamera=m?this.cameraManager.default:this,this},clearMask:function(v){return v===void 0&&(v=!1),v&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var v={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(v.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),v},update:function(){},setIsSceneCamera:function(v){return this.isSceneCamera=v,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var v=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,m=this.sceneManager;v&&!this._customViewport?m.customViewports++:!v&&this._customViewport&&m.customViewports--,this.dirty=!0,this._customViewport=v}},destroy:function(){this.emit(i.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(v){this._x=v,this.updateSystem()}},y:{get:function(){return this._y},set:function(v){this._y=v,this.updateSystem()}},width:{get:function(){return this._width},set:function(v){this._width=v,this.updateSystem()}},height:{get:function(){return this._height},set:function(v){this._height=v,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(v){v!==this._scrollX&&(this._scrollX=v,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(v){v!==this._scrollY&&(this._scrollY=v,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(v){this._zoomX=v,this._zoomY=v,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(v){this._zoomX=v,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(v){this._zoomY=v,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});o.exports=p},47751:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(51052),l=t(79993),a=t(82897),r=t(56694),i=t(64937),n=t(53030),h=t(89787),d=t(42798),u=t(74118),p=t(93736),v=new r({Extends:s,Mixins:[i.PostPipeline],initialize:function(g,T,w,b){s.call(this,g,T,w,b),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new p(1,1),this.followOffset=new p,this.deadzone=null,this._follow=null},setDeadzone:function(m,g){if(m===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=m,this.deadzone.height=g):this.deadzone=new u(0,0,m,g),this._follow){var T=this.width/2,w=this.height/2,b=this._follow.x-this.followOffset.x,E=this._follow.y-this.followOffset.y;this.midPoint.set(b,E),this.scrollX=b-T,this.scrollY=E-w}l(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(m,g,T,w,b,E){return this.fadeEffect.start(!1,m,g,T,w,!0,b,E)},fadeOut:function(m,g,T,w,b,E){return this.fadeEffect.start(!0,m,g,T,w,!0,b,E)},fadeFrom:function(m,g,T,w,b,E,A){return this.fadeEffect.start(!1,m,g,T,w,b,E,A)},fade:function(m,g,T,w,b,E,A){return this.fadeEffect.start(!0,m,g,T,w,b,E,A)},flash:function(m,g,T,w,b,E,A){return this.flashEffect.start(m,g,T,w,b,E,A)},shake:function(m,g,T,w,b){return this.shakeEffect.start(m,g,T,w,b)},pan:function(m,g,T,w,b,E,A){return this.panEffect.start(m,g,T,w,b,E,A)},rotateTo:function(m,g,T,w,b,E,A){return this.rotateToEffect.start(m,g,T,w,b,E,A)},zoomTo:function(m,g,T,w,b,E){return this.zoomEffect.start(m,g,T,w,b,E)},preRender:function(){this.renderList.length=0;var m=this.width,g=this.height,T=m*.5,w=g*.5,b=this.zoom,E=this.matrix,A=m*this.originX,R=g*this.originY,I=this._follow,P=this.deadzone,M=this.scrollX,F=this.scrollY;P&&l(P,this.midPoint.x,this.midPoint.y);var O=!1;if(I&&!this.panEffect.isRunning){var D=this.lerp,L=I.x-this.followOffset.x,z=I.y-this.followOffset.y;P?(L<P.x?M=d(M,M-(P.x-L),D.x):L>P.right&&(M=d(M,M+(L-P.right),D.x)),z<P.y?F=d(F,F-(P.y-z),D.y):z>P.bottom&&(F=d(F,F+(z-P.bottom),D.y))):(M=d(M,L-A,D.x),F=d(F,z-R,D.y)),O=!0}this.useBounds&&(M=this.clampX(M),F=this.clampY(F)),this.scrollX=M,this.scrollY=F;var X=M+T,H=F+w;this.midPoint.set(X,H);var J=m/b,G=g/b,k=Math.floor(X-J/2),N=Math.floor(H-G/2);this.worldView.setTo(k,N,J,G),E.applyITRS(Math.floor(this.x+A),Math.floor(this.y+R),this.rotation,b,b),E.translate(-A,-R),this.shakeEffect.preRender(),O&&this.emit(h.FOLLOW_UPDATE,this,I)},setLerp:function(m,g){return m===void 0&&(m=1),g===void 0&&(g=m),this.lerp.set(m,g),this},setFollowOffset:function(m,g){return m===void 0&&(m=0),g===void 0&&(g=0),this.followOffset.set(m,g),this},startFollow:function(m,g,T,w,b,E){g===void 0&&(g=!1),T===void 0&&(T=1),w===void 0&&(w=T),b===void 0&&(b=0),E===void 0&&(E=b),this._follow=m,this.roundPixels=g,T=a(T,0,1),w=a(w,0,1),this.lerp.set(T,w),this.followOffset.set(b,E);var A=this.width/2,R=this.height/2,I=m.x-b,P=m.y-E;return this.midPoint.set(I,P),this.scrollX=I-A,this.scrollY=P-R,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(m,g){this.visible&&(this.rotateToEffect.update(m,g),this.panEffect.update(m,g),this.zoomEffect.update(m,g),this.shakeEffect.update(m,g),this.flashEffect.update(m,g),this.fadeEffect.update(m,g))},destroy:function(){this.resetFX(),s.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});o.exports=v},62382:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47751),l=t(56694),a=t(72632),r=t(91963),i=t(94287),n=t(40444),h=t(7599),d=new l({initialize:function(p){this.scene=p,this.systems=p.sys,this.roundPixels=p.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,p.sys.events.once(h.BOOT,this.boot,this),p.sys.events.on(h.START,this.start,this)},boot:function(){var u=this.systems;u.settings.cameras?this.fromJSON(u.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new s(0,0,u.scale.width,u.scale.height).setScene(this.scene),u.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){if(!this.main){var u=this.systems;u.settings.cameras?this.fromJSON(u.settings.cameras):this.add(),this.main=this.cameras[0]}var p=this.systems.events;p.on(h.UPDATE,this.update,this),p.once(h.SHUTDOWN,this.shutdown,this)},add:function(u,p,v,m,g,T){u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=this.scene.sys.scale.width),m===void 0&&(m=this.scene.sys.scale.height),g===void 0&&(g=!1),T===void 0&&(T="");var w=new s(u,p,v,m);return w.setName(T),w.setScene(this.scene),w.setRoundPixels(this.roundPixels),w.id=this.getNextID(),this.cameras.push(w),g&&(this.main=w),w},addExisting:function(u,p){p===void 0&&(p=!1);var v=this.cameras.indexOf(u);return v===-1?(u.id=this.getNextID(),u.setRoundPixels(this.roundPixels),this.cameras.push(u),p&&(this.main=u),u):null},getNextID:function(){for(var u=this.cameras,p=1,v=0;v<32;v++){for(var m=!1,g=0;g<u.length;g++){var T=u[g];if(T&&T.id===p){m=!0;continue}}if(m)p=p<<1;else return p}return 0},getTotal:function(u){u===void 0&&(u=!1);for(var p=0,v=this.cameras,m=0;m<v.length;m++){var g=v[m];(!u||u&&g.visible)&&p++}return p},fromJSON:function(u){Array.isArray(u)||(u=[u]);for(var p=this.scene.sys.scale.width,v=this.scene.sys.scale.height,m=0;m<u.length;m++){var g=u[m],T=a(g,"x",0),w=a(g,"y",0),b=a(g,"width",p),E=a(g,"height",v),A=this.add(T,w,b,E);A.name=a(g,"name",""),A.zoom=a(g,"zoom",1),A.rotation=a(g,"rotation",0),A.scrollX=a(g,"scrollX",0),A.scrollY=a(g,"scrollY",0),A.roundPixels=a(g,"roundPixels",!1),A.visible=a(g,"visible",!0);var R=a(g,"backgroundColor",!1);R&&A.setBackgroundColor(R);var I=a(g,"bounds",null);if(I){var P=a(I,"x",0),M=a(I,"y",0),F=a(I,"width",p),O=a(I,"height",v);A.setBounds(P,M,F,O)}}return this},getCamera:function(u){for(var p=this.cameras,v=0;v<p.length;v++)if(p[v].name===u)return p[v];return null},getCamerasBelowPointer:function(u){for(var p=this.cameras,v=u.x,m=u.y,g=[],T=0;T<p.length;T++){var w=p[T];w.visible&&w.inputEnabled&&i(w,v,m)&&g.unshift(w)}return g},remove:function(u,p){p===void 0&&(p=!0),Array.isArray(u)||(u=[u]);for(var v=0,m=this.cameras,g=0;g<u.length;g++){var T=m.indexOf(u[g]);T!==-1&&(p?m[T].destroy():m[T].renderList=[],m.splice(T,1),v++)}return!this.main&&m[0]&&(this.main=m[0]),v},render:function(u,p){for(var v=this.scene,m=this.cameras,g=0;g<m.length;g++){var T=m[g];if(T.visible&&T.alpha>0){T.preRender();var w=this.getVisibleChildren(p.getChildren(),T);u.render(v,w,T)}}},getVisibleChildren:function(u,p){return u.filter(function(v){return v.willRender(p)})},resetAll:function(){for(var u=0;u<this.cameras.length;u++)this.cameras[u].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(u,p){for(var v=0;v<this.cameras.length;v++)this.cameras[v].update(u,p)},onResize:function(u,p,v,m,g){for(var T=0;T<this.cameras.length;T++){var w=this.cameras[T];w._x===0&&w._y===0&&w._width===m&&w._height===g&&w.setSize(p.width,p.height)}},resize:function(u,p){for(var v=0;v<this.cameras.length;v++)this.cameras[v].setSize(u,p)},shutdown:function(){this.main=void 0;for(var u=0;u<this.cameras.length;u++)this.cameras[u].destroy();this.cameras=[];var p=this.systems.events;p.off(h.UPDATE,this.update,this),p.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(h.START,this.start,this),this.systems.events.off(h.DESTROY,this.destroy,this),this.systems.game.scale.off(n.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});r.register("CameraManager",d,"cameras"),o.exports=d},92522:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(89787),r=new l({initialize:function(n){this.camera=n,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,n,h,d,u,p,v,m){if(i===void 0&&(i=!0),n===void 0&&(n=1e3),h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=!1),v===void 0&&(v=null),m===void 0&&(m=this.camera.scene),!p&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=n,this.direction=i,this.progress=0,this.red=h,this.green=d,this.blue=u,this.alpha=i?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=m;var g=i?a.FADE_OUT_START:a.FADE_IN_START;return this.camera.emit(g,this.camera,this,n,h,d,u),this.camera},update:function(i,n){this.isRunning&&(this._elapsed+=n,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(i){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(i,n){if(!this.isRunning&&!this.isComplete)return!1;var h=this.camera,d=this.red/255,u=this.green/255,p=this.blue/255;return i.drawFillRect(h.x,h.y,h.width,h.height,n(p,u,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var i=this.direction?a.FADE_OUT_COMPLETE:a.FADE_IN_COMPLETE;this.camera.emit(i,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=r},22151:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(89787),r=new l({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(i,n,h,d,u,p,v){return i===void 0&&(i=250),n===void 0&&(n=255),h===void 0&&(h=255),d===void 0&&(d=255),u===void 0&&(u=!1),p===void 0&&(p=null),v===void 0&&(v=this.camera.scene),!u&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=i,this.progress=0,this.red=n,this.green=h,this.blue=d,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=v,this.camera.emit(a.FLASH_START,this.camera,this,i,n,h,d),this.camera)},update:function(i,n){this.isRunning&&(this._elapsed+=n,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(i){if(!this.isRunning)return!1;var n=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(i,n){if(!this.isRunning)return!1;var h=this.camera,d=this.red/255,u=this.green/255,p=this.blue/255;return i.drawFillRect(h.x,h.y,h.width,h.height,n(p,u,d,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=r},37551:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(35060),r=t(89787),i=t(93736),n=new l({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=new i,this.current=new i,this.destination=new i,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,d,u,p,v,m,g){u===void 0&&(u=1e3),p===void 0&&(p=a.Linear),v===void 0&&(v=!1),m===void 0&&(m=null),g===void 0&&(g=this.camera.scene);var T=this.camera;return!v&&this.isRunning||(this.isRunning=!0,this.duration=u,this.progress=0,this.source.set(T.scrollX,T.scrollY),this.destination.set(h,d),T.getScroll(h,d,this.current),typeof p=="string"&&a.hasOwnProperty(p)?this.ease=a[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=m,this._onUpdateScope=g,this.camera.emit(r.PAN_START,this.camera,this,u,h,d)),T},update:function(h,d){if(this.isRunning){this._elapsed+=d;var u=s(this._elapsed/this.duration,0,1);this.progress=u;var p=this.camera;if(this._elapsed<this.duration){var v=this.ease(u);p.getScroll(this.destination.x,this.destination.y,this.current);var m=this.source.x+(this.current.x-this.source.x)*v,g=this.source.y+(this.current.y-this.source.y)*v;p.setScroll(m,g),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,u,m,g)}else p.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,u,p.scrollX,p.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=n},1771:(o,x,t)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var s=t(82897),l=t(56694),a=t(89787),r=t(35060),i=new l({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(n,h,d,u,p,v,m){d===void 0&&(d=1e3),u===void 0&&(u=r.Linear),p===void 0&&(p=!1),v===void 0&&(v=null),m===void 0&&(m=this.camera.scene),h===void 0&&(h=!1),this.shortestPath=h;var g=n;n<0?(g=-1*n,this.clockwise=!1):this.clockwise=!0;var T=360*Math.PI/180;g=g-Math.floor(g/T)*T;var w=this.camera;if(!p&&this.isRunning)return w;if(this.isRunning=!0,this.duration=d,this.progress=0,this.source=w.rotation,this.destination=g,typeof u=="string"&&r.hasOwnProperty(u)?this.ease=r[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=m,this.shortestPath){var b=0,E=0;this.destination>this.source?b=Math.abs(this.destination-this.source):b=Math.abs(this.destination+T)-this.source,this.source>this.destination?E=Math.abs(this.source-this.destination):E=Math.abs(this.source+T)-this.destination,b<E?this.clockwise=!0:b>E&&(this.clockwise=!1)}return this.camera.emit(a.ROTATE_START,this.camera,this,d,g),w},update:function(n,h){if(this.isRunning){this._elapsed+=h;var d=s(this._elapsed/this.duration,0,1);this.progress=d;var u=this.camera;if(this._elapsed<this.duration){var p=this.ease(d);this.current=u.rotation;var v=0,m=360*Math.PI/180,g=this.destination,T=this.current;this.clockwise===!1&&(g=this.current,T=this.destination),g>=T?v=Math.abs(g-T):v=Math.abs(g+m)-T;var w=0;this.clockwise?w=u.rotation+v*p:w=u.rotation-v*p,u.rotation=w,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,d,w)}else u.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,d,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=i},3241:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(89787),r=t(93736),i=new l({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.intensity=new r,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(n,h,d,u,p){return n===void 0&&(n=100),h===void 0&&(h=.05),d===void 0&&(d=!1),u===void 0&&(u=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,typeof h=="number"?this.intensity.set(h):this.intensity.set(h.x,h.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=u,this._onUpdateScope=p,this.camera.emit(a.SHAKE_START,this.camera,this,n,h),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(n,h){if(this.isRunning)if(this._elapsed+=h,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var d=this.intensity,u=this.camera.width,p=this.camera.height,v=this.camera.zoom;this._offsetX=(Math.random()*d.x*u*2-d.x*u)*v,this._offsetY=(Math.random()*d.y*p*2-d.y*p)*v,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});o.exports=i},13383:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(35060),r=t(89787),i=new l({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,h,d,u,p,v){h===void 0&&(h=1e3),d===void 0&&(d=a.Linear),u===void 0&&(u=!1),p===void 0&&(p=null),v===void 0&&(v=this.camera.scene);var m=this.camera;return!u&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source=m.zoom,this.destination=n,typeof d=="string"&&a.hasOwnProperty(d)?this.ease=a[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=v,this.camera.emit(r.ZOOM_START,this.camera,this,h,n)),m},update:function(n,h){this.isRunning&&(this._elapsed+=h,this.progress=s(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=i},53030:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Fade:t(92522),Flash:t(22151),Pan:t(37551),Shake:t(3241),RotateTo:t(1771),Zoom:t(13383)}},39577:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameradestroy"},85373:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeincomplete"},92057:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeinstart"},1903:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutcomplete"},96131:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutstart"},85409:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashcomplete"},25500:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashstart"},44071:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="followupdate"},19818:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapancomplete"},80002:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapanstart"},87966:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},74217:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},34805:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatecomplete"},30408:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatestart"},49856:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakecomplete"},69189:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakestart"},67657:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomcomplete"},14229:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomstart"},89787:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DESTROY:t(39577),FADE_IN_COMPLETE:t(85373),FADE_IN_START:t(92057),FADE_OUT_COMPLETE:t(1903),FADE_OUT_START:t(96131),FLASH_COMPLETE:t(85409),FLASH_START:t(25500),FOLLOW_UPDATE:t(44071),PAN_COMPLETE:t(19818),PAN_START:t(80002),POST_RENDER:t(87966),PRE_RENDER:t(74217),ROTATE_COMPLETE:t(34805),ROTATE_START:t(30408),SHAKE_COMPLETE:t(49856),SHAKE_START:t(69189),ZOOM_COMPLETE:t(67657),ZOOM_START:t(14229)}},32356:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Camera:t(47751),BaseCamera:t(51052),CameraManager:t(62382),Effects:t(53030),Events:t(89787)}},84219:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(10850),a=new s({initialize:function(i){this.camera=l(i,"camera",null),this.left=l(i,"left",null),this.right=l(i,"right",null),this.up=l(i,"up",null),this.down=l(i,"down",null),this.zoomIn=l(i,"zoomIn",null),this.zoomOut=l(i,"zoomOut",null),this.zoomSpeed=l(i,"zoomSpeed",.01),this.minZoom=l(i,"minZoom",.001),this.maxZoom=l(i,"maxZoom",1e3),this.speedX=0,this.speedY=0;var n=l(i,"speed",null);typeof n=="number"?(this.speedX=n,this.speedY=n):(this.speedX=l(i,"speed.x",0),this.speedY=l(i,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var i=this.camera;this.up&&this.up.isDown?i.scrollY-=this.speedY*r|0:this.down&&this.down.isDown&&(i.scrollY+=this.speedY*r|0),this.left&&this.left.isDown?i.scrollX-=this.speedX*r|0:this.right&&this.right.isDown&&(i.scrollX+=this.speedX*r|0),this.zoomIn&&this.zoomIn.isDown?(i.zoom-=this.zoomSpeed,i.zoom<this.minZoom&&(i.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(i.zoom+=this.zoomSpeed,i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=a},69370:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(10850),a=new s({initialize:function(i){this.camera=l(i,"camera",null),this.left=l(i,"left",null),this.right=l(i,"right",null),this.up=l(i,"up",null),this.down=l(i,"down",null),this.zoomIn=l(i,"zoomIn",null),this.zoomOut=l(i,"zoomOut",null),this.zoomSpeed=l(i,"zoomSpeed",.01),this.minZoom=l(i,"minZoom",.001),this.maxZoom=l(i,"maxZoom",1e3),this.accelX=0,this.accelY=0;var n=l(i,"acceleration",null);typeof n=="number"?(this.accelX=n,this.accelY=n):(this.accelX=l(i,"acceleration.x",0),this.accelY=l(i,"acceleration.y",0)),this.dragX=0,this.dragY=0;var h=l(i,"drag",null);typeof h=="number"?(this.dragX=h,this.dragY=h):(this.dragX=l(i,"drag.x",0),this.dragY=l(i,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var d=l(i,"maxSpeed",null);typeof d=="number"?(this.maxSpeedX=d,this.maxSpeedY=d):(this.maxSpeedX=l(i,"maxSpeed.x",0),this.maxSpeedY=l(i,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var i=this.camera;this._speedX>0?(this._speedX-=this.dragX*r,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*r,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*r,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*r,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(i.scrollX-=this._speedX*r|0),this._speedY!==0&&(i.scrollY-=this._speedY*r|0),this._zoom!==0&&(i.zoom+=this._zoom,i.zoom<this.minZoom?i.zoom=this.minZoom:i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=a},6524:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FixedKeyControl:t(84219),SmoothedKeyControl:t(69370)}},44143:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Controls:t(6524),Scene2D:t(32356)}},86459:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={VERSION:"3.70.0",BlendModes:t(95723),ScaleModes:t(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};o.exports=s},14033:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(86459),a=t(18360),r=t(77290),i=t(72632),n=t(10850),h=t(42911),d=t(72283),u=t(5923),p=t(65641),v=t(93222),m=new s({initialize:function(T){T===void 0&&(T={});var w=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],b="#ffffff",E=n(T,"scale",null);this.width=n(E,"width",1024,T),this.height=n(E,"height",768,T),this.zoom=n(E,"zoom",1,T),this.parent=n(E,"parent",void 0,T),this.scaleMode=n(E,E?"mode":"scaleMode",0,T),this.expandParent=n(E,"expandParent",!0,T),this.autoRound=n(E,"autoRound",!1,T),this.autoCenter=n(E,"autoCenter",0,T),this.resizeInterval=n(E,"resizeInterval",500,T),this.fullscreenTarget=n(E,"fullscreenTarget",null,T),this.minWidth=n(E,"min.width",0,T),this.maxWidth=n(E,"max.width",0,T),this.minHeight=n(E,"min.height",0,T),this.maxHeight=n(E,"max.height",0,T),this.renderType=n(T,"type",l.AUTO),this.canvas=n(T,"canvas",null),this.context=n(T,"context",null),this.canvasStyle=n(T,"canvasStyle",null),this.customEnvironment=n(T,"customEnvironment",!1),this.sceneConfig=n(T,"scene",null),this.seed=n(T,"seed",[(Date.now()*Math.random()).toString()]),u.RND=new u.RandomDataGenerator(this.seed),this.gameTitle=n(T,"title",""),this.gameURL=n(T,"url","https://phaser.io"),this.gameVersion=n(T,"version",""),this.autoFocus=n(T,"autoFocus",!0),this.stableSort=n(T,"stableSort",-1),this.stableSort===-1&&(this.stableSort=r.browser.es2019?1:0),r.features.stableSort=this.stableSort,this.domCreateContainer=n(T,"dom.createContainer",!1),this.domPointerEvents=n(T,"dom.pointerEvents","none"),this.inputKeyboard=n(T,"input.keyboard",!0),this.inputKeyboardEventTarget=n(T,"input.keyboard.target",window),this.inputKeyboardCapture=n(T,"input.keyboard.capture",[]),this.inputMouse=n(T,"input.mouse",!0),this.inputMouseEventTarget=n(T,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(T,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(T,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(T,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(T,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(T,"input.touch",r.input.touch),this.inputTouchEventTarget=n(T,"input.touch.target",null),this.inputTouchCapture=n(T,"input.touch.capture",!0),this.inputActivePointers=n(T,"input.activePointers",1),this.inputSmoothFactor=n(T,"input.smoothFactor",0),this.inputWindowEvents=n(T,"input.windowEvents",!0),this.inputGamepad=n(T,"input.gamepad",!1),this.inputGamepadEventTarget=n(T,"input.gamepad.target",window),this.disableContextMenu=n(T,"disableContextMenu",!1),this.audio=n(T,"audio",{}),this.hideBanner=n(T,"banner",null)===!1,this.hidePhaser=n(T,"banner.hidePhaser",!1),this.bannerTextColor=n(T,"banner.text",b),this.bannerBackgroundColor=n(T,"banner.background",w),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(T,"fps",null),this.disablePreFX=n(T,"disablePreFX",!1),this.disablePostFX=n(T,"disablePostFX",!1);var A=n(T,"render",null);this.pipeline=n(A,"pipeline",null,T),this.autoMobilePipeline=n(A,"autoMobilePipeline",!0,T),this.defaultPipeline=n(A,"defaultPipeline",p.MULTI_PIPELINE,T),this.antialias=n(A,"antialias",!0,T),this.antialiasGL=n(A,"antialiasGL",!0,T),this.mipmapFilter=n(A,"mipmapFilter","",T),this.desynchronized=n(A,"desynchronized",!1,T),this.roundPixels=n(A,"roundPixels",!0,T),this.pixelArt=n(A,"pixelArt",this.zoom!==1,T),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(A,"transparent",!1,T),this.clearBeforeRender=n(A,"clearBeforeRender",!0,T),this.preserveDrawingBuffer=n(A,"preserveDrawingBuffer",!1,T),this.premultipliedAlpha=n(A,"premultipliedAlpha",!0,T),this.failIfMajorPerformanceCaveat=n(A,"failIfMajorPerformanceCaveat",!1,T),this.powerPreference=n(A,"powerPreference","default",T),this.batchSize=n(A,"batchSize",4096,T),this.maxTextures=n(A,"maxTextures",-1,T),this.maxLights=n(A,"maxLights",10,T);var R=n(T,"backgroundColor",0);this.backgroundColor=v(R),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=n(T,"callbacks.preBoot",d),this.postBoot=n(T,"callbacks.postBoot",d),this.physics=n(T,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(T,"loader.baseURL",""),this.loaderPath=n(T,"loader.path",""),this.loaderMaxParallelDownloads=n(T,"loader.maxParallelDownloads",r.os.android?6:32),this.loaderCrossOrigin=n(T,"loader.crossOrigin",void 0),this.loaderResponseType=n(T,"loader.responseType",""),this.loaderAsync=n(T,"loader.async",!0),this.loaderUser=n(T,"loader.user",""),this.loaderPassword=n(T,"loader.password",""),this.loaderTimeout=n(T,"loader.timeout",0),this.loaderWithCredentials=n(T,"loader.withCredentials",!1),this.loaderImageLoadType=n(T,"loader.imageLoadType","XHR"),this.loaderLocalScheme=n(T,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=n(T,"fx.glow.quality",.1),this.glowFXDistance=n(T,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var I=n(T,"plugins",null),P=a.DefaultScene;I&&(Array.isArray(I)?this.defaultPlugins=I:h(I)&&(this.installGlobalPlugins=i(I,"global",[]),this.installScenePlugins=i(I,"scene",[]),Array.isArray(I.default)?P=I.default:Array.isArray(I.defaultMerge)&&(P=P.concat(I.defaultMerge)))),this.defaultPlugins=P;var M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(T,"images.default",M+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(T,"images.missing",M+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(T,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=l.WEBGL:window.FORCE_CANVAS&&(this.renderType=l.CANVAS))}});o.exports=m},50150:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70616),l=t(61068),a=t(86459),r=t(90185),i=function(n){var h=n.config;if((h.customEnvironment||h.canvas)&&h.renderType===a.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!h.customEnvironment&&!h.canvas&&h.renderType!==a.HEADLESS)if(h.renderType===a.AUTO&&(h.renderType=r.webGL?a.WEBGL:a.CANVAS),h.renderType===a.WEBGL){if(!r.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(h.renderType===a.CANVAS){if(!r.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+h.renderType);h.antialias||l.disableSmoothing();var d=n.scale.baseSize,u=d.width,p=d.height;if(h.canvas?(n.canvas=h.canvas,n.canvas.width=u,n.canvas.height=p):n.canvas=l.create(n,u,p,h.renderType),h.canvasStyle&&(n.canvas.style=h.canvasStyle),h.antialias||s.setCrisp(n.canvas),h.renderType!==a.HEADLESS){var v,m;v=t(91135),m=t(11857),h.renderType===a.WEBGL?n.renderer=new m(n):(n.renderer=new v(n),n.context=n.renderer.gameContext)}};o.exports=i},77291:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86459),l=function(a){var r=a.config;if(!r.hideBanner){var i="WebGL";r.renderType===s.CANVAS?i="Canvas":r.renderType===s.HEADLESS&&(i="Headless");var n=r.audio,h=a.device.audio,d;if(h.webAudio&&!n.disableWebAudio?d="Web Audio":n.noAudio||!h.webAudio&&!h.audioData?d="No Audio":d="HTML5 Audio",a.device.browser.ie)window.console&&console.log("Phaser v"+s.VERSION+" / https://phaser.io");else{var u="",p=[u];if(Array.isArray(r.bannerBackgroundColor)){var v;r.bannerBackgroundColor.forEach(function(g){u=u.concat("%c "),p.push("background: "+g),v=g}),p[p.length-1]="color: "+r.bannerTextColor+"; background: "+v}else u=u.concat("%c "),p.push("color: "+r.bannerTextColor+"; background: "+r.bannerBackgroundColor);p.push("background: transparent"),r.gameTitle&&(u=u.concat(r.gameTitle),r.gameVersion&&(u=u.concat(" v"+r.gameVersion)),r.hidePhaser||(u=u.concat(" / ")));var m="";r.hidePhaser||(u=u.concat("Phaser v"+s.VERSION+m+" ("+i+" | "+d+")")),u=u.concat(" %c "+r.gameURL),p[0]=u,console.log.apply(console,p)}}};o.exports=l},15213:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99584),l=t(90249),a=t(43474),r=t(61068),i=t(56694),n=t(14033),h=t(85178),d=t(50150),u=t(81078),p=t(77291),v=t(77290),m=t(21546),g=t(6659),T=t(97081),w=t(69898),b=t(91963),E=t(49274),A=t(756),R=t(13553),I=t(38203),P=t(6237),M=t(26617),F=t(26493),O=t(84191),D=new i({initialize:function(z){this.config=new n(z),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new l(this),this.textures=new P(this),this.cache=new a(this),this.registry=new u(this,new g),this.input=new w(this,this.config),this.scene=new R(this,this.config.sceneConfig),this.device=v,this.scale=new A(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new M(this,this.config.fps),this.plugins=new E(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,m(this.boot.bind(this))},boot:function(){if(!b.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),d(this),h(this),p(this),s(this.canvas,this.config.parent),this.textures.once(I.READY,this.texturesReady,this),this.events.emit(T.BOOT)},texturesReady:function(){this.events.emit(T.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),F(this);var L=this.events;L.on(T.HIDDEN,this.onHidden,this),L.on(T.VISIBLE,this.onVisible,this),L.on(T.BLUR,this.onBlur,this),L.on(T.FOCUS,this.onFocus,this)},step:function(L,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var X=this.events;X.emit(T.PRE_STEP,L,z),X.emit(T.STEP,L,z),this.scene.update(L,z),X.emit(T.POST_STEP,L,z);var H=this.renderer;H.preRender(),X.emit(T.PRE_RENDER,H,L,z),this.scene.render(H),H.postRender(),X.emit(T.POST_RENDER,H,L,z)}},headlessStep:function(L,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var X=this.events;X.emit(T.PRE_STEP,L,z),X.emit(T.STEP,L,z),this.scene.update(L,z),X.emit(T.POST_STEP,L,z),this.scene.isProcessing=!1,X.emit(T.PRE_RENDER,null,L,z),X.emit(T.POST_RENDER,null,L,z)}},onHidden:function(){this.loop.pause(),this.events.emit(T.PAUSE)},pause:function(){var L=this.isPaused;this.isPaused=!0,L||this.events.emit(T.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(T.RESUME)},resume:function(){var L=this.isPaused;this.isPaused=!1,L&&this.events.emit(T.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(L,z){z===void 0&&(z=!1),this.pendingDestroy=!0,this.removeCanvas=L,this.noReturn=z},runDestroy:function(){this.scene.destroy(),this.events.emit(T.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(r.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});o.exports=D},26617:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(10850),a=t(72283),r=t(27385),i=new s({initialize:function(h,d){this.game=h,this.raf=new r,this.started=!1,this.running=!1,this.minFps=l(d,"min",5),this.targetFps=l(d,"target",60),this.fpsLimit=l(d,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=a,this.forceSetTimeOut=l(d,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=l(d,"deltaHistory",10),this.panicMax=l(d,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=l(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var n=window.performance.now();this.time=n,this.lastTime=n,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=Math.min(this._target,this.deltaHistory[h]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(n){if(this.started)return this;this.started=!0,this.running=!0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=n;var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target)},smoothDelta:function(n){var h=this.deltaIndex,d=this.deltaHistory,u=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=d[h],n=Math.min(n,this._min)),d[h]=n,this.deltaIndex++,this.deltaIndex>=u&&(this.deltaIndex=0);for(var p=0,v=0;v<u;v++)p+=d[v];return p/=u,p},updateFPS:function(n){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0},stepLimitFPS:function(n){this.now=n;var h=Math.max(0,n-this.lastTime);this.rawDelta=h,this.time+=this.rawDelta,this.smoothStep&&(h=this.smoothDelta(h)),this.delta+=h,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(n,this.delta),this.delta=0),this.lastTime=n,this.frame++},step:function(n){this.now=n;var h=Math.max(0,n-this.lastTime);this.rawDelta=h,this.time+=this.rawDelta,this.smoothStep&&(h=this.smoothDelta(h)),this.delta=h,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.callback(n,h),this.lastTime=n,this.frame++},tick:function(){var n=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(n):this.step(n)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(n){n===void 0&&(n=!1);var h=window.performance.now();if(!this.running){n&&(this.startTime+=-this.lastTime+(this.lastTime+h));var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=h+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});o.exports=i},26493:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97081),l=function(a){var r,i=a.events;if(document.hidden!==void 0)r="visibilitychange";else{var n=["webkit","moz","ms"];n.forEach(function(d){document[d+"Hidden"]!==void 0&&(document.hidden=function(){return document[d+"Hidden"]},r=d+"visibilitychange")})}var h=function(d){document.hidden||d.type==="pause"?i.emit(s.HIDDEN):i.emit(s.VISIBLE)};r&&document.addEventListener(r,h,!1),window.onblur=function(){i.emit(s.BLUR)},window.onfocus=function(){i.emit(s.FOCUS)},window.focus&&a.config.autoFocus&&window.focus()};o.exports=l},41651:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="blur"},5520:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},51673:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="contextlost"},25055:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},23767:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="focus"},57564:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="hidden"},38327:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},43807:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},73652:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="poststep"},780:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},13781:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prestep"},38247:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},29129:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},34994:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="step"},55237:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="systemready"},98704:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="visible"},97081:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BLUR:t(41651),BOOT:t(5520),CONTEXT_LOST:t(51673),DESTROY:t(25055),FOCUS:t(23767),HIDDEN:t(57564),PAUSE:t(38327),POST_RENDER:t(43807),POST_STEP:t(73652),PRE_RENDER:t(780),PRE_STEP:t(13781),READY:t(38247),RESUME:t(29129),STEP:t(34994),SYSTEM_READY:t(55237),VISIBLE:t(98704)}},80293:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Config:t(14033),CreateRenderer:t(50150),DebugHeader:t(77291),Events:t(97081),TimeStep:t(26617),VisibilityHandler:t(26493)}},52780:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(81543),l=t(61068),a=t(10850),r=function(i){var n=a(i,"data",[]),h=a(i,"canvas",null),d=a(i,"palette",s),u=a(i,"pixelWidth",1),p=a(i,"pixelHeight",u),v=a(i,"resizeCanvas",!0),m=a(i,"clearCanvas",!0),g=a(i,"preRender",null),T=a(i,"postRender",null),w=Math.floor(Math.abs(n[0].length*u)),b=Math.floor(Math.abs(n.length*p));h||(h=l.create2D(this,w,b),v=!1,m=!1),v&&(h.width=w,h.height=b);var E=h.getContext("2d",{willReadFrequently:!0});m&&E.clearRect(0,0,w,b),g&&g(h,E);for(var A=0;A<n.length;A++)for(var R=n[A],I=0;I<R.length;I++){var P=R[I];P!=="."&&P!==" "&&(E.fillStyle=d[P],E.fillRect(I*u,A*p,u,p))}return T&&T(h,E),h};o.exports=r},84106:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GenerateTexture:t(52780),Palettes:t(25235)}},81543:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARNE16:t(81543),C64:t(75846),CGA:t(83206),JMP:t(13194),MSX:t(50686)}},63120:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(34631),a=t(38517),r=t(93736),i=new s({Extends:a,initialize:function(h,d,u,p){a.call(this,"CubicBezierCurve"),Array.isArray(h)&&(p=new r(h[6],h[7]),u=new r(h[4],h[5]),d=new r(h[2],h[3]),h=new r(h[0],h[1])),this.p0=h,this.p1=d,this.p2=u,this.p3=p},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,h){h===void 0&&(h=new r);var d=this.p0,u=this.p1,p=this.p2,v=this.p3;return h.set(l(n,d.x,u.x,p.x,v.x),l(n,d.y,u.y,p.y,v.y))},draw:function(n,h){h===void 0&&(h=32);var d=this.getPoints(h);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var u=1;u<d.length;u++)n.lineTo(d[u].x,d[u].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});i.fromJSON=function(n){var h=n.points,d=new r(h[0],h[1]),u=new r(h[2],h[3]),p=new r(h[4],h[5]),v=new r(h[6],h[7]);return new i(d,u,p,v)},o.exports=i},38517:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(80222),a=t(74118),r=t(93736),i=new s({initialize:function(h){this.type=h,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new r,this._tmpVec2B=new r},draw:function(n,h){return h===void 0&&(h=32),n.strokePoints(this.getPoints(h))},getBounds:function(n,h){n||(n=new a),h===void 0&&(h=16);var d=this.getLength();h>d&&(h=d/2);var u=Math.max(1,Math.round(d/h));return l(this.getSpacedPoints(u),n)},getDistancePoints:function(n){var h=this.getLength(),d=Math.max(1,h/n);return this.getSpacedPoints(d)},getEndPoint:function(n){return n===void 0&&(n=new r),this.getPointAt(1,n)},getLength:function(){var n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var h=[],d,u=this.getPoint(0,this._tmpVec2A),p=0;h.push(0);for(var v=1;v<=n;v++)d=this.getPoint(v/n,this._tmpVec2B),p+=d.distance(u),h.push(p),u.copy(d);return this.cacheArcLengths=h,h},getPointAt:function(n,h){var d=this.getUtoTmapping(n);return this.getPoint(d,h)},getPoints:function(n,h,d){d===void 0&&(d=[]),n||(h?n=this.getLength()/h:n=this.defaultDivisions);for(var u=0;u<=n;u++)d.push(this.getPoint(u/n));return d},getRandomPoint:function(n){return n===void 0&&(n=new r),this.getPoint(Math.random(),n)},getSpacedPoints:function(n,h,d){d===void 0&&(d=[]),n||(h?n=this.getLength()/h:n=this.defaultDivisions);for(var u=0;u<=n;u++){var p=this.getUtoTmapping(u/n,null,n);d.push(this.getPoint(p))}return d},getStartPoint:function(n){return n===void 0&&(n=new r),this.getPointAt(0,n)},getTangent:function(n,h){h===void 0&&(h=new r);var d=1e-4,u=n-d,p=n+d;return u<0&&(u=0),p>1&&(p=1),this.getPoint(u,this._tmpVec2A),this.getPoint(p,h),h.subtract(this._tmpVec2A).normalize()},getTangentAt:function(n,h){var d=this.getUtoTmapping(n);return this.getTangent(d,h)},getTFromDistance:function(n,h){return n<=0?0:this.getUtoTmapping(0,n,h)},getUtoTmapping:function(n,h,d){var u=this.getLengths(d),p=0,v=u.length,m;h?m=Math.min(h,u[v-1]):m=n*u[v-1];for(var g=0,T=v-1,w;g<=T;)if(p=Math.floor(g+(T-g)/2),w=u[p]-m,w<0)g=p+1;else if(w>0)T=p-1;else{T=p;break}if(p=T,u[p]===m)return p/(v-1);var b=u[p],E=u[p+1],A=E-b,R=(m-b)/A;return(p+R)/(v-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});o.exports=i},48835:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(38517),a=t(75606),r=t(10850),i=t(23701),n=t(93736),h=new s({Extends:l,initialize:function(u,p,v,m,g,T,w,b){if(typeof u=="object"){var E=u;u=r(E,"x",0),p=r(E,"y",0),v=r(E,"xRadius",0),m=r(E,"yRadius",v),g=r(E,"startAngle",0),T=r(E,"endAngle",360),w=r(E,"clockwise",!1),b=r(E,"rotation",0)}else m===void 0&&(m=v),g===void 0&&(g=0),T===void 0&&(T=360),w===void 0&&(w=!1),b===void 0&&(b=0);l.call(this,"EllipseCurve"),this.p0=new n(u,p),this._xRadius=v,this._yRadius=m,this._startAngle=a(g),this._endAngle=a(T),this._clockwise=w,this._rotation=a(b)},getStartPoint:function(d){return d===void 0&&(d=new n),this.getPoint(0,d)},getResolution:function(d){return d*2},getPoint:function(d,u){u===void 0&&(u=new n);for(var p=Math.PI*2,v=this._endAngle-this._startAngle,m=Math.abs(v)<Number.EPSILON;v<0;)v+=p;for(;v>p;)v-=p;v<Number.EPSILON&&(m?v=0:v=p),this._clockwise&&!m&&(v===p?v=-p:v=v-p);var g=this._startAngle+d*v,T=this.p0.x+this._xRadius*Math.cos(g),w=this.p0.y+this._yRadius*Math.sin(g);if(this._rotation!==0){var b=Math.cos(this._rotation),E=Math.sin(this._rotation),A=T-this.p0.x,R=w-this.p0.y;T=A*b-R*E+this.p0.x,w=A*E+R*b+this.p0.y}return u.set(T,w)},setXRadius:function(d){return this.xRadius=d,this},setYRadius:function(d){return this.yRadius=d,this},setWidth:function(d){return this.xRadius=d/2,this},setHeight:function(d){return this.yRadius=d/2,this},setStartAngle:function(d){return this.startAngle=d,this},setEndAngle:function(d){return this.endAngle=d,this},setClockwise:function(d){return this.clockwise=d,this},setRotation:function(d){return this.rotation=d,this},x:{get:function(){return this.p0.x},set:function(d){this.p0.x=d}},y:{get:function(){return this.p0.y},set:function(d){this.p0.y=d}},xRadius:{get:function(){return this._xRadius},set:function(d){this._xRadius=d}},yRadius:{get:function(){return this._yRadius},set:function(d){this._yRadius=d}},startAngle:{get:function(){return i(this._startAngle)},set:function(d){this._startAngle=a(d)}},endAngle:{get:function(){return i(this._endAngle)},set:function(d){this._endAngle=a(d)}},clockwise:{get:function(){return this._clockwise},set:function(d){this._clockwise=d}},angle:{get:function(){return i(this._rotation)},set:function(d){this._rotation=a(d)}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:i(this._startAngle),endAngle:i(this._endAngle),clockwise:this._clockwise,rotation:i(this._rotation)}}});h.fromJSON=function(d){return new h(d)},o.exports=h},58084:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(38517),a=t(80222),r=t(74118),i=t(93736),n=new s({Extends:l,initialize:function(d,u){l.call(this,"LineCurve"),Array.isArray(d)&&(u=new i(d[2],d[3]),d=new i(d[0],d[1])),this.p0=d,this.p1=u,this.arcLengthDivisions=1},getBounds:function(h){return h===void 0&&(h=new r),a([this.p0,this.p1],h)},getStartPoint:function(h){return h===void 0&&(h=new i),h.copy(this.p0)},getResolution:function(h){return h===void 0&&(h=1),h},getPoint:function(h,d){return d===void 0&&(d=new i),h===1?d.copy(this.p1):(d.copy(this.p1).subtract(this.p0).scale(h).add(this.p0),d)},getPointAt:function(h,d){return this.getPoint(h,d)},getTangent:function(h,d){return d===void 0&&(d=new i),d.copy(this.p1).subtract(this.p0).normalize(),d},getUtoTmapping:function(h,d,u){var p;if(d){var v=this.getLengths(u),m=v[v.length-1],g=Math.min(d,m);p=g/m}else p=h;return p},draw:function(h){return h.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),h},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});n.fromJSON=function(h){var d=h.points,u=new i(d[0],d[1]),p=new i(d[2],d[3]);return new n(u,p)},o.exports=n},64761:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(38517),a=t(16252),r=t(93736),i=new s({Extends:l,initialize:function(h,d,u){l.call(this,"QuadraticBezierCurve"),Array.isArray(h)&&(u=new r(h[4],h[5]),d=new r(h[2],h[3]),h=new r(h[0],h[1])),this.p0=h,this.p1=d,this.p2=u},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,h){h===void 0&&(h=new r);var d=this.p0,u=this.p1,p=this.p2;return h.set(a(n,d.x,u.x,p.x),a(n,d.y,u.y,p.y))},draw:function(n,h){h===void 0&&(h=32);var d=this.getPoints(h);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var u=1;u<d.length;u++)n.lineTo(d[u].x,d[u].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});i.fromJSON=function(n){var h=n.points,d=new r(h[0],h[1]),u=new r(h[2],h[3]),p=new r(h[4],h[5]);return new i(d,u,p)},o.exports=i},11956:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14976),l=t(56694),a=t(38517),r=t(93736),i=new l({Extends:a,initialize:function(h){h===void 0&&(h=[]),a.call(this,"SplineCurve"),this.points=[],this.addPoints(h)},addPoints:function(n){for(var h=0;h<n.length;h++){var d=new r;typeof n[h]=="number"?(d.x=n[h],d.y=n[h+1],h++):Array.isArray(n[h])?(d.x=n[h][0],d.y=n[h][1]):(d.x=n[h].x,d.y=n[h].y),this.points.push(d)}return this},addPoint:function(n,h){var d=new r(n,h);return this.points.push(d),d},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.points[0])},getResolution:function(n){return n*this.points.length},getPoint:function(n,h){h===void 0&&(h=new r);var d=this.points,u=(d.length-1)*n,p=Math.floor(u),v=u-p,m=d[p===0?p:p-1],g=d[p],T=d[p>d.length-2?d.length-1:p+1],w=d[p>d.length-3?d.length-1:p+2];return h.set(s(v,m.x,g.x,T.x,w.x),s(v,m.y,g.y,T.y,w.y))},toJSON:function(){for(var n=[],h=0;h<this.points.length;h++)n.push(this.points[h].x),n.push(this.points[h].y);return{type:this.type,points:n}}});i.fromJSON=function(n){return new i(n.points)},o.exports=i},73962:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Path:t(12822),MoveTo:t(53639),CubicBezier:t(63120),Curve:t(38517),Ellipse:t(48835),Line:t(58084),QuadraticBezier:t(64761),Spline:t(11956)}},53639:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93736),a=new s({initialize:function(i,n){this.active=!1,this.p0=new l(i,n)},getPoint:function(r,i){return i===void 0&&(i=new l),i.copy(this.p0)},getPointAt:function(r,i){return this.getPoint(r,i)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});o.exports=a},12822:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(63120),a=t(48835),r=t(61286),i=t(58084),n=t(53639),h=t(64761),d=t(74118),u=t(11956),p=t(93736),v=t(83392),m=new s({initialize:function(T,w){T===void 0&&(T=0),w===void 0&&(w=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new p,this._tmpVec2A=new p,this._tmpVec2B=new p,typeof T=="object"?this.fromJSON(T):this.startPoint.set(T,w)},add:function(g){return this.curves.push(g),this},circleTo:function(g,T,w){return T===void 0&&(T=!1),this.ellipseTo(g,g,0,360,T,w)},closePath:function(){var g=this.curves[0].getPoint(0),T=this.curves[this.curves.length-1].getPoint(1);return g.equals(T)||this.curves.push(new i(T,g)),this},cubicBezierTo:function(g,T,w,b,E,A){var R=this.getEndPoint(),I,P,M;return g instanceof p?(I=g,P=T,M=w):(I=new p(w,b),P=new p(E,A),M=new p(g,T)),this.add(new l(R,I,P,M))},quadraticBezierTo:function(g,T,w,b){var E=this.getEndPoint(),A,R;return g instanceof p?(A=g,R=T):(A=new p(w,b),R=new p(g,T)),this.add(new h(E,A,R))},draw:function(g,T){for(var w=0;w<this.curves.length;w++){var b=this.curves[w];b.active&&b.draw(g,T)}return g},ellipseTo:function(g,T,w,b,E,A){var R=new a(0,0,g,T,w,b,E,A),I=this.getEndPoint(this._tmpVec2A),P=R.getStartPoint(this._tmpVec2B);return I.subtract(P),R.x=I.x,R.y=I.y,this.add(R)},fromJSON:function(g){this.curves=[],this.cacheLengths=[],this.startPoint.set(g.x,g.y),this.autoClose=g.autoClose;for(var T=0;T<g.curves.length;T++){var w=g.curves[T];switch(w.type){case"LineCurve":this.add(i.fromJSON(w));break;case"EllipseCurve":this.add(a.fromJSON(w));break;case"SplineCurve":this.add(u.fromJSON(w));break;case"CubicBezierCurve":this.add(l.fromJSON(w));break;case"QuadraticBezierCurve":this.add(h.fromJSON(w));break}}return this},getBounds:function(g,T){g===void 0&&(g=new d),T===void 0&&(T=16),g.x=Number.MAX_VALUE,g.y=Number.MAX_VALUE;for(var w=new d,b=v.MIN_SAFE_INTEGER,E=v.MIN_SAFE_INTEGER,A=0;A<this.curves.length;A++){var R=this.curves[A];R.active&&(R.getBounds(w,T),g.x=Math.min(g.x,w.x),g.y=Math.min(g.y,w.y),b=Math.max(b,w.right),E=Math.max(E,w.bottom))}return g.right=b,g.bottom=E,g},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var g=[],T=0,w=0;w<this.curves.length;w++)T+=this.curves[w].getLength(),g.push(T);return this.cacheLengths=g,g},getCurveAt:function(g){for(var T=g*this.getLength(),w=this.getCurveLengths(),b=0;b<w.length;){if(w[b]>=T)return this.curves[b];b++}return null},getEndPoint:function(g){return g===void 0&&(g=new p),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,g):g.copy(this.startPoint),g},getLength:function(){var g=this.getCurveLengths();return g[g.length-1]},getPoint:function(g,T){T===void 0&&(T=new p);for(var w=g*this.getLength(),b=this.getCurveLengths(),E=0;E<b.length;){if(b[E]>=w){var A=b[E]-w,R=this.curves[E],I=R.getLength(),P=I===0?0:1-A/I;return R.getPointAt(P,T)}E++}return null},getPoints:function(g,T){!g&&!T&&(g=this.defaultDivisions);for(var w=[],b,E=0;E<this.curves.length;E++){var A=this.curves[E];if(A.active)for(var R=A.getResolution(g),I=A.getPoints(R,T),P=0;P<I.length;P++){var M=I[P];b&&b.equals(M)||(w.push(M),b=M)}}return this.autoClose&&w.length>1&&!w[w.length-1].equals(w[0])&&w.push(w[0]),w},getRandomPoint:function(g){return g===void 0&&(g=new p),this.getPoint(Math.random(),g)},getSpacedPoints:function(g){g===void 0&&(g=40);for(var T=[],w=0;w<=g;w++)T.push(this.getPoint(w/g));return this.autoClose&&T.push(T[0]),T},getStartPoint:function(g){return g===void 0&&(g=new p),g.copy(this.startPoint)},getTangent:function(g,T){T===void 0&&(T=new p);for(var w=g*this.getLength(),b=this.getCurveLengths(),E=0;E<b.length;){if(b[E]>=w){var A=b[E]-w,R=this.curves[E],I=R.getLength(),P=I===0?0:1-A/I;return R.getTangentAt(P,T)}E++}return null},lineTo:function(g,T){g instanceof p?this._tmpVec2B.copy(g):this._tmpVec2B.set(g,T);var w=this.getEndPoint(this._tmpVec2A);return this.add(new i([w.x,w.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(g){return g.unshift(this.getEndPoint()),this.add(new u(g))},moveTo:function(g,T){return g instanceof p?this.add(new n(g.x,g.y)):this.add(new n(g,T))},toJSON:function(){for(var g=[],T=0;T<this.curves.length;T++)g.push(this.curves[T].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:g}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});r.register("path",function(g,T){return new m(g,T)}),o.exports=m},81078:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(35026),a=new s({initialize:function(i,n){this.parent=i,this.events=n,n||(this.events=i.events?i.events:i),this.list={},this.values={},this._frozen=!1,!i.hasOwnProperty("sys")&&this.events&&this.events.once(l.DESTROY,this.destroy,this)},get:function(r){var i=this.list;if(Array.isArray(r)){for(var n=[],h=0;h<r.length;h++)n.push(i[r[h]]);return n}else return i[r]},getAll:function(){var r={};for(var i in this.list)this.list.hasOwnProperty(i)&&(r[i]=this.list[i]);return r},query:function(r){var i={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(r)&&(i[n]=this.list[n]);return i},set:function(r,i){if(this._frozen)return this;if(typeof r=="string")return this.setValue(r,i);for(var n in r)this.setValue(n,r[n]);return this},inc:function(r,i){if(this._frozen)return this;i===void 0&&(i=1);var n=this.get(r);return n===void 0&&(n=0),this.set(r,n+i),this},toggle:function(r){return this._frozen?this:(this.set(r,!this.get(r)),this)},setValue:function(r,i){if(this._frozen)return this;if(this.has(r))this.values[r]=i;else{var n=this,h=this.list,d=this.events,u=this.parent;Object.defineProperty(this.values,r,{enumerable:!0,configurable:!0,get:function(){return h[r]},set:function(p){if(!n._frozen){var v=h[r];h[r]=p,d.emit(l.CHANGE_DATA,u,r,p,v),d.emit(l.CHANGE_DATA_KEY+r,u,p,v)}}}),h[r]=i,d.emit(l.SET_DATA,u,r,i)}return this},each:function(r,i){for(var n=[this.parent,null,void 0],h=1;h<arguments.length;h++)n.push(arguments[h]);for(var d in this.list)n[1]=d,n[2]=this.list[d],r.apply(i,n);return this},merge:function(r,i){i===void 0&&(i=!0);for(var n in r)r.hasOwnProperty(n)&&(i||!i&&!this.has(n))&&this.setValue(n,r[n]);return this},remove:function(r){if(this._frozen)return this;if(Array.isArray(r))for(var i=0;i<r.length;i++)this.removeValue(r[i]);else return this.removeValue(r);return this},removeValue:function(r){if(this.has(r)){var i=this.list[r];delete this.list[r],delete this.values[r],this.events.emit(l.REMOVE_DATA,this.parent,r,i)}return this},pop:function(r){var i=void 0;return!this._frozen&&this.has(r)&&(i=this.list[r],delete this.list[r],delete this.values[r],this.events.emit(l.REMOVE_DATA,this.parent,r,i)),i},has:function(r){return this.list.hasOwnProperty(r)},setFreeze:function(r){return this._frozen=r,this},reset:function(){for(var r in this.list)delete this.list[r],delete this.values[r];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(l.CHANGE_DATA),this.events.off(l.SET_DATA),this.events.off(l.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(r){this._frozen=!!r}},count:{get:function(){var r=0;for(var i in this.list)this.list[i]!==void 0&&r++;return r}}});o.exports=a},76508:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(81078),a=t(91963),r=t(7599),i=new s({Extends:l,initialize:function(h){l.call(this,h,h.sys.events),this.scene=h,this.systems=h.sys,h.sys.events.once(r.BOOT,this.boot,this),h.sys.events.on(r.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){l.prototype.destroy.call(this),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});a.register("DataManagerPlugin",i,"data"),o.exports=i},73569:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata"},15590:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata-"},37669:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},87090:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedata"},90142:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="setdata"},35026:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CHANGE_DATA:t(73569),CHANGE_DATA_KEY:t(15590),DESTROY:t(37669),REMOVE_DATA:t(87090),SET_DATA:t(90142)}},1999:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DataManager:t(81078),DataManagerPlugin:t(76508),Events:t(35026)}},10720:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1350),l={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function a(){if(typeof importScripts=="function")return l;l.audioData=!!window.Audio,l.webAudio=!!(window.AudioContext||window.webkitAudioContext);var r=document.createElement("audio"),i=!!r.canPlayType;try{if(i){var n=function(u,p){var v=r.canPlayType("audio/"+u).replace(/^no$/,"");return p?!!(v||r.canPlayType("audio/"+p).replace(/^no$/,"")):!!v};if(l.ogg=n('ogg; codecs="vorbis"'),l.opus=n('ogg; codecs="opus"',"opus"),l.mp3=n("mpeg"),l.wav=n("wav"),l.m4a=n("x-m4a"),l.aac=n("aac"),l.flac=n("flac","x-flac"),l.webm=n('webm; codecs="vorbis"'),r.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(s.edge)l.dolby=!0;else if(s.safari&&s.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var h=parseInt(RegExp.$1,10),d=parseInt(RegExp.$2,10);(h===10&&d>=11||h>10)&&(l.dolby=!0)}}}}catch{}return l}o.exports=a()},1350:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36580),l={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function a(){var r=navigator.userAgent;return/Edg\/\d+/.test(r)?(l.edge=!0,l.es2019=!0):/OPR/.test(r)?(l.opera=!0,l.es2019=!0):/Chrome\/(\d+)/.test(r)&&!s.windowsPhone?(l.chrome=!0,l.chromeVersion=parseInt(RegExp.$1,10),l.es2019=l.chromeVersion>69):/Firefox\D+(\d+)/.test(r)?(l.firefox=!0,l.firefoxVersion=parseInt(RegExp.$1,10),l.es2019=l.firefoxVersion>10):/AppleWebKit/.test(r)&&s.iOS?(l.mobileSafari=!0,l.es2019=!0):/MSIE (\d+\.\d+);/.test(r)?(l.ie=!0,l.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(r)&&!s.windowsPhone?(l.safari=!0,l.safariVersion=parseInt(RegExp.$1,10),l.es2019=l.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(l.ie=!0,l.trident=!0,l.tridentVersion=parseInt(RegExp.$1,10),l.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(l.silk=!0),l}o.exports=a()},98581:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l={supportInverseAlpha:!1,supportNewBlendModes:!1};function a(){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",h="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",d=new Image;return d.onload=function(){var u=new Image;u.onload=function(){var p=s.create2D(u,6),v=p.getContext("2d",{willReadFrequently:!0});if(v.globalCompositeOperation="multiply",v.drawImage(d,0,0),v.drawImage(u,2,0),!v.getImageData(2,0,1,1))return!1;var m=v.getImageData(2,0,1,1).data;s.remove(u),l.supportNewBlendModes=m[0]===255&&m[1]===0&&m[2]===0},u.src=n+"/wCKxvRF"+h},d.src=n+"AP804Oa6"+h,!1}function r(){var n=s.create2D(this,2),h=n.getContext("2d",{willReadFrequently:!0});h.fillStyle="rgba(10, 20, 30, 0.5)",h.fillRect(0,0,1,1);var d=h.getImageData(0,0,1,1);if(d===null)return!1;h.putImageData(d,1,0);var u=h.getImageData(1,0,1,1),p=u.data[0]===d.data[0]&&u.data[1]===d.data[1]&&u.data[2]===d.data[2]&&u.data[3]===d.data[3];return s.remove(this),p}function i(){return typeof importScripts!="function"&&document!==void 0&&(l.supportNewBlendModes=a(),l.supportInverseAlpha=r()),l}o.exports=i()},90185:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36580),l=t(1350),a=t(61068),r={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function i(){var h=new ArrayBuffer(4),d=new Uint8Array(h),u=new Uint32Array(h);return d[0]=161,d[1]=178,d[2]=195,d[3]=212,u[0]===3569595041?!0:u[0]===2712847316?!1:null}function n(){if(typeof importScripts=="function")return r;r.canvas=!!window.CanvasRenderingContext2D;try{r.localStorage=!!localStorage.getItem}catch{r.localStorage=!1}r.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,r.fileSystem=!!window.requestFileSystem;var h=!1,d=function(){if(window.WebGLRenderingContext)try{var u=a.createWebGL(this),p=u.getContext("webgl")||u.getContext("experimental-webgl"),v=a.create2D(this),m=v.getContext("2d",{willReadFrequently:!0}),g=m.createImageData(1,1);return h=g.data instanceof Uint8ClampedArray,a.remove(u),a.remove(v),!!p}catch{return!1}return!1};return r.webGL=d(),r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,l.firefox&&l.firefoxVersion<21&&(r.getUserMedia=!1),!s.iOS&&(l.ie||l.firefox||l.chrome)&&(r.canvasBitBltShift=!0),(l.safari||l.mobileSafari)&&(r.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(r.littleEndian=i()),r.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&r.littleEndian!==null&&h,r}o.exports=n()},33553:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={available:!1,cancel:"",keyboard:!1,request:""};function t(){if(typeof importScripts=="function")return x;var s,l="Fullscreen",a="FullScreen",r=["request"+l,"request"+a,"webkitRequest"+l,"webkitRequest"+a,"msRequest"+l,"msRequest"+a,"mozRequest"+a,"mozRequest"+l];for(s=0;s<r.length;s++)if(document.documentElement[r[s]]){x.available=!0,x.request=r[s];break}var i=["cancel"+a,"exit"+l,"webkitCancel"+a,"webkitExit"+l,"msCancel"+a,"msExit"+l,"mozCancel"+a,"mozExit"+l];if(x.available){for(s=0;s<i.length;s++)if(document[i[s]]){x.cancel=i[s];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(x.keyboard=!0),Object.defineProperty(x,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),x}o.exports=t()},95872:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1350),l={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function a(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(l.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(l.mspointer=!0),navigator.getGamepads&&(l.gamepads=!0),"onwheel"in window||s.ie&&"WheelEvent"in window?l.wheelEvent="wheel":"onmousewheel"in window?l.wheelEvent="mousewheel":s.firefox&&"MouseScrollEvent"in window&&(l.wheelEvent="DOMMouseScroll")),l}o.exports=a()},36580:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function t(){if(typeof importScripts=="function")return x;var s=navigator.userAgent;/Windows/.test(s)?x.windows=!0:/Mac OS/.test(s)&&!/like Mac OS/.test(s)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(x.iOS=!0,x.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),x.iOSVersion=parseInt(RegExp.$1,10)):x.macOS=!0:/Android/.test(s)?x.android=!0:/Linux/.test(s)?x.linux=!0:/iP[ao]d|iPhone/i.test(s)?(x.iOS=!0,navigator.appVersion.match(/OS (\d+)/),x.iOSVersion=parseInt(RegExp.$1,10),x.iPhone=s.toLowerCase().indexOf("iphone")!==-1,x.iPad=s.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(s)||/\bKF[A-Z][A-Z]+/.test(s)||/Silk.*Mobile Safari/.test(s)?x.kindle=!0:/CrOS/.test(s)&&(x.chromeOS=!0),(/Windows Phone/i.test(s)||/IEMobile/i.test(s))&&(x.android=!1,x.iOS=!1,x.macOS=!1,x.windows=!0,x.windowsPhone=!0);var l=/Silk/.test(s);return(x.windows||x.macOS||x.linux&&!l||x.chromeOS)&&(x.desktop=!0),(x.windowsPhone||/Windows NT/i.test(s)&&/Touch/i.test(s))&&(x.desktop=!1),navigator.standalone&&(x.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(x.cordova=!0),window.ejecta!==void 0&&(x.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(x.node=!0),x.node&&typeof process.versions=="object"&&(x.nodeWebkit=!!process.versions["node-webkit"],x.electron=!!process.versions.electron),/Crosswalk/.test(s)&&(x.crosswalk=!0),x.pixelRatio=window.devicePixelRatio||1,x}o.exports=t()},53861:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function a(){if(typeof importScripts=="function")return l;var r=document.createElement("video"),i=!!r.canPlayType,n=/^no$/;try{i&&(r.canPlayType('video/ogg; codecs="theora"').replace(n,"")&&(l.ogg=!0),r.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(n,"")&&(l.h264=!0,l.mp4=!0),r.canPlayType("video/x-m4v").replace(n,"")&&(l.m4v=!0),r.canPlayType('video/webm; codecs="vp8, vorbis"').replace(n,"")&&(l.webm=!0),r.canPlayType('video/webm; codecs="vp9"').replace(n,"")&&(l.vp9=!0),r.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(n,"")&&(l.hls=!0))}catch{}return r.parentNode&&r.parentNode.removeChild(r),l.getVideoURL=function(h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var u=s(h[d],"url",h[d]);if(u.indexOf("blob:")===0)return{url:u,type:""};var p;if(u.indexOf("data:")===0?p=u.split(",")[0].match(/\/(.*?);/):p=u.match(/\.([a-zA-Z0-9]+)($|\?)/),p=s(h[d],"type",p?p[1]:"").toLowerCase(),l[p])return{url:u,type:p}}return null},l}o.exports=a()},77290:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={os:t(36580),browser:t(1350),features:t(90185),input:t(95872),audio:t(10720),video:t(53861),fullscreen:t(33553),canvasFeatures:t(98581)}},65246:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new Float32Array(20),a=new s({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(r){return this._matrix.set(r),this._dirty=!0,this},reset:function(){var r=this._matrix;return r.fill(0),r[0]=1,r[6]=1,r[12]=1,r[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var r=this._data;return this._dirty&&(r.set(this._matrix),r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._dirty=!1),r},brightness:function(r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var n=r;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],i)},saturate:function(r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var n=r*2/3+1,h=(n-1)*-.5;return this.multiply([n,h,h,0,0,h,n,h,0,0,h,h,n,0,0,0,0,0,1,0],i)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,i){r===void 0&&(r=0),i===void 0&&(i=!1),r=r/180*Math.PI;var n=Math.cos(r),h=Math.sin(r),d=.213,u=.715,p=.072;return this.multiply([d+n*(1-d)+h*-d,u+n*-u+h*-u,p+n*-p+h*(1-p),0,0,d+n*-d+h*.143,u+n*(1-u)+h*.14,p+n*-p+h*-.283,0,0,d+n*-d+h*-(1-d),u+n*-u+h*u,p+n*(1-p)+h*p,0,0,0,0,0,1,0],i)},grayscale:function(r,i){return r===void 0&&(r=1),i===void 0&&(i=!1),this.saturate(-r,i)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply(a.BLACK_WHITE,r)},contrast:function(r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var n=r+1,h=-.5*(n-1);return this.multiply([n,0,0,0,h,0,n,0,0,h,0,0,n,0,h,0,0,0,1,0],i)},negative:function(r){return r===void 0&&(r=!1),this.multiply(a.NEGATIVE,r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply(a.DESATURATE_LUMINANCE,r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply(a.SEPIA,r)},night:function(r,i){return r===void 0&&(r=.1),i===void 0&&(i=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],i)},lsd:function(r){return r===void 0&&(r=!1),this.multiply(a.LSD,r)},brown:function(r){return r===void 0&&(r=!1),this.multiply(a.BROWN,r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply(a.VINTAGE,r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply(a.KODACHROME,r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply(a.TECHNICOLOR,r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply(a.POLAROID,r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply(a.SHIFT_BGR,r)},multiply:function(r,i){i===void 0&&(i=!1),i||this.reset();var n=this._matrix,h=l;return h.set(n),n.set([h[0]*r[0]+h[1]*r[5]+h[2]*r[10]+h[3]*r[15],h[0]*r[1]+h[1]*r[6]+h[2]*r[11]+h[3]*r[16],h[0]*r[2]+h[1]*r[7]+h[2]*r[12]+h[3]*r[17],h[0]*r[3]+h[1]*r[8]+h[2]*r[13]+h[3]*r[18],h[0]*r[4]+h[1]*r[9]+h[2]*r[14]+h[3]*r[19]+h[4],h[5]*r[0]+h[6]*r[5]+h[7]*r[10]+h[8]*r[15],h[5]*r[1]+h[6]*r[6]+h[7]*r[11]+h[8]*r[16],h[5]*r[2]+h[6]*r[7]+h[7]*r[12]+h[8]*r[17],h[5]*r[3]+h[6]*r[8]+h[7]*r[13]+h[8]*r[18],h[5]*r[4]+h[6]*r[9]+h[7]*r[14]+h[8]*r[19]+h[9],h[10]*r[0]+h[11]*r[5]+h[12]*r[10]+h[13]*r[15],h[10]*r[1]+h[11]*r[6]+h[12]*r[11]+h[13]*r[16],h[10]*r[2]+h[11]*r[7]+h[12]*r[12]+h[13]*r[17],h[10]*r[3]+h[11]*r[8]+h[12]*r[13]+h[13]*r[18],h[10]*r[4]+h[11]*r[9]+h[12]*r[14]+h[13]*r[19]+h[14],h[15]*r[0]+h[16]*r[5]+h[17]*r[10]+h[18]*r[15],h[15]*r[1]+h[16]*r[6]+h[17]*r[11]+h[18]*r[16],h[15]*r[2]+h[16]*r[7]+h[17]*r[12]+h[18]*r[17],h[15]*r[3]+h[16]*r[8]+h[17]*r[13]+h[18]*r[18],h[15]*r[4]+h[16]*r[9]+h[17]*r[14]+h[18]*r[19]+h[19]]),this._dirty=!0,this}});a.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],a.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],a.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],a.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],o.exports=a},39298:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72283),a=new s({initialize:function(i,n,h){this._rgb=[0,0,0],this.onChangeCallback=l,this.dirty=!1,this.set(i,n,h)},set:function(r,i,n){return r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this._rgb=[r,i,n],this.onChange(),this},equals:function(r,i,n){var h=this._rgb;return h[0]===r&&h[1]===i&&h[2]===n},onChange:function(){this.dirty=!0;var r=this._rgb;this.onChangeCallback.call(this,r[0],r[1],r[2])},r:{get:function(){return this._rgb[0]},set:function(r){this._rgb[0]=r,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(r){this._rgb[1]=r,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(r){this._rgb[2]=r,this.onChange()}},destroy:function(){this.onChangeCallback=null}});o.exports=a},84093:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};o.exports=x},32058:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(59994),a=t(73174),r=t(28417),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},85535:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(40163),a=t(73174),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)-d),a(n,s(h)+u),n};o.exports=i},9605:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(70271),a=t(73174),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},22529:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(21843),l=t(59994),a=t(29568),r=function(i,n,h,d){return h===void 0&&(h=0),d===void 0&&(d=0),s(i,l(n)+h,a(n)+d),i};o.exports=r},5739:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29568),l=t(40163),a=t(81711),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)-d),a(n,s(h)+u),n};o.exports=i},40327:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84093),l=[];l[s.BOTTOM_CENTER]=t(32058),l[s.BOTTOM_LEFT]=t(85535),l[s.BOTTOM_RIGHT]=t(9605),l[s.CENTER]=t(22529),l[s.LEFT_CENTER]=t(5739),l[s.RIGHT_CENTER]=t(27683),l[s.TOP_CENTER]=t(96439),l[s.TOP_LEFT]=t(81447),l[s.TOP_RIGHT]=t(47888),l[s.LEFT_BOTTOM]=l[s.BOTTOM_LEFT],l[s.LEFT_TOP]=l[s.TOP_LEFT],l[s.RIGHT_BOTTOM]=l[s.BOTTOM_RIGHT],l[s.RIGHT_TOP]=l[s.TOP_RIGHT];var a=function(r,i,n,h,d){return l[n](r,i,h,d)};o.exports=a},27683:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29568),l=t(70271),a=t(81711),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},96439:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59994),l=t(47196),a=t(28417),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)+d),r(n,l(h)-u),n};o.exports=i},81447:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40163),l=t(47196),a=t(74465),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)-d),r(n,l(h)-u),n};o.exports=i},47888:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70271),l=t(47196),a=t(19298),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)+d),r(n,l(h)-u),n};o.exports=i},46997:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:t(32058),BottomLeft:t(85535),BottomRight:t(9605),Center:t(22529),LeftCenter:t(5739),QuickSet:t(40327),RightCenter:t(27683),TopCenter:t(96439),TopLeft:t(81447),TopRight:t(47888)}},93545:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84093),l=t(98611),a={In:t(46997),To:t(86639)};a=l(!1,a,s),o.exports=a},27118:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(59994),a=t(28417),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,l(h)+d),r(n,s(h)+u),n};o.exports=i},84469:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(40163),a=t(74465),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,l(h)-d),r(n,s(h)+u),n};o.exports=i},51577:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(70271),a=t(19298),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,l(h)+d),r(n,s(h)+u),n};o.exports=i},90271:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(40163),a=t(73174),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)-d),a(n,s(h)+u),n};o.exports=i},30466:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29568),l=t(40163),a=t(81711),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)-d),a(n,s(h)+u),n};o.exports=i},50087:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40163),l=t(47196),a=t(19298),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)-d),r(n,l(h)-u),n};o.exports=i},82590:(o,x,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84093),l=[];l[s.BOTTOM_CENTER]=t(27118),l[s.BOTTOM_LEFT]=t(84469),l[s.BOTTOM_RIGHT]=t(51577),l[s.LEFT_BOTTOM]=t(90271),l[s.LEFT_CENTER]=t(30466),l[s.LEFT_TOP]=t(50087),l[s.RIGHT_BOTTOM]=t(13555),l[s.RIGHT_CENTER]=t(99049),l[s.RIGHT_TOP]=t(67788),l[s.TOP_CENTER]=t(78170),l[s.TOP_LEFT]=t(54145),l[s.TOP_RIGHT]=t(75548);var a=function(r,i,n,h,d){return l[n](r,i,h,d)};o.exports=a},13555:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(70271),a=t(73174),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},99049:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29568),l=t(70271),a=t(81711),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},67788:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70271),l=t(47196),a=t(74465),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)+d),r(n,l(h)-u),n};o.exports=i},78170:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59994),l=t(47196),a=t(73174),r=t(28417),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,s(h)+d),a(n,l(h)-u),n};o.exports=i},54145:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40163),l=t(47196),a=t(73174),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,s(h)-d),a(n,l(h)-u),n};o.exports=i},75548:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70271),l=t(47196),a=t(73174),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,s(h)+d),a(n,l(h)-u),n};o.exports=i},86639:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:t(27118),BottomLeft:t(84469),BottomRight:t(51577),LeftBottom:t(90271),LeftCenter:t(30466),LeftTop:t(50087),QuickSet:t(82590),RightBottom:t(13555),RightCenter:t(99049),RightTop:t(67788),TopCenter:t(78170),TopLeft:t(54145),TopRight:t(75548)}},21843:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28417),l=t(81711),a=function(r,i,n){return s(r,i),l(r,n)};o.exports=a},97328:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.y+t.height-t.height*t.originY};o.exports=x},7126:(o,x,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(40163),a=t(70271),r=t(47196),i=t(74118),n=function(h,d){d===void 0&&(d=new i);var u=l(h),p=r(h);return d.x=u,d.y=p,d.width=a(h)-u,d.height=s(h)-p,d};o.exports=n},59994:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.x-t.width*t.originX+t.width*.5};o.exports=x},29568:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.y-t.height*t.originY+t.height*.5};o.exports=x},40163:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.x-t.width*t.originX};o.exports=x},52088:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.width*t.originX};o.exports=x},23379:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.height*t.originY};o.exports=x},70271:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.x+t.width-t.width*t.originX};o.exports=x},47196:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.y-t.height*t.originY};o.exports=x},73174:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.y=s-t.height+t.height*t.originY,t};o.exports=x},28417:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.width*t.originX;return t.x=s+l-t.width*.5,t};o.exports=x},81711:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.height*t.originY;return t.y=s+l-t.height*.5,t};o.exports=x},74465:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x=s+t.width*t.originX,t};o.exports=x},19298:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x=s-t.width+t.width*t.originX,t};o.exports=x},84349:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.y=s+t.height*t.originY,t};o.exports=x},15252:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CenterOn:t(21843),GetBottom:t(97328),GetBounds:t(7126),GetCenterX:t(59994),GetCenterY:t(29568),GetLeft:t(40163),GetOffsetX:t(52088),GetOffsetY:t(23379),GetRight:t(70271),GetTop:t(47196),SetBottom:t(73174),SetCenterX:t(28417),SetCenterY:t(81711),SetLeft:t(74465),SetRight:t(19298),SetTop:t(84349)}},70616:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setCrisp:function(t){var s=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return s.forEach(function(l){t.style["image-rendering"]=l}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};o.exports=x},61068:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86459),l=t(8213),a=[],r=!1,i=function(){var n=function(w,b,E,A,R){b===void 0&&(b=1),E===void 0&&(E=1),A===void 0&&(A=s.CANVAS),R===void 0&&(R=!1);var I,P=u(A);return P===null?(P={parent:w,canvas:document.createElement("canvas"),type:A},A===s.CANVAS&&a.push(P),I=P.canvas):(P.parent=w,I=P.canvas),R&&(P.parent=I),I.width=b,I.height=E,r&&A===s.CANVAS&&l.disable(I.getContext("2d",{willReadFrequently:!1})),I},h=function(w,b,E){return n(w,b,E,s.CANVAS)},d=function(w,b,E){return n(w,b,E,s.WEBGL)},u=function(w){if(w===void 0&&(w=s.CANVAS),w===s.WEBGL)return null;for(var b=0;b<a.length;b++){var E=a[b];if(!E.parent&&E.type===w)return E}return null},p=function(w){var b=w instanceof HTMLCanvasElement;a.forEach(function(E){(b&&E.canvas===w||!b&&E.parent===w)&&(E.parent=null,E.canvas.width=1,E.canvas.height=1)})},v=function(){var w=0;return a.forEach(function(b){b.parent&&w++}),w},m=function(){return a.length-v()},g=function(){r=!0},T=function(){r=!1};return{create2D:h,create:n,createWebGL:d,disableSmoothing:g,enableSmoothing:T,first:u,free:m,pool:a,remove:p,total:v}};o.exports=i()},8213:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x="",t=function(){var s=function(i){for(var n=["i","webkitI","msI","mozI","oI"],h=0;h<n.length;h++){var d=n[h]+"mageSmoothingEnabled";if(d in i)return d}return null},l=function(i){return x===""&&(x=s(i)),x&&(i[x]=!0),i},a=function(i){return x===""&&(x=s(i)),x&&(i[x]=!1),i},r=function(i){return x!==null?i[x]:null};return{disable:a,enable:l,getPrefix:s,isEnabled:r}};o.exports=t()},59271:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s="none"),t.style.msTouchAction=s,t.style["ms-touch-action"]=s,t.style["touch-action"]=s,t};o.exports=x},36505:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s="none");var l=["-webkit-","-khtml-","-moz-","-ms-",""];return l.forEach(function(a){t.style[a+"user-select"]=s}),t.style["-webkit-touch-callout"]=s,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t};o.exports=x},23514:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasInterpolation:t(70616),CanvasPool:t(61068),Smoothing:t(8213),TouchAction:t(59271),UserSelect:t(36505)}},27119:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(22946),a=t(5657),r=t(24650),i=t(68033),n=new s({initialize:function(d,u,p,v){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(d,u,p,v)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(h,d,u,p,v){return p===void 0&&(p=255),v===void 0&&(v=!0),this._locked=!0,this.red=h,this.green=d,this.blue=u,this.alpha=p,this._locked=!1,this.update(v)},setGLTo:function(h,d,u,p){return p===void 0&&(p=1),this._locked=!0,this.redGL=h,this.greenGL=d,this.blueGL=u,this.alphaGL=p,this._locked=!1,this.update(!0)},setFromRGB:function(h){return this._locked=!0,this.red=h.r,this.green=h.g,this.blue=h.b,h.hasOwnProperty("a")&&(this.alpha=h.a),this._locked=!1,this.update(!0)},setFromHSV:function(h,d,u){return r(h,d,u,this)},update:function(h){if(h===void 0&&(h=!1),this._locked)return this;var d=this.r,u=this.g,p=this.b,v=this.a;return this._color=l(d,u,p),this._color32=a(d,u,p,v),this._rgba="rgba("+d+","+u+","+p+","+v/255+")",h&&i(d,u,p,this),this},updateHSV:function(){var h=this.r,d=this.g,u=this.b;return i(h,d,u,this),this},clone:function(){return new n(this.r,this.g,this.b,this.a)},gray:function(h){return this.setTo(h,h,h)},random:function(h,d){h===void 0&&(h=0),d===void 0&&(d=255);var u=Math.floor(h+Math.random()*(d-h)),p=Math.floor(h+Math.random()*(d-h)),v=Math.floor(h+Math.random()*(d-h));return this.setTo(u,p,v)},randomGray:function(h,d){h===void 0&&(h=0),d===void 0&&(d=255);var u=Math.floor(h+Math.random()*(d-h));return this.setTo(u,u,u)},saturate:function(h){return this.s+=h/100,this},desaturate:function(h){return this.s-=h/100,this},lighten:function(h){return this.v+=h/100,this},darken:function(h){return this.v-=h/100,this},brighten:function(h){var d=this.r,u=this.g,p=this.b;return d=Math.max(0,Math.min(255,d-Math.round(255*-(h/100)))),u=Math.max(0,Math.min(255,u-Math.round(255*-(h/100)))),p=Math.max(0,Math.min(255,p-Math.round(255*-(h/100)))),this.setTo(d,u,p)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(h){this.gl[0]=Math.min(Math.abs(h),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(h){this.gl[1]=Math.min(Math.abs(h),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(h){this.gl[2]=Math.min(Math.abs(h),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(h){this.gl[3]=Math.min(Math.abs(h),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(h){h=Math.floor(Math.abs(h)),this.r=Math.min(h,255),this.gl[0]=h/255,this.update(!0)}},green:{get:function(){return this.g},set:function(h){h=Math.floor(Math.abs(h)),this.g=Math.min(h,255),this.gl[1]=h/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(h){h=Math.floor(Math.abs(h)),this.b=Math.min(h,255),this.gl[2]=h/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(h){h=Math.floor(Math.abs(h)),this.a=Math.min(h,255),this.gl[3]=h/255,this.update()}},h:{get:function(){return this._h},set:function(h){this._h=h,r(h,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(h){this._s=h,r(this._h,h,this._v,this)}},v:{get:function(){return this._v},set:function(h){this._v=h,r(this._h,this._s,h,this)}}});o.exports=n},30245:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22946),l=function(a){a===void 0&&(a=1024);var r=[],i=255,n,h=255,d=0,u=0;for(n=0;n<=i;n++)r.push({r:h,g:n,b:u,color:s(h,n,u)});for(d=255,n=i;n>=0;n--)r.push({r:n,g:d,b:u,color:s(n,d,u)});for(h=0,n=0;n<=i;n++,d--)r.push({r:h,g:d,b:n,color:s(h,d,n)});for(d=0,u=255,n=0;n<=i;n++,u--,h++)r.push({r:h,g:d,b:u,color:s(h,d,u)});if(a===1024)return r;var p=[],v=0,m=1024/a;for(n=0;n<a;n++)p.push(r[Math.floor(v)]),v+=m;return p};o.exports=l},86672:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s={r:t>>16&255,g:t>>8&255,b:t&255,a:255};return t>16777215&&(s.a=t>>>24),s};o.exports=x},25409:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s=t.toString(16);return s.length===1?"0"+s:s};o.exports=x},22946:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t<<16|s<<8|l};o.exports=x},5657:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){return a<<24|t<<16|s<<8|l};o.exports=x},74777:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=t(59998),a=function(r,i,n){var h=n,d=n,u=n;if(i!==0){var p=n<.5?n*(1+i):n+i-n*i,v=2*n-p;h=l(v,p,r+1/3),d=l(v,p,r),u=l(v,p,r-1/3)}var m=new s;return m.setGLTo(h,d,u,1)};o.exports=a},89263:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(24650),l=function(a,r){a===void 0&&(a=1),r===void 0&&(r=1);for(var i=[],n=0;n<=359;n++)i.push(s(n/359,a,r));return i};o.exports=l},24650:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22946);function l(r,i,n,h){var d=(r+i*6)%6,u=Math.min(d,4-d,1);return Math.round(255*(h-h*n*Math.max(0,u)))}var a=function(r,i,n,h){i===void 0&&(i=1),n===void 0&&(n=1);var d=l(5,r,i,n),u=l(3,r,i,n),p=l(1,r,i,n);return h?h.setTo?h.setTo(d,u,p,h.alpha,!0):(h.r=d,h.g=u,h.b=p,h.color=s(d,u,p),h):{r:d,g:u,b:p,color:s(d,u,p)}};o.exports=a},91487:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=function(a){var r=new s;a=a.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(u,p,v,m){return p+p+v+v+m+m});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);if(i){var n=parseInt(i[1],16),h=parseInt(i[2],16),d=parseInt(i[3],16);r.setTo(n,h,d)}return r};o.exports=l},59998:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return l<0&&(l+=1),l>1&&(l-=1),l<.16666666666666666?t+(s-t)*6*l:l<.5?s:l<.6666666666666666?t+(s-t)*(.6666666666666666-l)*6:t};o.exports=x},74853:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=t(15978),a=function(r){var i=l(r);return new s(i.r,i.g,i.b,i.a)};o.exports=a},15978:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:t&255}:{a:255,r:t>>16&255,g:t>>8&255,b:t&255}};o.exports=x},53756:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42798),l=function(i,n,h,d,u,p,v,m){v===void 0&&(v=100),m===void 0&&(m=0);var g=m/v;return{r:s(i,d,g),g:s(n,u,g),b:s(h,p,g)}},a=function(i,n,h,d){return h===void 0&&(h=100),d===void 0&&(d=0),l(i.r,i.g,i.b,n.r,n.g,n.b,h,d)},r=function(i,n,h,d,u,p){return u===void 0&&(u=100),p===void 0&&(p=0),l(i.r,i.g,i.b,n,h,d,u,p)};o.exports={RGBWithRGB:l,ColorWithRGB:r,ColorWithColor:a}},73904:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=function(a){return new s(a.r,a.g,a.b,a.a)};o.exports=l},26841:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=function(a){var r=new s,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(a.toLowerCase());if(i){var n=parseInt(i[1],10),h=parseInt(i[2],10),d=parseInt(i[3],10),u=i[4]!==void 0?parseFloat(i[4]):1;r.setTo(n,h,d,u*255)}return r};o.exports=l},68033:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){a===void 0&&(a={h:0,s:0,v:0}),t/=255,s/=255,l/=255;var r=Math.min(t,s,l),i=Math.max(t,s,l),n=i-r,h=0,d=i===0?0:n/i,u=i;return i!==r&&(i===t?h=(s-l)/n+(s<l?6:0):i===s?h=(l-t)/n+2:i===l&&(h=(t-s)/n+4),h/=6),a.hasOwnProperty("_h")?(a._h=h,a._s=d,a._v=u):(a.h=h,a.s=d,a.v=u),a};o.exports=x},4880:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25409),l=function(a,r,i,n,h){return n===void 0&&(n=255),h===void 0&&(h="#"),h==="#"?"#"+((1<<24)+(a<<16)+(r<<8)+i).toString(16).slice(1,7):"0x"+s(n)+s(a)+s(r)+s(i)};o.exports=l},37243:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17489),l=t(27119),a=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=255),new l(s(r,i),s(r,i),s(r,i))};o.exports=a},93222:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(91487),l=t(74853),a=t(73904),r=t(26841),i=function(n){var h=typeof n;switch(h){case"string":return n.substr(0,3).toLowerCase()==="rgb"?r(n):s(n);case"number":return l(n);case"object":return a(n)}};o.exports=i},95509:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119);s.ColorSpectrum=t(30245),s.ColorToRGBA=t(86672),s.ComponentToHex=t(25409),s.GetColor=t(22946),s.GetColor32=t(5657),s.HexStringToColor=t(91487),s.HSLToColor=t(74777),s.HSVColorWheel=t(89263),s.HSVToRGB=t(24650),s.HueToComponent=t(59998),s.IntegerToColor=t(74853),s.IntegerToRGB=t(15978),s.Interpolate=t(53756),s.ObjectToColor=t(73904),s.RandomRGB=t(37243),s.RGBStringToColor=t(26841),s.RGBToHSV=t(68033),s.RGBToString=t(4880),s.ValueToColor=t(93222),o.exports=s},24816:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Align:t(93545),BaseShader:t(31053),Bounds:t(15252),Canvas:t(23514),Color:t(95509),ColorMatrix:t(65246),Masks:t(93310),RGB:t(39298)}},76756:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(61286),a=new s({initialize:function(i,n,h,d,u,p){n||(n=i.sys.make.image({x:h,y:d,key:u,frame:p,add:!1})),this.bitmapMask=n,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(r){this.bitmapMask=r},preRenderWebGL:function(r,i,n){r.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,n)},postRenderWebGL:function(r,i,n){r.pipelines.BITMAPMASK_PIPELINE.endMask(this,i,n)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});l.register("bitmapMask",function(r,i,n,h,d){return new a(this.scene,r,i,n,h,d)}),o.exports=a},63037:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(a){return this.geometryMask=a,this},setInvertAlpha:function(a){return a===void 0&&(a=!0),this.invertAlpha=a,this},preRenderWebGL:function(a,r,i){var n=a.gl;a.flush(),a.maskStack.length===0&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),a.maskCount=0),a.currentCameraMask.mask!==this&&(a.currentMask.mask=this),a.maskStack.push({mask:this,camera:i}),this.applyStencil(a,i,!0),a.maskCount++},applyStencil:function(a,r,i){var n=a.gl,h=this.geometryMask,d=a.maskCount,u=255;n.colorMask(!1,!1,!1,!1),i?(n.stencilFunc(n.EQUAL,d,u),n.stencilOp(n.KEEP,n.KEEP,n.INCR),d++):(n.stencilFunc(n.EQUAL,d+1,u),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),this.level=d,h.renderWebGL(a,h,r),a.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.invertAlpha?n.stencilFunc(n.NOTEQUAL,d,u):n.stencilFunc(n.EQUAL,d,u)},postRenderWebGL:function(a){var r=a.gl;a.maskStack.pop(),a.maskCount--,a.flush();var i=a.currentMask;if(a.maskStack.length===0)i.mask=null,r.disable(r.STENCIL_TEST);else{var n=a.maskStack[a.maskStack.length-1];n.mask.applyStencil(a,n.camera,!1),a.currentCameraMask.mask!==n.mask?(i.mask=n.mask,i.camera=n.camera):i.mask=null}},preRenderCanvas:function(a,r,i){var n=this.geometryMask;a.currentContext.save(),n.renderCanvas(a,n,i,null,null,!0),a.currentContext.clip()},postRenderCanvas:function(a){a.currentContext.restore()},destroy:function(){this.geometryMask=null}});o.exports=l},93310:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BitmapMask:t(76756),GeometryMask:t(63037)}},31053:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h){(!i||i==="")&&(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!n||n==="")&&(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),h===void 0&&(h=null),this.key=r,this.fragmentSrc=i,this.vertexSrc=n,this.uniforms=h}});o.exports=l},99584:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l;if(s)typeof s=="string"?l=document.getElementById(s):typeof s=="object"&&s.nodeType===1&&(l=s);else if(t.parentElement||s===null)return t;return l||(l=document.body),l.appendChild(t),t};o.exports=x},85178:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99584),l=function(a){var r=a.config;if(!(!r.parent||!r.domCreateContainer)){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+a.scale.width+"px;","height: "+a.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+r.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),a.domContainer=i,s(i,r.parent)}};o.exports=l},21546:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36580),l=function(a){if(document.readyState==="complete"||document.readyState==="interactive"){a();return}var r=function(){document.removeEventListener("deviceready",r,!0),document.removeEventListener("DOMContentLoaded",r,!0),window.removeEventListener("load",r,!0),a()};document.body?s.cordova?document.addEventListener("deviceready",r,!1):(document.addEventListener("DOMContentLoaded",r,!0),window.addEventListener("load",r,!0)):window.setTimeout(r,20)};o.exports=l},74181:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){if(!t)return window.innerHeight;var s=Math.abs(window.orientation),l={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),l.w=s===90?a.offsetHeight:window.innerWidth,l.h=s===90?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,Math.abs(window.orientation)!==90?l.h:l.w};o.exports=x},9229:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(55301),l=function(a,r){var i=window.screen,n=i?i.orientation||i.mozOrientation||i.msOrientation:!1;if(n&&typeof n.type=="string")return n.type;if(typeof n=="string")return n;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return s.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return s.ORIENTATION.LANDSCAPE}else return r>a?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE};o.exports=l},2893:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s;return t!==""&&(typeof t=="string"?s=document.getElementById(t):t&&t.nodeType===1&&(s=t)),s||(s=document.body),s};o.exports=x},89200:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s="";try{if(window.DOMParser){var l=new DOMParser;s=l.parseFromString(t,"text/xml")}else s=new ActiveXObject("Microsoft.XMLDOM"),s.loadXML(t)}catch{s=null}return!s||!s.documentElement||s.getElementsByTagName("parsererror").length?null:s};o.exports=x},55638:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){t.parentNode&&t.parentNode.removeChild(t)};o.exports=x},27385:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72283),a=new s({initialize:function(){this.isRunning=!1,this.callback=l,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var i=this;this.step=function n(h){i.callback(h),i.isRunning&&(i.timeOutID=window.requestAnimationFrame(n))},this.stepTimeout=function n(){i.isRunning&&(i.timeOutID=window.setTimeout(n,i.delay)),i.callback(window.performance.now())}},start:function(r,i,n){this.isRunning||(this.callback=r,this.isSetTimeOut=i,this.delay=n,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=l}});o.exports=a},3590:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={AddToDOM:t(99584),DOMContentLoaded:t(21546),GetInnerHeight:t(74181),GetScreenOrientation:t(9229),GetTarget:t(2893),ParseXML:t(89200),RemoveFromDOM:t(55638),RequestAnimationFrame:t(27385)};o.exports=s},78491:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(91963),r=new s({Extends:l,initialize:function(){l.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});a.register("EventEmitter",r,"events"),o.exports=r},95146:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EventEmitter:t(78491)}},20170:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h){h===void 0&&(h=1),l.call(this,a.BARREL,n),this.amount=h}});o.exports=r},51182:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,v,m){d===void 0&&(d=1),u===void 0&&(u=1),p===void 0&&(p=1),v===void 0&&(v=1),m===void 0&&(m=4),l.call(this,a.BLOOM,n),this.steps=m,this.offsetX=d,this.offsetY=u,this.blurStrength=p,this.strength=v,this.glcolor=[1,1,1],h!=null&&(this.color=h)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}}});o.exports=r},51498:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,v,m){h===void 0&&(h=0),d===void 0&&(d=2),u===void 0&&(u=2),p===void 0&&(p=1),m===void 0&&(m=4),l.call(this,a.BLUR,n),this.quality=h,this.x=d,this.y=u,this.steps=m,this.strength=p,this.glcolor=[1,1,1],v!=null&&(this.color=v)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}}});o.exports=r},12042:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,v,m,g){h===void 0&&(h=.5),d===void 0&&(d=1),u===void 0&&(u=.2),p===void 0&&(p=!1),v===void 0&&(v=1),m===void 0&&(m=1),g===void 0&&(g=1),l.call(this,a.BOKEH,n),this.radius=h,this.amount=d,this.contrast=u,this.isTiltShift=p,this.strength=g,this.blurX=v,this.blurY=m}});o.exports=r},69900:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,v){h===void 0&&(h=8),p===void 0&&(p=1),v===void 0&&(v=.005),l.call(this,a.CIRCLE,n),this.scale=p,this.feather=v,this.thickness=h,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],d!=null&&(this.color=d),u!=null&&(this.backgroundColor=u)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}},backgroundColor:{get:function(){var i=this.glcolor2;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor2;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(i){this.glcolor2[3]=i}}});o.exports=r},48991:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(65246),a=t(47406),r=new s({Extends:l,initialize:function(n){l.call(this),this.type=a.COLOR_MATRIX,this.gameObject=n,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});o.exports=r},47551:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i){this.type=r,this.gameObject=i,this.active=!0},setActive:function(a){return this.active=a,this},destroy:function(){this.gameObject=null,this.active=!1}});o.exports=l},47909:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u){h===void 0&&(h="__WHITE"),d===void 0&&(d=.005),u===void 0&&(u=.005),l.call(this,a.DISPLACEMENT,n),this.x=d,this.y=u,this.glTexture,this.setTexture(h)},setTexture:function(i){var n=this.gameObject.scene.sys.textures.getFrame(i);return n&&(this.glTexture=n.glTexture),this}});o.exports=r},18919:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p){d===void 0&&(d=4),u===void 0&&(u=0),p===void 0&&(p=!1),l.call(this,a.GLOW,n),this.outerStrength=d,this.innerStrength=u,this.knockout=p,this.glcolor=[1,1,1,1],h!==void 0&&(this.color=h)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}}});o.exports=r},62494:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,v,m,g,T){u===void 0&&(u=.2),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),g===void 0&&(g=1),T===void 0&&(T=0),l.call(this,a.GRADIENT,n),this.alpha=u,this.size=T,this.fromX=p,this.fromY=v,this.toX=m,this.toY=g,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],h!=null&&(this.color1=h),d!=null&&(this.color2=d)},color1:{get:function(){var i=this.glcolor1;return(i[0]<<16)+(i[1]<<8)+(i[2]|0)},set:function(i){var n=this.glcolor1;n[0]=i>>16&255,n[1]=i>>8&255,n[2]=i&255}},color2:{get:function(){var i=this.glcolor2;return(i[0]<<16)+(i[1]<<8)+(i[2]|0)},set:function(i){var n=this.glcolor2;n[0]=i>>16&255,n[1]=i>>8&255,n[2]=i&255}}});o.exports=r},68897:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h){h===void 0&&(h=1),l.call(this,a.PIXELATE,n),this.amount=h}});o.exports=r},58575:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,v,m,g){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=.1),p===void 0&&(p=1),m===void 0&&(m=6),g===void 0&&(g=1),l.call(this,a.SHADOW,n),this.x=h,this.y=d,this.decay=u,this.power=p,this.glcolor=[0,0,0,1],this.samples=m,this.intensity=g,v!==void 0&&(this.color=v)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}}});o.exports=r},33755:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p){h===void 0&&(h=.5),d===void 0&&(d=.5),u===void 0&&(u=3),p===void 0&&(p=!1),l.call(this,a.SHINE,n),this.speed=h,this.lineWidth=d,this.gradient=u,this.reveal=p}});o.exports=r},24949:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p){h===void 0&&(h=.5),d===void 0&&(d=.5),u===void 0&&(u=.5),p===void 0&&(p=.5),l.call(this,a.VIGNETTE,n),this.x=h,this.y=d,this.radius=u,this.strength=p}});o.exports=r},66241:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p){h===void 0&&(h=.1),d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=!1),l.call(this,a.WIPE,n),this.progress=0,this.wipeWidth=h,this.direction=d,this.axis=u,this.reveal=p}});o.exports=r},47406:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};o.exports=x},96910:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(47406),a={Barrel:t(20170),Controller:t(47551),Bloom:t(51182),Blur:t(51498),Bokeh:t(12042),Circle:t(69900),ColorMatrix:t(48991),Displacement:t(47909),Glow:t(18919),Gradient:t(62494),Pixelate:t(68897),Shadow:t(58575),Shine:t(33755),Vignette:t(24949),Wipe:t(66241)};a=s(!1,a,l),o.exports=a},88933:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(20494),a=function(r,i,n){i.x=l(n,"x",0),i.y=l(n,"y",0),i.depth=l(n,"depth",0),i.flipX=l(n,"flipX",!1),i.flipY=l(n,"flipY",!1);var h=l(n,"scale",null);typeof h=="number"?i.setScale(h):h!==null&&(i.scaleX=l(h,"x",1),i.scaleY=l(h,"y",1));var d=l(n,"scrollFactor",null);typeof d=="number"?i.setScrollFactor(d):d!==null&&(i.scrollFactorX=l(d,"x",1),i.scrollFactorY=l(d,"y",1)),i.rotation=l(n,"rotation",0);var u=l(n,"angle",null);u!==null&&(i.angle=u),i.alpha=l(n,"alpha",1);var p=l(n,"origin",null);if(typeof p=="number")i.setOrigin(p);else if(p!==null){var v=l(p,"x",.5),m=l(p,"y",.5);i.setOrigin(v,m)}i.blendMode=l(n,"blendMode",s.NORMAL),i.visible=l(n,"visible",!0);var g=l(n,"add",!0);return g&&r.sys.displayList.add(i),i.preUpdate&&r.sys.updateList.add(i),i};o.exports=a},32291:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(20494),l=function(a,r){var i=s(r,"anims",null);if(i===null)return a;if(typeof i=="string")a.anims.play(i);else if(typeof i=="object"){var n=a.anims,h=s(i,"key",void 0);if(h){var d=s(i,"startFrame",void 0),u=s(i,"delay",0),p=s(i,"repeat",0),v=s(i,"repeatDelay",0),m=s(i,"yoyo",!1),g=s(i,"play",!1),T=s(i,"delayedPlay",0),w={key:h,delay:u,repeat:p,repeatDelay:v,yoyo:m,startFrame:d};g?n.play(w):T>0?n.playAfterDelay(w,T):n.load(w)}}return a};o.exports=l},91713:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(71207),a=t(91963),r=t(56631),i=t(7599),n=t(17922),h=new s({Extends:l,initialize:function(u){l.call(this,u),this.sortChildrenFlag=!1,this.scene=u,this.systems=u.sys,this.events=u.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(i.BOOT,this.boot,this),this.events.on(i.START,this.start,this)},boot:function(){this.events.once(i.DESTROY,this.destroy,this)},addChildCallback:function(d){d.displayList&&d.displayList!==this&&d.removeFromDisplayList(),d.parentContainer&&d.parentContainer.remove(d),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(r.ADDED_TO_SCENE,d,this.scene),this.events.emit(i.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(r.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(i.REMOVED_FROM_SCENE,d,this.scene)},start:function(){this.events.once(i.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,u){return d._depth-u._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list;d.length;)d[0].destroy(!0);this.events.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(i.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});a.register("DisplayList",h,"displayList"),o.exports=h},89980:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(48129),a=t(81078),r=t(6659),i=t(56631),n=t(7599),h=new s({Extends:r,initialize:function(u,p){r.call(this),this.scene=u,this.displayList=null,this.type=p,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(i.ADDED_TO_SCENE,this.addedToScene,this),this.on(i.REMOVED_FROM_SCENE,this.removedFromScene,this),u.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(d,u){return this.data||(this.data=new a(this)),this.data.set(d,u),this},incData:function(d,u){return this.data||(this.data=new a(this)),this.data.inc(d,u),this},toggleData:function(d){return this.data||(this.data=new a(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new a(this)),this.data.get(d)},setInteractive:function(d,u,p){return this.scene.sys.input.enable(this,d,u,p),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return l(this)},willRender:function(d){var u=this.displayList&&this.displayList.active?this.displayList.willRender(d):!0;return!(!u||h.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,u=this.parentContainer,p=[];u&&(p.unshift(u.getIndex(d)),d=u,u.parentContainer);)u=u.parentContainer;return this.displayList?p.unshift(this.displayList.getIndex(d)):p.unshift(this.scene.sys.displayList.getIndex(d)),p},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(i.ADDED_TO_SCENE,this,this.scene),d.events.emit(n.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d&&d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(i.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(n.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(d){!this.scene||this.ignoreDestroy||(d===void 0&&(d=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(i.DESTROY,this,d),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});h.RENDER_MASK=15,o.exports=h},99325:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91963),a=t(7599),r=new s({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(i,n){r.prototype.hasOwnProperty(i)||(r.prototype[i]=n)},r.remove=function(i){r.prototype.hasOwnProperty(i)&&delete r.prototype[i]},l.register("GameObjectCreator",r,"make"),o.exports=r},61286:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91963),a=t(7599),r=new s({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},existing:function(i){return(i.renderCanvas||i.renderWebGL)&&this.displayList.add(i),i.preUpdate&&this.updateList.add(i),i},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(i,n){r.prototype.hasOwnProperty(i)||(r.prototype[i]=n)},r.remove=function(i){r.prototype.hasOwnProperty(i)&&delete r.prototype[i]},l.register("GameObjectFactory",r,"add"),o.exports=r},73329:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(69360),l=new s,a=new s,r=new s,i={camera:l,sprite:a,calc:r},n=function(h,d,u){var p=l,v=a,m=r;return v.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),p.copyFrom(d.matrix),u?(p.multiplyWithOffset(u,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),v.e=h.x,v.f=h.y):(v.e-=d.scrollX*h.scrollFactorX,v.f-=d.scrollY*h.scrollFactorY),p.multiply(v,m),i};o.exports=n},92034:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(74623),a=t(91963),r=t(7599),i=new s({Extends:l,initialize:function(h){l.call(this),this.checkQueue=!0,this.scene=h,this.systems=h.sys,h.sys.events.once(r.BOOT,this.boot,this),h.sys.events.on(r.START,this.start,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(r.PRE_UPDATE,this.update,this),n.on(r.UPDATE,this.sceneUpdate,this),n.once(r.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(n,h){for(var d=this._active,u=d.length,p=0;p<u;p++){var v=d[p];v.active&&v.preUpdate.call(v,n,h)}},shutdown:function(){for(var n=this._active.length;n--;)this._active[n].destroy(!0);for(n=this._pending.length;n--;)this._pending[n].destroy(!0);for(n=this._destroy.length;n--;)this._destroy[n].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var h=this.systems.events;h.off(r.PRE_UPDATE,this.update,this),h.off(r.UPDATE,this.sceneUpdate,this),h.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});a.register("UpdateList",i,"updateList"),o.exports=i},8810:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r,i,n,h,d,u,p,v,m,g,T){var w=l.x-s.displayOriginX+r,b=l.y-s.displayOriginY+i,E=w+l.w,A=b+l.h,R=n.getXRound(w,b,h),I=n.getYRound(w,b,h),P=n.getXRound(w,A,h),M=n.getYRound(w,A,h),F=n.getXRound(E,A,h),O=n.getYRound(E,A,h),D=n.getXRound(E,b,h),L=n.getYRound(E,b,h);t.batchQuad(s,R,I,P,M,F,O,D,L,a.u0,a.v0,a.u1,a.v1,d,u,p,v,m,g,T)};o.exports=x},82173:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){if(l===void 0&&(l=!1),a===void 0)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},a;var r=t.text,i=r.length,n=t.maxWidth,h=t.wordWrapCharCode,d=Number.MAX_VALUE,u=Number.MAX_VALUE,p=0,v=0,m=t.fontData.chars,g=t.fontData.lineHeight,T=t.letterSpacing,w=t.lineSpacing,b=0,E=0,A=0,R=null,I=t._align,P=0,M=0,F=t.fontSize/t.fontData.size,O=F*t.scaleX,D=F*t.scaleY,L=null,z=0,X=[],H=Number.MAX_VALUE,J=0,G=0,k=0,N,B=[],U=[],W=null;if(n>0){for(N=0;N<i;N++){if(A=r.charCodeAt(N),A===10){W!==null&&(B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D,cr:!0}),W=null),b=0,E+=g+w,L=null;continue}if(R=m[A],!!R){if(L!==null)var K=R.kerning[z];A===h?W!==null&&(B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D,cr:!1}),W=null):(W===null&&(W={word:"",i:N,x:b,y:E,w:0,h:g,cr:!1}),W.word=W.word.concat(r[N]),W.w+=R.xOffset+R.xAdvance+(K!==void 0?K:0)),b+=R.xAdvance+T,L=R,z=A}}W!==null&&B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D,cr:!1}),b=0,E=0,L=null,z=0;var q,_=0,rt=[];for(N=0;N<B.length;N++){var ft=B[N],vt=ft.x,mt=ft.x+ft.w;if(q){var yt=vt-(q.x+q.w);_=vt-(yt+q.w),q=null}var xt=vt-_,It=mt-_;xt>n||It>n?(rt.push(ft.i-1),ft.cr?(rt.push(ft.i+ft.word.length),_=0,q=null):q=ft):ft.cr&&(rt.push(ft.i+ft.word.length),_=0,q=null)}var Gt=function(Se,Ne,ce){return Se.substr(0,Ne)+ce+Se.substr(Ne+1)};for(N=rt.length-1;N>=0;N--)r=Gt(r,rt[N],`
`);a.wrappedText=r,i=r.length,B=[],W=null}var Zt=0;for(N=0;N<i;N++){if(A=r.charCodeAt(N),A===10){W!==null&&(B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D}),W=null),b=0,E+=g+w,L=null,X[G]=k,k>J&&(J=k),k<H&&(H=k),G++,k=0;continue}if(R=m[A],!!R){if(P=b,M=E,L!==null){var Bt=R.kerning[z];P+=Bt!==void 0?Bt:0}d>P&&(d=P),u>M&&(u=M);var At=P+R.xAdvance,kt=M+g;p<At&&(p=At),v<kt&&(v=kt);var Ut=R.xOffset+R.xAdvance+(Bt!==void 0?Bt:0);A===h?W!==null&&(B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D}),W=null):(W===null&&(W={word:"",i:Zt,x:b,y:E,w:0,h:g}),W.word=W.word.concat(r[N]),W.w+=Ut),U.push({i:Zt,idx:N,char:r[N],code:A,x:(R.xOffset+P)*F,y:(R.yOffset+E)*F,w:R.width*F,h:R.height*F,t:E*F,r:At*F,b:g*F,line:G,glyph:R}),b+=R.xAdvance+T+(Bt!==void 0?Bt:0),L=R,z=A,k=At*F,Zt++}}if(W!==null&&B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D}),X[G]=k,k>J&&(J=k),k<H&&(H=k),I>0)for(var ee=0;ee<U.length;ee++){var te=U[ee];if(I===1){var fe=(J-X[te.line])/2;te.x+=fe,te.r+=fe}else if(I===2){var ae=J-X[te.line];te.x+=ae,te.r+=ae}}var le=a.local,re=a.global,we=a.lines;return le.x=d*F,le.y=u*F,le.width=p*F,le.height=v*F,re.x=t.x-t._displayOriginX+d*O,re.y=t.y-t._displayOriginY+u*D,re.width=p*O,re.height=v*D,we.shortest=H,we.longest=J,we.lengths=X,s&&(le.x=Math.ceil(le.x),le.y=Math.ceil(le.y),le.width=Math.ceil(le.width),le.height=Math.ceil(le.height),re.x=Math.ceil(re.x),re.y=Math.ceil(re.y),re.width=Math.ceil(re.width),re.height=Math.ceil(re.height),we.shortest=Math.ceil(H),we.longest=Math.ceil(J)),l&&(t._displayOriginX=t.originX*le.width,t._displayOriginY=t.originY*le.height,re.x=t.x-t._displayOriginX*t.scaleX,re.y=t.y-t._displayOriginY*t.scaleY,s&&(re.x=Math.ceil(re.x),re.y=Math.ceil(re.y))),a.words=B,a.characters=U,a.lines.height=g,a.scale=F,a.scaleX=t.scaleX,a.scaleY=t.scaleY,a};o.exports=x},68298:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31476),l=function(a,r,i,n,h,d,u){var p=a.sys.textures.get(i),v=p.get(n),m=a.sys.cache.xml.get(h);if(v&&m){var g=s(m,v,d,u,p);return a.sys.cache.bitmapFont.add(r,{data:g,texture:i,frame:n,fromAtlas:!0}),!0}else return!1};o.exports=l},39860:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l=function(a,r){var i=r.width,n=r.height,h=Math.floor(i/2),d=Math.floor(n/2),u=s(r,"chars","");if(u!==""){var p=s(r,"image",""),v=a.sys.textures.getFrame(p),m=v.cutX,g=v.cutY,T=v.source.width,w=v.source.height,b=s(r,"offset.x",0),E=s(r,"offset.y",0),A=s(r,"spacing.x",0),R=s(r,"spacing.y",0),I=s(r,"lineSpacing",0),P=s(r,"charsPerRow",null);P===null&&(P=T/i,P>u.length&&(P=u.length));for(var M=b,F=E,O={retroFont:!0,font:p,size:i,lineHeight:n+I,chars:{}},D=0,L=0;L<u.length;L++){var z=u.charCodeAt(L),X=(m+M)/T,H=(g+F)/w,J=(m+M+i)/T,G=(g+F+n)/w;O.chars[z]={x:M,y:F,width:i,height:n,centerX:h,centerY:d,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:X,v0:H,u1:J,v1:G},D++,D===P?(D=0,M=b,F+=n+R):M+=i+A}var k={data:O,frame:null,texture:p};return k}};o.exports=l},31476:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function x(s,l){return parseInt(s.getAttribute(l),10)}var t=function(s,l,a,r,i){a===void 0&&(a=0),r===void 0&&(r=0);var n=l.cutX,h=l.cutY,d=l.source.width,u=l.source.height,p=l.sourceIndex,v={},m=s.getElementsByTagName("info")[0],g=s.getElementsByTagName("common")[0];v.font=m.getAttribute("face"),v.size=x(m,"size"),v.lineHeight=x(g,"lineHeight")+r,v.chars={};var T=s.getElementsByTagName("char"),w=l!==void 0&&l.trimmed;if(w)var b=l.height,E=l.width;for(var A=0;A<T.length;A++){var R=T[A],I=x(R,"id"),P=String.fromCharCode(I),M=x(R,"x"),F=x(R,"y"),O=x(R,"width"),D=x(R,"height");w&&(M<E&&(E=M),F<b&&(b=F)),w&&b!==0&&E!==0&&(M-=l.x,F-=l.y);var L=(n+M)/d,z=(h+F)/u,X=(n+M+O)/d,H=(h+F+D)/u;if(v.chars[I]={x:M,y:F,width:O,height:D,centerX:Math.floor(O/2),centerY:Math.floor(D/2),xOffset:x(R,"xoffset"),yOffset:x(R,"yoffset"),xAdvance:x(R,"xadvance")+a,data:{},kerning:{},u0:L,v0:z,u1:X,v1:H},i&&O!==0&&D!==0){var J=i.add(P,p,M,F,O,D);J&&J.setUVs(O,D,L,z,X,H)}}var G=s.getElementsByTagName("kerning");for(A=0;A<G.length;A++){var k=G[A],N=x(k,"first"),B=x(k,"second"),U=x(k,"amount");v.chars[B].kerning[N]=U}return v};o.exports=t},55873:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66863),l=t(98611),a={Parse:t(39860)};a=l(!1,a,s),o.exports=a},66863:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};o.exports=x},13468:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44616),l=t(56694),a=t(88899),r=new l({Extends:s,Mixins:[a],initialize:function(n,h,d,u,p,v,m){s.call(this,n,h,d,u,p,v,m),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(i,n){return this.cropWidth=i,this.cropHeight=n,this},setDisplayCallback:function(i){return this.displayCallback=i,this},setScrollX:function(i){return this.scrollX=i,this},setScrollY:function(i){return this.scrollY=i,this}});o.exports=r},93438:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(49584),l=function(a,r,i,n){var h=r._text,d=h.length,u=a.currentContext;if(!(d===0||!s(a,u,r,i,n))){i.addToRenderList(r);var p=r.fromAtlas?r.frame:r.texture.frames.__BASE,v=r.displayCallback,m=r.callbackData,g=r.fontData.chars,T=r.fontData.lineHeight,w=r._letterSpacing,b=0,E=0,A=0,R=null,I=0,P=0,M=0,F=0,O=0,D=0,L=null,z=0,X=r.frame.source.image,H=p.cutX,J=p.cutY,G=0,k=0,N=r._fontSize/r.fontData.size,B=r._align,U=0,W=0;r.getTextBounds(!1);var K=r._bounds.lines;B===1?W=(K.longest-K.lengths[0])/2:B===2&&(W=K.longest-K.lengths[0]),u.translate(-r.displayOriginX,-r.displayOriginY);var q=i.roundPixels;r.cropWidth>0&&r.cropHeight>0&&(u.beginPath(),u.rect(0,0,r.cropWidth,r.cropHeight),u.clip());for(var _=0;_<d;_++){if(k=N,G=0,A=h.charCodeAt(_),A===10){U++,B===1?W=(K.longest-K.lengths[U])/2:B===2&&(W=K.longest-K.lengths[U]),b=0,E+=T,L=null;continue}if(R=g[A],!!R){if(I=H+R.x,P=J+R.y,M=R.width,F=R.height,O=R.xOffset+b-r.scrollX,D=R.yOffset+E-r.scrollY,L!==null){var rt=R.kerning[z];O+=rt!==void 0?rt:0}if(v){m.index=_,m.charCode=A,m.x=O,m.y=D,m.scale=k,m.rotation=G,m.data=R.data;var ft=v(m);O=ft.x,D=ft.y,k=ft.scale,G=ft.rotation}O*=k,D*=k,O+=W,b+=R.xAdvance+w+(rt!==void 0?rt:0),L=R,z=A,!(M===0||F===0||A===32)&&(q&&(O=Math.round(O),D=Math.round(D)),u.save(),u.translate(O,D),u.rotate(G),u.scale(k,k),u.drawImage(X,I,P,M,F,0,0,M,F),u.restore())}}u.restore()}};o.exports=l},67513:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(13468),l=t(88933),a=t(99325),r=t(20494);a.register("dynamicBitmapText",function(i,n){i===void 0&&(i={});var h=r(i,"font",""),d=r(i,"text",""),u=r(i,"size",!1),p=new s(this.scene,0,0,h,d,u);return n!==void 0&&(i.add=n),l(this.scene,p,i),p})},94145:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(13468),l=t(61286);l.register("dynamicBitmapText",function(a,r,i,n,h){return this.displayList.add(new s(this.scene,a,r,i,n,h))})},88899:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(16873),a=t(93438),o.exports={renderWebGL:l,renderCanvas:a}},16873:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(69360),a=t(75512),r=new l,i=function(n,h,d,u){var p=h.text,v=p.length;if(v!==0){d.addToRenderList(h);var m=n.pipelines.set(h.pipeline,h),g=s(h,d,u);n.pipelines.preBatch(h);var T=g.sprite,w=g.calc,b=r,E=h.cropWidth>0||h.cropHeight>0;E&&(m.flush(),n.pushScissor(w.tx,w.ty,h.cropWidth*w.scaleX,h.cropHeight*w.scaleY));var A=h.frame,R=A.glTexture,I=h.tintFill,P=a.getTintAppendFloatAlpha(h.tintTopLeft,d.alpha*h._alphaTL),M=a.getTintAppendFloatAlpha(h.tintTopRight,d.alpha*h._alphaTR),F=a.getTintAppendFloatAlpha(h.tintBottomLeft,d.alpha*h._alphaBL),O=a.getTintAppendFloatAlpha(h.tintBottomRight,d.alpha*h._alphaBR),D=m.setGameObject(h),L=0,z=0,X=0,H=0,J=h.letterSpacing,G,k=0,N=0,B,U=h.scrollX,W=h.scrollY,K=h.fontData,q=K.chars,_=K.lineHeight,rt=h.fontSize/K.size,ft=0,vt=h._align,mt=0,yt=0,xt=h.getTextBounds(!1);h.maxWidth>0&&(p=xt.wrappedText,v=p.length);var It=h._bounds.lines;vt===1?yt=(It.longest-It.lengths[0])/2:vt===2&&(yt=It.longest-It.lengths[0]);for(var Gt=d.roundPixels,Zt=h.displayCallback,Bt=h.callbackData,At=0;At<v;At++){if(X=p.charCodeAt(At),X===10){mt++,vt===1?yt=(It.longest-It.lengths[mt])/2:vt===2&&(yt=It.longest-It.lengths[mt]),L=0,z+=_,B=null;continue}if(G=q[X],!!G){k=G.width,N=G.height;var kt=G.xOffset+L-U,Ut=G.yOffset+z-W;if(B!==null){var ee=G.kerning[H];kt+=ee!==void 0?ee:0}if(L+=G.xAdvance+J,B=G,H=X,!(k===0||N===0||X===32)){if(rt=h.fontSize/h.fontData.size,ft=0,Zt){Bt.color=0,Bt.tint.topLeft=P,Bt.tint.topRight=M,Bt.tint.bottomLeft=F,Bt.tint.bottomRight=O,Bt.index=At,Bt.charCode=X,Bt.x=kt,Bt.y=Ut,Bt.scale=rt,Bt.rotation=ft,Bt.data=G.data;var te=Zt(Bt);kt=te.x,Ut=te.y,rt=te.scale,ft=te.rotation,te.color?(P=te.color,M=te.color,F=te.color,O=te.color):(P=te.tint.topLeft,M=te.tint.topRight,F=te.tint.bottomLeft,O=te.tint.bottomRight),P=a.getTintAppendFloatAlpha(P,d.alpha*h._alphaTL),M=a.getTintAppendFloatAlpha(M,d.alpha*h._alphaTR),F=a.getTintAppendFloatAlpha(F,d.alpha*h._alphaBL),O=a.getTintAppendFloatAlpha(O,d.alpha*h._alphaBR)}kt*=rt,Ut*=rt,kt-=h.displayOriginX,Ut-=h.displayOriginY,kt+=yt,b.applyITRS(kt,Ut,ft,rt,rt),w.multiply(b,T);var fe=G.u0,ae=G.v0,le=G.u1,re=G.v1,we=k,Se=N,Ne=T.e,ce=T.f,se=Se*T.c+T.e,Ae=Se*T.d+T.f,Le=we*T.a+Se*T.c+T.e,en=we*T.b+Se*T.d+T.f,ge=we*T.a+T.e,Xe=we*T.b+T.f;Gt&&(Ne=Math.round(Ne),ce=Math.round(ce),se=Math.round(se),Ae=Math.round(Ae),Le=Math.round(Le),en=Math.round(en),ge=Math.round(ge),Xe=Math.round(Xe)),m.shouldFlush(6)&&(m.flush(),D=m.setGameObject(h)),m.batchQuad(h,Ne,ce,se,Ae,Le,en,ge,Xe,fe,ae,le,re,P,M,F,O,I,R,D)}}}E&&(m.flush(),n.popScissor()),n.pipelines.postBatch(h)}};o.exports=i},44616:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82897),a=t(64937),r=t(89980),i=t(82173),n=t(68298),h=t(31476),d=t(74118),u=t(84557),p=new s({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Texture,a.Tint,a.Transform,a.Visible,u],initialize:function(m,g,T,w,b,E,A){b===void 0&&(b=""),A===void 0&&(A=0),r.call(this,m,"BitmapText"),this.font=w;var R=this.scene.sys.cache.bitmapFont.get(w);R||console.warn("Invalid BitmapText key: "+w),this.fontData=R.data,this._text="",this._fontSize=E||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=A,this._bounds=i(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=R.fromAtlas,this.setTexture(R.texture,R.frame),this.setPosition(g,T),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(b)},setLeftAlign:function(){return this._align=p.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=p.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=p.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(v){return this._fontSize=v,this._dirty=!0,this},setLetterSpacing:function(v){return v===void 0&&(v=0),this._letterSpacing=v,this._dirty=!0,this},setLineSpacing:function(v){return v===void 0&&(v=0),this.lineSpacing=v,this},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this.text&&(this._text=v.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(v,m,g,T){return v===void 0&&(v=0),m===void 0&&(m=0),g===void 0&&(g=0),T===void 0&&(T=.5),this.dropShadowX=v,this.dropShadowY=m,this.dropShadowColor=g,this.dropShadowAlpha=T,this},setCharacterTint:function(v,m,g,T,w,b,E){v===void 0&&(v=0),m===void 0&&(m=1),g===void 0&&(g=!1),T===void 0&&(T=-1),w===void 0&&(w=T,b=T,E=T);var A=this.text.length;m===-1&&(m=A),v<0&&(v=A+v),v=l(v,0,A-1);for(var R=l(v+m,v,A),I=this.charColors,P=v;P<R;P++){var M=I[P];if(T===-1)I[P]=null;else{var F=g?1:0;M?(M.tintEffect=F,M.tintTL=T,M.tintTR=w,M.tintBL=b,M.tintBR=E):I[P]={tintEffect:F,tintTL:T,tintTR:w,tintBL:b,tintBR:E}}}return this},setWordTint:function(v,m,g,T,w,b,E){m===void 0&&(m=1);for(var A=this.getTextBounds(),R=A.words,I=typeof v=="number",P=0,M=0;M<R.length;M++){var F=R[M];if((I&&M===v||!I&&F.word===v)&&(this.setCharacterTint(F.i,F.word.length,g,T,w,b,E),P++,P===m))return this}return this},getTextBounds:function(v){var m=this._bounds;return(this._dirty||v||this.scaleX!==m.scaleX||this.scaleY!==m.scaleY)&&(i(this,v,!0,m),this._dirty=!1),m},getCharacterAt:function(v,m,g){for(var T=this.getLocalPoint(v,m,null,g),w=this.getTextBounds(),b=w.characters,E=new d,A=0;A<b.length;A++){var R=b[A];if(E.setTo(R.x,R.t,R.r-R.x,R.b),E.contains(T.x,T.y))return R}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(v,m,g){if(m===void 0&&(m=this._fontSize),g===void 0&&(g=this._align),v!==this.font){var T=this.scene.sys.cache.bitmapFont.get(v);T&&(this.font=v,this.fontData=T.data,this._fontSize=m,this._align=g,this.fromAtlas=T.fromAtlas===!0,this.setTexture(T.texture,T.frame),i(this,!1,!0,this._bounds))}return this},setMaxWidth:function(v,m){return this._maxWidth=v,this._dirty=!0,m!==void 0&&(this.wordWrapCharCode=m),this},align:{set:function(v){this._align=v,this._dirty=!0},get:function(){return this._align}},text:{set:function(v){this.setText(v)},get:function(){return this._text}},fontSize:{set:function(v){this._fontSize=v,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(v){this._letterSpacing=v,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(v){this._lineSpacing=v,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(v){this._maxWidth=v,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var v=a.ToJSON(this),m={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return v.data=m,v},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});p.ALIGN_LEFT=0,p.ALIGN_CENTER=1,p.ALIGN_RIGHT=2,p.ParseFromAtlas=n,p.ParseXMLBitmapFont=h,o.exports=p},97545:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(49584),l=function(a,r,i,n){var h=r._text,d=h.length,u=a.currentContext;if(!(d===0||!s(a,u,r,i,n))){i.addToRenderList(r);var p=r.fromAtlas?r.frame:r.texture.frames.__BASE,v=r.fontData.chars,m=r.fontData.lineHeight,g=r._letterSpacing,T=r._lineSpacing,w=0,b=0,E=0,A=null,R=0,I=0,P=0,M=0,F=0,O=0,D=null,L=0,z=p.source.image,X=p.cutX,H=p.cutY,J=r._fontSize/r.fontData.size,G=r._align,k=0,N=0,B=r.getTextBounds(!1);r.maxWidth>0&&(h=B.wrappedText,d=h.length);var U=r._bounds.lines;G===1?N=(U.longest-U.lengths[0])/2:G===2&&(N=U.longest-U.lengths[0]),u.translate(-r.displayOriginX,-r.displayOriginY);for(var W=i.roundPixels,K=0;K<d;K++){if(E=h.charCodeAt(K),E===10){k++,G===1?N=(U.longest-U.lengths[k])/2:G===2&&(N=U.longest-U.lengths[k]),w=0,b+=m+T,D=null;continue}if(A=v[E],!!A){if(R=X+A.x,I=H+A.y,P=A.width,M=A.height,F=A.xOffset+w,O=A.yOffset+b,D!==null){var q=A.kerning[L];F+=q!==void 0?q:0}F*=J,O*=J,F+=N,w+=A.xAdvance+g+(q!==void 0?q:0),D=A,L=E,!(P===0||M===0||E===32)&&(W&&(F=Math.round(F),O=Math.round(O)),u.save(),u.translate(F,O),u.scale(J,J),u.drawImage(z,R,I,P,M,0,0,P,M),u.restore())}}u.restore()}};o.exports=l},95499:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44616),l=t(88933),a=t(99325),r=t(20494),i=t(10850);a.register("bitmapText",function(n,h){n===void 0&&(n={});var d=i(n,"font",""),u=r(n,"text",""),p=r(n,"size",!1),v=i(n,"align",0),m=new s(this.scene,0,0,d,u,p,v);return h!==void 0&&(n.add=h),l(this.scene,m,n),m})},21797:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44616),l=t(61286);l.register("bitmapText",function(a,r,i,n,h,d){return this.displayList.add(new s(this.scene,a,r,i,n,h,d))})},84557:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(26372),a=t(97545),o.exports={renderWebGL:l,renderCanvas:a}},26372:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8810),l=t(73329),a=t(75512),r=function(i,n,h,d){var u=n._text,p=u.length;if(p!==0){h.addToRenderList(n);var v=i.pipelines.set(n.pipeline,n),m=l(n,h,d).calc;i.pipelines.preBatch(n);var g=h.roundPixels,T=h.alpha,w=n.charColors,b=n.tintFill,E=a.getTintAppendFloatAlpha,A=E(n.tintTopLeft,T*n._alphaTL),R=E(n.tintTopRight,T*n._alphaTR),I=E(n.tintBottomLeft,T*n._alphaBL),P=E(n.tintBottomRight,T*n._alphaBR),M=n.frame.glTexture,F=v.setGameObject(n),O=n.getTextBounds(!1),D,L,z,X=O.characters,H=n.dropShadowX,J=n.dropShadowY,G=H!==0||J!==0;if(G){var k=n.dropShadowColor,N=n.dropShadowAlpha,B=E(k,T*N*n._alphaTL),U=E(k,T*N*n._alphaTR),W=E(k,T*N*n._alphaBL),K=E(k,T*N*n._alphaBR);for(D=0;D<X.length;D++)L=X[D],z=L.glyph,!(L.code===32||z.width===0||z.height===0)&&s(v,n,L,z,H,J,m,g,B,U,W,K,1,M,F)}for(D=0;D<X.length;D++)if(L=X[D],z=L.glyph,!(L.code===32||z.width===0||z.height===0))if(v.shouldFlush(6)&&(v.flush(),F=v.setGameObject(n)),w[L.i]){var q=w[L.i],_=q.tintEffect,rt=E(q.tintTL,T*n._alphaTL),ft=E(q.tintTR,T*n._alphaTR),vt=E(q.tintBL,T*n._alphaBL),mt=E(q.tintBR,T*n._alphaBR);s(v,n,L,z,0,0,m,g,rt,ft,vt,mt,_,M,F)}else s(v,n,L,z,0,0,m,g,A,R,I,P,b,M,F);i.pipelines.postBatch(n)}};o.exports=r},52816:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92246),l=t(41664),a=t(56694),r=t(64937),i=t(82047),n=t(89980),h=t(71207),d=new a({Extends:n,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Size,r.Texture,r.Transform,r.Visible,s],initialize:function(p,v,m,g,T){n.call(this,p,"Blitter"),this.setTexture(g,T),this.setPosition(v,m),this.initPipeline(),this.initPostPipeline(),this.children=new h,this.renderList=[],this.dirty=!1},create:function(u,p,v,m,g){m===void 0&&(m=!0),g===void 0&&(g=this.children.length),v===void 0?v=this.frame:v instanceof i||(v=this.texture.get(v));var T=new l(this,u,p,v,m);return this.children.addAt(T,g,!1),this.dirty=!0,T},createFromCallback:function(u,p,v,m){for(var g=this.createMultiple(p,v,m),T=0;T<g.length;T++){var w=g[T];u.call(this,w,T)}return g},createMultiple:function(u,p,v){p===void 0&&(p=this.frame.name),v===void 0&&(v=!0),Array.isArray(p)||(p=[p]);var m=[],g=this;return p.forEach(function(T){for(var w=0;w<u;w++)m.push(g.create(0,0,T,v))}),m},childCanRender:function(u){return u.visible&&u.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});o.exports=d},33177:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=s.getRenderList();if(r.length!==0){var i=t.currentContext,n=l.alpha*s.alpha;if(n!==0){l.addToRenderList(s),i.globalCompositeOperation=t.blendModes[s.blendMode],i.imageSmoothingEnabled=!s.frame.source.scaleMode;var h=s.x-l.scrollX*s.scrollFactorX,d=s.y-l.scrollY*s.scrollFactorY;i.save(),a&&a.copyToContext(i);for(var u=l.roundPixels,p=0;p<r.length;p++){var v=r[p],m=v.flipX||v.flipY,g=v.frame,T=g.canvasData,w=g.x,b=g.y,E=1,A=1,R=v.alpha*n;R!==0&&(i.globalAlpha=R,m?(v.flipX&&(E=-1,w-=T.width),v.flipY&&(A=-1,b-=T.height),T.width>0&&T.height>0&&(i.save(),i.translate(v.x+h,v.y+d),i.scale(E,A),i.drawImage(g.source.image,T.x,T.y,T.width,T.height,w,b,T.width,T.height),i.restore())):(u&&(w=Math.round(w),b=Math.round(b)),T.width>0&&T.height>0&&i.drawImage(g.source.image,T.x,T.y,T.width,T.height,w+v.x+h,b+v.y+d,T.width,T.height)))}i.restore()}}};o.exports=x},68452:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(52816),l=t(88933),a=t(99325),r=t(20494);a.register("blitter",function(i,n){i===void 0&&(i={});var h=r(i,"key",null),d=r(i,"frame",null),u=new s(this.scene,0,0,h,d);return n!==void 0&&(i.add=n),l(this.scene,u,i),u})},38906:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(52816),l=t(61286);l.register("blitter",function(a,r,i,n){return this.displayList.add(new s(this.scene,a,r,i,n))})},92246:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(89165),a=t(33177),o.exports={renderWebGL:l,renderCanvas:a}},89165:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(69360),l=t(75512),a=new s,r=function(i,n,h,d){var u=n.getRenderList(),p=h.alpha*n.alpha;if(!(u.length===0||p===0)){h.addToRenderList(n);var v=i.pipelines.set(this.pipeline,n),m=h.scrollX*n.scrollFactorX,g=h.scrollY*n.scrollFactorY,T=a.copyFrom(h.matrix);d&&(T.multiplyWithOffset(d,-m,-g),m=0,g=0);var w=n.x-m,b=n.y-g,E=-1,A=!1;i.pipelines.preBatch(n);for(var R=0;R<u.length;R++){var I=u[R],P=I.frame,M=I.alpha*p;if(M!==0){var F=P.width,O=P.height,D=w+I.x+P.x,L=b+I.y+P.y;I.flipX&&(F*=-1,D+=P.width),I.flipY&&(O*=-1,L+=P.height);var z=T.setQuad(D,L,D+F,L+O),X=l.getTintAppendFloatAlpha(I.tint,M);if(P.sourceIndex!==E){var H=v.setGameObject(n,P);E=P.sourceIndex}v.batchQuad(n,z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],P.u0,P.v0,P.u1,P.v1,X,X,X,X,A,P.glTexture,H)&&(E=-1)}}i.pipelines.postBatch(n)}};o.exports=r},41664:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82047),a=new s({initialize:function(i,n,h,d,u){this.parent=i,this.x=n,this.y=h,this.frame=d,this.data={},this.tint=16777215,this._visible=u,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(r){return r===void 0?this.frame=this.parent.frame:r instanceof l&&r.texture===this.parent.texture?this.frame=r:this.frame=this.parent.texture.get(r),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(r,i,n){return this.x=r,this.y=i,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(r,i){return this.x=r,this.y=i,this},setFlipX:function(r){return this.flipX=r,this},setFlipY:function(r){return this.flipY=r,this},setFlip:function(r,i){return this.flipX=r,this.flipY=i,this},setVisible:function(r){return this.visible=r,this},setAlpha:function(r){return this.alpha=r,this},setTint:function(r){return this.tint=r,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(r){this.parent.dirty|=this._visible!==r,this._visible=r}},alpha:{get:function(){return this._alpha},set:function(r){this.parent.dirty|=this._alpha>0!=r>0,this._alpha=r}}});o.exports=a},97123:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=2,a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r,i,n,h){return r===void 0&&(r=1),i===void 0?this.alpha=r:(this._alphaTL=s(r,0,1),this._alphaTR=s(i,0,1),this._alphaBL=s(n,0,1),this._alphaBR=s(h,0,1)),this},alpha:{get:function(){return this._alpha},set:function(r){var i=s(r,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,i===0?this.renderFlags&=~l:this.renderFlags|=l}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(r){var i=s(r,0,1);this._alphaTL=i,i!==0&&(this.renderFlags|=l)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(r){var i=s(r,0,1);this._alphaTR=i,i!==0&&(this.renderFlags|=l)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(r){var i=s(r,0,1);this._alphaBL=i,i!==0&&(this.renderFlags|=l)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(r){var i=s(r,0,1);this._alphaBR=i,i!==0&&(this.renderFlags|=l)}}};o.exports=a},15720:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=2,a={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r){return r===void 0&&(r=1),this.alpha=r,this},alpha:{get:function(){return this._alpha},set:function(r){var i=s(r,0,1);this._alpha=i,i===0?this.renderFlags&=~l:this.renderFlags|=l}}};o.exports=a},69732:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l={_blendMode:s.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(a){typeof a=="string"&&(a=s[a]),a|=0,a>=-1&&(this._blendMode=a)}},setBlendMode:function(a){return this.blendMode=a,this}};o.exports=l},28284:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,s){return this.width=t,this.height=s,this},setDisplaySize:function(t,s){return this.displayWidth=t,this.displayHeight=s,this}};o.exports=x},85293:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={texture:null,frame:null,isCropped:!1,setCrop:function(t,s,l,a){if(t===void 0)this.isCropped=!1;else if(this.frame){if(typeof t=="number")this.frame.setCropUVs(this._crop,t,s,l,a,this.flipX,this.flipY);else{var r=t;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=x},14975:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return t===void 0&&(t=0),this.depth=t,this}};o.exports=x},88677:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(96910),a=t(72677),r=new s({initialize:function(n,h){this.gameObject=n,this.isPost=h,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(i){return i===void 0&&(i=0),this.padding=i,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(i){if(!this.isPost){var n=this.gameObject.scene.sys.renderer;n&&n.pipelines?(this.gameObject.pipeline=n.pipelines.FX_PIPELINE,i!==void 0&&(this.padding=i),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var i=this.list,n=0;n<i.length;n++)i[n].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(i){var n;if(this.isPost){var h=this.gameObject.getPostPipeline(String(i.type));for(Array.isArray(h)||(h=[h]),n=0;n<h.length;n++){var d=h[n];if(d.controller===i){this.gameObject.removePostPipeline(d),i.destroy();break}}}else{var u=this.list;for(n=0;n<u.length;n++)u[n]===i&&(a(u,n),i.destroy())}return this.gameObject},disable:function(i){return i===void 0&&(i=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,i&&this.clear(),this.gameObject},add:function(i,n){if(this.isPost){var h=String(i.type);this.gameObject.setPostPipeline(h,n);var d=this.gameObject.getPostPipeline(h);if(d)return Array.isArray(d)&&(d=d.pop()),d.controller=i,i}else return this.enabled||this.enable(),this.list.push(i),i},addGlow:function(i,n,h,d,u,p){return this.add(new l.Glow(this.gameObject,i,n,h,d),{quality:u,distance:p})},addShadow:function(i,n,h,d,u,p,v){return this.add(new l.Shadow(this.gameObject,i,n,h,d,u,p,v))},addPixelate:function(i){return this.add(new l.Pixelate(this.gameObject,i))},addVignette:function(i,n,h,d){return this.add(new l.Vignette(this.gameObject,i,n,h,d))},addShine:function(i,n,h,d){return this.add(new l.Shine(this.gameObject,i,n,h,d))},addBlur:function(i,n,h,d,u,p){return this.add(new l.Blur(this.gameObject,i,n,h,d,u,p))},addGradient:function(i,n,h,d,u,p,v,m){return this.add(new l.Gradient(this.gameObject,i,n,h,d,u,p,v,m))},addBloom:function(i,n,h,d,u,p){return this.add(new l.Bloom(this.gameObject,i,n,h,d,u,p))},addColorMatrix:function(){return this.add(new l.ColorMatrix(this.gameObject))},addCircle:function(i,n,h,d,u){return this.add(new l.Circle(this.gameObject,i,n,h,d,u))},addBarrel:function(i){return this.add(new l.Barrel(this.gameObject,i))},addDisplacement:function(i,n,h){return this.add(new l.Displacement(this.gameObject,i,n,h))},addWipe:function(i,n,h){return this.add(new l.Wipe(this.gameObject,i,n,h))},addReveal:function(i,n,h){return this.add(new l.Wipe(this.gameObject,i,n,h,!0))},addBokeh:function(i,n,h){return this.add(new l.Bokeh(this.gameObject,i,n,h))},addTiltShift:function(i,n,h,d,u,p){return this.add(new l.Bokeh(this.gameObject,i,n,h,!0,d,u,p))},destroy:function(){this.clear(),this.gameObject=null}});o.exports=r},92972:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,s){return this.flipX=t,this.flipY=s,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};o.exports=x},80693:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(2386),a=t(93736),r={prepareBoundsOutput:function(i,n){if(n===void 0&&(n=!1),this.rotation!==0&&l(i,this.x,this.y,this.rotation),n&&this.parentContainer){var h=this.parentContainer.getBoundsTransformMatrix();h.transformPoint(i.x,i.y,i)}return i},getCenter:function(i,n){return i===void 0&&(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,n)},getTopLeft:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,n)},getTopCenter:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,n)},getTopRight:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,n)},getLeftCenter:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,n)},getRightCenter:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,n)},getBottomLeft:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,n)},getBottomCenter:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,n)},getBottomRight:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,n)},getBounds:function(i){i===void 0&&(i=new s);var n,h,d,u,p,v,m,g;if(this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(i),T.transformPoint(i.x,i.y,i),n=i.x,h=i.y,this.getTopRight(i),T.transformPoint(i.x,i.y,i),d=i.x,u=i.y,this.getBottomLeft(i),T.transformPoint(i.x,i.y,i),p=i.x,v=i.y,this.getBottomRight(i),T.transformPoint(i.x,i.y,i),m=i.x,g=i.y}else this.getTopLeft(i),n=i.x,h=i.y,this.getTopRight(i),d=i.x,u=i.y,this.getBottomLeft(i),p=i.x,v=i.y,this.getBottomRight(i),m=i.x,g=i.y;return i.x=Math.min(n,d,p,m),i.y=Math.min(h,u,v,g),i.width=Math.max(n,d,p,m)-i.x,i.height=Math.max(h,u,v,g)-i.y,i}};o.exports=r},39171:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(76756),l=t(63037),a={mask:null,setMask:function(r){return this.mask=r,this},clearMask:function(r){return r===void 0&&(r=!1),r&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(r,i,n,h,d){return r===void 0&&(this.texture||this.shader||this.geom)&&(r=this),new s(this.scene,r,i,n,h,d)},createGeometryMask:function(r){return r===void 0&&(this.type==="Graphics"||this.geom)&&(r=this),new l(this.scene,r)}};o.exports=a},28072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,s){return t===void 0&&(t=.5),s===void 0&&(s=t),this.originX=t,this.originY=s,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(t,s){return t===void 0&&(t=0),s===void 0&&(s=t),this.displayOriginX=t,this.displayOriginY=s,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};o.exports=x},54211:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75606),l=t(63130),a=t(10850),r=t(55303),i=t(93736),n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:r.PLAYING_FORWARD,setPath:function(h,d){d===void 0&&(d=this.pathConfig);var u=this.pathTween;return u&&u.isPlaying()&&u.stop(),this.path=h,d&&this.startFollow(d),this},setRotateToPath:function(h,d){return d===void 0&&(d=0),this.rotateToPath=h,this.pathRotationOffset=d,this},isFollowing:function(){var h=this.pathTween;return h&&h.isPlaying()},startFollow:function(h,d){h===void 0&&(h={}),d===void 0&&(d=0);var u=this.pathTween;u&&u.isPlaying()&&u.stop(),typeof h=="number"&&(h={duration:h}),h.from=a(h,"from",0),h.to=a(h,"to",1);var p=l(h,"positionOnPath",!1);this.rotateToPath=l(h,"rotateToPath",!1),this.pathRotationOffset=a(h,"rotationOffset",0);var v=a(h,"startAt",d);if(v&&(h.onStart=function(g){var T=g.data[0];T.progress=v,T.elapsed=T.duration*v;var w=T.ease(T.progress);T.current=T.start+(T.end-T.start)*w,T.setTargetValue()}),this.pathOffset||(this.pathOffset=new i(this.x,this.y)),this.pathVector||(this.pathVector=new i),this.pathDelta||(this.pathDelta=new i),this.pathDelta.reset(),h.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(h),this.path.getStartPoint(this.pathOffset),p&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=r.PLAYING_FORWARD,this.rotateToPath){var m=this.path.getPoint(.1);this.rotation=Math.atan2(m.y-this.y,m.x-this.x)+s(this.pathRotationOffset)}return this.pathConfig=h,this},pauseFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.pause(),this},resumeFollow:function(){var h=this.pathTween;return h&&h.isPaused()&&h.resume(),this},stopFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this},pathUpdate:function(){var h=this.pathTween;if(h&&h.data){var d=h.data[0],u=this.pathDelta,p=this.pathVector;if(u.copy(p).negate(),d.state===r.COMPLETE){this.path.getPoint(d.end,p),u.add(p),p.add(this.pathOffset),this.setPosition(p.x,p.y);return}else if(d.state!==r.PLAYING_FORWARD&&d.state!==r.PLAYING_BACKWARD)return;this.path.getPoint(h.getValue(),p),u.add(p),p.add(this.pathOffset);var v=this.x,m=this.y;this.setPosition(p.x,p.y);var g=this.x-v,T=this.y-m;if(g===0&&T===0)return;if(d.state!==this._prevDirection){this._prevDirection=d.state;return}this.rotateToPath&&(this.rotation=Math.atan2(T,g)+s(this.pathRotationOffset))}}};o.exports=n},58210:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28699),l={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(a){this.pipelineData={};var r=this.scene.sys.renderer;if(!r)return!1;var i=r.pipelines;if(i){a===void 0&&(a=i.default);var n=i.get(a);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(a,r,i){var n=this.scene.sys.renderer;if(!n)return this;var h=n.pipelines;if(h){var d=h.get(a);d&&(this.pipeline=d),r&&(this.pipelineData=i?s(r):r)}return this},setPipelineData:function(a,r){var i=this.pipelineData;return r===void 0?delete i[a]:i[a]=r,this},resetPipeline:function(a){return a===void 0&&(a=!1),this.pipeline=this.defaultPipeline,a&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};o.exports=l},44086:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28699),l=t(88677),a=t(72677),r={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(i){this.postPipelines=[],this.postPipelineData={},this.postFX=new l(this,!0),i&&(this.preFX=new l(this,!1))},setPostPipeline:function(i,n,h){var d=this.scene.sys.renderer;if(!d)return this;var u=d.pipelines;if(u){Array.isArray(i)||(i=[i]);for(var p=0;p<i.length;p++){var v=u.getPostPipeline(i[p],this,n);v&&this.postPipelines.push(v)}n&&(this.postPipelineData=h?s(n):n)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(i,n){var h=this.postPipelineData;return n===void 0?delete h[i]:h[i]=n,this},getPostPipeline:function(i){for(var n=typeof i=="string",h=this.postPipelines,d=[],u=0;u<h.length;u++){var p=h[u];(n&&p.name===i||!n&&p instanceof i)&&d.push(p)}return d.length===1?d[0]:d},resetPostPipeline:function(i){i===void 0&&(i=!1);for(var n=this.postPipelines,h=0;h<n.length;h++)n[h].destroy();this.postPipelines=[],this.hasPostPipeline=!1,i&&(this.postPipelineData={})},removePostPipeline:function(i){for(var n=typeof i=="string",h=this.postPipelines,d=h.length-1;d>=0;d--){var u=h[d];(n&&u.name===i||!n&&u===i)&&(u.destroy(),a(h,d))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};o.exports=r},45900:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,s){return s===void 0&&(s=t),this.scrollFactorX=t,this.scrollFactorY=s,this}};o.exports=x},31654:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},setSize:function(t,s){return this.width=t,this.height=s,this},setDisplaySize:function(t,s){return this.displayWidth=t,this.displayHeight=s,this}};o.exports=x},82081:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82047),l=8,a={texture:null,frame:null,isCropped:!1,setTexture:function(r,i,n,h){return this.texture=this.scene.sys.textures.get(r),this.setFrame(i,n,h)},setFrame:function(r,i,n){return i===void 0&&(i=!0),n===void 0&&(n=!0),r instanceof s?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};o.exports=a},21850:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82047),l=8,a={texture:null,frame:null,isCropped:!1,setCrop:function(r,i,n,h){if(r===void 0)this.isCropped=!1;else if(this.frame){if(typeof r=="number")this.frame.setCropUVs(this._crop,r,i,n,h,this.flipX,this.flipY);else{var d=r;this.frame.setCropUVs(this._crop,d.x,d.y,d.width,d.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(r,i){return this.texture=this.scene.sys.textures.get(r),this.setFrame(i)},setFrame:function(r,i,n){return i===void 0&&(i=!0),n===void 0&&(n=!0),r instanceof s?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=a},58072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,s,l,a){return t===void 0&&(t=16777215),s===void 0&&(s=t,l=t,a=t),this.tintTopLeft=t,this.tintTopRight=s,this.tintBottomLeft=l,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function(t,s,l,a){return this.setTint(t,s,l,a),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};o.exports=x},48129:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(s.textureKey=t.texture.key,s.frameKey=t.frame.name),s};o.exports=x},56584:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(69360),a=t(64462),r=t(35786),i=t(62138),n=t(93736),h=4,d={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(u){this._scaleX=u,this._scaleY=u,u===0?this.renderFlags&=~h:this.renderFlags|=h}},scaleX:{get:function(){return this._scaleX},set:function(u){this._scaleX=u,u===0?this.renderFlags&=~h:this._scaleY!==0&&(this.renderFlags|=h)}},scaleY:{get:function(){return this._scaleY},set:function(u){this._scaleY=u,u===0?this.renderFlags&=~h:this._scaleX!==0&&(this.renderFlags|=h)}},angle:{get:function(){return i(this._rotation*s.RAD_TO_DEG)},set:function(u){this.rotation=i(u)*s.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=r(u)}},setPosition:function(u,p,v,m){return u===void 0&&(u=0),p===void 0&&(p=u),v===void 0&&(v=0),m===void 0&&(m=0),this.x=u,this.y=p,this.z=v,this.w=m,this},copyPosition:function(u){return u.x!==void 0&&(this.x=u.x),u.y!==void 0&&(this.y=u.y),u.z!==void 0&&(this.z=u.z),u.w!==void 0&&(this.w=u.w),this},setRandomPosition:function(u,p,v,m){return u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=this.scene.sys.scale.width),m===void 0&&(m=this.scene.sys.scale.height),this.x=u+Math.random()*v,this.y=p+Math.random()*m,this},setRotation:function(u){return u===void 0&&(u=0),this.rotation=u,this},setAngle:function(u){return u===void 0&&(u=0),this.angle=u,this},setScale:function(u,p){return u===void 0&&(u=1),p===void 0&&(p=u),this.scaleX=u,this.scaleY=p,this},setX:function(u){return u===void 0&&(u=0),this.x=u,this},setY:function(u){return u===void 0&&(u=0),this.y=u,this},setZ:function(u){return u===void 0&&(u=0),this.z=u,this},setW:function(u){return u===void 0&&(u=0),this.w=u,this},getLocalTransformMatrix:function(u){return u===void 0&&(u=new l),u.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(u,p){u===void 0&&(u=new l);var v=this.parentContainer;if(!v)return this.getLocalTransformMatrix(u);for(p||(p=new l),u.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);v;)p.applyITRS(v.x,v.y,v._rotation,v._scaleX,v._scaleY),p.multiply(u,u),v=v.parentContainer;return u},getLocalPoint:function(u,p,v,m){v||(v=new n),m||(m=this.scene.sys.cameras.main);var g=m.scrollX,T=m.scrollY,w=u+g*this.scrollFactorX-g,b=p+T*this.scrollFactorY-T;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(w,b,v):a(w,b,this.x,this.y,this.rotation,this.scaleX,this.scaleY,v),this._originComponent&&(v.x+=this._displayOriginX,v.y+=this._displayOriginY),v},getParentRotation:function(){for(var u=0,p=this.parentContainer;p;)u+=p.rotation,p=p.parentContainer;return u}};o.exports=d},69360:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(83392),a=t(93736),r=new s({initialize:function(n,h,d,u,p,v){n===void 0&&(n=1),h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=1),p===void 0&&(p=0),v===void 0&&(v=0),this.matrix=new Float32Array([n,h,d,u,p,v,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(i){this.matrix[0]=i}},b:{get:function(){return this.matrix[1]},set:function(i){this.matrix[1]=i}},c:{get:function(){return this.matrix[2]},set:function(i){this.matrix[2]=i}},d:{get:function(){return this.matrix[3]},set:function(i){this.matrix[3]=i}},e:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},f:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},tx:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},ty:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var i=this.matrix,n=i[0],h=i[1],d=i[2],u=i[3];return n||h?h>0?Math.acos(n/this.scaleX):-Math.acos(n/this.scaleX):d||u?l.TAU-(u>0?Math.acos(-d/this.scaleY):-Math.acos(d/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var i=this.matrix;return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,this},translate:function(i,n){var h=this.matrix;return h[4]=h[0]*i+h[2]*n+h[4],h[5]=h[1]*i+h[3]*n+h[5],this},scale:function(i,n){var h=this.matrix;return h[0]*=i,h[1]*=i,h[2]*=n,h[3]*=n,this},rotate:function(i){var n=Math.sin(i),h=Math.cos(i),d=this.matrix,u=d[0],p=d[1],v=d[2],m=d[3];return d[0]=u*h+v*n,d[1]=p*h+m*n,d[2]=u*-n+v*h,d[3]=p*-n+m*h,this},multiply:function(i,n){var h=this.matrix,d=i.matrix,u=h[0],p=h[1],v=h[2],m=h[3],g=h[4],T=h[5],w=d[0],b=d[1],E=d[2],A=d[3],R=d[4],I=d[5],P=n===void 0?h:n.matrix;return P[0]=w*u+b*v,P[1]=w*p+b*m,P[2]=E*u+A*v,P[3]=E*p+A*m,P[4]=R*u+I*v+g,P[5]=R*p+I*m+T,P},multiplyWithOffset:function(i,n,h){var d=this.matrix,u=i.matrix,p=d[0],v=d[1],m=d[2],g=d[3],T=d[4],w=d[5],b=n*p+h*m+T,E=n*v+h*g+w,A=u[0],R=u[1],I=u[2],P=u[3],M=u[4],F=u[5];return d[0]=A*p+R*m,d[1]=A*v+R*g,d[2]=I*p+P*m,d[3]=I*v+P*g,d[4]=M*p+F*m+b,d[5]=M*v+F*g+E,this},transform:function(i,n,h,d,u,p){var v=this.matrix,m=v[0],g=v[1],T=v[2],w=v[3],b=v[4],E=v[5];return v[0]=i*m+n*T,v[1]=i*g+n*w,v[2]=h*m+d*T,v[3]=h*g+d*w,v[4]=u*m+p*T+b,v[5]=u*g+p*w+E,this},transformPoint:function(i,n,h){h===void 0&&(h={x:0,y:0});var d=this.matrix,u=d[0],p=d[1],v=d[2],m=d[3],g=d[4],T=d[5];return h.x=i*u+n*v+g,h.y=i*p+n*m+T,h},invert:function(){var i=this.matrix,n=i[0],h=i[1],d=i[2],u=i[3],p=i[4],v=i[5],m=n*u-h*d;return i[0]=u/m,i[1]=-h/m,i[2]=-d/m,i[3]=n/m,i[4]=(d*v-u*p)/m,i[5]=-(n*v-h*p)/m,this},copyFrom:function(i){var n=this.matrix;return n[0]=i.a,n[1]=i.b,n[2]=i.c,n[3]=i.d,n[4]=i.e,n[5]=i.f,this},copyFromArray:function(i){var n=this.matrix;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],this},copyToContext:function(i){var n=this.matrix;return i.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i},setToContext:function(i){return i.setTransform(this),i},copyToArray:function(i){var n=this.matrix;return i===void 0?i=[n[0],n[1],n[2],n[3],n[4],n[5]]:(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5]),i},setTransform:function(i,n,h,d,u,p){var v=this.matrix;return v[0]=i,v[1]=n,v[2]=h,v[3]=d,v[4]=u,v[5]=p,this},decomposeMatrix:function(){var i=this.decomposedMatrix,n=this.matrix,h=n[0],d=n[1],u=n[2],p=n[3],v=h*p-d*u;if(i.translateX=n[4],i.translateY=n[5],h||d){var m=Math.sqrt(h*h+d*d);i.rotation=d>0?Math.acos(h/m):-Math.acos(h/m),i.scaleX=m,i.scaleY=v/m}else if(u||p){var g=Math.sqrt(u*u+p*p);i.rotation=Math.PI*.5-(p>0?Math.acos(-u/g):-Math.acos(u/g)),i.scaleX=v/g,i.scaleY=g}else i.rotation=0,i.scaleX=0,i.scaleY=0;return i},applyITRS:function(i,n,h,d,u){var p=this.matrix,v=Math.sin(h),m=Math.cos(h);return p[4]=i,p[5]=n,p[0]=m*d,p[1]=v*d,p[2]=-v*u,p[3]=m*u,this},applyInverse:function(i,n,h){h===void 0&&(h=new a);var d=this.matrix,u=d[0],p=d[1],v=d[2],m=d[3],g=d[4],T=d[5],w=1/(u*m+v*-p);return h.x=m*w*i+-v*w*n+(T*v-g*m)*w,h.y=u*w*n+-p*w*i+(-T*u+g*p)*w,h},setQuad:function(i,n,h,d,u,p){u===void 0&&(u=!1),p===void 0&&(p=this.quad);var v=this.matrix,m=v[0],g=v[1],T=v[2],w=v[3],b=v[4],E=v[5];return u?(p[0]=Math.round(i*m+n*T+b),p[1]=Math.round(i*g+n*w+E),p[2]=Math.round(i*m+d*T+b),p[3]=Math.round(i*g+d*w+E),p[4]=Math.round(h*m+d*T+b),p[5]=Math.round(h*g+d*w+E),p[6]=Math.round(h*m+n*T+b),p[7]=Math.round(h*g+n*w+E)):(p[0]=i*m+n*T+b,p[1]=i*g+n*w+E,p[2]=i*m+d*T+b,p[3]=i*g+d*w+E,p[4]=h*m+d*T+b,p[5]=h*g+d*w+E,p[6]=h*m+n*T+b,p[7]=h*g+n*w+E),p},getX:function(i,n){return i*this.a+n*this.c+this.e},getY:function(i,n){return i*this.b+n*this.d+this.f},getXRound:function(i,n,h){var d=this.getX(i,n);return h&&(d=Math.round(d)),d},getYRound:function(i,n,h){var d=this.getY(i,n);return h&&(d=Math.round(d)),d},getCSSMatrix:function(){var i=this.matrix;return"matrix("+i[0]+","+i[1]+","+i[2]+","+i[3]+","+i[4]+","+i[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});o.exports=r},59694:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=1,t={_visible:!0,visible:{get:function(){return this._visible},set:function(s){s?(this._visible=!0,this.renderFlags|=x):(this._visible=!1,this.renderFlags&=~x)}},setVisible:function(s){return this.visible=s,this}};o.exports=t},64937:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Alpha:t(97123),AlphaSingle:t(15720),BlendMode:t(69732),ComputedSize:t(28284),Crop:t(85293),Depth:t(14975),Flip:t(92972),FX:t(88677),GetBounds:t(80693),Mask:t(39171),Origin:t(28072),PathFollower:t(54211),Pipeline:t(58210),PostPipeline:t(44086),ScrollFactor:t(45900),Size:t(31654),Texture:t(82081),TextureCrop:t(21850),Tint:t(58072),ToJSON:t(48129),Transform:t(56584),TransformMatrix:t(69360),Visible:t(59694)}},70339:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59959),l=t(95723),a=t(56694),r=t(64937),i=t(56631),n=t(89980),h=t(74118),d=t(98524),u=t(58795),p=t(93736),v=new a({Extends:n,Mixins:[r.AlphaSingle,r.BlendMode,r.ComputedSize,r.Depth,r.Mask,r.PostPipeline,r.Transform,r.Visible,d],initialize:function(g,T,w,b){n.call(this,g,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new r.TransformMatrix,this.tempTransformMatrix=new r.TransformMatrix,this._sortKey="",this._sysEvents=g.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(T,w),this.setBlendMode(l.SKIP_CHECK),b&&this.add(b)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(m){return m===void 0&&(m=!0),this.exclusive=m,this},getBounds:function(m){if(m===void 0&&(m=new h),m.setTo(this.x,this.y,0,0),this.parentContainer){var g=this.parentContainer.getBoundsTransformMatrix(),T=g.transformPoint(this.x,this.y);m.setTo(T.x,T.y,0,0)}if(this.list.length>0){var w=this.list,b=new h,E=!1;m.setEmpty();for(var A=0;A<w.length;A++){var R=w[A];R.getBounds&&(R.getBounds(b),E?u(b,m,m):(m.setTo(b.x,b.y,b.width,b.height),E=!0))}}return m},addHandler:function(m){m.once(i.DESTROY,this.remove,this),this.exclusive&&(m.parentContainer&&m.parentContainer.remove(m),m.parentContainer=this,m.removeFromDisplayList(),m.addedToScene())},removeHandler:function(m){m.off(i.DESTROY,this.remove,this),this.exclusive&&(m.parentContainer=null,m.removedFromScene(),m.addToDisplayList())},pointToContainer:function(m,g){g===void 0&&(g=new p),this.parentContainer?this.parentContainer.pointToContainer(m,g):(g.x=m.x,g.y=m.y);var T=this.tempTransformMatrix;return T.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),T.invert(),T.transformPoint(m.x,m.y,g),g},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(m){return s.Add(this.list,m,this.maxSize,this.addHandler,this),this},addAt:function(m,g){return s.AddAt(this.list,m,g,this.maxSize,this.addHandler,this),this},getAt:function(m){return this.list[m]},getIndex:function(m){return this.list.indexOf(m)},sort:function(m,g){return m?(g===void 0&&(g=function(T,w){return T[m]-w[m]}),s.StableSort(this.list,g),this):this},getByName:function(m){return s.GetFirst(this.list,"name",m)},getRandom:function(m,g){return s.GetRandom(this.list,m,g)},getFirst:function(m,g,T,w){return s.GetFirst(this.list,m,g,T,w)},getAll:function(m,g,T,w){return s.GetAll(this.list,m,g,T,w)},count:function(m,g,T,w){return s.CountAllMatching(this.list,m,g,T,w)},swap:function(m,g){return s.Swap(this.list,m,g),this},moveTo:function(m,g){return s.MoveTo(this.list,m,g),this},moveAbove:function(m,g){return s.MoveAbove(this.list,m,g),this},moveBelow:function(m,g){return s.MoveBelow(this.list,m,g),this},remove:function(m,g){var T=s.Remove(this.list,m,this.removeHandler,this);if(g&&T){Array.isArray(T)||(T=[T]);for(var w=0;w<T.length;w++)T[w].destroy()}return this},removeAt:function(m,g){var T=s.RemoveAt(this.list,m,this.removeHandler,this);return g&&T&&T.destroy(),this},removeBetween:function(m,g,T){var w=s.RemoveBetween(this.list,m,g,this.removeHandler,this);if(T)for(var b=0;b<w.length;b++)w[b].destroy();return this},removeAll:function(m){var g=this.list;if(m){for(var T=0;T<g.length;T++)g[T]&&g[T].scene&&(g[T].off(i.DESTROY,this.remove,this),g[T].destroy());this.list=[]}else s.RemoveBetween(g,0,g.length,this.removeHandler,this);return this},bringToTop:function(m){return s.BringToTop(this.list,m),this},sendToBack:function(m){return s.SendToBack(this.list,m),this},moveUp:function(m){return s.MoveUp(this.list,m),this},moveDown:function(m){return s.MoveDown(this.list,m),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(m,g,T){var w=s.Replace(this.list,m,g);return w&&(this.addHandler(g),this.removeHandler(m),T&&m.destroy()),this},exists:function(m){return this.list.indexOf(m)>-1},setAll:function(m,g,T,w){return s.SetAll(this.list,m,g,T,w),this},each:function(m,g){var T=[null],w,b=this.list.slice(),E=b.length;for(w=2;w<arguments.length;w++)T.push(arguments[w]);for(w=0;w<E;w++)T[0]=b[w],m.apply(g,T);return this},iterate:function(m,g){var T=[null],w;for(w=2;w<arguments.length;w++)T.push(arguments[w]);for(w=0;w<this.list.length;w++)T[0]=this.list[w],m.apply(g,T);return this},setScrollFactor:function(m,g,T){return g===void 0&&(g=m),T===void 0&&(T=!1),this.scrollFactorX=m,this.scrollFactorY=g,T&&(s.SetAll(this.list,"scrollFactorX",m),s.SetAll(this.list,"scrollFactorY",g)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});o.exports=v},13916:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l.addToRenderList(s);var r=s.list;if(r.length!==0){var i=s.localTransform;a?(i.loadIdentity(),i.multiply(a),i.translate(s.x,s.y),i.rotate(s.rotation),i.scale(s.scaleX,s.scaleY)):i.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY);var n=s.blendMode!==-1;n||t.setBlendMode(0);var h=s._alpha,d=s.scrollFactorX,u=s.scrollFactorY;s.mask&&s.mask.preRenderCanvas(t,null,l);for(var p=0;p<r.length;p++){var v=r[p];if(v.willRender(l)){var m=v.alpha,g=v.scrollFactorX,T=v.scrollFactorY;!n&&v.blendMode!==t.currentBlendMode&&t.setBlendMode(v.blendMode),v.setScrollFactor(g*d,T*u),v.setAlpha(m*h),v.renderCanvas(t,v,l,i),v.setAlpha(m),v.setScrollFactor(g,T)}}s.mask&&s.mask.postRenderCanvas(t)}};o.exports=x},44516:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(70339),a=t(99325),r=t(20494);a.register("container",function(i,n){i===void 0&&(i={});var h=r(i,"x",0),d=r(i,"y",0),u=r(i,"children",null),p=new l(this.scene,h,d,u);return n!==void 0&&(i.add=n),s(this.scene,p,i),p})},23400:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70339),l=t(61286);l.register("container",function(a,r,i){return this.displayList.add(new s(this.scene,a,r,i))})},98524:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(36934),a=t(13916),o.exports={renderWebGL:l,renderCanvas:a}},36934:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l.addToRenderList(s);var r=s.list,i=r.length;if(i!==0){var n=s.localTransform;a?(n.loadIdentity(),n.multiply(a),n.translate(s.x,s.y),n.rotate(s.rotation),n.scale(s.scaleX,s.scaleY)):n.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),t.pipelines.preBatch(s);var h=s.blendMode!==-1;h||t.setBlendMode(0);for(var d=s.alpha,u=s.scrollFactorX,p=s.scrollFactorY,v=0;v<i;v++){var m=r[v];if(m.willRender(l)){var g,T,w,b;if(m.alphaTopLeft!==void 0)g=m.alphaTopLeft,T=m.alphaTopRight,w=m.alphaBottomLeft,b=m.alphaBottomRight;else{var E=m.alpha;g=E,T=E,w=E,b=E}var A=m.scrollFactorX,R=m.scrollFactorY;!h&&m.blendMode!==t.currentBlendMode&&t.setBlendMode(m.blendMode);var I=m.mask;I&&I.preRenderWebGL(t,m,l);var P=m.type;P!==t.currentType&&(t.newType=!0,t.currentType=P),t.nextTypeMatch=v<i-1?r[v+1].type===t.currentType:!1,m.setScrollFactor(A*u,R*p),m.setAlpha(g*d,T*d,w*d,b*d),m.renderWebGL(t,m,l,n,s),m.setAlpha(g,T,w,b),m.setScrollFactor(A,R),I&&I.postRenderWebGL(t,l),t.newType=!1}}t.pipelines.postBatch(s)}};o.exports=x},2452:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(11603),r=t(89980),i=t(42911),n=t(55638),h=t(7599),d=t(51729),u=new s({Extends:r,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Origin,l.ScrollFactor,l.Transform,l.Visible,a],initialize:function(v,m,g,T,w,b){r.call(this,v,"DOMElement"),this.parent=v.sys.game.domContainer,this.cache=v.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(m,g),typeof T=="string"?T[0]==="#"?this.setElement(T.substr(1),w,b):this.createElement(T,w,b):T&&this.setElement(T,w,b),v.sys.events.on(h.SLEEP,this.handleSceneEvent,this),v.sys.events.on(h.WAKE,this.handleSceneEvent,this),v.sys.events.on(h.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(p){var v=this.node,m=v.style;v&&(m.display=p.settings.visible?"block":"none")},setSkew:function(p,v){return p===void 0&&(p=0),v===void 0&&(v=p),this.skewX=p,this.skewY=v,this},setPerspective:function(p){return this.parent.style.perspective=p+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(p){this.parent.style.perspective=p+"px"}},addListener:function(p){if(this.node){p=p.split(" ");for(var v=0;v<p.length;v++)this.node.addEventListener(p[v],this.handler,!1)}return this},removeListener:function(p){if(this.node){p=p.split(" ");for(var v=0;v<p.length;v++)this.node.removeEventListener(p[v],this.handler)}return this},dispatchNativeEvent:function(p){this.emit(p.type,p)},createElement:function(p,v,m){return this.setElement(document.createElement(p),v,m)},setElement:function(p,v,m){this.removeElement();var g;if(typeof p=="string"?(p[0]==="#"&&(p=p.substr(1)),g=document.getElementById(p)):typeof p=="object"&&p.nodeType===1&&(g=p),!g)return this;if(this.node=g,v&&i(v))for(var T in v)g.style[T]=v[T];else typeof v=="string"&&(g.style=v);return g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),m&&(g.innerText=m),this.updateSize()},createFromCache:function(p,v){var m=this.cache.get(p);return m&&this.createFromHTML(m,v),this},createFromHTML:function(p,v){v===void 0&&(v="div"),this.removeElement();var m=document.createElement(v);return this.node=m,m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),m.innerHTML=p,this.updateSize()},removeElement:function(){return this.node&&(n(this.node),this.node=null),this},updateSize:function(){var p=this.node,v=p.getBoundingClientRect();return this.width=p.clientWidth,this.height=p.clientHeight,this.displayWidth=v.width||0,this.displayHeight=v.height||0,this},getChildByProperty:function(p,v){if(this.node){for(var m=this.node.querySelectorAll("*"),g=0;g<m.length;g++)if(m[g][p]===v)return m[g]}return null},getChildByID:function(p){return this.getChildByProperty("id",p)},getChildByName:function(p){return this.getChildByProperty("name",p)},setClassName:function(p){return this.node&&(this.node.className=p,this.updateSize()),this},setText:function(p){return this.node&&(this.node.innerText=p,this.updateSize()),this},setHTML:function(p){return this.node&&(this.node.innerHTML=p,this.updateSize()),this},preRender:function(){var p=this.parentContainer,v=this.node;v&&p&&!p.willRender()&&(v.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(h.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(h.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(h.PRE_RENDER,this.preRender,this)}});o.exports=u},66070:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2452),l=t(89980),a=t(69360),r=new a,i=new a,n=new a,h=function(d,u,p,v){if(u.node){var m=u.node.style,g=u.scene.sys.settings;if(!m||!g.visible||l.RENDER_MASK!==u.renderFlags||u.cameraFilter!==0&&u.cameraFilter&p.id||u.parentContainer&&!u.parentContainer.willRender()){m.display="none";return}var T=u.parentContainer,w=p.alpha*u.alpha;T&&(w*=T.alpha);var b=r,E=i,A=n,R=0,I=0,P="0%",M="0%";v?(R=u.width*u.scaleX*u.originX,I=u.height*u.scaleY*u.originY,E.applyITRS(u.x-R,u.y-I,u.rotation,u.scaleX,u.scaleY),b.copyFrom(p.matrix),b.multiplyWithOffset(v,-p.scrollX*u.scrollFactorX,-p.scrollY*u.scrollFactorY),E.e=u.x-R,E.f=u.y-I,b.multiply(E,A)):(R=u.width*u.originX,I=u.height*u.originY,E.applyITRS(u.x-R,u.y-I,u.rotation,u.scaleX,u.scaleY),b.copyFrom(p.matrix),P=100*u.originX+"%",M=100*u.originY+"%",E.e-=p.scrollX*u.scrollFactorX,E.f-=p.scrollY*u.scrollFactorY,b.multiply(E,A)),u.transformOnly||(m.display="block",m.opacity=w,m.zIndex=u._depth,m.pointerEvents=u.pointerEvents,m.mixBlendMode=s[u._blendMode]),m.transform=A.getCSSMatrix()+" skew("+u.skewX+"rad, "+u.skewY+"rad) rotate3d("+u.rotate3d.x+","+u.rotate3d.y+","+u.rotate3d.z+","+u.rotate3d.w+u.rotate3dAngle+")",m.transformOrigin=P+" "+M}};o.exports=h},66788:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38943),l=t(61286);l.register("dom",function(a,r,i,n,h){var d=new s(this.scene,a,r,i,n,h);return this.displayList.add(d),d})},11603:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(66070),a=t(66070),o.exports={renderWebGL:l,renderCanvas:a}},65492:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"},98398:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},40239:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"},17286:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},31496:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="created"},89587:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="error"},59792:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="locked"},96342:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},6017:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="playing"},49614:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"},24418:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeked"},87318:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeking"},50009:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stalled"},61922:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},79501:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="textureready"},4052:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"},54857:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unsupported"},56631:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:t(65492),DESTROY:t(98398),REMOVED_FROM_SCENE:t(40239),VIDEO_COMPLETE:t(17286),VIDEO_CREATED:t(31496),VIDEO_ERROR:t(89587),VIDEO_LOCKED:t(59792),VIDEO_LOOP:t(96342),VIDEO_PLAY:t(49614),VIDEO_PLAYING:t(6017),VIDEO_SEEKED:t(24418),VIDEO_SEEKING:t(87318),VIDEO_STALLED:t(50009),VIDEO_STOP:t(61922),VIDEO_TEXTURE:t(79501),VIDEO_UNLOCKED:t(4052),VIDEO_UNSUPPORTED:t(54857)}},39419:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(79394),i=new s({Extends:a,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.Origin,l.ScrollFactor,l.Size,l.Texture,l.Tint,l.Transform,l.Visible,r],initialize:function(h){a.call(this,h,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});o.exports=i},96699:()=>{},41155:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39419),l=t(61286);l.register("extern",function(){var a=new s(this.scene);return this.displayList.add(a),a})},79394:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(81410),a=t(96699),o.exports={renderWebGL:l,renderCanvas:a}},81410:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n){a.pipelines.clear();var h=s(r,i,n).calc;r.render.call(r,a,i,h),a.pipelines.rebind()};o.exports=l},36266:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(51052),l=t(56694),a=t(36266),r=t(64937),i=t(95669),n=t(89980),h=t(72632),d=t(10850),u=t(83392),p=t(60898),v=new l({Extends:n,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.Transform,r.Visible,r.ScrollFactor,p],initialize:function(g,T){var w=d(T,"x",0),b=d(T,"y",0);n.call(this,g,"Graphics"),this.setPosition(w,b),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(T)},setDefaultStyles:function(m){return d(m,"lineStyle",null)&&(this.defaultStrokeWidth=d(m,"lineStyle.width",1),this.defaultStrokeColor=d(m,"lineStyle.color",16777215),this.defaultStrokeAlpha=d(m,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),d(m,"fillStyle",null)&&(this.defaultFillColor=d(m,"fillStyle.color",16777215),this.defaultFillAlpha=d(m,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(m,g,T){return T===void 0&&(T=1),this.commandBuffer.push(a.LINE_STYLE,m,g,T),this._lineWidth=m,this},fillStyle:function(m,g){return g===void 0&&(g=1),this.commandBuffer.push(a.FILL_STYLE,m,g),this},fillGradientStyle:function(m,g,T,w,b,E,A,R){return b===void 0&&(b=1),E===void 0&&(E=b),A===void 0&&(A=b),R===void 0&&(R=b),this.commandBuffer.push(a.GRADIENT_FILL_STYLE,b,E,A,R,m,g,T,w),this},lineGradientStyle:function(m,g,T,w,b,E){return E===void 0&&(E=1),this.commandBuffer.push(a.GRADIENT_LINE_STYLE,m,E,g,T,w,b),this},beginPath:function(){return this.commandBuffer.push(a.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(a.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(a.FILL_PATH),this},fill:function(){return this.commandBuffer.push(a.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(a.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(a.STROKE_PATH),this},fillCircleShape:function(m){return this.fillCircle(m.x,m.y,m.radius)},strokeCircleShape:function(m){return this.strokeCircle(m.x,m.y,m.radius)},fillCircle:function(m,g,T){return this.beginPath(),this.arc(m,g,T,0,u.PI2),this.fillPath(),this},strokeCircle:function(m,g,T){return this.beginPath(),this.arc(m,g,T,0,u.PI2),this.strokePath(),this},fillRectShape:function(m){return this.fillRect(m.x,m.y,m.width,m.height)},strokeRectShape:function(m){return this.strokeRect(m.x,m.y,m.width,m.height)},fillRect:function(m,g,T,w){return this.commandBuffer.push(a.FILL_RECT,m,g,T,w),this},strokeRect:function(m,g,T,w){var b=this._lineWidth/2,E=m-b,A=m+b;return this.beginPath(),this.moveTo(m,g),this.lineTo(m,g+w),this.strokePath(),this.beginPath(),this.moveTo(m+T,g),this.lineTo(m+T,g+w),this.strokePath(),this.beginPath(),this.moveTo(E,g),this.lineTo(A+T,g),this.strokePath(),this.beginPath(),this.moveTo(E,g+w),this.lineTo(A+T,g+w),this.strokePath(),this},fillRoundedRect:function(m,g,T,w,b){b===void 0&&(b=20);var E=b,A=b,R=b,I=b;typeof b!="number"&&(E=h(b,"tl",20),A=h(b,"tr",20),R=h(b,"bl",20),I=h(b,"br",20));var P=E>=0,M=A>=0,F=R>=0,O=I>=0;return E=Math.abs(E),A=Math.abs(A),R=Math.abs(R),I=Math.abs(I),this.beginPath(),this.moveTo(m+E,g),this.lineTo(m+T-A,g),M?this.arc(m+T-A,g+A,A,-u.TAU,0):this.arc(m+T,g,A,Math.PI,u.TAU,!0),this.lineTo(m+T,g+w-I),O?this.arc(m+T-I,g+w-I,I,0,u.TAU):this.arc(m+T,g+w,I,-u.TAU,Math.PI,!0),this.lineTo(m+R,g+w),F?this.arc(m+R,g+w-R,R,u.TAU,Math.PI):this.arc(m,g+w,R,0,-u.TAU,!0),this.lineTo(m,g+E),P?this.arc(m+E,g+E,E,-Math.PI,-u.TAU):this.arc(m,g,E,u.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(m,g,T,w,b){b===void 0&&(b=20);var E=b,A=b,R=b,I=b,P=Math.min(T,w)/2;typeof b!="number"&&(E=h(b,"tl",20),A=h(b,"tr",20),R=h(b,"bl",20),I=h(b,"br",20));var M=E>=0,F=A>=0,O=R>=0,D=I>=0;return E=Math.min(Math.abs(E),P),A=Math.min(Math.abs(A),P),R=Math.min(Math.abs(R),P),I=Math.min(Math.abs(I),P),this.beginPath(),this.moveTo(m+E,g),this.lineTo(m+T-A,g),this.moveTo(m+T-A,g),F?this.arc(m+T-A,g+A,A,-u.TAU,0):this.arc(m+T,g,A,Math.PI,u.TAU,!0),this.lineTo(m+T,g+w-I),this.moveTo(m+T,g+w-I),D?this.arc(m+T-I,g+w-I,I,0,u.TAU):this.arc(m+T,g+w,I,-u.TAU,Math.PI,!0),this.lineTo(m+R,g+w),this.moveTo(m+R,g+w),O?this.arc(m+R,g+w-R,R,u.TAU,Math.PI):this.arc(m,g+w,R,0,-u.TAU,!0),this.lineTo(m,g+E),this.moveTo(m,g+E),M?this.arc(m+E,g+E,E,-Math.PI,-u.TAU):this.arc(m,g,E,u.TAU,0,!0),this.strokePath(),this},fillPointShape:function(m,g){return this.fillPoint(m.x,m.y,g)},fillPoint:function(m,g,T){return!T||T<1?T=1:(m-=T/2,g-=T/2),this.commandBuffer.push(a.FILL_RECT,m,g,T,T),this},fillTriangleShape:function(m){return this.fillTriangle(m.x1,m.y1,m.x2,m.y2,m.x3,m.y3)},strokeTriangleShape:function(m){return this.strokeTriangle(m.x1,m.y1,m.x2,m.y2,m.x3,m.y3)},fillTriangle:function(m,g,T,w,b,E){return this.commandBuffer.push(a.FILL_TRIANGLE,m,g,T,w,b,E),this},strokeTriangle:function(m,g,T,w,b,E){return this.commandBuffer.push(a.STROKE_TRIANGLE,m,g,T,w,b,E),this},strokeLineShape:function(m){return this.lineBetween(m.x1,m.y1,m.x2,m.y2)},lineBetween:function(m,g,T,w){return this.beginPath(),this.moveTo(m,g),this.lineTo(T,w),this.strokePath(),this},lineTo:function(m,g){return this.commandBuffer.push(a.LINE_TO,m,g),this},moveTo:function(m,g){return this.commandBuffer.push(a.MOVE_TO,m,g),this},strokePoints:function(m,g,T,w){g===void 0&&(g=!1),T===void 0&&(T=!1),w===void 0&&(w=m.length),this.beginPath(),this.moveTo(m[0].x,m[0].y);for(var b=1;b<w;b++)this.lineTo(m[b].x,m[b].y);return g&&this.lineTo(m[0].x,m[0].y),T&&this.closePath(),this.strokePath(),this},fillPoints:function(m,g,T,w){g===void 0&&(g=!1),T===void 0&&(T=!1),w===void 0&&(w=m.length),this.beginPath(),this.moveTo(m[0].x,m[0].y);for(var b=1;b<w;b++)this.lineTo(m[b].x,m[b].y);return g&&this.lineTo(m[0].x,m[0].y),T&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(m,g){g===void 0&&(g=32);var T=m.getPoints(g);return this.strokePoints(T,!0)},strokeEllipse:function(m,g,T,w,b){b===void 0&&(b=32);var E=new i(m,g,T,w),A=E.getPoints(b);return this.strokePoints(A,!0)},fillEllipseShape:function(m,g){g===void 0&&(g=32);var T=m.getPoints(g);return this.fillPoints(T,!0)},fillEllipse:function(m,g,T,w,b){b===void 0&&(b=32);var E=new i(m,g,T,w),A=E.getPoints(b);return this.fillPoints(A,!0)},arc:function(m,g,T,w,b,E,A){return E===void 0&&(E=!1),A===void 0&&(A=0),this.commandBuffer.push(a.ARC,m,g,T,w,b,E,A),this},slice:function(m,g,T,w,b,E,A){return E===void 0&&(E=!1),A===void 0&&(A=0),this.commandBuffer.push(a.BEGIN_PATH),this.commandBuffer.push(a.MOVE_TO,m,g),this.commandBuffer.push(a.ARC,m,g,T,w,b,E,A),this.commandBuffer.push(a.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(a.SAVE),this},restore:function(){return this.commandBuffer.push(a.RESTORE),this},translateCanvas:function(m,g){return this.commandBuffer.push(a.TRANSLATE,m,g),this},scaleCanvas:function(m,g){return this.commandBuffer.push(a.SCALE,m,g),this},rotateCanvas:function(m){return this.commandBuffer.push(a.ROTATE,m),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(m,g,T){var w=this.scene.sys,b=w.game.renderer;g===void 0&&(g=w.scale.width),T===void 0&&(T=w.scale.height),v.TargetCamera.setScene(this.scene),v.TargetCamera.setViewport(0,0,g,T),v.TargetCamera.scrollX=this.x,v.TargetCamera.scrollY=this.y;var E,A,R={willReadFrequently:!0};if(typeof m=="string")if(w.textures.exists(m)){E=w.textures.get(m);var I=E.getSourceImage();I instanceof HTMLCanvasElement&&(A=I.getContext("2d",R))}else E=w.textures.createCanvas(m,g,T),A=E.getSourceImage().getContext("2d",R);else m instanceof HTMLCanvasElement&&(A=m.getContext("2d",R));return A&&(this.renderCanvas(b,this,v.TargetCamera,null,A,!1),E&&E.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});v.TargetCamera=new s,o.exports=v},91543:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36266),l=t(49584),a=function(r,i,n,h,d,u){var p=i.commandBuffer,v=p.length,m=d||r.currentContext;if(!(v===0||!l(r,m,i,n,h))){n.addToRenderList(i);var g=1,T=1,w=0,b=0,E=1,A=0,R=0,I=0;m.beginPath();for(var P=0;P<v;++P){var M=p[P];switch(M){case s.ARC:m.arc(p[P+1],p[P+2],p[P+3],p[P+4],p[P+5],p[P+6]),P+=7;break;case s.LINE_STYLE:E=p[P+1],w=p[P+2],g=p[P+3],A=(w&16711680)>>>16,R=(w&65280)>>>8,I=w&255,m.strokeStyle="rgba("+A+","+R+","+I+","+g+")",m.lineWidth=E,P+=3;break;case s.FILL_STYLE:b=p[P+1],T=p[P+2],A=(b&16711680)>>>16,R=(b&65280)>>>8,I=b&255,m.fillStyle="rgba("+A+","+R+","+I+","+T+")",P+=2;break;case s.BEGIN_PATH:m.beginPath();break;case s.CLOSE_PATH:m.closePath();break;case s.FILL_PATH:u||m.fill();break;case s.STROKE_PATH:u||m.stroke();break;case s.FILL_RECT:u?m.rect(p[P+1],p[P+2],p[P+3],p[P+4]):m.fillRect(p[P+1],p[P+2],p[P+3],p[P+4]),P+=4;break;case s.FILL_TRIANGLE:m.beginPath(),m.moveTo(p[P+1],p[P+2]),m.lineTo(p[P+3],p[P+4]),m.lineTo(p[P+5],p[P+6]),m.closePath(),u||m.fill(),P+=6;break;case s.STROKE_TRIANGLE:m.beginPath(),m.moveTo(p[P+1],p[P+2]),m.lineTo(p[P+3],p[P+4]),m.lineTo(p[P+5],p[P+6]),m.closePath(),u||m.stroke(),P+=6;break;case s.LINE_TO:m.lineTo(p[P+1],p[P+2]),P+=2;break;case s.MOVE_TO:m.moveTo(p[P+1],p[P+2]),P+=2;break;case s.LINE_FX_TO:m.lineTo(p[P+1],p[P+2]),P+=5;break;case s.MOVE_FX_TO:m.moveTo(p[P+1],p[P+2]),P+=5;break;case s.SAVE:m.save();break;case s.RESTORE:m.restore();break;case s.TRANSLATE:m.translate(p[P+1],p[P+2]),P+=2;break;case s.SCALE:m.scale(p[P+1],p[P+2]),P+=2;break;case s.ROTATE:m.rotate(p[P+1]),P+=1;break;case s.GRADIENT_FILL_STYLE:P+=5;break;case s.GRADIENT_LINE_STYLE:P+=6;break}}m.restore()}};o.exports=a},41286:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99325),l=t(33182);s.register("graphics",function(a,r){a===void 0&&(a={}),r!==void 0&&(a.add=r);var i=new l(this.scene,a);return a.add&&this.scene.sys.displayList.add(i),i})},13122:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33182),l=t(61286);l.register("graphics",function(a){return this.displayList.add(new s(this.scene,a))})},60898:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(34429),a=t(91543),a=t(91543),o.exports={renderWebGL:l,renderCanvas:a}},34429:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36266),l=t(73329),a=t(69360),r=t(75512),i=function(p,v,m){this.x=p,this.y=v,this.width=m},n=function(p,v,m){this.points=[],this.pointsLength=1,this.points[0]=new i(p,v,m)},h=[],d=new a,u=function(p,v,m,g){if(v.commandBuffer.length!==0){m.addToRenderList(v);var T=p.pipelines.set(v.pipeline,v);p.pipelines.preBatch(v);for(var w=l(v,m,g).calc,b=d.loadIdentity(),E=v.commandBuffer,A=m.alpha*v.alpha,R=1,I=T.fillTint,P=T.strokeTint,M=0,F=0,O=0,D=.01,L=Math.PI*2,z,X=[],H=0,J=!0,G=null,k=r.getTintAppendFloatAlpha,N=0;N<E.length;N++)switch(z=E[N],z){case s.BEGIN_PATH:{X.length=0,G=null,J=!0;break}case s.CLOSE_PATH:{J=!1,G&&G.points.length&&G.points.push(G.points[0]);break}case s.FILL_PATH:{for(H=0;H<X.length;H++)T.batchFillPath(X[H].points,b,w);break}case s.STROKE_PATH:{for(H=0;H<X.length;H++)T.batchStrokePath(X[H].points,R,J,b,w);break}case s.LINE_STYLE:{R=E[++N];var B=E[++N],U=E[++N]*A,W=k(B,U);P.TL=W,P.TR=W,P.BL=W,P.BR=W;break}case s.FILL_STYLE:{var K=E[++N],q=E[++N]*A,_=k(K,q);I.TL=_,I.TR=_,I.BL=_,I.BR=_;break}case s.GRADIENT_FILL_STYLE:{var rt=E[++N]*A,ft=E[++N]*A,vt=E[++N]*A,mt=E[++N]*A;I.TL=k(E[++N],rt),I.TR=k(E[++N],ft),I.BL=k(E[++N],vt),I.BR=k(E[++N],mt);break}case s.GRADIENT_LINE_STYLE:{R=E[++N];var yt=E[++N]*A;P.TL=k(E[++N],yt),P.TR=k(E[++N],yt),P.BL=k(E[++N],yt),P.BR=k(E[++N],yt);break}case s.ARC:{var xt=0,It=E[++N],Gt=E[++N],Zt=E[++N],Bt=E[++N],At=E[++N],kt=E[++N],Ut=E[++N];for(At-=Bt,kt?At<-L?At=-L:At>0&&(At=-L+At%L):At>L?At=L:At<0&&(At=L+At%L),G===null&&(G=new n(It+Math.cos(Bt)*Zt,Gt+Math.sin(Bt)*Zt,R),X.push(G),xt+=D);xt<1+Ut;)O=At*xt+Bt,M=It+Math.cos(O)*Zt,F=Gt+Math.sin(O)*Zt,G.points.push(new i(M,F,R)),xt+=D;O=At+Bt,M=It+Math.cos(O)*Zt,F=Gt+Math.sin(O)*Zt,G.points.push(new i(M,F,R));break}case s.FILL_RECT:{T.batchFillRect(E[++N],E[++N],E[++N],E[++N],b,w);break}case s.FILL_TRIANGLE:{T.batchFillTriangle(E[++N],E[++N],E[++N],E[++N],E[++N],E[++N],b,w);break}case s.STROKE_TRIANGLE:{T.batchStrokeTriangle(E[++N],E[++N],E[++N],E[++N],E[++N],E[++N],R,b,w);break}case s.LINE_TO:{G!==null?G.points.push(new i(E[++N],E[++N],R)):(G=new n(E[++N],E[++N],R),X.push(G));break}case s.MOVE_TO:{G=new n(E[++N],E[++N],R),X.push(G);break}case s.SAVE:{h.push(b.copyToArray());break}case s.RESTORE:{b.copyFromArray(h.pop());break}case s.TRANSLATE:{It=E[++N],Gt=E[++N],b.translate(It,Gt);break}case s.SCALE:{It=E[++N],Gt=E[++N],b.scale(It,Gt);break}case s.ROTATE:{b.rotate(E[++N]);break}}p.pipelines.postBatch(v)}};o.exports=u},59192:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83979),l=t(56694),a=t(56631),r=t(6659),i=t(71608),n=t(72632),h=t(10850),d=t(19256),u=t(42911),p=t(75757),v=t(58403),m=t(13747),g=new l({Extends:r,initialize:function(w,b,E){r.call(this),E?b&&!Array.isArray(b)&&(b=[b]):Array.isArray(b)?u(b[0])&&(E=b,b=null):u(b)&&(E=b,b=null),this.scene=w,this.children=new v,this.isParent=!0,this.type="Group",this.classType=n(E,"classType",m),this.name=n(E,"name",""),this.active=n(E,"active",!0),this.maxSize=n(E,"maxSize",-1),this.defaultKey=n(E,"defaultKey",null),this.defaultFrame=n(E,"defaultFrame",null),this.runChildUpdate=n(E,"runChildUpdate",!1),this.createCallback=n(E,"createCallback",null),this.removeCallback=n(E,"removeCallback",null),this.createMultipleCallback=n(E,"createMultipleCallback",null),this.internalCreateCallback=n(E,"internalCreateCallback",null),this.internalRemoveCallback=n(E,"internalRemoveCallback",null),b&&this.addMultiple(b),E&&this.createMultiple(E),this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(T,w,b,E,A,R){if(T===void 0&&(T=0),w===void 0&&(w=0),b===void 0&&(b=this.defaultKey),E===void 0&&(E=this.defaultFrame),A===void 0&&(A=!0),R===void 0&&(R=!0),this.isFull())return null;var I=new this.classType(this.scene,T,w,b,E);return I.addToDisplayList(this.scene.sys.displayList),I.addToUpdateList(),I.visible=A,I.setActive(R),this.add(I),I},createMultiple:function(T){if(this.isFull())return[];Array.isArray(T)||(T=[T]);var w=[];if(T[0].key)for(var b=0;b<T.length;b++){var E=this.createFromConfig(T[b]);w=w.concat(E)}return w},createFromConfig:function(T){if(this.isFull())return[];this.classType=n(T,"classType",this.classType);var w=n(T,"key",void 0),b=n(T,"frame",null),E=n(T,"visible",!0),A=n(T,"active",!0),R=[];if(w===void 0)return R;Array.isArray(w)||(w=[w]),Array.isArray(b)||(b=[b]);var I=n(T,"repeat",0),P=n(T,"randomKey",!1),M=n(T,"randomFrame",!1),F=n(T,"yoyo",!1),O=n(T,"quantity",!1),D=n(T,"frameQuantity",1),L=n(T,"max",0),z=p(w,b,{max:L,qty:O||D,random:P,randomB:M,repeat:I,yoyo:F});T.createCallback&&(this.createCallback=T.createCallback),T.removeCallback&&(this.removeCallback=T.removeCallback),T.internalCreateCallback&&(this.internalCreateCallback=T.internalCreateCallback),T.internalRemoveCallback&&(this.internalRemoveCallback=T.internalRemoveCallback);for(var X=0;X<z.length;X++){var H=this.create(0,0,z[X].a,z[X].b,E,A);if(!H)break;R.push(H)}if(d(T,"setXY")){var J=h(T,"setXY.x",0),G=h(T,"setXY.y",0),k=h(T,"setXY.stepX",0),N=h(T,"setXY.stepY",0);s.SetXY(R,J,G,k,N)}if(d(T,"setRotation")){var B=h(T,"setRotation.value",0),U=h(T,"setRotation.step",0);s.SetRotation(R,B,U)}if(d(T,"setScale")){var W=h(T,"setScale.x",1),K=h(T,"setScale.y",W),q=h(T,"setScale.stepX",0),_=h(T,"setScale.stepY",0);s.SetScale(R,W,K,q,_)}if(d(T,"setOrigin")){var rt=h(T,"setOrigin.x",.5),ft=h(T,"setOrigin.y",rt),vt=h(T,"setOrigin.stepX",0),mt=h(T,"setOrigin.stepY",0);s.SetOrigin(R,rt,ft,vt,mt)}if(d(T,"setAlpha")){var yt=h(T,"setAlpha.value",1),xt=h(T,"setAlpha.step",0);s.SetAlpha(R,yt,xt)}if(d(T,"setDepth")){var It=h(T,"setDepth.value",0),Gt=h(T,"setDepth.step",0);s.SetDepth(R,It,Gt)}if(d(T,"setScrollFactor")){var Zt=h(T,"setScrollFactor.x",1),Bt=h(T,"setScrollFactor.y",Zt),At=h(T,"setScrollFactor.stepX",0),kt=h(T,"setScrollFactor.stepY",0);s.SetScrollFactor(R,Zt,Bt,At,kt)}var Ut=n(T,"hitArea",null),ee=n(T,"hitAreaCallback",null);Ut&&s.SetHitArea(R,Ut,ee);var te=n(T,"gridAlign",!1);return te&&s.GridAlign(R,te),this.createMultipleCallback&&this.createMultipleCallback.call(this,R),R},preUpdate:function(T,w){if(!(!this.runChildUpdate||this.children.size===0))for(var b=this.children.entries.slice(),E=0;E<b.length;E++){var A=b[E];A.active&&A.update(T,w)}},add:function(T,w){return w===void 0&&(w=!1),this.isFull()?this:(this.children.set(T),this.internalCreateCallback&&this.internalCreateCallback.call(this,T),this.createCallback&&this.createCallback.call(this,T),w&&(T.addToDisplayList(this.scene.sys.displayList),T.addToUpdateList()),T.on(a.DESTROY,this.remove,this),this)},addMultiple:function(T,w){if(w===void 0&&(w=!1),Array.isArray(T))for(var b=0;b<T.length;b++)this.add(T[b],w);return this},remove:function(T,w,b){return w===void 0&&(w=!1),b===void 0&&(b=!1),this.children.contains(T)?(this.children.delete(T),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,T),this.removeCallback&&this.removeCallback.call(this,T),T.off(a.DESTROY,this.remove,this),b?T.destroy():w&&(T.removeFromDisplayList(),T.removeFromUpdateList()),this):this},clear:function(T,w){T===void 0&&(T=!1),w===void 0&&(w=!1);for(var b=this.children,E=0;E<b.size;E++){var A=b.entries[E];A.off(a.DESTROY,this.remove,this),w?A.destroy():T&&(A.removeFromDisplayList(),A.removeFromUpdateList())}return this.children.clear(),this},contains:function(T){return this.children.contains(T)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(T,w,b,E){return i(this.children.entries,T,w,b,E)},getFirst:function(T,w,b,E,A,R,I){return this.getHandler(!0,1,T,w,b,E,A,R,I)},getFirstNth:function(T,w,b,E,A,R,I,P){return this.getHandler(!0,T,w,b,E,A,R,I,P)},getLast:function(T,w,b,E,A,R,I){return this.getHandler(!1,1,T,w,b,E,A,R,I)},getLastNth:function(T,w,b,E,A,R,I,P){return this.getHandler(!1,T,w,b,E,A,R,I,P)},getHandler:function(T,w,b,E,A,R,I,P,M){b===void 0&&(b=!1),E===void 0&&(E=!1);var F,O,D=0,L=this.children.entries;if(T)for(O=0;O<L.length;O++)if(F=L[O],F.active===b){if(D++,D===w)break}else F=null;else for(O=L.length-1;O>=0;O--)if(F=L[O],F.active===b){if(D++,D===w)break}else F=null;return F?(typeof A=="number"&&(F.x=A),typeof R=="number"&&(F.y=R),F):E?this.create(A,R,I,P,M):null},get:function(T,w,b,E,A){return this.getFirst(!1,!0,T,w,b,E,A)},getFirstAlive:function(T,w,b,E,A,R){return this.getFirst(!0,T,w,b,E,A,R)},getFirstDead:function(T,w,b,E,A,R){return this.getFirst(!1,T,w,b,E,A,R)},playAnimation:function(T,w){return s.PlayAnimation(this.children.entries,T,w),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(T){T===void 0&&(T=!0);for(var w=0,b=0;b<this.children.size;b++)this.children.entries[b].active===T&&w++;return w},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var T=this.getTotalUsed(),w=this.maxSize===-1?999999999999:this.maxSize;return w-T},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},propertyValueSet:function(T,w,b,E,A){return s.PropertyValueSet(this.children.entries,T,w,b,E,A),this},propertyValueInc:function(T,w,b,E,A){return s.PropertyValueInc(this.children.entries,T,w,b,E,A),this},setX:function(T,w){return s.SetX(this.children.entries,T,w),this},setY:function(T,w){return s.SetY(this.children.entries,T,w),this},setXY:function(T,w,b,E){return s.SetXY(this.children.entries,T,w,b,E),this},incX:function(T,w){return s.IncX(this.children.entries,T,w),this},incY:function(T,w){return s.IncY(this.children.entries,T,w),this},incXY:function(T,w,b,E){return s.IncXY(this.children.entries,T,w,b,E),this},shiftPosition:function(T,w,b){return s.ShiftPosition(this.children.entries,T,w,b),this},angle:function(T,w){return s.Angle(this.children.entries,T,w),this},rotate:function(T,w){return s.Rotate(this.children.entries,T,w),this},rotateAround:function(T,w){return s.RotateAround(this.children.entries,T,w),this},rotateAroundDistance:function(T,w,b){return s.RotateAroundDistance(this.children.entries,T,w,b),this},setAlpha:function(T,w){return s.SetAlpha(this.children.entries,T,w),this},setTint:function(T,w,b,E){return s.SetTint(this.children.entries,T,w,b,E),this},setOrigin:function(T,w,b,E){return s.SetOrigin(this.children.entries,T,w,b,E),this},scaleX:function(T,w){return s.ScaleX(this.children.entries,T,w),this},scaleY:function(T,w){return s.ScaleY(this.children.entries,T,w),this},scaleXY:function(T,w,b,E){return s.ScaleXY(this.children.entries,T,w,b,E),this},setDepth:function(T,w){return s.SetDepth(this.children.entries,T,w),this},setBlendMode:function(T){return s.SetBlendMode(this.children.entries,T),this},setHitArea:function(T,w){return s.SetHitArea(this.children.entries,T,w),this},shuffle:function(){return s.Shuffle(this.children.entries),this},kill:function(T){this.children.contains(T)&&T.setActive(!1)},killAndHide:function(T){this.children.contains(T)&&(T.setActive(!1),T.setVisible(!1))},setVisible:function(T,w,b){return s.SetVisible(this.children.entries,T,w,b),this},toggleVisible:function(){return s.ToggleVisible(this.children.entries),this},destroy:function(T,w){T===void 0&&(T=!1),w===void 0&&(w=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(a.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(w,T),this.scene=void 0,this.children=void 0)}});o.exports=g},61295:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99325),l=t(59192);s.register("group",function(a){return new l(this.scene,null,a)})},62598:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59192),l=t(61286);l.register("group",function(a,r){return this.updateList.add(new s(this.scene,a,r))})},1539:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(57322),i=new s({Extends:a,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Size,l.TextureCrop,l.Tint,l.Transform,l.Visible,r],initialize:function(h,d,u,p,v){a.call(this,h,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,v),this.setPosition(d,u),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=i},57786:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l.addToRenderList(s),t.batchSprite(s,s.frame,l,a)};o.exports=x},83556:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(1539);l.register("image",function(i,n){i===void 0&&(i={});var h=a(i,"key",null),d=a(i,"frame",null),u=new r(this.scene,0,0,h,d);return n!==void 0&&(i.add=n),s(this.scene,u,i),u})},20927:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1539),l=t(61286);l.register("image",function(a,r,i,n){return this.displayList.add(new s(this.scene,a,r,i,n))})},57322:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(59390),a=t(57786),o.exports={renderWebGL:l,renderCanvas:a}},59390:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l.addToRenderList(s),this.pipeline.batchSprite(s,l,a)};o.exports=x},48013:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Events:t(56631),DisplayList:t(91713),GameObjectCreator:t(99325),GameObjectFactory:t(61286),UpdateList:t(92034),Components:t(64937),GetCalcMatrix:t(73329),BuildGameObject:t(88933),BuildGameObjectAnimation:t(32291),GameObject:t(89980),BitmapText:t(44616),Blitter:t(52816),Bob:t(41664),Container:t(70339),DOMElement:t(38943),DynamicBitmapText:t(13468),Extern:t(39419),Graphics:t(33182),Group:t(59192),Image:t(1539),Layer:t(85305),Particles:t(27684),PathFollower:t(29598),RenderTexture:t(15996),RetroFont:t(55873),Rope:t(79968),Sprite:t(13747),Text:t(76555),GetTextSize:t(32979),MeasureText:t(27030),TextStyle:t(74744),TileSprite:t(35856),Zone:t(71030),Video:t(8630),Shape:t(91461),Arc:t(28593),Curve:t(15220),Ellipse:t(28591),Grid:t(39169),IsoBox:t(4415),IsoTriangle:t(65159),Line:t(579),Polygon:t(91249),Rectangle:t(517),Star:t(77843),Triangle:t(21873),Factories:{Blitter:t(38906),Container:t(23400),DOMElement:t(66788),DynamicBitmapText:t(94145),Extern:t(41155),Graphics:t(13122),Group:t(62598),Image:t(20927),Layer:t(17676),Particles:t(81212),PathFollower:t(19626),RenderTexture:t(29599),Rope:t(31982),Sprite:t(66135),StaticBitmapText:t(21797),Text:t(94627),TileSprite:t(20509),Zone:t(34546),Video:t(215),Arc:t(10369),Curve:t(10147),Ellipse:t(99869),Grid:t(9326),IsoBox:t(88154),IsoTriangle:t(67765),Line:t(85665),Polygon:t(88203),Rectangle:t(94355),Star:t(23962),Triangle:t(79296)},Creators:{Blitter:t(68452),Container:t(44516),DynamicBitmapText:t(67513),Graphics:t(41286),Group:t(61295),Image:t(83556),Layer:t(56378),Particles:t(765),RenderTexture:t(85692),Rope:t(96027),Sprite:t(89219),StaticBitmapText:t(95499),Text:t(75397),TileSprite:t(63950),Zone:t(24067),Video:t(65601)}};s.Shader=t(27902),s.Mesh=t(83321),s.NineSlice=t(44139),s.PointLight=t(13171),s.Plane=t(33412),s.Factories.Shader=t(51979),s.Factories.Mesh=t(8767),s.Factories.NineSlice=t(53778),s.Factories.PointLight=t(91201),s.Factories.Plane=t(58322),s.Creators.Shader=t(13908),s.Creators.Mesh=t(41839),s.Creators.NineSlice=t(40964),s.Creators.PointLight=t(162),s.Creators.Plane=t(10912),s.Light=t(14455),s.LightsManager=t(26193),s.LightsPlugin=t(50296),o.exports=s},85305:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(56694),a=t(64937),r=t(48129),i=t(81078),n=t(6659),h=t(56631),d=t(71207),u=t(47427),p=t(58010),v=t(7599),m=t(17922),g=new l({Extends:d,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.PostPipeline,a.Visible,n,p],initialize:function(w,b){d.call(this,w),n.call(this),this.scene=w,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=w.sys,this.events=w.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),b&&this.add(b),w.sys.queueDepthSort()},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},setState:function(T){return this.state=T,this},setDataEnabled:function(){return this.data||(this.data=new i(this)),this},setData:function(T,w){return this.data||(this.data=new i(this)),this.data.set(T,w),this},incData:function(T,w){return this.data||(this.data=new i(this)),this.data.inc(T,w),this},toggleData:function(T){return this.data||(this.data=new i(this)),this.data.toggle(T),this},getData:function(T){return this.data||(this.data=new i(this)),this.data.get(T)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},add:function(T){return d.prototype.add.call(this,T),this},remove:function(T,w){var b=d.prototype.remove.call(this,T);if(w&&b){Array.isArray(b)||(b=[b]);for(var E=0;E<b.length;E++)b[E].destroy()}return this},removeAll:function(T){var w=this.list;if(T){for(var b=0;b<w.length;b++)w[b]&&w[b].scene&&(w[b].off(h.DESTROY,this.remove,this),w[b].destroy());this.list=[]}else u(w,0,w.length,this.removeChildCallback,this);return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(T){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&T.id)},getIndexList:function(){for(var T=this,w=this.parentContainer,b=[];w&&(b.unshift(w.getIndex(T)),T=w,w.parentContainer);)w=w.parentContainer;return b.unshift(this.displayList.getIndex(T)),b},addChildCallback:function(T){T.once(h.DESTROY,this.remove,this),T.displayList&&T.displayList!==this&&T.removeFromDisplayList(),T.displayList||(this.queueDepthSort(),T.displayList=this,T.emit(h.ADDED_TO_SCENE,T,this.scene),this.events.emit(v.ADDED_TO_SCENE,T,this.scene))},removeChildCallback:function(T){T.off(h.DESTROY,this.remove,this),this.queueDepthSort(),T.displayList=null,T.emit(h.REMOVED_FROM_SCENE,T,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,T,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(m(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(T,w){return T._depth-w._depth},getChildren:function(){return this.list},addToDisplayList:function(T){return T===void 0&&(T=this.scene.sys.displayList),this.displayList&&this.displayList!==T&&this.removeFromDisplayList(),T.exists(this)||(this.displayList=T,T.add(this,!0),T.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),T.events.emit(v.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var T=this.displayList||this.scene.sys.displayList;return T.exists(this)&&(T.remove(this,!0),T.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),T.events.emit(v.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(T){if(!(!this.scene||this.ignoreDestroy)){this.emit(h.DESTROY,this);for(var w=this.list;w.length;)w[0].destroy(T);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});o.exports=g},834:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=s.list;if(a.length!==0){s.depthSort();var r=s.blendMode!==-1;r||t.setBlendMode(0);var i=s._alpha;s.mask&&s.mask.preRenderCanvas(t,null,l);for(var n=0;n<a.length;n++){var h=a[n];if(h.willRender(l)){var d=h.alpha;!r&&h.blendMode!==t.currentBlendMode&&t.setBlendMode(h.blendMode),h.setAlpha(d*i),h.renderCanvas(t,h,l),h.setAlpha(d)}}s.mask&&s.mask.postRenderCanvas(t)}};o.exports=x},56378:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(85305),a=t(99325),r=t(20494);a.register("layer",function(i,n){i===void 0&&(i={});var h=r(i,"children",null),d=new l(this.scene,h);return n!==void 0&&(i.add=n),s(this.scene,d,i),d})},17676:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85305),l=t(61286);l.register("layer",function(a){return this.displayList.add(new s(this.scene,a))})},58010:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(17576),a=t(834),o.exports={renderWebGL:l,renderCanvas:a}},17576:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=s.list,r=a.length;if(r!==0){s.depthSort(),t.pipelines.preBatch(s);var i=s.blendMode!==-1;i||t.setBlendMode(0);for(var n=s.alpha,h=0;h<r;h++){var d=a[h];if(d.willRender(l)){var u,p,v,m;if(d.alphaTopLeft!==void 0)u=d.alphaTopLeft,p=d.alphaTopRight,v=d.alphaBottomLeft,m=d.alphaBottomRight;else{var g=d.alpha;u=g,p=g,v=g,m=g}!i&&d.blendMode!==t.currentBlendMode&&t.setBlendMode(d.blendMode);var T=d.mask;T&&T.preRenderWebGL(t,d,l);var w=d.type;w!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=h<r-1?a[h+1].type===t.currentType:!1,d.setAlpha(u*n,p*n,v*n,m*n),d.renderWebGL(t,d,l),d.setAlpha(u,p,v,m),T&&T.postRenderWebGL(t,l),t.newType=!1}}t.pipelines.postBatch(s)}};o.exports=x},14455:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673),l=t(56694),a=t(64937),r=t(39298),i=t(75512),n=new l({Extends:s,Mixins:[a.Origin,a.ScrollFactor,a.Transform,a.Visible],initialize:function(d,u,p,v,m,g,T){s.call(this,d,u,p),this.color=new r(v,m,g),this.intensity=T,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(p)},displayWidth:{get:function(){return this.diameter},set:function(h){this.diameter=h}},displayHeight:{get:function(){return this.diameter},set:function(h){this.diameter=h}},width:{get:function(){return this.diameter},set:function(h){this.diameter=h}},height:{get:function(){return this.diameter},set:function(h){this.diameter=h}},willRender:function(h){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&h.id)},setColor:function(h){var d=i.getFloatsFromUintRGB(h);return this.color.set(d[0],d[1],d[2]),this},setIntensity:function(h){return this.intensity=h,this},setRadius:function(h){return this.radius=h,this}});n.RENDER_MASK=15,o.exports=n},26193:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26535),l=t(56694),a=t(53996),r=t(14455),i=t(13171),n=t(39298),h=t(72677),d=t(17922),u=t(75512),p=new l({initialize:function(){this.lights=[],this.ambientColor=new n(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(v,m,g,T,w,b){return this.systems.displayList.add(new i(this.scene,v,m,g,T,w,b))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(v){for(var m=this.lights,g=v.worldView,T=[],w=0;w<m.length;w++){var b=m[w];b.willRender(v)&&s(b,g)&&T.push({light:b,distance:a(b.x,b.y,g.centerX,g.centerY)})}return T.length>this.maxLights&&(d(T,this.sortByDistance),T=T.slice(0,this.maxLights)),this.visibleLights=T.length,T},sortByDistance:function(v,m){return v.distance>=m.distance},setAmbientColor:function(v){var m=u.getFloatsFromUintRGB(v);return this.ambientColor.set(m[0],m[1],m[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(v,m,g,T,w){v===void 0&&(v=0),m===void 0&&(m=0),g===void 0&&(g=128),T===void 0&&(T=16777215),w===void 0&&(w=1);var b=u.getFloatsFromUintRGB(T),E=new r(v,m,g,b[0],b[1],b[2],w);return this.lights.push(E),E},removeLight:function(v){var m=this.lights.indexOf(v);return m>=0&&h(this.lights,m),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});o.exports=p},50296:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(26193),a=t(91963),r=t(7599),i=new s({Extends:l,initialize:function(h){this.scene=h,this.systems=h.sys,h.sys.settings.isBooted||h.sys.events.once(r.BOOT,this.boot,this),l.call(this)},boot:function(){var n=this.systems.events;n.on(r.SHUTDOWN,this.shutdown,this),n.on(r.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});a.register("LightsPlugin",i,"lights"),o.exports=i},83321:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(75606),r=t(18693),i=t(89980),n=t(53267),h=t(67623),d=t(73329),u=t(16650),p=t(23464),v=t(23701),m=t(17922),g=t(70015),T=t(85769),w=new s({Extends:i,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Size,l.Texture,l.Transform,l.Visible,p],initialize:function(E,A,R,I,P,M,F,O,D,L,z,X){A===void 0&&(A=0),R===void 0&&(R=0),I===void 0&&(I="__WHITE"),i.call(this,E,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new u,this.viewPosition=new g,this.viewMatrix=new u,this.projectionMatrix=new u,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var H=E.sys.renderer;this.setPosition(A,R),this.setTexture(I,P),this.setSize(H.width,H.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(H.width,H.height),M&&this.addVertices(M,F,O,D,L,z,X)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(b){return this.viewPosition.addScale(g.LEFT,b),this.dirtyCache[10]=1,this},panY:function(b){return this.viewPosition.y+=g.DOWN.y*b,this.dirtyCache[10]=1,this},panZ:function(b){return this.viewPosition.z+=b,this.dirtyCache[10]=1,this},setPerspective:function(b,E,A,R,I){return A===void 0&&(A=45),R===void 0&&(R=.01),I===void 0&&(I=1e3),this.fov=A,this.projectionMatrix.perspective(a(A),b/E,R,I),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(b,E,A,R){return b===void 0&&(b=this.scene.sys.renderer.getAspectRatio()),E===void 0&&(E=1),A===void 0&&(A=-1e3),R===void 0&&(R=1e3),this.fov=0,this.projectionMatrix.ortho(-b,b,-E,E,A,R),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(b){b.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(b,E,A,R,I,P,M,F,O){var D=this.scene.sys.cache.obj.get(b),L;return D&&(L=n(D,this,E,A,R,I,P,M,F,O)),(!L||L.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",b),this},sortByDepth:function(b,E){return b.depth-E.depth},depthSort:function(){return m(this.faces,this.sortByDepth),this},addVertex:function(b,E,A,R,I,P,M){var F=new T(b,E,A,R,I,P,M);return this.vertices.push(F),F},addFace:function(b,E,A){var R=new r(b,E,A);return this.faces.push(R),this.dirtyCache[9]=-1,R},addVertices:function(b,E,A,R,I,P,M){var F=h(b,E,A,R,I,P,M);return F?(this.faces=this.faces.concat(F.faces),this.vertices=this.vertices.concat(F.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(b){return this.faces[b]},hasFaceAt:function(b,E,A){A===void 0&&(A=this.scene.sys.cameras.main);for(var R=d(this,A).calc,I=this.faces,P=0;P<I.length;P++){var M=I[P];if(M.contains(b,E,R))return!0}return!1},getFaceAt:function(b,E,A){A===void 0&&(A=this.scene.sys.cameras.main);for(var R=d(this,A).calc,I=this.faces,P=[],M=0;M<I.length;M++){var F=I[M];F.contains(b,E,R)&&P.push(F)}return m(P,this.sortByDepth)},setDebug:function(b,E){return this.debugGraphic=b,!b&&!E?this.debugCallback=null:E?this.debugCallback=E:this.debugCallback=this.renderDebug,this},isDirty:function(){var b=this.modelPosition,E=this.modelRotation,A=this.modelScale,R=this.dirtyCache,I=b.x,P=b.y,M=b.z,F=E.x,O=E.y,D=E.z,L=A.x,z=A.y,X=A.z,H=this.getFaceCount(),J=R[0],G=R[1],k=R[2],N=R[3],B=R[4],U=R[5],W=R[6],K=R[7],q=R[8],_=R[9];return R[0]=I,R[1]=P,R[2]=M,R[3]=F,R[4]=O,R[5]=D,R[6]=L,R[7]=z,R[8]=X,R[9]=H,J!==I||G!==P||k!==M||N!==F||B!==O||U!==D||W!==L||K!==z||q!==X||_!==H},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var b=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!b[10]&&!this.isDirty())){var E=this.width,A=this.height,R=this.viewMatrix,I=this.viewPosition;b[10]&&(R.identity(),R.translate(I),R.invert(),b[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var M=I.z,F=this.faces,O=0;O<F.length;O++)F[O].transformCoordinatesLocal(P,E,A,M);this.depthSort()}},renderDebug:function(b,E){for(var A=b.debugGraphic,R=0;R<E.length;R++){var I=E[R],P=I.vertex1.tx,M=I.vertex1.ty,F=I.vertex2.tx,O=I.vertex2.ty,D=I.vertex3.tx,L=I.vertex3.ty;A.strokeTriangle(P,M,F,O,D,L)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var b=(function(E,A,R){for(var I=this.faces,P=0;P<I.length;P++){var M=I[P];if(M.contains(A,R))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,b),this},setTint:function(b){b===void 0&&(b=16777215);for(var E=this.vertices,A=0;A<E.length;A++)E[A].color=b;return this},uvScroll:function(b,E){for(var A=this.faces,R=0;R<A.length;R++)A[R].scrollUV(b,E);return this},uvScale:function(b,E){for(var A=this.faces,R=0;R<A.length;R++)A[R].scaleUV(b,E);return this},tint:{set:function(b){this.setTint(b)}},rotateX:{get:function(){return v(this.modelRotation.x)},set:function(b){this.modelRotation.x=a(b)}},rotateY:{get:function(){return v(this.modelRotation.y)},set:function(b){this.modelRotation.y=a(b)}},rotateZ:{get:function(){return v(this.modelRotation.z)},set:function(b){this.modelRotation.z=a(b)}}});o.exports=w},6317:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(){};o.exports=x},41839:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(10850),i=t(83321);l.register("mesh",function(n,h){n===void 0&&(n={});var d=a(n,"key",null),u=a(n,"frame",null),p=r(n,"vertices",[]),v=r(n,"uvs",[]),m=r(n,"indicies",[]),g=r(n,"containsZ",!1),T=r(n,"normals",[]),w=r(n,"colors",16777215),b=r(n,"alphas",1),E=new i(this.scene,0,0,d,u,p,v,m,g,T,w,b);return h!==void 0&&(n.add=h),s(this.scene,E,n),E})},8767:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83321),l=t(61286);l.register("mesh",function(a,r,i,n,h,d,u,p,v,m,g){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u,p,v,m,g))})},23464:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(57410),a=t(6317),o.exports={renderWebGL:l,renderCanvas:a}},57410:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n){var h=r.faces,d=h.length;if(d!==0){i.addToRenderList(r);var u=a.pipelines.set(r.pipeline,r),p=s(r,i,n).calc;a.pipelines.preBatch(r);for(var v=u.setGameObject(r),m=u.vertexViewF32,g=u.vertexViewU32,T=u.vertexCount*u.currentShader.vertexComponentCount-1,w=r.tintFill,b=[],E=r.debugCallback,A=p.a,R=p.b,I=p.c,P=p.d,M=p.e,F=p.f,O=r.viewPosition.z,D=r.hideCCW,L=i.roundPixels,z=i.alpha*r.alpha,X=0,H=0;H<d;H++){var J=h[H];J.isInView(i,D,O,z,A,R,I,P,M,F,L)&&(u.shouldFlush(3)&&(u.flush(),v=u.setGameObject(r),T=0),T=J.load(m,g,T,v,w),X++,u.vertexCount+=3,u.currentBatch.count=u.vertexCount-u.currentBatch.start,E&&b.push(J))}r.totalFrame+=X,E&&E.call(r,r,b),a.pipelines.postBatch(r)}};o.exports=l},44139:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(94456),i=t(85769),n=new s({Extends:a,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Texture,l.Transform,l.Visible,r],initialize:function(d,u,p,v,m,g,T,w,b,E,A){a.call(this,d,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var R=d.textures.getFrame(v,m);this.is3Slice=!E&&!A,R.scale9&&(this.is3Slice=R.is3Slice);for(var I=this.is3Slice?18:54,P=0;P<I;P++)this.vertices.push(new i);this.setPosition(u,p),this.setTexture(v,m),this.setSlices(g,T,w,b,E,A,!1),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(h,d,u,p,v,m,g){u===void 0&&(u=10),p===void 0&&(p=10),v===void 0&&(v=0),m===void 0&&(m=0),g===void 0&&(g=!1);var T=this.frame,w=!1;if(this.is3Slice&&g&&v!==0&&m!==0&&(w=!0),w)console.warn("Cannot change 9 slice to 3 slice");else{if(T.scale9&&!g){var b=T.data.scale9Borders,E=b.x,A=b.y;u=E,p=T.width-b.w-E,v=A,m=T.height-b.h-A,h===void 0&&(h=T.width),d===void 0&&(d=T.height)}else h===void 0&&(h=256),d===void 0&&(d=256);this._width=h,this._height=d,this.leftWidth=u,this.rightWidth=p,this.topHeight=v,this.bottomHeight=m,this.is3Slice&&(d=T.height,this._height=d,this.topHeight=d,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var h=this.leftWidth,d=this.rightWidth,u=this.topHeight,p=this.bottomHeight,v=this.frame.width,m=this.frame.height;this.updateQuadUVs(0,0,0,h/v,u/m),this.updateQuadUVs(6,h/v,0,1-d/v,u/m),this.updateQuadUVs(12,1-d/v,0,1,u/m),this.is3Slice||(this.updateQuadUVs(18,0,u/m,h/v,1-p/m),this.updateQuadUVs(24,h/v,u/m,1-d/v,1-p/m),this.updateQuadUVs(30,1-d/v,u/m,1,1-p/m),this.updateQuadUVs(36,0,1-p/m,h/v,1),this.updateQuadUVs(42,h/v,1-p/m,1-d/v,1),this.updateQuadUVs(48,1-d/v,1-p/m,1,1))},updateVertices:function(){var h=this.leftWidth,d=this.rightWidth,u=this.topHeight,p=this.bottomHeight,v=this.width,m=this.height;this.updateQuad(0,-.5,.5,-.5+h/v,.5-u/m),this.updateQuad(6,-.5+h/v,.5,.5-d/v,.5-u/m),this.updateQuad(12,.5-d/v,.5,.5,.5-u/m),this.is3Slice||(this.updateQuad(18,-.5,.5-u/m,-.5+h/v,-.5+p/m),this.updateQuad(24,-.5+h/v,.5-u/m,.5-d/v,-.5+p/m),this.updateQuad(30,.5-d/v,.5-u/m,.5,-.5+p/m),this.updateQuad(36,-.5,-.5+p/m,-.5+h/v,-.5),this.updateQuad(42,-.5+h/v,-.5+p/m,.5-d/v,-.5),this.updateQuad(48,.5-d/v,-.5+p/m,.5,-.5))},updateQuad:function(h,d,u,p,v){var m=this.width,g=this.height,T=this.originX,w=this.originY,b=this.vertices;b[h+0].resize(d,u,m,g,T,w),b[h+1].resize(d,v,m,g,T,w),b[h+2].resize(p,u,m,g,T,w),b[h+3].resize(d,v,m,g,T,w),b[h+4].resize(p,v,m,g,T,w),b[h+5].resize(p,u,m,g,T,w)},updateQuadUVs:function(h,d,u,p,v){var m=this.vertices,g=this.frame,T=g.u0,w=g.v0,b=g.u1,E=g.v1;if(T!==0||b!==1){var A=b-T;d=T+d*A,p=T+p*A}if(w!==0||E!==1){var R=E-w;u=w+u*R,v=w+v*R}m[h+0].setUVs(d,u),m[h+1].setUVs(d,v),m[h+2].setUVs(p,u),m[h+3].setUVs(d,v),m[h+4].setUVs(p,v),m[h+5].setUVs(p,u)},clearTint:function(){return this.setTint(16777215),this},setTint:function(h){return h===void 0&&(h=16777215),this.tint=h,this.tintFill=!1,this},setTintFill:function(h){return this.setTint(h),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(h){this._width=Math.max(h,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(h){this.is3Slice||(this._height=Math.max(h,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(h){this.scaleX=h/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(h){this.scaleY=h/this.height}},setSize:function(h,d){this.width=h,this.height=d;var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=this.width,u.hitArea.height=this.height),this},setDisplaySize:function(h,d){return this.displayWidth=h,this.displayHeight=d,this},originX:{get:function(){return this._originX},set:function(h){this._originX=h,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(h){this._originY=h,this.updateVertices()}},setOrigin:function(h,d){return h===void 0&&(h=.5),d===void 0&&(d=h),this._originX=h,this._originY=d,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var h=this.frame.height;this._height=h,this.topHeight=h,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});o.exports=n},40964:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(10850),i=t(44139);l.register("nineslice",function(n,h){n===void 0&&(n={});var d=a(n,"key",null),u=a(n,"frame",null),p=r(n,"width",256),v=r(n,"height",256),m=r(n,"leftWidth",10),g=r(n,"rightWidth",10),T=r(n,"topHeight",0),w=r(n,"bottomHeight",0),b=new i(this.scene,0,0,d,u,p,v,m,g,T,w);return h!==void 0&&(n.add=h),s(this.scene,b,n),b})},53778:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44139),l=t(61286);l.register("nineslice",function(a,r,i,n,h,d,u,p,v,m){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u,p,v,m))})},94456:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(27420),o.exports={renderWebGL:l,renderCanvas:a}},27420:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){var d=i.vertices,u=d.length;if(u!==0){n.addToRenderList(i);var p=r.pipelines.set(i.pipeline,i),v=s(i,n,h,!1).calc;r.pipelines.preBatch(i);var m=p.setGameObject(i),g=p.vertexViewF32,T=p.vertexViewU32,w=p.vertexCount*p.currentShader.vertexComponentCount-1,b=n.roundPixels,E=i.tintFill,A=n.alpha*i.alpha,R=l.getTintAppendFloatAlpha(i.tint,A),I=p.vertexAvailable(),P=-1;I<u&&(P=I);for(var M=0;M<u;M++){var F=d[M];M===P&&(p.flush(),m=p.setGameObject(i),w=0),g[++w]=v.getXRound(F.vx,F.vy,b),g[++w]=v.getYRound(F.vx,F.vy,b),g[++w]=F.u,g[++w]=F.v,g[++w]=m,g[++w]=E,T[++w]=R,p.vertexCount++,p.currentBatch.count=p.vertexCount-p.currentBatch.start}r.pipelines.postBatch(i)}};o.exports=a},19737:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93025),a=t(22946),r=t(21902),i=t(4840),n=t(15978),h=new s({Extends:l,initialize:function(u){l.call(this,u,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var d=this.propertyValue,u=d,p=this.defaultEmit,v=this.defaultUpdate;if(this.method===9){this.start=d[0],this.ease=r("Linear"),this.interpolation=i("linear"),p=this.easedValueEmit,v=this.easeValueUpdate,u=d[0],this.active=!0;for(var m=0;m<d.length;m++){var g=n(d[m]);this.r.push(g.r),this.g.push(g.g),this.b.push(g.b)}}return this.onEmit=p,this.onUpdate=v,this.current=u,this},setEase:function(d){this.easeName=d,this.ease=r(d)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(d,u,p){var v=this.ease(p),m=this.interpolation(this.r,v),g=this.interpolation(this.g,v),T=this.interpolation(this.b,v),w=a(m,g,T);return this.current=w,w}});o.exports=h},93025:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17489),l=t(82897),a=t(56694),r=t(61616),i=t(21902),n=t(72632),h=t(4840),d=t(88462),u=t(1071),p=new a({initialize:function(m,g,T){T===void 0&&(T=!1),this.propertyKey=m,this.propertyValue=g,this.defaultValue=g,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=T,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(v,m){v===void 0&&(v={}),m&&(this.propertyKey=m),this.propertyValue=n(v,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(v){var m;switch(this.method){case 1:case 3:case 8:m=v;break;case 2:this.propertyValue.indexOf(v)>=0&&(m=v);break;case 4:var g=(this.end-this.start)/this.steps;m=d(v,g),this.counter=m;break;case 5:case 6:case 7:m=l(v,this.start,this.end);break;case 9:m=this.start[0];break}return this.current=m,this},getMethod:function(){var v=this.propertyValue;if(v===null)return 0;var m=typeof v;if(m==="number")return 1;if(Array.isArray(v))return 2;if(m==="function")return 3;if(m==="object"){if(this.hasBoth(v,"start","end"))return this.has(v,"steps")?4:5;if(this.hasBoth(v,"min","max"))return 6;if(this.has(v,"random"))return 7;if(this.hasEither(v,"onEmit","onUpdate"))return 8;if(this.hasEither(v,"values","interpolation"))return 9}return 0},setMethods:function(){var v=this.propertyValue,m=v,g=this.defaultEmit,T=this.defaultUpdate;switch(this.method){case 1:g=this.staticValueEmit;break;case 2:g=this.randomStaticValueEmit,m=v[0];break;case 3:this._onEmit=v,g=this.proxyEmit;break;case 4:this.start=v.start,this.end=v.end,this.steps=v.steps,this.counter=this.start,this.yoyo=this.has(v,"yoyo")?v.yoyo:!1,this.direction=0,g=this.steppedEmit,m=this.start;break;case 5:this.start=v.start,this.end=v.end;var w=this.has(v,"ease")?v.ease:"Linear";this.ease=i(w,v.easeParams),g=this.has(v,"random")&&v.random?this.randomRangedValueEmit:this.easedValueEmit,T=this.easeValueUpdate,m=this.start;break;case 6:this.start=v.min,this.end=v.max,g=this.has(v,"int")&&v.int?this.randomRangedIntEmit:this.randomRangedValueEmit,m=this.start;break;case 7:var b=v.random;Array.isArray(b)&&(this.start=b[0],this.end=b[1]),g=this.randomRangedIntEmit,m=this.start;break;case 8:this._onEmit=this.has(v,"onEmit")?v.onEmit:this.defaultEmit,this._onUpdate=this.has(v,"onUpdate")?v.onUpdate:this.defaultUpdate,g=this.proxyEmit,T=this.proxyUpdate;break;case 9:this.start=v.values;var E=this.has(v,"ease")?v.ease:"Linear";this.ease=i(E,v.easeParams),this.interpolation=h(v.interpolation),g=this.easedValueEmit,T=this.easeValueUpdate,m=this.start[0];break}return this.onEmit=g,this.onUpdate=T,this.current=m,this},has:function(v,m){return v.hasOwnProperty(m)},hasBoth:function(v,m,g){return v.hasOwnProperty(m)&&v.hasOwnProperty(g)},hasEither:function(v,m,g){return v.hasOwnProperty(m)||v.hasOwnProperty(g)},defaultEmit:function(v,m,g){return g},defaultUpdate:function(v,m,g,T){return T},proxyEmit:function(v,m,g){var T=this._onEmit(v,m,g);return this.current=T,T},proxyUpdate:function(v,m,g,T){var w=this._onUpdate(v,m,g,T);return this.current=w,w},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var v=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[v],this.current},randomRangedValueEmit:function(v,m){var g=r(this.start,this.end);return v&&v.data[m]&&(v.data[m].min=g,v.data[m].max=this.end),this.current=g,g},randomRangedIntEmit:function(v,m){var g=s(this.start,this.end);return v&&v.data[m]&&(v.data[m].min=g,v.data[m].max=this.end),this.current=g,g},steppedEmit:function(){var v=this.counter,m=v,g=(this.end-this.start)/this.steps;if(this.yoyo){var T;this.direction===0?(m+=g,m>=this.end&&(T=m-this.end,m=this.end-T,this.direction=1)):(m-=g,m<=this.start&&(T=this.start-m,m=this.start+T,this.direction=0)),this.counter=m}else this.counter=u(m+g,this.start,this.end);return this.current=v,v},easedValueEmit:function(v,m){if(v&&v.data[m]){var g=v.data[m];g.min=this.start,g.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(v,m,g){var T=v.data[m],w,b=this.ease(g);return this.interpolation?w=this.interpolation(this.start,b):w=(T.max-T.min)*b+T.min,this.current=w,w},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});o.exports=p},87811:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(30891),r=new s({Extends:a,initialize:function(n,h,d,u,p){if(typeof n=="object"){var v=n;n=l(v,"x",0),h=l(v,"y",0),d=l(v,"power",0),u=l(v,"epsilon",100),p=l(v,"gravity",50)}else n===void 0&&(n=0),h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=100),p===void 0&&(p=50);a.call(this,n,h,!0),this._gravity=p,this._power=d*p,this._epsilon=u*u},update:function(i,n){var h=this.x-i.x,d=this.y-i.y,u=h*h+d*d;if(u!==0){var p=Math.sqrt(u);u<this._epsilon&&(u=this._epsilon);var v=this._power*n/(u*p)*100;i.velocityX+=h*v,i.velocityY+=d*v}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(i){this._epsilon=i*i}},power:{get:function(){return this._power/this._gravity},set:function(i){this._power=i*this._gravity}},gravity:{get:function(){return this._gravity},set:function(i){var n=this.power;this._gravity=i,this.power=n}}});o.exports=r},14909:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(82897),a=t(56694),r=t(75606),i=t(74118),n=t(2386),h=t(93736),d=new a({initialize:function(p){this.emitter=p,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new h,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=p.scene,this.anims=new s(this),this.bounds=new i},emit:function(u,p,v,m,g,T){return this.emitter.emit(u,p,v,m,g,T)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(u,p){u===void 0&&(u=0),p===void 0&&(p=0),this.x=u,this.y=p},fire:function(u,p){var v=this.emitter,m=v.ops,g=v.getAnim();if(g?this.anims.play(g):(this.frame=v.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(v.getEmitZone(this),u===void 0?this.x+=m.x.onEmit(this,"x"):m.x.steps>0?this.x+=u+m.x.onEmit(this,"x"):this.x+=u,p===void 0?this.y+=m.y.onEmit(this,"y"):m.y.steps>0?this.y+=p+m.y.onEmit(this,"y"):this.y+=p,this.life=m.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=m.delay.onEmit(this,"delay"),this.holdCurrent=m.hold.onEmit(this,"hold"),this.scaleX=m.scaleX.onEmit(this,"scaleX"),this.scaleY=m.scaleY.active?m.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=m.rotate.onEmit(this,"rotate"),this.rotation=r(this.angle),v.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&v.getDeathZone(this))return this.lifeCurrent=0,!1;var T=m.speedX.onEmit(this,"speedX"),w=m.speedY.active?m.speedY.onEmit(this,"speedY"):T;if(v.radial){var b=r(m.angle.onEmit(this,"angle"));this.velocityX=Math.cos(b)*Math.abs(T),this.velocityY=Math.sin(b)*Math.abs(w)}else if(v.moveTo){var E=m.moveToX.onEmit(this,"moveToX"),A=m.moveToY.onEmit(this,"moveToY"),R=this.life/1e3;this.velocityX=(E-this.x)/R,this.velocityY=(A-this.y)/R}else this.velocityX=T,this.velocityY=w;return v.acceleration&&(this.accelerationX=m.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=m.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=m.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=m.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=m.bounce.onEmit(this,"bounce"),this.alpha=m.alpha.onEmit(this,"alpha"),m.color.active?this.tint=m.color.onEmit(this,"tint"):this.tint=m.tint.onEmit(this,"tint"),!0},update:function(u,p,v){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=u,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=u,!1;this.anims.update(0,u);var m=this.emitter,g=m.ops,T=1-this.lifeCurrent/this.life;if(this.lifeT=T,this.x=g.x.onUpdate(this,"x",T,this.x),this.y=g.y.onUpdate(this,"y",T,this.y),m.moveTo){var w=g.moveToX.onUpdate(this,"moveToX",T,m.moveToX),b=g.moveToY.onUpdate(this,"moveToY",T,m.moveToY),E=this.lifeCurrent/1e3;this.velocityX=(w-this.x)/E,this.velocityY=(b-this.y)/E}return this.computeVelocity(m,u,p,v,T),this.scaleX=g.scaleX.onUpdate(this,"scaleX",T,this.scaleX),g.scaleY.active?this.scaleY=g.scaleY.onUpdate(this,"scaleY",T,this.scaleY):this.scaleY=this.scaleX,this.angle=g.rotate.onUpdate(this,"rotate",T,this.angle),this.rotation=r(this.angle),m.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=l(g.alpha.onUpdate(this,"alpha",T,this.alpha),0,1),g.color.active?this.tint=g.color.onUpdate(this,"color",T,this.tint):this.tint=g.tint.onUpdate(this,"tint",T,this.tint),this.lifeCurrent-=u,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(u,p,v,m,g){var T=u.ops,w=this.velocityX,b=this.velocityY,E=T.accelerationX.onUpdate(this,"accelerationX",g,this.accelerationX),A=T.accelerationY.onUpdate(this,"accelerationY",g,this.accelerationY),R=T.maxVelocityX.onUpdate(this,"maxVelocityX",g,this.maxVelocityX),I=T.maxVelocityY.onUpdate(this,"maxVelocityY",g,this.maxVelocityY);this.bounce=T.bounce.onUpdate(this,"bounce",g,this.bounce),w+=u.gravityX*v+E*v,b+=u.gravityY*v+A*v,w=l(w,-R,R),b=l(b,-I,I),this.velocityX=w,this.velocityY=b,this.x+=w*v,this.y+=b*v,u.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var P=0;P<m.length;P++){var M=m[P];M.active&&M.update(this,p,v,g)}},setSizeToFrame:function(){},getBounds:function(u){u===void 0&&(u=this.emitter.getWorldTransformMatrix());var p=Math.abs(u.scaleX)*this.scaleX,v=Math.abs(u.scaleY)*this.scaleY,m=this.x,g=this.y,T=this.rotation,w=this.frame.width*p/2,b=this.frame.height*v/2,E=this.bounds,A=new h(m-w,g-b),R=new h(m+w,g-b),I=new h(m-w,g+b),P=new h(m+w,g+b);return T!==0&&(n(A,m,g,T),n(R,m,g,T),n(I,m,g,T),n(P,m,g,T)),u.transformPoint(A.x,A.y,A),u.transformPoint(R.x,R.y,R),u.transformPoint(I.x,I.y,I),u.transformPoint(P.x,P.y,P),E.x=Math.min(A.x,R.x,I.x,P.x),E.y=Math.min(A.y,R.y,I.y,P.y),E.width=Math.max(A.x,R.x,I.x,P.x)-E.x,E.height=Math.max(A.y,R.y,I.y,P.y)-E.y,E},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});o.exports=d},73106:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(30891),a=t(74118),r=new s({Extends:l,initialize:function(n,h,d,u,p,v,m,g){p===void 0&&(p=!0),v===void 0&&(v=!0),m===void 0&&(m=!0),g===void 0&&(g=!0),l.call(this,n,h,!0),this.bounds=new a(n,h,d,u),this.collideLeft=p,this.collideRight=v,this.collideTop=m,this.collideBottom=g},update:function(i){var n=this.bounds,h=-i.bounce,d=i.worldPosition;d.x<n.x&&this.collideLeft?(i.x+=n.x-d.x,i.velocityX*=h):d.x>n.right&&this.collideRight&&(i.x-=d.x-n.right,i.velocityX*=h),d.y<n.y&&this.collideTop?(i.y+=n.y-d.y,i.velocityY*=h):d.y>n.bottom&&this.collideBottom&&(i.y-=d.y-n.bottom,i.velocityY*=h)}});o.exports=r},9216:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(48129),r=t(29538),i=t(69361),n=t(54213),h=t(19737),d=t(93025),u=t(40629),p=t(89980),v=t(72632),m=t(72861),g=t(87811),T=t(53523),w=t(19256),b=t(7782),E=t(71207),A=t(14655),R=t(14909),I=t(68433),P=t(74118),M=t(90205),F=t(66458),O=t(69116),D=t(17922),L=t(69360),z=t(93736),X=t(1071),H=t(73106),J=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],G=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],k=new s({Extends:p,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Texture,l.Transform,l.Visible,O],initialize:function(B,U,W,K,q){p.call(this,B,"ParticleEmitter"),this.particleClass=R,this.ops={accelerationX:new d("accelerationX",0),accelerationY:new d("accelerationY",0),alpha:new d("alpha",1),angle:new d("angle",{min:0,max:360},!0),bounce:new d("bounce",0),color:new h("color"),delay:new d("delay",0,!0),hold:new d("hold",0,!0),lifespan:new d("lifespan",1e3,!0),maxVelocityX:new d("maxVelocityX",1e4),maxVelocityY:new d("maxVelocityY",1e4),moveToX:new d("moveToX",0),moveToY:new d("moveToY",0),quantity:new d("quantity",1,!0),rotate:new d("rotate",0),scaleX:new d("scaleX",1),scaleY:new d("scaleY",1),speedX:new d("speedX",0,!0),speedY:new d("speedY",0,!0),tint:new d("tint",16777215),x:new d("x",0),y:new d("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new z,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new L,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new E(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(U,W),this.setTexture(K),q&&this.setConfig(q)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(N){if(!N)return this;var B=0,U="",W=this.ops;for(B=0;B<G.length;B++)U=G[B],W[U].loadConfig(N);for(B=0;B<J.length;B++)U=J[B],w(N,U)&&(this[U]=v(N,U));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,w(N,"speed")&&(W.speedX.loadConfig(N,"speed"),W.speedY.active=!1),(T(N,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),w(N,"scale")&&(W.scaleX.loadConfig(N,"scale"),W.scaleY.active=!1),w(N,"callbackScope")){var K=v(N,"callbackScope",null);this.emitCallbackScope=K,this.deathCallbackScope=K}if(w(N,"emitZone")&&this.addEmitZone(N.emitZone),w(N,"deathZone")&&this.addDeathZone(N.deathZone),w(N,"bounds")){var q=this.addParticleBounds(N.bounds);q.collideLeft=v(N,"collideLeft",!0),q.collideRight=v(N,"collideRight",!0),q.collideTop=v(N,"collideTop",!0),q.collideBottom=v(N,"collideBottom",!0)}return w(N,"followOffset")&&this.followOffset.setFromObject(v(N,"followOffset",0)),w(N,"texture")&&this.setTexture(N.texture),w(N,"frame")?this.setEmitterFrame(N.frame):w(N,"anim")&&this.setAnim(N.anim),w(N,"reserve")&&this.reserve(N.reserve),w(N,"advance")&&this.fastForward(N.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(u.START,this),this},toJSON:function(){var N=a(this),B=0,U="";for(B=0;B<J.length;B++)U=J[B],N[U]=this[U];var W=this.ops;for(B=0;B<G.length;B++)U=G[B],W[U]&&(N[U]=W[U].toJSON());return W.speedY.active||(delete N.speedX,N.speed=W.speedX.toJSON()),this.scaleX===this.scaleY&&(delete N.scaleX,delete N.scaleY,N.scale=W.scaleX.toJSON()),N},resetCounters:function(N,B){var U=this.counters;U.fill(0),U[0]=N,B&&(U[5]=1)},startFollow:function(N,B,U,W){return B===void 0&&(B=0),U===void 0&&(U=0),W===void 0&&(W=!1),this.follow=N,this.followOffset.set(B,U),this.trackVisible=W,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var N=this.frames,B=N.length,U;return B===1?U=N[0]:this.randomFrame?U=m(N):(U=N[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===B&&(this.currentFrame=0))),this.texture.get(U)},setEmitterFrame:function(N,B,U){B===void 0&&(B=!0),U===void 0&&(U=1),this.randomFrame=B,this.frameQuantity=U,this.currentFrame=0;var W=typeof N;if(this.frames.length=0,Array.isArray(N))this.frames=this.frames.concat(N);else if(W==="string"||W==="number")this.frames.push(N);else if(W==="object"){var K=N;N=v(K,"frames",null),N&&(this.frames=this.frames.concat(N));var q=v(K,"cycle",!1);this.randomFrame=!q,this.frameQuantity=v(K,"quantity",U)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var N=this.anims,B=N.length;if(B===0)return null;if(B===1)return N[0];if(this.randomAnim)return m(N);var U=N[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=X(this.currentAnim+1,0,B)),U},setAnim:function(N,B,U){B===void 0&&(B=!0),U===void 0&&(U=1),this.randomAnim=B,this.animQuantity=U,this.currentAnim=0;var W=typeof N;if(this.anims.length=0,Array.isArray(N))this.anims=this.anims.concat(N);else if(W==="string")this.anims.push(N);else if(W==="object"){var K=N;N=v(K,"anims",null),N&&(this.anims=this.anims.concat(N));var q=v(K,"cycle",!1);this.randomAnim=!q,this.animQuantity=v(K,"quantity",U)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(N){return N===void 0&&(N=!0),this.radial=N,this},addParticleBounds:function(N,B,U,W,K,q,_,rt){if(typeof N=="object"){var ft=N;N=ft.x,B=ft.y,U=w(ft,"w")?ft.w:ft.width,W=w(ft,"h")?ft.h:ft.height}return this.addParticleProcessor(new H(N,B,U,W,K,q,_,rt))},setParticleSpeed:function(N,B){return B===void 0&&(B=N),this.ops.speedX.onChange(N),N===B?this.ops.speedY.active=!1:this.ops.speedY.onChange(B),this.radial=!0,this},setParticleScale:function(N,B){return N===void 0&&(N=1),B===void 0&&(B=N),this.ops.scaleX.onChange(N),this.ops.scaleY.onChange(B),this},setParticleGravity:function(N,B){return this.gravityX=N,this.gravityY=B,this},setParticleAlpha:function(N){return this.ops.alpha.onChange(N),this},setParticleTint:function(N){return this.ops.tint.onChange(N),this},setEmitterAngle:function(N){return this.ops.angle.onChange(N),this},setParticleLifespan:function(N){return this.ops.lifespan.onChange(N),this},setQuantity:function(N){return this.quantity=N,this},setFrequency:function(N,B){return this.frequency=N,this.flowCounter=N>0?N:0,B&&(this.quantity=B),this},addDeathZone:function(N){Array.isArray(N)||(N=[N]);for(var B,U=[],W=0;W<N.length;W++)if(B=N[W],B instanceof i)U.push(B);else if(typeof B.contains=="function")B=new i(B,!0),U.push(B);else{var K=v(B,"type","onEnter"),q=v(B,"source",null);if(q&&typeof q.contains=="function"){var _=K==="onEnter";B=new i(q,_),U.push(B)}}return this.deathZones=this.deathZones.concat(U),U},removeDeathZone:function(N){return F(this.deathZones,N),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(N){Array.isArray(N)||(N=[N]);for(var B,U=[],W=0;W<N.length;W++)if(B=N[W],B instanceof I||B instanceof n)U.push(B);else{var K=v(B,"source",null);if(K){var q=v(B,"type","random");if(q==="random"&&typeof K.getRandomPoint=="function")B=new I(K),U.push(B);else if(q==="edge"&&typeof K.getPoints=="function"){var _=v(B,"quantity",1),rt=v(B,"stepRate",0),ft=v(B,"yoyo",!1),vt=v(B,"seamless",!0),mt=v(B,"total",-1);B=new n(K,_,rt,ft,vt,mt),U.push(B)}}}return this.emitZones=this.emitZones.concat(U),U},removeEmitZone:function(N){return F(this.emitZones,N),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(N){var B=this.emitZones,U=B.length;if(U!==0){var W=B[this.zoneIndex];W.getPoint(N),W.total>-1&&(this.zoneTotal++,this.zoneTotal===W.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===U&&(this.zoneIndex=0)))}},getDeathZone:function(N){for(var B=this.deathZones,U=0;U<B.length;U++){var W=B[U];if(W.willKill(N))return this.emit(u.DEATH_ZONE,this,N,W),!0}return!1},setEmitZone:function(N){var B;return isFinite(N)?B=N:B=this.emitZones.indexOf(N),B>=0&&(this.zoneIndex=B),this},addParticleProcessor:function(N){return this.processors.exists(N)||(N.emitter&&N.emitter.removeParticleProcessor(N),this.processors.add(N),N.emitter=this),N},removeParticleProcessor:function(N){return this.processors.exists(N)&&(this.processors.remove(N,!0),N.emitter=null),N},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(N){return this.addParticleProcessor(new g(N))},reserve:function(N){var B=this.dead;if(this.maxParticles>0){var U=this.getParticleCount();U+N>this.maxParticles&&(N=this.maxParticles-(U+N))}for(var W=0;W<N;W++)B.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(N,B){return N===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof N=="function"&&(this.emitCallback=N,B&&(this.emitCallbackScope=B)),this},onParticleDeath:function(N,B){return N===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof N=="function"&&(this.deathCallback=N,B&&(this.deathCallbackScope=B)),this},killAll:function(){for(var N=this.dead,B=this.alive;B.length>0;)N.push(B.pop());return this},forEachAlive:function(N,B){for(var U=this.alive,W=U.length,K=0;K<W;K++)N.call(B,U[K],this);return this},forEachDead:function(N,B){for(var U=this.dead,W=U.length,K=0;K<W;K++)N.call(B,U[K],this);return this},start:function(N,B){return N===void 0&&(N=0),this.emitting||(N>0&&this.fastForward(N),this.emitting=!0,this.resetCounters(this.frequency,!0),B!==void 0&&(this.duration=Math.abs(B)),this.emit(u.START,this)),this},stop:function(N){return N===void 0&&(N=!1),this.emitting&&(this.emitting=!1,N&&this.killAll(),this.emit(u.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(N,B){return N===void 0&&(N=""),B===void 0&&(B=this.true),this.sortProperty=N,this.sortOrderAsc=B,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(N){return this.sortProperty!==""?N=this.depthSortCallback:N=null,this.sortCallback=N,this},depthSort:function(){return D(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(N,B){var U=this.sortProperty;return this.sortOrderAsc?N[U]-B[U]:B[U]-N[U]},flow:function(N,B,U){return B===void 0&&(B=1),this.emitting=!1,this.frequency=N,this.quantity=B,U!==void 0&&(this.stopAfter=U),this.start()},explode:function(N,B,U){this.frequency=-1,this.resetCounters(-1,!0);var W=this.emitParticle(N,B,U);return this.emit(u.EXPLODE,this,W),W},emitParticleAt:function(N,B,U){return this.emitParticle(U,N,B)},emitParticle:function(N,B,U){if(!this.atLimit()){N===void 0&&(N=this.ops.quantity.onEmit());for(var W=this.dead,K=this.stopAfter,q=this.follow?this.follow.x+this.followOffset.x:B,_=this.follow?this.follow.y+this.followOffset.y:U,rt=0;rt<N;rt++){var ft=W.pop();if(ft||(ft=new this.particleClass(this)),ft.fire(q,_)?(this.particleBringToTop?this.alive.push(ft):this.alive.unshift(ft),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,ft,this)):this.dead.push(ft),K>0&&(this.stopCounter++,this.stopCounter>=K)||this.atLimit())break}return ft}},fastForward:function(N,B){B===void 0&&(B=1e3/60);var U=0;for(this.skipping=!0;U<Math.abs(N);)this.preUpdate(0,B),U+=B;return this.skipping=!1,this},preUpdate:function(N,B){B*=this.timeScale;var U=B/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var W=this.getProcessors(),K=this.alive,q=this.dead,_=0,rt=[],ft=K.length;for(_=0;_<ft;_++){var vt=K[_];vt.update(B,U,W)&&rt.push({index:_,particle:vt})}if(ft=rt.length,ft>0){var mt=this.deathCallback,yt=this.deathCallbackScope;for(_=ft-1;_>=0;_--){var xt=rt[_];K.splice(xt.index,1),q.push(xt.particle),mt&&mt.call(yt,xt.particle),xt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&K.length===0&&(this.completeFlag=0,this.emit(u.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=B;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=B,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(N){for(var B=this.getWorldTransformMatrix(),U=this.alive,W=U.length,K=[],q=0;q<W;q++){var _=U[q];M(N,_.getBounds(B))&&K.push(_)}return K},getBounds:function(N,B,U,W){N===void 0&&(N=0),B===void 0&&(B=0),U===void 0&&(U=1e3/60),W===void 0&&(W=new P);var K=this.getWorldTransformMatrix(),q,_,rt=this.alive,ft=!1;if(W.setTo(0,0,0,0),B>0){var vt=0;for(this.skipping=!0;vt<Math.abs(B);){for(this.preUpdate(0,U),q=0;q<rt.length;q++)_=rt[q].getBounds(K),ft?A(W,_):(ft=!0,r(_,W));vt+=U}this.skipping=!1}else for(q=0;q<rt.length;q++)_=rt[q].getBounds(K),ft?A(W,_):(ft=!0,r(_,W));return N>0&&b(W,N,N),W},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(N){this.ops.x.onChange(N)}},particleY:{get:function(){return this.ops.y.current},set:function(N){this.ops.y.onChange(N)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(N){this.ops.accelerationX.onChange(N)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(N){this.ops.accelerationY.onChange(N)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(N){this.ops.maxVelocityX.onChange(N)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(N){this.ops.maxVelocityY.onChange(N)}},speed:{get:function(){return this.ops.speedX.current},set:function(N){this.ops.speedX.onChange(N),this.ops.speedY.onChange(N)}},speedX:{get:function(){return this.ops.speedX.current},set:function(N){this.ops.speedX.onChange(N)}},speedY:{get:function(){return this.ops.speedY.current},set:function(N){this.ops.speedY.onChange(N)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(N){this.ops.moveToX.onChange(N)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(N){this.ops.moveToY.onChange(N)}},bounce:{get:function(){return this.ops.bounce.current},set:function(N){this.ops.bounce.onChange(N)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(N){this.ops.scaleX.onChange(N)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(N){this.ops.scaleY.onChange(N)}},particleColor:{get:function(){return this.ops.color.current},set:function(N){this.ops.color.onChange(N)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(N){this.ops.color.setEase(N)}},particleTint:{get:function(){return this.ops.tint.current},set:function(N){this.ops.tint.onChange(N)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(N){this.ops.alpha.onChange(N)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(N){this.ops.lifespan.onChange(N)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(N){this.ops.angle.onChange(N)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(N){this.ops.rotate.onChange(N)}},quantity:{get:function(){return this.ops.quantity.current},set:function(N){this.ops.quantity.onChange(N)}},delay:{get:function(){return this.ops.delay.current},set:function(N){this.ops.delay.onChange(N)}},hold:{get:function(){return this.ops.hold.current},set:function(N){this.ops.hold.onChange(N)}},flowCounter:{get:function(){return this.counters[0]},set:function(N){this.counters[0]=N}},frameCounter:{get:function(){return this.counters[1]},set:function(N){this.counters[1]=N}},animCounter:{get:function(){return this.counters[2]},set:function(N){this.counters[2]=N}},elapsed:{get:function(){return this.counters[3]},set:function(N){this.counters[3]=N}},stopCounter:{get:function(){return this.counters[4]},set:function(N){this.counters[4]=N}},completeFlag:{get:function(){return this.counters[5]},set:function(N){this.counters[5]=N}},zoneIndex:{get:function(){return this.counters[6]},set:function(N){this.counters[6]=N}},zoneTotal:{get:function(){return this.counters[7]},set:function(N){this.counters[7]=N}},currentFrame:{get:function(){return this.counters[8]},set:function(N){this.counters[8]=N}},currentAnim:{get:function(){return this.counters[9]},set:function(N){this.counters[9]=N}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var N,B=this.ops;for(N=0;N<G.length;N++){var U=G[N];B[U].destroy()}for(N=0;N<this.alive.length;N++)this.alive[N].destroy();for(N=0;N<this.dead.length;N++)this.dead[N].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});o.exports=k},10456:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(90205),l=t(69360),a=new l,r=new l,i=new l,n=new l,h=function(d,u,p,v){var m=a,g=r,T=i,w=n;v?(w.loadIdentity(),w.multiply(v),w.translate(u.x,u.y),w.rotate(u.rotation),w.scale(u.scaleX,u.scaleY)):w.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var b=d.currentContext,E=p.roundPixels,A=p.alpha,R=u.alpha,I=u.alive,P=I.length,M=u.viewBounds;if(!(!u.visible||P===0||M&&!s(M,p.worldView))){u.sortCallback&&u.depthSort(),p.addToRenderList(u);var F=u.scrollFactorX,O=u.scrollFactorY;b.save(),b.globalCompositeOperation=d.blendModes[u.blendMode];for(var D=0;D<P;D++){var L=I[D],z=L.alpha*R*A;if(!(z<=0||L.scaleX===0||L.scaleY===0)){T.applyITRS(L.x,L.y,L.rotation,L.scaleX,L.scaleY),m.copyFrom(p.matrix),m.multiplyWithOffset(w,-p.scrollX*F,-p.scrollY*O),T.e=L.x,T.f=L.y,m.multiply(T,g);var X=L.frame,H=X.canvasData;if(H.width>0&&H.height>0){var J=-X.halfWidth,G=-X.halfHeight;b.globalAlpha=z,b.save(),g.setToContext(b),E&&(J=Math.round(J),G=Math.round(G)),b.imageSmoothingEnabled=!X.source.scaleMode,b.drawImage(X.source.image,H.x,H.y,H.width,H.height,J,G,H.width,H.height),b.restore()}}}b.restore()}};o.exports=h},765:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(72632),i=t(9216);l.register("particles",function(n,h){n===void 0&&(n={});var d=a(n,"key",null),u=r(n,"config",null),p=new i(this.scene,0,0,d);return h!==void 0&&(n.add=h),s(this.scene,p,n),u&&p.setConfig(u),p})},81212:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(9216);s.register("particles",function(a,r,i,n){return a!==void 0&&typeof a=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new l(this.scene,a,r,i,n))})},69116:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(10275),a=t(10456),o.exports={renderWebGL:l,renderCanvas:a}},10275:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(90205),l=t(69360),a=t(75512),r=new l,i=new l,n=new l,h=new l,d=function(u,p,v,m){var g=u.pipelines.set(p.pipeline),T=r,w=i,b=n,E=h;m?(E.loadIdentity(),E.multiply(m),E.translate(p.x,p.y),E.rotate(p.rotation),E.scale(p.scaleX,p.scaleY)):E.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY);var A=a.getTintAppendFloatAlpha,R=v.alpha,I=p.alpha;u.pipelines.preBatch(p);var P=p.alive,M=P.length,F=p.viewBounds;if(!(M===0||F&&!s(F,v.worldView))){p.sortCallback&&p.depthSort(),v.addToRenderList(p),T.copyFrom(v.matrix),T.multiplyWithOffset(E,-v.scrollX*p.scrollFactorX,-v.scrollY*p.scrollFactorY),u.setBlendMode(p.blendMode),p.mask&&(p.mask.preRenderWebGL(u,p,v),u.pipelines.set(p.pipeline));for(var O=p.tintFill,D,L,z=0;z<M;z++){var X=P[z],H=X.alpha*I*R;if(!(H<=0||X.scaleX===0||X.scaleY===0)){b.applyITRS(X.x,X.y,X.rotation,X.scaleX,X.scaleY),b.e=X.x,b.f=X.y,T.multiply(b,w);var J=X.frame;J.glTexture!==L&&(L=J.glTexture,D=g.setGameObject(p,J));var G=-J.halfWidth,k=-J.halfHeight,N=w.setQuad(G,k,G+J.width,k+J.height),B=A(X.tint,H);g.shouldFlush(6)&&(g.flush(),D=g.setGameObject(p,J)),g.batchQuad(p,N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],J.u0,J.v0,J.u1,J.v1,B,B,B,B,O,L,D)}}p.mask&&p.mask.postRenderWebGL(u,v),u.pipelines.postBatch(p)}};o.exports=d},30891:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n){r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=!0),this.emitter,this.x=r,this.y=i,this.active=n},update:function(){},destroy:function(){this.emitter=null}});o.exports=l},76100:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},26677:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="deathzone"},62736:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="explode"},56490:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},85715:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},40629:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:t(76100),DEATH_ZONE:t(26677),EXPLODE:t(62736),START:t(56490),STOP:t(85715)}},27684:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EmitterColorOp:t(19737),EmitterOp:t(93025),Events:t(40629),GravityWell:t(87811),Particle:t(14909),ParticleBounds:t(73106),ParticleEmitter:t(9216),ParticleProcessor:t(30891),Zones:t(25962)}},69361:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i){this.source=r,this.killOnEnter=i},willKill:function(a){var r=a.worldPosition,i=this.source.contains(r.x,r.y);return i&&this.killOnEnter||!i&&!this.killOnEnter}});o.exports=l},54213:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h,d,u){h===void 0&&(h=!1),d===void 0&&(d=!0),u===void 0&&(u=-1),this.source=r,this.points=[],this.quantity=i,this.stepRate=n,this.yoyo=h,this.counter=-1,this.seamless=d,this._length=0,this._direction=0,this.total=u,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var a=this.points[0],r=this.points[this.points.length-1];a.x===r.x&&a.y===r.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(a){return this.source=a,this.updateSource()},getPoint:function(a){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var r=this.points[this.counter];r&&(a.x=r.x,a.y=r.y)}});o.exports=l},68433:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93736),a=new s({initialize:function(i){this.source=i,this._tempVec=new l,this.total=-1},getPoint:function(r){var i=this._tempVec;this.source.getRandomPoint(i),r.x=i.x,r.y=i.y}});o.exports=a},25962:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DeathZone:t(69361),EdgeZone:t(54213),RandomZone:t(68433)}},29598:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(13747),r=new s({Extends:a,Mixins:[l.PathFollower],initialize:function(n,h,d,u,p,v){a.call(this,n,d,u,p,v),this.path=h},preUpdate:function(i,n){this.anims.update(i,n),this.pathUpdate(i)}});o.exports=r},19626:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(29598);s.register("follower",function(a,r,i,n,h){var d=new l(this.scene,a,r,i,n,h);return this.displayList.add(d),this.updateList.add(d),d})},33412:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(56694),a=t(99425),r=t(15978),i=t(83321),n=t(76583),h=new l({Extends:i,initialize:function(u,p,v,m,g,T,w,b){m||(m="__DEFAULT"),i.call(this,u,p,v,m,g),this.type="Plane",this.anims=new s(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(T,w,b),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(d,u,p){d===void 0&&(d=8),u===void 0&&(u=8),p===void 0&&(p=!1);var v=!1;return p&&(v=!0),this.gridWidth=d,this.gridHeight=u,this.isTiled=p,this.clear(),a({mesh:this,widthSegments:d,heightSegments:u,isOrtho:!1,tile:p,flipY:v}),this},setSizeToFrame:function(d){d===void 0&&(d=!0);var u=this.frame;if(this.setPerspective(this.width/u.width,this.height/u.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!d)return this;var p=this.gridWidth,v=this.gridHeight,m=this.vertices,g=u.u0,T=u.u1,w=u.v0,b=u.v1,E,A,R=0;if(this.isTiled)for(w=u.v1,b=u.v0,A=0;A<v;A++)for(E=0;E<p;E++)m[R++].setUVs(g,b),m[R++].setUVs(g,w),m[R++].setUVs(T,b),m[R++].setUVs(g,w),m[R++].setUVs(T,w),m[R++].setUVs(T,b);else{var I=p+1,P=v+1,M=T-g,F=b-w,O=[];for(A=0;A<P;A++)for(E=0;E<I;E++){var D=g+M*(E/p),L=w+F*(A/v);O.push(D,L)}for(A=0;A<v;A++)for(E=0;E<p;E++){var z=(E+I*A)*2,X=(E+I*(A+1))*2,H=(E+1+I*(A+1))*2,J=(E+1+I*A)*2;m[R++].setUVs(O[z],O[z+1]),m[R++].setUVs(O[X],O[X+1]),m[R++].setUVs(O[J],O[J+1]),m[R++].setUVs(O[X],O[X+1]),m[R++].setUVs(O[H],O[H+1]),m[R++].setUVs(O[J],O[J+1])}}return this},setViewHeight:function(d){d===void 0&&(d=this.frame.height);var u=this.fov*(Math.PI/180);this.viewPosition.z=this.height/d/Math.tan(u/2),this.dirtyCache[10]=1},createCheckerboard:function(d,u,p,v,m){d===void 0&&(d=16777215),u===void 0&&(u=255),p===void 0&&(p=255),v===void 0&&(v=255),m===void 0&&(m=128);var g=this.scene.sys.renderer.gl,T=g.createTexture();g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,T),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);for(var w=r(d),b=r(u),E=[],A=0;A<16;A++)for(var R=0;R<16;R++)A<8&&R<8||A>7&&R>7?E.push(w.r,w.g,w.b,p):E.push(b.r,b.g,b.b,v);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,16,16,0,g.RGBA,g.UNSIGNED_BYTE,new Uint8Array(E)),T.isAlphaPremultiplied=!0,T.isRenderTexture=!1,T.width=16,T.height=16;var I=this.scene.sys.textures.addGLTexture(n(),T,16,16);return this.removeCheckerboard(),this._checkerboard=I,g.bindTexture(g.TEXTURE_2D,null),this.setTexture(I),this.setSizeToFrame(),this.setViewHeight(m),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(d,u){return this.anims.play(d,u)},playReverse:function(d,u){return this.anims.playReverse(d,u)},playAfterDelay:function(d,u){return this.anims.playAfterDelay(d,u)},playAfterRepeat:function(d,u){return this.anims.playAfterRepeat(d,u)},stop:function(){return this.anims.stop()},stopAfterDelay:function(d){return this.anims.stopAfterDelay(d)},stopAfterRepeat:function(d){return this.anims.stopAfterRepeat(d)},stopOnFrame:function(d){return this.anims.stopOnFrame(d)},preUpdate:function(d,u){i.prototype.preUpdate.call(this,d,u),this.anims.update(d,u)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});o.exports=h},10912:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(32291),a=t(99325),r=t(20494),i=t(10850),n=t(33412);a.register("plane",function(h,d){h===void 0&&(h={});var u=r(h,"key",null),p=r(h,"frame",null),v=i(h,"width",8),m=i(h,"height",8),g=i(h,"tile",!1),T=new n(this.scene,0,0,u,p,v,m,g);d!==void 0&&(h.add=d);var w=i(h,"checkerboard",null);if(w){var b=i(w,"color1",16777215),E=i(w,"color2",255),A=i(w,"alpha1",255),R=i(w,"alpha2",255),I=i(w,"height",128);T.createCheckerboard(b,E,A,R,I)}return s(this.scene,T,h),l(T,h),T})},58322:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33412),l=t(61286);l.register("plane",function(a,r,i,n,h,d,u){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u))})},13171:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(74853),i=t(65641),n=t(71606),h=new s({Extends:a,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Transform,l.Visible,n],initialize:function(u,p,v,m,g,T,w){m===void 0&&(m=16777215),g===void 0&&(g=128),T===void 0&&(T=1),w===void 0&&(w=.1),a.call(this,u,"PointLight"),this.initPipeline(i.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(p,v),this.color=r(m),this.intensity=T,this.attenuation=w,this.width=g*2,this.height=g*2,this._radius=g},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this.width=d*2,this.height=d*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});o.exports=h},162:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(13171);l.register("pointlight",function(i,n){i===void 0&&(i={});var h=a(i,"color",16777215),d=a(i,"radius",128),u=a(i,"intensity",1),p=a(i,"attenuation",.1),v=new r(this.scene,0,0,h,d,u,p);return n!==void 0&&(i.add=n),s(this.scene,v,i),v})},91201:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(13171);s.register("pointlight",function(a,r,i,n,h,d){return this.displayList.add(new l(this.scene,a,r,i,n,h,d))})},71606:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(80590),o.exports={renderWebGL:l,renderCanvas:a}},80590:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n){i.addToRenderList(r);var h=a.pipelines.set(r.pipeline),d=s(r,i,n).calc,u=r.width,p=r.height,v=-r._radius,m=-r._radius,g=v+u,T=m+p,w=d.getX(0,0),b=d.getY(0,0),E=d.getX(v,m),A=d.getY(v,m),R=d.getX(v,T),I=d.getY(v,T),P=d.getX(g,T),M=d.getY(g,T),F=d.getX(g,m),O=d.getY(g,m);a.pipelines.preBatch(r),h.batchPointLight(r,i,E,A,R,I,P,M,F,O,w,b),a.pipelines.postBatch(r)};o.exports=l},15996:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(845),a=t(1539),r=new s({Extends:a,initialize:function(n,h,d,u,p){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=32),p===void 0&&(p=32);var v=new l(n.sys.textures,"",u,p);a.call(this,n,h,d,v),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(i,n){this.width=i,this.height=n,this.texture.setSize(i,n),this.updateDisplayOrigin();var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=i,h.hitArea.height=n),this},resize:function(i,n){return this.setSize(i,n),this},saveTexture:function(i){var n=this.texture;return n.key=i,n.manager.addDynamicTexture(n)&&(this._saved=!0),n},fill:function(i,n,h,d,u,p){return this.texture.fill(i,n,h,d,u,p),this},clear:function(){return this.texture.clear(),this},stamp:function(i,n,h,d,u){return this.texture.stamp(i,n,h,d,u),this},erase:function(i,n,h){return this.texture.erase(i,n,h),this},draw:function(i,n,h,d,u){return this.texture.draw(i,n,h,d,u),this},drawFrame:function(i,n,h,d,u,p){return this.texture.drawFrame(i,n,h,d,u,p),this},repeat:function(i,n,h,d,u,p,v,m,g){return this.texture.repeat(i,n,h,d,u,p,v,m,g),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(i,n,h,d,u){return this.texture.batchDraw(i,n,h,d,u),this},batchDrawFrame:function(i,n,h,d,u,p){return this.texture.batchDrawFrame(i,n,h,d,u,p),this},endDraw:function(i){return this.texture.endDraw(i),this},snapshotArea:function(i,n,h,d,u,p,v){return this.texture.snapshotArea(i,n,h,d,u,p,v),this},snapshot:function(i,n,h){return this.snapshotArea(0,0,this.width,this.height,i,n,h)},snapshotPixel:function(i,n,h){return this.snapshotArea(i,n,1,1,h,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});o.exports=r},85692:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(15996);l.register("renderTexture",function(i,n){i===void 0&&(i={});var h=a(i,"x",0),d=a(i,"y",0),u=a(i,"width",32),p=a(i,"height",32),v=new r(this.scene,h,d,u,p);return n!==void 0&&(i.add=n),s(this.scene,v,i),v})},29599:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(15996);s.register("renderTexture",function(a,r,i,n){return this.displayList.add(new l(this.scene,a,r,i,n))})},79968:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(56694),a=t(64937),r=t(89980),i=t(65641),n=t(58912),h=t(93736),d=new l({Extends:r,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Flip,a.Mask,a.Pipeline,a.PostPipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,n],initialize:function(p,v,m,g,T,w,b,E,A){g===void 0&&(g="__DEFAULT"),w===void 0&&(w=2),b===void 0&&(b=!0),r.call(this,p,"Rope"),this.anims=new s(this),this.points=w,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=g==="__DEFAULT",this.dirty=!1,this.horizontal=b,this._flipX=!1,this._flipY=!1,this._perp=new h,this.debugCallback=null,this.debugGraphic=null,this.setTexture(g,T),this.setPosition(v,m),this.setSizeToFrame(),this.initPipeline(i.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(w)&&this.resizeArrays(w.length),this.setPoints(w,E,A),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(u,p){var v=this.anims.currentFrame;this.anims.update(u,p),this.anims.currentFrame!==v&&(this.updateUVs(),this.updateVertices())},play:function(u,p,v){return this.anims.play(u,p,v),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(u,p,v){return u===void 0&&(u=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(u,p,v))},setVertical:function(u,p,v){return u===void 0&&(u=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(u,p,v)):this},setTintFill:function(u){return u===void 0&&(u=!1),this.tintFill=u,this},setAlphas:function(u,p){var v=this.points.length;if(v<1)return this;var m=this.alphas;u===void 0?u=[1]:!Array.isArray(u)&&p===void 0&&(u=[u]);var g,T=0;if(p!==void 0)for(g=0;g<v;g++)T=g*2,m[T]=u,m[T+1]=p;else if(u.length===v)for(g=0;g<v;g++)T=g*2,m[T]=u[g],m[T+1]=u[g];else{var w=u[0];for(g=0;g<v;g++)T=g*2,u.length>T&&(w=u[T]),m[T]=w,u.length>T+1&&(w=u[T+1]),m[T+1]=w}return this},setColors:function(u){var p=this.points.length;if(p<1)return this;var v=this.colors;u===void 0?u=[16777215]:Array.isArray(u)||(u=[u]);var m,g=0;if(u.length===p)for(m=0;m<p;m++)g=m*2,v[g]=u[m],v[g+1]=u[m];else{var T=u[0];for(m=0;m<p;m++)g=m*2,u.length>g&&(T=u[g]),v[g]=T,u.length>g+1&&(T=u[g+1]),v[g+1]=T}return this},setPoints:function(u,p,v){if(u===void 0&&(u=2),typeof u=="number"){var m=u;m<2&&(m=2),u=[];var g,T,w;if(this.horizontal)for(w=-this.frame.halfWidth,T=this.frame.width/(m-1),g=0;g<m;g++)u.push({x:w+g*T,y:0});else for(w=-this.frame.halfHeight,T=this.frame.height/(m-1),g=0;g<m;g++)u.push({x:0,y:w+g*T})}var b=u.length,E=this.points.length;return b<1?(console.warn("Rope: Not enough points given"),this):(b===1&&(u.unshift({x:0,y:0}),b++),E!==b&&this.resizeArrays(b),this.dirty=!0,this.points=u,this.updateUVs(),p!=null&&this.setColors(p),v!=null&&this.setAlphas(v),this)},updateUVs:function(){for(var u=this.uv,p=this.points.length,v=this.frame.u0,m=this.frame.v0,g=this.frame.u1,T=this.frame.v1,w=(g-v)/(p-1),b=(T-m)/(p-1),E=0;E<p;E++){var A=E*4,R,I,P,M;this.horizontal?(this._flipX?(R=g-E*w,P=g-E*w):(R=v+E*w,P=v+E*w),this._flipY?(I=T,M=m):(I=m,M=T)):(this._flipX?(R=v,P=g):(R=g,P=v),this._flipY?(I=T-E*b,M=T-E*b):(I=m+E*b,M=m+E*b)),u[A+0]=R,u[A+1]=I,u[A+2]=P,u[A+3]=M}return this},resizeArrays:function(u){var p=this.colors,v=this.alphas;this.vertices=new Float32Array(u*4),this.uv=new Float32Array(u*4),p=new Uint32Array(u*2),v=new Float32Array(u*2);for(var m=0;m<u*2;m++)p[m]=16777215,v[m]=1;return this.colors=p,this.alphas=v,this.dirty=!0,this},updateVertices:function(){var u=this._perp,p=this.points,v=this.vertices,m=p.length;if(this.dirty=!1,!(m<1)){for(var g,T=p[0],w=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,b=0;b<m;b++){var E=p[b],A=b*4;b<m-1?g=p[b+1]:g=E,u.x=g.y-T.y,u.y=-(g.x-T.x);var R=u.length();u.x/=R,u.y/=R,u.x*=w,u.y*=w,v[A]=E.x+u.x,v[A+1]=E.y+u.y,v[A+2]=E.x-u.x,v[A+3]=E.y-u.y,T=E}return this}},setDebug:function(u,p){return this.debugGraphic=u,!u&&!p?this.debugCallback=null:p?this.debugCallback=p:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(u,p,v){var m=u.debugGraphic,g=v[0],T=v[1],w=v[2],b=v[3];m.lineBetween(g,T,w,b);for(var E=4;E<p;E+=4){var A=v[E+0],R=v[E+1],I=v[E+2],P=v[E+3];m.lineBetween(g,T,A,R),m.lineBetween(w,b,I,P),m.lineBetween(w,b,A,R),m.lineBetween(A,R,I,P),g=A,T=R,w=I,b=P}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(u){return this._flipX=u,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(u){return this._flipY=u,this.updateUVs()}}});o.exports=d},44598:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(){};o.exports=x},96027:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(10850),i=t(79968);l.register("rope",function(n,h){n===void 0&&(n={});var d=a(n,"key",null),u=a(n,"frame",null),p=a(n,"horizontal",!0),v=r(n,"points",void 0),m=r(n,"colors",void 0),g=r(n,"alphas",void 0),T=new i(this.scene,0,0,d,u,v,p,m,g);return h!==void 0&&(n.add=h),s(this.scene,T,n),T})},31982:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79968),l=t(61286);l.register("rope",function(a,r,i,n,h,d,u,p){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u,p))})},58912:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(49489),a=t(44598),o.exports={renderWebGL:l,renderCanvas:a}},49489:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline,i),u=s(i,n,h).calc,p=i.vertices,v=i.uv,m=i.colors,g=i.alphas,T=i.alpha,w=l.getTintAppendFloatAlpha,b=n.roundPixels,E=p.length,A=Math.floor(E*.5);d.flush(),r.pipelines.preBatch(i);var R=d.setGameObject(i),I=d.vertexViewF32,P=d.vertexViewU32,M=d.vertexCount*d.currentShader.vertexComponentCount-1,F=0,O=i.tintFill;i.dirty&&i.updateVertices();for(var D=i.debugCallback,L=[],z=0;z<E;z+=2){var X=p[z+0],H=p[z+1],J=X*u.a+H*u.c+u.e,G=X*u.b+H*u.d+u.f;b&&(J=Math.round(J),G=Math.round(G)),I[++M]=J,I[++M]=G,I[++M]=v[z+0],I[++M]=v[z+1],I[++M]=R,I[++M]=O,P[++M]=w(m[F],n.alpha*(g[F]*T)),F++,D&&(L[z+0]=J,L[z+1]=G)}D&&D.call(i,i,E,L),d.vertexCount+=A,d.currentBatch.count=d.vertexCount-d.currentBatch.start,r.pipelines.postBatch(i)};o.exports=a},27902:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(72632),i=t(98611),n=t(22440),h=t(24252),d=t(69360),u=new s({Extends:a,Mixins:[l.ComputedSize,l.Depth,l.GetBounds,l.Mask,l.Origin,l.ScrollFactor,l.Transform,l.Visible,h],initialize:function(v,m,g,T,w,b,E,A){g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=128),b===void 0&&(b=128),a.call(this,v,"Shader"),this.blendMode=-1,this.shader;var R=v.sys.renderer;this.renderer=R,this.gl=R.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=R.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=R.width,this._rendererHeight=R.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(g,T),this.setSize(w,b),this.setOrigin(.5,.5),this.setShader(m,E,A)},willRender:function(p){return this.renderToTexture?!0:!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&p.id)},setRenderToTexture:function(p,v){if(v===void 0&&(v=!1),!this.renderToTexture){var m=this.width,g=this.height,T=this.renderer;this.glTexture=T.createTextureFromSource(null,m,g,0),this.glTexture.flipY=v,this.framebuffer=T.createFramebuffer(m,g,this.glTexture,!1),this._rendererWidth=m,this._rendererHeight=g,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),p&&(this.texture=this.scene.sys.textures.addGLTexture(p,this.glTexture,m,g))}return this.shader&&(T.pipelines.clear(),this.load(),this.flush(),T.pipelines.rebind()),this},setShader:function(p,v,m){if(v===void 0&&(v=[]),typeof p=="string"){var g=this.scene.sys.cache.shader;if(!g.has(p))return console.warn("Shader missing: "+p),this;this.shader=g.get(p)}else this.shader=p;var T=this.gl,w=this.renderer;this.program&&T.deleteProgram(this.program);var b=w.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);T.uniformMatrix4fv(T.getUniformLocation(b,"uViewMatrix"),!1,this.viewMatrix),T.uniformMatrix4fv(T.getUniformLocation(b,"uProjectionMatrix"),!1,this.projectionMatrix),T.uniform2f(T.getUniformLocation(b,"uResolution"),this.width,this.height),this.program=b;var E=new Date,A={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[E.getFullYear(),E.getMonth(),E.getDate(),E.getHours()*60*60+E.getMinutes()*60+E.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=i(!0,{},this.shader.uniforms,A):this.uniforms=A;for(var R=0;R<4;R++)v[R]&&this.setSampler2D("iChannel"+R,v[R],R,m);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(p){return this.pointer=p,this},projOrtho:function(p,v,m,g){var T=-1e3,w=1e3,b=1/(p-v),E=1/(m-g),A=1/(T-w),R=this.projectionMatrix;R[0]=-2*b,R[5]=-2*E,R[10]=2*A,R[12]=(p+v)*b,R[13]=(g+m)*E,R[14]=(w+T)*A;var I=this.program,P=this.gl,M=this.renderer;M.setProgram(I),P.uniformMatrix4fv(P.getUniformLocation(I,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=v,this._rendererHeight=m},initUniforms:function(){var p=this.gl,v=this.renderer.glFuncMap,m=this.program;this._textureCount=0;for(var g in this.uniforms){var T=this.uniforms[g],w=T.type,b=v[w];T.uniformLocation=p.getUniformLocation(m,g),w!=="sampler2D"&&(T.glMatrix=b.matrix,T.glValueLength=b.length,T.glFunc=b.func)}},setSampler2DBuffer:function(p,v,m,g,T,w){T===void 0&&(T=0),w===void 0&&(w={});var b=this.uniforms[p];return b.value=v,w.width=m,w.height=g,b.textureData=w,this._textureCount=T,this.initSampler2D(b),this},setSampler2D:function(p,v,m,g){m===void 0&&(m=0);var T=this.scene.sys.textures;if(T.exists(v)){var w=T.getFrame(v);if(w.glTexture&&w.glTexture.isRenderTexture)return this.setSampler2DBuffer(p,w.glTexture,w.width,w.height,m,g);var b=this.uniforms[p],E=w.source;b.textureKey=v,b.source=E.image,b.value=w.glTexture,E.isGLTexture&&(g||(g={}),g.width=E.width,g.height=E.height),g&&(b.textureData=g),this._textureCount=m,this.initSampler2D(b)}return this},setUniform:function(p,v){return n(this.uniforms,p,v),this},getUniform:function(p){return r(this.uniforms,p,null)},setChannel0:function(p,v){return this.setSampler2D("iChannel0",p,0,v)},setChannel1:function(p,v){return this.setSampler2D("iChannel1",p,1,v)},setChannel2:function(p,v){return this.setSampler2D("iChannel2",p,2,v)},setChannel3:function(p,v){return this.setSampler2D("iChannel3",p,3,v)},initSampler2D:function(p){if(p.value){var v=this.gl;v.activeTexture(v.TEXTURE0+this._textureCount),v.bindTexture(v.TEXTURE_2D,p.value);var m=p.textureData;if(m&&!p.value.isRenderTexture){var g=v[r(m,"magFilter","linear").toUpperCase()],T=v[r(m,"minFilter","linear").toUpperCase()],w=v[r(m,"wrapS","repeat").toUpperCase()],b=v[r(m,"wrapT","repeat").toUpperCase()],E=v[r(m,"format","rgba").toUpperCase()];if(m.repeat&&(w=v.REPEAT,b=v.REPEAT),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,!!m.flipY),m.width){var A=r(m,"width",512),R=r(m,"height",2),I=r(m,"border",0);v.texImage2D(v.TEXTURE_2D,0,E,A,R,I,E,v.UNSIGNED_BYTE,null)}else v.texImage2D(v.TEXTURE_2D,0,E,v.RGBA,v.UNSIGNED_BYTE,p.source);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,g),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,T),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,w),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,b)}this.renderer.setProgram(this.program),v.uniform1i(p.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var p=this.gl,v=this.uniforms,m,g,T,w,b,E=0;for(var A in v)m=v[A],T=m.glFunc,g=m.glValueLength,w=m.uniformLocation,b=m.value,b!==null&&(g===1?m.glMatrix?T.call(p,w,m.transpose,b):T.call(p,w,b):g===2?T.call(p,w,b.x,b.y):g===3?T.call(p,w,b.x,b.y,b.z):g===4?T.call(p,w,b.x,b.y,b.z,b.w):m.type==="sampler2D"&&(p.activeTexture(p.TEXTURE0+E),p.bindTexture(p.TEXTURE_2D,b),p.uniform1i(w,E),E++))},load:function(p){var v=this.gl,m=this.width,g=this.height,T=this.renderer,w=this.program,b=this.viewMatrix;if(!this.renderToTexture){var E=-this._displayOriginX,A=-this._displayOriginY;b[0]=p[0],b[1]=p[1],b[4]=p[2],b[5]=p[3],b[8]=p[4],b[9]=p[5],b[12]=b[0]*E+b[4]*A,b[13]=b[1]*E+b[5]*A}v.useProgram(w),v.uniformMatrix4fv(v.getUniformLocation(w,"uViewMatrix"),!1,b),v.uniform2f(v.getUniformLocation(w,"uResolution"),this.width,this.height);var R=this.uniforms,I=R.resolution;I.value.x=m,I.value.y=g,R.time.value=T.game.loop.getDuration();var P=this.pointer;if(P){var M=R.mouse,F=P.x/m,O=1-P.y/g;M.value.x=F.toFixed(2),M.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var p=this.width,v=this.height,m=this.program,g=this.gl,T=this.vertexBuffer,w=this.renderer,b=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(w.setFramebuffer(this.framebuffer),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT)),g.bindBuffer(g.ARRAY_BUFFER,T);var E=g.getAttribLocation(m,"inPosition");E!==-1&&(g.enableVertexAttribArray(E),g.vertexAttribPointer(E,2,g.FLOAT,!1,b,0));var A=this.vertexViewF32;A[3]=v,A[4]=p,A[5]=v,A[8]=p,A[9]=v,A[10]=p;var R=6;g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,R*b)),g.drawArrays(g.TRIANGLES,0,R),this.renderToTexture&&w.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var p=this.gl;p.deleteProgram(this.program),p.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});o.exports=u},10612:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(){};o.exports=x},13908:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(27902);l.register("shader",function(i,n){i===void 0&&(i={});var h=a(i,"key",null),d=a(i,"x",0),u=a(i,"y",0),p=a(i,"width",128),v=a(i,"height",128),m=new r(this.scene,h,d,u,p,v);return n!==void 0&&(i.add=n),s(this.scene,m,i),m})},51979:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27902),l=t(61286);l.register("shader",function(a,r,i,n,h,d,u){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u))})},24252:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(19782),a=t(10612),o.exports={renderWebGL:l,renderCanvas:a}},19782:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n){if(r.shader){if(i.addToRenderList(r),a.pipelines.clear(),r.renderToTexture)r.load(),r.flush();else{var h=s(r,i,n).calc;(a.width!==r._rendererWidth||a.height!==r._rendererHeight)&&r.projOrtho(0,a.width,a.height,0),r.load(h.matrix),r.flush()}a.pipelines.rebind()}};o.exports=l},19543:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i,n,h,d){for(var u=s.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*n),p=i.pathData,v=i.pathIndexes,m=0;m<v.length;m+=3){var g=v[m]*2,T=v[m+1]*2,w=v[m+2]*2,b=p[g+0]-h,E=p[g+1]-d,A=p[T+0]-h,R=p[T+1]-d,I=p[w+0]-h,P=p[w+1]-d,M=r.getX(b,E),F=r.getY(b,E),O=r.getX(A,R),D=r.getY(A,R),L=r.getX(I,P),z=r.getY(I,P);a.batchTri(i,M,F,O,D,L,z,0,0,1,1,u,u,u,2)}};o.exports=l},15608:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=l||s.fillColor,i=a||s.fillAlpha,n=(r&16711680)>>>16,h=(r&65280)>>>8,d=r&255;t.fillStyle="rgba("+n+","+h+","+d+","+i+")"};o.exports=x},17876:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=l||s.strokeColor,i=a||s.strokeAlpha,n=(r&16711680)>>>16,h=(r&65280)>>>8,d=r&255;t.strokeStyle="rgba("+n+","+h+","+d+","+i+")",t.lineWidth=s.lineWidth};o.exports=x},91461:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(88829),i=new s({Extends:a,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Transform,l.Visible],initialize:function(h,d,u){d===void 0&&(d="Shape"),a.call(this,h,d),this.geom=u,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new r,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(n,h){return h===void 0&&(h=1),n===void 0?this.isFilled=!1:(this.fillColor=n,this.fillAlpha=h,this.isFilled=!0),this},setStrokeStyle:function(n,h,d){return d===void 0&&(d=1),n===void 0?this.isStroked=!1:(this.lineWidth=n,this.strokeColor=h,this.strokeAlpha=d,this.isStroked=!0),this},setClosePath:function(n){return this.closePath=n,this},setSize:function(n,h){return this.width=n,this.height=h,this},setDisplaySize:function(n,h){return this.displayWidth=n,this.displayHeight=h,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}}});o.exports=i},50262:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i,n,h){var d=a.strokeTint,u=s.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*i);d.TL=u,d.TR=u,d.BL=u,d.BR=u;var p=r.pathData,v=p.length-1,m=r.lineWidth,g=m/2,T=p[0]-n,w=p[1]-h;r.closePath||(v-=2);for(var b=2;b<v;b+=2){var E=p[b]-n,A=p[b+1]-h;a.batchLine(T,w,E,A,g,g,m,b-2,r.closePath?b===v-1:!1),T=E,w=A}};o.exports=l},28593:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2213),l=t(56694),a=t(75606),r=t(11117),i=t(26673),n=t(83392),h=t(91461),d=new l({Extends:h,Mixins:[s],initialize:function(p,v,m,g,T,w,b,E,A){v===void 0&&(v=0),m===void 0&&(m=0),g===void 0&&(g=128),T===void 0&&(T=0),w===void 0&&(w=360),b===void 0&&(b=!1),h.call(this,p,"Arc",new i(0,0,g)),this._startAngle=T,this._endAngle=w,this._anticlockwise=b,this._iterations=.01,this.setPosition(v,m);var R=this.geom.radius*2;this.setSize(R,R),E!==void 0&&this.setFillStyle(E,A),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(u){this._iterations=u,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(u){this.geom.radius=u;var p=u*2;this.setSize(p,p),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(u){this._startAngle=u,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(u){this._endAngle=u,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(u){this._anticlockwise=u,this.updateData()}},setRadius:function(u){return this.radius=u,this},setIterations:function(u){return u===void 0&&(u=.01),this.iterations=u,this},setStartAngle:function(u,p){return this._startAngle=u,p!==void 0&&(this._anticlockwise=p),this.updateData()},setEndAngle:function(u,p){return this._endAngle=u,p!==void 0&&(this._anticlockwise=p),this.updateData()},updateData:function(){var u=this._iterations,p=u,v=this.geom.radius,m=a(this._startAngle),g=a(this._endAngle),T=this._anticlockwise,w=v,b=v;g-=m,T?g<-n.PI2?g=-n.PI2:g>0&&(g=-n.PI2+g%n.PI2):g>n.PI2?g=n.PI2:g<0&&(g=n.PI2+g%n.PI2);for(var E=[w+Math.cos(m)*v,b+Math.sin(m)*v],A;p<1;)A=g*p+m,E.push(w+Math.cos(A)*v,b+Math.sin(A)*v),p+=u;return A=g+m,E.push(w+Math.cos(A)*v,b+Math.sin(A)*v),E.push(w+Math.cos(m)*v,b+Math.sin(m)*v),this.pathIndexes=r(E),this.pathData=E,this}});o.exports=d},23560:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75606),l=t(15608),a=t(17876),r=t(49584),i=function(n,h,d,u){d.addToRenderList(h);var p=n.currentContext;if(r(n,p,h,d,u)){var v=h.radius;p.beginPath(),p.arc(v-h.originX*(v*2),v-h.originY*(v*2),v,s(h._startAngle),s(h._endAngle),h.anticlockwise),h.closePath&&p.closePath(),h.isFilled&&(l(p,h),p.fill()),h.isStroked&&(a(p,h),p.stroke()),p.restore()}};o.exports=i},10369:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28593),l=t(61286);l.register("arc",function(a,r,i,n,h,d,u,p){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u,p))}),l.register("circle",function(a,r,i,n,h){return this.displayList.add(new s(this.scene,a,r,i,0,360,!1,n,h))})},2213:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(58356),a=t(23560),o.exports={renderWebGL:l,renderCanvas:a}},58356:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(19543),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=s(n,h,d),v=u.calcMatrix.copyFrom(p.calc),m=n._displayOriginX,g=n._displayOriginY,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&l(u,v,n,T,m,g),n.isStroked&&a(u,n,T,m,g),i.pipelines.postBatch(n)};o.exports=r},15220:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(87203),a=t(11117),r=t(74118),i=t(91461),n=new s({Extends:i,Mixins:[l],initialize:function(d,u,p,v,m,g){u===void 0&&(u=0),p===void 0&&(p=0),i.call(this,d,"Curve",v),this._smoothness=32,this._curveBounds=new r,this.closePath=!1,this.setPosition(u,p),m!==void 0&&this.setFillStyle(m,g),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){var h=this._curveBounds,d=this._smoothness;this.geom.getBounds(h,d),this.setSize(h.width,h.height),this.updateDisplayOrigin();for(var u=[],p=this.geom.getPoints(d),v=0;v<p.length;v++)u.push(p[v].x,p[v].y);return u.push(p[0].x,p[0].y),this.pathIndexes=a(u),this.pathData=u,this}});o.exports=n},4024:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX+n._curveBounds.x,v=n._displayOriginY+n._curveBounds.y,m=n.pathData,g=m.length-1,T=m[0]-p,w=m[1]-v;u.beginPath(),u.moveTo(T,w),n.closePath||(g-=2);for(var b=2;b<g;b+=2){var E=m[b]-p,A=m[b+1]-v;u.lineTo(E,A)}n.closePath&&u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},10147:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(15220);s.register("curve",function(a,r,i,n,h){return this.displayList.add(new l(this.scene,a,r,i,n,h))})},87203:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(82958),a=t(4024),o.exports={renderWebGL:l,renderCanvas:a}},82958:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19543),l=t(73329),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=l(n,h,d),v=u.calcMatrix.copyFrom(p.calc),m=n._displayOriginX+n._curveBounds.x,g=n._displayOriginY+n._curveBounds.y,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&s(u,v,n,T,m,g),n.isStroked&&a(u,n,T,m,g),i.pipelines.postBatch(n)};o.exports=r},28591:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(11117),a=t(84171),r=t(95669),i=t(91461),n=new s({Extends:i,Mixins:[a],initialize:function(d,u,p,v,m,g,T){u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=128),m===void 0&&(m=128),i.call(this,d,"Ellipse",new r(v/2,m/2,v,m)),this._smoothness=64,this.setPosition(u,p),this.width=v,this.height=m,g!==void 0&&this.setFillStyle(g,T),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSize:function(h,d){return this.width=h,this.height=d,this.geom.setPosition(h/2,d/2),this.geom.setSize(h,d),this.updateData()},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){for(var h=[],d=this.geom.getPoints(this._smoothness),u=0;u<d.length;u++)h.push(d[u].x,d[u].y);return h.push(d[0].x,d[0].y),this.pathIndexes=l(h),this.pathData=h,this}});o.exports=n},55881:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,v=n._displayOriginY,m=n.pathData,g=m.length-1,T=m[0]-p,w=m[1]-v;u.beginPath(),u.moveTo(T,w),n.closePath||(g-=2);for(var b=2;b<g;b+=2){var E=m[b]-p,A=m[b+1]-v;u.lineTo(E,A)}u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},99869:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28591),l=t(61286);l.register("ellipse",function(a,r,i,n,h,d){return this.displayList.add(new s(this.scene,a,r,i,n,h,d))})},84171:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(17554),a=t(55881),o.exports={renderWebGL:l,renderCanvas:a}},17554:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19543),l=t(73329),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=l(n,h,d),v=u.calcMatrix.copyFrom(p.calc),m=n._displayOriginX,g=n._displayOriginY,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&s(u,v,n,T,m,g),n.isStroked&&a(u,n,T,m,g),i.pipelines.postBatch(n)};o.exports=r},39169:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91461),a=t(88059),r=new s({Extends:l,Mixins:[a],initialize:function(n,h,d,u,p,v,m,g,T,w,b){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=128),p===void 0&&(p=128),v===void 0&&(v=32),m===void 0&&(m=32),l.call(this,n,"Grid",null),this.cellWidth=v,this.cellHeight=m,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(h,d),this.setSize(u,p),this.setFillStyle(g,T),w!==void 0&&this.setOutlineStyle(w,b),this.updateDisplayOrigin()},setFillStyle:function(i,n){return n===void 0&&(n=1),i===void 0?this.showCells=!1:(this.fillColor=i,this.fillAlpha=n,this.showCells=!0),this},setAltFillStyle:function(i,n){return n===void 0&&(n=1),i===void 0?this.showAltCells=!1:(this.altFillColor=i,this.altFillAlpha=n,this.showAltCells=!0),this},setOutlineStyle:function(i,n){return n===void 0&&(n=1),i===void 0?this.showOutline=!1:(this.outlineFillColor=i,this.outlineFillAlpha=n,this.showOutline=!0),this}});o.exports=r},95525:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=-n._displayOriginX,v=-n._displayOriginY,m=h.alpha*n.alpha,g=n.width,T=n.height,w=n.cellWidth,b=n.cellHeight,E=Math.ceil(g/w),A=Math.ceil(T/b),R=w,I=b,P=w-(E*w-g),M=b-(A*b-T),F=n.showCells,O=n.showAltCells,D=n.showOutline,L=0,z=0,X=0,H=0,J=0;if(D&&(R--,I--,P===w&&P--,M===b&&M--),F&&n.fillAlpha>0)for(s(u,n),z=0;z<A;z++)for(O&&(X=z%2),L=0;L<E;L++){if(O&&X){X=0;continue}X++,H=L<E-1?R:P,J=z<A-1?I:M,u.fillRect(p+L*w,v+z*b,H,J)}if(O&&n.altFillAlpha>0)for(s(u,n,n.altFillColor,n.altFillAlpha*m),z=0;z<A;z++)for(O&&(X=z%2),L=0;L<E;L++){if(O&&!X){X=1;continue}X=0,H=L<E-1?R:P,J=z<A-1?I:M,u.fillRect(p+L*w,v+z*b,H,J)}if(D&&n.outlineFillAlpha>0){for(l(u,n,n.outlineFillColor,n.outlineFillAlpha*m),L=1;L<E;L++){var G=L*w;u.beginPath(),u.moveTo(G+p,v),u.lineTo(G+p,T+v),u.stroke()}for(z=1;z<A;z++){var k=z*b;u.beginPath(),u.moveTo(p,k+v),u.lineTo(p+g,k+v),u.stroke()}}u.restore()}};o.exports=r},9326:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(39169);s.register("grid",function(a,r,i,n,h,d,u,p,v,m){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u,p,v,m))})},88059:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(50639),a=t(95525),o.exports={renderWebGL:l,renderCanvas:a}},50639:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline),u=s(i,n,h),p=d.calcMatrix.copyFrom(u.calc);p.translate(-i._displayOriginX,-i._displayOriginY);var v=n.alpha*i.alpha,m=i.width,g=i.height,T=i.cellWidth,w=i.cellHeight,b=Math.ceil(m/T),E=Math.ceil(g/w),A=T,R=w,I=T-(b*T-m),P=w-(E*w-g),M,F,O=i.showCells,D=i.showAltCells,L=i.showOutline,z=0,X=0,H=0,J=0,G=0;if(L&&(A--,R--,I===T&&I--,P===w&&P--),r.pipelines.preBatch(i),O&&i.fillAlpha>0)for(M=d.fillTint,F=l.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*v),M.TL=F,M.TR=F,M.BL=F,M.BR=F,X=0;X<E;X++)for(D&&(H=X%2),z=0;z<b;z++){if(D&&H){H=0;continue}H++,J=z<b-1?A:I,G=X<E-1?R:P,d.batchFillRect(z*T,X*w,J,G)}if(D&&i.altFillAlpha>0)for(M=d.fillTint,F=l.getTintAppendFloatAlpha(i.altFillColor,i.altFillAlpha*v),M.TL=F,M.TR=F,M.BL=F,M.BR=F,X=0;X<E;X++)for(D&&(H=X%2),z=0;z<b;z++){if(D&&!H){H=1;continue}H=0,J=z<b-1?A:I,G=X<E-1?R:P,d.batchFillRect(z*T,X*w,J,G)}if(L&&i.outlineFillAlpha>0){var k=d.strokeTint,N=l.getTintAppendFloatAlpha(i.outlineFillColor,i.outlineFillAlpha*v);for(k.TL=N,k.TR=N,k.BL=N,k.BR=N,z=1;z<b;z++){var B=z*T;d.batchLine(B,0,B,g,1,1,1,0,!1)}for(X=1;X<E;X++){var U=X*w;d.batchLine(0,U,m,U,1,1,1,0,!1)}}r.pipelines.postBatch(i)};o.exports=a},4415:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72296),l=t(56694),a=t(91461),r=new l({Extends:a,Mixins:[s],initialize:function(n,h,d,u,p,v,m,g){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=48),p===void 0&&(p=32),v===void 0&&(v=15658734),m===void 0&&(m=10066329),g===void 0&&(g=13421772),a.call(this,n,"IsoBox",null),this.projection=4,this.fillTop=v,this.fillLeft=m,this.fillRight=g,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(h,d),this.setSize(u,p),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setFaces:function(i,n,h){return i===void 0&&(i=!0),n===void 0&&(n=!0),h===void 0&&(h=!0),this.showTop=i,this.showLeft=n,this.showRight=h,this},setFillStyle:function(i,n,h){return this.fillTop=i,this.fillLeft=n,this.fillRight=h,this.isFilled=!0,this}});o.exports=r},32884:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(49584),a=function(r,i,n,h){n.addToRenderList(i);var d=r.currentContext;if(l(r,d,i,n,h)&&i.isFilled){var u=i.width,p=i.height,v=u/2,m=u/i.projection;i.showTop&&(s(d,i,i.fillTop),d.beginPath(),d.moveTo(-v,-p),d.lineTo(0,-m-p),d.lineTo(v,-p),d.lineTo(v,-1),d.lineTo(0,m-1),d.lineTo(-v,-1),d.lineTo(-v,-p),d.fill()),i.showLeft&&(s(d,i,i.fillLeft),d.beginPath(),d.moveTo(-v,0),d.lineTo(0,m),d.lineTo(0,m-p),d.lineTo(-v,-p),d.lineTo(-v,0),d.fill()),i.showRight&&(s(d,i,i.fillRight),d.beginPath(),d.moveTo(v,0),d.lineTo(0,m),d.lineTo(0,m-p),d.lineTo(v,-p),d.lineTo(v,0),d.fill()),d.restore()}};o.exports=a},88154:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(4415);s.register("isobox",function(a,r,i,n,h,d,u){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u))})},72296:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(33101),a=t(32884),o.exports={renderWebGL:l,renderCanvas:a}},33101:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline),u=s(i,n,h),p=d.calcMatrix.copyFrom(u.calc),v=i.width,m=i.height,g=v/2,T=v/i.projection,w=n.alpha*i.alpha;if(i.isFilled){var b,E,A,R,I,P,M,F,O;r.pipelines.preBatch(i),i.showTop&&(b=l.getTintAppendFloatAlpha(i.fillTop,w),E=p.getX(-g,-m),A=p.getY(-g,-m),R=p.getX(0,-T-m),I=p.getY(0,-T-m),P=p.getX(g,-m),M=p.getY(g,-m),F=p.getX(0,T-m),O=p.getY(0,T-m),d.batchQuad(i,E,A,R,I,P,M,F,O,0,0,1,1,b,b,b,b,2)),i.showLeft&&(b=l.getTintAppendFloatAlpha(i.fillLeft,w),E=p.getX(-g,0),A=p.getY(-g,0),R=p.getX(0,T),I=p.getY(0,T),P=p.getX(0,T-m),M=p.getY(0,T-m),F=p.getX(-g,-m),O=p.getY(-g,-m),d.batchQuad(i,E,A,R,I,P,M,F,O,0,0,1,1,b,b,b,b,2)),i.showRight&&(b=l.getTintAppendFloatAlpha(i.fillRight,w),E=p.getX(g,0),A=p.getY(g,0),R=p.getX(0,T),I=p.getY(0,T),P=p.getX(0,T-m),M=p.getY(0,T-m),F=p.getX(g,-m),O=p.getY(g,-m),d.batchQuad(i,E,A,R,I,P,M,F,O,0,0,1,1,b,b,b,b,2)),r.pipelines.postBatch(i)}};o.exports=a},65159:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93387),a=t(91461),r=new s({Extends:a,Mixins:[l],initialize:function(n,h,d,u,p,v,m,g,T){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=48),p===void 0&&(p=32),v===void 0&&(v=!1),m===void 0&&(m=15658734),g===void 0&&(g=10066329),T===void 0&&(T=13421772),a.call(this,n,"IsoTriangle",null),this.projection=4,this.fillTop=m,this.fillLeft=g,this.fillRight=T,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=v,this.isFilled=!0,this.setPosition(h,d),this.setSize(u,p),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setReversed:function(i){return this.isReversed=i,this},setFaces:function(i,n,h){return i===void 0&&(i=!0),n===void 0&&(n=!0),h===void 0&&(h=!0),this.showTop=i,this.showLeft=n,this.showRight=h,this},setFillStyle:function(i,n,h){return this.fillTop=i,this.fillLeft=n,this.fillRight=h,this.isFilled=!0,this}});o.exports=r},9923:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(49584),a=function(r,i,n,h){n.addToRenderList(i);var d=r.currentContext;if(l(r,d,i,n,h)&&i.isFilled){var u=i.width,p=i.height,v=u/2,m=u/i.projection,g=i.isReversed;i.showTop&&g&&(s(d,i,i.fillTop),d.beginPath(),d.moveTo(-v,-p),d.lineTo(0,-m-p),d.lineTo(v,-p),d.lineTo(0,m-p),d.fill()),i.showLeft&&(s(d,i,i.fillLeft),d.beginPath(),g?(d.moveTo(-v,-p),d.lineTo(0,m),d.lineTo(0,m-p)):(d.moveTo(-v,0),d.lineTo(0,m),d.lineTo(0,m-p)),d.fill()),i.showRight&&(s(d,i,i.fillRight),d.beginPath(),g?(d.moveTo(v,-p),d.lineTo(0,m),d.lineTo(0,m-p)):(d.moveTo(v,0),d.lineTo(0,m),d.lineTo(0,m-p)),d.fill()),d.restore()}};o.exports=a},67765:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(65159);s.register("isotriangle",function(a,r,i,n,h,d,u,p){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u,p))})},93387:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(54946),a=t(9923),o.exports={renderWebGL:l,renderCanvas:a}},54946:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline),u=s(i,n,h),p=d.calcMatrix.copyFrom(u.calc),v=i.width,m=i.height,g=v/2,T=v/i.projection,w=i.isReversed,b=n.alpha*i.alpha;if(i.isFilled){r.pipelines.preBatch(i);var E,A,R,I,P,M,F;if(i.showTop&&w){E=l.getTintAppendFloatAlpha(i.fillTop,b),A=p.getX(-g,-m),R=p.getY(-g,-m),I=p.getX(0,-T-m),P=p.getY(0,-T-m),M=p.getX(g,-m),F=p.getY(g,-m);var O=p.getX(0,T-m),D=p.getY(0,T-m);d.batchQuad(i,A,R,I,P,M,F,O,D,0,0,1,1,E,E,E,E,2)}i.showLeft&&(E=l.getTintAppendFloatAlpha(i.fillLeft,b),w?(A=p.getX(-g,-m),R=p.getY(-g,-m),I=p.getX(0,T),P=p.getY(0,T),M=p.getX(0,T-m),F=p.getY(0,T-m)):(A=p.getX(-g,0),R=p.getY(-g,0),I=p.getX(0,T),P=p.getY(0,T),M=p.getX(0,T-m),F=p.getY(0,T-m)),d.batchTri(i,A,R,I,P,M,F,0,0,1,1,E,E,E,2)),i.showRight&&(E=l.getTintAppendFloatAlpha(i.fillRight,b),w?(A=p.getX(g,-m),R=p.getY(g,-m),I=p.getX(0,T),P=p.getY(0,T),M=p.getX(0,T-m),F=p.getY(0,T-m)):(A=p.getX(g,0),R=p.getY(g,0),I=p.getX(0,T),P=p.getY(0,T),M=p.getX(0,T-m),F=p.getY(0,T-m)),d.batchTri(i,A,R,I,P,M,F,0,0,1,1,E,E,E,2)),r.pipelines.postBatch(i)}};o.exports=a},579:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91461),a=t(88829),r=t(52660),i=new s({Extends:l,Mixins:[r],initialize:function(h,d,u,p,v,m,g,T,w){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=128),g===void 0&&(g=0),l.call(this,h,"Line",new a(p,v,m,g));var b=Math.max(1,this.geom.right-this.geom.left),E=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(d,u),this.setSize(b,E),T!==void 0&&this.setStrokeStyle(1,T,w),this.updateDisplayOrigin()},setLineWidth:function(n,h){return h===void 0&&(h=n),this._startWidth=n,this._endWidth=h,this.lineWidth=n,this},setTo:function(n,h,d,u){return this.geom.setTo(n,h,d,u),this}});o.exports=i},52044:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17876),l=t(49584),a=function(r,i,n,h){n.addToRenderList(i);var d=r.currentContext;if(l(r,d,i,n,h)){var u=i._displayOriginX,p=i._displayOriginY;i.isStroked&&(s(d,i),d.beginPath(),d.moveTo(i.geom.x1-u,i.geom.y1-p),d.lineTo(i.geom.x2-u,i.geom.y2-p),d.stroke()),d.restore()}};o.exports=a},85665:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(579);s.register("line",function(a,r,i,n,h,d,u,p){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u,p))})},52660:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(46952),a=t(52044),o.exports={renderWebGL:l,renderCanvas:a}},46952:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline),u=s(i,n,h);d.calcMatrix.copyFrom(u.calc);var p=i._displayOriginX,v=i._displayOriginY,m=n.alpha*i.alpha;if(r.pipelines.preBatch(i),i.isStroked){var g=d.strokeTint,T=l.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*m);g.TL=T,g.TR=T,g.BL=T,g.BR=T,d.batchLine(i.geom.x1-p,i.geom.y1-v,i.geom.x2-p,i.geom.y2-v,i._startWidth/2,i._endWidth/2,1,0,!1,u.sprite,u.camera)}r.pipelines.postBatch(i)};o.exports=a},91249:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70573),l=t(56694),a=t(11117),r=t(14045),i=t(8580),n=t(91461),h=t(18974),d=new l({Extends:n,Mixins:[s],initialize:function(p,v,m,g,T,w){v===void 0&&(v=0),m===void 0&&(m=0),n.call(this,p,"Polygon",new i(g));var b=r(this.geom);this.setPosition(v,m),this.setSize(b.width,b.height),T!==void 0&&this.setFillStyle(T,w),this.updateDisplayOrigin(),this.updateData()},smooth:function(u){u===void 0&&(u=1);for(var p=0;p<u;p++)h(this.geom);return this.updateData()},setTo:function(u){this.geom.setTo(u);var p=r(this.geom);return this.setSize(p.width,p.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var u=[],p=this.geom.points,v=0;v<p.length;v++)u.push(p[v].x,p[v].y);return u.push(p[0].x,p[0].y),this.pathIndexes=a(u),this.pathData=u,this}});o.exports=d},40834:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,v=n._displayOriginY,m=n.pathData,g=m.length-1,T=m[0]-p,w=m[1]-v;u.beginPath(),u.moveTo(T,w),n.closePath||(g-=2);for(var b=2;b<g;b+=2){var E=m[b]-p,A=m[b+1]-v;u.lineTo(E,A)}n.closePath&&u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},88203:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(91249);s.register("polygon",function(a,r,i,n,h){return this.displayList.add(new l(this.scene,a,r,i,n,h))})},70573:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(72841),a=t(40834),o.exports={renderWebGL:l,renderCanvas:a}},72841:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19543),l=t(73329),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=l(n,h,d),v=u.calcMatrix.copyFrom(p.calc),m=n._displayOriginX,g=n._displayOriginY,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&s(u,v,n,T,m,g),n.isStroked&&a(u,n,T,m,g),i.pipelines.postBatch(n)};o.exports=r},517:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(74118),a=t(91461),r=t(37673),i=new s({Extends:a,Mixins:[r],initialize:function(h,d,u,p,v,m,g){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=128),v===void 0&&(v=128),a.call(this,h,"Rectangle",new l(0,0,p,v)),this.setPosition(d,u),this.setSize(p,v),m!==void 0&&this.setFillStyle(m,g),this.updateDisplayOrigin(),this.updateData()},setSize:function(n,h){this.width=n,this.height=h,this.geom.setSize(n,h),this.updateData(),this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=n,d.hitArea.height=h),this},updateData:function(){var n=[],h=this.geom,d=this._tempLine;return h.getLineA(d),n.push(d.x1,d.y1,d.x2,d.y2),h.getLineB(d),n.push(d.x2,d.y2),h.getLineC(d),n.push(d.x2,d.y2),h.getLineD(d),n.push(d.x2,d.y2),this.pathData=n,this}});o.exports=i},4091:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,v=n._displayOriginY;n.isFilled&&(s(u,n),u.fillRect(-p,-v,n.width,n.height)),n.isStroked&&(l(u,n),u.beginPath(),u.rect(-p,-v,n.width,n.height),u.stroke()),u.restore()}};o.exports=r},94355:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(517);s.register("rectangle",function(a,r,i,n,h,d){return this.displayList.add(new l(this.scene,a,r,i,n,h,d))})},37673:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(43532),a=t(4091),o.exports={renderWebGL:l,renderCanvas:a}},43532:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(50262),a=t(75512),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=s(n,h,d);u.calcMatrix.copyFrom(p.calc);var v=n._displayOriginX,m=n._displayOriginY,g=h.alpha*n.alpha;if(i.pipelines.preBatch(n),n.isFilled){var T=u.fillTint,w=a.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*g);T.TL=w,T.TR=w,T.BL=w,T.BR=w,u.batchFillRect(-v,-m,n.width,n.height)}n.isStroked&&l(u,n,g,v,m),i.pipelines.postBatch(n)};o.exports=r},77843:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87956),l=t(56694),a=t(11117),r=t(91461),i=new l({Extends:r,Mixins:[s],initialize:function(h,d,u,p,v,m,g,T){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=5),v===void 0&&(v=32),m===void 0&&(m=64),r.call(this,h,"Star",null),this._points=p,this._innerRadius=v,this._outerRadius=m,this.setPosition(d,u),this.setSize(m*2,m*2),g!==void 0&&this.setFillStyle(g,T),this.updateDisplayOrigin(),this.updateData()},setPoints:function(n){return this._points=n,this.updateData()},setInnerRadius:function(n){return this._innerRadius=n,this.updateData()},setOuterRadius:function(n){return this._outerRadius=n,this.updateData()},points:{get:function(){return this._points},set:function(n){this._points=n,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(n){this._innerRadius=n,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(n){this._outerRadius=n,this.updateData()}},updateData:function(){var n=[],h=this._points,d=this._innerRadius,u=this._outerRadius,p=Math.PI/2*3,v=Math.PI/h,m=u,g=u;n.push(m,g+-u);for(var T=0;T<h;T++)n.push(m+Math.cos(p)*u,g+Math.sin(p)*u),p+=v,n.push(m+Math.cos(p)*d,g+Math.sin(p)*d),p+=v;return n.push(m,g+-u),this.pathIndexes=a(n),this.pathData=n,this}});o.exports=i},11401:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,v=n._displayOriginY,m=n.pathData,g=m.length-1,T=m[0]-p,w=m[1]-v;u.beginPath(),u.moveTo(T,w),n.closePath||(g-=2);for(var b=2;b<g;b+=2){var E=m[b]-p,A=m[b+1]-v;u.lineTo(E,A)}u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},23962:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77843),l=t(61286);l.register("star",function(a,r,i,n,h,d,u){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u))})},87956:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(12037),a=t(11401),o.exports={renderWebGL:l,renderCanvas:a}},12037:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19543),l=t(73329),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=l(n,h,d),v=u.calcMatrix.copyFrom(p.calc),m=n._displayOriginX,g=n._displayOriginY,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&s(u,v,n,T,m,g),n.isStroked&&a(u,n,T,m,g),i.pipelines.postBatch(n)};o.exports=r},21873:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91461),a=t(66349),r=t(70498),i=new s({Extends:l,Mixins:[r],initialize:function(h,d,u,p,v,m,g,T,w,b,E){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=128),m===void 0&&(m=64),g===void 0&&(g=0),T===void 0&&(T=128),w===void 0&&(w=128),l.call(this,h,"Triangle",new a(p,v,m,g,T,w));var A=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(d,u),this.setSize(A,R),b!==void 0&&this.setFillStyle(b,E),this.updateDisplayOrigin(),this.updateData()},setTo:function(n,h,d,u,p,v){return this.geom.setTo(n,h,d,u,p,v),this.updateData()},updateData:function(){var n=[],h=this.geom,d=this._tempLine;return h.getLineA(d),n.push(d.x1,d.y1,d.x2,d.y2),h.getLineB(d),n.push(d.x2,d.y2),h.getLineC(d),n.push(d.x2,d.y2),this.pathData=n,this}});o.exports=i},60213:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,v=n._displayOriginY,m=n.geom.x1-p,g=n.geom.y1-v,T=n.geom.x2-p,w=n.geom.y2-v,b=n.geom.x3-p,E=n.geom.y3-v;u.beginPath(),u.moveTo(m,g),u.lineTo(T,w),u.lineTo(b,E),u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},79296:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(21873);s.register("triangle",function(a,r,i,n,h,d,u,p,v,m){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u,p,v,m))})},70498:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(72291),a=t(60213),o.exports={renderWebGL:l,renderCanvas:a}},72291:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(50262),a=t(75512),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=s(n,h,d);u.calcMatrix.copyFrom(p.calc);var v=n._displayOriginX,m=n._displayOriginY,g=h.alpha*n.alpha;if(i.pipelines.preBatch(n),n.isFilled){var T=u.fillTint,w=a.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*g);T.TL=w,T.TR=w,T.BL=w,T.BR=w;var b=n.geom.x1-v,E=n.geom.y1-m,A=n.geom.x2-v,R=n.geom.y2-m,I=n.geom.x3-v,P=n.geom.y3-m;u.batchFillTriangle(b,E,A,R,I,P,p.sprite,p.camera)}n.isStroked&&l(u,n,g,v,m),i.pipelines.postBatch(n)};o.exports=r},13747:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(56694),a=t(64937),r=t(89980),i=t(20791),n=new l({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,i],initialize:function(d,u,p,v,m){r.call(this,d,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(v,m),this.setPosition(u,p),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,d){this.anims.update(h,d)},play:function(h,d){return this.anims.play(h,d)},playReverse:function(h,d){return this.anims.playReverse(h,d)},playAfterDelay:function(h,d){return this.anims.playAfterDelay(h,d)},playAfterRepeat:function(h,d){return this.anims.playAfterRepeat(h,d)},chain:function(h){return this.anims.chain(h)},stop:function(){return this.anims.stop()},stopAfterDelay:function(h){return this.anims.stopAfterDelay(h)},stopAfterRepeat:function(h){return this.anims.stopAfterRepeat(h)},stopOnFrame:function(h){return this.anims.stopOnFrame(h)},toJSON:function(){return a.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});o.exports=n},27573:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l.addToRenderList(s),t.batchSprite(s,s.frame,l,a)};o.exports=x},89219:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(32291),a=t(99325),r=t(20494),i=t(13747);a.register("sprite",function(n,h){n===void 0&&(n={});var d=r(n,"key",null),u=r(n,"frame",null),p=new i(this.scene,0,0,d,u);return h!==void 0&&(n.add=h),s(this.scene,p,n),l(p,n),p})},66135:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(13747);s.register("sprite",function(a,r,i,n){return this.displayList.add(new l(this.scene,a,r,i,n))})},20791:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(21034),a=t(27573),o.exports={renderWebGL:l,renderCanvas:a}},21034:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l.addToRenderList(s),s.pipeline.batchSprite(s,l,a)};o.exports=x},32979:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=t.canvas,r=t.context,i=t.style,n=[],h=0,d=l.length;i.maxLines>0&&i.maxLines<l.length&&(d=i.maxLines),i.syncFont(a,r);for(var u=0;u<d;u++){var p=i.strokeThickness;p+=r.measureText(l[u]).width,l[u].length>1&&(p+=t.letterSpacing*(l[u].length-1)),i.wordWrap&&(p-=r.measureText(" ").width),n[u]=Math.ceil(p),h=Math.max(h,n[u])}var v=s.fontSize+i.strokeThickness,m=v*d,g=t.lineSpacing;return d>1&&(m+=g*(d-1)),{width:h,height:m,lines:d,lineWidths:n,lineSpacing:g,lineHeight:v}};o.exports=x},27030:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=function(a){var r=s.create(this),i=r.getContext("2d",{willReadFrequently:!0});a.syncFont(r,i);var n=i.measureText(a.testString);if("actualBoundingBoxAscent"in n){var h=n.actualBoundingBoxAscent,d=n.actualBoundingBoxDescent;return s.remove(r),{ascent:h,descent:d,fontSize:h+d}}var u=Math.ceil(n.width*a.baselineX),p=u,v=2*p;p=p*a.baselineY|0,r.width=u,r.height=v,i.fillStyle="#f00",i.fillRect(0,0,u,v),i.font=a._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a.testString,0,p);var m={ascent:0,descent:0,fontSize:0},g=i.getImageData(0,0,u,v);if(!g)return m.ascent=p,m.descent=p+6,m.fontSize=m.ascent+m.descent,s.remove(r),m;var T=g.data,w=T.length,b=u*4,E,A,R=0,I=!1;for(E=0;E<p;E++){for(A=0;A<b;A+=4)if(T[R+A]!==255){I=!0;break}if(!I)R+=b;else break}for(m.ascent=p-E,R=w-b,I=!1,E=v;E>p;E--){for(A=0;A<b;A+=4)if(T[R+A]!==255){I=!0;break}if(!I)R-=b;else break}return m.descent=E-p,m.fontSize=m.ascent+m.descent,s.remove(r),m};o.exports=l},76555:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99584),l=t(61068),a=t(56694),r=t(64937),i=t(89980),n=t(32979),h=t(10850),d=t(55638),u=t(80032),p=t(74744),v=new a({Extends:i,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,u],initialize:function(g,T,w,b,E){T===void 0&&(T=0),w===void 0&&(w=0),i.call(this,g,"Text"),this.renderer=g.sys.renderer,this.setPosition(T,w),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=l.create(this),this.context,this.style=new p(this,E),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=g.sys.textures.addCanvas(null,this.canvas,!0),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(b),E&&E.padding&&this.setPadding(E.padding),E&&E.lineSpacing&&this.setLineSpacing(E.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var g=this.style;if(g.wordWrapCallback){var T=g.wordWrapCallback.call(g.wordWrapCallbackScope,m,this);return Array.isArray(T)&&(T=T.join(`
`)),T}else return g.wordWrapWidth?g.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,g,T){for(var w="",b=m.replace(/ +/gi," ").split(this.splitRegExp),E=b.length,A=0;A<E;A++){var R=b[A],I="";R=R.replace(/^ *|\s*$/gi,"");var P=g.measureText(R).width;if(P<T){w+=R+`
`;continue}for(var M=T,F=R.split(" "),O=0;O<F.length;O++){var D=F[O],L=D+" ",z=g.measureText(L).width;if(z>M){if(O===0){for(var X=L;X.length&&(X=X.slice(0,-1),z=g.measureText(X).width,!(z<=M)););if(!X.length)throw new Error("wordWrapWidth < a single character");var H=D.substr(X.length);F[O]=H,I+=X}var J=F[O].length?O:O+1,G=F.slice(J).join(" ").replace(/[ \n]*$/gi,"");b.splice(A+1,0,G),E=b.length;break}else I+=L,M-=z}w+=I.replace(/[ \n]*$/gi,"")+`
`}return w=w.replace(/[\s|\n]*$/gi,""),w},basicWordWrap:function(m,g,T){for(var w="",b=m.split(this.splitRegExp),E=b.length-1,A=g.measureText(" ").width,R=0;R<=E;R++){for(var I=T,P=b[R].split(" "),M=P.length-1,F=0;F<=M;F++){var O=P[F],D=g.measureText(O).width,L=D;F<M&&(L+=A),L>I&&F>0&&(w+=`
`,I=T),w+=O,F<M?(w+=" ",I-=L):I-=D}R<E&&(w+=`
`)}return w},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var g=this.runWordWrap(m);return g.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},appendText:function(m,g){g===void 0&&(g=!0),!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m=m.toString();var T=this._text.concat(g?`
`+m:m);return T!==this._text&&(this._text=T,this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,g){return this.style.setFixedSize(m,g)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,g){return this.style.setStroke(m,g)},setShadow:function(m,g,T,w,b,E){return this.style.setShadow(m,g,T,w,b,E)},setShadowOffset:function(m,g){return this.style.setShadowOffset(m,g)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,g){return this.style.setWordWrapWidth(m,g)},setWordWrapCallback:function(m,g){return this.style.setWordWrapCallback(m,g)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setLetterSpacing:function(m){return this.letterSpacing=m,this.updateText()},setPadding:function(m,g,T,w){if(typeof m=="object"){var b=m,E=h(b,"x",null);E!==null?(m=E,T=E):(m=h(b,"left",0),T=h(b,"right",m));var A=h(b,"y",null);A!==null?(g=A,w=A):(g=h(b,"top",0),w=h(b,"bottom",g))}else m===void 0&&(m=0),g===void 0&&(g=m),T===void 0&&(T=m),w===void 0&&(w=g);return this.padding.left=m,this.padding.top=g,this.padding.right=T,this.padding.bottom=w,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},setRTL:function(m){m===void 0&&(m=!0);var g=this.style;return g.rtl===m?this:(g.rtl=m,m?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),g.align==="left"?g.align="right":g.align==="right"&&(g.align="left"),this)},updateText:function(){var m=this.canvas,g=this.context,T=this.style,w=T.resolution,b=T.metrics;T.syncFont(m,g);var E=this._text;(T.wordWrapWidth||T.wordWrapCallback)&&(E=this.runWordWrap(this._text));var A=E.split(this.splitRegExp),R=n(this,b,A),I=this.padding,P;T.fixedWidth===0?(this.width=R.width+I.left+I.right,P=R.width):(this.width=T.fixedWidth,P=this.width-I.left-I.right,P<R.width&&(P=R.width)),T.fixedHeight===0?this.height=R.height+I.top+I.bottom:this.height=T.fixedHeight;var M=this.width,F=this.height;this.updateDisplayOrigin(),M*=w,F*=w,M=Math.max(M,1),F=Math.max(F,1),m.width!==M||m.height!==F?(m.width=M,m.height=F,this.frame.setSize(M,F),T.syncFont(m,g),T.rtl&&(g.direction="rtl")):g.clearRect(0,0,M,F),g.save(),g.scale(w,w),T.backgroundColor&&(g.fillStyle=T.backgroundColor,g.fillRect(0,0,M,F)),T.syncStyle(m,g),g.translate(I.left,I.top);for(var O,D,L=0;L<R.lines;L++){if(O=T.strokeThickness/2,D=T.strokeThickness/2+L*R.lineHeight+b.ascent,L>0&&(D+=R.lineSpacing*L),T.rtl)O=M-O-I.left-I.right;else if(T.align==="right")O+=P-R.lineWidths[L];else if(T.align==="center")O+=(P-R.lineWidths[L])/2;else if(T.align==="justify"){var z=.85;if(R.lineWidths[L]/R.width>=z){var X=R.width-R.lineWidths[L],H=g.measureText(" ").width,J=A[L].trim(),G=J.split(" ");X+=(A[L].length-J.length)*H;for(var k=Math.floor(X/H),N=0;k>0;)G[N]+=" ",N=(N+1)%(G.length-1||1),--k;A[L]=G.join(" ")}}if(this.autoRound&&(O=Math.round(O),D=Math.round(D)),T.strokeThickness&&(T.syncShadow(g,T.shadowStroke),g.strokeText(A[L],O,D)),T.color){T.syncShadow(g,T.shadowFill);var B=this.letterSpacing;if(B!==0)for(var U=0,W=A[L].split(""),K=0;K<W.length;K++)g.fillText(W[K],O+U,D),U+=g.measureText(W[K]).width+B;else g.fillText(A[L],O,D)}}g.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture);var q=this.input;return q&&!q.customHitArea&&(q.hitArea.width=this.width,q.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=r.ToJSON(this),g={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=g,m},preDestroy:function(){d(this.canvas),l.remove(this.canvas),this.texture.destroy()}});o.exports=v},71649:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){s.width===0||s.height===0||(l.addToRenderList(s),t.batchSprite(s,s.frame,l,a))};o.exports=x},75397:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(76555);l.register("text",function(i,n){i===void 0&&(i={});var h=a(i,"text",""),d=a(i,"style",null),u=a(i,"padding",null);u!==null&&(d.padding=u);var p=new r(this.scene,0,0,h,d);return n!==void 0&&(i.add=n),s(this.scene,p,i),p.autoRound=a(i,"autoRound",!0),p.resolution=a(i,"resolution",1),p})},94627:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(76555),l=t(61286);l.register("text",function(a,r,i,n){return this.displayList.add(new s(this.scene,a,r,i,n))})},80032:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(76128),a=t(71649),o.exports={renderWebGL:l,renderCanvas:a}},74744:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(20494),a=t(10850),r=t(27030),i={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new s({initialize:function(d,u){this.parent=d,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(u,!1,!0)},setStyle:function(h,d,u){d===void 0&&(d=!0),u===void 0&&(u=!1),h&&h.hasOwnProperty("fontSize")&&typeof h.fontSize=="number"&&(h.fontSize=h.fontSize.toString()+"px");for(var p in i){var v=u?i[p][1]:this[p];p==="wordWrapCallback"||p==="wordWrapCallbackScope"?this[p]=a(h,i[p][0],v):this[p]=l(h,i[p][0],v)}var m=a(h,"font",null);m!==null&&this.setFont(m,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var g=a(h,"fill",null);g!==null&&(this.color=g);var T=a(h,"metrics",!1);return T?this.metrics={ascent:a(T,"ascent",0),descent:a(T,"descent",0),fontSize:a(T,"fontSize",0)}:(d||!this.metrics)&&(this.metrics=r(this)),d?this.parent.updateText():this.parent},syncFont:function(h,d){d.font=this._font},syncStyle:function(h,d){d.textBaseline="alphabetic",d.fillStyle=this.color,d.strokeStyle=this.stroke,d.lineWidth=this.strokeThickness,d.lineCap="round",d.lineJoin="round"},syncShadow:function(h,d){d?(h.shadowOffsetX=this.shadowOffsetX,h.shadowOffsetY=this.shadowOffsetY,h.shadowColor=this.shadowColor,h.shadowBlur=this.shadowBlur):(h.shadowOffsetX=0,h.shadowOffsetY=0,h.shadowColor=0,h.shadowBlur=0)},update:function(h){return h&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=r(this)),this.parent.updateText()},setFont:function(h,d){d===void 0&&(d=!0);var u=h,p="",v="";if(typeof h!="string")u=a(h,"fontFamily","Courier"),p=a(h,"fontSize","16px"),v=a(h,"fontStyle","");else{var m=h.split(" "),g=0;v=m.length>2?m[g++]:"",p=m[g++]||"16px",u=m[g++]||"Courier"}return(u!==this.fontFamily||p!==this.fontSize||v!==this.fontStyle)&&(this.fontFamily=u,this.fontSize=p,this.fontStyle=v,d&&this.update(!0)),this.parent},setFontFamily:function(h){return this.fontFamily!==h&&(this.fontFamily=h,this.update(!0)),this.parent},setFontStyle:function(h){return this.fontStyle!==h&&(this.fontStyle=h,this.update(!0)),this.parent},setFontSize:function(h){return typeof h=="number"&&(h=h.toString()+"px"),this.fontSize!==h&&(this.fontSize=h,this.update(!0)),this.parent},setTestString:function(h){return this.testString=h,this.update(!0)},setFixedSize:function(h,d){return this.fixedWidth=h,this.fixedHeight=d,h&&(this.parent.width=h),d&&(this.parent.height=d),this.update(!1)},setBackgroundColor:function(h){return this.backgroundColor=h,this.update(!1)},setFill:function(h){return this.color=h,this.update(!1)},setColor:function(h){return this.color=h,this.update(!1)},setResolution:function(h){return this.resolution=h,this.update(!1)},setStroke:function(h,d){return d===void 0&&(d=this.strokeThickness),h===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==h||this.strokeThickness!==d)&&(this.stroke=h,this.strokeThickness=d,this.update(!0)),this.parent},setShadow:function(h,d,u,p,v,m){return h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u="#000"),p===void 0&&(p=0),v===void 0&&(v=!1),m===void 0&&(m=!0),this.shadowOffsetX=h,this.shadowOffsetY=d,this.shadowColor=u,this.shadowBlur=p,this.shadowStroke=v,this.shadowFill=m,this.update(!1)},setShadowOffset:function(h,d){return h===void 0&&(h=0),d===void 0&&(d=h),this.shadowOffsetX=h,this.shadowOffsetY=d,this.update(!1)},setShadowColor:function(h){return h===void 0&&(h="#000"),this.shadowColor=h,this.update(!1)},setShadowBlur:function(h){return h===void 0&&(h=0),this.shadowBlur=h,this.update(!1)},setShadowStroke:function(h){return this.shadowStroke=h,this.update(!1)},setShadowFill:function(h){return this.shadowFill=h,this.update(!1)},setWordWrapWidth:function(h,d){return d===void 0&&(d=!1),this.wordWrapWidth=h,this.wordWrapUseAdvanced=d,this.update(!1)},setWordWrapCallback:function(h,d){return d===void 0&&(d=null),this.wordWrapCallback=h,this.wordWrapCallbackScope=d,this.update(!1)},setAlign:function(h){return h===void 0&&(h="left"),this.align=h,this.update(!1)},setMaxLines:function(h){return h===void 0&&(h=0),this.maxLines=h,this.update(!1)},getTextMetrics:function(){var h=this.metrics;return{ascent:h.ascent,descent:h.descent,fontSize:h.fontSize}},toJSON:function(){var h={};for(var d in i)h[d]=this[d];return h.metrics=this.getTextMetrics(),h},destroy:function(){this.parent=void 0}});o.exports=n},76128:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i,n){if(!(r.width===0||r.height===0)){i.addToRenderList(r);var h=r.frame,d=h.width,u=h.height,p=s.getTintAppendFloatAlpha,v=a.pipelines.set(r.pipeline,r),m=v.setTexture2D(h.glTexture,r);v.batchTexture(r,h.glTexture,d,u,r.x,r.y,d/r.style.resolution,u/r.style.resolution,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.displayOriginX,r.displayOriginY,0,0,d,u,p(r.tintTopLeft,i.alpha*r._alphaTL),p(r.tintTopRight,i.alpha*r._alphaTR),p(r.tintBottomLeft,i.alpha*r._alphaBL),p(r.tintBottomRight,i.alpha*r._alphaBR),r.tintFill,0,0,i,n,!1,m)}};o.exports=l},35856:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(56694),a=t(64937),r=t(89980),i=t(3504),n=t(8213),h=t(9271),d=t(93736),u=8,p=new l({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,h],initialize:function(m,g,T,w,b,E,A){var R=m.sys.renderer;r.call(this,m,"TileSprite");var I=m.sys.textures.get(E),P=I.get(A);P.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),I=m.sys.textures.get("__MISSING"),P=I.get()),I.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),I=m.sys.textures.get("__MISSING"),P=I.get()),!w||!b?(w=P.width,b=P.height):(w=Math.floor(w),b=Math.floor(b)),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=R,this.canvas=s.create(this,w,b),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=I,this.displayFrame=P,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=i(P.width),this.potHeight=i(P.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(g,T),this.setSize(w,b),this.setFrame(A),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(v,m){return this.displayTexture=this.scene.sys.textures.get(v),this.setFrame(m)},setFrame:function(v){var m=this.displayTexture.get(v);return this.potWidth=i(m.width),this.potHeight=i(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~u:this.renderFlags|=u,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(v,m){return v!==void 0&&(this.tilePositionX=v),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(v,m){return v===void 0&&(v=this.tileScaleX),m===void 0&&(m=v),this.tileScaleX=v,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var v=this.displayFrame;if(v.source.isRenderTexture||v.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,g=this.fillCanvas,T=this.potWidth,w=this.potHeight;(!this.renderer||!this.renderer.gl)&&(T=v.cutWidth,w=v.cutHeight),m.clearRect(0,0,T,w),g.width=T,g.height=w,m.drawImage(v.source.image,v.cutX,v.cutY,v.cutWidth,v.cutHeight,0,0,T,w),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(g,this.fillPattern):this.fillPattern=m.createPattern(g,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var v=this.canvas;if((v.width!==this.width||v.height!==this.height)&&(v.width=this.width,v.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||n.disable(m);var g=this._tileScale.x,T=this._tileScale.y,w=this._tilePosition.x,b=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(g,T),m.translate(-w,-b),m.fillStyle=this.fillPattern,m.fillRect(w,b,this.width/g,this.height/T),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(v){this._tilePosition.x=v,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(v){this._tilePosition.y=v,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(v){this._tileScale.x=v,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(v){this._tileScale.y=v,this.dirty=!0}}});o.exports=p},93305:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){s.updateCanvas(),l.addToRenderList(s),t.batchSprite(s,s.frame,l,a)};o.exports=x},63950:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(35856);l.register("tileSprite",function(i,n){i===void 0&&(i={});var h=a(i,"x",0),d=a(i,"y",0),u=a(i,"width",512),p=a(i,"height",512),v=a(i,"key",""),m=a(i,"frame",""),g=new r(this.scene,h,d,u,p,v,m);return n!==void 0&&(i.add=n),s(this.scene,g,i),g})},20509:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35856),l=t(61286);l.register("tileSprite",function(a,r,i,n,h,d){return this.displayList.add(new s(this.scene,a,r,i,n,h,d))})},9271:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(74287),a=t(93305),o.exports={renderWebGL:l,renderCanvas:a}},74287:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i,n){r.updateCanvas();var h=r.width,d=r.height;if(!(h===0||d===0)){i.addToRenderList(r);var u=s.getTintAppendFloatAlpha,p=a.pipelines.set(r.pipeline,r),v=p.setTexture2D(r.fillPattern,r);p.batchTexture(r,r.fillPattern,r.displayFrame.width*r.tileScaleX,r.displayFrame.height*r.tileScaleY,r.x,r.y,h,d,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.originX*h,r.originY*d,0,0,h,d,u(r.tintTopLeft,i.alpha*r._alphaTL),u(r.tintTopRight,i.alpha*r._alphaTR),u(r.tintBottomLeft,i.alpha*r._alphaBL),u(r.tintBottomRight,i.alpha*r._alphaBR),r.tintFill,r.tilePositionX%r.displayFrame.width/r.displayFrame.width,r.tilePositionY%r.displayFrame.height/r.displayFrame.height,i,n,!1,v)}};o.exports=l},8630:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(64937),r=t(56631),i=t(97081),n=t(89980),h=t(83392),d=t(76038),u=t(76583),p=t(77974),v=new l({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,p],initialize:function(g,T,w,b){n.call(this,g,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=u(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var E=g.sys.game;this._device=E.device.video,this.setPosition(T,w),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),E.events.on(i.PAUSE,this.globalPause,this),E.events.on(i.RESUME,this.globalResume,this);var A=g.sys.sound;A&&A.on(d.GLOBAL_MUTE,this.globalMute,this),b&&this.load(b)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(m){var g=this.scene.sys.cache.video.get(m);return g?(this.cacheKey=m,this.loadHandler(g.url,g.noAudio,g.crossOrigin)):console.warn("No video in cache for key: "+m),this},changeSource:function(m,g,T,w,b){g===void 0&&(g=!0),T===void 0&&(T=!1),this.cacheKey!==m&&(this.load(m),g&&this.play(T,w,b))},getVideoKey:function(){return this.cacheKey},loadURL:function(m,g,T){g===void 0&&(g=!1);var w=this._device.getVideoURL(m);return w?(this.cacheKey="",this.loadHandler(w.url,g,T)):console.warn("No supported video format found for "+m),this},loadMediaStream:function(m,g,T){return this.loadHandler(null,g,T,m)},loadHandler:function(m,g,T,w){g||(g=!1);var b=this.video;if(b?(this.removeLoadEventHandlers(),this.stop()):(b=document.createElement("video"),b.controls=!1,b.setAttribute("playsinline","playsinline"),b.setAttribute("preload","auto"),b.setAttribute("disablePictureInPicture","true")),g?(b.muted=!0,b.defaultMuted=!0,b.setAttribute("autoplay","autoplay")):(b.muted=!1,b.defaultMuted=!1,b.removeAttribute("autoplay")),T?b.setAttribute("crossorigin",T):b.removeAttribute("crossorigin"),w)if("srcObject"in b)try{b.srcObject=w}catch(E){if(E.name!=="TypeError")throw E;b.src=URL.createObjectURL(w)}else b.src=URL.createObjectURL(w);else b.src=m;return this.addLoadEventHandlers(),this.retry=0,this.video=b,this._playCalled=!1,b.load(),this},requestVideoFrame:function(m,g){var T=this.video;if(T){var w=g.width,b=g.height,E=this.videoTexture,A=this.videoTextureSource,R=!E||A.source!==T;R?(this._codePaused=T.paused,this._codeMuted=T.muted,E?(A.source=T,A.width=w,A.height=b,E.get().setSize(w,b)):(E=this.scene.sys.textures.create(this._key,T,w,b),E.add("__BASE",0,0,0,w,b),this.setTexture(E),this.videoTexture=E,this.videoTextureSource=E.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(r.VIDEO_TEXTURE,this,E)),this.setSizeToFrame(),this.updateDisplayOrigin()):A.update(),this.isStalled=!1,this.metadata=g;var I=g.mediaTime;R&&(this._lastUpdate=I,this.emit(r.VIDEO_CREATED,this,w,b),this.frameReady||(this.frameReady=!0,this.emit(r.VIDEO_PLAY,this))),this._playingMarker?I>=this._markerOut&&(T.loop?(T.currentTime=this._markerIn,this.emit(r.VIDEO_LOOP,this)):(this.stop(!1),this.emit(r.VIDEO_COMPLETE,this))):I<this._lastUpdate&&this.emit(r.VIDEO_LOOP,this),this._lastUpdate=I,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(m,g,T){g===void 0&&(g=-1),T===void 0&&(T=h.MAX_SAFE_INTEGER);var w=this.video;return!w||this.isPlaying()?(w||console.warn("Video not loaded"),this):(m===void 0&&(m=w.loop),w.loop=m,this._markerIn=g,this._markerOut=T,this._playingMarker=g>-1&&T>g&&T<h.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=w.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var m=this.video;m&&(m.addEventListener("error",this._loadCallbackHandler),m.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var m=this.video;m&&(m.removeEventListener("error",this._loadCallbackHandler),m.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var m=this.video;if(m){var g=this._callbacks;for(var T in g)m.addEventListener(T,g[T])}},removeEventHandlers:function(){var m=this.video;if(m){var g=this._callbacks;for(var T in g)m.removeEventListener(T,g[T])}},createPlayPromise:function(m){m===void 0&&(m=!0);var g=this.video,T=g.play();if(T!==void 0){var w=this.playSuccess.bind(this),b=this.playError.bind(this);if(!m){var E=this;b=function(){E.failedPlayAttempts++}}T.then(w).catch(b)}else g.addEventListener("playing",this._callbacks.legacy),m||this.failedPlayAttempts++},addMarker:function(m,g,T){return!isNaN(g)&&g>=0&&!isNaN(T)&&T>g&&(this.markers[m]=[g,T]),this},playMarker:function(m,g){var T=this.markers[m];return T&&this.play(g,T[0],T[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,g){return m===void 0&&(m=this.width),g===void 0&&(g=this.height),this.snapshotArea(0,0,this.width,this.height,m,g)},snapshotArea:function(m,g,T,w,b,E){m===void 0&&(m=0),g===void 0&&(g=0),T===void 0&&(T=this.width),w===void 0&&(w=this.height),b===void 0&&(b=T),E===void 0&&(E=w);var A=this.video,R=this.snapshotTexture;return R?(R.setSize(b,E),A&&R.context.drawImage(A,m,g,T,w,0,0,b,E)):(R=this.scene.sys.textures.createCanvas(u(),b,E),this.snapshotTexture=R,A&&R.context.drawImage(A,m,g,T,w,0,0,b,E)),R.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(r.VIDEO_UNLOCKED,this));var m=this.scene.sys.sound;m&&m.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(m){var g=m.name;g==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(r.VIDEO_LOCKED,this)):g==="NotSupportedError"?(this.stop(!1),this.emit(r.VIDEO_UNSUPPORTED,this,m)):(this.stop(!1),this.emit(r.VIDEO_ERROR,this,m))},legacyPlayHandler:function(){var m=this.video;m&&(this.playSuccess(),m.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(r.VIDEO_PLAYING,this)},loadErrorHandler:function(m){this.stop(!1),this.emit(r.VIDEO_ERROR,this,m)},stalledHandler:function(m){this.isStalled=!0,this.emit(r.VIDEO_STALLED,this,m)},completeHandler:function(){this._playCalled=!1,this.emit(r.VIDEO_COMPLETE,this)},preUpdate:function(m,g){var T=this.video;!T||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=g,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(m){var g=this.video;if(g){var T=g.duration;if(T!==1/0&&!isNaN(T)){var w=T*m;this.setCurrentTime(w)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var g=this.video;if(g){if(typeof m=="string"){var T=m[0],w=parseFloat(m.substr(1));T==="+"?m=g.currentTime+w:T==="-"&&(m=g.currentTime-w)}g.currentTime=m}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(r.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(r.VIDEO_SEEKED,this)},getProgress:function(){var m=this.video;if(m){var g=m.duration;if(g!==1/0&&!isNaN(g))return m.currentTime/g}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var g=this.video;return g&&(g.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,g){this._systemMuted=g;var T=this.video;T&&(T.muted=this._codeMuted?!0:g)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(m){m===void 0&&(m=!0);var g=this.video;return this._codePaused=m,g&&!g.ended&&(m?g.paused||(this.removeEventHandlers(),g.pause()):m||(this._playCalled?g.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=s(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,g){return g===void 0&&(g=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,m),this.videoTextureSource.setFlipY(g)),this._key=m,this.flipY=g,!!this.videoTexture},stop:function(m){m===void 0&&(m=!0);var g=this.video;return g&&(this.removeEventHandlers(),g.cancelVideoFrameCallback(this._rfvCallbackId),g.pause()),this.retry=0,this._playCalled=!1,m&&this.emit(r.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var m=this.scene.sys.game.events;m.off(i.PAUSE,this.globalPause,this),m.off(i.RESUME,this.globalResume,this);var g=this.scene.sys.sound;g&&g.off(d.GLOBAL_MUTE,this.globalMute,this)}});o.exports=v},56933:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){s.videoTexture&&(l.addToRenderList(s),t.batchSprite(s,s.frame,l,a))};o.exports=x},65601:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(8630);l.register("video",function(i,n){i===void 0&&(i={});var h=a(i,"key",null),d=new r(this.scene,0,0,h);return n!==void 0&&(i.add=n),s(this.scene,d,i),d})},215:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8630),l=t(61286);l.register("video",function(a,r,i){return this.displayList.add(new s(this.scene,a,r,i))})},77974:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(83572),a=t(56933),o.exports={renderWebGL:l,renderCanvas:a}},83572:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){s.videoTexture&&(l.addToRenderList(s),s.pipeline.batchSprite(s,l,a))};o.exports=x},71030:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(26673),a=t(65650),r=t(56694),i=t(64937),n=t(89980),h=t(74118),d=t(94287),u=new r({Extends:n,Mixins:[i.Depth,i.GetBounds,i.Origin,i.Transform,i.ScrollFactor,i.Visible],initialize:function(v,m,g,T,w){T===void 0&&(T=1),w===void 0&&(w=T),n.call(this,v,"Zone"),this.setPosition(m,g),this.width=T,this.height=w,this.blendMode=s.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(p){this.scaleX=p/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(p){this.scaleY=p/this.height}},setSize:function(p,v,m){m===void 0&&(m=!0),this.width=p,this.height=v,this.updateDisplayOrigin();var g=this.input;return m&&g&&!g.customHitArea&&(g.hitArea.width=p,g.hitArea.height=v),this},setDisplaySize:function(p,v){return this.displayWidth=p,this.displayHeight=v,this},setCircleDropZone:function(p){return this.setDropZone(new l(0,0,p),a)},setRectangleDropZone:function(p,v){return this.setDropZone(new h(0,0,p,v),d)},setDropZone:function(p,v){return this.input||this.setInteractive(p,v,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(p,v,m){m.addToRenderList(v)},renderWebGL:function(p,v,m){m.addToRenderList(v)}});o.exports=u},24067:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99325),l=t(20494),a=t(71030);s.register("zone",function(r){var i=l(r,"x",0),n=l(r,"y",0),h=l(r,"width",1),d=l(r,"height",h);return new a(this.scene,i,n,h,d)})},34546:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(71030),l=t(61286);l.register("zone",function(a,r,i,n){return this.displayList.add(new s(this.scene,a,r,i,n))})},95847:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0};o.exports=x},26673:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(65650),a=t(94026),r=t(62941),i=t(52394),n=t(30977),h=new s({initialize:function(u,p,v){u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=0),this.type=i.CIRCLE,this.x=u,this.y=p,this._radius=v,this._diameter=v*2},contains:function(d,u){return l(this,d,u)},getPoint:function(d,u){return a(this,d,u)},getPoints:function(d,u,p){return r(this,d,u,p)},getRandomPoint:function(d){return n(this,d)},setTo:function(d,u,p){return this.x=d,this.y=u,this._radius=p,this._diameter=p*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(d,u){return u===void 0&&(u=d),this.x=d,this.y=u,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this._diameter=d*2}},diameter:{get:function(){return this._diameter},set:function(d){this._diameter=d,this._radius=d*.5}},left:{get:function(){return this.x-this._radius},set:function(d){this.x=d+this._radius}},right:{get:function(){return this.x+this._radius},set:function(d){this.x=d-this._radius}},top:{get:function(){return this.y-this._radius},set:function(d){this.y=d+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(d){this.y=d-this._radius}}});o.exports=h},37964:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return 2*(Math.PI*t.radius)};o.exports=x},72233:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){return i===void 0&&(i=new s),i.x=a.x+a.radius*Math.cos(r),i.y=a.y+a.radius*Math.sin(r),i};o.exports=l},61761:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673),l=function(a){return new s(a.x,a.y,a.radius)};o.exports=l},65650:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(t.radius>0&&s>=t.left&&s<=t.right&&l>=t.top&&l<=t.bottom){var a=(t.x-s)*(t.x-s),r=(t.y-l)*(t.y-l);return a+r<=t.radius*t.radius}else return!1};o.exports=x},39187:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65650),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},58672:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65650),l=function(a,r){return s(a,r.x,r.y)&&s(a,r.right,r.y)&&s(a,r.x,r.bottom)&&s(a,r.right,r.bottom)};o.exports=l},42997:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s.setTo(t.x,t.y,t.radius)};o.exports=x},94894:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x===s.x&&t.y===s.y&&t.radius===s.radius};o.exports=x},48027:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r){return r===void 0&&(r=new s),r.x=a.left,r.y=a.top,r.width=a.diameter,r.height=a.diameter,r};o.exports=l},94026:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72233),l=t(91806),a=t(83392),r=t(79967),i=function(n,h,d){d===void 0&&(d=new r);var u=l(h,0,a.PI2);return s(n,u,d)};o.exports=i},62941:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(37964),l=t(72233),a=t(91806),r=t(83392),i=function(n,h,d,u){u===void 0&&(u=[]),!h&&d>0&&(h=s(n)/d);for(var p=0;p<h;p++){var v=a(p/h,0,r.PI2);u.push(l(n,v))}return u};o.exports=i},34585:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t.x+=s,t.y+=l,t};o.exports=x},88665:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x+=s.x,t.y+=s.y,t};o.exports=x},30977:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){r===void 0&&(r=new s);var i=2*Math.PI*Math.random(),n=Math.random()+Math.random(),h=n>1?2-n:n,d=h*Math.cos(i),u=h*Math.sin(i);return r.x=a.x+d*a.radius,r.y=a.y+u*a.radius,r};o.exports=l},6112:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673);s.Area=t(95847),s.Circumference=t(37964),s.CircumferencePoint=t(72233),s.Clone=t(61761),s.Contains=t(65650),s.ContainsPoint=t(39187),s.ContainsRect=t(58672),s.CopyFrom=t(42997),s.Equals=t(94894),s.GetBounds=t(48027),s.GetPoint=t(94026),s.GetPoints=t(62941),s.Offset=t(34585),s.OffsetPoint=t(88665),s.Random=t(30977),o.exports=s},52394:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};o.exports=x},58605:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI};o.exports=x},39507:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s=t.width/2,l=t.height/2,a=Math.pow(s-l,2)/Math.pow(s+l,2);return Math.PI*(s+l)*(1+3*a/(10+Math.sqrt(4-3*a)))};o.exports=x},86998:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){i===void 0&&(i=new s);var n=a.width/2,h=a.height/2;return i.x=a.x+n*Math.cos(r),i.y=a.y+h*Math.sin(r),i};o.exports=l},81773:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95669),l=function(a){return new s(a.x,a.y,a.width,a.height)};o.exports=l},72313:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(t.width<=0||t.height<=0)return!1;var a=(s-t.x)/t.width,r=(l-t.y)/t.height;return a*=a,r*=r,a+r<.25};o.exports=x},34368:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72313),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},71431:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72313),l=function(a,r){return s(a,r.x,r.y)&&s(a,r.right,r.y)&&s(a,r.x,r.bottom)&&s(a,r.right,r.bottom)};o.exports=l},75459:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s.setTo(t.x,t.y,t.width,t.height)};o.exports=x},95669:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72313),a=t(95340),r=t(54978),i=t(52394),n=t(72006),h=new s({initialize:function(u,p,v,m){u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),this.type=i.ELLIPSE,this.x=u,this.y=p,this.width=v,this.height=m},contains:function(d,u){return l(this,d,u)},getPoint:function(d,u){return a(this,d,u)},getPoints:function(d,u,p){return r(this,d,u,p)},getRandomPoint:function(d){return n(this,d)},setTo:function(d,u,p,v){return this.x=d,this.y=u,this.width=p,this.height=v,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(d,u){return u===void 0&&(u=d),this.x=d,this.y=u,this},setSize:function(d,u){return u===void 0&&(u=d),this.width=d,this.height=u,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(d){this.x=d+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(d){this.y=d+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});o.exports=h},98068:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height};o.exports=x},72897:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r){return r===void 0&&(r=new s),r.x=a.left,r.y=a.top,r.width=a.width,r.height=a.height,r};o.exports=l},95340:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86998),l=t(91806),a=t(83392),r=t(79967),i=function(n,h,d){d===void 0&&(d=new r);var u=l(h,0,a.PI2);return s(n,u,d)};o.exports=i},54978:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39507),l=t(86998),a=t(91806),r=t(83392),i=function(n,h,d,u){u===void 0&&(u=[]),!h&&d>0&&(h=s(n)/d);for(var p=0;p<h;p++){var v=a(p/h,0,r.PI2);u.push(l(n,v))}return u};o.exports=i},77951:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t.x+=s,t.y+=l,t};o.exports=x},36233:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x+=s.x,t.y+=s.y,t};o.exports=x},72006:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){r===void 0&&(r=new s);var i=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return r.x=a.x+n*Math.cos(i)*a.width/2,r.y=a.y+n*Math.sin(i)*a.height/2,r};o.exports=l},40652:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95669);s.Area=t(58605),s.Circumference=t(39507),s.CircumferencePoint=t(86998),s.Clone=t(81773),s.Contains=t(72313),s.ContainsPoint=t(34368),s.ContainsRect=t(71431),s.CopyFrom=t(75459),s.Equals=t(98068),s.GetBounds=t(72897),s.GetPoint=t(95340),s.GetPoints=t(54978),s.Offset=t(77951),s.OffsetPoint=t(36233),s.Random=t(72006),o.exports=s},84068:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(52394),l=t(98611),a={Circle:t(6112),Ellipse:t(40652),Intersects:t(7563),Line:t(28482),Mesh:t(14293),Point:t(63472),Polygon:t(44359),Rectangle:t(66658),Triangle:t(87619)};a=l(!1,a,s),o.exports=a},22184:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(53996),l=function(a,r){return s(a.x,a.y,r.x,r.y)<=a.radius+r.radius};o.exports=l},26535:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=s.width/2,a=s.height/2,r=Math.abs(t.x-s.x-l),i=Math.abs(t.y-s.y-a),n=l+t.radius,h=a+t.radius;if(r>n||i>h)return!1;if(r<=l||i<=a)return!0;var d=r-l,u=i-a,p=d*d,v=u*u,m=t.radius*t.radius;return p+v<=m};o.exports=x},71145:(o,x,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(22184),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=r.x,d=r.y,u=r.radius,p=i.x,v=i.y,m=i.radius,g,T,w,b,E;if(d===v)E=(m*m-u*u-p*p+h*h)/(2*(h-p)),g=1,T=-2*v,w=p*p+E*E-2*p*E+v*v-m*m,b=T*T-4*g*w,b===0?n.push(new s(E,-T/(2*g))):b>0&&(n.push(new s(E,(-T+Math.sqrt(b))/(2*g))),n.push(new s(E,(-T-Math.sqrt(b))/(2*g))));else{var A=(h-p)/(d-v),R=(m*m-u*u-p*p+h*h-v*v+d*d)/(2*(d-v));g=A*A+1,T=2*d*A-2*R*A-2*h,w=h*h+d*d+R*R-u*u-2*d*R,b=T*T-4*g*w,b===0?(E=-T/(2*g),n.push(new s(E,R-E*A))):b>0&&(E=(-T+Math.sqrt(b))/(2*g),n.push(new s(E,R-E*A)),E=(-T-Math.sqrt(b))/(2*g),n.push(new s(E,R-E*A)))}}return n};o.exports=a},62508:(o,x,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26111),l=t(26535),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=i.getLineA(),d=i.getLineB(),u=i.getLineC(),p=i.getLineD();s(h,r,n),s(d,r,n),s(u,r,n),s(p,r,n)}return n};o.exports=a},26111:(o,x,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(61472),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=r.x1,d=r.y1,u=r.x2,p=r.y2,v=i.x,m=i.y,g=i.radius,T=u-h,w=p-d,b=h-v,E=d-m,A=T*T+w*w,R=2*(T*b+w*E),I=b*b+E*E-g*g,P=R*R-4*A*I,M,F;if(P===0){var O=-R/(2*A);M=h+O*T,F=d+O*w,O>=0&&O<=1&&n.push(new s(M,F))}else if(P>0){var D=(-R-Math.sqrt(P))/(2*A);M=h+D*T,F=d+D*w,D>=0&&D<=1&&n.push(new s(M,F));var L=(-R+Math.sqrt(P))/(2*A);M=h+L*T,F=d+L*w,L>=0&&L<=1&&n.push(new s(M,F))}}return n};o.exports=a},96537:(o,x,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70015),l=function(a,r,i,n){i===void 0&&(i=!1);var h=a.x1,d=a.y1,u=a.x2,p=a.y2,v=r.x1,m=r.y1,g=r.x2,T=r.y2,w=u-h,b=p-d,E=g-v,A=T-m,R=w*A-b*E;if(R===0)return null;var I,P,M;if(i){if(I=(w*(m-d)+b*(h-v))/(E*b-A*w),P=(v+E*I-h)/w,P<0||I<0||I>1)return null;M=P}else{if(I=((v-h)*A-(m-d)*E)/R,P=((d-m)*w-(h-v)*b)/R,I<0||I>1||P<0||P>1)return null;M=I}return n===void 0&&(n=new s),n.set(h+w*M,d+b*M,M)};o.exports=l},17647:(o,x,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(96537),l=t(88829),a=t(70015),r=new l,i=new a,n=function(h,d,u,p){u===void 0&&(u=!1),p===void 0&&(p=new a);var v=!1;p.set(),i.set();for(var m=d[d.length-1],g=0;g<d.length;g++){var T=d[g];r.setTo(m.x,m.y,T.x,T.y),m=T,s(h,r,u,i)&&(!v||i.z<p.z)&&(p.copy(i),v=!0)}return v?p:null};o.exports=n},68439:(o,x,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70015),l=t(51729),a=t(17647),r=new s,i=function(n,h,d,u){u===void 0&&(u=new l),Array.isArray(h)||(h=[h]);var p=!1;u.set(),r.set();for(var v=0;v<h.length;v++)a(n,h[v].points,d,r)&&(!p||r.z<u.z)&&(u.set(r.x,r.y,r.z,v),p=!0);return p?u:null};o.exports=i},9569:(o,x,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(25227),a=t(47910),r=function(i,n,h){if(h===void 0&&(h=[]),a(i,n))for(var d=n.getLineA(),u=n.getLineB(),p=n.getLineC(),v=n.getLineD(),m=[new s,new s,new s,new s],g=[l(d,i,m[0]),l(u,i,m[1]),l(p,i,m[2]),l(v,i,m[3])],T=0;T<4;T++)g[T]&&h.push(m[T]);return h};o.exports=r},7449:(o,x,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(51729),l=t(68439),a=t(88829),r=new a;function i(d,u,p,v,m){var g=Math.cos(d),T=Math.sin(d);r.setTo(u,p,u+g,p+T);var w=l(r,v,!0);w&&m.push(new s(w.x,w.y,d,w.w))}function n(d,u){return d.z-u.z}var h=function(d,u,p){Array.isArray(p)||(p=[p]);for(var v=[],m=[],g=0;g<p.length;g++)for(var T=p[g].points,w=0;w<T.length;w++){var b=Math.atan2(T[w].y-u,T[w].x-d);m.indexOf(b)===-1&&(i(b,d,u,p,v),i(b-1e-5,d,u,p,v),i(b+1e-5,d,u,p,v),m.push(b))}return v.sort(n)};o.exports=h},82931:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(90205),a=function(r,i,n){return n===void 0&&(n=new s),l(r,i)&&(n.x=Math.max(r.x,i.x),n.y=Math.max(r.y,i.y),n.width=Math.min(r.right,i.right)-n.x,n.height=Math.min(r.bottom,i.bottom)-n.y),n};o.exports=a},1946:(o,x,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(9569),l=t(90205),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=r.getLineA(),d=r.getLineB(),u=r.getLineC(),p=r.getLineD();s(h,i,n),s(d,i,n),s(u,i,n),s(p,i,n)}return n};o.exports=a},34211:(o,x,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(20370),l=t(9569),a=function(r,i,n){if(n===void 0&&(n=[]),s(r,i)){var h=i.getLineA(),d=i.getLineB(),u=i.getLineC();l(h,r,n),l(d,r,n),l(u,r,n)}return n};o.exports=a},80511:(o,x,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26111),l=t(48411),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=r.getLineA(),d=r.getLineB(),u=r.getLineC();s(h,i,n),s(d,i,n),s(u,i,n)}return n};o.exports=a},31343:(o,x,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(86117),a=t(25227),r=function(i,n,h){if(h===void 0&&(h=[]),l(i,n))for(var d=i.getLineA(),u=i.getLineB(),p=i.getLineC(),v=[new s,new s,new s],m=[a(d,n,v[0]),a(u,n,v[1]),a(p,n,v[2])],g=0;g<3;g++)m[g]&&h.push(v[g]);return h};o.exports=r},70534:(o,x,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23589),l=t(31343),a=function(r,i,n){if(n===void 0&&(n=[]),s(r,i)){var h=i.getLineA(),d=i.getLineB(),u=i.getLineC();l(r,h,n),l(r,d,n),l(r,u,n)}return n};o.exports=a},61472:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65650),l=t(79967),a=new l,r=function(i,n,h){if(h===void 0&&(h=a),s(n,i.x1,i.y1))return h.x=i.x1,h.y=i.y1,!0;if(s(n,i.x2,i.y2))return h.x=i.x2,h.y=i.y2,!0;var d=i.x2-i.x1,u=i.y2-i.y1,p=n.x-i.x1,v=n.y-i.y1,m=d*d+u*u,g=d,T=u;if(m>0){var w=(p*d+v*u)/m;g*=w,T*=w}h.x=i.x1+g,h.y=i.y1+T;var b=g*g+T*T;return b<=m&&g*d+T*u>=0&&s(n,h.x,h.y)};o.exports=r},25227:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=t.x1,r=t.y1,i=t.x2,n=t.y2,h=s.x1,d=s.y1,u=s.x2,p=s.y2;if(a===i&&r===n||h===u&&d===p)return!1;var v=(p-d)*(i-a)-(u-h)*(n-r);if(v===0)return!1;var m=((u-h)*(r-d)-(p-d)*(a-h))/v,g=((i-a)*(r-d)-(n-r)*(a-h))/v;return m<0||m>1||g<0||g>1?!1:(l&&(l.x=a+m*(i-a),l.y=r+m*(n-r)),!0)};o.exports=x},47910:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.x1,a=t.y1,r=t.x2,i=t.y2,n=s.x,h=s.y,d=s.right,u=s.bottom,p=0;if(l>=n&&l<=d&&a>=h&&a<=u||r>=n&&r<=d&&i>=h&&i<=u)return!0;if(l<n&&r>=n){if(p=a+(i-a)*(n-l)/(r-l),p>h&&p<=u)return!0}else if(l>d&&r<=d&&(p=a+(i-a)*(d-l)/(r-l),p>=h&&p<=u))return!0;if(a<h&&i>=h){if(p=l+(r-l)*(h-a)/(i-a),p>=n&&p<=d)return!0}else if(a>u&&i<=u&&(p=l+(r-l)*(u-a)/(i-a),p>=n&&p<=d))return!0;return!1};o.exports=x},34426:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){l===void 0&&(l=1);var a=s.x1,r=s.y1,i=s.x2,n=s.y2,h=t.x,d=t.y,u=(i-a)*(i-a)+(n-r)*(n-r);if(u===0)return!1;var p=((h-a)*(i-a)+(d-r)*(n-r))/u;if(p<0)return Math.sqrt((a-h)*(a-h)+(r-d)*(r-d))<=l;if(p>=0&&p<=1){var v=((r-d)*(i-a)-(a-h)*(n-r))/u;return Math.abs(v)*Math.sqrt(u)<=l}else return Math.sqrt((i-h)*(i-h)+(n-d)*(n-d))<=l};o.exports=x},81414:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(34426),l=function(a,r){if(!s(a,r))return!1;var i=Math.min(r.x1,r.x2),n=Math.max(r.x1,r.x2),h=Math.min(r.y1,r.y2),d=Math.max(r.y1,r.y2);return a.x>=i&&a.x<=n&&a.y>=h&&a.y<=d};o.exports=l},90205:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.width<=0||t.height<=0||s.width<=0||s.height<=0?!1:!(t.right<s.x||t.bottom<s.y||t.x>s.right||t.y>s.bottom)};o.exports=x},20370:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25227),l=t(94287),a=t(86875),r=t(87279),i=function(n,h){if(h.left>n.right||h.right<n.left||h.top>n.bottom||h.bottom<n.top)return!1;var d=h.getLineA(),u=h.getLineB(),p=h.getLineC();if(l(n,d.x1,d.y1)||l(n,d.x2,d.y2)||l(n,u.x1,u.y1)||l(n,u.x2,u.y2)||l(n,p.x1,p.y1)||l(n,p.x2,p.y2))return!0;var v=n.getLineA(),m=n.getLineB(),g=n.getLineC(),T=n.getLineD();if(s(d,v)||s(d,m)||s(d,g)||s(d,T)||s(u,v)||s(u,m)||s(u,g)||s(u,T)||s(p,v)||s(p,m)||s(p,g)||s(p,T))return!0;var w=r(n),b=a(h,w,!0);return b.length>0};o.exports=i},8786:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r,i){return i===void 0&&(i=0),!(s>t.right+i||l<t.left-i||a>t.bottom+i||r<t.top-i)};o.exports=x},48411:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61472),l=t(60689),a=function(r,i){return r.left>i.right||r.right<i.left||r.top>i.bottom||r.bottom<i.top?!1:!!(l(r,i.x,i.y)||s(r.getLineA(),i)||s(r.getLineB(),i)||s(r.getLineC(),i))};o.exports=a},86117:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25227),l=function(a,r){return!!(a.contains(r.x1,r.y1)||a.contains(r.x2,r.y2)||s(a.getLineA(),r)||s(a.getLineB(),r)||s(a.getLineC(),r))};o.exports=l},23589:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86875),l=t(18680),a=t(25227),r=function(i,n){if(i.left>n.right||i.right<n.left||i.top>n.bottom||i.bottom<n.top)return!1;var h=i.getLineA(),d=i.getLineB(),u=i.getLineC(),p=n.getLineA(),v=n.getLineB(),m=n.getLineC();if(a(h,p)||a(h,v)||a(h,m)||a(d,p)||a(d,v)||a(d,m)||a(u,p)||a(u,v)||a(u,m))return!0;var g=l(i),T=s(n,g,!0);return T.length>0||(g=l(n),T=s(i,g,!0),T.length>0)};o.exports=r},7563:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CircleToCircle:t(22184),CircleToRectangle:t(26535),GetCircleToCircle:t(71145),GetCircleToRectangle:t(62508),GetLineToCircle:t(26111),GetLineToLine:t(96537),GetLineToPoints:t(17647),GetLineToPolygon:t(68439),GetLineToRectangle:t(9569),GetRaysFromPointToPolygon:t(7449),GetRectangleIntersection:t(82931),GetRectangleToRectangle:t(1946),GetRectangleToTriangle:t(34211),GetTriangleToCircle:t(80511),GetTriangleToLine:t(31343),GetTriangleToTriangle:t(70534),LineToCircle:t(61472),LineToLine:t(25227),LineToRectangle:t(47910),PointToLine:t(34426),PointToLineSegment:t(81414),RectangleToRectangle:t(90205),RectangleToTriangle:t(20370),RectangleToValues:t(8786),TriangleToCircle:t(48411),TriangleToLine:t(86117),TriangleToTriangle:t(23589)}},50599:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)};o.exports=x},58813:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){s===void 0&&(s=1),l===void 0&&(l=[]);var a=Math.round(t.x1),r=Math.round(t.y1),i=Math.round(t.x2),n=Math.round(t.y2),h=Math.abs(i-a),d=Math.abs(n-r),u=a<i?1:-1,p=r<n?1:-1,v=h-d;l.push({x:a,y:r});for(var m=1;!(a===i&&r===n);){var g=v<<1;g>-d&&(v-=d,a+=u),g<h&&(v+=h,r+=p),m%s===0&&l.push({x:a,y:r}),m++}return l};o.exports=x},88513:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=s-(t.x1+t.x2)/2,r=l-(t.y1+t.y2)/2;return t.x1+=a,t.y1+=r,t.x2+=a,t.y2+=r,t};o.exports=x},26718:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88829),l=function(a){return new s(a.x1,a.y1,a.x2,a.y2)};o.exports=l},88930:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s.setTo(t.x1,t.y1,t.x2,t.y2)};o.exports=x},90656:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x1===s.x1&&t.y1===s.y1&&t.x2===s.x2&&t.y2===s.y2};o.exports=x},30897:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=function(a,r,i){i===void 0&&(i=r);var n=s(a),h=a.x2-a.x1,d=a.y2-a.y1;return r&&(a.x1=a.x1-h/n*r,a.y1=a.y1-d/n*r),i&&(a.x2=a.x2+h/n*i,a.y2=a.y2+d/n*i),a};o.exports=l},30684:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92951),l=t(21902),a=t(79967),r=function(i,n,h,d,u){d===void 0&&(d=0),u===void 0&&(u=[]);var p=[],v=i.x1,m=i.y1,g=i.x2-v,T=i.y2-m,w=l(n,u),b,E,A=h-1;for(b=0;b<A;b++)E=w(b/A),p.push(new a(v+g*E,m+T*E));if(E=w(1),p.push(new a(v+g*E,m+T*E)),d>0){var R=p[0],I=[R];for(b=1;b<p.length-1;b++){var P=p[b];s(R,P)>=d&&(I.push(P),R=P)}var M=p[p.length-1];return s(R,M)<d&&I.pop(),I.push(M),I}else return p};o.exports=r},20487:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=(a.x1+a.x2)/2,r.y=(a.y1+a.y2)/2,r};o.exports=l},11222:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){i===void 0&&(i=new s);var n=a.x1,h=a.y1,d=a.x2,u=a.y2,p=(d-n)*(d-n)+(u-h)*(u-h);if(p===0)return i;var v=((r.x-n)*(d-n)+(r.y-h)*(u-h))/p;return i.x=n+v*(d-n),i.y=h+v*(u-h),i};o.exports=l},7377:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(50599),a=t(79967),r=function(i,n){n===void 0&&(n=new a);var h=l(i)-s.TAU;return n.x=Math.cos(h),n.y=Math.sin(h),n};o.exports=r},66464:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){return i===void 0&&(i=new s),i.x=a.x1+(a.x2-a.x1)*r,i.y=a.y1+(a.y2-a.y1)*r,i};o.exports=l},8570:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=t(79967),a=function(r,i,n,h){h===void 0&&(h=[]),!i&&n>0&&(i=s(r)/n);for(var d=r.x1,u=r.y1,p=r.x2,v=r.y2,m=0;m<i;m++){var g=m/i,T=d+(p-d)*g,w=u+(v-u)*g;h.push(new l(T,w))}return h};o.exports=a},65269:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.x1,a=t.y1,r=t.x2,i=t.y2,n=(r-l)*(r-l)+(i-a)*(i-a);if(n===0)return!1;var h=((a-s.y)*(r-l)-(l-s.x)*(i-a))/n;return Math.abs(h)*Math.sqrt(n)};o.exports=x},82996:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return Math.abs(t.y1-t.y2)};o.exports=x},16028:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))};o.exports=x},88829:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(66464),a=t(8570),r=t(52394),i=t(74077),n=t(93736),h=new s({initialize:function(u,p,v,m){u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),this.type=r.LINE,this.x1=u,this.y1=p,this.x2=v,this.y2=m},getPoint:function(d,u){return l(this,d,u)},getPoints:function(d,u,p){return a(this,d,u,p)},getRandomPoint:function(d){return i(this,d)},setTo:function(d,u,p,v){return d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=0),this.x1=d,this.y1=u,this.x2=p,this.y2=v,this},setFromObjects:function(d,u){return this.x1=d.x,this.y1=d.y,this.x2=u.x,this.y2=u.y,this},getPointA:function(d){return d===void 0&&(d=new n),d.set(this.x1,this.y1),d},getPointB:function(d){return d===void 0&&(d=new n),d.set(this.x2,this.y2),d},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(d){this.x1<=this.x2?this.x1=d:this.x2=d}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(d){this.x1>this.x2?this.x1=d:this.x2=d}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(d){this.y1<=this.y2?this.y1=d:this.y2=d}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(d){this.y1>this.y2?this.y1=d:this.y2=d}}});o.exports=h},73273:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(1071),a=t(50599),r=function(i){var n=a(i)-s.TAU;return l(n,-Math.PI,Math.PI)};o.exports=r},96936:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(50599),a=function(r){return Math.cos(l(r)-s.TAU)};o.exports=a},43581:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(50599),a=function(r){return Math.sin(l(r)-s.TAU)};o.exports=a},13990:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t.x1+=s,t.y1+=l,t.x2+=s,t.y2+=l,t};o.exports=x},1298:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return-((t.x2-t.x1)/(t.y2-t.y1))};o.exports=x},74077:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){r===void 0&&(r=new s);var i=Math.random();return r.x=a.x1+i*(a.x2-a.x1),r.y=a.y1+i*(a.y2-a.y1),r};o.exports=l},30473:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50599),l=t(73273),a=function(r,i){return 2*l(i)-Math.PI-s(r)};o.exports=a},25968:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1809),l=function(a,r){var i=(a.x1+a.x2)/2,n=(a.y1+a.y2)/2;return s(a,i,n,r)};o.exports=l},24296:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1809),l=function(a,r,i){return s(a,r.x,r.y,i)};o.exports=l},1809:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=Math.cos(a),i=Math.sin(a),n=t.x1-s,h=t.y1-l;return t.x1=n*r-h*i+s,t.y1=n*i+h*r+l,n=t.x2-s,h=t.y2-l,t.x2=n*r-h*i+s,t.y2=n*i+h*r+l,t};o.exports=x},88171:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r){return t.x1=s,t.y1=l,t.x2=s+Math.cos(a)*r,t.y2=l+Math.sin(a)*r,t};o.exports=x},82797:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return(t.y2-t.y1)/(t.x2-t.x1)};o.exports=x},41067:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return Math.abs(t.x1-t.x2)};o.exports=x},28482:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88829);s.Angle=t(50599),s.BresenhamPoints=t(58813),s.CenterOn=t(88513),s.Clone=t(26718),s.CopyFrom=t(88930),s.Equals=t(90656),s.Extend=t(30897),s.GetEasedPoints=t(30684),s.GetMidPoint=t(20487),s.GetNearestPoint=t(11222),s.GetNormal=t(7377),s.GetPoint=t(66464),s.GetPoints=t(8570),s.GetShortestDistance=t(65269),s.Height=t(82996),s.Length=t(16028),s.NormalAngle=t(73273),s.NormalX=t(96936),s.NormalY=t(43581),s.Offset=t(13990),s.PerpSlope=t(1298),s.Random=t(74077),s.ReflectAngle=t(30473),s.Rotate=t(25968),s.RotateAroundPoint=t(24296),s.RotateAroundXY=t(1809),s.SetToAngle=t(88171),s.Slope=t(82797),s.Width=t(41067),o.exports=s},18693:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(74118),a=t(93736);function r(n,h,d,u){var p=n-d,v=h-u,m=p*p+v*v;return Math.sqrt(m)}var i=new s({initialize:function(h,d,u){this.vertex1=h,this.vertex2=d,this.vertex3=u,this.bounds=new l,this._inCenter=new a},getInCenter:function(n){n===void 0&&(n=!0);var h=this.vertex1,d=this.vertex2,u=this.vertex3,p,v,m,g,T,w;n?(p=h.x,v=h.y,m=d.x,g=d.y,T=u.x,w=u.y):(p=h.vx,v=h.vy,m=d.vx,g=d.vy,T=u.vx,w=u.vy);var b=r(T,w,m,g),E=r(p,v,T,w),A=r(m,g,p,v),R=b+E+A;return this._inCenter.set((p*b+m*E+T*A)/R,(v*b+g*E+w*A)/R)},contains:function(n,h,d){var u=this.vertex1,p=this.vertex2,v=this.vertex3,m=u.vx,g=u.vy,T=p.vx,w=p.vy,b=v.vx,E=v.vy;if(d){var A=d.a,R=d.b,I=d.c,P=d.d,M=d.e,F=d.f;m=u.vx*A+u.vy*I+M,g=u.vx*R+u.vy*P+F,T=p.vx*A+p.vy*I+M,w=p.vx*R+p.vy*P+F,b=v.vx*A+v.vy*I+M,E=v.vx*R+v.vy*P+F}var O=b-m,D=E-g,L=T-m,z=w-g,X=n-m,H=h-g,J=O*O+D*D,G=O*L+D*z,k=O*X+D*H,N=L*L+z*z,B=L*X+z*H,U=J*N-G*G,W=U===0?0:1/U,K=(N*k-G*B)*W,q=(J*B-G*k)*W;return K>=0&&q>=0&&K+q<1},isCounterClockwise:function(n){var h=this.vertex1,d=this.vertex2,u=this.vertex3,p=(d.vx-h.vx)*(u.vy-h.vy)-(d.vy-h.vy)*(u.vx-h.vx);return n<=0?p>=0:p<0},load:function(n,h,d,u,p){return d=this.vertex1.load(n,h,d,u,p),d=this.vertex2.load(n,h,d,u,p),d=this.vertex3.load(n,h,d,u,p),d},transformCoordinatesLocal:function(n,h,d,u){return this.vertex1.transformCoordinatesLocal(n,h,d,u),this.vertex2.transformCoordinatesLocal(n,h,d,u),this.vertex3.transformCoordinatesLocal(n,h,d,u),this},updateBounds:function(){var n=this.vertex1,h=this.vertex2,d=this.vertex3,u=this.bounds;return u.x=Math.min(n.vx,h.vx,d.vx),u.y=Math.min(n.vy,h.vy,d.vy),u.width=Math.max(n.vx,h.vx,d.vx)-u.x,u.height=Math.max(n.vy,h.vy,d.vy)-u.y,this},isInView:function(n,h,d,u,p,v,m,g,T,w,b){this.update(u,p,v,m,g,T,w,b);var E=this.vertex1,A=this.vertex2,R=this.vertex3;if(E.ta<=0&&A.ta<=0&&R.ta<=0||h&&!this.isCounterClockwise(d))return!1;var I=this.bounds;I.x=Math.min(E.tx,A.tx,R.tx),I.y=Math.min(E.ty,A.ty,R.ty),I.width=Math.max(E.tx,A.tx,R.tx)-I.x,I.height=Math.max(E.ty,A.ty,R.ty)-I.y;var P=n.x+n.width,M=n.y+n.height;return I.width<=0||I.height<=0||n.width<=0||n.height<=0?!1:!(I.right<n.x||I.bottom<n.y||I.x>P||I.y>M)},scrollUV:function(n,h){return this.vertex1.scrollUV(n,h),this.vertex2.scrollUV(n,h),this.vertex3.scrollUV(n,h),this},scaleUV:function(n,h){return this.vertex1.scaleUV(n,h),this.vertex2.scaleUV(n,h),this.vertex3.scaleUV(n,h),this},setColor:function(n){return this.vertex1.color=n,this.vertex2.color=n,this.vertex3.color=n,this},update:function(n,h,d,u,p,v,m,g){return this.vertex1.update(h,d,u,p,v,m,g,n),this.vertex2.update(h,d,u,p,v,m,g,n),this.vertex3.update(h,d,u,p,v,m,g,n),this},translate:function(n,h){h===void 0&&(h=0);var d=this.vertex1,u=this.vertex2,p=this.vertex3;return d.x+=n,d.y+=h,u.x+=n,u.y+=h,p.x+=n,p.y+=h,this},x:{get:function(){return this.getInCenter().x},set:function(n){var h=this.getInCenter();this.translate(n-h.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(n){var h=this.getInCenter();this.translate(0,n-h.y)}},alpha:{get:function(){var n=this.vertex1,h=this.vertex2,d=this.vertex3;return(n.alpha+h.alpha+d.alpha)/3},set:function(n){this.vertex1.alpha=n,this.vertex2.alpha=n,this.vertex3.alpha=n}},depth:{get:function(){var n=this.vertex1,h=this.vertex2,d=this.vertex3;return(n.vz+h.vz+d.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});o.exports=i},99425:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18693),l=t(72632),a=t(16650),r=t(70015),i=t(85769),n=new r,h=new r,d=new a,u=function(p){var v=l(p,"mesh"),m=l(p,"texture",null),g=l(p,"frame"),T=l(p,"width",1),w=l(p,"height",T),b=l(p,"widthSegments",1),E=l(p,"heightSegments",b),A=l(p,"x",0),R=l(p,"y",0),I=l(p,"z",0),P=l(p,"rotateX",0),M=l(p,"rotateY",0),F=l(p,"rotateZ",0),O=l(p,"zIsUp",!0),D=l(p,"isOrtho",v?v.dirtyCache[11]:!1),L=l(p,"colors",[16777215]),z=l(p,"alphas",[1]),X=l(p,"tile",!1),H=l(p,"flipY",!1),J=l(p,"width",null),G={faces:[],verts:[]};n.set(A,R,I),h.set(P,M,F),d.fromRotationXYTranslation(h,n,O);var k;if(!m&&v)m=v.texture,g||(k=v.frame);else if(v&&typeof m=="string")m=v.scene.sys.textures.get(m);else if(!m)return G;k||(k=m.get(g)),!J&&D&&m&&v&&(T=k.width/v.height,w=k.height/v.height);var N=T/2,B=w/2,U=Math.floor(b),W=Math.floor(E),K=U+1,q=W+1,_=T/U,rt=w/W,ft=[],vt=[],mt,yt,xt=0,It=1,Gt=0,Zt=1;k&&(xt=k.u0,It=k.u1,H?(Gt=k.v1,Zt=k.v0):(Gt=k.v0,Zt=k.v1));var Bt=It-xt,At=Zt-Gt;for(yt=0;yt<q;yt++){var kt=yt*rt-B;for(mt=0;mt<K;mt++){var Ut=mt*_-N;vt.push(Ut,-kt);var ee=xt+Bt*(mt/U),te=Gt+At*(yt/W);ft.push(ee,te)}}Array.isArray(L)||(L=[L]),Array.isArray(z)||(z=[z]);var fe=0,ae=0;for(yt=0;yt<W;yt++)for(mt=0;mt<U;mt++){var le=(mt+K*yt)*2,re=(mt+K*(yt+1))*2,we=(mt+1+K*(yt+1))*2,Se=(mt+1+K*yt)*2,Ne=L[ae],ce=z[fe],se=new i(vt[le],vt[le+1],0,ft[le],ft[le+1],Ne,ce).transformMat4(d),Ae=new i(vt[re],vt[re+1],0,ft[re],ft[re+1],Ne,ce).transformMat4(d),Le=new i(vt[Se],vt[Se+1],0,ft[Se],ft[Se+1],Ne,ce).transformMat4(d),en=new i(vt[re],vt[re+1],0,ft[re],ft[re+1],Ne,ce).transformMat4(d),ge=new i(vt[we],vt[we+1],0,ft[we],ft[we+1],Ne,ce).transformMat4(d),Xe=new i(vt[Se],vt[Se+1],0,ft[Se],ft[Se+1],Ne,ce).transformMat4(d);X&&(se.setUVs(xt,Zt),Ae.setUVs(xt,Gt),Le.setUVs(It,Zt),en.setUVs(xt,Gt),ge.setUVs(It,Gt),Xe.setUVs(It,Zt)),ae++,ae===L.length&&(ae=0),fe++,fe===z.length&&(fe=0),G.verts.push(se,Ae,Le,en,ge,Xe),G.faces.push(new s(se,Ae,Le),new s(en,ge,Xe))}return v&&(v.faces=v.faces.concat(G.faces),v.vertices=v.vertices.concat(G.verts)),G};o.exports=u},53267:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18693),l=t(16650),a=t(70015),r=t(85769),i=new a,n=new a,h=new l,d=function(u,p,v,m,g,T,w,b,E,A){v===void 0&&(v=1),m===void 0&&(m=0),g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=0),A===void 0&&(A=!0);var R={faces:[],verts:[]},I=u.materials;i.set(m,g,T),n.set(w,b,E),h.fromRotationXYTranslation(n,i,A);for(var P=0;P<u.models.length;P++)for(var M=u.models[P],F=M.vertices,O=M.textureCoords,D=M.faces,L=0;L<D.length;L++){var z=D[L],X=z.vertices[0],H=z.vertices[1],J=z.vertices[2],G=F[X.vertexIndex],k=F[H.vertexIndex],N=F[J.vertexIndex],B=X.textureCoordsIndex,U=H.textureCoordsIndex,W=J.textureCoordsIndex,K=B===-1?{u:0,v:1}:O[B],q=U===-1?{u:0,v:0}:O[U],_=W===-1?{u:1,v:1}:O[W],rt=16777215;z.material!==""&&I[z.material]&&(rt=I[z.material]);var ft=new r(G.x*v,G.y*v,G.z*v,K.u,K.v,rt).transformMat4(h),vt=new r(k.x*v,k.y*v,k.z*v,q.u,q.v,rt).transformMat4(h),mt=new r(N.x*v,N.y*v,N.z*v,_.u,_.v,rt).transformMat4(h);R.verts.push(ft,vt,mt),R.faces.push(new s(ft,vt,mt))}return p&&(p.faces=p.faces.concat(R.faces),p.vertices=p.vertices.concat(R.verts)),R};o.exports=d},67623:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18693),l=t(85769),a=function(r,i,n,h,d,u,p,v){if(h===void 0&&(h=!1),u===void 0&&(u=16777215),p===void 0&&(p=1),v===void 0&&(v=!1),r.length!==i.length&&!h){console.warn("GenerateVerts: vertices and uvs count not equal");return}var m={faces:[],vertices:[]},g,T,w,b,E,A,R,I,P,M,F,O=h?3:2,D=Array.isArray(u),L=Array.isArray(p);if(Array.isArray(n)&&n.length>0)for(g=0;g<n.length;g++){var z=n[g],X=n[g]*2,H=n[g]*O;T=r[H],w=r[H+1],b=h?r[H+2]:0,E=i[X],A=i[X+1],v&&(A=1-A),R=D?u[z]:u,I=L?p[z]:p,P=0,M=0,F=0,d&&(P=d[H],M=d[H+1],F=h?d[H+2]:0),m.vertices.push(new l(T,w,b,E,A,R,I,P,M,F))}else{var J=0,G=0;for(g=0;g<r.length;g+=O)T=r[g],w=r[g+1],b=h?r[g+2]:0,E=i[J],A=i[J+1],R=D?u[G]:u,I=L?p[G]:p,P=0,M=0,F=0,d&&(P=d[g],M=d[g+1],F=h?d[g+2]:0),m.vertices.push(new l(T,w,b,E,A,R,I,P,M,F)),J+=2,G++}for(g=0;g<m.vertices.length;g+=3){var k=m.vertices[g],N=m.vertices[g+1],B=m.vertices[g+2];m.faces.push(new s(k,N,B))}return m};o.exports=a},27291:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=!0,t="untitled",s="",l="";function a(T){var w=T.indexOf("#");return w>-1?T.substring(0,w):T}function r(T){return T.models.length===0&&T.models.push({faces:[],name:t,textureCoords:[],vertexNormals:[],vertices:[]}),s="",T.models[T.models.length-1]}function i(T,w){var b=T.length>=2?T[1]:t;w.models.push({faces:[],name:b,textureCoords:[],vertexNormals:[],vertices:[]}),s=""}function n(T){T.length===2&&(s=T[1])}function h(T,w){var b=T.length,E=b>=2?parseFloat(T[1]):0,A=b>=3?parseFloat(T[2]):0,R=b>=4?parseFloat(T[3]):0;r(w).vertices.push({x:E,y:A,z:R})}function d(T,w){var b=T.length,E=b>=2?parseFloat(T[1]):0,A=b>=3?parseFloat(T[2]):0,R=b>=4?parseFloat(T[3]):0;isNaN(E)&&(E=0),isNaN(A)&&(A=0),isNaN(R)&&(R=0),x&&(A=1-A),r(w).textureCoords.push({u:E,v:A,w:R})}function u(T,w){var b=T.length,E=b>=2?parseFloat(T[1]):0,A=b>=3?parseFloat(T[2]):0,R=b>=4?parseFloat(T[3]):0;r(w).vertexNormals.push({x:E,y:A,z:R})}function p(T,w){var b=T.length-1;if(!(b<3)){for(var E={group:s,material:l,vertices:[]},A=0;A<b;A++){var R=T[A+1],I=R.split("/"),P=I.length;if(!(P<1||P>3)){var M=0,F=0,O=0;M=parseInt(I[0],10),P>1&&I[1]!==""&&(F=parseInt(I[1],10)),P>2&&(O=parseInt(I[2],10)),M!==0&&(M<0&&(M=r(w).vertices.length+1+M),F-=1,M-=1,O-=1,E.vertices.push({textureCoordsIndex:F,vertexIndex:M,vertexNormalIndex:O}))}}r(w).faces.push(E)}}function v(T,w){T.length>=2&&w.materialLibraries.push(T[1])}function m(T){T.length>=2&&(l=T[1])}var g=function(T,w){w===void 0&&(w=!0),x=w;var b={materials:{},materialLibraries:[],models:[]};s="",l="";for(var E=T.split(`
`),A=0;A<E.length;A++){var R=a(E[A]),I=R.replace(/\s\s+/g," ").trim().split(" ");switch(I[0].toLowerCase()){case"o":i(I,b);break;case"g":n(I);break;case"v":h(I,b);break;case"vt":d(I,b);break;case"vn":u(I,b);break;case"f":p(I,b);break;case"mtllib":v(I,b);break;case"usemtl":m(I);break}}return b};o.exports=g},76799:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22946),l=function(a){for(var r={},i=a.split(`
`),n="",h=0;h<i.length;h++){var d=i[h].trim();if(!(d.indexOf("#")===0||d==="")){var u=d.replace(/\s\s+/g," ").trim().split(" ");switch(u[0].toLowerCase()){case"newmtl":{n=u[1];break}case"kd":{var p=Math.floor(u[1]*255),v=u.length>=2?Math.floor(u[2]*255):p,m=u.length>=3?Math.floor(u[3]*255):p;r[n]=s(p,v,m);break}}}}return r};o.exports=l},15313:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r,i;if(l===void 0&&a===void 0){var n=t.getInCenter();r=n.x,i=n.y}var h=Math.cos(s),d=Math.sin(s),u=t.vertex1,p=t.vertex2,v=t.vertex3,m=u.x-r,g=u.y-i;u.set(m*h-g*d+r,m*d+g*h+i),m=p.x-r,g=p.y-i,p.set(m*h-g*d+r,m*d+g*h+i),m=v.x-r,g=v.y-i,v.set(m*h-g*d+r,m*d+g*h+i)};o.exports=x},85769:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(75512),a=t(70015),r=new s({Extends:a,initialize:function(n,h,d,u,p,v,m,g,T,w){v===void 0&&(v=16777215),m===void 0&&(m=1),g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=0),a.call(this,n,h,d),this.vx=0,this.vy=0,this.vz=0,this.nx=g,this.ny=T,this.nz=w,this.u=u,this.v=p,this.color=v,this.alpha=m,this.tx=0,this.ty=0,this.ta=0,this.tu=u,this.tv=p},setUVs:function(i,n){return this.u=i,this.v=n,this.tu=i,this.tv=n,this},scrollUV:function(i,n){return this.tu+=i,this.tv+=n,this},scaleUV:function(i,n){return this.tu=this.u*i,this.tv=this.v*n,this},transformCoordinatesLocal:function(i,n,h,d){var u=this.x,p=this.y,v=this.z,m=i.val,g=u*m[0]+p*m[4]+v*m[8]+m[12],T=u*m[1]+p*m[5]+v*m[9]+m[13],w=u*m[2]+p*m[6]+v*m[10]+m[14],b=u*m[3]+p*m[7]+v*m[11]+m[15];this.vx=g/b*n,this.vy=-(T/b)*h,d<=0?this.vz=w/b:this.vz=-(w/b)},resize:function(i,n,h,d,u,p){return this.x=i,this.y=n,this.vx=this.x*h,this.vy=-this.y*d,this.vz=0,u<.5?this.vx+=h*(.5-u):u>.5&&(this.vx-=h*(u-.5)),p<.5?this.vy+=d*(.5-p):p>.5&&(this.vy-=d*(p-.5)),this},update:function(i,n,h,d,u,p,v,m){var g=this.vx*i+this.vy*h+u,T=this.vx*n+this.vy*d+p;return v&&(g=Math.round(g),T=Math.round(T)),this.tx=g,this.ty=T,this.ta=this.alpha*m,this},load:function(i,n,h,d,u){return i[++h]=this.tx,i[++h]=this.ty,i[++h]=this.tu,i[++h]=this.tv,i[++h]=d,i[++h]=u,n[++h]=l.getTintAppendFloatAlpha(this.color,this.ta),h}});o.exports=r},14293:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Face:t(18693),GenerateGridVerts:t(99425),GenerateObjVerts:t(53267),GenerateVerts:t(67623),ParseObj:t(27291),ParseObjMaterial:t(76799),RotateFace:t(15313),Vertex:t(85769)};o.exports=s},77601:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))};o.exports=x},38933:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a){return new s(a.x,a.y)};o.exports=l},47103:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s.setTo(t.x,t.y)};o.exports=x},13625:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x===s.x&&t.y===s.y};o.exports=x},12536:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))};o.exports=x},54205:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){if(r===void 0&&(r=new s),!Array.isArray(a))throw new Error("GetCentroid points argument must be an array");var i=a.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(i===1)r.x=a[0].x,r.y=a[0].y;else{for(var n=0;n<i;n++)r.x+=a[n].x,r.y+=a[n].y;r.x/=i,r.y/=i}return r};o.exports=l},50083:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)};o.exports=x},82712:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.x*t.x+t.y*t.y};o.exports=x},20052:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r){r===void 0&&(r=new s);for(var i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,u=0;u<a.length;u++){var p=a[u];p.x>i&&(i=p.x),p.x<n&&(n=p.x),p.y>h&&(h=p.y),p.y<d&&(d=p.y)}return r.x=n,r.y=d,r.width=i-n,r.height=h-d,r};o.exports=l},77154:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i,n){return i===void 0&&(i=0),n===void 0&&(n=new s),n.x=a.x+(r.x-a.x)*i,n.y=a.y+(r.y-a.y)*i,n};o.exports=l},42397:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.setTo(t.y,t.x)};o.exports=x},59464:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.setTo(-a.x,-a.y)};o.exports=l},79967:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(52394),a=new s({initialize:function(i,n){i===void 0&&(i=0),n===void 0&&(n=i),this.type=l.POINT,this.x=i,this.y=n},setTo:function(r,i){return r===void 0&&(r=0),i===void 0&&(i=r),this.x=r,this.y=i,this}});o.exports=a},53581:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(82712),a=function(r,i,n){n===void 0&&(n=new s);var h=r.x*i.x+r.y*i.y,d=h/l(i);return d!==0&&(n.x=d*i.x,n.y=d*i.y),n};o.exports=a},50817:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){i===void 0&&(i=new s);var n=a.x*r.x+a.y*r.y;return n!==0&&(i.x=n*r.x,i.y=n*r.y),i};o.exports=l},40525:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50083),l=function(a,r){if(a.x!==0||a.y!==0){var i=s(a);a.x/=i,a.y/=i}return a.x*=r,a.y*=r,a};o.exports=l},63472:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967);s.Ceil=t(77601),s.Clone=t(38933),s.CopyFrom=t(47103),s.Equals=t(13625),s.Floor=t(12536),s.GetCentroid=t(54205),s.GetMagnitude=t(50083),s.GetMagnitudeSq=t(82712),s.GetRectangleFromPoints=t(20052),s.Interpolate=t(77154),s.Invert=t(42397),s.Negative=t(59464),s.Project=t(53581),s.ProjectUnit=t(50817),s.SetMagnitude=t(40525),o.exports=s},19631:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8580),l=function(a){return new s(a.points)};o.exports=l},45604:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){for(var a=!1,r=-1,i=t.points.length-1;++r<t.points.length;i=r){var n=t.points[r].x,h=t.points[r].y,d=t.points[i].x,u=t.points[i].y;(h<=l&&l<u||u<=l&&l<h)&&s<(d-n)*(l-h)/(u-h)+n&&(a=!a)}return a};o.exports=x},87289:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45604),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},11117:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function x(G,k,N){N=N||2;var B=k&&k.length,U=B?k[0]*N:G.length,W=t(G,0,U,N,!0),K=[];if(!W||W.next===W.prev)return K;var q,_,rt,ft,vt,mt,yt;if(B&&(W=h(G,k,W,N)),G.length>80*N){q=rt=G[0],_=ft=G[1];for(var xt=N;xt<U;xt+=N)vt=G[xt],mt=G[xt+1],vt<q&&(q=vt),mt<_&&(_=mt),vt>rt&&(rt=vt),mt>ft&&(ft=mt);yt=Math.max(rt-q,ft-_),yt=yt!==0?32767/yt:0}return l(W,K,N,q,_,yt,0),K}function t(G,k,N,B,U){var W,K;if(U===J(G,k,N,B)>0)for(W=k;W<N;W+=B)K=z(W,G[W],G[W+1],K);else for(W=N-B;W>=k;W-=B)K=z(W,G[W],G[W+1],K);return K&&R(K,K.next)&&(X(K),K=K.next),K}function s(G,k){if(!G)return G;k||(k=G);var N=G,B;do if(B=!1,!N.steiner&&(R(N,N.next)||A(N.prev,N,N.next)===0)){if(X(N),N=k=N.prev,N===N.next)break;B=!0}else N=N.next;while(B||N!==k);return k}function l(G,k,N,B,U,W,K){if(G){!K&&W&&m(G,B,U,W);for(var q=G,_,rt;G.prev!==G.next;){if(_=G.prev,rt=G.next,W?r(G,B,U,W):a(G)){k.push(_.i/N|0),k.push(G.i/N|0),k.push(rt.i/N|0),X(G),G=rt.next,q=rt.next;continue}if(G=rt,G===q){K?K===1?(G=i(s(G),k,N),l(G,k,N,B,U,W,2)):K===2&&n(G,k,N,B,U,W):l(s(G),k,N,B,U,W,1);break}}}}function a(G){var k=G.prev,N=G,B=G.next;if(A(k,N,B)>=0)return!1;for(var U=k.x,W=N.x,K=B.x,q=k.y,_=N.y,rt=B.y,ft=U<W?U<K?U:K:W<K?W:K,vt=q<_?q<rt?q:rt:_<rt?_:rt,mt=U>W?U>K?U:K:W>K?W:K,yt=q>_?q>rt?q:rt:_>rt?_:rt,xt=B.next;xt!==k;){if(xt.x>=ft&&xt.x<=mt&&xt.y>=vt&&xt.y<=yt&&b(U,q,W,_,K,rt,xt.x,xt.y)&&A(xt.prev,xt,xt.next)>=0)return!1;xt=xt.next}return!0}function r(G,k,N,B){var U=G.prev,W=G,K=G.next;if(A(U,W,K)>=0)return!1;for(var q=U.x,_=W.x,rt=K.x,ft=U.y,vt=W.y,mt=K.y,yt=q<_?q<rt?q:rt:_<rt?_:rt,xt=ft<vt?ft<mt?ft:mt:vt<mt?vt:mt,It=q>_?q>rt?q:rt:_>rt?_:rt,Gt=ft>vt?ft>mt?ft:mt:vt>mt?vt:mt,Zt=T(yt,xt,k,N,B),Bt=T(It,Gt,k,N,B),At=G.prevZ,kt=G.nextZ;At&&At.z>=Zt&&kt&&kt.z<=Bt;){if(At.x>=yt&&At.x<=It&&At.y>=xt&&At.y<=Gt&&At!==U&&At!==K&&b(q,ft,_,vt,rt,mt,At.x,At.y)&&A(At.prev,At,At.next)>=0||(At=At.prevZ,kt.x>=yt&&kt.x<=It&&kt.y>=xt&&kt.y<=Gt&&kt!==U&&kt!==K&&b(q,ft,_,vt,rt,mt,kt.x,kt.y)&&A(kt.prev,kt,kt.next)>=0))return!1;kt=kt.nextZ}for(;At&&At.z>=Zt;){if(At.x>=yt&&At.x<=It&&At.y>=xt&&At.y<=Gt&&At!==U&&At!==K&&b(q,ft,_,vt,rt,mt,At.x,At.y)&&A(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;kt&&kt.z<=Bt;){if(kt.x>=yt&&kt.x<=It&&kt.y>=xt&&kt.y<=Gt&&kt!==U&&kt!==K&&b(q,ft,_,vt,rt,mt,kt.x,kt.y)&&A(kt.prev,kt,kt.next)>=0)return!1;kt=kt.nextZ}return!0}function i(G,k,N){var B=G;do{var U=B.prev,W=B.next.next;!R(U,W)&&I(U,B,B.next,W)&&O(U,W)&&O(W,U)&&(k.push(U.i/N|0),k.push(B.i/N|0),k.push(W.i/N|0),X(B),X(B.next),B=G=W),B=B.next}while(B!==G);return s(B)}function n(G,k,N,B,U,W){var K=G;do{for(var q=K.next.next;q!==K.prev;){if(K.i!==q.i&&E(K,q)){var _=L(K,q);K=s(K,K.next),_=s(_,_.next),l(K,k,N,B,U,W,0),l(_,k,N,B,U,W,0);return}q=q.next}K=K.next}while(K!==G)}function h(G,k,N,B){var U=[],W,K,q,_,rt;for(W=0,K=k.length;W<K;W++)q=k[W]*B,_=W<K-1?k[W+1]*B:G.length,rt=t(G,q,_,B,!1),rt===rt.next&&(rt.steiner=!0),U.push(w(rt));for(U.sort(d),W=0;W<U.length;W++)N=u(U[W],N);return N}function d(G,k){return G.x-k.x}function u(G,k){var N=p(G,k);if(!N)return k;var B=L(N,G);return s(B,B.next),s(N,N.next)}function p(G,k){var N=k,B=G.x,U=G.y,W=-1/0,K;do{if(U<=N.y&&U>=N.next.y&&N.next.y!==N.y){var q=N.x+(U-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(q<=B&&q>W&&(W=q,K=N.x<N.next.x?N:N.next,q===B))return K}N=N.next}while(N!==k);if(!K)return null;var _=K,rt=K.x,ft=K.y,vt=1/0,mt;N=K;do B>=N.x&&N.x>=rt&&B!==N.x&&b(U<ft?B:W,U,rt,ft,U<ft?W:B,U,N.x,N.y)&&(mt=Math.abs(U-N.y)/(B-N.x),O(N,G)&&(mt<vt||mt===vt&&(N.x>K.x||N.x===K.x&&v(K,N)))&&(K=N,vt=mt)),N=N.next;while(N!==_);return K}function v(G,k){return A(G.prev,G,k.prev)<0&&A(k.next,G,G.next)<0}function m(G,k,N,B){var U=G;do U.z===0&&(U.z=T(U.x,U.y,k,N,B)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==G);U.prevZ.nextZ=null,U.prevZ=null,g(U)}function g(G){var k,N,B,U,W,K,q,_,rt=1;do{for(N=G,G=null,W=null,K=0;N;){for(K++,B=N,q=0,k=0;k<rt&&(q++,B=B.nextZ,!!B);k++);for(_=rt;q>0||_>0&&B;)q!==0&&(_===0||!B||N.z<=B.z)?(U=N,N=N.nextZ,q--):(U=B,B=B.nextZ,_--),W?W.nextZ=U:G=U,U.prevZ=W,W=U;N=B}W.nextZ=null,rt*=2}while(K>1);return G}function T(G,k,N,B,U){return G=(G-N)*U|0,k=(k-B)*U|0,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,G|k<<1}function w(G){var k=G,N=G;do(k.x<N.x||k.x===N.x&&k.y<N.y)&&(N=k),k=k.next;while(k!==G);return N}function b(G,k,N,B,U,W,K,q){return(U-K)*(k-q)>=(G-K)*(W-q)&&(G-K)*(B-q)>=(N-K)*(k-q)&&(N-K)*(W-q)>=(U-K)*(B-q)}function E(G,k){return G.next.i!==k.i&&G.prev.i!==k.i&&!F(G,k)&&(O(G,k)&&O(k,G)&&D(G,k)&&(A(G.prev,G,k.prev)||A(G,k.prev,k))||R(G,k)&&A(G.prev,G,G.next)>0&&A(k.prev,k,k.next)>0)}function A(G,k,N){return(k.y-G.y)*(N.x-k.x)-(k.x-G.x)*(N.y-k.y)}function R(G,k){return G.x===k.x&&G.y===k.y}function I(G,k,N,B){var U=M(A(G,k,N)),W=M(A(G,k,B)),K=M(A(N,B,G)),q=M(A(N,B,k));return!!(U!==W&&K!==q||U===0&&P(G,N,k)||W===0&&P(G,B,k)||K===0&&P(N,G,B)||q===0&&P(N,k,B))}function P(G,k,N){return k.x<=Math.max(G.x,N.x)&&k.x>=Math.min(G.x,N.x)&&k.y<=Math.max(G.y,N.y)&&k.y>=Math.min(G.y,N.y)}function M(G){return G>0?1:G<0?-1:0}function F(G,k){var N=G;do{if(N.i!==G.i&&N.next.i!==G.i&&N.i!==k.i&&N.next.i!==k.i&&I(N,N.next,G,k))return!0;N=N.next}while(N!==G);return!1}function O(G,k){return A(G.prev,G,G.next)<0?A(G,k,G.next)>=0&&A(G,G.prev,k)>=0:A(G,k,G.prev)<0||A(G,G.next,k)<0}function D(G,k){var N=G,B=!1,U=(G.x+k.x)/2,W=(G.y+k.y)/2;do N.y>W!=N.next.y>W&&N.next.y!==N.y&&U<(N.next.x-N.x)*(W-N.y)/(N.next.y-N.y)+N.x&&(B=!B),N=N.next;while(N!==G);return B}function L(G,k){var N=new H(G.i,G.x,G.y),B=new H(k.i,k.x,k.y),U=G.next,W=k.prev;return G.next=k,k.prev=G,N.next=U,U.prev=N,B.next=N,N.prev=B,W.next=B,B.prev=W,B}function z(G,k,N,B){var U=new H(G,k,N);return B?(U.next=B.next,U.prev=B,B.next.prev=U,B.next=U):(U.prev=U,U.next=U),U}function X(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function H(G,k,N){this.i=G,this.x=k,this.y=N,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}x.deviation=function(G,k,N,B){var U=k&&k.length,W=U?k[0]*N:G.length,K=Math.abs(J(G,0,W,N));if(U)for(var q=0,_=k.length;q<_;q++){var rt=k[q]*N,ft=q<_-1?k[q+1]*N:G.length;K-=Math.abs(J(G,rt,ft,N))}var vt=0;for(q=0;q<B.length;q+=3){var mt=B[q]*N,yt=B[q+1]*N,xt=B[q+2]*N;vt+=Math.abs((G[mt]-G[xt])*(G[yt+1]-G[mt+1])-(G[mt]-G[yt])*(G[xt+1]-G[mt+1]))}return K===0&&vt===0?0:Math.abs((vt-K)/K)};function J(G,k,N,B){for(var U=0,W=k,K=N-B;W<N;W+=B)U+=(G[K]-G[W])*(G[W+1]+G[K+1]),K=W;return U}x.flatten=function(G){for(var k=G[0][0].length,N={vertices:[],holes:[],dimensions:k},B=0,U=0;U<G.length;U++){for(var W=0;W<G[U].length;W++)for(var K=0;K<k;K++)N.vertices.push(G[U][W][K]);U>0&&(B+=G[U-1].length,N.holes.push(B))}return N},o.exports=x},14045:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r){r===void 0&&(r=new s);for(var i=1/0,n=1/0,h=-i,d=-n,u,p=0;p<a.points.length;p++)u=a.points[p],i=Math.min(i,u.x),n=Math.min(n,u.y),h=Math.max(h,u.x),d=Math.max(d,u.y);return r.x=i,r.y=n,r.width=h-i,r.height=d-n,r};o.exports=l},98286:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s=[]);for(var l=0;l<t.points.length;l++)s.push(t.points[l].x),s.push(t.points[l].y);return s};o.exports=x},89294:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=t(88829),a=t(5159),r=function(i,n,h,d){d===void 0&&(d=[]);var u=i.points,p=a(i);!n&&h>0&&(n=p/h);for(var v=0;v<n;v++)for(var m=p*(v/n),g=0,T=0;T<u.length;T++){var w=u[T],b=u[(T+1)%u.length],E=new l(w.x,w.y,b.x,b.y),A=s(E);if(m<g||m>g+A){g+=A;continue}var R=E.getPoint((m-g)/A);d.push(R);break}return d};o.exports=r},5159:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=t(88829),a=function(r){for(var i=r.points,n=0,h=0;h<i.length;h++){var d=i[h],u=i[(h+1)%i.length],p=new l(d.x,d.y,u.x,u.y);n+=s(p)}return n};o.exports=a},8580:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(45604),a=t(89294),r=t(52394),i=new s({initialize:function(h){this.type=r.POLYGON,this.area=0,this.points=[],h&&this.setTo(h)},contains:function(n,h){return l(this,n,h)},setTo:function(n){if(this.area=0,this.points=[],typeof n=="string"&&(n=n.split(" ")),!Array.isArray(n))return this;for(var h,d=0;d<n.length;d++)h={x:0,y:0},typeof n[d]=="number"||typeof n[d]=="string"?(h.x=parseFloat(n[d]),h.y=parseFloat(n[d+1]),d++):Array.isArray(n[d])?(h.x=n[d][0],h.y=n[d][1]):(h.x=n[d].x,h.y=n[d].y),this.points.push(h);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var n=0,h,d,u=0;u<this.points.length-1;u++)h=this.points[u],d=this.points[u+1],n+=(d.x-h.x)*(h.y+d.y);return h=this.points[0],d=this.points[this.points.length-1],n+=(h.x-d.x)*(d.y+h.y),this.area=-n*.5,this.area},getPoints:function(n,h,d){return a(this,n,h,d)}});o.exports=i},32244:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.points.reverse(),t};o.exports=x},95874:o=>{function x(i,n){var h=i.x-n.x,d=i.y-n.y;return h*h+d*d}function t(i,n,h){var d=n.x,u=n.y,p=h.x-d,v=h.y-u;if(p!==0||v!==0){var m=((i.x-d)*p+(i.y-u)*v)/(p*p+v*v);m>1?(d=h.x,u=h.y):m>0&&(d+=p*m,u+=v*m)}return p=i.x-d,v=i.y-u,p*p+v*v}function s(i,n){for(var h=i[0],d=[h],u,p=1,v=i.length;p<v;p++)u=i[p],x(u,h)>n&&(d.push(u),h=u);return h!==u&&d.push(u),d}function l(i,n,h,d,u){for(var p=d,v,m=n+1;m<h;m++){var g=t(i[m],i[n],i[h]);g>p&&(v=m,p=g)}p>d&&(v-n>1&&l(i,n,v,d,u),u.push(i[v]),h-v>1&&l(i,v,h,d,u))}function a(i,n){var h=i.length-1,d=[i[0]];return l(i,0,h,n,d),d.push(i[h]),d}var r=function(i,n,h){n===void 0&&(n=1),h===void 0&&(h=!1);var d=i.points;if(d.length>2){var u=n*n;h||(d=s(d,u)),i.setTo(a(d,u))}return i};o.exports=r},18974:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(s,l){return s[0]=l[0],s[1]=l[1],s},t=function(s){var l,a=[],r=s.points;for(l=0;l<r.length;l++)a.push([r[l].x,r[l].y]);var i=[];for(a.length>0&&i.push(x([0,0],a[0])),l=0;l<a.length-1;l++){var n=a[l],h=a[l+1],d=n[0],u=n[1],p=h[0],v=h[1];i.push([.85*d+.15*p,.85*u+.15*v]),i.push([.15*d+.85*p,.15*u+.85*v])}return a.length>1&&i.push(x([0,0],a[a.length-1])),s.setTo(i)};o.exports=t},23490:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){for(var a=t.points,r=0;r<a.length;r++)a[r].x+=s,a[r].y+=l;return t};o.exports=x},44359:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8580);s.Clone=t(19631),s.Contains=t(45604),s.ContainsPoint=t(87289),s.Earcut=t(11117),s.GetAABB=t(14045),s.GetNumberArray=t(98286),s.GetPoints=t(89294),s.Perimeter=t(5159),s.Reverse=t(32244),s.Simplify=t(95874),s.Smooth=t(18974),s.Translate=t(23490),o.exports=s},1653:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.width*t.height};o.exports=x},33943:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t};o.exports=x},58662:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t};o.exports=x},79993:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t.x=s-t.width/2,t.y=l-t.height/2,t};o.exports=x},81572:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a){return new s(a.x,a.y,a.width,a.height)};o.exports=l},94287:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t.width<=0||t.height<=0?!1:t.x<=s&&t.x+t.width>=s&&t.y<=l&&t.y+t.height>=l};o.exports=x},28687:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(94287),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},73222:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s.width*s.height>t.width*t.height?!1:s.x>t.x&&s.x<t.right&&s.right>t.x&&s.right<t.right&&s.y>t.y&&s.y<t.bottom&&s.bottom>t.y&&s.bottom<t.bottom};o.exports=x},29538:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s.setTo(t.x,t.y,t.width,t.height)};o.exports=x},87279:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s=[]),s.push({x:t.x,y:t.y}),s.push({x:t.right,y:t.y}),s.push({x:t.right,y:t.bottom}),s.push({x:t.x,y:t.bottom}),s};o.exports=x},19989:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height};o.exports=x},92628:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6700),l=function(a,r){var i=s(a);return i<s(r)?a.setSize(r.height*i,r.height):a.setSize(r.width,r.width/i),a.setPosition(r.centerX-a.width/2,r.centerY-a.height/2)};o.exports=l},85028:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6700),l=function(a,r){var i=s(a);return i>s(r)?a.setSize(r.height*i,r.height):a.setSize(r.width,r.width/i),a.setPosition(r.centerX-a.width/2,r.centerY-a.height/2)};o.exports=l},71356:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t};o.exports=x},21687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t};o.exports=x},80222:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(83392),a=function(r,i){if(i===void 0&&(i=new s),r.length===0)return i;for(var n=Number.MAX_VALUE,h=Number.MAX_VALUE,d=l.MIN_SAFE_INTEGER,u=l.MIN_SAFE_INTEGER,p,v,m,g=0;g<r.length;g++)p=r[g],Array.isArray(p)?(v=p[0],m=p[1]):(v=p.x,m=p.y),n=Math.min(n,v),h=Math.min(h,m),d=Math.max(d,v),u=Math.max(u,m);return i.x=n,i.y=h,i.width=d-n,i.height=u-h,i};o.exports=a},75785:(o,x,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r,i,n,h){return h===void 0&&(h=new s),h.setTo(Math.min(a,i),Math.min(r,n),Math.abs(a-i),Math.abs(r-n))};o.exports=l},6700:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.height===0?NaN:t.width/t.height};o.exports=x},35242:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=a.centerX,r.y=a.centerY,r};o.exports=l},47698:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85876),l=t(79967),a=function(r,i,n){if(n===void 0&&(n=new l),i<=0||i>=1)return n.x=r.x,n.y=r.y,n;var h=s(r)*i;return i>.5?(h-=r.width+r.height,h<=r.width?(n.x=r.right-h,n.y=r.bottom):(n.x=r.x,n.y=r.bottom-(h-r.width))):h<=r.width?(n.x=r.x+h,n.y=r.y):(n.x=r.right,n.y=r.y+(h-r.width)),n};o.exports=a},54932:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47698),l=t(85876),a=function(r,i,n,h){h===void 0&&(h=[]),!i&&n>0&&(i=l(r)/n);for(var d=0;d<i;d++){var u=d/i;h.push(s(r,u))}return h};o.exports=a},31591:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=a.width,r.y=a.height,r};o.exports=l},7782:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79993),l=function(a,r,i){var n=a.centerX,h=a.centerY;return a.setSize(a.width+r*2,a.height+i*2),s(a,n,h)};o.exports=l},66217:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(90205),a=function(r,i,n){return n===void 0&&(n=new s),l(r,i)?(n.x=Math.max(r.x,i.x),n.y=Math.max(r.y,i.y),n.width=Math.min(r.right,i.right)-n.x,n.height=Math.min(r.bottom,i.bottom)-n.y):n.setEmpty(),n};o.exports=a},40053:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85876),l=t(79967),a=function(r,i,n,h){if(h===void 0&&(h=[]),!i&&!n)return h;i?n=Math.round(s(r)/i):i=s(r)/n;for(var d=r.x,u=r.y,p=0,v=0;v<n;v++)switch(h.push(new l(d,u)),p){case 0:d+=i,d>=r.right&&(p=1,u+=d-r.right,d=r.right);break;case 1:u+=i,u>=r.bottom&&(p=2,d-=u-r.bottom,u=r.bottom);break;case 2:d-=i,d<=r.left&&(p=3,u-=r.left-d,d=r.left);break;case 3:u-=i,u<=r.top&&(p=0,u=r.top);break}return h};o.exports=a},86673:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){for(var l=t.x,a=t.right,r=t.y,i=t.bottom,n=0;n<s.length;n++)l=Math.min(l,s[n].x),a=Math.max(a,s[n].x),r=Math.min(r,s[n].y),i=Math.max(i,s[n].y);return t.x=l,t.y=r,t.width=a-l,t.height=i-r,t};o.exports=x},14655:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=Math.min(t.x,s.x),a=Math.max(t.right,s.right);t.x=l,t.width=a-l;var r=Math.min(t.y,s.y),i=Math.max(t.bottom,s.bottom);return t.y=r,t.height=i-r,t};o.exports=x},44755:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=Math.min(t.x,s),r=Math.max(t.right,s);t.x=a,t.width=r-a;var i=Math.min(t.y,l),n=Math.max(t.bottom,l);return t.y=i,t.height=n-i,t};o.exports=x},74466:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t.x+=s,t.y+=l,t};o.exports=x},55946:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x+=s.x,t.y+=s.y,t};o.exports=x},97474:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x<s.right&&t.right>s.x&&t.y<s.bottom&&t.bottom>s.y};o.exports=x},85876:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return 2*(t.width+t.height)};o.exports=x},20243:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(75606),a=function(r,i,n){n===void 0&&(n=new s),i=l(i);var h=Math.sin(i),d=Math.cos(i),u=d>0?r.width/2:r.width/-2,p=h>0?r.height/2:r.height/-2;return Math.abs(u*h)<Math.abs(p*d)?p=u*h/d:u=p*d/h,n.x=u+r.centerX,n.y=p+r.centerY,n};o.exports=a},30001:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=a.x+Math.random()*a.width,r.y=a.y+Math.random()*a.height,r};o.exports=l},97691:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17489),l=t(73222),a=t(79967),r=function(i,n,h){if(h===void 0&&(h=new a),l(i,n))switch(s(0,3)){case 0:h.x=i.x+Math.random()*(n.right-i.x),h.y=i.y+Math.random()*(n.top-i.y);break;case 1:h.x=n.x+Math.random()*(i.right-n.x),h.y=n.bottom+Math.random()*(i.bottom-n.bottom);break;case 2:h.x=i.x+Math.random()*(n.x-i.x),h.y=n.y+Math.random()*(i.bottom-n.y);break;case 3:h.x=n.right+Math.random()*(i.right-n.right),h.y=i.y+Math.random()*(n.bottom-i.y);break}return h};o.exports=r},74118:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(94287),a=t(47698),r=t(54932),i=t(52394),n=t(88829),h=t(30001),d=new s({initialize:function(p,v,m,g){p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),g===void 0&&(g=0),this.type=i.RECTANGLE,this.x=p,this.y=v,this.width=m,this.height=g},contains:function(u,p){return l(this,u,p)},getPoint:function(u,p){return a(this,u,p)},getPoints:function(u,p,v){return r(this,u,p,v)},getRandomPoint:function(u){return h(this,u)},setTo:function(u,p,v,m){return this.x=u,this.y=p,this.width=v,this.height=m,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(u,p){return p===void 0&&(p=u),this.x=u,this.y=p,this},setSize:function(u,p){return p===void 0&&(p=u),this.width=u,this.height=p,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(u){return u===void 0&&(u=new n),u.setTo(this.x,this.y,this.right,this.y),u},getLineB:function(u){return u===void 0&&(u=new n),u.setTo(this.right,this.y,this.right,this.bottom),u},getLineC:function(u){return u===void 0&&(u=new n),u.setTo(this.right,this.bottom,this.x,this.bottom),u},getLineD:function(u){return u===void 0&&(u=new n),u.setTo(this.x,this.bottom,this.x,this.y),u},left:{get:function(){return this.x},set:function(u){u>=this.right?this.width=0:this.width=this.right-u,this.x=u}},right:{get:function(){return this.x+this.width},set:function(u){u<=this.x?this.width=0:this.width=u-this.x}},top:{get:function(){return this.y},set:function(u){u>=this.bottom?this.height=0:this.height=this.bottom-u,this.y=u}},bottom:{get:function(){return this.y+this.height},set:function(u){u<=this.y?this.height=0:this.height=u-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});o.exports=d},51828:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.width===s.width&&t.height===s.height};o.exports=x},5691:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return l===void 0&&(l=s),t.width*=s,t.height*=l,t};o.exports=x},58795:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r,i){i===void 0&&(i=new s);var n=Math.min(a.x,r.x),h=Math.min(a.y,r.y),d=Math.max(a.right,r.right)-n,u=Math.max(a.bottom,r.bottom)-h;return i.setTo(n,h,d,u)};o.exports=l},66658:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118);s.Area=t(1653),s.Ceil=t(33943),s.CeilAll=t(58662),s.CenterOn=t(79993),s.Clone=t(81572),s.Contains=t(94287),s.ContainsPoint=t(28687),s.ContainsRect=t(73222),s.CopyFrom=t(29538),s.Decompose=t(87279),s.Equals=t(19989),s.FitInside=t(92628),s.FitOutside=t(85028),s.Floor=t(71356),s.FloorAll=t(21687),s.FromPoints=t(80222),s.FromXY=t(75785),s.GetAspectRatio=t(6700),s.GetCenter=t(35242),s.GetPoint=t(47698),s.GetPoints=t(54932),s.GetSize=t(31591),s.Inflate=t(7782),s.Intersection=t(66217),s.MarchingAnts=t(40053),s.MergePoints=t(86673),s.MergeRect=t(14655),s.MergeXY=t(44755),s.Offset=t(74466),s.OffsetPoint=t(55946),s.Overlaps=t(97474),s.Perimeter=t(85876),s.PerimeterPoint=t(20243),s.Random=t(30001),s.RandomOutside=t(97691),s.SameDimensions=t(51828),s.Scale=t(5691),s.Union=t(58795),o.exports=s},19108:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s=t.x1,l=t.y1,a=t.x2,r=t.y2,i=t.x3,n=t.y3;return Math.abs(((i-s)*(r-l)-(a-s)*(n-l))/2)};o.exports=x},41199:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66349),l=function(a,r,i){var n=i*(Math.sqrt(3)/2),h=a,d=r,u=a+i/2,p=r+n,v=a-i/2,m=r+n;return new s(h,d,u,p,v,m)};o.exports=l},88730:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(11117),l=t(66349),a=function(r,i,n,h,d){i===void 0&&(i=null),n===void 0&&(n=1),h===void 0&&(h=1),d===void 0&&(d=[]);for(var u=s(r,i),p,v,m,g,T,w,b,E,A,R=0;R<u.length;R+=3)p=u[R],v=u[R+1],m=u[R+2],g=r[p*2]*n,T=r[p*2+1]*h,w=r[v*2]*n,b=r[v*2+1]*h,E=r[m*2]*n,A=r[m*2+1]*h,d.push(new l(g,T,w,b,E,A));return d};o.exports=a},3635:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66349),l=function(a,r,i,n){n===void 0&&(n=i);var h=a,d=r,u=a,p=r-n,v=a+i,m=r;return new s(h,d,u,p,v,m)};o.exports=l},1882:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56595),l=t(9640),a=function(r,i,n,h){h===void 0&&(h=s);var d=h(r),u=i-d.x,p=n-d.y;return l(r,u,p)};o.exports=a},56595:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=(a.x1+a.x2+a.x3)/3,r.y=(a.y1+a.y2+a.y3)/3,r};o.exports=l},91835:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736);function l(r,i,n,h){return r*h-i*n}var a=function(r,i){i===void 0&&(i=new s);var n=r.x3,h=r.y3,d=r.x1-n,u=r.y1-h,p=r.x2-n,v=r.y2-h,m=2*l(d,u,p,v),g=l(u,d*d+u*u,v,p*p+v*v),T=l(d,d*d+u*u,p,p*p+v*v);return i.x=n-g/m,i.y=h+T/m,i};o.exports=a},97073:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673),l=function(a,r){r===void 0&&(r=new s);var i=a.x1,n=a.y1,h=a.x2,d=a.y2,u=a.x3,p=a.y3,v=h-i,m=d-n,g=u-i,T=p-n,w=v*(i+h)+m*(n+d),b=g*(i+u)+T*(n+p),E=2*(v*(p-d)-m*(u-h)),A,R;if(Math.abs(E)<1e-6){var I=Math.min(i,h,u),P=Math.min(n,d,p);A=(Math.max(i,h,u)-I)*.5,R=(Math.max(n,d,p)-P)*.5,r.x=I+A,r.y=P+R,r.radius=Math.sqrt(A*A+R*R)}else r.x=(T*w-m*b)/E,r.y=(v*b-g*w)/E,A=r.x-i,R=r.y-n,r.radius=Math.sqrt(A*A+R*R);return r};o.exports=l},75974:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66349),l=function(a){return new s(a.x1,a.y1,a.x2,a.y2,a.x3,a.y3)};o.exports=l},60689:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=t.x3-t.x1,r=t.y3-t.y1,i=t.x2-t.x1,n=t.y2-t.y1,h=s-t.x1,d=l-t.y1,u=a*a+r*r,p=a*i+r*n,v=a*h+r*d,m=i*i+n*n,g=i*h+n*d,T=u*m-p*p,w=T===0?0:1/T,b=(m*v-p*g)*w,E=(u*g-p*v)*w;return b>=0&&E>=0&&b+E<1};o.exports=x},86875:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l===void 0&&(l=!1),a===void 0&&(a=[]);for(var r=t.x3-t.x1,i=t.y3-t.y1,n=t.x2-t.x1,h=t.y2-t.y1,d=r*r+i*i,u=r*n+i*h,p=n*n+h*h,v=d*p-u*u,m=v===0?0:1/v,g,T,w,b,E,A,R=t.x1,I=t.y1,P=0;P<s.length&&(w=s[P].x-R,b=s[P].y-I,E=r*w+i*b,A=n*w+h*b,g=(p*E-u*A)*m,T=(d*A-u*E)*m,!(g>=0&&T>=0&&g+T<1&&(a.push({x:s[P].x,y:s[P].y}),l)));P++);return a};o.exports=x},51532:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60689),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},42538:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)};o.exports=x},18680:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s=[]),s.push({x:t.x1,y:t.y1}),s.push({x:t.x2,y:t.y2}),s.push({x:t.x3,y:t.y3}),s};o.exports=x},29977:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.x1===s.x1&&t.y1===s.y1&&t.x2===s.x2&&t.y2===s.y2&&t.x3===s.x3&&t.y3===s.y3};o.exports=x},56088:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(16028),a=function(r,i,n){n===void 0&&(n=new s);var h=r.getLineA(),d=r.getLineB(),u=r.getLineC();if(i<=0||i>=1)return n.x=h.x1,n.y=h.y1,n;var p=l(h),v=l(d),m=l(u),g=p+v+m,T=g*i,w=0;return T<p?(w=T/p,n.x=h.x1+(h.x2-h.x1)*w,n.y=h.y1+(h.y2-h.y1)*w):T>p+v?(T-=p+v,w=T/m,n.x=u.x1+(u.x2-u.x1)*w,n.y=u.y1+(u.y2-u.y1)*w):(T-=p,w=T/v,n.x=d.x1+(d.x2-d.x1)*w,n.y=d.y1+(d.y2-d.y1)*w),n};o.exports=a},24402:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=t(79967),a=function(r,i,n,h){h===void 0&&(h=[]);var d=r.getLineA(),u=r.getLineB(),p=r.getLineC(),v=s(d),m=s(u),g=s(p),T=v+m+g;!i&&n>0&&(i=T/n);for(var w=0;w<i;w++){var b=T*(w/i),E=0,A=new l;b<v?(E=b/v,A.x=d.x1+(d.x2-d.x1)*E,A.y=d.y1+(d.y2-d.y1)*E):b>v+m?(b-=v+m,E=b/g,A.x=p.x1+(p.x2-p.x1)*E,A.y=p.y1+(p.y2-p.y1)*E):(b-=v,E=b/m,A.x=u.x1+(u.x2-u.x1)*E,A.y=u.y1+(u.y2-u.y1)*E),h.push(A)}return h};o.exports=a},83648:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967);function l(r,i,n,h){var d=r-n,u=i-h,p=d*d+u*u;return Math.sqrt(p)}var a=function(r,i){i===void 0&&(i=new s);var n=r.x1,h=r.y1,d=r.x2,u=r.y2,p=r.x3,v=r.y3,m=l(p,v,d,u),g=l(n,h,p,v),T=l(d,u,n,h),w=m+g+T;return i.x=(n*m+d*g+p*T)/w,i.y=(h*m+u*g+v*T)/w,i};o.exports=a},9640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t.x1+=s,t.y1+=l,t.x2+=s,t.y2+=l,t.x3+=s,t.y3+=l,t};o.exports=x},95290:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=function(a){var r=a.getLineA(),i=a.getLineB(),n=a.getLineC();return s(r)+s(i)+s(n)};o.exports=l},99761:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){r===void 0&&(r=new s);var i=a.x2-a.x1,n=a.y2-a.y1,h=a.x3-a.x1,d=a.y3-a.y1,u=Math.random(),p=Math.random();return u+p>=1&&(u=1-u,p=1-p),r.x=a.x1+(i*u+h*p),r.y=a.y1+(n*u+d*p),r};o.exports=l},21934:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19211),l=t(83648),a=function(r,i){var n=l(r);return s(r,n.x,n.y,i)};o.exports=a},68454:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19211),l=function(a,r,i){return s(a,r.x,r.y,i)};o.exports=l},19211:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=Math.cos(a),i=Math.sin(a),n=t.x1-s,h=t.y1-l;return t.x1=n*r-h*i+s,t.y1=n*i+h*r+l,n=t.x2-s,h=t.y2-l,t.x2=n*r-h*i+s,t.y2=n*i+h*r+l,n=t.x3-s,h=t.y3-l,t.x3=n*r-h*i+s,t.y3=n*i+h*r+l,t};o.exports=x},66349:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(60689),a=t(56088),r=t(24402),i=t(52394),n=t(88829),h=t(99761),d=new s({initialize:function(p,v,m,g,T,w){p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=0),this.type=i.TRIANGLE,this.x1=p,this.y1=v,this.x2=m,this.y2=g,this.x3=T,this.y3=w},contains:function(u,p){return l(this,u,p)},getPoint:function(u,p){return a(this,u,p)},getPoints:function(u,p,v){return r(this,u,p,v)},getRandomPoint:function(u){return h(this,u)},setTo:function(u,p,v,m,g,T){return u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),g===void 0&&(g=0),T===void 0&&(T=0),this.x1=u,this.y1=p,this.x2=v,this.y2=m,this.x3=g,this.y3=T,this},getLineA:function(u){return u===void 0&&(u=new n),u.setTo(this.x1,this.y1,this.x2,this.y2),u},getLineB:function(u){return u===void 0&&(u=new n),u.setTo(this.x2,this.y2,this.x3,this.y3),u},getLineC:function(u){return u===void 0&&(u=new n),u.setTo(this.x3,this.y3,this.x1,this.y1),u},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(u){var p=0;this.x1<=this.x2&&this.x1<=this.x3?p=this.x1-u:this.x2<=this.x1&&this.x2<=this.x3?p=this.x2-u:p=this.x3-u,this.x1-=p,this.x2-=p,this.x3-=p}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(u){var p=0;this.x1>=this.x2&&this.x1>=this.x3?p=this.x1-u:this.x2>=this.x1&&this.x2>=this.x3?p=this.x2-u:p=this.x3-u,this.x1-=p,this.x2-=p,this.x3-=p}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(u){var p=0;this.y1<=this.y2&&this.y1<=this.y3?p=this.y1-u:this.y2<=this.y1&&this.y2<=this.y3?p=this.y2-u:p=this.y3-u,this.y1-=p,this.y2-=p,this.y3-=p}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(u){var p=0;this.y1>=this.y2&&this.y1>=this.y3?p=this.y1-u:this.y2>=this.y1&&this.y2>=this.y3?p=this.y2-u:p=this.y3-u,this.y1-=p,this.y2-=p,this.y3-=p}}});o.exports=d},87619:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66349);s.Area=t(19108),s.BuildEquilateral=t(41199),s.BuildFromPolygon=t(88730),s.BuildRight=t(3635),s.CenterOn=t(1882),s.Centroid=t(56595),s.CircumCenter=t(91835),s.CircumCircle=t(97073),s.Clone=t(75974),s.Contains=t(60689),s.ContainsArray=t(86875),s.ContainsPoint=t(51532),s.CopyFrom=t(42538),s.Decompose=t(18680),s.Equals=t(29977),s.GetPoint=t(56088),s.GetPoints=t(24402),s.InCenter=t(83648),s.Perimeter=t(95290),s.Offset=t(9640),s.Random=t(99761),s.Rotate=t(21934),s.RotateAroundPoint=t(68454),s.RotateAroundXY=t(19211),o.exports=s},27395:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:s,hitAreaCallback:l,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};o.exports=x},18104:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return function(l,a,r,i){var n=t.getPixelAlpha(a,r,i.texture.key,i.frame.name);return n&&n>=s}};o.exports=x},69898:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72687),a=t(6659),r=t(33963),i=t(97081),n=t(71064),h=t(7905),d=t(40398),u=t(37579),p=t(69360),v=t(64462),m=new s({initialize:function(T,w){this.game=T,this.scaleManager,this.canvas,this.config=w,this.enabled=!0,this.events=new a,this.isOver=!0,this.defaultCursor="",this.keyboard=w.inputKeyboard?new n(this):null,this.mouse=w.inputMouse?new h(this):null,this.touch=w.inputTouch?new u(this):null,this.pointers=[],this.pointersTotal=w.inputActivePointers,w.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var b=0;b<=this.pointersTotal;b++){var E=new d(this,b);E.smoothFactor=w.inputSmoothFactor,this.pointers.push(E)}this.mousePointer=w.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new p,this._tempMatrix2=new p,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],T.events.once(i.BOOT,this.boot,this)},boot:function(){var g=this.game,T=g.events;this.canvas=g.canvas,this.scaleManager=g.scale,this.events.emit(r.MANAGER_BOOT),T.on(i.PRE_RENDER,this.preRender,this),T.once(i.DESTROY,this.destroy,this)},setCanvasOver:function(g){this.isOver=!0,this.events.emit(r.GAME_OVER,g)},setCanvasOut:function(g){this.isOver=!1,this.events.emit(r.GAME_OUT,g)},preRender:function(){var g=this.game.loop.now,T=this.game.loop.delta,w=this.game.scene.getScenes(!0,!0);this.time=g,this.events.emit(r.MANAGER_UPDATE);for(var b=0;b<w.length;b++){var E=w[b];if(E.sys.input&&E.sys.input.updatePoll(g,T)&&this.globalTopOnly)return}},setDefaultCursor:function(g){this.defaultCursor=g,this.canvas.style.cursor!==g&&(this.canvas.style.cursor=g)},setCursor:function(g){g.cursor&&(this.canvas.style.cursor=g.cursor)},resetCursor:function(g){g.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(g){g===void 0&&(g=1);var T=[];this.pointersTotal+g>10&&(g=10-this.pointersTotal);for(var w=0;w<g;w++){var b=this.pointers.length,E=new d(this,b);E.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(E),this.pointersTotal++,T.push(E)}return T},updateInputPlugins:function(g,T){var w=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var b=0;b<w.length;b++){var E=w[b];if(E.sys.input){var A=E.sys.input.update(g,T);if(A&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(g){for(var T=this.pointers,w=[],b=0;b<g.changedTouches.length;b++)for(var E=g.changedTouches[b],A=1;A<this.pointersTotal;A++){var R=T[A];if(!R.active){R.touchstart(E,g),this.activePointer=R,w.push(R);break}}this.updateInputPlugins(l.TOUCH_START,w)},onTouchMove:function(g){for(var T=this.pointers,w=[],b=0;b<g.changedTouches.length;b++)for(var E=g.changedTouches[b],A=1;A<this.pointersTotal;A++){var R=T[A];if(R.active&&R.identifier===E.identifier){var I=document.elementFromPoint(E.pageX,E.pageY),P=I===this.canvas;!this.isOver&&P?this.setCanvasOver(g):this.isOver&&!P&&this.setCanvasOut(g),this.isOver&&(R.touchmove(E,g),this.activePointer=R,w.push(R));break}}this.updateInputPlugins(l.TOUCH_MOVE,w)},onTouchEnd:function(g){for(var T=this.pointers,w=[],b=0;b<g.changedTouches.length;b++)for(var E=g.changedTouches[b],A=1;A<this.pointersTotal;A++){var R=T[A];if(R.active&&R.identifier===E.identifier){R.touchend(E,g),w.push(R);break}}this.updateInputPlugins(l.TOUCH_END,w)},onTouchCancel:function(g){for(var T=this.pointers,w=[],b=0;b<g.changedTouches.length;b++)for(var E=g.changedTouches[b],A=1;A<this.pointersTotal;A++){var R=T[A];if(R.active&&R.identifier===E.identifier){R.touchcancel(E,g),w.push(R);break}}this.updateInputPlugins(l.TOUCH_CANCEL,w)},onMouseDown:function(g){var T=this.mousePointer;T.down(g),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(l.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(g){var T=this.mousePointer;T.move(g),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(l.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(g){var T=this.mousePointer;T.up(g),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(l.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(g){var T=this.mousePointer;T.wheel(g),this.activePointer=T,this.updateInputPlugins(l.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(g){var T=this.mouse.locked;this.mousePointer.locked=T,this.events.emit(r.POINTERLOCK_CHANGE,g,T)},inputCandidate:function(g,T){var w=g.input;if(!w||!w.enabled||!g.willRender(T))return!1;var b=!0,E=g.parentContainer;if(E)do{if(!E.willRender(T)){b=!1;break}E=E.parentContainer}while(E);return b},hitTest:function(g,T,w,b){b===void 0&&(b=this._tempHitTest);var E=this._tempPoint,A=w.scrollX,R=w.scrollY;b.length=0;var I=g.x,P=g.y;w.getWorldPoint(I,P,E),g.worldX=E.x,g.worldY=E.y;for(var M={x:0,y:0},F=this._tempMatrix,O=this._tempMatrix2,D=0;D<T.length;D++){var L=T[D];if(this.inputCandidate(L,w)){var z=E.x+A*L.scrollFactorX-A,X=E.y+R*L.scrollFactorY-R;L.parentContainer?(L.getWorldTransformMatrix(F,O),F.applyInverse(z,X,M)):v(z,X,L.x,L.y,L.rotation,L.scaleX,L.scaleY,M),this.pointWithinHitArea(L,M.x,M.y)&&b.push(L)}}return b},pointWithinHitArea:function(g,T,w){T+=g.displayOriginX,w+=g.displayOriginY;var b=g.input;return b&&b.hitAreaCallback(b.hitArea,T,w,g)?(b.localX=T,b.localY=w,!0):!1},pointWithinInteractiveObject:function(g,T,w){return g.hitArea?(T+=g.gameObject.displayOriginX,w+=g.gameObject.displayOriginY,g.localX=T,g.localY=w,g.hitAreaCallback(g.hitArea,T,w,g)):!1},transformPointer:function(g,T,w,b){var E=g.position,A=g.prevPosition;A.x=E.x,A.y=E.y;var R=this.scaleManager.transformX(T),I=this.scaleManager.transformY(w),P=g.smoothFactor;!b||P===0?(E.x=R,E.y=I):(E.x=R*P+A.x*(1-P),E.y=I*P+A.y*(1-P))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(i.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var g=0;g<this.pointers.length;g++)this.pointers[g].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});o.exports=m},12499:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673),l=t(65650),a=t(56694),r=t(72687),i=t(27395),n=t(18104),h=t(53996),d=t(95669),u=t(72313),p=t(33963),v=t(6659),m=t(72632),g=t(52394),T=t(63399),w=t(42911),b=t(91963),E=t(74118),A=t(94287),R=t(7599),I=t(66349),P=t(60689),M=new a({Extends:v,initialize:function(O){v.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new v,this.enabled=!0,this.displayList,this.cameras,T.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(R.BOOT,this.boot,this),O.sys.events.on(R.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(R.DESTROY,this.destroy,this),this.pluginEvents.emit(p.BOOT)},start:function(){var F=this.systems.events;F.on(R.TRANSITION_START,this.transitionIn,this),F.on(R.TRANSITION_OUT,this.transitionOut,this),F.on(R.TRANSITION_COMPLETE,this.transitionComplete,this),F.on(R.PRE_UPDATE,this.preUpdate,this),F.once(R.SHUTDOWN,this.shutdown,this),this.manager.events.on(p.GAME_OUT,this.onGameOut,this),this.manager.events.on(p.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(p.START)},onGameOver:function(F){this.isActive()&&this.emit(p.GAME_OVER,F.timeStamp,F)},onGameOut:function(F){this.isActive()&&this.emit(p.GAME_OUT,F.timeStamp,F)},preUpdate:function(){this.pluginEvents.emit(p.PRE_UPDATE);var F=this._pendingRemoval,O=this._pendingInsertion,D=F.length,L=O.length;if(!(D===0&&L===0)){for(var z=this._list,X=0;X<D;X++){var H=F[X],J=z.indexOf(H);J>-1&&(z.splice(J,1),this.clear(H,!0))}this._pendingRemoval.length=0,this._list=z.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(F,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(p.UPDATE,F,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,L=this.manager,z=L.pointers,X=L.pointersTotal;for(D=0;D<X;D++)z[D].updateMotion();if(this._list.length===0)return!1;var H=this.pollRate;if(H===-1)return!1;if(H>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var J=!1;for(D=0;D<X;D++){var G=0,k=z[D];this._tempZones=[],this._temp=this.hitTestPointer(k),this.sortGameObjects(this._temp,k),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),G+=this.processOverOutEvents(k),this.getDragState(k)===2&&this.processDragThresholdEvent(k,F),G>0&&(J=!0)}return J},update:function(F,O){if(!this.isActive())return!1;for(var D=O.length,L=!1,z=0;z<D;z++){var X=0,H=O[z];switch(this._tempZones=[],this._temp=this.hitTestPointer(H),this.sortGameObjects(this._temp,H),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),F){case r.MOUSE_DOWN:X+=this.processDragDownEvent(H),X+=this.processDownEvents(H),X+=this.processOverOutEvents(H);break;case r.MOUSE_UP:X+=this.processDragUpEvent(H),X+=this.processUpEvents(H),X+=this.processOverOutEvents(H);break;case r.TOUCH_START:X+=this.processDragDownEvent(H),X+=this.processDownEvents(H),X+=this.processOverEvents(H);break;case r.TOUCH_END:case r.TOUCH_CANCEL:X+=this.processDragUpEvent(H),X+=this.processUpEvents(H),X+=this.processOutEvents(H);break;case r.MOUSE_MOVE:case r.TOUCH_MOVE:X+=this.processDragMoveEvent(H),X+=this.processMoveEvents(H),X+=this.processOverOutEvents(H);break;case r.MOUSE_WHEEL:X+=this.processWheelEvent(H);break}X>0&&(L=!0)}return this._updatedThisFrame=!0,L},clear:function(F,O){O===void 0&&(O=!1),this.disable(F);var D=F.input;D&&(this.removeDebug(F),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,F.input=null),O||this.queueForRemoval(F);var L=this._draggable.indexOf(F);return L>-1&&this._draggable.splice(L,1),F},disable:function(F){var O=F.input;O&&(O.enabled=!1,O.dragState=0);var D=this._temp,L=this._drag,z=this._over,X=this.manager,H=D.indexOf(F);H>-1&&D.splice(H,1);for(var J=0;J<X.pointersTotal;J++)H=L[J].indexOf(F),H>-1&&L[J].splice(H,1),H=z[J].indexOf(F),H>-1&&(z[J].splice(H,1),X.resetCursor(O));return this},enable:function(F,O,D,L){return L===void 0&&(L=!1),F.input?F.input.enabled=!0:this.setHitArea(F,O,D),F.input&&L&&!F.input.dropZone&&(F.input.dropZone=L),this},hitTestPointer:function(F){for(var O=this.cameras.getCamerasBelowPointer(F),D=0;D<O.length;D++){for(var L=O[D],z=this.manager.hitTest(F,this._list,L),X=0;X<z.length;X++){var H=z[X];H.input.dropZone&&this._tempZones.push(H)}if(z.length>0)return F.camera=L,z}return F.camera=O[0],[]},processDownEvents:function(F){var O=0,D=this._temp,L=this._eventData,z=this._eventContainer;L.cancelled=!1;for(var X=!1,H=0;H<D.length;H++){var J=D[H];if(!(!J.input||!J.input.enabled)){if(O++,J.emit(p.GAMEOBJECT_POINTER_DOWN,F,J.input.localX,J.input.localY,z),L.cancelled||!J.input||!J.input.enabled){X=!0;break}if(this.emit(p.GAMEOBJECT_DOWN,F,J,z),L.cancelled||!J.input){X=!0;break}}}return!X&&this.manager&&(F.downElement===this.manager.game.canvas?this.emit(p.POINTER_DOWN,F,D):this.emit(p.POINTER_DOWN_OUTSIDE,F)),O},getDragState:function(F){return this._dragState[F.id]},setDragState:function(F,O){this._dragState[F.id]=O},processDragThresholdEvent:function(F,O){var D=!1,L=this.dragTimeThreshold,z=this.dragDistanceThreshold;if((z>0&&h(F.x,F.y,F.downX,F.downY)>=z||L>0&&O>=F.downTime+L)&&(D=!0),D)return this.setDragState(F,3),this.processDragStartList(F)},processDragStartList:function(F){if(this.getDragState(F)!==3)return 0;for(var O=this._drag[F.id],D=0;D<O.length;D++){var L=O[D],z=L.input;z.dragState=2,z.dragStartX=L.x,z.dragStartY=L.y,z.dragStartXGlobal=F.worldX,z.dragStartYGlobal=F.worldY,z.dragX=z.dragStartXGlobal-z.dragStartX,z.dragY=z.dragStartYGlobal-z.dragStartY,L.emit(p.GAMEOBJECT_DRAG_START,F,z.dragX,z.dragY),this.emit(p.DRAG_START,F,L)}return this.setDragState(F,4),O.length},processDragDownEvent:function(F){var O=this._temp;if(this._draggable.length===0||O.length===0||!F.primaryDown||this.getDragState(F)!==0)return 0;this.setDragState(F,1);for(var D=[],L=0;L<O.length;L++){var z=O[L];z.input.draggable&&z.input.dragState===0&&D.push(z)}return D.length===0?(this.setDragState(F,0),0):(D.length>1&&(this.sortGameObjects(D,F),this.topOnly&&D.splice(1)),this._drag[F.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(F,3),this.processDragStartList(F)):(this.setDragState(F,2),0))},processDragMoveEvent:function(F){if(this.getDragState(F)===2&&this.processDragThresholdEvent(F,this.manager.game.loop.now),this.getDragState(F)!==4)return 0;for(var O=this._tempZones,D=this._drag[F.id],L=0;L<D.length;L++){var z=D[L],X=z.input,H=X.target;if(H){var J=O.indexOf(H);J===0?(z.emit(p.GAMEOBJECT_DRAG_OVER,F,H),this.emit(p.DRAG_OVER,F,z,H)):J>0?(z.emit(p.GAMEOBJECT_DRAG_LEAVE,F,H),this.emit(p.DRAG_LEAVE,F,z,H),X.target=O[0],H=X.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,F,H),this.emit(p.DRAG_ENTER,F,z,H)):(z.emit(p.GAMEOBJECT_DRAG_LEAVE,F,H),this.emit(p.DRAG_LEAVE,F,z,H),O[0]?(X.target=O[0],H=X.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,F,H),this.emit(p.DRAG_ENTER,F,z,H)):X.target=null)}else!H&&O[0]&&(X.target=O[0],H=X.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,F,H),this.emit(p.DRAG_ENTER,F,z,H));var G,k;if(!z.parentContainer)G=F.worldX-X.dragX,k=F.worldY-X.dragY;else{var N=F.worldX-X.dragStartXGlobal,B=F.worldY-X.dragStartYGlobal,U=z.getParentRotation(),W=N*Math.cos(U)+B*Math.sin(U),K=B*Math.cos(U)-N*Math.sin(U);W*=1/z.parentContainer.scaleX,K*=1/z.parentContainer.scaleY,G=W+X.dragStartX,k=K+X.dragStartY}z.emit(p.GAMEOBJECT_DRAG,F,G,k),this.emit(p.DRAG,F,z,G,k)}return D.length},processDragUpEvent:function(F){for(var O=this._drag[F.id],D=0;D<O.length;D++){var L=O[D],z=L.input;if(z&&z.dragState===2){z.dragState=0,z.dragX=z.localX-L.displayOriginX,z.dragY=z.localY-L.displayOriginY;var X=!1,H=z.target;H&&(L.emit(p.GAMEOBJECT_DROP,F,H),this.emit(p.DROP,F,L,H),z.target=null,X=!0),L.input&&L.input.enabled&&(L.emit(p.GAMEOBJECT_DRAG_END,F,z.dragX,z.dragY,X),this.emit(p.DRAG_END,F,L,X))}}return this.setDragState(F,0),O.splice(0),0},processMoveEvents:function(F){var O=0,D=this._temp,L=this._eventData,z=this._eventContainer;L.cancelled=!1;for(var X=!1,H=0;H<D.length;H++){var J=D[H];if(!(!J.input||!J.input.enabled)){if(O++,J.emit(p.GAMEOBJECT_POINTER_MOVE,F,J.input.localX,J.input.localY,z),L.cancelled||!J.input||!J.input.enabled){X=!0;break}if(this.emit(p.GAMEOBJECT_MOVE,F,J,z),L.cancelled||!J.input||!J.input.enabled){X=!0;break}if(this.topOnly)break}}return X||this.emit(p.POINTER_MOVE,F,D),O},processWheelEvent:function(F){var O=0,D=this._temp,L=this._eventData,z=this._eventContainer;L.cancelled=!1;for(var X=!1,H=F.deltaX,J=F.deltaY,G=F.deltaZ,k=0;k<D.length;k++){var N=D[k];if(!(!N.input||!N.input.enabled)){if(O++,N.emit(p.GAMEOBJECT_POINTER_WHEEL,F,H,J,G,z),L.cancelled||!N.input||!N.input.enabled){X=!0;break}if(this.emit(p.GAMEOBJECT_WHEEL,F,N,H,J,G,z),L.cancelled||!N.input||!N.input.enabled){X=!0;break}}}return X||this.emit(p.POINTER_WHEEL,F,D,H,J,G),O},processOverEvents:function(F){var O=this._temp,D=0,L=O.length,z=[];if(L>0){var X=this.manager,H=this._eventData,J=this._eventContainer;H.cancelled=!1;for(var G=!1,k=0;k<L;k++){var N=O[k];if(!(!N.input||!N.input.enabled)){if(z.push(N),X.setCursor(N.input),N.emit(p.GAMEOBJECT_POINTER_OVER,F,N.input.localX,N.input.localY,J),D++,H.cancelled||!N.input||!N.input.enabled){G=!0;break}if(this.emit(p.GAMEOBJECT_OVER,F,N,J),H.cancelled||!N.input||!N.input.enabled){G=!0;break}}}G||this.emit(p.POINTER_OVER,F,z)}return this._over[F.id]=z,D},processOutEvents:function(F){var O=this._over[F.id],D=0,L=O.length;if(L>0){var z=this.manager,X=this._eventData,H=this._eventContainer;X.cancelled=!1;var J=!1;this.sortGameObjects(O,F);for(var G=0;G<L;G++){var k=O[G];if(k=O[G],!(!k.input||!k.input.enabled)){if(z.resetCursor(k.input),k.emit(p.GAMEOBJECT_POINTER_OUT,F,H),D++,X.cancelled||!k.input||!k.input.enabled){J=!0;break}if(this.emit(p.GAMEOBJECT_OUT,F,k,H),X.cancelled||!k.input||!k.input.enabled){J=!0;break}J||this.emit(p.POINTER_OUT,F,O)}}this._over[F.id]=[]}return D},processOverOutEvents:function(F){var O=this._temp,D,L,z=[],X=[],H=[],J=this._over[F.id],G=this._drag[F.id],k=this.manager;for(D=0;D<J.length;D++)L=J[D],O.indexOf(L)===-1&&G.indexOf(L)===-1?z.push(L):H.push(L);for(D=0;D<O.length;D++)L=O[D],J.indexOf(L)===-1&&X.push(L);var N=z.length,B=0,U=this._eventData,W=this._eventContainer;U.cancelled=!1;var K=!1;if(N>0){for(this.sortGameObjects(z,F),D=0;D<N;D++)if(L=z[D],!(!L.input||!L.input.enabled)){if(k.resetCursor(L.input),L.emit(p.GAMEOBJECT_POINTER_OUT,F,W),B++,U.cancelled||!L.input||!L.input.enabled){K=!0;break}if(this.emit(p.GAMEOBJECT_OUT,F,L,W),U.cancelled||!L.input||!L.input.enabled){K=!0;break}}K||this.emit(p.POINTER_OUT,F,z)}if(N=X.length,U.cancelled=!1,K=!1,N>0){for(this.sortGameObjects(X,F),D=0;D<N;D++)if(L=X[D],!(!L.input||!L.input.enabled)){if(k.setCursor(L.input),L.emit(p.GAMEOBJECT_POINTER_OVER,F,L.input.localX,L.input.localY,W),B++,U.cancelled||!L.input||!L.input.enabled){K=!0;break}if(this.emit(p.GAMEOBJECT_OVER,F,L,W),U.cancelled||!L.input||!L.input.enabled){K=!0;break}}K||this.emit(p.POINTER_OVER,F,X)}return J=H.concat(X),this._over[F.id]=this.sortGameObjects(J,F),B},processUpEvents:function(F){var O=this._temp,D=this._eventData,L=this._eventContainer;D.cancelled=!1;for(var z=!1,X=0;X<O.length;X++){var H=O[X];if(!(!H.input||!H.input.enabled)){if(H.emit(p.GAMEOBJECT_POINTER_UP,F,H.input.localX,H.input.localY,L),D.cancelled||!H.input||!H.input.enabled){z=!0;break}if(this.emit(p.GAMEOBJECT_UP,F,H,L),D.cancelled||!H.input||!H.input.enabled){z=!0;break}}}return!z&&this.manager&&(F.upElement===this.manager.game.canvas?this.emit(p.POINTER_UP,F,O):this.emit(p.POINTER_UP_OUTSIDE,F)),O.length},queueForInsertion:function(F){return this._pendingInsertion.indexOf(F)===-1&&this._list.indexOf(F)===-1&&this._pendingInsertion.push(F),this},queueForRemoval:function(F){return this._pendingRemoval.push(F),this},setDraggable:function(F,O){O===void 0&&(O=!0),Array.isArray(F)||(F=[F]);for(var D=0;D<F.length;D++){var L=F[D];L.input.draggable=O;var z=this._draggable.indexOf(L);O&&z===-1?this._draggable.push(L):!O&&z>-1&&this._draggable.splice(z,1)}return this},makePixelPerfect:function(F){F===void 0&&(F=1);var O=this.systems.textures;return n(O,F)},setHitArea:function(F,O,D){if(O===void 0)return this.setHitAreaFromTexture(F);Array.isArray(F)||(F=[F]);var L=!1,z=!1,X=!1,H=!1,J=!1,G=!0;if(w(O)){var k=O;O=m(k,"hitArea",null),D=m(k,"hitAreaCallback",null),L=m(k,"draggable",!1),z=m(k,"dropZone",!1),X=m(k,"cursor",!1),H=m(k,"useHandCursor",!1),J=m(k,"pixelPerfect",!1);var N=m(k,"alphaTolerance",1);J&&(O={},D=this.makePixelPerfect(N)),(!O||!D)&&(this.setHitAreaFromTexture(F),G=!1)}else typeof O=="function"&&!D&&(D=O,O={});for(var B=0;B<F.length;B++){var U=F[B];if(J&&U.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var W=U.input?U.input:i(U,O,D);W.customHitArea=G,W.dropZone=z,W.cursor=H?"pointer":X,U.input=W,L&&this.setDraggable(U),this.queueForInsertion(U)}return this},setHitAreaCircle:function(F,O,D,L,z){z===void 0&&(z=l);var X=new s(O,D,L);return this.setHitArea(F,X,z)},setHitAreaEllipse:function(F,O,D,L,z,X){X===void 0&&(X=u);var H=new d(O,D,L,z);return this.setHitArea(F,H,X)},setHitAreaFromTexture:function(F,O){O===void 0&&(O=A),Array.isArray(F)||(F=[F]);for(var D=0;D<F.length;D++){var L=F[D],z=L.frame,X=0,H=0;if(L.width?(X=L.width,H=L.height):z&&(X=z.realWidth,H=z.realHeight),L.type==="Container"&&(X===0||H===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}X!==0&&H!==0&&(L.input=i(L,new E(0,0,X,H),O),this.queueForInsertion(L))}return this},setHitAreaRectangle:function(F,O,D,L,z,X){X===void 0&&(X=A);var H=new E(O,D,L,z);return this.setHitArea(F,H,X)},setHitAreaTriangle:function(F,O,D,L,z,X,H,J){J===void 0&&(J=P);var G=new I(O,D,L,z,X,H);return this.setHitArea(F,G,J)},enableDebug:function(F,O){O===void 0&&(O=65280);var D=F.input;if(!D||!D.hitArea)return this;var L=D.hitArea,z=L.type,X=D.hitAreaDebug,H=this.systems.add,J=this.systems.updateList;X&&(J.remove(X),X.destroy(),X=null);var G=0,k=0;switch(z){case g.CIRCLE:X=H.arc(0,0,L.radius),G=L.x-L.radius,k=L.y-L.radius;break;case g.ELLIPSE:X=H.ellipse(0,0,L.width,L.height),G=L.x-L.width/2,k=L.y-L.height/2;break;case g.LINE:X=H.line(0,0,L.x1,L.y1,L.x2,L.y2);break;case g.POLYGON:X=H.polygon(0,0,L.points);break;case g.RECTANGLE:X=H.rectangle(0,0,L.width,L.height),G=L.x,k=L.y;break;case g.TRIANGLE:X=H.triangle(0,0,L.x1,L.y1,L.x2,L.y2,L.x3,L.y3);break}return X&&(X.isFilled=!1,X.strokeColor=O,X.preUpdate=function(){X.setStrokeStyle(1/F.scale,X.strokeColor),X.setDisplayOrigin(F.displayOriginX,F.displayOriginY);var N=F.x,B=F.y,U=F.rotation,W=F.scaleX,K=F.scaleY;if(F.parentContainer){var q=F.getWorldTransformMatrix();N=q.tx,B=q.ty,U=q.rotation,W=q.scaleX,K=q.scaleY}X.setRotation(U),X.setScale(W,K),X.setPosition(N+G*W,B+k*K),X.setScrollFactor(F.scrollFactorX,F.scrollFactorY),X.setDepth(F.depth)},J.add(X),D.hitAreaDebug=X),this},removeDebug:function(F){var O=F.input;if(O&&O.hitAreaDebug){var D=O.hitAreaDebug;this.systems.updateList.remove(D),D.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(F){return this.pollRate=F,this._pollTimer=0,this},setGlobalTopOnly:function(F){return this.manager.globalTopOnly=F,this},setTopOnly:function(F){return this.topOnly=F,this},sortGameObjects:function(F,O){if(F.length<2||!O.camera)return F;var D=O.camera.renderList;return F.sort(function(L,z){var X=Math.max(D.indexOf(L),0),H=Math.max(D.indexOf(z),0);return H-X})},sortDropZones:function(F){return F.length<2?F:(this.scene.sys.depthSort(),F.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(F,O){if(!F.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(F);if(F.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-F.parentContainer.getIndex(F);if(F.parentContainer===O)return-1;if(O.parentContainer===F)return 1;for(var D=F.getIndexList(),L=O.getIndexList(),z=Math.min(D.length,L.length),X=0;X<z;X++){var H=D[X],J=L[X];if(H!==J)return J-H}return L.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(F){return this.manager.addPointer(F)},setDefaultCursor:function(F){return this.manager.setDefaultCursor(F),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(p.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var F=0;F<10;F++)this._drag[F]=[],this._over[F]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var D=this.systems.events;D.off(R.TRANSITION_START,this.transitionIn,this),D.off(R.TRANSITION_OUT,this.transitionOut,this),D.off(R.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(R.PRE_UPDATE,this.preUpdate,this),O.events.off(p.GAME_OUT,this.onGameOut,this),O.events.off(p.GAME_OVER,this.onGameOver,this),D.off(R.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var F=this.manager.pointers,O=0;O<F.length;O++)F[O].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(p.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(R.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});b.register("InputPlugin",M,"input"),o.exports=M},63399:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l={},a={};a.register=function(r,i,n,h,d){l[r]={plugin:i,mapping:n,settingsKey:h,configKey:d}},a.getPlugin=function(r){return l[r]},a.install=function(r){var i=r.scene.sys,n=i.settings.input,h=i.game.config;for(var d in l){var u=l[d].plugin,p=l[d].mapping,v=l[d].settingsKey,m=l[d].configKey;s(n,v,h[m])&&(r[p]=new u(r))}},a.remove=function(r){l.hasOwnProperty(r)&&delete l[r]},o.exports=a},40398:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(90447),l=t(56694),a=t(53996),r=t(88456),i=t(44521),n=t(93736),h=t(36580),d=new l({initialize:function(p,v){this.manager=p,this.id=v,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=v===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(u){var p=u.getWorldPoint(this.x,this.y);return this.worldX=p.x,this.worldY=p.y,this},positionToCamera:function(u,p){return u.getWorldPoint(this.x,this.y,p)},updateMotion:function(){var u=this.position.x,p=this.position.y,v=this.midPoint.x,m=this.midPoint.y;if(!(u===v&&p===m)){var g=i(this.motionFactor,v,u),T=i(this.motionFactor,m,p);r(g,u,.1)&&(g=u),r(T,p,.1)&&(T=p),this.midPoint.set(g,T);var w=u-g,b=p-T;this.velocity.set(w,b),this.angle=s(g,T,u,p),this.distance=Math.sqrt(w*w+b*b)}},up:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.button=u.button,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),u.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=u.timeStamp,this.wasTouch=!1)},down:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.button=u.button,this.downElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),u.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),h.macOS&&u.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=u.timeStamp),this.wasTouch=!1},move:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.manager.transformPointer(this,u.pageX,u.pageY,!0),this.locked&&(this.movementX=u.movementX||u.mozMovementX||u.webkitMovementX||0,this.movementY=u.movementY||u.mozMovementY||u.webkitMovementY||0),this.moveTime=u.timeStamp,this.wasTouch=!1},wheel:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.deltaX=u.deltaX,this.deltaY=u.deltaY,this.deltaZ=u.deltaZ,this.wasTouch=!1},touchstart:function(u,p){u.pointerId&&(this.pointerId=u.pointerId),this.identifier=u.identifier,this.target=u.target,this.active=!0,this.buttons=1,this.event=p,this.downElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=p.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(u,p){this.event=p,this.manager.transformPointer(this,u.pageX,u.pageY,!0),this.moveTime=p.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(u,p){this.buttons=0,this.event=p,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(u,p){this.buttons=0,this.event=p,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(u,p){u===void 0&&(u=10),p===void 0&&(p=[]);for(var v=this.prevPosition.x,m=this.prevPosition.y,g=this.position.x,T=this.position.y,w=0;w<u;w++){var b=1/u*w;p[w]={x:i(b,v,g),y:i(b,m,T)}}return p},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(u){this.position.x=u}},y:{get:function(){return this.position.y},set:function(u){this.position.y=u}},time:{get:function(){return this.event?this.event.timeStamp:0}}});o.exports=d},72687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};o.exports=x},14874:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},54168:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},526:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},81623:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"},94472:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},9304:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"},34265:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"},50151:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},98134:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"},56773:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectdown"},45824:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},39578:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"},72072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},82569:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"},70833:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"},81442:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},32936:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"},99658:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectmove"},60515:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectout"},55254:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectover"},34782:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"},41769:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"},65588:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"},61640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"},49342:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"},82662:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"},13058:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectup"},52426:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectwheel"},78072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameout"},1545:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameover"},67137:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},27678:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="process"},22257:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},90379:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerlockchange"},88909:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"},36548:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdownoutside"},18483:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"},22355:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"},7997:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"},66318:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"},94812:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerupoutside"},37310:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"},24196:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"},27053:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"},29413:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},25165:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},33963:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BOOT:t(14874),DESTROY:t(54168),DRAG_END:t(526),DRAG_ENTER:t(81623),DRAG:t(94472),DRAG_LEAVE:t(9304),DRAG_OVER:t(34265),DRAG_START:t(50151),DROP:t(98134),GAME_OUT:t(78072),GAME_OVER:t(1545),GAMEOBJECT_DOWN:t(56773),GAMEOBJECT_DRAG_END:t(45824),GAMEOBJECT_DRAG_ENTER:t(39578),GAMEOBJECT_DRAG:t(72072),GAMEOBJECT_DRAG_LEAVE:t(82569),GAMEOBJECT_DRAG_OVER:t(70833),GAMEOBJECT_DRAG_START:t(81442),GAMEOBJECT_DROP:t(32936),GAMEOBJECT_MOVE:t(99658),GAMEOBJECT_OUT:t(60515),GAMEOBJECT_OVER:t(55254),GAMEOBJECT_POINTER_DOWN:t(34782),GAMEOBJECT_POINTER_MOVE:t(41769),GAMEOBJECT_POINTER_OUT:t(65588),GAMEOBJECT_POINTER_OVER:t(61640),GAMEOBJECT_POINTER_UP:t(49342),GAMEOBJECT_POINTER_WHEEL:t(82662),GAMEOBJECT_UP:t(13058),GAMEOBJECT_WHEEL:t(52426),MANAGER_BOOT:t(67137),MANAGER_PROCESS:t(27678),MANAGER_UPDATE:t(22257),POINTER_DOWN:t(88909),POINTER_DOWN_OUTSIDE:t(36548),POINTER_MOVE:t(18483),POINTER_OUT:t(22355),POINTER_OVER:t(7997),POINTER_UP:t(66318),POINTER_UP_OUTSIDE:t(94812),POINTER_WHEEL:t(37310),POINTERLOCK_CHANGE:t(90379),PRE_UPDATE:t(24196),SHUTDOWN:t(27053),START:t(29413),UPDATE:t(25165)}},70848:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i){this.pad=r,this.events=r.events,this.index=i,this.value=0,this.threshold=.1},update:function(a){this.value=a},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});o.exports=l},21274:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(43200),a=new s({initialize:function(i,n){this.pad=i,this.events=i.manager,this.index=n,this.value=0,this.threshold=1,this.pressed=!1},update:function(r){this.value=r;var i=this.pad,n=this.index;r>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(l.BUTTON_DOWN,i,this,r),this.pad.emit(l.GAMEPAD_BUTTON_DOWN,n,r,this)):this.pressed&&(this.pressed=!1,this.events.emit(l.BUTTON_UP,i,this,r),this.pad.emit(l.GAMEPAD_BUTTON_UP,n,r,this))},destroy:function(){this.pad=null,this.events=null}});o.exports=a},75956:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70848),l=t(21274),a=t(56694),r=t(6659),i=t(93736),n=new a({Extends:r,initialize:function(d,u){r.call(this),this.manager=d,this.pad=u,this.id=u.id,this.index=u.index;for(var p=[],v=0;v<u.buttons.length;v++)p.push(new l(this,v));this.buttons=p;var m=[];for(v=0;v<u.axes.length;v++)m.push(new s(this,v));this.axes=m,this.vibration=u.vibrationActuator;var g={value:0,pressed:!1};this._LCLeft=p[14]?p[14]:g,this._LCRight=p[15]?p[15]:g,this._LCTop=p[12]?p[12]:g,this._LCBottom=p[13]?p[13]:g,this._RCLeft=p[2]?p[2]:g,this._RCRight=p[1]?p[1]:g,this._RCTop=p[3]?p[3]:g,this._RCBottom=p[0]?p[0]:g,this._FBLeftTop=p[4]?p[4]:g,this._FBLeftBottom=p[6]?p[6]:g,this._FBRightTop=p[5]?p[5]:g,this._FBRightBottom=p[7]?p[7]:g;var T={value:0};this._HAxisLeft=m[0]?m[0]:T,this._VAxisLeft=m[1]?m[1]:T,this._HAxisRight=m[2]?m[2]:T,this._VAxisRight=m[3]?m[3]:T,this.leftStick=new i,this.rightStick=new i,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(h){return this.axes[h].getValue()},setAxisThreshold:function(h){for(var d=0;d<this.axes.length;d++)this.axes[d].threshold=h},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(h){return this.buttons[h].value},isButtonDown:function(h){return this.buttons[h].pressed},update:function(h){if(!(h.timestamp<this._created)){var d,u=this.buttons,p=h.buttons,v=u.length;for(d=0;d<v;d++)u[d].update(p[d].value);var m=this.axes,g=h.axes;for(v=m.length,d=0;d<v;d++)m[d].update(g[d]);v>=2&&(this.leftStick.set(m[0].getValue(),m[1].getValue()),v>=4&&this.rightStick.set(m[2].getValue(),m[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var h;for(h=0;h<this.buttons.length;h++)this.buttons[h].destroy();for(h=0;h<this.axes.length;h++)this.axes[h].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});o.exports=n},1379:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(43200),r=t(75956),i=t(10850),n=t(63399),h=t(33963),d=new s({Extends:l,initialize:function(p){l.call(this),this.scene=p.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=p,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,p.pluginEvents.once(h.BOOT,this.boot,this),p.pluginEvents.on(h.START,this.start,this)},boot:function(){var u=this.scene.sys.game,p=this.settings.input,v=u.config;this.enabled=i(p,"gamepad",v.inputGamepad)&&u.device.input.gamepads,this.target=i(p,"gamepad.target",v.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var u=this,p=this.target,v=function(m){m.defaultPrevented||!u.isActive()||(u.refreshPads(),u.queue.push(m))};this.onGamepadHandler=v,p.addEventListener("gamepadconnected",v,!1),p.addEventListener("gamepaddisconnected",v,!1),this.sceneInputPlugin.pluginEvents.on(h.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(h.UPDATE,this.update);for(var u=0;u<this.gamepads.length;u++)this.gamepads[u].removeAllListeners()},disconnectAll:function(){for(var u=0;u<this.gamepads.length;u++)this.gamepads[u].pad.connected=!1},refreshPads:function(){var u=navigator.getGamepads();if(!u)this.disconnectAll();else for(var p=this.gamepads,v=0;v<u.length;v++){var m=u[v];if(m){var g=m.id,T=m.index,w=p[T];if(w)w.id!==g?(w.destroy(),p[T]=new r(this,m)):w.update(m);else{var b=new r(this,m);p[T]=b,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=b):this._pad3=b:this._pad2=b:this._pad1=b}}}},getAll:function(){for(var u=[],p=this.gamepads,v=0;v<p.length;v++)p[v]&&u.push(p[v]);return u},getPad:function(u){for(var p=this.gamepads,v=0;v<p.length;v++)if(p[v]&&p[v].index===u)return p[v]},update:function(){if(this.enabled){this.refreshPads();var u=this.queue.length;if(u!==0)for(var p=this.queue.splice(0,u),v=0;v<u;v++){var m=p[v],g=this.getPad(m.gamepad.index);m.type==="gamepadconnected"?this.emit(a.CONNECTED,g,m):m.type==="gamepaddisconnected"&&this.emit(a.DISCONNECTED,g,m)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var u=0;u<this.gamepads.length;u++)this.gamepads[u]&&this.gamepads[u].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});n.register("GamepadPlugin",d,"gamepad","gamepad","inputGamepad"),o.exports=d},33171:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DUALSHOCK_4:t(74982),SNES_USB:t(33171),XBOX_360:t(43247)}},17344:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},36635:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},85724:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="connected"},55832:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="disconnected"},772:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},33608:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},43200:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BUTTON_DOWN:t(17344),BUTTON_UP:t(36635),CONNECTED:t(85724),DISCONNECTED:t(55832),GAMEPAD_BUTTON_DOWN:t(772),GAMEPAD_BUTTON_UP:t(33608)}},92636:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Axis:t(70848),Button:t(21274),Events:t(43200),Gamepad:t(75956),GamepadPlugin:t(1379),Configs:t(4898)}},20873:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72687),l=t(98611),a={CreatePixelPerfectHandler:t(18104),CreateInteractiveObject:t(27395),Events:t(33963),Gamepad:t(92636),InputManager:t(69898),InputPlugin:t(12499),InputPluginCache:t(63399),Keyboard:t(28388),Mouse:t(11343),Pointer:t(40398),Touch:t(77423)};a=l(!1,a,s),o.exports=a},71064:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66458),l=t(56694),a=t(97081),r=t(33963),i=t(11873),n=t(72283),h=new l({initialize:function(u){this.manager=u,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=n,this.onKeyUp=n,u.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputKeyboard,this.target=d.inputKeyboardEventTarget,this.addCapture(d.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(a.POST_STEP,this.postUpdate,this)},startListeners:function(){var d=this;this.onKeyDown=function(p){if(!(p.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(p),d.manager.events.emit(r.MANAGER_PROCESS);var v=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;d.preventDefault&&!v&&d.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}},this.onKeyUp=function(p){if(!(p.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(p),d.manager.events.emit(r.MANAGER_PROCESS);var v=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;d.preventDefault&&!v&&d.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}};var u=this.target;u&&(u.addEventListener("keydown",this.onKeyDown,!1),u.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var d=this.target;d.removeEventListener("keydown",this.onKeyDown,!1),d.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var u=this.captures,p=0;p<d.length;p++){var v=d[p];typeof v=="string"&&(v=i[v.trim().toUpperCase()]),u.indexOf(v)===-1&&u.push(v)}this.preventDefault=u.length>0},removeCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var u=this.captures,p=0;p<d.length;p++){var v=d[p];typeof v=="string"&&(v=i[v.toUpperCase()]),s(u,v)}this.preventDefault=u.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(a.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});o.exports=h},89666:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(94030),r=t(97081),i=t(10850),n=t(33963),h=t(63399),d=t(50165),u=t(11873),p=t(95625),v=t(48044),m=t(7599),g=t(84314),T=new s({Extends:l,initialize:function(b){l.call(this),this.game=b.systems.game,this.scene=b.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=b,this.manager=b.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,b.pluginEvents.once(n.BOOT,this.boot,this),b.pluginEvents.on(n.START,this.start,this)},boot:function(){var w=this.settings.input;this.enabled=i(w,"keyboard",!0);var b=i(w,"keyboard.capture",null);b&&this.addCaptures(b),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(n.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this),this.game.events.on(r.BLUR,this.resetKeys,this),this.scene.sys.events.on(m.PAUSE,this.resetKeys,this),this.scene.sys.events.on(m.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(w){return this.manager.addCapture(w),this},removeCapture:function(w){return this.manager.removeCapture(w),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:u.UP,down:u.DOWN,left:u.LEFT,right:u.RIGHT,space:u.SPACE,shift:u.SHIFT})},addKeys:function(w,b,E){b===void 0&&(b=!0),E===void 0&&(E=!1);var A={};if(typeof w=="string"){w=w.split(",");for(var R=0;R<w.length;R++){var I=w[R].trim();I&&(A[I]=this.addKey(I,b,E))}}else for(var P in w)A[P]=this.addKey(w[P],b,E);return A},addKey:function(w,b,E){b===void 0&&(b=!0),E===void 0&&(E=!1);var A=this.keys;if(w instanceof d){var R=A.indexOf(w);return R>-1?A[R]=w:A[w.keyCode]=w,b&&this.addCapture(w.keyCode),w.setEmitOnRepeat(E),w}return typeof w=="string"&&(w=u[w.toUpperCase()]),A[w]||(A[w]=new d(this,w),b&&this.addCapture(w),A[w].setEmitOnRepeat(E)),A[w]},removeKey:function(w,b,E){b===void 0&&(b=!1),E===void 0&&(E=!1);var A=this.keys,R;if(w instanceof d){var I=A.indexOf(w);I>-1&&(R=this.keys[I],this.keys[I]=void 0)}else typeof w=="string"&&(w=u[w.toUpperCase()]);return A[w]&&(R=A[w],A[w]=void 0),R&&(R.plugin=null,E&&this.removeCapture(R.keyCode),b&&R.destroy()),this},removeAllKeys:function(w,b){w===void 0&&(w=!1),b===void 0&&(b=!1);for(var E=this.keys,A=0;A<E.length;A++){var R=E[A];R&&(E[A]=void 0,b&&this.removeCapture(R.keyCode),w&&R.destroy())}return this},createCombo:function(w,b){return new p(this,w,b)},checkDown:function(w,b){if(b===void 0&&(b=0),this.enabled&&w.isDown){var E=g(this.time-w.timeDown,b);if(E>w._tick)return w._tick=E,!0}return!1},update:function(){var w=this.manager.queue,b=w.length;if(!(!this.isActive()||b===0))for(var E=this.keys,A=0;A<b;A++){var R=w[A],I=R.keyCode,P=E[I],M=!1;R.cancelled===void 0&&(R.cancelled=0,R.stopImmediatePropagation=function(){R.cancelled=1},R.stopPropagation=function(){R.cancelled=-1}),R.cancelled!==-1&&(I===this.prevCode&&R.timeStamp===this.prevTime&&R.type===this.prevType||(this.prevCode=I,this.prevTime=R.timeStamp,this.prevType=R.type,R.type==="keydown"?(P&&(M=P.isDown,P.onDown(R)),!R.cancelled&&(!P||!M)&&(v[I]&&this.emit(a.KEY_DOWN+v[I],R),R.cancelled||this.emit(a.ANY_KEY_DOWN,R))):(P&&P.onUp(R),R.cancelled||(v[I]&&this.emit(a.KEY_UP+v[I],R),R.cancelled||this.emit(a.ANY_KEY_UP,R))),R.cancelled===1&&(R.cancelled=0)))}},resetKeys:function(){for(var w=this.keys,b=0;b<w.length;b++)w[b]&&w[b].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(n.MANAGER_PROCESS,this.update,this),this.game.events.off(r.BLUR,this.resetKeys),this.scene.sys.events.off(m.PAUSE,this.resetKeys,this),this.scene.sys.events.off(m.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var w=this.keys,b=0;b<w.length;b++)w[b]&&w[b].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});h.register("KeyboardPlugin",T,"keyboard","keyboard","inputKeyboard"),o.exports=T},60258:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s.timeLastMatched=t.timeStamp,s.index++,s.index===s.size?!0:(s.current=s.keyCodes[s.index],!1)};o.exports=x},95625:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(94030),a=t(72632),r=t(2544),i=t(88754),n=new s({initialize:function(d,u,p){if(p===void 0&&(p={}),u.length<2)return!1;this.manager=d,this.enabled=!0,this.keyCodes=[];for(var v=0;v<u.length;v++){var m=u[v];typeof m=="string"?this.keyCodes.push(m.toUpperCase().charCodeAt(0)):typeof m=="number"?this.keyCodes.push(m):m.hasOwnProperty("keyCode")&&this.keyCodes.push(m.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=a(p,"resetOnWrongKey",!0),this.maxKeyDelay=a(p,"maxKeyDelay",0),this.resetOnMatch=a(p,"resetOnMatch",!1),this.deleteOnMatch=a(p,"deleteOnMatch",!1);var g=this,T=function(w){if(!(g.matched||!g.enabled)){var b=r(w,g);b&&(g.manager.emit(l.COMBO_MATCH,g,w),g.resetOnMatch?i(g):g.deleteOnMatch&&g.destroy())}};this.onKeyDown=T,this.manager.on(l.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(l.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});o.exports=n},2544:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60258),l=function(a,r){if(r.matched)return!0;var i=!1,n=!1;if(a.keyCode===r.current)if(r.index>0&&r.maxKeyDelay>0){var h=r.timeLastMatched+r.maxKeyDelay;a.timeStamp<=h&&(n=!0,i=s(a,r))}else n=!0,i=s(a,r);return!n&&r.resetOnWrongKey&&(r.index=0,r.current=r.keyCodes[0]),i&&(r.timeLastMatched=a.timeStamp,r.matched=!0,r.timeMatched=a.timeStamp),i};o.exports=l},88754:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t};o.exports=x},5044:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown"},40813:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup"},89319:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keycombomatch"},43267:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},78595:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown-"},30056:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup-"},81939:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},94030:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ANY_KEY_DOWN:t(5044),ANY_KEY_UP:t(40813),COMBO_MATCH:t(89319),DOWN:t(43267),KEY_DOWN:t(78595),KEY_UP:t(30056),UP:t(81939)}},28388:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:t(94030),KeyboardManager:t(71064),KeyboardPlugin:t(89666),Key:t(50165),KeyCodes:t(11873),KeyCombo:t(95625),AdvanceKeyCombo:t(60258),ProcessKeyCombo:t(2544),ResetKeyCombo:t(88754),JustDown:t(42460),JustUp:t(53162),DownDuration:t(64964),UpDuration:t(70331)}},64964:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s=50);var l=t.plugin.game.loop.time-t.timeDown;return t.isDown&&l<s};o.exports=x},42460:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t._justDown?(t._justDown=!1,!0):!1};o.exports=x},53162:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t._justUp?(t._justUp=!1,!0):!1};o.exports=x},50165:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(94030),r=new s({Extends:l,initialize:function(n,h){l.call(this),this.plugin=n,this.keyCode=h,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(i){return this.emitOnRepeat=i,this},onDown:function(i){this.originalEvent=i,this.enabled&&(this.altKey=i.altKey,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.location=i.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(a.DOWN,this,i):(this.isDown=!0,this.isUp=!1,this.timeDown=i.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(a.DOWN,this,i)))},onUp:function(i){this.originalEvent=i,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=i.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(a.UP,this,i))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});o.exports=r},11873:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};o.exports=x},48044:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(11873),l={};for(var a in s)l[s[a]]=a;o.exports=l},70331:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s=50);var l=t.plugin.game.loop.time-t.timeUp;return t.isUp&&l<s};o.exports=x},7905:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(90185),a=t(33963),r=t(72283),i=new s({initialize:function(h){this.manager=h,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=r,this.onMouseDown=r,this.onMouseUp=r,this.onMouseDownWindow=r,this.onMouseUpWindow=r,this.onMouseOver=r,this.onMouseOut=r,this.onMouseWheel=r,this.pointerLockChange=r,this.isTop=!0,h.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputMouse,this.target=n.inputMouseEventTarget,this.passive=n.inputMousePassive,this.preventDefaultDown=n.inputMousePreventDefaultDown,this.preventDefaultUp=n.inputMousePreventDefaultUp,this.preventDefaultMove=n.inputMousePreventDefaultMove,this.preventDefaultWheel=n.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},requestPointerLock:function(){if(l.pointerLock){var n=this.target;n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock()}},releasePointerLock:function(){l.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var n=this.target;if(n){var h=this,d=this.manager,u=d.canvas,p=window&&window.focus&&d.game.config.autoFocus;this.onMouseMove=function(m){!m.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseMove(m),h.preventDefaultMove&&m.preventDefault())},this.onMouseDown=function(m){p&&window.focus(),!m.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseDown(m),h.preventDefaultDown&&m.target===u&&m.preventDefault())},this.onMouseDownWindow=function(m){!m.defaultPrevented&&h.enabled&&d&&d.enabled&&m.target!==u&&d.onMouseDown(m)},this.onMouseUp=function(m){!m.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseUp(m),h.preventDefaultUp&&m.target===u&&m.preventDefault())},this.onMouseUpWindow=function(m){!m.defaultPrevented&&h.enabled&&d&&d.enabled&&m.target!==u&&d.onMouseUp(m)},this.onMouseOver=function(m){!m.defaultPrevented&&h.enabled&&d&&d.enabled&&d.setCanvasOver(m)},this.onMouseOut=function(m){!m.defaultPrevented&&h.enabled&&d&&d.enabled&&d.setCanvasOut(m)},this.onMouseWheel=function(m){!m.defaultPrevented&&h.enabled&&d&&d.enabled&&d.onMouseWheel(m),h.preventDefaultWheel&&m.target===u&&m.preventDefault()};var v={passive:!0};if(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mouseover",this.onMouseOver,v),n.addEventListener("mouseout",this.onMouseOut,v),this.preventDefaultWheel?n.addEventListener("wheel",this.onMouseWheel,{passive:!1}):n.addEventListener("wheel",this.onMouseWheel,v),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,v),window.top.addEventListener("mouseup",this.onMouseUpWindow,v)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,v),window.addEventListener("mouseup",this.onMouseUpWindow,v),this.isTop=!1}l.pointerLock&&(this.pointerLockChange=function(m){var g=h.target;h.locked=document.pointerLockElement===g||document.mozPointerLockElement===g||document.webkitPointerLockElement===g,d.onPointerLockChange(m)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),n.removeEventListener("mouseover",this.onMouseOver),n.removeEventListener("mouseout",this.onMouseOut),window&&(n=this.isTop?window.top:window,n.removeEventListener("mousedown",this.onMouseDownWindow),n.removeEventListener("mouseup",this.onMouseUpWindow)),l.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=i},11343:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={MouseManager:t(7905)}},37579:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(33963),a=t(72283),r=new s({initialize:function(n){this.manager=n,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=a,this.onTouchStartWindow=a,this.onTouchMove=a,this.onTouchEnd=a,this.onTouchEndWindow=a,this.onTouchCancel=a,this.onTouchCancelWindow=a,this.isTop=!0,n.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var i=this.manager.config;this.enabled=i.inputTouch,this.target=i.inputTouchEventTarget,this.capture=i.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,i.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),this},startListeners:function(){var i=this.target;if(i){var n=this,h=this.manager,d=h.canvas,u=window&&window.focus&&h.game.config.autoFocus;this.onTouchMove=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onTouchMove(g),n.capture&&g.cancelable&&g.preventDefault())},this.onTouchStart=function(g){u&&window.focus(),!g.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onTouchStart(g),n.capture&&g.cancelable&&g.target===d&&g.preventDefault())},this.onTouchStartWindow=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&g.target!==d&&h.onTouchStart(g)},this.onTouchEnd=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onTouchEnd(g),n.capture&&g.cancelable&&g.target===d&&g.preventDefault())},this.onTouchEndWindow=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&g.target!==d&&h.onTouchEnd(g)},this.onTouchCancel=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onTouchCancel(g),n.capture&&g.preventDefault())},this.onTouchCancelWindow=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&h.onTouchCancel(g)};var p=this.capture,v={passive:!0},m={passive:!1};if(i.addEventListener("touchstart",this.onTouchStart,p?m:v),i.addEventListener("touchmove",this.onTouchMove,p?m:v),i.addEventListener("touchend",this.onTouchEnd,p?m:v),i.addEventListener("touchcancel",this.onTouchCancel,p?m:v),window&&h.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,m),window.top.addEventListener("touchend",this.onTouchEndWindow,m),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,m)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,m),window.addEventListener("touchend",this.onTouchEndWindow,m),window.addEventListener("touchcancel",this.onTouchCancelWindow,m),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var i=this.target;i.removeEventListener("touchstart",this.onTouchStart),i.removeEventListener("touchmove",this.onTouchMove),i.removeEventListener("touchend",this.onTouchEnd),i.removeEventListener("touchcancel",this.onTouchCancel),window&&(i=this.isTop?window.top:window,i.removeEventListener("touchstart",this.onTouchStartWindow),i.removeEventListener("touchend",this.onTouchEndWindow),i.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=r},77423:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TouchManager:t(37579)}},98035:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(683),r=t(72632),i=t(30750),n=t(43531),h=t(88490),d=t(33868),u=new s({initialize:function(v,m){if(this.loader=v,this.cache=r(m,"cache",!1),this.type=r(m,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=r(m,"key",!1);var g=this.key;if(v.prefix&&v.prefix!==""&&(this.key=v.prefix+g),!this.key)throw new Error("Invalid File key: "+this.key);var T=r(m,"url");T===void 0?T=v.path+g+"."+r(m,"extension",""):typeof T=="string"&&!T.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(T=v.path+T),this.url=T,this.src="",this.xhrSettings=d(r(m,"responseType",void 0)),r(m,"xhrSettings",!1)&&(this.xhrSettings=n(this.xhrSettings,r(m,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?l.FILE_POPULATED:l.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=r(m,"config",{}),this.multiFile,this.linkFile},setLink:function(p){this.linkFile=p,p.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===l.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=l.FILE_LOADING,this.src=i(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=h(this,this.loader.xhr))},onLoad:function(p,v){var m=p.responseURL&&this.loader.localSchemes.some(function(w){return p.responseURL.indexOf(w)===0}),g=m&&v.target.status===0,T=!(v.target&&v.target.status!==200)||g;p.readyState===4&&p.status>=400&&p.status<=599&&(T=!1),this.state=l.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,T)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(p){p.lengthComputable&&(this.bytesLoaded=p.loaded,this.bytesTotal=p.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=l.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=l.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=l.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(p){if(this.state!==l.FILE_PENDING_DESTROY){p===void 0&&(p=this.data);var v=this.key,m=this.type;this.loader.emit(a.FILE_COMPLETE,v,m,p),this.loader.emit(a.FILE_KEY_COMPLETE+m+"-"+v,v,m,p),this.loader.flagForRemoval(this),this.state=l.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});u.createObjectURL=function(p,v,m){if(typeof URL=="function")p.src=URL.createObjectURL(v);else{var g=new FileReader;g.onload=function(){p.removeAttribute("crossOrigin"),p.src="data:"+(v.type||m)+";base64,"+g.result.split(",")[1]},g.onerror=p.onerror,g.readAsDataURL(v)}},u.revokeObjectURL=function(p){typeof URL=="function"&&URL.revokeObjectURL(p.src)},o.exports=u},76846:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={},t={install:function(s){for(var l in x)s[l]=x[l]},register:function(s,l){x[s]=l},destroy:function(){x={}}};o.exports=t},30750:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.url?t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:s+t.url:!1};o.exports=x},67285:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(58403),r=t(6659),i=t(683),n=t(76846),h=t(72632),d=t(10850),u=t(91963),p=t(7599),v=t(33868),m=new s({Extends:r,initialize:function(T){r.call(this);var w=T.sys.game.config,b=T.sys.settings.loader;this.scene=T,this.systems=T.sys,this.cacheManager=T.sys.cache,this.textureManager=T.sys.textures,this.sceneManager=T.sys.game.scene,n.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(h(b,"baseURL",w.loaderBaseURL)),this.setPath(h(b,"path",w.loaderPath)),this.setPrefix(h(b,"prefix",w.loaderPrefix)),this.maxParallelDownloads=h(b,"maxParallelDownloads",w.loaderMaxParallelDownloads),this.xhr=v(h(b,"responseType",w.loaderResponseType),h(b,"async",w.loaderAsync),h(b,"user",w.loaderUser),h(b,"password",w.loaderPassword),h(b,"timeout",w.loaderTimeout),h(b,"withCredentials",w.loaderWithCredentials)),this.crossOrigin=h(b,"crossOrigin",w.loaderCrossOrigin),this.imageLoadType=h(b,"imageLoadType",w.loaderImageLoadType),this.localSchemes=h(b,"localScheme",w.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new a,this.inflight=new a,this.queue=new a,this._deleteQueue=new a,this.totalFailed=0,this.totalComplete=0,this.state=l.LOADER_IDLE,this.multiKeyIndex=0,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.pluginStart,this)},boot:function(){this.systems.events.once(p.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(p.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var T=0;T<g.length;T++){var w=g[T];this.keyExists(w)||(this.list.set(w),this.emit(i.ADD,w.key,w.type,this,w),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var T=g.hasCacheConflict();return T||this.list.iterate(function(w){if(w.type===g.type&&w.key===g.key)return T=!0,!1}),!T&&this.isLoading()&&(this.inflight.iterate(function(w){if(w.type===g.type&&w.key===g.key)return T=!0,!1}),this.queue.iterate(function(w){if(w.type===g.type&&w.key===g.key)return T=!0,!1})),T},addPack:function(g,T){if(typeof T=="string"){var w=d(g,T);w&&(g={packKey:w})}var b=0,E=this.baseURL,A=this.path,R=this.prefix;for(var I in g)if(Object.prototype.hasOwnProperty.call(g,I)){var P=g[I],M=h(P,"baseURL",E),F=h(P,"path",A),O=h(P,"prefix",R),D=h(P,"files",null),L=h(P,"defaultType","void");if(Array.isArray(D)){this.setBaseURL(M),this.setPath(F),this.setPrefix(O);for(var z=0;z<D.length;z++){var X=D[z],H=X.hasOwnProperty("type")?X.type:L;this[H]&&(this[H](X),b++)}}}return this.setBaseURL(E),this.setPath(A),this.setPrefix(R),b>0},isLoading:function(){return this.state===l.LOADER_LOADING||this.state===l.LOADER_PROCESSING},isReady:function(){return this.state===l.LOADER_IDLE||this.state===l.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(i.START,this),this.list.size===0?this.loadComplete():(this.state=l.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(p.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(i.PROGRESS,this.progress)},update:function(){this.state===l.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===l.FILE_POPULATED||g.state===l.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,T){this.inflight&&(this.inflight.delete(g),this.updateProgress(),T?(this.totalComplete++,this.queue.set(g),this.emit(i.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(i.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===l.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===l.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&(g.multiFile.addToCache(),g.multiFile.pendingDestroy()):(g.addToCache(),g.pendingDestroy())),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(i.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=l.LOADER_COMPLETE,this.systems.events.off(p.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(i.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,T){return this.save(JSON.stringify(g),T)},save:function(g,T,w){T===void 0&&(T="file.json"),w===void 0&&(w="application/json");var b=new Blob([g],{type:w}),E=URL.createObjectURL(b),A=document.createElement("a");return A.download=T,A.textContent="Download "+T,A.href=E,A.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,T=this.systems.settings.loader;this.setBaseURL(h(T,"baseURL",g.loaderBaseURL)),this.setPath(h(T,"path",g.loaderPath)),this.setPrefix(h(T,"prefix",g.loaderPrefix)),this.state=l.LOADER_IDLE},shutdown:function(){this.reset(),this.state=l.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=l.LOADER_DESTROYED,this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",m,"load"),o.exports=m},43531:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(33868),a=function(r,i){var n=r===void 0?l():s({},r);if(i)for(var h in i)i[h]!==void 0&&(n[h]=i[h]);return n};o.exports=a},45176:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(683),r=new s({initialize:function(n,h,d,u){var p=[];u.forEach(function(g){g&&p.push(g)}),this.loader=n,this.type=h,this.key=d;var v=this.key;n.prefix&&n.prefix!==""&&(this.key=n.prefix+v),this.multiKeyIndex=n.multiKeyIndex++,this.files=p,this.state=l.FILE_PENDING,this.complete=!1,this.pending=p.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var m=0;m<p.length;m++)p[m].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(i){return this.files.push(i),i.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(i){var n=this.files.indexOf(i);n!==-1&&this.pending--},onFileFailed:function(i){var n=this.files.indexOf(i);n!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,i.type,i.key))},pendingDestroy:function(){if(this.state!==l.FILE_PENDING_DESTROY){var i=this.key,n=this.type;this.loader.emit(a.FILE_COMPLETE,i,n),this.loader.emit(a.FILE_KEY_COMPLETE+n+"-"+i,i,n),this.loader.flagForRemoval(this);for(var h=0;h<this.files.length;h++)this.files[h].pendingDestroy();this.state=l.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});o.exports=r},88490:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43531),l=function(a,r){var i=s(r,a.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",a.src,i.async,i.user,i.password),n.responseType=a.xhrSettings.responseType,n.timeout=i.timeout,i.headers)for(var h in i.headers)n.setRequestHeader(h,i.headers[h]);return i.header&&i.headerValue&&n.setRequestHeader(i.header,i.headerValue),i.requestedWith&&n.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&n.overrideMimeType(i.overrideMimeType),i.withCredentials&&(n.withCredentials=!0),n.onload=a.onLoad.bind(a,n),n.onerror=a.onError.bind(a,n),n.onprogress=a.onProgress.bind(a),n.send(),n};o.exports=l},33868:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r,i){return t===void 0&&(t=""),s===void 0&&(s=!0),l===void 0&&(l=""),a===void 0&&(a=""),r===void 0&&(r=0),i===void 0&&(i=!1),{responseType:t,async:s,user:l,password:a,timeout:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:i}};o.exports=x},12117:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};o.exports=x},7398:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addfile"},52187:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},36627:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete"},81925:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete-"},29774:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loaderror"},20943:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="load"},74693:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fileprogress"},71176:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postprocess"},88984:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="progress"},72753:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},683:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:t(7398),COMPLETE:t(52187),FILE_COMPLETE:t(36627),FILE_KEY_COMPLETE:t(81925),FILE_LOAD_ERROR:t(29774),FILE_LOAD:t(20943),FILE_PROGRESS:t(74693),POST_PROCESS:t(71176),PROGRESS:t(88984),START:t(72753)}},46468:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(70806),r=t(683),i=new s({Extends:a,initialize:function(h,d,u,p,v){a.call(this,h,d,u,p,v),this.type="animationJSON"},onProcess:function(){this.loader.once(r.POST_PROCESS,this.onLoadComplete,this),a.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});l.register("animation",function(n,h,d,u){if(Array.isArray(n))for(var p=0;p<n.length;p++)this.addFile(new i(this,n[p]));else this.addFile(new i(this,n,h,u,d));return this}),o.exports=i},31648:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(70806),h=t(45176),d=new s({Extends:h,initialize:function(p,v,m,g,T,w){var b,E;if(i(v)){var A=v;v=a(A,"key"),b=new r(p,{key:v,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),E=new n(p,{key:v,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","json"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new r(p,v,m,T),E=new n(p,v,g,w);b.linkFile?h.call(this,p,"atlasjson",v,[b,E,b.linkFile]):h.call(this,p,"atlasjson",v,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(u.key,u.data,p.data,v),p.addToCache(),this.complete=!0}}});l.register("aseprite",function(u,p,v,m,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,v,m,g),this.addFile(T.files);return this}),o.exports=d},73152:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(70806),h=t(45176),d=new s({Extends:h,initialize:function(p,v,m,g,T,w){var b,E;if(i(v)){var A=v;v=a(A,"key"),b=new r(p,{key:v,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),E=new n(p,{key:v,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","json"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new r(p,v,m,T),E=new n(p,v,g,w);b.linkFile?h.call(this,p,"atlasjson",v,[b,E,b.linkFile]):h.call(this,p,"atlasjson",v,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(u.key,u.data,p.data,v),this.complete=!0}}});l.register("atlas",function(u,p,v,m,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,v,m,g),this.addFile(T.files);return this}),o.exports=d},24616:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(45176),h=t(15297),d=new s({Extends:n,initialize:function(p,v,m,g,T,w){var b,E;if(i(v)){var A=v;v=a(A,"key"),b=new r(p,{key:v,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),E=new h(p,{key:v,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","xml"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new r(p,v,m,T),E=new h(p,v,g,w);b.linkFile?n.call(this,p,"atlasxml",v,[b,E,b.linkFile]):n.call(this,p,"atlasxml",v,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(u.key,u.data,p.data,v),this.complete=!0}}});l.register("atlasXML",function(u,p,v,m,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,v,m,g),this.addFile(T.files);return this}),o.exports=d},67448:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(30929),h=t(42911),d=new s({Extends:a,initialize:function(p,v,m,g,T){if(h(v)){var w=v;v=i(w,"key"),g=i(w,"xhrSettings"),T=i(w,"context",T)}var b={type:"audio",cache:p.cacheManager.audio,extension:m.type,responseType:"arraybuffer",key:v,url:m.url,xhrSettings:g,config:{context:T}};a.call(this,p,b)},onProcess:function(){this.state=l.FILE_PROCESSING;var u=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(p){u.data=p,u.onProcessComplete()},function(p){console.error("Error decoding audio: "+u.key+" - ",p?p.message:null),u.onProcessError()}),this.config.context=null}});d.create=function(u,p,v,m,g){var T=u.systems.game,w=T.config.audio,b=T.device.audio;h(p)&&(v=i(p,"url",[]),m=i(p,"config",{}));var E=d.getAudioURL(T,v);return E?b.webAudio&&!w.disableWebAudio?new d(u,p,E,g,T.sound.context):new n(u,p,E,m):(console.warn('No audio URLs for "%s" matched this device',p),null)},d.getAudioURL=function(u,p){Array.isArray(p)||(p=[p]);for(var v=0;v<p.length;v++){var m=i(p[v],"url",p[v]);if(m.indexOf("blob:")===0||m.indexOf("data:")===0)return{url:m,type:""};var g=m.match(/\.([a-zA-Z0-9]+)($|\?)/);if(g=i(p[v],"type",g?g[1]:"").toLowerCase(),u.device.audio[g])return{url:m,type:g}}return null},r.register("audio",function(u,p,v,m){var g=this.systems.game,T=g.config.audio,w=g.device.audio;if(T.noAudio||!w.webAudio&&!w.audioData)return this;var b;if(Array.isArray(u))for(var E=0;E<u.length;E++)b=d.create(this,u[E]),b&&this.addFile(b);else b=d.create(this,u,p,v,m),b&&this.addFile(b);return this}),o.exports=d},66109:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67448),l=t(56694),a=t(76846),r=t(72632),i=t(42911),n=t(70806),h=t(45176),d=new l({Extends:h,initialize:function(p,v,m,g,T,w,b){if(i(v)){var E=v;v=r(E,"key"),m=r(E,"jsonURL"),g=r(E,"audioURL"),T=r(E,"audioConfig"),w=r(E,"audioXhrSettings"),b=r(E,"jsonXhrSettings")}var A;if(!g)A=new n(p,v,m,b),h.call(this,p,"audiosprite",v,[A]),this.config.resourceLoad=!0,this.config.audioConfig=T,this.config.audioXhrSettings=w;else{var R=s.create(p,v,g,T,w);R&&(A=new n(p,v,m,b),h.call(this,p,"audiosprite",v,[R,A]),this.config.resourceLoad=!1)}},onFileComplete:function(u){var p=this.files.indexOf(u);if(p!==-1&&(this.pending--,this.config.resourceLoad&&u.type==="json"&&u.data.hasOwnProperty("resources"))){var v=u.data.resources,m=r(this.config,"audioConfig"),g=r(this.config,"audioXhrSettings"),T=s.create(this.loader,u.key,v,m,g);T&&(this.addToMultiFile(T),this.loader.addFile(T))}},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1];u.addToCache(),p.addToCache(),this.complete=!0}}});a.register("audioSprite",function(u,p,v,m,g,T){var w=this.systems.game,b=w.config.audio,E=w.device.audio;if(b&&b.noAudio||!E.webAudio&&!E.audioData)return this;var A;if(Array.isArray(u))for(var R=0;R<u.length;R++)A=new d(this,u[R]),A.files&&this.addFile(A.files);else A=new d(this,u,p,v,m,g,T),A.files&&this.addFile(A.files);return this})},40612:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m,g){var T="bin";if(n(p)){var w=p;p=i(w,"key"),v=i(w,"url"),m=i(w,"xhrSettings"),T=i(w,"extension",T),g=i(w,"dataType",g)}var b={type:"binary",cache:u.cacheManager.binary,extension:T,responseType:"arraybuffer",key:p,url:v,xhrSettings:m,config:{dataType:g}};a.call(this,u,b)},onProcess:function(){this.state=l.FILE_PROCESSING;var d=this.config.dataType;this.data=d?new d(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});r.register("binary",function(d,u,p,v){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new h(this,d[m]));else this.addFile(new h(this,d,u,v,p));return this}),o.exports=h},54565:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(45176),h=t(31476),d=t(15297),u=new s({Extends:n,initialize:function(v,m,g,T,w,b){var E,A;if(i(m)){var R=m;m=a(R,"key"),E=new r(v,{key:m,url:a(R,"textureURL"),extension:a(R,"textureExtension","png"),normalMap:a(R,"normalMap"),xhrSettings:a(R,"textureXhrSettings")}),A=new d(v,{key:m,url:a(R,"fontDataURL"),extension:a(R,"fontDataExtension","xml"),xhrSettings:a(R,"fontDataXhrSettings")})}else E=new r(v,m,g,w),A=new d(v,m,T,b);E.linkFile?n.call(this,v,"bitmapfont",m,[E,A,E.linkFile]):n.call(this,v,"bitmapfont",m,[E,A])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],v=this.files[1];p.addToCache();var m=p.cache.get(p.key),g=h(v.data,p.cache.getFrame(p.key),0,0,m);this.loader.cacheManager.bitmapFont.add(p.key,{data:g,texture:p.key,frame:null}),this.complete=!0}}});l.register("bitmapFont",function(p,v,m,g,T){var w;if(Array.isArray(p))for(var b=0;b<p.length;b++)w=new u(this,p[b]),this.addFile(w.files);else w=new u(this,p,v,m,g,T),this.addFile(w.files);return this}),o.exports=u},99898:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m){var g="css";if(n(p)){var T=p;p=i(T,"key"),v=i(T,"url"),m=i(T,"xhrSettings"),g=i(T,"extension",g)}var w={type:"script",cache:!1,extension:g,responseType:"text",key:p,url:v,xhrSettings:m};a.call(this,u,w)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("css",function(d,u,p){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new h(this,d[v]));else this.addFile(new h(this,d,u,p));return this}),o.exports=h},47375:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73152),l=t(40612),a=t(56694),r=t(76846),i=t(72632),n=t(42927),h=t(42911),d=t(70806),u=t(67409),p=t(30657),v=t(80802),m=t(45176),g=t(24904),T=new a({Extends:m,initialize:function(b,E,A,R){if(A.multiAtlasURL){var I=new d(b,{key:E,url:A.multiAtlasURL,xhrSettings:R,config:A});m.call(this,b,"texture",E,[I])}else{var P=A.textureURL.substr(A.textureURL.length-3);A.type||(A.type=P.toLowerCase()==="ktx"?"KTX":"PVR");var M=new l(b,{key:E,url:A.textureURL,extension:P,xhrSettings:R,config:A});if(A.atlasURL){var F=new d(b,{key:E,url:A.atlasURL,xhrSettings:R,config:A});m.call(this,b,"texture",E,[M,F])}else m.call(this,b,"texture",E,[M])}this.config=A},onFileComplete:function(w){var b=this.files.indexOf(w);if(b!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(w.type==="json"&&w.data.hasOwnProperty("textures")){var E=w.data.textures,A=this.config,R=this.loader,I=R.baseURL,P=R.path,M=R.prefix,F=i(A,"multiBaseURL",this.baseURL),O=i(A,"multiPath",this.path),D=i(A,"prefix",this.prefix),L=i(A,"textureXhrSettings");F&&R.setBaseURL(F),O&&R.setPath(O),D&&R.setPrefix(D);for(var z=0;z<E.length;z++){var X=E[z].image,H="CMA"+this.multiKeyIndex+"_"+X,J=new l(R,H,X,L);if(this.addToMultiFile(J),R.addFile(J),E[z].normalMap){var G=new l(R,H,E[z].normalMap,L);G.type="normalMap",J.setLink(G),this.addToMultiFile(G),R.addFile(G)}}R.setBaseURL(I),R.setPath(P),R.setPrefix(M)}}},addToCache:function(){if(this.isReadyToProcess()){var w=this.config;if(w.multiAtlasURL)this.addMultiToCache();else{var b=this.loader.systems.renderer,E=this.loader.textureManager,A,R=this.files[0],I=this.files[1];if(w.type==="PVR"?A=g(R.data):w.type==="KTX"&&(A=u(R.data)),A&&b.supportsCompressedTexture(w.format,A.internalFormat)){A.format=b.getCompressedTextureName(w.format,A.internalFormat);var P=I&&I.data?I.data:null;E.addCompressedTexture(R.key,A,P)}}this.complete=!0}},addMultiToCache:function(){for(var w=this.config,b=this.files[0],E=[],A=[],R=[],I=this.loader.systems.renderer,P=this.loader.textureManager,M,F=1;F<this.files.length;F++){var O=this.files[F];if(O.type!=="normalMap")for(var D=O.key.indexOf("_"),L=O.key.substr(D+1),z=O.data,X=0;X<b.data.textures.length;X++){var H=b.data.textures[X];if(H.image===L){w.type==="PVR"?M=g(z):w.type==="KTX"&&(M=u(z)),M&&I.supportsCompressedTexture(w.format,M.internalFormat)&&(M.format=I.getCompressedTextureName(w.format,M.internalFormat),A.push(M),E.push(H),O.linkFile&&R.push(O.linkFile.data));break}}}R.length===0&&(R=void 0),P.addAtlasJSONArray(this.key,A,E,R),this.complete=!0}});r.register("texture",function(w,b,E){var A=this.systems.renderer,R=function(P,M,F,O){var D={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(h(M)){var L=M;M=i(L,"key"),F=i(L,"url"),O=i(L,"xhrSettings")}var z=!1;for(var X in F)if(A.supportsCompressedTexture(X)){var H=F[X];typeof H=="string"?D.textureURL=H:D=p(H,D),D.format=X.toUpperCase(),z=!0;break}if(!z)console.warn("No supported compressed texture format or IMG fallback",M);else if(D.format==="IMG"){var J,G;D.multiAtlasURL?(G=new v(P,M,D.multiAtlasURL,D.multiPath,D.multiBaseURL,O),J=G.files):D.atlasURL?(G=new s(P,M,D.textureURL,D.atlasURL,O),J=G.files):J=new n(P,M,D.textureURL,O),P.addFile(J)}else{var k=new T(P,M,D,O);P.addFile(k.files)}};if(Array.isArray(w))for(var I=0;I<w.length;I++)R(this,w[I]);else R(this,w,b,E);return this}),o.exports=T},46568:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=t(31053),d=new s({Extends:a,initialize:function(p,v,m,g,T){var w="glsl";if(n(v)){var b=v;v=i(b,"key"),m=i(b,"url"),g=i(b,"shaderType","fragment"),T=i(b,"xhrSettings"),w=i(b,"extension",w)}else g===void 0&&(g="fragment");var E={type:"glsl",cache:p.cacheManager.shader,extension:w,responseType:"text",key:v,url:m,config:{shaderType:g},xhrSettings:T};a.call(this,p,E)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.split(`
`),p=this.extractBlock(u,0);if(p)for(;p;){var v=this.getShaderName(p.header),m=this.getShaderType(p.header),g=this.getShaderUniforms(p.header),T=p.shader;if(this.cache.has(v)){var w=this.cache.get(v);m==="fragment"?w.fragmentSrc=T:w.vertexSrc=T,w.uniforms||(w.uniforms=g)}else m==="fragment"?this.cache.add(v,new h(v,T,"",g)):this.cache.add(v,new h(v,"",T,g));p=this.extractBlock(u,p.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new h(this.key,this.data)):this.cache.add(this.key,new h(this.key,"",this.data))},getShaderName:function(u){for(var p=0;p<u.length;p++){var v=u[p].trim();if(v.substring(0,5)==="name:")return v.substring(5).trim()}return this.key},getShaderType:function(u){for(var p=0;p<u.length;p++){var v=u[p].trim();if(v.substring(0,5)==="type:")return v.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(u){for(var p={},v=0;v<u.length;v++){var m=u[v].trim();if(m.substring(0,8)==="uniform."){var g=m.indexOf(":");if(g){var T=m.substring(8,g);try{p[T]=JSON.parse(m.substring(g+1))}catch{console.warn("Invalid uniform JSON: "+T)}}}}return p},extractBlock:function(u,p){for(var v=-1,m=-1,g=-1,T=!1,w=!1,b=[],E=[],A=p;A<u.length;A++){var R=u[A].trim();if(R==="---")if(v===-1)v=A,T=!0;else if(T)m=A,T=!1,w=!0;else{w=!1;break}else T?b.push(R):w&&(E.push(R),g=A)}return!T&&m!==-1?{header:b,shader:E.join(`
`),offset:g}:null}});r.register("glsl",function(u,p,v,m){if(Array.isArray(u))for(var g=0;g<u.length;g++)this.addFile(new d(this,u[g]));else this.addFile(new d(this,u,p,v,m));return this}),o.exports=d},30929:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(683),a=t(98035),r=t(72632),i=t(30750),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m){if(n(p)){var g=p;p=r(g,"key"),m=r(g,"config",m)}var T={type:"audio",cache:u.cacheManager.audio,extension:v.type,key:p,url:v.url,config:m};a.call(this,u,T),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var d=0;d<this.data.length;d++){var u=this.data[d];u.oncanplaythrough=null,u.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(d){var u=d.target;u.oncanplaythrough=null,u.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(l.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var d=this.config&&this.config.instances||1;this.filesTotal=d,this.filesLoaded=0,this.percentComplete=0;for(var u=0;u<d;u++){var p=new Audio;p.dataset||(p.dataset={}),p.dataset.name=this.key+("0"+u).slice(-2),p.dataset.used="false",this.locked?p.dataset.locked="true":(p.dataset.locked="false",p.preload="auto",p.oncanplaythrough=this.onProgress.bind(this),p.onerror=this.onError.bind(this)),this.data.push(p)}for(u=0;u<this.data.length;u++)p=this.data[u],p.src=i(this,this.loader.baseURL),this.locked||p.load();this.locked&&setTimeout(this.onLoad.bind(this))}});o.exports=h},77459:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m){var g="html";if(n(p)){var T=p;p=i(T,"key"),v=i(T,"url"),m=i(T,"xhrSettings"),g=i(T,"extension",g)}var w={type:"text",cache:u.cacheManager.html,extension:g,responseType:"text",key:p,url:v,xhrSettings:m};a.call(this,u,w)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("html",function(d,u,p){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new h(this,d[v]));else this.addFile(new h(this,d,u,p));return this}),o.exports=h},9755:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m,g,T){m===void 0&&(m=512),g===void 0&&(g=512);var w="html";if(n(p)){var b=p;p=i(b,"key"),v=i(b,"url"),T=i(b,"xhrSettings"),w=i(b,"extension",w),m=i(b,"width",m),g=i(b,"height",g)}var E={type:"html",cache:u.textureManager,extension:w,responseType:"text",key:p,url:v,xhrSettings:T,config:{width:m,height:g}};a.call(this,u,E)},onProcess:function(){this.state=l.FILE_PROCESSING;var d=this.config.width,u=this.config.height,p=[];p.push('<svg width="'+d+'px" height="'+u+'px" viewBox="0 0 '+d+" "+u+'" xmlns="http://www.w3.org/2000/svg">'),p.push('<foreignObject width="100%" height="100%">'),p.push('<body xmlns="http://www.w3.org/1999/xhtml">'),p.push(this.xhrLoader.responseText),p.push("</body>"),p.push("</foreignObject>"),p.push("</svg>");var v=[p.join(`
`)],m=this;try{var g=new window.Blob(v,{type:"image/svg+xml;charset=utf-8"})}catch{m.state=l.FILE_ERRORED,m.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){a.revokeObjectURL(m.data),m.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(m.data),m.onProcessError()},a.createObjectURL(this.data,g,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("htmlTexture",function(d,u,p,v,m){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,u,p,v,m));return this}),o.exports=h},42927:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=t(30750),d=new s({Extends:a,initialize:function u(p,v,m,g,T){var w="png",b;if(n(v)){var E=v;v=i(E,"key"),m=i(E,"url"),b=i(E,"normalMap"),g=i(E,"xhrSettings"),w=i(E,"extension",w),T=i(E,"frameConfig")}Array.isArray(m)&&(b=m[1],m=m[0]);var A={type:"image",cache:p.textureManager,extension:w,responseType:"blob",key:v,url:m,xhrSettings:g,config:T};if(a.call(this,p,A),b){var R=new u(p,this.key,b,g,T);R.type="normalMap",this.setLink(R),p.addFile(R)}this.useImageElementLoad=p.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this;this.data.onload=function(){a.revokeObjectURL(u.data),u.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(u.data),u.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var u=this.state;this.state=l.FILE_PROCESSING,u===l.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=l.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this;this.data.onload=function(){u.state=l.FILE_LOADED,u.loader.nextFile(u,!0)},this.data.onerror=function(){u.loader.nextFile(u,!1)},this.data.src=this.src}},addToCache:function(){var u=this.linkFile;u?u.state>=l.FILE_COMPLETE&&(u.type==="spritesheet"?u.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,u.data,this.data):this.cache.addImage(this.key,this.data,u.data)):this.cache.addImage(this.key,this.data)}});r.register("image",function(u,p,v){if(Array.isArray(u))for(var m=0;m<u.length;m++)this.addFile(new d(this,u[m]));else this.addFile(new d(this,u,p,v));return this}),o.exports=d},70806:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(10850),h=t(42911),d=new s({Extends:a,initialize:function(p,v,m,g,T){var w="json";if(h(v)){var b=v;v=i(b,"key"),m=i(b,"url"),g=i(b,"xhrSettings"),w=i(b,"extension",w),T=i(b,"dataKey",T)}var E={type:"json",cache:p.cacheManager.json,extension:w,responseType:"text",key:v,url:m,xhrSettings:g,config:T};a.call(this,p,E),h(m)&&(T?this.data=n(m,T):this.data=m,this.state=l.FILE_POPULATED)},onProcess:function(){if(this.state!==l.FILE_POPULATED){this.state=l.FILE_PROCESSING;try{var u=JSON.parse(this.xhrLoader.responseText)}catch(v){throw this.onProcessError(),v}var p=this.config;typeof p=="string"?this.data=n(u,p,u):this.data=u}this.onProcessComplete()}});r.register("json",function(u,p,v,m){if(Array.isArray(u))for(var g=0;g<u.length;g++)this.addFile(new d(this,u[g]));else this.addFile(new d(this,u,p,m,v));return this}),o.exports=d},80802:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(70806),h=t(45176),d=new s({Extends:h,initialize:function(p,v,m,g,T,w,b){if(i(v)){var E=v;v=a(E,"key"),a(E,"url",!1)?m=a(E,"url"):m=a(E,"atlasURL"),w=a(E,"xhrSettings"),g=a(E,"path"),T=a(E,"baseURL"),b=a(E,"textureXhrSettings")}var A=new n(p,v,m,w);h.call(this,p,"multiatlas",v,[A]),this.config.path=g,this.config.baseURL=T,this.config.textureXhrSettings=b},onFileComplete:function(u){var p=this.files.indexOf(u);if(p!==-1&&(this.pending--,u.type==="json"&&u.data.hasOwnProperty("textures"))){var v=u.data.textures,m=this.config,g=this.loader,T=g.baseURL,w=g.path,b=g.prefix,E=a(m,"baseURL",this.baseURL),A=a(m,"path",this.path),R=a(m,"prefix",this.prefix),I=a(m,"textureXhrSettings");g.setBaseURL(E),g.setPath(A),g.setPrefix(R);for(var P=0;P<v.length;P++){var M=v[P].image,F="MA"+this.multiKeyIndex+"_"+M,O=new r(g,F,M,I);if(this.addToMultiFile(O),g.addFile(O),v[P].normalMap){var D=new r(g,F,v[P].normalMap,I);D.type="normalMap",O.setLink(D),this.addToMultiFile(D),g.addFile(D)}}g.setBaseURL(T),g.setPath(w),g.setPrefix(b)}},addToCache:function(){if(this.isReadyToProcess()){for(var u=this.files[0],p=[],v=[],m=[],g=1;g<this.files.length;g++){var T=this.files[g];if(T.type!=="normalMap")for(var w=T.key.indexOf("_"),b=T.key.substr(w+1),E=T.data,A=0;A<u.data.textures.length;A++){var R=u.data.textures[A];if(R.image===b){v.push(E),p.push(R),T.linkFile&&m.push(T.linkFile.data);break}}}m.length===0&&(m=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,v,p,m),this.complete=!0}}});l.register("multiatlas",function(u,p,v,m,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,v,m,g),this.addFile(T.files);return this}),o.exports=d},39034:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42911),i=t(45176),n=t(55188),h=new s({Extends:i,initialize:function(u,p,v,m){var g="js",T=[];if(r(p)){var w=p;p=a(w,"key"),v=a(w,"url"),m=a(w,"xhrSettings"),g=a(w,"extension",g)}Array.isArray(v)||(v=[v]);for(var b=0;b<v.length;b++){var E=new n(u,{key:p+"_"+b.toString(),url:v[b],extension:g,xhrSettings:m});E.onProcess=function(){this.onProcessComplete()},T.push(E)}i.call(this,u,"scripts",p,T)},addToCache:function(){if(this.isReadyToProcess()){for(var d=0;d<this.files.length;d++){var u=this.files[d];u.data=document.createElement("script"),u.data.language="javascript",u.data.type="text/javascript",u.data.defer=!1,u.data.text=u.xhrLoader.responseText,document.head.appendChild(u.data)}this.complete=!0}}});l.register("scripts",function(d,u,p){var v;if(Array.isArray(d))for(var m=0;m<d.length;m++)v=new h(this,d[m]),this.addFile(v.files);else v=new h(this,d,u,p),this.addFile(v.files);return this}),o.exports=h},85527:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42911),i=t(45176),n=t(27291),h=t(76799),d=t(86897),u=new s({Extends:i,initialize:function(v,m,g,T,w,b){var E,A,R=v.cacheManager.obj;if(r(m)){var I=m;m=a(I,"key"),E=new d(v,{key:m,type:"obj",cache:R,url:a(I,"url"),extension:a(I,"extension","obj"),xhrSettings:a(I,"xhrSettings"),config:{flipUV:a(I,"flipUV",w)}}),T=a(I,"matURL"),T&&(A=new d(v,{key:m,type:"mat",cache:R,url:T,extension:a(I,"matExtension","mat"),xhrSettings:a(I,"xhrSettings")}))}else E=new d(v,{key:m,url:g,type:"obj",cache:R,extension:"obj",xhrSettings:b,config:{flipUV:w}}),T&&(A=new d(v,{key:m,url:T,type:"mat",cache:R,extension:"mat",xhrSettings:b}));i.call(this,v,"obj",m,[E,A])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],v=this.files[1],m=n(p.data,p.config.flipUV);v&&(m.materials=h(v.data)),p.cache.add(p.key,m),this.complete=!0}}});l.register("obj",function(p,v,m,g,T){var w;if(Array.isArray(p))for(var b=0;b<p.length;b++)w=new u(this,p[b]),this.addFile(w.files);else w=new u(this,p,v,m,g,T),this.addFile(w.files);return this}),o.exports=u},3616:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(76846),r=t(70806),i=new s({Extends:r,initialize:function(h,d,u,p,v){r.call(this,h,d,u,p,v),this.type="packfile"},onProcess:function(){if(this.state!==l.FILE_POPULATED&&(this.state=l.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var n={};n[this.config]=this.data,this.data=n}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});a.register("pack",function(n,h,d,u){if(Array.isArray(n))for(var p=0;p<n.length;p++)this.addFile(new i(this,n[p]));else this.addFile(new i(this,n,h,u,d));return this}),o.exports=i},12217:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m,g,T){var w="js";if(n(p)){var b=p;p=i(b,"key"),v=i(b,"url"),T=i(b,"xhrSettings"),w=i(b,"extension",w),m=i(b,"start"),g=i(b,"mapping")}var E={type:"plugin",cache:!1,extension:w,responseType:"text",key:p,url:v,xhrSettings:T,config:{start:m,mapping:g}};a.call(this,u,E),typeof v=="function"&&(this.data=v,this.state=l.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,u=this.config,p=i(u,"start",!1),v=i(u,"mapping",null);if(this.state===l.FILE_POPULATED)d.install(this.key,this.data,p,v);else{this.state=l.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var m=d.install(this.key,window[this.key],p,v);(p||v)&&(this.loader.systems[v]=m,this.loader.scene[v]=m)}this.onProcessComplete()}});r.register("plugin",function(d,u,p,v,m){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,u,p,v,m));return this}),o.exports=h},4474:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m,g){var T="svg";if(n(p)){var w=p;p=i(w,"key"),v=i(w,"url"),m=i(w,"svgConfig",{}),g=i(w,"xhrSettings"),T=i(w,"extension",T)}var b={type:"svg",cache:u.textureManager,extension:T,responseType:"text",key:p,url:v,xhrSettings:g,config:{width:i(m,"width"),height:i(m,"height"),scale:i(m,"scale")}};a.call(this,u,b)},onProcess:function(){this.state=l.FILE_PROCESSING;var d=this.xhrLoader.responseText,u=[d],p=this.config.width,v=this.config.height,m=this.config.scale;t:if(p&&v||m){var g=null,T=new DOMParser;g=T.parseFromString(d,"text/xml");var w=g.getElementsByTagName("svg")[0],b=w.hasAttribute("viewBox"),E=parseFloat(w.getAttribute("width")),A=parseFloat(w.getAttribute("height"));if(!b&&E&&A)w.setAttribute("viewBox","0  0 "+E+" "+A);else if(b&&!E&&!A){var R=w.getAttribute("viewBox").split(/\s+|,/);E=R[2],A=R[3]}if(m)if(E&&A)p=E*m,v=A*m;else break t;w.setAttribute("width",p.toString()+"px"),w.setAttribute("height",v.toString()+"px"),u=[new XMLSerializer().serializeToString(w)]}try{var I=new window.Blob(u,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var P=this,M=!1;this.data.onload=function(){M||a.revokeObjectURL(P.data),P.onProcessComplete()},this.data.onerror=function(){M?P.onProcessError():(M=!0,a.revokeObjectURL(P.data),P.data.src="data:image/svg+xml,"+encodeURIComponent(u.join("")))},a.createObjectURL(this.data,I,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("svg",function(d,u,p,v){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new h(this,d[m]));else this.addFile(new h(this,d,u,p,v));return this}),o.exports=h},95171:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m){var g="js";if(n(p)){var T=p;p=i(T,"key"),v=i(T,"url"),m=i(T,"xhrSettings"),g=i(T,"extension",g)}var w={type:"text",extension:g,responseType:"text",key:p,url:v,xhrSettings:m};a.call(this,u,w)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),u=eval;this.loader.sceneManager.add(this.key,u(d)),this.complete=!0}});r.register("sceneFile",function(d,u,p){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new h(this,d[v]));else this.addFile(new h(this,d,u,p));return this}),o.exports=h},82458:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m,g,T){var w="js";if(n(p)){var b=p;p=i(b,"key"),v=i(b,"url"),T=i(b,"xhrSettings"),w=i(b,"extension",w),m=i(b,"systemKey"),g=i(b,"sceneKey")}var E={type:"scenePlugin",cache:!1,extension:w,responseType:"text",key:p,url:v,xhrSettings:T,config:{systemKey:m,sceneKey:g}};a.call(this,u,E),typeof v=="function"&&(this.data=v,this.state=l.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,u=this.config,p=this.key,v=i(u,"systemKey",p),m=i(u,"sceneKey",p);this.state===l.FILE_POPULATED?d.installScenePlugin(v,this.data,m,this.loader.scene,!0):(this.state=l.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),d.installScenePlugin(v,window[this.key],m,this.loader.scene,!0)),this.onProcessComplete()}});r.register("scenePlugin",function(d,u,p,v,m){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,u,p,v,m));return this}),o.exports=h},55188:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m,g){var T="js";if(n(p)){var w=p;p=i(w,"key"),v=i(w,"url"),m=i(w,"type","script"),g=i(w,"xhrSettings"),T=i(w,"extension",T)}else m===void 0&&(m="script");var b={type:m,cache:!1,extension:T,responseType:"text",key:p,url:v,xhrSettings:g};a.call(this,u,b)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("script",function(d,u,p,v){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new h(this,d[m]));else this.addFile(new h(this,d,u,p,v));return this}),o.exports=h},33536:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(76846),r=t(42927),i=new s({Extends:r,initialize:function(h,d,u,p,v){r.call(this,h,d,u,v,p),this.type="spritesheet"},addToCache:function(){var n=this.linkFile;n?n.state>=l.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,n.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,n.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});a.register("spritesheet",function(n,h,d,u){if(Array.isArray(n))for(var p=0;p<n.length;p++)this.addFile(new i(this,n[p]));else this.addFile(new i(this,n,h,d,u));return this}),o.exports=i},86897:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,v,m){var g="text",T="txt",w=u.cacheManager.text;if(n(p)){var b=p;p=i(b,"key"),v=i(b,"url"),m=i(b,"xhrSettings"),T=i(b,"extension",T),g=i(b,"type",g),w=i(b,"cache",w)}var E={type:g,cache:w,extension:T,responseType:"text",key:p,url:v,xhrSettings:m};a.call(this,u,E)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("text",function(d,u,p){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new h(this,d[v]));else this.addFile(new h(this,d,u,p));return this}),o.exports=h},58673:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=t(93560),d=new s({Extends:a,initialize:function(p,v,m,g){var T="csv";if(n(v)){var w=v;v=i(w,"key"),m=i(w,"url"),g=i(w,"xhrSettings"),T=i(w,"extension",T)}var b={type:"tilemapCSV",cache:p.cacheManager.tilemap,extension:T,responseType:"text",key:v,url:m,xhrSettings:g};a.call(this,p,b),this.tilemapFormat=h.CSV},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,u)}});r.register("tilemapCSV",function(u,p,v){if(Array.isArray(u))for(var m=0;m<u.length;m++)this.addFile(new d(this,u[m]));else this.addFile(new d(this,u,p,v));return this}),o.exports=d},98896:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(70806),r=t(93560),i=new s({Extends:a,initialize:function(h,d,u,p){a.call(this,h,d,u,p),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var n={format:r.WELTMEISTER,data:this.data};this.cache.add(this.key,n)}});l.register("tilemapImpact",function(n,h,d){if(Array.isArray(n))for(var u=0;u<n.length;u++)this.addFile(new i(this,n[u]));else this.addFile(new i(this,n,h,d));return this}),o.exports=i},50563:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(70806),r=t(93560),i=new s({Extends:a,initialize:function(h,d,u,p){a.call(this,h,d,u,p),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var n={format:r.TILED_JSON,data:this.data};this.cache.add(this.key,n)}});l.register("tilemapTiledJSON",function(n,h,d){if(Array.isArray(n))for(var u=0;u<n.length;u++)this.addFile(new i(this,n[u]));else this.addFile(new i(this,n,h,d));return this}),o.exports=i},82857:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(45176),h=t(86897),d=new s({Extends:n,initialize:function(p,v,m,g,T,w){var b,E;if(i(v)){var A=v;v=a(A,"key"),b=new r(p,{key:v,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),E=new h(p,{key:v,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","txt"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new r(p,v,m,T),E=new h(p,v,g,w);b.linkFile?n.call(this,p,"unityatlas",v,[b,E,b.linkFile]):n.call(this,p,"unityatlas",v,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(u.key,u.data,p.data,v),this.complete=!0}}});l.register("unityAtlas",function(u,p,v,m,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,v,m,g),this.addFile(T.files);return this}),o.exports=d},22833:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(30750),n=t(72632),h=t(42911),d=new s({Extends:a,initialize:function(p,v,m,g){if(g===void 0&&(g=!1),h(v)){var T=v;v=n(T,"key"),m=n(T,"url",[]),g=n(T,"noAudio",!1)}var w=p.systems.game.device.video.getVideoURL(m);w||console.warn("VideoFile: No supported format for "+v);var b={type:"video",cache:p.cacheManager.video,extension:w.type,key:v,url:w.url,config:{noAudio:g}};a.call(this,p,b)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=i(this,this.loader.baseURL),this.state=l.FILE_LOADED,this.loader.nextFile(this,!0)}});r.register("video",function(u,p,v){if(Array.isArray(u))for(var m=0;m<u.length;m++)this.addFile(new d(this,u[m]));else this.addFile(new d(this,u,p,v));return this}),o.exports=d},15297:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=t(89200),d=new s({Extends:a,initialize:function(p,v,m,g){var T="xml";if(n(v)){var w=v;v=i(w,"key"),m=i(w,"url"),g=i(w,"xhrSettings"),T=i(w,"extension",T)}var b={type:"xml",cache:p.cacheManager.xml,extension:T,responseType:"text",key:v,url:m,xhrSettings:g};a.call(this,p,b)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=h(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});r.register("xml",function(u,p,v){if(Array.isArray(u))for(var m=0;m<u.length;m++)this.addFile(new d(this,u[m]));else this.addFile(new d(this,u,p,v));return this}),o.exports=d},34034:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AnimationJSONFile:t(46468),AsepriteFile:t(31648),AtlasJSONFile:t(73152),AtlasXMLFile:t(24616),AudioFile:t(67448),AudioSpriteFile:t(66109),BinaryFile:t(40612),BitmapFontFile:t(54565),CompressedTextureFile:t(47375),CSSFile:t(99898),GLSLFile:t(46568),HTML5AudioFile:t(30929),HTMLFile:t(77459),HTMLTextureFile:t(9755),ImageFile:t(42927),JSONFile:t(70806),MultiAtlasFile:t(80802),MultiScriptFile:t(39034),OBJFile:t(85527),PackFile:t(3616),PluginFile:t(12217),SceneFile:t(95171),ScenePluginFile:t(82458),ScriptFile:t(55188),SpriteSheetFile:t(33536),SVGFile:t(4474),TextFile:t(86897),TilemapCSVFile:t(58673),TilemapImpactFile:t(98896),TilemapJSONFile:t(50563),UnityAtlasFile:t(82857),VideoFile:t(22833),XMLFile:t(15297)}},95695:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12117),l=t(98611),a={Events:t(683),FileTypes:t(34034),File:t(98035),FileTypesManager:t(76846),GetURL:t(30750),LoaderPlugin:t(67285),MergeXHRSettings:t(43531),MultiFile:t(45176),XHRLoader:t(88490),XHRSettings:t(33868)};a=l(!1,a,s),o.exports=a},26042:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){for(var s=0,l=0;l<t.length;l++)s+=+t[l];return s/t.length};o.exports=x},22824:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8034),l=function(a,r){return s(a)/s(r)/s(a-r)};o.exports=l},17489:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return Math.floor(Math.random()*(s-t+1)+t)};o.exports=x},14976:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r){var i=(a-s)*.5,n=(r-l)*.5,h=t*t,d=t*h;return(2*l-2*a+i+n)*d+(-3*l+3*a-2*i-n)*h+i*t+l};o.exports=x},89129:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){s===void 0&&(s=0),l===void 0&&(l=10);var a=Math.pow(l,-s);return Math.ceil(t*a)/a};o.exports=x},82897:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return Math.max(s,Math.min(l,t))};o.exports=x},75606:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=function(a){return a*s.DEG_TO_RAD};o.exports=l},767:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return Math.abs(t-s)};o.exports=x},9849:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(16650),r=t(72283),i=new a,n=new l({initialize:function h(d,u,p,v){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v=h.DefaultOrder),this._x=d,this._y=u,this._z=p,this._order=v,this.onChangeCallback=r},x:{get:function(){return this._x},set:function(h){this._x=h,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(h){this._y=h,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(h){this._z=h,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(h){this._order=h,this.onChangeCallback(this)}},set:function(h,d,u,p){return p===void 0&&(p=this._order),this._x=h,this._y=d,this._z=u,this._order=p,this.onChangeCallback(this),this},copy:function(h){return this.set(h.x,h.y,h.z,h.order)},setFromQuaternion:function(h,d,u){return d===void 0&&(d=this._order),u===void 0&&(u=!1),i.fromQuat(h),this.setFromRotationMatrix(i,d,u)},setFromRotationMatrix:function(h,d,u){d===void 0&&(d=this._order),u===void 0&&(u=!1);var p=h.val,v=p[0],m=p[4],g=p[8],T=p[1],w=p[5],b=p[9],E=p[2],A=p[6],R=p[10],I=0,P=0,M=0,F=.99999;switch(d){case"XYZ":{P=Math.asin(s(g,-1,1)),Math.abs(g)<F?(I=Math.atan2(-b,R),M=Math.atan2(-m,v)):I=Math.atan2(A,w);break}case"YXZ":{I=Math.asin(-s(b,-1,1)),Math.abs(b)<F?(P=Math.atan2(g,R),M=Math.atan2(T,w)):P=Math.atan2(-E,v);break}case"ZXY":{I=Math.asin(s(A,-1,1)),Math.abs(A)<F?(P=Math.atan2(-E,R),M=Math.atan2(-m,w)):M=Math.atan2(T,v);break}case"ZYX":{P=Math.asin(-s(E,-1,1)),Math.abs(E)<F?(I=Math.atan2(A,R),M=Math.atan2(T,v)):M=Math.atan2(-m,w);break}case"YZX":{M=Math.asin(s(T,-1,1)),Math.abs(T)<F?(I=Math.atan2(-b,w),P=Math.atan2(-E,v)):P=Math.atan2(g,R);break}case"XZY":{M=Math.asin(-s(m,-1,1)),Math.abs(m)<F?(I=Math.atan2(A,w),P=Math.atan2(g,v)):I=Math.atan2(-b,R);break}}return this._x=I,this._y=P,this._z=M,this._order=d,u&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",o.exports=n},8034:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){if(t===0)return 1;for(var s=t;--t;)s*=t;return s};o.exports=x},61616:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return Math.random()*(s-t)+t};o.exports=x},60679:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){s===void 0&&(s=0),l===void 0&&(l=10);var a=Math.pow(l,-s);return Math.floor(t*a)/a};o.exports=x},91806:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=function(a,r,i){return a=s(a,0,1),(i-r)*a+r};o.exports=l},79366:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t/s/1e3};o.exports=x},43776:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t==parseFloat(t)?!(t%2):void 0};o.exports=x},58442:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t===parseFloat(t)?!(t%2):void 0};o.exports=x},42798:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return(s-t)*l+t};o.exports=x},61072:o=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return l===void 0&&(l=0),t.clone().lerp(s,l)};o.exports=x},5341:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){this.val=new Float32Array(9),r?this.copy(r):this.identity()},clone:function(){return new l(this)},set:function(a){return this.copy(a)},copy:function(a){var r=this.val,i=a.val;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],this},fromMat4:function(a){var r=a.val,i=this.val;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[4],i[4]=r[5],i[5]=r[6],i[6]=r[8],i[7]=r[9],i[8]=r[10],this},fromArray:function(a){var r=this.val;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],this},identity:function(){var a=this.val;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,this},transpose:function(){var a=this.val,r=a[1],i=a[2],n=a[5];return a[1]=a[3],a[2]=a[6],a[3]=r,a[5]=a[7],a[6]=i,a[7]=n,this},invert:function(){var a=this.val,r=a[0],i=a[1],n=a[2],h=a[3],d=a[4],u=a[5],p=a[6],v=a[7],m=a[8],g=m*d-u*v,T=-m*h+u*p,w=v*h-d*p,b=r*g+i*T+n*w;return b?(b=1/b,a[0]=g*b,a[1]=(-m*i+n*v)*b,a[2]=(u*i-n*d)*b,a[3]=T*b,a[4]=(m*r-n*p)*b,a[5]=(-u*r+n*h)*b,a[6]=w*b,a[7]=(-v*r+i*p)*b,a[8]=(d*r-i*h)*b,this):null},adjoint:function(){var a=this.val,r=a[0],i=a[1],n=a[2],h=a[3],d=a[4],u=a[5],p=a[6],v=a[7],m=a[8];return a[0]=d*m-u*v,a[1]=n*v-i*m,a[2]=i*u-n*d,a[3]=u*p-h*m,a[4]=r*m-n*p,a[5]=n*h-r*u,a[6]=h*v-d*p,a[7]=i*p-r*v,a[8]=r*d-i*h,this},determinant:function(){var a=this.val,r=a[0],i=a[1],n=a[2],h=a[3],d=a[4],u=a[5],p=a[6],v=a[7],m=a[8];return r*(m*d-u*v)+i*(-m*h+u*p)+n*(v*h-d*p)},multiply:function(a){var r=this.val,i=r[0],n=r[1],h=r[2],d=r[3],u=r[4],p=r[5],v=r[6],m=r[7],g=r[8],T=a.val,w=T[0],b=T[1],E=T[2],A=T[3],R=T[4],I=T[5],P=T[6],M=T[7],F=T[8];return r[0]=w*i+b*d+E*v,r[1]=w*n+b*u+E*m,r[2]=w*h+b*p+E*g,r[3]=A*i+R*d+I*v,r[4]=A*n+R*u+I*m,r[5]=A*h+R*p+I*g,r[6]=P*i+M*d+F*v,r[7]=P*n+M*u+F*m,r[8]=P*h+M*p+F*g,this},translate:function(a){var r=this.val,i=a.x,n=a.y;return r[6]=i*r[0]+n*r[3]+r[6],r[7]=i*r[1]+n*r[4]+r[7],r[8]=i*r[2]+n*r[5]+r[8],this},rotate:function(a){var r=this.val,i=r[0],n=r[1],h=r[2],d=r[3],u=r[4],p=r[5],v=Math.sin(a),m=Math.cos(a);return r[0]=m*i+v*d,r[1]=m*n+v*u,r[2]=m*h+v*p,r[3]=m*d-v*i,r[4]=m*u-v*n,r[5]=m*p-v*h,this},scale:function(a){var r=this.val,i=a.x,n=a.y;return r[0]=i*r[0],r[1]=i*r[1],r[2]=i*r[2],r[3]=n*r[3],r[4]=n*r[4],r[5]=n*r[5],this},fromQuat:function(a){var r=a.x,i=a.y,n=a.z,h=a.w,d=r+r,u=i+i,p=n+n,v=r*d,m=r*u,g=r*p,T=i*u,w=i*p,b=n*p,E=h*d,A=h*u,R=h*p,I=this.val;return I[0]=1-(T+b),I[3]=m+R,I[6]=g-A,I[1]=m-R,I[4]=1-(v+b),I[7]=w+E,I[2]=g+A,I[5]=w-E,I[8]=1-(v+T),this},normalFromMat4:function(a){var r=a.val,i=this.val,n=r[0],h=r[1],d=r[2],u=r[3],p=r[4],v=r[5],m=r[6],g=r[7],T=r[8],w=r[9],b=r[10],E=r[11],A=r[12],R=r[13],I=r[14],P=r[15],M=n*v-h*p,F=n*m-d*p,O=n*g-u*p,D=h*m-d*v,L=h*g-u*v,z=d*g-u*m,X=T*R-w*A,H=T*I-b*A,J=T*P-E*A,G=w*I-b*R,k=w*P-E*R,N=b*P-E*I,B=M*N-F*k+O*G+D*J-L*H+z*X;return B?(B=1/B,i[0]=(v*N-m*k+g*G)*B,i[1]=(m*J-p*N-g*H)*B,i[2]=(p*k-v*J+g*X)*B,i[3]=(d*k-h*N-u*G)*B,i[4]=(n*N-d*J+u*H)*B,i[5]=(h*J-n*k-u*X)*B,i[6]=(R*z-I*L+P*D)*B,i[7]=(I*O-A*z-P*F)*B,i[8]=(A*L-R*O+P*M)*B,this):null}});o.exports=l},16650:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(70015),a=1e-6,r=new s({initialize:function(v){this.val=new Float32Array(16),v?this.copy(v):this.identity()},clone:function(){return new r(this)},set:function(p){return this.copy(p)},setValues:function(p,v,m,g,T,w,b,E,A,R,I,P,M,F,O,D){var L=this.val;return L[0]=p,L[1]=v,L[2]=m,L[3]=g,L[4]=T,L[5]=w,L[6]=b,L[7]=E,L[8]=A,L[9]=R,L[10]=I,L[11]=P,L[12]=M,L[13]=F,L[14]=O,L[15]=D,this},copy:function(p){var v=p.val;return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},fromArray:function(p){return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(p,v,m){var g=i.fromQuat(m),T=g.val,w=v.x,b=v.y,E=v.z;return this.setValues(T[0]*w,T[1]*w,T[2]*w,0,T[4]*b,T[5]*b,T[6]*b,0,T[8]*E,T[9]*E,T[10]*E,0,p.x,p.y,p.z,1)},xyz:function(p,v,m){this.identity();var g=this.val;return g[12]=p,g[13]=v,g[14]=m,this},scaling:function(p,v,m){this.zero();var g=this.val;return g[0]=p,g[5]=v,g[10]=m,g[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var p=this.val,v=p[1],m=p[2],g=p[3],T=p[6],w=p[7],b=p[11];return p[1]=p[4],p[2]=p[8],p[3]=p[12],p[4]=v,p[6]=p[9],p[7]=p[13],p[8]=m,p[9]=T,p[11]=p[14],p[12]=g,p[13]=w,p[14]=b,this},getInverse:function(p){return this.copy(p),this.invert()},invert:function(){var p=this.val,v=p[0],m=p[1],g=p[2],T=p[3],w=p[4],b=p[5],E=p[6],A=p[7],R=p[8],I=p[9],P=p[10],M=p[11],F=p[12],O=p[13],D=p[14],L=p[15],z=v*b-m*w,X=v*E-g*w,H=v*A-T*w,J=m*E-g*b,G=m*A-T*b,k=g*A-T*E,N=R*O-I*F,B=R*D-P*F,U=R*L-M*F,W=I*D-P*O,K=I*L-M*O,q=P*L-M*D,_=z*q-X*K+H*W+J*U-G*B+k*N;return _?(_=1/_,this.setValues((b*q-E*K+A*W)*_,(g*K-m*q-T*W)*_,(O*k-D*G+L*J)*_,(P*G-I*k-M*J)*_,(E*U-w*q-A*B)*_,(v*q-g*U+T*B)*_,(D*H-F*k-L*X)*_,(R*k-P*H+M*X)*_,(w*K-b*U+A*N)*_,(m*U-v*K-T*N)*_,(F*G-O*H+L*z)*_,(I*H-R*G-M*z)*_,(b*B-w*W-E*N)*_,(v*W-m*B+g*N)*_,(O*X-F*J-D*z)*_,(R*J-I*X+P*z)*_)):this},adjoint:function(){var p=this.val,v=p[0],m=p[1],g=p[2],T=p[3],w=p[4],b=p[5],E=p[6],A=p[7],R=p[8],I=p[9],P=p[10],M=p[11],F=p[12],O=p[13],D=p[14],L=p[15];return this.setValues(b*(P*L-M*D)-I*(E*L-A*D)+O*(E*M-A*P),-(m*(P*L-M*D)-I*(g*L-T*D)+O*(g*M-T*P)),m*(E*L-A*D)-b*(g*L-T*D)+O*(g*A-T*E),-(m*(E*M-A*P)-b*(g*M-T*P)+I*(g*A-T*E)),-(w*(P*L-M*D)-R*(E*L-A*D)+F*(E*M-A*P)),v*(P*L-M*D)-R*(g*L-T*D)+F*(g*M-T*P),-(v*(E*L-A*D)-w*(g*L-T*D)+F*(g*A-T*E)),v*(E*M-A*P)-w*(g*M-T*P)+R*(g*A-T*E),w*(I*L-M*O)-R*(b*L-A*O)+F*(b*M-A*I),-(v*(I*L-M*O)-R*(m*L-T*O)+F*(m*M-T*I)),v*(b*L-A*O)-w*(m*L-T*O)+F*(m*A-T*b),-(v*(b*M-A*I)-w*(m*M-T*I)+R*(m*A-T*b)),-(w*(I*D-P*O)-R*(b*D-E*O)+F*(b*P-E*I)),v*(I*D-P*O)-R*(m*D-g*O)+F*(m*P-g*I),-(v*(b*D-E*O)-w*(m*D-g*O)+F*(m*E-g*b)),v*(b*P-E*I)-w*(m*P-g*I)+R*(m*E-g*b))},determinant:function(){var p=this.val,v=p[0],m=p[1],g=p[2],T=p[3],w=p[4],b=p[5],E=p[6],A=p[7],R=p[8],I=p[9],P=p[10],M=p[11],F=p[12],O=p[13],D=p[14],L=p[15],z=v*b-m*w,X=v*E-g*w,H=v*A-T*w,J=m*E-g*b,G=m*A-T*b,k=g*A-T*E,N=R*O-I*F,B=R*D-P*F,U=R*L-M*F,W=I*D-P*O,K=I*L-M*O,q=P*L-M*D;return z*q-X*K+H*W+J*U-G*B+k*N},multiply:function(p){var v=this.val,m=v[0],g=v[1],T=v[2],w=v[3],b=v[4],E=v[5],A=v[6],R=v[7],I=v[8],P=v[9],M=v[10],F=v[11],O=v[12],D=v[13],L=v[14],z=v[15],X=p.val,H=X[0],J=X[1],G=X[2],k=X[3];return v[0]=H*m+J*b+G*I+k*O,v[1]=H*g+J*E+G*P+k*D,v[2]=H*T+J*A+G*M+k*L,v[3]=H*w+J*R+G*F+k*z,H=X[4],J=X[5],G=X[6],k=X[7],v[4]=H*m+J*b+G*I+k*O,v[5]=H*g+J*E+G*P+k*D,v[6]=H*T+J*A+G*M+k*L,v[7]=H*w+J*R+G*F+k*z,H=X[8],J=X[9],G=X[10],k=X[11],v[8]=H*m+J*b+G*I+k*O,v[9]=H*g+J*E+G*P+k*D,v[10]=H*T+J*A+G*M+k*L,v[11]=H*w+J*R+G*F+k*z,H=X[12],J=X[13],G=X[14],k=X[15],v[12]=H*m+J*b+G*I+k*O,v[13]=H*g+J*E+G*P+k*D,v[14]=H*T+J*A+G*M+k*L,v[15]=H*w+J*R+G*F+k*z,this},multiplyLocal:function(p){var v=this.val,m=p.val;return this.setValues(v[0]*m[0]+v[1]*m[4]+v[2]*m[8]+v[3]*m[12],v[0]*m[1]+v[1]*m[5]+v[2]*m[9]+v[3]*m[13],v[0]*m[2]+v[1]*m[6]+v[2]*m[10]+v[3]*m[14],v[0]*m[3]+v[1]*m[7]+v[2]*m[11]+v[3]*m[15],v[4]*m[0]+v[5]*m[4]+v[6]*m[8]+v[7]*m[12],v[4]*m[1]+v[5]*m[5]+v[6]*m[9]+v[7]*m[13],v[4]*m[2]+v[5]*m[6]+v[6]*m[10]+v[7]*m[14],v[4]*m[3]+v[5]*m[7]+v[6]*m[11]+v[7]*m[15],v[8]*m[0]+v[9]*m[4]+v[10]*m[8]+v[11]*m[12],v[8]*m[1]+v[9]*m[5]+v[10]*m[9]+v[11]*m[13],v[8]*m[2]+v[9]*m[6]+v[10]*m[10]+v[11]*m[14],v[8]*m[3]+v[9]*m[7]+v[10]*m[11]+v[11]*m[15],v[12]*m[0]+v[13]*m[4]+v[14]*m[8]+v[15]*m[12],v[12]*m[1]+v[13]*m[5]+v[14]*m[9]+v[15]*m[13],v[12]*m[2]+v[13]*m[6]+v[14]*m[10]+v[15]*m[14],v[12]*m[3]+v[13]*m[7]+v[14]*m[11]+v[15]*m[15])},premultiply:function(p){return this.multiplyMatrices(p,this)},multiplyMatrices:function(p,v){var m=p.val,g=v.val,T=m[0],w=m[4],b=m[8],E=m[12],A=m[1],R=m[5],I=m[9],P=m[13],M=m[2],F=m[6],O=m[10],D=m[14],L=m[3],z=m[7],X=m[11],H=m[15],J=g[0],G=g[4],k=g[8],N=g[12],B=g[1],U=g[5],W=g[9],K=g[13],q=g[2],_=g[6],rt=g[10],ft=g[14],vt=g[3],mt=g[7],yt=g[11],xt=g[15];return this.setValues(T*J+w*B+b*q+E*vt,A*J+R*B+I*q+P*vt,M*J+F*B+O*q+D*vt,L*J+z*B+X*q+H*vt,T*G+w*U+b*_+E*mt,A*G+R*U+I*_+P*mt,M*G+F*U+O*_+D*mt,L*G+z*U+X*_+H*mt,T*k+w*W+b*rt+E*yt,A*k+R*W+I*rt+P*yt,M*k+F*W+O*rt+D*yt,L*k+z*W+X*rt+H*yt,T*N+w*K+b*ft+E*xt,A*N+R*K+I*ft+P*xt,M*N+F*K+O*ft+D*xt,L*N+z*K+X*ft+H*xt)},translate:function(p){return this.translateXYZ(p.x,p.y,p.z)},translateXYZ:function(p,v,m){var g=this.val;return g[12]=g[0]*p+g[4]*v+g[8]*m+g[12],g[13]=g[1]*p+g[5]*v+g[9]*m+g[13],g[14]=g[2]*p+g[6]*v+g[10]*m+g[14],g[15]=g[3]*p+g[7]*v+g[11]*m+g[15],this},scale:function(p){return this.scaleXYZ(p.x,p.y,p.z)},scaleXYZ:function(p,v,m){var g=this.val;return g[0]=g[0]*p,g[1]=g[1]*p,g[2]=g[2]*p,g[3]=g[3]*p,g[4]=g[4]*v,g[5]=g[5]*v,g[6]=g[6]*v,g[7]=g[7]*v,g[8]=g[8]*m,g[9]=g[9]*m,g[10]=g[10]*m,g[11]=g[11]*m,this},makeRotationAxis:function(p,v){var m=Math.cos(v),g=Math.sin(v),T=1-m,w=p.x,b=p.y,E=p.z,A=T*w,R=T*b;return this.setValues(A*w+m,A*b-g*E,A*E+g*b,0,A*b+g*E,R*b+m,R*E-g*w,0,A*E-g*b,R*E+g*w,T*E*E+m,0,0,0,0,1)},rotate:function(p,v){var m=this.val,g=v.x,T=v.y,w=v.z,b=Math.sqrt(g*g+T*T+w*w);if(Math.abs(b)<a)return this;b=1/b,g*=b,T*=b,w*=b;var E=Math.sin(p),A=Math.cos(p),R=1-A,I=m[0],P=m[1],M=m[2],F=m[3],O=m[4],D=m[5],L=m[6],z=m[7],X=m[8],H=m[9],J=m[10],G=m[11],k=m[12],N=m[13],B=m[14],U=m[15],W=g*g*R+A,K=T*g*R+w*E,q=w*g*R-T*E,_=g*T*R-w*E,rt=T*T*R+A,ft=w*T*R+g*E,vt=g*w*R+T*E,mt=T*w*R-g*E,yt=w*w*R+A;return this.setValues(I*W+O*K+X*q,P*W+D*K+H*q,M*W+L*K+J*q,F*W+z*K+G*q,I*_+O*rt+X*ft,P*_+D*rt+H*ft,M*_+L*rt+J*ft,F*_+z*rt+G*ft,I*vt+O*mt+X*yt,P*vt+D*mt+H*yt,M*vt+L*mt+J*yt,F*vt+z*mt+G*yt,k,N,B,U)},rotateX:function(p){var v=this.val,m=Math.sin(p),g=Math.cos(p),T=v[4],w=v[5],b=v[6],E=v[7],A=v[8],R=v[9],I=v[10],P=v[11];return v[4]=T*g+A*m,v[5]=w*g+R*m,v[6]=b*g+I*m,v[7]=E*g+P*m,v[8]=A*g-T*m,v[9]=R*g-w*m,v[10]=I*g-b*m,v[11]=P*g-E*m,this},rotateY:function(p){var v=this.val,m=Math.sin(p),g=Math.cos(p),T=v[0],w=v[1],b=v[2],E=v[3],A=v[8],R=v[9],I=v[10],P=v[11];return v[0]=T*g-A*m,v[1]=w*g-R*m,v[2]=b*g-I*m,v[3]=E*g-P*m,v[8]=T*m+A*g,v[9]=w*m+R*g,v[10]=b*m+I*g,v[11]=E*m+P*g,this},rotateZ:function(p){var v=this.val,m=Math.sin(p),g=Math.cos(p),T=v[0],w=v[1],b=v[2],E=v[3],A=v[4],R=v[5],I=v[6],P=v[7];return v[0]=T*g+A*m,v[1]=w*g+R*m,v[2]=b*g+I*m,v[3]=E*g+P*m,v[4]=A*g-T*m,v[5]=R*g-w*m,v[6]=I*g-b*m,v[7]=P*g-E*m,this},fromRotationTranslation:function(p,v){var m=p.x,g=p.y,T=p.z,w=p.w,b=m+m,E=g+g,A=T+T,R=m*b,I=m*E,P=m*A,M=g*E,F=g*A,O=T*A,D=w*b,L=w*E,z=w*A;return this.setValues(1-(M+O),I+z,P-L,0,I-z,1-(R+O),F+D,0,P+L,F-D,1-(R+M),0,v.x,v.y,v.z,1)},fromQuat:function(p){var v=p.x,m=p.y,g=p.z,T=p.w,w=v+v,b=m+m,E=g+g,A=v*w,R=v*b,I=v*E,P=m*b,M=m*E,F=g*E,O=T*w,D=T*b,L=T*E;return this.setValues(1-(P+F),R+L,I-D,0,R-L,1-(A+F),M+O,0,I+D,M-O,1-(A+P),0,0,0,0,1)},frustum:function(p,v,m,g,T,w){var b=1/(v-p),E=1/(g-m),A=1/(T-w);return this.setValues(T*2*b,0,0,0,0,T*2*E,0,0,(v+p)*b,(g+m)*E,(w+T)*A,-1,0,0,w*T*2*A,0)},perspective:function(p,v,m,g){var T=1/Math.tan(p/2),w=1/(m-g);return this.setValues(T/v,0,0,0,0,T,0,0,0,0,(g+m)*w,-1,0,0,2*g*m*w,0)},perspectiveLH:function(p,v,m,g){return this.setValues(2*m/p,0,0,0,0,2*m/v,0,0,0,0,-g/(m-g),1,0,0,m*g/(m-g),0)},ortho:function(p,v,m,g,T,w){var b=p-v,E=m-g,A=T-w;return b=b===0?b:1/b,E=E===0?E:1/E,A=A===0?A:1/A,this.setValues(-2*b,0,0,0,0,-2*E,0,0,0,0,2*A,0,(p+v)*b,(g+m)*E,(w+T)*A,1)},lookAtRH:function(p,v,m){var g=this.val;return u.subVectors(p,v),u.getLengthSquared()===0&&(u.z=1),u.normalize(),h.crossVectors(m,u),h.getLengthSquared()===0&&(Math.abs(m.z)===1?u.x+=1e-4:u.z+=1e-4,u.normalize(),h.crossVectors(m,u)),h.normalize(),d.crossVectors(u,h),g[0]=h.x,g[1]=h.y,g[2]=h.z,g[4]=d.x,g[5]=d.y,g[6]=d.z,g[8]=u.x,g[9]=u.y,g[10]=u.z,this},lookAt:function(p,v,m){var g=p.x,T=p.y,w=p.z,b=m.x,E=m.y,A=m.z,R=v.x,I=v.y,P=v.z;if(Math.abs(g-R)<a&&Math.abs(T-I)<a&&Math.abs(w-P)<a)return this.identity();var M=g-R,F=T-I,O=w-P,D=1/Math.sqrt(M*M+F*F+O*O);M*=D,F*=D,O*=D;var L=E*O-A*F,z=A*M-b*O,X=b*F-E*M;D=Math.sqrt(L*L+z*z+X*X),D?(D=1/D,L*=D,z*=D,X*=D):(L=0,z=0,X=0);var H=F*X-O*z,J=O*L-M*X,G=M*z-F*L;return D=Math.sqrt(H*H+J*J+G*G),D?(D=1/D,H*=D,J*=D,G*=D):(H=0,J=0,G=0),this.setValues(L,H,M,0,z,J,F,0,X,G,O,0,-(L*g+z*T+X*w),-(H*g+J*T+G*w),-(M*g+F*T+O*w),1)},yawPitchRoll:function(p,v,m){this.zero(),i.zero(),n.zero();var g=this.val,T=i.val,w=n.val,b=Math.sin(m),E=Math.cos(m);return g[10]=1,g[15]=1,g[0]=E,g[1]=b,g[4]=-b,g[5]=E,b=Math.sin(v),E=Math.cos(v),T[0]=1,T[15]=1,T[5]=E,T[10]=E,T[9]=-b,T[6]=b,b=Math.sin(p),E=Math.cos(p),w[5]=1,w[15]=1,w[0]=E,w[2]=-b,w[8]=b,w[10]=E,this.multiplyLocal(i),this.multiplyLocal(n),this},setWorldMatrix:function(p,v,m,g,T){return this.yawPitchRoll(p.y,p.x,p.z),i.scaling(m.x,m.y,m.z),n.xyz(v.x,v.y,v.z),this.multiplyLocal(i),this.multiplyLocal(n),g&&this.multiplyLocal(g),T&&this.multiplyLocal(T),this},multiplyToMat4:function(p,v){var m=this.val,g=p.val,T=m[0],w=m[1],b=m[2],E=m[3],A=m[4],R=m[5],I=m[6],P=m[7],M=m[8],F=m[9],O=m[10],D=m[11],L=m[12],z=m[13],X=m[14],H=m[15],J=g[0],G=g[1],k=g[2],N=g[3],B=g[4],U=g[5],W=g[6],K=g[7],q=g[8],_=g[9],rt=g[10],ft=g[11],vt=g[12],mt=g[13],yt=g[14],xt=g[15];return v.setValues(J*T+G*A+k*M+N*L,G*w+G*R+k*F+N*z,k*b+G*I+k*O+N*X,N*E+G*P+k*D+N*H,B*T+U*A+W*M+K*L,B*w+U*R+W*F+K*z,B*b+U*I+W*O+K*X,B*E+U*P+W*D+K*H,q*T+_*A+rt*M+ft*L,q*w+_*R+rt*F+ft*z,q*b+_*I+rt*O+ft*X,q*E+_*P+rt*D+ft*H,vt*T+mt*A+yt*M+xt*L,vt*w+mt*R+yt*F+xt*z,vt*b+mt*I+yt*O+xt*X,vt*E+mt*P+yt*D+xt*H)},fromRotationXYTranslation:function(p,v,m){var g=v.x,T=v.y,w=v.z,b=Math.sin(p.x),E=Math.cos(p.x),A=Math.sin(p.y),R=Math.cos(p.y),I=g,P=T,M=w,F=-b,O=0-F*A,D=0-E*A,L=F*R,z=E*R;return m||(I=R*g+A*w,P=O*g+E*T+L*w,M=D*g+b*T+z*w),this.setValues(R,O,D,0,0,E,b,0,A,L,z,0,I,P,M,1)},getMaxScaleOnAxis:function(){var p=this.val,v=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],m=p[4]*p[4]+p[5]*p[5]+p[6]*p[6],g=p[8]*p[8]+p[9]*p[9]+p[10]*p[10];return Math.sqrt(Math.max(v,m,g))}}),i=new r,n=new r,h=new l,d=new l,u=new l;o.exports=r},69635:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return Math.min(t+s,l)};o.exports=x},37394:o=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s=t.length;if(s===0)return 0;t.sort(function(a,r){return a-r});var l=Math.floor(s/2);return s%2===0?(t[l]+t[l-1])/2:t[l]};o.exports=x},17259:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return Math.max(t-s,l)};o.exports=x},61820:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){l===void 0&&(l=s+1);var r=(t-s)/(l-s);return r>1?a!==void 0?(r=(a-t)/(a-l),r<0&&(r=0)):r=1:r<0&&(r=0),r};o.exports=x},75003:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(5341),a=t(72283),r=t(70015),i=1e-6,n=new Int8Array([1,2,0]),h=new Float32Array([0,0,0]),d=new r(1,0,0),u=new r(0,1,0),p=new r,v=new l,m=new s({initialize:function(T,w,b,E){this.onChangeCallback=a,this.set(T,w,b,E)},x:{get:function(){return this._x},set:function(g){this._x=g,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(g){this._y=g,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(g){this._z=g,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(g){this._w=g,this.onChangeCallback(this)}},copy:function(g){return this.set(g)},set:function(g,T,w,b,E){return E===void 0&&(E=!0),typeof g=="object"?(this._x=g.x||0,this._y=g.y||0,this._z=g.z||0,this._w=g.w||0):(this._x=g||0,this._y=T||0,this._z=w||0,this._w=b||0),E&&this.onChangeCallback(this),this},add:function(g){return this._x+=g.x,this._y+=g.y,this._z+=g.z,this._w+=g.w,this.onChangeCallback(this),this},subtract:function(g){return this._x-=g.x,this._y-=g.y,this._z-=g.z,this._w-=g.w,this.onChangeCallback(this),this},scale:function(g){return this._x*=g,this._y*=g,this._z*=g,this._w*=g,this.onChangeCallback(this),this},length:function(){var g=this.x,T=this.y,w=this.z,b=this.w;return Math.sqrt(g*g+T*T+w*w+b*b)},lengthSq:function(){var g=this.x,T=this.y,w=this.z,b=this.w;return g*g+T*T+w*w+b*b},normalize:function(){var g=this.x,T=this.y,w=this.z,b=this.w,E=g*g+T*T+w*w+b*b;return E>0&&(E=1/Math.sqrt(E),this._x=g*E,this._y=T*E,this._z=w*E,this._w=b*E),this.onChangeCallback(this),this},dot:function(g){return this.x*g.x+this.y*g.y+this.z*g.z+this.w*g.w},lerp:function(g,T){T===void 0&&(T=0);var w=this.x,b=this.y,E=this.z,A=this.w;return this.set(w+T*(g.x-w),b+T*(g.y-b),E+T*(g.z-E),A+T*(g.w-A))},rotationTo:function(g,T){var w=g.x*T.x+g.y*T.y+g.z*T.z;return w<-.999999?(p.copy(d).cross(g).length()<i&&p.copy(u).cross(g),p.normalize(),this.setAxisAngle(p,Math.PI)):w>.999999?this.set(0,0,0,1):(p.copy(g).cross(T),this._x=p.x,this._y=p.y,this._z=p.z,this._w=1+w,this.normalize())},setAxes:function(g,T,w){var b=v.val;return b[0]=T.x,b[3]=T.y,b[6]=T.z,b[1]=w.x,b[4]=w.y,b[7]=w.z,b[2]=-g.x,b[5]=-g.y,b[8]=-g.z,this.fromMat3(v).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(g,T){T=T*.5;var w=Math.sin(T);return this.set(w*g.x,w*g.y,w*g.z,Math.cos(T))},multiply:function(g){var T=this.x,w=this.y,b=this.z,E=this.w,A=g.x,R=g.y,I=g.z,P=g.w;return this.set(T*P+E*A+w*I-b*R,w*P+E*R+b*A-T*I,b*P+E*I+T*R-w*A,E*P-T*A-w*R-b*I)},slerp:function(g,T){var w=this.x,b=this.y,E=this.z,A=this.w,R=g.x,I=g.y,P=g.z,M=g.w,F=w*R+b*I+E*P+A*M;F<0&&(F=-F,R=-R,I=-I,P=-P,M=-M);var O=1-T,D=T;if(1-F>i){var L=Math.acos(F),z=Math.sin(L);O=Math.sin((1-T)*L)/z,D=Math.sin(T*L)/z}return this.set(O*w+D*R,O*b+D*I,O*E+D*P,O*A+D*M)},invert:function(){var g=this.x,T=this.y,w=this.z,b=this.w,E=g*g+T*T+w*w+b*b,A=E?1/E:0;return this.set(-g*A,-T*A,-w*A,b*A)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(g){g*=.5;var T=this.x,w=this.y,b=this.z,E=this.w,A=Math.sin(g),R=Math.cos(g);return this.set(T*R+E*A,w*R+b*A,b*R-w*A,E*R-T*A)},rotateY:function(g){g*=.5;var T=this.x,w=this.y,b=this.z,E=this.w,A=Math.sin(g),R=Math.cos(g);return this.set(T*R-b*A,w*R+E*A,b*R+T*A,E*R-w*A)},rotateZ:function(g){g*=.5;var T=this.x,w=this.y,b=this.z,E=this.w,A=Math.sin(g),R=Math.cos(g);return this.set(T*R+w*A,w*R-T*A,b*R+E*A,E*R-b*A)},calculateW:function(){var g=this.x,T=this.y,w=this.z;return this.w=-Math.sqrt(1-g*g-T*T-w*w),this},setFromEuler:function(g,T){var w=g.x/2,b=g.y/2,E=g.z/2,A=Math.cos(w),R=Math.cos(b),I=Math.cos(E),P=Math.sin(w),M=Math.sin(b),F=Math.sin(E);switch(g.order){case"XYZ":{this.set(P*R*I+A*M*F,A*M*I-P*R*F,A*R*F+P*M*I,A*R*I-P*M*F,T);break}case"YXZ":{this.set(P*R*I+A*M*F,A*M*I-P*R*F,A*R*F-P*M*I,A*R*I+P*M*F,T);break}case"ZXY":{this.set(P*R*I-A*M*F,A*M*I+P*R*F,A*R*F+P*M*I,A*R*I-P*M*F,T);break}case"ZYX":{this.set(P*R*I-A*M*F,A*M*I+P*R*F,A*R*F-P*M*I,A*R*I+P*M*F,T);break}case"YZX":{this.set(P*R*I+A*M*F,A*M*I+P*R*F,A*R*F-P*M*I,A*R*I-P*M*F,T);break}case"XZY":{this.set(P*R*I-A*M*F,A*M*I-P*R*F,A*R*F+P*M*I,A*R*I+P*M*F,T);break}}return this},setFromRotationMatrix:function(g){var T=g.val,w=T[0],b=T[4],E=T[8],A=T[1],R=T[5],I=T[9],P=T[2],M=T[6],F=T[10],O=w+R+F,D;return O>0?(D=.5/Math.sqrt(O+1),this.set((M-I)*D,(E-P)*D,(A-b)*D,.25/D)):w>R&&w>F?(D=2*Math.sqrt(1+w-R-F),this.set(.25*D,(b+A)/D,(E+P)/D,(M-I)/D)):R>F?(D=2*Math.sqrt(1+R-w-F),this.set((b+A)/D,.25*D,(I+M)/D,(E-P)/D)):(D=2*Math.sqrt(1+F-w-R),this.set((E+P)/D,(I+M)/D,.25*D,(A-b)/D)),this},fromMat3:function(g){var T=g.val,w=T[0]+T[4]+T[8],b;if(w>0)b=Math.sqrt(w+1),this.w=.5*b,b=.5/b,this._x=(T[7]-T[5])*b,this._y=(T[2]-T[6])*b,this._z=(T[3]-T[1])*b;else{var E=0;T[4]>T[0]&&(E=1),T[8]>T[E*3+E]&&(E=2);var A=n[E],R=n[A];b=Math.sqrt(T[E*3+E]-T[A*3+A]-T[R*3+R]+1),h[E]=.5*b,b=.5/b,h[A]=(T[A*3+E]+T[E*3+A])*b,h[R]=(T[R*3+E]+T[E*3+R])*b,this._x=h[0],this._y=h[1],this._z=h[2],this._w=(T[R*3+A]-T[A*3+R])*b}return this.onChangeCallback(this),this}});o.exports=m},23701:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=function(a){return a*s.RAD_TO_DEG};o.exports=l},16906:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s=1);var l=Math.random()*2*Math.PI;return t.x=Math.cos(l)*s,t.y=Math.sin(l)*s,t};o.exports=x},52417:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s=1);var l=Math.random()*2*Math.PI,a=Math.random()*2-1,r=Math.sqrt(1-a*a)*s;return t.x=Math.cos(l)*r,t.y=Math.sin(l)*r,t.z=a*s,t};o.exports=x},17915:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s=1),t.x=(Math.random()*2-1)*s,t.y=(Math.random()*2-1)*s,t.z=(Math.random()*2-1)*s,t.w=(Math.random()*2-1)*s,t};o.exports=x},52257:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.x,a=t.y;return t.x=l*Math.cos(s)-a*Math.sin(s),t.y=l*Math.sin(s)+a*Math.cos(s),t};o.exports=x},2386:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=Math.cos(a),i=Math.sin(a),n=t.x-s,h=t.y-l;return t.x=n*r-h*i+s,t.y=n*i+h*r+l,t};o.exports=x},72395:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r){var i=a+Math.atan2(t.y-l,t.x-s);return t.x=s+r*Math.cos(i),t.y=l+r*Math.sin(i),t};o.exports=x},41061:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r){return t.x=s+r*Math.cos(a),t.y=l+r*Math.sin(a),t};o.exports=x},93709:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70015),l=t(16650),a=t(75003),r=new l,i=new a,n=new s,h=function(d,u,p){return i.setAxisAngle(u,p),r.fromRotationTranslation(i,n.set(0,0,0)),d.transformMat4(r)};o.exports=h},67233:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t>0?Math.ceil(t):Math.floor(t)};o.exports=x},64333:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){s===void 0&&(s=0),l===void 0&&(l=10);var a=Math.pow(l,-s);return Math.round(t*a)/a};o.exports=x},59533:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){s===void 0&&(s=1),l===void 0&&(l=1),a===void 0&&(a=1),a*=Math.PI/t;for(var r=[],i=[],n=0;n<t;n++)l-=s*a,s+=l*a,r[n]=l,i[n]=s;return{sin:i,cos:r,length:t}};o.exports=x},5514:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t<=s?0:t>=l?1:(t=(t-s)/(l-s),t*t*(3-2*t))};o.exports=x},87736:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t=Math.max(0,Math.min(1,(t-s)/(l-s))),t*t*t*(t*(t*6-15)+10)};o.exports=x},55805:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n){n===void 0&&(n=new s);var h=0,d=0,u=r*i;return a>0&&a<=u&&(a>r-1?(d=Math.floor(a/r),h=a-d*r):h=a),n.set(h,d)};o.exports=l},64462:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d,u,p){p===void 0&&(p=new s);var v=Math.sin(h),m=Math.cos(h),g=m*d,T=v*d,w=-v*u,b=m*u,E=1/(g*b+w*-T);return p.x=b*E*a+-w*E*r+(n*w-i*b)*E,p.y=g*E*r+-T*E*a+(-n*g+i*T)*E,p};o.exports=l},93736:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(88456),a=new s({initialize:function(i,n){this.x=0,this.y=0,typeof i=="object"?(this.x=i.x||0,this.y=i.y||0):(n===void 0&&(n=i),this.x=i||0,this.y=n||0)},clone:function(){return new a(this.x,this.y)},copy:function(r){return this.x=r.x||0,this.y=r.y||0,this},setFromObject:function(r){return this.x=r.x||0,this.y=r.y||0,this},set:function(r,i){return i===void 0&&(i=r),this.x=r,this.y=i,this},setTo:function(r,i){return this.set(r,i)},setToPolar:function(r,i){return i==null&&(i=1),this.x=Math.cos(r)*i,this.y=Math.sin(r)*i,this},equals:function(r){return this.x===r.x&&this.y===r.y},fuzzyEquals:function(r,i){return l(this.x,r.x,i)&&l(this.y,r.y,i)},angle:function(){var r=Math.atan2(this.y,this.x);return r<0&&(r+=2*Math.PI),r},setAngle:function(r){return this.setToPolar(r,this.length())},add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r):(this.x=0,this.y=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(r){var i=r.x-this.x,n=r.y-this.y;return Math.sqrt(i*i+n*n)},distanceSq:function(r){var i=r.x-this.x,n=r.y-this.y;return i*i+n*n},length:function(){var r=this.x,i=this.y;return Math.sqrt(r*r+i*i)},setLength:function(r){return this.normalize().scale(r)},lengthSq:function(){var r=this.x,i=this.y;return r*r+i*i},normalize:function(){var r=this.x,i=this.y,n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=r*n,this.y=i*n),this},normalizeRightHand:function(){var r=this.x;return this.x=this.y*-1,this.y=r,this},normalizeLeftHand:function(){var r=this.x;return this.x=this.y,this.y=r*-1,this},dot:function(r){return this.x*r.x+this.y*r.y},cross:function(r){return this.x*r.y-this.y*r.x},lerp:function(r,i){i===void 0&&(i=0);var n=this.x,h=this.y;return this.x=n+i*(r.x-n),this.y=h+i*(r.y-h),this},transformMat3:function(r){var i=this.x,n=this.y,h=r.val;return this.x=h[0]*i+h[3]*n+h[6],this.y=h[1]*i+h[4]*n+h[7],this},transformMat4:function(r){var i=this.x,n=this.y,h=r.val;return this.x=h[0]*i+h[4]*n+h[12],this.y=h[1]*i+h[5]*n+h[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(r){var i=this.length();return i&&i>r&&this.scale(r/i),this},reflect:function(r){return r=r.clone().normalize(),this.subtract(r.scale(2*this.dot(r)))},mirror:function(r){return this.reflect(r).negate()},rotate:function(r){var i=Math.cos(r),n=Math.sin(r);return this.set(i*this.x-n*this.y,n*this.x+i*this.y)},project:function(r){var i=this.dot(r)/r.dot(r);return this.copy(r).scale(i)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),o.exports=a},70015:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n){this.x=0,this.y=0,this.z=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=i||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clone:function(){return new l(this.x,this.y,this.z)},addVectors:function(a,r){return this.x=a.x+r.x,this.y=a.y+r.y,this.z=a.z+r.z,this},crossVectors:function(a,r){var i=a.x,n=a.y,h=a.z,d=r.x,u=r.y,p=r.z;return this.x=n*p-h*u,this.y=h*d-i*p,this.z=i*u-n*d,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this},set:function(a,r,i){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=r||0,this.z=i||0),this},setFromMatrixPosition:function(a){return this.fromArray(a.val,12)},setFromMatrixColumn:function(a,r){return this.fromArray(a.val,r*4)},fromArray:function(a,r){return r===void 0&&(r=0),this.x=a[r],this.y=a[r+1],this.z=a[r+2],this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addScale:function(a,r){return this.x+=a.x*r,this.y+=a.y*r,this.z+=a.z*r||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(a){var r=a.x-this.x,i=a.y-this.y,n=a.z-this.z||0;return Math.sqrt(r*r+i*i+n*n)},distanceSq:function(a){var r=a.x-this.x,i=a.y-this.y,n=a.z-this.z||0;return r*r+i*i+n*n},length:function(){var a=this.x,r=this.y,i=this.z;return Math.sqrt(a*a+r*r+i*i)},lengthSq:function(){var a=this.x,r=this.y,i=this.z;return a*a+r*r+i*i},normalize:function(){var a=this.x,r=this.y,i=this.z,n=a*a+r*r+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=a*n,this.y=r*n,this.z=i*n),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},cross:function(a){var r=this.x,i=this.y,n=this.z,h=a.x,d=a.y,u=a.z;return this.x=i*u-n*d,this.y=n*h-r*u,this.z=r*d-i*h,this},lerp:function(a,r){r===void 0&&(r=0);var i=this.x,n=this.y,h=this.z;return this.x=i+r*(a.x-i),this.y=n+r*(a.y-n),this.z=h+r*(a.z-h),this},applyMatrix3:function(a){var r=this.x,i=this.y,n=this.z,h=a.val;return this.x=h[0]*r+h[3]*i+h[6]*n,this.y=h[1]*r+h[4]*i+h[7]*n,this.z=h[2]*r+h[5]*i+h[8]*n,this},applyMatrix4:function(a){var r=this.x,i=this.y,n=this.z,h=a.val,d=1/(h[3]*r+h[7]*i+h[11]*n+h[15]);return this.x=(h[0]*r+h[4]*i+h[8]*n+h[12])*d,this.y=(h[1]*r+h[5]*i+h[9]*n+h[13])*d,this.z=(h[2]*r+h[6]*i+h[10]*n+h[14])*d,this},transformMat3:function(a){var r=this.x,i=this.y,n=this.z,h=a.val;return this.x=r*h[0]+i*h[3]+n*h[6],this.y=r*h[1]+i*h[4]+n*h[7],this.z=r*h[2]+i*h[5]+n*h[8],this},transformMat4:function(a){var r=this.x,i=this.y,n=this.z,h=a.val;return this.x=h[0]*r+h[4]*i+h[8]*n+h[12],this.y=h[1]*r+h[5]*i+h[9]*n+h[13],this.z=h[2]*r+h[6]*i+h[10]*n+h[14],this},transformCoordinates:function(a){var r=this.x,i=this.y,n=this.z,h=a.val,d=r*h[0]+i*h[4]+n*h[8]+h[12],u=r*h[1]+i*h[5]+n*h[9]+h[13],p=r*h[2]+i*h[6]+n*h[10]+h[14],v=r*h[3]+i*h[7]+n*h[11]+h[15];return this.x=d/v,this.y=u/v,this.z=p/v,this},transformQuat:function(a){var r=this.x,i=this.y,n=this.z,h=a.x,d=a.y,u=a.z,p=a.w,v=p*r+d*n-u*i,m=p*i+u*r-h*n,g=p*n+h*i-d*r,T=-h*r-d*i-u*n;return this.x=v*p+T*-h+m*-u-g*-d,this.y=m*p+T*-d+g*-h-v*-u,this.z=g*p+T*-u+v*-d-m*-h,this},project:function(a){var r=this.x,i=this.y,n=this.z,h=a.val,d=h[0],u=h[1],p=h[2],v=h[3],m=h[4],g=h[5],T=h[6],w=h[7],b=h[8],E=h[9],A=h[10],R=h[11],I=h[12],P=h[13],M=h[14],F=h[15],O=1/(r*v+i*w+n*R+F);return this.x=(r*d+i*m+n*b+I)*O,this.y=(r*u+i*g+n*E+P)*O,this.z=(r*p+i*T+n*A+M)*O,this},projectViewMatrix:function(a,r){return this.applyMatrix4(a).applyMatrix4(r)},unprojectViewMatrix:function(a,r){return this.applyMatrix4(a).applyMatrix4(r)},unproject:function(a,r){var i=a.x,n=a.y,h=a.z,d=a.w,u=this.x-i,p=d-this.y-1-n,v=this.z;return this.x=2*u/h-1,this.y=2*p/d-1,this.z=2*v-1,this.project(r)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});l.ZERO=new l,l.RIGHT=new l(1,0,0),l.LEFT=new l(-1,0,0),l.UP=new l(0,-1,0),l.DOWN=new l(0,1,0),l.FORWARD=new l(0,0,1),l.BACK=new l(0,0,-1),l.ONE=new l(1,1,1),o.exports=l},51729:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h){this.x=0,this.y=0,this.z=0,this.w=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=i||0,this.z=n||0,this.w=h||0)},clone:function(){return new l(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this.w=a.w||0,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,r,i,n){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=r||0,this.z=i||0,this.w=n||0),this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this.w+=a.w||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this.w-=a.w||0,this},scale:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},length:function(){var a=this.x,r=this.y,i=this.z,n=this.w;return Math.sqrt(a*a+r*r+i*i+n*n)},lengthSq:function(){var a=this.x,r=this.y,i=this.z,n=this.w;return a*a+r*r+i*i+n*n},normalize:function(){var a=this.x,r=this.y,i=this.z,n=this.w,h=a*a+r*r+i*i+n*n;return h>0&&(h=1/Math.sqrt(h),this.x=a*h,this.y=r*h,this.z=i*h,this.w=n*h),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lerp:function(a,r){r===void 0&&(r=0);var i=this.x,n=this.y,h=this.z,d=this.w;return this.x=i+r*(a.x-i),this.y=n+r*(a.y-n),this.z=h+r*(a.z-h),this.w=d+r*(a.w-d),this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this.w*=a.w||1,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this.w/=a.w||1,this},distance:function(a){var r=a.x-this.x,i=a.y-this.y,n=a.z-this.z||0,h=a.w-this.w||0;return Math.sqrt(r*r+i*i+n*n+h*h)},distanceSq:function(a){var r=a.x-this.x,i=a.y-this.y,n=a.z-this.z||0,h=a.w-this.w||0;return r*r+i*i+n*n+h*h},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(a){var r=this.x,i=this.y,n=this.z,h=this.w,d=a.val;return this.x=d[0]*r+d[4]*i+d[8]*n+d[12]*h,this.y=d[1]*r+d[5]*i+d[9]*n+d[13]*h,this.z=d[2]*r+d[6]*i+d[10]*n+d[14]*h,this.w=d[3]*r+d[7]*i+d[11]*n+d[15]*h,this},transformQuat:function(a){var r=this.x,i=this.y,n=this.z,h=a.x,d=a.y,u=a.z,p=a.w,v=p*r+d*n-u*i,m=p*i+u*r-h*n,g=p*n+h*i-d*r,T=-h*r-d*i-u*n;return this.x=v*p+T*-h+m*-u-g*-d,this.y=m*p+T*-d+g*-h-v*-u,this.z=g*p+T*-u+v*-d-m*-h,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});l.prototype.sub=l.prototype.subtract,l.prototype.mul=l.prototype.multiply,l.prototype.div=l.prototype.divide,l.prototype.dist=l.prototype.distance,l.prototype.distSq=l.prototype.distanceSq,l.prototype.len=l.prototype.length,l.prototype.lenSq=l.prototype.lengthSq,o.exports=l},9557:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return Math.abs(t-s)<=l};o.exports=x},1071:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=l-s;return s+((t-s)%a+a)%a};o.exports=x},90447:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){return Math.atan2(a-s,l-t)};o.exports=x},94240:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return Math.atan2(s.y-t.y,s.x-t.x)};o.exports=x},84066:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return Math.atan2(s.x-t.x,s.y-t.y)};o.exports=x},9678:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){return Math.atan2(l-t,a-s)};o.exports=x},76861:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=function(a){return a>Math.PI&&(a-=s.PI2),Math.abs(((a+s.TAU)%s.PI2-s.PI2)%s.PI2)};o.exports=l},37570:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t=t%(2*Math.PI),t>=0?t:t+2*Math.PI};o.exports=x},87597:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61616),l=function(){return s(-Math.PI,Math.PI)};o.exports=l},74493:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61616),l=function(){return s(-180,180)};o.exports=l},19049:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(37570),l=function(a){return s(a+Math.PI)};o.exports=l},90612:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=function(a,r,i){return i===void 0&&(i=.05),a===r||(Math.abs(r-a)<=i||Math.abs(r-a)>=s.PI2-i?a=r:(Math.abs(r-a)>Math.PI&&(r<a?r+=s.PI2:r-=s.PI2),r>a?a+=i:r<a&&(a-=i))),a};o.exports=l},93954:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=s-t;if(l===0)return 0;var a=Math.floor((l- -180)/360);return l-a*360};o.exports=x},35786:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1071),l=function(a){return s(a,-Math.PI,Math.PI)};o.exports=l},62138:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1071),l=function(a){return s(a,-180,180)};o.exports=l},22153:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:t(90447),BetweenPoints:t(94240),BetweenPointsY:t(84066),BetweenY:t(9678),CounterClockwise:t(76861),Normalize:t(37570),Random:t(87597),RandomDegrees:t(74493),Reverse:t(19049),RotateTo:t(90612),ShortestBetween:t(93954),Wrap:t(35786),WrapDegrees:t(62138)}},83392:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};o.exports=x},53996:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=t-l,i=s-a;return Math.sqrt(r*r+i*i)};o.exports=x},92951:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.x-s.x,a=t.y-s.y;return Math.sqrt(l*l+a*a)};o.exports=x},12161:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.x-s.x,a=t.y-s.y;return l*l+a*a};o.exports=x},38057:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){return Math.max(Math.abs(t-l),Math.abs(s-a))};o.exports=x},33297:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r){return r===void 0&&(r=2),Math.sqrt(Math.pow(l-t,r)+Math.pow(a-s,r))};o.exports=x},90366:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){return Math.abs(t-l)+Math.abs(s-a)};o.exports=x},35032:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=t-l,i=s-a;return r*r+i*i};o.exports=x},10130:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:t(53996),BetweenPoints:t(92951),BetweenPointsSquared:t(12161),Chebyshev:t(38057),Power:t(33297),Snake:t(90366),Squared:t(35032)}},35060:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25265),l=t(57428),a=t(73214),r=t(71778),i=t(36468),n=t(88258),h=t(52910),d=t(67799),u=t(74083),p=t(92284),v=t(28035),m=t(8754);o.exports={Power0:h,Power1:d.Out,Power2:r.Out,Power3:u.Out,Power4:p.Out,Linear:h,Quad:d.Out,Cubic:r.Out,Quart:u.Out,Quint:p.Out,Sine:v.Out,Expo:n.Out,Circ:a.Out,Elastic:i.Out,Back:s.Out,Bounce:l.Out,Stepped:m,"Quad.easeIn":d.In,"Cubic.easeIn":r.In,"Quart.easeIn":u.In,"Quint.easeIn":p.In,"Sine.easeIn":v.In,"Expo.easeIn":n.In,"Circ.easeIn":a.In,"Elastic.easeIn":i.In,"Back.easeIn":s.In,"Bounce.easeIn":l.In,"Quad.easeOut":d.Out,"Cubic.easeOut":r.Out,"Quart.easeOut":u.Out,"Quint.easeOut":p.Out,"Sine.easeOut":v.Out,"Expo.easeOut":n.Out,"Circ.easeOut":a.Out,"Elastic.easeOut":i.Out,"Back.easeOut":s.Out,"Bounce.easeOut":l.Out,"Quad.easeInOut":d.InOut,"Cubic.easeInOut":r.InOut,"Quart.easeInOut":u.InOut,"Quint.easeInOut":p.InOut,"Sine.easeInOut":v.InOut,"Expo.easeInOut":n.InOut,"Circ.easeInOut":a.InOut,"Elastic.easeInOut":i.InOut,"Back.easeInOut":s.InOut,"Bounce.easeInOut":l.InOut}},25860:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s=1.70158),t*t*((s+1)*t-s)};o.exports=x},45264:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s=1.70158);var l=s*1.525;return(t*=2)<1?.5*(t*t*((l+1)*t-l)):.5*((t-=2)*t*((l+1)*t+l)+2)};o.exports=x},36699:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s=1.70158),--t*t*((s+1)*t+s)+1};o.exports=x},25265:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(25860),Out:t(36699),InOut:t(45264)}},62191:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t=1-t,t<.36363636363636365?1-7.5625*t*t:t<.7272727272727273?1-(7.5625*(t-=.5454545454545454)*t+.75):t<.9090909090909091?1-(7.5625*(t-=.8181818181818182)*t+.9375):1-(7.5625*(t-=.9545454545454546)*t+.984375)};o.exports=x},24799:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s=!1;return t<.5?(t=1-t*2,s=!0):t=t*2-1,t<.36363636363636365?t=7.5625*t*t:t<.7272727272727273?t=7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?t=7.5625*(t-=.8181818181818182)*t+.9375:t=7.5625*(t-=.9545454545454546)*t+.984375,s?(1-t)*.5:t*.5+.5};o.exports=x},60819:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375};o.exports=x},57428:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(62191),Out:t(60819),InOut:t(24799)}},86855:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return 1-Math.sqrt(1-t*t)};o.exports=x},7280:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)};o.exports=x},18058:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return Math.sqrt(1- --t*t)};o.exports=x},73214:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(86855),Out:t(18058),InOut:t(7280)}},91532:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t*t*t};o.exports=x},63180:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};o.exports=x},16518:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return--t*t*t+1};o.exports=x},71778:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(91532),Out:t(16518),InOut:t(63180)}},24729:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(s===void 0&&(s=.1),l===void 0&&(l=.1),t===0)return 0;if(t===1)return 1;var a=l/4;return s<1?s=1:a=l*Math.asin(1/s)/(2*Math.PI),-(s*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/l))};o.exports=x},50325:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(s===void 0&&(s=.1),l===void 0&&(l=.1),t===0)return 0;if(t===1)return 1;var a=l/4;return s<1?s=1:a=l*Math.asin(1/s)/(2*Math.PI),(t*=2)<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/l)):s*Math.pow(2,-10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/l)*.5+1};o.exports=x},84074:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(s===void 0&&(s=.1),l===void 0&&(l=.1),t===0)return 0;if(t===1)return 1;var a=l/4;return s<1?s=1:a=l*Math.asin(1/s)/(2*Math.PI),s*Math.pow(2,-10*t)*Math.sin((t-a)*(2*Math.PI)/l)+1};o.exports=x},36468:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(24729),Out:t(84074),InOut:t(50325)}},95638:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return Math.pow(2,10*(t-1))-.001};o.exports=x},10357:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))};o.exports=x},14894:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return 1-Math.pow(2,-10*t)};o.exports=x},88258:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(95638),Out:t(14894),InOut:t(10357)}},33063:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Back:t(25265),Bounce:t(57428),Circular:t(73214),Cubic:t(71778),Elastic:t(36468),Expo:t(88258),Linear:t(52910),Quadratic:t(67799),Quartic:t(74083),Quintic:t(92284),Sine:t(28035),Stepped:t(8754)}},43927:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t};o.exports=x},52910:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=t(43927)},77471:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t*t};o.exports=x},83863:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};o.exports=x},44383:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t*(2-t)};o.exports=x},67799:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(77471),Out:t(44383),InOut:t(83863)}},48311:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t*t*t*t};o.exports=x},55248:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)};o.exports=x},23135:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return 1- --t*t*t*t};o.exports=x},74083:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(48311),Out:t(23135),InOut:t(55248)}},7313:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t*t*t*t*t};o.exports=x},98759:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)};o.exports=x},26670:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return--t*t*t*t*t+1};o.exports=x},92284:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(7313),Out:t(26670),InOut:t(98759)}},52929:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t===0?0:t===1?1:1-Math.cos(t*Math.PI/2)};o.exports=x},66333:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t===0?0:t===1?1:.5*(1-Math.cos(Math.PI*t))};o.exports=x},37255:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t===0?0:t===1?1:Math.sin(t*Math.PI/2)};o.exports=x},28035:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(52929),Out:t(37255),InOut:t(66333)}},52770:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s=1),t<=0?0:t>=1?1:((s*t|0)+1)*(1/s)};o.exports=x},8754:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=t(52770)},17247:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s=1e-4),Math.ceil(t-s)};o.exports=x},88456:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return l===void 0&&(l=1e-4),Math.abs(t-s)<l};o.exports=x},61824:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s=1e-4),Math.floor(t+s)};o.exports=x},41935:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return l===void 0&&(l=1e-4),t>s-l};o.exports=x},54726:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return l===void 0&&(l=1e-4),t<s+l};o.exports=x},52778:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:t(17247),Equal:t(88456),Floor:t(61824),GreaterThan:t(41935),LessThan:t(54726)}},5923:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(98611),a={Angle:t(22153),Distance:t(10130),Easing:t(33063),Fuzzy:t(52778),Interpolation:t(48528),Pow2:t(73773),Snap:t(23679),RandomDataGenerator:t(81429),Average:t(26042),Bernstein:t(22824),Between:t(17489),CatmullRom:t(14976),CeilTo:t(89129),Clamp:t(82897),DegToRad:t(75606),Difference:t(767),Euler:t(9849),Factorial:t(8034),FloatBetween:t(61616),FloorTo:t(60679),FromPercent:t(91806),GetSpeed:t(79366),IsEven:t(43776),IsEvenStrict:t(58442),Linear:t(42798),LinearXY:t(61072),MaxAdd:t(69635),Median:t(37394),MinSub:t(17259),Percent:t(61820),RadToDeg:t(23701),RandomXY:t(16906),RandomXYZ:t(52417),RandomXYZW:t(17915),Rotate:t(52257),RotateAround:t(2386),RotateAroundDistance:t(72395),RotateTo:t(41061),RoundAwayFromZero:t(67233),RoundTo:t(64333),SinCosTableGenerator:t(59533),SmootherStep:t(87736),SmoothStep:t(5514),ToXY:t(55805),TransformXY:t(64462),Within:t(9557),Wrap:t(1071),Vector2:t(93736),Vector3:t(70015),Vector4:t(51729),Matrix3:t(5341),Matrix4:t(16650),Quaternion:t(75003),RotateVec3:t(93709)};a=l(!1,a,s),o.exports=a},63210:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22824),l=function(a,r){for(var i=0,n=a.length-1,h=0;h<=n;h++)i+=Math.pow(1-r,n-h)*Math.pow(r,h)*a[h]*s(n,h);return i};o.exports=l},88332:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14976),l=function(a,r){var i=a.length-1,n=i*r,h=Math.floor(n);return a[0]===a[i]?(r<0&&(h=Math.floor(n=i*(1+r))),s(n-h,a[(h-1+i)%i],a[h],a[(h+1)%i],a[(h+2)%i])):r<0?a[0]-(s(-n,a[0],a[0],a[1],a[1])-a[0]):r>1?a[i]-(s(n-i,a[i],a[i],a[i-1],a[i-1])-a[i]):s(n-h,a[h?h-1:0],a[h],a[i<h+1?i:h+1],a[i<h+2?i:h+2])};o.exports=l},34631:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function x(r,i){var n=1-r;return n*n*n*i}function t(r,i){var n=1-r;return 3*n*n*r*i}function s(r,i){return 3*(1-r)*r*r*i}function l(r,i){return r*r*r*i}var a=function(r,i,n,h,d){return x(r,i)+t(r,n)+s(r,h)+l(r,d)};o.exports=a},47614:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42798),l=function(a,r){var i=a.length-1,n=i*r,h=Math.floor(n);return r<0?s(a[0],a[1],n):r>1?s(a[i],a[i-1],i-n):s(a[h],a[h+1>i?i:h+1],n-h)};o.exports=l},16252:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function x(a,r){var i=1-a;return i*i*r}function t(a,r){return 2*(1-a)*a*r}function s(a,r){return a*a*r}var l=function(a,r,i,n){return x(a,r)+t(a,i)+s(a,n)};o.exports=l},44521:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5514),l=function(a,r,i){return r+(i-r)*s(a,0,1)};o.exports=l},45507:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87736),l=function(a,r,i){return r+(i-r)*s(a,0,1)};o.exports=l},48528:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bezier:t(63210),CatmullRom:t(88332),CubicBezier:t(34631),Linear:t(47614),QuadraticBezier:t(16252),SmoothStep:t(44521),SmootherStep:t(45507)}},3504:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s=Math.log(t)/.6931471805599453;return 1<<Math.ceil(s)};o.exports=x},28621:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t>0&&(t&t-1)===0&&s>0&&(s&s-1)===0};o.exports=x},2018:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t>0&&(t&t-1)===0};o.exports=x},73773:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetNext:t(3504),IsSize:t(28621),IsValue:t(2018)}},81429:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){r===void 0&&(r=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],r&&this.init(r)},rnd:function(){var a=2091639*this.s0+this.c*23283064365386963e-26;return this.c=a|0,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},hash:function(a){var r,i=this.n;a=a.toString();for(var n=0;n<a.length;n++)i+=a.charCodeAt(n),r=.02519603282416938*i,i=r>>>0,r-=i,r*=i,i=r>>>0,r-=i,i+=r*4294967296;return this.n=i,(i>>>0)*23283064365386963e-26},init:function(a){typeof a=="string"?this.state(a):this.sow(a)},sow:function(a){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!a)for(var r=0;r<a.length&&a[r]!=null;r++){var i=a[r];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(a,r){return Math.floor(this.realInRange(0,r-a+1)+a)},between:function(a,r){return Math.floor(this.realInRange(0,r-a+1)+a)},realInRange:function(a,r){return this.frac()*(r-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",r="";for(r=a="";a++<36;r+=~a%5|a*3&4?(a^15?8^this.frac()*(a^20?16:4):4).toString(16):"-");return r},pick:function(a){return a[this.integerInRange(0,a.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(a){return a[~~(Math.pow(this.frac(),2)*a.length+.5)]},timestamp:function(a,r){return this.realInRange(a||9466848e5,r||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(a){return typeof a=="string"&&a.match(/^!rnd/)&&(a=a.split(","),this.c=parseFloat(a[1]),this.s0=parseFloat(a[2]),this.s1=parseFloat(a[3]),this.s2=parseFloat(a[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(a){for(var r=a.length-1,i=r;i>0;i--){var n=Math.floor(this.frac()*(i+1)),h=a[n];a[n]=a[i],a[i]=h}return a}});o.exports=l},82127:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){return l===void 0&&(l=0),s===0?t:(t-=l,t=s*Math.ceil(t/s),a?(l+t)/s:l+t)};o.exports=x},84314:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){return l===void 0&&(l=0),s===0?t:(t-=l,t=s*Math.floor(t/s),a?(l+t)/s:l+t)};o.exports=x},88462:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){return l===void 0&&(l=0),s===0?t:(t-=l,t=s*Math.round(t/s),a?(l+t)/s:l+t)};o.exports=x},23679:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:t(82127),Floor:t(84314),To:t(88462)}},92491:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t(75205);var s=t(86459),l=t(98611),a={Actions:t(83979),Animations:t(13517),BlendModes:t(95723),Cache:t(45820),Cameras:t(44143),Core:t(80293),Class:t(56694),Create:t(84106),Curves:t(73962),Data:t(1999),Display:t(24816),DOM:t(3590),Events:t(95146),FX:t(96910),Game:t(15213),GameObjects:t(48013),Geom:t(84068),Input:t(20873),Loader:t(95695),Math:t(5923),Physics:t(53954),Plugins:t(45615),Renderer:t(42069),Scale:t(86754),ScaleModes:t(27394),Scene:t(87157),Scenes:t(20436),Structs:t(20010),Textures:t(87499),Tilemaps:t(52678),Time:t(97121),Tweens:t(75193),Utils:t(22178)};a.Sound=t(56751),a=l(!1,a,s),o.exports=a,t.g.Phaser=a},62832:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(7864),a=t(1539),r=new s({Extends:a,Mixins:[l.Acceleration,l.Angular,l.Bounce,l.Collision,l.Debug,l.Drag,l.Enable,l.Friction,l.Gravity,l.Immovable,l.Mass,l.Pushable,l.Size,l.Velocity],initialize:function(n,h,d,u,p){a.call(this,n,h,d,u,p),this.body=null}});o.exports=r},66150:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(75606),a=t(53996),r=t(35032),i=t(99523),n=t(72632),h=t(30657),d=t(2732),u=t(15147),p=t(91963),v=t(7599),m=t(93736),g=t(85233),T=new s({initialize:function(b){this.scene=b,this.systems=b.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,b.sys.events.once(v.BOOT,this.boot,this),b.sys.events.on(v.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new i(this.world),this.systems.events.once(v.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new i(this.world));var w=this.systems.events;n(this.config,"customUpdate",!1)||w.on(v.UPDATE,this.world.update,this.world),w.on(v.POST_UPDATE,this.world.postUpdate,this.world),w.once(v.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(v.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(v.UPDATE,this.world.update,this.world)},getConfig:function(){var w=this.systems.game.config.physics,b=this.systems.settings.physics,E=h(n(b,"arcade",{}),n(w,"arcade",{}));return E},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(w,b,E,A,R){return E===void 0&&(E=null),A===void 0&&(A=null),R===void 0&&(R=E),this.world.collideObjects(w,b,E,A,R,!0)},collide:function(w,b,E,A,R){return E===void 0&&(E=null),A===void 0&&(A=null),R===void 0&&(R=E),this.world.collideObjects(w,b,E,A,R,!1)},collideTiles:function(w,b,E,A,R){return this.world.collideTiles(w,b,E,A,R)},overlapTiles:function(w,b,E,A,R){return this.world.overlapTiles(w,b,E,A,R)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(w,b,E,A,R,I){A===void 0&&(A=60);var P=Math.atan2(E-w.y,b-w.x);return w.body.acceleration.setToPolar(P,A),R!==void 0&&I!==void 0&&w.body.maxVelocity.set(R,I),P},accelerateToObject:function(w,b,E,A,R){return this.accelerateTo(w,b.x,b.y,E,A,R)},closest:function(w,b){b||(b=this.world.bodies.entries);for(var E=Number.MAX_VALUE,A=null,R=w.x,I=w.y,P=b.length,M=0;M<P;M++){var F=b[M],O=F.body||F;if(!(w===F||w===O||w===O.gameObject||w===O.center)){var D=r(R,I,O.center.x,O.center.y);D<E&&(A=F,E=D)}}return A},furthest:function(w,b){b||(b=this.world.bodies.entries);for(var E=-1,A=null,R=w.x,I=w.y,P=b.length,M=0;M<P;M++){var F=b[M],O=F.body||F;if(!(w===F||w===O||w===O.gameObject||w===O.center)){var D=r(R,I,O.center.x,O.center.y);D>E&&(A=F,E=D)}}return A},moveTo:function(w,b,E,A,R){A===void 0&&(A=60),R===void 0&&(R=0);var I=Math.atan2(E-w.y,b-w.x);return R>0&&(A=a(w.x,w.y,b,E)/(R/1e3)),w.body.velocity.setToPolar(I,A),I},moveToObject:function(w,b,E,A){return this.moveTo(w,b.x,b.y,E,A)},velocityFromAngle:function(w,b,E){return b===void 0&&(b=60),E===void 0&&(E=new m),E.setToPolar(l(w),b)},velocityFromRotation:function(w,b,E){return b===void 0&&(b=60),E===void 0&&(E=new m),E.setToPolar(w,b)},overlapRect:function(w,b,E,A,R,I){return u(this.world,w,b,E,A,R,I)},overlapCirc:function(w,b,E,A,R){return d(this.world,w,b,E,A,R)},shutdown:function(){if(this.world){var w=this.systems.events;w.off(v.UPDATE,this.world.update,this.world),w.off(v.POST_UPDATE,this.world.postUpdate,this.world),w.off(v.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(v.START,this.start,this),this.scene=null,this.systems=null}});p.register("ArcadePhysics",T,"arcadePhysics"),o.exports=T},25084:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(7864),a=t(13747),r=new s({Extends:a,Mixins:[l.Acceleration,l.Angular,l.Bounce,l.Collision,l.Debug,l.Drag,l.Enable,l.Friction,l.Gravity,l.Immovable,l.Mass,l.Pushable,l.Size,l.Velocity],initialize:function(n,h,d,u,p){a.call(this,n,h,d,u,p),this.body=null}});o.exports=r},97602:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(95239),a=t(47401),r=t(27037),i=t(23701),n=t(74118),h=t(94287),d=t(15084),u=t(93736),p=new s({Mixins:[l],initialize:function(m,g){var T=64,w=64,b={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},E=g!==void 0;E&&g.displayWidth&&(T=g.displayWidth,w=g.displayHeight),E||(g=b),this.world=m,this.gameObject=E?g:void 0,this.isBody=!0,this.transform={x:g.x,y:g.y,rotation:g.angle,scaleX:g.scaleX,scaleY:g.scaleY,displayOriginX:g.displayOriginX,displayOriginY:g.displayOriginY},this.debugShowBody=m.defaults.debugShowBody,this.debugShowVelocity=m.defaults.debugShowVelocity,this.debugBodyColor=m.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(g.x-g.scaleX*g.displayOriginX,g.y-g.scaleY*g.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=g.angle,this.preRotation=g.angle,this.width=T,this.height=w,this.sourceWidth=T,this.sourceHeight=w,g.frame&&(this.sourceWidth=g.frame.realWidth,this.sourceHeight=g.frame.realHeight),this.halfWidth=Math.abs(T/2),this.halfHeight=Math.abs(w/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new u,this.newVelocity=new u,this.deltaMax=new u,this.acceleration=new u,this.allowDrag=!0,this.drag=new u,this.allowGravity=!0,this.gravity=new u,this.bounce=new u,this.worldBounce=null,this.customBoundsRectangle=m.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new u(1e4,1e4),this.maxSpeed=-1,this.friction=new u(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=a.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new u(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=d(!1),this.touching=d(!0),this.wasTouching=d(!0),this.blocked=d(!0),this.syncBounds=!1,this.physicsType=a.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=g.scaleX,this._sy=g.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new n,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var v=this.gameObject,m=this.transform;if(v.parentContainer){var g=v.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);m.x=g.tx,m.y=g.ty,m.rotation=i(g.rotation),m.scaleX=g.scaleX,m.scaleY=g.scaleY,m.displayOriginX=v.displayOriginX,m.displayOriginY=v.displayOriginY}else m.x=v.x,m.y=v.y,m.rotation=v.angle,m.scaleX=v.scaleX,m.scaleY=v.scaleY,m.displayOriginX=v.displayOriginX,m.displayOriginY=v.displayOriginY;var T=!1;if(this.syncBounds){var w=v.getBounds(this._bounds);this.width=w.width,this.height=w.height,T=!0}else{var b=Math.abs(m.scaleX),E=Math.abs(m.scaleY);(this._sx!==b||this._sy!==E)&&(this.width=this.sourceWidth*b,this.height=this.sourceHeight*E,this._sx=b,this._sy=E,T=!0)}T&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var v=this.transform;this.position.x=v.x+v.scaleX*(this.offset.x-v.displayOriginX),this.position.y=v.y+v.scaleY*(this.offset.y-v.displayOriginY),this.updateCenter()},resetFlags:function(v){v===void 0&&(v=!1);var m=this.wasTouching,g=this.touching,T=this.blocked;v?d(!0,m):(m.none=g.none,m.up=g.up,m.down=g.down,m.left=g.left,m.right=g.right),d(!0,g),d(!0,T),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(v,m){if(v&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var g=this.position;this.prev.x=g.x,this.prev.y=g.y,this.prevFrame.x=g.x,this.prevFrame.y=g.y}v&&this.update(m)},update:function(v){var m=this.prev,g=this.position,T=this.velocity;if(m.set(g.x,g.y),!this.moves){this._dx=g.x-m.x,this._dy=g.y-m.y;return}if(this.directControl){var w=this.autoFrame;T.set((g.x-w.x)/v,(g.y-w.y)/v),this.world.updateMotion(this,v),this._dx=g.x-w.x,this._dy=g.y-w.y}else this.world.updateMotion(this,v),this.newVelocity.set(T.x*v,T.y*v),g.add(this.newVelocity),this._dx=g.x-m.x,this._dy=g.y-m.y;var b=T.x,E=T.y;if(this.updateCenter(),this.angle=Math.atan2(E,b),this.speed=Math.sqrt(b*b+E*E),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var A=this.blocked;this.world.emit(r.WORLD_BOUNDS,this,A.up,A.down,A.left,A.right)}},postUpdate:function(){var v=this.position,m=v.x-this.prevFrame.x,g=v.y-this.prevFrame.y,T=this.gameObject;if(this.moves){var w=this.deltaMax.x,b=this.deltaMax.y;w!==0&&m!==0&&(m<0&&m<-w?m=-w:m>0&&m>w&&(m=w)),b!==0&&g!==0&&(g<0&&g<-b?g=-b:g>0&&g>b&&(g=b)),T&&(T.x+=m,T.y+=g)}m<0?this.facing=a.FACING_LEFT:m>0&&(this.facing=a.FACING_RIGHT),g<0?this.facing=a.FACING_UP:g>0&&(this.facing=a.FACING_DOWN),this.allowRotation&&T&&(T.angle+=this.deltaZ()),this._tx=m,this._ty=g,this.autoFrame.set(v.x,v.y)},setBoundsRectangle:function(v){return this.customBoundsRectangle=v||this.world.bounds,this},checkWorldBounds:function(){var v=this.position,m=this.velocity,g=this.blocked,T=this.customBoundsRectangle,w=this.world.checkCollision,b=this.worldBounce?-this.worldBounce.x:-this.bounce.x,E=this.worldBounce?-this.worldBounce.y:-this.bounce.y,A=!1;return v.x<T.x&&w.left?(v.x=T.x,m.x*=b,g.left=!0,A=!0):this.right>T.right&&w.right&&(v.x=T.right-this.width,m.x*=b,g.right=!0,A=!0),v.y<T.y&&w.up?(v.y=T.y,m.y*=E,g.up=!0,A=!0):this.bottom>T.bottom&&w.down&&(v.y=T.bottom-this.height,m.y*=E,g.down=!0,A=!0),A&&(this.blocked.none=!1,this.updateCenter()),A},setOffset:function(v,m){return m===void 0&&(m=v),this.offset.set(v,m),this},setGameObject:function(v,m){return m===void 0&&(m=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=v,v.body&&(v.body=this),this.setSize(),this.world.add(this),this.enable=m,this},setSize:function(v,m,g){g===void 0&&(g=!0);var T=this.gameObject;if(T&&(!v&&T.frame&&(v=T.frame.realWidth),!m&&T.frame&&(m=T.frame.realHeight)),this.sourceWidth=v,this.sourceHeight=m,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),g&&T&&T.getCenter){var w=(T.width-v)/2,b=(T.height-m)/2;this.offset.set(w,b)}return this.isCircle=!1,this.radius=0,this},setCircle:function(v,m,g){return m===void 0&&(m=this.offset.x),g===void 0&&(g=this.offset.y),v>0?(this.isCircle=!0,this.radius=v,this.sourceWidth=v*2,this.sourceHeight=v*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(m,g),this.updateCenter()):this.isCircle=!1,this},reset:function(v,m){this.stop();var g=this.gameObject;g&&(g.setPosition(v,m),this.rotation=g.angle,this.preRotation=g.angle);var T=this.position;g&&g.getTopLeft?g.getTopLeft(T):T.set(v,m),this.prev.copy(T),this.prevFrame.copy(T),this.autoFrame.copy(T),g&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(v){return v.x=this.x,v.y=this.y,v.right=this.right,v.bottom=this.bottom,v},hitTest:function(v,m){if(!this.isCircle)return h(this,v,m);if(this.radius>0&&v>=this.left&&v<=this.right&&m>=this.top&&m<=this.bottom){var g=(this.center.x-v)*(this.center.x-v),T=(this.center.y-m)*(this.center.y-m);return g+T<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(v){var m=this.position,g=m.x+this.halfWidth,T=m.y+this.halfHeight;this.debugShowBody&&(v.lineStyle(v.defaultStrokeWidth,this.debugBodyColor),this.isCircle?v.strokeCircle(g,T,this.width/2):(this.checkCollision.up&&v.lineBetween(m.x,m.y,m.x+this.width,m.y),this.checkCollision.right&&v.lineBetween(m.x+this.width,m.y,m.x+this.width,m.y+this.height),this.checkCollision.down&&v.lineBetween(m.x,m.y+this.height,m.x+this.width,m.y+this.height),this.checkCollision.left&&v.lineBetween(m.x,m.y,m.x,m.y+this.height))),this.debugShowVelocity&&(v.lineStyle(v.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),v.lineBetween(g,T,g+this.velocity.x/2,T+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(v){return v===void 0&&(v=!0),this.directControl=v,this},setCollideWorldBounds:function(v,m,g,T){v===void 0&&(v=!0),this.collideWorldBounds=v;var w=m!==void 0,b=g!==void 0;return(w||b)&&(this.worldBounce||(this.worldBounce=new u),w&&(this.worldBounce.x=m),b&&(this.worldBounce.y=g)),T!==void 0&&(this.onWorldBounds=T),this},setVelocity:function(v,m){return this.velocity.set(v,m),v=this.velocity.x,m=this.velocity.y,this.speed=Math.sqrt(v*v+m*m),this},setVelocityX:function(v){return this.setVelocity(v,this.velocity.y)},setVelocityY:function(v){return this.setVelocity(this.velocity.x,v)},setMaxVelocity:function(v,m){return this.maxVelocity.set(v,m),this},setMaxVelocityX:function(v){return this.maxVelocity.x=v,this},setMaxVelocityY:function(v){return this.maxVelocity.y=v,this},setMaxSpeed:function(v){return this.maxSpeed=v,this},setSlideFactor:function(v,m){return this.slideFactor.set(v,m),this},setBounce:function(v,m){return this.bounce.set(v,m),this},setBounceX:function(v){return this.bounce.x=v,this},setBounceY:function(v){return this.bounce.y=v,this},setAcceleration:function(v,m){return this.acceleration.set(v,m),this},setAccelerationX:function(v){return this.acceleration.x=v,this},setAccelerationY:function(v){return this.acceleration.y=v,this},setAllowDrag:function(v){return v===void 0&&(v=!0),this.allowDrag=v,this},setAllowGravity:function(v){return v===void 0&&(v=!0),this.allowGravity=v,this},setAllowRotation:function(v){return v===void 0&&(v=!0),this.allowRotation=v,this},setDrag:function(v,m){return this.drag.set(v,m),this},setDamping:function(v){return this.useDamping=v,this},setDragX:function(v){return this.drag.x=v,this},setDragY:function(v){return this.drag.y=v,this},setGravity:function(v,m){return this.gravity.set(v,m),this},setGravityX:function(v){return this.gravity.x=v,this},setGravityY:function(v){return this.gravity.y=v,this},setFriction:function(v,m){return this.friction.set(v,m),this},setFrictionX:function(v){return this.friction.x=v,this},setFrictionY:function(v){return this.friction.y=v,this},setAngularVelocity:function(v){return this.angularVelocity=v,this},setAngularAcceleration:function(v){return this.angularAcceleration=v,this},setAngularDrag:function(v){return this.angularDrag=v,this},setMass:function(v){return this.mass=v,this},setImmovable:function(v){return v===void 0&&(v=!0),this.immovable=v,this},setEnable:function(v){return v===void 0&&(v=!0),this.enable=v,this},processX:function(v,m,g,T){this.x+=v,this.updateCenter(),m!==null&&(this.velocity.x=m*this.slideFactor.x);var w=this.blocked;g&&(w.left=!0,w.none=!1),T&&(w.right=!0,w.none=!1)},processY:function(v,m,g,T){this.y+=v,this.updateCenter(),m!==null&&(this.velocity.y=m*this.slideFactor.y);var w=this.blocked;g&&(w.up=!0,w.none=!1),T&&(w.down=!0,w.none=!1)},x:{get:function(){return this.position.x},set:function(v){this.position.x=v}},y:{get:function(){return this.position.y},set:function(v){this.position.y=v}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=p},3909:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h,d,u,p){this.world=r,this.name="",this.active=!0,this.overlapOnly=i,this.object1=n,this.object2=h,this.collideCallback=d,this.processCallback=u,this.callbackContext=p},setName:function(a){return this.name=a,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});o.exports=l},99523:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62832),l=t(25084),a=t(97602),r=t(56694),i=t(47401),n=t(10481),h=t(66634),d=t(46346),u=new r({initialize:function(v){this.world=v,this.scene=v.scene,this.sys=v.scene.sys},collider:function(p,v,m,g,T){return this.world.addCollider(p,v,m,g,T)},overlap:function(p,v,m,g,T){return this.world.addOverlap(p,v,m,g,T)},existing:function(p,v){var m=v?i.STATIC_BODY:i.DYNAMIC_BODY;return this.world.enableBody(p,m),p},staticImage:function(p,v,m,g){var T=new s(this.scene,p,v,m,g);return this.sys.displayList.add(T),this.world.enableBody(T,i.STATIC_BODY),T},image:function(p,v,m,g){var T=new s(this.scene,p,v,m,g);return this.sys.displayList.add(T),this.world.enableBody(T,i.DYNAMIC_BODY),T},staticSprite:function(p,v,m,g){var T=new l(this.scene,p,v,m,g);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,i.STATIC_BODY),T},sprite:function(p,v,m,g){var T=new l(this.scene,p,v,m,g);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,i.DYNAMIC_BODY),T},staticGroup:function(p,v){return this.sys.updateList.add(new d(this.world,this.world.scene,p,v))},group:function(p,v){return this.sys.updateList.add(new n(this.world,this.world.scene,p,v))},body:function(p,v,m,g){var T=new a(this.world);return T.position.set(p,v),m&&g&&T.setSize(m,g),this.world.add(T,i.DYNAMIC_BODY),T},staticBody:function(p,v,m,g){var T=new h(this.world);return T.position.set(p,v),m&&g&&T.setSize(m,g),this.world.add(T,i.STATIC_BODY),T},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=u},44880:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s=0;if(!Array.isArray(t))s=t;else for(var l=0;l<t.length;l++)s|=t[l];return s};o.exports=x},75671:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47401),l=function(a,r,i,n){var h=0,d=a.deltaAbsX()+r.deltaAbsX()+n;return a._dx===0&&r._dx===0?(a.embedded=!0,r.embedded=!0):a._dx>r._dx?(h=a.right-r.x,h>d&&!i||a.checkCollision.right===!1||r.checkCollision.left===!1?h=0:(a.touching.none=!1,a.touching.right=!0,r.touching.none=!1,r.touching.left=!0,r.physicsType===s.STATIC_BODY&&!i&&(a.blocked.none=!1,a.blocked.right=!0),a.physicsType===s.STATIC_BODY&&!i&&(r.blocked.none=!1,r.blocked.left=!0))):a._dx<r._dx&&(h=a.x-r.width-r.x,-h>d&&!i||a.checkCollision.left===!1||r.checkCollision.right===!1?h=0:(a.touching.none=!1,a.touching.left=!0,r.touching.none=!1,r.touching.right=!0,r.physicsType===s.STATIC_BODY&&!i&&(a.blocked.none=!1,a.blocked.left=!0),a.physicsType===s.STATIC_BODY&&!i&&(r.blocked.none=!1,r.blocked.right=!0))),a.overlapX=h,r.overlapX=h,h};o.exports=l},66185:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47401),l=function(a,r,i,n){var h=0,d=a.deltaAbsY()+r.deltaAbsY()+n;return a._dy===0&&r._dy===0?(a.embedded=!0,r.embedded=!0):a._dy>r._dy?(h=a.bottom-r.y,h>d&&!i||a.checkCollision.down===!1||r.checkCollision.up===!1?h=0:(a.touching.none=!1,a.touching.down=!0,r.touching.none=!1,r.touching.up=!0,r.physicsType===s.STATIC_BODY&&!i&&(a.blocked.none=!1,a.blocked.down=!0),a.physicsType===s.STATIC_BODY&&!i&&(r.blocked.none=!1,r.blocked.up=!0))):a._dy<r._dy&&(h=a.y-r.bottom,-h>d&&!i||a.checkCollision.up===!1||r.checkCollision.down===!1?h=0:(a.touching.none=!1,a.touching.up=!0,r.touching.none=!1,r.touching.down=!0,r.physicsType===s.STATIC_BODY&&!i&&(a.blocked.none=!1,a.blocked.up=!0),a.physicsType===s.STATIC_BODY&&!i&&(r.blocked.none=!1,r.blocked.down=!0))),a.overlapY=h,r.overlapY=h,h};o.exports=l},10481:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25084),l=t(56694),a=t(95239),r=t(47401),i=t(72632),n=t(59192),h=t(42911),d=new l({Extends:n,Mixins:[a],initialize:function(p,v,m,g){if(!m&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(h(m))g=m,m=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(m)&&h(m[0])){var T=this;m.forEach(function(w){w.internalCreateCallback=T.createCallbackHandler,w.internalRemoveCallback=T.removeCallbackHandler,w.classType=i(w,"classType",s)}),g=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=p,g&&(g.classType=i(g,"classType",s)),this.physicsType=r.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this.defaults={setCollideWorldBounds:i(g,"collideWorldBounds",!1),setBoundsRectangle:i(g,"customBoundsRectangle",null),setAccelerationX:i(g,"accelerationX",0),setAccelerationY:i(g,"accelerationY",0),setAllowDrag:i(g,"allowDrag",!0),setAllowGravity:i(g,"allowGravity",!0),setAllowRotation:i(g,"allowRotation",!0),setDamping:i(g,"useDamping",!1),setBounceX:i(g,"bounceX",0),setBounceY:i(g,"bounceY",0),setDragX:i(g,"dragX",0),setDragY:i(g,"dragY",0),setEnable:i(g,"enable",!0),setGravityX:i(g,"gravityX",0),setGravityY:i(g,"gravityY",0),setFrictionX:i(g,"frictionX",0),setFrictionY:i(g,"frictionY",0),setMaxSpeed:i(g,"maxSpeed",-1),setMaxVelocityX:i(g,"maxVelocityX",1e4),setMaxVelocityY:i(g,"maxVelocityY",1e4),setVelocityX:i(g,"velocityX",0),setVelocityY:i(g,"velocityY",0),setAngularVelocity:i(g,"angularVelocity",0),setAngularAcceleration:i(g,"angularAcceleration",0),setAngularDrag:i(g,"angularDrag",0),setMass:i(g,"mass",1),setImmovable:i(g,"immovable",!1)},n.call(this,v,m,g),this.type="PhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,r.DYNAMIC_BODY);var p=u.body;for(var v in this.defaults)p[v](this.defaults[v])},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},setVelocity:function(u,p,v){v===void 0&&(v=0);for(var m=this.getChildren(),g=0;g<m.length;g++)m[g].body.velocity.set(u+g*v,p+g*v);return this},setVelocityX:function(u,p){p===void 0&&(p=0);for(var v=this.getChildren(),m=0;m<v.length;m++)v[m].body.velocity.x=u+m*p;return this},setVelocityY:function(u,p){p===void 0&&(p=0);for(var v=this.getChildren(),m=0;m<v.length;m++)v[m].body.velocity.y=u+m*p;return this}});o.exports=d},22916:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x,t,s,l,a,r,i,n,h,d,u,p,v,m,g,T,w,b=function(M,F,O){x=M,t=F;var D=x.velocity.x,L=t.velocity.x;return s=x.pushable,h=x._dx<0,d=x._dx>0,u=x._dx===0,g=Math.abs(x.right-t.x)<=Math.abs(t.right-x.x),i=L-D*x.bounce.x,l=t.pushable,p=t._dx<0,v=t._dx>0,m=t._dx===0,T=!g,n=D-L*t.bounce.x,w=Math.abs(O),E()},E=function(){return d&&g&&t.blocked.right?(x.processX(-w,i,!1,!0),1):h&&T&&t.blocked.left?(x.processX(w,i,!0),1):v&&T&&x.blocked.right?(t.processX(-w,n,!1,!0),2):p&&g&&x.blocked.left?(t.processX(w,n,!0),2):0},A=function(){var M=x.velocity.x,F=t.velocity.x,O=Math.sqrt(F*F*t.mass/x.mass)*(F>0?1:-1),D=Math.sqrt(M*M*x.mass/t.mass)*(M>0?1:-1),L=(O+D)*.5;return O-=L,D-=L,a=L+O*x.bounce.x,r=L+D*t.bounce.x,h&&T?R(0):p&&g?R(1):d&&g?R(2):v&&T?R(3):!1},R=function(M){if(s&&l)w*=.5,M===0||M===3?(x.processX(w,a),t.processX(-w,r)):(x.processX(-w,a),t.processX(w,r));else if(s&&!l)M===0||M===3?x.processX(w,i,!0):x.processX(-w,i,!1,!0);else if(!s&&l)M===0||M===3?t.processX(-w,n,!1,!0):t.processX(w,n,!0);else{var F=w*.5;M===0?m?(x.processX(w,0,!0),t.processX(0,null,!1,!0)):v?(x.processX(F,0,!0),t.processX(-F,0,!1,!0)):(x.processX(F,t.velocity.x,!0),t.processX(-F,null,!1,!0)):M===1?u?(x.processX(0,null,!1,!0),t.processX(w,0,!0)):d?(x.processX(-F,0,!1,!0),t.processX(F,0,!0)):(x.processX(-F,null,!1,!0),t.processX(F,x.velocity.x,!0)):M===2?m?(x.processX(-w,0,!1,!0),t.processX(0,null,!0)):p?(x.processX(-F,0,!1,!0),t.processX(F,0,!0)):(x.processX(-F,t.velocity.x,!1,!0),t.processX(F,null,!0)):M===3&&(u?(x.processX(0,null,!0),t.processX(-w,0,!1,!0)):h?(x.processX(F,0,!0),t.processX(-F,0,!1,!0)):(x.processX(F,t.velocity.y,!0),t.processX(-F,null,!1,!0)))}return!0},I=function(M){M===1?t.velocity.x=0:g?t.processX(w,n,!0):t.processX(-w,n,!1,!0),x.moves&&(t.y+=(x.y-x.prev.y)*x.friction.y,t._dy=t.y-t.prev.y)},P=function(M){M===2?x.velocity.x=0:T?x.processX(w,i,!0):x.processX(-w,i,!1,!0),t.moves&&(x.y+=(t.y-t.prev.y)*t.friction.y,x._dy=x.y-x.prev.y)};o.exports={BlockCheck:E,Check:A,Set:b,Run:R,RunImmovableBody1:I,RunImmovableBody2:P}},67050:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x,t,s,l,a,r,i,n,h,d,u,p,v,m,g,T,w,b=function(M,F,O){x=M,t=F;var D=x.velocity.y,L=t.velocity.y;return s=x.pushable,h=x._dy<0,d=x._dy>0,u=x._dy===0,g=Math.abs(x.bottom-t.y)<=Math.abs(t.bottom-x.y),i=L-D*x.bounce.y,l=t.pushable,p=t._dy<0,v=t._dy>0,m=t._dy===0,T=!g,n=D-L*t.bounce.y,w=Math.abs(O),E()},E=function(){return d&&g&&t.blocked.down?(x.processY(-w,i,!1,!0),1):h&&T&&t.blocked.up?(x.processY(w,i,!0),1):v&&T&&x.blocked.down?(t.processY(-w,n,!1,!0),2):p&&g&&x.blocked.up?(t.processY(w,n,!0),2):0},A=function(){var M=x.velocity.y,F=t.velocity.y,O=Math.sqrt(F*F*t.mass/x.mass)*(F>0?1:-1),D=Math.sqrt(M*M*x.mass/t.mass)*(M>0?1:-1),L=(O+D)*.5;return O-=L,D-=L,a=L+O*x.bounce.y,r=L+D*t.bounce.y,h&&T?R(0):p&&g?R(1):d&&g?R(2):v&&T?R(3):!1},R=function(M){if(s&&l)w*=.5,M===0||M===3?(x.processY(w,a),t.processY(-w,r)):(x.processY(-w,a),t.processY(w,r));else if(s&&!l)M===0||M===3?x.processY(w,i,!0):x.processY(-w,i,!1,!0);else if(!s&&l)M===0||M===3?t.processY(-w,n,!1,!0):t.processY(w,n,!0);else{var F=w*.5;M===0?m?(x.processY(w,0,!0),t.processY(0,null,!1,!0)):v?(x.processY(F,0,!0),t.processY(-F,0,!1,!0)):(x.processY(F,t.velocity.y,!0),t.processY(-F,null,!1,!0)):M===1?u?(x.processY(0,null,!1,!0),t.processY(w,0,!0)):d?(x.processY(-F,0,!1,!0),t.processY(F,0,!0)):(x.processY(-F,null,!1,!0),t.processY(F,x.velocity.y,!0)):M===2?m?(x.processY(-w,0,!1,!0),t.processY(0,null,!0)):p?(x.processY(-F,0,!1,!0),t.processY(F,0,!0)):(x.processY(-F,t.velocity.y,!1,!0),t.processY(F,null,!0)):M===3&&(u?(x.processY(0,null,!0),t.processY(-w,0,!1,!0)):h?(x.processY(F,0,!0),t.processY(-F,0,!1,!0)):(x.processY(F,t.velocity.y,!0),t.processY(-F,null,!1,!0)))}return!0},I=function(M){M===1?t.velocity.y=0:g?t.processY(w,n,!0):t.processY(-w,n,!1,!0),x.moves&&(t.x+=(x.x-x.prev.x)*x.friction.x,t._dx=t.x-t.prev.x)},P=function(M){M===2?x.velocity.y=0:T?x.processY(w,i,!0):x.processY(-w,i,!1,!0),t.moves&&(x.x+=(t.x-t.prev.x)*t.friction.x,x._dx=x.x-x.prev.x)};o.exports={BlockCheck:E,Check:A,Set:b,Run:R,RunImmovableBody1:I,RunImmovableBody2:P}},61777:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75671),l=t(22916),a=function(r,i,n,h,d){d===void 0&&(d=s(r,i,n,h));var u=r.immovable,p=i.immovable;if(n||d===0||u&&p||r.customSeparateX||i.customSeparateX)return d!==0||r.embedded&&i.embedded;var v=l.Set(r,i,d);return!u&&!p?v>0?!0:l.Check():(u?l.RunImmovableBody1(v):p&&l.RunImmovableBody2(v),!0)};o.exports=a},25299:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66185),l=t(67050),a=function(r,i,n,h,d){d===void 0&&(d=s(r,i,n,h));var u=r.immovable,p=i.immovable;if(n||d===0||u&&p||r.customSeparateY||i.customSeparateY)return d!==0||r.embedded&&i.embedded;var v=l.Set(r,i,d);return!u&&!p?v>0?!0:l.Check():(u?l.RunImmovableBody1(v):p&&l.RunImmovableBody2(v),!0)};o.exports=a},15084:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===void 0&&(s={}),s.none=t,s.up=!1,s.down=!1,s.left=!1,s.right=!1,t||(s.up=!0,s.down=!0,s.left=!0,s.right=!0),s};o.exports=x},66634:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65650),l=t(56694),a=t(95239),r=t(47401),i=t(94287),n=t(15084),h=t(93736),d=new l({Mixins:[a],initialize:function(p,v){var m=64,g=64,T={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},w=v!==void 0;w&&v.displayWidth&&(m=v.displayWidth,g=v.displayHeight),w||(v=T),this.world=p,this.gameObject=w?v:void 0,this.isBody=!0,this.debugShowBody=p.defaults.debugShowStaticBody,this.debugBodyColor=p.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(v.x-m*v.originX,v.y-g*v.originY),this.width=m,this.height=g,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=n(!1),this.touching=n(!0),this.wasTouching=n(!0),this.blocked=n(!0),this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(u,p){return u&&u!==this.gameObject&&(this.gameObject.body=null,u.body=this,this.gameObject=u),p&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var u=this.gameObject;return u.getTopLeft(this.position),this.width=u.displayWidth,this.height=u.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(u,p){return p===void 0&&(p=u),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(u,p),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(u,p,v){v===void 0&&(v=!0);var m=this.gameObject;if(m&&m.frame&&(u||(u=m.frame.realWidth),p||(p=m.frame.realHeight)),this.world.staticTree.remove(this),this.width=u,this.height=p,this.halfWidth=Math.floor(u/2),this.halfHeight=Math.floor(p/2),v&&m&&m.getCenter){var g=m.displayWidth/2,T=m.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(g-this.halfWidth,T-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(u,p,v){return p===void 0&&(p=this.offset.x),v===void 0&&(v=this.offset.y),u>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=u,this.width=u*2,this.height=u*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(p,v),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(u,p){var v=this.gameObject;u===void 0&&(u=v.x),p===void 0&&(p=v.y),this.world.staticTree.remove(this),v.setPosition(u,p),v.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(u){return u.x=this.x,u.y=this.y,u.right=this.right,u.bottom=this.bottom,u},hitTest:function(u,p){return this.isCircle?s(this,u,p):i(this,u,p)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(u){var p=this.position,v=p.x+this.halfWidth,m=p.y+this.halfHeight;this.debugShowBody&&(u.lineStyle(u.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?u.strokeCircle(v,m,this.width/2):u.strokeRect(p.x,p.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(u){return u<=0&&(u=.1),this.mass=u,this},x:{get:function(){return this.position.x},set:function(u){this.world.staticTree.remove(this),this.position.x=u,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(u){this.world.staticTree.remove(this),this.position.y=u,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=d},46346:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25084),l=t(56694),a=t(95239),r=t(47401),i=t(72632),n=t(59192),h=t(42911),d=new l({Extends:n,Mixins:[a],initialize:function(p,v,m,g){!m&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:s}:h(m)?(g=m,m=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=i(g,"classType",s)):Array.isArray(m)&&h(m[0])?(g=m,m=null,g.forEach(function(T){T.internalCreateCallback=this.createCallbackHandler,T.internalRemoveCallback=this.removeCallbackHandler,T.createMultipleCallback=this.createMultipleCallbackHandler,T.classType=i(T,"classType",s)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=p,this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,n.call(this,v,m,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,r.STATIC_BODY)},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var u=this.children.entries,p=0;p<u.length;p++)u[p].body.reset();return this}});o.exports=d},85233:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(94240),l=t(97602),a=t(82897),r=t(56694),i=t(3909),n=t(47401),h=t(53996),d=t(92951),u=t(6659),p=t(27037),v=t(88456),m=t(41935),g=t(54726),T=t(75671),w=t(66185),b=t(44662),E=t(10850),A=t(83392),R=t(74623),I=t(25163),P=t(74118),M=t(68687),F=t(27354),O=t(61777),D=t(25299),L=t(58403),z=t(66634),X=t(28808),H=t(69360),J=t(93736),G=t(1071),k=new r({Extends:u,initialize:function(B,U){u.call(this),this.scene=B,this.bodies=new L,this.staticBodies=new L,this.pendingDestroy=new L,this.colliders=new R,this.gravity=new J(E(U,"gravity.x",0),E(U,"gravity.y",0)),this.bounds=new P(E(U,"x",0),E(U,"y",0),E(U,"width",B.sys.scale.width),E(U,"height",B.sys.scale.height)),this.checkCollision={up:E(U,"checkCollision.up",!0),down:E(U,"checkCollision.down",!0),left:E(U,"checkCollision.left",!0),right:E(U,"checkCollision.right",!0)},this.fps=E(U,"fps",60),this.fixedStep=E(U,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=E(U,"timeScale",1),this.OVERLAP_BIAS=E(U,"overlapBias",4),this.TILE_BIAS=E(U,"tileBias",16),this.forceX=E(U,"forceX",!1),this.isPaused=E(U,"isPaused",!1),this._total=0,this.drawDebug=E(U,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:E(U,"debugShowBody",!0),debugShowStaticBody:E(U,"debugShowStaticBody",!0),debugShowVelocity:E(U,"debugShowVelocity",!0),bodyDebugColor:E(U,"debugBodyColor",16711935),staticBodyDebugColor:E(U,"debugStaticBodyColor",255),velocityDebugColor:E(U,"debugVelocityColor",65280)},this.maxEntries=E(U,"maxEntries",16),this.useTree=E(U,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new H,this._tempMatrix2=new H,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(N,B){B===void 0&&(B=n.DYNAMIC_BODY),Array.isArray(N)||(N=[N]);for(var U=0;U<N.length;U++){var W=N[U];if(W.isParent)for(var K=W.getChildren(),q=0;q<K.length;q++){var _=K[q];_.isParent?this.enable(_,B):this.enableBody(_,B)}else this.enableBody(W,B)}},enableBody:function(N,B){return B===void 0&&(B=n.DYNAMIC_BODY),N.hasTransformComponent&&(N.body||(B===n.DYNAMIC_BODY?N.body=new l(this,N):B===n.STATIC_BODY&&(N.body=new z(this,N))),this.add(N.body)),N},add:function(N){return N.physicsType===n.DYNAMIC_BODY?this.bodies.set(N):N.physicsType===n.STATIC_BODY&&(this.staticBodies.set(N),this.staticTree.insert(N)),N.enable=!0,N},disable:function(N){Array.isArray(N)||(N=[N]);for(var B=0;B<N.length;B++){var U=N[B];if(U.isParent)for(var W=U.getChildren(),K=0;K<W.length;K++){var q=W[K];q.isParent?this.disable(q):this.disableBody(q.body)}else this.disableBody(U.body)}},disableBody:function(N){this.remove(N),N.enable=!1},remove:function(N){N.physicsType===n.DYNAMIC_BODY?(this.tree.remove(N),this.bodies.delete(N)):N.physicsType===n.STATIC_BODY&&(this.staticBodies.delete(N),this.staticTree.remove(N))},createDebugGraphic:function(){var N=this.scene.sys.add.graphics({x:0,y:0});return N.setDepth(Number.MAX_VALUE),this.debugGraphic=N,this.drawDebug=!0,N},setBounds:function(N,B,U,W,K,q,_,rt){return this.bounds.setTo(N,B,U,W),K!==void 0&&this.setBoundsCollision(K,q,_,rt),this},setBoundsCollision:function(N,B,U,W){return N===void 0&&(N=!0),B===void 0&&(B=!0),U===void 0&&(U=!0),W===void 0&&(W=!0),this.checkCollision.left=N,this.checkCollision.right=B,this.checkCollision.up=U,this.checkCollision.down=W,this},pause:function(){return this.isPaused=!0,this.emit(p.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(p.RESUME),this},addCollider:function(N,B,U,W,K){U===void 0&&(U=null),W===void 0&&(W=null),K===void 0&&(K=U);var q=new i(this,!1,N,B,U,W,K);return this.colliders.add(q),q},addOverlap:function(N,B,U,W,K){U===void 0&&(U=null),W===void 0&&(W=null),K===void 0&&(K=U);var q=new i(this,!0,N,B,U,W,K);return this.colliders.add(q),q},removeCollider:function(N){return this.colliders.remove(N),this},setFPS:function(N){return this.fps=N,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(N,B){if(!(this.isPaused||this.bodies.size===0)){var U,W=this._frameTime,K=this._frameTimeMS*this.timeScale;this._elapsed+=B;var q,_=this.bodies.entries,rt=this._elapsed>=K;for(this.fixedStep||(W=B*.001,rt=!0,this._elapsed=0),U=0;U<_.length;U++)q=_[U],q.enable&&q.preUpdate(rt,W);if(rt){this._elapsed-=K,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(_));var ft=this.colliders.update();for(U=0;U<ft.length;U++){var vt=ft[U];vt.active&&vt.update()}this.emit(p.WORLD_STEP,W)}for(;this._elapsed>=K;)this._elapsed-=K,this.step(W)}},step:function(N){var B,U,W=this.bodies.entries,K=W.length;for(B=0;B<K;B++)U=W[B],U.enable&&U.update(N);this.useTree&&(this.tree.clear(),this.tree.load(W));var q=this.colliders.update();for(B=0;B<q.length;B++){var _=q[B];_.active&&_.update()}this.emit(p.WORLD_STEP,N),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var N,B,U=this.bodies.entries,W=U.length,K=this.bodies,q=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,N=0;N<W;N++)B=U[N],B.enable&&B.postUpdate();if(this.drawDebug){var _=this.debugGraphic;for(_.clear(),N=0;N<W;N++)B=U[N],B.willDrawDebug()&&B.drawDebug(_);for(U=q.entries,W=U.length,N=0;N<W;N++)B=U[N],B.willDrawDebug()&&B.drawDebug(_)}var rt=this.pendingDestroy;if(rt.size>0){var ft=this.tree,vt=this.staticTree;for(U=rt.entries,W=U.length,N=0;N<W;N++)B=U[N],B.physicsType===n.DYNAMIC_BODY?(ft.remove(B),K.delete(B)):B.physicsType===n.STATIC_BODY&&(vt.remove(B),q.delete(B)),B.world=void 0,B.gameObject=void 0;rt.clear()}},updateMotion:function(N,B){N.allowRotation&&this.computeAngularVelocity(N,B),this.computeVelocity(N,B)},computeAngularVelocity:function(N,B){var U=N.angularVelocity,W=N.angularAcceleration,K=N.angularDrag,q=N.maxAngular;W?U+=W*B:N.allowDrag&&K&&(K*=B,m(U-K,0,.1)?U-=K:g(U+K,0,.1)?U+=K:U=0),U=a(U,-q,q);var _=U-N.angularVelocity;N.angularVelocity+=_,N.rotation+=N.angularVelocity*B},computeVelocity:function(N,B){var U=N.velocity.x,W=N.acceleration.x,K=N.drag.x,q=N.maxVelocity.x,_=N.velocity.y,rt=N.acceleration.y,ft=N.drag.y,vt=N.maxVelocity.y,mt=N.speed,yt=N.maxSpeed,xt=N.allowDrag,It=N.useDamping;N.allowGravity&&(U+=(this.gravity.x+N.gravity.x)*B,_+=(this.gravity.y+N.gravity.y)*B),W?U+=W*B:xt&&K&&(It?(K=Math.pow(K,B),U*=K,mt=Math.sqrt(U*U+_*_),v(mt,0,.001)&&(U=0)):(K*=B,m(U-K,0,.01)?U-=K:g(U+K,0,.01)?U+=K:U=0)),rt?_+=rt*B:xt&&ft&&(It?(ft=Math.pow(ft,B),_*=ft,mt=Math.sqrt(U*U+_*_),v(mt,0,.001)&&(_=0)):(ft*=B,m(_-ft,0,.01)?_-=ft:g(_+ft,0,.01)?_+=ft:_=0)),U=a(U,-q,q),_=a(_,-vt,vt),N.velocity.set(U,_),yt>-1&&N.velocity.length()>yt&&(N.velocity.normalize().scale(yt),mt=yt),N.speed=mt},separate:function(N,B,U,W,K){var q,_,rt=!1,ft=!0;if(!N.enable||!B.enable||N.checkCollision.none||B.checkCollision.none||!this.intersects(N,B)||U&&U.call(W,N.gameObject,B.gameObject)===!1)return rt;if(N.isCircle||B.isCircle){var vt=this.separateCircle(N,B,K);vt.result?(rt=!0,ft=!1):(q=vt.x,_=vt.y,ft=!0)}if(ft){var mt=!1,yt=!1,xt=this.OVERLAP_BIAS;K?(mt=O(N,B,K,xt,q),yt=D(N,B,K,xt,_)):this.forceX||Math.abs(this.gravity.y+N.gravity.y)<Math.abs(this.gravity.x+N.gravity.x)?(mt=O(N,B,K,xt,q),this.intersects(N,B)&&(yt=D(N,B,K,xt,_))):(yt=D(N,B,K,xt,_),this.intersects(N,B)&&(mt=O(N,B,K,xt,q))),rt=mt||yt}return rt&&(K?(N.onOverlap||B.onOverlap)&&this.emit(p.OVERLAP,N.gameObject,B.gameObject,N,B):(N.onCollide||B.onCollide)&&this.emit(p.COLLIDE,N.gameObject,B.gameObject,N,B)),rt},separateCircle:function(N,B,U){T(N,B,!1,0),w(N,B,!1,0);var W=N.isCircle,K=B.isCircle,q=N.center,_=B.center,rt=N.immovable,ft=B.immovable,vt=N.velocity,mt=B.velocity,yt=0,xt=!0;if(W!==K){xt=!1;var It=q.x,Gt=q.y,Zt=N.halfWidth,Bt=B.position.x,At=B.position.y,kt=B.right,Ut=B.bottom;K&&(It=_.x,Gt=_.y,Zt=B.halfWidth,Bt=N.position.x,At=N.position.y,kt=N.right,Ut=N.bottom),Gt<At?It<Bt?yt=h(It,Gt,Bt,At)-Zt:It>kt&&(yt=h(It,Gt,kt,At)-Zt):Gt>Ut&&(It<Bt?yt=h(It,Gt,Bt,Ut)-Zt:It>kt&&(yt=h(It,Gt,kt,Ut)-Zt)),yt*=-1}else yt=N.halfWidth+B.halfWidth-d(q,_);N.overlapR=yt,B.overlapR=yt;var ee=s(q,_),te=(yt+A.EPSILON)*Math.cos(ee),fe=(yt+A.EPSILON)*Math.sin(ee),ae={overlap:yt,result:!1,x:te,y:fe};if(U&&(!xt||xt&&yt!==0))return ae.result=!0,ae;if(!xt&&yt===0||rt&&ft||N.customSeparateX||B.customSeparateX)return ae.x=void 0,ae.y=void 0,ae;var le=!N.pushable&&!B.pushable;if(xt){var re=q.x-_.x,we=q.y-_.y,Se=Math.sqrt(Math.pow(re,2)+Math.pow(we,2)),Ne=(_.x-q.x)/Se||0,ce=(_.y-q.y)/Se||0,se=2*(vt.x*Ne+vt.y*ce-mt.x*Ne-mt.y*ce)/(N.mass+B.mass);(rt||ft)&&(se*=2),rt||(vt.x=vt.x-se/N.mass*Ne,vt.y=vt.y-se/N.mass*ce,vt.multiply(N.bounce)),ft||(mt.x=mt.x+se/B.mass*Ne,mt.y=mt.y+se/B.mass*ce,mt.multiply(B.bounce)),!rt&&!ft&&(te*=.5,fe*=.5),rt||(N.x-=te,N.y-=fe,N.updateCenter()),ft||(B.x+=te,B.y+=fe,B.updateCenter()),ae.result=!0}else!rt||N.pushable||le?(N.x-=te,N.y-=fe,N.updateCenter()):(!ft||B.pushable||le)&&(B.x+=te,B.y+=fe,B.updateCenter()),ae.x=void 0,ae.y=void 0;return ae},intersects:function(N,B){return N===B?!1:!N.isCircle&&!B.isCircle?!(N.right<=B.left||N.bottom<=B.top||N.left>=B.right||N.top>=B.bottom):N.isCircle?B.isCircle?d(N.center,B.center)<=N.halfWidth+B.halfWidth:this.circleBodyIntersects(N,B):this.circleBodyIntersects(B,N)},circleBodyIntersects:function(N,B){var U=a(N.center.x,B.left,B.right),W=a(N.center.y,B.top,B.bottom),K=(N.center.x-U)*(N.center.x-U),q=(N.center.y-W)*(N.center.y-W);return K+q<=N.halfWidth*N.halfWidth},overlap:function(N,B,U,W,K){return U===void 0&&(U=null),W===void 0&&(W=null),K===void 0&&(K=U),this.collideObjects(N,B,U,W,K,!0)},collide:function(N,B,U,W,K){return U===void 0&&(U=null),W===void 0&&(W=null),K===void 0&&(K=U),this.collideObjects(N,B,U,W,K,!1)},collideObjects:function(N,B,U,W,K,q){var _,rt;N.isParent&&(N.physicsType===void 0||B===void 0||N===B)&&(N=N.children.entries),B&&B.isParent&&B.physicsType===void 0&&(B=B.children.entries);var ft=Array.isArray(N),vt=Array.isArray(B);if(this._total=0,!ft&&!vt)this.collideHandler(N,B,U,W,K,q);else if(!ft&&vt)for(_=0;_<B.length;_++)this.collideHandler(N,B[_],U,W,K,q);else if(ft&&!vt)if(B)for(_=0;_<N.length;_++)this.collideHandler(N[_],B,U,W,K,q);else for(_=0;_<N.length;_++){var mt=N[_];for(rt=_+1;rt<N.length;rt++)_!==rt&&this.collideHandler(mt,N[rt],U,W,K,q)}else for(_=0;_<N.length;_++)for(rt=0;rt<B.length;rt++)this.collideHandler(N[_],B[rt],U,W,K,q);return this._total>0},collideHandler:function(N,B,U,W,K,q){if(B===void 0&&N.isParent)return this.collideGroupVsGroup(N,N,U,W,K,q);if(!N||!B)return!1;if(N.body||N.isBody){if(B.body||B.isBody)return this.collideSpriteVsSprite(N,B,U,W,K,q);if(B.isParent)return this.collideSpriteVsGroup(N,B,U,W,K,q);if(B.isTilemap)return this.collideSpriteVsTilemapLayer(N,B,U,W,K,q)}else if(N.isParent){if(B.body||B.isBody)return this.collideSpriteVsGroup(B,N,U,W,K,q);if(B.isParent)return this.collideGroupVsGroup(N,B,U,W,K,q);if(B.isTilemap)return this.collideGroupVsTilemapLayer(N,B,U,W,K,q)}else if(N.isTilemap){if(B.body||B.isBody)return this.collideSpriteVsTilemapLayer(B,N,U,W,K,q);if(B.isParent)return this.collideGroupVsTilemapLayer(B,N,U,W,K,q)}},canCollide:function(N,B){return N&&B&&(N.collisionMask&B.collisionCategory)!==0&&(B.collisionMask&N.collisionCategory)!==0},collideSpriteVsSprite:function(N,B,U,W,K,q){var _=N.isBody?N:N.body,rt=B.isBody?B:B.body;return this.canCollide(_,rt)?(this.separate(_,rt,W,K,q)&&(U&&U.call(K,N,B),this._total++),!0):!1},collideSpriteVsGroup:function(N,B,U,W,K,q){var _=N.isBody?N:N.body;if(!(B.length===0||!_||!_.enable||_.checkCollision.none||!this.canCollide(_,B))){var rt,ft,vt;if(this.useTree||B.physicsType===n.STATIC_BODY){var mt=this.treeMinMax;mt.minX=_.left,mt.minY=_.top,mt.maxX=_.right,mt.maxY=_.bottom;var yt=B.physicsType===n.DYNAMIC_BODY?this.tree.search(mt):this.staticTree.search(mt);for(ft=yt.length,rt=0;rt<ft;rt++)vt=yt[rt],!(_===vt||!vt.enable||vt.checkCollision.none||!B.contains(vt.gameObject))&&this.separate(_,vt,W,K,q)&&(U&&U.call(K,_.gameObject,vt.gameObject),this._total++)}else{var xt=B.getChildren(),It=B.children.entries.indexOf(N);for(ft=xt.length,rt=0;rt<ft;rt++)vt=xt[rt].body,!(!vt||rt===It||!vt.enable)&&this.separate(_,vt,W,K,q)&&(U&&U.call(K,_.gameObject,vt.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(N,B,U,W,K,q){if(!this.canCollide(N,B))return!1;var _=N.getChildren();if(_.length===0)return!1;for(var rt=!1,ft=0;ft<_.length;ft++)(_[ft].body||_[ft].isBody)&&this.collideSpriteVsTilemapLayer(_[ft],B,U,W,K,q)&&(rt=!0);return rt},collideTiles:function(N,B,U,W,K){return B.length===0||N.body&&!N.body.enable||N.isBody&&!N.enable?!1:this.collideSpriteVsTilesHandler(N,B,U,W,K,!1,!1)},overlapTiles:function(N,B,U,W,K){return B.length===0||N.body&&!N.body.enable||N.isBody&&!N.enable?!1:this.collideSpriteVsTilesHandler(N,B,U,W,K,!0,!1)},collideSpriteVsTilemapLayer:function(N,B,U,W,K,q){var _=N.isBody?N:N.body;if(!_.enable||_.checkCollision.none||!this.canCollide(_,B))return!1;var rt=_.x,ft=_.y,vt=_.width,mt=_.height,yt=B.layer;if(yt.tileWidth>yt.baseTileWidth){var xt=(yt.tileWidth-yt.baseTileWidth)*B.scaleX;rt-=xt,vt+=xt}if(yt.tileHeight>yt.baseTileHeight){var It=(yt.tileHeight-yt.baseTileHeight)*B.scaleY;mt+=It}var Gt=q?null:this.tileFilterOptions,Zt=b(rt,ft,vt,mt,Gt,B.scene.cameras.main,B.layer);return Zt.length===0?!1:this.collideSpriteVsTilesHandler(N,Zt,U,W,K,q,!0)},collideSpriteVsTilesHandler:function(N,B,U,W,K,q,_){for(var rt=N.isBody?N:N.body,ft,vt={left:0,right:0,top:0,bottom:0},mt,yt=!1,xt=0;xt<B.length;xt++){ft=B[xt],mt=ft.tilemapLayer;var It=mt.tileToWorldXY(ft.x,ft.y);vt.left=It.x,vt.top=It.y,ft.baseHeight!==ft.height&&(vt.top-=(ft.height-ft.baseHeight)*mt.scaleY),vt.right=vt.left+ft.width*mt.scaleX,vt.bottom=vt.top+ft.height*mt.scaleY,X(vt,rt)&&(!W||W.call(K,N,ft))&&I(ft,N)&&(q||F(xt,rt,ft,vt,mt,this.TILE_BIAS,_))&&(this._total++,yt=!0,U&&U.call(K,N,ft),q&&rt.onOverlap?this.emit(p.TILE_OVERLAP,N,ft,rt):rt.onCollide&&this.emit(p.TILE_COLLIDE,N,ft,rt))}return yt},collideGroupVsGroup:function(N,B,U,W,K,q){if(!(N.length===0||B.length===0||!this.canCollide(N,B)))for(var _=N.getChildren(),rt=0;rt<_.length;rt++)this.collideSpriteVsGroup(_[rt],B,U,W,K,q)},wrap:function(N,B){N.body?this.wrapObject(N,B):N.getChildren?this.wrapArray(N.getChildren(),B):Array.isArray(N)?this.wrapArray(N,B):this.wrapObject(N,B)},wrapArray:function(N,B){for(var U=0;U<N.length;U++)this.wrapObject(N[U],B)},wrapObject:function(N,B){B===void 0&&(B=0),N.x=G(N.x,this.bounds.left-B,this.bounds.right+B),N.y=G(N.y,this.bounds.top-B,this.bounds.bottom+B)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});o.exports=k},5321:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setAcceleration:function(t,s){return this.body.acceleration.set(t,s),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}};o.exports=x},29257:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}};o.exports=x},62122:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setBounce:function(t,s){return this.body.bounce.set(t,s),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,s,l,a){return this.body.setCollideWorldBounds(t,s,l,a),this}};o.exports=x},95239:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44880),l={setCollisionCategory:function(a){var r=this.body?this.body:this;return r.collisionCategory=a,this},willCollideWith:function(a){var r=this.body?this.body:this;return(r.collisionMask&a)!==0},addCollidesWith:function(a){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask|a,this},removeCollidesWith:function(a){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask&~a,this},setCollidesWith:function(a){var r=this.body?this.body:this;return r.collisionMask=s(a),this},resetCollisionCategory:function(){var a=this.body?this.body:this;return a.collisionCategory=1,a.collisionMask=1,this}};o.exports=l},99803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setDebug:function(t,s,l){return this.debugShowBody=t,this.debugShowVelocity=s,this.debugBodyColor=l,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}};o.exports=x},87145:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setDrag:function(t,s){return this.body.drag.set(t,s),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}};o.exports=x},96174:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setDirectControl:function(t){return this.body.setDirectControl(t),this},enableBody:function(t,s,l,a,r){return t&&this.body.reset(s,l),a&&(this.body.gameObject.active=!0),r&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,s){return t===void 0&&(t=!1),s===void 0&&(s=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),s&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};o.exports=x},51702:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setFriction:function(t,s){return this.body.friction.set(t,s),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}};o.exports=x},25578:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setGravity:function(t,s){return this.body.gravity.set(t,s),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}};o.exports=x},72029:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setImmovable:function(t){return t===void 0&&(t=!0),this.body.immovable=t,this}};o.exports=x},34566:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setMass:function(t){return this.body.mass=t,this}};o.exports=x},2732:(o,x,t)=>{var s=t(15147),l=t(26673),a=t(22184),r=t(26535),i=function(n,h,d,u,p,v){var m=s(n,h-u,d-u,2*u,2*u,p,v);if(m.length===0)return m;for(var g=new l(h,d,u),T=new l,w=[],b=0;b<m.length;b++){var E=m[b];E.isCircle?(T.setTo(E.center.x,E.center.y,E.halfWidth),a(g,T)&&w.push(E)):r(g,E)&&w.push(E)}return w};o.exports=i},15147:o=>{var x=function(t,s,l,a,r,i,n){i===void 0&&(i=!0),n===void 0&&(n=!1);var h=[],d=[],u=t.treeMinMax;if(u.minX=s,u.minY=l,u.maxX=s+a,u.maxY=l+r,n&&(d=t.staticTree.search(u)),i&&t.useTree)h=t.tree.search(u);else if(i){var p=t.bodies,v={position:{x:s,y:l},left:s,top:l,right:s+a,bottom:l+r,isCircle:!1},m=t.intersects;p.iterate(function(g){m(g,v)&&h.push(g)})}return d.concat(h)};o.exports=x},57527:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setPushable:function(t){return t===void 0&&(t=!0),this.body.pushable=t,this}};o.exports=x},77687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setOffset:function(t,s){return this.body.setOffset(t,s),this},setSize:function(t,s,l){return this.body.setSize(t,s,l),this},setBodySize:function(t,s,l){return this.body.setSize(t,s,l),this},setCircle:function(t,s,l){return this.body.setCircle(t,s,l),this}};o.exports=x},66536:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setVelocity:function(t,s){return this.body.setVelocity(t,s),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,s){return this.body.maxVelocity.set(t,s),this}};o.exports=x},7864:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Acceleration:t(5321),Angular:t(29257),Bounce:t(62122),Collision:t(95239),Debug:t(99803),Drag:t(87145),Enable:t(96174),Friction:t(51702),Gravity:t(25578),Immovable:t(72029),Mass:t(34566),OverlapCirc:t(2732),OverlapRect:t(15147),Pushable:t(57527),Size:t(77687),Velocity:t(66536)}},47401:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};o.exports=x},22346:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collide"},95092:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="overlap"},15775:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},74142:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},22825:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tilecollide"},10851:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tileoverlap"},7543:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldbounds"},1487:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldstep"},27037:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COLLIDE:t(22346),OVERLAP:t(95092),PAUSE:t(15775),RESUME:t(74142),TILE_COLLIDE:t(22825),TILE_OVERLAP:t(10851),WORLD_BOUNDS:t(7543),WORLD_STEP:t(1487)}},39977:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47401),l=t(98611),a={ArcadePhysics:t(66150),Body:t(97602),Collider:t(3909),Components:t(7864),Events:t(27037),Factory:t(99523),GetCollidesWith:t(44880),GetOverlapX:t(75671),GetOverlapY:t(66185),SeparateX:t(61777),SeparateY:t(25299),Group:t(10481),Image:t(62832),Sprite:t(25084),StaticBody:t(66634),StaticGroup:t(46346),Tilemap:t(8413),World:t(85233)};a=l(!1,a,s),o.exports=a},25163:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,s,t):t.layer.callbacks[t.index]?!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,s,t):!0};o.exports=x},98209:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s<0?(t.blocked.none=!1,t.blocked.left=!0):s>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=s,t.updateCenter(),t.bounce.x===0?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x};o.exports=x},72792:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s<0?(t.blocked.none=!1,t.blocked.up=!0):s>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=s,t.updateCenter(),t.bounce.y===0?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y};o.exports=x},27354:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14405),l=t(52926),a=t(28808),r=function(i,n,h,d,u,p,v){var m=d.left,g=d.top,T=d.right,w=d.bottom,b=h.faceLeft||h.faceRight,E=h.faceTop||h.faceBottom;if(v||(b=!0,E=!0),!b&&!E)return!1;var A=0,R=0,I=0,P=1;if(n.deltaAbsX()>n.deltaAbsY()?I=-1:n.deltaAbsX()<n.deltaAbsY()&&(P=-1),n.deltaX()!==0&&n.deltaY()!==0&&b&&E&&(I=Math.min(Math.abs(n.position.x-T),Math.abs(n.right-m)),P=Math.min(Math.abs(n.position.y-w),Math.abs(n.bottom-g))),I<P){if(b&&(A=s(n,h,m,T,p,v),A!==0&&!a(d,n)))return!0;E&&(R=l(n,h,g,w,p,v))}else{if(E&&(R=l(n,h,g,w,p,v),R!==0&&!a(d,n)))return!0;b&&(A=s(n,h,m,T,p,v))}return A!==0||R!==0};o.exports=r},14405:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98209),l=function(a,r,i,n,h,d){var u=0,p=r.faceLeft,v=r.faceRight,m=r.collideLeft,g=r.collideRight;return d||(p=!0,v=!0,m=!0,g=!0),a.deltaX()<0&&g&&a.checkCollision.left?v&&a.x<n&&(u=a.x-n,u<-h&&(u=0)):a.deltaX()>0&&m&&a.checkCollision.right&&p&&a.right>i&&(u=a.right-i,u>h&&(u=0)),u!==0&&(a.customSeparateX?a.overlapX=u:s(a,u)),u};o.exports=l},52926:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72792),l=function(a,r,i,n,h,d){var u=0,p=r.faceTop,v=r.faceBottom,m=r.collideUp,g=r.collideDown;return d||(p=!0,v=!0,m=!0,g=!0),a.deltaY()<0&&g&&a.checkCollision.up?v&&a.y<n&&(u=a.y-n,u<-h&&(u=0)):a.deltaY()>0&&m&&a.checkCollision.down&&p&&a.bottom>i&&(u=a.bottom-i,u>h&&(u=0)),u!==0&&(a.customSeparateY?a.overlapY=u:s(a,u)),u};o.exports=l},28808:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return!(s.right<=t.left||s.bottom<=t.top||s.position.x>=t.right||s.position.y>=t.bottom)};o.exports=x},8413:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ProcessTileCallbacks:t(25163),ProcessTileSeparationX:t(98209),ProcessTileSeparationY:t(72792),SeparateTile:t(27354),TileCheckX:t(14405),TileCheckY:t(52926),TileIntersectsBody:t(28808)};o.exports=s},53954:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Arcade:t(39977),Matter:t(45949)}},63568:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93736),a=new s({initialize:function(){this.boundsCenter=new l,this.centerDiff=new l},parseBody:function(r){if(r=r.hasOwnProperty("body")?r.body:r,!r.hasOwnProperty("bounds")||!r.hasOwnProperty("centerOfMass"))return!1;var i=this.boundsCenter,n=this.centerDiff,h=r.bounds.max.x-r.bounds.min.x,d=r.bounds.max.y-r.bounds.min.y,u=h*r.centerOfMass.x,p=d*r.centerOfMass.y;return i.set(h/2,d/2),n.set(u-i.x,p-i.y),!0},getTopLeft:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+h.x+d.x,n+h.y+d.y)}return!1},getTopCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+d.x,n+h.y+d.y)}return!1},getTopRight:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i-(h.x-d.x),n+h.y+d.y)}return!1},getLeftCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+h.x+d.x,n+d.y)}return!1},getCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.centerDiff;return new l(i+h.x,n+h.y)}return!1},getRightCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i-(h.x-d.x),n+d.y)}return!1},getBottomLeft:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+h.x+d.x,n-(h.y-d.y))}return!1},getBottomCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+d.x,n-(h.y-d.y))}return!1},getBottomRight:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i-(h.x-d.x),n-(h.y-d.y))}return!1}});o.exports=a},18171:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16929);s.Body=t(84125),s.Composite=t(11299),s.World=t(72005),s.Collision=t(63454),s.Detector=t(13657),s.Pairs=t(91327),s.Pair=t(70584),s.Query=t(13390),s.Resolver=t(44272),s.Constraint=t(52838),s.Common=t(68758),s.Engine=t(45775),s.Events=t(39073),s.Sleeping=t(22806),s.Plugin=t(84474),s.Bodies=t(68516),s.Composites=t(56643),s.Axes=t(50658),s.Bounds=t(84091),s.Svg=t(92765),s.Vector=t(10438),s.Vertices=t(39745),s.World.add=s.Composite.add,s.World.remove=s.Composite.remove,s.World.addComposite=s.Composite.addComposite,s.World.addBody=s.Composite.addBody,s.World.addConstraint=s.Composite.addConstraint,s.World.clear=s.Composite.clear,o.exports=s},72653:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(56694),a=t(56643),r=t(52838),i=t(92765),n=t(3860),h=t(7030),d=t(73658),u=t(84720),p=t(10998),v=t(72829),m=t(88596),g=t(39745),T=new l({initialize:function(b){this.world=b,this.scene=b.scene,this.sys=b.scene.sys},rectangle:function(w,b,E,A,R){var I=s.rectangle(w,b,E,A,R);return this.world.add(I),I},trapezoid:function(w,b,E,A,R,I){var P=s.trapezoid(w,b,E,A,R,I);return this.world.add(P),P},circle:function(w,b,E,A,R){var I=s.circle(w,b,E,A,R);return this.world.add(I),I},polygon:function(w,b,E,A,R){var I=s.polygon(w,b,E,A,R);return this.world.add(I),I},fromVertices:function(w,b,E,A,R,I,P){typeof E=="string"&&(E=g.fromPath(E));var M=s.fromVertices(w,b,E,A,R,I,P);return this.world.add(M),M},fromPhysicsEditor:function(w,b,E,A,R){R===void 0&&(R=!0);var I=p.parseBody(w,b,E,A);return R&&!this.world.has(I)&&this.world.add(I),I},fromSVG:function(w,b,E,A,R,I){A===void 0&&(A=1),R===void 0&&(R={}),I===void 0&&(I=!0);for(var P=E.getElementsByTagName("path"),M=[],F=0;F<P.length;F++){var O=i.pathToVertices(P[F],30);A!==1&&g.scale(O,A,A),M.push(O)}var D=s.fromVertices(w,b,M,R);return I&&this.world.add(D),D},fromJSON:function(w,b,E,A,R){A===void 0&&(A={}),R===void 0&&(R=!0);var I=v.parseBody(w,b,E,A);return I&&R&&this.world.add(I),I},imageStack:function(w,b,E,A,R,I,P,M,F){P===void 0&&(P=0),M===void 0&&(M=0),F===void 0&&(F={});var O=this.world,D=this.sys.displayList;F.addToWorld=!1;var L=a.stack(E,A,R,I,P,M,function(z,X){var H=new h(O,z,X,w,b,F);return D.add(H),H.body});return O.add(L),L},stack:function(w,b,E,A,R,I,P){var M=a.stack(w,b,E,A,R,I,P);return this.world.add(M),M},pyramid:function(w,b,E,A,R,I,P){var M=a.pyramid(w,b,E,A,R,I,P);return this.world.add(M),M},chain:function(w,b,E,A,R,I){return a.chain(w,b,E,A,R,I)},mesh:function(w,b,E,A,R){return a.mesh(w,b,E,A,R)},newtonsCradle:function(w,b,E,A,R){var I=a.newtonsCradle(w,b,E,A,R);return this.world.add(I),I},car:function(w,b,E,A,R){var I=a.car(w,b,E,A,R);return this.world.add(I),I},softBody:function(w,b,E,A,R,I,P,M,F,O){var D=a.softBody(w,b,E,A,R,I,P,M,F,O);return this.world.add(D),D},joint:function(w,b,E,A,R){return this.constraint(w,b,E,A,R)},spring:function(w,b,E,A,R){return this.constraint(w,b,E,A,R)},constraint:function(w,b,E,A,R){A===void 0&&(A=1),R===void 0&&(R={}),R.bodyA=w.type==="body"?w:w.body,R.bodyB=b.type==="body"?b:b.body,isNaN(E)||(R.length=E),R.stiffness=A;var I=r.create(R);return this.world.add(I),I},worldConstraint:function(w,b,E,A){E===void 0&&(E=1),A===void 0&&(A={}),A.bodyB=w.type==="body"?w:w.body,isNaN(b)||(A.length=b),A.stiffness=E;var R=r.create(A);return this.world.add(R),R},mouseSpring:function(w){return this.pointerConstraint(w)},pointerConstraint:function(w){w===void 0&&(w={}),w.hasOwnProperty("render")||(w.render={visible:!1});var b=new m(this.scene,this.world,w);return this.world.add(b.constraint),b},image:function(w,b,E,A,R){var I=new h(this.world,w,b,E,A,R);return this.sys.displayList.add(I),I},tileBody:function(w,b){return new u(this.world,w,b)},sprite:function(w,b,E,A,R){var I=new d(this.world,w,b,E,A,R);return this.sys.displayList.add(I),this.sys.updateList.add(I),I},gameObject:function(w,b,E){return n(this.world,w,b,E)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=T},3860:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74527),l=t(72632),a=t(93736);function r(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}var i=function(n,h,d,u){d===void 0&&(d={}),u===void 0&&(u=!0);var p=h.x,v=h.y;h.body={temp:!0,position:{x:p,y:v}};var m=[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity];if(m.forEach(function(T){for(var w in T)r(T[w])?Object.defineProperty(h,w,{get:T[w].get,set:T[w].set}):Object.defineProperty(h,w,{value:T[w]})}),h.world=n,h._tempVec2=new a(p,v),d.hasOwnProperty("type")&&d.type==="body")h.setExistingBody(d,u);else{var g=l(d,"shape",null);g||(g="rectangle"),d.addToWorld=u,h.setBody(g,d)}return h};o.exports=i},7030:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(74527),a=t(89980),r=t(72632),i=t(1539),n=t(58210),h=t(93736),d=new s({Extends:i,Mixins:[l.Bounce,l.Collision,l.Force,l.Friction,l.Gravity,l.Mass,l.Sensor,l.SetBody,l.Sleep,l.Static,l.Transform,l.Velocity,n],initialize:function(p,v,m,g,T,w){a.call(this,p.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(g,T),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new h(v,m);var b=r(w,"shape",null);b?this.setBody(b,w):this.setRectangle(this.width,this.height,w),this.setPosition(v,m),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=d},50583:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84093),l=t(50658),a=t(68516),r=t(84125),i=t(63568),n=t(84091),h=t(56694),d=t(63454),u=t(68758),p=t(11299),v=t(56643),m=t(52838),g=t(13657),T=t(53996),w=t(72653),b=t(72632),E=t(10850),A=t(1675),R=t(80391),I=t(16929),P=t(44097),M=t(30657),F=t(70584),O=t(91327),D=t(84474),L=t(91963),z=t(13390),X=t(44272),H=t(7599),J=t(92765),G=t(10438),k=t(39745),N=t(31468);u.setDecomp(t(81084));var B=new h({initialize:function(W){this.scene=W,this.systems=W.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=r,this.composite=p,this.collision=d,this.detector=g,this.pair=F,this.pairs=O,this.query=z,this.resolver=X,this.constraint=m,this.bodies=a,this.composites=v,this.axes=l,this.bounds=n,this.svg=J,this.vector=G,this.vertices=k,this.verts=k,this._tempVec2=G.create(),E(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),E(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),E(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),X._restingThresh=E(this.config,"restingThresh",4),X._restingThreshTangent=E(this.config,"restingThreshTangent",6),X._positionDampen=E(this.config,"positionDampen",.9),X._positionWarming=E(this.config,"positionWarming",.8),X._frictionNormalMultiplier=E(this.config,"frictionNormalMultiplier",5),W.sys.events.once(H.BOOT,this.boot,this),W.sys.events.on(H.START,this.start,this)},boot:function(){this.world=new N(this.scene,this.config),this.add=new w(this.world),this.bodyBounds=new i,this.systems.events.once(H.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new N(this.scene,this.config),this.add=new w(this.world));var U=this.systems.events;U.on(H.UPDATE,this.world.update,this.world),U.on(H.POST_UPDATE,this.world.postUpdate,this.world),U.once(H.SHUTDOWN,this.shutdown,this)},getConfig:function(){var U=this.systems.game.config.physics,W=this.systems.settings.physics,K=M(b(W,"matter",{}),b(U,"matter",{}));return K},enableAttractorPlugin:function(){return D.register(A),D.use(I,A),this},enableWrapPlugin:function(){return D.register(P),D.use(I,P),this},enableCollisionEventsPlugin:function(){return D.register(R),D.use(I,R),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(U,W){this.world.step(U,W)},containsPoint:function(U,W,K){U=this.getMatterBodies(U);var q=G.create(W,K),_=z.point(U,q);return _.length>0},intersectPoint:function(U,W,K){K=this.getMatterBodies(K);var q=G.create(U,W),_=[],rt=z.point(K,q);return rt.forEach(function(ft){_.indexOf(ft)===-1&&_.push(ft)}),_},intersectRect:function(U,W,K,q,_,rt){_===void 0&&(_=!1),rt=this.getMatterBodies(rt);var ft={min:{x:U,y:W},max:{x:U+K,y:W+q}},vt=[],mt=z.region(rt,ft,_);return mt.forEach(function(yt){vt.indexOf(yt)===-1&&vt.push(yt)}),vt},intersectRay:function(U,W,K,q,_,rt){_===void 0&&(_=1),rt=this.getMatterBodies(rt);for(var ft=[],vt=z.ray(rt,G.create(U,W),G.create(K,q),_),mt=0;mt<vt.length;mt++)ft.push(vt[mt].body);return ft},intersectBody:function(U,W){W=this.getMatterBodies(W);for(var K=[],q=z.collides(U,W),_=0;_<q.length;_++){var rt=q[_];rt.bodyA===U?K.push(rt.bodyB):K.push(rt.bodyA)}return K},overlap:function(U,W,K,q,_){K===void 0&&(K=null),q===void 0&&(q=null),_===void 0&&(_=K),Array.isArray(U)||(U=[U]),U=this.getMatterBodies(U),W=this.getMatterBodies(W);for(var rt=!1,ft=0;ft<U.length;ft++)for(var vt=U[ft],mt=z.collides(vt,W),yt=0;yt<mt.length;yt++){var xt=mt[yt],It=xt.bodyA.id===vt.id?xt.bodyB:xt.bodyA;if(!q||q.call(_,vt,It,xt)){if(rt=!0,K)K.call(_,vt,It,xt);else if(!q)return!0}}return rt},setCollisionCategory:function(U,W){return U=this.getMatterBodies(U),U.forEach(function(K){K.collisionFilter.category=W}),this},setCollisionGroup:function(U,W){return U=this.getMatterBodies(U),U.forEach(function(K){K.collisionFilter.group=W}),this},setCollidesWith:function(U,W){U=this.getMatterBodies(U);var K=0;if(!Array.isArray(W))K=W;else for(var q=0;q<W.length;q++)K|=W[q];return U.forEach(function(_){_.collisionFilter.mask=K}),this},getMatterBodies:function(U){if(!U)return this.world.getAllBodies();Array.isArray(U)||(U=[U]);for(var W=[],K=0;K<U.length;K++){var q=U[K].hasOwnProperty("body")?U[K].body:U[K];W.push(q)}return W},setVelocity:function(U,W,K){U=this.getMatterBodies(U);var q=this._tempVec2;return q.x=W,q.y=K,U.forEach(function(_){r.setVelocity(_,q)}),this},setVelocityX:function(U,W){U=this.getMatterBodies(U);var K=this._tempVec2;return K.x=W,U.forEach(function(q){K.y=q.velocity.y,r.setVelocity(q,K)}),this},setVelocityY:function(U,W){U=this.getMatterBodies(U);var K=this._tempVec2;return K.y=W,U.forEach(function(q){K.x=q.velocity.x,r.setVelocity(q,K)}),this},setAngularVelocity:function(U,W){return U=this.getMatterBodies(U),U.forEach(function(K){r.setAngularVelocity(K,W)}),this},applyForce:function(U,W){U=this.getMatterBodies(U);var K=this._tempVec2;return U.forEach(function(q){K.x=q.position.x,K.y=q.position.y,r.applyForce(q,K,W)}),this},applyForceFromPosition:function(U,W,K,q){U=this.getMatterBodies(U);var _=this._tempVec2;return U.forEach(function(rt){q===void 0&&(q=rt.angle),_.x=K*Math.cos(q),_.y=K*Math.sin(q),r.applyForce(rt,W,_)}),this},applyForceFromAngle:function(U,W,K){U=this.getMatterBodies(U);var q=this._tempVec2;return U.forEach(function(_){K===void 0&&(K=_.angle),q.x=W*Math.cos(K),q.y=W*Math.sin(K),r.applyForce(_,{x:_.position.x,y:_.position.y},q)}),this},getConstraintLength:function(U){var W=U.pointA.x,K=U.pointA.y,q=U.pointB.x,_=U.pointB.y;return U.bodyA&&(W+=U.bodyA.position.x,K+=U.bodyA.position.y),U.bodyB&&(q+=U.bodyB.position.x,_+=U.bodyB.position.y),T(W,K,q,_)},alignBody:function(U,W,K,q){U=U.hasOwnProperty("body")?U.body:U;var _;switch(q){case s.TOP_LEFT:case s.LEFT_TOP:_=this.bodyBounds.getTopLeft(U,W,K);break;case s.TOP_CENTER:_=this.bodyBounds.getTopCenter(U,W,K);break;case s.TOP_RIGHT:case s.RIGHT_TOP:_=this.bodyBounds.getTopRight(U,W,K);break;case s.LEFT_CENTER:_=this.bodyBounds.getLeftCenter(U,W,K);break;case s.CENTER:_=this.bodyBounds.getCenter(U,W,K);break;case s.RIGHT_CENTER:_=this.bodyBounds.getRightCenter(U,W,K);break;case s.LEFT_BOTTOM:case s.BOTTOM_LEFT:_=this.bodyBounds.getBottomLeft(U,W,K);break;case s.BOTTOM_CENTER:_=this.bodyBounds.getBottomCenter(U,W,K);break;case s.BOTTOM_RIGHT:case s.RIGHT_BOTTOM:_=this.bodyBounds.getBottomRight(U,W,K);break}return _&&r.setPosition(U,_),this},shutdown:function(){var U=this.systems.events;this.world&&(U.off(H.UPDATE,this.world.update,this.world),U.off(H.POST_UPDATE,this.world.postUpdate,this.world)),U.off(H.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(H.START,this.start,this),this.scene=null,this.systems=null}});L.register("MatterPhysics",B,"matterPhysics"),o.exports=B},73658:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(56694),a=t(74527),r=t(89980),i=t(72632),n=t(58210),h=t(13747),d=t(93736),u=new l({Extends:h,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,n],initialize:function(v,m,g,T,w,b){r.call(this,v.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(T,w),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new d(m,g);var E=i(b,"shape",null);E?this.setBody(E,b):this.setRectangle(this.width,this.height,b),this.setPosition(m,g),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=u},84720:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a=t(56694),r=t(74527),i=t(28699),n=t(6659),h=t(72632),d=t(19256),u=t(39745),p=new a({Extends:n,Mixins:[r.Bounce,r.Collision,r.Friction,r.Gravity,r.Mass,r.Sensor,r.Sleep,r.Static],initialize:function(m,g,T){n.call(this),this.tile=g,this.world=m,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var w=h(T,"body",null),b=h(T,"addToWorld",!0);if(w)this.setBody(w,b);else{var E=g.getCollisionGroup(),A=h(E,"objects",[]);A.length>0?this.setFromTileCollision(T):this.setFromTileRectangle(T)}if(g.flipX||g.flipY){var R={x:g.getCenterX(),y:g.getCenterY()},I=g.flipX?-1:1,P=g.flipY?-1:1;l.scale(w,I,P,R)}},setFromTileRectangle:function(v){v===void 0&&(v={}),d(v,"isStatic")||(v.isStatic=!0),d(v,"addToWorld")||(v.addToWorld=!0);var m=this.tile.getBounds(),g=m.x+m.width/2,T=m.y+m.height/2,w=s.rectangle(g,T,m.width,m.height,v);return this.setBody(w,v.addToWorld),this},setFromTileCollision:function(v){v===void 0&&(v={}),d(v,"isStatic")||(v.isStatic=!0),d(v,"addToWorld")||(v.addToWorld=!0);for(var m=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,T=this.tile.getLeft(),w=this.tile.getTop(),b=this.tile.getCollisionGroup(),E=h(b,"objects",[]),A=[],R=0;R<E.length;R++){var I=E[R],P=T+I.x*m,M=w+I.y*g,F=I.width*m,O=I.height*g,D=null;if(I.rectangle)D=s.rectangle(P+F/2,M+O/2,F,O,v);else if(I.ellipse)D=s.circle(P+F/2,M+O/2,F/2,v);else if(I.polygon||I.polyline){var L=I.polygon?I.polygon:I.polyline,z=L.map(function(G){return{x:G.x*m,y:G.y*g}}),X=u.create(z),H=u.centre(X);P+=H.x,M+=H.y,D=s.fromVertices(P,M,X,v)}D&&A.push(D)}if(A.length===1)this.setBody(A[0],v.addToWorld);else if(A.length>1){var J=i(v);J.parts=A,this.setBody(l.create(J),J.addToWorld)}return this},setBody:function(v,m){return m===void 0&&(m=!0),this.body&&this.removeBody(),this.body=v,this.body.gameObject=this,m&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});o.exports=p},10998:(o,x,t)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a=t(68758),r=t(72632),i=t(39745),n={parseBody:function(h,d,u,p){p===void 0&&(p={});for(var v=r(u,"fixtures",[]),m=[],g=0;g<v.length;g++)for(var T=this.parseFixture(v[g]),w=0;w<T.length;w++)m.push(T[w]);var b=a.clone(u,!0);a.extend(b,p,!0),delete b.fixtures,delete b.type;var E=l.create(b);return l.setParts(E,m),l.setPosition(E,{x:h,y:d}),E},parseFixture:function(h){var d=a.extend({},!1,h);delete d.circle,delete d.vertices;var u;if(h.circle){var p=r(h.circle,"x"),v=r(h.circle,"y"),m=r(h.circle,"radius");u=[s.circle(p,v,m,d)]}else h.vertices&&(u=this.parseVertices(h.vertices,d));return u},parseVertices:function(h,d){d===void 0&&(d={});for(var u=[],p=0;p<h.length;p++)i.clockwiseSort(h[p]),u.push(l.create(a.extend({position:i.centre(h[p]),vertices:h[p]},d)));return s.flagCoincidentParts(u)}};o.exports=n},72829:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a={parseBody:function(r,i,n,h){h===void 0&&(h={});var d,u=n.vertices;if(u.length===1)h.vertices=u[0],d=l.create(h),s.flagCoincidentParts(d.parts);else{for(var p=[],v=0;v<u.length;v++){var m=l.create({vertices:u[v]});p.push(m)}s.flagCoincidentParts(p),h.parts=p,d=l.create(h)}return d.label=n.label,l.setPosition(d,{x:r,y:i}),d}};o.exports=a},88596:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84091),l=t(56694),a=t(11299),r=t(52838),i=t(13657),n=t(35416),h=t(33963),d=t(30657),u=t(22806),p=t(93736),v=t(39745),m=new l({initialize:function(T,w,b){b===void 0&&(b={});var E={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=T,this.world=w,this.camera=null,this.pointer=null,this.active=!0,this.position=new p,this.body=null,this.part=null,this.constraint=r.create(d(b,E)),this.world.on(n.BEFORE_UPDATE,this.update,this),T.sys.input.on(h.POINTER_DOWN,this.onDown,this),T.sys.input.on(h.POINTER_UP,this.onUp,this)},onDown:function(g){this.pointer||(this.pointer=g,this.camera=g.camera)},onUp:function(g){g===this.pointer&&(this.pointer=null)},getBody:function(g){var T=this.position,w=this.constraint;this.camera.getWorldPoint(g.x,g.y,T);for(var b=a.allBodies(this.world.localWorld),E=0;E<b.length;E++){var A=b[E];if(!A.ignorePointer&&s.contains(A.bounds,T)&&i.canCollide(A.collisionFilter,w.collisionFilter)&&this.hitTestBody(A,T))return this.world.emit(n.DRAG_START,A,this.part,this),!0}return!1},hitTestBody:function(g,T){for(var w=this.constraint,b=g.parts.length,E=b>1?1:0,A=E;A<b;A++){var R=g.parts[A];if(v.contains(R.vertices,T))return w.pointA=T,w.pointB={x:T.x-g.position.x,y:T.y-g.position.y},w.bodyB=g,w.angleB=g.angle,u.set(g,!1),this.part=R,this.body=g,!0}return!1},update:function(){var g=this.pointer,T=this.body;if(!this.active||!g){T&&this.stopDrag();return}if(!g.isDown&&T){this.stopDrag();return}else if(g.isDown){if(!T&&!this.getBody(g))return;T=this.body;var w=this.position,b=this.constraint;this.camera.getWorldPoint(g.x,g.y,w),b.pointA.x=w.x,b.pointA.y=w.y,u.set(T,!1),this.world.emit(n.DRAG,T,this)}},stopDrag:function(){var g=this.body,T=this.constraint;T.bodyB=null,T.pointB=null,this.pointer=null,this.body=null,this.part=null,g&&this.world.emit(n.DRAG_END,g,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(n.BEFORE_UPDATE,this.update),this.scene.sys.input.off(h.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(h.POINTER_UP,this.onUp,this)}});o.exports=m},31468:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a=t(56694),r=t(68758),i=t(11299),n=t(45775),h=t(6659),d=t(35416),u=t(72632),p=t(10850),v=t(84125),m=t(39073),g=t(84720),T=t(72005),w=t(10438),b=new a({Extends:h,initialize:function(A,R){h.call(this),this.scene=A,this.engine=n.create(R),this.localWorld=this.engine.world;var I=p(R,"gravity",null);I?this.setGravity(I.x,I.y,I.scale):I===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=p(R,"enabled",!0),this.getDelta=p(R,"getDelta",this.update60Hz);var P=u(R,"runner",{}),M=u(P,"fps",!1),F=u(P,"fps",60),O=u(P,"delta",1e3/F),D=u(P,"deltaMin",1e3/F),L=u(P,"deltaMax",1e3/(F*.5));M||(F=1e3/O),this.runner={fps:F,deltaSampleSize:u(P,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:u(P,"isFixed",!1),delta:O,deltaMin:D,deltaMax:L},this.autoUpdate=p(R,"autoUpdate",!0);var z=p(R,"debug",!1);if(this.drawDebug=typeof z=="object"?!0:z,this.debugGraphic,this.debugConfig={showAxes:u(z,"showAxes",!1),showAngleIndicator:u(z,"showAngleIndicator",!1),angleColor:u(z,"angleColor",15208787),showBroadphase:u(z,"showBroadphase",!1),broadphaseColor:u(z,"broadphaseColor",16757760),showBounds:u(z,"showBounds",!1),boundsColor:u(z,"boundsColor",16777215),showVelocity:u(z,"showVelocity",!1),velocityColor:u(z,"velocityColor",44783),showCollisions:u(z,"showCollisions",!1),collisionColor:u(z,"collisionColor",16094476),showSeparations:u(z,"showSeparations",!1),separationColor:u(z,"separationColor",16753920),showBody:u(z,"showBody",!0),showStaticBody:u(z,"showStaticBody",!0),showInternalEdges:u(z,"showInternalEdges",!1),renderFill:u(z,"renderFill",!1),renderLine:u(z,"renderLine",!0),fillColor:u(z,"fillColor",1075465),fillOpacity:u(z,"fillOpacity",1),lineColor:u(z,"lineColor",2678297),lineOpacity:u(z,"lineOpacity",1),lineThickness:u(z,"lineThickness",1),staticFillColor:u(z,"staticFillColor",857979),staticLineColor:u(z,"staticLineColor",1255396),showSleeping:u(z,"showSleeping",!1),staticBodySleepOpacity:u(z,"staticBodySleepOpacity",.7),sleepFillColor:u(z,"sleepFillColor",4605510),sleepLineColor:u(z,"sleepLineColor",10066585),showSensors:u(z,"showSensors",!0),sensorFillColor:u(z,"sensorFillColor",857979),sensorLineColor:u(z,"sensorLineColor",1255396),showPositions:u(z,"showPositions",!0),positionSize:u(z,"positionSize",4),positionColor:u(z,"positionColor",14697178),showJoint:u(z,"showJoint",!0),jointColor:u(z,"jointColor",14737474),jointLineOpacity:u(z,"jointLineOpacity",1),jointLineThickness:u(z,"jointLineThickness",2),pinSize:u(z,"pinSize",4),pinColor:u(z,"pinColor",4382944),springColor:u(z,"springColor",14697184),anchorColor:u(z,"anchorColor",15724527),anchorSize:u(z,"anchorSize",4),showConvexHulls:u(z,"showConvexHulls",!1),hullColor:u(z,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),u(R,"setBounds",!1)){var X=R.setBounds;if(typeof X=="boolean")this.setBounds();else{var H=u(X,"x",0),J=u(X,"y",0),G=u(X,"width",A.sys.scale.width),k=u(X,"height",A.sys.scale.height),N=u(X,"thickness",64),B=u(X,"left",!0),U=u(X,"right",!0),W=u(X,"top",!0),K=u(X,"bottom",!0);this.setBounds(H,J,G,k,N,B,U,W,K)}}},setCompositeRenderStyle:function(E){var A=E.bodies,R=E.constraints,I=E.composites,P,M,F;for(P=0;P<A.length;P++)M=A[P],F=M.render,this.setBodyRenderStyle(M,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity);for(P=0;P<R.length;P++)M=R[P],F=M.render,this.setConstraintRenderStyle(M,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize);for(P=0;P<I.length;P++)M=I[P],this.setCompositeRenderStyle(M);return this},setBodyRenderStyle:function(E,A,R,I,P,M){var F=E.render,O=this.debugConfig;return F?(A==null&&(A=E.isStatic?O.staticLineColor:O.lineColor),R==null&&(R=O.lineOpacity),I==null&&(I=O.lineThickness),P==null&&(P=E.isStatic?O.staticFillColor:O.fillColor),M==null&&(M=O.fillOpacity),A!==!1&&(F.lineColor=A),R!==!1&&(F.lineOpacity=R),I!==!1&&(F.lineThickness=I),P!==!1&&(F.fillColor=P),M!==!1&&(F.fillOpacity=M),this):this},setConstraintRenderStyle:function(E,A,R,I,P,M,F){var O=E.render,D=this.debugConfig;if(!O)return this;if(A==null){var L=O.type;L==="line"?A=D.jointColor:L==="pin"?A=D.pinColor:L==="spring"&&(A=D.springColor)}return R==null&&(R=D.jointLineOpacity),I==null&&(I=D.jointLineThickness),P==null&&(P=D.pinSize),M==null&&(M=D.anchorColor),F==null&&(F=D.anchorSize),A!==!1&&(O.lineColor=A),R!==!1&&(O.lineOpacity=R),I!==!1&&(O.lineThickness=I),P!==!1&&(O.pinSize=P),M!==!1&&(O.anchorColor=M),F!==!1&&(O.anchorSize=F),this},setEventsProxy:function(){var E=this,A=this.engine,R=this.localWorld;this.drawDebug&&(m.on(R,"compositeModified",function(I){E.setCompositeRenderStyle(I)}),m.on(R,"beforeAdd",function(I){for(var P=[].concat(I.object),M=0;M<P.length;M++){var F=P[M],O=F.render;F.type==="body"?E.setBodyRenderStyle(F,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):F.type==="composite"?E.setCompositeRenderStyle(F):F.type==="constraint"&&E.setConstraintRenderStyle(F,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),m.on(R,"beforeAdd",function(I){E.emit(d.BEFORE_ADD,I)}),m.on(R,"afterAdd",function(I){E.emit(d.AFTER_ADD,I)}),m.on(R,"beforeRemove",function(I){E.emit(d.BEFORE_REMOVE,I)}),m.on(R,"afterRemove",function(I){E.emit(d.AFTER_REMOVE,I)}),m.on(A,"beforeUpdate",function(I){E.emit(d.BEFORE_UPDATE,I)}),m.on(A,"afterUpdate",function(I){E.emit(d.AFTER_UPDATE,I)}),m.on(A,"collisionStart",function(I){var P=I.pairs,M,F;P.length>0&&(M=P[0].bodyA,F=P[0].bodyB),E.emit(d.COLLISION_START,I,M,F)}),m.on(A,"collisionActive",function(I){var P=I.pairs,M,F;P.length>0&&(M=P[0].bodyA,F=P[0].bodyB),E.emit(d.COLLISION_ACTIVE,I,M,F)}),m.on(A,"collisionEnd",function(I){var P=I.pairs,M,F;P.length>0&&(M=P[0].bodyA,F=P[0].bodyB),E.emit(d.COLLISION_END,I,M,F)})},setBounds:function(E,A,R,I,P,M,F,O,D){return E===void 0&&(E=0),A===void 0&&(A=0),R===void 0&&(R=this.scene.sys.scale.width),I===void 0&&(I=this.scene.sys.scale.height),P===void 0&&(P=64),M===void 0&&(M=!0),F===void 0&&(F=!0),O===void 0&&(O=!0),D===void 0&&(D=!0),this.updateWall(M,"left",E-P,A-P,P,I+P*2),this.updateWall(F,"right",E+R,A-P,P,I+P*2),this.updateWall(O,"top",E,A-P,R,P),this.updateWall(D,"bottom",E,A+I,R,P),this},updateWall:function(E,A,R,I,P,M){var F=this.walls[A];E?(F&&T.remove(this.localWorld,F),R+=P/2,I+=M/2,this.walls[A]=this.create(R,I,P,M,{isStatic:!0,friction:0,frictionStatic:0})):(F&&T.remove(this.localWorld,F),this.walls[A]=null)},createDebugGraphic:function(){var E=this.scene.sys.add.graphics({x:0,y:0});return E.setDepth(Number.MAX_VALUE),this.debugGraphic=E,this.drawDebug=!0,E},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(E,A,R){return E===void 0&&(E=0),A===void 0&&(A=1),R===void 0&&(R=.001),this.localWorld.gravity.x=E,this.localWorld.gravity.y=A,this.localWorld.gravity.scale=R,this},create:function(E,A,R,I,P){var M=s.rectangle(E,A,R,I,P);return T.add(this.localWorld,M),M},add:function(E){return T.add(this.localWorld,E),this},remove:function(E,A){Array.isArray(E)||(E=[E]);for(var R=0;R<E.length;R++){var I=E[R],P=I.body?I.body:I;i.remove(this.localWorld,P,A)}return this},removeConstraint:function(E,A){return i.remove(this.localWorld,E,A),this},convertTilemapLayer:function(E,A){var R=E.layer,I=E.getTilesWithin(0,0,R.width,R.height,{isColliding:!0});return this.convertTiles(I,A),this},convertTiles:function(E,A){if(E.length===0)return this;for(var R=0;R<E.length;R++)new g(this,E[R],A);return this},nextGroup:function(E){return v.nextGroup(E)},nextCategory:function(){return v.nextCategory()},pause:function(){return this.enabled=!1,this.emit(d.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(d.RESUME),this},update:function(E,A){if(!(!this.enabled||!this.autoUpdate)){var R=this.engine,I=this.runner,P=R.timing;I.isFixed?A=this.getDelta(E,A):(A=E-I.timePrev||I.delta,I.timePrev=E,I.deltaHistory.push(A),I.deltaHistory=I.deltaHistory.slice(-I.deltaSampleSize),A=Math.min.apply(null,I.deltaHistory),A=A<I.deltaMin?I.deltaMin:A,A=A>I.deltaMax?I.deltaMax:A,I.delta=A),I.timeScalePrev=P.timeScale,I.frameCounter+=1,E-I.counterTimestamp>=1e3&&(I.fps=I.frameCounter*((E-I.counterTimestamp)/1e3),I.counterTimestamp=E,I.frameCounter=0),n.update(R,A)}},step:function(E){n.update(this.engine,E)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(E){var A=E.hasOwnProperty("body")?E.body:E;return i.get(this.localWorld,A.id,A.type)!==null},getAllBodies:function(){return i.allBodies(this.localWorld)},getAllConstraints:function(){return i.allConstraints(this.localWorld)},getAllComposites:function(){return i.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var E=this.debugConfig,A=this.engine,R=this.debugGraphic,I=i.allBodies(this.localWorld);this.debugGraphic.clear(),E.showBroadphase&&A.broadphase.controller&&this.renderGrid(A.broadphase,R,E.broadphaseColor,.5),E.showBounds&&this.renderBodyBounds(I,R,E.boundsColor,.5),(E.showBody||E.showStaticBody)&&this.renderBodies(I),E.showJoint&&this.renderJoints(),(E.showAxes||E.showAngleIndicator)&&this.renderBodyAxes(I,R,E.showAxes,E.angleColor,.5),E.showVelocity&&this.renderBodyVelocity(I,R,E.velocityColor,1,2),E.showSeparations&&this.renderSeparations(A.pairs.list,R,E.separationColor),E.showCollisions&&this.renderCollisions(A.pairs.list,R,E.collisionColor)}},renderGrid:function(E,A,R,I){A.lineStyle(1,R,I);for(var P=r.keys(E.buckets),M=0;M<P.length;M++){var F=P[M];if(!(E.buckets[F].length<2)){var O=F.split(/C|R/);A.strokeRect(parseInt(O[1],10)*E.bucketWidth,parseInt(O[2],10)*E.bucketHeight,E.bucketWidth,E.bucketHeight)}}return this},renderSeparations:function(E,A,R){A.lineStyle(1,R,1);for(var I=0;I<E.length;I++){var P=E[I];if(P.isActive){var M=P.collision,F=M.bodyA,O=M.bodyB,D=F.position,L=O.position,z=M.penetration,X=!F.isStatic&&!O.isStatic?4:1;O.isStatic&&(X=0),A.lineBetween(L.x,L.y,L.x-z.x*X,L.y-z.y*X),X=!F.isStatic&&!O.isStatic?4:1,F.isStatic&&(X=0),A.lineBetween(D.x,D.y,D.x-z.x*X,D.y-z.y*X)}}return this},renderCollisions:function(E,A,R){A.lineStyle(1,R,.5),A.fillStyle(R,1);var I,P;for(I=0;I<E.length;I++)if(P=E[I],!!P.isActive)for(var M=0;M<P.activeContacts.length;M++){var F=P.activeContacts[M],O=F.vertex;A.fillRect(O.x-2,O.y-2,5,5)}for(I=0;I<E.length;I++)if(P=E[I],!!P.isActive){var D=P.collision,L=P.activeContacts;if(L.length>0){var z=L[0].vertex.x,X=L[0].vertex.y;L.length===2&&(z=(L[0].vertex.x+L[1].vertex.x)/2,X=(L[0].vertex.y+L[1].vertex.y)/2),D.bodyB===D.supports[0].body||D.bodyA.isStatic?A.lineBetween(z-D.normal.x*8,X-D.normal.y*8,z,X):A.lineBetween(z+D.normal.x*8,X+D.normal.y*8,z,X)}}return this},renderBodyBounds:function(E,A,R,I){A.lineStyle(1,R,I);for(var P=0;P<E.length;P++){var M=E[P];if(M.render.visible){var F=M.bounds;if(F)A.strokeRect(F.min.x,F.min.y,F.max.x-F.min.x,F.max.y-F.min.y);else for(var O=M.parts,D=O.length>1?1:0;D<O.length;D++){var L=O[D];A.strokeRect(L.bounds.min.x,L.bounds.min.y,L.bounds.max.x-L.bounds.min.x,L.bounds.max.y-L.bounds.min.y)}}}return this},renderBodyAxes:function(E,A,R,I,P){A.lineStyle(1,I,P);for(var M=0;M<E.length;M++){var F=E[M],O=F.parts;if(F.render.visible){var D,L,z;if(R)for(L=O.length>1?1:0;L<O.length;L++)for(D=O[L],z=0;z<D.axes.length;z++){var X=D.axes[z];A.lineBetween(D.position.x,D.position.y,D.position.x+X.x*20,D.position.y+X.y*20)}else for(L=O.length>1?1:0;L<O.length;L++)for(D=O[L],z=0;z<D.axes.length;z++)A.lineBetween(D.position.x,D.position.y,(D.vertices[0].x+D.vertices[D.vertices.length-1].x)/2,(D.vertices[0].y+D.vertices[D.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(E,A,R,I,P){A.lineStyle(P,R,I);for(var M=0;M<E.length;M++){var F=E[M];F.render.visible&&A.lineBetween(F.position.x,F.position.y,F.position.x+(F.position.x-F.positionPrev.x)*2,F.position.y+(F.position.y-F.positionPrev.y)*2)}return this},renderBodies:function(E){for(var A=this.debugGraphic,R=this.debugConfig,I=R.showBody,P=R.showStaticBody,M=R.showSleeping,F=R.showInternalEdges,O=R.showConvexHulls,D=R.renderFill,L=R.renderLine,z=R.staticBodySleepOpacity,X=R.sleepFillColor,H=R.sleepLineColor,J=R.hullColor,G=0;G<E.length;G++){var k=E[G];if(k.render.visible&&!(!P&&k.isStatic||!I&&!k.isStatic)){var N=k.render.lineColor,B=k.render.lineOpacity,U=k.render.lineThickness,W=k.render.fillColor,K=k.render.fillOpacity;M&&k.isSleeping&&(k.isStatic?(B*=z,K*=z):(N=H,W=X)),D||(W=null),L||(N=null),this.renderBody(k,A,F,N,B,U,W,K);var q=k.parts.length;O&&q>1&&this.renderConvexHull(k,A,J,U)}}},renderBody:function(E,A,R,I,P,M,F,O){I===void 0&&(I=null),P===void 0&&(P=null),M===void 0&&(M=1),F===void 0&&(F=null),O===void 0&&(O=null);for(var D=this.debugConfig,L=D.sensorFillColor,z=D.sensorLineColor,X=E.parts,H=X.length,J=H>1?1:0;J<H;J++){var G=X[J],k=G.render,N=k.opacity;if(!(!k.visible||N===0||G.isSensor&&!D.showSensors)){var B=G.circleRadius;if(A.beginPath(),G.isSensor?(F!==null&&A.fillStyle(L,O*N),I!==null&&A.lineStyle(M,z,P*N)):(F!==null&&A.fillStyle(F,O*N),I!==null&&A.lineStyle(M,I,P*N)),B)A.arc(G.position.x,G.position.y,B,0,2*Math.PI);else{var U=G.vertices,W=U.length;A.moveTo(U[0].x,U[0].y);for(var K=1;K<W;K++){var q=U[K];if(!U[K-1].isInternal||R?A.lineTo(q.x,q.y):A.moveTo(q.x,q.y),K<W&&q.isInternal&&!R){var _=(K+1)%W;A.moveTo(U[_].x,U[_].y)}}A.closePath()}F!==null&&A.fillPath(),I!==null&&A.strokePath()}}if(D.showPositions&&!E.isStatic){var rt=E.position.x,ft=E.position.y,vt=Math.ceil(D.positionSize/2);A.fillStyle(D.positionColor,1),A.fillRect(rt-vt,ft-vt,D.positionSize,D.positionSize)}return this},renderConvexHull:function(E,A,R,I){I===void 0&&(I=1);var P=E.parts,M=P.length;if(M>1){var F=E.vertices;A.lineStyle(I,R),A.beginPath(),A.moveTo(F[0].x,F[0].y);for(var O=1;O<F.length;O++)A.lineTo(F[O].x,F[O].y);A.lineTo(F[0].x,F[0].y),A.strokePath()}return this},renderJoints:function(){for(var E=this.debugGraphic,A=i.allConstraints(this.localWorld),R=0;R<A.length;R++){var I=A[R].render,P=I.lineColor,M=I.lineOpacity,F=I.lineThickness,O=I.pinSize,D=I.anchorColor,L=I.anchorSize;this.renderConstraint(A[R],E,P,M,F,O,D,L)}},renderConstraint:function(E,A,R,I,P,M,F,O){var D=E.render;if(!D.visible||!E.pointA||!E.pointB)return this;A.lineStyle(P,R,I);var L=E.bodyA,z=E.bodyB,X,H;if(L?X=w.add(L.position,E.pointA):X=E.pointA,D.type==="pin")A.strokeCircle(X.x,X.y,M);else{if(z?H=w.add(z.position,E.pointB):H=E.pointB,A.beginPath(),A.moveTo(X.x,X.y),D.type==="spring")for(var J=w.sub(H,X),G=w.perp(w.normalise(J)),k=Math.ceil(r.clamp(E.length/5,12,20)),N,B=1;B<k;B+=1)N=B%2===0?1:-1,A.lineTo(X.x+J.x*(B/k)+G.x*N*4,X.y+J.y*(B/k)+G.y*N*4);A.lineTo(H.x,H.y)}return A.strokePath(),D.anchors&&O>0&&(A.fillStyle(F),A.fillCircle(X.x,X.y,O),A.fillCircle(H.x,H.y,O)),this},resetCollisionIDs:function(){return l._nextCollidingGroupId=1,l._nextNonCollidingGroupId=-1,l._nextCategory=1,this},shutdown:function(){m.off(this.engine),this.removeAllListeners(),T.clear(this.localWorld,!1),n.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});o.exports=b},95349:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setBounce:function(t){return this.body.restitution=t,this}};o.exports=x},70679:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var s=0;if(!Array.isArray(t))s=t;else for(var l=0;l<t.length;l++)s|=t[l];return this.body.collisionFilter.mask=s,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,s){Array.isArray(t)||(t=[t]);for(var l=0;l<t.length;l++){var a=t[l].hasOwnProperty("body")?t[l].body:t[l];this.body.setOnCollideWith(a,s)}return this}};o.exports=x},77178:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l={applyForce:function(a){return this._tempVec2.set(this.body.position.x,this.body.position.y),s.applyForce(this.body,this._tempVec2,a),this},applyForceFrom:function(a,r){return s.applyForce(this.body,a,r),this},thrust:function(a){var r=this.body.angle;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(a){var r=this.body.angle-Math.PI/2;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(a){var r=this.body.angle+Math.PI/2;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(a){var r=this.body.angle-Math.PI;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};o.exports=l},74015:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setFriction:function(t,s,l){return this.body.friction=t,s!==void 0&&(this.body.frictionAir=s),l!==void 0&&(this.body.frictionStatic=l),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};o.exports=x},11535:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}};o.exports=x},74497:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l=t(93736),a={setMass:function(r){return s.setMass(this.body,r),this},setDensity:function(r){return s.setDensity(this.body,r),this},centerOfMass:{get:function(){return new l(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};o.exports=a},75529:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}};o.exports=x},64024:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a=t(88456),r=t(72632),i=t(10998),n=t(72829),h=t(39745),d={setRectangle:function(u,p,v){return this.setBody({type:"rectangle",width:u,height:p},v)},setCircle:function(u,p){return this.setBody({type:"circle",radius:u},p)},setPolygon:function(u,p,v){return this.setBody({type:"polygon",sides:p,radius:u},v)},setTrapezoid:function(u,p,v,m){return this.setBody({type:"trapezoid",width:u,height:p,slope:v},m)},setExistingBody:function(u,p){p===void 0&&(p=!0),this.body&&this.world.remove(this.body,!0),this.body=u;for(var v=0;v<u.parts.length;v++)u.parts[v].gameObject=this;var m=this;if(u.destroy=function(){m.world.remove(m.body,!0),m.body.gameObject=null},p&&(this.world.has(u)&&this.world.remove(u,!0),this.world.add(u)),this._originComponent){var g=u.render.sprite.xOffset,T=u.render.sprite.yOffset,w=u.centerOfMass.x,b=u.centerOfMass.y;if(a(w,.5)&&a(b,.5))this.setOrigin(g+.5,T+.5);else{var E=u.centerOffset.x,A=u.centerOffset.y;this.setOrigin(g+E/this.displayWidth,T+A/this.displayHeight)}}return this},setBody:function(u,p){if(!u)return this;var v;typeof u=="string"&&(u={type:u});var m=r(u,"type","rectangle"),g=r(u,"x",this._tempVec2.x),T=r(u,"y",this._tempVec2.y),w=r(u,"width",this.width),b=r(u,"height",this.height);switch(m){case"rectangle":v=s.rectangle(g,T,w,b,p);break;case"circle":var E=r(u,"radius",Math.max(w,b)/2),A=r(u,"maxSides",25);v=s.circle(g,T,E,p,A);break;case"trapezoid":var R=r(u,"slope",.5);v=s.trapezoid(g,T,w,b,R,p);break;case"polygon":var I=r(u,"sides",5),P=r(u,"radius",Math.max(w,b)/2);v=s.polygon(g,T,I,P,p);break;case"fromVertices":case"fromVerts":var M=r(u,"verts",null);if(M)if(typeof M=="string"&&(M=h.fromPath(M)),this.body&&!this.body.hasOwnProperty("temp"))l.setVertices(this.body,M),v=this.body;else{var F=r(u,"flagInternal",!1),O=r(u,"removeCollinear",.01),D=r(u,"minimumArea",10);v=s.fromVertices(g,T,M,p,F,O,D)}break;case"fromPhysicsEditor":v=i.parseBody(g,T,u,p);break;case"fromPhysicsTracer":v=n.parseBody(g,T,u,p);break}return v&&this.setExistingBody(v,u.addToWorld),this}};o.exports=d},25106:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35416),l=t(22806),a=t(39073),r={setToSleep:function(){return l.set(this.body,!0),this},setAwake:function(){return l.set(this.body,!1),this},setSleepThreshold:function(i){return i===void 0&&(i=60),this.body.sleepThreshold=i,this},setSleepEvents:function(i,n){return this.setSleepStartEvent(i),this.setSleepEndEvent(n),this},setSleepStartEvent:function(i){if(i){var n=this.world;a.on(this.body,"sleepStart",function(h){n.emit(s.SLEEP_START,h,this)})}else a.off(this.body,"sleepStart");return this},setSleepEndEvent:function(i){if(i){var n=this.world;a.on(this.body,"sleepEnd",function(h){n.emit(s.SLEEP_END,h,this)})}else a.off(this.body,"sleepEnd");return this}};o.exports=r},82884:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l={setStatic:function(a){return s.setStatic(this.body,a),this},isStatic:function(){return this.body.isStatic}};o.exports=l},4753:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l=t(83392),a=t(35786),r=t(62138),i=4,n={x:{get:function(){return this.body.position.x},set:function(h){this._tempVec2.set(h,this.y),s.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(h){this._tempVec2.set(this.x,h),s.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(h){var d=1/this._scaleX,u=1/this._scaleY;this._scaleX=h,this._scaleX===0?this.renderFlags&=~i:this.renderFlags|=i,s.scale(this.body,d,u),s.scale(this.body,h,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(h){var d=1/this._scaleX,u=1/this._scaleY;this._scaleY=h,this._scaleY===0?this.renderFlags&=~i:this.renderFlags|=i,s.scale(this.body,d,u),s.scale(this.body,this._scaleX,h)}},angle:{get:function(){return r(this.body.angle*l.RAD_TO_DEG)},set:function(h){this.rotation=r(h)*l.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(h){this._rotation=a(h),s.setAngle(this.body,this._rotation)}},setPosition:function(h,d){return h===void 0&&(h=0),d===void 0&&(d=h),this._tempVec2.set(h,d),s.setPosition(this.body,this._tempVec2),this},setRotation:function(h){return h===void 0&&(h=0),this._rotation=a(h),s.setAngle(this.body,h),this},setFixedRotation:function(){return s.setInertia(this.body,1/0),this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,s.setAngle(this.body,this.rotation),this},setScale:function(h,d,u){h===void 0&&(h=1),d===void 0&&(d=h);var p=1/this._scaleX,v=1/this._scaleY;return this._scaleX=h,this._scaleY=d,s.scale(this.body,p,v,u),s.scale(this.body,h,d,u),this}};o.exports=n},37268:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l={setVelocityX:function(a){return this._tempVec2.set(a,this.body.velocity.y),s.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(a){return this._tempVec2.set(this.body.velocity.x,a),s.setVelocity(this.body,this._tempVec2),this},setVelocity:function(a,r){return this._tempVec2.set(a,r),s.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return s.getVelocity(this.body)},setAngularVelocity:function(a){return s.setAngularVelocity(this.body,a),this},getAngularVelocity:function(){return s.getAngularVelocity(this.body)},setAngularSpeed:function(a){return s.setAngularSpeed(this.body,a),this},getAngularSpeed:function(){return s.getAngularSpeed(this.body)}};o.exports=l},74527:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bounce:t(95349),Collision:t(70679),Force:t(77178),Friction:t(74015),Gravity:t(11535),Mass:t(74497),Sensor:t(75529),SetBody:t(64024),Sleep:t(25106),Static:t(82884),Transform:t(4753),Velocity:t(37268)}},63201:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afteradd"},30474:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterremove"},44822:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterupdate"},88820:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeadd"},94849:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeremove"},6391:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeupdate"},96738:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionactive"},7916:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionend"},59529:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionstart"},10219:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},183:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},39143:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},16483:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},35806:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},22106:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepend"},5803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepstart"},35416:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_ADD:t(63201),AFTER_REMOVE:t(30474),AFTER_UPDATE:t(44822),BEFORE_ADD:t(88820),BEFORE_REMOVE:t(94849),BEFORE_UPDATE:t(6391),COLLISION_ACTIVE:t(96738),COLLISION_END:t(7916),COLLISION_START:t(59529),DRAG_END:t(10219),DRAG:t(183),DRAG_START:t(39143),PAUSE:t(16483),RESUME:t(35806),SLEEP_END:t(22106),SLEEP_START:t(5803)}},45949:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BodyBounds:t(63568),Components:t(74527),Events:t(35416),Factory:t(72653),MatterGameObject:t(3860),Image:t(7030),Matter:t(18171),MatterPhysics:t(50583),PolyDecomp:t(81084),Sprite:t(73658),TileBody:t(84720),PhysicsEditorParser:t(10998),PhysicsJSONParser:t(72829),PointerConstraint:t(88596),World:t(31468)}},84125:(o,x,t)=>{var s={};o.exports=s;var l=t(39745),a=t(10438),r=t(22806),i=t(68758),n=t(84091),h=t(50658);(function(){s._timeCorrection=!0,s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s._baseDelta=16.666666666666668,s.create=function(u){var p={id:i.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!u.hasOwnProperty("position")&&u.hasOwnProperty("vertices")?u.position=l.centre(u.vertices):u.hasOwnProperty("vertices")||(p.vertices=l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var v=i.extend(p,u);return d(v,u),v.setOnCollideWith=function(m,g){return g?this.onCollideWith[m.id]=g:delete this.onCollideWith[m.id],this},v},s.nextGroup=function(u){return u?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var d=function(u,p){if(p=p||{},s.set(u,{bounds:u.bounds||n.create(u.vertices),positionPrev:u.positionPrev||a.clone(u.position),anglePrev:u.anglePrev||u.angle,vertices:u.vertices,parts:u.parts||[u],isStatic:u.isStatic,isSleeping:u.isSleeping,parent:u.parent||u}),l.rotate(u.vertices,u.angle,u.position),h.rotate(u.axes,u.angle),n.update(u.bounds,u.vertices,u.velocity),s.set(u,{axes:p.axes||u.axes,area:p.area||u.area,mass:p.mass||u.mass,inertia:p.inertia||u.inertia}),u.parts.length===1){var v=u.bounds,m=u.centerOfMass,g=u.centerOffset,T=v.max.x-v.min.x,w=v.max.y-v.min.y;m.x=-(v.min.x-u.position.x)/T,m.y=-(v.min.y-u.position.y)/w,g.x=T*m.x,g.y=w*m.y}};s.set=function(u,p,v){var m;typeof p=="string"&&(m=p,p={},p[m]=v);for(m in p)if(Object.prototype.hasOwnProperty.call(p,m))switch(v=p[m],m){case"isStatic":s.setStatic(u,v);break;case"isSleeping":r.set(u,v);break;case"mass":s.setMass(u,v);break;case"density":s.setDensity(u,v);break;case"inertia":s.setInertia(u,v);break;case"vertices":s.setVertices(u,v);break;case"position":s.setPosition(u,v);break;case"angle":s.setAngle(u,v);break;case"velocity":s.setVelocity(u,v);break;case"angularVelocity":s.setAngularVelocity(u,v);break;case"speed":s.setSpeed(u,v);break;case"angularSpeed":s.setAngularSpeed(u,v);break;case"parts":s.setParts(u,v);break;case"centre":s.setCentre(u,v);break;default:u[m]=v}},s.setStatic=function(u,p){for(var v=0;v<u.parts.length;v++){var m=u.parts[v];p?(m.isStatic||(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia}),m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null),m.isStatic=p}},s.setMass=function(u,p){var v=u.inertia/(u.mass/6);u.inertia=v*(p/6),u.inverseInertia=1/u.inertia,u.mass=p,u.inverseMass=1/u.mass,u.density=u.mass/u.area},s.setDensity=function(u,p){s.setMass(u,p*u.area),u.density=p},s.setInertia=function(u,p){u.inertia=p,u.inverseInertia=1/u.inertia},s.setVertices=function(u,p){p[0].body===u?u.vertices=p:u.vertices=l.create(p,u),u.axes=h.fromVertices(u.vertices),u.area=l.area(u.vertices),s.setMass(u,u.density*u.area);var v=l.centre(u.vertices);l.translate(u.vertices,v,-1),s.setInertia(u,s._inertiaScale*l.inertia(u.vertices,u.mass)),l.translate(u.vertices,u.position),n.update(u.bounds,u.vertices,u.velocity)},s.setParts=function(u,p,v){var m;for(p=p.slice(0),u.parts.length=0,u.parts.push(u),u.parent=u,m=0;m<p.length;m++){var g=p[m];g!==u&&(g.parent=u,u.parts.push(g))}if(u.parts.length!==1){if(v=typeof v<"u"?v:!0,v){var T=[];for(m=0;m<p.length;m++)T=T.concat(p[m].vertices);l.clockwiseSort(T);var w=l.hull(T),b=l.centre(w);s.setVertices(u,w),l.translate(u.vertices,b)}var E=s._totalProperties(u),A=E.centre.x,R=E.centre.y,I=u.bounds,P=u.centerOfMass,M=u.centerOffset;n.update(I,u.vertices,u.velocity),P.x=-(I.min.x-A)/(I.max.x-I.min.x),P.y=-(I.min.y-R)/(I.max.y-I.min.y),M.x=A,M.y=R,u.area=E.area,u.parent=u,u.position.x=A,u.position.y=R,u.positionPrev.x=A,u.positionPrev.y=R,s.setMass(u,E.mass),s.setInertia(u,E.inertia),s.setPosition(u,E.centre)}},s.setCentre=function(u,p,v){v?(u.positionPrev.x+=p.x,u.positionPrev.y+=p.y,u.position.x+=p.x,u.position.y+=p.y):(u.positionPrev.x=p.x-(u.position.x-u.positionPrev.x),u.positionPrev.y=p.y-(u.position.y-u.positionPrev.y),u.position.x=p.x,u.position.y=p.y)},s.setPosition=function(u,p,v){var m=a.sub(p,u.position);v?(u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.velocity.x=m.x,u.velocity.y=m.y,u.speed=a.magnitude(m)):(u.positionPrev.x+=m.x,u.positionPrev.y+=m.y);for(var g=0;g<u.parts.length;g++){var T=u.parts[g];T.position.x+=m.x,T.position.y+=m.y,l.translate(T.vertices,m),n.update(T.bounds,T.vertices,u.velocity)}},s.setAngle=function(u,p,v){var m=p-u.angle;v?(u.anglePrev=u.angle,u.angularVelocity=m,u.angularSpeed=Math.abs(m)):u.anglePrev+=m;for(var g=0;g<u.parts.length;g++){var T=u.parts[g];T.angle+=m,l.rotate(T.vertices,m,u.position),h.rotate(T.axes,m),n.update(T.bounds,T.vertices,u.velocity),g>0&&a.rotateAbout(T.position,m,u.position,T.position)}},s.setVelocity=function(u,p){var v=u.deltaTime/s._baseDelta;u.positionPrev.x=u.position.x-p.x*v,u.positionPrev.y=u.position.y-p.y*v,u.velocity.x=(u.position.x-u.positionPrev.x)/v,u.velocity.y=(u.position.y-u.positionPrev.y)/v,u.speed=a.magnitude(u.velocity)},s.getVelocity=function(u){var p=s._baseDelta/u.deltaTime;return{x:(u.position.x-u.positionPrev.x)*p,y:(u.position.y-u.positionPrev.y)*p}},s.getSpeed=function(u){return a.magnitude(s.getVelocity(u))},s.setSpeed=function(u,p){s.setVelocity(u,a.mult(a.normalise(s.getVelocity(u)),p))},s.setAngularVelocity=function(u,p){var v=u.deltaTime/s._baseDelta;u.anglePrev=u.angle-p*v,u.angularVelocity=(u.angle-u.anglePrev)/v,u.angularSpeed=Math.abs(u.angularVelocity)},s.getAngularVelocity=function(u){return(u.angle-u.anglePrev)*s._baseDelta/u.deltaTime},s.getAngularSpeed=function(u){return Math.abs(s.getAngularVelocity(u))},s.setAngularSpeed=function(u,p){s.setAngularVelocity(u,i.sign(s.getAngularVelocity(u))*p)},s.translate=function(u,p,v){s.setPosition(u,a.add(u.position,p),v)},s.rotate=function(u,p,v,m){if(!v)s.setAngle(u,u.angle+p,m);else{var g=Math.cos(p),T=Math.sin(p),w=u.position.x-v.x,b=u.position.y-v.y;s.setPosition(u,{x:v.x+(w*g-b*T),y:v.y+(w*T+b*g)},m),s.setAngle(u,u.angle+p,m)}},s.scale=function(u,p,v,m){var g=0,T=0;m=m||u.position;for(var w=0;w<u.parts.length;w++){var b=u.parts[w];b.scale.x=p,b.scale.y=v,l.scale(b.vertices,p,v,m),b.axes=h.fromVertices(b.vertices),b.area=l.area(b.vertices),s.setMass(b,u.density*b.area),l.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),s.setInertia(b,s._inertiaScale*l.inertia(b.vertices,b.mass)),l.translate(b.vertices,{x:b.position.x,y:b.position.y}),w>0&&(g+=b.area,T+=b.inertia),b.position.x=m.x+(b.position.x-m.x)*p,b.position.y=m.y+(b.position.y-m.y)*v,n.update(b.bounds,b.vertices,u.velocity)}u.parts.length>1&&(u.area=g,u.isStatic||(s.setMass(u,u.density*g),s.setInertia(u,T))),u.circleRadius&&(p===v?u.circleRadius*=p:u.circleRadius=null)},s.update=function(u,p){p=(typeof p<"u"?p:16.666666666666668)*u.timeScale;var v=p*p,m=s._timeCorrection?p/(u.deltaTime||p):1,g=1-u.frictionAir*(p/i._baseDelta),T=(u.position.x-u.positionPrev.x)*m,w=(u.position.y-u.positionPrev.y)*m;u.velocity.x=T*g+u.force.x/u.mass*v,u.velocity.y=w*g+u.force.y/u.mass*v,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.position.x+=u.velocity.x,u.position.y+=u.velocity.y,u.deltaTime=p,u.angularVelocity=(u.angle-u.anglePrev)*g*m+u.torque/u.inertia*v,u.anglePrev=u.angle,u.angle+=u.angularVelocity,u.speed=a.magnitude(u.velocity),u.angularSpeed=Math.abs(u.angularVelocity);for(var b=0;b<u.parts.length;b++){var E=u.parts[b];l.translate(E.vertices,u.velocity),b>0&&(E.position.x+=u.velocity.x,E.position.y+=u.velocity.y),u.angularVelocity!==0&&(l.rotate(E.vertices,u.angularVelocity,u.position),h.rotate(E.axes,u.angularVelocity),b>0&&a.rotateAbout(E.position,u.angularVelocity,u.position,E.position)),n.update(E.bounds,E.vertices,u.velocity)}},s.updateVelocities=function(u){var p=s._baseDelta/u.deltaTime,v=u.velocity;v.x=(u.position.x-u.positionPrev.x)*p,v.y=(u.position.y-u.positionPrev.y)*p,u.speed=Math.sqrt(v.x*v.x+v.y*v.y),u.angularVelocity=(u.angle-u.anglePrev)*p,u.angularSpeed=Math.abs(u.angularVelocity)},s.applyForce=function(u,p,v){var m={x:p.x-u.position.x,y:p.y-u.position.y};u.force.x+=v.x,u.force.y+=v.y,u.torque+=m.x*v.y-m.y*v.x},s._totalProperties=function(u){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},v=u.parts.length===1?0:1;v<u.parts.length;v++){var m=u.parts[v],g=m.mass!==1/0?m.mass:1;p.mass+=g,p.area+=m.area,p.inertia+=m.inertia,p.centre=a.add(p.centre,a.mult(m.position,g))}return p.centre=a.div(p.centre,p.mass),p}})()},11299:(o,x,t)=>{var s={};o.exports=s;var l=t(39073),a=t(68758),r=t(84091),i=t(84125);(function(){s.create=function(n){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},s.setModified=function(n,h,d,u){if(l.trigger(n,"compositeModified",n),n.isModified=h,h&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),d&&n.parent&&s.setModified(n.parent,h,d,u),u)for(var p=0;p<n.composites.length;p++){var v=n.composites[p];s.setModified(v,h,d,u)}},s.add=function(n,h){var d=[].concat(h);l.trigger(n,"beforeAdd",{object:h});for(var u=0;u<d.length;u++){var p=d[u];switch(p.type){case"body":if(p.parent!==p){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(n,p);break;case"constraint":s.addConstraint(n,p);break;case"composite":s.addComposite(n,p);break;case"mouseConstraint":s.addConstraint(n,p.constraint);break}}return l.trigger(n,"afterAdd",{object:h}),n},s.remove=function(n,h,d){var u=[].concat(h);l.trigger(n,"beforeRemove",{object:h});for(var p=0;p<u.length;p++){var v=u[p];switch(v.type){case"body":s.removeBody(n,v,d);break;case"constraint":s.removeConstraint(n,v,d);break;case"composite":s.removeComposite(n,v,d);break;case"mouseConstraint":s.removeConstraint(n,v.constraint);break}}return l.trigger(n,"afterRemove",{object:h}),n},s.addComposite=function(n,h){return n.composites.push(h),h.parent=n,s.setModified(n,!0,!0,!1),n},s.removeComposite=function(n,h,d){var u=a.indexOf(n.composites,h);if(u!==-1&&s.removeCompositeAt(n,u),d)for(var p=0;p<n.composites.length;p++)s.removeComposite(n.composites[p],h,!0);return n},s.removeCompositeAt=function(n,h){return n.composites.splice(h,1),s.setModified(n,!0,!0,!1),n},s.addBody=function(n,h){return n.bodies.push(h),s.setModified(n,!0,!0,!1),n},s.removeBody=function(n,h,d){var u=a.indexOf(n.bodies,h);if(u!==-1&&s.removeBodyAt(n,u),d)for(var p=0;p<n.composites.length;p++)s.removeBody(n.composites[p],h,!0);return n},s.removeBodyAt=function(n,h){return n.bodies.splice(h,1),s.setModified(n,!0,!0,!1),n},s.addConstraint=function(n,h){return n.constraints.push(h),s.setModified(n,!0,!0,!1),n},s.removeConstraint=function(n,h,d){var u=a.indexOf(n.constraints,h);if(u!==-1&&s.removeConstraintAt(n,u),d)for(var p=0;p<n.composites.length;p++)s.removeConstraint(n.composites[p],h,!0);return n},s.removeConstraintAt=function(n,h){return n.constraints.splice(h,1),s.setModified(n,!0,!0,!1),n},s.clear=function(n,h,d){if(d)for(var u=0;u<n.composites.length;u++)s.clear(n.composites[u],h,!0);return h?n.bodies=n.bodies.filter(function(p){return p.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,s.setModified(n,!0,!0,!1),n},s.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var h=[].concat(n.bodies),d=0;d<n.composites.length;d++)h=h.concat(s.allBodies(n.composites[d]));return n.cache&&(n.cache.allBodies=h),h},s.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var h=[].concat(n.constraints),d=0;d<n.composites.length;d++)h=h.concat(s.allConstraints(n.composites[d]));return n.cache&&(n.cache.allConstraints=h),h},s.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var h=[].concat(n.composites),d=0;d<n.composites.length;d++)h=h.concat(s.allComposites(n.composites[d]));return n.cache&&(n.cache.allComposites=h),h},s.get=function(n,h,d){var u,p;switch(d){case"body":u=s.allBodies(n);break;case"constraint":u=s.allConstraints(n);break;case"composite":u=s.allComposites(n).concat(n);break}return u?(p=u.filter(function(v){return v.id.toString()===h.toString()}),p.length===0?null:p[0]):null},s.move=function(n,h,d){return s.remove(n,h),s.add(d,h),n},s.rebase=function(n){for(var h=s.allBodies(n).concat(s.allConstraints(n)).concat(s.allComposites(n)),d=0;d<h.length;d++)h[d].id=a.nextId();return n},s.translate=function(n,h,d){for(var u=d?s.allBodies(n):n.bodies,p=0;p<u.length;p++)i.translate(u[p],h);return n},s.rotate=function(n,h,d,u){for(var p=Math.cos(h),v=Math.sin(h),m=u?s.allBodies(n):n.bodies,g=0;g<m.length;g++){var T=m[g],w=T.position.x-d.x,b=T.position.y-d.y;i.setPosition(T,{x:d.x+(w*p-b*v),y:d.y+(w*v+b*p)}),i.rotate(T,h)}return n},s.scale=function(n,h,d,u,p){for(var v=p?s.allBodies(n):n.bodies,m=0;m<v.length;m++){var g=v[m],T=g.position.x-u.x,w=g.position.y-u.y;i.setPosition(g,{x:u.x+T*h,y:u.y+w*d}),i.scale(g,h,d)}return n},s.bounds=function(n){for(var h=s.allBodies(n),d=[],u=0;u<h.length;u+=1){var p=h[u];d.push(p.bounds.min,p.bounds.max)}return r.create(d)}})()},72005:(o,x,t)=>{var s={};o.exports=s;var l=t(11299);(function(){s.create=l.create,s.add=l.add,s.remove=l.remove,s.clear=l.clear,s.addComposite=l.addComposite,s.addBody=l.addBody,s.addConstraint=l.addConstraint})()},63454:(o,x,t)=>{var s={};o.exports=s;var l=t(39745),a=t(70584);(function(){var r=[],i={overlap:0,axis:null},n={overlap:0,axis:null};s.create=function(h,d){return{pair:null,collided:!1,bodyA:h,bodyB:d,parentA:h.parent,parentB:d.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},s.collides=function(h,d,u){if(s._overlapAxes(i,h.vertices,d.vertices,h.axes),i.overlap<=0||(s._overlapAxes(n,d.vertices,h.vertices,d.axes),n.overlap<=0))return null;var p=u&&u.table[a.id(h,d)],v;p?v=p.collision:(v=s.create(h,d),v.collided=!0,v.bodyA=h.id<d.id?h:d,v.bodyB=h.id<d.id?d:h,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent),h=v.bodyA,d=v.bodyB;var m;i.overlap<n.overlap?m=i:m=n;var g=v.normal,T=v.supports,w=m.axis,b=w.x,E=w.y;b*(d.position.x-h.position.x)+E*(d.position.y-h.position.y)<0?(g.x=b,g.y=E):(g.x=-b,g.y=-E),v.tangent.x=-g.y,v.tangent.y=g.x,v.depth=m.overlap,v.penetration.x=g.x*v.depth,v.penetration.y=g.y*v.depth;var A=s._findSupports(h,d,g,1),R=0;if(l.contains(h.vertices,A[0])&&(T[R++]=A[0]),l.contains(h.vertices,A[1])&&(T[R++]=A[1]),R<2){var I=s._findSupports(d,h,g,-1);l.contains(d.vertices,I[0])&&(T[R++]=I[0]),R<2&&l.contains(d.vertices,I[1])&&(T[R++]=I[1])}return R===0&&(T[R++]=A[0]),T.length=R,v},s._overlapAxes=function(h,d,u,p){var v=d.length,m=u.length,g=d[0].x,T=d[0].y,w=u[0].x,b=u[0].y,E=p.length,A=Number.MAX_VALUE,R=0,I,P,M,F,O,D;for(O=0;O<E;O++){var L=p[O],z=L.x,X=L.y,H=g*z+T*X,J=w*z+b*X,G=H,k=J;for(D=1;D<v;D+=1)F=d[D].x*z+d[D].y*X,F>G?G=F:F<H&&(H=F);for(D=1;D<m;D+=1)F=u[D].x*z+u[D].y*X,F>k?k=F:F<J&&(J=F);if(P=G-J,M=k-H,I=P<M?P:M,I<A&&(A=I,R=O,I<=0))break}h.axis=p[R],h.overlap=A},s._projectToAxis=function(h,d,u){for(var p=d[0].x*u.x+d[0].y*u.y,v=p,m=1;m<d.length;m+=1){var g=d[m].x*u.x+d[m].y*u.y;g>v?v=g:g<p&&(p=g)}h.min=p,h.max=v},s._findSupports=function(h,d,u,p){var v=d.vertices,m=v.length,g=h.position.x,T=h.position.y,w=u.x*p,b=u.y*p,E=Number.MAX_VALUE,A,R,I,P,M;for(M=0;M<m;M+=1)R=v[M],P=w*(g-R.x)+b*(T-R.y),P<E&&(E=P,A=R);return I=v[(m+A.index-1)%m],E=w*(g-I.x)+b*(T-I.y),R=v[(A.index+1)%m],w*(g-R.x)+b*(T-R.y)<E?(r[0]=A,r[1]=R,r):(r[0]=A,r[1]=I,r)}})()},17319:o=>{var x={};o.exports=x,function(){x.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}}()},13657:(o,x,t)=>{var s={};o.exports=s;var l=t(68758),a=t(63454);(function(){s.create=function(r){var i={bodies:[],pairs:null};return l.extend(i,r)},s.setBodies=function(r,i){r.bodies=i.slice(0)},s.clear=function(r){r.bodies=[]},s.collisions=function(r){var i=[],n=r.pairs,h=r.bodies,d=h.length,u=s.canCollide,p=a.collides,v,m;for(h.sort(s._compareBoundsX),v=0;v<d;v++){var g=h[v],T=g.bounds,w=g.bounds.max.x,b=g.bounds.max.y,E=g.bounds.min.y,A=g.isStatic||g.isSleeping,R=g.parts.length,I=R===1;for(m=v+1;m<d;m++){var P=h[m],M=P.bounds;if(M.min.x>w)break;if(!(b<M.min.y||E>M.max.y)&&!(A&&(P.isStatic||P.isSleeping))&&u(g.collisionFilter,P.collisionFilter)){var F=P.parts.length;if(I&&F===1){var O=p(g,P,n);O&&i.push(O)}else for(var D=R>1?1:0,L=F>1?1:0,z=D;z<R;z++)for(var X=g.parts[z],T=X.bounds,H=L;H<F;H++){var J=P.parts[H],M=J.bounds;if(!(T.min.x>M.max.x||T.max.x<M.min.x||T.max.y<M.min.y||T.min.y>M.max.y)){var O=p(X,J,n);O&&i.push(O)}}}}}return i},s.canCollide=function(r,i){return r.group===i.group&&r.group!==0?r.group>0:(r.mask&i.category)!==0&&(i.mask&r.category)!==0},s._compareBoundsX=function(r,i){return r.bounds.min.x-i.bounds.min.x}})()},70584:(o,x,t)=>{var s={};o.exports=s;var l=t(17319);(function(){s.create=function(a,r){var i=a.bodyA,n=a.bodyB,h={id:s.id(i,n),bodyA:i,bodyB:n,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:i.isSensor||n.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(h,a,r),h},s.update=function(a,r,i){var n=a.contacts,h=r.supports,d=a.activeContacts,u=r.parentA,p=r.parentB,v=u.vertices.length;a.isActive=!0,a.timeUpdated=i,a.collision=r,a.separation=r.depth,a.inverseMass=u.inverseMass+p.inverseMass,a.friction=u.friction<p.friction?u.friction:p.friction,a.frictionStatic=u.frictionStatic>p.frictionStatic?u.frictionStatic:p.frictionStatic,a.restitution=u.restitution>p.restitution?u.restitution:p.restitution,a.slop=u.slop>p.slop?u.slop:p.slop,r.pair=a,d.length=0;for(var m=0;m<h.length;m++){var g=h[m],T=g.body===u?g.index:v+g.index,w=n[T];w?d.push(w):d.push(n[T]=l.create(g))}},s.setActive=function(a,r,i){r?(a.isActive=!0,a.timeUpdated=i):(a.isActive=!1,a.activeContacts.length=0)},s.id=function(a,r){return a.id<r.id?"A"+a.id+"B"+r.id:"A"+r.id+"B"+a.id}})()},91327:(o,x,t)=>{var s={};o.exports=s;var l=t(70584),a=t(68758);(function(){s.create=function(r){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},s.update=function(r,i,n){var h=r.list,d=h.length,u=r.table,p=i.length,v=r.collisionStart,m=r.collisionEnd,g=r.collisionActive,T,w,b,E;for(v.length=0,m.length=0,g.length=0,E=0;E<d;E++)h[E].confirmedActive=!1;for(E=0;E<p;E++)T=i[E],b=T.pair,b?(b.isActive?g.push(b):v.push(b),l.update(b,T,n),b.confirmedActive=!0):(b=l.create(T,n),u[b.id]=b,v.push(b),h.push(b));var A=[];for(d=h.length,E=0;E<d;E++)b=h[E],b.confirmedActive||(l.setActive(b,!1,n),m.push(b),!b.collision.bodyA.isSleeping&&!b.collision.bodyB.isSleeping&&A.push(E));for(E=0;E<A.length;E++)w=A[E]-E,b=h[w],h.splice(w,1),delete u[b.id]},s.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()},13390:(o,x,t)=>{var s={};o.exports=s;var l=t(10438),a=t(63454),r=t(84091),i=t(68516),n=t(39745);(function(){s.collides=function(h,d){for(var u=[],p=d.length,v=h.bounds,m=a.collides,g=r.overlaps,T=0;T<p;T++){var w=d[T],b=w.parts.length,E=b===1?0:1;if(h!==w&&g(w.bounds,v))for(var A=E;A<b;A++){var R=w.parts[A];if(g(R.bounds,v)){var I=m(R,h);if(I){u.push(I);break}}}}return u},s.ray=function(h,d,u,p){p=p||1e-100;for(var v=l.angle(d,u),m=l.magnitude(l.sub(d,u)),g=(u.x+d.x)*.5,T=(u.y+d.y)*.5,w=i.rectangle(g,T,m,p,{angle:v}),b=s.collides(w,h),E=0;E<b.length;E+=1){var A=b[E];A.body=A.bodyB=A.bodyA}return b},s.region=function(h,d,u){for(var p=[],v=0;v<h.length;v++){var m=h[v],g=r.overlaps(m.bounds,d);(g&&!u||!g&&u)&&p.push(m)}return p},s.point=function(h,d){for(var u=[],p=0;p<h.length;p++){var v=h[p];if(r.contains(v.bounds,d))for(var m=v.parts.length===1?0:1;m<v.parts.length;m++){var g=v.parts[m];if(r.contains(g.bounds,d)&&n.contains(g.vertices,d)){u.push(v);break}}}return u}})()},44272:(o,x,t)=>{var s={};o.exports=s;var l=t(39745),a=t(68758),r=t(84091);(function(){s._restingThresh=2,s._restingThreshTangent=Math.sqrt(6),s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s._frictionMaxStatic=Number.MAX_VALUE,s.preSolvePosition=function(i){var n,h,d,u=i.length;for(n=0;n<u;n++)h=i[n],h.isActive&&(d=h.activeContacts.length,h.collision.parentA.totalContacts+=d,h.collision.parentB.totalContacts+=d)},s.solvePosition=function(i,n,h){var d,u,p,v,m,g,T,w,b=s._positionDampen*(h||1),E=a.clamp(n/a._baseDelta,0,1),A=i.length;for(d=0;d<A;d++)u=i[d],!(!u.isActive||u.isSensor)&&(p=u.collision,v=p.parentA,m=p.parentB,g=p.normal,u.separation=g.x*(m.positionImpulse.x+p.penetration.x-v.positionImpulse.x)+g.y*(m.positionImpulse.y+p.penetration.y-v.positionImpulse.y));for(d=0;d<A;d++)u=i[d],!(!u.isActive||u.isSensor)&&(p=u.collision,v=p.parentA,m=p.parentB,g=p.normal,w=u.separation-u.slop*E,(v.isStatic||m.isStatic)&&(w*=2),v.isStatic||v.isSleeping||(T=b/v.totalContacts,v.positionImpulse.x+=g.x*w*T,v.positionImpulse.y+=g.y*w*T),m.isStatic||m.isSleeping||(T=b/m.totalContacts,m.positionImpulse.x-=g.x*w*T,m.positionImpulse.y-=g.y*w*T))},s.postSolvePosition=function(i){for(var n=s._positionWarming,h=i.length,d=l.translate,u=r.update,p=0;p<h;p++){var v=i[p],m=v.positionImpulse,g=m.x,T=m.y,w=v.velocity;if(v.totalContacts=0,g!==0||T!==0){for(var b=0;b<v.parts.length;b++){var E=v.parts[b];d(E.vertices,m),u(E.bounds,E.vertices,w),E.position.x+=g,E.position.y+=T}v.positionPrev.x+=g,v.positionPrev.y+=T,g*w.x+T*w.y<0?(m.x=0,m.y=0):(m.x*=n,m.y*=n)}}},s.preSolveVelocity=function(i){var n=i.length,h,d;for(h=0;h<n;h++){var u=i[h];if(!(!u.isActive||u.isSensor)){var p=u.activeContacts,v=p.length,m=u.collision,g=m.parentA,T=m.parentB,w=m.normal,b=m.tangent;for(d=0;d<v;d++){var E=p[d],A=E.vertex,R=E.normalImpulse,I=E.tangentImpulse;if(R!==0||I!==0){var P=w.x*R+b.x*I,M=w.y*R+b.y*I;g.isStatic||g.isSleeping||(g.positionPrev.x+=P*g.inverseMass,g.positionPrev.y+=M*g.inverseMass,g.anglePrev+=g.inverseInertia*((A.x-g.position.x)*M-(A.y-g.position.y)*P)),T.isStatic||T.isSleeping||(T.positionPrev.x-=P*T.inverseMass,T.positionPrev.y-=M*T.inverseMass,T.anglePrev-=T.inverseInertia*((A.x-T.position.x)*M-(A.y-T.position.y)*P))}}}}},s.solveVelocity=function(i,n){var h=n/a._baseDelta,d=h*h,u=d*h,p=-s._restingThresh*h,v=s._restingThreshTangent,m=s._frictionNormalMultiplier*h,g=s._frictionMaxStatic,T=i.length,w,b,E,A;for(E=0;E<T;E++){var R=i[E];if(!(!R.isActive||R.isSensor)){var I=R.collision,P=I.parentA,M=I.parentB,F=P.velocity,O=M.velocity,D=I.normal.x,L=I.normal.y,z=I.tangent.x,X=I.tangent.y,H=R.activeContacts,J=H.length,G=1/J,k=P.inverseMass+M.inverseMass,N=R.friction*R.frictionStatic*m;for(F.x=P.position.x-P.positionPrev.x,F.y=P.position.y-P.positionPrev.y,O.x=M.position.x-M.positionPrev.x,O.y=M.position.y-M.positionPrev.y,P.angularVelocity=P.angle-P.anglePrev,M.angularVelocity=M.angle-M.anglePrev,A=0;A<J;A++){var B=H[A],U=B.vertex,W=U.x-P.position.x,K=U.y-P.position.y,q=U.x-M.position.x,_=U.y-M.position.y,rt=F.x-K*P.angularVelocity,ft=F.y+W*P.angularVelocity,vt=O.x-_*M.angularVelocity,mt=O.y+q*M.angularVelocity,yt=rt-vt,xt=ft-mt,It=D*yt+L*xt,Gt=z*yt+X*xt,Zt=R.separation+It,Bt=Math.min(Zt,1);Bt=Zt<0?0:Bt;var At=Bt*N;Gt<-At||Gt>At?(b=Gt>0?Gt:-Gt,w=R.friction*(Gt>0?1:-1)*u,w<-b?w=-b:w>b&&(w=b)):(w=Gt,b=g);var kt=W*L-K*D,Ut=q*L-_*D,ee=G/(k+P.inverseInertia*kt*kt+M.inverseInertia*Ut*Ut),te=(1+R.restitution)*It*ee;if(w*=ee,It<p)B.normalImpulse=0;else{var fe=B.normalImpulse;B.normalImpulse+=te,B.normalImpulse>0&&(B.normalImpulse=0),te=B.normalImpulse-fe}if(Gt<-v||Gt>v)B.tangentImpulse=0;else{var ae=B.tangentImpulse;B.tangentImpulse+=w,B.tangentImpulse<-b&&(B.tangentImpulse=-b),B.tangentImpulse>b&&(B.tangentImpulse=b),w=B.tangentImpulse-ae}var le=D*te+z*w,re=L*te+X*w;P.isStatic||P.isSleeping||(P.positionPrev.x+=le*P.inverseMass,P.positionPrev.y+=re*P.inverseMass,P.anglePrev+=(W*re-K*le)*P.inverseInertia),M.isStatic||M.isSleeping||(M.positionPrev.x-=le*M.inverseMass,M.positionPrev.y-=re*M.inverseMass,M.anglePrev-=(q*re-_*le)*M.inverseInertia)}}}}})()},52838:(o,x,t)=>{var s={};o.exports=s;var l=t(39745),a=t(10438),r=t(22806),i=t(84091),n=t(50658),h=t(68758);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(d){var u=d;u.bodyA&&!u.pointA&&(u.pointA={x:0,y:0}),u.bodyB&&!u.pointB&&(u.pointB={x:0,y:0});var p=u.bodyA?a.add(u.bodyA.position,u.pointA):u.pointA,v=u.bodyB?a.add(u.bodyB.position,u.pointB):u.pointB,m=a.magnitude(a.sub(p,v));u.length=typeof u.length<"u"?u.length:m,u.id=u.id||h.nextId(),u.label=u.label||"Constraint",u.type="constraint",u.stiffness=u.stiffness||(u.length>0?1:.7),u.damping=u.damping||0,u.angularStiffness=u.angularStiffness||0,u.angleA=u.bodyA?u.bodyA.angle:u.angleA,u.angleB=u.bodyB?u.bodyB.angle:u.angleB,u.plugin={};var g={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return u.length===0&&u.stiffness>.1?(g.type="pin",g.anchors=!1):u.stiffness<.9&&(g.type="spring"),u.render=h.extend(g,u.render),u},s.preSolveAll=function(d){for(var u=0;u<d.length;u+=1){var p=d[u],v=p.constraintImpulse;p.isStatic||v.x===0&&v.y===0&&v.angle===0||(p.position.x+=v.x,p.position.y+=v.y,p.angle+=v.angle)}},s.solveAll=function(d,u){for(var p=h.clamp(u/h._baseDelta,0,1),v=0;v<d.length;v+=1){var m=d[v],g=!m.bodyA||m.bodyA&&m.bodyA.isStatic,T=!m.bodyB||m.bodyB&&m.bodyB.isStatic;(g||T)&&s.solve(d[v],p)}for(v=0;v<d.length;v+=1)m=d[v],g=!m.bodyA||m.bodyA&&m.bodyA.isStatic,T=!m.bodyB||m.bodyB&&m.bodyB.isStatic,!g&&!T&&s.solve(d[v],p)},s.solve=function(d,u){var p=d.bodyA,v=d.bodyB,m=d.pointA,g=d.pointB;if(!(!p&&!v)){p&&!p.isStatic&&(a.rotate(m,p.angle-d.angleA,m),d.angleA=p.angle),v&&!v.isStatic&&(a.rotate(g,v.angle-d.angleB,g),d.angleB=v.angle);var T=m,w=g;if(p&&(T=a.add(p.position,m)),v&&(w=a.add(v.position,g)),!(!T||!w)){var b=a.sub(T,w),E=a.magnitude(b);E<s._minLength&&(E=s._minLength);var A=(E-d.length)/E,R=d.stiffness>=1||d.length===0,I=R?d.stiffness*u:d.stiffness*u*u,P=d.damping*u,M=a.mult(b,A*I),F=(p?p.inverseMass:0)+(v?v.inverseMass:0),O=(p?p.inverseInertia:0)+(v?v.inverseInertia:0),D=F+O,L,z,X,H,J;if(P>0){var G=a.create();X=a.div(b,E),J=a.sub(v&&a.sub(v.position,v.positionPrev)||G,p&&a.sub(p.position,p.positionPrev)||G),H=a.dot(X,J)}p&&!p.isStatic&&(z=p.inverseMass/F,p.constraintImpulse.x-=M.x*z,p.constraintImpulse.y-=M.y*z,p.position.x-=M.x*z,p.position.y-=M.y*z,P>0&&(p.positionPrev.x-=P*X.x*H*z,p.positionPrev.y-=P*X.y*H*z),L=a.cross(m,M)/D*s._torqueDampen*p.inverseInertia*(1-d.angularStiffness),p.constraintImpulse.angle-=L,p.angle-=L),v&&!v.isStatic&&(z=v.inverseMass/F,v.constraintImpulse.x+=M.x*z,v.constraintImpulse.y+=M.y*z,v.position.x+=M.x*z,v.position.y+=M.y*z,P>0&&(v.positionPrev.x+=P*X.x*H*z,v.positionPrev.y+=P*X.y*H*z),L=a.cross(g,M)/D*s._torqueDampen*v.inverseInertia*(1-d.angularStiffness),v.constraintImpulse.angle+=L,v.angle+=L)}}},s.postSolveAll=function(d){for(var u=0;u<d.length;u++){var p=d[u],v=p.constraintImpulse;if(!(p.isStatic||v.x===0&&v.y===0&&v.angle===0)){r.set(p,!1);for(var m=0;m<p.parts.length;m++){var g=p.parts[m];l.translate(g.vertices,v),m>0&&(g.position.x+=v.x,g.position.y+=v.y),v.angle!==0&&(l.rotate(g.vertices,v.angle,p.position),n.rotate(g.axes,v.angle),m>0&&a.rotateAbout(g.position,v.angle,p.position,g.position)),i.update(g.bounds,g.vertices,p.velocity)}v.angle*=s._warming,v.x*=s._warming,v.y*=s._warming}}},s.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),y:(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0)}},s.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),y:(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0)}},s.currentLength=function(d){var u=(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),p=(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0),v=(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),m=(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0),g=u-v,T=p-m;return Math.sqrt(g*g+T*T)}})()},68758:(o,x,t)=>{var s={};o.exports=s,function(){s._baseDelta=16.666666666666668,s._nextId=0,s._seed=0,s._nowStartTime=+new Date,s._warnedOnce={},s._decomp=null,s.extend=function(a,r){var i,n;typeof r=="boolean"?(i=2,n=r):(i=1,n=!0);for(var h=i;h<arguments.length;h++){var d=arguments[h];if(d)for(var u in d)n&&d[u]&&d[u].constructor===Object&&(!a[u]||a[u].constructor===Object)?(a[u]=a[u]||{},s.extend(a[u],n,d[u])):a[u]=d[u]}return a},s.clone=function(a,r){return s.extend({},r,a)},s.keys=function(a){if(Object.keys)return Object.keys(a);var r=[];for(var i in a)r.push(i);return r},s.values=function(a){var r=[];if(Object.keys){for(var i=Object.keys(a),n=0;n<i.length;n++)r.push(a[i[n]]);return r}for(var h in a)r.push(a[h]);return r},s.get=function(a,r,i,n){r=r.split(".").slice(i,n);for(var h=0;h<r.length;h+=1)a=a[r[h]];return a},s.set=function(a,r,i,n,h){var d=r.split(".").slice(n,h);return s.get(a,r,0,-1)[d[d.length-1]]=i,i},s.shuffle=function(a){for(var r=a.length-1;r>0;r--){var i=Math.floor(s.random()*(r+1)),n=a[r];a[r]=a[i],a[i]=n}return a},s.choose=function(a){return a[Math.floor(s.random()*a.length)]},s.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},s.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},s.isFunction=function(a){return typeof a=="function"},s.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},s.isString=function(a){return toString.call(a)==="[object String]"},s.clamp=function(a,r,i){return a<r?r:a>i?i:a},s.sign=function(a){return a<0?-1:1},s.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-s._nowStartTime},s.random=function(a,r){return a=typeof a<"u"?a:0,r=typeof r<"u"?r:1,a+l()*(r-a)};var l=function(){return s._seed=(s._seed*9301+49297)%233280,s._seed/233280};s.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},s.logLevel=1,s.log=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.info=function(){console&&s.logLevel>0&&s.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warn=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");s._warnedOnce[a]||(s.warn(a),s._warnedOnce[a]=!0)},s.deprecated=function(a,r,i){a[r]=s.chain(function(){s.warnOnce(" deprecated ",i)},a[r])},s.nextId=function(){return s._nextId++},s.indexOf=function(a,r){if(a.indexOf)return a.indexOf(r);for(var i=0;i<a.length;i++)if(a[i]===r)return i;return-1},s.map=function(a,r){if(a.map)return a.map(r);for(var i=[],n=0;n<a.length;n+=1)i.push(r(a[n]));return i},s.topologicalSort=function(a){var r=[],i=[],n=[];for(var h in a)!i[h]&&!n[h]&&s._topologicalSort(h,i,n,a,r);return r},s._topologicalSort=function(a,r,i,n,h){var d=n[a]||[];i[a]=!0;for(var u=0;u<d.length;u+=1){var p=d[u];i[p]||r[p]||s._topologicalSort(p,r,i,n,h)}i[a]=!1,r[a]=!0,h.push(a)},s.chain=function(){for(var a=[],r=0;r<arguments.length;r+=1){var i=arguments[r];i._chained?a.push.apply(a,i._chained):a.push(i)}var n=function(){for(var h,d=new Array(arguments.length),u=0,p=arguments.length;u<p;u++)d[u]=arguments[u];for(u=0;u<a.length;u+=1){var v=a[u].apply(h,d);typeof v<"u"&&(h=v)}return h};return n._chained=a,n},s.chainPathBefore=function(a,r,i){return s.set(a,r,s.chain(i,s.get(a,r)))},s.chainPathAfter=function(a,r,i){return s.set(a,r,s.chain(s.get(a,r),i))},s.setDecomp=function(a){s._decomp=a},s.getDecomp=function(){var a=s._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof t.g<"u"&&(a=t.g.decomp)}catch{a=null}return a}}()},45775:(o,x,t)=>{var s={};o.exports=s;var l=t(22806),a=t(44272),r=t(13657),i=t(91327),n=t(39073),h=t(11299),d=t(52838),u=t(68758),p=t(84125);(function(){s.create=function(v){v=v||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},g=u.extend(m,v);return g.world=v.world||h.create({label:"World"}),g.pairs=v.pairs||i.create(),g.detector=v.detector||r.create(),g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},s.update=function(v,m){var g=u.now(),T=v.world,w=v.detector,b=v.pairs,E=v.timing,A=E.timestamp,R;m=typeof m<"u"?m:u._baseDelta,m*=E.timeScale,E.timestamp+=m,E.lastDelta=m;var I={timestamp:E.timestamp,delta:m};n.trigger(v,"beforeUpdate",I);var P=h.allBodies(T),M=h.allConstraints(T);for(T.isModified&&(r.setBodies(w,P),h.setModified(T,!1,!1,!0)),v.enableSleeping&&l.update(P,m),s._bodiesApplyGravity(P,v.gravity),m>0&&s._bodiesUpdate(P,m),n.trigger(v,"beforeSolve",I),d.preSolveAll(P),R=0;R<v.constraintIterations;R++)d.solveAll(M,m);d.postSolveAll(P),w.pairs=v.pairs;var F=r.collisions(w);i.update(b,F,A),v.enableSleeping&&l.afterCollisions(b.list),b.collisionStart.length>0&&n.trigger(v,"collisionStart",{pairs:b.collisionStart,timestamp:E.timestamp,delta:m});var O=u.clamp(20/v.positionIterations,0,1);for(a.preSolvePosition(b.list),R=0;R<v.positionIterations;R++)a.solvePosition(b.list,m,O);for(a.postSolvePosition(P),d.preSolveAll(P),R=0;R<v.constraintIterations;R++)d.solveAll(M,m);for(d.postSolveAll(P),a.preSolveVelocity(b.list),R=0;R<v.velocityIterations;R++)a.solveVelocity(b.list,m);return s._bodiesUpdateVelocities(P),b.collisionActive.length>0&&n.trigger(v,"collisionActive",{pairs:b.collisionActive,timestamp:E.timestamp,delta:m}),b.collisionEnd.length>0&&n.trigger(v,"collisionEnd",{pairs:b.collisionEnd,timestamp:E.timestamp,delta:m}),s._bodiesClearForces(P),n.trigger(v,"afterUpdate",I),v.timing.lastElapsed=u.now()-g,v},s.merge=function(v,m){if(u.extend(v,m),m.world){v.world=m.world,s.clear(v);for(var g=h.allBodies(v.world),T=0;T<g.length;T++){var w=g[T];l.set(w,!1),w.id=u.nextId()}}},s.clear=function(v){i.clear(v.pairs),r.clear(v.detector)},s._bodiesClearForces=function(v){for(var m=v.length,g=0;g<m;g++){var T=v[g];T.force.x=0,T.force.y=0,T.torque=0}},s._bodiesApplyGravity=function(v,m){var g=typeof m.scale<"u"?m.scale:.001,T=v.length;if(!(m.x===0&&m.y===0||g===0))for(var w=0;w<T;w++){var b=v[w];b.ignoreGravity||b.isStatic||b.isSleeping||(b.force.y+=b.mass*m.y*g,b.force.x+=b.mass*m.x*g)}},s._bodiesUpdate=function(v,m){for(var g=v.length,T=0;T<g;T++){var w=v[T];w.isStatic||w.isSleeping||p.update(w,m)}},s._bodiesUpdateVelocities=function(v){for(var m=v.length,g=0;g<m;g++)p.updateVelocities(v[g])}})()},39073:(o,x,t)=>{var s={};o.exports=s;var l=t(68758);(function(){s.on=function(a,r,i){for(var n=r.split(" "),h,d=0;d<n.length;d++)h=n[d],a.events=a.events||{},a.events[h]=a.events[h]||[],a.events[h].push(i);return i},s.off=function(a,r,i){if(!r){a.events={};return}typeof r=="function"&&(i=r,r=l.keys(a.events).join(" "));for(var n=r.split(" "),h=0;h<n.length;h++){var d=a.events[n[h]],u=[];if(i&&d)for(var p=0;p<d.length;p++)d[p]!==i&&u.push(d[p]);a.events[n[h]]=u}},s.trigger=function(a,r,i){var n,h,d,u,p=a.events;if(p&&l.keys(p).length>0){i||(i={}),n=r.split(" ");for(var v=0;v<n.length;v++)if(h=n[v],d=p[h],d){u=l.clone(i,!1),u.name=h,u.source=a;for(var m=0;m<d.length;m++)d[m].apply(a,[u])}}}})()},16929:(o,x,t)=>{var s={};o.exports=s;var l=t(84474),a=t(68758);(function(){s.name="matter-js",s.version="0.19.0",s.uses=[],s.used=[],s.use=function(){l.use(s,Array.prototype.slice.call(arguments))},s.before=function(r,i){return r=r.replace(/^Matter./,""),a.chainPathBefore(s,r,i)},s.after=function(r,i){return r=r.replace(/^Matter./,""),a.chainPathAfter(s,r,i)}})()},84474:(o,x,t)=>{var s={};o.exports=s;var l=t(68758);(function(){s._registry={},s.register=function(a){if(s.isPlugin(a)||l.warn("Plugin.register:",s.toString(a),"does not implement all required fields."),a.name in s._registry){var r=s._registry[a.name],i=s.versionParse(a.version).number,n=s.versionParse(r.version).number;i>n?(l.warn("Plugin.register:",s.toString(r),"was upgraded to",s.toString(a)),s._registry[a.name]=a):i<n?l.warn("Plugin.register:",s.toString(r),"can not be downgraded to",s.toString(a)):a!==r&&l.warn("Plugin.register:",s.toString(a),"is already registered to different plugin object")}else s._registry[a.name]=a;return a},s.resolve=function(a){return s._registry[s.dependencyParse(a).name]},s.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},s.isPlugin=function(a){return a&&a.name&&a.version&&a.install},s.isUsed=function(a,r){return a.used.indexOf(r)>-1},s.isFor=function(a,r){var i=a.for&&s.dependencyParse(a.for);return!a.for||r.name===i.name&&s.versionSatisfies(r.version,i.range)},s.use=function(a,r){if(a.uses=(a.uses||[]).concat(r||[]),a.uses.length===0){l.warn("Plugin.use:",s.toString(a),"does not specify any dependencies to install.");return}for(var i=s.dependencies(a),n=l.topologicalSort(i),h=[],d=0;d<n.length;d+=1)if(n[d]!==a.name){var u=s.resolve(n[d]);if(!u){h.push(" "+n[d]);continue}s.isUsed(a,u.name)||(s.isFor(u,a)||(l.warn("Plugin.use:",s.toString(u),"is for",u.for,"but installed on",s.toString(a)+"."),u._warned=!0),u.install?u.install(a):(l.warn("Plugin.use:",s.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(h.push(" "+s.toString(u)),delete u._warned):h.push(" "+s.toString(u)),a.used.push(u.name))}h.length>0&&!u.silent&&l.info(h.join("  "))},s.dependencies=function(a,r){var i=s.dependencyParse(a),n=i.name;if(r=r||{},!(n in r)){a=s.resolve(a)||a,r[n]=l.map(a.uses||[],function(d){s.isPlugin(d)&&s.register(d);var u=s.dependencyParse(d),p=s.resolve(d);return p&&!s.versionSatisfies(p.version,u.range)?(l.warn("Plugin.dependencies:",s.toString(p),"does not satisfy",s.toString(u),"used by",s.toString(i)+"."),p._warned=!0,a._warned=!0):p||(l.warn("Plugin.dependencies:",s.toString(d),"used by",s.toString(i),"could not be resolved."),a._warned=!0),u.name});for(var h=0;h<r[n].length;h+=1)s.dependencies(r[n][h],r);return r}},s.dependencyParse=function(a){if(l.isString(a)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(a)||l.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},s.versionParse=function(a){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(a)||l.warn("Plugin.versionParse:",a,"is not a valid version or range.");var i=r.exec(a),n=Number(i[4]),h=Number(i[5]),d=Number(i[6]);return{isRange:!!(i[1]||i[2]),version:i[3],range:a,operator:i[1]||i[2]||"",major:n,minor:h,patch:d,parts:[n,h,d],prerelease:i[7],number:n*1e8+h*1e4+d}},s.versionSatisfies=function(a,r){r=r||"*";var i=s.versionParse(r),n=s.versionParse(a);if(i.isRange){if(i.operator==="*"||a==="*")return!0;if(i.operator===">")return n.number>i.number;if(i.operator===">=")return n.number>=i.number;if(i.operator==="~")return n.major===i.major&&n.minor===i.minor&&n.patch>=i.patch;if(i.operator==="^")return i.major>0?n.major===i.major&&n.number>=i.number:i.minor>0?n.minor===i.minor&&n.patch>=i.patch:n.patch===i.patch}return a===r||a==="*"}})()},22806:(o,x,t)=>{var s={};o.exports=s;var l=t(84125),a=t(39073),r=t(68758);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(i,n){for(var h=n/r._baseDelta,d=s._motionSleepThreshold,u=0;u<i.length;u++){var p=i[u],v=l.getSpeed(p),m=l.getAngularSpeed(p),g=v*v+m*m;if(p.force.x!==0||p.force.y!==0){s.set(p,!1);continue}var T=Math.min(p.motion,g),w=Math.max(p.motion,g);p.motion=s._minBias*T+(1-s._minBias)*w,p.sleepThreshold>0&&p.motion<d?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/h&&s.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},s.afterCollisions=function(i){for(var n=s._motionSleepThreshold,h=0;h<i.length;h++){var d=i[h];if(d.isActive){var u=d.collision,p=u.bodyA.parent,v=u.bodyB.parent;if(!(p.isSleeping&&v.isSleeping||p.isStatic||v.isStatic)&&(p.isSleeping||v.isSleeping)){var m=p.isSleeping&&!p.isStatic?p:v,g=m===p?v:p;!m.isStatic&&g.motion>n&&s.set(m,!1)}}}},s.set=function(i,n){var h=i.isSleeping;n?(i.isSleeping=!0,i.sleepCounter=i.sleepThreshold,i.positionImpulse.x=0,i.positionImpulse.y=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.speed=0,i.angularSpeed=0,i.motion=0,h||a.trigger(i,"sleepStart")):(i.isSleeping=!1,i.sleepCounter=0,h&&a.trigger(i,"sleepEnd"))}})()},68516:(o,x,t)=>{var s={};o.exports=s;var l=t(39745),a=t(68758),r=t(84125),i=t(84091),n=t(10438);(function(){s.rectangle=function(h,d,u,p,v){v=v||{};var m={label:"Rectangle Body",position:{x:h,y:d},vertices:l.fromPath("L 0 0 L "+u+" 0 L "+u+" "+p+" L 0 "+p)};if(v.chamfer){var g=v.chamfer;m.vertices=l.chamfer(m.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete v.chamfer}return r.create(a.extend({},m,v))},s.trapezoid=function(h,d,u,p,v,m){m=m||{},v*=.5;var g=(1-v*2)*u,T=u*v,w=T+g,b=w+T,E;v<.5?E="L 0 0 L "+T+" "+-p+" L "+w+" "+-p+" L "+b+" 0":E="L 0 0 L "+w+" "+-p+" L "+b+" 0";var A={label:"Trapezoid Body",position:{x:h,y:d},vertices:l.fromPath(E)};if(m.chamfer){var R=m.chamfer;A.vertices=l.chamfer(A.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete m.chamfer}return r.create(a.extend({},A,m))},s.circle=function(h,d,u,p,v){p=p||{};var m={label:"Circle Body",circleRadius:u};v=v||25;var g=Math.ceil(Math.max(10,Math.min(v,u)));return g%2===1&&(g+=1),s.polygon(h,d,g,u,a.extend({},m,p))},s.polygon=function(h,d,u,p,v){if(v=v||{},u<3)return s.circle(h,d,p,v);for(var m=2*Math.PI/u,g="",T=m*.5,w=0;w<u;w+=1){var b=T+w*m,E=Math.cos(b)*p,A=Math.sin(b)*p;g+="L "+E.toFixed(3)+" "+A.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:h,y:d},vertices:l.fromPath(g)};if(v.chamfer){var I=v.chamfer;R.vertices=l.chamfer(R.vertices,I.radius,I.quality,I.qualityMin,I.qualityMax),delete v.chamfer}return r.create(a.extend({},R,v))},s.fromVertices=function(h,d,u,p,v,m,g,T){var w=a.getDecomp(),b,E,A,R,I,P,M,F,O,D,L;for(b=!!(w&&w.quickDecomp),p=p||{},A=[],v=typeof v<"u"?v:!1,m=typeof m<"u"?m:.01,g=typeof g<"u"?g:10,T=typeof T<"u"?T:.01,a.isArray(u[0])||(u=[u]),D=0;D<u.length;D+=1)if(P=u[D],R=l.isConvex(P),I=!R,I&&!b&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!b)R?P=l.clockwiseSort(P):P=l.hull(P),A.push({position:{x:h,y:d},vertices:P});else{var z=P.map(function(q){return[q.x,q.y]});w.makeCCW(z),m!==!1&&w.removeCollinearPoints(z,m),T!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(z,T);var X=w.quickDecomp(z);for(M=0;M<X.length;M++){var H=X[M],J=H.map(function(q){return{x:q[0],y:q[1]}});g>0&&l.area(J)<g||A.push({position:l.centre(J),vertices:J})}}for(M=0;M<A.length;M++)A[M]=r.create(a.extend(A[M],p));if(v){var G=5;for(M=0;M<A.length;M++){var k=A[M];for(F=M+1;F<A.length;F++){var N=A[F];if(i.overlaps(k.bounds,N.bounds)){var B=k.vertices,U=N.vertices;for(O=0;O<k.vertices.length;O++)for(L=0;L<N.vertices.length;L++){var W=n.magnitudeSquared(n.sub(B[(O+1)%B.length],U[L])),K=n.magnitudeSquared(n.sub(B[O],U[(L+1)%U.length]));W<G&&K<G&&(B[O].isInternal=!0,U[L].isInternal=!0)}}}}}return A.length>1?(E=r.create(a.extend({parts:A.slice(0)},p)),r.setPosition(E,{x:h,y:d}),E):A[0]},s.flagCoincidentParts=function(h,d){d===void 0&&(d=5);for(var u=0;u<h.length;u++)for(var p=h[u],v=u+1;v<h.length;v++){var m=h[v];if(i.overlaps(p.bounds,m.bounds))for(var g=p.vertices,T=m.vertices,w=0;w<p.vertices.length;w++)for(var b=0;b<m.vertices.length;b++){var E=n.magnitudeSquared(n.sub(g[(w+1)%g.length],T[b])),A=n.magnitudeSquared(n.sub(g[w],T[(b+1)%T.length]));E<d&&A<d&&(g[w].isInternal=!0,T[b].isInternal=!0)}}return h}})()},56643:(o,x,t)=>{var s={};o.exports=s;var l=t(11299),a=t(52838),r=t(68758),i=t(84125),n=t(68516);(function(){s.stack=function(h,d,u,p,v,m,g){for(var T=l.create({label:"Stack"}),w=h,b=d,E,A=0,R=0;R<p;R++){for(var I=0,P=0;P<u;P++){var M=g(w,b,P,R,E,A);if(M){var F=M.bounds.max.y-M.bounds.min.y,O=M.bounds.max.x-M.bounds.min.x;F>I&&(I=F),i.translate(M,{x:O*.5,y:F*.5}),w=M.bounds.max.x+v,l.addBody(T,M),E=M,A+=1}else w+=v}b+=I+m,w=h}return T},s.chain=function(h,d,u,p,v,m){for(var g=h.bodies,T=1;T<g.length;T++){var w=g[T-1],b=g[T],E=w.bounds.max.y-w.bounds.min.y,A=w.bounds.max.x-w.bounds.min.x,R=b.bounds.max.y-b.bounds.min.y,I=b.bounds.max.x-b.bounds.min.x,P={bodyA:w,pointA:{x:A*d,y:E*u},bodyB:b,pointB:{x:I*p,y:R*v}},M=r.extend(P,m);l.addConstraint(h,a.create(M))}return h.label+=" Chain",h},s.mesh=function(h,d,u,p,v){var m=h.bodies,g,T,w,b,E;for(g=0;g<u;g++){for(T=1;T<d;T++)w=m[T-1+g*d],b=m[T+g*d],l.addConstraint(h,a.create(r.extend({bodyA:w,bodyB:b},v)));if(g>0)for(T=0;T<d;T++)w=m[T+(g-1)*d],b=m[T+g*d],l.addConstraint(h,a.create(r.extend({bodyA:w,bodyB:b},v))),p&&T>0&&(E=m[T-1+(g-1)*d],l.addConstraint(h,a.create(r.extend({bodyA:E,bodyB:b},v)))),p&&T<d-1&&(E=m[T+1+(g-1)*d],l.addConstraint(h,a.create(r.extend({bodyA:E,bodyB:b},v))))}return h.label+=" Mesh",h},s.pyramid=function(h,d,u,p,v,m,g){return s.stack(h,d,u,p,v,m,function(T,w,b,E,A,R){var I=Math.min(p,Math.ceil(u/2)),P=A?A.bounds.max.x-A.bounds.min.x:0;if(!(E>I)){E=I-E;var M=E,F=u-1-E;if(!(b<M||b>F)){R===1&&i.translate(A,{x:(b+(u%2===1?1:-1))*P,y:0});var O=A?b*P:0;return g(h+O+b*v,w,b,E,A,R)}}})},s.newtonsCradle=function(h,d,u,p,v){for(var m=l.create({label:"Newtons Cradle"}),g=0;g<u;g++){var T=1.9,w=n.circle(h+g*(p*T),d+v,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),b=a.create({pointA:{x:h+g*(p*T),y:d},bodyB:w});l.addBody(m,w),l.addConstraint(m,b)}return m},s.car=function(h,d,u,p,v){var m=i.nextGroup(!0),g=20,T=-u*.5+g,w=u*.5-g,b=0,E=l.create({label:"Car"}),A=n.rectangle(h,d,u,p,{collisionFilter:{group:m},chamfer:{radius:p*.5},density:2e-4}),R=n.circle(h+T,d+b,v,{collisionFilter:{group:m},friction:.8}),I=n.circle(h+w,d+b,v,{collisionFilter:{group:m},friction:.8}),P=a.create({bodyB:A,pointB:{x:T,y:b},bodyA:R,stiffness:1,length:0}),M=a.create({bodyB:A,pointB:{x:w,y:b},bodyA:I,stiffness:1,length:0});return l.addBody(E,A),l.addBody(E,R),l.addBody(E,I),l.addConstraint(E,P),l.addConstraint(E,M),E},s.softBody=function(h,d,u,p,v,m,g,T,w,b){w=r.extend({inertia:1/0},w),b=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},b);var E=s.stack(h,d,u,p,v,m,function(A,R){return n.circle(A,R,T,w)});return s.mesh(E,u,p,g,b),E.label="Soft Body",E}})()},50658:(o,x,t)=>{var s={};o.exports=s;var l=t(10438),a=t(68758);(function(){s.fromVertices=function(r){for(var i={},n=0;n<r.length;n++){var h=(n+1)%r.length,d=l.normalise({x:r[h].y-r[n].y,y:r[n].x-r[h].x}),u=d.y===0?1/0:d.x/d.y;u=u.toFixed(3).toString(),i[u]=d}return a.values(i)},s.rotate=function(r,i){if(i!==0)for(var n=Math.cos(i),h=Math.sin(i),d=0;d<r.length;d++){var u=r[d],p;p=u.x*n-u.y*h,u.y=u.x*h+u.y*n,u.x=p}}})()},84091:o=>{var x={};o.exports=x,function(){x.create=function(t){var s={min:{x:0,y:0},max:{x:0,y:0}};return t&&x.update(s,t),s},x.update=function(t,s,l){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var a=0;a<s.length;a++){var r=s[a];r.x>t.max.x&&(t.max.x=r.x),r.x<t.min.x&&(t.min.x=r.x),r.y>t.max.y&&(t.max.y=r.y),r.y<t.min.y&&(t.min.y=r.y)}l&&(l.x>0?t.max.x+=l.x:t.min.x+=l.x,l.y>0?t.max.y+=l.y:t.min.y+=l.y)},x.contains=function(t,s){return s.x>=t.min.x&&s.x<=t.max.x&&s.y>=t.min.y&&s.y<=t.max.y},x.overlaps=function(t,s){return t.min.x<=s.max.x&&t.max.x>=s.min.x&&t.max.y>=s.min.y&&t.min.y<=s.max.y},x.translate=function(t,s){t.min.x+=s.x,t.max.x+=s.x,t.min.y+=s.y,t.max.y+=s.y},x.shift=function(t,s){var l=t.max.x-t.min.x,a=t.max.y-t.min.y;t.min.x=s.x,t.max.x=s.x+l,t.min.y=s.y,t.max.y=s.y+a}}()},92765:(o,x,t)=>{var s={};o.exports=s,t(84091);var l=t(68758);(function(){s.pathToVertices=function(a,r){typeof window<"u"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,n,h,d,u,p,v,m,g,T,w=[],b,E,A=0,R=0,I=0;r=r||15;var P=function(F,O,D){var L=D%2===1&&D>1;if(!g||F!=g.x||O!=g.y){g&&L?(b=g.x,E=g.y):(b=0,E=0);var z={x:b+F,y:E+O};(L||!g)&&(g=z),w.push(z),R=b+F,I=E+O}},M=function(F){var O=F.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":R=F.x,I=F.y;break;case"H":R=F.x;break;case"V":I=F.y;break}P(R,I,F.pathSegType)}};for(s._svgPathToAbsolute(a),h=a.getTotalLength(),p=[],i=0;i<a.pathSegList.numberOfItems;i+=1)p.push(a.pathSegList.getItem(i));for(v=p.concat();A<h;){if(T=a.getPathSegAtLength(A),u=p[T],u!=m){for(;v.length&&v[0]!=u;)M(v.shift());m=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=a.getPointAtLength(A),P(d.x,d.y,0);break}A+=r}for(i=0,n=v.length;i<n;++i)M(v[i]);return w},s._svgPathToAbsolute=function(a){for(var r,i,n,h,d,u,p=a.pathSegList,v=0,m=0,g=p.numberOfItems,T=0;T<g;++T){var w=p.getItem(T),b=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(b))"x"in w&&(v=w.x),"y"in w&&(m=w.y);else switch("x1"in w&&(n=v+w.x1),"x2"in w&&(d=v+w.x2),"y1"in w&&(h=m+w.y1),"y2"in w&&(u=m+w.y2),"x"in w&&(v+=w.x),"y"in w&&(m+=w.y),b){case"m":p.replaceItem(a.createSVGPathSegMovetoAbs(v,m),T);break;case"l":p.replaceItem(a.createSVGPathSegLinetoAbs(v,m),T);break;case"h":p.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(v),T);break;case"v":p.replaceItem(a.createSVGPathSegLinetoVerticalAbs(m),T);break;case"c":p.replaceItem(a.createSVGPathSegCurvetoCubicAbs(v,m,n,h,d,u),T);break;case"s":p.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(v,m,d,u),T);break;case"q":p.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(v,m,n,h),T);break;case"t":p.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(v,m),T);break;case"a":p.replaceItem(a.createSVGPathSegArcAbs(v,m,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),T);break;case"z":case"Z":v=r,m=i;break}(b=="M"||b=="m")&&(r=v,i=m)}}})()},10438:o=>{var x={};o.exports=x,function(){x.create=function(t,s){return{x:t||0,y:s||0}},x.clone=function(t){return{x:t.x,y:t.y}},x.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},x.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},x.rotate=function(t,s,l){var a=Math.cos(s),r=Math.sin(s);l||(l={});var i=t.x*a-t.y*r;return l.y=t.x*r+t.y*a,l.x=i,l},x.rotateAbout=function(t,s,l,a){var r=Math.cos(s),i=Math.sin(s);a||(a={});var n=l.x+((t.x-l.x)*r-(t.y-l.y)*i);return a.y=l.y+((t.x-l.x)*i+(t.y-l.y)*r),a.x=n,a},x.normalise=function(t){var s=x.magnitude(t);return s===0?{x:0,y:0}:{x:t.x/s,y:t.y/s}},x.dot=function(t,s){return t.x*s.x+t.y*s.y},x.cross=function(t,s){return t.x*s.y-t.y*s.x},x.cross3=function(t,s,l){return(s.x-t.x)*(l.y-t.y)-(s.y-t.y)*(l.x-t.x)},x.add=function(t,s,l){return l||(l={}),l.x=t.x+s.x,l.y=t.y+s.y,l},x.sub=function(t,s,l){return l||(l={}),l.x=t.x-s.x,l.y=t.y-s.y,l},x.mult=function(t,s){return{x:t.x*s,y:t.y*s}},x.div=function(t,s){return{x:t.x/s,y:t.y/s}},x.perp=function(t,s){return s=s===!0?-1:1,{x:s*-t.y,y:s*t.x}},x.neg=function(t){return{x:-t.x,y:-t.y}},x.angle=function(t,s){return Math.atan2(s.y-t.y,s.x-t.x)},x._temp=[x.create(),x.create(),x.create(),x.create(),x.create(),x.create()]}()},39745:(o,x,t)=>{var s={};o.exports=s;var l=t(10438),a=t(68758);(function(){s.create=function(r,i){for(var n=[],h=0;h<r.length;h++){var d=r[h],u={x:d.x,y:d.y,index:h,body:i,isInternal:!1};n.push(u)}return n},s.fromPath=function(r,i){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,h=[];return r.replace(n,function(d,u,p){h.push({x:parseFloat(u),y:parseFloat(p)})}),s.create(h,i)},s.centre=function(r){for(var i=s.area(r,!0),n={x:0,y:0},h,d,u,p=0;p<r.length;p++)u=(p+1)%r.length,h=l.cross(r[p],r[u]),d=l.mult(l.add(r[p],r[u]),h),n=l.add(n,d);return l.div(n,6*i)},s.mean=function(r){for(var i={x:0,y:0},n=0;n<r.length;n++)i.x+=r[n].x,i.y+=r[n].y;return l.div(i,r.length)},s.area=function(r,i){for(var n=0,h=r.length-1,d=0;d<r.length;d++)n+=(r[h].x-r[d].x)*(r[h].y+r[d].y),h=d;return i?n/2:Math.abs(n)/2},s.inertia=function(r,i){for(var n=0,h=0,d=r,u,p,v=0;v<d.length;v++)p=(v+1)%d.length,u=Math.abs(l.cross(d[p],d[v])),n+=u*(l.dot(d[p],d[p])+l.dot(d[p],d[v])+l.dot(d[v],d[v])),h+=u;return i/6*(n/h)},s.translate=function(r,i,n){n=typeof n<"u"?n:1;var h=r.length,d=i.x*n,u=i.y*n,p;for(p=0;p<h;p++)r[p].x+=d,r[p].y+=u;return r},s.rotate=function(r,i,n){if(i!==0){var h=Math.cos(i),d=Math.sin(i),u=n.x,p=n.y,v=r.length,m,g,T,w;for(w=0;w<v;w++)m=r[w],g=m.x-u,T=m.y-p,m.x=u+(g*h-T*d),m.y=p+(g*d+T*h);return r}},s.contains=function(r,i){for(var n=i.x,h=i.y,d=r.length,u=r[d-1],p,v=0;v<d;v++){if(p=r[v],(n-u.x)*(p.y-u.y)+(h-u.y)*(u.x-p.x)>0)return!1;u=p}return!0},s.scale=function(r,i,n,h){if(i===1&&n===1)return r;h=h||s.centre(r);for(var d,u,p=0;p<r.length;p++)d=r[p],u=l.sub(d,h),r[p].x=h.x+u.x*i,r[p].y=h.y+u.y*n;return r},s.chamfer=function(r,i,n,h,d){typeof i=="number"?i=[i]:i=i||[8],n=typeof n<"u"?n:-1,h=h||2,d=d||14;for(var u=[],p=0;p<r.length;p++){var v=r[p-1>=0?p-1:r.length-1],m=r[p],g=r[(p+1)%r.length],T=i[p<i.length?p:i.length-1];if(T===0){u.push(m);continue}var w=l.normalise({x:m.y-v.y,y:v.x-m.x}),b=l.normalise({x:g.y-m.y,y:m.x-g.x}),E=Math.sqrt(2*Math.pow(T,2)),A=l.mult(a.clone(w),T),R=l.normalise(l.mult(l.add(w,b),.5)),I=l.sub(m,l.mult(R,E)),P=n;n===-1&&(P=Math.pow(T,.32)*1.75),P=a.clamp(P,h,d),P%2===1&&(P+=1);for(var M=Math.acos(l.dot(w,b)),F=M/P,O=0;O<P;O++)u.push(l.add(l.rotate(A,F*O),I))}return u},s.clockwiseSort=function(r){var i=s.mean(r);return r.sort(function(n,h){return l.angle(i,n)-l.angle(i,h)}),r},s.isConvex=function(r){var i=0,n=r.length,h,d,u,p;if(n<3)return null;for(h=0;h<n;h++)if(d=(h+1)%n,u=(h+2)%n,p=(r[d].x-r[h].x)*(r[u].y-r[d].y),p-=(r[d].y-r[h].y)*(r[u].x-r[d].x),p<0?i|=1:p>0&&(i|=2),i===3)return!1;return i!==0?!0:null},s.hull=function(r){var i=[],n=[],h,d;for(r=r.slice(0),r.sort(function(u,p){var v=u.x-p.x;return v!==0?v:u.y-p.y}),d=0;d<r.length;d+=1){for(h=r[d];n.length>=2&&l.cross3(n[n.length-2],n[n.length-1],h)<=0;)n.pop();n.push(h)}for(d=r.length-1;d>=0;d-=1){for(h=r[d];i.length>=2&&l.cross3(i[i.length-2],i[i.length-1],h)<=0;)i.pop();i.push(h)}return i.pop(),n.pop(),i.concat(n)}})()},1675:(o,x,t)=>{var s=t(18171),l={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(a){a.after("Body.create",function(){l.Body.init(this)}),a.before("Engine.update",function(r){l.Engine.update(r)})},Body:{init:function(a){a.plugin.attractors=a.plugin.attractors||[]}},Engine:{update:function(a){for(var r=s.Composite.allBodies(a.world),i=0;i<r.length;i++){var n=r[i],h=n.plugin.attractors;if(h&&h.length>0)for(var d=0;d<r.length;d++){var u=r[d];if(i!==d)for(var p=0;p<h.length;p++){var v=h[p],m=v;s.Common.isFunction(v)&&(m=v(n,u)),m&&s.Body.applyForce(u,u.position,m)}}}}},Attractors:{gravityConstant:.001,gravity:function(a,r){var i=s.Vector.sub(r.position,a.position),n=s.Vector.magnitudeSquared(i)||1e-4,h=s.Vector.normalise(i),d=-l.Attractors.gravityConstant*(a.mass*r.mass/n),u=s.Vector.mult(h,d);s.Body.applyForce(a,a.position,s.Vector.neg(u)),s.Body.applyForce(r,r.position,u)}}};o.exports=l},80391:o=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(t){t.after("Engine.create",function(){t.Events.on(this,"collisionStart",function(s){s.pairs.map(function(l){var a=l.bodyA,r=l.bodyB;a.gameObject&&a.gameObject.emit("collide",a,r,l),r.gameObject&&r.gameObject.emit("collide",r,a,l),t.Events.trigger(a,"onCollide",{pair:l}),t.Events.trigger(r,"onCollide",{pair:l}),a.onCollideCallback&&a.onCollideCallback(l),r.onCollideCallback&&r.onCollideCallback(l),a.onCollideWith[r.id]&&a.onCollideWith[r.id](r,l),r.onCollideWith[a.id]&&r.onCollideWith[a.id](a,l)})}),t.Events.on(this,"collisionActive",function(s){s.pairs.map(function(l){var a=l.bodyA,r=l.bodyB;a.gameObject&&a.gameObject.emit("collideActive",a,r,l),r.gameObject&&r.gameObject.emit("collideActive",r,a,l),t.Events.trigger(a,"onCollideActive",{pair:l}),t.Events.trigger(r,"onCollideActive",{pair:l}),a.onCollideActiveCallback&&a.onCollideActiveCallback(l),r.onCollideActiveCallback&&r.onCollideActiveCallback(l)})}),t.Events.on(this,"collisionEnd",function(s){s.pairs.map(function(l){var a=l.bodyA,r=l.bodyB;a.gameObject&&a.gameObject.emit("collideEnd",a,r,l),r.gameObject&&r.gameObject.emit("collideEnd",r,a,l),t.Events.trigger(a,"onCollideEnd",{pair:l}),t.Events.trigger(r,"onCollideEnd",{pair:l}),a.onCollideEndCallback&&a.onCollideEndCallback(l),r.onCollideEndCallback&&r.onCollideEndCallback(l)})})})}};o.exports=x},44097:(o,x,t)=>{var s=t(18171),l={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(a){a.after("Engine.update",function(){l.Engine.update(this)})},Engine:{update:function(a){for(var r=a.world,i=s.Composite.allBodies(r),n=s.Composite.allComposites(r),h=0;h<i.length;h+=1){var d=i[h];d.plugin.wrap&&l.Body.wrap(d,d.plugin.wrap)}for(h=0;h<n.length;h+=1){var u=n[h];u.plugin.wrap&&l.Composite.wrap(u,u.plugin.wrap)}}},Bounds:{wrap:function(a,r){var i=null,n=null;if(typeof r.min.x<"u"&&typeof r.max.x<"u"&&(a.min.x>r.max.x?i=r.min.x-a.max.x:a.max.x<r.min.x&&(i=r.max.x-a.min.x)),typeof r.min.y<"u"&&typeof r.max.y<"u"&&(a.min.y>r.max.y?n=r.min.y-a.max.y:a.max.y<r.min.y&&(n=r.max.y-a.min.y)),i!==null||n!==null)return{x:i||0,y:n||0}}},Body:{wrap:function(a,r){var i=l.Bounds.wrap(a.bounds,r);return i&&s.Body.translate(a,i),i}},Composite:{bounds:function(a){for(var r=s.Composite.allBodies(a),i=[],n=0;n<r.length;n+=1){var h=r[n];i.push(h.bounds.min,h.bounds.max)}return s.Bounds.create(i)},wrap:function(a,r){var i=l.Bounds.wrap(l.Composite.bounds(a),r);return i&&s.Composite.translate(a,i),i}}};o.exports=l},81084:o=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={decomp:M,quickDecomp:L,isSimple:O,removeCollinearPoints:z,removeDuplicatePoints:X,makeCCW:g};function x(G,k,N){N=N||0;var B=[0,0],U,W,K,q,_,rt,ft;return U=G[1][1]-G[0][1],W=G[0][0]-G[1][0],K=U*G[0][0]+W*G[0][1],q=k[1][1]-k[0][1],_=k[0][0]-k[1][0],rt=q*k[0][0]+_*k[0][1],ft=U*_-q*W,H(ft,0,N)||(B[0]=(_*K-W*rt)/ft,B[1]=(U*rt-q*K)/ft),B}function t(G,k,N,B){var U=k[0]-G[0],W=k[1]-G[1],K=B[0]-N[0],q=B[1]-N[1];if(K*W-q*U===0)return!1;var _=(U*(N[1]-G[1])+W*(G[0]-N[0]))/(K*W-q*U),rt=(K*(G[1]-N[1])+q*(N[0]-G[0]))/(q*U-K*W);return _>=0&&_<=1&&rt>=0&&rt<=1}function s(G,k,N){return(k[0]-G[0])*(N[1]-G[1])-(N[0]-G[0])*(k[1]-G[1])}function l(G,k,N){return s(G,k,N)>0}function a(G,k,N){return s(G,k,N)>=0}function r(G,k,N){return s(G,k,N)<0}function i(G,k,N){return s(G,k,N)<=0}var n=[],h=[];function d(G,k,N,B){if(B){var U=n,W=h;U[0]=k[0]-G[0],U[1]=k[1]-G[1],W[0]=N[0]-k[0],W[1]=N[1]-k[1];var K=U[0]*W[0]+U[1]*W[1],q=Math.sqrt(U[0]*U[0]+U[1]*U[1]),_=Math.sqrt(W[0]*W[0]+W[1]*W[1]),rt=Math.acos(K/(q*_));return rt<B}else return s(G,k,N)===0}function u(G,k){var N=k[0]-G[0],B=k[1]-G[1];return N*N+B*B}function p(G,k){var N=G.length;return G[k<0?k%N+N:k%N]}function v(G){G.length=0}function m(G,k,N,B){for(var U=N;U<B;U++)G.push(k[U])}function g(G){for(var k=0,N=G,B=1;B<G.length;++B)(N[B][1]<N[k][1]||N[B][1]===N[k][1]&&N[B][0]>N[k][0])&&(k=B);return l(p(G,k-1),p(G,k),p(G,k+1))?!1:(T(G),!0)}function T(G){for(var k=[],N=G.length,B=0;B!==N;B++)k.push(G.pop());for(var B=0;B!==N;B++)G[B]=k[B]}function w(G,k){return r(p(G,k-1),p(G,k),p(G,k+1))}var b=[],E=[];function A(G,k,N){var B,U,W=b,K=E;if(a(p(G,k+1),p(G,k),p(G,N))&&i(p(G,k-1),p(G,k),p(G,N)))return!1;U=u(p(G,k),p(G,N));for(var q=0;q!==G.length;++q)if(!((q+1)%G.length===k||q===k)&&a(p(G,k),p(G,N),p(G,q+1))&&i(p(G,k),p(G,N),p(G,q))&&(W[0]=p(G,k),W[1]=p(G,N),K[0]=p(G,q),K[1]=p(G,q+1),B=x(W,K),u(p(G,k),B)<U))return!1;return!0}function R(G,k,N){for(var B=0;B!==G.length;++B)if(!(B===k||B===N||(B+1)%G.length===k||(B+1)%G.length===N)&&t(p(G,k),p(G,N),p(G,B),p(G,B+1)))return!1;return!0}function I(G,k,N,B){var U=B||[];if(v(U),k<N)for(var W=k;W<=N;W++)U.push(G[W]);else{for(var W=0;W<=N;W++)U.push(G[W]);for(var W=k;W<G.length;W++)U.push(G[W])}return U}function P(G){for(var k=[],N=[],B=[],U=[],W=Number.MAX_VALUE,K=0;K<G.length;++K)if(w(G,K)){for(var q=0;q<G.length;++q)if(A(G,K,q)){N=P(I(G,K,q,U)),B=P(I(G,q,K,U));for(var _=0;_<B.length;_++)N.push(B[_]);N.length<W&&(k=N,W=N.length,k.push([p(G,K),p(G,q)]))}}return k}function M(G){var k=P(G);return k.length>0?F(G,k):[G]}function F(G,k){if(k.length===0)return[G];if(k instanceof Array&&k.length&&k[0]instanceof Array&&k[0].length===2&&k[0][0]instanceof Array){for(var N=[G],B=0;B<k.length;B++)for(var U=k[B],W=0;W<N.length;W++){var K=N[W],q=F(K,U);if(q){N.splice(W,1),N.push(q[0],q[1]);break}}return N}else{var U=k,B=G.indexOf(U[0]),W=G.indexOf(U[1]);return B!==-1&&W!==-1?[I(G,B,W),I(G,W,B)]:!1}}function O(G){var k=G,N;for(N=0;N<k.length-1;N++)for(var B=0;B<N-1;B++)if(t(k[N],k[N+1],k[B],k[B+1]))return!1;for(N=1;N<k.length-2;N++)if(t(k[0],k[k.length-1],k[N],k[N+1]))return!1;return!0}function D(G,k,N,B,U){U=U||0;var W=k[1]-G[1],K=G[0]-k[0],q=W*G[0]+K*G[1],_=B[1]-N[1],rt=N[0]-B[0],ft=_*N[0]+rt*N[1],vt=W*rt-_*K;return H(vt,0,U)?[0,0]:[(rt*q-K*ft)/vt,(W*ft-_*q)/vt]}function L(G,k,N,B,U,W,K){W=W||100,K=K||0,U=U||25,k=typeof k<"u"?k:[],N=N||[],B=B||[];var q=[0,0],_=[0,0],rt=[0,0],ft=0,vt=0,mt=0,yt=0,xt=0,It=0,Gt=0,Zt=[],Bt=[],At=G,kt=G;if(kt.length<3)return k;if(K++,K>W)return console.warn("quickDecomp: max level ("+W+") reached."),k;for(var Ut=0;Ut<G.length;++Ut)if(w(At,Ut)){N.push(At[Ut]),ft=vt=Number.MAX_VALUE;for(var ee=0;ee<G.length;++ee)l(p(At,Ut-1),p(At,Ut),p(At,ee))&&i(p(At,Ut-1),p(At,Ut),p(At,ee-1))&&(rt=D(p(At,Ut-1),p(At,Ut),p(At,ee),p(At,ee-1)),r(p(At,Ut+1),p(At,Ut),rt)&&(mt=u(At[Ut],rt),mt<vt&&(vt=mt,_=rt,It=ee))),l(p(At,Ut+1),p(At,Ut),p(At,ee+1))&&i(p(At,Ut+1),p(At,Ut),p(At,ee))&&(rt=D(p(At,Ut+1),p(At,Ut),p(At,ee),p(At,ee+1)),l(p(At,Ut-1),p(At,Ut),rt)&&(mt=u(At[Ut],rt),mt<ft&&(ft=mt,q=rt,xt=ee)));if(It===(xt+1)%G.length)rt[0]=(_[0]+q[0])/2,rt[1]=(_[1]+q[1])/2,B.push(rt),Ut<xt?(m(Zt,At,Ut,xt+1),Zt.push(rt),Bt.push(rt),It!==0&&m(Bt,At,It,At.length),m(Bt,At,0,Ut+1)):(Ut!==0&&m(Zt,At,Ut,At.length),m(Zt,At,0,xt+1),Zt.push(rt),Bt.push(rt),m(Bt,At,It,Ut+1));else{if(It>xt&&(xt+=G.length),yt=Number.MAX_VALUE,xt<It)return k;for(var ee=It;ee<=xt;++ee)a(p(At,Ut-1),p(At,Ut),p(At,ee))&&i(p(At,Ut+1),p(At,Ut),p(At,ee))&&(mt=u(p(At,Ut),p(At,ee)),mt<yt&&R(At,Ut,ee)&&(yt=mt,Gt=ee%G.length));Ut<Gt?(m(Zt,At,Ut,Gt+1),Gt!==0&&m(Bt,At,Gt,kt.length),m(Bt,At,0,Ut+1)):(Ut!==0&&m(Zt,At,Ut,kt.length),m(Zt,At,0,Gt+1),m(Bt,At,Gt,Ut+1))}return Zt.length<Bt.length?(L(Zt,k,N,B,U,W,K),L(Bt,k,N,B,U,W,K)):(L(Bt,k,N,B,U,W,K),L(Zt,k,N,B,U,W,K)),k}return k.push(G),k}function z(G,k){for(var N=0,B=G.length-1;G.length>3&&B>=0;--B)d(p(G,B-1),p(G,B),p(G,B+1),k)&&(G.splice(B%G.length,1),N++);return N}function X(G,k){for(var N=G.length-1;N>=1;--N)for(var B=G[N],U=N-1;U>=0;--U)if(J(B,G[U],k)){G.splice(N,1);continue}}function H(G,k,N){return N=N||0,Math.abs(G-k)<=N}function J(G,k,N){return H(G[0],k[0],N)&&H(G[1],k[1],N)}},88257:(o,x,t)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(56694),l=new s({initialize:function(r){this.pluginManager=r,this.game=r.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=l},18360:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};o.exports=x},91963:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={},t={},s={};s.register=function(l,a,r,i){i===void 0&&(i=!1),x[l]={plugin:a,mapping:r,custom:i}},s.registerCustom=function(l,a,r,i){t[l]={plugin:a,mapping:r,data:i}},s.hasCore=function(l){return x.hasOwnProperty(l)},s.hasCustom=function(l){return t.hasOwnProperty(l)},s.getCore=function(l){return x[l]},s.getCustom=function(l){return t[l]},s.getCustomClass=function(l){return t.hasOwnProperty(l)?t[l].plugin:null},s.remove=function(l){x.hasOwnProperty(l)&&delete x[l]},s.removeCustom=function(l){t.hasOwnProperty(l)&&delete t[l]},s.destroyCorePlugins=function(){for(var l in x)x.hasOwnProperty(l)&&delete x[l]},s.destroyCustomPlugins=function(){for(var l in t)t.hasOwnProperty(l)&&delete t[l]},o.exports=s},49274:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(97081),a=t(6659),r=t(76846),i=t(99325),n=t(61286),h=t(72632),d=t(91963),u=t(66458),p=new s({Extends:a,initialize:function(m){a.call(this),this.game=m,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],m.isBooted?this.boot():m.events.once(l.BOOT,this.boot,this)},boot:function(){var v,m,g,T,w,b,E,A=this.game.config,R=A.installGlobalPlugins;for(R=R.concat(this._pendingGlobal),v=0;v<R.length;v++)m=R[v],g=h(m,"key",null),T=h(m,"plugin",null),w=h(m,"start",!1),b=h(m,"mapping",null),E=h(m,"data",null),g&&(T?this.install(g,T,w,b,E):console.warn("Missing `plugin` for key: "+g));for(R=A.installScenePlugins,R=R.concat(this._pendingScene),v=0;v<R.length;v++)m=R[v],g=h(m,"key",null),T=h(m,"plugin",null),b=h(m,"mapping",null),g&&(T?this.installScenePlugin(g,T,b):console.warn("Missing `plugin` for key: "+g));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(l.DESTROY,this.destroy,this)},addToScene:function(v,m,g){var T,w,b,E=this.game,A=v.scene,R=v.settings.map,I=v.settings.isBooted;for(T=0;T<m.length;T++)w=m[T],E[w]?(v[w]=E[w],R.hasOwnProperty(w)&&(A[R[w]]=v[w])):w==="game"&&R.hasOwnProperty(w)&&(A[R[w]]=E);for(var P=0;P<g.length;P++)for(b=g[P],T=0;T<b.length;T++)if(w=b[T],!!d.hasCore(w)){var M=d.getCore(w),F=M.mapping,O=new M.plugin(A,this,F);v[F]=O,M.custom?A[F]=O:R.hasOwnProperty(F)&&(A[R[F]]=O),I&&O.boot()}for(b=this.plugins,T=0;T<b.length;T++){var D=b[T];D.mapping&&(A[D.mapping]=D.plugin)}},getDefaultScenePlugins:function(){var v=this.game.config.defaultPlugins;return v=v.concat(this.scenePlugins),v},installScenePlugin:function(v,m,g,T,w){if(w===void 0&&(w=!1),typeof m!="function"){console.warn("Invalid Scene Plugin: "+v);return}if(d.hasCore(v)||d.register(v,m,g,!0),this.scenePlugins.indexOf(v)===-1)this.scenePlugins.push(v);else if(!w&&d.hasCore(v)){console.warn("Scene Plugin key in use: "+v);return}if(T){var b=new m(T,this,v);T.sys[v]=b,g&&g!==""&&(T[g]=b),b.boot()}},install:function(v,m,g,T,w){if(g===void 0&&(g=!1),T===void 0&&(T=null),w===void 0&&(w=null),typeof m!="function")return console.warn("Invalid Plugin: "+v),null;if(d.hasCustom(v))return console.warn("Plugin key in use: "+v),null;if(T!==null&&(g=!0),!this.game.isBooted)this._pendingGlobal.push({key:v,plugin:m,start:g,mapping:T,data:w});else if(d.registerCustom(v,m,T,w),g)return this.start(v);return null},getIndex:function(v){for(var m=this.plugins,g=0;g<m.length;g++){var T=m[g];if(T.key===v)return g}return-1},getEntry:function(v){var m=this.getIndex(v);if(m!==-1)return this.plugins[m]},isActive:function(v){var m=this.getEntry(v);return m&&m.active},start:function(v,m){m===void 0&&(m=v);var g=this.getEntry(m);return g&&!g.active?(g.active=!0,g.plugin.start()):g||(g=this.createEntry(v,m)),g?g.plugin:null},createEntry:function(v,m){var g=d.getCustom(v);if(g){var T=new g.plugin(this);g={key:m,plugin:T,active:!0,mapping:g.mapping,data:g.data},this.plugins.push(g),T.init(g.data),T.start()}return g},stop:function(v){var m=this.getEntry(v);return m&&m.active&&(m.active=!1,m.plugin.stop()),this},get:function(v,m){m===void 0&&(m=!0);var g=this.getEntry(v);if(g)return g.plugin;var T=this.getClass(v);return T&&m?(g=this.createEntry(v,v),g?g.plugin:null):T||null},getClass:function(v){return d.getCustomClass(v)},removeGlobalPlugin:function(v){var m=this.getEntry(v);m&&u(this.plugins,m),d.removeCustom(v)},removeScenePlugin:function(v){u(this.scenePlugins,v),d.remove(v)},registerGameObject:function(v,m,g){return m&&n.register(v,m),g&&i.register(v,g),this},removeGameObject:function(v,m,g){return m===void 0&&(m=!0),g===void 0&&(g=!0),m&&n.remove(v),g&&i.remove(v),this},registerFileType:function(v,m,g){r.register(v,m),g&&g.sys.load&&(g.sys.load[v]=m)},destroy:function(){for(var v=0;v<this.plugins.length;v++)this.plugins[v].plugin.destroy();d.destroyCustomPlugins(),this.game.noReturn&&d.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});o.exports=p},39283:(o,x,t)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(88257),l=t(56694),a=t(7599),r=new l({Extends:s,initialize:function(n,h,d){s.call(this,h),this.scene=n,this.systems=n.sys,this.pluginKey=d,n.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=r},45615:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BasePlugin:t(88257),DefaultPlugins:t(18360),PluginCache:t(91963),PluginManager:t(49274),ScenePlugin:t(39283)}},75205:()=>{HTMLVideoElement&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(o){const x=performance.now(),t=this.getVideoPlaybackQuality(),s=this.mozPresentedFrames||this.mozPaintedFrames||t.totalVideoFrames-t.droppedVideoFrames,l=(a,r)=>{const i=this.getVideoPlaybackQuality(),n=this.mozPresentedFrames||this.mozPaintedFrames||i.totalVideoFrames-i.droppedVideoFrames;if(n>s){const h=this.mozFrameDelay||i.totalFrameDelay-t.totalFrameDelay||0,d=r-a;o(r,{presentationTime:r+h*1e3,expectedDisplayTime:r+d,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+d/1e3,presentedFrames:n,processingDuration:h}),delete this._rvfcpolyfillmap[x]}else this._rvfcpolyfillmap[x]=requestAnimationFrame(h=>l(r,h))};return this._rvfcpolyfillmap[x]=requestAnimationFrame(a=>l(x,a)),x},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(o){cancelAnimationFrame(this._rvfcpolyfillmap[o]),delete this._rvfcpolyfillmap[o]})},95723:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={DEFAULT:0,LINEAR:0,NEAREST:1};o.exports=x},91135:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89787),l=t(61840),a=t(56694),r=t(86459),i=t(6659),n=t(81044),h=t(32834),d=t(40444),u=t(38203),p=t(69360),v=new a({Extends:i,initialize:function(g){i.call(this);var T=g.config;this.config={clearBeforeRender:T.clearBeforeRender,backgroundColor:T.backgroundColor,antialias:T.antialias,roundPixels:T.roundPixels},this.game=g,this.type=r.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=g.canvas;var w={alpha:g.config.transparent,desynchronized:g.config.desynchronized,willReadFrequently:!1};this.gameContext=T.context?T.context:this.gameCanvas.getContext("2d",w),this.currentContext=this.gameContext,this.antialias=g.config.antialias,this.blendModes=h(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(u.READY,this.boot,this)},boot:function(){var m=this.game,g=m.scale.baseSize;this.width=g.width,this.height=g.height,this.isBooted=!0,m.scale.on(d.RESIZE,this.onResize,this),this.resize(g.width,g.height)},onResize:function(m,g){(g.width!==this.width||g.height!==this.height)&&this.resize(g.width,g.height)},resize:function(m,g){this.width=m,this.height=g,this.emit(n.RESIZE,m,g)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(m){return this.currentContext.globalCompositeOperation=m,this},setContext:function(m){return this.currentContext=m||this.gameContext,this},setAlpha:function(m){return this.currentContext.globalAlpha=m,this},preRender:function(){var m=this.gameContext,g=this.config,T=this.width,w=this.height;m.globalAlpha=1,m.globalCompositeOperation="source-over",m.setTransform(1,0,0,1,0,0),g.clearBeforeRender&&(m.clearRect(0,0,T,w),g.transparent||(m.fillStyle=g.backgroundColor.rgba,m.fillRect(0,0,T,w))),m.save(),this.drawCount=0,this.emit(n.PRE_RENDER)},render:function(m,g,T){var w=g.length;this.emit(n.RENDER,m,T);var b=T.x,E=T.y,A=T.width,R=T.height,I=T.renderToTexture?T.context:m.sys.context;I.save(),this.game.scene.customViewports&&(I.beginPath(),I.rect(b,E,A,R),I.clip()),T.emit(s.PRE_RENDER,T),this.currentContext=I;var P=T.mask;P&&P.preRenderCanvas(this,null,T._maskCamera),T.transparent||(I.fillStyle=T.backgroundColor.rgba,I.fillRect(b,E,A,R)),I.globalAlpha=T.alpha,I.globalCompositeOperation="source-over",this.drawCount+=w,T.renderToTexture&&T.emit(s.PRE_RENDER,T),T.matrix.copyToContext(I);for(var M=0;M<w;M++){var F=g[M];F.mask&&F.mask.preRenderCanvas(this,F,T),F.renderCanvas(this,F,T),F.mask&&F.mask.postRenderCanvas(this,F,T)}I.setTransform(1,0,0,1,0,0),I.globalCompositeOperation="source-over",I.globalAlpha=1,T.flashEffect.postRenderCanvas(I),T.fadeEffect.postRenderCanvas(I),T.dirty=!1,P&&P.postRenderCanvas(this),I.restore(),T.renderToTexture&&(T.emit(s.POST_RENDER,T),T.renderToGame&&m.sys.context.drawImage(T.canvas,b,E)),T.emit(s.POST_RENDER,T)},postRender:function(){var m=this.gameContext;m.restore(),this.emit(n.POST_RENDER);var g=this.snapshotState;g.callback&&(l(this.gameCanvas,g),g.callback=null)},snapshotCanvas:function(m,g,T,w,b,E,A,R,I){T===void 0&&(T=!1),this.snapshotArea(w,b,E,A,g,R,I);var P=this.snapshotState;return P.getPixel=T,l(m,P),P.callback=null,this},snapshot:function(m,g,T){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,m,g,T)},snapshotArea:function(m,g,T,w,b,E,A){var R=this.snapshotState;return R.callback=b,R.type=E,R.encoder=A,R.getPixel=!1,R.x=m,R.y=g,R.width=Math.min(T,this.gameCanvas.width),R.height=Math.min(w,this.gameCanvas.height),this},snapshotPixel:function(m,g,T){return this.snapshotArea(m,g,1,1,T),this.snapshotState.getPixel=!0,this},batchSprite:function(m,g,T,w){var b=T.alpha*m.alpha;if(b!==0){var E=this.currentContext,A=this._tempMatrix1,R=this._tempMatrix2,I=g.canvasData,P=I.x,M=I.y,F=g.cutWidth,O=g.cutHeight,D=g.customPivot,L=g.source.resolution,z=m.displayOriginX,X=m.displayOriginY,H=-z+g.x,J=-X+g.y;if(m.isCropped){var G=m._crop;(G.flipX!==m.flipX||G.flipY!==m.flipY)&&g.updateCropUVs(G,m.flipX,m.flipY),F=G.cw,O=G.ch,P=G.cx,M=G.cy,H=-z+G.x,J=-X+G.y,m.flipX&&(H>=0?H=-(H+F):H<0&&(H=Math.abs(H)-F)),m.flipY&&(J>=0?J=-(J+O):J<0&&(J=Math.abs(J)-O))}var k=1,N=1;m.flipX&&(D||(H+=-g.realWidth+z*2),k=-1),m.flipY&&(D||(J+=-g.realHeight+X*2),N=-1);var B=m.x,U=m.y;R.applyITRS(B,U,m.rotation,m.scaleX*k,m.scaleY*N),A.copyFrom(T.matrix),w?(A.multiplyWithOffset(w,-T.scrollX*m.scrollFactorX,-T.scrollY*m.scrollFactorY),R.e=B,R.f=U):(R.e-=T.scrollX*m.scrollFactorX,R.f-=T.scrollY*m.scrollFactorY),A.multiply(R),T.roundPixels&&(A.e=Math.round(A.e),A.f=Math.round(A.f)),E.save(),A.setToContext(E),E.globalCompositeOperation=this.blendModes[m.blendMode],E.globalAlpha=b,E.imageSmoothingEnabled=!g.source.scaleMode,m.mask&&m.mask.preRenderCanvas(this,m,T),F>0&&O>0&&(T.roundPixels?E.drawImage(g.source.image,P,M,F,O,Math.round(H),Math.round(J),Math.round(F/L),Math.round(O/L)):E.drawImage(g.source.image,P,M,F,O,H,J,F/L,O/L)),m.mask&&m.mask.postRenderCanvas(this,m,T),E.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});o.exports=v},6046:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasRenderer:t(91135),GetBlendModes:t(32834),SetTransform:t(49584)}},32834:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(98581),a=function(){var r=[],i=l.supportNewBlendModes,n="source-over";return r[s.NORMAL]=n,r[s.ADD]="lighter",r[s.MULTIPLY]=i?"multiply":n,r[s.SCREEN]=i?"screen":n,r[s.OVERLAY]=i?"overlay":n,r[s.DARKEN]=i?"darken":n,r[s.LIGHTEN]=i?"lighten":n,r[s.COLOR_DODGE]=i?"color-dodge":n,r[s.COLOR_BURN]=i?"color-burn":n,r[s.HARD_LIGHT]=i?"hard-light":n,r[s.SOFT_LIGHT]=i?"soft-light":n,r[s.DIFFERENCE]=i?"difference":n,r[s.EXCLUSION]=i?"exclusion":n,r[s.HUE]=i?"hue":n,r[s.SATURATION]=i?"saturation":n,r[s.COLOR]=i?"color":n,r[s.LUMINOSITY]=i?"luminosity":n,r[s.ERASE]="destination-out",r[s.SOURCE_IN]="source-in",r[s.SOURCE_OUT]="source-out",r[s.SOURCE_ATOP]="source-atop",r[s.DESTINATION_OVER]="destination-over",r[s.DESTINATION_IN]="destination-in",r[s.DESTINATION_OUT]="destination-out",r[s.DESTINATION_ATOP]="destination-atop",r[s.LIGHTER]="lighter",r[s.COPY]="copy",r[s.XOR]="xor",r};o.exports=a},49584:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n,h){var d=n.alpha*i.alpha;if(d<=0)return!1;var u=s(i,n,h).calc;return r.globalCompositeOperation=a.blendModes[i.blendMode],r.globalAlpha=d,r.save(),u.setToContext(r),r.imageSmoothingEnabled=i.frame?!i.frame.source.scaleMode:a.antialias,!0};o.exports=l},70936:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},99298:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},7743:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"},99519:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"},81044:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={POST_RENDER:t(70936),PRE_RENDER:t(99298),RENDER:t(7743),RESIZE:t(99519)}},42069:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Canvas:t(6046),Events:t(81044),Snapshot:t(95528),WebGL:t(55478)}},61840:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(27119),a=t(72632),r=function(i,n){var h=a(n,"callback"),d=a(n,"type","image/png"),u=a(n,"encoder",.92),p=Math.abs(Math.round(a(n,"x",0))),v=Math.abs(Math.round(a(n,"y",0))),m=Math.floor(a(n,"width",i.width)),g=Math.floor(a(n,"height",i.height)),T=a(n,"getPixel",!1);if(T){var w=i.getContext("2d",{willReadFrequently:!1}),b=w.getImageData(p,v,1,1),E=b.data;h.call(null,new l(E[0],E[1],E[2],E[3]))}else if(p!==0||v!==0||m!==i.width||g!==i.height){var A=s.createWebGL(this,m,g),R=A.getContext("2d",{willReadFrequently:!0});m>0&&g>0&&R.drawImage(i,p,v,m,g,0,0,m,g);var I=new Image;I.onerror=function(){h.call(null),s.remove(A)},I.onload=function(){h.call(null,I),s.remove(A)},I.src=A.toDataURL(d,u)}else{var P=new Image;P.onerror=function(){h.call(null)},P.onload=function(){h.call(null,P)},P.src=i.toDataURL(d,u)}};o.exports=r},1217:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(27119),a=t(72632),r=function(i,n){var h=i,d=a(n,"callback"),u=a(n,"type","image/png"),p=a(n,"encoder",.92),v=Math.abs(Math.round(a(n,"x",0))),m=Math.abs(Math.round(a(n,"y",0))),g=a(n,"getPixel",!1),T=a(n,"isFramebuffer",!1),w=T?a(n,"bufferWidth",1):h.drawingBufferWidth,b=T?a(n,"bufferHeight",1):h.drawingBufferHeight;if(g){var E=new Uint8Array(4),A=T?m:b-m;h.readPixels(v,A,1,1,h.RGBA,h.UNSIGNED_BYTE,E),d.call(null,new l(E[0],E[1],E[2],E[3]))}else{var R=Math.floor(a(n,"width",w)),I=Math.floor(a(n,"height",b)),P=R*I*4,M=new Uint8Array(P);h.readPixels(v,b-m-I,R,I,h.RGBA,h.UNSIGNED_BYTE,M);for(var F=s.createWebGL(this,R,I),O=F.getContext("2d",{willReadFrequently:!0}),D=O.getImageData(0,0,R,I),L=D.data,z=0;z<I;z++)for(var X=0;X<R;X++){var H=((I-z-1)*R+X)*4,J=T?P-(z*R+(R-X))*4:(z*R+X)*4;L[J+0]=M[H+0],L[J+1]=M[H+1],L[J+2]=M[H+2],L[J+3]=M[H+3]}O.putImageData(D,0,0);var G=new Image;G.onerror=function(){d.call(null),s.remove(F)},G.onload=function(){d.call(null,G),s.remove(F)},G.src=F.toDataURL(u,p)}};o.exports=r},95528:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Canvas:t(61840),WebGL:t(1217)}},35217:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(65641),a=t(33885),r=t(77290),i=t(72632),n=t(37410),h=t(82127),d=t(5583),u=t(58136),p=t(47406),v=t(81828),m=t(66901),g=t(71264),T=t(77310),w=t(10919),b=t(21213),E=t(51212),A=t(60848),R=new s({initialize:function(P){this.game=P.game,this.renderer=P,this.classes=new a([[l.UTILITY_PIPELINE,A],[l.MULTI_PIPELINE,T],[l.BITMAPMASK_PIPELINE,d],[l.SINGLE_PIPELINE,E],[l.ROPE_PIPELINE,b],[l.LIGHT_PIPELINE,m],[l.POINTLIGHT_PIPELINE,w],[l.MOBILE_PIPELINE,g]]),this.postPipelineClasses=new a,this.pipelines=new a,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(I,P,M){var F=this.renderer,O=this.renderTargets;this.frameInc=Math.floor(i(I,"frameInc",32));var D=F.width,L=F.height,z=this.game.config.disablePreFX,X=this.game.config.disablePostFX;if(X||this.postPipelineClasses.setAll([[String(p.BARREL),u.Barrel],[String(p.BLOOM),u.Bloom],[String(p.BLUR),u.Blur],[String(p.BOKEH),u.Bokeh],[String(p.CIRCLE),u.Circle],[String(p.COLOR_MATRIX),u.ColorMatrix],[String(p.DISPLACEMENT),u.Displacement],[String(p.GLOW),u.Glow],[String(p.GRADIENT),u.Gradient],[String(p.PIXELATE),u.Pixelate],[String(p.SHADOW),u.Shadow],[String(p.SHINE),u.Shine],[String(p.VIGNETTE),u.Vignette],[String(p.WIPE),u.Wipe]]),!z){this.classes.set(l.FX_PIPELINE,v);for(var H=Math.min(D,L),J=Math.ceil(H/this.frameInc),G=1;G<J;G++){var k=G*this.frameInc;O.push(new n(F,k,k)),O.push(new n(F,k,k)),O.push(new n(F,k,k)),this.maxDimension=k}O.push(new n(F,D,L,1,0,!0,!0)),O.push(new n(F,D,L,1,0,!0,!0)),O.push(new n(F,D,L,1,0,!0,!0))}var N,B,U=this,W=this.game;if(this.classes.each(function(q,_){N=U.add(q,new _({game:W})),q===l.UTILITY_PIPELINE&&(U.UTILITY_PIPELINE=N,U.fullFrame1=N.fullFrame1,U.fullFrame2=N.fullFrame2,U.halfFrame1=N.halfFrame1,U.halfFrame2=N.halfFrame2)}),this.MULTI_PIPELINE=this.get(l.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(l.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(l.MOBILE_PIPELINE),z||(this.FX_PIPELINE=this.get(l.FX_PIPELINE)),I)for(B in I){var K=I[B];N=new K(W),N.name=B,N.isPostFX?this.postPipelineClasses.set(B,K):this.has(B)||(this.classes.set(B,K),this.add(B,N))}this.default=this.get(P),M&&!r.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(I){var P=this.get(I);return P&&(this.default=P),P},add:function(I,P){if(P.isPostFX){console.warn(I+" is a Post Pipeline. Use `addPostPipeline` instead");return}var M=this.pipelines,F=this.renderer;return M.has(I)?console.warn("Pipeline exists: "+I):(P.name=I,P.manager=this,M.set(I,P)),P.hasBooted||P.boot(),F.width!==0&&F.height!==0&&!P.isPreFX&&P.resize(F.width,F.height),P},addPostPipeline:function(I,P){this.postPipelineClasses.has(I)||this.postPipelineClasses.set(I,P)},flush:function(){this.current&&this.current.flush()},has:function(I){var P=this.pipelines;return typeof I=="string"?P.has(I):!!P.contains(I)},get:function(I){var P=this.pipelines;if(typeof I=="string")return P.get(I);if(P.contains(I))return I},getPostPipeline:function(I,P,M){var F=this.postPipelineClasses,O,D="",L=typeof I;if(L==="string"||L==="number"?(O=F.get(I),D=I):L==="function"?(F.contains(I)&&(O=I),D=I.name):L==="object"&&(O=F.get(I.name),D=I.name),O){var z=new O(this.game,M);return z.name=D,P&&(z.gameObject=P),z}},remove:function(I,P,M){P===void 0&&(P=!0),M===void 0&&(M=!0),this.pipelines.delete(I),P&&this.classes.delete(I),M&&this.postPipelineClasses.delete(I)},set:function(I,P,M){if(!I.isPostFX)return this.isCurrent(I,M)||(this.flush(),this.current&&this.current.unbind(),this.current=I,I.bind(M)),I.updateProjectionMatrix(),I.onBind(P),I},preBatch:function(I){if(I.hasPostPipeline){this.flush();for(var P=I.postPipelines,M=P.length-1;M>=0;M--){var F=P[M];F.active&&F.preBatch(I)}}},postBatch:function(I){if(I.hasPostPipeline){this.flush();for(var P=I.postPipelines,M=0;M<P.length;M++){var F=P[M];F.active&&F.postBatch(I)}}},preBatchCamera:function(I){if(I.hasPostPipeline){this.flush();for(var P=I.postPipelines,M=P.length-1;M>=0;M--){var F=P[M];F.active&&F.preBatch(I)}}},postBatchCamera:function(I){if(I.hasPostPipeline){this.flush();for(var P=I.postPipelines,M=0;M<P.length;M++){var F=P[M];F.active&&F.postBatch(I)}}},isCurrent:function(I,P){var M=this.renderer,F=this.current;return F&&!P&&(P=F.currentShader),!(F!==I||P.program!==M.currentProgram)},copyFrame:function(I,P,M,F,O){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(I,P,M,F,O),this},copyToGame:function(I){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(I),this},drawFrame:function(I,P,M,F){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(I,P,M,F),this},blendFrames:function(I,P,M,F,O){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(I,P,M,F,O),this},blendFramesAdditive:function(I,P,M,F,O){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(I,P,M,F,O),this},clearFrame:function(I,P){return this.UTILITY_PIPELINE.clearFrame(I,P),this},blitFrame:function(I,P,M,F,O,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(I,P,M,F,O,D),this},copyFrameRect:function(I,P,M,F,O,D,L,z){return this.UTILITY_PIPELINE.copyFrameRect(I,P,M,F,O,D,L,z),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(I){return this.UTILITY_PIPELINE.bind(I)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(I){I===void 0&&this.previous&&(I=this.previous);var P=this.renderer,M=P.gl;M.disable(M.DEPTH_TEST),M.disable(M.CULL_FACE),P.hasActiveStencilMask()?M.clear(M.DEPTH_BUFFER_BIT):(M.disable(M.STENCIL_TEST),M.clear(M.DEPTH_BUFFER_BIT|M.STENCIL_BUFFER_BIT)),M.viewport(0,0,P.width,P.height),P.currentProgram=null,P.setBlendMode(0,!0);var F=P.vaoExtension;F&&F.bindVertexArrayOES(null);var O=this.pipelines.entries;for(var D in O)O[D].glReset=!0;I&&(this.current=I,I.rebind())},clear:function(){var I=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,I.currentProgram=null,I.setBlendMode(0,!0);var P=I.vaoExtension;P&&P.bindVertexArrayOES(null)},getRenderTarget:function(I){var P=this.renderTargets,M=3;if(I>this.maxDimension)return this.targetIndex=P.length-M,P[this.targetIndex];var F=(h(I,this.frameInc,0,!0)-1)*M;return this.targetIndex=F,P[F]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});o.exports=R},37410:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(81044),a=new s({initialize:function(i,n,h,d,u,p,v,m,g){d===void 0&&(d=1),u===void 0&&(u=0),p===void 0&&(p=!0),v===void 0&&(v=!1),m===void 0&&(m=!0),g===void 0&&(g=!0),this.renderer=i,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=d,this.minFilter=u,this.autoClear=p,this.autoResize=!0,this.hasDepthBuffer=m,this.forceClamp=g,this.resize(n,h),v?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(r){return r&&!this.autoResize?(this.renderer.on(l.RESIZE,this.resize,this),this.autoResize=!0):!r&&this.autoResize&&(this.renderer.off(l.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(r,i){if(r=Math.round(r*this.scale),i=Math.round(i*this.scale),r<=0&&(r=1),i<=0&&(i=1),this.autoResize&&(r!==this.width||i!==this.height)){var n=this.renderer;n.deleteFramebuffer(this.framebuffer),n.deleteTexture(this.texture),this.texture=n.createTextureFromSource(null,r,i,this.minFilter,this.forceClamp),this.framebuffer=n.createFramebuffer(r,i,this.texture,this.hasDepthBuffer),this.width=r,this.height=i}return this},willResize:function(r,i){return r=Math.round(r*this.scale),i=Math.round(i*this.scale),r<=0&&(r=1),i<=0&&(i=1),r!==this.width||i!==this.height},bind:function(r,i,n){r===void 0&&(r=!1);var h=this.renderer;if(r&&h.flush(),i&&n&&this.resize(i,n),h.pushFramebuffer(this.framebuffer,!1,!1),r&&this.adjustViewport(),this.autoClear){var d=this.renderer.gl;d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT)}h.clearStencilMask()},adjustViewport:function(){var r=this.renderer.gl;r.viewport(0,0,this.width,this.height),r.disable(r.SCISSOR_TEST)},clear:function(){var r=this.renderer,i=r.gl;r.pushFramebuffer(this.framebuffer),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),r.popFramebuffer(),r.resetScissor()},unbind:function(r){r===void 0&&(r=!1);var i=this.renderer;return r&&i.flush(),i.popFramebuffer()},destroy:function(){var r=this.renderer;r.off(l.RESIZE,this.resize,this),r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});o.exports=a},75512:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={getTintFromFloats:function(x,t,s,l){var a=(x*255|0)&255,r=(t*255|0)&255,i=(s*255|0)&255,n=(l*255|0)&255;return(n<<24|a<<16|r<<8|i)>>>0},getTintAppendFloatAlpha:function(x,t){var s=(t*255|0)&255;return(s<<24|x)>>>0},getTintAppendFloatAlphaAndSwap:function(x,t){var s=(x>>16|0)&255,l=(x>>8|0)&255,a=(x|0)&255,r=(t*255|0)&255;return(r<<24|a<<16|l<<8|s)>>>0},getFloatsFromUintRGB:function(x){var t=(x>>16|0)&255,s=(x>>8|0)&255,l=(x|0)&255;return[t/255,s/255,l/255]},checkShaderMax:function(x,t){var s=Math.min(16,x.getParameter(x.MAX_TEXTURE_IMAGE_UNITS));return!t||t===-1?s:Math.min(s,t)},parseFragmentShaderMaxTextures:function(x,t){if(!x)return"";for(var s="",l=0;l<t;l++)l>0&&(s+=`
	else `),l<t-1&&(s+="if (outTexId < "+l+".5)"),s+=`
	{`,s+=`
		texture = texture2D(uMainSampler[`+l+"], outTexCoord);",s+=`
	}`;return x=x.replace(/%count%/gi,t.toString()),x.replace(/%forloop%/gi,s)},setGlowQuality:function(x,t,s,l){return s===void 0&&(s=t.config.glowFXQuality),l===void 0&&(l=t.config.glowFXDistance),x=x.replace(/__SIZE__/gi,(1/s/l).toFixed(7)),x=x.replace(/__DIST__/gi,l.toFixed(0)+".0"),x}}},44775:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(28699),a=t(6659),r=t(18970),i=t(72632),n=t(16650),h=t(81044),d=t(37410),u=t(75512),p=t(71305),v=new s({Extends:a,initialize:function(g){a.call(this);var T=g.game,w=T.renderer,b=w.gl;this.name=i(g,"name","WebGLPipeline"),this.game=T,this.renderer=w,this.manager,this.gl=b,this.view=T.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=i(g,"topology",b.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=i(g,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=g,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var m,g=this.gl,T=this.config,w=this.renderer;this.isPostFX||(this.projectionMatrix=new n().identity());var b=this.renderTargets,E=i(T,"renderTarget",!1);typeof E=="boolean"&&E&&(E=1);var A=w.width,R=w.height;if(typeof E=="number")for(m=0;m<E;m++)b.push(new d(w,A,R,1,0,!0));else if(Array.isArray(E))for(m=0;m<E.length;m++){var I=i(E[m],"scale",1),P=i(E[m],"minFilter",0),M=i(E[m],"autoClear",1),F=i(E[m],"width",null),O=i(E[m],"height",F);F?b.push(new d(w,F,O,1,P,M)):b.push(new d(w,A,R,I,P,M))}b.length&&(this.currentRenderTarget=b[0]),this.setShadersFromConfig(T);var D=this.shaders,L=0;for(m=0;m<D.length;m++)D[m].vertexSize>L&&(L=D[m].vertexSize);var z=i(T,"batchSize",w.config.batchSize);this.vertexCapacity=z*6;var X=new ArrayBuffer(this.vertexCapacity*L);this.vertexData=X,this.bytes=new Uint8Array(X),this.vertexViewF32=new Float32Array(X),this.vertexViewU32=new Uint32Array(X);var H=i(T,"vertices",null);for(H?(this.vertexViewF32.set(H),this.vertexBuffer=w.createVertexBuffer(X,g.STATIC_DRAW)):this.vertexBuffer=w.createVertexBuffer(X.byteLength,g.DYNAMIC_DRAW),this.setVertexBuffer(),m=D.length-1;m>=0;m--)D[m].rebind();this.hasBooted=!0,w.on(h.RESIZE,this.resize,this),w.on(h.PRE_RENDER,this.onPreRender,this),w.on(h.RENDER,this.onRender,this),w.on(h.POST_RENDER,this.onPostRender,this),this.emit(r.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(m,g,T){var w=this.renderer;if(m!==this.currentShader||w.currentProgram!==this.currentShader.program){this.flush();var b=this.setVertexBuffer(T);b&&!g&&(g=!0),m.bind(g,!1),this.currentShader=m}return this},getShaderByName:function(m){for(var g=this.shaders,T=0;T<g.length;T++)if(g[T].name===m)return g[T]},setShadersFromConfig:function(m){var g,T=this.shaders,w=this.renderer;for(g=0;g<T.length;g++)T[g].destroy();var b="vertShader",E="fragShader",A="attributes",R=i(m,b,null),I=u.parseFragmentShaderMaxTextures(i(m,E,null),w.maxTextures),P=i(m,A,null),M=i(m,"shaders",[]),F=M.length;if(F===0)R&&I&&(this.shaders=[new p(this,"default",R,I,l(P))]);else{var O=[];for(g=0;g<F;g++){var D=M[g],L,z,X,H;if(typeof D=="string"?(L="default",z=R,X=u.parseFragmentShaderMaxTextures(D,w.maxTextures),H=P):(L=i(D,"name","default"),z=i(D,b,R),X=u.parseFragmentShaderMaxTextures(i(D,E,I),w.maxTextures),H=i(D,A,P)),L==="default"){var J=X.split(`
`),G=J[0].trim();G.indexOf("#define SHADER_NAME")>-1&&(L=G.substring(20))}z&&X&&O.push(new p(this,L,z,X,l(H)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(m){return this.currentBatch={start:this.vertexCount,count:0,texture:[m],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=m,this.batch.push(this.currentBatch),0},addTextureToBatch:function(m){var g=this.currentBatch;g&&(g.texture.push(m),g.unit++,g.maxUnit++)},pushBatch:function(m){if(!this.currentBatch||this.forceZero&&m!==this.currentTexture)return this.createBatch(m);if(m===this.currentTexture)return this.currentUnit;var g=this.currentBatch,T=g.texture.indexOf(m);return T===-1?g.texture.length===this.renderer.maxTextures?this.createBatch(m):(g.unit++,g.maxUnit++,g.texture.push(m),this.currentUnit=g.unit,this.currentTexture=m,g.unit):(this.currentUnit=T,this.currentTexture=m,T)},setGameObject:function(m,g){return g===void 0&&(g=m.frame),this.pushBatch(g.source.glTexture)},shouldFlush:function(m){return m===void 0&&(m=0),this.vertexCount+m>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(m,g){(m!==this.width||g!==this.height)&&this.flush(),this.width=m,this.height=g;for(var T=this.renderTargets,w=0;w<T.length;w++)T[w].resize(m,g);return this.setProjectionMatrix(m,g),this.emit(r.RESIZE,m,g,this),this.onResize(m,g),this},setProjectionMatrix:function(m,g){var T=this.projectionMatrix;if(!T)return this;this.projectionWidth=m,this.projectionHeight=g,T.ortho(0,m,g,0,-1e3,1e3);for(var w=this.shaders,b="uProjectionMatrix",E=0;E<w.length;E++){var A=w[E];A.hasUniform(b)&&(A.resetUniform(b),A.setMatrix4fv(b,!1,T.val,A))}return this},flipProjectionMatrix:function(m){m===void 0&&(m=!0);var g=this.projectionMatrix;if(!g)return this;var T=this.projectionWidth,w=this.projectionHeight;m?g.ortho(0,T,0,w,-1e3,1e3):g.ortho(0,T,w,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,g.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var m=this.renderer.projectionWidth,g=this.renderer.projectionHeight;(this.projectionWidth!==m||this.projectionHeight!==g)&&this.setProjectionMatrix(m,g)}},bind:function(m){if(m===void 0&&(m=this.currentShader),this.glReset)return this.rebind(m);var g=!1,T=this.gl;return T.getParameter(T.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(T.bindBuffer(T.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,g=!0),m.bind(g),this.currentShader=m,this.activeTextures.length=0,this.emit(r.BIND,this,m),this.onActive(m),this},rebind:function(m){this.activeBuffer=null,this.setVertexBuffer();for(var g=this.shaders,T=g.length-1;T>=0;T--){var w=g[T].rebind();(!m||w===m)&&(this.currentShader=w)}return this.activeTextures.length=0,this.emit(r.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(m){if(m===void 0&&(m=this.vertexBuffer),m!==this.activeBuffer){var g=this.gl;return this.gl.bindBuffer(g.ARRAY_BUFFER,m),this.activeBuffer=m,!0}return!1},preBatch:function(m){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(m),this},postBatch:function(m){return this.onDraw(this.currentRenderTarget),this.onPostBatch(m),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(m){if(m===void 0&&(m=!1),this.vertexCount>0){this.emit(r.BEFORE_FLUSH,this,m),this.onBeforeFlush(m);var g=this.gl,T=this.vertexCount,w=this.currentShader.vertexSize,b=this.topology;if(this.active){this.setVertexBuffer(),T===this.vertexCapacity?g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.DYNAMIC_DRAW):g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,T*w));var E,A,R,I=this.batch,P=this.activeTextures;if(this.forceZero)for(P[0]||g.activeTexture(g.TEXTURE0),E=0;E<I.length;E++)A=I[E],R=A.texture[0],P[0]!==R&&(g.bindTexture(g.TEXTURE_2D,R),P[0]=R),g.drawArrays(b,A.start,A.count);else for(E=0;E<I.length;E++){A=I[E];for(var M=0;M<=A.maxUnit;M++)R=A.texture[M],P[M]!==R&&(g.activeTexture(g.TEXTURE0+M),g.bindTexture(g.TEXTURE_2D,R),P[M]=R);g.drawArrays(b,A.start,A.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(r.AFTER_FLUSH,this,m),this.onAfterFlush(m)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(m,g,T,w,b,E,A){var R=this.vertexViewF32,I=this.vertexViewU32,P=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++P]=m,R[++P]=g,R[++P]=T,R[++P]=w,R[++P]=b,R[++P]=E,I[++P]=A,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(m,g,T,w,b,E,A,R,I,P,M,F,O,D,L,z,X,H,J,G){G===void 0&&(G=this.currentUnit);var k=!1;this.shouldFlush(6)&&(this.flush(),k=!0),this.currentBatch||(G=this.setTexture2D(J));var N=this.vertexViewF32,B=this.vertexViewU32,U=this.vertexCount*this.currentShader.vertexComponentCount-1;return N[++U]=g,N[++U]=T,N[++U]=P,N[++U]=M,N[++U]=G,N[++U]=H,B[++U]=D,N[++U]=w,N[++U]=b,N[++U]=P,N[++U]=O,N[++U]=G,N[++U]=H,B[++U]=z,N[++U]=E,N[++U]=A,N[++U]=F,N[++U]=O,N[++U]=G,N[++U]=H,B[++U]=X,N[++U]=g,N[++U]=T,N[++U]=P,N[++U]=M,N[++U]=G,N[++U]=H,B[++U]=D,N[++U]=E,N[++U]=A,N[++U]=F,N[++U]=O,N[++U]=G,N[++U]=H,B[++U]=X,N[++U]=R,N[++U]=I,N[++U]=F,N[++U]=M,N[++U]=G,N[++U]=H,B[++U]=L,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(m),k},batchTri:function(m,g,T,w,b,E,A,R,I,P,M,F,O,D,L,z,X){X===void 0&&(X=this.currentUnit);var H=!1;this.shouldFlush(3)&&(this.flush(),H=!0),this.currentBatch||(X=this.setTexture2D(z));var J=this.vertexViewF32,G=this.vertexViewU32,k=this.vertexCount*this.currentShader.vertexComponentCount-1;return J[++k]=g,J[++k]=T,J[++k]=R,J[++k]=I,J[++k]=X,J[++k]=L,G[++k]=F,J[++k]=w,J[++k]=b,J[++k]=R,J[++k]=M,J[++k]=X,J[++k]=L,G[++k]=O,J[++k]=E,J[++k]=A,J[++k]=P,J[++k]=M,J[++k]=X,J[++k]=L,G[++k]=D,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(m),H},drawFillRect:function(m,g,T,w,b,E,A,R){A===void 0&&(A=this.renderer.whiteTexture),R===void 0&&(R=!0),m=Math.floor(m),g=Math.floor(g);var I=Math.floor(m+T),P=Math.floor(g+w),M=this.setTexture2D(A),F=u.getTintAppendFloatAlphaAndSwap(b,E),O=0,D=0,L=1,z=1;R&&(D=1,z=0),this.batchQuad(null,m,g,m,P,I,P,I,g,O,D,L,z,F,F,F,F,0,A,M)},setTexture2D:function(m){return m===void 0&&(m=this.renderer.whiteTexture),this.pushBatch(m)},bindTexture:function(m,g){g===void 0&&(g=0);var T=this.gl;return T.activeTexture(T.TEXTURE0+g),T.bindTexture(T.TEXTURE_2D,m),this},bindRenderTarget:function(m,g){return this.bindTexture(m.texture,g)},setTime:function(m,g){return this.set1f(m,this.game.loop.getDuration(),g),this},setBoolean:function(m,g,T){return T===void 0&&(T=this.currentShader),T.setBoolean(m,g),this},set1f:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set1f(m,g),this},set2f:function(m,g,T,w){return w===void 0&&(w=this.currentShader),w.set2f(m,g,T),this},set3f:function(m,g,T,w,b){return b===void 0&&(b=this.currentShader),b.set3f(m,g,T,w),this},set4f:function(m,g,T,w,b,E){return E===void 0&&(E=this.currentShader),E.set4f(m,g,T,w,b),this},set1fv:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set1fv(m,g),this},set2fv:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set2fv(m,g),this},set3fv:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set3fv(m,g),this},set4fv:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set4fv(m,g),this},set1iv:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set1iv(m,g),this},set2iv:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set2iv(m,g),this},set3iv:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set3iv(m,g),this},set4iv:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set4iv(m,g),this},set1i:function(m,g,T){return T===void 0&&(T=this.currentShader),T.set1i(m,g),this},set2i:function(m,g,T,w){return w===void 0&&(w=this.currentShader),w.set2i(m,g,T),this},set3i:function(m,g,T,w,b){return b===void 0&&(b=this.currentShader),b.set3i(m,g,T,w),this},set4i:function(m,g,T,w,b,E){return E===void 0&&(E=this.currentShader),E.set4i(m,g,T,w,b),this},setMatrix2fv:function(m,g,T,w){return w===void 0&&(w=this.currentShader),w.setMatrix2fv(m,g,T),this},setMatrix3fv:function(m,g,T,w){return w===void 0&&(w=this.currentShader),w.setMatrix3fv(m,g,T),this},setMatrix4fv:function(m,g,T,w){return w===void 0&&(w=this.currentShader),w.setMatrix4fv(m,g,T),this},destroy:function(){this.emit(r.DESTROY,this);var m,g=this.shaders;for(m=0;m<g.length;m++)g[m].destroy();var T=this.renderTargets;for(m=0;m<T.length;m++)T[m].destroy();this.gl.deleteBuffer(this.vertexBuffer);var w=this.renderer;return w.off(h.RESIZE,this.resize,this),w.off(h.PRE_RENDER,this.onPreRender,this),w.off(h.RENDER,this.onRender,this),w.off(h.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});o.exports=v},11857:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66458),l=t(89787),a=t(56694),r=t(86459),i=t(6659),n=t(81044),h=t(28621),d=t(16650),u=t(72283),p=t(35217),v=t(37410),m=t(40444),g=t(38203),T=t(75512),w=t(1217),b=new a({Extends:i,initialize:function(A){i.call(this);var R=A.config,I={alpha:R.transparent,desynchronized:R.desynchronized,depth:!0,antialias:R.antialiasGL,premultipliedAlpha:R.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:R.failIfMajorPerformanceCaveat,powerPreference:R.powerPreference,preserveDrawingBuffer:R.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:R.clearBeforeRender,antialias:R.antialias,backgroundColor:R.backgroundColor,contextCreation:I,roundPixels:R.roundPixels,maxTextures:R.maxTextures,maxTextureSize:R.maxTextureSize,batchSize:R.batchSize,maxLights:R.maxLights,mipmapFilter:R.mipmapFilter},this.game=A,this.type=r.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=A.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=u,this.contextRestoredHandler=u,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(E){var A,R=this.game,I=this.canvas,P=E.backgroundColor;if(R.config.context?A=R.config.context:A=I.getContext("webgl",E.contextCreation)||I.getContext("experimental-webgl",E.contextCreation),!A||A.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=A;var M=this;this.contextLostHandler=function(J){M.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),J.preventDefault()},I.addEventListener("webglcontextlost",this.contextLostHandler,!1),R.context=A;for(var F=0;F<=27;F++)this.blendModes.push({func:[A.ONE,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_ADD});this.blendModes[1].func=[A.ONE,A.DST_ALPHA],this.blendModes[2].func=[A.DST_COLOR,A.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[A.ONE,A.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[A.ZERO,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_REVERSE_SUBTRACT},this.glFormats=[A.BYTE,A.SHORT,A.UNSIGNED_BYTE,A.UNSIGNED_SHORT,A.FLOAT],this.glFuncMap={mat2:{func:A.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:A.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:A.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:A.uniform1f,length:1},"1fv":{func:A.uniform1fv,length:1},"1i":{func:A.uniform1i,length:1},"1iv":{func:A.uniform1iv,length:1},"2f":{func:A.uniform2f,length:2},"2fv":{func:A.uniform2fv,length:1},"2i":{func:A.uniform2i,length:2},"2iv":{func:A.uniform2iv,length:1},"3f":{func:A.uniform3f,length:3},"3fv":{func:A.uniform3fv,length:1},"3i":{func:A.uniform3i,length:3},"3iv":{func:A.uniform3iv,length:1},"4f":{func:A.uniform4f,length:4},"4fv":{func:A.uniform4fv,length:1},"4i":{func:A.uniform4i,length:4},"4iv":{func:A.uniform4iv,length:1}};var O=A.getSupportedExtensions();(!E.maxTextures||E.maxTextures===-1)&&(E.maxTextures=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS)),E.maxTextureSize||(E.maxTextureSize=A.getParameter(A.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=O;var D="ANGLE_instanced_arrays";this.instancedArraysExtension=O.indexOf(D)>-1?A.getExtension(D):null;var L="OES_vertex_array_object";this.vaoExtension=O.indexOf(L)>-1?A.getExtension(L):null,A.disable(A.DEPTH_TEST),A.disable(A.CULL_FACE),A.enable(A.BLEND),A.clearColor(P.redGL,P.greenGL,P.blueGL,P.alphaGL);var z=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];z.indexOf(E.mipmapFilter)!==-1&&(this.mipmapFilter=A[E.mipmapFilter]),this.maxTextures=T.checkShaderMax(A,E.maxTextures),this.textureIndexes=[];for(var X=0;X<this.maxTextures;X++){var H=A.createTexture();A.activeTexture(A.TEXTURE0+X),A.bindTexture(A.TEXTURE_2D,H),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(X)}return this.pipelines=new p(this),this.setBlendMode(r.BlendModes.NORMAL),this.projectionMatrix=new d().identity(),R.textures.once(g.READY,this.boot,this),this},boot:function(){var E=this.game,A=this.pipelines,R=E.scale.baseSize,I=R.width,P=R.height;this.width=I,this.height=P,this.isBooted=!0,this.renderTarget=new v(this,I,P,1,0,!0,!0),this.maskTarget=new v(this,I,P,1,0,!0,!0),this.maskSource=new v(this,I,P,1,0,!0,!0);var M=E.config;A.boot(M.pipeline,M.defaultPipeline,M.autoMobilePipeline),this.blankTexture=E.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=E.textures.getFrame("__WHITE").glTexture;var F=this.gl;F.bindFramebuffer(F.FRAMEBUFFER,null),F.enable(F.SCISSOR_TEST),E.scale.on(m.RESIZE,this.onResize,this),this.resize(I,P)},captureFrame:function(E,A){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(E,A,R){},stopCapture:function(){},onCapture:function(E){},onResize:function(E,A){(A.width!==this.width||A.height!==this.height)&&this.resize(A.width,A.height)},beginCapture:function(E,A){E===void 0&&(E=this.width),A===void 0&&(A=this.height),this.renderTarget.bind(!0,E,A),this.setProjectionMatrix(E,A)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(E,A){var R=this.gl;return this.width=E,this.height=A,this.setProjectionMatrix(E,A),R.viewport(0,0,E,A),this.drawingBufferHeight=R.drawingBufferHeight,R.scissor(0,R.drawingBufferHeight-A,E,A),this.defaultScissor[2]=E,this.defaultScissor[3]=A,this.emit(n.RESIZE,E,A),this},getCompressedTextures:function(){var E="WEBGL_compressed_texture_",A="WEBKIT_"+E,R=function(P,M){var F=P.getExtension(E+M)||P.getExtension(A+M);if(F){var O={};for(var D in F)O[F[D]]=D;return O}},I=this.gl;return{ETC:R(I,"etc"),ETC1:R(I,"etc1"),ATC:R(I,"atc"),ASTC:R(I,"astc"),BPTC:R(I,"bptc"),RGTC:R(I,"rgtc"),PVRTC:R(I,"pvrtc"),S3TC:R(I,"s3tc"),S3TCSRGB:R(I,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(E,A){var R=this.compression[E.toUpperCase()];if(A in R)return R[A]},supportsCompressedTexture:function(E,A){var R=this.compression[E.toUpperCase()];return R?A?A in R:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(E,A){return(E!==this.projectionWidth||A!==this.projectionHeight)&&(this.projectionWidth=E,this.projectionHeight=A,this.projectionMatrix.ortho(0,E,A,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(E){return this.supportedExtensions?this.supportedExtensions.indexOf(E):!1},getExtension:function(E){return this.hasExtension(E)?(E in this.extensions||(this.extensions[E]=this.gl.getExtension(E)),this.extensions[E]):null},flush:function(){this.pipelines.flush()},pushScissor:function(E,A,R,I,P){P===void 0&&(P=this.drawingBufferHeight);var M=this.scissorStack,F=[E,A,R,I];return M.push(F),this.setScissor(E,A,R,I,P),this.currentScissor=F,F},setScissor:function(E,A,R,I,P){P===void 0&&(P=this.drawingBufferHeight);var M=this.gl,F=this.currentScissor,O=R>0&&I>0;if(F&&O){var D=F[0],L=F[1],z=F[2],X=F[3];O=D!==E||L!==A||z!==R||X!==I}O&&(this.flush(),M.scissor(E,P-A-I,R,I))},resetScissor:function(){var E=this.gl;E.enable(E.SCISSOR_TEST);var A=this.currentScissor;if(A){var R=A[0],I=A[1],P=A[2],M=A[3];P>0&&M>0&&E.scissor(R,this.drawingBufferHeight-I-M,P,M)}},popScissor:function(){var E=this.scissorStack;E.pop();var A=E[E.length-1];A&&this.setScissor(A[0],A[1],A[2],A[3]),this.currentScissor=A},hasActiveStencilMask:function(){var E=this.currentMask.mask,A=this.currentCameraMask.mask;return E&&E.isStencil||A&&A.isStencil},resetViewport:function(){var E=this.gl;E.viewport(0,0,this.width,this.height),this.drawingBufferHeight=E.drawingBufferHeight},setBlendMode:function(E,A){A===void 0&&(A=!1);var R=this.gl,I=this.blendModes[E];return A||E!==r.BlendModes.SKIP_CHECK&&this.currentBlendMode!==E?(this.flush(),R.enable(R.BLEND),R.blendEquation(I.equation),I.func.length>2?R.blendFuncSeparate(I.func[0],I.func[1],I.func[2],I.func[3]):R.blendFunc(I.func[0],I.func[1]),this.currentBlendMode=E,!0):!1},addBlendMode:function(E,A){var R=this.blendModes.push({func:E,equation:A});return R-1},updateBlendMode:function(E,A,R){return this.blendModes[E]&&(this.blendModes[E].func=A,R&&(this.blendModes[E].equation=R)),this},removeBlendMode:function(E){return E>17&&this.blendModes[E]&&this.blendModes.splice(E,1),this},pushFramebuffer:function(E,A,R,I,P){return E===this.currentFramebuffer?this:(this.fboStack.push(E),this.setFramebuffer(E,A,R,I,P))},setFramebuffer:function(E,A,R,I,P){if(A===void 0&&(A=!1),R===void 0&&(R=!0),I===void 0&&(I=null),P===void 0&&(P=!1),E===this.currentFramebuffer)return this;var M=this.gl,F=this.width,O=this.height;return E&&E.renderTexture&&R?(F=E.renderTexture.width,O=E.renderTexture.height):this.flush(),M.bindFramebuffer(M.FRAMEBUFFER,E),R&&M.viewport(0,0,F,O),I&&M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,I,0),P&&(M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT)),A&&(E?(this.drawingBufferHeight=O,this.pushScissor(0,0,F,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=E,this},popFramebuffer:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!0);var R=this.fboStack;R.pop();var I=R[R.length-1];return I||(I=null),this.setFramebuffer(I,E,A),I},restoreFramebuffer:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!0);var R=this.fboStack,I=R[R.length-1];I||(I=null),this.currentFramebuffer=null,this.setFramebuffer(I,E,A)},setProgram:function(E){return E!==this.currentProgram?(this.flush(),this.gl.useProgram(E),this.currentProgram=E,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(E,A,R,I,P){P===void 0&&(P=!1);var M=this.gl,F=M.NEAREST,O=M.NEAREST,D=M.CLAMP_TO_EDGE,L=null;A=E?E.width:A,R=E?E.height:R;var z=h(A,R);return z&&!P&&(D=M.REPEAT),I===r.ScaleModes.LINEAR&&this.config.antialias&&(F=z&&this.mipmapFilter?this.mipmapFilter:M.LINEAR,O=M.LINEAR),E&&E.compressed&&(F=M.LINEAR,O=M.LINEAR),!E&&typeof A=="number"&&typeof R=="number"?L=this.createTexture2D(0,F,O,D,D,M.RGBA,null,A,R):L=this.createTexture2D(0,F,O,D,D,M.RGBA,E),L},createTexture2D:function(E,A,R,I,P,M,F,O,D,L,z,X){L=L??!0,z===void 0&&(z=!1),X===void 0&&(X=!1);var H=this.gl,J=H.createTexture();H.activeTexture(H.TEXTURE0);var G=H.getParameter(H.TEXTURE_BINDING_2D);H.bindTexture(H.TEXTURE_2D,J),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,A),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,R),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,P),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,I),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L),X&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!0);var k=!1;if(F==null)H.texImage2D(H.TEXTURE_2D,E,M,O,D,0,M,H.UNSIGNED_BYTE,null),k=h(O,D);else if(F.compressed){O=F.width,D=F.height,k=F.generateMipmap;for(var N=0;N<F.mipmaps.length;N++)H.compressedTexImage2D(H.TEXTURE_2D,N,F.internalFormat,F.mipmaps[N].width,F.mipmaps[N].height,0,F.mipmaps[N].data)}else z||(O=F.width,D=F.height),H.texImage2D(H.TEXTURE_2D,E,M,M,H.UNSIGNED_BYTE,F),k=h(O,D);return k&&H.generateMipmap(H.TEXTURE_2D),G&&H.bindTexture(H.TEXTURE_2D,G),J.isAlphaPremultiplied=L,J.isRenderTexture=!1,J.width=O,J.height=D,J},createFramebuffer:function(E,A,R,I){I===void 0&&(I=!0);var P=this.gl,M=P.createFramebuffer(),F=0;if(this.setFramebuffer(M),R.isRenderTexture=!0,R.isAlphaPremultiplied=!1,P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,R,0),F=P.checkFramebufferStatus(P.FRAMEBUFFER),F!==P.FRAMEBUFFER_COMPLETE){var O={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(O[F]||F))}if(M.renderTexture=R,I){var D=P.createRenderbuffer();P.bindRenderbuffer(P.RENDERBUFFER,D),P.renderbufferStorage(P.RENDERBUFFER,P.DEPTH_STENCIL,E,A),P.framebufferRenderbuffer(P.FRAMEBUFFER,P.DEPTH_STENCIL_ATTACHMENT,P.RENDERBUFFER,D)}return this.setFramebuffer(null),M},beginBitmapMask:function(E,A){var R=this.gl;R&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==E&&(this.currentMask.mask=E,this.currentMask.camera=A))},drawBitmapMask:function(E,A,R){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),E.renderWebGL(this,E,A),this.maskSource.unbind(!0),this.maskTarget.unbind();var I=this.gl,P=this.getCurrentStencilMask();P?(I.enable(I.STENCIL_TEST),P.mask.applyStencil(this,P.camera,!0)):this.currentMask.mask=null,this.pipelines.set(R),I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,this.maskTarget.texture),I.activeTexture(I.TEXTURE1),I.bindTexture(I.TEXTURE_2D,this.maskSource.texture)},createProgram:function(E,A){var R=this.gl,I=R.createProgram(),P=R.createShader(R.VERTEX_SHADER),M=R.createShader(R.FRAGMENT_SHADER);R.shaderSource(P,E),R.shaderSource(M,A),R.compileShader(P),R.compileShader(M);var F=`Shader failed:
`;if(!R.getShaderParameter(P,R.COMPILE_STATUS))throw new Error("Vertex "+F+R.getShaderInfoLog(P));if(!R.getShaderParameter(M,R.COMPILE_STATUS))throw new Error("Fragment "+F+R.getShaderInfoLog(M));if(R.attachShader(I,P),R.attachShader(I,M),R.linkProgram(I),!R.getProgramParameter(I,R.LINK_STATUS))throw new Error("Link "+F+R.getProgramInfoLog(I));return R.useProgram(I),I},createVertexBuffer:function(E,A){var R=this.gl,I=R.createBuffer();return R.bindBuffer(R.ARRAY_BUFFER,I),R.bufferData(R.ARRAY_BUFFER,E,A),R.bindBuffer(R.ARRAY_BUFFER,null),I},createIndexBuffer:function(E,A){var R=this.gl,I=R.createBuffer();return R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,I),R.bufferData(R.ELEMENT_ARRAY_BUFFER,E,A),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,null),I},deleteTexture:function(E){return E&&this.gl.deleteTexture(E),this},deleteFramebuffer:function(E){if(!E)return this;var A=this.gl;this.currentFramebuffer===E&&(this.currentFramebuffer=null),s(this.fboStack,E),A.bindFramebuffer(A.FRAMEBUFFER,E),E.renderTexture=void 0;var R=A.getFramebufferAttachmentParameter(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);R!==null&&(A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,null,0),A.deleteTexture(R));var I=A.getFramebufferAttachmentParameter(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);return I!==null&&A.deleteRenderbuffer(I),A.bindFramebuffer(A.FRAMEBUFFER,null),A.deleteFramebuffer(E),this},deleteProgram:function(E){return E&&this.gl.deleteProgram(E),this},deleteBuffer:function(E){return this.gl.deleteBuffer(E),this},preRenderCamera:function(E){var A=E.x,R=E.y,I=E.width,P=E.height,M=E.backgroundColor;if(E.emit(l.PRE_RENDER,E),this.pipelines.preBatchCamera(E),this.pushScissor(A,R,I,P),E.mask&&(this.currentCameraMask.mask=E.mask,this.currentCameraMask.camera=E._maskCamera,E.mask.preRenderWebGL(this,E,E._maskCamera)),M.alphaGL>0){var F=this.pipelines.setMulti();F.drawFillRect(A,R,I,P,T.getTintFromFloats(M.blueGL,M.greenGL,M.redGL,1),M.alphaGL)}},getCurrentStencilMask:function(){var E=null,A=this.maskStack,R=this.currentCameraMask;return A.length>0?E=A[A.length-1]:R.mask&&R.mask.isStencil&&(E=R),E},postRenderCamera:function(E){var A=E.flashEffect,R=E.fadeEffect;if(A.isRunning||R.isRunning||R.isComplete){var I=this.pipelines.setMulti();A.postRenderWebGL(I,T.getTintFromFloats),R.postRenderWebGL(I,T.getTintFromFloats)}E.dirty=!1,this.popScissor(),E.mask&&(this.currentCameraMask.mask=null,E.mask.postRenderWebGL(this,E._maskCamera)),this.pipelines.postBatchCamera(E),E.emit(l.POST_RENDER,E)},preRender:function(){if(!this.contextLost){var E=this.gl;if(E.bindFramebuffer(E.FRAMEBUFFER,null),this.config.clearBeforeRender){var A=this.config.backgroundColor;E.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT|E.STENCIL_BUFFER_BIT)}E.enable(E.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&E.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(n.PRE_RENDER)}},render:function(E,A,R){if(!this.contextLost){var I=A.length;if(this.emit(n.RENDER,E,R),this.preRenderCamera(R),I===0){this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(R);return}this.currentType="";for(var P=this.currentMask,M=0;M<I;M++){this.finalType=M===I-1;var F=A[M],O=F.mask;P=this.currentMask,P.mask&&P.mask!==O&&P.mask.postRenderWebGL(this,P.camera),O&&P.mask!==O&&O.preRenderWebGL(this,F,R),F.blendMode!==this.currentBlendMode&&this.setBlendMode(F.blendMode);var D=F.type;D!==this.currentType&&(this.newType=!0,this.currentType=D),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=A[M+1].type===this.currentType,F.renderWebGL(this,F,R),this.newType=!1}P=this.currentMask,P.mask&&P.mask.postRenderWebGL(this,P.camera),this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(R)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(n.POST_RENDER);var E=this.snapshotState;E.callback&&(w(this.gl,E),E.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var E=this.gl,A=this.getCurrentStencilMask();if(A){var R=A.mask;E.enable(E.STENCIL_TEST),R.invertAlpha?E.stencilFunc(E.NOTEQUAL,R.level,255):E.stencilFunc(E.EQUAL,R.level,255)}},snapshot:function(E,A,R){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,E,A,R)},snapshotArea:function(E,A,R,I,P,M,F){var O=this.snapshotState;return O.callback=P,O.type=M,O.encoder=F,O.getPixel=!1,O.x=E,O.y=A,O.width=R,O.height=I,this},snapshotPixel:function(E,A,R){return this.snapshotArea(E,A,1,1,R),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(E,A,R,I,P,M,F,O,D,L,z){P===void 0&&(P=!1),M===void 0&&(M=0),F===void 0&&(F=0),O===void 0&&(O=A),D===void 0&&(D=R),L==="pixel"&&(P=!0,L="image/png");var X=this.currentFramebuffer;this.snapshotArea(M,F,O,D,I,L,z);var H=this.snapshotState;return H.getPixel=P,H.isFramebuffer=!0,H.bufferWidth=A,H.bufferHeight=R,H.width=Math.min(H.width,A),H.height=Math.min(H.height,R),this.setFramebuffer(E),w(this.gl,H),this.setFramebuffer(X),H.callback=null,H.isFramebuffer=!1,this},canvasToTexture:function(E,A,R,I){return R===void 0&&(R=!1),I===void 0&&(I=!1),A?this.updateCanvasTexture(E,A,I):this.createCanvasTexture(E,R,I)},createCanvasTexture:function(E,A,R){A===void 0&&(A=!1),R===void 0&&(R=!1);var I=this.gl,P=I.NEAREST,M=I.NEAREST,F=E.width,O=E.height,D=I.CLAMP_TO_EDGE,L=h(F,O);return!A&&L&&(D=I.REPEAT),this.config.antialias&&(P=L&&this.mipmapFilter?this.mipmapFilter:I.LINEAR,M=I.LINEAR),this.createTexture2D(0,P,M,D,D,I.RGBA,E,F,O,!0,!1,R)},updateCanvasTexture:function(E,A,R){R===void 0&&(R=!1);var I=this.gl,P=E.width,M=E.height;if(P>0&&M>0){I.activeTexture(I.TEXTURE0);var F=I.getParameter(I.TEXTURE_BINDING_2D);I.bindTexture(I.TEXTURE_2D,A),R&&I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,!0),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,E),A.width=P,A.height=M,F&&I.bindTexture(I.TEXTURE_2D,F)}return A},createVideoTexture:function(E,A,R){A===void 0&&(A=!1),R===void 0&&(R=!1);var I=this.gl,P=I.NEAREST,M=I.NEAREST,F=E.videoWidth,O=E.videoHeight,D=I.CLAMP_TO_EDGE,L=h(F,O);return!A&&L&&(D=I.REPEAT),this.config.antialias&&(P=L&&this.mipmapFilter?this.mipmapFilter:I.LINEAR,M=I.LINEAR),this.createTexture2D(0,P,M,D,D,I.RGBA,E,F,O,!0,!0,R)},updateVideoTexture:function(E,A,R){R===void 0&&(R=!1);var I=this.gl,P=E.videoWidth,M=E.videoHeight;if(P>0&&M>0){I.activeTexture(I.TEXTURE0);var F=I.getParameter(I.TEXTURE_BINDING_2D);I.bindTexture(I.TEXTURE_2D,A),I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,R),I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,E),A.width=P,A.height=M,F&&I.bindTexture(I.TEXTURE_2D,F)}return A},setTextureFilter:function(E,A){var R=this.gl,I=A===0?R.LINEAR:R.NEAREST;R.activeTexture(R.TEXTURE0);var P=R.getParameter(R.TEXTURE_BINDING_2D);return R.bindTexture(R.TEXTURE_2D,E),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,I),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,I),P&&R.bindTexture(R.TEXTURE_2D,P),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});o.exports=b},71305:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(71402),r=new s({initialize:function(n,h,d,u,p){this.pipeline=n,this.name=h,this.renderer=n.renderer,this.gl=this.renderer.gl,this.fragSrc=u,this.vertSrc=d,this.program=this.renderer.createProgram(d,u),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(p),this.createUniforms()},createAttributes:function(i){var n=0,h=0,d=[];this.vertexComponentCount=0;for(var u=0;u<i.length;u++){var p=i[u],v=p.name,m=l(p,"size",1),g=l(p,"type",a.FLOAT),T=g.enum,w=g.size,b=!!p.normalized;d.push({name:v,size:m,type:T,normalized:b,offset:h,enabled:!1,location:-1}),w===4?n+=m:n++,h+=m*w}this.vertexSize=h,this.vertexComponentCount=n,this.attributes=d},bind:function(i,n){return i===void 0&&(i=!1),n===void 0&&(n=!1),n&&this.pipeline.flush(),this.renderer.setProgram(this.program),i&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(i){i===void 0&&(i=!1);for(var n=this.gl,h=this.vertexSize,d=this.attributes,u=this.program,p=0;p<d.length;p++){var v=d[p],m=v.size,g=v.type,T=v.offset,w=v.enabled,b=v.location,E=!!v.normalized;if(i){var A=n.getAttribLocation(u,v.name);A>=0?(n.enableVertexAttribArray(A),n.vertexAttribPointer(A,m,g,E,h,T),v.enabled=!0,v.location=A):A!==-1&&n.disableVertexAttribArray(A)}else w?n.vertexAttribPointer(b,m,g,E,h,T):!w&&b>-1&&(n.disableVertexAttribArray(b),v.location=-1)}return this},createUniforms:function(){var i=this.gl,n=this.program,h=this.uniforms,d,u,p,v=i.getProgramParameter(n,i.ACTIVE_UNIFORMS);for(d=0;d<v;d++){var m=i.getActiveUniform(n,d);if(m){u=m.name,p=i.getUniformLocation(n,u),p!==null&&(h[u]={name:u,location:p,value1:null,value2:null,value3:null,value4:null});var g=u.indexOf("[");g>0&&(u=u.substr(0,g),h.hasOwnProperty(u)||(p=i.getUniformLocation(n,u),p!==null&&(h[u]={name:u,location:p,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(i){return this.uniforms.hasOwnProperty(i)},resetUniform:function(i){var n=this.uniforms[i];return n&&(n.value1=null,n.value2=null,n.value3=null,n.value4=null),this},setUniform1:function(i,n,h,d){var u=this.uniforms[n];return u?((d||u.value1!==h)&&(u.value1=h,this.renderer.setProgram(this.program),i.call(this.gl,u.location,h),this.pipeline.currentShader=this),this):this},setUniform2:function(i,n,h,d,u){var p=this.uniforms[n];return p?((u||p.value1!==h||p.value2!==d)&&(p.value1=h,p.value2=d,this.renderer.setProgram(this.program),i.call(this.gl,p.location,h,d),this.pipeline.currentShader=this),this):this},setUniform3:function(i,n,h,d,u,p){var v=this.uniforms[n];return v?((p||v.value1!==h||v.value2!==d||v.value3!==u)&&(v.value1=h,v.value2=d,v.value3=u,this.renderer.setProgram(this.program),i.call(this.gl,v.location,h,d,u),this.pipeline.currentShader=this),this):this},setUniform4:function(i,n,h,d,u,p,v){var m=this.uniforms[n];return m?((v||m.value1!==h||m.value2!==d||m.value3!==u||m.value4!==p)&&(m.value1=h,m.value2=d,m.value3=u,m.value4=p,this.renderer.setProgram(this.program),i.call(this.gl,m.location,h,d,u,p),this.pipeline.currentShader=this),this):this},setBoolean:function(i,n){return this.setUniform1(this.gl.uniform1i,i,Number(n))},set1f:function(i,n){return this.setUniform1(this.gl.uniform1f,i,n)},set2f:function(i,n,h){return this.setUniform2(this.gl.uniform2f,i,n,h)},set3f:function(i,n,h,d){return this.setUniform3(this.gl.uniform3f,i,n,h,d)},set4f:function(i,n,h,d,u){return this.setUniform4(this.gl.uniform4f,i,n,h,d,u)},set1fv:function(i,n){return this.setUniform1(this.gl.uniform1fv,i,n,!0)},set2fv:function(i,n){return this.setUniform1(this.gl.uniform2fv,i,n,!0)},set3fv:function(i,n){return this.setUniform1(this.gl.uniform3fv,i,n,!0)},set4fv:function(i,n){return this.setUniform1(this.gl.uniform4fv,i,n,!0)},set1iv:function(i,n){return this.setUniform1(this.gl.uniform1iv,i,n,!0)},set2iv:function(i,n){return this.setUniform1(this.gl.uniform2iv,i,n,!0)},set3iv:function(i,n){return this.setUniform1(this.gl.uniform3iv,i,n,!0)},set4iv:function(i,n){return this.setUniform1(this.gl.uniform4iv,i,n,!0)},set1i:function(i,n){return this.setUniform1(this.gl.uniform1i,i,n)},set2i:function(i,n,h){return this.setUniform2(this.gl.uniform2i,i,n,h)},set3i:function(i,n,h,d){return this.setUniform3(this.gl.uniform3i,i,n,h,d)},set4i:function(i,n,h,d,u){return this.setUniform4(this.gl.uniform4i,i,n,h,d,u)},setMatrix2fv:function(i,n,h){return this.setUniform2(this.gl.uniformMatrix2fv,i,n,h,!0)},setMatrix3fv:function(i,n,h){return this.setUniform2(this.gl.uniformMatrix3fv,i,n,h,!0)},setMatrix4fv:function(i,n,h){return this.setUniform2(this.gl.uniformMatrix4fv,i,n,h,!0)},createProgram:function(i,n){i===void 0&&(i=this.vertSrc),n===void 0&&(n=this.fragSrc);var h=this.gl;return this.program&&h.deleteProgram(this.program),this.vertSrc=i,this.fragSrc=n,this.program=this.renderer.createProgram(i,n),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});o.exports=r},71402:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};o.exports=x},55478:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(71402),l=t(98611),a={PipelineManager:t(35217),Pipelines:t(62253),RenderTarget:t(37410),Utils:t(75512),WebGLPipeline:t(44775),WebGLRenderer:t(11857),WebGLShader:t(71305)};a=l(!1,a,s),o.exports=a},5583:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(91679),r=t(89053),i=t(71402),n=t(44775),h=new s({Extends:n,initialize:function(u){u.fragShader=l(u,"fragShader",a),u.vertShader=l(u,"vertShader",r),u.batchSize=l(u,"batchSize",1),u.vertices=l(u,"vertices",[-1,1,-1,-7,7,1]),u.attributes=l(u,"attributes",[{name:"inPosition",size:2,type:i.FLOAT}]),n.call(this,u)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(d,u){n.prototype.resize.call(this,d,u),this.set2f("uResolution",d,u)},beginMask:function(d,u,p){this.renderer.beginBitmapMask(d,p)},endMask:function(d,u,p){var v=this.gl,m=this.renderer,g=d.bitmapMask;g&&v&&(m.drawBitmapMask(g,u,this),p&&this.set2f("uResolution",p.width,p.height),this.set1i("uInvertMaskAlpha",d.invertAlpha),v.drawArrays(this.topology,0,3),p&&this.set2f("uResolution",this.width,this.height),v.bindTexture(v.TEXTURE_2D,null))}});o.exports=h},81828:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(58136),a=t(47406),r=t(72632),i=t(87228),n=t(92462),h=t(75512),d=new s({Extends:i,initialize:function(p){p.shaders=[h.setGlowQuality(n.FXGlowFrag,p.game),n.FXShadowFrag,n.FXPixelateFrag,n.FXVignetteFrag,n.FXShineFrag,n.FXBlurLowFrag,n.FXBlurMedFrag,n.FXBlurHighFrag,n.FXGradientFrag,n.FXBloomFrag,n.ColorMatrixFrag,n.FXCircleFrag,n.FXBarrelFrag,n.FXDisplacementFrag,n.FXWipeFrag,n.FXBokehFrag],i.call(this,p);var v=this.game;this.glow=new l.Glow(v),this.shadow=new l.Shadow(v),this.pixelate=new l.Pixelate(v),this.vignette=new l.Vignette(v),this.shine=new l.Shine(v),this.gradient=new l.Gradient(v),this.circle=new l.Circle(v),this.barrel=new l.Barrel(v),this.wipe=new l.Wipe(v),this.bokeh=new l.Bokeh(v);var m=[];m[a.GLOW]=this.onGlow,m[a.SHADOW]=this.onShadow,m[a.PIXELATE]=this.onPixelate,m[a.VIGNETTE]=this.onVignette,m[a.SHINE]=this.onShine,m[a.BLUR]=this.onBlur,m[a.GRADIENT]=this.onGradient,m[a.BLOOM]=this.onBloom,m[a.COLOR_MATRIX]=this.onColorMatrix,m[a.CIRCLE]=this.onCircle,m[a.BARREL]=this.onBarrel,m[a.DISPLACEMENT]=this.onDisplacement,m[a.WIPE]=this.onWipe,m[a.BOKEH]=this.onBokeh,this.fxHandlers=m,this.source,this.target,this.swap},onDraw:function(u,p,v){this.source=u,this.target=p,this.swap=v;var m=u.width,g=u.height,T=this.tempSprite,w=this.fxHandlers;if(T&&T.preFX)for(var b=T.preFX.list,E=0;E<b.length;E++){var A=b[E];A.active&&w[A.type].call(this,A,m,g)}this.drawToGame(this.source)},runDraw:function(){var u=this.source,p=this.target;this.copy(u,p),this.source=p,this.target=u},onGlow:function(u,p,v){var m=this.shaders[a.GLOW];this.setShader(m),this.glow.onPreRender(u,m,p,v),this.runDraw()},onShadow:function(u){var p=this.shaders[a.SHADOW];this.setShader(p),this.shadow.onPreRender(u,p),this.runDraw()},onPixelate:function(u,p,v){var m=this.shaders[a.PIXELATE];this.setShader(m),this.pixelate.onPreRender(u,m,p,v),this.runDraw()},onVignette:function(u){var p=this.shaders[a.VIGNETTE];this.setShader(p),this.vignette.onPreRender(u,p),this.runDraw()},onShine:function(u,p,v){var m=this.shaders[a.SHINE];this.setShader(m),this.shine.onPreRender(u,m,p,v),this.runDraw()},onBlur:function(u,p,v){var m=r(u,"quality"),g=this.shaders[a.BLUR+m];this.setShader(g),this.set1i("uMainSampler",0),this.set2f("resolution",p,v),this.set1f("strength",r(u,"strength")),this.set3fv("color",r(u,"glcolor"));for(var T=r(u,"x"),w=r(u,"y"),b=r(u,"steps"),E=0;E<b;E++)this.set2f("offset",T,0),this.runDraw(),this.set2f("offset",0,w),this.runDraw()},onGradient:function(u){var p=this.shaders[a.GRADIENT];this.setShader(p),this.gradient.onPreRender(u,p),this.runDraw()},onBloom:function(u,p,v){var m=this.shaders[a.BLOOM];this.copySprite(this.source,this.swap),this.setShader(m),this.set1i("uMainSampler",0),this.set1f("strength",r(u,"blurStrength")),this.set3fv("color",r(u,"glcolor"));for(var g=2/p*r(u,"offsetX"),T=2/v*r(u,"offsetY"),w=r(u,"steps"),b=0;b<w;b++)this.set2f("offset",g,0),this.runDraw(),this.set2f("offset",0,T),this.runDraw();this.blendFrames(this.swap,this.source,this.target,r(u,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(u){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",u.getData()),this.set1f("uAlpha",u.alpha),this.runDraw()},onCircle:function(u,p,v){var m=this.shaders[a.CIRCLE];this.setShader(m),this.circle.onPreRender(u,m,p,v),this.runDraw()},onBarrel:function(u){var p=this.shaders[a.BARREL];this.setShader(p),this.barrel.onPreRender(u,p),this.runDraw()},onDisplacement:function(u){this.setShader(this.shaders[a.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",u.x,u.y),this.bindTexture(u.glTexture,1),this.runDraw()},onWipe:function(u){var p=this.shaders[a.WIPE];this.setShader(p),this.wipe.onPreRender(u,p),this.runDraw()},onBokeh:function(u,p,v){var m=this.shaders[a.BOKEH];this.setShader(m),this.bokeh.onPreRender(u,m,p,v),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,i.prototype.destroy.call(this),this}});o.exports=d},66901:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(65045),r=t(77310),i=t(69360),n=t(93736),h=t(44775),d=new s({Extends:r,initialize:function(p){var v=l(p,"fragShader",a);p.fragShader=v.replace("%LIGHT_COUNT%",p.game.renderer.config.maxLights),r.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new n,this._tempMatrix=new i,this._tempMatrix2=new i},boot:function(){h.prototype.boot.call(this);var u=this.gl,p=u.createTexture();u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,p),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p}},onRender:function(u,p){var v=u.sys.lights;if(this.lightsActive=!1,!(!v||!v.active)){var m=v.getLights(p),g=m.length;this.lightsActive=!0;var T,w=this.renderer,b=w.height,E=p.matrix,A=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",v.ambientColor.r,v.ambientColor.g,v.ambientColor.b),this.set1i("uLightCount",g),T=0;T<g;T++){var R=m[T].light,I=R.color,P="uLights["+T+"].";E.transformPoint(R.x,R.y,A),this.set2f(P+"position",A.x-p.scrollX*R.scrollFactorX*p.zoom,b-(A.y-p.scrollY*R.scrollFactorY*p.zoom)),this.set3f(P+"color",I.r,I.g,I.b),this.set1f(P+"intensity",R.intensity),this.set1f(P+"radius",R.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(u){if(u!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(u){var v=-u,m=Math.cos(v),g=Math.sin(v);p[1]=g,p[3]=-g,p[0]=p[4]=m}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=u}},setTexture2D:function(u,p){var v=this.renderer;u===void 0&&(u=v.whiteTexture);var m=this.getNormalMap(p);this.isNewNormalMap(u,m)&&(this.flush(),this.createBatch(u),this.addTextureToBatch(m),this.currentNormalMap=m);var g=0;if(p&&p.parentContainer){var T=p.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);g=T.rotationNormalized}else p&&(g=p.rotation);return this.setNormalMapRotation(g),0},setGameObject:function(u,p){p===void 0&&(p=u.frame);var v=p.glTexture,m=this.getNormalMap(u);if(this.isNewNormalMap(v,m)&&(this.flush(),this.createBatch(v),this.addTextureToBatch(m),this.currentNormalMap=m),u.parentContainer){var g=u.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(g.rotationNormalized)}else this.setNormalMapRotation(u.rotation);return 0},isNewNormalMap:function(u,p){return this.currentTexture!==u||this.currentNormalMap!==p},getNormalMap:function(u){var p;return u?u.displayTexture?p=u.displayTexture.dataSource[u.displayFrame.sourceIndex]:u.texture?p=u.texture.dataSource[u.frame.sourceIndex]:u.tileset&&(Array.isArray(u.tileset)?p=u.tileset[0].image.dataSource[0]:p=u.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(u,p,v){this.lightsActive&&r.prototype.batchSprite.call(this,u,p,v)},batchTexture:function(u,p,v,m,g,T,w,b,E,A,R,I,P,M,F,O,D,L,z,X,H,J,G,k,N,B,U,W,K,q,_,rt){this.lightsActive&&r.prototype.batchTexture.call(this,u,p,v,m,g,T,w,b,E,A,R,I,P,M,F,O,D,L,z,X,H,J,G,k,N,B,U,W,K,q,_,rt)},batchTextureFrame:function(u,p,v,m,g,T,w){this.lightsActive&&r.prototype.batchTextureFrame.call(this,u,p,v,m,g,T,w)}});o.exports=d},71264:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(77310),r=t(85060),i=t(18166),n=t(71402),h=t(44775),d=new s({Extends:a,initialize:function(p){p.fragShader=l(p,"fragShader",r),p.vertShader=l(p,"vertShader",i),p.attributes=l(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),p.forceZero=!0,a.call(this,p)},boot:function(){h.prototype.boot.call(this);var u=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",u.width,u.height),this.set1i("uRoundPixels",u.config.roundPixels)}});o.exports=d},77310:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(11117),a=t(72632),r=t(53787),i=t(15968),n=t(69360),h=t(75512),d=t(71402),u=t(44775),p=new s({Extends:u,initialize:function(m){var g=m.game.renderer,T=a(m,"fragShader",r);m.fragShader=h.parseFragmentShaderMaxTextures(T,g.maxTextures),m.vertShader=a(m,"vertShader",i),m.attributes=a(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),u.call(this,m),this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){u.prototype.boot.call(this);var v=this.renderer;this.set1iv("uMainSampler",v.textureIndexes),this.set2f("uResolution",v.width,v.height),this.set1i("uRoundPixels",v.config.roundPixels)},batchSprite:function(v,m,g){this.manager.set(this,v);var T=this._tempMatrix1,w=this._tempMatrix2,b=this._tempMatrix3,E=v.frame,A=E.glTexture,R=E.u0,I=E.v0,P=E.u1,M=E.v1,F=E.x,O=E.y,D=E.cutWidth,L=E.cutHeight,z=E.customPivot,X=v.displayOriginX,H=v.displayOriginY,J=-X+F,G=-H+O;if(v.isCropped){var k=v._crop;(k.flipX!==v.flipX||k.flipY!==v.flipY)&&E.updateCropUVs(k,v.flipX,v.flipY),R=k.u0,I=k.v0,P=k.u1,M=k.v1,D=k.width,L=k.height,F=k.x,O=k.y,J=-X+F,G=-H+O}var N=1,B=1;v.flipX&&(z||(J+=-E.realWidth+X*2),N=-1),(v.flipY||E.source.isGLTexture&&!A.flipY)&&(z||(G+=-E.realHeight+H*2),B=-1);var U=v.x,W=v.y;w.applyITRS(U,W,v.rotation,v.scaleX*N,v.scaleY*B),T.copyFrom(m.matrix),g?(T.multiplyWithOffset(g,-m.scrollX*v.scrollFactorX,-m.scrollY*v.scrollFactorY),w.e=U,w.f=W):(w.e-=m.scrollX*v.scrollFactorX,w.f-=m.scrollY*v.scrollFactorY),T.multiply(w,b);var K=b.setQuad(J,G,J+D,G+L),q=h.getTintAppendFloatAlpha,_=m.alpha,rt=q(v.tintTopLeft,_*v._alphaTL),ft=q(v.tintTopRight,_*v._alphaTR),vt=q(v.tintBottomLeft,_*v._alphaBL),mt=q(v.tintBottomRight,_*v._alphaBR);this.shouldFlush(6)&&this.flush();var yt=this.setGameObject(v,E);this.manager.preBatch(v),this.currentShader.set1i("uRoundPixels",m.roundPixels),this.batchQuad(v,K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7],R,I,P,M,rt,ft,vt,mt,v.tintFill,A,yt),this.manager.postBatch(v)},batchTexture:function(v,m,g,T,w,b,E,A,R,I,P,M,F,O,D,L,z,X,H,J,G,k,N,B,U,W,K,q,_,rt,ft,vt,mt){mt===void 0&&(mt=!1),this.manager.set(this,v);var yt=this._tempMatrix1,xt=this._tempMatrix2,It=this._tempMatrix3,Gt=X/g+K,Zt=H/T+q,Bt=(X+J)/g+K,At=(H+G)/T+q,kt=E,Ut=A,ee=-L,te=-z;if(v.isCropped){var fe=v._crop,ae=fe.width,le=fe.height;kt=ae,Ut=le,E=ae,A=le,X=fe.x,H=fe.y;var re=X,we=H;M&&(re=J-fe.x-ae),F&&(we=G-fe.y-le),Gt=re/g+K,Zt=we/T+q,Bt=(re+ae)/g+K,At=(we+le)/T+q,ee=-L+X,te=-z+H}F=F^(!ft&&m.isRenderTexture?1:0),M&&(kt*=-1,ee+=E),F&&(Ut*=-1,te+=A),xt.applyITRS(w,b,P,R,I),yt.copyFrom(_.matrix),rt?(yt.multiplyWithOffset(rt,-_.scrollX*O,-_.scrollY*D),xt.e=w,xt.f=b):(xt.e-=_.scrollX*O,xt.f-=_.scrollY*D),yt.multiply(xt,It);var Se=It.setQuad(ee,te,ee+kt,te+Ut);vt==null&&(vt=this.setTexture2D(m)),v&&!mt&&this.manager.preBatch(v),this.currentShader.set1i("uRoundPixels",_.roundPixels),this.batchQuad(v,Se[0],Se[1],Se[2],Se[3],Se[4],Se[5],Se[6],Se[7],Gt,Zt,Bt,At,k,N,B,U,W,m,vt),v&&!mt&&this.manager.postBatch(v)},batchTextureFrame:function(v,m,g,T,w,b,E){this.manager.set(this);var A=this._tempMatrix1.copyFrom(b),R=this._tempMatrix2;E?A.multiply(E,R):R=A;var I=R.setQuad(m,g,m+v.width,g+v.height),P=this.setTexture2D(v.source.glTexture);T=h.getTintAppendFloatAlpha(T,w),this.batchQuad(null,I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],v.u0,v.v0,v.u1,v.v1,T,T,T,T,0,v.glTexture,P)},batchFillRect:function(v,m,g,T,w,b){this.renderer.pipelines.set(this);var E=this.calcMatrix;b&&b.multiply(w,E);var A=E.setQuad(v,m,v+g,m+T),R=this.fillTint;this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],0,0,1,1,R.TL,R.TR,R.BL,R.BR,2)},batchFillTriangle:function(v,m,g,T,w,b,E,A){this.renderer.pipelines.set(this);var R=this.calcMatrix;A&&A.multiply(E,R);var I=R.getX(v,m),P=R.getY(v,m),M=R.getX(g,T),F=R.getY(g,T),O=R.getX(w,b),D=R.getY(w,b),L=this.fillTint;this.currentShader.set1i("uRoundPixels",!1),this.batchTri(null,I,P,M,F,O,D,0,0,1,1,L.TL,L.TR,L.BL,2)},batchStrokeTriangle:function(v,m,g,T,w,b,E,A,R){var I=this.tempTriangle;I[0].x=v,I[0].y=m,I[0].width=E,I[1].x=g,I[1].y=T,I[1].width=E,I[2].x=w,I[2].y=b,I[2].width=E,I[3].x=v,I[3].y=m,I[3].width=E,this.batchStrokePath(I,E,!1,A,R)},batchFillPath:function(v,m,g){this.renderer.pipelines.set(this);var T=this.calcMatrix;g&&g.multiply(m,T);for(var w=v.length,b=this.polygonCache,E,A,R=this.fillTint.TL,I=this.fillTint.TR,P=this.fillTint.BL,M=0;M<w;++M)A=v[M],b.push(A.x,A.y);E=l(b),w=E.length,this.currentShader.set1i("uRoundPixels",!1);for(var F=0;F<w;F+=3){var O=E[F+0]*2,D=E[F+1]*2,L=E[F+2]*2,z=b[O+0],X=b[O+1],H=b[D+0],J=b[D+1],G=b[L+0],k=b[L+1],N=T.getX(z,X),B=T.getY(z,X),U=T.getX(H,J),W=T.getY(H,J),K=T.getX(G,k),q=T.getY(G,k);this.batchTri(null,N,B,U,W,K,q,0,0,1,1,R,I,P,2)}b.length=0},batchStrokePath:function(v,m,g,T,w){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var b=v.length-1,E=0;E<b;E++){var A=v[E],R=v[E+1];this.batchLine(A.x,A.y,R.x,R.y,A.width/2,R.width/2,m,E,!g&&E===b-1,T,w)}},batchLine:function(v,m,g,T,w,b,E,A,R,I,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(I,M);var F=g-v,O=T-m,D=Math.sqrt(F*F+O*O);if(D!==0){var L=w*(T-m)/D,z=w*(v-g)/D,X=b*(T-m)/D,H=b*(v-g)/D,J=g-X,G=T-H,k=v-L,N=m-z,B=g+X,U=T+H,W=v+L,K=m+z,q=M.getX(J,G),_=M.getY(J,G),rt=M.getX(k,N),ft=M.getY(k,N),vt=M.getX(B,U),mt=M.getY(B,U),yt=M.getX(W,K),xt=M.getY(W,K),It=this.strokeTint,Gt=It.TL,Zt=It.TR,Bt=It.BL,At=It.BR;if(this.currentShader.set1i("uRoundPixels",!1),this.batchQuad(null,yt,xt,rt,ft,q,_,vt,mt,0,0,1,1,Gt,Zt,Bt,At,2),!(E<=2)){var kt=this.prevQuad,Ut=this.firstQuad;A>0&&kt[4]?this.batchQuad(null,yt,xt,rt,ft,kt[0],kt[1],kt[2],kt[3],0,0,1,1,Gt,Zt,Bt,At,2):(Ut[0]=yt,Ut[1]=xt,Ut[2]=rt,Ut[3]=ft,Ut[4]=1),R&&Ut[4]?this.batchQuad(null,q,_,vt,mt,Ut[0],Ut[1],Ut[2],Ut[3],0,0,1,1,Gt,Zt,Bt,At,2):(kt[0]=q,kt[1]=_,kt[2]=vt,kt[3]=mt,kt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,u.prototype.destroy.call(this),this}});o.exports=p},10919:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(83327),r=t(54677),i=t(44775),n=new s({Extends:i,initialize:function(d){d.vertShader=l(d,"vertShader",r),d.fragShader=l(d,"fragShader",a),d.attributes=l(d,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),i.call(this,d)},onRender:function(h,d){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",d.zoom)},batchPointLight:function(h,d,u,p,v,m,g,T,w,b,E,A){var R=h.color,I=h.intensity,P=h.radius,M=h.attenuation,F=R.r*I,O=R.g*I,D=R.b*I,L=d.alpha*h.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(u,p,E,A,P,M,F,O,D,L),this.batchLightVert(v,m,E,A,P,M,F,O,D,L),this.batchLightVert(g,T,E,A,P,M,F,O,D,L),this.batchLightVert(u,p,E,A,P,M,F,O,D,L),this.batchLightVert(g,T,E,A,P,M,F,O,D,L),this.batchLightVert(w,b,E,A,P,M,F,O,D,L),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(h,d,u,p,v,m,g,T,w,b){var E=this.vertexViewF32,A=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++A]=h,E[++A]=d,E[++A]=u,E[++A]=p,E[++A]=v,E[++A]=m,E[++A]=g,E[++A]=T,E[++A]=w,E[++A]=b,this.vertexCount++}});o.exports=n},80486:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(65246),a=t(72632),r=t(12569),i=t(99365),n=t(44775),h=new s({Extends:n,initialize:function(u){u.renderTarget=a(u,"renderTarget",1),u.fragShader=a(u,"fragShader",r),u.vertShader=a(u,"vertShader",i),u.attributes=a(u,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),u.batchSize=1,u.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],n.call(this,u),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new l,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){n.prototype.boot.call(this);var d=this.manager.UTILITY_PIPELINE;this.fullFrame1=d.fullFrame1,this.fullFrame2=d.fullFrame2,this.halfFrame1=d.halfFrame1,this.halfFrame2=d.halfFrame2;var u=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",u.width,u.height),this.set1i("uRoundPixels",u.config.roundPixels);for(var p=this.renderTargets,v=0;v<p.length;v++)p[v].autoResize=!0},postBatch:function(d){return this.hasBooted||this.bootFX(),this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(d){this.bindAndDraw(d)},getController:function(d){return d!==void 0?d:this.controller?this.controller:this},copySprite:function(d,u,p){p===void 0&&(p=!1);var v=this.gl;v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,d.texture);var m=v.getParameter(v.FRAMEBUFFER_BINDING);v.bindFramebuffer(v.FRAMEBUFFER,u.framebuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,u.texture,0),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),p&&(v.bindTexture(v.TEXTURE_2D,null),v.bindFramebuffer(v.FRAMEBUFFER,m))},copyFrame:function(d,u,p,v,m){this.manager.copyFrame(d,u,p,v,m)},copyToGame:function(d){this.manager.copyToGame(d)},drawFrame:function(d,u,p){this.manager.drawFrame(d,u,p,this.colorMatrix)},blendFrames:function(d,u,p,v,m){this.manager.blendFrames(d,u,p,v,m)},blendFramesAdditive:function(d,u,p,v,m){this.manager.blendFramesAdditive(d,u,p,v,m)},clearFrame:function(d,u){this.manager.clearFrame(d,u)},blitFrame:function(d,u,p,v,m,g){this.manager.blitFrame(d,u,p,v,m,g)},copyFrameRect:function(d,u,p,v,m,g,T,w){this.manager.copyFrameRect(d,u,p,v,m,g,T,w)},bindAndDraw:function(d,u,p,v,m){p===void 0&&(p=!0),v===void 0&&(v=!0);var g=this.gl,T=this.renderer;this.bind(m),this.set1i("uMainSampler",0),u?(g.viewport(0,0,u.width,u.height),g.bindFramebuffer(g.FRAMEBUFFER,u.framebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,u.texture,0),p&&(v?g.clearColor(0,0,0,0):g.clearColor(0,0,0,1),g.clear(g.COLOR_BUFFER_BIT))):(T.popFramebuffer(!1,!1),T.currentFramebuffer||g.viewport(0,0,T.width,T.height)),T.restoreStencilMask(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,d.texture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),u&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,T.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,n.prototype.destroy.call(this),this}});o.exports=h},87228:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(79993),a=t(56694),r=t(37486),i=t(72632),n=t(77310),h=t(12569),d=t(74118),u=t(37410),p=t(85060),v=t(18166),m=t(44775),g=new a({Extends:n,initialize:function(w){var b=i(w,"fragShader",h),E=i(w,"vertShader",v),A=i(w,"drawShader",h),R=[{name:"DrawSprite",fragShader:p,vertShader:v},{name:"CopySprite",fragShader:b,vertShader:E},{name:"DrawGame",fragShader:A,vertShader:v},{name:"ColorMatrix",fragShader:r}],I=i(w,"shaders",[]);w.shaders=R.concat(I),w.vertShader||(w.vertShader=E),w.batchSize=1,n.call(this,w),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new d,this.targetBounds=new d,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){m.prototype.boot.call(this);var T=this.shaders,w=this.renderer;this.drawSpriteShader=T[0],this.copyShader=T[1],this.gameShader=T[2],this.colorMatrixShader=T[3],this.fsTarget=new u(w,w.width,w.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var b=new ArrayBuffer(168);this.quadVertexData=b,this.quadVertexViewF32=new Float32Array(b),this.quadVertexBuffer=w.createVertexBuffer(b,this.gl.STATIC_DRAW),this.onResize(w.width,w.height),this.currentShader=this.copyShader,this.set2f("uResolution",w.width,w.height),this.set1i("uRoundPixels",w.config.roundPixels)},onResize:function(T,w){var b=this.quadVertexViewF32;b[1]=w,b[22]=w,b[14]=T,b[28]=T,b[35]=T,b[36]=w},batchQuad:function(T,w,b,E,A,R,I,P,M,F,O,D,L,z,X,H,J,G,k){var N=Math.min(w,E,R,P),B=Math.min(b,A,I,M),U=Math.max(w,E,R,P),W=Math.max(b,A,I,M),K=U-N,q=W-B,_=this.spriteBounds.setTo(N,B,K,q),rt=T?T.preFX.padding:0,ft=K+rt*2,vt=q+rt*2,mt=Math.abs(Math.max(ft,vt)),yt=this.manager.getRenderTarget(mt),xt=this.targetBounds.setTo(0,0,yt.width,yt.height);l(xt,_.centerX,_.centerY),this.tempSprite=T;var It=this.gl,Gt=this.renderer;Gt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Gt.width,Gt.height),this.set1i("uRoundPixels",Gt.config.roundPixels),this.flipProjectionMatrix(!0),T&&(this.onDrawSprite(T,yt),T.preFX.onFX(this));var Zt=this.fsTarget;return this.flush(),It.viewport(0,0,Gt.width,Gt.height),It.bindFramebuffer(It.FRAMEBUFFER,Zt.framebuffer),It.framebufferTexture2D(It.FRAMEBUFFER,It.COLOR_ATTACHMENT0,It.TEXTURE_2D,Zt.texture,0),It.clearColor(0,0,0,0),It.clear(It.COLOR_BUFFER_BIT),this.setTexture2D(k),this.batchVert(w,b,F,O,0,G,z),this.batchVert(E,A,F,L,0,G,H),this.batchVert(R,I,D,L,0,G,J),this.batchVert(w,b,F,O,0,G,z),this.batchVert(R,I,D,L,0,G,J),this.batchVert(P,M,D,O,0,G,X),this.flush(),this.flipProjectionMatrix(!1),It.activeTexture(It.TEXTURE0),It.bindTexture(It.TEXTURE_2D,yt.texture),It.copyTexSubImage2D(It.TEXTURE_2D,0,0,0,xt.x,xt.y,xt.width,xt.height),It.bindFramebuffer(It.FRAMEBUFFER,null),It.bindTexture(It.TEXTURE_2D,null),this.onBatch(T),this.currentShader=this.copyShader,this.onDraw(yt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(T,w,b,E,A,R,I){b===void 0&&(b=!0),E===void 0&&(E=!0),A===void 0&&(A=!1),I===void 0&&(I=this.copyShader);var P=this.gl,M=this.tempSprite;R&&(I=this.colorMatrixShader),this.currentShader=I;var F=this.setVertexBuffer(this.quadVertexBuffer);I.bind(F,!1);var O=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",O.width,O.height),this.set1i("uRoundPixels",O.config.roundPixels),M.preFX.onFXCopy(this),this.onCopySprite(T,w,M),R&&(this.set1fv("uColorMatrix",R.getData()),this.set1f("uAlpha",R.alpha)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,T.texture),T.height>w.height)P.viewport(0,0,T.width,T.height),this.setTargetUVs(T,w);else{var D=w.height-T.height;P.viewport(0,D,T.width,T.height),this.resetUVs()}if(P.bindFramebuffer(P.FRAMEBUFFER,w.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,w.texture,0),b&&(P.clearColor(0,0,0,+!E),P.clear(P.COLOR_BUFFER_BIT)),A){var L=this.renderer.currentBlendMode;this.renderer.setBlendMode(s.ERASE)}P.bufferData(P.ARRAY_BUFFER,this.quadVertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),A&&this.renderer.setBlendMode(L),P.bindFramebuffer(P.FRAMEBUFFER,null)},copy:function(T,w){var b=this.gl;this.set1i("uMainSampler",0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,T.texture),b.viewport(0,0,T.width,T.height),this.setUVs(0,0,0,1,1,1,1,0),b.bindFramebuffer(b.FRAMEBUFFER,w.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,w.texture,0),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.quadVertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null)},blendFrames:function(T,w,b,E,A){this.manager.blendFrames(T,w,b,E,A)},blendFramesAdditive:function(T,w,b,E,A){this.manager.blendFramesAdditive(T,w,b,E,A)},drawToGame:function(T){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(T)},copyToGame:function(T){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(T)},bindAndDraw:function(T){var w=this.gl,b=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(T.texture);var E=this._tempMatrix1.loadIdentity(),A=this.targetBounds.x,R=this.targetBounds.y,I=A+T.width,P=R+T.height,M=E.getX(A,R),F=E.getX(A,P),O=E.getX(I,P),D=E.getX(I,R),L=E.getY(A,R),z=E.getY(A,P),X=E.getY(I,P),H=E.getY(I,R),J=16777215;this.batchVert(M,L,0,0,0,0,J),this.batchVert(F,z,0,1,0,0,J),this.batchVert(O,X,1,1,0,0,J),this.batchVert(M,L,0,0,0,0,J),this.batchVert(O,X,1,1,0,0,J),this.batchVert(D,H,1,0,0,0,J),b.restoreFramebuffer(!1,!0),b.currentFramebuffer||w.viewport(0,0,b.width,b.height),b.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(T){this.drawToGame(T)},setUVs:function(T,w,b,E,A,R,I,P){var M=this.quadVertexViewF32;M[2]=T,M[3]=w,M[9]=b,M[10]=E,M[16]=A,M[17]=R,M[23]=T,M[24]=w,M[30]=A,M[31]=R,M[37]=I,M[38]=P},setTargetUVs:function(T,w){var b=w.height/T.height;b>.5?b=.5-(b-.5):b=.5+(.5-b),this.setUVs(0,b,0,1+b,1,1+b,1,b)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,n.prototype.destroy.call(this),this}});o.exports=g},21213:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(77310),r=new s({Extends:a,initialize:function(n){n.topology=5,n.batchSize=l(n,"batchSize",256),a.call(this,n)}});o.exports=r},51212:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(77310),r=t(85060),i=t(18166),n=t(44775),h=new s({Extends:a,initialize:function(u){u.fragShader=l(u,"fragShader",r),u.vertShader=l(u,"vertShader",i),u.forceZero=!0,a.call(this,u)},boot:function(){n.prototype.boot.call(this);var d=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",d.width,d.height),this.set1i("uRoundPixels",d.config.roundPixels)}});o.exports=h},60848:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2529),l=t(95723),a=t(56694),r=t(65246),i=t(37486),n=t(79060),h=t(72632),d=t(98921),u=t(99365),p=t(44775),v=new a({Extends:p,initialize:function(g){g.renderTarget=h(g,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),g.vertShader=h(g,"vertShader",u),g.shaders=h(g,"shaders",[{name:"Copy",fragShader:n},{name:"AddBlend",fragShader:s},{name:"LinearBlend",fragShader:d},{name:"ColorMatrix",fragShader:i}]),g.attributes=h(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),g.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],g.batchSize=1,p.call(this,g),this.colorMatrix=new r,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){p.prototype.boot.call(this);var m=this.shaders,g=this.renderTargets;this.copyShader=m[0],this.addShader=m[1],this.linearShader=m[2],this.colorMatrixShader=m[3],this.fullFrame1=g[0],this.fullFrame2=g[1],this.halfFrame1=g[2],this.halfFrame2=g[3]},copyFrame:function(m,g,T,w,b){T===void 0&&(T=1),w===void 0&&(w=!0),b===void 0&&(b=!0);var E=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,m.texture),g?(E.viewport(0,0,g.width,g.height),E.bindFramebuffer(E.FRAMEBUFFER,g.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,g.texture,0)):E.viewport(0,0,m.width,m.height),w&&(b?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blitFrame:function(m,g,T,w,b,E,A){T===void 0&&(T=1),w===void 0&&(w=!0),b===void 0&&(b=!0),E===void 0&&(E=!1),A===void 0&&(A=!1);var R=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,m.texture),m.height>g.height)R.viewport(0,0,m.width,m.height),this.setTargetUVs(m,g);else{var I=g.height-m.height;R.viewport(0,I,m.width,m.height)}if(R.bindFramebuffer(R.FRAMEBUFFER,g.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,g.texture,0),w&&(b?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),E){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(l.ERASE)}A&&this.flipY(),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),E&&this.renderer.setBlendMode(P),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(m,g,T,w,b,E,A,R){A===void 0&&(A=!0),R===void 0&&(R=!0);var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,m.framebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,m.texture,0),A&&(R?I.clearColor(0,0,0,0):I.clearColor(0,0,0,1),I.clear(I.COLOR_BUFFER_BIT)),I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,g.texture),I.copyTexSubImage2D(I.TEXTURE_2D,0,0,0,T,w,b,E),I.bindFramebuffer(I.FRAMEBUFFER,null),I.bindTexture(I.TEXTURE_2D,null)},copyToGame:function(m){var g=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,m.texture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6)},drawFrame:function(m,g,T,w){T===void 0&&(T=!0),w===void 0&&(w=this.colorMatrix);var b=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",w.getData()),this.set1f("uAlpha",w.alpha),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,m.texture),g?(b.viewport(0,0,g.width,g.height),b.bindFramebuffer(b.FRAMEBUFFER,g.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,g.texture,0)):b.viewport(0,0,m.width,m.height),T?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.vertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)},blendFrames:function(m,g,T,w,b,E){w===void 0&&(w=1),b===void 0&&(b=!0),E===void 0&&(E=this.linearShader);var A=this.gl;this.setShader(E),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",w),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,m.texture),A.activeTexture(A.TEXTURE1),A.bindTexture(A.TEXTURE_2D,g.texture),T?(A.bindFramebuffer(A.FRAMEBUFFER,T.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,T.texture,0),A.viewport(0,0,T.width,T.height)):A.viewport(0,0,m.width,m.height),b?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blendFramesAdditive:function(m,g,T,w,b){this.blendFrames(m,g,T,w,b,this.addShader)},clearFrame:function(m,g){g===void 0&&(g=!0);var T=this.gl;T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer),g?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT);var w=this.renderer.currentFramebuffer;T.bindFramebuffer(T.FRAMEBUFFER,w)},setUVs:function(m,g,T,w,b,E,A,R){var I=this.vertexViewF32;I[2]=m,I[3]=g,I[6]=T,I[7]=w,I[10]=b,I[11]=E,I[14]=m,I[15]=g,I[18]=b,I[19]=E,I[22]=A,I[23]=R},setTargetUVs:function(m,g){var T=g.height/m.height;T>.5?T=.5-(T-.5):T=.5+(.5-T),this.setUVs(0,T,0,1+T,1,1+T,1,T)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});o.exports=v},65641:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};o.exports=x},68726:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineafterflush"},67186:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebeforeflush"},22709:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebind"},74469:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineboot"},93953:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinedestroy"},51687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinerebind"},25034:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineresize"},18970:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_FLUSH:t(68726),BEFORE_FLUSH:t(67186),BIND:t(22709),BOOT:t(74469),DESTROY:t(93953),REBIND:t(51687),RESIZE:t(25034)}},32469:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(87751),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.amount=1},onPreRender:function(i,n){i=this.getController(i),this.set1f("amount",i.amount,n)}});o.exports=r},2134:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(88222),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(i){i=this.getController(i),this.set1f("strength",i.blurStrength),this.set3fv("color",i.glcolor)},onDraw:function(i){var n=this.getController(),h=this.fullFrame1,d=this.fullFrame2;this.copyFrame(i,d);for(var u=2/i.width*n.offsetX,p=2/i.height*n.offsetY,v=0;v<n.steps;v++)this.set2f("offset",u,0),this.copySprite(i,h),this.set2f("offset",0,p),this.copySprite(h,i);this.blendFrames(d,i,h,n.strength),this.copyToGame(h)}});o.exports=r},63377:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(35491),a=t(75568),r=t(44481),i=t(80486),n=new s({Extends:i,initialize:function(d){i.call(this,{game:d,shaders:[{name:"Gaussian5",fragShader:l},{name:"Gaussian9",fragShader:a},{name:"Gaussian13",fragShader:r}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(h){var d=this.getController(),u=this.gl,p=this.fullFrame1,v=u.getParameter(u.FRAMEBUFFER_BINDING);this.bind(this.shaders[d.quality]),u.activeTexture(u.TEXTURE0),u.viewport(0,0,h.width,h.height),this.set1i("uMainSampler",0),this.set2f("resolution",h.width,h.height),this.set1f("strength",d.strength),this.set3fv("color",d.glcolor);for(var m=0;m<d.steps;m++)this.set2f("offset",d.x,0),this.copySprite(h,p),this.set2f("offset",0,d.y),this.copySprite(p,h);u.bindFramebuffer(u.FRAMEBUFFER,v),u.bindTexture(u.TEXTURE_2D,null),this.copyToGame(h)}});o.exports=n},49745:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(69960),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(i,n,h,d){i=this.getController(i),this.set1f("radius",i.radius,n),this.set1f("amount",i.amount,n),this.set1f("contrast",i.contrast,n),this.set1f("strength",i.strength,n),this.set2f("blur",i.blurX,i.blurY,n),this.setBoolean("isTiltShift",i.isTiltShift,n),h&&d&&this.set2f("resolution",h,d,n)},onDraw:function(i){this.set2f("resolution",i.width,i.height),this.bindAndDraw(i)}});o.exports=r},4323:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(33754),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(i,n,h,d){i=this.getController(i),this.set1f("scale",i.scale,n),this.set1f("feather",i.feather,n),this.set1f("thickness",i.thickness,n),this.set3fv("color",i.glcolor,n),this.set4fv("backgroundColor",i.glcolor2,n),h&&d&&this.set2f("resolution",h,d,n)},onDraw:function(i){this.set2f("resolution",i.width,i.height),this.bindAndDraw(i)}});o.exports=r},92066:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(80486),a=new s({Extends:l,initialize:function(i){l.call(this,{game:i})},onDraw:function(r){var i=this.fullFrame1;this.controller?this.manager.drawFrame(r,i,!0,this.controller):this.drawFrame(r,i),this.copyToGame(i)}});o.exports=a},89581:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(35668),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(i){var n=this.game.textures.getFrame(i);n&&(this.glTexture=n.glTexture)},onDraw:function(i){var n=this.getController(),h=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.copySprite(i,h),this.copyToGame(h)}});o.exports=r},55084:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(69675),r=t(80486),i=t(75512),n=new s({Extends:r,initialize:function(d,u){var p=l(u,"quality",.1),v=l(u,"distance",10);r.call(this,{game:d,fragShader:i.setGlowQuality(a,d,p,v)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(h,d,u,p){h=this.getController(h),this.set1f("outerStrength",h.outerStrength,d),this.set1f("innerStrength",h.innerStrength,d),this.set4fv("glowColor",h.glcolor,d),this.setBoolean("knockout",h.knockout,d),u&&p&&this.set2f("resolution",u,p,d)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=n},41653:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(90993),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(i,n){i=this.getController(i),this.set1f("alpha",i.alpha,n),this.set1i("size",i.size,n),this.set3fv("color1",i.glcolor1,n),this.set3fv("color2",i.glcolor2,n),this.set2f("positionFrom",i.fromX,i.fromY,n),this.set2f("positionTo",i.toX,i.toY,n)}});o.exports=r},73416:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(37945),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.amount=1},onPreRender:function(i,n,h,d){i=this.getController(i),this.set1f("amount",i.amount,n),h&&d&&this.set2f("resolution",h,d,n)},onDraw:function(i){this.set2f("resolution",i.width,i.height),this.bindAndDraw(i)}});o.exports=r},58049:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(85718),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(i,n){i=this.getController(i);var h=i.samples;this.set1i("samples",h,n),this.set1f("intensity",i.intensity,n),this.set1f("decay",i.decay,n),this.set1f("power",i.power/h,n),this.set2f("lightPosition",i.x,i.y,n),this.set4fv("color",i.glcolor,n)}});o.exports=r},18026:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(13740),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(i,n,h,d){i=this.getController(i),this.setTime("time",n),this.set1f("speed",i.speed,n),this.set1f("lineWidth",i.lineWidth,n),this.set1f("gradient",i.gradient,n),this.setBoolean("reveal",i.reveal,n),h&&d&&this.set2f("resolution",h,d,n)},onDraw:function(i){this.set2f("resolution",i.width,i.height),this.bindAndDraw(i)}});o.exports=r},72381:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(80617),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(i,n){i=this.getController(i),this.set1f("radius",i.radius,n),this.set1f("strength",i.strength,n),this.set2f("position",i.x,i.y,n)}});o.exports=r},80542:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(62879),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(i,n){i=this.getController(i);var h=i.progress,d=i.wipeWidth,u=i.direction,p=i.axis;this.set4f("config",h,d,u,p,n),this.setBoolean("reveal",i.reveal,n)}});o.exports=r},58136:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Barrel:t(32469),Bloom:t(2134),Blur:t(63377),Bokeh:t(49745),Circle:t(4323),ColorMatrix:t(92066),Displacement:t(89581),Glow:t(55084),Gradient:t(41653),Pixelate:t(73416),Shadow:t(58049),Shine:t(18026),Vignette:t(72381),Wipe:t(80542)};o.exports=s},62253:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65641),l=t(98611),a={FX:t(58136),BitmapMaskPipeline:t(5583),Events:t(18970),FXPipeline:t(81828),LightPipeline:t(66901),MobilePipeline:t(71264),MultiPipeline:t(77310),PointLightPipeline:t(10919),PostFXPipeline:t(80486),PreFXPipeline:t(87228),RopePipeline:t(21213),SinglePipeline:t(51212),UtilityPipeline:t(60848)};a=l(!1,a,s),o.exports=a},2529:o=>{o.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:o=>{o.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:o=>{o.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:o=>{o.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:o=>{o.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:o=>{o.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:o=>{o.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:o=>{o.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:o=>{o.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:o=>{o.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:o=>{o.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:o=>{o.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:o=>{o.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:o=>{o.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:o=>{o.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:o=>{o.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:o=>{o.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:o=>{o.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:o=>{o.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:o=>{o.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:o=>{o.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:o=>{o.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:o=>{o.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:o=>{o.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AddBlendFrag:t(2529),BitmapMaskFrag:t(91679),BitmapMaskVert:t(89053),ColorMatrixFrag:t(37486),CopyFrag:t(79060),FXBarrelFrag:t(87751),FXBloomFrag:t(88222),FXBlurHighFrag:t(44481),FXBlurLowFrag:t(35491),FXBlurMedFrag:t(75568),FXBokehFrag:t(69960),FXCircleFrag:t(33754),FXDisplacementFrag:t(35668),FXGlowFrag:t(69675),FXGradientFrag:t(90993),FXPixelateFrag:t(37945),FXShadowFrag:t(85718),FXShineFrag:t(13740),FXVignetteFrag:t(80617),FXWipeFrag:t(62879),LightFrag:t(65045),LinearBlendFrag:t(98921),MeshFrag:t(25005),MeshVert:t(94914),MobileFrag:t(11263),MobileVert:t(51852),MultiFrag:t(53787),MultiVert:t(15968),PointLightFrag:t(83327),PointLightVert:t(54677),PostFXFrag:t(12569),QuadVert:t(99365),SingleFrag:t(85060),SingleVert:t(18166)}},756:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(55301),l=t(56694),a=t(6659),r=t(40444),i=t(97081),n=t(74181),h=t(2893),d=t(9229),u=t(72283),p=t(74118),v=t(90881),m=t(84314),g=t(93736),T=t(47751),w=new l({Extends:a,initialize:function(E){a.call(this),this.game=E,this.canvas,this.canvasBounds=new p,this.parent=null,this.parentIsWindow=!1,this.parentSize=new v,this.gameSize=new v,this.baseSize=new v,this.displaySize=new v,this.scaleMode=s.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new g(1,1),this.autoRound=!1,this.autoCenter=s.CENTER.NO_CENTER,this.orientation=s.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:u,windowResize:u,fullScreenChange:u,fullScreenError:u}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(i.BOOT,this.boot,this)},boot:function(){var b=this.game;this.canvas=b.canvas,this.fullscreen=b.device.fullscreen,this.scaleMode!==s.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===s.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),b.events.on(i.PRE_STEP,this.step,this),b.events.once(i.READY,this.refresh,this),b.events.once(i.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(b){this.getParent(b),this.getParentBounds();var E=b.width,A=b.height,R=b.scaleMode,I=b.zoom,P=b.autoRound;if(typeof E=="string")if(E.substr(-1)!=="%")E=parseInt(E,10);else{var M=this.parentSize.width;M===0&&(M=window.innerWidth);var F=parseInt(E,10)/100;E=Math.floor(M*F)}if(typeof A=="string")if(A.substr(-1)!=="%")A=parseInt(A,10);else{var O=this.parentSize.height;O===0&&(O=window.innerHeight);var D=parseInt(A,10)/100;A=Math.floor(O*D)}this.scaleMode=R,this.autoRound=P,this.autoCenter=b.autoCenter,this.resizeInterval=b.resizeInterval,P&&(E=Math.floor(E),A=Math.floor(A)),this.gameSize.setSize(E,A),I===s.ZOOM.MAX_ZOOM&&(I=this.getMaxZoom()),this.zoom=I,I!==1&&(this._resetZoom=!0),this.baseSize.setSize(E,A),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),b.minWidth>0&&this.displaySize.setMin(b.minWidth*I,b.minHeight*I),b.maxWidth>0&&this.displaySize.setMax(b.maxWidth*I,b.maxHeight*I),this.displaySize.setSize(E,A),this.orientation=d(E,A)},getParent:function(b){var E=b.parent;if(E!==null){if(this.parent=h(E),this.parentIsWindow=this.parent===document.body,b.expandParent&&b.scaleMode!==s.SCALE_MODE.NONE){var A=this.parent.getBoundingClientRect();(this.parentIsWindow||A.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",A=this.parent.getBoundingClientRect(),!this.parentIsWindow&&A.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}b.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=h(b.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var b=this.parentSize,E=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(E.height=n(!0));var A=E.width,R=E.height;if(b.width!==A||b.height!==R)return b.setSize(A,R),!0;if(this.canvas){var I=this.canvasBounds,P=this.canvas.getBoundingClientRect();if(P.x!==I.x||P.y!==I.y)return!0}return!1},lockOrientation:function(b){var E=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return E?E.call(screen,b):!1},setParentSize:function(b,E){return this.parentSize.setSize(b,E),this.refresh()},setGameSize:function(b,E){var A=this.autoRound;A&&(b=Math.floor(b),E=Math.floor(E));var R=this.width,I=this.height;return this.gameSize.resize(b,E),this.baseSize.resize(b,E),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(b/E),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(R,I)},resize:function(b,E){var A=this.zoom,R=this.autoRound;R&&(b=Math.floor(b),E=Math.floor(E));var I=this.width,P=this.height;this.gameSize.resize(b,E),this.baseSize.resize(b,E),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(b*A,E*A),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var M=this.canvas.style,F=b*A,O=E*A;return R&&(F=Math.floor(F),O=Math.floor(O)),(F!==b||O!==E)&&(M.width=F+"px",M.height=O+"px"),this.refresh(I,P)},setZoom:function(b){return this.zoom=b,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(b,E){b===void 0&&(b=this.width),E===void 0&&(E=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var A=this.game.domContainer;if(A){this.baseSize.setCSS(A);var R=this.canvas.style,I=A.style;I.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",I.marginLeft=R.marginLeft,I.marginTop=R.marginTop}return this.emit(r.RESIZE,this.gameSize,this.baseSize,this.displaySize,b,E),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var b=d(this.width,this.height);b!==this.orientation&&(this.orientation=b,this.emit(r.ORIENTATION_CHANGE,b))}},updateScale:function(){var b=this.canvas.style,E=this.gameSize.width,A=this.gameSize.height,R,I,P=this.zoom,M=this.autoRound;this.scaleMode===s.SCALE_MODE.NONE?(this.displaySize.setSize(E*P,A*P),R=this.displaySize.width,I=this.displaySize.height,M&&(R=Math.floor(R),I=Math.floor(I)),this._resetZoom&&(b.width=R+"px",b.height=I+"px",this._resetZoom=!1)):this.scaleMode===s.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),R=this.displaySize.width,I=this.displaySize.height,M&&(R=Math.floor(R),I=Math.floor(I)),this.canvas.width=R,this.canvas.height=I):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),R=this.displaySize.width,I=this.displaySize.height,M&&(R=Math.floor(R),I=Math.floor(I)),b.width=R+"px",b.height=I+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var b=m(this.parentSize.width,this.gameSize.width,0,!0),E=m(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(b,E),1)},updateCenter:function(){var b=this.autoCenter;if(b!==s.CENTER.NO_CENTER){var E=this.canvas,A=E.style,R=E.getBoundingClientRect(),I=R.width,P=R.height,M=Math.floor((this.parentSize.width-I)/2),F=Math.floor((this.parentSize.height-P)/2);b===s.CENTER.CENTER_HORIZONTALLY?F=0:b===s.CENTER.CENTER_VERTICALLY&&(M=0),A.marginLeft=M+"px",A.marginTop=F+"px"}},updateBounds:function(){var b=this.canvasBounds,E=this.canvas.getBoundingClientRect();b.x=E.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),b.y=E.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),b.width=E.width,b.height=E.height},transformX:function(b){return(b-this.canvasBounds.left)*this.displayScale.x},transformY:function(b){return(b-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(b){b===void 0&&(b={navigationUI:"hide"});var E=this.fullscreen;if(!E.available){this.emit(r.FULLSCREEN_UNSUPPORTED);return}if(!E.active){var A=this.getFullscreenTarget();E.keyboard?A[E.request](Element.ALLOW_KEYBOARD_INPUT):A[E.request](b)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(r.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(b){this.removeFullscreenTarget(),this.emit(r.FULLSCREEN_FAILED,b)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var b=document.createElement("div");b.style.margin="0",b.style.padding="0",b.style.width="100%",b.style.height="100%",this.fullscreenTarget=b,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var E=this.canvas.parentNode;E.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var b=this.fullscreenTarget;if(b&&b.parentNode){var E=b.parentNode;E.insertBefore(this.canvas,b),E.removeChild(b)}}},stopFullscreen:function(){var b=this.fullscreen;if(!b.available)return this.emit(r.FULLSCREEN_UNSUPPORTED),!1;b.active&&document[b.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(r.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(b){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(b)},startListeners:function(){var b=this,E=this.domlisteners;if(E.orientationChange=function(){b.updateBounds(),b._checkOrientation=!0,b.dirty=!0},E.windowResize=function(){b.updateBounds(),b.dirty=!0},window.addEventListener("orientationchange",E.orientationChange,!1),window.addEventListener("resize",E.windowResize,!1),this.fullscreen.available){E.fullScreenChange=function(R){return b.onFullScreenChange(R)},E.fullScreenError=function(R){return b.onFullScreenError(R)};var A=["webkit","moz",""];A.forEach(function(R){document.addEventListener(R+"fullscreenchange",E.fullScreenChange,!1),document.addEventListener(R+"fullscreenerror",E.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.addEventListener("MSFullscreenError",E.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(b,E){b instanceof T||(E=b,b=void 0),E===void 0&&(E=new p);var A=this.baseSize,R=this.parentSize,I=this.canvasBounds,P=this.displayScale,M=I.x>=0?0:-(I.x*P.x),F=I.y>=0?0:-(I.y*P.y),O;R.width>=I.width?O=A.width:O=A.width-(I.width-R.width)*P.x;var D;return R.height>=I.height?D=A.height:D=A.height-(I.height-R.height)*P.y,E.setTo(M,F,O,D),b&&(E.width/=b.zoomX,E.height/=b.zoomY,E.centerX=b.centerX+b.scrollX,E.centerY=b.centerY+b.scrollY),E},step:function(b,E){this.parent&&(this._lastCheck+=E,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var b=this.domlisteners;window.removeEventListener("orientationchange",b.orientationChange,!1),window.removeEventListener("resize",b.windowResize,!1);var E=["webkit","moz",""];E.forEach(function(A){document.removeEventListener(A+"fullscreenchange",b.fullScreenChange,!1),document.removeEventListener(A+"fullscreenerror",b.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",b.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",b.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===s.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===s.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});o.exports=w},35098:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={CENTER:t(35098),ORIENTATION:t(53539),SCALE_MODE:t(12637),ZOOM:t(10217)};o.exports=s},82085:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="enterfullscreen"},11826:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenfailed"},56691:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenunsupported"},34739:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="leavefullscreen"},26681:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="orientationchange"},11428:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"},40444:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ENTER_FULLSCREEN:t(82085),FULLSCREEN_FAILED:t(11826),FULLSCREEN_UNSUPPORTED:t(56691),LEAVE_FULLSCREEN:t(34739),ORIENTATION_CHANGE:t(26681),RESIZE:t(11428)}},86754:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(55301),a={Center:t(35098),Events:t(40444),Orientation:t(53539),ScaleManager:t(756),ScaleModes:t(12637),Zoom:t(10217)};a=s(!1,a,l.CENTER),a=s(!1,a,l.ORIENTATION),a=s(!1,a,l.SCALE_MODE),a=s(!1,a,l.ZOOM),o.exports=a},47736:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=t(40587),a=function(r){var i=r.game.config.defaultPhysicsSystem,n=s(r.settings,"physics",!1);if(!(!i&&!n)){var h=[];if(i&&h.push(l(i+"Physics")),n)for(var d in n)d=l(d.concat("Physics")),h.indexOf(d)===-1&&h.push(d);return h}};o.exports=a},91088:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a){var r=a.plugins.getDefaultScenePlugins(),i=s(a.settings,"plugins",!1);return Array.isArray(i)?i:r||[]};o.exports=l},90415:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};o.exports=x},87157:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(63946),a=new s({initialize:function(i){this.sys=new l(this,i),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});o.exports=a},13553:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(92980),a=t(7599),r=t(97081),i=t(10850),n=t(683),h=t(72283),d=t(87157),u=t(63946),p=new s({initialize:function(m,g){if(this.game=m,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,g){Array.isArray(g)||(g=[g]);for(var T=0;T<g.length;T++)this._pending.push({key:"default",scene:g[T],autoStart:T===0,data:{}})}m.events.once(r.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new d),this.game.events.emit(r.SYSTEM_READY,this.systemScene,this);var v,m,g,T;for(v=0;v<this._pending.length;v++){m=this._pending[v],g=m.key,T=m.scene;var w;T instanceof d?w=this.createSceneFromInstance(g,T):typeof T=="object"?w=this.createSceneFromObject(g,T):typeof T=="function"&&(w=this.createSceneFromFunction(g,T)),g=w.sys.settings.key,this.keys[g]=w,this.scenes.push(w),this._data[g]&&(w.sys.settings.data=this._data[g].data,this._data[g].autoStart&&(m.autoStart=!0)),(m.autoStart||w.sys.settings.active)&&this._start.push(g)}for(this._pending.length=0,this._data={},this.isBooted=!0,v=0;v<this._start.length;v++)m=this._start[v],this.start(m);this._start.length=0}},processQueue:function(){var v=this._pending.length,m=this._queue.length;if(!(v===0&&m===0)){var g,T;if(v){for(g=0;g<v;g++)T=this._pending[g],this.add(T.key,T.scene,T.autoStart,T.data);for(g=0;g<this._start.length;g++)T=this._start[g],this.start(T);this._start.length=0,this._pending.length=0}for(g=0;g<this._queue.length;g++)T=this._queue[g],this[T.op](T.keyA,T.keyB);this._queue.length=0}},add:function(v,m,g,T){if(g===void 0&&(g=!1),T===void 0&&(T={}),this.isProcessing||!this.isBooted)return this._pending.push({key:v,scene:m,autoStart:g,data:T}),this.isBooted||(this._data[v]={data:T}),null;v=this.getKey(v,m);var w;return m instanceof d?w=this.createSceneFromInstance(v,m):typeof m=="object"?(m.key=v,w=this.createSceneFromObject(v,m)):typeof m=="function"&&(w=this.createSceneFromFunction(v,m)),w.sys.settings.data=T,v=w.sys.settings.key,this.keys[v]=w,this.scenes.push(w),(g||w.sys.settings.active)&&(this._pending.length?this._start.push(v):this.start(v)),w},remove:function(v){if(this.isProcessing)this._queue.push({op:"remove",keyA:v,keyB:null});else{var m=this.getScene(v);if(!m||m.sys.isTransitioning())return this;var g=this.scenes.indexOf(m),T=m.sys.settings.key;g>-1&&(delete this.keys[T],this.scenes.splice(g,1),this._start.indexOf(T)>-1&&(g=this._start.indexOf(T),this._start.splice(g,1)),m.sys.destroy())}return this},bootScene:function(v){var m=v.sys,g=m.settings;m.sceneUpdate=h,v.init&&(v.init.call(v,g.data),g.status=l.INIT,g.isTransition&&m.events.emit(a.TRANSITION_INIT,g.transitionFrom,g.transitionDuration));var T;m.load&&(T=m.load,T.reset()),T&&v.preload?(v.preload.call(v),g.status=l.LOADING,T.once(n.COMPLETE,this.loadComplete,this),T.start()):this.create(v)},loadComplete:function(v){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(v.scene)},payloadComplete:function(v){this.bootScene(v.scene)},update:function(v,m){this.processQueue(),this.isProcessing=!0;for(var g=this.scenes.length-1;g>=0;g--){var T=this.scenes[g].sys;T.settings.status>l.START&&T.settings.status<=l.RUNNING&&T.step(v,m),T.scenePlugin._target&&T.scenePlugin.step(v,m)}},render:function(v){for(var m=0;m<this.scenes.length;m++){var g=this.scenes[m].sys;g.settings.visible&&g.settings.status>=l.LOADING&&g.settings.status<l.SLEEPING&&g.render(v)}this.isProcessing=!1},create:function(v){var m=v.sys,g=m.settings;v.create&&(g.status=l.CREATING,v.create.call(v,g.data),g.status===l.DESTROYED)||(g.isTransition&&m.events.emit(a.TRANSITION_START,g.transitionFrom,g.transitionDuration),v.update&&(m.sceneUpdate=v.update),g.status=l.RUNNING,m.events.emit(a.CREATE,v))},createSceneFromFunction:function(v,m){var g=new m;if(g instanceof d){var T=g.sys.settings.key;if(T!==""&&(v=T),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return this.createSceneFromInstance(v,g)}else return g.sys=new u(g),g.sys.settings.key=v,g.sys.init(this.game),g},createSceneFromInstance:function(v,m){var g=m.sys.settings.key;return g===""&&(m.sys.settings.key=v),m.sys.init(this.game),m},createSceneFromObject:function(v,m){var g=new d(m),T=g.sys.settings.key;T!==""?v=T:g.sys.settings.key=v,g.sys.init(this.game);for(var w=["init","preload","create","update","render"],b=0;b<w.length;b++){var E=i(m,w[b],null);E&&(g[w[b]]=E)}if(m.hasOwnProperty("extend")){for(var A in m.extend)if(m.extend.hasOwnProperty(A)){var R=m.extend[A];A==="data"&&g.hasOwnProperty("data")&&typeof R=="object"?g.data.merge(R):A!=="sys"&&(g[A]=R)}}return g},getKey:function(v,m){if(v||(v="default"),typeof m=="function")return v;if(m instanceof d?v=m.sys.settings.key:typeof m=="object"&&m.hasOwnProperty("key")&&(v=m.key),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return v},getScenes:function(v,m){v===void 0&&(v=!0),m===void 0&&(m=!1);for(var g=[],T=this.scenes,w=0;w<T.length;w++){var b=T[w];b&&(!v||v&&b.sys.isActive())&&g.push(b)}return m?g.reverse():g},getScene:function(v){if(typeof v=="string"){if(this.keys[v])return this.keys[v]}else for(var m=0;m<this.scenes.length;m++)if(v===this.scenes[m])return v;return null},isActive:function(v){var m=this.getScene(v);return m?m.sys.isActive():null},isPaused:function(v){var m=this.getScene(v);return m?m.sys.isPaused():null},isVisible:function(v){var m=this.getScene(v);return m?m.sys.isVisible():null},isSleeping:function(v){var m=this.getScene(v);return m?m.sys.isSleeping():null},pause:function(v,m){var g=this.getScene(v);return g&&g.sys.pause(m),this},resume:function(v,m){var g=this.getScene(v);return g&&g.sys.resume(m),this},sleep:function(v,m){var g=this.getScene(v);return g&&!g.sys.isTransitioning()&&g.sys.sleep(m),this},wake:function(v,m){var g=this.getScene(v);return g&&g.sys.wake(m),this},run:function(v,m){var g=this.getScene(v);if(!g){for(var T=0;T<this._pending.length;T++)if(this._pending[T].key===v){this.queueOp("start",v,m);break}return this}g.sys.isSleeping()?g.sys.wake(m):g.sys.isPaused()?g.sys.resume(m):this.start(v,m)},start:function(v,m){if(!this.isBooted)return this._data[v]={autoStart:!0,data:m},this;var g=this.getScene(v);if(!g)return console.warn("Scene not found for key: "+v),this;var T=g.sys,w=T.settings.status;if(w>=l.START&&w<=l.CREATING)return this;if(w>=l.RUNNING&&w<=l.SLEEPING)T.shutdown(),T.sceneUpdate=h,T.start(m);else{T.sceneUpdate=h,T.start(m);var b;if(T.load&&(b=T.load),b&&T.settings.hasOwnProperty("pack")&&(b.reset(),b.addPack({payload:T.settings.pack})))return T.settings.status=l.LOADING,b.once(n.COMPLETE,this.payloadComplete,this),b.start(),this}return this.bootScene(g),this},stop:function(v,m){var g=this.getScene(v);if(g&&!g.sys.isTransitioning()&&g.sys.settings.status!==l.SHUTDOWN){var T=g.sys.load;T&&(T.off(n.COMPLETE,this.loadComplete,this),T.off(n.COMPLETE,this.payloadComplete,this)),g.sys.shutdown(m)}return this},switch:function(v,m){var g=this.getScene(v),T=this.getScene(m);return g&&T&&g!==T&&(this.sleep(v),this.isSleeping(m)?this.wake(m):this.start(m)),this},getAt:function(v){return this.scenes[v]},getIndex:function(v){var m=this.getScene(v);return this.scenes.indexOf(m)},bringToTop:function(v){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:v,keyB:null});else{var m=this.getIndex(v);if(m!==-1&&m<this.scenes.length){var g=this.getScene(v);this.scenes.splice(m,1),this.scenes.push(g)}}return this},sendToBack:function(v){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:v,keyB:null});else{var m=this.getIndex(v);if(m!==-1&&m>0){var g=this.getScene(v);this.scenes.splice(m,1),this.scenes.unshift(g)}}return this},moveDown:function(v){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:v,keyB:null});else{var m=this.getIndex(v);if(m>0){var g=m-1,T=this.getScene(v),w=this.getAt(g);this.scenes[m]=w,this.scenes[g]=T}}return this},moveUp:function(v){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:v,keyB:null});else{var m=this.getIndex(v);if(m<this.scenes.length-1){var g=m+1,T=this.getScene(v),w=this.getAt(g);this.scenes[m]=w,this.scenes[g]=T}}return this},moveAbove:function(v,m){if(v===m)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:v,keyB:m});else{var g=this.getIndex(v),T=this.getIndex(m);if(g!==-1&&T!==-1&&T<g){var w=this.getAt(T);this.scenes.splice(T,1),this.scenes.splice(g+(T>g),0,w)}}return this},moveBelow:function(v,m){if(v===m)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:v,keyB:m});else{var g=this.getIndex(v),T=this.getIndex(m);if(g!==-1&&T!==-1&&T>g){var w=this.getAt(T);this.scenes.splice(T,1),g===0?this.scenes.unshift(w):this.scenes.splice(g-(T<g),0,w)}}return this},queueOp:function(v,m,g){return this._queue.push({op:v,keyA:m,keyB:g}),this},swapPosition:function(v,m){if(v===m)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:v,keyB:m});else{var g=this.getIndex(v),T=this.getIndex(m);if(g!==T&&g!==-1&&T!==-1){var w=this.getAt(g);this.scenes[g]=this.scenes[T],this.scenes[T]=w}}return this},dump:function(){for(var v=[],m=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],g=0;g<this.scenes.length;g++){var T=this.scenes[g].sys,w=T.settings.visible&&(T.settings.status===l.RUNNING||T.settings.status===l.PAUSED)?"[*] ":"[-] ";w+=T.settings.key+" ("+m[T.settings.status]+")",v.push(w)}console.log(v.join(`
`))},destroy:function(){for(var v=0;v<this.scenes.length;v++){var m=this.scenes[v].sys;m.destroy()}this.systemScene.sys.destroy(),this.update=h,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});o.exports=p},64051:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(7599),r=t(72632),i=t(91963),n=new l({initialize:function(d){this.scene=d,this.systems=d.sys,this.settings=d.sys.settings,this.key=d.sys.settings.key,this.manager=d.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,d.sys.events.once(a.BOOT,this.boot,this),d.sys.events.on(a.START,this.pluginStart,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},start:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",h,d),this},restart:function(h){var d=this.key;return this.manager.queueOp("stop",d),this.manager.queueOp("start",d,h),this},transition:function(h){h===void 0&&(h={});var d=r(h,"target",!1),u=this.manager.getScene(d);if(!d||!this.checkValidTransition(u))return!1;var p=r(h,"duration",1e3);this._elapsed=0,this._target=u,this._duration=p,this._willSleep=r(h,"sleep",!1),this._willRemove=r(h,"remove",!1);var v=r(h,"onUpdate",null);v&&(this._onUpdate=v,this._onUpdateScope=r(h,"onUpdateScope",this.scene));var m=r(h,"allowInput",!1);this.settings.transitionAllowInput=m;var g=u.sys.settings;g.isTransition=!0,g.transitionFrom=this.scene,g.transitionDuration=p,g.transitionAllowInput=m,r(h,"moveAbove",!1)?this.manager.moveAbove(this.key,d):r(h,"moveBelow",!1)&&this.manager.moveBelow(this.key,d),u.sys.isSleeping()?u.sys.wake(r(h,"data")):this.manager.start(d,r(h,"data"));var T=r(h,"onStart",null),w=r(h,"onStartScope",this.scene);return T&&T.call(w,this.scene,u,p),this.systems.events.emit(a.TRANSITION_OUT,u,p),!0},checkValidTransition:function(h){return!(!h||h.sys.isActive()||h.sys.isTransitioning()||h===this.scene||this.systems.isTransitioning())},step:function(h,d){this._elapsed+=d,this.transitionProgress=s(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var h=this._target.sys,d=this._target.sys.settings;h.events.emit(a.TRANSITION_COMPLETE,this.scene),d.isTransition=!1,d.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(h,d,u,p){return this.manager.add(h,d,u,p)},launch:function(h,d){return h&&h!==this.key&&this.manager.queueOp("start",h,d),this},run:function(h,d){return h&&h!==this.key&&this.manager.queueOp("run",h,d),this},pause:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("pause",h,d),this},resume:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("resume",h,d),this},sleep:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("sleep",h,d),this},wake:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("wake",h,d),this},switch:function(h){return h!==this.key&&this.manager.queueOp("switch",this.key,h),this},stop:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("stop",h,d),this},setActive:function(h,d,u){d===void 0&&(d=this.key);var p=this.manager.getScene(d);return p&&p.sys.setActive(h,u),this},setVisible:function(h,d){d===void 0&&(d=this.key);var u=this.manager.getScene(d);return u&&u.sys.setVisible(h),this},isSleeping:function(h){return h===void 0&&(h=this.key),this.manager.isSleeping(h)},isActive:function(h){return h===void 0&&(h=this.key),this.manager.isActive(h)},isPaused:function(h){return h===void 0&&(h=this.key),this.manager.isPaused(h)},isVisible:function(h){return h===void 0&&(h=this.key),this.manager.isVisible(h)},swapPosition:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.swapPosition(h,d),this},moveAbove:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.moveAbove(h,d),this},moveBelow:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.moveBelow(h,d),this},remove:function(h){return h===void 0&&(h=this.key),this.manager.remove(h),this},moveUp:function(h){return h===void 0&&(h=this.key),this.manager.moveUp(h),this},moveDown:function(h){return h===void 0&&(h=this.key),this.manager.moveDown(h),this},bringToTop:function(h){return h===void 0&&(h=this.key),this.manager.bringToTop(h),this},sendToBack:function(h){return h===void 0&&(h=this.key),this.manager.sendToBack(h),this},get:function(h){return this.manager.getScene(h)},getStatus:function(h){var d=this.manager.getScene(h);if(d)return d.sys.getStatus()},getIndex:function(h){return h===void 0&&(h=this.key),this.manager.getIndex(h)},shutdown:function(){var h=this.systems.events;h.off(a.SHUTDOWN,this.shutdown,this),h.off(a.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});i.register("ScenePlugin",n,"scenePlugin"),o.exports=n},36765:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92980),l=t(10850),a=t(30657),r=t(90415),i={create:function(n){return typeof n=="string"?n={key:n}:n===void 0&&(n={}),{status:s.PENDING,key:l(n,"key",""),active:l(n,"active",!1),visible:l(n,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:l(n,"pack",!1),cameras:l(n,"cameras",null),map:l(n,"map",a(r,l(n,"mapAdd",{}))),physics:l(n,"physics",{}),loader:l(n,"loader",{}),plugins:l(n,"plugins",!1),input:l(n,"input",{})}}};o.exports=i},63946:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(92980),a=t(18360),r=t(7599),i=t(47736),n=t(91088),h=t(72283),d=t(36765),u=new s({initialize:function(v,m){this.scene=v,this.game,this.renderer,this.config=m,this.settings=d.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=h},init:function(p){this.settings.status=l.INIT,this.sceneUpdate=h,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var v=p.plugins;this.plugins=v,v.addToScene(this,a.Global,[a.CoreScene,n(this),i(this)]),this.events.emit(r.BOOT,this),this.settings.isBooted=!0},step:function(p,v){var m=this.events;m.emit(r.PRE_UPDATE,p,v),m.emit(r.UPDATE,p,v),this.sceneUpdate.call(this.scene,p,v),m.emit(r.POST_UPDATE,p,v)},render:function(p){var v=this.displayList;v.depthSort(),this.events.emit(r.PRE_RENDER,p),this.cameras.render(p,v),this.events.emit(r.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var v=this.settings,m=this.getStatus();return m!==l.CREATING&&m!==l.RUNNING?console.warn("Cannot pause non-running Scene",v.key):this.settings.active&&(v.status=l.PAUSED,v.active=!1,this.events.emit(r.PAUSE,this,p)),this},resume:function(p){var v=this.events,m=this.settings;return this.settings.active||(m.status=l.RUNNING,m.active=!0,v.emit(r.RESUME,this,p)),this},sleep:function(p){var v=this.settings,m=this.getStatus();return m!==l.CREATING&&m!==l.RUNNING?console.warn("Cannot sleep non-running Scene",v.key):(v.status=l.SLEEPING,v.active=!1,v.visible=!1,this.events.emit(r.SLEEP,this,p)),this},wake:function(p){var v=this.events,m=this.settings;return m.status=l.RUNNING,m.active=!0,m.visible=!0,v.emit(r.WAKE,this,p),m.isTransition&&v.emit(r.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var p=this.settings.status;return p>l.PENDING&&p<=l.RUNNING},isSleeping:function(){return this.settings.status===l.SLEEPING},isActive:function(){return this.settings.status===l.RUNNING},isPaused:function(){return this.settings.status===l.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,v){return p?this.resume(v):this.pause(v)},start:function(p){var v=this.events,m=this.settings;p&&(m.data=p),m.status=l.START,m.active=!0,m.visible=!0,v.emit(r.START,this),v.emit(r.READY,this,p)},shutdown:function(p){var v=this.events,m=this.settings;v.off(r.TRANSITION_INIT),v.off(r.TRANSITION_START),v.off(r.TRANSITION_COMPLETE),v.off(r.TRANSITION_OUT),m.status=l.SHUTDOWN,m.active=!1,m.visible=!1,v.emit(r.SHUTDOWN,this,p)},destroy:function(){var p=this.events,v=this.settings;v.status=l.DESTROYED,v.active=!1,v.visible=!1,p.emit(r.DESTROY,this),p.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],g=0;g<m.length;g++)this[m[g]]=null}});o.exports=u},92980:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};o.exports=x},31803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"},94817:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},28977:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="create"},91959:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},363:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},15643:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postupdate"},17058:o=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},77125:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"},76018:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},28620:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"},41538:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"},34268:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},2342:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"},96541:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleep"},74244:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},17046:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioncomplete"},13637:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioninit"},14733:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionout"},33899:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionstart"},52418:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionwake"},31735:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},8470:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wake"},7599:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:t(31803),BOOT:t(94817),CREATE:t(28977),DESTROY:t(91959),PAUSE:t(363),POST_UPDATE:t(15643),PRE_RENDER:t(17058),PRE_UPDATE:t(77125),READY:t(76018),REMOVED_FROM_SCENE:t(28620),RENDER:t(41538),RESUME:t(34268),SHUTDOWN:t(2342),SLEEP:t(96541),START:t(74244),TRANSITION_COMPLETE:t(17046),TRANSITION_INIT:t(13637),TRANSITION_OUT:t(14733),TRANSITION_START:t(33899),TRANSITION_WAKE:t(52418),UPDATE:t(31735),WAKE:t(8470)}},20436:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92980),l=t(98611),a={Events:t(7599),GetPhysicsPlugins:t(47736),GetScenePlugins:t(91088),SceneManager:t(13553),ScenePlugin:t(64051),Settings:t(36765),Systems:t(63946)};a=l(!1,a,s),o.exports=a},25798:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(76038),r=t(98611),i=t(72283),n=new s({Extends:l,initialize:function(d,u,p){l.call(this),this.manager=d,this.key=u,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=r(this.config,p),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(console.error("addMarker "+h.name+" already exists in Sound"),!1):(h=r(!0,{name:"",start:0,duration:this.totalDuration-(h.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},h),this.markers[h.name]=h,!0)},updateMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(this.markers[h.name]=r(!0,this.markers[h.name],h),!0):(console.warn("Audio Marker: "+h.name+" missing in Sound: "+this.key),!1)},removeMarker:function(h){var d=this.markers[h];return d?(this.markers[h]=null,d):null},play:function(h,d){if(h===void 0&&(h=""),typeof h=="object"&&(d=h,h=""),typeof h!="string")return!1;if(!h)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[h])return console.warn("Marker: "+h+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[h],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=r(this.currentConfig,d),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:i,calculateRate:function(){var h=1.0005777895065548,d=this.currentConfig.detune+this.manager.detune,u=Math.pow(h,d);this.totalRate=this.currentConfig.rate*this.manager.rate*u},destroy:function(){this.pendingRemove||(this.stop(),this.emit(a.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});o.exports=n},12486:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(32742),a=t(6659),r=t(76038),i=t(97081),n=t(71608),h=t(51463),d=t(72283),u=t(93736),p=new s({Extends:a,initialize:function(m){a.call(this),this.game=m,this.jsonCache=m.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new u,m.events.on(i.BLUR,this.onGameBlur,this),m.events.on(i.FOCUS,this.onGameFocus,this),m.events.on(i.PRE_STEP,this.update,this),m.events.once(i.DESTROY,this.destroy,this)},add:d,addAudioSprite:function(v,m){m===void 0&&(m={});var g=this.add(v,m);g.spritemap=this.jsonCache.get(v).spritemap;for(var T in g.spritemap)if(g.spritemap.hasOwnProperty(T)){var w=l(m),b=g.spritemap[T];w.loop=b.hasOwnProperty("loop")?b.loop:!1,g.addMarker({name:T,start:b.start,duration:b.end-b.start,config:w})}return g},get:function(v){return h(this.sounds,"key",v)},getAll:function(v){return v?n(this.sounds,"key",v):n(this.sounds)},getAllPlaying:function(){return n(this.sounds,"isPlaying",!0)},play:function(v,m){var g=this.add(v);return g.once(r.COMPLETE,g.destroy,g),m?m.name?(g.addMarker(m),g.play(m.name)):g.play(m):g.play()},playAudioSprite:function(v,m,g){var T=this.addAudioSprite(v);return T.once(r.COMPLETE,T.destroy,T),T.play(m,g)},remove:function(v){var m=this.sounds.indexOf(v);return m!==-1?(v.destroy(),this.sounds.splice(m,1),!0):!1},removeAll:function(){this.sounds.forEach(function(v){v.destroy()}),this.sounds.length=0},removeByKey:function(v){for(var m=0,g=this.sounds.length-1;g>=0;g--){var T=this.sounds[g];T.key===v&&(T.destroy(),this.sounds.splice(g,1),m++)}return m},pauseAll:function(){this.forEachActiveSound(function(v){v.pause()}),this.emit(r.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(v){v.resume()}),this.emit(r.RESUME_ALL,this)},setListenerPosition:d,stopAll:function(){this.forEachActiveSound(function(v){v.stop()}),this.emit(r.STOP_ALL,this)},stopByKey:function(v){var m=0;return this.getAll(v).forEach(function(g){g.stop()&&m++}),m},unlock:d,onBlur:d,onFocus:d,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(v,m){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(r.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(T){T.update(v,m)})},destroy:function(){this.game.events.off(i.BLUR,this.onGameBlur,this),this.game.events.off(i.FOCUS,this.onGameFocus,this),this.game.events.off(i.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(v,m){var g=this;this.sounds.forEach(function(T,w){T&&!T.pendingRemove&&v.call(m||g,T,w,g.sounds)})},setRate:function(v){return this.rate=v,this},rate:{get:function(){return this._rate},set:function(v){this._rate=v,this.forEachActiveSound(function(m){m.calculateRate()}),this.emit(r.GLOBAL_RATE,this,v)}},setDetune:function(v){return this.detune=v,this},detune:{get:function(){return this._detune},set:function(v){this._detune=v,this.forEachActiveSound(function(m){m.calculateRate()}),this.emit(r.GLOBAL_DETUNE,this,v)}}});o.exports=p},84191:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27622),l=t(17546),a=t(55491),r={create:function(i){var n=i.config.audio,h=i.device.audio;return n.noAudio||!h.webAudio&&!h.audioData?new l(i):h.webAudio&&!n.disableWebAudio?new a(i):new s(i)}};o.exports=r},77578:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},19679:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decodedall"},56951:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decoded"},16436:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},55154:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"},57818:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"},57890:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"},83022:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"},99170:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"},64289:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="looped"},67214:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},53128:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"},73078:o=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pan"},76763:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"},88426:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},13765:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"},80291:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"},11124:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"},55382:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},71157:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seek"},31776:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stopall"},39450:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},21939:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"},33019:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"},76038:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:t(77578),DECODED:t(56951),DECODED_ALL:t(19679),DESTROY:t(16436),DETUNE:t(55154),GLOBAL_DETUNE:t(57818),GLOBAL_MUTE:t(57890),GLOBAL_RATE:t(83022),GLOBAL_VOLUME:t(99170),LOOP:t(67214),LOOPED:t(64289),MUTE:t(53128),PAN:t(73078),PAUSE_ALL:t(76763),PAUSE:t(88426),PLAY:t(13765),RATE:t(80291),RESUME_ALL:t(11124),RESUME:t(55382),SEEK:t(71157),STOP_ALL:t(31776),STOP:t(39450),UNLOCKED:t(21939),VOLUME:t(33019)}},34350:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25798),l=t(56694),a=t(76038),r=t(82897),i=new l({Extends:s,initialize:function(h,d,u){if(u===void 0&&(u={}),this.tags=h.game.cache.audio.get(d),!this.tags)throw new Error('No cached audio asset with key "'+d);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,s.call(this,h,d,u)},play:function(n,h){return this.manager.isLocked(this,"play",[n,h])||!s.prototype.play.call(this,n,h)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!s.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!s.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(a.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var n=this.currentConfig.seek,h=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+n;return this.previousTime=d,this.audio.currentTime=d,this.applyConfig(),h===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+h*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var n=0;n<this.tags.length;n++){var h=this.tags[n];if(h.dataset.used==="false")return h.dataset.used="true",this.audio=h,!0}if(!this.manager.override)return!1;var d=[];this.manager.forEachActiveSound(function(p){p.key===this.key&&p.audio&&d.push(p)},this),d.sort(function(p,v){return p.loop===v.loop?v.seek/v.duration-p.seek/p.duration:p.loop?1:-1});var u=d[0];return this.audio=u.audio,u.reset(),u.audio=null,u.startTime=0,u.previousTime=0,!0},playCatchPromise:function(){var n=this.audio.play();n&&n.catch(function(h){console.warn(h)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){s.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(n){if(this.isPlaying){if(this.startTime>0){this.startTime<n-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,n-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var h=this.currentMarker?this.currentMarker.start:0,d=h+this.duration,u=this.audio.currentTime;if(this.currentConfig.loop)u>=d-this.manager.loopEndOffset?(this.audio.currentTime=h+Math.max(0,u-d),u=this.audio.currentTime):u<h&&(this.audio.currentTime+=h,u=this.audio.currentTime),u<this.previousTime&&this.emit(a.LOOPED,this);else if(u>=d){this.reset(),this.stopAndReleaseAudioTag(),this.emit(a.COMPLETE,this);return}this.previousTime=u}},destroy:function(){s.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=r(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){s.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(n){this.currentConfig.mute=n,!this.manager.isLocked(this,"mute",n)&&(this.updateMute(),this.emit(a.MUTE,this,n))}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.currentConfig.volume},set:function(n){this.currentConfig.volume=n,!this.manager.isLocked(this,"volume",n)&&(this.updateVolume(),this.emit(a.VOLUME,this,n))}},setVolume:function(n){return this.volume=n,this},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,!this.manager.isLocked(this,a.RATE,n)&&(this.calculateRate(),this.emit(a.RATE,this,n))}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,!this.manager.isLocked(this,a.DETUNE,n)&&(this.calculateRate(),this.emit(a.DETUNE,this,n))}},setDetune:function(n){return this.detune=n,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.isLocked(this,"seek",n)||this.startTime>0||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.isPlaying?(this.previousTime=n,this.audio.currentTime=n):this.isPaused&&(this.currentConfig.seek=n),this.emit(a.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,!this.manager.isLocked(this,"loop",n)&&(this.audio&&(this.audio.loop=n),this.emit(a.LOOP,this,n))}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.currentConfig.pan},set:function(n){this.currentConfig.pan=n,this.emit(a.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});o.exports=i},27622:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12486),l=t(56694),a=t(76038),r=t(34350),i=new l({Extends:s,initialize:function(h){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,s.call(this,h)},add:function(n,h){var d=new r(this,n,h);return this.sounds.push(d),d},unlock:function(){this.locked=!1;var n=this;if(this.game.cache.audio.entries.each(function(p,v){for(var m=0;m<v.length;m++)if(v[m].dataset.locked==="true")return n.locked=!0,!1;return!0}),!!this.locked){var h=!1,d=function(){h=!0},u=function(){if(h){h=!1;return}document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",u);var p=[];if(n.game.cache.audio.entries.each(function(m,g){for(var T=0;T<g.length;T++){var w=g[T];w.dataset.locked==="true"&&p.push(w)}return!0}),p.length!==0){var v=p[p.length-1];v.oncanplaythrough=function(){v.oncanplaythrough=null,p.forEach(function(m){m.dataset.locked="false"}),n.unlocked=!0},p.forEach(function(m){m.load()})}};this.once(a.UNLOCKED,function(){for(this.forEachActiveSound(function(v){v.currentMarker===null&&v.duration===0&&(v.duration=v.tags[0].duration),v.totalDuration=v.tags[0].duration});this.lockedActionsQueue.length;){var p=this.lockedActionsQueue.shift();p.sound[p.prop].apply?p.sound[p.prop].apply(p.sound,p.value||[]):p.sound[p.prop]=p.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",u,!1)}},onBlur:function(){this.forEachActiveSound(function(n){n.isPlaying&&(this.onBlurPausedSounds.push(n),n.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(n){n.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){s.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(n,h,d){return n.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:n,prop:h,value:d}),!0):!1},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this._mute},set:function(n){this._mute=n,this.forEachActiveSound(function(h){h.updateMute()}),this.emit(a.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this._volume},set:function(n){this._volume=n,this.forEachActiveSound(function(h){h.updateVolume()}),this.emit(a.GLOBAL_VOLUME,this,n)}}});o.exports=i},56751:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SoundManagerCreator:t(84191),Events:t(76038),BaseSound:t(25798),BaseSoundManager:t(12486),WebAudioSound:t(96008),WebAudioSoundManager:t(55491),HTML5AudioSound:t(34350),HTML5AudioSoundManager:t(27622),NoAudioSound:t(38662),NoAudioSoundManager:t(17546)}},38662:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25798),l=t(56694),a=t(6659),r=t(98611),i=t(72283),n=function(){return!1},h=function(){return null},d=function(){return this},u=new l({Extends:a,initialize:function(v,m,g){g===void 0&&(g={}),a.call(this),this.manager=v,this.key=m,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=r({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:h,play:n,pause:n,resume:n,stop:n,setMute:d,setVolume:d,setRate:d,setDetune:d,setSeek:d,setLoop:d,setPan:d,applyConfig:h,resetConfig:h,update:i,calculateRate:h,destroy:function(){s.prototype.destroy.call(this)}});o.exports=u},17546:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12486),l=t(56694),a=t(6659),r=t(38662),i=t(72283),n=new l({Extends:a,initialize:function(d){a.call(this),this.game=d,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(h,d){var u=new r(this,h,d);return this.sounds.push(u),u},addAudioSprite:function(h,d){var u=this.add(h,d);return u.spritemap={},u},get:function(h){return s.prototype.get.call(this,h)},getAll:function(h){return s.prototype.getAll.call(this,h)},play:function(h,d){return!1},playAudioSprite:function(h,d,u){return!1},remove:function(h){return s.prototype.remove.call(this,h)},removeAll:function(){return s.prototype.removeAll.call(this)},removeByKey:function(h){return s.prototype.removeByKey.call(this,h)},stopByKey:function(h){return s.prototype.stopByKey.call(this,h)},onBlur:i,onFocus:i,onGameBlur:i,onGameFocus:i,pauseAll:i,resumeAll:i,stopAll:i,update:i,setRate:i,setDetune:i,setMute:i,setVolume:i,unlock:i,forEachActiveSound:function(h,d){s.prototype.forEachActiveSound.call(this,h,d)},destroy:function(){s.prototype.destroy.call(this)}});o.exports=n},96008:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25798),l=t(56694),a=t(76038),r=t(72632),i=new l({Extends:s,initialize:function(h,d,u){if(u===void 0&&(u={}),this.audioBuffer=h.game.cache.audio.get(d),!this.audioBuffer)throw new Error('Audio key "'+d+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=h.context.createGain(),this.volumeNode=h.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),h.context.createPanner&&(this.spatialNode=h.context.createPanner(),this.volumeNode.connect(this.spatialNode)),h.context.createStereoPanner?(this.pannerNode=h.context.createStereoPanner(),h.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(h.destination)):h.context.createPanner?this.spatialNode.connect(h.destination):this.volumeNode.connect(h.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,s.call(this,h,d,u)},play:function(n,h){return s.prototype.play.call(this,n,h)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(a.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(a.RESUME,this),!0)},stop:function(){return s.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(a.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,h=this.currentConfig.delay,d=this.manager.context.currentTime+h,u=(this.currentMarker?this.currentMarker.start:0)+n,p=this.duration-n;this.playTime=d-n,this.startTime=d,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,d),Math.max(0,u),Math.max(0,p)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),h=this.currentMarker?this.currentMarker.start:0,d=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,h),Math.max(0,d))},createBufferSource:function(){var n=this,h=this.manager.context.createBufferSource();return h.buffer=this.audioBuffer,h.connect(this.muteNode),h.onended=function(d){d.target===n.source&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},h},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var n=this.currentConfig.source;if(n&&this.manager.context.createPanner){var h=this.spatialNode;h.panningModel=r(n,"panningModel","equalpower"),h.distanceModel=r(n,"distanceModel","inverse"),h.orientationX.value=r(n,"orientationX",0),h.orientationY.value=r(n,"orientationY",0),h.orientationZ.value=r(n,"orientationZ",-1),h.refDistance=r(n,"refDistance",1),h.maxDistance=r(n,"maxDistance",1e4),h.rolloffFactor=r(n,"rolloffFactor",1),h.coneInnerAngle=r(n,"coneInnerAngle",360),h.coneOuterAngle=r(n,"coneOuterAngle",0),h.coneOuterGain=r(n,"coneOuterGain",0),this.spatialSource=r(n,"follow",null),this.spatialSource||(h.positionX.value=r(n,"x",0),h.positionY.value=r(n,"y",0),h.positionZ.value=r(n,"z",0))}s.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(n){this.spatialNode&&(this.spatialNode.positionX.value=n)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(n){this.spatialNode&&(this.spatialNode.positionY.value=n)}},update:function(){if(this.isPlaying&&this.spatialSource){var n=r(this.spatialSource,"x",null),h=r(this.spatialSource,"y",null);n&&n!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=n),h&&h!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=h)}this.hasEnded?(this.hasEnded=!1,s.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(a.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(a.LOOPED,this))},destroy:function(){this.pendingRemove||(s.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){s.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,h=0;h<this.rateUpdates.length;h++){var d=0;h<this.rateUpdates.length-1?d=this.rateUpdates[h+1].time:d=this.manager.context.currentTime-this.playTime,n+=(d-this.rateUpdates[h].time)*this.rateUpdates[h].rate}return n},getLoopTime:function(){for(var n=0,h=0;h<this.rateUpdates.length-1;h++)n+=(this.rateUpdates[h+1].time-this.rateUpdates[h].time)*this.rateUpdates[h].rate;var d=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+d.time+(this.duration-n)/d.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(a.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(a.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(a.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(a.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(a.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(a.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(a.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});o.exports=i},55491:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82329),l=t(12486),a=t(56694),r=t(76038),i=t(97081),n=t(96008),h=t(72632),d=new a({Extends:l,initialize:function(p){this.context=this.createAudioContext(p),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),l.call(this,p),this.locked&&p.isBooted?this.unlock():p.events.once(i.BOOT,this.unlock,this)},createAudioContext:function(u){var p=u.config.audio;if(p.context)return p.context.resume(),p.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(u){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=u,this.masterMuteNode=u.createGain(),this.masterVolumeNode=u.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(u.destination),this.destination=this.masterMuteNode,this},add:function(u,p){var v=new n(this,u,p);return this.sounds.push(v),v},decodeAudio:function(u,p){var v;Array.isArray(u)?v=u:v=[{key:u,data:p}];for(var m=this.game.cache.audio,g=v.length,T=0;T<v.length;T++){var w=v[T],b=w.key,E=w.data;typeof E=="string"&&(E=s(E));var A=(function(I,P){m.add(I,P),this.emit(r.DECODED,I),g--,g===0&&this.emit(r.DECODED_ALL)}).bind(this,b),R=(function(I,P){console.error("Error decoding audio: "+I+" - ",P?P.message:""),g--,g===0&&this.emit(r.DECODED_ALL)}).bind(this,b);this.context.decodeAudioData(E,A,R)}},setListenerPosition:function(u,p){return u===void 0&&(u=this.game.scale.width/2),p===void 0&&(p=this.game.scale.height/2),this.listenerPosition.set(u,p),this},unlock:function(){var u=this,p=document.body,v=function m(){if(u.context&&p){var g=p.removeEventListener.bind(p);u.context.resume().then(function(){g("touchstart",m),g("touchend",m),g("click",m),g("keydown",m),u.unlocked=!0},function(){g("touchstart",m),g("touchend",m),g("click",m),g("keydown",m)})}};p&&(p.addEventListener("touchstart",v,!1),p.addEventListener("touchend",v,!1),p.addEventListener("click",v,!1),p.addEventListener("keydown",v,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var u=this.context;u&&!this.locked&&(u.state==="suspended"||u.state==="interrupted")&&u.resume()},update:function(u,p){var v=this.context.listener;if(v&&v.positionX!==void 0){var m=h(this.listenerPosition,"x",null),g=h(this.listenerPosition,"y",null);m&&m!==this._spatialx&&(this._spatialx=v.positionX.value=m),g&&g!==this._spatialy&&(this._spatialy=v.positionY.value=g)}l.prototype.update.call(this,u,p),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var u=this;this.context.close().then(function(){u.context=null})}l.prototype.destroy.call(this)},setMute:function(u){return this.mute=u,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(u){this.masterMuteNode.gain.setValueAtTime(u?0:1,0),this.emit(r.GLOBAL_MUTE,this,u)}},setVolume:function(u){return this.volume=u,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(u){this.masterVolumeNode.gain.setValueAtTime(u,0),this.emit(r.GLOBAL_VOLUME,this,u)}}});o.exports=d},71207:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59959),l=t(56694),a=t(72283),r=t(17922),i=new l({initialize:function(h){this.parent=h,this.list=[],this.position=0,this.addCallback=a,this.removeCallback=a,this._sortKey=""},add:function(n,h){return h?s.Add(this.list,n):s.Add(this.list,n,0,this.addCallback,this)},addAt:function(n,h,d){return d?s.AddAt(this.list,n,h):s.AddAt(this.list,n,h,0,this.addCallback,this)},getAt:function(n){return this.list[n]},getIndex:function(n){return this.list.indexOf(n)},sort:function(n,h){return n?(h===void 0&&(h=function(d,u){return d[n]-u[n]}),r(this.list,h),this):this},getByName:function(n){return s.GetFirst(this.list,"name",n)},getRandom:function(n,h){return s.GetRandom(this.list,n,h)},getFirst:function(n,h,d,u){return s.GetFirst(this.list,n,h,d,u)},getAll:function(n,h,d,u){return s.GetAll(this.list,n,h,d,u)},count:function(n,h){return s.CountAllMatching(this.list,n,h)},swap:function(n,h){s.Swap(this.list,n,h)},moveTo:function(n,h){return s.MoveTo(this.list,n,h)},moveAbove:function(n,h){return s.MoveAbove(this.list,n,h)},moveBelow:function(n,h){return s.MoveBelow(this.list,n,h)},remove:function(n,h){return h?s.Remove(this.list,n):s.Remove(this.list,n,this.removeCallback,this)},removeAt:function(n,h){return h?s.RemoveAt(this.list,n):s.RemoveAt(this.list,n,this.removeCallback,this)},removeBetween:function(n,h,d){return d?s.RemoveBetween(this.list,n,h):s.RemoveBetween(this.list,n,h,this.removeCallback,this)},removeAll:function(n){for(var h=this.list.length;h--;)this.remove(this.list[h],n);return this},bringToTop:function(n){return s.BringToTop(this.list,n)},sendToBack:function(n){return s.SendToBack(this.list,n)},moveUp:function(n){return s.MoveUp(this.list,n),n},moveDown:function(n){return s.MoveDown(this.list,n),n},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(n,h){return s.Replace(this.list,n,h)},exists:function(n){return this.list.indexOf(n)>-1},setAll:function(n,h,d,u){return s.SetAll(this.list,n,h,d,u),this},each:function(n,h){for(var d=[null],u=2;u<arguments.length;u++)d.push(arguments[u]);for(u=0;u<this.list.length;u++)d[0]=this.list[u],n.apply(h,d)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});o.exports=i},33885:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){this.entries={},this.size=0,this.setAll(r)},setAll:function(a){if(Array.isArray(a))for(var r=0;r<a.length;r++)this.set(a[r][0],a[r][1]);return this},set:function(a,r){return this.has(a)||this.size++,this.entries[a]=r,this},get:function(a){if(this.has(a))return this.entries[a]},getArray:function(){var a=[],r=this.entries;for(var i in r)a.push(r[i]);return a},has:function(a){return this.entries.hasOwnProperty(a)},delete:function(a){return this.has(a)&&(delete this.entries[a],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(a){delete this.entries[a]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var a=[],r=this.entries;for(var i in r)a.push(r[i]);return a},dump:function(){var a=this.entries;console.group("Map");for(var r in a)console.log(r,a[r]);console.groupEnd()},each:function(a){var r=this.entries;for(var i in r)if(a(i,r[i])===!1)break;return this},contains:function(a){var r=this.entries;for(var i in r)if(r[i]===a)return!0;return!1},merge:function(a,r){r===void 0&&(r=!1);var i=this.entries,n=a.entries;for(var h in n)i.hasOwnProperty(h)&&r?i[h]=n[h]:this.set(h,n[h]);return this}});o.exports=l},74623:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(36716),r=new s({Extends:l,initialize:function(){l.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(i){return this._active.indexOf(i)>-1},isPending:function(i){return this._toProcess>0&&this._pending.indexOf(i)>-1},isDestroying:function(i){return this._destroy.indexOf(i)>-1},add:function(i){return this.checkQueue&&this.isActive(i)&&!this.isDestroying(i)||this.isPending(i)||(this._pending.push(i),this._toProcess++),i},remove:function(i){if(this.isPending(i)){var n=this._pending,h=n.indexOf(i);h!==-1&&n.splice(h,1)}else this.isActive(i)&&(this._destroy.push(i),this._toProcess++);return i},removeAll:function(){for(var i=this._active,n=this._destroy,h=i.length;h--;)n.push(i[h]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var i=this._destroy,n=this._active,h,d;for(h=0;h<i.length;h++){d=i[h];var u=n.indexOf(d);u!==-1&&(n.splice(u,1),this.emit(a.PROCESS_QUEUE_REMOVE,d))}for(i.length=0,i=this._pending,h=0;h<i.length;h++)d=i[h],(!this.checkQueue||this.checkQueue&&n.indexOf(d)===-1)&&(n.push(d),this.emit(a.PROCESS_QUEUE_ADD,d));return i.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});o.exports=r},68687:(o,x,t)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(53466);function l(E){if(!(this instanceof l))return new l(E);this._maxEntries=Math.max(4,E||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}l.prototype={all:function(){return this._all(this.data,[])},search:function(E){var A=this.data,R=[],I=this.toBBox;if(!T(E,A))return R;for(var P=[],M,F,O,D;A;){for(M=0,F=A.children.length;M<F;M++)O=A.children[M],D=A.leaf?I(O):O,T(E,D)&&(A.leaf?R.push(O):g(E,D)?this._all(O,R):P.push(O));A=P.pop()}return R},collides:function(E){var A=this.data,R=this.toBBox;if(!T(E,A))return!1;for(var I=[],P,M,F,O;A;){for(P=0,M=A.children.length;P<M;P++)if(F=A.children[P],O=A.leaf?R(F):F,T(E,O)){if(A.leaf||g(E,O))return!0;I.push(F)}A=I.pop()}return!1},load:function(E){if(!(E&&E.length))return this;if(E.length<this._minEntries){for(var A=0,R=E.length;A<R;A++)this.insert(E[A]);return this}var I=this._build(E.slice(),0,E.length-1,0);if(!this.data.children.length)this.data=I;else if(this.data.height===I.height)this._splitRoot(this.data,I);else{if(this.data.height<I.height){var P=this.data;this.data=I,I=P}this._insert(I,this.data.height-I.height-1,!0)}return this},insert:function(E){return E&&this._insert(E,this.data.height-1),this},clear:function(){return this.data=w([]),this},remove:function(E,A){if(!E)return this;for(var R=this.data,I=this.toBBox(E),P=[],M=[],F,O,D,L;R||P.length;){if(R||(R=P.pop(),O=P[P.length-1],F=M.pop(),L=!0),R.leaf&&(D=a(E,R.children,A),D!==-1))return R.children.splice(D,1),P.push(R),this._condense(P),this;!L&&!R.leaf&&g(R,I)?(P.push(R),M.push(F),F=0,O=R,R=R.children[0]):O?(F++,R=O.children[F],L=!1):R=null}return this},toBBox:function(E){return E},compareMinX:h,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(E){return this.data=E,this},_all:function(E,A){for(var R=[];E;)E.leaf?A.push.apply(A,E.children):R.push.apply(R,E.children),E=R.pop();return A},_build:function(E,A,R,I){var P=R-A+1,M=this._maxEntries,F;if(P<=M)return F=w(E.slice(A,R+1)),r(F,this.toBBox),F;I||(I=Math.ceil(Math.log(P)/Math.log(M)),M=Math.ceil(P/Math.pow(M,I-1))),F=w([]),F.leaf=!1,F.height=I;var O=Math.ceil(P/M),D=O*Math.ceil(Math.sqrt(M)),L,z,X,H;for(b(E,A,R,D,this.compareMinX),L=A;L<=R;L+=D)for(X=Math.min(L+D-1,R),b(E,L,X,O,this.compareMinY),z=L;z<=X;z+=O)H=Math.min(z+O-1,X),F.children.push(this._build(E,z,H,I-1));return r(F,this.toBBox),F},_chooseSubtree:function(E,A,R,I){for(var P,M,F,O,D,L,z,X;I.push(A),!(A.leaf||I.length-1===R);){for(z=X=1/0,P=0,M=A.children.length;P<M;P++)F=A.children[P],D=u(F),L=v(E,F)-D,L<X?(X=L,z=D<z?D:z,O=F):L===X&&D<z&&(z=D,O=F);A=O||A.children[0]}return A},_insert:function(E,A,R){var I=this.toBBox,P=R?E:I(E),M=[],F=this._chooseSubtree(P,this.data,A,M);for(F.children.push(E),n(F,P);A>=0&&M[A].children.length>this._maxEntries;)this._split(M,A),A--;this._adjustParentBBoxes(P,M,A)},_split:function(E,A){var R=E[A],I=R.children.length,P=this._minEntries;this._chooseSplitAxis(R,P,I);var M=this._chooseSplitIndex(R,P,I),F=w(R.children.splice(M,R.children.length-M));F.height=R.height,F.leaf=R.leaf,r(R,this.toBBox),r(F,this.toBBox),A?E[A-1].children.push(F):this._splitRoot(R,F)},_splitRoot:function(E,A){this.data=w([E,A]),this.data.height=E.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(E,A,R){var I,P,M,F,O,D,L,z;for(D=L=1/0,I=A;I<=R-A;I++)P=i(E,0,I,this.toBBox),M=i(E,I,R,this.toBBox),F=m(P,M),O=u(P)+u(M),F<D?(D=F,z=I,L=O<L?O:L):F===D&&O<L&&(L=O,z=I);return z},_chooseSplitAxis:function(E,A,R){var I=E.leaf?this.compareMinX:h,P=E.leaf?this.compareMinY:d,M=this._allDistMargin(E,A,R,I),F=this._allDistMargin(E,A,R,P);M<F&&E.children.sort(I)},_allDistMargin:function(E,A,R,I){E.children.sort(I);var P=this.toBBox,M=i(E,0,A,P),F=i(E,R-A,R,P),O=p(M)+p(F),D,L;for(D=A;D<R-A;D++)L=E.children[D],n(M,E.leaf?P(L):L),O+=p(M);for(D=R-A-1;D>=A;D--)L=E.children[D],n(F,E.leaf?P(L):L),O+=p(F);return O},_adjustParentBBoxes:function(E,A,R){for(var I=R;I>=0;I--)n(A[I],E)},_condense:function(E){for(var A=E.length-1,R;A>=0;A--)E[A].children.length===0?A>0?(R=E[A-1].children,R.splice(R.indexOf(E[A]),1)):this.clear():r(E[A],this.toBBox)},compareMinX:function(E,A){return E.left-A.left},compareMinY:function(E,A){return E.top-A.top},toBBox:function(E){return{minX:E.left,minY:E.top,maxX:E.right,maxY:E.bottom}}};function a(E,A,R){if(!R)return A.indexOf(E);for(var I=0;I<A.length;I++)if(R(E,A[I]))return I;return-1}function r(E,A){i(E,0,E.children.length,A,E)}function i(E,A,R,I,P){P||(P=w(null)),P.minX=1/0,P.minY=1/0,P.maxX=-1/0,P.maxY=-1/0;for(var M=A,F;M<R;M++)F=E.children[M],n(P,E.leaf?I(F):F);return P}function n(E,A){return E.minX=Math.min(E.minX,A.minX),E.minY=Math.min(E.minY,A.minY),E.maxX=Math.max(E.maxX,A.maxX),E.maxY=Math.max(E.maxY,A.maxY),E}function h(E,A){return E.minX-A.minX}function d(E,A){return E.minY-A.minY}function u(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function p(E){return E.maxX-E.minX+(E.maxY-E.minY)}function v(E,A){return(Math.max(A.maxX,E.maxX)-Math.min(A.minX,E.minX))*(Math.max(A.maxY,E.maxY)-Math.min(A.minY,E.minY))}function m(E,A){var R=Math.max(E.minX,A.minX),I=Math.max(E.minY,A.minY),P=Math.min(E.maxX,A.maxX),M=Math.min(E.maxY,A.maxY);return Math.max(0,P-R)*Math.max(0,M-I)}function g(E,A){return E.minX<=A.minX&&E.minY<=A.minY&&A.maxX<=E.maxX&&A.maxY<=E.maxY}function T(E,A){return A.minX<=E.maxX&&A.minY<=E.maxY&&A.maxX>=E.minX&&A.maxY>=E.minY}function w(E){return{children:E,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(E,A,R,I,P){for(var M=[A,R],F;M.length;)R=M.pop(),A=M.pop(),!(R-A<=I)&&(F=A+Math.ceil((R-A)/I/2)*I,s(E,F,A,R,P),M.push(A,F,F,R))}o.exports=l},58403:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){if(this.entries=[],Array.isArray(r))for(var i=0;i<r.length;i++)this.set(r[i])},set:function(a){return this.entries.indexOf(a)===-1&&this.entries.push(a),this},get:function(a,r){for(var i=0;i<this.entries.length;i++){var n=this.entries[i];if(n[a]===r)return n}},getArray:function(){return this.entries.slice(0)},delete:function(a){var r=this.entries.indexOf(a);return r>-1&&this.entries.splice(r,1),this},dump:function(){console.group("Set");for(var a=0;a<this.entries.length;a++){var r=this.entries[a];console.log(r)}console.groupEnd()},each:function(a,r){var i,n=this.entries.slice(),h=n.length;if(r)for(i=0;i<h&&a.call(r,n[i],i)!==!1;i++);else for(i=0;i<h&&a(n[i],i)!==!1;i++);return this},iterate:function(a,r){var i,n=this.entries.length;if(r)for(i=0;i<n&&a.call(r,this.entries[i],i)!==!1;i++);else for(i=0;i<n&&a(this.entries[i],i)!==!1;i++);return this},iterateLocal:function(a){var r,i=[];for(r=1;r<arguments.length;r++)i.push(arguments[r]);var n=this.entries.length;for(r=0;r<n;r++){var h=this.entries[r];h[a].apply(h,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(a){return this.entries.indexOf(a)>-1},union:function(a){var r=new l;return a.entries.forEach(function(i){r.set(i)}),this.entries.forEach(function(i){r.set(i)}),r},intersect:function(a){var r=new l;return this.entries.forEach(function(i){a.contains(i)&&r.set(i)}),r},difference:function(a){var r=new l;return this.entries.forEach(function(i){a.contains(i)||r.set(i)}),r},size:{get:function(){return this.entries.length},set:function(a){return a<this.entries.length?this.entries.length=a:this.entries.length}}});o.exports=l},90881:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(84314),r=t(93736),i=new l({initialize:function(h,d,u,p){h===void 0&&(h=0),d===void 0&&(d=h),u===void 0&&(u=0),p===void 0&&(p=null),this._width=h,this._height=d,this._parent=p,this.aspectMode=u,this.aspectRatio=d===0?1:h/d,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new r},setAspectMode:function(n){return n===void 0&&(n=0),this.aspectMode=n,this.setSize(this._width,this._height)},setSnap:function(n,h){return n===void 0&&(n=0),h===void 0&&(h=n),this.snapTo.set(n,h),this.setSize(this._width,this._height)},setParent:function(n){return this._parent=n,this.setSize(this._width,this._height)},setMin:function(n,h){return n===void 0&&(n=0),h===void 0&&(h=n),this.minWidth=s(n,0,this.maxWidth),this.minHeight=s(h,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(n,h){return n===void 0&&(n=Number.MAX_VALUE),h===void 0&&(h=n),this.maxWidth=s(n,this.minWidth,Number.MAX_VALUE),this.maxHeight=s(h,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(n,h){switch(n===void 0&&(n=0),h===void 0&&(h=n),this.aspectMode){case i.NONE:this._width=this.getNewWidth(a(n,this.snapTo.x)),this._height=this.getNewHeight(a(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case i.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(a(n,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case i.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(a(h,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case i.FIT:this.constrain(n,h,!0);break;case i.ENVELOP:this.constrain(n,h,!1);break}return this},setAspectRatio:function(n){return this.aspectRatio=n,this.setSize(this._width,this._height)},resize:function(n,h){return this._width=this.getNewWidth(a(n,this.snapTo.x)),this._height=this.getNewHeight(a(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(n,h){return h===void 0&&(h=!0),n=s(n,this.minWidth,this.maxWidth),h&&this._parent&&n>this._parent.width&&(n=Math.max(this.minWidth,this._parent.width)),n},getNewHeight:function(n,h){return h===void 0&&(h=!0),n=s(n,this.minHeight,this.maxHeight),h&&this._parent&&n>this._parent.height&&(n=Math.max(this.minHeight,this._parent.height)),n},constrain:function(n,h,d){n===void 0&&(n=0),h===void 0&&(h=n),d===void 0&&(d=!0),n=this.getNewWidth(n),h=this.getNewHeight(h);var u=this.snapTo,p=h===0?1:n/h;return d&&this.aspectRatio>p||!d&&this.aspectRatio<p?(n=a(n,u.x),h=n/this.aspectRatio,u.y>0&&(h=a(h,u.y),n=h*this.aspectRatio)):(d&&this.aspectRatio<p||!d&&this.aspectRatio>p)&&(h=a(h,u.y),n=h*this.aspectRatio,u.x>0&&(n=a(n,u.x),h=n*(1/this.aspectRatio))),this._width=n,this._height=h,this},fitTo:function(n,h){return this.constrain(n,h,!0)},envelop:function(n,h){return this.constrain(n,h,!1)},setWidth:function(n){return this.setSize(n,this._height)},setHeight:function(n){return this.setSize(this._width,n)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(n){n&&n.style&&(n.style.width=this._width+"px",n.style.height=this._height+"px")},copy:function(n){return n.setAspectMode(this.aspectMode),n.aspectRatio=this.aspectRatio,n.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(n){this.setSize(n,this._height)}},height:{get:function(){return this._height},set:function(n){this.setSize(this._width,n)}}});i.NONE=0,i.WIDTH_CONTROLS_HEIGHT=1,i.HEIGHT_CONTROLS_WIDTH=2,i.FIT=3,i.ENVELOP=4,o.exports=i},94160:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},95393:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},36716:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={PROCESS_QUEUE_ADD:t(94160),PROCESS_QUEUE_REMOVE:t(95393)}},20010:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:t(36716),List:t(71207),Map:t(33885),ProcessQueue:t(74623),RTree:t(68687),Set:t(58403),Size:t(90881)}},17487:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82897),a=t(27119),r=t(86459),i=t(28621),n=t(31673),h=new s({Extends:n,initialize:function(u,p,v,m,g){n.call(this,u,p,v,m,g),this.add("__BASE",0,0,0,m,g),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=m,this.height=g,this.imageData=this.context.getImageData(0,0,m,g),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===r.WEBGL&&this.refresh(),this},draw:function(d,u,p,v){return v===void 0&&(v=!0),this.context.drawImage(p,d,u),v&&this.update(),this},drawFrame:function(d,u,p,v,m){p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=!0);var g=this.manager.getFrame(d,u);if(g){var T=g.canvasData,w=g.cutWidth,b=g.cutHeight,E=g.source.resolution;this.context.drawImage(g.source.image,T.x,T.y,w,b,p,v,w/E,b/E),m&&this.update()}return this},setPixel:function(d,u,p,v,m,g){g===void 0&&(g=255),d=Math.abs(Math.floor(d)),u=Math.abs(Math.floor(u));var T=this.getIndex(d,u);if(T>-1){var w=this.context.getImageData(d,u,1,1);w.data[0]=p,w.data[1]=v,w.data[2]=m,w.data[3]=g,this.context.putImageData(w,d,u)}return this},putData:function(d,u,p,v,m,g,T){return v===void 0&&(v=0),m===void 0&&(m=0),g===void 0&&(g=d.width),T===void 0&&(T=d.height),this.context.putImageData(d,u,p,v,m,g,T),this},getData:function(d,u,p,v){d=l(Math.floor(d),0,this.width-1),u=l(Math.floor(u),0,this.height-1),p=l(p,1,this.width-d),v=l(v,1,this.height-u);var m=this.context.getImageData(d,u,p,v);return m},getPixel:function(d,u,p){p||(p=new a);var v=this.getIndex(d,u);if(v>-1){var m=this.data,g=m[v+0],T=m[v+1],w=m[v+2],b=m[v+3];p.setTo(g,T,w,b)}return p},getPixels:function(d,u,p,v){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=this.width),v===void 0&&(v=p),d=Math.abs(Math.round(d)),u=Math.abs(Math.round(u));for(var m=l(d,0,this.width),g=l(d+p,0,this.width),T=l(u,0,this.height),w=l(u+v,0,this.height),b=new a,E=[],A=T;A<w;A++){for(var R=[],I=m;I<g;I++)b=this.getPixel(I,A,b),R.push({x:I,y:A,color:b.color,alpha:b.alphaGL});E.push(R)}return E},getIndex:function(d,u){return d=Math.abs(Math.round(d)),u=Math.abs(Math.round(u)),d<this.width&&u<this.height?(d+u*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(d,u,p,v,m){return d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=this.width),v===void 0&&(v=this.height),m===void 0&&(m=!0),this.context.clearRect(d,u,p,v),m&&this.update(),this},setSize:function(d,u){return u===void 0&&(u=d),(d!==this.width||u!==this.height)&&(this.canvas.width=d,this.canvas.height=u,this._source.width=d,this._source.height=u,this._source.isPowerOf2=i(d,u),this.frames.__BASE.setSize(d,u,0,0),this.width=d,this.height=u,this.refresh()),this},destroy:function(){n.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});o.exports=h},845:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(51052),a=t(61068),r=t(56694),i=t(86459),n=t(82047),h=t(72632),d=t(65641),u=t(37410),p=t(31673),v=t(75512),m=new r({Extends:p,initialize:function(T,w,b,E){b===void 0&&(b=256),E===void 0&&(E=256),this.type="DynamicTexture";var A=T.game.renderer,R=A&&A.type===i.CANVAS,I=R?a.create2D(this,b,E):[this];p.call(this,T,w,I,b,E),this.add("__BASE",0,0,0,b,E),this.renderer=A,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=R?I:null,this.context=R?I.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new l(0,0,b,E).setScene(T.game.scene.systemScene,!1),this.renderTarget=R?null:new u(A,b,E,1,0,!1,!0,!0,!1),this.pipeline=R?null:A.pipelines.get(d.SINGLE_PIPELINE),R||this.setSize(b,E)},setSize:function(g,T){T===void 0&&(T=g);var w=this.get(),b=w.source;if(g!==this.width||T!==this.height){this.canvas&&(this.canvas.width=g,this.canvas.height=T);var E=this.renderTarget;E&&(E.willResize(g,T)&&(E.resize(g,T),this.renderer.deleteTexture(b.glTexture)),this.setFromRenderTarget()),this.camera.setSize(g,T),b.width=g,b.height=T,w.setSize(g,T),this.width=g,this.height=T}else{var A=this.getSourceImage();w.cutX+g>A.width&&(g=A.width-w.cutX),w.cutY+T>A.height&&(T=A.height-w.cutY),w.setSize(g,T,w.cutX,w.cutY)}return this},setFromRenderTarget:function(){var g=this.get(),T=g.source,w=this.renderTarget;return g.glTexture=w.texture,T.isRenderTexture=!0,T.isGLTexture=!0,T.glTexture=w.texture,T.glTexture.flipY=!0,this},setIsSpriteTexture:function(g){return this.isSpriteTexture=g,this},fill:function(g,T,w,b,E,A){var R=this.camera,I=this.renderer;T===void 0&&(T=1),w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=this.width),A===void 0&&(A=this.height);var P=g>>16&255,M=g>>8&255,F=g&255,O=this.renderTarget;if(R.preRender(),O){O.bind(!0);var D=this.pipeline.manager.set(this.pipeline),L=I.width/O.width,z=I.height/O.height,X=O.height-(b+A);D.drawFillRect(w*L,X*z,E*L,A*z,v.getTintFromFloats(F/255,M/255,P/255,1),T),O.unbind(!0)}else{var H=this.context;I.setContext(H),H.globalCompositeOperation="source-over",H.fillStyle="rgba("+P+","+M+","+F+","+T+")",H.fillRect(w,b,E,A),I.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var g=this.context,T=this.renderTarget;T?T.clear():g&&(g.save(),g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,this.width,this.height),g.restore()),this.dirty=!1}return this},stamp:function(g,T,w,b,E){w===void 0&&(w=0),b===void 0&&(b=0);var A=h(E,"alpha",1),R=h(E,"tint",16777215),I=h(E,"angle",0),P=h(E,"rotation",0),M=h(E,"scale",1),F=h(E,"scaleX",M),O=h(E,"scaleY",M),D=h(E,"originX",.5),L=h(E,"originY",.5),z=h(E,"blendMode",0),X=h(E,"erase",!1),H=h(E,"skipBatch",!1),J=this.manager.resetStamp(A,R);return J.setAngle(0),I!==0?J.setAngle(I):P!==0&&J.setRotation(P),J.setScale(F,O),J.setTexture(g,T),J.setOrigin(D,L),J.setBlendMode(z),X&&(this._eraseMode=!0),H?this.batchGameObject(J,w,b):this.draw(J,w,b),X&&(this._eraseMode=!1),this},erase:function(g,T,w){return this._eraseMode=!0,this.draw(g,T,w),this._eraseMode=!1,this},draw:function(g,T,w,b,E){return this.beginDraw(),this.batchDraw(g,T,w,b,E),this.endDraw(),this},drawFrame:function(g,T,w,b,E,A){return this.beginDraw(),this.batchDrawFrame(g,T,w,b,E,A),this.endDraw(),this},repeat:function(g,T,w,b,E,A,R,I,P){if(w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=this.width),A===void 0&&(A=this.height),R===void 0&&(R=1),I===void 0&&(I=16777215),P===void 0&&(P=!1),g instanceof n?T=g:T=this.manager.getFrame(g,T),!T)return this;var M=this.manager.resetStamp(R,I);M.setFrame(T),M.setOrigin(0);var F=T.width,O=T.height;E=Math.floor(E),A=Math.floor(A);var D=Math.ceil(E/F),L=Math.ceil(A/O),z=D*F-E,X=L*O-A;z>0&&(z=F-z),X>0&&(X=O-X),w<0&&(D+=Math.ceil(Math.abs(w)/F)),b<0&&(L+=Math.ceil(Math.abs(b)/O));var H=w,J=b,G=!1,k=this.manager.stampCrop.setTo(0,0,F,O);P||this.beginDraw();for(var N=0;N<L;N++){if(J+O<0){J+=O;continue}for(var B=0;B<D;B++){if(G=!1,H+F<0){H+=F;continue}else H<0&&(G=!0,k.width=F+H,k.x=F-k.width);J<0&&(G=!0,k.height=O+J,k.y=O-k.height),z>0&&B===D-1&&(G=!0,k.width=z),X>0&&N===L-1&&(G=!0,k.height=X),G&&M.setCrop(k),this.batchGameObject(M,H,J),M.isCropped=!1,k.setTo(0,0,F,O),H+=F}H=w,J+=O}return P||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var g=this.camera,T=this.renderer,w=this.renderTarget;g.preRender(),w?T.beginCapture(w.width,w.height):T.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(g,T,w,b,E){return Array.isArray(g)||(g=[g]),this.batchList(g,T,w,b,E),this},batchDrawFrame:function(g,T,w,b,E,A){w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=1),A===void 0&&(A=16777215);var R=this.manager.getFrame(g,T);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,w,b,A,E,this.camera.matrix,null):this.batchTextureFrame(R,w,b,E,A)),this},endDraw:function(g){if(g===void 0&&(g=this._eraseMode),this.isDrawing){var T=this.renderer,w=this.renderTarget;if(w){var b=T.endCapture(),E=T.pipelines.setUtility();E.blitFrame(b,w,1,!1,!1,g,this.isSpriteTexture),T.resetScissor(),T.resetViewport()}else T.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(g,T,w,b,E){var A=g.length;if(A!==0)for(var R=0;R<A;R++){var I=g[R];!I||I===this||(I.renderWebGL||I.renderCanvas?this.batchGameObject(I,T,w):I.isParent||I.list?this.batchGroup(I.getChildren(),T,w):typeof I=="string"?this.batchTextureFrameKey(I,null,T,w,b,E):I instanceof n?this.batchTextureFrame(I,T,w,b,E):Array.isArray(I)&&this.batchList(I,T,w,b,E))}},batchGroup:function(g,T,w){T===void 0&&(T=0),w===void 0&&(w=0);for(var b=0;b<g.length;b++){var E=g[b];E.willRender(this.camera)&&this.batchGameObject(E,E.x+T,E.y+w)}},batchGameObject:function(g,T,w){T===void 0&&(T=g.x),w===void 0&&(w=g.y);var b=g.x,E=g.y,A=this.camera,R=this.renderer,I=this._eraseMode,P=g.mask;if(g.setPosition(T,w),this.canvas){if(I){var M=g.blendMode;g.blendMode=s.ERASE}P&&P.preRenderCanvas(R,g,A),g.renderCanvas(R,g,A,null),P&&P.postRenderCanvas(R,g,A),I&&(g.blendMode=M)}else R&&(P&&P.preRenderWebGL(R,g,A),I||R.setBlendMode(g.blendMode),g.renderWebGL(R,g,A),P&&P.postRenderWebGL(R,A,this.renderTarget));g.setPosition(b,E)},batchTextureFrameKey:function(g,T,w,b,E,A){var R=this.manager.getFrame(g,T);R&&this.batchTextureFrame(R,w,b,E,A)},batchTextureFrame:function(g,T,w,b,E){T===void 0&&(T=0),w===void 0&&(w=0),b===void 0&&(b=1),E===void 0&&(E=16777215);var A=this.camera.matrix,R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(g,T,w,E,b,A,null);else{var I=this.context,P=g.canvasData,M=g.source.image;I.save(),I.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",I.globalAlpha=b,A.setToContext(I),P.width>0&&P.height>0&&I.drawImage(M,P.x,P.y,P.width,P.height,T,w,P.width,P.height),I.restore()}},snapshotArea:function(g,T,w,b,E,A,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,E,!1,g,T,w,b,A,R):this.renderer.snapshotCanvas(this.canvas,E,!1,g,T,w,b,A,R),this},snapshot:function(g,T,w){return this.snapshotArea(0,0,this.width,this.height,g,T,w)},snapshotPixel:function(g,T,w){return this.snapshotArea(g,T,1,1,w,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(g,T,w,b){var E=this.manager.resetStamp();E.setTexture(this),E.setOrigin(0),E.renderWebGL(g,E,w,b)},renderCanvas:function(){},destroy:function(){var g=this.manager.stamp;g&&g.texture===this&&this.manager.resetStamp(),p.prototype.destroy.call(this),a.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});o.exports=m},82047:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82897),a=t(98611),r=new s({initialize:function(n,h,d,u,p,v,m){this.texture=n,this.name=h,this.source=n.source[d],this.sourceIndex=d,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(v,m,u,p)},setSize:function(i,n,h,d){h===void 0&&(h=0),d===void 0&&(d=0),this.cutX=h,this.cutY=d,this.cutWidth=i,this.cutHeight=n,this.width=i,this.height=n,this.halfWidth=Math.floor(i*.5),this.halfHeight=Math.floor(n*.5),this.centerX=Math.floor(i/2),this.centerY=Math.floor(n/2);var u=this.data,p=u.cut;p.x=h,p.y=d,p.w=i,p.h=n,p.r=h+i,p.b=d+n,u.sourceSize.w=i,u.sourceSize.h=n,u.spriteSourceSize.w=i,u.spriteSourceSize.h=n,u.radius=.5*Math.sqrt(i*i+n*n);var v=u.drawImage;return v.x=h,v.y=d,v.width=i,v.height=n,this.updateUVs()},setTrim:function(i,n,h,d,u,p){var v=this.data,m=v.spriteSourceSize;return v.trim=!0,v.sourceSize.w=i,v.sourceSize.h=n,m.x=h,m.y=d,m.w=u,m.h=p,m.r=h+u,m.b=d+p,this.x=h,this.y=d,this.width=u,this.height=p,this.halfWidth=u*.5,this.halfHeight=p*.5,this.centerX=Math.floor(u/2),this.centerY=Math.floor(p/2),this.updateUVs()},setScale9:function(i,n,h,d){var u=this.data;return u.scale9=!0,u.is3Slice=n===0&&d===this.height,u.scale9Borders.x=i,u.scale9Borders.y=n,u.scale9Borders.w=h,u.scale9Borders.h=d,this},setCropUVs:function(i,n,h,d,u,p,v){var m=this.cutX,g=this.cutY,T=this.cutWidth,w=this.cutHeight,b=this.realWidth,E=this.realHeight;n=l(n,0,b),h=l(h,0,E),d=l(d,0,b-n),u=l(u,0,E-h);var A=m+n,R=g+h,I=d,P=u,M=this.data;if(M.trim){var F=M.spriteSourceSize;d=l(d,0,T-n),u=l(u,0,w-h);var O=n+d,D=h+u,L=!(F.r<n||F.b<h||F.x>O||F.y>D);if(L){var z=Math.max(F.x,n),X=Math.max(F.y,h),H=Math.min(F.r,O)-z,J=Math.min(F.b,D)-X;I=H,P=J,p?A=m+(T-(z-F.x)-H):A=m+(z-F.x),v?R=g+(w-(X-F.y)-J):R=g+(X-F.y),n=z,h=X,d=H,u=J}else A=0,R=0,I=0,P=0}else p&&(A=m+(T-n-d)),v&&(R=g+(w-h-u));var G=this.source.width,k=this.source.height;return i.u0=Math.max(0,A/G),i.v0=Math.max(0,R/k),i.u1=Math.min(1,(A+I)/G),i.v1=Math.min(1,(R+P)/k),i.x=n,i.y=h,i.cx=A,i.cy=R,i.cw=I,i.ch=P,i.width=d,i.height=u,i.flipX=p,i.flipY=v,i},updateCropUVs:function(i,n,h){return this.setCropUVs(i,i.x,i.y,i.width,i.height,n,h)},setUVs:function(i,n,h,d,u,p){var v=this.data.drawImage;return v.width=i,v.height=n,this.u0=h,this.v0=d,this.u1=u,this.v1=p,this},updateUVs:function(){var i=this.cutX,n=this.cutY,h=this.cutWidth,d=this.cutHeight,u=this.data.drawImage;u.width=h,u.height=d;var p=this.source.width,v=this.source.height;return this.u0=i/p,this.v0=n/v,this.u1=(i+h)/p,this.v1=(n+d)/v,this},updateUVsInverted:function(){var i=this.source.width,n=this.source.height;return this.u0=(this.cutX+this.cutHeight)/i,this.v0=this.cutY/n,this.u1=this.cutX/i,this.v1=(this.cutY+this.cutWidth)/n,this},clone:function(){var i=new r(this.texture,this.name,this.sourceIndex);return i.cutX=this.cutX,i.cutY=this.cutY,i.cutWidth=this.cutWidth,i.cutHeight=this.cutHeight,i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i.halfWidth=this.halfWidth,i.halfHeight=this.halfHeight,i.centerX=this.centerX,i.centerY=this.centerY,i.rotated=this.rotated,i.data=a(!0,i.data,this.data),i.updateUVs(),i},destroy:function(){this.texture=null,this.source=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});o.exports=r},31673:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82047),a=t(32547),r='Texture "%s" has no frame "%s"',i=new s({initialize:function(h,d,u,p,v){Array.isArray(u)||(u=[u]),this.manager=h,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<u.length;m++)this.source.push(new a(this,u[m],p,v))},add:function(n,h,d,u,p,v){if(this.has(n))return null;var m=new l(this,n,h,d,u,p,v);return this.frames[n]=m,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,m},remove:function(n){if(this.has(n)){var h=this.get(n);return h.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames.hasOwnProperty(n)},get:function(n){n||(n=this.firstFrame);var h=this.frames[n];return h||(console.warn(r,this.key,n),h=this.frames[this.firstFrame]),h},getTextureSourceIndex:function(n){for(var h=0;h<this.source.length;h++)if(this.source[h]===n)return h;return-1},getFramesFromTextureSource:function(n,h){h===void 0&&(h=!1);var d=[];for(var u in this.frames)if(!(u==="__BASE"&&!h)){var p=this.frames[u];p.sourceIndex===n&&d.push(p)}return d},getFrameNames:function(n){n===void 0&&(n=!1);var h=Object.keys(this.frames);if(!n){var d=h.indexOf("__BASE");d!==-1&&h.splice(d,1)}return h},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var h=this.frames[n];return h?h.source.image:(console.warn(r,this.key,n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var h=this.frames[n],d;return h?d=h.sourceIndex:(console.warn(r,this.key,n),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var h=0;h<n.length;h++){var d=this.source[h];this.dataSource.push(new a(this,n[h],d.width,d.height))}},setFilter:function(n){var h;for(h=0;h<this.source.length;h++)this.source[h].setFilter(n);for(h=0;h<this.dataSource.length;h++)this.dataSource[h].setFilter(n)},destroy:function(){var n,h=this.source,d=this.dataSource;for(n=0;n<h.length;n++)h[n]&&h[n].destroy();for(n=0;n<d.length;n++)d[n]&&d[n].destroy();for(var u in this.frames){var p=this.frames[u];p&&p.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});o.exports=i},6237:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(17487),a=t(56694),r=t(27119),i=t(86459),n=t(845),h=t(6659),d=t(38203),u=t(82047),p=t(97081),v=t(52780),m=t(10850),g=t(1539),T=t(42911),w=t(69150),b=t(74118),E=t(31673),A=new a({Extends:h,initialize:function(I){h.call(this),this.game=I,this.name="TextureManager",this.list={},this._tempCanvas=s.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new b,this.silentWarnings=!1,I.events.once(p.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(d.LOAD,this.updatePending,this),this.on(d.ERROR,this.updatePending,this);var R=this.game.config;this.addBase64("__DEFAULT",R.defaultImage),this.addBase64("__MISSING",R.missingImage),this.addBase64("__WHITE",R.whiteImage),this.game.events.once(p.DESTROY,this.destroy,this),this.game.events.once(p.SYSTEM_READY,function(I){this.stamp=new g(I).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(d.LOAD),this.off(d.ERROR),this.emit(d.READY))},checkKey:function(R){return this.exists(R)?(this.silentWarnings||console.error("Texture key already in use: "+R),!1):!0},remove:function(R){if(typeof R=="string")if(this.exists(R))R=this.get(R);else return this.silentWarnings||console.warn("No texture found matching key: "+R),this;var I=R.key;return this.list.hasOwnProperty(I)&&(R.destroy(),this.emit(d.REMOVE,I),this.emit(d.REMOVE_KEY+I)),this},removeKey:function(R){return this.list.hasOwnProperty(R)&&delete this.list[R],this},addBase64:function(R,I){if(this.checkKey(R)){var P=this,M=new Image;M.onerror=function(){P.emit(d.ERROR,R)},M.onload=function(){var F=P.create(R,M);w.Image(F,0),P.emit(d.ADD,R,F),P.emit(d.ADD_KEY+R,F),P.emit(d.LOAD,R,F)},M.src=I}return this},getBase64:function(R,I,P,M){P===void 0&&(P="image/png"),M===void 0&&(M=.92);var F="",O=this.getFrame(R,I);if(O&&(O.source.isRenderTexture||O.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(O){var D=O.canvasData,L=s.create2D(this,D.width,D.height),z=L.getContext("2d",{willReadFrequently:!0});D.width>0&&D.height>0&&z.drawImage(O.source.image,D.x,D.y,D.width,D.height,0,0,D.width,D.height),F=L.toDataURL(P,M),s.remove(L)}return F},addImage:function(R,I,P){var M=null;return this.checkKey(R)&&(M=this.create(R,I),w.Image(M,0),P&&M.setDataSource(P),this.emit(d.ADD,R,M),this.emit(d.ADD_KEY+R,M)),M},addGLTexture:function(R,I,P,M){var F=null;return this.checkKey(R)&&(P===void 0&&(P=I.width),M===void 0&&(M=I.height),F=this.create(R,I,P,M),F.add("__BASE",0,0,0,P,M),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)),F},addCompressedTexture:function(R,I,P){var M=null;if(this.checkKey(R)){if(M=this.create(R,I),M.add("__BASE",0,0,0,I.width,I.height),P)if(Array.isArray(P))for(var F=0;F<P.length;F++)w.JSONHash(M,F,P[F]);else w.JSONHash(M,0,P);this.emit(d.ADD,R,M),this.emit(d.ADD_KEY+R,M)}return M},addRenderTexture:function(R,I){var P=null;return this.checkKey(R)&&(P=this.create(R,I),P.add("__BASE",0,0,0,I.width,I.height),this.emit(d.ADD,R,P),this.emit(d.ADD_KEY+R,P)),P},generate:function(R,I){if(this.checkKey(R)){var P=s.create(this,1,1);return I.canvas=P,v(I),this.addCanvas(R,P)}else return null},createCanvas:function(R,I,P){if(I===void 0&&(I=256),P===void 0&&(P=256),this.checkKey(R)){var M=s.create(this,I,P,i.CANVAS,!0);return this.addCanvas(R,M)}return null},addCanvas:function(R,I,P){P===void 0&&(P=!1);var M=null;return P?M=new l(this,R,I,I.width,I.height):this.checkKey(R)&&(M=new l(this,R,I,I.width,I.height),this.list[R]=M,this.emit(d.ADD,R,M),this.emit(d.ADD_KEY+R,M)),M},addDynamicTexture:function(R,I,P){var M=null;return typeof R=="string"&&!this.exists(R)?M=new n(this,R,I,P):(M=R,R=M.key),this.checkKey(R)?(this.list[R]=M,this.emit(d.ADD,R,M),this.emit(d.ADD_KEY+R,M)):M=null,M},addAtlas:function(R,I,P,M){return Array.isArray(P.textures)||Array.isArray(P.frames)?this.addAtlasJSONArray(R,I,P,M):this.addAtlasJSONHash(R,I,P,M)},addAtlasJSONArray:function(R,I,P,M){var F=null;if(I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F){if(Array.isArray(P))for(var O=P.length===1,D=0;D<F.source.length;D++){var L=O?P[0]:P[D];w.JSONArray(F,D,L)}else w.JSONArray(F,0,P);M&&F.setDataSource(M),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)}return F},addAtlasJSONHash:function(R,I,P,M){var F=null;if(I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F){if(Array.isArray(P))for(var O=0;O<P.length;O++)w.JSONHash(F,O,P[O]);else w.JSONHash(F,0,P);M&&F.setDataSource(M),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)}return F},addAtlasXML:function(R,I,P,M){var F=null;return I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F&&(w.AtlasXML(F,0,P),M&&F.setDataSource(M),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)),F},addUnityAtlas:function(R,I,P,M){var F=null;return I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F&&(w.UnityYAML(F,0,P),M&&F.setDataSource(M),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)),F},addSpriteSheet:function(R,I,P,M){var F=null;if(I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F){var O=F.source[0].width,D=F.source[0].height;w.SpriteSheet(F,0,0,0,O,D,P),M&&F.setDataSource(M),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)}return F},addSpriteSheetFromAtlas:function(R,I){if(!this.checkKey(R))return null;var P=m(I,"atlas",null),M=m(I,"frame",null);if(!(!P||!M)){var F=this.get(P),O=F.get(M);if(O){var D=this.create(R,O.source.image);return O.trimmed?w.SpriteSheetFromAtlas(D,O,I):w.SpriteSheet(D,0,O.cutX,O.cutY,O.cutWidth,O.cutHeight,I),this.emit(d.ADD,R,D),this.emit(d.ADD_KEY+R,D),D}}},create:function(R,I,P,M){var F=null;return this.checkKey(R)&&(F=new E(this,R,I,P,M),this.list[R]=F),F},exists:function(R){return this.list.hasOwnProperty(R)},get:function(R){return R===void 0&&(R="__DEFAULT"),this.list[R]?this.list[R]:R instanceof E?R:R instanceof u?R.texture:this.list.__MISSING},cloneFrame:function(R,I){if(this.list[R])return this.list[R].get(I).clone()},getFrame:function(R,I){if(this.list[R])return this.list[R].get(I)},parseFrame:function(R){if(R){if(typeof R=="string")return this.getFrame(R);if(Array.isArray(R)&&R.length===2)return this.getFrame(R[0],R[1]);if(T(R))return this.getFrame(R.key,R.frame);if(R instanceof E)return R.get();if(R instanceof u)return R}else return},getTextureKeys:function(){var R=[];for(var I in this.list)I!=="__DEFAULT"&&I!=="__MISSING"&&I!=="__WHITE"&&R.push(I);return R},getPixel:function(R,I,P,M){var F=this.getFrame(P,M);if(F){R-=F.x,I-=F.y;var O=F.data.cut;if(R+=O.x,I+=O.y,R>=O.x&&R<O.r&&I>=O.y&&I<O.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(F.source.image,R,I,1,1,0,0,1,1);var L=D.getImageData(0,0,1,1);return new r(L.data[0],L.data[1],L.data[2],L.data[3])}}return null},getPixelAlpha:function(R,I,P,M){var F=this.getFrame(P,M);if(F){R-=F.x,I-=F.y;var O=F.data.cut;if(R+=O.x,I+=O.y,R>=O.x&&R<O.r&&I>=O.y&&I<O.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(F.source.image,R,I,1,1,0,0,1,1);var L=D.getImageData(0,0,1,1);return L.data[3]}}return null},setTexture:function(R,I,P){return this.list[I]&&(R.texture=this.list[I],R.frame=R.texture.get(P)),R},renameTexture:function(R,I){var P=this.get(R);return P&&R!==I?(P.key=I,this.list[I]=P,delete this.list[R],!0):!1},each:function(R,I){for(var P=[null],M=1;M<arguments.length;M++)P.push(arguments[M]);for(var F in this.list)P[0]=this.list[F],R.apply(I,P)},resetStamp:function(R,I){R===void 0&&(R=1),I===void 0&&(I=16777215);var P=this.stamp;return P.setCrop(),P.setPosition(0),P.setAngle(0),P.setScale(1),P.setAlpha(R),P.setTint(I),P.setTexture("__WHITE"),P},destroy:function(){for(var R in this.list)this.list[R].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,s.remove(this._tempCanvas)}});o.exports=A},32547:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(56694),a=t(28621),r=t(27394),i=new l({initialize:function(h,d,u,p,v){v===void 0&&(v=!1);var m=h.manager.game;this.renderer=m.renderer,this.texture=h,this.source=d,this.image=d.compressed?null:d,this.compressionAlgorithm=d.compressed?d.format:null,this.resolution=1,this.width=u||d.naturalWidth||d.videoWidth||d.width||0,this.height=p||d.naturalHeight||d.videoHeight||d.height||0,this.scaleMode=r.DEFAULT,this.isCanvas=d instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&d instanceof HTMLVideoElement,this.isRenderTexture=d.type==="RenderTexture"||d.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&d instanceof WebGLTexture,this.isPowerOf2=a(this.width,this.height),this.glTexture=null,this.flipY=v,this.init(m)},init:function(n){var h=this.renderer;if(h){var d=this.source;if(h.gl){var u=this.image,p=this.flipY,v=this.width,m=this.height,g=this.scaleMode;this.isCanvas?this.glTexture=h.createCanvasTexture(u,!1,p):this.isVideo?this.glTexture=h.createVideoTexture(u,!1,p):this.isRenderTexture?this.glTexture=h.createTextureFromSource(null,v,m,g):this.isGLTexture?this.glTexture=d:this.compressionAlgorithm?this.glTexture=h.createTextureFromSource(d):this.glTexture=h.createTextureFromSource(u,v,m,g)}else this.isRenderTexture&&(this.image=d.canvas)}n.config.antialias||this.setFilter(1)},setFilter:function(n){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,n),this.scaleMode=n},setFlipY:function(n){return n===void 0&&(n=!0),this.flipY=n,this},update:function(){var n=this.renderer,h=this.image,d=this.flipY,u=n.gl;u&&this.isCanvas?this.glTexture=n.updateCanvasTexture(h,this.glTexture,d):u&&this.isVideo&&(this.glTexture=n.updateVideoTexture(h,this.glTexture,d))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&s.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});o.exports=i},65154:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={LINEAR:0,NEAREST:1};o.exports=x},49644:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture"},29569:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture-"},60079:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onerror"},72665:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onload"},93006:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},69018:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture"},85549:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture-"},38203:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:t(49644),ADD_KEY:t(29569),ERROR:t(60079),LOAD:t(72665),READY:t(93006),REMOVE:t(69018),REMOVE_KEY:t(85549)}},87499:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(65154),a={CanvasTexture:t(17487),DynamicTexture:t(845),Events:t(38203),FilterMode:l,Frame:t(82047),Parsers:t(69150),Texture:t(31673),TextureManager:t(6237),TextureSource:t(32547)};a=s(!1,a,l),o.exports=a},35082:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(!l.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var a=t.source[s];t.add("__BASE",s,0,0,a.width,a.height);for(var r=l.getElementsByTagName("SubTexture"),i,n=0;n<r.length;n++){var h=r[n].attributes,d=h.name.value,u=parseInt(h.x.value,10),p=parseInt(h.y.value,10),v=parseInt(h.width.value,10),m=parseInt(h.height.value,10);if(i=t.add(d,s,u,p,v,m),h.frameX){var g=Math.abs(parseInt(h.frameX.value,10)),T=Math.abs(parseInt(h.frameY.value,10)),w=parseInt(h.frameWidth.value,10),b=parseInt(h.frameHeight.value,10);i.setTrim(v,m,g,T,w,b)}}return t};o.exports=x},83332:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.source[s];return t.add("__BASE",s,0,0,l.width,l.height),t};o.exports=x},21560:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.source[s];return t.add("__BASE",s,0,0,l.width,l.height),t};o.exports=x},64423:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(32742),l=function(a,r,i){if(!i.frames&&!i.textures){console.warn("Invalid Texture Atlas JSON Array");return}var n=a.source[r];a.add("__BASE",r,0,0,n.width,n.height);for(var h=Array.isArray(i.textures)?i.textures[r].frames:i.frames,d,u=0;u<h.length;u++){var p=h[u];if(d=a.add(p.filename,r,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+p.filename);continue}p.trimmed&&d.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(d.rotated=!0,d.updateUVsInverted());var v=p.anchor||p.pivot;v&&(d.customPivot=!0,d.pivotX=v.x,d.pivotY=v.y),p.scale9Borders&&d.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),d.customData=s(p)}for(var m in i)m!=="frames"&&(Array.isArray(i[m])?a.customData[m]=i[m].slice(0):a.customData[m]=i[m]);return a};o.exports=l},17264:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(32742),l=function(a,r,i){if(!i.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=a.source[r];a.add("__BASE",r,0,0,n.width,n.height);var h=i.frames,d;for(var u in h)if(h.hasOwnProperty(u)){var p=h[u];if(d=a.add(u,r,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+u);continue}p.trimmed&&d.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(d.rotated=!0,d.updateUVsInverted());var v=p.anchor||p.pivot;v&&(d.customPivot=!0,d.pivotX=v.x,d.pivotY=v.y),p.scale9Borders&&d.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),d.customData=s(p)}for(var m in i)m!=="frames"&&(Array.isArray(i[m])?a.customData[m]=i[m].slice(0):a.customData[m]=i[m]);return a};o.exports=l},67409:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s=[171,75,84,88,32,49,49,187,13,10,26,10],l,a=new Uint8Array(t,0,12);for(l=0;l<a.length;l++)if(a[l]!==s[l]){console.warn("KTXParser - Invalid file format");return}var r=Uint32Array.BYTES_PER_ELEMENT,i=new DataView(t,12,13*r),n=i.getUint32(0,!0)===67305985,h=i.getUint32(1*r,n);if(h!==0){console.warn("KTXParser - Only compressed formats supported");return}var d=i.getUint32(4*r,n),u=i.getUint32(6*r,n),p=i.getUint32(7*r,n),v=Math.max(1,i.getUint32(11*r,n)),m=i.getUint32(12*r,n),g=new Array(v),T=12+13*4+m,w=u,b=p;for(l=0;l<v;l++){var E=new Int32Array(t,T,1)[0];T+=4,g[l]={data:new Uint8Array(t,T,E),width:w,height:b},w=Math.max(1,w>>1),b=Math.max(1,b>>1),T+=E}return{mipmaps:g,width:u,height:p,internalFormat:d,compressed:!0,generateMipmap:!1}};o.exports=x},24904:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function x(R,I,P,M,F,O,D){return D===void 0&&(D=16),Math.floor((R+P)/F)*Math.floor((I+M)/O)*D}function t(R,I){return R=Math.max(R,16),I=Math.max(I,8),R*I/4}function s(R,I){return R=Math.max(R,8),I=Math.max(I,8),R*I/2}function l(R,I){return x(R,I,3,3,4,4,8)}function a(R,I){return x(R,I,3,3,4,4)}function r(R,I){return x(R,I,4,3,5,4)}function i(R,I){return x(R,I,4,4,5,5)}function n(R,I){return x(R,I,5,4,6,5)}function h(R,I){return x(R,I,5,5,6,6)}function d(R,I){return x(R,I,7,4,8,5)}function u(R,I){return x(R,I,7,5,8,6)}function p(R,I){return x(R,I,7,7,8,8)}function v(R,I){return x(R,I,9,4,10,5)}function m(R,I){return x(R,I,9,5,10,6)}function g(R,I){return x(R,I,9,7,10,8)}function T(R,I){return x(R,I,9,9,10,10)}function w(R,I){return x(R,I,11,9,12,10)}function b(R,I){return x(R,I,11,11,12,12)}var E={0:{sizeFunc:t,glFormat:35841},1:{sizeFunc:t,glFormat:35843},2:{sizeFunc:s,glFormat:35840},3:{sizeFunc:s,glFormat:35842},6:{sizeFunc:l,glFormat:36196},7:{sizeFunc:l,glFormat:33776},8:{sizeFunc:a,glFormat:33777},9:{sizeFunc:a,glFormat:33778},11:{sizeFunc:a,glFormat:33779},22:{sizeFunc:l,glFormat:37492},23:{sizeFunc:a,glFormat:37496},24:{sizeFunc:l,glFormat:37494},25:{sizeFunc:l,glFormat:37488},26:{sizeFunc:a,glFormat:37490},27:{sizeFunc:a,glFormat:37808},28:{sizeFunc:r,glFormat:37809},29:{sizeFunc:i,glFormat:37810},30:{sizeFunc:n,glFormat:37811},31:{sizeFunc:h,glFormat:37812},32:{sizeFunc:d,glFormat:37813},33:{sizeFunc:u,glFormat:37814},34:{sizeFunc:p,glFormat:37815},35:{sizeFunc:v,glFormat:37816},36:{sizeFunc:m,glFormat:37817},37:{sizeFunc:g,glFormat:37818},38:{sizeFunc:T,glFormat:37819},39:{sizeFunc:w,glFormat:37820},40:{sizeFunc:b,glFormat:37821}},A=function(R){for(var I=new Uint32Array(R,0,13),P=I[2],M=E[P].glFormat,F=E[P].sizeFunc,O=I[11],D=I[7],L=I[6],z=52+I[12],X=new Uint8Array(R,z),H=new Array(O),J=0,G=D,k=L,N=0;N<O;N++){var B=F(G,k);H[N]={data:new Uint8Array(X.buffer,X.byteOffset+J,B),width:G,height:k},G=Math.max(1,G>>1),k=Math.max(1,k>>1),J+=B}return{mipmaps:H,width:D,height:L,internalFormat:M,compressed:!0,generateMipmap:!1}};o.exports=A},6143:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a,r,i,n,h,d,u){var p=s(u,"frameWidth",null),v=s(u,"frameHeight",p);if(p===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var m=a.source[r];a.add("__BASE",r,0,0,m.width,m.height);var g=s(u,"startFrame",0),T=s(u,"endFrame",-1),w=s(u,"margin",0),b=s(u,"spacing",0),E=Math.floor((h-w+b)/(p+b)),A=Math.floor((d-w+b)/(v+b)),R=E*A;R===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",a.key),(g>R||g<-R)&&(g=0),g<0&&(g=R+g),(T===-1||T>R||T<g)&&(T=R);for(var I=w,P=w,M=0,F=0,O=0,D=0;D<R;D++){M=0,F=0;var L=I+p,z=P+v;L>h&&(M=L-h),z>d&&(F=z-d),D>=g&&D<=T&&(a.add(O,r,i+I,n+P,p-M,v-F),O++),I+=p+b,I+p>h&&(I=w,P+=v+b)}return a};o.exports=l},20030:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a,r,i){var n=s(i,"frameWidth",null),h=s(i,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=a.source[0];a.add("__BASE",0,0,0,d.width,d.height),s(i,"startFrame",0),s(i,"endFrame",-1);for(var u=s(i,"margin",0),p=s(i,"spacing",0),v=r.cutX,m=r.cutY,g=r.cutWidth,T=r.cutHeight,w=r.realWidth,b=r.realHeight,E=Math.floor((w-u+p)/(n+p)),A=Math.floor((b-u+p)/(h+p)),R=r.x,I=n-R,P=n-(w-g-R),M=r.y,F=h-M,O=h-(b-T-M),D,L=u,z=u,X=0,H=0,J=0;J<A;J++){for(var G=J===0,k=J===A-1,N=0;N<E;N++){var B=N===0,U=N===E-1;if(D=a.add(X,H,v+L,m+z,n,h),B||G||U||k){var W=B?R:0,K=G?M:0,q=0,_=0;B&&(q+=n-I),U&&(q+=n-P),G&&(_+=h-F),k&&(_+=h-O);var rt=n-q,ft=h-_;D.cutWidth=rt,D.cutHeight=ft,D.setTrim(n,h,W,K,rt,ft)}L+=p,B?L+=I:U?L+=P:L+=n,X++}L=u,z+=p,G?z+=F:k?z+=O:z+=h}return a};o.exports=l},89187:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=0,t=function(l,a,r,i){var n=x-i.y-i.height;l.add(r,a,i.x,n,i.width,i.height)},s=function(l,a,r){var i=l.source[a];l.add("__BASE",a,0,0,i.width,i.height),x=i.height;for(var n=r.split(`
`),h=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",u="",p={x:0,y:0,width:0,height:0},v=0;v<n.length;v++){var m=n[v].match(h);if(m){var g=m[1]==="- ",T=m[2],w=m[3];if(g&&(u!==d&&(t(l,a,u,p),d=u),p={x:0,y:0,width:0,height:0}),T==="name"){u=w;continue}switch(T){case"x":case"y":case"width":case"height":p[T]=parseInt(w,10);break}}}return u!==d&&t(l,a,u,p),l};o.exports=s},69150:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AtlasXML:t(35082),Canvas:t(83332),Image:t(21560),JSONArray:t(64423),JSONHash:t(17264),KTXParser:t(67409),PVRParser:t(24904),SpriteSheet:t(6143),SpriteSheetFromAtlas:t(20030),UnityYAML:t(89187)}},93560:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h,d,u,p){(n===void 0||n<=0)&&(n=32),(h===void 0||h<=0)&&(h=32),d===void 0&&(d=0),u===void 0&&(u=0),this.name=r,this.firstgid=i|0,this.imageWidth=n|0,this.imageHeight=h|0,this.imageMargin=d|0,this.imageSpacing=u|0,this.properties=p||{},this.images=[],this.total=0},containsImageIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},addImage:function(a,r){return this.images.push({gid:a,image:r}),this.total++,this}});o.exports=l},46422:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){if(this.gids=[],r!==void 0)for(var i=0;i<r.length;++i)for(var n=r[i],h=0;h<n.total;++h)this.gids[n.firstgid+h]=n;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(a){this.gids=a?this._gids:void 0}},getTypeIncludingTile:function(a){if(a.type!==void 0&&a.type!=="")return a.type;if(!(!this.gids||a.gid===void 0)){var r=this.gids[a.gid];if(r){var i=r.getTileData(a.gid);if(i)return i.type}}},setTextureAndFrame:function(a,r,i,n){if(r===null&&this.gids&&n.gid!==void 0){var h=this.gids[n.gid];h&&(r===null&&h.image!==void 0&&(r=h.image.key),i===null&&(i=n.gid-h.firstgid),a.scene.textures.getFrame(r,i)||(r=null,i=null))}a.setTexture(r,i)},setPropertiesFromTiledObject:function(a,r){if(this.gids!==void 0&&r.gid!==void 0){var i=this.gids[r.gid];i!==void 0&&this.setFromJSON(a,i.getTileProperties(r.gid))}this.setFromJSON(a,r.properties)},setFromJSON:function(a,r){if(r){if(Array.isArray(r)){for(var i=0;i<r.length;i++){var n=r[i];a[n.name]!==void 0?a[n.name]=n.value:a.setData(n.name,n.value)}return}for(var h in r)a[h]!==void 0?a[h]=r[h]:a.setData(h,r[h])}}});o.exports=l},15043:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(16586),a=t(90715),r=t(89797),i=function(n,h,d,u,p,v,m,g){d===void 0&&(d=32),u===void 0&&(u=32),p===void 0&&(p=10),v===void 0&&(v=10),g===void 0&&(g=!1);var T=null;if(Array.isArray(m)){var w=h!==void 0?h:"map";T=a(w,s.ARRAY_2D,m,d,u,g)}else if(h!==void 0){var b=n.cache.tilemap.get(h);b?T=a(h,b.format,b.data,d,u,g):console.warn("No map data found for key "+h)}return T===null&&(T=new l({tileWidth:d,tileHeight:u,width:p,height:v})),new r(n,T)};o.exports=i},29633:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(12920),r=t(28699),i=t(66658),n=new s({Mixins:[l.AlphaSingle,l.Flip,l.Visible],initialize:function(d,u,p,v,m,g,T,w){this.layer=d,this.index=u,this.x=p,this.y=v,this.width=m,this.height=g,this.right,this.bottom,this.baseWidth=T!==void 0?T:m,this.baseHeight=w!==void 0?w:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(h,d){return!(h<this.pixelX||d<this.pixelY||h>this.right||d>this.bottom)},copy:function(h){return this.index=h.index,this.alpha=h.alpha,this.properties=r(h.properties),this.visible=h.visible,this.setFlip(h.flipX,h.flipY),this.tint=h.tint,this.rotation=h.rotation,this.collideUp=h.collideUp,this.collideDown=h.collideDown,this.collideLeft=h.collideLeft,this.collideRight=h.collideRight,this.collisionCallback=h.collisionCallback,this.collisionCallbackContext=h.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(h){var d=this.tilemapLayer;if(d){var u=d.tileToWorldXY(this.x,this.y,void 0,h);return u.x}return this.x*this.baseWidth},getRight:function(h){var d=this.tilemapLayer;return d?this.getLeft(h)+this.width*d.scaleX:this.getLeft(h)+this.width},getTop:function(h){var d=this.tilemapLayer;if(d){var u=d.tileToWorldXY(this.x,this.y,void 0,h);return u.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(h){var d=this.tilemapLayer;return d?this.getTop(h)+this.height*d.scaleY:this.getTop(h)+this.height},getBounds:function(h,d){return d===void 0&&(d=new i),d.x=this.getLeft(h),d.y=this.getTop(h),d.width=this.getRight(h)-d.x,d.height=this.getBottom(h)-d.y,d},getCenterX:function(h){return(this.getLeft(h)+this.getRight(h))/2},getCenterY:function(h){return(this.getTop(h)+this.getBottom(h))/2},intersects:function(h,d,u,p){return!(u<=this.pixelX||p<=this.pixelY||h>=this.right||d>=this.bottom)},isInteresting:function(h,d){return h&&d?this.canCollide||this.hasInterestingFace:h?this.collides:d?this.hasInterestingFace:!1},resetCollision:function(h){if(h===void 0&&(h=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,h){var d=this.tilemapLayer;d&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(h,d,u,p,v){if(d===void 0&&(d=h),u===void 0&&(u=h),p===void 0&&(p=h),v===void 0&&(v=!0),this.collideLeft=h,this.collideRight=d,this.collideUp=u,this.collideDown=p,this.faceLeft=h,this.faceRight=d,this.faceTop=u,this.faceBottom=p,v){var m=this.tilemapLayer;m&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(h,d){return h===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=h,this.collisionCallbackContext=d),this},setSize:function(h,d,u,p){return h!==void 0&&(this.width=h),d!==void 0&&(this.height=d),u!==void 0&&(this.baseWidth=u),p!==void 0&&(this.baseHeight=p),this.updatePixelXY(),this},updatePixelXY:function(){var h=this.layer.orientation;if(h===a.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(h===a.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(h===a.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(h===a.HEXAGONAL){var d=this.layer.staggerAxis,u=this.layer.staggerIndex,p=this.layer.hexSideLength,v,m;d==="y"?(m=(this.baseHeight-p)/2+p,u==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*m):d==="x"&&(v=(this.baseWidth-p)/2+p,this.pixelX=this.x*v,u==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var h=this.layer.tilemapLayer;if(h){var d=h.gidMap[this.index];if(d)return d}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var h=this.tilemapLayer;return h?h.tilemap:null}}});o.exports=n},89797:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14556),l=t(56694),a=t(75606),r=t(93560),i=t(72632),n=t(94990),h=t(46422),d=t(12920),u=t(52257),p=t(72677),v=t(13747),m=t(29633),g=t(5047),T=t(87177),w=t(47975),b=new l({initialize:function(A,R){this.scene=A,this.tileWidth=R.tileWidth,this.tileHeight=R.tileHeight,this.width=R.width,this.height=R.height,this.orientation=R.orientation,this.renderOrder=R.renderOrder,this.format=R.format,this.version=R.version,this.properties=R.properties,this.widthInPixels=R.widthInPixels,this.heightInPixels=R.heightInPixels,this.imageCollections=R.imageCollections,this.images=R.images,this.layers=R.layers,this.tiles=R.tiles,this.tilesets=R.tilesets,this.objects=R.objects,this.currentLayerIndex=0,this.hexSideLength=R.hexSideLength;var I=this.orientation;this._convert={WorldToTileXY:g.GetWorldToTileXYFunction(I),WorldToTileX:g.GetWorldToTileXFunction(I),WorldToTileY:g.GetWorldToTileYFunction(I),TileToWorldXY:g.GetTileToWorldXYFunction(I),TileToWorldX:g.GetTileToWorldXFunction(I),TileToWorldY:g.GetTileToWorldYFunction(I),GetTileCorners:g.GetTileCornersFunction(I)}},setRenderOrder:function(E){var A=["right-down","left-down","right-up","left-up"];return typeof E=="number"&&(E=A[E]),A.indexOf(E)>-1&&(this.renderOrder=E),this},addTilesetImage:function(E,A,R,I,P,M,F,O){if(E===void 0)return null;if(A==null&&(A=E),!this.scene.sys.textures.exists(A))return console.warn("Invalid Tileset Image: "+A),null;var D=this.scene.sys.textures.get(A),L=this.getTilesetIndex(E);if(L===null&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+E),null;var z=this.tilesets[L];return z?(z.setTileSize(R,I),z.setSpacing(P,M),z.setImage(D),z):(R===void 0&&(R=this.tileWidth),I===void 0&&(I=this.tileHeight),P===void 0&&(P=0),M===void 0&&(M=0),F===void 0&&(F=0),O===void 0&&(O={x:0,y:0}),z=new w(E,F,R,I,P,M,void 0,void 0,O),z.setImage(D),this.tilesets.push(z),this.tiles=s(this),z)},copy:function(E,A,R,I,P,M,F,O){return O=this.getLayer(O),O!==null?(g.Copy(E,A,R,I,P,M,F,O),this):null},createBlankLayer:function(E,A,R,I,P,M,F,O){R===void 0&&(R=0),I===void 0&&(I=0),P===void 0&&(P=this.width),M===void 0&&(M=this.height),F===void 0&&(F=this.tileWidth),O===void 0&&(O=this.tileHeight);var D=this.getLayerIndex(E);if(D!==null)return console.warn("Invalid Tilemap Layer ID: "+E),null;for(var L=new n({name:E,tileWidth:F,tileHeight:O,width:P,height:M,orientation:this.orientation}),z,X=0;X<M;X++){z=[];for(var H=0;H<P;H++)z.push(new m(L,-1,H,X,F,O,this.tileWidth,this.tileHeight));L.data.push(z)}this.layers.push(L),this.currentLayerIndex=this.layers.length-1;var J=new T(this.scene,this,this.currentLayerIndex,A,R,I);return J.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(J),J},createLayer:function(E,A,R,I){var P=this.getLayerIndex(E);if(P===null)return console.warn("Invalid Tilemap Layer ID: "+E),typeof E=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var M=this.layers[P];if(M.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+E),null;this.currentLayerIndex=P,R===void 0&&(R=M.x),I===void 0&&(I=M.y);var F=new T(this.scene,this,P,A,R,I);return F.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(F),F},createFromObjects:function(E,A,R){R===void 0&&(R=!0);var I=[],P=this.getObjectLayer(E);if(!P)return console.warn("createFromObjects: Invalid objectLayerName given: "+E),I;var M=new h(R?this.tilesets:void 0);Array.isArray(A)||(A=[A]);for(var F=P.objects,O=0;O<A.length;O++){var D=A[O],L=i(D,"id",null),z=i(D,"gid",null),X=i(D,"name",null),H=i(D,"type",null);M.enabled=!i(D,"ignoreTileset",null);for(var J,G=[],k=0;k<F.length;k++)J=F[k],(L===null&&z===null&&X===null&&H===null||L!==null&&J.id===L||z!==null&&J.gid===z||X!==null&&J.name===X||H!==null&&M.getTypeIncludingTile(J)===H)&&G.push(J);for(var N=i(D,"classType",v),B=i(D,"scene",this.scene),U=i(D,"container",null),W=i(D,"key",null),K=i(D,"frame",null),q=0;q<G.length;q++){J=G[q];var _=new N(B);if(_.setName(J.name),_.setPosition(J.x,J.y),M.setTextureAndFrame(_,W,K,J),J.width&&(_.displayWidth=J.width),J.height&&(_.displayHeight=J.height),this.orientation===d.ISOMETRIC){var rt=this.tileWidth/this.tileHeight,ft={x:_.x-_.y,y:(_.x+_.y)/rt};_.x=ft.x,_.y=ft.y}var vt={x:_.originX*J.width,y:(_.originY-(J.gid?1:0))*J.height};if(J.rotation){var mt=a(J.rotation);u(vt,mt),_.rotation=mt}_.x+=vt.x,_.y+=vt.y,(J.flippedHorizontal!==void 0||J.flippedVertical!==void 0)&&_.setFlip(J.flippedHorizontal,J.flippedVertical),J.visible||(_.visible=!1),M.setPropertiesFromTiledObject(_,J),U?U.add(_):B.add.existing(_),I.push(_)}}return I},createFromTiles:function(E,A,R,I,P,M){return M=this.getLayer(M),M===null?null:g.CreateFromTiles(E,A,R,I,P,M)},fill:function(E,A,R,I,P,M,F){return M===void 0&&(M=!0),F=this.getLayer(F),F===null?null:(g.Fill(E,A,R,I,P,M,F),this)},filterObjects:function(E,A,R){if(typeof E=="string"){var I=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+I),null}return E.objects.filter(A,R)},filterTiles:function(E,A,R,I,P,M,F,O){return O=this.getLayer(O),O===null?null:g.FilterTiles(E,A,R,I,P,M,F,O)},findByIndex:function(E,A,R,I){return I=this.getLayer(I),I===null?null:g.FindByIndex(E,A,R,I)},findObject:function(E,A,R){if(typeof E=="string"){var I=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+I),null}return E.objects.find(A,R)||null},findTile:function(E,A,R,I,P,M,F,O){return O=this.getLayer(O),O===null?null:g.FindTile(E,A,R,I,P,M,F,O)},forEachTile:function(E,A,R,I,P,M,F,O){return O=this.getLayer(O),O===null?null:(g.ForEachTile(E,A,R,I,P,M,F,O),this)},getImageIndex:function(E){return this.getIndex(this.images,E)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(E){return E.name})},getIndex:function(E,A){for(var R=0;R<E.length;R++)if(E[R].name===A)return R;return null},getLayer:function(E){var A=this.getLayerIndex(E);return A!==null?this.layers[A]:null},getObjectLayer:function(E){var A=this.getIndex(this.objects,E);return A!==null?this.objects[A]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(E){return E.name})},getLayerIndex:function(E){return E===void 0?this.currentLayerIndex:typeof E=="string"?this.getLayerIndexByName(E):typeof E=="number"&&E<this.layers.length?E:E instanceof T&&E.tilemap===this?E.layerIndex:null},getLayerIndexByName:function(E){return this.getIndex(this.layers,E)},getTileAt:function(E,A,R,I){return I=this.getLayer(I),I===null?null:g.GetTileAt(E,A,R,I)},getTileAtWorldXY:function(E,A,R,I,P){return P=this.getLayer(P),P===null?null:g.GetTileAtWorldXY(E,A,R,I,P)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(E){return E.name})},getTilesWithin:function(E,A,R,I,P,M){return M=this.getLayer(M),M===null?null:g.GetTilesWithin(E,A,R,I,P,M)},getTilesWithinShape:function(E,A,R,I){return I=this.getLayer(I),I===null?null:g.GetTilesWithinShape(E,A,R,I)},getTilesWithinWorldXY:function(E,A,R,I,P,M,F){return F=this.getLayer(F),F===null?null:g.GetTilesWithinWorldXY(E,A,R,I,P,M,F)},getTileset:function(E){var A=this.getIndex(this.tilesets,E);return A!==null?this.tilesets[A]:null},getTilesetIndex:function(E){return this.getIndex(this.tilesets,E)},hasTileAt:function(E,A,R){return R=this.getLayer(R),R===null?null:g.HasTileAt(E,A,R)},hasTileAtWorldXY:function(E,A,R,I){return I=this.getLayer(I),I===null?null:g.HasTileAtWorldXY(E,A,R,I)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(E){this.setLayer(E)}},putTileAt:function(E,A,R,I,P){return I===void 0&&(I=!0),P=this.getLayer(P),P===null?null:g.PutTileAt(E,A,R,I,P)},putTileAtWorldXY:function(E,A,R,I,P,M){return I===void 0&&(I=!0),M=this.getLayer(M),M===null?null:g.PutTileAtWorldXY(E,A,R,I,P,M)},putTilesAt:function(E,A,R,I,P){return I===void 0&&(I=!0),P=this.getLayer(P),P===null?null:(g.PutTilesAt(E,A,R,I,P),this)},randomize:function(E,A,R,I,P,M){return M=this.getLayer(M),M===null?null:(g.Randomize(E,A,R,I,P,M),this)},calculateFacesAt:function(E,A,R){return R=this.getLayer(R),R===null?null:(g.CalculateFacesAt(E,A,R),this)},calculateFacesWithin:function(E,A,R,I,P){return P=this.getLayer(P),P===null?null:(g.CalculateFacesWithin(E,A,R,I,P),this)},removeLayer:function(E){var A=this.getLayerIndex(E);if(A!==null){p(this.layers,A);for(var R=A;R<this.layers.length;R++)this.layers[R].tilemapLayer&&this.layers[R].tilemapLayer.layerIndex--;return this.currentLayerIndex===A&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(E){var A=this.getLayerIndex(E);return A!==null?(E=this.layers[A],E.tilemapLayer.destroy(),p(this.layers,A),this.currentLayerIndex===A&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var E=this.layers,A=0;A<E.length;A++)E[A].tilemapLayer&&E[A].tilemapLayer.destroy(!1);return E.length=0,this.currentLayerIndex=0,this},removeTile:function(E,A,R){A===void 0&&(A=-1),R===void 0&&(R=!0);var I=[];Array.isArray(E)||(E=[E]);for(var P=0;P<E.length;P++){var M=E[P];I.push(this.removeTileAt(M.x,M.y,!0,R,M.tilemapLayer)),A>-1&&this.putTileAt(A,M.x,M.y,R,M.tilemapLayer)}return I},removeTileAt:function(E,A,R,I,P){return R===void 0&&(R=!0),I===void 0&&(I=!0),P=this.getLayer(P),P===null?null:g.RemoveTileAt(E,A,R,I,P)},removeTileAtWorldXY:function(E,A,R,I,P,M){return R===void 0&&(R=!0),I===void 0&&(I=!0),M=this.getLayer(M),M===null?null:g.RemoveTileAtWorldXY(E,A,R,I,P,M)},renderDebug:function(E,A,R){return R=this.getLayer(R),R===null?null:(this.orientation===d.ORTHOGONAL&&g.RenderDebug(E,A,R),this)},renderDebugFull:function(E,A){for(var R=this.layers,I=0;I<R.length;I++)g.RenderDebug(E,A,R[I]);return this},replaceByIndex:function(E,A,R,I,P,M,F){return F=this.getLayer(F),F===null?null:(g.ReplaceByIndex(E,A,R,I,P,M,F),this)},setCollision:function(E,A,R,I,P){return A===void 0&&(A=!0),R===void 0&&(R=!0),P===void 0&&(P=!0),I=this.getLayer(I),I===null?null:(g.SetCollision(E,A,R,I,P),this)},setCollisionBetween:function(E,A,R,I,P){return R===void 0&&(R=!0),I===void 0&&(I=!0),P=this.getLayer(P),P===null?null:(g.SetCollisionBetween(E,A,R,I,P),this)},setCollisionByProperty:function(E,A,R,I){return A===void 0&&(A=!0),R===void 0&&(R=!0),I=this.getLayer(I),I===null?null:(g.SetCollisionByProperty(E,A,R,I),this)},setCollisionByExclusion:function(E,A,R,I){return A===void 0&&(A=!0),R===void 0&&(R=!0),I=this.getLayer(I),I===null?null:(g.SetCollisionByExclusion(E,A,R,I),this)},setCollisionFromCollisionGroup:function(E,A,R){return E===void 0&&(E=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(g.SetCollisionFromCollisionGroup(E,A,R),this)},setTileIndexCallback:function(E,A,R,I){return I=this.getLayer(I),I===null?null:(g.SetTileIndexCallback(E,A,R,I),this)},setTileLocationCallback:function(E,A,R,I,P,M,F){return F=this.getLayer(F),F===null?null:(g.SetTileLocationCallback(E,A,R,I,P,M,F),this)},setLayer:function(E){var A=this.getLayerIndex(E);return A!==null&&(this.currentLayerIndex=A),this},setBaseTileSize:function(E,A){this.tileWidth=E,this.tileHeight=A,this.widthInPixels=this.width*E,this.heightInPixels=this.height*A;for(var R=0;R<this.layers.length;R++){this.layers[R].baseTileWidth=E,this.layers[R].baseTileHeight=A;for(var I=this.layers[R].data,P=this.layers[R].width,M=this.layers[R].height,F=0;F<M;F++)for(var O=0;O<P;O++){var D=I[F][O];D!==null&&D.setSize(void 0,void 0,E,A)}}return this},setLayerTileSize:function(E,A,R){if(R=this.getLayer(R),R===null)return this;R.tileWidth=E,R.tileHeight=A;for(var I=R.data,P=R.width,M=R.height,F=0;F<M;F++)for(var O=0;O<P;O++){var D=I[F][O];D!==null&&D.setSize(E,A)}return this},shuffle:function(E,A,R,I,P){return P=this.getLayer(P),P===null?null:(g.Shuffle(E,A,R,I,P),this)},swapByIndex:function(E,A,R,I,P,M,F){return F=this.getLayer(F),F===null?null:(g.SwapByIndex(E,A,R,I,P,M,F),this)},tileToWorldX:function(E,A,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldX(E,A,R)},tileToWorldY:function(E,A,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldY(E,A,R)},tileToWorldXY:function(E,A,R,I,P){return P=this.getLayer(P),P===null?null:this._convert.TileToWorldXY(E,A,R,I,P)},getTileCorners:function(E,A,R,I){return I=this.getLayer(I),I===null?null:this._convert.GetTileCorners(E,A,R,I)},weightedRandomize:function(E,A,R,I,P,M){return M=this.getLayer(M),M===null?null:(g.WeightedRandomize(A,R,I,P,E,M),this)},worldToTileX:function(E,A,R,I){return I=this.getLayer(I),I===null?null:this._convert.WorldToTileX(E,A,R,I)},worldToTileY:function(E,A,R,I){return I=this.getLayer(I),I===null?null:this._convert.WorldToTileY(E,A,R,I)},worldToTileXY:function(E,A,R,I,P,M){return M=this.getLayer(M),M===null?null:this._convert.WorldToTileXY(E,A,R,I,P,M)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});o.exports=b},4843:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99325),l=t(15043);s.register("tilemap",function(a){var r=a!==void 0?a:{};return l(this.scene,r.key,r.tileWidth,r.tileHeight,r.width,r.height,r.data,r.insertNull)})},37940:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(15043);s.register("tilemap",function(a,r,i,n,h,d,u){return a===null&&(a=void 0),r===null&&(r=void 0),i===null&&(i=void 0),n===null&&(n=void 0),h===null&&(h=void 0),l(this.scene,a,r,i,n,h,d,u)})},87177:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(95239),a=t(64937),r=t(89980),i=t(5047),n=t(96193),h=t(93736),d=new s({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.Transform,a.Visible,a.ScrollFactor,l,n],initialize:function(p,v,m,g,T,w){r.call(this,p,"TilemapLayer"),this.isTilemap=!0,this.tilemap=v,this.layerIndex=m,this.layer=v.layers[m],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=i.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new h,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(g),this.setAlpha(this.layer.alpha),this.setPosition(T,w),this.setOrigin(0,0),this.setSize(v.tileWidth*this.layer.width,v.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(u){var p=[],v=[],m=this.tilemap;Array.isArray(u)||(u=[u]);for(var g=0;g<u.length;g++){var T=u[g];if(typeof T=="string"&&(T=m.getTileset(T)),T){v.push(T);for(var w=T.firstgid,b=0;b<T.total;b++)p[w+b]=T}}this.gidMap=p,this.tileset=v},setRenderOrder:function(u){var p=["right-down","left-down","right-up","left-up"];return typeof u=="string"&&(u=p.indexOf(u)),u>=0&&u<4&&(this._renderOrder=u),this},calculateFacesAt:function(u,p){return i.CalculateFacesAt(u,p,this.layer),this},calculateFacesWithin:function(u,p,v,m){return i.CalculateFacesWithin(u,p,v,m,this.layer),this},createFromTiles:function(u,p,v,m,g){return i.CreateFromTiles(u,p,v,m,g,this.layer)},cull:function(u){return this.cullCallback(this.layer,u,this.culledTiles,this._renderOrder)},copy:function(u,p,v,m,g,T,w){return i.Copy(u,p,v,m,g,T,w,this.layer),this},fill:function(u,p,v,m,g,T){return i.Fill(u,p,v,m,g,T,this.layer),this},filterTiles:function(u,p,v,m,g,T,w){return i.FilterTiles(u,p,v,m,g,T,w,this.layer)},findByIndex:function(u,p,v){return i.FindByIndex(u,p,v,this.layer)},findTile:function(u,p,v,m,g,T,w){return i.FindTile(u,p,v,m,g,T,w,this.layer)},forEachTile:function(u,p,v,m,g,T,w){return i.ForEachTile(u,p,v,m,g,T,w,this.layer),this},setTint:function(u,p,v,m,g,T){u===void 0&&(u=16777215);var w=function(b){b.tint=u,b.tintFill=!1};return this.forEachTile(w,this,p,v,m,g,T)},setTintFill:function(u,p,v,m,g,T){u===void 0&&(u=16777215);var w=function(b){b.tint=u,b.tintFill=!0};return this.forEachTile(w,this,p,v,m,g,T)},getTileAt:function(u,p,v){return i.GetTileAt(u,p,v,this.layer)},getTileAtWorldXY:function(u,p,v,m){return i.GetTileAtWorldXY(u,p,v,m,this.layer)},getIsoTileAtWorldXY:function(u,p,v,m,g){v===void 0&&(v=!0);var T=this.tempVec;return i.IsometricWorldToTileXY(u,p,!0,T,g,this.layer,v),this.getTileAt(T.x,T.y,m)},getTilesWithin:function(u,p,v,m,g){return i.GetTilesWithin(u,p,v,m,g,this.layer)},getTilesWithinShape:function(u,p,v){return i.GetTilesWithinShape(u,p,v,this.layer)},getTilesWithinWorldXY:function(u,p,v,m,g,T){return i.GetTilesWithinWorldXY(u,p,v,m,g,T,this.layer)},hasTileAt:function(u,p){return i.HasTileAt(u,p,this.layer)},hasTileAtWorldXY:function(u,p,v){return i.HasTileAtWorldXY(u,p,v,this.layer)},putTileAt:function(u,p,v,m){return i.PutTileAt(u,p,v,m,this.layer)},putTileAtWorldXY:function(u,p,v,m,g){return i.PutTileAtWorldXY(u,p,v,m,g,this.layer)},putTilesAt:function(u,p,v,m){return i.PutTilesAt(u,p,v,m,this.layer),this},randomize:function(u,p,v,m,g){return i.Randomize(u,p,v,m,g,this.layer),this},removeTileAt:function(u,p,v,m){return i.RemoveTileAt(u,p,v,m,this.layer)},removeTileAtWorldXY:function(u,p,v,m,g){return i.RemoveTileAtWorldXY(u,p,v,m,g,this.layer)},renderDebug:function(u,p){return i.RenderDebug(u,p,this.layer),this},replaceByIndex:function(u,p,v,m,g,T){return i.ReplaceByIndex(u,p,v,m,g,T,this.layer),this},setSkipCull:function(u){return u===void 0&&(u=!0),this.skipCull=u,this},setCullPadding:function(u,p){return u===void 0&&(u=1),p===void 0&&(p=1),this.cullPaddingX=u,this.cullPaddingY=p,this},setCollision:function(u,p,v,m){return i.SetCollision(u,p,v,this.layer,m),this},setCollisionBetween:function(u,p,v,m){return i.SetCollisionBetween(u,p,v,m,this.layer),this},setCollisionByProperty:function(u,p,v){return i.SetCollisionByProperty(u,p,v,this.layer),this},setCollisionByExclusion:function(u,p,v){return i.SetCollisionByExclusion(u,p,v,this.layer),this},setCollisionFromCollisionGroup:function(u,p){return i.SetCollisionFromCollisionGroup(u,p,this.layer),this},setTileIndexCallback:function(u,p,v){return i.SetTileIndexCallback(u,p,v,this.layer),this},setTileLocationCallback:function(u,p,v,m,g,T){return i.SetTileLocationCallback(u,p,v,m,g,T,this.layer),this},shuffle:function(u,p,v,m){return i.Shuffle(u,p,v,m,this.layer),this},swapByIndex:function(u,p,v,m,g,T){return i.SwapByIndex(u,p,v,m,g,T,this.layer),this},tileToWorldX:function(u,p){return this.tilemap.tileToWorldX(u,p,this)},tileToWorldY:function(u,p){return this.tilemap.tileToWorldY(u,p,this)},tileToWorldXY:function(u,p,v,m){return this.tilemap.tileToWorldXY(u,p,v,m,this)},getTileCorners:function(u,p,v){return this.tilemap.getTileCorners(u,p,v,this)},weightedRandomize:function(u,p,v,m,g){return i.WeightedRandomize(p,v,m,g,u,this.layer),this},worldToTileX:function(u,p,v){return this.tilemap.worldToTileX(u,p,v,this)},worldToTileY:function(u,p,v){return this.tilemap.worldToTileY(u,p,v,this)},worldToTileXY:function(u,p,v,m,g){return this.tilemap.worldToTileXY(u,p,v,m,g,this)},destroy:function(u){u===void 0&&(u=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),u&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});o.exports=d},17394:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(69360),l=new s,a=new s,r=new s,i=function(n,h,d,u){var p=h.cull(d),v=p.length,m=d.alpha*h.alpha;if(!(v===0||m<=0)){var g=l,T=a,w=r;T.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),g.copyFrom(d.matrix);var b=n.currentContext,E=h.gidMap;b.save(),u?(g.multiplyWithOffset(u,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),T.e=h.x,T.f=h.y,g.multiply(T,w),w.copyToContext(b)):(T.e-=d.scrollX*h.scrollFactorX,T.f-=d.scrollY*h.scrollFactorY,T.copyToContext(b)),(!n.antialias||h.scaleX>1||h.scaleY>1)&&(b.imageSmoothingEnabled=!1);for(var A=0;A<v;A++){var R=p[A],I=E[R.index];if(I){var P=I.image.getSourceImage(),M=I.getTileTextureCoordinates(R.index),F=I.tileWidth,O=I.tileHeight;if(!(M===null||F===0||O===0)){var D=F*.5,L=O*.5;M.x+=I.tileOffset.x,M.y+=I.tileOffset.y,b.save(),b.translate(R.pixelX+D,R.pixelY+L),R.rotation!==0&&b.rotate(R.rotation),(R.flipX||R.flipY)&&b.scale(R.flipX?-1:1,R.flipY?-1:1),b.globalAlpha=m*R.alpha,b.drawImage(P,M.x,M.y,F,O,-D,-L,F,O),b.restore()}}}b.restore()}};o.exports=i},96193:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(51395),a=t(17394),o.exports={renderWebGL:l,renderCanvas:a}},51395:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i){var n=r.cull(i),h=n.length,d=i.alpha*r.alpha;if(!(h===0||d<=0)){var u=r.gidMap,p=a.pipelines.set(r.pipeline,r),v=s.getTintAppendFloatAlpha,m=r.scrollFactorX,g=r.scrollFactorY,T=r.x,w=r.y,b=r.scaleX,E=r.scaleY;a.pipelines.preBatch(r);for(var A=0;A<h;A++){var R=n[A],I=u[R.index];if(I){var P=I.getTileTextureCoordinates(R.index);if(P!==null){var M=I.glTexture,F=p.setTexture2D(M,r),O=I.tileWidth,D=I.tileHeight,L=P.x,z=P.y,X=I.tileWidth*.5,H=I.tileHeight*.5,J=I.tileOffset.x,G=I.tileOffset.y,k=v(R.tint,d*R.alpha);p.batchTexture(r,M,M.width,M.height,T+R.pixelX*b+(X*b-J),w+R.pixelY*E+(H*E-G),R.width,R.height,b,E,R.rotation,R.flipX,R.flipY,m,g,X,H,L,z,O,D,k,k,k,k,R.tintFill,0,0,i,null,!0,F,!0)}}}a.pipelines.postBatch(r)}};o.exports=l},47975:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93736),a=new s({initialize:function(i,n,h,d,u,p,v,m,g){(h===void 0||h<=0)&&(h=32),(d===void 0||d<=0)&&(d=32),u===void 0&&(u=0),p===void 0&&(p=0),v===void 0&&(v={}),m===void 0&&(m={}),this.name=i,this.firstgid=n,this.tileWidth=h,this.tileHeight=d,this.tileMargin=u,this.tileSpacing=p,this.tileProperties=v,this.tileData=m,this.tileOffset=new l,g!==void 0&&this.tileOffset.set(g.x,g.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var i=this.getTileData(r);return i&&i.objectgroup?i.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){return this.image=r,this.glTexture=r.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(r,i){return r!==void 0&&(this.tileWidth=r),i!==void 0&&(this.tileHeight=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,i){return r!==void 0&&(this.tileMargin=r),i!==void 0&&(this.tileSpacing=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,i){var n=(i-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),h=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(n%1!==0||h%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),h=Math.floor(h),this.rows=n,this.columns=h,this.total=n*h,this.texCoordinates.length=0;for(var d=this.tileMargin,u=this.tileMargin,p=0;p<this.rows;p++){for(var v=0;v<this.columns;v++)this.texCoordinates.push({x:d,y:u}),d+=this.tileWidth+this.tileSpacing;d=this.tileMargin,u+=this.tileHeight+this.tileSpacing}return this}});o.exports=a},92839:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15494),l=function(a,r,i){var n=s(a,r,!0,i),h=s(a,r-1,!0,i),d=s(a,r+1,!0,i),u=s(a-1,r,!0,i),p=s(a+1,r,!0,i),v=n&&n.collides;return v&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),h&&h.collides&&(v&&(n.faceTop=!1),h.faceBottom=!v),d&&d.collides&&(v&&(n.faceBottom=!1),d.faceTop=!v),u&&u.collides&&(v&&(n.faceLeft=!1),u.faceRight=!v),p&&p.collides&&(v&&(n.faceRight=!1),p.faceLeft=!v),n&&!n.collides&&n.resetFaces(),n};o.exports=l},60386:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15494),l=t(50811),a=function(r,i,n,h,d){for(var u=null,p=null,v=null,m=null,g=l(r,i,n,h,null,d),T=0;T<g.length;T++){var w=g[T];w&&(w.collides?(u=s(w.x,w.y-1,!0,d),p=s(w.x,w.y+1,!0,d),v=s(w.x-1,w.y,!0,d),m=s(w.x+1,w.y,!0,d),w.faceTop=!(u&&u.collides),w.faceBottom=!(p&&p.collides),w.faceLeft=!(v&&v.collides),w.faceRight=!(m&&m.collides)):w.resetFaces())}};o.exports=a},13125:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=new s,a=function(r,i,n,h){var d=n.tilemapLayer,u=d.cullPaddingX,p=d.cullPaddingY,v=d.tilemap.tileToWorldXY(r,i,l,h,d);return v.x>h.worldView.x+d.scaleX*n.tileWidth*(-u-.5)&&v.x<h.worldView.right+d.scaleX*n.tileWidth*(u-.5)&&v.y>h.worldView.y+d.scaleY*n.tileHeight*(-p-1)&&v.y<h.worldView.bottom+d.scaleY*n.tileHeight*(p-.5)};o.exports=a},17347:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60386),l=t(50811),a=t(62839),r=t(29633),i=function(n,h,d,u,p,v,m,g){m===void 0&&(m=!0);var T=l(n,h,d,u,null,g),w=[];T.forEach(function(M){var F=new r(M.layer,M.index,M.x,M.y,M.width,M.height,M.baseWidth,M.baseHeight);F.copy(M),w.push(F)});for(var b=p-n,E=v-h,A=0;A<w.length;A++){var R=w[A],I=R.x+b,P=R.y+E;a(I,P,g)&&g.data[P][I]&&(R.x=I,R.y=P,R.updatePixelXY(),g.data[P][I]=R)}m&&s(p-1,v-1,d+2,u+2,g),T.length=0,w.length=0};o.exports=i},93604:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(51202),a=function(r,i,n,h,d,u){n||(n={}),Array.isArray(r)||(r=[r]);var p=u.tilemapLayer;h||(h=p.scene),d||(d=h.cameras.main);var v=s(0,0,u.width,u.height,null,u),m=[],g;for(g=0;g<v.length;g++){var T=v[g];if(r.indexOf(T.index)!==-1){var w=p.tileToWorldXY(T.x,T.y,void 0,d,u);n.x=w.x,n.y=w.y,m.push(h.make.sprite(n))}}if(typeof i=="number")for(g=0;g<r.length;g++)l(r[g],i,0,0,u.width,u.height,u);else if(Array.isArray(i))for(g=0;g<r.length;g++)l(r[g],i[g],0,0,u.width,u.height,u);return m};o.exports=a},71586:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(82127),a=t(84314),r=new s,i=function(n,h){var d=n.tilemapLayer.tilemap,u=n.tilemapLayer,p=Math.floor(d.tileWidth*u.scaleX),v=Math.floor(d.tileHeight*u.scaleY),m=a(h.worldView.x-u.x,p,0,!0)-u.cullPaddingX,g=l(h.worldView.right-u.x,p,0,!0)+u.cullPaddingX,T=a(h.worldView.y-u.y,v,0,!0)-u.cullPaddingY,w=l(h.worldView.bottom-u.y,v,0,!0)+u.cullPaddingY;return r.setTo(m,T,g-m,w-T)};o.exports=i},381:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(71586),l=t(6987),a=function(r,i,n,h){n===void 0&&(n=[]),h===void 0&&(h=0),n.length=0;var d=r.tilemapLayer,u=s(r,i);return(d.skipCull||d.scrollFactorX!==1||d.scrollFactorY!==1)&&(u.left=0,u.right=r.width,u.top=0,u.bottom=r.height),l(r,u,h,n),n};o.exports=a},97734:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(60386),a=t(68234),r=function(i,n,h,d,u,p,v){for(var m=v.collideIndexes.indexOf(i)!==-1,g=s(n,h,d,u,null,v),T=0;T<g.length;T++)g[T].index=i,a(g[T],m);p&&l(n-1,h-1,d+2,u+2,v)};o.exports=r},63555:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u,p){var v=s(i,n,h,d,u,p);return v.filter(a,r)};o.exports=l},37982:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){s===void 0&&(s=0),l===void 0&&(l=!1);var r=0,i,n,h;if(l){for(n=a.height-1;n>=0;n--)for(i=a.width-1;i>=0;i--)if(h=a.data[n][i],h&&h.index===t){if(r===s)return h;r+=1}}else for(n=0;n<a.height;n++)for(i=0;i<a.width;i++)if(h=a.data[n][i],h&&h.index===t){if(r===s)return h;r+=1}return null};o.exports=x},48297:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u,p){var v=s(i,n,h,d,u,p);return v.find(a,r)||null};o.exports=l},80916:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u,p){var v=s(i,n,h,d,u,p);v.forEach(a,r)};o.exports=l},31493:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(381),a=t(37524),r=t(20887),i=t(72283),n=t(19242),h=function(d){return d===s.ORTHOGONAL?l:d===s.HEXAGONAL?a:d===s.STAGGERED?n:d===s.ISOMETRIC?r:i};o.exports=h},15494:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62839),l=function(a,r,i,n){if(i===void 0&&(i=!1),s(a,r,n)){var h=n.data[r][a]||null;return h?h.index===-1?i?h:null:h:null}else return null};o.exports=l},24640:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15494),l=t(93736),a=new l,r=function(i,n,h,d,u){return u.tilemapLayer.worldToTileXY(i,n,!0,a,d),s(a.x,a.y,h,u)};o.exports=r},48495:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n){var h=n.baseTileWidth,d=n.baseTileHeight,u=n.tilemapLayer,p=0,v=0;u&&(i||(i=u.scene.cameras.main),p=u.x+i.scrollX*(1-u.scrollFactorX),v=u.y+i.scrollY*(1-u.scrollFactorY),h*=u.scaleX,d*=u.scaleY);var m=p+a*h,g=v+r*d;return[new s(m,g),new s(m+h,g),new s(m+h,g+d),new s(m,g+d)]};o.exports=l},7160:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(63634),a=t(72283),r=t(48495),i=function(n){return n===s.ORTHOGONAL?r:n===s.ISOMETRIC?a:n===s.HEXAGONAL?l:(n===s.STAGGERED,a)};o.exports=i},16884:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(72283),a=t(44150),r=function(i){return i===s.ORTHOGONAL?a:l};o.exports=r},68182:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(21715),a=t(21808),r=t(72283),i=t(33388),n=t(46836),h=function(d){return d===s.ORTHOGONAL?n:d===s.ISOMETRIC?a:d===s.HEXAGONAL?l:d===s.STAGGERED?i:r};o.exports=h},3752:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(72283),a=t(84132),r=t(42477),i=function(n){return n===s.ORTHOGONAL?r:n===s.STAGGERED?a:l};o.exports=i},50811:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a,r,i,n,h,d){a===void 0&&(a=0),r===void 0&&(r=0),i===void 0&&(i=d.width),n===void 0&&(n=d.height),h||(h={});var u=s(h,"isNotEmpty",!1),p=s(h,"isColliding",!1),v=s(h,"hasInterestingFace",!1);a<0&&(i+=a,a=0),r<0&&(n+=r,r=0),a+i>d.width&&(i=Math.max(d.width-a,0)),r+n>d.height&&(n=Math.max(d.height-r,0));for(var m=[],g=r;g<r+n;g++)for(var T=a;T<a+i;T++){var w=d.data[g][T];if(w!==null){if(u&&w.index===-1||p&&!w.collides||v&&!w.hasInterestingFace)continue;m.push(w)}}return m};o.exports=l},31674:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84068),l=t(50811),a=t(7563),r=t(72283),i=t(93736),n=function(v,m){return a.RectangleToTriangle(m,v)},h=new i,d=new i,u=new i,p=function(v,m,g,T){if(v===void 0)return[];var w=r;v instanceof s.Circle?w=a.CircleToRectangle:v instanceof s.Rectangle?w=a.RectangleToRectangle:v instanceof s.Triangle?w=n:v instanceof s.Line&&(w=a.LineToRectangle),T.tilemapLayer.worldToTileXY(v.left,v.top,!0,d,g);var b=d.x,E=d.y;T.tilemapLayer.worldToTileXY(v.right,v.bottom,!1,u,g);var A=Math.ceil(u.x),R=Math.ceil(u.y),I=Math.max(A-b,1),P=Math.max(R-E,1),M=l(b,E,I,P,m,T),F=T.tileWidth,O=T.tileHeight;T.tilemapLayer&&(F*=T.tilemapLayer.scaleX,O*=T.tilemapLayer.scaleY);for(var D=[],L=new s.Rectangle(0,0,F,O),z=0;z<M.length;z++){var X=M[z];T.tilemapLayer.tileToWorldXY(X.x,X.y,h,g),L.x=h.x,L.y=h.y,w(v,L)&&D.push(X)}return D};o.exports=p},44662:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(93736),a=new l,r=new l,i=function(n,h,d,u,p,v,m){var g=m.tilemapLayer.tilemap._convert.WorldToTileXY;g(n,h,!0,a,v,m);var T=a.x,w=a.y;g(n+d,h+u,!1,r,v,m);var b=Math.ceil(r.x),E=Math.ceil(r.y);return s(T,w,b-T,E-w,p,m)};o.exports=i},29296:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(10618),a=t(806),r=function(i){return i===s.ORTHOGONAL?a:l};o.exports=r},32688:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(11516),a=t(18750),r=t(72283),i=t(90562),n=t(45676),h=function(d){return d===s.ORTHOGONAL?n:d===s.ISOMETRIC?a:d===s.HEXAGONAL?l:d===s.STAGGERED?i:r};o.exports=h},74326:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(10618),a=t(3689),r=t(70520),i=function(n){return n===s.ORTHOGONAL?r:n===s.STAGGERED?a:l};o.exports=i},46598:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62839),l=function(a,r,i){if(s(a,r,i)){var n=i.data[r][a];return n!==null&&n.index>-1}else return!1};o.exports=l},28654:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46598),l=t(93736),a=new l,r=function(i,n,h,d){d.tilemapLayer.worldToTileXY(i,n,!0,a,h);var u=a.x,p=a.y;return s(u,p,d)};o.exports=r},6358:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82127),l=t(84314),a=function(r,i){var n=r.tilemapLayer.tilemap,h=r.tilemapLayer,d=Math.floor(n.tileWidth*h.scaleX),u=Math.floor(n.tileHeight*h.scaleY),p=r.hexSideLength,v,m,g,T;if(r.staggerAxis==="y"){var w=(u-p)/2+p;v=l(i.worldView.x-h.x,d,0,!0)-h.cullPaddingX,m=s(i.worldView.right-h.x,d,0,!0)+h.cullPaddingX,g=l(i.worldView.y-h.y,w,0,!0)-h.cullPaddingY,T=s(i.worldView.bottom-h.y,w,0,!0)+h.cullPaddingY}else{var b=(d-p)/2+p;v=l(i.worldView.x-h.x,b,0,!0)-h.cullPaddingX,m=s(i.worldView.right-h.x,b,0,!0)+h.cullPaddingX,g=l(i.worldView.y-h.y,u,0,!0)-h.cullPaddingY,T=s(i.worldView.bottom-h.y,u,0,!0)+h.cullPaddingY}return{left:v,right:m,top:g,bottom:T}};o.exports=a},37524:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6358),l=t(6987),a=function(r,i,n,h){n===void 0&&(n=[]),h===void 0&&(h=0),n.length=0;var d=r.tilemapLayer,u=s(r,i);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(u.left=0,u.right=r.width,u.top=0,u.bottom=r.height),l(r,u,h,n),n};o.exports=a},63634:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(21715),l=t(93736),a=new l,r=function(i,n,h,d){var u=d.baseTileWidth,p=d.baseTileHeight,v=d.tilemapLayer;v&&(u*=v.scaleX,p*=v.scaleY);var m=s(i,n,a,h,d),g=[],T=.5773502691896257,w,b;d.staggerAxis==="y"?(w=T*u,b=p/2):(w=u/2,b=T*p);for(var E=0;E<6;E++){var A=2*Math.PI*(.5-E)/6;g.push(new l(m.x+w*Math.cos(A),m.y+b*Math.sin(A)))}return g};o.exports=r},21715:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h){i||(i=new s);var d=h.baseTileWidth,u=h.baseTileHeight,p=h.tilemapLayer,v=0,m=0;p&&(n||(n=p.scene.cameras.main),v=p.x+n.scrollX*(1-p.scrollFactorX),m=p.y+n.scrollY*(1-p.scrollFactorY),d*=p.scaleX,u*=p.scaleY);var g=d/2,T=u/2,w,b;return h.staggerAxis==="y"?(w=v+d*a+d,b=m+1.5*r*T+T,r%2===0&&(this.staggerIndex==="odd"?w-=g:w+=g)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(w=v+1.5*a*g+g,b=m+u*a+u,a%2===0&&(this.staggerIndex==="odd"?b-=T:b+=T)),i.set(w,b)};o.exports=l},11516:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d){n||(n=new s);var u=d.baseTileWidth,p=d.baseTileHeight,v=d.tilemapLayer;v&&(h||(h=v.scene.cameras.main),a=a-(v.x+h.scrollX*(1-v.scrollFactorX)),r=r-(v.y+h.scrollY*(1-v.scrollFactorY)),u*=v.scaleX,p*=v.scaleY);var m=.5773502691896257,g=-.3333333333333333,T=0,w=.6666666666666666,b=u/2,E=p/2,A,R,I,P,M;d.staggerAxis==="y"?(A=(a-b)/(m*u),R=(r-E)/E,I=m*A+g*R,P=T*A+w*R):(A=(a-b)/b,R=(r-E)/(m*p),I=g*A+m*R,P=w*A+T*R),M=-I-P;var F=Math.round(I),O=Math.round(P),D=Math.round(M),L=Math.abs(F-I),z=Math.abs(O-P),X=Math.abs(D-M);L>z&&L>X?F=-O-D:z>X&&(O=-F-D);var H,J=O;return d.staggerIndex==="odd"?H=J%2===0?O/2+F:O/2+F-.5:H=J%2===0?O/2+F:O/2+F+.5,n.set(H,J)};o.exports=l},62839:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t>=0&&t<l.width&&s>=0&&s<l.height};o.exports=x},20887:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(13125),l=function(a,r,i,n){i===void 0&&(i=[]),n===void 0&&(n=0),i.length=0;var h=a.tilemapLayer,d=a.data,u=a.width,p=a.height,v=h.skipCull,m=0,g=u,T=0,w=p,b,E,A;if(n===0){for(E=T;E<w;E++)for(b=m;b<g;b++)if(v||s(b,E,a,r)){if(A=d[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;i.push(A)}}else if(n===1){for(E=T;E<w;E++)for(b=g;b>=m;b--)if(v||s(b,E,a,r)){if(A=d[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;i.push(A)}}else if(n===2){for(E=w;E>=T;E--)for(b=m;b<g;b++)if(v||s(b,E,a,r)){if(A=d[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;i.push(A)}}else if(n===3){for(E=w;E>=T;E--)for(b=g;b>=m;b--)if(v||s(b,E,a,r)){if(A=d[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;i.push(A)}}return h.tilesDrawn=i.length,h.tilesTotal=u*p,i};o.exports=l},21808:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h){i||(i=new s);var d=h.baseTileWidth,u=h.baseTileHeight,p=h.tilemapLayer,v=0,m=0;p&&(n||(n=p.scene.cameras.main),v=p.x+n.scrollX*(1-p.scrollFactorX),d*=p.scaleX,m=p.y+n.scrollY*(1-p.scrollFactorY),u*=p.scaleY);var g=v+(a-r)*(d/2),T=m+(a+r)*(u/2);return i.set(g,T)};o.exports=l},18750:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d,u){n||(n=new s);var p=d.baseTileWidth,v=d.baseTileHeight,m=d.tilemapLayer;m&&(h||(h=m.scene.cameras.main),r=r-(m.y+h.scrollY*(1-m.scrollFactorY)),v*=m.scaleY,a=a-(m.x+h.scrollX*(1-m.scrollFactorX)),p*=m.scaleX);var g=p/2,T=v/2;a=a-g,u||(r=r-v);var w=.5*(a/g+r/T),b=.5*(-a/g+r/T);return i&&(w=Math.floor(w),b=Math.floor(b)),n.set(w,b)};o.exports=l},29003:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29633),l=t(62839),a=t(92839),r=t(68234),i=function(n,h,d,u,p){if(u===void 0&&(u=!0),!l(h,d,p))return null;var v,m=p.data[d][h],g=m&&m.collides;n instanceof s?(p.data[d][h]===null&&(p.data[d][h]=new s(p,n.index,h,d,p.tileWidth,p.tileHeight)),p.data[d][h].copy(n)):(v=n,p.data[d][h]===null?p.data[d][h]=new s(p,v,h,d,p.tileWidth,p.tileHeight):p.data[d][h].index=v);var T=p.data[d][h],w=p.collideIndexes.indexOf(T.index)!==-1;if(v=n instanceof s?n.index:n,v===-1)T.width=p.tileWidth,T.height=p.tileHeight;else{var b=p.tilemapLayer.tilemap,E=b.tiles,A=E[v][2],R=b.tilesets[A];T.width=R.tileWidth,T.height=R.tileHeight}return r(T,w),u&&g!==T.collides&&a(h,d,p),T};o.exports=i},48565:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29003),l=t(93736),a=new l,r=function(i,n,h,d,u,p){return p.tilemapLayer.worldToTileXY(n,h,!0,a,u,p),s(i,a.x,a.y,d,p)};o.exports=r},56547:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60386),l=t(29003),a=function(r,i,n,h,d){if(h===void 0&&(h=!0),!Array.isArray(r))return null;Array.isArray(r[0])||(r=[r]);for(var u=r.length,p=r[0].length,v=0;v<u;v++)for(var m=0;m<p;m++){var g=r[v][m];l(g,i+m,n+v,!1,d)}h&&s(i-1,n-1,p+2,u+2,d)};o.exports=a},91180:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(72861),a=function(r,i,n,h,d,u){var p,v=s(r,i,n,h,{},u);if(!d)for(d=[],p=0;p<v.length;p++)d.indexOf(v[p].index)===-1&&d.push(v[p].index);for(p=0;p<v.length;p++)v[p].index=l(d)};o.exports=a},929:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29633),l=t(62839),a=t(92839),r=function(i,n,h,d,u){if(h===void 0&&(h=!0),d===void 0&&(d=!0),!l(i,n,u))return null;var p=u.data[n][i];if(p)u.data[n][i]=h?null:new s(u,-1,i,n,u.tileWidth,u.tileHeight);else return null;return d&&p&&p.collides&&a(i,n,u),p};o.exports=r},17384:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(929),l=t(93736),a=new l,r=function(i,n,h,d,u,p){return p.tilemapLayer.worldToTileXY(i,n,!0,a,u,p),s(a.x,a.y,h,d,p)};o.exports=r},93763:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(95509),a=new l(105,210,231,150),r=new l(243,134,48,200),i=new l(40,39,37,150),n=function(h,d,u){d===void 0&&(d={});var p=d.tileColor!==void 0?d.tileColor:a,v=d.collidingTileColor!==void 0?d.collidingTileColor:r,m=d.faceColor!==void 0?d.faceColor:i,g=s(0,0,u.width,u.height,null,u);h.translateCanvas(u.tilemapLayer.x,u.tilemapLayer.y),h.scaleCanvas(u.tilemapLayer.scaleX,u.tilemapLayer.scaleY);for(var T=0;T<g.length;T++){var w=g[T],b=w.width,E=w.height,A=w.pixelX,R=w.pixelY,I=w.collides?v:p;I!==null&&(h.fillStyle(I.color,I.alpha/255),h.fillRect(A,R,b,E)),A+=1,R+=1,b-=2,E-=2,m!==null&&(h.lineStyle(1,m.color,m.alpha/255),w.faceTop&&h.lineBetween(A,R,A+b,R),w.faceRight&&h.lineBetween(A+b,R,A+b,R+E),w.faceBottom&&h.lineBetween(A,R+E,A+b,R+E),w.faceLeft&&h.lineBetween(A,R,A,R+E))}};o.exports=n},51202:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u){for(var p=s(i,n,h,d,null,u),v=0;v<p.length;v++)p[v]&&p[v].index===a&&(p[v].index=r)};o.exports=l},6987:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=t.data,i=t.width,n=t.height,h=t.tilemapLayer,d=Math.max(0,s.left),u=Math.min(i,s.right),p=Math.max(0,s.top),v=Math.min(n,s.bottom),m,g,T;if(l===0)for(g=p;g<v;g++)for(m=d;r[g]&&m<u;m++)T=r[g][m],!(!T||T.index===-1||!T.visible||T.alpha===0)&&a.push(T);else if(l===1)for(g=p;g<v;g++)for(m=u;r[g]&&m>=d;m--)T=r[g][m],!(!T||T.index===-1||!T.visible||T.alpha===0)&&a.push(T);else if(l===2)for(g=v;g>=p;g--)for(m=d;r[g]&&m<u;m++)T=r[g][m],!(!T||T.index===-1||!T.visible||T.alpha===0)&&a.push(T);else if(l===3)for(g=v;g>=p;g--)for(m=u;r[g]&&m>=d;m--)T=r[g][m],!(!T||T.index===-1||!T.visible||T.alpha===0)&&a.push(T);return h.tilesDrawn=a.length,h.tilesTotal=i*n,a};o.exports=x},51710:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=t(91181),r=function(i,n,h,d,u){n===void 0&&(n=!0),h===void 0&&(h=!0),u===void 0&&(u=!0),Array.isArray(i)||(i=[i]);for(var p=0;p<i.length;p++)a(i[p],n,d);if(u)for(var v=0;v<d.height;v++)for(var m=0;m<d.width;m++){var g=d.data[v][m];g&&i.indexOf(g.index)!==-1&&s(g,n)}h&&l(0,0,d.width,d.height,d)};o.exports=r},15216:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=t(91181),r=function(i,n,h,d,u,p){if(h===void 0&&(h=!0),d===void 0&&(d=!0),p===void 0&&(p=!0),!(i>n)){for(var v=i;v<=n;v++)a(v,h,u);if(p)for(var m=0;m<u.height;m++)for(var g=0;g<u.width;g++){var T=u.data[m][g];T&&T.index>=i&&T.index<=n&&s(T,h)}d&&l(0,0,u.width,u.height,u)}};o.exports=r},33158:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=t(91181),r=function(i,n,h,d){n===void 0&&(n=!0),h===void 0&&(h=!0),Array.isArray(i)||(i=[i]);for(var u=0;u<d.height;u++)for(var p=0;p<d.width;p++){var v=d.data[u][p];v&&i.indexOf(v.index)===-1&&(s(v,n),a(v.index,n,d))}h&&l(0,0,d.width,d.height,d)};o.exports=r},4180:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=t(19256),r=function(i,n,h,d){n===void 0&&(n=!0),h===void 0&&(h=!0);for(var u=0;u<d.height;u++)for(var p=0;p<d.width;p++){var v=d.data[u][p];if(v){for(var m in i)if(a(v.properties,m)){var g=i[m];Array.isArray(g)||(g=[g]);for(var T=0;T<g.length;T++)v.properties[m]===g[T]&&s(v,n)}}}h&&l(0,0,d.width,d.height,d)};o.exports=r},18625:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=function(r,i,n){r===void 0&&(r=!0),i===void 0&&(i=!0);for(var h=0;h<n.height;h++)for(var d=0;d<n.width;d++){var u=n.data[h][d];if(u){var p=u.getCollisionGroup();p&&p.objects&&p.objects.length>0&&s(u,r)}}i&&l(0,0,n.width,n.height,n)};o.exports=a},91181:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=l.collideIndexes.indexOf(t);s&&a===-1?l.collideIndexes.push(t):!s&&a!==-1&&l.collideIndexes.splice(a,1)};o.exports=x},68234:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)};o.exports=x},11628:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){if(typeof t=="number")a.callbacks[t]=s!==null?{callback:s,callbackContext:l}:void 0;else for(var r=0,i=t.length;r<i;r++)a.callbacks[t[r]]=s!==null?{callback:s,callbackContext:l}:void 0};o.exports=x},72732:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u){for(var p=s(a,r,i,n,null,u),v=0;v<p.length;v++)p[v].setCollisionCallback(h,d)};o.exports=l},34397:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(18592),a=function(r,i,n,h,d){var u=s(r,i,n,h,null,d),p=u.map(function(m){return m.index});l(p);for(var v=0;v<u.length;v++)u[v].index=p[v]};o.exports=a},53945:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82127),l=t(84314),a=function(r,i){var n=r.tilemapLayer.tilemap,h=r.tilemapLayer,d=Math.floor(n.tileWidth*h.scaleX),u=Math.floor(n.tileHeight*h.scaleY),p=l(i.worldView.x-h.x,d,0,!0)-h.cullPaddingX,v=s(i.worldView.right-h.x,d,0,!0)+h.cullPaddingX,m=l(i.worldView.y-h.y,u/2,0,!0)-h.cullPaddingY,g=s(i.worldView.bottom-h.y,u/2,0,!0)+h.cullPaddingY;return{left:p,right:v,top:m,bottom:g}};o.exports=a},19242:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(53945),l=t(6987),a=function(r,i,n,h){n===void 0&&(n=[]),h===void 0&&(h=0),n.length=0;var d=r.tilemapLayer,u=s(r,i);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(u.left=0,u.right=r.width,u.top=0,u.bottom=r.height),l(r,u,h,n),n};o.exports=a},33388:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h){i||(i=new s);var d=h.baseTileWidth,u=h.baseTileHeight,p=h.tilemapLayer,v=0,m=0;p&&(n||(n=p.scene.cameras.main),v=p.x+n.scrollX*(1-p.scrollFactorX),d*=p.scaleX,m=p.y+n.scrollY*(1-p.scrollFactorY),u*=p.scaleY);var g=v+a*d+r%2*(d/2),T=m+r*(u/2);return i.set(g,T)};o.exports=l},84132:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=l.baseTileHeight,r=l.tilemapLayer,i=0;return r&&(s===void 0&&(s=r.scene.cameras.main),i=r.y+s.scrollY*(1-r.scrollFactorY),a*=r.scaleY),i+t*(a/2)+a};o.exports=x},90562:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d){n||(n=new s);var u=d.baseTileWidth,p=d.baseTileHeight,v=d.tilemapLayer;v&&(h||(h=v.scene.cameras.main),r=r-(v.y+h.scrollY*(1-v.scrollFactorY)),p*=v.scaleY,a=a-(v.x+h.scrollX*(1-v.scrollFactorX)),u*=v.scaleX);var m=i?Math.floor(r/(p/2)):r/(p/2),g=i?Math.floor((a+m%2*.5*u)/u):(a+m%2*.5*u)/u;return n.set(g,m)};o.exports=l},3689:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=a.baseTileHeight,i=a.tilemapLayer;return i&&(l||(l=i.scene.cameras.main),t=t-(i.y+l.scrollY*(1-i.scrollFactorY)),r*=i.scaleY),s?Math.floor(t/(r/2)):t/(r/2)};o.exports=x},55217:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u){for(var p=s(i,n,h,d,null,u),v=0;v<p.length;v++)p[v]&&(p[v].index===a?p[v].index=r:p[v].index===r&&(p[v].index=a))};o.exports=l},44150:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=l.baseTileWidth,r=l.tilemapLayer,i=0;return r&&(s||(s=r.scene.cameras.main),i=r.x+s.scrollX*(1-r.scrollFactorX),a*=r.scaleX),i+t*a};o.exports=x},46836:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44150),l=t(42477),a=t(93736),r=function(i,n,h,d,u){return h||(h=new a(0,0)),h.x=s(i,d,u),h.y=l(n,d,u),h};o.exports=r},42477:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=l.baseTileHeight,r=l.tilemapLayer,i=0;return r&&(s||(s=r.scene.cameras.main),i=r.y+s.scrollY*(1-r.scrollFactorY),a*=r.scaleY),i+t*a};o.exports=x},39677:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d){if(h){var u,p=s(a,r,i,n,null,d),v=0;for(u=0;u<h.length;u++)v+=h[u].weight;if(!(v<=0))for(u=0;u<p.length;u++){for(var m=Math.random()*v,g=0,T=-1,w=0;w<h.length;w++)if(g+=h[w].weight,m<=g){var b=h[w].index;T=Array.isArray(b)?b[Math.floor(Math.random()*b.length)]:b;break}p[u].index=T}}};o.exports=l},806:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45676),l=t(93736),a=new l,r=function(i,n,h,d){return s(i,0,n,a,h,d),a.x};o.exports=r},45676:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d){i===void 0&&(i=!0),n||(n=new s);var u=d.baseTileWidth,p=d.baseTileHeight,v=d.tilemapLayer;v&&(h||(h=v.scene.cameras.main),a=a-(v.x+h.scrollX*(1-v.scrollFactorX)),r=r-(v.y+h.scrollY*(1-v.scrollFactorY)),u*=v.scaleX,p*=v.scaleY);var m=a/u,g=r/p;return i&&(m=Math.floor(m),g=Math.floor(g)),n.set(m,g)};o.exports=l},70520:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45676),l=t(93736),a=new l,r=function(i,n,h,d){return s(0,i,n,a,h,d),a.y};o.exports=r},5047:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CalculateFacesAt:t(92839),CalculateFacesWithin:t(60386),CheckIsoBounds:t(13125),Copy:t(17347),CreateFromTiles:t(93604),CullBounds:t(71586),CullTiles:t(381),Fill:t(97734),FilterTiles:t(63555),FindByIndex:t(37982),FindTile:t(48297),ForEachTile:t(80916),GetCullTilesFunction:t(31493),GetTileAt:t(15494),GetTileAtWorldXY:t(24640),GetTileCorners:t(48495),GetTileCornersFunction:t(7160),GetTilesWithin:t(50811),GetTilesWithinShape:t(31674),GetTilesWithinWorldXY:t(44662),GetTileToWorldXFunction:t(16884),GetTileToWorldXYFunction:t(68182),GetTileToWorldYFunction:t(3752),GetWorldToTileXFunction:t(29296),GetWorldToTileXYFunction:t(32688),GetWorldToTileYFunction:t(74326),HasTileAt:t(46598),HasTileAtWorldXY:t(28654),HexagonalCullBounds:t(6358),HexagonalCullTiles:t(37524),HexagonalGetTileCorners:t(63634),HexagonalTileToWorldXY:t(21715),HexagonalWorldToTileXY:t(11516),IsInLayerBounds:t(62839),IsometricCullTiles:t(20887),IsometricTileToWorldXY:t(21808),IsometricWorldToTileXY:t(18750),PutTileAt:t(29003),PutTileAtWorldXY:t(48565),PutTilesAt:t(56547),Randomize:t(91180),RemoveTileAt:t(929),RemoveTileAtWorldXY:t(17384),RenderDebug:t(93763),ReplaceByIndex:t(51202),RunCull:t(6987),SetCollision:t(51710),SetCollisionBetween:t(15216),SetCollisionByExclusion:t(33158),SetCollisionByProperty:t(4180),SetCollisionFromCollisionGroup:t(18625),SetLayerCollisionIndex:t(91181),SetTileCollision:t(68234),SetTileIndexCallback:t(11628),SetTileLocationCallback:t(72732),Shuffle:t(34397),StaggeredCullBounds:t(53945),StaggeredCullTiles:t(19242),StaggeredTileToWorldXY:t(33388),StaggeredTileToWorldY:t(84132),StaggeredWorldToTileXY:t(90562),StaggeredWorldToTileY:t(3689),SwapByIndex:t(55217),TileToWorldX:t(44150),TileToWorldXY:t(46836),TileToWorldY:t(42477),WeightedRandomize:t(39677),WorldToTileX:t(806),WorldToTileXY:t(45676),WorldToTileY:t(70520)}},12920:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ORIENTATION:t(12920)};o.exports=s},52678:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(84758),a={Components:t(5047),Parsers:t(34124),Formats:t(93560),ImageCollection:t(97042),ParseToTilemap:t(15043),Tile:t(29633),Tilemap:t(89797),TilemapCreator:t(4843),TilemapFactory:t(37940),Tileset:t(47975),TilemapLayer:t(87177),Orientation:t(12920),LayerData:t(94990),MapData:t(16586),ObjectLayer:t(15256)};a=s(!1,a,l.ORIENTATION),o.exports=a},94990:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12920),a=t(72632),r=new s({initialize:function(n){n===void 0&&(n={}),this.name=a(n,"name","layer"),this.id=a(n,"id",0),this.x=a(n,"x",0),this.y=a(n,"y",0),this.width=a(n,"width",0),this.height=a(n,"height",0),this.tileWidth=a(n,"tileWidth",0),this.tileHeight=a(n,"tileHeight",0),this.baseTileWidth=a(n,"baseTileWidth",this.tileWidth),this.baseTileHeight=a(n,"baseTileHeight",this.tileHeight),this.orientation=a(n,"orientation",l.ORTHOGONAL),this.widthInPixels=a(n,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=a(n,"heightInPixels",this.height*this.baseTileHeight),this.alpha=a(n,"alpha",1),this.visible=a(n,"visible",!0),this.properties=a(n,"properties",[]),this.indexes=a(n,"indexes",[]),this.collideIndexes=a(n,"collideIndexes",[]),this.callbacks=a(n,"callbacks",[]),this.bodies=a(n,"bodies",[]),this.data=a(n,"data",[]),this.tilemapLayer=a(n,"tilemapLayer",null),this.hexSideLength=a(n,"hexSideLength",0),this.staggerAxis=a(n,"staggerAxis","y"),this.staggerIndex=a(n,"staggerIndex","odd")}});o.exports=r},16586:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12920),a=t(72632),r=new s({initialize:function(n){n===void 0&&(n={}),this.name=a(n,"name","map"),this.width=a(n,"width",0),this.height=a(n,"height",0),this.infinite=a(n,"infinite",!1),this.tileWidth=a(n,"tileWidth",0),this.tileHeight=a(n,"tileHeight",0),this.widthInPixels=a(n,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=a(n,"heightInPixels",this.height*this.tileHeight),this.format=a(n,"format",null),this.orientation=a(n,"orientation",l.ORTHOGONAL),this.renderOrder=a(n,"renderOrder","right-down"),this.version=a(n,"version","1"),this.properties=a(n,"properties",{}),this.layers=a(n,"layers",[]),this.images=a(n,"images",[]),this.objects=a(n,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=a(n,"collision",{}),this.tilesets=a(n,"tilesets",[]),this.imageCollections=a(n,"imageCollections",[]),this.tiles=a(n,"tiles",[]),this.hexSideLength=a(n,"hexSideLength",0),this.staggerAxis=a(n,"staggerAxis","y"),this.staggerIndex=a(n,"staggerIndex","odd")}});o.exports=r},15256:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=new s({initialize:function(i){i===void 0&&(i={}),this.name=l(i,"name","object layer"),this.id=l(i,"id",0),this.opacity=l(i,"opacity",1),this.properties=l(i,"properties",{}),this.propertyTypes=l(i,"propertytypes",{}),this.type=l(i,"type","objectgroup"),this.visible=l(i,"visible",!0),this.objects=l(i,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});o.exports=a},21394:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=function(a){return a=a.toLowerCase(),a==="isometric"?s.ISOMETRIC:a==="staggered"?s.STAGGERED:a==="hexagonal"?s.HEXAGONAL:s.ORTHOGONAL};o.exports=l},90715:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(84346),a=t(96097),r=t(2378),i=t(44909),n=function(h,d,u,p,v,m){var g;switch(d){case s.ARRAY_2D:g=l(h,u,p,v,m);break;case s.CSV:g=a(h,u,p,v,m);break;case s.TILED_JSON:g=r(h,u,m);break;case s.WELTMEISTER:g=i(h,u,m);break;default:console.warn("Unrecognized tilemap data format: "+d),g=null}return g};o.exports=n},84346:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(94990),a=t(16586),r=t(29633),i=function(n,h,d,u,p){for(var v=new l({tileWidth:d,tileHeight:u}),m=new a({name:n,tileWidth:d,tileHeight:u,format:s.ARRAY_2D,layers:[v]}),g=[],T=h.length,w=0,b=0;b<h.length;b++){g[b]=[];for(var E=h[b],A=0;A<E.length;A++){var R=parseInt(E[A],10);isNaN(R)||R===-1?g[b][A]=p?null:new r(v,-1,A,b,d,u):g[b][A]=new r(v,R,A,b,d,u)}w===0&&(w=E.length)}return m.width=v.width=w,m.height=v.height=T,m.widthInPixels=v.widthInPixels=w*d,m.heightInPixels=v.heightInPixels=T*u,v.data=g,m};o.exports=i},96097:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(84346),a=function(r,i,n,h,d){var u=i.trim().split(`
`).map(function(v){return v.split(",")}),p=l(r,u,n,h,d);return p.format=s.CSV,p};o.exports=a},30951:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(94990),l=t(29633),a=function(r,i){for(var n=[],h=0;h<r.layer.length;h++){for(var d=r.layer[h],u=new s({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:d.visible===1}),p=[],v=[],m=0;m<d.data.length;m++){for(var g=0;g<d.data[m].length;g++){var T=d.data[m][g]-1,w;T>-1?w=new l(u,T,g,m,d.tilesize,d.tilesize):w=i?null:new l(u,-1,g,m,d.tilesize,d.tilesize),p.push(w)}v.push(p),p=[]}u.data=v,n.push(u)}return n};o.exports=a},47488:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47975),l=function(a){for(var r=[],i=[],n=0;n<a.layer.length;n++){var h=a.layer[n],d=h.tilesetName;d!==""&&i.indexOf(d)===-1&&(i.push(d),r.push(new s(d,0,h.tilesize,h.tilesize,0,0)))}return r};o.exports=l},44909:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(16586),a=t(30951),r=t(47488),i=function(n,h,d){if(h.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+n),null;for(var u=0,p=0,v=0;v<h.layer.length;v++)h.layer[v].width>u&&(u=h.layer[v].width),h.layer[v].height>p&&(p=h.layer[v].height);var m=new l({width:u,height:p,name:n,tileWidth:h.layer[0].tilesize,tileHeight:h.layer[0].tilesize,format:s.WELTMEISTER});return m.layers=a(h,d),m.tilesets=r(h),m};o.exports=i},24507:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ParseTileLayers:t(30951),ParseTilesets:t(47488),ParseWeltmeister:t(44909)}},34124:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FromOrientationString:t(21394),Parse:t(90715),Parse2DArray:t(84346),ParseCSV:t(96097),Impact:t(24507),Tiled:t(50044)}},48646:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=function(a){for(var r,i,n,h,d,u=0;u<a.layers.length;u++){r=a.layers[u],h=null;for(var p=0;p<r.data.length;p++){d=r.data[p];for(var v=0;v<d.length;v++)i=d[v],!(i===null||i.index<0)&&(n=a.tiles[i.index][2],h=a.tilesets[n],i.width=h.tileWidth,i.height=h.tileHeight,h.tileProperties&&h.tileProperties[i.index-h.firstgid]&&(i.properties=s(i.properties,h.tileProperties[i.index-h.firstgid])))}}};o.exports=l},43908:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){for(var s=window.atob(t),l=s.length,a=new Array(l/4),r=0;r<l;r+=4)a[r/4]=(s.charCodeAt(r)|s.charCodeAt(r+1)<<8|s.charCodeAt(r+2)<<16|s.charCodeAt(r+3)<<24)>>>0;return a};o.exports=x},14556:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47975),l=function(a){var r,i,n=[];for(r=0;r<a.imageCollections.length;r++)for(var h=a.imageCollections[r],d=h.images,u=0;u<d.length;u++){var p=d[u];i=new s(p.image,p.gid,h.imageWidth,h.imageHeight,0,0),i.updateTileData(h.imageWidth,h.imageHeight),a.tilesets.push(i)}for(r=0;r<a.tilesets.length;r++){i=a.tilesets[r];for(var v=i.tileMargin,m=i.tileMargin,g=0,T=0,w=0,b=i.firstgid;b<i.firstgid+i.total&&(n[b]=[v,m,r],v+=i.tileWidth+i.tileSpacing,g++,!(g===i.total||(T++,T===i.columns&&(v=i.tileMargin,m+=i.tileHeight+i.tileSpacing,T=0,w++,w===i.rows))));b++);}return n};o.exports=l},92044:(o,x,t)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a,r,i){if(!r)return{i:0,layers:a.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=r.x+s(r,"startx",0)*a.tilewidth+s(r,"offsetx",0),h=r.y+s(r,"starty",0)*a.tileheight+s(r,"offsety",0);return{i:0,layers:r.layers,name:i.name+r.name+"/",opacity:i.opacity*r.opacity,visible:i.visible&&r.visible,x:i.x+n,y:i.y+h}};o.exports=l},8847:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=2147483648,t=1073741824,s=536870912,l=function(a){var r=!!(a&x),i=!!(a&t),n=!!(a&s);a=a&~(x|t|s);var h=0,d=!1;return r&&i&&n?(h=Math.PI/2,d=!0):r&&i&&!n?(h=Math.PI,d=!1):r&&!i&&n?(h=Math.PI/2,d=!1):r&&!i&&!n?(h=0,d=!0):!r&&i&&n?(h=3*Math.PI/2,d=!1):!r&&i&&!n?(h=Math.PI,d=!0):!r&&!i&&n?(h=3*Math.PI/2,d=!0):!r&&!i&&!n&&(h=0,d=!1),{gid:a,flippedHorizontal:r,flippedVertical:i,flippedAntiDiagonal:n,rotation:h,flipped:d}};o.exports=l},78339:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=t(92044),a=function(r){for(var i=[],n=[],h=l(r);h.i<h.layers.length||n.length>0;){if(h.i>=h.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=n.pop();continue}var d=h.layers[h.i];if(h.i++,d.type!=="imagelayer"){if(d.type==="group"){var u=l(r,d,h);n.push(h),h=u}continue}var p=s(d,"offsetx",0)+s(d,"startx",0),v=s(d,"offsety",0)+s(d,"starty",0);i.push({name:h.name+d.name,image:d.image,x:h.x+p+d.x,y:h.y+v+d.y,alpha:h.opacity*d.opacity,visible:h.visible&&d.visible,properties:s(d,"properties",{})})}return i};o.exports=a},2378:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48646),l=t(14556),a=t(12920),r=t(28699),i=t(93560),n=t(21394),h=t(16586),d=t(78339),u=t(61136),p=t(95925),v=t(93392),m=function(g,T,w){var b=r(T),E=new h({width:b.width,height:b.height,name:g,tileWidth:b.tilewidth,tileHeight:b.tileheight,orientation:n(b.orientation),format:i.TILED_JSON,version:b.version,properties:b.properties,renderOrder:b.renderorder,infinite:b.infinite});E.orientation===a.HEXAGONAL&&(E.hexSideLength=b.hexsidelength,E.staggerAxis=b.staggeraxis,E.staggerIndex=b.staggerindex),E.layers=p(b,w),E.images=d(b);var A=v(b);return E.tilesets=A.tilesets,E.imageCollections=A.imageCollections,E.objects=u(b),E.tiles=l(E),s(E),E};o.exports=m},4281:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28820),l=t(8847),a=function(n){return{x:n.x,y:n.y}},r=["id","name","type","rotation","properties","visible","x","y","width","height"],i=function(n,h,d){h===void 0&&(h=0),d===void 0&&(d=0);var u=s(n,r);if(u.x+=h,u.y+=d,n.gid){var p=l(n.gid);u.gid=p.gid,u.flippedHorizontal=p.flippedHorizontal,u.flippedVertical=p.flippedVertical,u.flippedAntiDiagonal=p.flippedAntiDiagonal}else n.polyline?u.polyline=n.polyline.map(a):n.polygon?u.polygon=n.polygon.map(a):n.ellipse?u.ellipse=n.ellipse:n.text?u.text=n.text:n.point?u.point=!0:u.rectangle=!0;return u};o.exports=i},61136:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=t(4281),a=t(15256),r=t(92044),i=function(n){for(var h=[],d=[],u=r(n);u.i<u.layers.length||d.length>0;){if(u.i>=u.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=d.pop();continue}var p=u.layers[u.i];if(u.i++,p.opacity*=u.opacity,p.visible=u.visible&&p.visible,p.type!=="objectgroup"){if(p.type==="group"){var v=r(n,p,u);d.push(u),u=v}continue}p.name=u.name+p.name;for(var m=u.x+s(p,"startx",0)+s(p,"offsetx",0),g=u.y+s(p,"starty",0)+s(p,"offsety",0),T=[],w=0;w<p.objects.length;w++){var b=l(p.objects[w],m,g);T.push(b)}var E=new a(p);E.objects=T,h.push(E)}return h};o.exports=i},95925:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43908),l=t(12920),a=t(92044),r=t(21394),i=t(72632),n=t(94990),h=t(8847),d=t(29633),u=function(p,v){for(var m=i(p,"infinite",!1),g=[],T=[],w=a(p);w.i<w.layers.length||T.length>0;){if(w.i>=w.layers.length){if(T.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}w=T.pop();continue}var b=w.layers[w.i];if(w.i++,b.type!=="tilelayer"){if(b.type==="group"){var E=a(p,b,w);T.push(w),w=E}continue}if(b.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+b.name+"'");continue}else if(b.encoding&&b.encoding==="base64"){if(b.chunks)for(var A=0;A<b.chunks.length;A++)b.chunks[A].data=s(b.chunks[A].data);b.data&&(b.data=s(b.data)),delete b.encoding}var R,I,P,M,F=[],O=0;if(m){var D=i(b,"startx",0)+b.x,L=i(b,"starty",0)+b.y;R=new n({name:w.name+b.name,id:b.id,x:w.x+i(b,"offsetx",0)+D*p.tilewidth,y:w.y+i(b,"offsety",0)+L*p.tileheight,width:b.width,height:b.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:w.opacity*b.opacity,visible:w.visible&&b.visible,properties:i(b,"properties",[]),orientation:r(p.orientation)}),R.orientation===l.HEXAGONAL&&(R.hexSideLength=p.hexsidelength,R.staggerAxis=p.staggeraxis,R.staggerIndex=p.staggerindex);for(var z=0;z<b.height;z++){F[z]=[null];for(var X=0;X<b.width;X++)F[z][X]=null}for(z=0,_=b.chunks.length;z<_;z++)for(var H=b.chunks[z],J=H.x-D,G=H.y-L,k=0,N=0,B=H.data.length;N<B;N++){var U=O+J,W=k+G;I=h(H.data[N]),I.gid>0?(P=new d(R,I.gid,U,W,p.tilewidth,p.tileheight),P.rotation=I.rotation,P.flipX=I.flipped,F[W][U]=P):(M=v?null:new d(R,-1,U,W,p.tilewidth,p.tileheight),F[W][U]=M),O++,O===H.width&&(k++,O=0)}}else{R=new n({name:w.name+b.name,id:b.id,x:w.x+i(b,"offsetx",0)+b.x,y:w.y+i(b,"offsety",0)+b.y,width:b.width,height:b.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:w.opacity*b.opacity,visible:w.visible&&b.visible,properties:i(b,"properties",[]),orientation:r(p.orientation)}),R.orientation===l.HEXAGONAL&&(R.hexSideLength=p.hexsidelength,R.staggerAxis=p.staggeraxis,R.staggerIndex=p.staggerindex);for(var K=[],q=0,_=b.data.length;q<_;q++)I=h(b.data[q]),I.gid>0?(P=new d(R,I.gid,O,F.length,p.tilewidth,p.tileheight),P.rotation=I.rotation,P.flipX=I.flipped,K.push(P)):(M=v?null:new d(R,-1,O,F.length,p.tilewidth,p.tileheight),K.push(M)),O++,O===b.width&&(F.push(K),O=0,K=[])}R.data=F,g.push(R)}return g};o.exports=u},93392:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47975),l=t(97042),a=t(4281),r=t(39642),i=function(n){for(var h=[],d=[],u=null,p,v=0;v<n.tilesets.length;v++){var m=n.tilesets[v];if(m.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(m.image){var g=new s(m.name,m.firstgid,m.tilewidth,m.tileheight,m.margin,m.spacing,void 0,void 0,m.tileoffset);if(n.version>1){var T=void 0,w=void 0;if(Array.isArray(m.tiles)){T=T||{},w=w||{};for(var b=0;b<m.tiles.length;b++){var E=m.tiles[b];if(E.properties){var A={};E.properties.forEach(function(z){A[z.name]=z.value}),w[E.id]=A}if(E.objectgroup&&((T[E.id]||(T[E.id]={})).objectgroup=E.objectgroup,E.objectgroup.objects)){var R=E.objectgroup.objects.map(function(z){return a(z)});T[E.id].objectgroup.objects=R}E.animation&&((T[E.id]||(T[E.id]={})).animation=E.animation),E.type&&((T[E.id]||(T[E.id]={})).type=E.type)}}Array.isArray(m.wangsets)&&(T=T||{},w=w||{},r(m.wangsets,T)),T&&(g.tileData=T,g.tileProperties=w)}else if(m.tileproperties&&(g.tileProperties=m.tileproperties),m.tiles){g.tileData=m.tiles;for(p in g.tileData){var I=g.tileData[p].objectgroup;if(I&&I.objects){var P=I.objects.map(function(z){return a(z)});g.tileData[p].objectgroup.objects=P}}}g.updateTileData(m.imagewidth,m.imageheight),h.push(g)}else{var M=new l(m.name,m.firstgid,m.tilewidth,m.tileheight,m.margin,m.spacing,m.properties),F=0;for(b=0;b<m.tiles.length;b++){E=m.tiles[b];var O=E.image,D=parseInt(E.id,10),L=m.firstgid+D;M.addImage(L,O),F=Math.max(D,F)}M.maxId=F,d.push(M)}u&&(u.lastgid=m.firstgid-1),u=m}return{tilesets:h,imageCollections:d}};o.exports=i},39642:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){for(var l=0;l<t.length;l++){var a=t[l],r=l;if(a.name&&a.name!==""&&(r=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var i={},n={},h,d,u;if(Array.isArray(a.edgecolors))for(h=0;h<a.edgecolors.length;h++)u=1+h,d=a.edgecolors[h],d.name!==""&&(i[u]=d.name);if(Array.isArray(a.cornercolors))for(h=0;h<a.cornercolors.length;h++)u=1+h,d=a.cornercolors[h],d.name!==""&&(n[u]=d.name);if(Array.isArray(a.colors))for(h=0;h<a.colors.length;h++)d=a.colors[h],u=1+h,d.name!==""&&(i[u]=n[u]=d.name);for(var p=[i,n,i,n,i,n,i,n],v=0;v<a.wangtiles.length;v++){var m=a.wangtiles[v],g=s[m.tileid]||(s[m.tileid]={});g=g.wangid||(g.wangid={});for(var T=[],w=0;w<Math.min(p.length,m.wangid.length);w++){if(d=m.wangid[w],d===0){T.push(void 0);continue}var b=p[w][d];if(b!==void 0){T.push(b);continue}T.push(d)}g[r]=T}}}};o.exports=x},50044:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AssignTileProperties:t(48646),Base64Decode:t(43908),BuildTilesetIndex:t(14556),CreateGroupLayer:t(92044),ParseGID:t(8847),ParseImageLayers:t(78339),ParseJSONTiled:t(2378),ParseObject:t(4281),ParseObjectLayers:t(61136),ParseTileLayers:t(95925),ParseTilesets:t(93392)}},73779:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91963),a=t(7599),r=t(57911),i=t(66458),n=new s({initialize:function(d){this.scene=d,this.systems=d.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],d.sys.events.once(a.BOOT,this.boot,this),d.sys.events.on(a.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var h=this.systems.events;h.on(a.PRE_UPDATE,this.preUpdate,this),h.on(a.UPDATE,this.update,this),h.once(a.SHUTDOWN,this.shutdown,this)},addEvent:function(h){var d;return h instanceof r?(d=h,this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=d.repeat===-1||d.loop?999999999999:d.repeat):d=new r(h),this._pendingInsertion.push(d),d},delayedCall:function(h,d,u,p){return this.addEvent({delay:h,callback:d,args:u,callbackScope:p})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var u=h[d];i(this._pendingRemoval,u),i(this._pendingInsertion,u),i(this._active,u)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var h=this._pendingRemoval.length,d=this._pendingInsertion.length;if(!(h===0&&d===0)){var u,p;for(u=0;u<h;u++){p=this._pendingRemoval[u];var v=this._active.indexOf(p);v>-1&&this._active.splice(v,1),p.destroy()}for(u=0;u<d;u++)p=this._pendingInsertion[u],this._active.push(p);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(h,d){if(this.now=h,!this.paused){d*=this.timeScale;for(var u=0;u<this._active.length;u++){var p=this._active[u];if(!p.paused&&(p.elapsed+=d*p.timeScale,p.elapsed>=p.delay)){var v=p.elapsed-p.delay;if(p.elapsed=p.delay,!p.hasDispatched&&p.callback&&(p.hasDispatched=!0,p.callback.apply(p.callbackScope,p.args)),p.repeatCount>0){if(p.repeatCount--,v>=p.delay)for(;v>=p.delay&&p.repeatCount>0;)p.callback&&p.callback.apply(p.callbackScope,p.args),v-=p.delay,p.repeatCount--;p.elapsed=v,p.hasDispatched=!1}else p.hasDispatched&&this._pendingRemoval.push(p)}}}},shutdown:function(){var h;for(h=0;h<this._pendingInsertion.length;h++)this._pendingInsertion[h].destroy();for(h=0;h<this._active.length;h++)this._active[h].destroy();for(h=0;h<this._pendingRemoval.length;h++)this._pendingRemoval[h].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(a.PRE_UPDATE,this.preUpdate,this),d.off(a.UPDATE,this.update,this),d.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});l.register("Clock",n,"time"),o.exports=n},20517:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(61286),r=t(72632),i=t(7599),n=t(52944),h=new s({Extends:l,initialize:function(u,p){l.call(this),this.scene=u,this.systems=u.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var v=this.systems.events;v.on(i.PRE_UPDATE,this.preUpdate,this),v.on(i.UPDATE,this.update,this),v.once(i.SHUTDOWN,this.destroy,this),p&&this.add(p)},preUpdate:function(d,u){this.paused||(this.elapsed+=u)},update:function(){if(!(this.paused||this.complete)){var d,u=this.events,p=!1,v=this.systems,m;for(d=0;d<u.length;d++){var g=u[d];if(!g.complete&&g.time<=this.elapsed){if(g.complete=!0,this.totalComplete++,m=g.target?g.target:this,g.if&&!g.if.call(m,g))continue;if(g.once&&(p=!0),g.set&&g.target)for(var T in g.set)g.target[T]=g.set[T];g.tween&&v.tweens.add(g.tween),g.sound&&(typeof g.sound=="string"?v.sound.play(g.sound):v.sound.play(g.sound.key,g.sound.config)),g.event&&this.emit(g.event,m),g.run&&g.run.call(m),g.stop&&this.stop()}}if(p)for(d=0;d<u.length;d++)u[d].complete&&u[d].once&&(u.splice(d,1),d--);this.totalComplete>=u.length&&(this.complete=!0),this.complete&&this.emit(n.COMPLETE,this)}},play:function(d){return d===void 0&&(d=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,d&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var d=0;d<this.events.length;d++)this.events[d].complete=!1;return this.play(!1)},add:function(d){Array.isArray(d)||(d=[d]);var u=this.events,p=0;u.length>0&&(p=u[u.length-1].time);for(var v=0;v<d.length;v++){var m=d[v],g=r(m,"at",0),T=r(m,"in",null);T!==null&&(g=this.elapsed+T);var w=r(m,"from",null);w!==null&&(g=p+w),u.push({complete:!1,time:g,if:r(m,"if",null),run:r(m,"run",null),event:r(m,"event",null),target:r(m,"target",null),set:r(m,"set",null),tween:r(m,"tween",null),sound:r(m,"sound",null),once:r(m,"once",!1),stop:r(m,"stop",!1)}),p=g}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var d=Math.min(this.totalComplete,this.events.length);return d/this.events.length},destroy:function(){var d=this.systems.events;d.off(i.PRE_UPDATE,this.preUpdate,this),d.off(i.UPDATE,this.update,this),d.off(i.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});a.register("timeline",function(d){return new h(this.scene,d)}),o.exports=h},57911:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=new s({initialize:function(i){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(i)},reset:function(r){if(this.delay=l(r,"delay",0),this.repeat=l(r,"repeat",0),this.loop=l(r,"loop",!1),this.callback=l(r,"callback",void 0),this.callbackScope=l(r,"callbackScope",this),this.args=l(r,"args",[]),this.timeScale=l(r,"timeScale",1),this.startAt=l(r,"startAt",0),this.paused=l(r,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var r=this.delay+this.delay*this.repeat,i=this.elapsed+this.delay*(this.repeat-this.repeatCount);return i/r}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(r){r===void 0&&(r=!1),this.elapsed=this.delay,this.hasDispatched=!r,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});o.exports=a},12144:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},52944:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:t(12144)}},97121:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clock:t(73779),Events:t(52944),Timeline:t(20517),TimerEvent:t(57911)}},64532:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66458),l=t(56694),a=t(5454),r=t(68710),i=t(91963),n=t(7599),h=t(91944),d=t(39366),u=t(68061),p=t(45641),v=t(56034),m=new l({initialize:function(T){this.scene=T,this.events=T.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(n.UPDATE,this.update,this),this.events.once(n.SHUTDOWN,this.shutdown,this)},create:function(g){Array.isArray(g)||(g=[g]);for(var T=[],w=0;w<g.length;w++){var b=g[w];b instanceof d||b instanceof p?T.push(b):Array.isArray(b.tweens)?T.push(v(this,b)):T.push(u(this,b))}return T.length===1?T[0]:T},add:function(g){var T=g,w=this.tweens;return T instanceof d||T instanceof p||(Array.isArray(T.tweens)?T=v(this,T):T=u(this,T)),w.push(T.reset()),T},addMultiple:function(g){for(var T,w=[],b=this.tweens,E=0;E<g.length;E++)T=g[E],T instanceof d||T instanceof p||(Array.isArray(T.tweens)?T=v(this,T):T=u(this,T)),b.push(T.reset()),w.push(T);return w},chain:function(g){var T=v(this,g);return this.tweens.push(T.init()),T},getChainedTweens:function(g){return g.getChainedTweens()},has:function(g){return this.tweens.indexOf(g)>-1},existing:function(g){return this.has(g)||this.tweens.push(g.reset()),this},addCounter:function(g){var T=r(this,g);return this.tweens.push(T.reset()),T},stagger:function(g,T){return h(g,T)},setLagSmooth:function(g,T){return g===void 0&&(g=1/1e-8),T===void 0&&(T=0),this.maxLag=g,this.lagSkip=Math.min(T,this.maxLag),this},setFps:function(g){return g===void 0&&(g=240),this.gap=1e3/g,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(g){var T=Date.now()-this.prevTime;T>this.maxLag&&(this.startTime+=T-this.lagSkip),this.prevTime+=T;var w=this.prevTime-this.startTime,b=w-this.nextTime,E=w-this.time*1e3;return b>0||g?(w/=1e3,this.time=w,this.nextTime+=b+(b>=this.gap?4:this.gap-b)):E=0,E},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(g){g===void 0&&(g=!1);var T=this.getDelta(g);if(!(T<=0)){this.processing=!0;var w,b,E=[],A=this.tweens;for(w=0;w<A.length;w++)b=A[w],b.update(T)&&E.push(b);var R=E.length;if(R&&A.length>0){for(w=0;w<R;w++){b=E[w];var I=A.indexOf(b);I>-1&&(b.isPendingRemove()||b.isDestroyed())&&(A.splice(I,1),b.destroy())}E.length=0}this.processing=!1}},remove:function(g){return this.processing?g.setPendingRemoveState():(s(this.tweens,g),g.setRemovedState()),this},reset:function(g){return this.existing(g),g.seek(),g.setActiveState(),this},makeActive:function(g){return this.existing(g),g.setActiveState(),this},each:function(g,T){var w,b=[null];for(w=1;w<arguments.length;w++)b.push(arguments[w]);return this.tweens.forEach(function(E){b[0]=E,g.apply(T,b)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(g){var T=[],w=this.tweens;Array.isArray(g)?g=a(g):g=[g];for(var b=g.length,E=0;E<w.length;E++)for(var A=w[E],R=0;R<b;R++)!A.isDestroyed()&&A.hasTarget(g[R])&&T.push(A);return T},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(g){return this.timeScale=g,this},isTweening:function(g){for(var T=this.tweens,w,b=0;b<T.length;b++)if(w=T[b],w.isPlaying()&&w.hasTarget(g))return!0;return!1},killAll:function(){for(var g=this.processing?this.getTweens():this.tweens,T=0;T<g.length;T++)g[T].destroy();return this.processing||(g.length=0),this},killTweensOf:function(g){for(var T=this.getTweensOf(g),w=0;w<T.length;w++)T[w].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(n.UPDATE,this.update,this),this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.events=null}});i.register("TweenManager",m,"tweens"),o.exports=m},63130:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){return t&&t.hasOwnProperty(s)?t[s]:l};o.exports=x},21902:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35060),l=t(40587),a=function(r,i){var n=s.Power0;if(typeof r=="string")if(s.hasOwnProperty(r))n=s[r];else{var h="";if(r.indexOf(".")){h=r.substring(r.indexOf(".")+1);var d=h.toLowerCase();d==="in"?h="easeIn":d==="out"?h="easeOut":d==="inout"&&(h="easeInOut")}r=l(r.substring(0,r.indexOf(".")+1)+h),s.hasOwnProperty(r)&&(n=s[r])}else typeof r=="function"&&(n=r);if(!i)return n;var u=i.slice(0);return u.unshift(0),function(p){return u[0]=p,n.apply(this,u)}};o.exports=a},4840:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63210),l=t(88332),a=t(47614),r={bezier:s,catmull:l,catmullrom:l,linear:a},i=function(n){if(n===null)return null;var h=r.linear;return typeof n=="string"?r.hasOwnProperty(n)&&(h=r[n]):typeof n=="function"&&(h=n),h};o.exports=i},28348:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a;if(t.hasOwnProperty(s)){var r=typeof t[s];r==="function"?a=function(i,n,h,d,u,p){return t[s](i,n,h,d,u,p)}:a=function(){return t[s]}}else typeof l=="function"?a=l:a=function(){return l};return a};o.exports=x},92407:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(53709),l=function(a){var r,i=[];if(a.hasOwnProperty("props"))for(r in a.props)r.substring(0,1)!=="_"&&i.push({key:r,value:a.props[r]});else for(r in a)s.indexOf(r)===-1&&r.substring(0,1)!=="_"&&i.push({key:r,value:a[r]});return i};o.exports=l},65868:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l=function(a){var r=s(a,"targets",null);return r===null||(typeof r=="function"&&(r=r.call()),Array.isArray(r)||(r=[r])),r};o.exports=l},9744:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17489),l=t(61616);function a(d){return!!d.getActive&&typeof d.getActive=="function"}function r(d){return!!d.getStart&&typeof d.getStart=="function"}function i(d){return!!d.getEnd&&typeof d.getEnd=="function"}function n(d){return r(d)||i(d)||a(d)}var h=function(d,u){var p,v=function(H,J,G){return G},m=function(H,J,G){return G},g=null,T=typeof u;if(T==="number")v=function(){return u};else if(Array.isArray(u))m=function(){return u[0]},v=function(){return u[u.length-1]};else if(T==="string"){var w=u.toLowerCase(),b=w.substring(0,6)==="random",E=w.substring(0,3)==="int";if(b||E){var A=w.indexOf("("),R=w.indexOf(")"),I=w.indexOf(",");if(A&&R&&I){var P=parseFloat(w.substring(A+1,I)),M=parseFloat(w.substring(I+1,R));b?v=function(){return l(P,M)}:v=function(){return s(P,M)}}else throw new Error("invalid random() format")}else{w=w[0];var F=parseFloat(u.substr(2));switch(w){case"+":v=function(H,J,G){return G+F};break;case"-":v=function(H,J,G){return G-F};break;case"*":v=function(H,J,G){return G*F};break;case"/":v=function(H,J,G){return G/F};break;default:v=function(){return parseFloat(u)}}}}else if(T==="function")v=u;else if(T==="object")if(n(u))a(u)&&(g=u.getActive),i(u)&&(v=u.getEnd),r(u)&&(m=u.getStart);else if(u.hasOwnProperty("value"))p=h(d,u.value);else{var O=u.hasOwnProperty("to"),D=u.hasOwnProperty("from"),L=u.hasOwnProperty("start");if(O&&(D||L)){if(p=h(d,u.to),L){var z=h(d,u.start);p.getActive=z.getEnd}if(D){var X=h(d,u.from);p.getStart=X.getEnd}}}return p||(p={getActive:g,getEnd:v,getStart:m}),p};o.exports=h},68710:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(502),l=t(99730),a=t(20494),r=t(63130),i=t(21902),n=t(28348),h=t(10850),d=t(9744),u=t(72066),p=t(39366),v=function(m,g,T){if(g instanceof p)return g.parent=m,g;T===void 0?T=l:T=u(l,T);var w=h(g,"from",0),b=h(g,"to",1),E=[{value:w}],A=h(g,"delay",T.delay),R=h(g,"easeParams",T.easeParams),I=h(g,"ease",T.ease),P=d("value",b),M=new p(m,E),F=M.add(0,"value",P.getEnd,P.getStart,P.getActive,i(h(g,"ease",I),h(g,"easeParams",R)),n(g,"delay",A),h(g,"duration",T.duration),r(g,"yoyo",T.yoyo),h(g,"hold",T.hold),h(g,"repeat",T.repeat),h(g,"repeatDelay",T.repeatDelay),!1,!1);F.start=w,F.current=w,M.completeDelay=a(g,"completeDelay",0),M.loop=Math.round(a(g,"loop",0)),M.loopDelay=Math.round(a(g,"loopDelay",0)),M.paused=r(g,"paused",!1),M.persist=r(g,"persist",!1),M.callbackScope=h(g,"callbackScope",M);for(var O=s.TYPES,D=0;D<O.length;D++){var L=O[D],z=h(g,L,!1);if(z){var X=h(g,L+"Params",[]);M.setCallback(L,z,X)}}return M};o.exports=v},91944:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(21902),l=t(10850),a=t(83392),r=function(i,n){n===void 0&&(n={});var h,d=l(n,"start",0),u=l(n,"ease",null),p=l(n,"grid",null),v=l(n,"from",0),m=v==="first",g=v==="center",T=v==="last",w=typeof v=="number",b=Array.isArray(i),E=parseFloat(b?i[0]:i),A=b?parseFloat(i[1]):0,R=Math.max(E,A);if(b&&(d+=E),p){var I=p[0],P=p[1],M=0,F=0,O=0,D=0,L=[];T?(M=I-1,F=P-1):w?(M=v%I,F=Math.floor(v/I)):g&&(M=(I-1)/2,F=(P-1)/2);for(var z=a.MIN_SAFE_INTEGER,X=0;X<P;X++){L[X]=[];for(var H=0;H<I;H++){O=M-H,D=F-X;var J=Math.sqrt(O*O+D*D);J>z&&(z=J),L[X][H]=J}}}var G=u?s(u):null;return p?h=function(k,N,B,U){var W=0,K=U%I,q=Math.floor(U/I);K>=0&&K<I&&q>=0&&q<P&&(W=L[q][K]);var _;if(b){var rt=A-E;G?_=W/z*rt*G(W/z):_=W/z*rt}else G?_=W*E*G(W/z):_=W*E;return _+d}:h=function(k,N,B,U,W){W--;var K;m?K=U:g?K=Math.abs(W/2-U):T?K=W-U:w&&(K=Math.abs(v-U));var q;if(b){var _;g?_=(A-E)/W*(K*2):_=(A-E)/W*K,G?q=_*G(K/W):q=_}else G?q=W*R*G(K/W):q=K*E;return q+d},h};o.exports=r},68061:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(502),l=t(99730),a=t(20494),r=t(63130),i=t(21902),n=t(4840),h=t(28348),d=t(92407),u=t(65868),p=t(10850),v=t(9744),m=t(72066),g=t(39366),T=function(w,b,E){if(b instanceof g)return b.parent=w,b;E===void 0?E=l:E=m(l,E);var A=u(b);!A&&E.targets&&(A=E.targets);for(var R=d(b),I=p(b,"delay",E.delay),P=p(b,"duration",E.duration),M=p(b,"easeParams",E.easeParams),F=p(b,"ease",E.ease),O=p(b,"hold",E.hold),D=p(b,"repeat",E.repeat),L=p(b,"repeatDelay",E.repeatDelay),z=r(b,"yoyo",E.yoyo),X=r(b,"flipX",E.flipX),H=r(b,"flipY",E.flipY),J=p(b,"interpolation",E.interpolation),G=function(vt,mt,yt,xt){if(yt==="texture"){var It=xt,Gt=void 0;Array.isArray(xt)?(It=xt[0],Gt=xt[1]):xt.hasOwnProperty("value")?(It=xt.value,Array.isArray(xt.value)?(It=xt.value[0],Gt=xt.value[1]):typeof xt.value=="string"&&(It=xt.value)):typeof xt=="string"&&(It=xt),vt.addFrame(mt,It,Gt,h(xt,"delay",I),p(xt,"duration",P),p(xt,"hold",O),p(xt,"repeat",D),p(xt,"repeatDelay",L),r(xt,"flipX",X),r(xt,"flipY",H))}else{var Zt=v(yt,xt),Bt=n(p(xt,"interpolation",J));vt.add(mt,yt,Zt.getEnd,Zt.getStart,Zt.getActive,i(p(xt,"ease",F),p(xt,"easeParams",M)),h(xt,"delay",I),p(xt,"duration",P),r(xt,"yoyo",z),p(xt,"hold",O),p(xt,"repeat",D),p(xt,"repeatDelay",L),r(xt,"flipX",X),r(xt,"flipY",H),Bt,Bt?xt:null)}},k=new g(w,A),N=0;N<R.length;N++)for(var B=R[N].key,U=R[N].value,W=0;W<A.length;W++)B==="scale"&&!A[W].hasOwnProperty("scale")?(G(k,W,"scaleX",U),G(k,W,"scaleY",U)):G(k,W,B,U);k.completeDelay=a(b,"completeDelay",0),k.loop=Math.round(a(b,"loop",0)),k.loopDelay=Math.round(a(b,"loopDelay",0)),k.paused=r(b,"paused",!1),k.persist=r(b,"persist",!1),k.callbackScope=p(b,"callbackScope",k);for(var K=s.TYPES,q=0;q<K.length;q++){var _=K[q],rt=p(b,_,!1);if(rt){var ft=p(b,_+"Params",[]);k.setCallback(_,rt,ft)}}return k};o.exports=T},56034:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(502),l=t(20494),a=t(63130),r=t(65868),i=t(10850),n=t(68061),h=t(45641),d=function(u,p){if(p instanceof h)return p.parent=u,p;var v=new h(u);v.startDelay=i(p,"delay",0),v.completeDelay=l(p,"completeDelay",0),v.loop=Math.round(l(p,"loop",i(p,"repeat",0))),v.loopDelay=Math.round(l(p,"loopDelay",i(p,"repeatDelay",0))),v.paused=a(p,"paused",!1),v.persist=a(p,"persist",!0),v.callbackScope=i(p,"callbackScope",v);var m,g=s.TYPES;for(m=0;m<g.length;m++){var T=g[m],w=i(p,T,!1);if(w){var b=i(p,T+"Params",[]);v.setCallback(T,w,b)}}var E=i(p,"tweens",null);if(Array.isArray(E)){var A=[],R=r(p),I=void 0;for(R&&(I={targets:R}),m=0;m<E.length;m++)A.push(n(v,E[m],I));v.add(A)}return v};o.exports=d},79619:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetBoolean:t(63130),GetEaseFunction:t(21902),GetInterpolationFunction:t(4840),GetNewValue:t(28348),GetProps:t(92407),GetTargets:t(65868),GetValueOp:t(9744),NumberTweenBuilder:t(68710),StaggerBuilder:t(91944),TweenBuilder:t(68061)}},5570:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="active"},6383:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},72582:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},90281:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},80803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="repeat"},13640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},10472:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},5379:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},43449:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},61541:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="yoyo"},54272:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TWEEN_ACTIVE:t(5570),TWEEN_COMPLETE:t(6383),TWEEN_LOOP:t(72582),TWEEN_PAUSE:t(90281),TWEEN_RESUME:t(13640),TWEEN_REPEAT:t(80803),TWEEN_START:t(10472),TWEEN_STOP:t(5379),TWEEN_UPDATE:t(43449),TWEEN_YOYO:t(61541)}},75193:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={States:t(55303),Builders:t(79619),Events:t(54272),TweenManager:t(64532),Tween:t(39366),TweenData:t(15718),TweenFrameData:t(96490),BaseTween:t(502),TweenChain:t(45641)};o.exports=s},502:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(54272),r=t(55303),i=new s({Extends:l,initialize:function(h){l.call(this),this.parent=h,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=r.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(a.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(a.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(a.TWEEN_COMPLETE,"onComplete")},complete:function(n){return n===void 0&&(n=0),n?(this.setCompleteDelayState(),this.countdown=n):this.onCompleteHandler(),this},completeAfterLoop:function(n){return n===void 0&&(n=0),this.loopCounter>n&&(this.loopCounter=n),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(a.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(n){this.countdown-=n,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(n){return this.countdown-=n,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(a.TWEEN_START,"onStart"),n=0),n},updateCompleteDelay:function(n){this.countdown-=n,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(n,h,d){return d===void 0&&(d=[]),this.callbacks.hasOwnProperty(n)&&(this.callbacks[n]={func:h,params:d}),this},setPendingState:function(){this.state=r.PENDING},setActiveState:function(){this.state=r.ACTIVE},setLoopDelayState:function(){this.state=r.LOOP_DELAY},setCompleteDelayState:function(){this.state=r.COMPLETE_DELAY},setStartDelayState:function(){this.state=r.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=r.PENDING_REMOVE},setRemovedState:function(){this.state=r.REMOVED},setFinishedState:function(){this.state=r.FINISHED},setDestroyedState:function(){this.state=r.DESTROYED},isPending:function(){return this.state===r.PENDING},isActive:function(){return this.state===r.ACTIVE},isLoopDelayed:function(){return this.state===r.LOOP_DELAY},isCompleteDelayed:function(){return this.state===r.COMPLETE_DELAY},isStartDelayed:function(){return this.state===r.START_DELAY},isPendingRemove:function(){return this.state===r.PENDING_REMOVE},isRemoved:function(){return this.state===r.REMOVED},isFinished:function(){return this.state===r.FINISHED},isDestroyed:function(){return this.state===r.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(n){n.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});i.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],o.exports=i},65521:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(54272),a=t(55303),r=new s({initialize:function(n,h,d,u,p,v,m,g,T,w){this.tween=n,this.targetIndex=h,this.duration=u,this.totalDuration=0,this.delay=0,this.getDelay=d,this.yoyo=p,this.hold=v,this.repeat=m,this.repeatDelay=g,this.repeatCounter=0,this.flipX=T,this.flipY=w,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(i){i===void 0&&(i=this.current),this.tween.targets[this.targetIndex][this.key]=i},setCreatedState:function(){this.state=a.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=a.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=a.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=a.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=a.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=a.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=a.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=a.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===a.CREATED},isDelayed:function(){return this.state===a.DELAY},isPendingRender:function(){return this.state===a.PENDING_RENDER},isPlayingForward:function(){return this.state===a.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===a.PLAYING_BACKWARD},isHolding:function(){return this.state===a.HOLD_DELAY},isRepeating:function(){return this.state===a.REPEAT_DELAY},isComplete:function(){return this.state===a.COMPLETE},setStateFromEnd:function(i){this.yoyo?this.onRepeat(i,!0,!0):this.repeatCounter>0?this.onRepeat(i,!0,!1):this.setCompleteState()},setStateFromStart:function(i){this.repeatCounter>0?this.onRepeat(i,!1):this.setCompleteState()},reset:function(){var i=this.tween,n=i.totalTargets,h=this.targetIndex,d=i.targets[h],u=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(d,u,0,h,n,i),this.repeatCounter=this.repeat===-1?a.MAX:this.repeat,this.setPendingRenderState();var p=this.duration+this.hold;this.yoyo&&(p+=this.duration);var v=p+this.repeatDelay;this.totalDuration=this.delay+p,this.repeat===-1?(this.totalDuration+=v*a.MAX,i.isInfinite=!0):this.repeat>0&&(this.totalDuration+=v*this.repeat),this.totalDuration>i.duration&&(i.duration=this.totalDuration),this.delay<i.startDelay&&(i.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(i,n,h){var d=this.tween,u=d.totalTargets,p=this.targetIndex,v=d.targets[p],m=this.key,g=m!=="texture";if(this.elapsed=i,this.progress=i/this.duration,this.flipX&&v.toggleFlipX(),this.flipY&&v.toggleFlipY(),g&&(n||h)&&(this.start=this.getStartValue(v,m,this.start,p,u,d)),h){this.setPlayingBackwardState(),this.dispatchEvent(l.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,g&&(this.end=this.getEndValue(v,m,this.start,p,u,d)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-i,g&&(this.current=this.start,v[m]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});o.exports=r},99730:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};o.exports=x},53709:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(502),l=t(56694),a=t(54272),r=t(99325),i=t(61286),n=t(83392),h=t(55303),d=t(15718),u=t(96490),p=new l({Extends:s,initialize:function(m,g){s.call(this,m),this.targets=g,this.totalTargets=g.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(v,m,g,T,w,b,E,A,R,I,P,M,F,O,D,L){var z=new d(this,v,m,g,T,w,b,E,A,R,I,P,M,F,O,D,L);return this.totalData=this.data.push(z),z},addFrame:function(v,m,g,T,w,b,E,A,R,I){var P=new u(this,v,m,g,T,w,b,E,A,R,I);return this.totalData=this.data.push(P),P},getValue:function(v){v===void 0&&(v=0);var m=null;return this.data&&(m=this.data[v].current),m},hasTarget:function(v){return this.targets&&this.targets.indexOf(v)!==-1},updateTo:function(v,m,g){if(g===void 0&&(g=!1),v!=="texture")for(var T=0;T<this.totalData;T++){var w=this.data[T];w.key===v&&(w.isPlayingForward()||w.isPlayingBackward())&&(w.end=m,g&&(w.start=w.current))}return this},restart:function(){switch(this.state){case h.REMOVED:case h.FINISHED:this.seek(),this.parent.makeActive(this);break;case h.PENDING:case h.PENDING_REMOVE:this.parent.reset(this);break;case h.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,s.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(v,m,g){if(v===void 0&&(v=0),m===void 0&&(m=16.6),g===void 0&&(g=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;g||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive");var T=this.paused;if(this.paused=!1,v>0){for(var w=Math.floor(v/m),b=v-w*m,E=0;E<w;E++)this.update(m);b>0&&this.update(b)}return this.paused=T,this.isSeeking=!1,this},initTweenData:function(v){v===void 0&&(v=!1),this.duration=0,this.startDelay=n.MAX_SAFE_INTEGER;for(var m=this.data,g=0;g<this.totalData;g++)m[g].reset(v);this.duration=Math.max(this.duration,.01);var T=this.duration,w=this.completeDelay,b=this.loopCounter,E=this.loopDelay;b>0?this.totalDuration=T+w+(T+E)*b:this.totalDuration=T+w},reset:function(v){return v===void 0&&(v=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=h.MAX),v||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")),this},update:function(v){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(v*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(v),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(v),!1;this.hasStarted||(this.startDelay-=v,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(a.TWEEN_START,"onStart"),v=0));var m=!1;if(this.isActive())for(var g=this.data,T=0;T<this.totalData;T++)g[T].update(v)&&(m=!0);this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),m||this.nextState();var w=this.isPendingRemove();return w&&this.persist&&(this.setFinishedState(),w=!1),w},forward:function(v){return this.update(v),this},rewind:function(v){return this.update(-v),this},dispatchEvent:function(v,m){if(!this.isSeeking){this.emit(v,this,this.targets);var g=this.callbacks[m];g&&g.func.apply(this.callbackScope,[this,this.targets].concat(g.params))}},destroy:function(){s.prototype.destroy.call(this),this.targets=null}});i.register("tween",function(v){return this.scene.sys.tweens.add(v)}),r.register("tween",function(v){return this.scene.sys.tweens.create(v)}),o.exports=p},45641:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66458),l=t(502),a=t(56694),r=t(54272),i=t(99325),n=t(61286),h=t(55303),d=new a({Extends:l,initialize:function(p){l.call(this,p),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?h.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(r.TWEEN_ACTIVE,"onActive"),this},add:function(u){var p=this.parent.create(u);Array.isArray(p)||(p=[p]);for(var v=this.data,m=0;m<p.length;m++){var g=p[m];g.parent=this,v.push(g.reset())}return this.totalData=v.length,this},remove:function(u){return s(this.data,u),u.setRemovedState(),u===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(u){for(var p=this.data,v=0;v<this.totalData;v++)if(p[v].hasTarget(u))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(u){return u.seek(),u.setActiveState(),this},makeActive:function(u){return u.reset(),u.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(r.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var u=this.data,p=this.totalData,v=0;v<p;v++)u[v].reset(!1);this.currentIndex=0,this.currentTween=u[0]},update:function(u){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;u*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(u):this.isCompleteDelayed()?this.updateCompleteDelay(u):this.isStartDelayed()&&(u=this.updateStartCountdown(u));var p=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(u)&&this.nextTween()&&this.nextState(),p=this.isPendingRemove(),p&&this.persist&&(this.setFinishedState(),p=!1)),p},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(u){this.currentIndex=u,this.currentTween=this.data[u],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(r.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(u,p){this.emit(u,this);var v=this.callbacks[p];v&&v.func.apply(this.callbackScope,[this].concat(v.params))},destroy:function(){l.prototype.destroy.call(this),this.currentTween=null}});n.register("tweenchain",function(u){return this.scene.sys.tweens.chain(u)}),i.register("tweenchain",function(u){return this.scene.sys.tweens.create(u)}),o.exports=d},15718:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65521),l=t(82897),a=t(56694),r=t(54272),i=new a({Extends:s,initialize:function(h,d,u,p,v,m,g,T,w,b,E,A,R,I,P,M,F){s.call(this,h,d,T,w,b,E,A,R,I,P),this.key=u,this.getActiveValue=m,this.getEndValue=p,this.getStartValue=v,this.ease=g,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=M,this.interpolationData=F},reset:function(n){s.prototype.reset.call(this);var h=this.tween.targets[this.targetIndex],d=this.key;n&&(h[d]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(h[d]=this.getActiveValue(h,d,0))},update:function(n){var h=this.tween,d=h.totalTargets,u=this.targetIndex,p=h.targets[u],v=this.key;if(!p)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(p,v,p[v],u,d,h),this.end=this.getEndValue(p,v,this.start,u,d,h),this.current=this.start,p[v]=this.start,this.setPlayingForwardState(),!0;var m=this.isPlayingForward(),g=this.isPlayingBackward();if(m||g){var T=this.elapsed,w=this.duration,b=0,E=!1;T+=n,T>=w?(b=T-w,T=w,E=!0):T<0&&(T=0);var A=l(T/w,0,1);if(this.elapsed=T,this.progress=A,this.previous=this.current,E)m?(this.current=this.end,p[v]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(b)):(this.current=this.start,p[v]=this.start,this.setStateFromStart(b));else{m||(A=1-A);var R=this.ease(A);this.interpolation?this.current=this.interpolation(this.interpolationData,R):this.current=this.start+(this.end-this.start)*R,p[v]=this.current}this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,h){var d=this.tween;if(!d.isSeeking){var u=d.targets[this.targetIndex],p=this.key,v=this.current,m=this.previous;d.emit(n,d,p,u,v,m);var g=d.callbacks[h];g&&g.func.apply(d.callbackScope,[d,u,p,v,m].concat(g.params))}},destroy:function(){s.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});o.exports=i},96490:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65521),l=t(82897),a=t(56694),r=t(54272),i=new a({Extends:s,initialize:function(h,d,u,p,v,m,g,T,w,b,E){s.call(this,h,d,v,m,!1,g,T,w,b,E),this.key="texture",this.startTexture=null,this.endTexture=u,this.startFrame=null,this.endFrame=p,this.yoyo=T!==0},reset:function(n){s.prototype.reset.call(this);var h=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=h.texture.key,this.startFrame=h.frame.name),n&&h.setTexture(this.startTexture,this.startFrame)},update:function(n){var h=this.tween,d=this.targetIndex,u=h.targets[d];if(!u)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&u.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),v=this.isPlayingBackward();if(p||v){var m=this.elapsed,g=this.duration,T=0,w=!1;m+=n,m>=g?(T=m-g,m=g,w=!0):m<0&&(m=0);var b=l(m/g,0,1);this.elapsed=m,this.progress=b,w&&(p?(u.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(T)):(u.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(T))),this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,h){var d=this.tween;if(!d.isSeeking){var u=d.targets[this.targetIndex],p=this.key;d.emit(n,d,p,u);var v=d.callbacks[h];v&&v.func.apply(d.callbackScope,[d,u,p].concat(v.params))}},destroy:function(){s.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});o.exports=i},55303:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};o.exports=x},56694:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function x(i){return!!i.get&&typeof i.get=="function"||!!i.set&&typeof i.set=="function"}function t(i,n,h){var d=h?i[n]:Object.getOwnPropertyDescriptor(i,n);return!h&&d.value&&typeof d.value=="object"&&(d=d.value),d&&x(d)?(typeof d.enumerable>"u"&&(d.enumerable=!0),typeof d.configurable>"u"&&(d.configurable=!0),d):!1}function s(i,n){var h=Object.getOwnPropertyDescriptor(i,n);return h?(h.value&&typeof h.value=="object"&&(h=h.value),h.configurable===!1):!1}function l(i,n,h,d){for(var u in n)if(n.hasOwnProperty(u)){var p=t(n,u,h);if(p!==!1){var v=d||i;if(s(v.prototype,u)){if(r.ignoreFinals)continue;throw new Error("cannot override final property '"+u+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(i.prototype,u,p)}else i.prototype[u]=n[u]}}function a(i,n){if(n){Array.isArray(n)||(n=[n]);for(var h=0;h<n.length;h++)l(i,n[h].prototype||n[h])}}function r(i){i||(i={});var n,h;if(i.initialize){if(typeof i.initialize!="function")throw new Error("initialize must be a function");n=i.initialize,delete i.initialize}else if(i.Extends){var d=i.Extends;n=function(){d.apply(this,arguments)}}else n=function(){};i.Extends?(n.prototype=Object.create(i.Extends.prototype),n.prototype.constructor=n,h=i.Extends,delete i.Extends):n.prototype.constructor=n;var u=null;return i.Mixins&&(u=i.Mixins,delete i.Mixins),a(n,u),l(n,i,!0,h),n}r.extend=l,r.mixin=a,r.ignoreFinals=!1,o.exports=r},72283:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(){};o.exports=x},10618:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(){return null};o.exports=x},78991:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r){if(r===void 0&&(r=t),l>0){var i=l-t.length;if(i<=0)return null}if(!Array.isArray(s))return t.indexOf(s)===-1?(t.push(s),a&&a.call(r,s),s):null;for(var n=s.length-1;n>=0;)t.indexOf(s[n])!==-1&&s.splice(n,1),n--;if(n=s.length,n===0)return null;l>0&&n>i&&(s.splice(i),n=i);for(var h=0;h<n;h++){var d=s[h];t.push(d),a&&a.call(r,d)}return s};o.exports=x},48522:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a,r,i){if(l===void 0&&(l=0),i===void 0&&(i=t),a>0){var n=a-t.length;if(n<=0)return null}if(!Array.isArray(s))return t.indexOf(s)===-1?(t.splice(l,0,s),r&&r.call(i,s),s):null;for(var h=s.length-1;h>=0;)t.indexOf(s[h])!==-1&&s.pop(),h--;if(h=s.length,h===0)return null;a>0&&h>n&&(s.splice(n),h=n);for(var d=h-1;d>=0;d--){var u=s[d];t.splice(l,0,u),r&&r.call(i,u)}return s};o.exports=x},58742:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.indexOf(s);return l!==-1&&l<t.length&&(t.splice(l,1),t.push(s)),s};o.exports=x},30164:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){n===void 0&&(n=0),h===void 0&&(h=a.length);var d=0;if(s(a,n,h))for(var u=n;u<h;u++){var p=a[u];p[r]===i&&d++}return d};o.exports=l},36337:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a,r=[null];for(a=3;a<arguments.length;a++)r.push(arguments[a]);for(a=0;a<t.length;a++)r[0]=t[a],s.apply(l,r);return t};o.exports=x},46208:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){if(n===void 0&&(n=0),h===void 0&&(h=a.length),s(a,n,h)){var d,u=[null];for(d=5;d<arguments.length;d++)u.push(arguments[d]);for(d=n;d<h;d++)u[0]=a[d],r.apply(i,u)}return a};o.exports=l},2406:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(s.length){if(s.length===1)return s[0]}else return NaN;var a=1,r,i;if(l){if(t<s[0][l])return s[0];for(;s[a][l]<t;)a++}else for(;s[a]<t;)a++;return a>s.length&&(a=s.length),l?(r=s[a-1][l],i=s[a][l],i-t<=t-r?s[a]:s[a-1]):(r=s[a-1],i=s[a],i-t<=t-r?i:r)};o.exports=x},5454:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s=[]);for(var l=0;l<t.length;l++)Array.isArray(t[l])?x(t[l],s):s.push(t[l]);return s};o.exports=x},71608:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){n===void 0&&(n=0),h===void 0&&(h=a.length);var d=[];if(s(a,n,h))for(var u=n;u<h;u++){var p=a[u];(!r||r&&i===void 0&&p.hasOwnProperty(r)||r&&i!==void 0&&p[r]===i)&&d.push(p)}return d};o.exports=l},51463:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){if(n===void 0&&(n=0),h===void 0&&(h=a.length),s(a,n,h))for(var d=n;d<h;d++){var u=a[d];if(!r||r&&i===void 0&&u.hasOwnProperty(r)||r&&i!==void 0&&u[r]===i)return u}return null};o.exports=l},72861:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){s===void 0&&(s=0),l===void 0&&(l=t.length);var a=s+Math.floor(Math.random()*l);return t[a]===void 0?null:t[a]};o.exports=x},24218:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(s===l)return t;var a=t.indexOf(s),r=t.indexOf(l);if(a<0||r<0)throw new Error("Supplied items must be elements of the same array");return a>r||(t.splice(a,1),r===t.length-1?t.push(s):t.splice(r,0,s)),t};o.exports=x},58258:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(s===l)return t;var a=t.indexOf(s),r=t.indexOf(l);if(a<0||r<0)throw new Error("Supplied items must be elements of the same array");return a<r||(t.splice(a,1),r===0?t.unshift(s):t.splice(r,0,s)),t};o.exports=x},51172:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.indexOf(s);if(l>0){var a=t[l-1],r=t.indexOf(a);t[l]=a,t[r]=s}return t};o.exports=x},68396:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=t.indexOf(s);if(a===-1||l<0||l>=t.length)throw new Error("Supplied index out of bounds");return a!==l&&(t.splice(a,1),t.splice(l,0,s)),s};o.exports=x},27555:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.indexOf(s);if(l!==-1&&l<t.length-1){var a=t[l+1],r=t.indexOf(a);t[l]=a,t[r]=s}return t};o.exports=x},13401:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=[],i,n=!1;if((l||a)&&(n=!0,l||(l=""),a||(a="")),s<t)for(i=t;i>=s;i--)n?r.push(l+i.toString()+a):r.push(i);else for(i=t;i<=s;i++)n?r.push(l+i.toString()+a):r.push(i);return r};o.exports=x},89955:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67233),l=function(a,r,i){a===void 0&&(a=0),r===void 0&&(r=null),i===void 0&&(i=1),r===null&&(r=a,a=0);for(var n=[],h=Math.max(s((r-a)/(i||1)),0),d=0;d<h;d++)n.push(a),a+=i;return n};o.exports=l},53466:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function x(l,a,r){var i=l[a];l[a]=l[r],l[r]=i}function t(l,a){return l<a?-1:l>a?1:0}var s=function(l,a,r,i,n){for(r===void 0&&(r=0),i===void 0&&(i=l.length-1),n===void 0&&(n=t);i>r;){if(i-r>600){var h=i-r+1,d=a-r+1,u=Math.log(h),p=.5*Math.exp(2*u/3),v=.5*Math.sqrt(u*p*(h-p)/h)*(d-h/2<0?-1:1),m=Math.max(r,Math.floor(a-d*p/h+v)),g=Math.min(i,Math.floor(a+(h-d)*p/h+v));s(l,a,m,g,n)}var T=l[a],w=r,b=i;for(x(l,r,a),n(l[i],T)>0&&x(l,r,i);w<b;){for(x(l,w,b),w++,b--;n(l[w],T)<0;)w++;for(;n(l[b],T)>0;)b--}n(l[r],T)===0?x(l,r,b):(b++,x(l,b,i)),b<=a&&(r=b+1),a<=b&&(i=b-1)}};o.exports=s},75757:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l=t(18592),a=function(i,n,h){for(var d=[],u=0;u<i.length;u++)for(var p=0;p<n.length;p++)for(var v=0;v<h;v++)d.push({a:i[u],b:n[p]});return d},r=function(i,n,h){var d=s(h,"max",0),u=s(h,"qty",1),p=s(h,"random",!1),v=s(h,"randomB",!1),m=s(h,"repeat",0),g=s(h,"yoyo",!1),T=[];if(v&&l(n),m===-1)if(d===0)m=0;else{var w=i.length*n.length*u;g&&(w*=2),m=Math.ceil(d/w)}for(var b=0;b<=m;b++){var E=a(i,n,u);p&&l(E),T=T.concat(E),g&&(E.reverse(),T=T.concat(E))}return d&&T.splice(d),T};o.exports=r},66458:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72677),l=function(a,r,i,n){n===void 0&&(n=a);var h;if(!Array.isArray(r))return h=a.indexOf(r),h!==-1?(s(a,h),i&&i.call(n,r),r):null;for(var d=r.length-1,u=[];d>=0;){var p=r[d];h=a.indexOf(p),h!==-1&&(s(a,h),u.push(p),i&&i.call(n,p)),d--}return u};o.exports=l},8324:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72677),l=function(a,r,i,n){if(n===void 0&&(n=a),r<0||r>a.length-1)throw new Error("Index out of bounds");var h=s(a,r);return i&&i.call(n,h),h};o.exports=l},47427:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){if(r===void 0&&(r=0),i===void 0&&(i=a.length),h===void 0&&(h=a),s(a,r,i)){var d=i-r,u=a.splice(r,d);if(n)for(var p=0;p<u.length;p++){var v=u[p];n.call(h,v)}return u}else return[]};o.exports=l},50147:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72677),l=function(a,r,i){r===void 0&&(r=0),i===void 0&&(i=a.length);var n=r+Math.floor(Math.random()*i);return s(a,n)};o.exports=l},80402:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=t.indexOf(s),r=t.indexOf(l);return a!==-1&&r===-1?(t[a]=l,!0):!1};o.exports=x},77640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s=1);for(var l=null,a=0;a<s;a++)l=t.shift(),t.push(l);return l};o.exports=x},38487:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){s===void 0&&(s=1);for(var l=null,a=0;a<s;a++)l=t.pop(),t.unshift(l);return l};o.exports=x},45838:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){var r=t.length;if(s<0||s>r||s>=l||l>r){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};o.exports=x},27847:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){var l=t.indexOf(s);return l!==-1&&l>0&&(t.splice(l,1),t.unshift(s)),s};o.exports=x},6034:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){if(n===void 0&&(n=0),h===void 0&&(h=a.length),s(a,n,h))for(var d=n;d<h;d++){var u=a[d];u.hasOwnProperty(r)&&(u[r]=i)}return a};o.exports=l},18592:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){for(var s=t.length-1;s>0;s--){var l=Math.floor(Math.random()*(s+1)),a=t[s];t[s]=t[l],t[l]=a}return t};o.exports=x},28834:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s=/\D/g;return t.sort(function(l,a){return parseInt(l.replace(s,""),10)-parseInt(a.replace(s,""),10)}),t};o.exports=x},72677:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){if(!(s>=t.length)){for(var l=t.length-1,a=t[s],r=s;r<l;r++)t[r]=t[r+1];return t.length=l,a}};o.exports=x},17922:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77290);function l(n,h){return String(n).localeCompare(h)}function a(n,h){var d=n.length;if(d<=1)return n;for(var u=new Array(d),p=1;p<d;p*=2){r(n,h,p,u);var v=n;n=u,u=v}return n}function r(n,h,d,u){var p=n.length,v=0,m=d*2,g,T,w,b,E;for(g=0;g<p;g+=m)for(T=g+d,w=T+d,T>p&&(T=p),w>p&&(w=p),b=g,E=T;;)if(b<T&&E<w)h(n[b],n[E])<=0?u[v++]=n[b++]:u[v++]=n[E++];else if(b<T)u[v++]=n[b++];else if(E<w)u[v++]=n[E++];else break}var i=function(n,h){if(h===void 0&&(h=l),!n||n.length<2)return n;if(s.features.stableSort)return n.sort(h);var d=a(n,h);return d!==n&&r(d,null,n.length,n),n};o.exports=i},96928:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(s===l)return t;var a=t.indexOf(s),r=t.indexOf(l);if(a<0||r<0)throw new Error("Supplied items must be elements of the same array");return t[a]=l,t[r]=s,t};o.exports=x},59959:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Matrix:t(13515),Add:t(78991),AddAt:t(48522),BringToTop:t(58742),CountAllMatching:t(30164),Each:t(36337),EachInRange:t(46208),FindClosestInSorted:t(2406),Flatten:t(5454),GetAll:t(71608),GetFirst:t(51463),GetRandom:t(72861),MoveDown:t(51172),MoveTo:t(68396),MoveUp:t(27555),MoveAbove:t(24218),MoveBelow:t(58258),NumberArray:t(13401),NumberArrayStep:t(89955),QuickSelect:t(53466),Range:t(75757),Remove:t(66458),RemoveAt:t(8324),RemoveBetween:t(47427),RemoveRandomElement:t(50147),Replace:t(80402),RotateLeft:t(77640),RotateRight:t(38487),SafeRange:t(45838),SendToBack:t(27847),SetAll:t(6034),Shuffle:t(18592),SortByDigits:t(28834),SpliceOne:t(72677),StableSort:t(17922),Swap:t(96928)}},97494:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var s=t[0].length,l=1;l<t.length;l++)if(t[l].length!==s)return!1;return!0};o.exports=x},68428:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(76400),l=t(97494),a=function(r){var i="";if(!l(r))return i;for(var n=0;n<r.length;n++){for(var h=0;h<r[n].length;h++){var d=r[n][h].toString();d!=="undefined"?i+=s(d,2):i+="?",h<r[n].length-1&&(i+=" |")}if(n<r.length-1){i+=`
`;for(var u=0;u<r[n].length;u++)i+="---",u<r[n].length-1&&(i+="+");i+=`
`}}return i};o.exports=a},59521:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.reverse()};o.exports=x},51995:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){for(var s=0;s<t.length;s++)t[s].reverse();return t};o.exports=x},89011:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63515),l=function(a){return s(a,180)};o.exports=l},42549:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63515),l=function(a,r){r===void 0&&(r=1);for(var i=0;i<r;i++)a=s(a,90);return a};o.exports=l},63515:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97494),l=t(78581),a=function(r,i){if(i===void 0&&(i=90),!s(r))return null;if(typeof i!="string"&&(i=(i%360+360)%360),i===90||i===-270||i==="rotateLeft")r=l(r),r.reverse();else if(i===-90||i===270||i==="rotateRight")r.reverse(),r=l(r);else if(Math.abs(i)===180||i==="rotate180"){for(var n=0;n<r.length;n++)r[n].reverse();r.reverse()}return r};o.exports=a},14305:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63515),l=function(a,r){r===void 0&&(r=1);for(var i=0;i<r;i++)a=s(a,-90);return a};o.exports=l},27365:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77640),l=t(38487),a=function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),n!==0&&(n<0?s(r,Math.abs(n)):l(r,n)),i!==0)for(var h=0;h<r.length;h++){var d=r[h];i<0?s(d,Math.abs(i)):l(d,i)}return r};o.exports=a},78581:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){for(var s=t.length,l=t[0].length,a=new Array(l),r=0;r<l;r++){a[r]=new Array(s);for(var i=s-1;i>-1;i--)a[r][i]=t[i][r]}return a};o.exports=x},13515:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CheckMatrix:t(97494),MatrixToString:t(68428),ReverseColumns:t(59521),ReverseRows:t(51995),Rotate180:t(89011),RotateLeft:t(42549),RotateMatrix:t(63515),RotateRight:t(14305),Translate:t(27365),TransposeMatrix:t(78581)}},40581:o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=function(s,l){for(var a=new Uint8Array(s),r=a.length,i=l?"data:"+l+";base64,":"",n=0;n<r;n+=3)i+=x[a[n]>>2],i+=x[(a[n]&3)<<4|a[n+1]>>4],i+=x[(a[n+1]&15)<<2|a[n+2]>>6],i+=x[a[n+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i};o.exports=t},82329:o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),s=0;s<x.length;s++)t[x.charCodeAt(s)]=s;var l=function(a){a=a.substr(a.indexOf(",")+1);var r=a.length,i=r*.75,n=0,h,d,u,p;a[r-1]==="="&&(i--,a[r-2]==="="&&i--);for(var v=new ArrayBuffer(i),m=new Uint8Array(v),g=0;g<r;g+=4)h=t[a.charCodeAt(g)],d=t[a.charCodeAt(g+1)],u=t[a.charCodeAt(g+2)],p=t[a.charCodeAt(g+3)],m[n++]=h<<2|d>>4,m[n++]=(d&15)<<4|u>>2,m[n++]=(u&3)<<6|p&63;return v};o.exports=l},78417:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ArrayBufferToBase64:t(40581),Base64ToArrayBuffer:t(82329)}},22178:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Array:t(59959),Base64:t(78417),Objects:t(64615),String:t(50379),NOOP:t(72283),NULL:t(10618)}},32742:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s={};for(var l in t)Array.isArray(t[l])?s[l]=t[l].slice(0):s[l]=t[l];return s};o.exports=x},28699:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){var s,l,a;if(typeof t!="object"||t===null)return t;s=Array.isArray(t)?[]:{};for(a in t)l=t[a],s[a]=x(l);return s};o.exports=x},98611:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42911),l=function(){var a,r,i,n,h,d,u=arguments[0]||{},p=1,v=arguments.length,m=!1;for(typeof u=="boolean"&&(m=u,u=arguments[1]||{},p=2),v===p&&(u=this,--p);p<v;p++)if((a=arguments[p])!=null)for(r in a)i=u[r],n=a[r],u!==n&&(m&&n&&(s(n)||(h=Array.isArray(n)))?(h?(h=!1,d=i&&Array.isArray(i)?i:[]):d=i&&s(i)?i:{},u[r]=l(m,d,n)):n!==void 0&&(u[r]=n));return u};o.exports=l},20494:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5923),l=t(10850),a=function(r,i,n){var h=l(r,i,null);if(h===null)return n;if(Array.isArray(h))return s.RND.pick(h);if(typeof h=="object"){if(h.hasOwnProperty("randInt"))return s.RND.integerInRange(h.randInt[0],h.randInt[1]);if(h.hasOwnProperty("randFloat"))return s.RND.realInRange(h.randFloat[0],h.randFloat[1])}else if(typeof h=="function")return h(i);return h};o.exports=a},72632:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){var a=typeof t;return!t||a==="number"||a==="string"?l:t.hasOwnProperty(s)&&t[s]!==void 0?t[s]:l};o.exports=x},94324:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l=t(82897),a=function(r,i,n,h,d){d===void 0&&(d=n);var u=s(r,i,d);return l(u,n,h)};o.exports=a},10850:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){if(!t&&!a||typeof t=="number")return l;if(t&&t.hasOwnProperty(s))return t[s];if(a&&a.hasOwnProperty(s))return a[s];if(s.indexOf(".")!==-1){for(var r=s.split("."),i=t,n=a,h=l,d=l,u=!0,p=!0,v=0;v<r.length;v++)i&&i.hasOwnProperty(r[v])?(h=i[r[v]],i=i[r[v]]):u=!1,n&&n.hasOwnProperty(r[v])?(d=n[r[v]],n=n[r[v]]):p=!1;return u?h:p?d:l}else return l};o.exports=x},87701:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){for(var l=0;l<s.length;l++)if(!t.hasOwnProperty(s[l]))return!1;return!0};o.exports=x},53523:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){for(var l=0;l<s.length;l++)if(t.hasOwnProperty(s[l]))return!0;return!1};o.exports=x},19256:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.hasOwnProperty(s)};o.exports=x},42911:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){if(!t||typeof t!="object"||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};o.exports=x},30657:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(32742),l=function(a,r){var i=s(a);for(var n in r)i.hasOwnProperty(n)||(i[n]=r[n]);return i};o.exports=l},72066:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(32742),l=function(a,r){var i=s(a);for(var n in r)i.hasOwnProperty(n)&&(i[n]=r[n]);return i};o.exports=l},28820:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19256),l=function(a,r){for(var i={},n=0;n<r.length;n++){var h=r[n];s(a,h)&&(i[h]=a[h])}return i};o.exports=l},22440:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l){if(!t||typeof t=="number")return!1;if(t.hasOwnProperty(s))return t[s]=l,!0;if(s.indexOf(".")!==-1){for(var a=s.split("."),r=t,i=t,n=0;n<a.length;n++)if(r.hasOwnProperty(a[n]))i=r,r=r[a[n]];else return!1;return i[a[a.length-1]]=l,!0}return!1};o.exports=x},64615:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clone:t(32742),DeepCopy:t(28699),Extend:t(98611),GetAdvancedValue:t(20494),GetFastValue:t(72632),GetMinMaxValue:t(94324),GetValue:t(10850),HasAll:t(87701),HasAny:t(53523),HasValue:t(19256),IsPlainObject:t(42911),Merge:t(30657),MergeRight:t(72066),Pick:t(28820),SetValue:t(22440)}},69429:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return t.replace(/%([0-9]+)/g,function(l,a){return s[Number(a)-1]})};o.exports=x},76400:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s,l,a){s===void 0&&(s=0),l===void 0&&(l=" "),a===void 0&&(a=3),t=t.toString();var r=0;if(s+1>=t.length)switch(a){case 1:t=new Array(s+1-t.length).join(l)+t;break;case 3:var i=Math.ceil((r=s-t.length)/2),n=r-i;t=new Array(n+1).join(l)+t+new Array(i+1).join(l);break;default:t=t+new Array(s+1-t.length).join(l);break}return t};o.exports=x},76872:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t,s){return s===0?t.slice(1):t.slice(0,s-1)+t.slice(s)};o.exports=x},8051:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t.split("").reverse().join("")};o.exports=x},76583:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var s=Math.random()*16|0,l=t==="x"?s:s&3|8;return l.toString(16)})};o.exports=x},40587:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x=function(t){return t&&t[0].toUpperCase()+t.slice(1)};o.exports=x},50379:(o,x,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Format:t(69429),Pad:t(76400),RemoveAt:t(76872),Reverse:t(8051),UppercaseFirst:t(40587),UUID:t(76583)}}},y={};function S(o){var x=y[o];if(x!==void 0)return x.exports;var t=y[o]={exports:{}};return f[o](t,t.exports,S),t.exports}S.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var C=S(92491);return C})())})(jp);var So=jp.exports,Pn=(c=>(c[c.None=0]="None",c[c.LeftEye=1]="LeftEye",c[c.RightEye=2]="RightEye",c[c.Both=3]="Both",c))(Pn||{});class Wo extends So.Scene{constructor(f){super(f);$t(this,"showUserInterface",!0);$t(this,"sceneStopped",!1);$t(this,"parent");$t(this,"sizer")}get windowWidth(){return window.innerWidth}get windowHeight(){return window.innerHeight}get widthScale(){return this.windowWidth/this.sceneWidth}get heightScale(){return this.windowHeight/this.sceneHeight}get defaultUIScene(){return this.scene.get("UserInterface")}get mask(){return this.scene.get("UserInterface").eyeMask}preload(){console.log("Preload")}create(){}update(){}onBlinkStatusChanged(f){switch(f){case 0:return;case 1:return;case 2:return;case 3:return}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P2=1e-7,F2=1e-4;class Zp{constructor(e,f){this.backend=e,this.dataMover=f,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,f){this.dataIdsCount++,this.data.set(e,f)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Ih{refCount(e){return $n("refCount")}incRef(e){return $n("incRef")}timerAvailable(){return!0}time(e){return $n("time")}read(e){return $n("read")}readSync(e){return $n("readSync")}readToGPU(e,f){return $n("readToGPU")}numDataIds(){return $n("numDataIds")}disposeData(e,f){return $n("disposeData")}write(e,f,y){return $n("write")}move(e,f,y,S,C){return $n("move")}createTensorFromGPUData(e,f,y){return $n("createTensorFromGPUData")}memory(){return $n("memory")}floatPrecision(){return $n("floatPrecision")}epsilon(){return this.floatPrecision()===32?P2:F2}dispose(){return $n("dispose")}}function $n(c){throw new Error(`'${c}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Co(c,e,f){return Math.max(c,Math.min(e,f))}function Ph(c){return c%2===0?c:c+1}function pa(c,e,f){const y=c[e];c[e]=c[f],c[f]=y}function M2(c){let e=0;for(let f=0;f<c.length;f++)e+=c[f];return e}function it(c,e){if(!c)throw new Error(typeof e=="string"?e:e())}function zn(c,e,f=""){it(je(c,e),()=>f+` Shapes ${c} and ${e} must match`)}function Jr(c){it(c!=null,()=>"The input to the tensor constructor must be a non-null value.")}function bt(c){if(c.length===0)return 1;let e=c[0];for(let f=1;f<c.length;f++)e*=c[f];return e}function N2(c,e){if(c===e)return!0;if(c==null||e==null||c.length!==e.length)return!1;for(let f=0;f<c.length;f++)if(c[f]!==null&&e[f]!==null&&c[f]!==e[f])return!1;return!0}function je(c,e){if(c===e)return!0;if(c==null||e==null||c.length!==e.length)return!1;for(let f=0;f<c.length;f++)if(c[f]!==e[f])return!1;return!0}function kr(c){return c%1===0}function Ll(c){const e=Math.ceil(Math.sqrt(c));return[e,Math.ceil(c/e)]}function $r(c,e){return e<=c.length?c:c+" ".repeat(e-c.length)}function Sd(c,e=S=>0,f,y){return new Promise((S,C)=>{let o=0;const x=()=>{if(c()){S();return}o++;const t=e(o);if(f!=null&&o>=f){C();return}y!=null?y(x,t):setTimeout(x,t)};x()})}function Qp(c,e){let f=1,y=-1;for(let C=0;C<c.length;++C)if(c[C]>=0)f*=c[C];else if(c[C]===-1){if(y!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${y} and dim ${C}`);y=C}else if(c[C]<0)throw Error(`Shapes can not be < 0. Found ${c[C]} at dim ${C}`);if(y===-1){if(e>0&&e!==f)throw Error(`Size(${e}) must match the product of shape ${c}`);return c}if(f===0)throw Error(`Cannot infer the missing size in [${c}] when there are 0 elements`);if(e%f!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${f}`);const S=c.slice();return S[y]=e/f,S}function Qe(c,e){const f=e.length;return c=c==null?e.map((y,S)=>S):[].concat(c),it(c.every(y=>y>=-f&&y<f),()=>`All values in axis param must be in range [-${f}, ${f}) but got axis ${c}`),it(c.every(y=>kr(y)),()=>`All values in axis param must be integers but got axis ${c}`),c.map(y=>y<0?f+y:y)}function Pi(c,e){const f=[],y=[],S=e!=null&&Array.isArray(e)&&e.length===0,C=e==null||S?null:Qe(e,c).sort();let o=0;for(let x=0;x<c.length;++x){if(C!=null){if(C[o]===x&&c[x]!==1)throw new Error(`Can't squeeze axis ${x} since its dim '${c[x]}' is not 1`);(C[o]==null||C[o]>x)&&c[x]===1&&(f.push(c[x]),y.push(x)),C[o]<=x&&o++}c[x]!==1&&(f.push(c[x]),y.push(x))}return{newShape:f,keptDims:y}}function wi(c,e){return un(c,e)}function un(c,e){let f=null;if(c==null||c==="float32")f=new Float32Array(e);else if(c==="int32")f=new Int32Array(e);else if(c==="bool")f=new Uint8Array(e);else if(c==="string")f=new Array(e);else throw new Error(`Unknown data type ${c}`);return f}function O2(c,e){for(let f=0;f<c.length;f++){const y=c[f];if(isNaN(y)||!isFinite(y))throw Error(`A tensor of type ${e} being uploaded contains ${y}.`)}}function D2(c){return c==="bool"||c==="complex64"||c==="float32"||c==="int32"||c==="string"}function L2(c,e){return!(e==="complex64"||e==="float32"&&c!=="complex64"||e==="int32"&&c!=="float32"&&c!=="complex64"||e==="bool"&&c==="bool")}function Wr(c){if(c==="float32"||c==="int32")return 4;if(c==="complex64")return 8;if(c==="bool")return 1;throw new Error(`Unknown dtype ${c}`)}function B2(c){if(c==null)return 0;let e=0;return c.forEach(f=>e+=f.length),e}function Xo(c){return typeof c=="string"||c instanceof String}function $2(c){return typeof c=="boolean"}function G2(c){return typeof c=="number"}function qr(c){return Array.isArray(c)?qr(c[0]):c instanceof Float32Array?"float32":c instanceof Int32Array||c instanceof Uint8Array||c instanceof Uint8ClampedArray?"int32":G2(c)?"float32":Xo(c)?"string":$2(c)?"bool":"float32"}function Bl(c){return!!(c&&c.constructor&&c.call&&c.apply)}function $l(c,e){for(let f=e;f<c;++f)if(c%f===0)return f;return c}function Me(c){const e=c.length;if(e<2)return[];const f=new Array(e-1);f[e-2]=c[e-1];for(let y=e-3;y>=0;--y)f[y]=f[y+1]*c[y+1];return f}function Jp(c,e,f,y=!1){const S=new Array;if(e.length===1){const C=e[0]*(y?2:1);for(let o=0;o<C;o++)S[o]=f[c+o]}else{const C=e[0],o=e.slice(1),x=o.reduce((t,s)=>t*s)*(y?2:1);for(let t=0;t<C;t++)S[t]=Jp(c+t*x,o,f,y)}return S}function Gl(c,e,f=!1){if(c.length===0)return e[0];const y=c.reduce((S,C)=>S*C)*(f?2:1);if(y===0)return[];if(y!==e.length)throw new Error(`[${c}] does not match the input size ${e.length}${f?" for a complex tensor":""}.`);return Jp(0,c,e,f)}function qp(c,e){const f=bi(c,e);for(let y=0;y<f.length;y++)f[y]=1;return f}function bi(c,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(c);if(e==="int32")return new Int32Array(c);if(e==="bool")return new Uint8Array(c);throw new Error(`Unknown data type ${e}`)}function Zn(c){c.forEach(e=>{it(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${c}].`)})}function Ul(c,e,f){if(e===0)return 0;if(e===1)return c[0];let y=c[c.length-1];for(let S=0;S<c.length-1;++S)y+=f[S]*c[S];return y}function Fh(c,e,f){if(e===0)return[];if(e===1)return[c];const y=new Array(e);for(let S=0;S<y.length-1;++S)y[S]=Math.floor(c/f[S]),c-=y[S]*f[S];return y[y.length-1]=c,y}function sr(c){return c&&c.then&&typeof c.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cd="tfjsflags";class U2{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=V2,this.populateURLFlags()}setPlatform(e,f){this.platform!=null&&(St().getBool("IS_TEST")||St().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=f}registerFlag(e,f,y){if(this.flagRegistry[e]={evaluationFn:f,setHook:y},this.urlFlags[e]!=null){const S=this.urlFlags[e];St().getBool("IS_TEST")||St().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${S}.`),this.set(e,S)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const f=this.evaluateFlag(e);if(sr(f))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=f,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,f){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=f,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(f)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);Cd in e&&e[Cd].split(",").forEach(y=>{const[S,C]=y.split(":");this.urlFlags[S]=k2(S,C)})}}function V2(c){const e={};return c.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(f,...y)=>(z2(e,y[0],y[1]),y.join("="))),e}function z2(c,e,f){c[decodeURIComponent(e)]=decodeURIComponent(f||"")}function k2(c,e){const f=e.toLowerCase();return f==="true"||f==="false"?f==="true":`${+f}`===f?+f:e}function St(){return _p}let _p=null;function W2(c){_p=c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let dl;function tv(){if(dl==null){let c;if(typeof window<"u")c=window;else if(typeof global<"u")c=global;else if(typeof process<"u")c=process;else if(typeof self<"u")c=self;else throw new Error("Could not find a global object");dl=c}return dl}function X2(){const c=tv();return c._tfGlobals==null&&(c._tfGlobals=new Map),c._tfGlobals}function Mh(c,e){const f=X2();if(f.has(c))return f.get(c);{const y=e();return f.set(c,y),f.get(c)}}const Nh="Abs",Oh="Acos",Dh="Acosh",Ho="Add",Yo="AddN",Ko="All",jo="Any",Lh="ArgMax",Bh="ArgMin",$h="Asin",Gh="Asinh",Uh="Atan",Vh="Atanh",zh="Atan2",Zo="AvgPool",ev="AvgPoolGrad",kh="AvgPool3D",nv="AvgPool3DGrad",Qo="BatchMatMul",Wh="BatchToSpaceND",Jo="Bincount",Xh="BitwiseAnd",Hh="BroadcastArgs",qo="Cast",Yh="Ceil",_o="ClipByValue",sv="Complex",iv="ComplexAbs",Kh="Concat",tu="Conv2D",rv="Conv2DBackpropFilter",eu="Conv2DBackpropInput",nu="Conv3D",jh="Conv3DBackpropFilterV2",su="Conv3DBackpropInputV2",Zh="Cos",Qh="Cosh",iu="Cumprod",ru="Cumsum",au="CropAndResize",Jh="DenseBincount",ou="DepthToSpace",uu="DepthwiseConv2dNative",av="DepthwiseConv2dNativeBackpropFilter",ov="DepthwiseConv2dNativeBackpropInput",qh="Diag",lu="Dilation2D",uv="Dilation2DBackpropInput",lv="Dilation2DBackpropFilter",H2="Draw",_h="RealDiv",hv="Einsum",tf="Elu",ef="EluGrad",nf="Erf",sf="Equal",rf="Exp",af="ExpandDims",of="Expm1",fv="FFT",uf="Fill",hu="FlipLeftRight",lf="Floor",hf="FloorDiv",fu="FusedBatchNorm",ff="GatherV2",cu="GatherNd",cf="Greater",df="GreaterEqual",du="Identity",cv="IFFT",dv="Imag",pf="IsFinite",vf="IsInf",mf="IsNan",pu="LeakyRelu",gf="Less",xf="LessEqual",vu="LinSpace",yf="Log",Tf="Log1p",Sf="LogicalAnd",Cf="LogicalNot",Ef="LogicalOr",Y2="LogicalXor",mu="LRN",wf="LRNGrad",gu="Max",bf="Maximum",xu="MaxPool",pv="MaxPoolGrad",Af="MaxPool3D",vv="MaxPool3DGrad",Rf="MaxPoolWithArgmax",yu="Mean",Tu="Min",If="Minimum",Su="MirrorPad",Pf="Mod",Cu="Multinomial",Ff="Multiply",Mf="Neg",Nf="NotEqual",Eu="NonMaxSuppressionV3",wu="NonMaxSuppressionV4",bu="NonMaxSuppressionV5",Of="OnesLike",Au="OneHot",Df="Pack",Ru="PadV2",Lf="Pow",Iu="Prelu",Pu="Prod",mv="RaggedGather",gv="RaggedRange",xv="RaggedTensorToTensor",Bf="Range",yv="Real",$f="Reciprocal",Gf="Relu",Uf="Reshape",Fu="ResizeNearestNeighbor",Vf="ResizeNearestNeighborGrad",Mu="ResizeBilinear",zf="ResizeBilinearGrad",kf="Relu6",Nu="Reverse",Wf="Round",Xf="Rsqrt",Ou="ScatterNd",Du="TensorScatterUpdate",Lu="SearchSorted",Hf="Select",Yf="Selu",Kf="Slice",jf="Sin",Zf="Sinh",Qf="Sign",Jf="Sigmoid",qf="Softplus",_f="Sqrt",Bu="Sum",tc="SpaceToBatchND",ec="SplitV",$u="Softmax",nc="SparseFillEmptyRows",Gu="SparseReshape",sc="SparseSegmentMean",ic="SparseSegmentSum",Uu="SparseToDense",rc="SquaredDifference",Tv="Square",Sv="StaticRegexReplace",Vu="StridedSlice",ac="StringNGrams",oc="StringSplit",uc="StringToHashBucketFast",lc="Sub",hc="Tan",fc="Tanh",Wa="Tile",zu="TopK",ku="Transform",Gr="Transpose",cc="Unique",dc="Unpack",Cv="UnsortedSegmentSum",pc="ZerosLike",Wu="Step",Vl="FromPixels",Xu="RotateWithOffset",Aa="_FusedMatMul",Ra="FusedConv2D",Ia="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xs(...c){St().getBool("IS_TEST")||St().getBool("PROD")||console.warn(...c)}function K2(...c){St().getBool("IS_TEST")||St().getBool("PROD")||console.log(...c)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eo=Mh("kernelRegistry",()=>new Map),j2=Mh("gradRegistry",()=>new Map);function wo(c,e){const f=wv(c,e);return Eo.get(f)}function Ed(c){return j2.get(c)}function wd(c){const e=Eo.entries(),f=[];for(;;){const{done:y,value:S}=e.next();if(y)break;const[C,o]=S,[x]=C.split("_");x===c&&f.push(o)}return f}function Ev(c){const{kernelName:e,backendName:f}=c,y=wv(e,f);Eo.has(y)&&xs(`The kernel '${e}' for backend '${f}' is already registered`),Eo.set(y,c)}function wv(c,e){return`${e}_${c}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bv(c){return c instanceof Float32Array||c instanceof Int32Array||c instanceof Uint8Array||c instanceof Uint8ClampedArray}var Av=ze,rs=null;try{rs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ze(c,e,f){this.low=c|0,this.high=e|0,this.unsigned=!!f}ze.prototype.__isLong__;Object.defineProperty(ze.prototype,"__isLong__",{value:!0});function kn(c){return(c&&c.__isLong__)===!0}ze.isLong=kn;var bd={},Ad={};function pr(c,e){var f,y,S;return e?(c>>>=0,(S=0<=c&&c<256)&&(y=Ad[c],y)?y:(f=ke(c,(c|0)<0?-1:0,!0),S&&(Ad[c]=f),f)):(c|=0,(S=-128<=c&&c<128)&&(y=bd[c],y)?y:(f=ke(c,c<0?-1:0,!1),S&&(bd[c]=f),f))}ze.fromInt=pr;function as(c,e){if(isNaN(c))return e?qi:os;if(e){if(c<0)return qi;if(c>=Rv)return Fv}else{if(c<=-Id)return Un;if(c+1>=Id)return Pv}return c<0?as(-c,e).neg():ke(c%Xr|0,c/Xr|0,e)}ze.fromNumber=as;function ke(c,e,f){return new ze(c,e,f)}ze.fromBits=ke;var bo=Math.pow;function vc(c,e,f){if(c.length===0)throw Error("empty string");if(c==="NaN"||c==="Infinity"||c==="+Infinity"||c==="-Infinity")return os;if(typeof e=="number"?(f=e,e=!1):e=!!e,f=f||10,f<2||36<f)throw RangeError("radix");var y;if((y=c.indexOf("-"))>0)throw Error("interior hyphen");if(y===0)return vc(c.substring(1),e,f).neg();for(var S=as(bo(f,8)),C=os,o=0;o<c.length;o+=8){var x=Math.min(8,c.length-o),t=parseInt(c.substring(o,o+x),f);if(x<8){var s=as(bo(f,x));C=C.mul(s).add(as(t))}else C=C.mul(S),C=C.add(as(t))}return C.unsigned=e,C}ze.fromString=vc;function Es(c,e){return typeof c=="number"?as(c,e):typeof c=="string"?vc(c,e):ke(c.low,c.high,typeof e=="boolean"?e:c.unsigned)}ze.fromValue=Es;var Rd=65536,Z2=1<<24,Xr=Rd*Rd,Rv=Xr*Xr,Id=Rv/2,Pd=pr(Z2),os=pr(0);ze.ZERO=os;var qi=pr(0,!0);ze.UZERO=qi;var Lr=pr(1);ze.ONE=Lr;var Iv=pr(1,!0);ze.UONE=Iv;var zl=pr(-1);ze.NEG_ONE=zl;var Pv=ke(-1,2147483647,!1);ze.MAX_VALUE=Pv;var Fv=ke(-1,-1,!0);ze.MAX_UNSIGNED_VALUE=Fv;var Un=ke(0,-2147483648,!1);ze.MIN_VALUE=Un;var jt=ze.prototype;jt.toInt=function(){return this.unsigned?this.low>>>0:this.low};jt.toNumber=function(){return this.unsigned?(this.high>>>0)*Xr+(this.low>>>0):this.high*Xr+(this.low>>>0)};jt.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Un)){var f=as(e),y=this.div(f),S=y.mul(f).sub(this);return y.toString(e)+S.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var C=as(bo(e,6),this.unsigned),o=this,x="";;){var t=o.div(C),s=o.sub(t.mul(C)).toInt()>>>0,l=s.toString(e);if(o=t,o.isZero())return l+x;for(;l.length<6;)l="0"+l;x=""+l+x}};jt.getHighBits=function(){return this.high};jt.getHighBitsUnsigned=function(){return this.high>>>0};jt.getLowBits=function(){return this.low};jt.getLowBitsUnsigned=function(){return this.low>>>0};jt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Un)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,f=31;f>0&&!(e&1<<f);f--);return this.high!=0?f+33:f+1};jt.isZero=function(){return this.high===0&&this.low===0};jt.eqz=jt.isZero;jt.isNegative=function(){return!this.unsigned&&this.high<0};jt.isPositive=function(){return this.unsigned||this.high>=0};jt.isOdd=function(){return(this.low&1)===1};jt.isEven=function(){return(this.low&1)===0};jt.equals=function(e){return kn(e)||(e=Es(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};jt.eq=jt.equals;jt.notEquals=function(e){return!this.eq(e)};jt.neq=jt.notEquals;jt.ne=jt.notEquals;jt.lessThan=function(e){return this.comp(e)<0};jt.lt=jt.lessThan;jt.lessThanOrEqual=function(e){return this.comp(e)<=0};jt.lte=jt.lessThanOrEqual;jt.le=jt.lessThanOrEqual;jt.greaterThan=function(e){return this.comp(e)>0};jt.gt=jt.greaterThan;jt.greaterThanOrEqual=function(e){return this.comp(e)>=0};jt.gte=jt.greaterThanOrEqual;jt.ge=jt.greaterThanOrEqual;jt.compare=function(e){if(kn(e)||(e=Es(e)),this.eq(e))return 0;var f=this.isNegative(),y=e.isNegative();return f&&!y?-1:!f&&y?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};jt.comp=jt.compare;jt.negate=function(){return!this.unsigned&&this.eq(Un)?Un:this.not().add(Lr)};jt.neg=jt.negate;jt.add=function(e){kn(e)||(e=Es(e));var f=this.high>>>16,y=this.high&65535,S=this.low>>>16,C=this.low&65535,o=e.high>>>16,x=e.high&65535,t=e.low>>>16,s=e.low&65535,l=0,a=0,r=0,i=0;return i+=C+s,r+=i>>>16,i&=65535,r+=S+t,a+=r>>>16,r&=65535,a+=y+x,l+=a>>>16,a&=65535,l+=f+o,l&=65535,ke(r<<16|i,l<<16|a,this.unsigned)};jt.subtract=function(e){return kn(e)||(e=Es(e)),this.add(e.neg())};jt.sub=jt.subtract;jt.multiply=function(e){if(this.isZero())return os;if(kn(e)||(e=Es(e)),rs){var f=rs.mul(this.low,this.high,e.low,e.high);return ke(f,rs.get_high(),this.unsigned)}if(e.isZero())return os;if(this.eq(Un))return e.isOdd()?Un:os;if(e.eq(Un))return this.isOdd()?Un:os;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Pd)&&e.lt(Pd))return as(this.toNumber()*e.toNumber(),this.unsigned);var y=this.high>>>16,S=this.high&65535,C=this.low>>>16,o=this.low&65535,x=e.high>>>16,t=e.high&65535,s=e.low>>>16,l=e.low&65535,a=0,r=0,i=0,n=0;return n+=o*l,i+=n>>>16,n&=65535,i+=C*l,r+=i>>>16,i&=65535,i+=o*s,r+=i>>>16,i&=65535,r+=S*l,a+=r>>>16,r&=65535,r+=C*s,a+=r>>>16,r&=65535,r+=o*t,a+=r>>>16,r&=65535,a+=y*l+S*s+C*t+o*x,a&=65535,ke(i<<16|n,a<<16|r,this.unsigned)};jt.mul=jt.multiply;jt.divide=function(e){if(kn(e)||(e=Es(e)),e.isZero())throw Error("division by zero");if(rs){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var f=(this.unsigned?rs.div_u:rs.div_s)(this.low,this.high,e.low,e.high);return ke(f,rs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?qi:os;var y,S,C;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return qi;if(e.gt(this.shru(1)))return Iv;C=qi}else{if(this.eq(Un)){if(e.eq(Lr)||e.eq(zl))return Un;if(e.eq(Un))return Lr;var o=this.shr(1);return y=o.div(e).shl(1),y.eq(os)?e.isNegative()?Lr:zl:(S=this.sub(e.mul(y)),C=y.add(S.div(e)),C)}else if(e.eq(Un))return this.unsigned?qi:os;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();C=os}for(S=this;S.gte(e);){y=Math.max(1,Math.floor(S.toNumber()/e.toNumber()));for(var x=Math.ceil(Math.log(y)/Math.LN2),t=x<=48?1:bo(2,x-48),s=as(y),l=s.mul(e);l.isNegative()||l.gt(S);)y-=t,s=as(y,this.unsigned),l=s.mul(e);s.isZero()&&(s=Lr),C=C.add(s),S=S.sub(l)}return C};jt.div=jt.divide;jt.modulo=function(e){if(kn(e)||(e=Es(e)),rs){var f=(this.unsigned?rs.rem_u:rs.rem_s)(this.low,this.high,e.low,e.high);return ke(f,rs.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};jt.mod=jt.modulo;jt.rem=jt.modulo;jt.not=function(){return ke(~this.low,~this.high,this.unsigned)};jt.and=function(e){return kn(e)||(e=Es(e)),ke(this.low&e.low,this.high&e.high,this.unsigned)};jt.or=function(e){return kn(e)||(e=Es(e)),ke(this.low|e.low,this.high|e.high,this.unsigned)};jt.xor=function(e){return kn(e)||(e=Es(e)),ke(this.low^e.low,this.high^e.high,this.unsigned)};jt.shiftLeft=function(e){return kn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ke(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ke(0,this.low<<e-32,this.unsigned)};jt.shl=jt.shiftLeft;jt.shiftRight=function(e){return kn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ke(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ke(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};jt.shr=jt.shiftRight;jt.shiftRightUnsigned=function(e){if(kn(e)&&(e=e.toInt()),e&=63,e===0)return this;var f=this.high;if(e<32){var y=this.low;return ke(y>>>e|f<<32-e,f>>>e,this.unsigned)}else return e===32?ke(f,0,this.unsigned):ke(f>>>e-32,0,this.unsigned)};jt.shru=jt.shiftRightUnsigned;jt.shr_u=jt.shiftRightUnsigned;jt.toSigned=function(){return this.unsigned?ke(this.low,this.high,!1):this};jt.toUnsigned=function(){return this.unsigned?this:ke(this.low,this.high,!0)};jt.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};jt.toBytesLE=function(){var e=this.high,f=this.low;return[f&255,f>>>8&255,f>>>16&255,f>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};jt.toBytesBE=function(){var e=this.high,f=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,f>>>24,f>>>16&255,f>>>8&255,f&255]};ze.fromBytes=function(e,f,y){return y?ze.fromBytesLE(e,f):ze.fromBytesBE(e,f)};ze.fromBytesLE=function(e,f){return new ze(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,f)};ze.fromBytesBE=function(e,f){return new ze(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],f)};const Mv=Rh(Av),Q2=Ah({__proto__:null,default:Mv},[Av]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ji=Mv||Q2;function Hu(c){return ji.fromString(c,!0,16)}const Nv=Hu("c3a5c85c97cb3127"),Ki=Hu("b492b66fbe98f273"),Cn=Hu("9ae16a3b2f90404f");function kl(c){return c.xor(c.shru(47))}function Ov(c,e,f){const y=c.slice(e,e+f);return ji.fromBytes(Array.from(y),!0,!0)}function $e(c,e){return Ov(c,e,8)}function Fd(c,e){return Ov(c,e,4)}function on(c,e){return e===0?c:c.shru(e).or(c.shl(64-e))}function Ti(c,e,f=Hu("9ddfea08eb382d69")){let y=c.xor(e).mul(f);y=y.xor(y.shru(47));let S=e.xor(y).mul(f);return S=S.xor(S.shru(47)),S=S.mul(f),S}function J2(c,e,f,y,S,C){S=S.add(c),C=on(C.add(S).add(y),21);const o=S;return S=S.add(e),S=S.add(f),C=C.add(on(S,44)),[S.add(y),C.add(o)]}function io(c,e,f,y){return J2($e(c,e),$e(c,e+8),$e(c,e+16),$e(c,e+24),f,y)}function q2(c,e=c.length){if(e>=8){const f=Cn.add(e*2),y=$e(c,0).add(Cn),S=$e(c,e-8),C=on(S,37).mul(f).add(y),o=on(y,25).add(S).mul(f);return Ti(C,o,f)}if(e>=4){const f=Cn.add(e*2),y=Fd(c,0);return Ti(y.shl(3).add(e),Fd(c,e-4),f)}if(e>0){const f=c[0],y=c[e>>1],S=c[e-1],C=f+(y<<8),o=e+(S<<2);return kl(Cn.mul(C).xor(Nv.mul(o))).mul(Cn)}return Cn}function _2(c,e=c.length){const f=Cn.add(e*2),y=$e(c,0).mul(Ki),S=$e(c,8),C=$e(c,e-8).mul(f),o=$e(c,e-16).mul(Cn);return Ti(on(y.add(S),43).add(on(C,30)).add(o),y.add(on(S.add(Cn),18)).add(C),f)}function tx(c,e=c.length){const f=Cn.add(e*2),y=$e(c,0).mul(Cn),S=$e(c,8),C=$e(c,e-8).mul(f),o=$e(c,e-16).mul(Cn),x=on(y.add(S),43).add(on(C,30)).add(o),t=Ti(x,y.add(on(S.add(Cn),18)).add(C),f),s=$e(c,16).mul(f),l=$e(c,24),a=x.add($e(c,e-32)).mul(f),r=t.add($e(c,e-24)).mul(f);return Ti(on(s.add(l),43).add(on(a,30)).add(r),s.add(on(l.add(y),18)).add(a),f)}function ex(c,e=c.length){const f=ji.fromNumber(81,!0);if(e<=32)return e<=16?q2(c,e):_2(c,e);if(e<=64)return tx(c,e);let y=f,S=f.mul(Ki).add(113),C=kl(S.mul(Cn).add(113)).mul(Cn),o=[ji.UZERO,ji.UZERO],x=[ji.UZERO,ji.UZERO];y=y.mul(Cn).add($e(c,0));let t=0;const s=(e-1>>6)*64,l=s+(e-1&63)-63;do y=on(y.add(S).add(o[0]).add($e(c,t+8)),37).mul(Ki),S=on(S.add(o[1]).add($e(c,t+48)),42).mul(Ki),y=y.xor(x[1]),S=S.add(o[0]).add($e(c,t+40)),C=on(C.add(x[0]),33).mul(Ki),o=io(c,t,o[1].mul(Ki),y.add(x[0])),x=io(c,t+32,C.add(x[1]),S.add($e(c,t+16))),[C,y]=[y,C],t+=64;while(t!==s);const a=Ki.add(C.and(255).shl(1));return t=l,x[0]=x[0].add(e-1&63),o[0]=o[0].add(x[0]),x[0]=x[0].add(o[0]),y=on(y.add(S).add(o[0]).add($e(c,t+8)),37).mul(a),S=on(S.add(o[1]).add($e(c,t+48)),42).mul(a),y=y.xor(x[1].mul(9)),S=S.add(o[0].mul(9).add($e(c,t+40))),C=on(C.add(x[0]),33).mul(a),o=io(c,t,o[1].mul(a),y.add(x[0])),x=io(c,t+32,C.add(x[1]),S.add($e(c,t+16))),[C,y]=[y,C],Ti(Ti(o[0],x[0],a).add(kl(S).mul(Nv)).add(C),Ti(o[1],x[1],a).add(y),a)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _r(c,e){return e==="string"?er(c):Yu([c],e)}function nx(c,e){return c instanceof Float32Array&&e==="float32"||c instanceof Int32Array&&e==="int32"||c instanceof Uint8Array&&e==="bool"}function Yu(c,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(c)&&(c=ir(c)),St().getBool("DEBUG")&&O2(c,e),nx(c,e))return c;if(e==null||e==="float32"||e==="complex64")return new Float32Array(c);if(e==="int32")return new Int32Array(c);if(e==="bool"){const f=new Uint8Array(c.length);for(let y=0;y<f.length;++y)Math.round(c[y])!==0&&(f[y]=1);return f}else throw new Error(`Unknown data type ${e}`)}function Hn(){return St().platform.now()}function sx(c,e){return St().platform.fetch(c,e)}function er(c,e="utf-8"){return e=e||"utf-8",St().platform.encode(c,e)}function Hr(c,e="utf-8"){return e=e||"utf-8",St().platform.decode(c,e)}function ls(c){return St().platform.isTypedArray!=null?St().platform.isTypedArray(c):bv(c)}function ir(c,e=[],f=!1){if(e==null&&(e=[]),typeof c=="boolean"||typeof c=="number"||typeof c=="string"||sr(c)||c==null||ls(c)&&f)e.push(c);else if(Array.isArray(c)||ls(c))for(let y=0;y<c.length;++y)ir(c[y],e,f);else{let y=-1;for(const S of Object.keys(c))/^([1-9]+[0-9]*|0)$/.test(S)&&(y=Math.max(y,Number(S)));for(let S=0;S<=y;S++)ir(c[S],e,f)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ix{constructor(e,f){this.backendTimer=e,this.logger=f,f==null&&(this.logger=new ax)}profileKernel(e,f,y){let S;const C=()=>{S=y()};let o;const x=Hn();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(C);else{C();for(const s of S)s.dataSync();o=Promise.resolve({kernelMs:Hn()-x})}if(St().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<S.length;s++){const l=S[s];l.data().then(a=>{rx(a,l.dtype,e)})}return{kernelName:e,outputs:S,inputs:f,timeMs:o.then(s=>s.kernelMs),extraInfo:o.then(s=>s.getExtraProfileInfo!=null?s.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:f,outputs:y,timeMs:S,inputs:C,extraInfo:o}=e;y.forEach(x=>{Promise.all([x.data(),S,o]).then(t=>{this.logger.logKernelProfile(f,x,t[0],t[1],C,t[2])})})}}function rx(c,e,f){if(e!=="float32")return!1;for(let y=0;y<c.length;y++){const S=c[y];if(isNaN(S)||!isFinite(S))return console.warn(`Found ${S} in the result of '${f}'`),!0}return!1}class ax{logKernelProfile(e,f,y,S,C,o){const x=typeof S=="number"?$r(`${S}ms`,9):S.error,t=$r(e,25),s=f.rank,l=f.size,a=$r(f.shape.toString(),14);let r="";for(const i in C){const n=C[i];if(n!=null){const h=n.shape||f.shape,d=h.length;r+=`${i}: ${d}D ${d>0?h:""} `}}console.log(`%c${t}	%c${x}	%c${s}D ${a}	%c${l}	%c${r}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ox(c,e,f){const y={},S={};for(let t=0;t<e.length;t++)y[e[t].id]=!0;for(let t=0;t<c.length;t++){const s=c[t],l=s.inputs;for(const a in l){const r=l[a];let i=!1;for(let n=0;n<e.length;n++)if(y[r.id]){s.outputs.forEach(h=>y[h.id]=!0),i=!0,S[s.id]=!0;break}if(i)break}}const C={};C[f.id]=!0;const o={};for(let t=c.length-1;t>=0;t--){const s=c[t],l=s.inputs;for(let a=0;a<s.outputs.length;a++)if(C[s.outputs[a].id]){for(const r in l)C[l[r].id]=!0,o[s.id]=!0;break}}const x=[];for(let t=0;t<c.length;t++){const s=c[t];if(S[s.id]&&o[s.id]){const l={};for(const r in s.inputs){const i=s.inputs[r];y[i.id]&&(l[r]=i)}const a=Object.assign({},s);a.inputs=l,a.outputs=s.outputs,x.push(a)}}return x}function ux(c,e,f,y){for(let S=e.length-1;S>=0;S--){const C=e[S],o=[];if(C.outputs.forEach(t=>{const s=c[t.id];s!=null?o.push(s):o.push(null)}),C.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${C.kernelName}.`);const x=C.gradient(o);for(const t in C.inputs){if(!(t in x))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(x)}.`);const s=f(()=>x[t]());if(s.dtype!=="float32")throw new Error(`Error in gradient for op ${C.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${s.dtype}'`);const l=C.inputs[t];if(!je(s.shape,l.shape))throw new Error(`Error in gradient for op ${C.kernelName}. The gradient of input '${t}' has shape '${s.shape}', which does not match the shape of the input '${l.shape}'`);if(c[l.id]==null)c[l.id]=s;else{const a=c[l.id];c[l.id]=y(a,s),a.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Md=20,va=3,pl=7;function lx(c,e,f,y){const S=Me(e),C=hx(c,e,f,S),o=e.length,x=mo(c,e,f,S,C),t=["Tensor"];return y&&(t.push(`  dtype: ${f}`),t.push(`  rank: ${o}`),t.push(`  shape: [${e}]`),t.push("  values:")),t.push(x.map(s=>"    "+s).join(`
`)),t.join(`
`)}function hx(c,e,f,y){const S=bt(e),C=y[y.length-1],o=new Array(C).fill(0),x=e.length,t=f==="complex64"?xa(c):c;if(x>1)for(let s=0;s<S/C;s++){const l=s*C;for(let a=0;a<C;a++)o[a]=Math.max(o[a],ga(t[l+a],0,f).length)}return o}function ga(c,e,f){let y;return Array.isArray(c)?y=`${parseFloat(c[0].toFixed(pl))} + ${parseFloat(c[1].toFixed(pl))}j`:Xo(c)?y=`'${c}'`:f==="bool"?y=Dv(c):y=parseFloat(c.toFixed(pl)).toString(),$r(y,e)}function Dv(c){return c===0?"false":"true"}function mo(c,e,f,y,S,C=!0){const o=f==="complex64"?2:1,x=e[0],t=e.length;if(t===0){if(f==="complex64"){const h=xa(c);return[ga(h[0],0,f)]}return f==="bool"?[Dv(c[0])]:[c[0].toString()]}if(t===1){if(x>Md){const d=va*o;let u=Array.from(c.slice(0,d)),p=Array.from(c.slice((x-va)*o,x*o));return f==="complex64"&&(u=xa(u),p=xa(p)),["["+u.map((v,m)=>ga(v,S[m],f)).join(", ")+", ..., "+p.map((v,m)=>ga(v,S[x-va+m],f)).join(", ")+"]"]}return["["+(f==="complex64"?xa(c):Array.from(c)).map((d,u)=>ga(d,S[u],f)).join(", ")+"]"]}const s=e.slice(1),l=y.slice(1),a=y[0]*o,r=[];if(x>Md){for(let h=0;h<va;h++){const d=h*a,u=d+a;r.push(...mo(c.slice(d,u),s,f,l,S,!1))}r.push("...");for(let h=x-va;h<x;h++){const d=h*a,u=d+a;r.push(...mo(c.slice(d,u),s,f,l,S,h===x-1))}}else for(let h=0;h<x;h++){const d=h*a,u=d+a;r.push(...mo(c.slice(d,u),s,f,l,S,h===x-1))}const i=t===2?",":"";r[0]="["+(x>0?r[0]+i:"");for(let h=1;h<r.length-1;h++)r[h]=" "+r[h]+i;let n=`,
`;for(let h=2;h<t;h++)n+=`
`;return r[r.length-1]=" "+r[r.length-1]+"]"+(C?"":n),r}function xa(c){const e=[];for(let f=0;f<c.length;f+=2)e.push([c[f],c[f+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yr{constructor(e,f,y){if(this.dtype=f,this.shape=e.slice(),this.size=bt(e),y!=null){const S=y.length;it(S===this.size,()=>`Length of values '${S}' does not match the size inferred by the shape '${this.size}'.`)}if(f==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=y||un(f,this.size),this.strides=Me(e)}set(e,...f){f.length===0&&(f=[0]),it(f.length===this.rank,()=>`The number of provided coordinates (${f.length}) must match the rank (${this.rank})`);const y=this.locToIndex(f);this.values[y]=e}get(...e){e.length===0&&(e=[0]);let f=0;for(const S of e){if(S<0||S>=this.shape[f]){const C=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(C)}f++}let y=e[e.length-1];for(let S=0;S<e.length-1;++S)y+=this.strides[S]*e[S];return this.values[y]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let f=e[e.length-1];for(let y=0;y<e.length-1;++y)f+=this.strides[y]*e[y];return f}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const f=new Array(this.shape.length);for(let y=0;y<f.length-1;++y)f[y]=Math.floor(e/this.strides[y]),e-=f[y]*this.strides[y];return f[f.length-1]=e,f}get rank(){return this.shape.length}toTensor(){return ms().makeTensor(this.values,this.shape,this.dtype)}}let ms=null,Nr=null;function fx(c){ms=c}function cx(c){Nr=c}class Je{constructor(e,f,y,S){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=f||"float32",this.size=bt(e),this.strides=Me(e),this.dataId=y,this.id=S,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Nr.buffer(this.shape,this.dtype,e)}bufferSync(){return Nr.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Gl(this.shape,e,this.dtype==="complex64")}arraySync(){return Gl(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ms().read(this.dataId);if(this.dtype==="string"){const f=await e;try{return f.map(y=>Hr(y))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ms().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ms().readSync(this.dataId);if(this.dtype==="string")try{return e.map(f=>Hr(f))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ms().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ms().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Nr.print(this,e)}clone(){return this.throwIfDisposed(),Nr.clone(this)}toString(e=!1){const f=this.dataSync();return lx(f,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Nr.cast(this,e)}variable(e=!0,f,y){return this.throwIfDisposed(),ms().makeVariable(this,e,f,y)}}Object.defineProperty(Je,Symbol.hasInstance,{value:c=>!!c&&c.data!=null&&c.dataSync!=null&&c.throwIfDisposed!=null});function Lv(){return Mh("Tensor",()=>Je)}Lv();class Ao extends Je{constructor(e,f,y,S){super(e.shape,e.dtype,e.dataId,S),this.trainable=f,this.name=y}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!je(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ms().disposeTensor(this),this.dataId=e.dataId,ms().incRef(this,null)}dispose(){ms().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Ao,Symbol.hasInstance,{value:c=>c instanceof Je&&c.assign!=null&&c.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Nd;(function(c){c.R0="R0",c.R1="R1",c.R2="R2",c.R3="R3",c.R4="R4",c.R5="R5",c.R6="R6"})(Nd||(Nd={}));var Wl;(function(c){c.float32="float32",c.int32="int32",c.bool="int32",c.complex64="complex64"})(Wl||(Wl={}));var Xl;(function(c){c.float32="float32",c.int32="int32",c.bool="bool",c.complex64="complex64"})(Xl||(Xl={}));var Hl;(function(c){c.float32="float32",c.int32="float32",c.bool="float32",c.complex64="complex64"})(Hl||(Hl={}));var Yl;(function(c){c.float32="complex64",c.int32="complex64",c.bool="complex64",c.complex64="complex64"})(Yl||(Yl={}));const dx={float32:Hl,int32:Wl,bool:Xl,complex64:Yl};function Ns(c,e){if(c==="string"||e==="string"){if(c==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${c} with ${e}`)}return dx[c][e]}function mc(c){return Ns(c,"int32")}function Bv(c){return c!=null&&typeof c=="object"&&"texture"in c&&c.texture instanceof WebGLTexture}function $v(c){return typeof GPUBuffer<"u"&&c!=null&&typeof c=="object"&&"buffer"in c&&c.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qe(c,e){if(c.dtype===e.dtype)return[c,e];const f=Ns(c.dtype,e.dtype);return[c.cast(f),e.cast(f)]}function px(c,e){it(c.dtype===e.dtype,()=>`The dtypes of the first(${c.dtype}) and second(${e.dtype}) input must match`)}function Gv(c){const e=[];return Uv(c,e,new Set),e}function Uv(c,e,f){if(c==null)return;if(c instanceof Je){e.push(c);return}if(!vx(c))return;const y=c;for(const S in y){const C=y[S];f.has(C)||(f.add(C),Uv(C,e,f))}}function vx(c){return Array.isArray(c)||typeof c=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vl(c){return c.kernelName!=null}class Od{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Kr{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Od}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let f=0;f<e.length;f++){const y=e[f];if(await this.initializeBackend(y).success){await this.setBackend(y);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:f}=this.initializeBackendsAndReturnBest();if(f)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:f}=this.initializeBackend(e);if(f)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,f,y=1){return e in this.registryFactory?(xs(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:f,priority:y},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:f,asyncInit:y}=this.initializeBackend(e);if(!(y?await f:f))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new ix(this.backendInstance),!0}setupRegisteredKernels(){wd(this.backendName).forEach(f=>{f.setupFunc!=null&&f.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){wd(e).forEach(y=>{y.disposeFunc!=null&&y.disposeFunc(this.registry[e])})}initializeBackend(e){const f=this.registryFactory[e];if(f==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const y=f.factory();if(y&&!(y instanceof Ih)&&typeof y.then=="function"){const S=++this.pendingBackendInitId,C=y.then(o=>S<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(S<this.pendingBackendInitId||(this.pendingBackendInit=null,xs(`Initialization of backend ${e} failed`),xs(o.stack||o.message)),!1));return this.pendingBackendInit=C,{success:C,asyncInit:!0}}else return this.registry[e]=y,{success:!0,asyncInit:!1}}catch(y){return xs(`Initialization of backend ${e} failed`),xs(y.stack||y.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,f)=>this.registryFactory[f].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let f=0;f<e.length;f++){const y=e[f],{success:S,asyncInit:C}=this.initializeBackend(y);if(C||S)return{name:y,asyncInit:C}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,f){const y=this.state.tensorInfo.get(f),S=y.backend,C=this.readSync(f),o=S.refCount(f);S.disposeData(f,!0),y.backend=e,e.move(f,C,y.shape,y.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,f){let y=null;if(f==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");f=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof f!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");y=e}let S;return this.scopedRun(()=>this.startScope(y),()=>this.endScope(S),()=>(S=f(),S instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),S))}scopedRun(e,f,y){e();try{const S=y();return f(),S}catch(S){throw f(),S}}nextTensorId(){return Kr.nextTensorId++}nextVariableId(){return Kr.nextVariableId++}clone(e){const f=pt.runKernel(du,{x:e}),y={x:e},S=o=>({x:()=>{const x="float32",t={x:o},s={dtype:x};return pt.runKernel(qo,t,s)}}),C=[];return this.addTapeNode(this.state.activeScope.name,y,[f],S,C,{}),f}runKernel(e,f,y){if(this.backendName==null&&this.backend,!(wo(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:f,attrs:y})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,f,y){const S=this.backend.numDataIds();let C=0;y.forEach(t=>{C+=t.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],x=S-f-C-o;if(x>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${x} data ids) after running '${e}'`)}runKernelFunc(e){let f,y=[];const S=this.isTapeOn(),C=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let x;this.backendName==null&&this.backend;let t;const s=vl(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(vl(e)){const{kernelName:n,inputs:h,attrs:d}=e;this.backendName==null&&this.backend;const u=wo(n,this.backendName);it(u!=null,()=>`Cannot find registered kernel '${n}' for backend '${this.backendName}'`),x=()=>{const p=this.backend.numDataIds();t=u.kernelFunc({inputs:h,attrs:d,backend:this.backend});const v=Array.isArray(t)?t:[t];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(n,p,v);const m=v.map(g=>g.rank!=null?g:this.makeTensorFromTensorInfo(g));if(S){const g=this.getTensorsForGradient(n,h,m);y=this.saveTensorsForBackwardMode(g)}return m}}else{const{forwardFunc:n}=e,h=d=>{S&&(y=d.map(u=>this.keep(this.clone(u))))};x=()=>{const d=this.backend.numDataIds();t=this.tidy(()=>n(this.backend,h));const u=Array.isArray(t)?t:[t];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(s,d,u),u}}const{inputs:l,attrs:a}=e,r=vl(e)?null:e.backwardsFunc;let i;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?f=x():(i=this.profiler.profileKernel(s,l,()=>x()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(i),f=i.outputs)}),S&&this.addTapeNode(s,l,f,r,y,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-C,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map(n=>l[n]!=null?l[n].shape:null),outputShapes:f.map(n=>n.shape),kernelTimeMs:i.timeMs,extraInfo:i.extraInfo}),Array.isArray(t)?f:f[0]}saveTensorsForBackwardMode(e){return e.map(y=>this.keep(this.clone(y)))}getTensorsForGradient(e,f,y){const S=Ed(e);if(S!=null){const C=S.inputsToSave||[],o=S.outputsToSave||[];let x;S.saveAllInputs?(it(Array.isArray(f),()=>"saveAllInputs is true, expected inputs to be an array."),x=Object.keys(f).map(s=>f[s])):x=C.map(s=>f[s]);const t=y.filter((s,l)=>o[l]);return x.concat(t)}return[]}makeTensor(e,f,y,S){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");y=y||"float32",S=S||this.backend;let C=e;y==="string"&&Xo(e[0])&&(C=e.map(t=>er(t)));const o=S.write(C,f,y),x=new Je(f,y,o,this.nextTensorId());if(this.trackTensor(x,S),y==="string"){const t=this.state.tensorInfo.get(o),s=B2(C);this.state.numBytes+=s-t.bytes,t.bytes=s}return x}makeTensorFromDataId(e,f,y,S){y=y||"float32";const C={dataId:e,shape:f,dtype:y};return this.makeTensorFromTensorInfo(C,S)}makeTensorFromTensorInfo(e,f){const{dataId:y,shape:S,dtype:C}=e,o=new Je(S,C,y,this.nextTensorId());return this.trackTensor(o,f),o}makeVariable(e,f=!0,y,S){y=y||this.nextVariableId().toString(),S!=null&&S!==e.dtype&&(e=e.cast(S));const C=new Ao(e,f,y,this.nextTensorId());if(this.state.registeredVariables[C.name]!=null)throw new Error(`Variable with name ${C.name} was already registered`);return this.state.registeredVariables[C.name]=C,this.incRef(C,this.backend),C}trackTensor(e,f){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let y=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(y=e.size*Wr(e.dtype)),this.state.numBytes+=y,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:f||this.backend,dtype:e.dtype,shape:e.shape,bytes:y})),e instanceof Ao||this.track(e)}incRef(e,f){this.trackTensor(e,f),this.backend.incRef(e.dataId)}removeDataId(e,f){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===f&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const f=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=f.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const y=e.size*Wr(e.dtype);this.state.numBytes-=y}f.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,f.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const f=this.state.registeredVariables[e];this.disposeVariable(f)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const f=this.state.numBytes,y=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(S=>S.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-f,this.state.activeProfile.newTensors=this.state.numTensors-y;for(const S of this.state.activeProfile.kernels)S.kernelTimeMs=await S.kernelTimeMs,S.extraInfo=await S.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,f,y,S,C,o){const x={id:this.state.nextTapeNodeId++,kernelName:e,inputs:f,outputs:y,saved:C},t=Ed(e);t!=null&&(S=t.gradFunc),S!=null&&(x.gradient=s=>(s=s.map((l,a)=>{if(l==null){const r=y[a],i=bi(r.size,r.dtype);return this.makeTensor(i,r.shape,r.dtype)}return l}),S(s.length>1?s:s[0],C,o))),this.state.activeTape.push(x)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const f={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(f.name=e),this.state.scopeStack.push(f),this.state.activeScope=f}endScope(e){const f=Gv(e),y=new Set(f.map(C=>C.id));for(let C=0;C<this.state.activeScope.track.length;C++){const o=this.state.activeScope.track[C];!o.kept&&!y.has(o.id)&&o.dispose()}const S=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],f.forEach(C=>{!C.kept&&C.scopeId===S.id&&this.track(C)})}gradients(e,f,y,S=!1){if(it(f.length>0,()=>"gradients() received an empty list of xs."),y!=null&&y.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${y.dtype}'`);const C=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));it(C instanceof Je,()=>"The result y returned by f() must be a tensor.");const o=ox(this.state.activeTape,f,C);if(!S&&o.length===0&&f.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const x={};x[C.id]=y??mx(C.shape),ux(x,o,s=>this.tidy(s),gx);const t=f.map(s=>x[s.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(s=>{for(const l of s.saved)l.dispose()}),this.state.activeTape=null),{value:C,grads:t}})}customGrad(e){return it(Bl(e),()=>"The f passed in customGrad(f) must be a function."),(...f)=>{it(f.every(x=>x instanceof Je),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let y;const S={};f.forEach((x,t)=>{S[t]=x});const C=(x,t)=>(y=e(...f,t),it(y.value instanceof Je,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),it(Bl(y.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),y.value),o=(x,t)=>{const s=y.gradFunc(x,t),l=Array.isArray(s)?s:[s];it(l.length===f.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),it(l.every(r=>r instanceof Je),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const a={};return l.forEach((r,i)=>{a[i]=()=>r}),a};return this.runKernelFunc({forwardFunc:C,backwardsFunc:o,inputs:S})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,f){return this.state.tensorInfo.get(e).backend.readToGPU(e,f)}async time(e){const f=Hn(),y=await this.backend.time(e);return y.wallMs=Hn()-f,y}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Od;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Kr.nextTensorId=0;Kr.nextVariableId=0;function mx(c){const e=qp(bt(c),"float32");return pt.makeTensor(e,c,"float32")}function Vv(){const c=tv();if(c._tfengine==null){const e=new U2(c);c._tfengine=new Kr(e)}return W2(c._tfengine.ENV),fx(()=>c._tfengine),c._tfengine}const pt=Vv();function gx(c,e){const f={a:c,b:e};return pt.runKernel(Ho,f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xx(){return typeof navigator<"u"&&navigator!=null}function zv(c){if(c||xx()){if(c||(c=navigator),c.product==="ReactNative")return!0;const e=c.userAgent||c.vendor||(typeof window<"u"?window.opera:"");if(!e){const f=c;return f.userAgentData&&f.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function kv(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nn=St();Nn.registerFlag("DEBUG",()=>!1,c=>{c&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Nn.registerFlag("IS_BROWSER",()=>kv());Nn.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Nn.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Nn.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Nn.registerFlag("PROD",()=>!1);Nn.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Nn.getBool("DEBUG"));Nn.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Nn.registerFlag("IS_TEST",()=>!1);Nn.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Nn.getBool("DEBUG"));Nn.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Nn.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Nn.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fi(c,e){let f=c;if(ls(c))return e==="string"?[]:[c.length];if(Bv(c)){const S=c.channels||"RGBA";return[c.height,c.width*S.length]}else if($v(c))return[c.buffer.size/(e==null?4:Wr(e))];if(!Array.isArray(c))return[];const y=[];for(;Array.isArray(f)||ls(f)&&e!=="string";)y.push(f.length),f=f[0];return Array.isArray(c)&&St().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Wv(c,y,[]),y}function Wv(c,e,f){if(f=f||[],!Array.isArray(c)&&!ls(c)){it(e.length===0,()=>`Element arr[${f.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}it(e.length>0,()=>`Element arr[${f.join("][")}] should be a primitive, but is an array of ${c.length} elements`),it(c.length===e[0],()=>`Element arr[${f.join("][")}] should have ${e[0]} elements, but has ${c.length} elements`);const y=e.slice(1);for(let S=0;S<c.length;++S)Wv(c[S],y,f.concat(S))}function Dd(c,e,f,y){if(c!=="string_or_numeric"){if(c==null)throw new Error("Expected dtype cannot be null.");if(c!=="numeric"&&c!==e||c==="numeric"&&e==="string")throw new Error(`Argument '${f}' passed to '${y}' must be ${c} tensor, but got ${e} tensor`)}}function st(c,e,f,y="numeric"){if(c instanceof Lv())return Dd(y,c.dtype,e,f),c;let S=qr(c);if(S!=="string"&&["bool","int32","float32"].indexOf(y)>=0&&(S=y),Dd(y,S,e,f),c==null||!ls(c)&&!Array.isArray(c)&&typeof c!="number"&&typeof c!="boolean"&&typeof c!="string"){const t=c==null?"null":c.constructor.name;throw new Error(`Argument '${e}' passed to '${f}' must be a Tensor or TensorLike, but got '${t}'`)}const C=Fi(c,S);!ls(c)&&!Array.isArray(c)&&(c=[c]);const x=S!=="string"?Yu(c,S):ir(c,[],!0);return pt.makeTensor(x,C,S)}function Ro(c,e,f,y="numeric"){if(!Array.isArray(c))throw new Error(`Argument ${e} passed to ${f} must be a \`Tensor[]\` or \`TensorLike[]\``);return c.map((C,o)=>st(C,`${e}[${o}]`,f,y))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xv="__op";function ct(c){const e=Object.keys(c);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let f=e[0];const y=c[f];f.endsWith("_")&&(f=f.substring(0,f.length-1)),f=f+Xv;const S=(...C)=>{pt.startScope(f);try{const o=y(...C);return sr(o)&&console.error("Cannot return a Promise inside of tidy."),pt.endScope(o),o}catch(o){throw pt.endScope(null),o}};return Object.defineProperty(S,"name",{value:f,configurable:!0}),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yx(c,e){const f=st(c,"real","complex"),y=st(e,"imag","complex");zn(f.shape,y.shape,`real and imag shapes, ${f.shape} and ${y.shape}, must match in call to tf.complex().`);const S={real:f,imag:y};return pt.runKernel(sv,S)}const Ai=ct({complex_:yx});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mi(c,e,f,y){if(y==null)y=qr(c);else if(y==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if($v(c)||Bv(c)){if(y!=="float32"&&y!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${y}.`);return pt.backend.createTensorFromGPUData(c,e||f,y)}if(!ls(c)&&!Array.isArray(c)&&typeof c!="number"&&typeof c!="boolean"&&typeof c!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Zn(e);const S=bt(e),C=bt(f);it(S===C,()=>`Based on the provided shape, [${e}], the tensor should have ${S} values but has ${C}`);for(let o=0;o<f.length;++o){const x=f[o],t=o===f.length-1?x!==bt(e.slice(o)):!0;it(f[o]===e[o]||!t,()=>`Error creating a new Tensor. Inferred shape (${f}) does not match the provided shape (${e}). `)}}return!ls(c)&&!Array.isArray(c)&&(c=[c]),e=e||f,c=y!=="string"?Yu(c,y):ir(c,[],!0),pt.makeTensor(c,e,y)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ys(c,e,f){const y=Fi(c,f);return Mi(c,e,y,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kl={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class ws{static join(e){return new ws(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(y=>ls(y)?y.buffer:y),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let f=0;for(let y=0;y<e.length;y++){const S=e[y];y!==e.length-1&&S.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const C=f+S.byteLength;this.shards.push({buffer:S,start:f,end:C}),f=C}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,f=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,f=isNaN(Number(f))?0:f,e=Math.max(0,e),f=Math.min(this.byteLength,f),f<=e)return new ArrayBuffer(0);const y=this.findShardForByte(e);if(y===-1)throw new Error(`Could not find start shard for byte ${e}`);const S=f-e,C=new ArrayBuffer(S),o=new Uint8Array(C);let x=0;for(let t=y;t<this.shards.length;t++){const s=this.shards[t],a=e+x-s.start,r=x,n=Math.min(f,s.end)-s.start,h=new Uint8Array(s.buffer,a,n-a);if(o.set(h,r),x+=h.length,f<s.end)break}return C}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function f(S){return e<S.start?-1:e>=S.end?1:0}if(f(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const y=Tx(this.shards,f);return y===-1?-1:(this.previousShardIndex=y,this.previousShardIndex)}}function Tx(c,e){let f=0,y=c.length;for(;f<=y;){const S=Math.floor((y-f)/2)+f,C=e(c[S]);if(C===0)return S;C<0?y=S:f=S+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Io=4;async function Sx(c,e){const f=[],y=[],S=Array.isArray(c)?c.map(o=>o.name):Object.keys(c);for(let o=0;o<S.length;++o){const x=S[o],t=Array.isArray(c)?c[o].tensor:c[x];if(t.dtype!=="float32"&&t.dtype!=="int32"&&t.dtype!=="bool"&&t.dtype!=="string"&&t.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${x}': ${t.dtype}`);const s={name:x,shape:t.shape,dtype:t.dtype};if(t.dtype==="string"){const l=new Promise(async a=>{const r=await t.bytes(),i=r.reduce((d,u)=>d+u.length,0)+Io*r.length,n=new Uint8Array(i);let h=0;for(let d=0;d<r.length;d++){const u=r[d],p=new Uint8Array(new Uint32Array([u.length]).buffer);n.set(p,h),h+=Io,n.set(u,h),h+=u.length}a(n)});y.push(l)}else y.push(t.data());e!=null&&(s.group=e),f.push(s)}const C=await Promise.all(y);return{data:Cx(C),specs:f}}function Hv(c,e){const f=new ws(c),y={};let S,C=0;for(const o of e){const x=o.name,t=o.dtype,s=o.shape,l=bt(s);let a;if("quantization"in o){const r=o.quantization;if(r.dtype==="uint8"||r.dtype==="uint16"){if(!("min"in r&&"scale"in r))throw new Error(`Weight ${o.name} with quantization ${r.dtype} doesn't have corresponding metadata min and scale.`)}else if(r.dtype==="float16"){if(t!=="float32")throw new Error(`Weight ${o.name} is quantized with ${r.dtype} which only supports weights of type float32 not ${t}.`)}else throw new Error(`Weight ${o.name} has unknown quantization dtype ${r.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const i=Kl[r.dtype],n=f.slice(C,C+l*i),h=r.dtype==="uint8"?new Uint8Array(n):new Uint16Array(n);if(t==="float32")if(r.dtype==="uint8"||r.dtype==="uint16"){a=new Float32Array(h.length);for(let d=0;d<h.length;d++){const u=h[d];a[d]=u*r.scale+r.min}}else if(r.dtype==="float16")S===void 0&&(S=Px()),a=S(h);else throw new Error(`Unsupported quantization type ${r.dtype} for weight type float32.`);else if(t==="int32"){if(r.dtype!=="uint8"&&r.dtype!=="uint16")throw new Error(`Unsupported quantization type ${r.dtype} for weight type int32.`);a=new Int32Array(h.length);for(let d=0;d<h.length;d++){const u=h[d];a[d]=Math.round(u*r.scale+r.min)}}else throw new Error(`Unsupported dtype in weight '${x}': ${t}`);C+=l*i}else if(t==="string"){const r=bt(o.shape);a=[];for(let i=0;i<r;i++){const n=new Uint32Array(f.slice(C,C+Io))[0];C+=Io;const h=new Uint8Array(f.slice(C,C+n));a.push(h),C+=n}}else{const r=Kl[t],i=f.slice(C,C+l*r);if(t==="float32")a=new Float32Array(i);else if(t==="int32")a=new Int32Array(i);else if(t==="bool")a=new Uint8Array(i);else if(t==="complex64"){a=new Float32Array(i);const n=new Float32Array(a.length/2),h=new Float32Array(a.length/2);for(let p=0;p<n.length;p++)n[p]=a[p*2],h[p]=a[p*2+1];const d=ys(n,s,"float32"),u=ys(h,s,"float32");y[x]=Ai(d,u),d.dispose(),u.dispose()}else throw new Error(`Unsupported dtype in weight '${x}': ${t}`);C+=l*r}t!=="complex64"&&(y[x]=ys(a,s,t))}return y}function Cx(c){if(c===null)throw new Error(`Invalid input value: ${JSON.stringify(c)}`);let e=0;const f=[];c.forEach(C=>{if(e+=C.byteLength,f.push(C.byteLength===C.buffer.byteLength?C:new C.constructor(C)),!(C instanceof Float32Array||C instanceof Int32Array||C instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${C.constructor.name}`)});const y=new Uint8Array(e);let S=0;return f.forEach(C=>{y.set(new Uint8Array(C.buffer),S),S+=C.byteLength}),y.buffer}const gc=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Ld(c){return gc?Buffer.byteLength(c,"utf8"):new Blob([c]).size}function Ex(c){if(gc)return Buffer.from(c).toString("base64");const e=new Uint8Array(c);let f="";for(let y=0,S=e.length;y<S;y++)f+=String.fromCharCode(e[y]);return btoa(f)}function wx(c){if(gc){const y=Buffer.from(c,"base64");return y.buffer.slice(y.byteOffset,y.byteOffset+y.byteLength)}const e=atob(c),f=new Uint8Array(e.length);for(let y=0;y<e.length;++y)f.set([e.charCodeAt(y)],y);return f.buffer}function bx(c){return ws.join(c)}function Bd(c){const e="/";for(c=c.trim();c.endsWith(e);)c=c.slice(0,c.length-1);const f=c.split(e);return f[f.length-1]}function Yv(c,e){const f={modelTopology:c.modelTopology,format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,weightsManifest:e};return c.signature!=null&&(f.signature=c.signature),c.userDefinedMetadata!=null&&(f.userDefinedMetadata=c.userDefinedMetadata),c.modelInitializer!=null&&(f.modelInitializer=c.modelInitializer),c.initializerSignature!=null&&(f.initializerSignature=c.initializerSignature),c.trainingConfig!=null&&(f.trainingConfig=c.trainingConfig),f}function Kv(c,e,f){const y={modelTopology:c.modelTopology,format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy};if(c.trainingConfig!=null&&(y.trainingConfig=c.trainingConfig),c.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!f)throw new Error("modelJSON has weightsManifest but weightData is null");y.weightSpecs=e,y.weightData=f}return c.signature!=null&&(y.signature=c.signature),c.userDefinedMetadata!=null&&(y.userDefinedMetadata=c.userDefinedMetadata),c.modelInitializer!=null&&(y.modelInitializer=c.modelInitializer),c.initializerSignature!=null&&(y.initializerSignature=c.initializerSignature),y}async function xc(c,e){let f,y;return c.weightsManifest!=null&&([f,y]=await e(c.weightsManifest)),Kv(c,f,y)}function Xa(c){if(c.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:c.modelTopology==null?0:Ld(JSON.stringify(c.modelTopology)),weightSpecsBytes:c.weightSpecs==null?0:Ld(JSON.stringify(c.weightSpecs)),weightDataBytes:c.weightData==null?0:new ws(c.weightData).byteLength}}function jv(c){const e=[];for(const f of c)e.push(...f.weights);return e}function Ax(){const c=f=>{let y=f<<13,S=0;for(;!(y&8388608);)S-=8388608,y<<=1;return y&=-8388609,S+=947912704,y|S},e=new Uint32Array(2048);e[0]=0;for(let f=1;f<1024;f++)e[f]=c(f);for(let f=1024;f<2048;f++)e[f]=939524096+(f-1024<<13);return e}function Rx(){const c=new Uint32Array(64);c[0]=0,c[31]=1199570944,c[32]=2147483648,c[63]=3347054592;for(let e=1;e<31;e++)c[e]=e<<23;for(let e=33;e<63;e++)c[e]=2147483648+(e-32<<23);return c}function Ix(){const c=new Uint32Array(64);for(let e=0;e<64;e++)c[e]=1024;return c[0]=c[32]=0,c}function Px(){const c=Ax(),e=Rx(),f=Ix();return y=>{const S=new ArrayBuffer(4*y.length),C=new Uint32Array(S);for(let o=0;o<y.length;o++){const x=y[o],t=c[f[x>>10]+(x&1023)]+e[x>>10];C[o]=t}return new Float32Array(S)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ye{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ye.instance==null&&(Ye.instance=new Ye),Ye.instance}static registerSaveRouter(e){Ye.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ye.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ye.getHandlers(e,"save")}static getLoadHandlers(e,f){return Ye.getHandlers(e,"load",f)}static getHandlers(e,f,y){const S=[];return(f==="load"?Ye.getInstance().loadRouters:Ye.getInstance().saveRouters).forEach(o=>{const x=o(e,y);x!==null&&S.push(x)}),S}}const Fx=c=>Ye.registerSaveRouter(c),Mx=c=>Ye.registerLoadRouter(c),Nx=c=>Ye.getSaveHandlers(c),Ox=(c,e)=>Ye.getLoadHandlers(c,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jl="tensorflowjs",Zl=1,_i="models_store",xi="model_info_store";function Zv(){if(!St().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const c=typeof window>"u"?self:window,e=c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB||c.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Ql(c){const e=c.result;e.createObjectStore(_i,{keyPath:"modelPath"}),e.createObjectStore(xi,{keyPath:"modelPath"})}class rr{constructor(e){if(this.indexedDB=Zv(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,f){return new Promise((y,S)=>{const C=this.indexedDB.open(jl,Zl);C.onupgradeneeded=()=>Ql(C),C.onsuccess=()=>{const o=C.result;if(f==null){const x=o.transaction(_i,"readonly"),s=x.objectStore(_i).get(this.modelPath);s.onsuccess=()=>{if(s.result==null)return o.close(),S(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));y(s.result.modelArtifacts)},s.onerror=l=>(o.close(),S(s.error)),x.oncomplete=()=>o.close()}else{f.weightData=ws.join(f.weightData);const x=Xa(f),t=o.transaction(xi,"readwrite");let s=t.objectStore(xi),l;try{l=s.put({modelPath:this.modelPath,modelArtifactsInfo:x})}catch(r){return S(r)}let a;l.onsuccess=()=>{a=o.transaction(_i,"readwrite");const r=a.objectStore(_i);let i;try{i=r.put({modelPath:this.modelPath,modelArtifacts:f,modelArtifactsInfo:x})}catch(n){return S(n)}i.onsuccess=()=>y({modelArtifactsInfo:x}),i.onerror=n=>{s=t.objectStore(xi);const h=s.delete(this.modelPath);h.onsuccess=()=>(o.close(),S(i.error)),h.onerror=d=>(o.close(),S(i.error))}},l.onerror=r=>(o.close(),S(l.error)),t.oncomplete=()=>{a==null?o.close():a.oncomplete=()=>o.close()}}},C.onerror=o=>S(C.error)})}}rr.URL_SCHEME="indexeddb://";const Qv=c=>St().getBool("IS_BROWSER")&&!Array.isArray(c)&&c.startsWith(rr.URL_SCHEME)?Dx(c.slice(rr.URL_SCHEME.length)):null;Ye.registerSaveRouter(Qv);Ye.registerLoadRouter(Qv);function Dx(c){return new rr(c)}function Lx(c){return c.startsWith(rr.URL_SCHEME)?c.slice(rr.URL_SCHEME.length):c}class Bx{constructor(){this.indexedDB=Zv()}async listModels(){return new Promise((e,f)=>{const y=this.indexedDB.open(jl,Zl);y.onupgradeneeded=()=>Ql(y),y.onsuccess=()=>{const S=y.result,C=S.transaction(xi,"readonly"),x=C.objectStore(xi).getAll();x.onsuccess=()=>{const t={};for(const s of x.result)t[s.modelPath]=s.modelArtifactsInfo;e(t)},x.onerror=t=>(S.close(),f(x.error)),C.oncomplete=()=>S.close()},y.onerror=S=>f(y.error)})}async removeModel(e){return e=Lx(e),new Promise((f,y)=>{const S=this.indexedDB.open(jl,Zl);S.onupgradeneeded=()=>Ql(S),S.onsuccess=()=>{const C=S.result,o=C.transaction(xi,"readwrite"),x=o.objectStore(xi),t=x.get(e);let s;t.onsuccess=()=>{if(t.result==null)return C.close(),y(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const l=x.delete(e),a=()=>{s=C.transaction(_i,"readwrite");const i=s.objectStore(_i).delete(e);i.onsuccess=()=>f(t.result.modelArtifactsInfo),i.onerror=n=>y(t.error)};l.onsuccess=a,l.onerror=r=>(a(),C.close(),y(t.error))}},t.onerror=l=>(C.close(),y(t.error)),o.oncomplete=()=>{s==null?C.close():s.oncomplete=()=>C.close()}},S.onerror=C=>y(S.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xs="/",Or="tensorflowjs_models",Jv="info",$x="model_topology",Gx="weight_specs",Ux="weight_data",Vx="model_metadata";function qv(c){return{info:[Or,c,Jv].join(Xs),topology:[Or,c,$x].join(Xs),weightSpecs:[Or,c,Gx].join(Xs),weightData:[Or,c,Ux].join(Xs),modelMetadata:[Or,c,Vx].join(Xs)}}function _v(c){for(const e of Object.values(c))window.localStorage.removeItem(e)}function zx(c){const e=c.split(Xs);if(e.length<3)throw new Error(`Invalid key format: ${c}`);return e.slice(1,e.length-1).join(Xs)}function kx(c){return c.startsWith(ar.URL_SCHEME)?c.slice(ar.URL_SCHEME.length):c}class ar{constructor(e){if(!St().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=qv(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const f=JSON.stringify(e.modelTopology),y=JSON.stringify(e.weightSpecs),S=Xa(e),C=ws.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(S)),this.LS.setItem(this.keys.topology,f),this.LS.setItem(this.keys.weightSpecs,y),this.LS.setItem(this.keys.weightData,Ex(C));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:S}}catch{throw _v(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${S.modelTopologyBytes}, weightSpecsBytes=${S.weightSpecsBytes}, weightDataBytes=${S.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const f={},y=JSON.parse(this.LS.getItem(this.keys.topology));if(y==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);f.modelTopology=y;const S=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(S==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);f.weightSpecs=S;const C=this.LS.getItem(this.keys.modelMetadata);if(C!=null){const x=JSON.parse(C);f.format=x.format,f.generatedBy=x.generatedBy,f.convertedBy=x.convertedBy,x.signature!=null&&(f.signature=x.signature),x.userDefinedMetadata!=null&&(f.userDefinedMetadata=x.userDefinedMetadata),x.modelInitializer!=null&&(f.modelInitializer=x.modelInitializer),x.initializerSignature!=null&&(f.initializerSignature=x.initializerSignature),x.trainingConfig!=null&&(f.trainingConfig=x.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return f.weightData=wx(o),f}}ar.URL_SCHEME="localstorage://";const tm=c=>St().getBool("IS_BROWSER")&&!Array.isArray(c)&&c.startsWith(ar.URL_SCHEME)?Wx(c.slice(ar.URL_SCHEME.length)):null;Ye.registerSaveRouter(tm);Ye.registerLoadRouter(tm);function Wx(c){return new ar(c)}class Xx{constructor(){it(St().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),it(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},f=Or+Xs,y=Xs+Jv;for(let S=0;S<this.LS.length;++S){const C=this.LS.key(S);if(C.startsWith(f)&&C.endsWith(y)){const o=zx(C);e[o]=JSON.parse(this.LS.getItem(C))}}return e}async removeModel(e){e=kx(e);const f=qv(e);if(this.LS.getItem(f.info)==null)throw new Error(`Cannot find model at path '${e}'`);const y=JSON.parse(this.LS.getItem(f.info));return _v(f),y}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ur="://";class Sn{constructor(){this.managers={}}static getInstance(){return Sn.instance==null&&(Sn.instance=new Sn),Sn.instance}static registerManager(e,f){it(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Ur)&&(e=e.slice(0,e.indexOf(Ur))),it(e.length>0,()=>"scheme must not be an empty string.");const y=Sn.getInstance();it(y.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),y.managers[e]=f}static getManager(e){const f=Sn.getInstance().managers[e];if(f==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return f}static getSchemes(){return Object.keys(Sn.getInstance().managers)}}function go(c){if(c.indexOf(Ur)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Sn.getSchemes().join(",")}`);return{scheme:c.split(Ur)[0],path:c.split(Ur)[1]}}async function em(c,e,f=!1){it(c!==e,()=>`Old path and new path are the same: '${c}'`);const y=Ye.getLoadHandlers(c);it(y.length>0,()=>`Copying failed because no load handler is found for source URL ${c}.`),it(y.length<2,()=>`Copying failed because more than one (${y.length}) load handlers for source URL ${c}.`);const S=y[0],C=Ye.getSaveHandlers(e);it(C.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),it(C.length<2,()=>`Copying failed because more than one (${y.length}) save handlers for destination URL ${e}.`);const o=C[0],x=go(c).scheme,t=go(c).path,s=x===go(c).scheme,l=await S.load();f&&s&&await Sn.getManager(x).removeModel(t);const a=await o.save(l);return f&&!s&&await Sn.getManager(x).removeModel(t),a.modelArtifactsInfo}async function Hx(){const c=Sn.getSchemes(),e={};for(const f of c){const y=await Sn.getManager(f).listModels();for(const S in y){const C=f+Ur+S;e[C]=y[S]}}return e}async function Yx(c){const e=go(c);return Sn.getManager(e.scheme).removeModel(e.path)}async function Kx(c,e){return em(c,e,!1)}async function jx(c,e){return em(c,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zx{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,f){return fetch(e,f)}now(){return performance.now()}encode(e,f){if(f!=="utf-8"&&f!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${f}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,f){return new TextDecoder(f).decode(e)}setTimeoutCustom(e,f){if(typeof window>"u"||!St().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,f);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},f),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",y=>{if(y.source===window&&y.data.name===this.messageName){y.stopPropagation();const S=this.functionRefs[y.data.index];S(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return bv(e)}}if(St().get("IS_BROWSER")){St().setPlatform("browser",new Zx);try{Sn.registerManager(ar.URL_SCHEME,new Xx)}catch{}try{Sn.registerManager(rr.URL_SCHEME,new Bx)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qx={importFetch:()=>require("node-fetch")};let ml;class Jx{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,f){return St().global.fetch!=null?St().global.fetch(e,f):(ml==null&&(ml=Qx.importFetch()),ml(e,f))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,f){if(f!=="utf-8"&&f!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${f}`);return this.textEncoder.encode(e)}decode(e,f){return e.length===0?"":new this.util.TextDecoder(f).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}St().get("IS_NODE")&&!St().get("IS_BROWSER")&&St().setPlatform("node",new Jx);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ze(c,e="float32",f){return e=e||"float32",Zn(c),new Yr(c,e,f)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qx(c,e){const f=st(c,"x","cast");if(!D2(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&f.dtype!=="string"||e!=="string"&&f.dtype==="string")throw new Error("Only strings can be casted to strings");const y={x:f},S={dtype:e};return pt.runKernel(qo,y,S)}const We=ct({cast_:qx});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _x(c){const f={x:st(c,"x","clone","string_or_numeric")};return pt.runKernel(du,f)}const Si=ct({clone_:_x});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nm(c,e=!1){console.log(c.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Vv();const ty={buffer:Ze,cast:We,clone:Si,print:nm};cx(ty);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zs(){return pt}function de(c,e){return pt.tidy(c,e)}function Ke(c){Gv(c).forEach(f=>f.dispose())}function Is(c){return pt.keep(c)}function sm(c,e,f=1){return pt.registerBackend(c,e,f)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ey(c,e){let f=st(c,"a","add"),y=st(e,"b","add");[f,y]=qe(f,y);const S={a:f,b:y};return pt.runKernel(Ho,S)}const ne=ct({add_:ey});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ny(c,e){let f=st(c,"a","floorDiv"),y=st(e,"b","floorDiv");[f,y]=qe(f,y);const S={a:f,b:y};return pt.runKernel(hf,S)}const im=ct({floorDiv_:ny});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sy(c,e){let f=st(c,"a","div"),y=st(e,"b","div");if([f,y]=qe(f,y),f.dtype==="int32"&&y.dtype==="int32")return im(f,y);const S={a:f,b:y},C={};return pt.runKernel(_h,S,C)}const ye=ct({div_:sy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iy(c,e){let f=st(c,"a","mul"),y=st(e,"b","mul");[f,y]=qe(f,y);const S={a:f,b:y};return pt.runKernel(Ff,S)}const Wt=ct({mul_:iy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ry(c){const e=st(c,"x","abs");if(e.dtype==="complex64"){const f={x:e};return pt.runKernel(iv,f)}else{const f={x:e};return pt.runKernel(Nh,f)}}const Xn=ct({abs_:ry});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ay(c){const f={x:st(c,"x","acos")};return pt.runKernel(Oh,f)}const oy=ct({acos_:ay});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uy(c){const f={x:st(c,"x","acosh")};return pt.runKernel(Dh,f)}const ly=ct({acosh_:uy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hy(c){it(Array.isArray(c),()=>"The argument passed to tf.addN() must be a list of tensors"),it(c.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${c.length}`);const e=c.map((S,C)=>st(S,`tensors${C}`,"addN")),f=e[0];e.forEach(S=>{if(S.dtype!==f.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(S=>{if(!je(S.shape,f.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const y=e;return pt.runKernel(Yo,y)}const fy=ct({addN_:hy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cy(c,e=null,f=!1){const S={x:st(c,"x","all","bool")},C={axis:e,keepDims:f};return pt.runKernel(Ko,S,C)}const dy=ct({all_:cy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function py(c,e=null,f=!1){const S={x:st(c,"x","any","bool")},C={axis:e,keepDims:f};return pt.runKernel(jo,S,C)}const vy=ct({any_:py});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function my(c,e=0){const y={x:st(c,"x","argMax")},S={axis:e};return pt.runKernel(Lh,y,S)}const gy=ct({argMax_:my});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xy(c,e=0){const y={x:st(c,"x","argMin")},S={axis:e};return pt.runKernel(Bh,y,S)}const yy=ct({argMin_:xy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ty(c){const f={x:st(c,"x","asin")};return pt.runKernel($h,f)}const Sy=ct({asin_:Ty});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cy(c){const f={x:st(c,"x","asinh")};return pt.runKernel(Gh,f)}const Ey=ct({asinh_:Cy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wy(c){const f={x:st(c,"x","atan")};return pt.runKernel(Uh,f)}const by=ct({atan_:wy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ay(c,e){let f=st(c,"a","atan2"),y=st(e,"b","atan2");[f,y]=qe(f,y);const S={a:f,b:y};return pt.runKernel(zh,S)}const Ry=ct({atan2_:Ay});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iy(c){const f={x:st(c,"x","atanh")};return pt.runKernel(Vh,f)}const Py=ct({atanh_:Iy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ha(c,e,f,y,S="NHWC",C){const o=c[3],x=[...e,o],t=Oi(S);return cn(c,x,f,C,y,null,null,t)}function hs(c,e,f,y,S,C,o="channelsLast"){const[x,t]=Pa(e);let s;if(o==="channelsLast")s=[x,t,c[3],c[3]];else if(o==="channelsFirst")s=[x,t,c[1],c[1]];else throw new Error(`Unknown dataFormat ${o}`);return cn(c,s,f,y,S,C,!1,o)}function ti(c,e,f,y,S,C,o="NDHWC"){const[x,t,s]=Jl(e);let l,a;if(o==="NDHWC")a="channelsLast",l=[x,t,s,c[4],c[4]];else if(o==="NCDHW")a="channelsFirst",l=[x,t,s,c[1],c[1]];else throw new Error(`Unknown dataFormat ${o}`);return Ni(c,l,f,y,S,!1,a,C)}function cn(c,e,f,y,S,C,o=!1,x="channelsLast"){let[t,s,l,a]=[-1,-1,-1,-1];if(x==="channelsLast")[t,s,l,a]=c;else if(x==="channelsFirst")[t,a,s,l]=c;else throw new Error(`Unknown dataFormat ${x}`);const[r,i,,n]=e,[h,d]=Pa(f),[u,p]=Pa(y),v=Vr(r,u),m=Vr(i,p),{padInfo:g,outHeight:T,outWidth:w}=Ny(S,s,l,h,d,v,m,C,x),b=o?n*a:n;let E;return x==="channelsFirst"?E=[t,b,T,w]:x==="channelsLast"&&(E=[t,T,w,b]),{batchSize:t,dataFormat:x,inHeight:s,inWidth:l,inChannels:a,outHeight:T,outWidth:w,outChannels:b,padInfo:g,strideHeight:h,strideWidth:d,filterHeight:r,filterWidth:i,effectiveFilterHeight:v,effectiveFilterWidth:m,dilationHeight:u,dilationWidth:p,inShape:c,outShape:E,filterShape:e}}function Ni(c,e,f,y,S,C=!1,o="channelsLast",x){let[t,s,l,a,r]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[t,s,l,a,r]=c;else if(o==="channelsFirst")[t,r,s,l,a]=c;else throw new Error(`Unknown dataFormat ${o}`);const[i,n,h,,d]=e,[u,p,v]=Jl(f),[m,g,T]=Jl(y),w=Vr(i,m),b=Vr(n,g),E=Vr(h,T),{padInfo:A,outDepth:R,outHeight:I,outWidth:P}=Oy(S,s,l,a,u,p,v,w,b,E,x),M=C?d*r:d;let F;return o==="channelsFirst"?F=[t,M,R,I,P]:o==="channelsLast"&&(F=[t,R,I,P,M]),{batchSize:t,dataFormat:o,inDepth:s,inHeight:l,inWidth:a,inChannels:r,outDepth:R,outHeight:I,outWidth:P,outChannels:M,padInfo:A,strideDepth:u,strideHeight:p,strideWidth:v,filterDepth:i,filterHeight:n,filterWidth:h,effectiveFilterDepth:w,effectiveFilterHeight:b,effectiveFilterWidth:E,dilationDepth:m,dilationHeight:g,dilationWidth:T,inShape:c,outShape:F,filterShape:e}}function Fy(c,e,f,y,S){y==null&&(y=yc(c,e,f));const C=c[0],o=c[1],x=Fa((C-e+2*y)/f+1,S),t=Fa((o-e+2*y)/f+1,S);return[x,t]}function My(c,e,f,y,S,C){S==null&&(S=yc(c,e[0],y[0]));const o=[0,0,0,f];for(let x=0;x<3;x++)c[x]+2*S>=e[x]&&(o[x]=Fa((c[x]-e[x]+2*S)/y[x]+1,C));return o}function yc(c,e,f,y=1){const S=Vr(e,y);return Math.floor((c[0]*(f-1)-f+S)/2)}function Pa(c){return typeof c=="number"?[c,c,c]:c.length===2?[c[0],c[1],1]:c}function Jl(c){return typeof c=="number"?[c,c,c]:c}function Vr(c,e){return e<=1?c:c+(c-1)*(e-1)}function Ny(c,e,f,y,S,C,o,x,t){let s,l,a;if(typeof c=="number"){s={top:c,bottom:c,left:c,right:c,type:c===0?"VALID":"NUMBER"};const i=Fy([e,f],C,y,c,x);l=i[0],a=i[1]}else if(c==="same"){l=Math.ceil(e/y),a=Math.ceil(f/S);const r=Math.max(0,(l-1)*y+C-e),i=Math.max(0,(a-1)*S+o-f),n=Math.floor(r/2),h=r-n,d=Math.floor(i/2),u=i-d;s={top:n,bottom:h,left:d,right:u,type:"SAME"}}else if(c==="valid")s={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-C+1)/y),a=Math.ceil((f-o+1)/S);else if(typeof c=="object"){const r=t==="channelsLast"?c[1][0]:c[2][0],i=t==="channelsLast"?c[1][1]:c[2][1],n=t==="channelsLast"?c[2][0]:c[3][0],h=t==="channelsLast"?c[2][1]:c[3][1];s={top:r,bottom:i,left:n,right:h,type:r===0&&i===0&&n===0&&h===0?"VALID":"EXPLICIT"},l=Fa((e-C+r+i)/y+1,x),a=Fa((f-o+n+h)/S+1,x)}else throw Error(`Unknown padding parameter: ${c}`);return{padInfo:s,outHeight:l,outWidth:a}}function Oy(c,e,f,y,S,C,o,x,t,s,l){let a,r,i,n;if(c==="valid"&&(c=0),typeof c=="number"){a={top:c,bottom:c,left:c,right:c,front:c,back:c,type:c===0?"VALID":"NUMBER"};const d=My([e,f,y,1],[x,t,s],1,[S,C,o],c,l);r=d[0],i=d[1],n=d[2]}else if(c==="same"){r=Math.ceil(e/S),i=Math.ceil(f/C),n=Math.ceil(y/o);const h=(r-1)*S+x-e,d=(i-1)*C+t-f,u=(n-1)*o+s-y,p=Math.floor(h/2),v=h-p,m=Math.floor(d/2),g=d-m,T=Math.floor(u/2),w=u-T;a={top:m,bottom:g,left:T,right:w,front:p,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${c}`);return{padInfo:a,outDepth:r,outHeight:i,outWidth:n}}function Fa(c,e){if(!e)return Math.trunc(c);switch(e){case"round":return Math.round(c);case"ceil":return Math.ceil(c);case"floor":return Math.floor(c);default:throw new Error(`Unknown roundingMode ${e}`)}}function Ma(c){const[e,f,y]=Pa(c);return e===1&&f===1&&y===1}function On(c,e){return Ma(c)||Ma(e)}function or(c){return Pa(c).every(e=>e>0)}function Oi(c){if(c==="NHWC")return"channelsLast";if(c==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${c}`)}function fs(c,e,f){if(f!=null){if(typeof e=="string")throw Error(`Error in ${c}: pad must be an integer when using dimRoundingMode ${f} but got pad ${e}.`);if(typeof e=="number")it(kr(e),()=>`Error in ${c}: pad must be an integer when using dimRoundingMode ${f} but got pad ${e}.`);else if(typeof e=="object")e.forEach(y=>{y.forEach(S=>{it(kr(S),()=>`Error in ${c}: pad must be an integer when using dimRoundingMode ${f} but got pad ${S}.`)})});else throw Error(`Error in ${c}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dy(c,e){const y={x:st(c,"x","reshape","string_or_numeric")},S={shape:e};return pt.runKernel(Uf,y,S)}const Mt=ct({reshape_:Dy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ly(c,e,f,y,S){const C=st(c,"x","avgPool","float32"),o=1;it(On(f,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${f} and dilations '${o}'`);let x=C,t=!1;C.rank===3&&(t=!0,x=Mt(C,[1,C.shape[0],C.shape[1],C.shape[2]])),it(x.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${x.rank}.`),fs("avgPool",y,S);const s={x},l={filterSize:e,strides:f,pad:y,dimRoundingMode:S};let a=pt.runKernel(Zo,s,l);return a=We(a,C.dtype),t?Mt(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const rm=ct({avgPool_:Ly});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function By(c,e,f,y,S,C="NDHWC"){const o=st(c,"x","avgPool3d","float32");let x=o,t=!1;o.rank===4&&(t=!0,x=Mt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),it(x.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${x.rank}.`),it(C==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${C}`),it(typeof f=="number"&&f>0||Array.isArray(f)&&f[0]>0&&f[1]>0&&f[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${f}'`),fs("avgPool3d",y,S);const s={x},l={filterSize:e,strides:f,pad:y,dimRoundingMode:S,dataFormat:C};let a=pt.runKernel(kh,s,l);return a=We(a,x.dtype),t?Mt(a,[a.shape[1],a.shape[2],a.shape[3],a.shape[4]]):a}const $y=ct({avgPool3d_:By});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gy(c,e=0){it(c.length>=1,()=>"Pass at least one tensor to concat");const f=Ro(c,"tensors","concat","string_or_numeric");if(f[0].dtype==="complex64"&&f.forEach(C=>{if(C.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${C.dtype}. `)}),f.length===1)return Si(f[0]);const y=f,S={axis:e};return pt.runKernel(Kh,y,S)}const fn=ct({concat_:Gy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uy(c,e,f=!1,y=!1){let S=st(c,"a","matMul"),C=st(e,"b","matMul");[S,C]=qe(S,C);const o={a:S,b:C},x={transposeA:f,transposeB:y};return pt.runKernel(Qo,o,x)}const Oe=ct({matMul_:Uy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vy(c){const f={x:st(c,"x","sigmoid","float32")};return pt.runKernel(Jf,f)}const nr=ct({sigmoid_:Vy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zy(c,e,f){const y=st(c,"x","slice","string_or_numeric");if(y.rank===0)throw new Error("Slicing scalar is not possible");const S={x:y},C={begin:e,size:f};return pt.runKernel(Kf,S,C)}const ve=ct({slice_:zy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ky(c){const f={x:st(c,"x","tanh","float32")};return pt.runKernel(fc,f)}const ql=ct({tanh_:ky});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wy(c,e,f,y,S,C){const o=st(c,"forgetBias","basicLSTMCell"),x=st(e,"lstmKernel","basicLSTMCell"),t=st(f,"lstmBias","basicLSTMCell"),s=st(y,"data","basicLSTMCell"),l=st(S,"c","basicLSTMCell"),a=st(C,"h","basicLSTMCell"),r=fn([s,a],1),i=Oe(r,x),n=ne(i,t),h=n.shape[0],d=n.shape[1]/4,u=[h,d],p=ve(n,[0,0],u),v=ve(n,[0,d],u),m=ve(n,[0,d*2],u),g=ve(n,[0,d*3],u),T=ne(Wt(nr(p),ql(v)),Wt(l,nr(ne(o,m)))),w=Wt(ql(T),nr(g));return[T,w]}const Xy=ct({basicLSTMCell_:Wy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hy(c,e,f){const y=st(c,"x","batchToSpaceND"),S=e.reduce((x,t)=>x*t);it(y.rank>=1+e.length,()=>`input rank is ${y.rank} but should be > than blockShape.length ${e.length}`),it(f.length===e.length,()=>`crops.length is ${f.length} but should be equal to blockShape.length  ${e.length}`),it(y.shape[0]%S===0,()=>`input tensor batch is ${y.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${S}`);const C={x:y},o={blockShape:e,crops:f};return pt.runKernel(Wh,C,o)}const am=ct({batchToSpaceND_:Hy});function Yy(c){let e;return c.rank===0||c.rank===1?e=Mt(c,[1,1,1,c.size]):c.rank===2?e=Mt(c,[1,1,c.shape[0],c.shape[1]]):c.rank===3?e=Mt(c,[1,c.shape[0],c.shape[1],c.shape[2]]):e=c,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ky(c,e,f,y,S,C){C==null&&(C=.001);const o=st(c,"x","batchNorm"),x=st(e,"mean","batchNorm"),t=st(f,"variance","batchNorm");let s;S!=null&&(s=st(S,"scale","batchNorm"));let l;y!=null&&(l=st(y,"offset","batchNorm")),it(x.rank===t.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),it(l==null||x.rank===l.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),it(s==null||x.rank===s.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const r={x:Yy(o),scale:s,offset:l,mean:x,variance:t},i={varianceEpsilon:C},n=pt.runKernel(fu,r,i);return Mt(n,o.shape)}const Ku=ct({batchNorm_:Ky});function jy(c,e,f,y,S,C){const o=st(c,"x","batchNorm"),x=st(e,"mean","batchNorm"),t=st(f,"variance","batchNorm");let s;S!=null&&(s=st(S,"scale","batchNorm"));let l;return y!=null&&(l=st(y,"offset","batchNorm")),it(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),it(x.rank===2||x.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${x.rank}.`),it(t.rank===2||t.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${t.rank}.`),s!=null&&it(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${s.rank}.`),l!=null&&it(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${l.rank}.`),Ku(o,x,t,l,s,C)}const Zy=ct({batchNorm2d_:jy});function Qy(c,e,f,y,S,C){const o=st(c,"x","batchNorm"),x=st(e,"mean","batchNorm"),t=st(f,"variance","batchNorm");let s;S!=null&&(s=st(S,"scale","batchNorm"));let l;return y!=null&&(l=st(y,"offset","batchNorm")),it(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),it(x.rank===3||x.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${x.rank}.`),it(t.rank===3||t.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${t.rank}.`),s!=null&&it(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${s.rank}.`),l!=null&&it(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${l.rank}.`),Ku(o,x,t,l,s,C)}const Jy=ct({batchNorm3d_:Qy});function qy(c,e,f,y,S,C){const o=st(c,"x","batchNorm"),x=st(e,"mean","batchNorm"),t=st(f,"variance","batchNorm");let s;S!=null&&(s=st(S,"scale","batchNorm"));let l;return y!=null&&(l=st(y,"offset","batchNorm")),it(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),it(x.rank===4||x.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${x.rank}.`),it(t.rank===4||t.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${t.rank}.`),s!=null&&it(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${s.rank}.`),l!=null&&it(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${l.rank}.`),Ku(o,x,t,l,s,C)}const _y=ct({batchNorm4d_:qy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3(c,e,f){const y=st(c,"x","bincount"),S=st(e,"weights","bincount");it(y.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${y.dtype}`),it(f>=0,()=>`size must be non-negative, but got ${f}.`),it(S.size===y.size||S.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${y.shape}, weights shape: ${S.shape}.`);const C={x:y,weights:S},o={size:f};return pt.runKernel(Jo,C,o)}const om=ct({bincount_:t3});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3(c,e){const f=st(c,"x","bitwiseAnd"),y=st(e,"y","bitwiseAnd");if(!je(f.shape,y.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${f.shape}, y: ${y.shape}`);if(f.dtype!=="int32"||y.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${f.dtype} and type of y: ${y.dtype}`);const S={a:f,b:y};return pt.runKernel(Xh,S)}const n3=ct({bitwiseAnd_:e3});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3(c,e){const f=st(c,"s0","broadcastArgs","int32"),y=st(e,"s1","broadcastArgs","int32");if(f.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${f.rank}`);if(y.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${y.rank}`);const S={s0:f,s1:y};return pt.runKernel(Hh,S)}const i3=ct({broadcastArgs_:s3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3(c,e){let f=st(c,"broadcastTo","x");const y=f.shape;if(Zn(e),e.length<f.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${f.rank}.`);if(e.length>f.rank){const s=f.shape.slice();for(;s.length<e.length;)s.unshift(1);f=Mt(f,s)}const S=f.shape,C=Array.from(e);for(let s=e.length-1;s>=0;s--)if(S[s]===e[s])C[s]=1;else if(f.shape[s]!==1)throw new Error(`broadcastTo(): [${y}] cannot be broadcast to [${e}].`);if(C.map((s,l)=>s>1?l:-1).filter(s=>s>=0).length===0)return Si(f);const x={x:f},t={reps:C};return pt.runKernel(Wa,x,t)}const Ca=ct({broadcastTo_:r3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a3(c){const f={x:st(c,"x","ceil","float32")};return pt.runKernel(Yh,f)}const o3=ct({ceil_:a3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ya(c,e,f){Zn(c),f=f||qr(e);const y={shape:c,value:e,dtype:f};return pt.runKernel(uf,{},y)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3(c,e,f){const y=st(c,"x","clipByValue");if(it(e<=f,()=>`Error in clip: min (${e}) must be less than or equal to max (${f}).`),e===f)return Ya(y.shape,e,y.dtype);const S={x:y},C={clipValueMin:e,clipValueMax:f};return pt.runKernel(_o,S,C)}const um=ct({clipByValue_:u3});function l3(c){return fn(c,0)}const h3=ct({concat1d_:l3});function f3(c,e){return fn(c,e)}const c3=ct({concat2d_:f3});function d3(c,e){return fn(c,e)}const p3=ct({concat3d_:d3});function v3(c,e){return fn(c,e)}const m3=ct({concat4d_:v3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3(c,e,f,y,S="NHWC",C=[1,1],o){const x=st(c,"x","conv2d","float32"),t=st(e,"filter","conv2d","float32");let s=x,l=!1;x.rank===3&&(l=!0,s=Mt(x,[1,x.shape[0],x.shape[1],x.shape[2]])),it(s.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${s.rank}.`),it(t.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${t.rank}.`),fs("conv2d",y,o);const a=S==="NHWC"?s.shape[3]:s.shape[1];it(a===t.shape[2],()=>`Error in conv2d: depth of input (${a}) must match input depth for filter ${t.shape[2]}.`),it(On(f,C),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${f} and dilations '${C}'`),it(or(C),()=>"Error in conv2D: Dilated rates should be larger than 0."),it(or(f),()=>"Error in conv2D: Strides should be larger than 0.");const r={x:s,filter:t},i={strides:f,pad:y,dataFormat:S,dilations:C,dimRoundingMode:o},n=pt.runKernel(tu,r,i);return l?Mt(n,[n.shape[1],n.shape[2],n.shape[3]]):n}const ju=ct({conv2d_:g3});function x3(c,e,f,y,S="NWC",C=1,o){const x=st(c,"x","conv1d"),t=st(e,"filter","conv1d");let s=x,l=!1;x.rank===2&&(l=!0,s=Mt(x,[1,x.shape[0],x.shape[1]])),it(s.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${s.rank}.`),it(t.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${t.rank}.`),fs("conv1d",y,o),it(s.shape[2]===t.shape[1],()=>`Error in conv1d: depth of input (${s.shape[2]}) must match input depth for filter ${t.shape[1]}.`),it(On(f,C),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${f} and dilation '${C}'`),it(or(C),()=>"Error in conv1D: Dilated rates should be larger than 0."),it(or(f),()=>"Error in conv1D: Stride should be larger than 0."),it(S==="NWC",()=>`Error in conv1d: got dataFormat of ${S} but only NWC is currently supported.`);const a=Mt(t,[1,t.shape[0],t.shape[1],t.shape[2]]),r=Mt(s,[s.shape[0],1,s.shape[1],s.shape[2]]),d=ju(r,a,[1,f],y,"NHWC",[1,C],o);return l?Mt(d,[d.shape[2],d.shape[3]]):Mt(d,[d.shape[0],d.shape[2],d.shape[3]])}const y3=ct({conv1d_:x3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3(c,e,f,y,S,C="NHWC",o){it(c.length===e.rank,()=>`Length of inShape (${c.length}) and rank of dy (${e.rank}) must match`);let x=c,t=e,s=!1;e.rank===3&&(s=!0,t=Mt(e,[1,e.shape[0],e.shape[1],e.shape[2]]),x=[1,c[0],c[1],c[2]]),it(x.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${x.length}.`),it(t.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${t.rank}`),it(f.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${f.rank}`);const l=C==="NHWC"?x[3]:x[1],a=C==="NHWC"?t.shape[3]:t.shape[1];it(l===f.shape[2],()=>`Error in conv2dDerInput: depth of input (${l}) must match input depth for filter ${f.shape[2]}.`),it(a===f.shape[3],()=>`Error in conv2dDerInput: depth of output (${a}) must match output depth for filter ${f.shape[3]}.`),fs("conv2dDerInput",S,o);const r={dy:t,filter:f},i={strides:y,pad:S,dataFormat:C,dimRoundingMode:o,inputShape:x},n=pt.runKernel(eu,r,i);return s?Mt(n,[n.shape[1],n.shape[2],n.shape[3]]):n}const lm=ct({conv2DBackpropInput_:T3});function S3(c,e,f,y,S,C){const o=st(c,"x","conv2dTranspose"),x=st(e,"filter","conv2dTranspose");return lm(f,o,x,y,S,"NHWC",C)}const C3=ct({conv2dTranspose_:S3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3(c,e,f,y,S="NDHWC",C=[1,1,1]){const o=st(c,"x","conv3d"),x=st(e,"filter","conv3d");let t=o,s=!1;o.rank===4&&(s=!0,t=Mt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),it(t.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${t.rank}.`),it(x.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${x.rank}.`),it(t.shape[4]===x.shape[3],()=>`Error in conv3d: depth of input (${t.shape[4]}) must match input depth for filter ${x.shape[3]}.`),it(On(f,C),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${f} and dilations '${C}'`),it(S==="NDHWC",()=>`Error in conv3d: got dataFormat of ${S} but only NDHWC is currently supported.`),it(or(C),()=>"Error in conv3D: Dilated rates should be larger than 0."),it(or(f),()=>"Error in conv3D: Strides should be larger than 0.");const l={x:t,filter:x},a={strides:f,pad:y,dataFormat:S,dilations:C},r=pt.runKernel(nu,l,a);return s?Mt(r,[r.shape[1],r.shape[2],r.shape[3],r.shape[4]]):r}const w3=ct({conv3d_:E3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3(c,e,f,y,S){it(c.length===e.rank,()=>`Length of inShape (${c.length}) and rank of dy (${e.rank}) must match`);let C=c,o=e,x=!1;e.rank===4&&(x=!0,o=Mt(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),C=[1,c[0],c[1],c[2],c[3]]);const t=C[4],s=o.shape[4];it(C.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${C.length}.`),it(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),it(f.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${f.rank}`),it(t===f.shape[3],()=>`Error in conv3dDerInput: depth of input (${t}) must match input depth for filter ${f.shape[3]}.`),it(s===f.shape[4],()=>`Error in conv3dDerInput: depth of output (${s}) must match output depth for filter ${f.shape[4]}.`);const l={dy:o,filter:f},a={pad:S,strides:y,inputShape:C},r=pt.runKernel(su,l,a);return x?Mt(r,[r.shape[1],r.shape[2],r.shape[3],r.shape[4]]):r}const A3=ct({conv3DBackpropInput_:b3});function R3(c,e,f,y,S){const C=st(c,"x","conv3dTranspose"),o=st(e,"filter","conv3dTranspose");return A3(f,C,o,y,S)}const I3=ct({conv3dTranspose_:R3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3(c){const f={x:st(c,"x","cos","float32")};return pt.runKernel(Zh,f)}const F3=ct({cos_:P3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3(c){const f={x:st(c,"x","cosh","float32")};return pt.runKernel(Qh,f)}const N3=ct({cosh_:M3});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3(c,e=0,f=!1,y=!1){const C={x:st(c,"x","cumprod")},o={axis:e,exclusive:f,reverse:y};return pt.runKernel(iu,C,o)}const D3=ct({cumprod_:O3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3(c,e=0,f=!1,y=!1){const C={x:st(c,"x","cumsum")},o={axis:e,exclusive:f,reverse:y};return pt.runKernel(ru,C,o)}const B3=ct({cumsum_:L3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3(c,e,f,y=!1){const S=st(c,"x","denseBincount"),C=st(e,"weights","denseBincount");it(S.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${S.dtype}`),it(S.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${S.rank}.`),it(f>=0,()=>`size must be non-negative, but got ${f}.`),it(C.size===S.size||C.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${S.shape}, weights shape: ${C.shape}.`);const o={x:S,weights:C},x={size:f,binaryOutput:y};return pt.runKernel(Jh,o,x)}const G3=ct({denseBincount_:$3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U3(c,e,f="NHWC"){const y=st(c,"x","depthToSpace","float32"),S=f==="NHWC"?y.shape[1]:y.shape[2],C=f==="NHWC"?y.shape[2]:y.shape[3],o=f==="NHWC"?y.shape[3]:y.shape[1];it(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),it(S*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${S} and ${e}  for depthToSpace with input shape
    ${y.shape}`),it(C*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${C} and ${e} for depthToSpace with input shape
        ${y.shape}`),it(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${y.shape}`);const x={x:y},t={blockSize:e,dataFormat:f};return pt.runKernel(ou,x,t)}const V3=ct({depthToSpace_:U3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z3(c,e,f,y,S="NHWC",C=[1,1],o){const x=st(c,"x","depthwiseConv2d","float32"),t=st(e,"filter","depthwiseConv2d","float32");let s=x,l=!1;x.rank===3&&(l=!0,s=Mt(x,[1,x.shape[0],x.shape[1],x.shape[2]])),it(s.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${s.rank}.`),it(t.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${t.rank}.`);const a=S==="NHWC"?s.shape[3]:s.shape[1];it(a===t.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${a}) must match the inChannels dimension in filter ${t.shape[2]}.`),fs("depthwiseConv2d",y,o);const r={x:s,filter:t},i={strides:f,pad:y,dataFormat:S,dilations:C,dimRoundingMode:o},n=pt.runKernel(uu,r,i);return l?Mt(n,[n.shape[1],n.shape[2],n.shape[3]]):n}const Tc=ct({depthwiseConv2d_:z3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k3(c){const f={x:st(c,"x","diag")};return pt.runKernel(qh,f)}const W3=ct({diag_:k3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3(c,e,f,y,S=[1,1],C="NHWC"){const o=st(c,"x","dilation2d"),x=st(e,"filter","dilation2d");it(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),it(x.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${x.rank}.`),it(C==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${C}`);let t=o,s=!1;o.rank===3&&(t=Mt(o,[1,o.shape[0],o.shape[1],o.shape[2]]),s=!0),it(t.shape[3]===x.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${t.shape[3]} vs ${x.shape[2]}`);const l={x:t,filter:x},a={strides:f,pad:y,dilations:S},r=pt.runKernel(lu,l,a);return s?Mt(r,[r.shape[1],r.shape[2],r.shape[3]]):r}const H3=ct({dilation2d_:X3});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Po(c,e){const f=c.length,y=[];for(let S=0;S<f;S++){const C=f-1-S,o=c[C]||1;(e[e.length-1-S]||1)>1&&o===1&&y.unshift(C)}return y}function hm(c,e){const f=[];for(let y=0;y<e.length;y++){const S=c[c.length-y-1],C=e.length-y-1,o=e[C];(S==null||S===1&&o>1)&&f.unshift(C)}return f}function Te(c,e){const f=Math.max(c.length,e.length),y=new Array(f);for(let S=0;S<f;S++){let C=c[c.length-S-1];C==null&&(C=1);let o=e[e.length-S-1];if(o==null&&(o=1),C===1)y[f-S-1]=o;else if(o===1)y[f-S-1]=C;else if(C!==o){const x=`Operands could not be broadcast together with shapes ${c} and ${e}.`;throw Error(x)}else y[f-S-1]=C}return y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y3(c,e){let f=st(c,"a","equal","string_or_numeric"),y=st(e,"b","equal","string_or_numeric");[f,y]=qe(f,y),Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(sf,S)}const fm=ct({equal_:Y3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3(c,e,f){const y=st(e,"a","where"),S=st(f,"b","where"),C=st(c,"condition","where","bool"),o=Te(Te(C.shape,y.shape),S.shape),x=Ca(C,o),t=Ca(y,o),s=Ca(S,o),l={condition:x,t,e:s};return pt.runKernel(Hf,l)}const Ci=ct({where_:K3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3(c){const f={x:st(c,"x","zerosLike")};return pt.runKernel(pc,f)}const jn=ct({zerosLike_:j3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3(c,e){let f=st(c,"a","div"),y=st(e,"b","div");[f,y]=qe(f,y);const S=ye(f,y),C=jn(S),o=fm(y,C);return Ci(o,C,S)}const Q3=ct({divNoNan_:Z3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3(c,e){const f=st(c,"t1","dot"),y=st(e,"t2","dot");it((f.rank===1||f.rank===2)&&(y.rank===1||y.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${f.rank} and ${y.rank}.`);const S=f.rank===1?f.size:f.shape[1],C=y.rank===1?y.size:y.shape[0];if(it(S===C,()=>`Error in dot: inner dimensions of inputs must match, but got ${S} and ${C}.`),f.rank===1&&y.rank===1){const o=Mt(f,[1,-1]),x=Mt(y,[-1,1]),t=Oe(o,x);return Mt(t,[])}else if(f.rank===1&&y.rank===2){const o=Mt(f,[1,-1]),x=Mt(y,[y.shape[0],y.shape[1]]),t=Oe(o,x);return Mt(t,[t.size])}else if(f.rank===2&&y.rank===1){const o=Mt(y,[-1,1]),x=Oe(f,o);return Mt(x,[x.size])}else{const o=Mt(y,[y.shape[0],y.shape[1]]);return Oe(f,o)}}const q3=ct({dot_:J3});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3(c,...e){const f=e.map((S,C)=>st(S,`tensors${C}`,"einsum")),y={equation:c};return pt.runKernel(hv,f,y)}const Dr=ct({einsum_:_3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tT(c){const f={x:st(c,"x","elu","float32")};return pt.runKernel(tf,f)}const cm=ct({elu_:tT});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(c,e){const f=st(c,"x","ensureShape","string_or_numeric");if(!N2(f.shape,e))throw new Error(`EnsureShape: Shape of tensor ${f.shape} is not compatible with expected shape ${e}`);return c}const nT=ct({ensureShape_:eT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sT(c){let e=st(c,"x","erf");it(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=We(e,"float32"));const f={x:e};return pt.runKernel(nf,f)}const iT=ct({erf_:sT});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sc(c,e){for(let f=0;f<c.length;++f)if(c[c.length-f-1]!==e-1-f)return!1;return!0}function dm(c,e,f){const y=c.length+e.length,S=[];let C=0,o=0;for(let x=0;x<y;x++)f.indexOf(x)===-1?S.push(c[C++]):S.push(e[o++]);return S}function xn(c,e){const f=[],y=c.length;for(let C=0;C<y;C++)e.indexOf(C)===-1&&f.push(c[C]);const S=e.map(C=>c[C]);return[f,S]}function sn(c,e){const f=e.map(y=>1);return dm(c,f,e)}function rn(c,e,f){it(Sc(e,f),()=>`${c} supports only inner-most axes for now. Got axes ${e} and rank-${f} input.`)}function Dn(c,e){if(Sc(c,e))return null;const f=[];for(let y=0;y<e;++y)c.indexOf(y)===-1&&f.push(y);return c.forEach(y=>f.push(y)),f}function Ka(c){return c.map((e,f)=>[f,e]).sort((e,f)=>e[1]-f[1]).map(e=>e[0])}function dn(c,e){const f=[];for(let y=e-c;y<e;++y)f.push(y);return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rT(c,e=null,f=!1){const S={x:st(c,"x","max")},C={reductionIndices:e,keepDims:f};return pt.runKernel(gu,S,C)}const zr=ct({max_:rT});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aT(c,e=null,f=!1){const S={x:st(c,"x","min")},C={axis:e,keepDims:f};return pt.runKernel(Tu,S,C)}const _l=ct({min_:aT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oT(c,e){let f=st(c,"base","pow"),y=st(e,"exp","pow");[f,y]=qe(f,y);const S={a:f,b:y};return pt.runKernel(Lf,S)}const Na=ct({pow_:oT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ce(c,e){if((ls(c)&&e!=="string"||Array.isArray(c))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ls(c)&&!(c instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Mi(c,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uT(c){const f={x:st(c,"x","sqrt","float32")};return pt.runKernel(_f,f)}const js=ct({sqrt_:uT});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lT(c){const e=st(c,"x","square"),f={};return pt.runKernel("Square",{x:e},f)}const Ts=ct({square_:lT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hT(c,e=null,f=!1){let y=st(c,"x","sum");y.dtype==="bool"&&(y=We(y,"int32"));const S={x:y},C={axis:e,keepDims:f};return pt.runKernel(Bu,S,C)}const Ve=ct({sum_:hT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fT(c,e="euclidean",f=null,y=!1){c=st(c,"x","norm");const S=pm(c,e,f);let C=S.shape;if(y){const o=Qe(f,c.shape);C=sn(S.shape,o)}return Mt(S,C)}function pm(c,e,f=null){if(c.rank===0)return Xn(c);if(c.rank!==1&&f===null)return pm(Mt(c,[-1]),e,f);if(c.rank===1||typeof f=="number"||Array.isArray(f)&&f.length===1){if(e===1)return Ve(Xn(c),f);if(e===1/0)return zr(Xn(c),f);if(e===-1/0)return _l(Xn(c),f);if(e==="euclidean"||e===2)return js(Ve(Na(Xn(c),Ce(2,"int32")),f));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(f)&&f.length===2){if(e===1)return zr(Ve(Xn(c),f[0]),f[1]-1);if(e===1/0)return zr(Ve(Xn(c),f[1]),f[0]);if(e===-1/0)return _l(Ve(Xn(c),f[1]),f[0]);if(e==="fro"||e==="euclidean")return js(Ve(Ts(c),f));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${f}`)}const Zu=ct({norm_:fT});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cT(c,e=null,f=!1){return Zu(c,"euclidean",e,f)}const dT=ct({euclideanNorm_:cT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pT(c){const f={x:st(c,"x","exp")};return pt.runKernel(rf,f)}const Zs=ct({exp_:pT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vT(c,e=0){const f=st(c,"x","expandDims","string_or_numeric");it(e<=f.rank,()=>"Axis must be <= rank of the tensor");const y={input:f},S={dim:e};return pt.runKernel(af,y,S)}const is=ct({expandDims_:vT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mT(c){const f={x:st(c,"x","expm1")};return pt.runKernel(of,f)}const gT=ct({expm1_:mT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xT(c,e){const f=st(c,"x","tile","string_or_numeric");it(f.rank===e.length,()=>`Error in transpose: rank of input ${f.rank} must match length of reps ${e}.`);const y={x:f},S={reps:e};return pt.runKernel(Wa,y,S)}const Ea=ct({tile_:xT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yT(c,e,f,y="float32"){e==null&&(e=c);const S=Ze([c,e],y),C=c<=e?c:e;for(let x=0;x<C;++x)S.set(1,x,x);const o=Mt(S.toTensor(),[c,e]);if(f==null)return o;if(f.length===1)return Ea(is(o,0),[f[0],1,1]);if(f.length===2)return Ea(is(is(o,0),0),[f[0],f[1],1,1]);if(f.length===3)return Ea(is(is(is(o,0),0),0),[f[0],f[1],f[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${f.length}D.`)}const vm=ct({eye_:yT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TT(c){const f={x:st(c,"x","floor","float32")};return pt.runKernel(lf,f)}const mm=ct({floor_:TT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ST(c,e,f=0,y=0){const S=st(c,"x","gather"),C=st(e,"indices","gather","int32"),o={x:S,indices:C},x={axis:f,batchDims:y};return pt.runKernel(ff,o,x)}const gm=ct({gather_:ST});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CT(c,e){let f=st(c,"a","greater","string_or_numeric"),y=st(e,"b","greater","string_or_numeric");[f,y]=qe(f,y),Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(cf,S)}const Qu=ct({greater_:CT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ET(c,e){let f=st(c,"a","greaterEqual","string_or_numeric"),y=st(e,"b","greaterEqual","string_or_numeric");[f,y]=qe(f,y),Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(df,S)}const xm=ct({greaterEqual_:ET});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wT(c){const f={input:st(c,"input","imag")};return pt.runKernel(dv,f)}const Ju=ct({imag_:wT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bT(c){const f={x:st(c,"x","isFinite")};return pt.runKernel(pf,f)}const AT=ct({isFinite_:bT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RT(c){const f={x:st(c,"x","isInf")};return pt.runKernel(vf,f)}const IT=ct({isInf_:RT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PT(c){const f={x:st(c,"x","isNaN")};return pt.runKernel(mf,f)}const FT=ct({isNaN_:PT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MT(c,e=.2){const y={x:st(c,"x","leakyRelu")},S={alpha:e};return pt.runKernel(pu,y,S)}const ym=ct({leakyRelu_:MT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NT(c,e){let f=st(c,"a","less","string_or_numeric"),y=st(e,"b","less","string_or_numeric");[f,y]=qe(f,y),Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(gf,S)}const th=ct({less_:NT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OT(c,e){let f=st(c,"a","lessEqual","string_or_numeric"),y=st(e,"b","lessEqual","string_or_numeric");[f,y]=qe(f,y),Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(xf,S)}const Cc=ct({lessEqual_:OT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DT(c,e,f){if(f<=0)throw new Error("The number of values should be positive.");const y={start:c,stop:e,num:f};return pt.runKernel(vu,{},y)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LT(c,e=5,f=1,y=1,S=.5){const C=st(c,"x","localResponseNormalization");it(C.rank===4||C.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${C.rank}.`),it(kr(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=C,x=!1;C.rank===3&&(x=!0,o=Mt(C,[1,C.shape[0],C.shape[1],C.shape[2]]));const t={x:o},s={depthRadius:e,bias:f,alpha:y,beta:S},l=pt.runKernel(mu,t,s);return x?Mt(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const BT=ct({localResponseNormalization_:LT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $T(c){const f={x:st(c,"x","log","float32")};return pt.runKernel(yf,f)}const Oa=ct({log_:$T});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GT(c){const f={x:st(c,"x","log1p")};return pt.runKernel(Tf,f)}const Tm=ct({log1p_:GT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UT(c,e){it(Bl(c),()=>"The f passed in variableGrads(f) must be a function"),it(e==null||Array.isArray(e)&&e.every(s=>s instanceof Ao),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const f=e!=null;if(!f){e=[];for(const s in pt.registeredVariables)e.push(pt.registeredVariables[s])}const y=f?e.filter(s=>!s.trainable):null,S=e.length;e=e.filter(s=>s.trainable),it(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${S} variables is trainable.`);const C=!0,{value:o,grads:x}=pt.gradients(c,e,null,C);it(x.some(s=>s!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),it(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const t={};return e.forEach((s,l)=>{x[l]!=null&&(t[s.name]=x[l])}),y!=null&&y.forEach(s=>t[s.name]=null),{value:o,grads:t}}function Qs(c){return pt.customGrad(c)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VT(c){const f={x:st(c,"x","neg")};return pt.runKernel(Mf,f)}const Fs=ct({neg_:VT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zT(c){const f={x:st(c,"x","softplus")};return pt.runKernel(qf,f)}const Sm=ct({softplus_:zT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kT(c){const e=st(c,"x","logSigmoid");return Qs(y=>({value:Fs(Sm(Fs(y))),gradFunc:o=>Wt(o,nr(Fs(y)))}))(e)}const WT=ct({logSigmoid_:kT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XT(c,e){let f=st(c,"a","sub"),y=st(e,"b","sub");[f,y]=qe(f,y);const S={a:f,b:y};return pt.runKernel(lc,S)}const me=ct({sub_:XT});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HT(c,e=-1){const f=st(c,"logits","logSoftmax");if(e===-1&&(e=f.rank-1),e!==f.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${f.rank} and axis was ${e}`);return Qs((S,C)=>{const x=zr(S,e,!0),t=me(S,x),s=me(We(t,"float32"),Oa(Ve(Zs(t),e,!0)));return C([s]),{value:s,gradFunc:(a,r)=>{const[i]=r,n=!0,h=Zs(i);return me(a,Wt(Ve(a,e,n),h))}}})(f)}const YT=ct({logSoftmax_:HT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KT(c,e=null,f=!1){const y=st(c,"x","logSumExp"),S=Qe(e,y.shape),C=zr(y,S,!0),o=me(y,C),x=Zs(o),t=Ve(x,S),s=Oa(t),l=ne(Mt(C,s.shape),s);if(f){const a=sn(l.shape,S);return Mt(l,a)}return l}const Cm=ct({logSumExp_:KT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jT(c,e){const f=st(c,"a","logicalAnd","bool"),y=st(e,"b","logicalAnd","bool");Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(Sf,S)}const Fo=ct({logicalAnd_:jT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZT(c){const f={x:st(c,"x","logicalNot","bool")};return pt.runKernel(Cf,f)}const Em=ct({logicalNot_:ZT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QT(c,e){const f=st(c,"a","logicalOr","bool"),y=st(e,"b","logicalOr","bool");Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(Ef,S)}const wm=ct({logicalOr_:QT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JT(c,e){const f=st(c,"a","logicalXor","bool"),y=st(e,"b","logicalXor","bool");return Te(f.shape,y.shape),Fo(wm(c,e),Em(Fo(c,e)))}const qT=ct({logicalXor_:JT});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ro=2147483648;function _T(c,e,f="left"){const y=st(c,"sortedSequence","searchSorted"),S=st(e,"values","searchSorted"),C=y.shape[y.shape.length-1],o=S.shape[S.shape.length-1],x=Mt(y,[-1,C]),t=Mt(S,[-1,o]);if(x.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(x.shape[0]!==t.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(bt(t.shape)>=ro)throw new Error(`values tensor size must less than ${ro}`);if(x.shape[1]>=ro)throw new Error(`trailing dim_size must less than ${ro} for int32 output type, was ${x.shape[1]}`);const s={sortedSequence:x,values:t},l={side:f};return pt.runKernel(Lu,s,l)}const Ec=ct({searchSorted_:_T});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4(c,e){return Ec(c,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e4(c,e,f,y,S){const C=st(c,"x","maxPool"),o=1;let x=C,t=!1;C.rank===3&&(t=!0,x=Mt(C,[1,C.shape[0],C.shape[1],C.shape[2]])),it(x.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${x.rank}.`),it(On(f,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${f} and dilations '${o}'`),fs("maxPool",y,S);const s={x},l={filterSize:e,strides:f,pad:y,dimRoundingMode:S},a=pt.runKernel(xu,s,l);return t?Mt(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const bm=ct({maxPool_:e4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n4(c,e=[1,1,1],f,y,S,C="NDHWC"){const o=st(c,"x","maxPool3d");let x=o,t=!1;o.rank===4&&(t=!0,x=Mt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),it(x.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${x.rank}.`),it(C==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${C}`),fs("maxPool3d",y,S);const s={x},l={filterSize:e,strides:f,pad:y,dimRoundingMode:S,dataFormat:C},a=pt.runKernel(Af,s,l);return t?Mt(a,[a.shape[1],a.shape[2],a.shape[3],a.shape[4]]):a}const s4=ct({maxPool3d_:n4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4(c,e,f,y,S=!1){const o={x:st(c,"x","maxPoolWithArgmax")},x={filterSize:e,strides:f,pad:y,includeBatchInIndex:S},t=pt.runKernel(Rf,o,x);return{result:t[0],indexes:t[1]}}const r4=ct({maxPoolWithArgmax_:i4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a4(c,e){let f=st(c,"a","maximum"),y=st(e,"b","maximum");[f,y]=qe(f,y),f.dtype==="bool"&&(f=We(f,"int32"),y=We(y,"int32")),Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(bf,S)}const Am=ct({maximum_:a4});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4(c,e=null,f=!1){const S={x:st(c,"x","mean")},C={axis:e,keepDims:f};return pt.runKernel(yu,S,C)}const Mo=ct({mean_:o4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ur(c,e="float32"){if(Zn(c),e==="complex64"){const y=ur(c,"float32"),S=ur(c,"float32");return Ai(y,S)}const f=bi(bt(c),e);return pt.makeTensor(f,c,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tr(c,e="float32"){if(Zn(c),e==="complex64"){const y=tr(c,"float32"),S=ur(c,"float32");return Ai(y,S)}const f=qp(bt(c),e);return pt.makeTensor(f,c,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u4(c,e,{indexing:f="xy"}={}){if(f!=="xy"&&f!=="ij")throw new TypeError(`${f} is not a valid third argument to meshgrid`);if(c===void 0)return[];let y=st(c,"x","meshgrid",c instanceof Je?c.dtype:"float32");if(e===void 0)return[y];let S=st(e,"y","meshgrid",e instanceof Je?e.dtype:"float32");const C=bt(y.shape),o=bt(S.shape);return f==="xy"?(y=Mt(y,[1,-1]),S=Mt(S,[-1,1]),[Oe(tr([o,1],y.dtype),y),Oe(S,tr([1,C],S.dtype))]):(y=Mt(y,[-1,1]),S=Mt(S,[1,-1]),[Oe(y,tr([1,o],y.dtype)),Oe(tr([C,1],S.dtype),S)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l4(c,e){let f=st(c,"a","minimum"),y=st(e,"b","minimum");[f,y]=qe(f,y),f.dtype==="bool"&&(f=We(f,"int32"),y=We(y,"int32")),Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(If,S)}const No=ct({minimum_:l4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h4(c,e,f){it(f==="reflect"||f==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${f}.`);const y=st(c,"x","mirrorPad");if(y.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");it(e.length===y.rank,()=>`Padding doesn't match input. Must be ${y.rank}. Got ${e.length}.`);const S=f==="reflect"?1:0;for(let x=0;x<y.rank;x++)it(e[x].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),it(e[x][0]>=0&&e[x][0]<=y.shape[x]-S&&e[x][1]>=0&&e[x][1]<=y.shape[x]-S,()=>`Padding in dimension ${x} cannot be greater than or equal to ${y.shape[x]-S} or less than 0 for input of shape ${y.shape}`);const C={paddings:e,mode:f},o={x:y};return pt.runKernel(Su,o,C)}const f4=ct({mirrorPad_:h4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c4(c,e){let f=st(c,"a","mod"),y=st(e,"b","mod");[f,y]=qe(f,y);const S={a:f,b:y};return pt.runKernel(Pf,S)}const d4=ct({mod_:c4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p4(c,e=null,f=!1){c=st(c,"x","moments");const y=Qe(e,c.shape),S=Mo(c,y,f);let C=S.shape;f||(C=sn(S.shape,y));const o=Ts(me(We(c,"float32"),Mt(S,C))),x=Mo(o,y,f);return{mean:S,variance:x}}const v4=ct({moments_:p4});function m4(c,e,f,y){const S=st(e,"data","multiRNNCell"),C=Ro(f,"c","multiRNNCell"),o=Ro(y,"h","multiRNNCell");let x=S;const t=[];for(let a=0;a<c.length;a++){const r=c[a](x,C[a],o[a]);t.push(r[0]),t.push(r[1]),x=r[1]}const s=[],l=[];for(let a=0;a<t.length;a+=2)s.push(t[a]),l.push(t[a+1]);return[s,l]}const g4=ct({multiRNNCell_:m4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x4(c,e,f,y=!1){const S=st(c,"logits","multinomial"),C=S.size,o=S.rank;if(C<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${C}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);f=f||Math.random();const t={logits:o===1?Mt(S,[1,-1]):S},s={numSamples:e,seed:f,normalized:y},l=pt.runKernel(Cu,t,s);return o===1?Mt(l,[l.size]):l}const y4=ct({multinomial_:x4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T4(c,e){let f=st(c,"a","notEqual","string_or_numeric"),y=st(e,"b","notEqual","string_or_numeric");[f,y]=qe(f,y),Te(f.shape,y.shape);const S={a:f,b:y};return pt.runKernel(Nf,S)}const Rm=ct({notEqual_:T4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4(c,e,f=1,y=0,S="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:st(c,"indices","oneHot","int32")},x={dtype:S,depth:e,onValue:f,offValue:y};return pt.runKernel(Au,o,x)}const C4=ct({oneHot_:S4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E4(c){const f={x:st(c,"x","onesLike")};return pt.runKernel(Of,f)}const w4=ct({onesLike_:E4});function b4(c,e){const f=st(c,"v1","outerProduct"),y=st(e,"v2","outerProduct");it(f.rank===1&&y.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${f.rank} and ${y.rank}.`);const S=Mt(f,[-1,1]),C=Mt(y,[1,-1]);return Oe(S,C)}const A4=ct({outerProduct_:b4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4(c,e,f=0){const y=st(c,"x","pad");if(y.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const S={paddings:e,constantValue:f},C={x:y};return pt.runKernel(Ru,C,S)}const ja=ct({pad_:R4});function I4(c,e,f=0){return it(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),ja(c,[e],f)}const P4=ct({pad1d_:I4});function F4(c,e,f=0){return it(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ja(c,e,f)}const M4=ct({pad2d_:F4});function N4(c,e,f=0){return it(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ja(c,e,f)}const O4=ct({pad3d_:N4});function D4(c,e,f=0){return it(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ja(c,e,f)}const L4=ct({pad4d_:D4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4(c,e,f){const y=st(c,"x","spaceToBatchND");it(y.rank>=1+e.length,()=>`input rank ${y.rank} should be > than [blockShape] ${e.length}`),it(f.length===e.length,()=>`paddings.shape[0] ${f.length} must be equal to [blockShape] ${e.length}`),it(y.shape.reduce((o,x,t)=>t>0&&t<=e.length?o&&(x+f[t-1][0]+f[t-1][1])%e[t-1]===0:o,!0),()=>`input spatial dimensions ${y.shape.slice(1)} with paddings ${f.toString()} must be divisible by blockShapes ${e.toString()}`);const S={x:y},C={blockShape:e,paddings:f};return pt.runKernel(tc,S,C)}const Im=ct({spaceToBatchND_:B4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $4(c,e,f,y,S,C,o){S==null&&(S=[1,1]),C==null&&(C=1),y===0&&(y="valid");const x=st(c,"x","maxPool");let t=x,s=!1;x.rank===3&&(s=!0,t=Mt(x,[1,x.shape[0],x.shape[1],x.shape[2]])),it(On(C,S),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${C} and dilations '${S}'`);const l=hs(t.shape,e,C,S,y),a=[l.dilationHeight,l.dilationWidth];let r;y==="same"?r=U4([l.filterHeight,l.filterWidth],a):r=[[0,0],[0,0]];const i=a[0]===1&&a[1]===1,[n,h]=G4([l.inHeight,l.inWidth],a,r),d=i?y:"valid",u=i?t:Im(t,a,n),v=(f==="avg"?()=>rm(u,e,C,d,o):()=>bm(u,e,C,d,o))(),m=i?v:am(v,a,h);return s?Mt(m,[m.shape[1],m.shape[2],m.shape[3]]):m}function G4(c,e,f){const y=f.map(l=>l[0]),S=f.map(l=>l[1]),C=c.concat(y,S),o=e.map((l,a)=>(l-C[a]%l)%l),x=S.map((l,a)=>l+o[a]),t=e.map((l,a)=>[y[a],x[a]]),s=e.map((l,a)=>[0,o[a]]);return[t,s]}function U4(c,e){const y=c.map((o,x)=>o+(o-1)*(e[x]-1)).map(o=>o-1),S=y.map(o=>Math.floor(o/2)),C=y.map((o,x)=>o-S[x]);return y.map((o,x)=>[S[x],C[x]])}const V4=ct({pool_:$4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z4(c,e){const f=st(c,"x","prelu"),y=st(e,"alpha","prelu"),S={x:f,alpha:y};return pt.runKernel(Iu,S)}const Pm=ct({prelu_:z4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k4(c,e=null,f=!1){let y=st(c,"x","prod");y.dtype==="bool"&&(y=We(y,"int32"));const S={x:y},C={axis:e,keepDims:f};return pt.runKernel(Pu,S,C)}const W4=ct({prod_:k4});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X4(c,e,f,y){const S=c.map((l,a)=>st(l,`tensors${a}`,"raggedGather","int32")),C=st(e,"paramsDenseValues","raggedGather"),o=st(f,"indices","raggedGather","int32"),x={paramsNestedSplits:S,paramsDenseValues:C,indices:o},t={outputRaggedRank:y},s=pt.runKernel(mv,x,t);return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}const H4=ct({raggedGather_:X4});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y4(c,e,f){const y=st(c,"starts","raggedRange"),S=st(e,"limits","raggedRange",y.dtype),C=st(f,"deltas","raggedRange",y.dtype),o={starts:y,limits:S,deltas:C},x=pt.runKernel(gv,o);return{rtNestedSplits:x[0],rtDenseValues:x[1]}}const K4=ct({raggedRange_:Y4});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j4(c,e,f,y,S){const C=st(c,"shape","raggedTensorToTensor","int32"),o=st(e,"values","raggedTensorToTensor"),x=st(f,"defaultValue","raggedTensorToTensor",o.dtype),t=y.map((a,r)=>st(a,`tensors${r}`,"raggedTensorToTensor","int32")),s={shape:C,values:o,defaultValue:x,rowPartitionTensors:t},l={rowPartitionTypes:S};return pt.runKernel(xv,s,l)}const Z4=ct({raggedTensorToTensor_:j4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q4(c,e,f){Zn(c);const y=bt(c);let S=null;if(f==null||f==="float32")S=new Float32Array(y);else if(f==="int32")S=new Int32Array(y);else if(f==="bool")S=new Uint8Array(y);else throw new Error(`Unknown data type ${f}`);for(let C=0;C<y;C++)S[C]=e();return pt.makeTensor(S,c,f)}const J4=ct({rand_:Q4});var wc={exports:{}};wc.exports;(function(c){(function(e,f,y){function S(t){var s=this,l=x();s.next=function(){var a=2091639*s.s0+s.c*23283064365386963e-26;return s.s0=s.s1,s.s1=s.s2,s.s2=a-(s.c=a|0)},s.c=1,s.s0=l(" "),s.s1=l(" "),s.s2=l(" "),s.s0-=l(t),s.s0<0&&(s.s0+=1),s.s1-=l(t),s.s1<0&&(s.s1+=1),s.s2-=l(t),s.s2<0&&(s.s2+=1),l=null}function C(t,s){return s.c=t.c,s.s0=t.s0,s.s1=t.s1,s.s2=t.s2,s}function o(t,s){var l=new S(t),a=s&&s.state,r=l.next;return r.int32=function(){return l.next()*4294967296|0},r.double=function(){return r()+(r()*2097152|0)*11102230246251565e-32},r.quick=r,a&&(typeof a=="object"&&C(a,l),r.state=function(){return C(l,{})}),r}function x(){var t=4022871197,s=function(l){l=String(l);for(var a=0;a<l.length;a++){t+=l.charCodeAt(a);var r=.02519603282416938*t;t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=r*4294967296}return(t>>>0)*23283064365386963e-26};return s}f&&f.exports?f.exports=o:y&&y.amd?y(function(){return o}):this.alea=o})(Kn,c,!1)})(wc);var q4=wc.exports,bc={exports:{}};bc.exports;(function(c){(function(e,f,y){function S(x){var t=this,s="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var a=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^a^a>>>8},x===(x|0)?t.x=x:s+=x;for(var l=0;l<s.length+64;l++)t.x^=s.charCodeAt(l)|0,t.next()}function C(x,t){return t.x=x.x,t.y=x.y,t.z=x.z,t.w=x.w,t}function o(x,t){var s=new S(x),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(typeof l=="object"&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:y&&y.amd?y(function(){return o}):this.xor128=o})(Kn,c,!1)})(bc);var _4=bc.exports,Ac={exports:{}};Ac.exports;(function(c){(function(e,f,y){function S(x){var t=this,s="";t.next=function(){var a=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(a^a<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,x===(x|0)?t.x=x:s+=x;for(var l=0;l<s.length+64;l++)t.x^=s.charCodeAt(l)|0,l==s.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function C(x,t){return t.x=x.x,t.y=x.y,t.z=x.z,t.w=x.w,t.v=x.v,t.d=x.d,t}function o(x,t){var s=new S(x),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(typeof l=="object"&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:y&&y.amd?y(function(){return o}):this.xorwow=o})(Kn,c,!1)})(Ac);var tS=Ac.exports,Rc={exports:{}};Rc.exports;(function(c){(function(e,f,y){function S(x){var t=this;t.next=function(){var l=t.x,a=t.i,r,i;return r=l[a],r^=r>>>7,i=r^r<<24,r=l[a+1&7],i^=r^r>>>10,r=l[a+3&7],i^=r^r>>>3,r=l[a+4&7],i^=r^r<<7,r=l[a+7&7],r=r^r<<13,i^=r^r<<9,l[a]=i,t.i=a+1&7,i};function s(l,a){var r,i=[];if(a===(a|0))i[0]=a;else for(a=""+a,r=0;r<a.length;++r)i[r&7]=i[r&7]<<15^a.charCodeAt(r)+i[r+1&7]<<13;for(;i.length<8;)i.push(0);for(r=0;r<8&&i[r]===0;++r);for(r==8?i[7]=-1:i[r],l.x=i,l.i=0,r=256;r>0;--r)l.next()}s(t,x)}function C(x,t){return t.x=x.x.slice(),t.i=x.i,t}function o(x,t){x==null&&(x=+new Date);var s=new S(x),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(l.x&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:y&&y.amd?y(function(){return o}):this.xorshift7=o})(Kn,c,!1)})(Rc);var eS=Rc.exports,Ic={exports:{}};Ic.exports;(function(c){(function(e,f,y){function S(x){var t=this;t.next=function(){var l=t.w,a=t.X,r=t.i,i,n;return t.w=l=l+1640531527|0,n=a[r+34&127],i=a[r=r+1&127],n^=n<<13,i^=i<<17,n^=n>>>15,i^=i>>>12,n=a[r]=n^i,t.i=r,n+(l^l>>>16)|0};function s(l,a){var r,i,n,h,d,u=[],p=128;for(a===(a|0)?(i=a,a=null):(a=a+"\0",i=0,p=Math.max(p,a.length)),n=0,h=-32;h<p;++h)a&&(i^=a.charCodeAt((h+32)%a.length)),h===0&&(d=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,h>=0&&(d=d+1640531527|0,r=u[h&127]^=i+d,n=r==0?n+1:0);for(n>=128&&(u[(a&&a.length||0)&127]=-1),n=127,h=4*128;h>0;--h)i=u[n+34&127],r=u[n=n+1&127],i^=i<<13,r^=r<<17,i^=i>>>15,r^=r>>>12,u[n]=i^r;l.w=d,l.X=u,l.i=n}s(t,x)}function C(x,t){return t.i=x.i,t.w=x.w,t.X=x.X.slice(),t}function o(x,t){x==null&&(x=+new Date);var s=new S(x),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(l.X&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:y&&y.amd?y(function(){return o}):this.xor4096=o})(Kn,c,!1)})(Ic);var nS=Ic.exports,Pc={exports:{}};Pc.exports;(function(c){(function(e,f,y){function S(x){var t=this,s="";t.next=function(){var a=t.b,r=t.c,i=t.d,n=t.a;return a=a<<25^a>>>7^r,r=r-i|0,i=i<<24^i>>>8^n,n=n-a|0,t.b=a=a<<20^a>>>12^r,t.c=r=r-i|0,t.d=i<<16^r>>>16^n,t.a=n-a|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,x===Math.floor(x)?(t.a=x/4294967296|0,t.b=x|0):s+=x;for(var l=0;l<s.length+20;l++)t.b^=s.charCodeAt(l)|0,t.next()}function C(x,t){return t.a=x.a,t.b=x.b,t.c=x.c,t.d=x.d,t}function o(x,t){var s=new S(x),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(typeof l=="object"&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:y&&y.amd?y(function(){return o}):this.tychei=o})(Kn,c,!1)})(Pc);var sS=Pc.exports,Fm={exports:{}};const iS={},rS=Object.freeze(Object.defineProperty({__proto__:null,default:iS},Symbol.toStringTag,{value:"Module"})),gi=I2(rS);(function(c){(function(e,f,y){var S=256,C=6,o=52,x="random",t=y.pow(S,C),s=y.pow(2,o),l=s*2,a=S-1,r;function i(m,g,T){var w=[];g=g==!0?{entropy:!0}:g||{};var b=u(d(g.entropy?[m,v(f)]:m??p(),3),w),E=new n(w),A=function(){for(var R=E.g(C),I=t,P=0;R<s;)R=(R+P)*S,I*=S,P=E.g(1);for(;R>=l;)R/=2,I/=2,P>>>=1;return(R+P)/I};return A.int32=function(){return E.g(4)|0},A.quick=function(){return E.g(4)/4294967296},A.double=A,u(v(E.S),f),(g.pass||T||function(R,I,P,M){return M&&(M.S&&h(M,E),R.state=function(){return h(E,{})}),P?(y[x]=R,I):R})(A,b,"global"in g?g.global:this==y,g.state)}function n(m){var g,T=m.length,w=this,b=0,E=w.i=w.j=0,A=w.S=[];for(T||(m=[T++]);b<S;)A[b]=b++;for(b=0;b<S;b++)A[b]=A[E=a&E+m[b%T]+(g=A[b])],A[E]=g;(w.g=function(R){for(var I,P=0,M=w.i,F=w.j,O=w.S;R--;)I=O[M=a&M+1],P=P*S+O[a&(O[M]=O[F=a&F+I])+(O[F]=I)];return w.i=M,w.j=F,P})(S)}function h(m,g){return g.i=m.i,g.j=m.j,g.S=m.S.slice(),g}function d(m,g){var T=[],w=typeof m,b;if(g&&w=="object")for(b in m)try{T.push(d(m[b],g-1))}catch{}return T.length?T:w=="string"?m:m+"\0"}function u(m,g){for(var T=m+"",w,b=0;b<T.length;)g[a&b]=a&(w^=g[a&b]*19)+T.charCodeAt(b++);return v(g)}function p(){try{var m;return r&&(m=r.randomBytes)?m=m(S):(m=new Uint8Array(S),(e.crypto||e.msCrypto).getRandomValues(m)),v(m)}catch{var g=e.navigator,T=g&&g.plugins;return[+new Date,e,T,e.screen,v(f)]}}function v(m){return String.fromCharCode.apply(0,m)}if(u(y.random(),f),c.exports){c.exports=i;try{r=gi}catch{}}else y["seed"+x]=i})(typeof self<"u"?self:Kn,[],Math)})(Fm);var aS=Fm.exports,oS=q4,uS=_4,lS=tS,hS=eS,fS=nS,cS=sS,vr=aS;vr.alea=oS;vr.xor128=uS;vr.xorwow=lS;vr.xorshift7=hS;vr.xor4096=fS;vr.tychei=cS;var Fc=vr;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mc{constructor(e,f,y,S,C){this.mean=e,this.stdDev=f,this.dtype=y,this.nextVal=NaN,this.truncated=S,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=C||Math.random();this.random=Fc.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const S=this.nextVal;return this.nextVal=NaN,S}let e,f,y=!1;for(;!y;){let S,C,o;do S=2*this.random()-1,C=2*this.random()-1,o=S*S+C*C;while(o>=1||o===0);const x=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*S*x,f=this.mean+this.stdDev*C*x,(!this.truncated||this.isValidTruncated(e))&&(y=!0)}return(!this.truncated||this.isValidTruncated(f))&&(this.nextVal=this.convertValue(f)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class dS{constructor(e,f,y,S){this.alpha=e,this.beta=1/f,this.dtype=y;const C=S||Math.random();this.randu=Fc.alea(C.toString()),this.randn=new Mc(0,1,y,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,f,y,S,C,o;for(;;){do S=this.randn.nextValue(),o=1+this.c*S;while(o<=0);if(o*=o*o,e=S*S,f=1-.331*e*e,y=.5*e+this.d*(1-o+Math.log(o)),C=this.randu(),C<f||Math.log(C)<y)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class pS{constructor(e=0,f=1,y,S){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=f-e,this.dtype=y,S==null&&(S=Math.random()),typeof S=="number"&&(S=S.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${f} <= 1 and dtype is not float`);this.random=Fc.alea(S)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vS(c,e,f=1,y="float32",S){if(Zn(c),f==null&&(f=1),y==null&&(y="float32"),y!=="float32"&&y!=="int32")throw new Error(`Unsupported data type ${y}`);const C=new dS(e,f,y,S),o=Ze(c,y);for(let x=0;x<o.values.length;x++)o.values[x]=C.nextValue();return o.toTensor()}const mS=ct({randomGamma_:vS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gS(c,e=0,f=1,y,S){if(Zn(c),y!=null&&y==="bool")throw new Error(`Unsupported data type ${y}`);const C=new Mc(e,f,y,!1,S),o=Ze(c,y);for(let x=0;x<o.values.length;x++)o.values[x]=C.nextValue();return o.toTensor()}const Mm=ct({randomNormal_:gS});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xS(c,e,f){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return Mm(c,0,1,e,f)}const yS=ct({randomStandardNormal_:xS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TS(c,e=0,f=1,y="float32",S){Zn(c);const C=Ze(c,y),o=new pS(e,f,null,S);for(let x=0;x<C.values.length;x++)C.values[x]=o.nextValue();return C.toTensor()}const Nc=ct({randomUniform_:TS});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SS(c,e,f,y){return Nc(c,e,f,"int32",y)}const CS=ct({randomUniformInt_:SS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Da(c,e,f=1,y="float32"){if(f===0)throw new Error("Cannot have a step of zero");const S={start:c,stop:e,step:f,dtype:y};return pt.runKernel(Bf,{},S)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ES(c){const f={input:st(c,"input","real")};return pt.runKernel(yv,f)}const La=ct({real_:ES});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wS(c){const f={x:st(c,"x","reciprocal")};return pt.runKernel($f,f)}const bS=ct({reciprocal_:wS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AS(c){const f={x:st(c,"x","relu")};return pt.runKernel(Gf,f)}const qu=ct({relu_:AS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RS(c){const f={x:st(c,"x","relu6")};return pt.runKernel(kf,f)}const Nm=ct({relu6_:RS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IS(c,e){const y={x:st(c,"x","reverse")},S={dims:e};return pt.runKernel(Nu,y,S)}const lr=ct({reverse_:IS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PS(c){const e=st(c,"x","reverse");return it(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),lr(e,0)}const FS=ct({reverse1d_:PS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MS(c,e){const f=st(c,"x","reverse");return it(f.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${f.rank}.`),lr(f,e)}const NS=ct({reverse2d_:MS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OS(c,e){const f=st(c,"x","reverse");return it(f.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${f.rank}.`),lr(f,e)}const DS=ct({reverse3d_:OS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LS(c,e){const f=st(c,"x","reverse");return it(f.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${f.rank}.`),lr(f,e)}const BS=ct({reverse4d_:LS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $S(c){const f={x:st(c,"x","round")};return pt.runKernel(Wf,f)}const Om=ct({round_:$S});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GS(c){const f={x:st(c,"x","rsqrt","float32")};return pt.runKernel(Xf,f)}const US=ct({rsqrt_:GS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VS(c){const f={x:st(c,"x","selu")};return pt.runKernel(Yf,f)}const zS=ct({selu_:VS});function kS(c,e,f,y,S,C=[1,1],o="NHWC"){const x=st(c,"x","separableConv2d"),t=st(e,"depthwiseFilter","separableConv2d"),s=st(f,"pointwiseFilter","separableConv2d");let l=x,a=!1;if(x.rank===3&&(a=!0,l=Mt(x,[1,x.shape[0],x.shape[1],x.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");it(l.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${l.rank}.`),it(t.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${t.rank}.`),it(s.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${t.rank}.`),it(s.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${s.shape[0]}.`),it(s.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${s.shape[1]}.`);const r=t.shape[2],i=t.shape[3];it(s.shape[2]===r*i,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${r*i}, but got ${s.shape[2]}.`);const n=Tc(l,t,y,S,o,C),d=ju(n,s,1,"valid",o);return a?Mt(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const WS=ct({separableConv2d_:kS});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function XS(c,e){const f=st(c,"x","setdiff1d"),y=st(e,"y","setdiff1d");it(f.dtype===y.dtype,()=>`x and y should have the same dtype, but got x (${f.dtype}) and y (${y.dtype}).`),it(f.rank===1,()=>`x should be 1D tensor, but got x (${f.shape}).`),it(y.rank===1,()=>`y should be 1D tensor, but got y (${y.shape}).`);const S=await f.data(),C=await y.data(),o=new Set(C);let x=0;for(let l=0;l<S.length;l++)o.has(S[l])||x++;const t=new Yr([x],f.dtype),s=new Yr([x],"int32");for(let l=0,a=0;l<S.length;l++)o.has(S[l])||(t.values[a]=S[l],s.values[a]=l,a++);return[t.toTensor(),s.toTensor()]}const HS=XS;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YS(c){const f={x:st(c,"x","sign")};return pt.runKernel(Qf,f)}const KS=ct({sign_:YS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jS(c){const f={x:st(c,"x","sin","float32")};return pt.runKernel(jf,f)}const ZS=ct({sin_:jS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QS(c){const f={x:st(c,"x","sinh")};return pt.runKernel(Zf,f)}const JS=ct({sinh_:QS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qS(c,e,f){const y=st(c,"x","slice1d");return it(y.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${y.rank} tensor`),ve(y,[e],[f])}const _S=ct({slice1d_:qS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tC(c,e,f){const y=st(c,"x","slice2d");return it(y.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${y.rank} tensor`),ve(y,e,f)}const eC=ct({slice2d_:tC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nC(c,e,f){const y=st(c,"x","slice3d");return it(y.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${y.rank} tensor`),ve(y,e,f)}const sC=ct({slice3d_:nC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iC(c,e,f){const y=st(c,"x","slice4d");return it(y.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${y.rank} tensor`),ve(y,e,f)}const rC=ct({slice4d_:iC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aC(c,e=-1){const f=st(c,"logits","softmax","float32");if(e===-1&&(e=f.rank-1),e!==f.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${f.rank} and dim was ${e}`);const y={logits:f},S={dim:e};return pt.runKernel($u,y,S)}const oC=ct({softmax_:aC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uC(c){it(c.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${c.dtype}.`);const e={input:c};return pt.runKernel(fv,e)}const Oc=ct({fft_:uC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lC(c){it(c.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${c.dtype}.`);const e={input:c};return pt.runKernel(cv,e)}const Oo=ct({ifft_:lC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hC(c){const e=c.shape[c.shape.length-1],f=c.size/e;let y;if(e<=2){const S=Mt(c,[f,e]);y=Oo(S)}else{const S=[f,2*(e-1)],C=Mt(La(c),[f,e]),o=Mt(Ju(c),[f,e]),x=lr(ve(C,[0,1],[f,e-2]),1),t=Wt(lr(ve(o,[0,1],[f,e-2]),1),Ce(-1)),s=fn([C,x],1),l=fn([o,t],1),a=Mt(Ai(s,l),[S[0],S[1]]);y=Oo(a)}if(y=La(y),c.rank===3&&c.shape[0]!==0){const S=y,C=c.shape[0];y=Mt(y,[C,y.shape[0]/C,y.shape[1]]),S.dispose()}return y}const Dm=ct({irfft_:hC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fC(c,e,f=0){const S={x:st(c,"x","split")},C={numOrSizeSplits:e,axis:f};return pt.runKernel(ec,S,C)}const Ba=ct({split_:fC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cC(c,e){it(c.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${c.dtype}`);let f=c.shape[c.shape.length-1];const y=c.size/f;let S;if(e!=null&&e<f){const n=c.shape.map(d=>0),h=c.shape.map(d=>d);h[c.shape.length-1]=e,S=ve(c,n,h),f=e}else if(e!=null&&e>f){const n=c.shape.map(h=>h);n[c.shape.length-1]=e-f,S=fn([c,ur(n)],c.shape.length-1),f=e}else S=c;const C=jn(S),o=Mt(Ai(S,C),[y,f]),x=Oc(o),t=Math.floor(f/2)+1,s=La(x),l=Ju(x),a=Ba(s,[t,f-t],s.shape.length-1),r=Ba(l,[t,f-t],l.shape.length-1),i=S.shape.slice();return i[S.shape.length-1]=t,Mt(Ai(a[0],r[0]),i)}const Dc=ct({rfft_:cC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dC(c,e){let f=st(c,"a","squaredDifference"),y=st(e,"b","squaredDifference");[f,y]=qe(f,y),Te(f.shape,y.shape);const S={a:f,b:y},C={};return pt.runKernel(rc,S,C)}const Lm=ct({squaredDifference_:dC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pC(c,e){const f=st(c,"x","squeeze","string_or_numeric");return Mt(f,Pi(f.shape,e).newShape)}const an=ct({squeeze_:pC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vC(c,e=0){const f=Ro(c,"tensors","stack","string_or_numeric");it(f.length>=1,()=>"Pass at least one tensor to tf.stack"),f.length>0&&it(e<=f[0].rank,()=>"Axis must be <= rank of the tensor");const y=f,S={axis:e};return pt.runKernel(Df,y,S)}const Js=ct({stack_:vC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mC(c,e=0){const y={x:st(c,"x","step")},S={alpha:e};return pt.runKernel(Wu,y,S)}const Bm=ct({step_:mC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gC(c,e,f,y,S=0,C=0,o=0,x=0,t=0){const l={x:st(c,"x","stridedSlice","string_or_numeric")},a={begin:e,end:f,strides:y,beginMask:S,endMask:C,ellipsisMask:o,newAxisMask:x,shrinkAxisMask:t};return pt.runKernel(Vu,l,a)}const xC=ct({stridedSlice_:gC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yC(c){const f={x:st(c,"x","tan","float32")};return pt.runKernel(hc,f)}const TC=ct({tan_:yC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gn(c,e){Jr(c);const f=Fi(c,e);if(f.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Mi(c,null,f,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ei(c,e,f){if(Jr(c),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const y=Fi(c,f);if(y.length!==2&&y.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(y.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Mi(c,e,y,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $m(c,e,f){if(Jr(c),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const y=Fi(c,f);if(y.length!==3&&y.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(y.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Mi(c,e,y,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SC(c,e,f){if(Jr(c),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const y=Fi(c,f);if(y.length!==4&&y.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(y.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Mi(c,e,y,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CC(c,e,f){if(Jr(c),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const y=Fi(c,f);if(y.length!==5&&y.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(y.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Mi(c,e,y,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EC(c,e,f){if(Jr(c),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const y=Fi(c,f);if(y.length!==6&&y.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(y.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||y,Mi(c,e,y,f)}function Gm(c,e,f){const y=e.rank>1?e.shape[e.rank-1]:1,S=e.rank>1?e.rank-1:1,C=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${f.shape}, indices.shape: ${e.shape}, shape: ${c}, sliceDim: ${y}, and batchDim: ${S}.`;if(f.rank<S)throw new Error(C+` update.rank < ${S}. `);if(c.length<y+(f.rank-S))throw new Error(C+` Output shape length < ${y+(f.rank-S)}`);if(f.rank!==S+c.length-y)throw new Error(C+` update.rank != ${S+c.length-y}`);for(let o=0;o<S;++o)if(f.shape[o]!==e.shape[o])throw new Error(C+` updates.shape[${o}] (${f.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<f.rank-S;++o)if(f.shape[o+S]!==c[o+y])throw new Error(C+` updates.shape[${o+S}] (${f.shape[o+S]}) != shape[${o+S}] (${c[o+S]})`)}function Lc(c,e,f){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(c.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${c.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(f.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${f}`);if(f.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(c.size===0)throw new Error(`Updates specified for empty output. updates shape: ${c.shape}`)}Gm(f,e,c)}function mr(c,e,f){const y=e.shape.length,S=y>1?e.shape[y-1]:1,C=f.length;let o=1;for(let a=S;a<C;++a)o*=f[a];const x=S<1?1:S,t=bt(e.shape)/x,s=[...Me(f.slice(0,S)),1],l=bt(f);return{sliceRank:S,numUpdates:t,sliceSize:o,strides:s,outputSize:l}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wC(c,e,f){const y=st(c,"tensor","tensorScatterupdate"),S=st(e,"indices","tensorScatterupdate","int32"),C=st(f,"updates","tensorScatterupdate");if(Lc(C,S,y.shape),y.dtype!==C.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${y.dtype} and ${C.dtype}.`);const o={tensor:y,indices:S,updates:C},x={};return pt.runKernel(Du,o,x)}const bC=ct({tensorScatterUpdate_:wC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AC(c,e=1,f=!0){const y=st(c,"x","topk");if(y.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const S=y.shape[y.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>S)throw new Error(`'k' passed to topk() must be <= the last dimension (${S}) but got ${e}`);const C={x:y},o={k:e,sorted:f},[x,t]=pt.runKernel(zu,C,o);return{values:x,indices:t}}const RC=ct({topk_:AC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IC(c,e=0,f=1,y,S){if(Zn(c),y!=null&&y==="bool")throw new Error("Unsupported data type $ { dtype }");const C=new Mc(e,f,y,!0,S),o=Ze(c,y);for(let x=0;x<o.values.length;x++)o.values[x]=C.nextValue();return o.toTensor()}const PC=ct({truncatedNormal_:IC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FC(c,e=0){const f=st(c,"x","unique","string_or_numeric");it(f.rank>0,()=>"The input tensor must be at least 1D");const y={x:f},S={axis:e},[C,o]=pt.runKernel(cc,y,S);return{values:C,indices:o}}const MC=ct({unique_:FC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NC(c,e,f){const y=st(c,"x","unsortedSegmentSum"),S=st(e,"segmentIds","unsortedSegmentSum","int32");it(kr(f),()=>"numSegments must be of dtype int");const C={x:y,segmentIds:S},o={numSegments:f};return pt.runKernel(Cv,C,o)}const OC=ct({unsortedSegmentSum_:NC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DC(c,e=0){const f=st(c,"x","unstack","string_or_numeric");it(e>=-f.shape.length&&e<f.shape.length,()=>`Axis = ${e} is not in [-${f.shape.length}, ${f.shape.length})`);const y={value:f},S={axis:e};return pt.runKernel(dc,y,S)}const gr=ct({unstack_:DC});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LC(c,e){return Ec(c,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BC(c,e=!0,f,y){return pt.makeVariable(c,e,f,y)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Um(c,e){const f=[];for(let C=0;C<e.length;C++)e[C]&&f.push(C);const y=Ze(c,"int32"),S=Ze([f.length,c.length],"int32");for(let C=0;C<f.length;C++){const o=y.indexToLoc(f[C]),x=C*c.length;S.values.set(o,x)}return S.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function $C(c){const e=st(c,"condition","whereAsync","bool"),f=await e.data(),y=Um(e.shape,f);return c!==e&&e.dispose(),y}const Vm=$C;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function GC(c,e,f){const y=st(c,"tensor","boolMask"),S=st(e,"mask","boolMask","bool"),C=f??0,o=S.rank,x=y.shape;it(o>0,()=>"mask cannot be scalar"),zn(x.slice(C,C+o),S.shape,"mask's shape must match the first K dimensions of tensor's shape,");let t=1;for(let h=C;h<C+o;h++)t*=x[h];const s=x.slice(0,C).concat([t],x.slice(C+o)),l=Mt(y,s),a=Mt(S,[-1]),r=await Vm(a),i=an(r,[1]),n=gm(l,i,C);return c!==y&&y.dispose(),e!==S&&S.dispose(),i.dispose(),l.dispose(),a.dispose(),r.dispose(),n}const UC=GC;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VC(c,e,f){const y=st(c,"x","transpose");if(e==null&&(e=y.shape.map((o,x)=>x).reverse()),it(y.rank===e.length,()=>`Error in transpose: rank of input ${y.rank} must match length of perm ${e}.`),e.forEach(o=>{it(o>=0&&o<y.rank,()=>`All entries in 'perm' must be between 0 and ${y.rank-1} but got ${e}`)}),y.rank<=1)return y.clone();const S={x:y},C={perm:e};return y.dtype==="complex64"?de(()=>{let o=La(y),x=Ju(y);return o=pt.runKernel(Gr,{x:o},C),x=pt.runKernel(Gr,{x},C),f&&(x=Fs(x)),Ai(o,x)}):pt.runKernel(Gr,S,C)}const eh=ct({transpose_:VC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zC(c,e,f,y,S=!0){const C=st(c,"v","movingAverage"),o=st(e,"x","movingAverage"),x=st(f,"decay","movingAverage");px(C,o),it(je(C.shape,o.shape),()=>"Shape mismatch in v and x");const t=Ce(1),s=me(t,x);let l=Wt(me(o,C),s);if(S){it(y!=null,()=>"When using zeroDebias: true, step is required.");const a=st(y,"step","movingAverage");l=ye(l,me(t,Na(x,a)))}return ne(C,l)}const kC=ct({movingAverage_:zC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WC(c,e,f){Zn(f);const y=st(c,"indices","scatterND","int32"),S=st(e,"updates","scatterND");Lc(S,y,f);const C={indices:y,updates:S},o={shape:f};return pt.runKernel(Ou,C,o)}const XC=ct({scatterND_:WC});function HC(c,e,f,y){if(c.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${c.dtype}.`);if(c.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${c.shape}.`);const S=c.rank>0?c.shape[0]:1,C=c.rank>1?c.shape[1]:1;if(f.length!==C)throw new Error(`outputShape has incorrect number of elements:, ${f.length}, should be: ${C}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===S))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${S}]`);if(e.dtype!==y.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YC(c,e,f,y=0){Zn(f);const S=st(c,"sparseIndices","sparseToDense","int32"),C=st(e,"sparseValues","sparseToDense","string_or_numeric"),o=st(y,"defaultValue","sparseToDense",C.dtype);HC(S,C,f,o);const x={sparseIndices:S,sparseValues:C,defaultValue:o},t={outputShape:f};return pt.runKernel(Uu,x,t)}const KC=ct({sparseToDense_:YC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jC(c,e){const f=st(e,"indices","gatherND","int32"),S={params:st(c,"x","gatherND","string_or_numeric"),indices:f};return pt.runKernel(cu,S)}const ZC=ct({gatherND_:jC});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QC(c,e){if(e==null)return c.shape.slice();if(je(c.shape,e))return e;if(c.shape.length===e.length){const f=[];for(let y=0;y<c.shape.length;y++)e[y]==null&&c.shape[y]!=null?f.push(c.shape[y]):f.push(e[y]);return f}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JC(c,e,f,y){const S=st(c,"x","dropout");if(it(S.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${S.dtype} tensor instead.`),it(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return c instanceof Je?S.clone():S;const C=QC(S,f),o=1-e,x=ye(mm(ne(Nc(C,0,1,"float32",y),o)),o);return Wt(S,x)}const qC=ct({dropout_:JC});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zm(c){return Math.floor(Math.pow(2,Math.ceil(Math.log(c)/Math.log(2))))}function Bc(c,e,f){const y=1-c%2,S=new Float32Array(c);for(let C=0;C<c;++C){const o=2*Math.PI*C/(c+y-1);S[C]=e-f*Math.cos(o)}return gn(S,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _C(c,e,f=1){const y=st(c,"predictions","inTopK"),S=st(e,"targets","inTopK");it(y.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${y.rank}`),it(y.rank-1===S.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${y.rank} and targets rank ${S.rank}`),zn(y.shape.slice(0,y.shape.length-1),S.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const C=y.shape[y.shape.length-1];it(f>0&&f<=C,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${C}), but got ${f}`);const o=await y.data(),x=await S.data(),[t,s]=[o.length/C,C],l=wi("bool",t);for(let a=0;a<t;a++){const r=a*s,i=o.subarray(r,r+s),n=[];for(let h=0;h<i.length;h++)n.push({value:i[h],index:h});n.sort((h,d)=>d.value-h.value),l[a]=0;for(let h=0;h<f;h++)if(n[h].index===x[a]){l[a]=1;break}}return c!==y&&y.dispose(),e!==S&&S.dispose(),ys(l,S.shape,"bool")}const tE=_C;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eE(c,e,f,y,S,C="NHWC",o){let x=c;c.rank===3&&(x=Mt(c,[1,c.shape[0],c.shape[1],c.shape[2]]));let t=e;t.rank===3&&(t=Mt(e,[1,e.shape[0],e.shape[1],e.shape[2]])),it(x.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${x.shape}.`),it(t.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${t.shape}.`),it(f.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${f}.`);const s=C==="NHWC"?x.shape[3]:x.shape[1],l=C==="NHWC"?t.shape[3]:t.shape[1];it(s===f[2],()=>`Error in conv2dDerFilter: depth of input ${s}) must match input depth in filter (${f[2]}.`),it(l===f[3],()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${f[3]}).`),fs("conv2dDerFilter",S,o);const a={x,dy:t},r={strides:y,pad:S,dataFormat:C,dimRoundingMode:o,filterShape:f};return pt.runKernel(rv,a,r)}const nE=ct({conv2DBackpropFilter_:eE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _u(c,e,f){if(f==null||f==="linear")return c;if(f==="relu")return Wt(c,Bm(e));throw new Error(`Cannot compute gradient for fused activation ${f}.`)}function tl(c,e){let f=e;const y=hm(c.shape,e.shape);return y.length>0&&(f=Ve(f,y)),Mt(f,c.shape)}function el(c,e,f,y){if(e==="linear")return c;if(e==="relu")return qu(c);if(e==="elu")return cm(c);if(e==="relu6")return Nm(c);if(e==="prelu")return Pm(c,f);if(e==="leakyrelu")return ym(c,y);if(e==="sigmoid")return nr(c);throw new Error(`Unknown fused activation ${e}.`)}const nl=(c,e)=>!(c>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sE({x:c,filter:e,strides:f,pad:y,dataFormat:S="NHWC",dilations:C=[1,1],dimRoundingMode:o,bias:x,activation:t="linear",preluActivationWeights:s,leakyreluAlpha:l}){if(t=t||"linear",nl(pt.state.gradientDepth,t)===!1){it(S==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${S} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let T=ju(c,e,f,y,S,C,o);return x!=null&&(T=ne(T,x)),el(T,t,s,l)}const a=st(c,"x","conv2d","float32"),r=st(e,"filter","conv2d","float32");let i=a,n=!1;a.rank===3&&(n=!0,i=Mt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),it(i.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${i.rank}.`),it(r.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${r.rank}.`),fs("fused conv2d",y,o);const h=S==="NHWC"?i.shape[3]:i.shape[1];it(r.shape[2]===h,()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${r.shape[2]}.`),it(On(f,C),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${f} and dilations '${C}'`);const d=cn(i.shape,r.shape,f,C,y,o);let u;x!=null&&(u=st(x,"bias","fused conv2d"),[u]=qe(u,a),S==="NHWC"?Te(d.outShape,u.shape):(it(u.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${u.shape.length}.`),it(u.shape.length===0||u.shape[0]===d.outChannels||u.shape[0]===1,()=>`Error in fused conv2d: bias shape (${u.shape}) is not compatible with the number of output channels (${d.outChannels})`)));let p;if(s!=null){const T=s.shape;if(it(T.length<=1||T.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${T.length}.`),T.length===1)it(T[0]===1||T[0]===d.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the number of output channels (${d.outChannels}).`);else if(T.length===3)try{Te(T,d.outShape)}catch{const b=`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the output shape of the conv2d (${d.outShape}).`;throw Error(b)}p=st(s,"prelu weights","fused conv2d")}const v=(T,w)=>{it(S==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${S} but only NHWC is currently supported.`);const[b,E,A,R]=w,I=_u(T,A,t);it(Ma(C),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${C}'`);const P=lm(E.shape,I,b,f,y),M=nE(E,I,b.shape,f,y),F=[P,M];if(R!=null){const O=tl(R,I);F.push(O)}return F},m={x:i,filter:r,bias:u,preluActivationWeights:p},g={strides:f,pad:y,dataFormat:S,dilations:C,dimRoundingMode:o,activation:t,leakyreluAlpha:l};return x==null?Qs((w,b,E)=>{let A=pt.runKernel(Ra,m,g);return E([b,w,A]),n&&(A=Mt(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:v}})(i,r):Qs((w,b,E,A)=>{let R=pt.runKernel(Ra,m,g);return A([b,w,R,E]),n&&(R=Mt(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:v}})(i,r,u)}const iE=ct({fusedConv2d_:sE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rE(c,e,f,y,S,C=[1,1],o){let x=c;c.rank===3&&(x=Mt(c,[1,c.shape[0],c.shape[1],c.shape[2]]));let t=e;t.rank===3&&(t=Mt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const s={x,dy:t},l={strides:y,pad:S,dimRoundingMode:o,dilations:C,filterShape:f};return pt.runKernel(av,s,l)}const aE=ct({depthwiseConv2dNativeBackpropFilter_:rE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oE(c,e,f,y,S,C=[1,1],o){let x=e,t=!1;e.rank===3&&(t=!0,x=Mt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const s={dy:x,filter:f},l={strides:y,pad:S,dimRoundingMode:o,dilations:C,inputShape:c},a=pt.runKernel(ov,s,l);return t?Mt(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const uE=ct({depthwiseConv2dNativeBackpropInput_:oE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lE({x:c,filter:e,strides:f,pad:y,dataFormat:S="NHWC",dilations:C=[1,1],dimRoundingMode:o,bias:x,activation:t="linear",preluActivationWeights:s,leakyreluAlpha:l}){if(nl(pt.state.gradientDepth,t)===!1){let g=Tc(c,e,f,y,S,C,o);return x!=null&&(g=ne(g,x)),el(g,t,s,l)}const a=st(c,"x","depthwiseConv2d","float32"),r=st(e,"filter","depthwiseConv2d","float32");let i=a,n=!1;a.rank===3&&(n=!0,i=Mt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),it(i.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${i.rank}.`),it(r.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${r.rank}.`),it(i.shape[3]===r.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${i.shape[3]}) must match the inChannels dimension in filter ${r.shape[2]}.`),C==null&&(C=[1,1]),it(On(f,C),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${f} and dilations '${C}'`),fs("fused depthwiseConv2d",y,o);const h=cn(i.shape,r.shape,f,C,y,o,!0);let d;x!=null&&(d=st(x,"bias","fused conv2d"),[d]=qe(d,a),Te(h.outShape,d.shape));let u;s!=null&&(u=st(s,"prelu weights","fused depthwiseConv2d"));const p=(g,T)=>{it(Ma(C),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${C}'`);const[w,b,E,A]=T,R=_u(g,E,t),I=uE(b.shape,R,w,f,y,C,o),P=aE(b,R,w.shape,f,y,C,o);if(A!=null){const M=tl(d,R);return[I,P,M]}return[I,P]},v={x:i,filter:r,bias:d,preluActivationWeights:u},m={strides:f,pad:y,dataFormat:S,dilations:C,dimRoundingMode:o,activation:t,leakyreluAlpha:l};return x==null?Qs((T,w,b)=>{let E=pt.runKernel(Ia,v,m);return b([w,T,E]),n&&(E=Mt(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:p}})(i,r):Qs((T,w,b,E)=>{let A=pt.runKernel(Ia,v,m);return E([w,T,A,b]),n&&(A=Mt(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:p}})(i,r,d)}const hE=ct({fusedDepthwiseConv2d_:lE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fE({a:c,b:e,transposeA:f=!1,transposeB:y=!1,bias:S,activation:C="linear",preluActivationWeights:o,leakyreluAlpha:x=.2}){if(nl(pt.state.gradientDepth,C)===!1){let R=Oe(c,e,f,y);return S!=null&&(R=ne(R,S)),el(R,C,o,x)}let t=st(c,"a","fused matMul"),s=st(e,"b","fused matMul");[t,s]=qe(t,s);const l=f?t.shape[t.rank-2]:t.shape[t.rank-1],a=y?s.shape[s.rank-1]:s.shape[s.rank-2],r=f?t.shape[t.rank-1]:t.shape[t.rank-2],i=y?s.shape[s.rank-2]:s.shape[s.rank-1],n=t.shape.slice(0,-2),h=s.shape.slice(0,-2),d=bt(n),u=bt(h);it(l===a,()=>`Error in fused matMul: inner shapes (${l}) and (${a}) of Tensors with shapes ${t.shape} and ${s.shape} and transposeA=${f} and transposeB=${y} must match.`);const v=Te(t.shape.slice(0,-2),s.shape.slice(0,-2)).concat([r,i]),m=f?Mt(t,[d,l,r]):Mt(t,[d,r,l]),g=y?Mt(s,[u,i,a]):Mt(s,[u,a,i]);let T;S!=null&&(T=st(S,"bias","fused matMul"),[T]=qe(T,t),Te(v,T.shape));let w;o!=null&&(w=st(o,"prelu weights","fused matMul"));const b=(R,I)=>{const[P,M,F,O]=I,D=_u(Mt(R,F.shape),F,C);let L,z;if(!f&&!y?(L=Oe(D,M,!1,!0),z=Oe(P,D,!0,!1)):!f&&y?(L=Oe(D,M,!1,!1),z=Oe(D,P,!0,!1)):f&&!y?(L=Oe(M,D,!1,!0),z=Oe(P,D,!1,!1)):(L=Oe(M,D,!0,!0),z=Oe(D,P,!0,!0)),S!=null){const X=tl(O,D);return[L,z,X]}else return[L,z]},E={a:m,b:g,bias:T,preluActivationWeights:w},A={transposeA:f,transposeB:y,activation:C,leakyreluAlpha:x};return S==null?Qs((I,P,M)=>{const F=pt.runKernel(Aa,E,A);return M([I,P,F]),{value:Mt(F,v),gradFunc:b}})(m,g):Qs((I,P,M,F)=>{const O=pt.runKernel(Aa,E,A);return F([I,P,O,M]),{value:Mt(O,v),gradFunc:b}})(m,g,T)}const cE=ct({fusedMatMul_:fE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dE=Object.freeze(Object.defineProperty({__proto__:null,conv2d:iE,depthwiseConv2d:hE,matMul:cE},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pE(c){return Bc(c,.54,.46)}const vE=ct({hammingWindow_:pE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mE(c){return Bc(c,.5,.5)}const km=ct({hannWindow_:mE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gE(c,e,f,y=!1,S=0){let C=0;const o=[];for(;C+e<=c.size;)o.push(ve(c,C,e)),C+=f;if(y)for(;C<c.size;){const x=C+e-c.size,t=fn([ve(c,C,e-x),Ya([x],S)]);o.push(t),C+=f}return o.length===0?Ei([],[0,e]):Mt(fn(o),[o.length,e])}const Wm=ct({frame_:gE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xE(c,e,f,y,S=km){y==null&&(y=zm(e));const C=Wm(c,e,f),o=Wt(C,S(e));return Dc(o,y)}const yE=ct({stft_:xE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TE(c,e,f,y,S="bilinear",C=0){const o=st(c,"image","cropAndResize"),x=st(e,"boxes","cropAndResize","float32"),t=st(f,"boxInd","cropAndResize","int32"),s=x.shape[0];it(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),it(x.rank===2&&x.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${s},4] but had shape ${x.shape}.`),it(t.rank===1&&t.shape[0]===s,()=>`Error in cropAndResize: boxInd must be have size [${s}] but had shape ${x.shape}.`),it(y.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${y.length}.`),it(y[0]>=1&&y[1]>=1,()=>`cropSize must be atleast [1,1], but was ${y}`),it(S==="bilinear"||S==="nearest",()=>`method must be bilinear or nearest, but was ${S}`);const l={image:o,boxes:x,boxInd:t},a={method:S,extrapolationValue:C,cropSize:y};return pt.runKernel(au,l,a)}const SE=ct({cropAndResize_:TE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CE(c){const e=st(c,"image","flipLeftRight","float32");it(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const f={image:e};return pt.runKernel(hu,f,{})}const EE=ct({flipLeftRight_:CE});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wE(c){const e=st(c,"image","grayscaleToRGB"),f=e.rank-1,y=e.shape[f];it(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),it(y===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${y}.`);const S=new Array(e.rank);return S.fill(1,0,f),S[f]=3,Ea(e,S)}const bE=ct({grayscaleToRGB_:wE});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AE(c){const e=st(c,"image","RGBToGrayscale"),f=e.rank-1,y=e.shape[f];it(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),it(y===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${y}.`);const S=e.dtype,C=We(e,"float32"),o=gn([.2989,.587,.114]);let x;switch(e.rank){case 2:x=Dr("ij,j->i",C,o);break;case 3:x=Dr("ijk,k->ij",C,o);break;case 4:x=Dr("ijkl,l->ijk",C,o);break;case 5:x=Dr("ijklm,m->ijkl",C,o);break;case 6:x=Dr("ijklmn,n->ijklm",C,o);break;default:throw new Error("Not a valid tensor rank.")}return x=is(x,-1),We(x,S)}const RE=ct({rgbToGrayscale_:AE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IE(c,e,f=0,y=.5){const S=st(c,"image","rotateWithOffset","float32");it(S.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${S.rank}.`);const C={image:S},o={radians:e,fillValue:f,center:y};return pt.runKernel(Xu,C,o)}const PE=ct({rotateWithOffset_:IE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ta(c,e,f,y,S,C){y==null&&(y=.5),S==null&&(S=Number.NEGATIVE_INFINITY),C==null&&(C=0);const o=c.shape[0];return f=Math.min(f,o),it(0<=y&&y<=1,()=>`iouThreshold must be in [0, 1], but was '${y}'`),it(c.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${c.rank}'`),it(c.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${c.shape[1]}`),it(e.rank===1,()=>"scores must be a 1D tensor"),it(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),it(0<=C&&C<=1,()=>`softNmsSigma must be in [0, 1], but was '${C}'`),{maxOutputSize:f,iouThreshold:y,scoreThreshold:S,softNmsSigma:C}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FE(c,e,f,y=.5,S=Number.NEGATIVE_INFINITY){const C=st(c,"boxes","nonMaxSuppression","float32"),o=st(e,"scores","nonMaxSuppression","float32"),x=ta(C,o,f,y,S);f=x.maxOutputSize,y=x.iouThreshold,S=x.scoreThreshold;const t={maxOutputSize:f,iouThreshold:y,scoreThreshold:S};return pt.runKernel(Eu,{boxes:C,scores:o},t)}const ME=ct({nonMaxSuppression_:FE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NE(c,e,f){const y=OE(c,e,f),S=y<0?-(y+1):y;c.splice(S,0,e)}function OE(c,e,f){return LE(c,e,f||DE)}function DE(c,e){return c>e?1:c<e?-1:0}function LE(c,e,f){let y=0,S=c.length,C=0,o=!1;for(;y<S;){C=y+(S-y>>>1);const x=f(e,c[C]);x>0?y=C+1:(S=C,o=!x)}return o?y:-y-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xm(c,e,f,y,S){return $c(c,e,f,y,S,0)}function Hm(c,e,f,y,S,C){return $c(c,e,f,y,S,0,!1,C,!0)}function Ym(c,e,f,y,S,C){return $c(c,e,f,y,S,C,!0)}function $c(c,e,f,y,S,C,o=!1,x=!1,t=!1){const s=[];for(let d=0;d<e.length;d++)e[d]>S&&s.push({score:e[d],boxIndex:d,suppressBeginIndex:0});s.sort($d);const l=C>0?-.5/C:0,a=[],r=[];for(;a.length<f&&s.length>0;){const d=s.pop(),{score:u,boxIndex:p,suppressBeginIndex:v}=d;if(u<S)break;let m=!1;for(let g=a.length-1;g>=v;--g){const T=BE(c,p,a[g]);if(T>=y){m=!0;break}if(d.score=d.score*$E(y,l,T),d.score<=S)break}d.suppressBeginIndex=a.length,m||(d.score===u?(a.push(p),r.push(d.score)):d.score>S&&NE(s,d,$d))}const i=a.length,n=f-i;x&&n>0&&(a.push(...new Array(n).fill(0)),r.push(...new Array(n).fill(0)));const h={selectedIndices:a};return o&&(h.selectedScores=r),t&&(h.validOutputs=i),h}function BE(c,e,f){const y=c.subarray(e*4,e*4+4),S=c.subarray(f*4,f*4+4),C=Math.min(y[0],y[2]),o=Math.min(y[1],y[3]),x=Math.max(y[0],y[2]),t=Math.max(y[1],y[3]),s=Math.min(S[0],S[2]),l=Math.min(S[1],S[3]),a=Math.max(S[0],S[2]),r=Math.max(S[1],S[3]),i=(x-C)*(t-o),n=(a-s)*(r-l);if(i<=0||n<=0)return 0;const h=Math.max(C,s),d=Math.max(o,l),u=Math.min(x,a),p=Math.min(t,r),v=Math.max(u-h,0)*Math.max(p-d,0);return v/(i+n-v)}function $E(c,e,f){const y=Math.exp(e*f*f);return f<=c?y:0}function $d(c,e){return c.score-e.score||c.score===e.score&&e.boxIndex-c.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function GE(c,e,f,y=.5,S=Number.NEGATIVE_INFINITY){const C=st(c,"boxes","nonMaxSuppressionAsync"),o=st(e,"scores","nonMaxSuppressionAsync"),x=ta(C,o,f,y,S);f=x.maxOutputSize,y=x.iouThreshold,S=x.scoreThreshold;const t=await Promise.all([C.data(),o.data()]),s=t[0],l=t[1],{selectedIndices:a}=Xm(s,l,f,y,S);return C!==c&&C.dispose(),o!==e&&o.dispose(),gn(a,"int32")}const UE=GE;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VE(c,e,f,y=.5,S=Number.NEGATIVE_INFINITY,C=0){const o=st(c,"boxes","nonMaxSuppression"),x=st(e,"scores","nonMaxSuppression"),t=ta(o,x,f,y,S,C);f=t.maxOutputSize,y=t.iouThreshold,S=t.scoreThreshold,C=t.softNmsSigma;const s={boxes:o,scores:x},l={maxOutputSize:f,iouThreshold:y,scoreThreshold:S,softNmsSigma:C},a=pt.runKernel(bu,s,l);return{selectedIndices:a[0],selectedScores:a[1]}}const zE=ct({nonMaxSuppressionWithScore_:VE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function kE(c,e,f,y=.5,S=Number.NEGATIVE_INFINITY,C=0){const o=st(c,"boxes","nonMaxSuppressionAsync"),x=st(e,"scores","nonMaxSuppressionAsync"),t=ta(o,x,f,y,S,C);f=t.maxOutputSize,y=t.iouThreshold,S=t.scoreThreshold,C=t.softNmsSigma;const s=await Promise.all([o.data(),x.data()]),l=s[0],a=s[1],{selectedIndices:r,selectedScores:i}=Ym(l,a,f,y,S,C);return o!==c&&o.dispose(),x!==e&&x.dispose(),{selectedIndices:gn(r,"int32"),selectedScores:gn(i)}}const WE=kE;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XE(c,e,f,y=.5,S=Number.NEGATIVE_INFINITY,C=!1){const o=st(c,"boxes","nonMaxSuppression"),x=st(e,"scores","nonMaxSuppression"),t=ta(o,x,f,y,S,null),s=t.maxOutputSize,l=t.iouThreshold,a=t.scoreThreshold,r={boxes:o,scores:x},i={maxOutputSize:s,iouThreshold:l,scoreThreshold:a,padToMaxOutputSize:C},n=pt.runKernel(wu,r,i);return{selectedIndices:n[0],validOutputs:n[1]}}const HE=ct({nonMaxSuppressionPadded_:XE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function YE(c,e,f,y=.5,S=Number.NEGATIVE_INFINITY,C=!1){const o=st(c,"boxes","nonMaxSuppressionAsync"),x=st(e,"scores","nonMaxSuppressionAsync"),t=ta(o,x,f,y,S,null),s=t.maxOutputSize,l=t.iouThreshold,a=t.scoreThreshold,[r,i]=await Promise.all([o.data(),x.data()]),{selectedIndices:n,validOutputs:h}=Hm(r,i,s,l,a,C);return o!==c&&o.dispose(),x!==e&&x.dispose(),{selectedIndices:gn(n,"int32"),validOutputs:Ce(h,"int32")}}const KE=YE;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jE(c,e,f=!1,y=!1){const S=st(c,"images","resizeBilinear");it(S.rank===3||S.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${S.rank}.`),it(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),it(y===!1||f===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let C=S,o=!1;S.rank===3&&(o=!0,C=Mt(S,[1,S.shape[0],S.shape[1],S.shape[2]]));const x={images:C},t={alignCorners:f,halfPixelCenters:y,size:e},s=pt.runKernel(Mu,x,t);return o?Mt(s,[s.shape[1],s.shape[2],s.shape[3]]):s}const ZE=ct({resizeBilinear_:jE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QE(c,e,f=!1,y=!1){const S=st(c,"images","resizeNearestNeighbor");it(S.rank===3||S.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${S.rank}.`),it(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),it(S.dtype==="float32"||S.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),it(y===!1||f===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let C=S,o=!1;S.rank===3&&(o=!0,C=Mt(S,[1,S.shape[0],S.shape[1],S.shape[2]]));const x={images:C},t={alignCorners:f,halfPixelCenters:y,size:e},s=pt.runKernel(Fu,x,t);return o?Mt(s,[s.shape[1],s.shape[2],s.shape[3]]):s}const JE=ct({resizeNearestNeighbor_:QE});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qE(c,e="binary",f=!1,y=.5){const S=st(c,"image","threshold"),C=.2989,o=.587,x=.114,t=S.shape[0]*S.shape[1];let s=Wt(gn([y]),255),l,a,r,i;if(it(S.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${S.rank}.`),it(S.shape[2]===3||S.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${S.shape[2]}.`),it(S.dtype==="int32"||S.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${S.dtype}.`),it(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),S.shape[2]===3){[l,a,r]=Ba(S,[1,1,1],-1);const d=Wt(l,C),u=Wt(a,o),p=Wt(r,x);i=ne(ne(d,u),p)}else i=c;if(e==="otsu"){const d=om(We(Om(i),"int32"),ys([]),256);s=_E(d,t)}const n=f?Cc(i,s):Qu(i,s);return We(Wt(n,255),"int32")}function _E(c,e){let f=gn([-1]),y=gn([0]),S=gn([0]),C,o,x,t,s,l;for(let a=0;a<c.size-1;a++){C=ve(c,0,a+1),o=ve(c,a+1),s=ye(Ve(C),e),l=ye(Ve(o),e);const r=Ve(Wt(C,Da(0,C.size)));x=ye(r,Ve(C));const i=Ya(o.shape,C.size),n=ne(Da(0,o.size),i),h=Wt(o,n);t=ye(Ve(h),Ve(o));const d=me(x,t),u=me(x,t),p=Wt(s,l);S=Wt(Wt(p,d),u);const v=Qu(S,y);y=Ci(v,S,y),f=Ci(v,gn([a]),f)}return f}const tw=ct({threshold_:qE});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ew(c,e,f="nearest",y="constant",S=0,C){const o=st(c,"image","transform","float32"),x=st(e,"transforms","transform","float32");it(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),it(x.rank===2&&(x.shape[0]===o.shape[0]||x.shape[0]===1)&&x.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),it(C==null||C.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${C}.`);const t={image:o,transforms:x},s={interpolation:f,fillMode:y,fillValue:S,outputShape:C};return pt.runKernel(ku,t,s)}const nw=ct({transform_:ew});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sw(c,e,f){const y=st(c,"a","bandPart");it(y.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${y.rank}.`);const S=y.shape,[C,o]=y.shape.slice(-2);let x,t;typeof e=="number"?(it(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),it(e<=C,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${C}).`),x=st(e<0?C:e,"numLower","bandPart")):(it(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),x=Ci(th(e,0),C,No(e,C))),typeof f=="number"?(it(f%1===0,()=>`bandPart(): numUpper must be an integer, got ${f}.`),it(f<=o,()=>`bandPart(): numUpper (${f}) must not be greater than the number of columns (${o}).`),t=st(f<0?o:f,"numUpper","bandPart")):(it(f.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),t=Ci(th(f,0),o,No(f,o)));const s=Mt(Da(0,C,1,"int32"),[-1,1]),l=Da(0,o,1,"int32"),a=me(s,l),r=Fo(Cc(a,x),xm(a,Fs(t))),i=ur([C,o],y.dtype);return Mt(Js(gr(Mt(y,[-1,C,o])).map(n=>Ci(r,n,i))),S)}const iw=ct({bandPart_:sw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rw(c){let e;if(Array.isArray(c)){e=!1,it(c!=null&&c.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const S=c[0].shape[0];for(let C=1;C<c.length;++C)it(c[C].shape[0]===S,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${c[C].shape[0]} vs. ${S})`)}else e=!0,c=Ba(c,c.shape[0],0).map(S=>an(S,[0]));it(c.length<=c[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${c.length}) exceeds number of dimensions (${c[0].shape[0]}).`);const f=[],y=c;for(let S=0;S<c.length;++S)f.push(pt.tidy(()=>{let C=y[S];if(S>0)for(let o=0;o<S;++o){const x=Wt(Ve(Wt(f[o],C)),f[o]);C=me(C,x)}return ye(C,Zu(C,"euclidean"))}));return e?Js(f,0):f}const aw=ct({gramSchmidt_:rw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ow(c,e=!1){if(it(c.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${c.rank}`),c.rank===2)return Gd(c,e);{const f=c.shape.slice(0,c.shape.length-2).reduce((t,s)=>t*s),y=gr(Mt(c,[f,c.shape[c.shape.length-2],c.shape[c.shape.length-1]]),0),S=[],C=[];y.forEach(t=>{const[s,l]=Gd(t,e);S.push(s),C.push(l)});const o=Mt(Js(S,0),c.shape),x=Mt(Js(C,0),c.shape);return[o,x]}}function Gd(c,e=!1){return pt.tidy(()=>{it(c.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${c.shape.length}D Tensor.`);const f=c.shape[0],y=c.shape[1];let S=vm(f),C=Si(c);const o=Ei([[1]],[1,1]);let x=Si(o);const t=f>=y?y:f;for(let s=0;s<t;++s){const l=C,a=x,r=S;[x,C,S]=pt.tidy(()=>{const i=ve(C,[s,s],[f-s,1]),n=Zu(i),h=ve(C,[s,s],[1,1]),d=Ci(Qu(h,0),Ei([[-1]]),Ei([[1]])),u=me(h,Wt(d,n)),p=ye(i,u);p.shape[0]===1?x=Si(o):x=fn([o,ve(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);const v=Fs(ye(Oe(d,u),n)),m=ve(C,[s,0],[f-s,y]),g=Wt(v,x),T=eh(x);if(s===0)C=me(m,Oe(g,Oe(T,m)));else{const E=me(m,Oe(g,Oe(T,m)));C=fn([ve(C,[0,0],[s,y]),E],0)}const w=eh(g),b=ve(S,[0,s],[f,S.shape[1]-s]);if(s===0)S=me(b,Oe(Oe(b,x),w));else{const E=me(b,Oe(Oe(b,x),w));S=fn([ve(S,[0,0],[f,s]),E],1)}return[x,C,S]}),Ke([l,a,r])}return!e&&f>y&&(S=ve(S,[0,0],[f,y]),C=ve(C,[0,0],[y,y])),[S,C]})}const uw=ct({qr_:ow});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Fn;(function(c){c[c.NONE=0]="NONE",c[c.MEAN=1]="MEAN",c[c.SUM=2]="SUM",c[c.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Fn||(Fn={}));function lw(c,e,f=Fn.SUM_BY_NONZERO_WEIGHTS){const y=st(c,"losses","computeWeightedLoss");let S=null;e!=null&&(S=st(e,"weights","computeWeightedLoss"));const C=S==null?y:Wt(y,S);if(f===Fn.NONE)return C;if(f===Fn.SUM)return Ve(C);if(f===Fn.MEAN){if(S==null)return Mo(C);{const o=y.size/S.size,x=ye(Ve(C),Ve(S));return o>1?ye(x,Ce(o)):x}}if(f===Fn.SUM_BY_NONZERO_WEIGHTS){if(S==null)return ye(Ve(C),Ce(y.size));{const o=Wt(S,tr(y.shape)),x=We(Ve(Rm(o,Ce(0))),"float32");return ye(Ve(C),x)}}throw Error(`Unknown reduction: ${f}`)}const ei=ct({computeWeightedLoss_:lw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hw(c,e,f,y=Fn.SUM_BY_NONZERO_WEIGHTS){const S=st(c,"labels","absoluteDifference"),C=st(e,"predictions","absoluteDifference");let o=null;f!=null&&(o=st(f,"weights","absoluteDifference")),zn(S.shape,C.shape,"Error in absoluteDifference: ");const x=Xn(me(S,C));return ei(x,o,y)}const fw=ct({absoluteDifference_:hw});function cw(c,e,f,y,S=Fn.SUM_BY_NONZERO_WEIGHTS){const C=st(c,"labels","cosineDistance"),o=st(e,"predictions","cosineDistance");let x=null;y!=null&&(x=st(y,"weights","cosineDistance")),zn(C.shape,o.shape,"Error in cosineDistance: ");const t=Ce(1),s=me(t,Ve(Wt(C,o),f,!0));return ei(s,x,S)}const dw=ct({cosineDistance_:cw});function pw(c,e,f,y=Fn.SUM_BY_NONZERO_WEIGHTS){let S=st(c,"labels","hingeLoss");const C=st(e,"predictions","hingeLoss");let o=null;f!=null&&(o=st(f,"weights","hingeLoss")),zn(S.shape,C.shape,"Error in hingeLoss: ");const x=Ce(1);S=me(Wt(Ce(2),S),x);const t=qu(me(x,Wt(S,C)));return ei(t,o,y)}const vw=ct({hingeLoss_:pw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mw(c,e,f,y=1,S=Fn.SUM_BY_NONZERO_WEIGHTS){const C=st(c,"labels","huberLoss"),o=st(e,"predictions","huberLoss");let x=null;f!=null&&(x=st(f,"weights","huberLoss")),zn(C.shape,o.shape,"Error in huberLoss: ");const t=Ce(y),s=Xn(me(o,C)),l=No(s,t),a=me(s,l),r=ne(Wt(Ce(.5),Ts(l)),Wt(t,a));return ei(r,x,S)}const gw=ct({huberLoss_:mw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xw(c,e,f,y=1e-7,S=Fn.SUM_BY_NONZERO_WEIGHTS){const C=st(c,"labels","logLoss"),o=st(e,"predictions","logLoss");let x=null;f!=null&&(x=st(f,"weights","logLoss")),zn(C.shape,o.shape,"Error in logLoss: ");const t=Ce(1),s=Ce(y),l=Fs(Wt(C,Oa(ne(o,s)))),a=Wt(me(t,C),Oa(ne(me(t,o),s))),r=me(l,a);return ei(r,x,S)}const yw=ct({logLoss_:xw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tw(c,e,f,y=Fn.SUM_BY_NONZERO_WEIGHTS){const S=st(c,"labels","meanSquaredError"),C=st(e,"predictions","meanSquaredError");let o=null;f!=null&&(o=st(f,"weights","meanSquaredError")),zn(S.shape,C.shape,"Error in meanSquaredError: ");const x=Lm(S,C);return ei(x,o,y)}const Sw=ct({meanSquaredError_:Tw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cw(c,e){const f=st(c,"labels","sigmoidCrossEntropyWithLogits"),y=st(e,"logits","sigmoidCrossEntropyWithLogits");zn(f.shape,y.shape,"Error in sigmoidCrossEntropyWithLogits: ");const S=qu(y),C=Wt(y,f),o=Tm(Zs(Fs(Xn(y))));return ne(me(S,C),o)}function Ew(c,e,f,y=0,S=Fn.SUM_BY_NONZERO_WEIGHTS){let C=st(c,"multiClassLabels","sigmoidCrossEntropy");const o=st(e,"logits","sigmoidCrossEntropy");let x=null;if(f!=null&&(x=st(f,"weights","sigmoidCrossEntropy")),zn(C.shape,o.shape,"Error in sigmoidCrossEntropy: "),y>0){const s=Ce(y),l=Ce(1),a=Ce(.5);C=ne(Wt(C,me(l,s)),Wt(a,s))}const t=Cw(C,o);return ei(t,x,S)}const ww=ct({sigmoidCrossEntropy_:Ew});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bw(c,e,f=-1){if(f===-1&&(f=e.rank-1),f!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${f}`);return Qs((S,C,o)=>{const t=Cm(C,[f],!0),s=me(We(C,"float32"),t);o([S,s]);const l=Fs(Wt(s,S));return{value:Ve(l,[f]),gradFunc:(i,n)=>{const[h,d]=n,u=sn(i.shape,[f]);return[Wt(Mt(i,u),me(We(h,"float32"),Zs(d))),Wt(Mt(i,u),me(Zs(d),We(h,"float32")))]}}})(c,e)}function Aw(c,e,f,y=0,S=Fn.SUM_BY_NONZERO_WEIGHTS){let C=st(c,"onehotLabels","softmaxCrossEntropy");const o=st(e,"logits","softmaxCrossEntropy");let x=null;if(f!=null&&(x=st(f,"weights","softmaxCrossEntropy")),zn(C.shape,o.shape,"Error in softmaxCrossEntropy: "),y>0){const s=Ce(y),l=Ce(1),a=Ce(C.shape[1]);C=ne(Wt(C,me(l,s)),ye(s,a))}const t=bw(C,o);return ei(t,x,S)}const Rw=ct({softmaxCrossEntropy_:Aw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iw(c,e,f,y){const S=st(c,"indices","sparseFillEmptyRows","int32"),C=st(e,"values","sparseFillEmptyRows"),o=st(f,"denseShape","sparseFillEmptyRows","int32"),x=st(y,"defaultValue","sparseFillEmptyRows",C.dtype);if(S.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${S.shape}`);if(C.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${C.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(x.rank!==0)throw new Error(`Default value should be a scalar but received shape ${x.shape}`);const t={indices:S,values:C,denseShape:o,defaultValue:x},s=pt.runKernel(nc,t);return{outputIndices:s[0],outputValues:s[1],emptyRowIndicator:s[2],reverseIndexMap:s[3]}}const Pw=ct({sparseFillEmptyRows_:Iw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fw(c,e,f){const y=st(c,"inputIndices","sparseReshape","int32"),S=st(e,"inputShape","sparseReshape","int32"),C=st(f,"newShape","sparseReshape","int32");if(y.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${y.shape}`);if(S.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${S.shape}`);if(C.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${C.shape}`);const o={inputIndices:y,inputShape:S,newShape:C},x=pt.runKernel(Gu,o);return{outputIndices:x[0],outputShape:x[1]}}const Mw=ct({sparseReshape_:Fw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nw(c,e,f){const y=st(c,"data","sparseSegmentMean"),S=st(e,"indices","sparseSegmentMean","int32"),C=st(f,"segmentIds","sparseSegmentMean","int32");if(y.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(S.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${S.shape}`);if(C.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${C.shape}`);const o={data:y,indices:S,segmentIds:C};return pt.runKernel(sc,o)}const Ow=ct({sparseSegmentMean_:Nw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dw(c,e,f){const y=st(c,"data","sparseSegmentSum"),S=st(e,"indices","sparseSegmentSum","int32"),C=st(f,"segmentIds","sparseSegmentSum","int32");if(y.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(S.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${S.shape}`);if(C.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${C.shape}`);const o={data:y,indices:S,segmentIds:C};return pt.runKernel(ic,o)}const Lw=ct({sparseSegmentSum_:Dw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bw(c,e,f,y,S,C,o,x){const t=st(c,"data","stringNGrams","string");if(t.dtype!=="string")throw new Error("Data must be of datatype string");if(t.shape.length!==1)throw new Error(`Data must be a vector, saw: ${t.shape}`);const s=st(e,"dataSplits","stringNGrams");if(s.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const l={separator:f,nGramWidths:y,leftPad:S,rightPad:C,padWidth:o,preserveShortSequences:x},a={data:t,dataSplits:s},r=pt.runKernel(ac,a,l);return{nGrams:r[0],nGramsSplits:r[1]}}const $w=ct({stringNGrams_:Bw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gw(c,e,f=!0){const y=st(c,"input","stringSplit","string"),S=st(e,"delimiter","stringSplit","string");if(y.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${y.shape}`);if(S.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${S.shape}`);const C={skipEmpty:f},o={input:y,delimiter:S},x=pt.runKernel(oc,o,C);return{indices:x[0],values:x[1],shape:x[2]}}const Uw=ct({stringSplit_:Gw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vw(c,e){const f=st(c,"input","stringToHashBucketFast","string"),y={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const S={input:f};return pt.runKernel(uc,S,y)}const zw=ct({stringToHashBucketFast_:Vw});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kw(c,e,f,y=!0){const S=st(c,"input","staticRegexReplace","string"),C={pattern:e,rewrite:f,replaceGlobal:y};return pt.runKernel(Sv,{x:S},C)}const Ww=ct({staticRegexReplace_:kw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xw={fft:Oc,ifft:Oo,rfft:Dc,irfft:Dm},Hw={hammingWindow:vE,hannWindow:km,frame:Wm,stft:yE},ea={flipLeftRight:EE,grayscaleToRGB:bE,resizeNearestNeighbor:JE,resizeBilinear:ZE,rgbToGrayscale:RE,rotateWithOffset:PE,cropAndResize:SE,nonMaxSuppression:ME,nonMaxSuppressionAsync:UE,nonMaxSuppressionWithScore:zE,nonMaxSuppressionWithScoreAsync:WE,nonMaxSuppressionPadded:HE,nonMaxSuppressionPaddedAsync:KE,threshold:tw,transform:nw},Yw={bandPart:iw,gramSchmidt:aw,qr:uw},Kw={absoluteDifference:fw,computeWeightedLoss:ei,cosineDistance:dw,hingeLoss:vw,huberLoss:gw,logLoss:yw,meanSquaredError:Sw,sigmoidCrossEntropy:ww,softmaxCrossEntropy:Rw},jw={sparseFillEmptyRows:Pw,sparseReshape:Mw,sparseSegmentMean:Ow,sparseSegmentSum:Lw},Zw={stringNGrams:$w,stringSplit:Uw,stringToHashBucketFast:zw,staticRegexReplace:Ww};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qw=new Map,Jw=new Map;class qw{getClassName(){return this.constructor.className}static fromConfig(e,f){return new e(f)}}class Zi{constructor(){this.classNameMap={}}static getMap(){return Zi.instance==null&&(Zi.instance=new Zi),Zi.instance}static register(e){Zi.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function _w(c,e,f){it(c.className!=null,()=>"Class being registered does not have the static className property defined."),it(typeof c.className=="string",()=>"className is required to be a string, but got type "+typeof c.className),it(c.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof f>"u"&&(f=c.className);const y=f,S=e+">"+y;return Zi.register(c),Qw.set(S,c),Jw.set(c,S),c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xr extends qw{minimize(e,f=!1,y){const{value:S,grads:C}=this.computeGradients(e,y);if(y!=null){const o=y.map(x=>({name:x.name,tensor:C[x.name]}));this.applyGradients(o)}else this.applyGradients(C);return Ke(C),f?S:(S.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,f){return UT(e,f)}dispose(){this.iterations_!=null&&Ke(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ce(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(xr,Symbol.hasInstance,{value:c=>c.minimize!=null&&c.computeGradients!=null&&c.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t6 extends xr{static get className(){return"Adadelta"}constructor(e,f,y=null){super(),this.learningRate=e,this.rho=f,this.epsilon=y,this.accumulatedGrads=[],this.accumulatedUpdates=[],y==null&&(this.epsilon=pt.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(y=>y.name):Object.keys(e)).forEach((y,S)=>{const C=pt.registeredVariables[y],o=!1;this.accumulatedGrads[S]==null&&(this.accumulatedGrads[S]={originalName:`${y}/accum_grad`,variable:de(()=>jn(C).variable(o))}),this.accumulatedUpdates[S]==null&&(this.accumulatedUpdates[S]={originalName:`${y}/accum_var`,variable:de(()=>jn(C).variable(o))});const x=Array.isArray(e)?e[S].tensor:e[y];if(x==null)return;const t=this.accumulatedGrads[S].variable,s=this.accumulatedUpdates[S].variable;de(()=>{const l=ne(Wt(t,this.rho),Wt(Ts(x),1-this.rho)),a=Wt(ye(js(ne(s,this.epsilon)),js(ne(t,this.epsilon))),x),r=ne(Wt(s,this.rho),Wt(Ts(a),1-this.rho));t.assign(l),s.assign(r);const i=ne(Wt(a,-this.learningRate),C);C.assign(i)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Ke(this.accumulatedGrads.map(e=>e.variable)),Ke(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(f=>({name:f.originalName,tensor:f.variable})))}async setWeights(e){e=await this.extractIterations(e);const f=e.length/2,y=!1;this.accumulatedGrads=e.slice(0,f).map(S=>({originalName:S.name,variable:S.tensor.variable(y)})),this.accumulatedUpdates=e.slice(f,f*2).map(S=>({originalName:S.name,variable:S.tensor.variable(y)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,f){return new e(f.learningRate,f.rho,f.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e6 extends xr{static get className(){return"Adagrad"}constructor(e,f=.1){super(),this.learningRate=e,this.initialAccumulatorValue=f,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(y=>y.name):Object.keys(e)).forEach((y,S)=>{const C=pt.registeredVariables[y];this.accumulatedGrads[S]==null&&(this.accumulatedGrads[S]={originalName:`${y}/accumulator`,variable:de(()=>Ya(C.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[S].tensor:e[y];if(o==null)return;const x=this.accumulatedGrads[S].variable;de(()=>{const t=ne(x,Ts(o));x.assign(t);const s=ne(Wt(ye(o,js(ne(t,pt.backend.epsilon()))),-this.learningRate),C);C.assign(s)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Ke(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const f=!1;this.accumulatedGrads=e.map(y=>({originalName:y.name,variable:y.tensor.variable(f)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,f){return new e(f.learningRate,f.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n6 extends xr{static get className(){return"Adam"}constructor(e,f,y,S=null){super(),this.learningRate=e,this.beta1=f,this.beta2=y,this.epsilon=S,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],de(()=>{this.accBeta1=Ce(f).variable(),this.accBeta2=Ce(y).variable()}),S==null&&(this.epsilon=pt.backend.epsilon())}applyGradients(e){const f=Array.isArray(e)?e.map(y=>y.name):Object.keys(e);de(()=>{const y=me(1,this.accBeta1),S=me(1,this.accBeta2);f.forEach((C,o)=>{const x=pt.registeredVariables[C],t=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${C}/m`,variable:de(()=>jn(x).variable(t))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${C}/v`,variable:de(()=>jn(x).variable(t))});const s=Array.isArray(e)?e[o].tensor:e[C];if(s==null)return;const l=this.accumulatedFirstMoment[o].variable,a=this.accumulatedSecondMoment[o].variable,r=ne(Wt(l,this.beta1),Wt(s,1-this.beta1)),i=ne(Wt(a,this.beta2),Wt(Ts(s),1-this.beta2)),n=ye(r,y),h=ye(i,S);l.assign(r),a.assign(i);const d=ne(Wt(ye(n,ne(js(h),this.epsilon)),-this.learningRate),x);x.assign(d)}),this.accBeta1.assign(Wt(this.accBeta1,this.beta1)),this.accBeta2.assign(Wt(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Ke(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(f=>({name:f.originalName,tensor:f.variable})))}async setWeights(e){e=await this.extractIterations(e),de(()=>{this.accBeta1.assign(Na(this.beta1,this.iterations_+1)),this.accBeta2.assign(Na(this.beta2,this.iterations_+1))});const f=e.length/2,y=!1;this.accumulatedFirstMoment=e.slice(0,f).map(S=>({originalName:S.name,variable:S.tensor.variable(y)})),this.accumulatedSecondMoment=e.slice(f,f*2).map(S=>({originalName:S.name,variable:S.tensor.variable(y)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,f){return new e(f.learningRate,f.beta1,f.beta2,f.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s6 extends xr{static get className(){return"Adamax"}constructor(e,f,y,S=null,C=0){super(),this.learningRate=e,this.beta1=f,this.beta2=y,this.epsilon=S,this.decay=C,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],de(()=>{this.iteration=Ce(0).variable(),this.accBeta1=Ce(f).variable()}),S==null&&(this.epsilon=pt.backend.epsilon())}applyGradients(e){const f=Array.isArray(e)?e.map(y=>y.name):Object.keys(e);de(()=>{const y=me(1,this.accBeta1),S=ye(-this.learningRate,ne(Wt(this.iteration,this.decay),1));f.forEach((C,o)=>{const x=pt.registeredVariables[C],t=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${C}/m`,variable:jn(x).variable(t)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${C}/v`,variable:jn(x).variable(t)});const s=Array.isArray(e)?e[o].tensor:e[C];if(s==null)return;const l=this.accumulatedFirstMoment[o].variable,a=this.accumulatedWeightedInfNorm[o].variable,r=ne(Wt(l,this.beta1),Wt(s,1-this.beta1)),i=Wt(a,this.beta2),n=Xn(s),h=Am(i,n);l.assign(r),a.assign(h);const d=ne(Wt(ye(S,y),ye(r,ne(h,this.epsilon))),x);x.assign(d)}),this.iteration.assign(ne(this.iteration,1)),this.accBeta1.assign(Wt(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Ke(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,f){return new e(f.learningRate,f.beta1,f.beta2,f.epsilon,f.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Km extends xr{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(y=>y.name):Object.keys(e)).forEach((y,S)=>{const C=Array.isArray(e)?e[S].tensor:e[y];if(C==null)return;const o=pt.registeredVariables[y];de(()=>{const x=ne(Wt(this.c,C),o);o.assign(x)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Is(Ce(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,f){return new e(f.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i6 extends Km{static get className(){return"Momentum"}constructor(e,f,y=!1){super(e),this.learningRate=e,this.momentum=f,this.useNesterov=y,this.accumulations=[],this.m=Ce(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(y=>y.name):Object.keys(e)).forEach((y,S)=>{const C=pt.registeredVariables[y];this.accumulations[S]==null&&(this.accumulations[S]={originalName:`${y}/momentum`,variable:de(()=>jn(C).variable(!1))});const o=this.accumulations[S].variable,x=Array.isArray(e)?e[S].tensor:e[y];x!=null&&de(()=>{let t;const s=ne(Wt(this.m,o),x);this.useNesterov?t=ne(Wt(this.c,ne(x,Wt(s,this.m))),C):t=ne(Wt(this.c,s),C),o.assign(s),C.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Ke(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const f=!1;this.accumulations=e.map(y=>({originalName:y.name,variable:y.tensor.variable(f)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,f){return new e(f.learningRate,f.momentum,f.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r6 extends xr{static get className(){return"RMSProp"}constructor(e,f=.9,y=0,S=null,C=!1){if(super(),this.learningRate=e,this.decay=f,this.momentum=y,this.epsilon=S,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=C,S==null&&(this.epsilon=pt.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(y=>y.name):Object.keys(e)).forEach((y,S)=>{const C=pt.registeredVariables[y],o=!1;this.accumulatedMeanSquares[S]==null&&(this.accumulatedMeanSquares[S]={originalName:`${y}/rms`,variable:de(()=>jn(C).variable(o))}),this.accumulatedMoments[S]==null&&(this.accumulatedMoments[S]={originalName:`${y}/momentum`,variable:de(()=>jn(C).variable(o))}),this.accumulatedMeanGrads[S]==null&&this.centered&&(this.accumulatedMeanGrads[S]={originalName:`${y}/mg`,variable:de(()=>jn(C).variable(o))});const x=Array.isArray(e)?e[S].tensor:e[y];if(x==null)return;const t=this.accumulatedMeanSquares[S].variable,s=this.accumulatedMoments[S].variable;de(()=>{const l=ne(Wt(t,this.decay),Wt(Ts(x),1-this.decay));if(this.centered){const a=this.accumulatedMeanGrads[S].variable,r=ne(Wt(a,this.decay),Wt(x,1-this.decay)),i=ye(Wt(x,this.learningRate),js(me(l,ne(Ts(r),this.epsilon)))),n=ne(Wt(s,this.momentum),i);t.assign(l),a.assign(r),s.assign(n);const h=me(C,n);C.assign(h)}else{const a=ne(Wt(t,this.decay),Wt(Ts(x),1-this.decay)),r=ne(Wt(s,this.momentum),ye(Wt(x,this.learningRate),js(ne(a,this.epsilon))));t.assign(a),s.assign(r);const i=me(C,r);C.assign(i)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Ke(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Ke(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Ke(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(f=>({name:f.originalName,tensor:f.variable})))}async setWeights(e){e=await this.extractIterations(e);const f=this.centered?e.length/3:e.length/2,y=!1;this.accumulatedMeanSquares=e.slice(0,f).map(S=>({originalName:S.name,variable:S.tensor.variable(y)})),this.accumulatedMoments=e.slice(f,f*2).map(S=>({originalName:S.name,variable:S.tensor.variable(y)})),this.centered&&(this.accumulatedMeanGrads=e.slice(f*2,f*3).map(S=>({originalName:S.name,variable:S.tensor.variable(y)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,f){return new e(f.learningRate,f.decay,f.momentum,f.epsilon,f.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6=[t6,e6,n6,s6,i6,r6,Km];function o6(){for(const c of a6)_w(c)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6="model",l6=".json",h6=".weights.bin";function Ud(c){return new Promise(e=>setTimeout(e)).then(c)}class hr{constructor(e){if(!St().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(hr.URL_SCHEME)&&(e=e.slice(hr.URL_SCHEME.length)),(e==null||e.length===0)&&(e=u6),this.modelJsonFileName=e+l6,this.weightDataFileName=e+h6}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const f=ws.join(e.weightData),y=window.URL.createObjectURL(new Blob([f],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const S=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],C=Yv(e,S),o=window.URL.createObjectURL(new Blob([JSON.stringify(C)],{type:"application/json"})),x=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(x.download=this.modelJsonFileName,x.href=o,await Ud(()=>x.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const t=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=y,await Ud(()=>t.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Xa(e)}}}}hr.URL_SCHEME="downloads://";class f6{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,f)=>{const y=new FileReader;y.onload=S=>{const C=JSON.parse(S.target.result),o=C.modelTopology;if(o==null){f(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(C.weightsManifest==null){f(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const t=xc(C,s=>this.loadWeights(s));e(t)},y.onerror=S=>f(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),y.readAsText(this.jsonFile)})}loadWeights(e){const f=[],y=[];for(const o of e)f.push(...o.weights),y.push(...o.paths);const S=this.checkManifestAndWeightFiles(e),C=y.map(o=>this.loadWeightsFile(o,S[o]));return Promise.all(C).then(o=>[f,o])}loadWeightsFile(e,f){return new Promise((y,S)=>{const C=new FileReader;C.onload=o=>{const x=o.target.result;y(x)},C.onerror=o=>S(`Failed to weights data from file of path '${e}'.`),C.readAsArrayBuffer(f)})}checkManifestAndWeightFiles(e){const f=[],y=this.weightsFiles.map(C=>Bd(C.name)),S={};for(const C of e)C.paths.forEach(o=>{const x=Bd(o);if(f.indexOf(x)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${x}'`);if(f.push(x),y.indexOf(x)===-1)throw new Error(`Weight file with basename '${x}' is not provided.`);S[o]=this.weightsFiles[y.indexOf(x)]});if(f.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${f.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return S}}const c6=c=>St().getBool("IS_BROWSER")&&!Array.isArray(c)&&c.startsWith(hr.URL_SCHEME)?d6(c.slice(hr.URL_SCHEME.length)):null;Ye.registerSaveRouter(c6);function d6(c="model"){return new hr(c)}function p6(c){return new f6(c)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vd(c,e,f,y){o(c),f=f??0,y=y??1,x(f,y);let S=0;const C=t=>(t.then(s=>{const l=f+ ++S/c.length*(y-f);return e(l),s}),t);function o(t){it(t!=null&&Array.isArray(t)&&t.length>0,()=>"promises must be a none empty array")}function x(t,s){it(t>=0&&t<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${t}`),it(s>=0&&s<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${s}`),it(s>=t,()=>`startFraction must be no more than endFraction, but got startFraction ${t} and endFraction ${s}`)}return Promise.all(c.map(C))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function jm(c,e){e==null&&(e={});const f=e.fetchFunc==null?St().platform.fetch:e.fetchFunc,y=c.map(a=>f(a,e.requestInit,{isBinary:!0})),S=0,C=.5,x=(e.onProgress==null?await Promise.all(y):await Vd(y,e.onProgress,S,C)).map(a=>a.arrayBuffer()),t=.5,s=1;return e.onProgress==null?await Promise.all(x):await Vd(x,e.onProgress,t,s)}async function v6(c,e="",f,y){return Zm(o=>jm(o,{requestInit:y}))(c,e,f)}function Zm(c){return async(e,f="",y)=>{const S=e.map(()=>!1),C={},o=y!=null?y.map(()=>!1):[],x=[];if(e.forEach((i,n)=>{let h=0;i.weights.forEach(d=>{const u="quantization"in d?d.quantization.dtype:d.dtype,p=Kl[u]*bt(d.shape),v=()=>{S[n]=!0,C[n]==null&&(C[n]=[]),C[n].push({manifestEntry:d,groupOffset:h,sizeBytes:p})};y!=null?y.forEach((m,g)=>{m===d.name&&(v(),o[g]=!0)}):v(),x.push(d.name),h+=p})}),!o.every(i=>i)){const i=y.filter((n,h)=>!o[h]);throw new Error(`Could not find weights in manifest with names: ${i.join(", ")}. 
Manifest JSON has weights with names: ${x.join(", ")}.`)}const t=S.reduce((i,n,h)=>(n&&i.push(h),i),[]),s=[];t.forEach(i=>{e[i].paths.forEach(n=>{const h=f+(f.endsWith("/")?"":"/")+n;s.push(h)})});const l=await c(s),a={};let r=0;return t.forEach(i=>{const n=e[i].paths.length,h=new ws(l.slice(r,r+n));C[i].forEach(u=>{const p=h.slice(u.groupOffset,u.groupOffset+u.sizeBytes),v=Hv(p,[u.manifestEntry]);for(const m in v)a[m]=v[m]}),r+=n}),a}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m6="application/octet-stream",g6="application/json";class Gc{constructor(e,f){if(this.DEFAULT_METHOD="POST",f==null&&(f={}),this.weightPathPrefix=f.weightPathPrefix,this.onProgress=f.onProgress,this.weightUrlConverter=f.weightUrlConverter,f.fetchFunc!=null?(it(typeof f.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=f.fetchFunc):this.fetch=St().platform.fetch,it(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&it(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,f.requestInit!=null&&f.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=f.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const f=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);f.body=new FormData;const y=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],S=Yv(e,y);if(f.body.append("model.json",new Blob([JSON.stringify(S)],{type:g6}),"model.json"),e.weightData!=null){const o=ws.join(e.weightData);f.body.append("model.weights.bin",new Blob([o],{type:m6}),"model.weights.bin")}const C=await this.fetch(this.path,f);if(C.ok)return{modelArtifactsInfo:Xa(e),responses:[C]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${C.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let f;try{f=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const y=f.modelTopology,S=f.weightsManifest;if(y==null&&S==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return xc(f,C=>this.loadWeights(C))}async loadWeights(e){const f=Array.isArray(this.path)?this.path[1]:this.path,[y,S]=x6(f),C=this.weightPathPrefix||y,o=jv(e),x=[],t=[];for(const l of e)for(const a of l.paths)this.weightUrlConverter!=null?t.push(this.weightUrlConverter(a)):x.push(C+a+S);this.weightUrlConverter&&x.push(...await Promise.all(t));const s=await jm(x,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,s]}}Gc.URL_SCHEME_REGEX=/^https?:\/\//;function x6(c){const e=c.lastIndexOf("/"),f=c.lastIndexOf("?"),y=c.substring(0,e),S=f>e?c.substring(f):"";return[y+"/",S]}function nh(c){return c.match(Gc.URL_SCHEME_REGEX)!=null}const Qm=(c,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let f=!0;if(Array.isArray(c)?f=c.every(y=>nh(y)):f=nh(c),f)return Uc(c,e)}return null};Ye.registerSaveRouter(Qm);Ye.registerLoadRouter(Qm);function Uc(c,e){return new Gc(c,e)}function y6(c,e){return Uc(c,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gl{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Jm{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class T6{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=f=>Promise.resolve(e.save(f)))}}function S6(c,e,f,y){const S=arguments;return new T6(qm(...S))}function qm(c,e,f,y){return arguments.length===1?c.modelTopology!=null||c.weightSpecs!=null?new gl(c):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new gl({modelTopology:c})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new gl({modelTopology:c,weightSpecs:e,weightData:f,trainingConfig:y}))}function C6(c){return new Jm(c)}function E6(c){return new Jm(c)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _m=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:ws,browserFiles:p6,browserHTTPRequest:y6,concatenateArrayBuffers:bx,copyModel:Kx,decodeWeights:Hv,encodeWeights:Sx,fromMemory:S6,fromMemorySync:qm,getLoadHandlers:Ox,getModelArtifactsForJSON:xc,getModelArtifactsForJSONSync:Kv,getModelArtifactsInfoForJSON:Xa,getSaveHandlers:Nx,getWeightSpecs:jv,http:Uc,isHTTPScheme:nh,listModels:Hx,loadWeights:v6,moveModel:jx,registerLoadRouter:Mx,registerSaveRouter:Fx,removeModel:Yx,weightsLoaderFactory:Zm,withSaveHandler:C6,withSaveHandlerSync:E6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Xi,zd=!1;function w6(c,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(c==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let f=!1,y=!1,S=!1,C=!1,o=!1,x=!1;if(c.data instanceof Uint8Array)f=!0;else if(typeof ImageData<"u"&&c instanceof ImageData)y=!0;else if(typeof HTMLVideoElement<"u"&&c instanceof HTMLVideoElement)S=!0;else if(typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement)C=!0;else if(c.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&c instanceof ImageBitmap)x=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${c.constructor.name}`);if(wo(Vl,pt.backendName)!=null){const n={pixels:c},h={numChannels:e};return pt.runKernel(Vl,n,h)}const[s,l]=S?[c.videoWidth,c.videoHeight]:[c.width,c.height];let a;if(o)a=c.getContext("2d").getImageData(0,0,s,l).data;else if(y||f)a=c.data;else if(C||S||x){if(Xi==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Xi=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Xi=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Xi.canvas.width=s,Xi.canvas.height=l,Xi.drawImage(c,0,0,s,l),a=Xi.getImageData(0,0,s,l).data}let r;if(e===4)r=new Int32Array(a);else{const n=s*l;r=new Int32Array(n*e);for(let h=0;h<n;h++)for(let d=0;d<e;++d)r[h*e+d]=a[h*4+d]}return $m(r,[l,s,e],"int32")}function b6(c){if(c.rank!==2&&c.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${c.rank}.`);const e=c.rank===2?1:c.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(c.dtype!=="float32"&&c.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${c.dtype}. Please use float32 or int32 tensors.`)}async function tg(c,e){let f=st(c,"img","toPixels");if(!(c instanceof Je)){const s=f;f=We(s,"int32"),s.dispose()}b6(f);const[y,S]=f.shape.slice(0,2),C=f.rank===2?1:f.shape[2],o=await f.data(),x=f.dtype==="float32"?255:1,t=new Uint8ClampedArray(S*y*4);for(let s=0;s<y*S;++s){const l=[0,0,0,255];for(let r=0;r<C;r++){const i=o[s*C+r];if(f.dtype==="float32"){if(i<0||i>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${i}.`)}else if(f.dtype==="int32"&&(i<0||i>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${i}.`);C===1?(l[0]=i*x,l[1]=i*x,l[2]=i*x):l[r]=i*x}const a=s*4;t[a+0]=Math.round(l[0]),t[a+1]=Math.round(l[1]),t[a+2]=Math.round(l[2]),t[a+3]=Math.round(l[3])}if(e!=null){zd||wo(H2,pt.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),zd=!0),e.width=S,e.height=y;const s=e.getContext("2d"),l=new ImageData(t,S,y);s.putImageData(l,0,0)}return f!==c&&f.dispose(),t}const eg=ct({fromPixels_:w6});function Vc(c,e){const f=c.shape.length,y=e.shape.length;if(f<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${f}.`);if(y<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${y}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[y-1]>f)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[y-1]} vs. ${f}`);if(bt(c.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${c.shape}.`);const S=e.shape,C=S[S.length-1];let o=1;for(let a=0;a<S.length-1;++a)o*=S[a];const x=c.shape,t=S.slice();t.pop();let s=1;for(let a=C;a<f;++a)s*=x[a],t.push(x[a]);const l=[...Me(c.shape).map(a=>a/s),1].slice(0,C);return[t,o,s,l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sh=-2,A6=-1;function ng(c,e,f){const y=c.shape.length;it(y===e.length,()=>`Error in slice${y}D: Length of begin ${e} must match the rank of the array (${y}).`),it(y===f.length,()=>`Error in slice${y}D: Length of size ${f} must match the rank of the array (${y}).`);for(let S=0;S<y;++S)it(e[S]+f[S]<=c.shape[S],()=>`Error in slice${y}D: begin[${S}] + size[${S}] (${e[S]+f[S]}) would overflow input.shape[${S}] (${c.shape[S]})`)}function R6(c){const e=[];let f=0;for(;c>0;)c&1&&e.push(f),c/=2,f++;return e}function zc(c,e,f){const y=[];for(let S=0;S<c.length;S++)y[S]=Math.ceil((e[S]-c[S])/f[S]);return y}function sg(c,e,f,y){const S=[...c];for(let C=S.length;C<y.length;C++)S.push(1);for(let C=0;C<f;C++)C===0?S[e]=1:(S.splice(e,0,1),S.pop());return S}function ig(c,e,f){return f<=c?f:f-(e-1)}function rg(c,e){const f=[];for(let y=0;y<c;y++)f.push(e+y);return f}function I6(c,e,f,y,S,C,o,x,t){const s=c.length;let l=new Array(s),a=new Array(s),r=new Array(s);if(e.length&&f>0){const i=e[0],n=f+1;l=ag(o,i,n,y,c),a=og(x,i,n,S,c),r=sg(C,i,n,c)}else for(let i=0;i<s;i++)l[i]=lg(o,y,C,c,i,t),a[i]=hg(x,S,C,c,i,t),r[i]=ug(C,i,t);return{begin:l,end:a,strides:r}}function ag(c,e,f,y,S){const C=[...S],o=rg(f,e);for(let x=0;x<C.length;x++)if(o.indexOf(x)>-1)C[x]=0;else{const t=ig(e,f,x);let s=y[t];c&1<<t&&(s=0),C[x]=s}return C}function og(c,e,f,y,S){const C=[...S],o=rg(f,e);for(let x=0;x<C.length;x++)if(o.indexOf(x)>-1)C[x]=Number.MAX_SAFE_INTEGER;else{const t=ig(e,f,x);let s=y[t];c&1<<t&&(s=Number.MAX_SAFE_INTEGER),C[x]=s}for(let x=0;x<C.length;x++){const t=S[x];C[x]<0&&(C[x]+=t),C[x]=Co(0,C[x],S[x])}return C}function ug(c,e,f){let y=c[e];return(f&1<<e||y==null)&&(y=1),y}function lg(c,e,f,y,S,C){let o=e[S];const x=f[S]||1;(c&1<<S||C&1<<S||o==null)&&(x>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const t=y[S];return o<0&&(o+=t),o=Co(0,o,t-1),o}function hg(c,e,f,y,S,C){let o=e[S];const x=f[S]||1;(c&1<<S||C&1<<S||o==null)&&(x>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const t=y[S];return o<0&&(o+=t),x>0?o=Co(0,o,t):o=Co(-1,o,t-1),o}function sl(c,e,f){let y=f.length;for(let S=0;S<f.length;S++)if(f[S]>1){y=S;break}for(let S=y+1;S<f.length;S++)if(e[S]>0||f[S]!==c[S])return!1;return!0}function il(c,e){let f=c.length>0?c[c.length-1]:1;for(let y=0;y<c.length-1;y++)f+=c[y]*e[y];return f}function kc(c,e,f){let y;const S=c.shape.length;typeof e=="number"?y=[e,...new Array(S-1).fill(0)]:e.length<S?y=e.concat(new Array(S-e.length).fill(0)):y=e.slice(),y.forEach(o=>{it(o!==-1,()=>"slice() does not support negative begin indexing.")});let C;return f==null?C=new Array(S).fill(-1):typeof f=="number"?C=[f,...new Array(S-1).fill(-1)]:f.length<S?C=f.concat(new Array(S-f.length).fill(-1)):C=f,C=C.map((o,x)=>o>=0?o:(it(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${x}.`),c.shape[x]-y[x])),[y,C]}function Wc(c,e,f,y,S,C,o,x,t){let s;if(y==null?(s=new Array(e.length),s.fill(1)):s=y,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let l=!1;const a={dims:s.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:f.slice(),strides:s.slice(),beginMask:S,endMask:C,ellipsisMask:o,newAxisMask:x,shrinkAxisMask:t};for(let v=0;v<a.dims;v++)l&&1<<v&x&&a.numAddAxisAfterEllipsis++,1<<v&o&&(l=!0);l||(a.ellipsisMask|=1<<a.dims,a.dims++);const r={dims:c.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};P6(a,r);let i=!0,n=!0,h=!0;const d=[],u=[];for(let v=0;v<c.length;++v){if(r.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);const m=!!(r.shrinkAxisMask&1<<v),g=c[v];if(g===-1){d.push(m?1:-1);continue}const T=[r.beginMask&1<<v,r.endMask&1<<v],w=[r.strides[v]>0?0:-1,r.strides[v]>0?g:g-1];if(m&&r.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");h=h&&r.strides[v]===1;const b=!!(r.beginMask&1<<v&&r.endMask&1<<v);if(r.beginValid&&r.endValid){if(m){const I=r.begin[v]<0?g+r.begin[v]:r.begin[v];if(r.begin[v]=I,r.end[v]=r.begin[v]+1,I<0||I>=g)throw Error(`slice index ${r.begin[v]} of dimension ${v} out of bounds.`)}else r.begin[v]=kd(r.begin[v],0,r.strides[v],g,T,w),r.end[v]=kd(r.end[v],1,r.strides[v],g,T,w);const R=r.strides[v]===1&&r.begin[v]===0&&r.end[v]===g;i=i&&R,n=n&&(v===0&&r.strides[v]===1||R)}else i=i&&r.strides[v]===1&&b,n=n&&(v===0&&r.strides[v]===1||b);let E,A=!1;if(r.beginValid&&r.endValid?(E=r.end[v]-r.begin[v],A=!0):m?(E=1,A=!0):b&&g>=0&&(r.strides[v]<0?E=-g:E=g,A=!0),A){let R;E===0||E<0!=r.strides[v]<0?R=0:R=Math.trunc(E/r.strides[v])+(E%r.strides[v]!==0?1:0),d.push(R)}else d.push(-1)}for(let v=0;v<r.finalShapeGatherIndices.length;++v){const m=r.finalShapeGatherIndices[v];m>=0?u.push(d[m]):m===sh&&u.push(1)}return{finalShapeSparse:u.filter((v,m)=>r.finalShapeGatherIndices[m]!==sh),finalShape:u,isIdentity:i,sliceDim0:n,isSimpleSlice:h,begin:r.begin,end:r.end,strides:r.strides}}function P6(c,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let f=0;e.beginValid=c.begin!=null,e.endValid=c.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let y=0;y<c.dims;y++)if(1<<y&c.ellipsisMask){const S=Math.min(e.dims-(c.dims-y)+1+c.numAddAxisAfterEllipsis,e.dims);for(;f<S;f++)e.begin[f]=0,e.end[f]=0,e.strides[f]=1,e.beginMask|=1<<f,e.endMask|=1<<f,e.finalShapeGatherIndices.push(f),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[f]=y}else if(1<<y&c.newAxisMask)e.finalShapeGatherIndices.push(sh),e.finalShapeGatherIndicesSparse.push(-1);else{if(f===e.begin.length)throw Error(`Index out of range using input dim ${f}; input has only ${e.dims} dims, ${e.begin.length}.`);c.begin!=null&&(e.begin[f]=c.begin[y]),c.end!=null&&(e.end[f]=c.end[y]),e.strides[f]=c.strides[y],c.beginMask&1<<y&&(e.beginMask|=1<<f),c.endMask&1<<y&&(e.endMask|=1<<f),c.shrinkAxisMask&1<<y?(e.finalShapeGatherIndices.push(A6),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<f):(e.finalShapeGatherIndices.push(f),e.finalShapeGatherIndicesSparse.push(y)),e.inputShapeGatherIndicesSparse[f]=y,f++}}function kd(c,e,f,y,S,C){if(S[e])return f>0?C[e]:C[e+1&1];{const o=c<0?y+c:c;return o<C[0]?C[0]:o>C[1]?C[1]:o}}const F6=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:ng,computeFlatOffset:il,computeOutShape:zc,getNormalizedAxes:I6,isSliceContinous:sl,maskToAxes:R6,parseSliceParams:kc,sliceInfo:Wc,startForAxis:lg,startIndicesWithElidedDims:ag,stopForAxis:hg,stopIndicesWithElidedDims:og,stridesForAxis:ug,stridesWithElidedDims:sg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:c=>c())();function N6(){return new Promise(c=>M6(()=>c()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xc(c,e){const f=c[0].length;c.forEach((S,C)=>{it(S.length===f,()=>`Error in concat${f}D: rank of tensors[${C}] must be the same as the rank of the rest (${f})`)}),it(e>=0&&e<f,()=>`Error in concat${f}D: axis must be between 0 and ${f-1}.`);const y=c[0];c.forEach((S,C)=>{for(let o=0;o<f;o++)it(o===e||S[o]===y[o],()=>`Error in concat${f}D: Shape of tensors[${C}] (${S}) does not match the shape of the rest (${y}) along the non-concatenated axis ${C}.`)})}function Ms(c,e){const f=c[0].slice();for(let y=1;y<c.length;y++)f[e]+=c[y][e];return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gs;(function(c){c[c.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",c[c.VALUE_ROWIDS=1]="VALUE_ROWIDS",c[c.ROW_LENGTHS=2]="ROW_LENGTHS",c[c.ROW_SPLITS=3]="ROW_SPLITS",c[c.ROW_LIMITS=4]="ROW_LIMITS",c[c.ROW_STARTS=5]="ROW_STARTS"})(gs||(gs={}));function fg(c,e,f){let y=new Array;if(f==null&&e==null)return y;if(e==null)for(;y.length<c+f.length;)y.push(-1);else y=e.slice();if(f==null)return y;if(c+f.length!==y.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${c+f.length}, but shape.rank = ${y.length}`);for(let S=1;S<f.length;++S){const C=f[S],o=y[y.length-f.length+S],x=y[o];if(C>=0)if(x>=0){if(x!==C)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${S+c}] = ${C} but shape[${S+c}] = ${x}`)}else y[o]=C}return y}function cg(c){const e={FIRST_DIM_SIZE:gs.FIRST_DIM_SIZE,VALUE_ROWIDS:gs.VALUE_ROWIDS,ROW_LENGTHS:gs.ROW_LENGTHS,ROW_SPLITS:gs.ROW_SPLITS,ROW_LIMITS:gs.ROW_LIMITS,ROW_STARTS:gs.ROW_STARTS},f=[];for(const y of c)if(y in e)f.push(e[y]);else break;return f}function dg(c){return c.length===0?0:c[0]===gs.FIRST_DIM_SIZE?c.length-1:c.length}function pg(c,e){if(c==null||e==null)return;const f=c.length,y=e.length;if(f>=y)throw new Error(`defaultValue.shape=${c} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${f} must be less than ragged tensor input flatValues.rank = ${y})`);for(let S=0;S<Math.min(f,y-1);++S){const C=c[S],o=e[S+1];if(C>=0&&o>=0&&C!==1&&C!==o)throw new Error(`defaultValue.shape=${c}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${S-c.length}] = ${C} but ragged tensor input.flatValues.shape[${S-c.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hc=30;function rl(c){return c<=Hc?c:$l(c,Math.floor(Math.sqrt(c)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yc(c,e,f){const y=f*(typeof c=="number"?c:c[0]),S=e*(typeof c=="number"?c:c[1]);return[y,S]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Za(c,e,f,y=!0){let S=[];if(y)S=S.concat(e.slice(0)),S.push(c[0]/f),S=S.concat(c.slice(1));else{S=S.concat(c[0]);const C=e.length;for(let o=0;o<C;++o)S=S.concat([c[o+1]/e[o],e[o]]);S=S.concat(c.slice(C+1))}return S}function Qa(c,e,f=!0){const y=[];if(f){y.push(e);for(let S=e+1;S<c;++S)S<=2*e?(y.push(S),y.push(S-(e+1))):y.push(S)}else{const S=[],C=[];for(let o=1;o<c;++o)o>=e*2+1||o%2===1?C.push(o):S.push(o);y.push(...S),y.push(0),y.push(...C)}return y}function Ja(c,e,f,y=!0){const S=[];y?S.push(c[0]/f):S.push(c[0]*f);for(let C=1;C<c.length;++C)C<=e.length?y?S.push(e[C-1]*c[C]):S.push(c[C]/e[C-1]):S.push(c[C]);return S}function Kc(c,e){const f=[0];for(let y=0;y<e;++y)f.push(c[y][0]);return f}function jc(c,e,f){const y=c.slice(0,1);for(let S=0;S<f;++S)y.push(c[S+1]-e[S][0]-e[S][1]);return y}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vg=1.7580993408473768,mg=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gg=.3275911,xg=.254829592,yg=-.284496736,Tg=1.421413741,Sg=-1.453152027,Cg=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ih(c,e){if(c.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${c.length}, imag: ${e.length}.`);const f=new Float32Array(c.length*2);for(let y=0;y<f.length;y+=2)f[y]=c[y/2],f[y+1]=e[y/2];return f}function O6(c){const e=new Float32Array(c.length/2),f=new Float32Array(c.length/2);for(let y=0;y<c.length;y+=2)e[y/2]=c[y],f[y/2]=c[y+1];return{real:e,imag:f}}function D6(c){const e=Math.ceil(c.length/4),f=new Float32Array(e),y=new Float32Array(e);for(let S=0;S<c.length;S+=4)f[Math.floor(S/4)]=c[S],y[Math.floor(S/4)]=c[S+1];return{real:f,imag:y}}function L6(c){const e=Math.floor(c.length/4),f=new Float32Array(e),y=new Float32Array(e);for(let S=2;S<c.length;S+=4)f[Math.floor(S/4)]=c[S],y[Math.floor(S/4)]=c[S+1];return{real:f,imag:y}}function B6(c,e){const f=c[e*2],y=c[e*2+1];return{real:f,imag:y}}function $6(c,e,f,y){c[y*2]=e,c[y*2+1]=f}function G6(c,e){const f=new Float32Array(c/2),y=new Float32Array(c/2);for(let S=0;S<Math.ceil(c/2);S++){const C=(e?2:-2)*Math.PI*(S/c);f[S]=Math.cos(C),y[S]=Math.sin(C)}return{real:f,imag:y}}function U6(c,e,f){const y=(f?2:-2)*Math.PI*(c/e),S=Math.cos(y),C=Math.sin(y);return{real:S,imag:C}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xl="->",V6=/->/g,Wd=",",Xd="...";function Eg(c,e){c=c.replace(/\s/g,"");const f=(c.length-c.replace(V6,"").length)/xl.length;if(f<1)throw new Error("Equations without an arrow are not supported.");if(f>1)throw new Error(`Equation must contain exactly one arrow ("${xl}").`);const[y,S]=c.split(xl);it(y.indexOf(Xd)===-1,()=>`The ellipsis notation ("${Xd}") is not supported yet.`);const C=y.split(Wd),o=C.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const x=[];for(let r=0;r<S.length;++r){const i=S[r];if(!C.some(n=>n.indexOf(i)!==-1))throw new Error(`Output subscripts contain the label ${i} not present in the input subscripts.`);x.indexOf(i)===-1&&x.push(i)}for(let r=0;r<y.length;++r){const i=y[r];x.indexOf(i)===-1&&i!==Wd&&x.push(i)}const t=new Array(C.length);for(let r=0;r<o;++r){if(new Set(C[r].split("")).size!==C[r].length)throw new Error(`Found duplicate axes in input component ${C[r]}. Support for duplicate axes in input is not implemented yet.`);t[r]=[];for(let i=0;i<C[r].length;++i)t[r].push(x.indexOf(C[r][i]))}const s=x.length,l=S.length,a=[];for(let r=l;r<s;++r)a.push(r);return{allDims:x,summedDims:a,idDims:t}}function wg(c,e){let f=new Array(c);f.fill(-1);for(let S=0;S<e.length;++S)f[e[S]]=S;const y=[];for(let S=0;S<c;++S)f[S]===-1&&y.push(S);return f=f.filter(S=>S!==-1),{permutationIndices:f,expandDims:y}}function bg(c,e,f){const y=new Array(c);for(let S=0;S<f.length;++S){const C=f[S].shape;for(let o=0;o<e[S].length;++o)y[e[S][o]]===void 0?y[e[S][o]]=C[o]:it(y[e[S][o]]===C[o],()=>`Expected dimension ${y[e[S][o]]} at axis ${o} of input shaped ${JSON.stringify(C)}, but got dimension ${C[o]}`)}}function Ag(c,e){const f=c,y=[];let S=0;c.length===0&&f.push(-1),S=c.length+1;for(let o=0;o<S;++o)y.push([]);const C=[];for(let o=0;o<f.length;++o){const x=f[o],t=z6(e,x);for(const s of t)C.indexOf(s)===-1&&(y[o].push(s),C.push(s))}return{path:f,steps:y}}function Rg(c){return c.every((e,f)=>e===f)}function z6(c,e){const f=[];for(let y=0;y<c.length;++y)(c[y].length===0||c[y].indexOf(e)!==-1||e===-1)&&f.push(y);return f}function Zc(c,e,f=0){let y=[];if(typeof e=="number")it(c.shape[f]%e===0,()=>"Number of splits must evenly divide the axis."),y=new Array(e).fill(c.shape[f]/e);else{const S=e.reduce((o,x)=>(x===-1&&(o+=1),o),0);it(S<=1,()=>"There should be only one negative value in split array.");const C=e.indexOf(-1);if(C!==-1){const o=e.reduce((x,t)=>t>0?x+t:x);e[C]=c.shape[f]-o}it(c.shape[f]===e.reduce((o,x)=>o+x),()=>"The sum of sizes must match the size of the axis dimension."),y=e}return y}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qc(c){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${c}`}function Jc(c,e){return`indices(${c}, 0) is invalid: ${e} < 0`}function qc(c,e,f){return`indices(${c}, 0) is invalid: ${e} >= ${f}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _c(c,e){return`only one output dimension may be -1, not both ${c} and ${e}`}function td(c,e){return`size ${c} must be non-negative, not ${e}`}function ed(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function nd(c,e){const f=bt(c),y=bt(e);return`Input to reshape is a SparseTensor with ${f}
  dense values, but the requested shape requires a multiple of ${y}. inputShape=${c} outputShape= ${e}`}function sd(c,e){const f=bt(c),y=bt(e);return`Input to reshape is a tensor with ${f} dense values, but the requested shape has ${y}. inputShape=${c} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $a(){return"segment ids must be >= 0"}function id(){return"segment ids are not increasing"}function rd(c,e){return`Segment id ${c} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function ad(c,e,f){return`Bad: indices[${c}] == ${e} out of range [0, ${f})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ig(c,e){let f=!1,y;for(c<=Hc?(y=c,f=!0):y=$l(c,Math.floor(Math.sqrt(c)));!f;)y>e||y===c?f=!0:y=$l(c,y+1);return y}function Pg(c,e,f){const y=[],S=c.length;for(let C=0;C<S;C++)C!==e?y.push(c[C]):y.push(f);return y}function od(c,e,f,y){const S=e.shape.length,C=c.shape.length;if(y!==0&&(y<-S||y>S))throw new Error(`Expect batchDims in the range of [-${S}, ${S}], but got ${y}`);if(y<0&&(y+=S),y>C)throw new Error(`batchDims (${y}) must be less than rank(x) (
    ${C}).`);if(f<y)throw new Error(`batchDims (${y}) must be less than or equal to axis (${f}).`);for(let a=0;a<y;++a)if(c.shape[a]!==e.shape[a])throw new Error(`x.shape[${a}]: ${c.shape[a]} should be equal to indices.shape[${a}]: ${e.shape[a]}.`);const o=c.shape[f],x=[];let t=1,s=1,l=1;for(let a=0;a<y;++a)x.push(c.shape[a]),t*=c.shape[a];for(let a=y;a<f;a++)x.push(c.shape[a]),s*=c.shape[a];for(let a=y;a<S;a++)x.push(e.shape[a]);for(let a=f+1;a<C;a++)x.push(c.shape[a]),l*=c.shape[a];return{batchSize:t,sliceSize:l,outerSize:s,dimSize:o,outputShape:x}}const k6=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:od,computeOutShape:Pg,segOpComputeOptimalWindowSize:Ig},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jr(c){try{return c.map(e=>Hr(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function ud(c){return c.map(e=>er(e))}const W6=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:xg,ERF_A2:yg,ERF_A3:Tg,ERF_A4:Sg,ERF_A5:Cg,ERF_P:gg,PARALLELIZE_THRESHOLD:Hc,get RowPartitionType(){return gs},SELU_SCALE:mg,SELU_SCALEALPHA:vg,applyActivation:el,assertAndGetBroadcastShape:Te,assertAxesAreInnerMostDims:rn,assertParamsConsistent:Xc,assignToTypedArray:$6,axesAreInnerMostDims:Sc,calculateShapes:mr,checkEinsumDimSizes:bg,checkPadOnDimRoundingMode:fs,combineLocations:dm,combineRaggedTensorToTensorShapes:fg,complexWithEvenIndex:D6,complexWithOddIndex:L6,computeConv2DInfo:cn,computeConv3DInfo:Ni,computeDefaultPad:yc,computeDilation2DInfo:Ha,computeOptimalWindowSize:rl,computeOutAndReduceShapes:xn,computeOutShape:Ms,computePool2DInfo:hs,computePool3DInfo:ti,convertConv2DDataFormat:Oi,decodeEinsumEquation:Eg,eitherStridesOrDilationsAreOne:On,expandShapeToKeepDim:sn,exponent:U6,exponents:G6,fromStringArrayToUint8:ud,fromUint8ToStringArray:jr,getAxesPermutation:Dn,getBroadcastDims:Po,getComplexWithIndex:B6,getEinsumComputePath:Ag,getEinsumPermutation:wg,getFusedBiasGradient:tl,getFusedDyActivation:_u,getImageCenter:Yc,getInnerMostAxes:dn,getPermuted:Qa,getRaggedRank:dg,getReductionAxes:hm,getReshaped:Za,getReshapedPermuted:Ja,getRowPartitionTypesHelper:cg,getSliceBeginCoords:Kc,getSliceSize:jc,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Qc,getSparseFillEmptyRowsNegativeIndexErrorMessage:Jc,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:qc,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:ed,getSparseReshapeInputOutputMismatchErrorMessage:sd,getSparseReshapeInputOutputMultipleErrorMessage:nd,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:_c,getSparseReshapeNegativeOutputDimErrorMessage:td,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:ad,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:$a,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:id,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:rd,getUndoAxesPermutation:Ka,isIdentityPermutation:Rg,log:K2,mergeRealAndImagArrays:ih,prepareAndValidate:Vc,prepareSplitSize:Zc,segment_util:k6,shouldFuse:nl,slice_util:F6,splitRealAndImagArrays:O6,stridesOrDilationsArePositive:or,tupleValuesAreOne:Ma,upcastType:Ns,validateDefaultValueShape:pg,validateInput:Lc,validateUpdateShape:Gm,warn:xs},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */o6();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qi={},ao={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function X6(c,e){Qi[c]=e}function Cs(c,e){if(!(c in Qi)||e!=null){const y=Y6(c,e);if(y!==null)Qi[c]=y;else return console.log("Could not get context for WebGL version",c),null}const f=Qi[c];return f==null||f.isContextLost()?(delete Qi[c],Cs(c)):(f.disable(f.DEPTH_TEST),f.disable(f.STENCIL_TEST),f.disable(f.BLEND),f.disable(f.DITHER),f.disable(f.POLYGON_OFFSET_FILL),f.disable(f.SAMPLE_COVERAGE),f.enable(f.SCISSOR_TEST),f.enable(f.CULL_FACE),f.cullFace(f.BACK),Qi[c])}function H6(c){if(!St().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&c===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Y6(c,e){if(c!==1&&c!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const f=e??H6(c);return f.addEventListener("webglcontextlost",y=>{y.preventDefault(),delete Qi[c]},!1),St().getBool("SOFTWARE_WEBGL_ENABLED")&&(ao.failIfMajorPerformanceCaveat=!1),c===1?f.getContext("webgl",ao)||f.getContext("experimental-webgl",ao):f.getContext("webgl2",ao)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ga;(function(c){c[c.DENSE=0]="DENSE",c[c.SHARED_BATCH=1]="SHARED_BATCH"})(Ga||(Ga={}));var Yn;(function(c){c[c.RENDER=0]="RENDER",c[c.UPLOAD=1]="UPLOAD",c[c.PIXELS=2]="PIXELS",c[c.DOWNLOAD=3]="DOWNLOAD"})(Yn||(Yn={}));var ln;(function(c){c[c.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",c[c.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",c[c.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",c[c.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",c[c.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ln||(ln={}));function qa(c,e){return[e,c]}function K6(c,e){return c*e}function oo(c){const e=bt(c),f=Math.ceil(e/4);return Ll(f)}function na(c,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(c/2))]}function j6(c,e){const[f,y]=na(c,e);return f*y*4}function ld(c,e){const f=c;let y,S,C,o,x,t,s,l,a,r;return St().getNumber("WEBGL_VERSION")===2?(y=f.R32F,S=f.R16F,C=f.RGBA16F,o=f.RGBA32F,x=f.RED,s=4,l=1,a=f.HALF_FLOAT,r=f.FLOAT,t=f.RGBA8):(y=c.RGBA,S=c.RGBA,C=c.RGBA,o=f.RGBA,x=c.RGBA,s=4,l=4,a=e!=null?e.HALF_FLOAT_OES:null,r=c.FLOAT,t=c.RGBA),{internalFormatFloat:y,internalFormatHalfFloat:S,internalFormatPackedHalfFloat:C,internalFormatPackedFloat:o,textureFormatFloat:x,downloadTextureFormat:t,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:a,textureTypeFloat:r}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jt(c,e){const f=e();return St().getBool("DEBUG")&&Z6(c),f}function Z6(c){const e=c.getError();if(e!==c.NO_ERROR)throw new Error("WebGL Error: "+_6(c,e))}const Q6=596e-10,J6=65504;function q6(c){return!!(St().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||c===0||Q6<Math.abs(c)&&Math.abs(c)<J6)}function _6(c,e){switch(e){case c.NO_ERROR:return"NO_ERROR";case c.INVALID_ENUM:return"INVALID_ENUM";case c.INVALID_VALUE:return"INVALID_VALUE";case c.INVALID_OPERATION:return"INVALID_OPERATION";case c.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case c.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case c.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function uo(c,e){return ni(c,()=>c.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function t5(c,e){const f=ni(c,()=>c.createShader(c.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Jt(c,()=>c.shaderSource(f,e)),Jt(c,()=>c.compileShader(f)),c.getShaderParameter(f,c.COMPILE_STATUS)===!1)throw console.log(c.getShaderInfoLog(f)),new Error("Failed to compile vertex shader.");return f}function e5(c,e){const f=ni(c,()=>c.createShader(c.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Jt(c,()=>c.shaderSource(f,e)),Jt(c,()=>c.compileShader(f)),St().get("ENGINE_COMPILE_ONLY"))return f;if(c.getShaderParameter(f,c.COMPILE_STATUS)===!1)throw Fg(e,c.getShaderInfoLog(f)),new Error("Failed to compile fragment shader.");return f}const n5=/ERROR: [0-9]+:([0-9]+):/g;function Fg(c,e){const f=n5.exec(e);if(f==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(c);return}const y=+f[1],S=c.split(`
`),C=S.length.toString().length+2,o=S.map((a,r)=>$r((r+1).toString(),C)+a);let x=0;for(let a=0;a<o.length;a++)x=Math.max(o[a].length,x);const t=o.slice(0,y-1),s=o.slice(y-1,y),l=o.slice(y);console.log(t.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${$r(s[0],x)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join(`
`))}function s5(c){return ni(c,()=>c.createProgram(),"Unable to create WebGLProgram.")}function i5(c,e){if(Jt(c,()=>c.linkProgram(e)),!St().get("ENGINE_COMPILE_ONLY")&&c.getProgramParameter(e,c.LINK_STATUS)===!1)throw console.log(c.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function yl(c,e){if(Jt(c,()=>c.validateProgram(e)),c.getProgramParameter(e,c.VALIDATE_STATUS)===!1)throw console.log(c.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function r5(c,e){const f=ni(c,()=>c.createBuffer(),"Unable to create WebGLBuffer");return Jt(c,()=>c.bindBuffer(c.ARRAY_BUFFER,f)),Jt(c,()=>c.bufferData(c.ARRAY_BUFFER,e,c.STATIC_DRAW)),f}function a5(c,e){const f=ni(c,()=>c.createBuffer(),"Unable to create WebGLBuffer");return Jt(c,()=>c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,f)),Jt(c,()=>c.bufferData(c.ELEMENT_ARRAY_BUFFER,e,c.STATIC_DRAW)),f}function o5(c){return ni(c,()=>c.createTexture(),"Unable to create WebGLTexture.")}function u5(c,e){const f=St().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(c<=0||e<=0){const y=`[${c}x${e}]`;throw new Error("Requested texture size "+y+" is invalid.")}if(c>f||e>f){const y=`[${c}x${e}]`,S=`[${f}x${f}]`;throw new Error("Requested texture size "+y+" greater than WebGL maximum on this browser / GPU "+S+".")}}function l5(c){return ni(c,()=>c.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Hd(c,e,f,y,S,C,o){const x=c.getAttribLocation(e,f);return x===-1?!1:(Jt(c,()=>c.bindBuffer(c.ARRAY_BUFFER,y)),Jt(c,()=>c.vertexAttribPointer(x,S,c.FLOAT,!1,C,o)),Jt(c,()=>c.enableVertexAttribArray(x)),!0)}function h5(c,e,f){v5(c,f),Jt(c,()=>c.activeTexture(c.TEXTURE0+f)),Jt(c,()=>c.bindTexture(c.TEXTURE_2D,e))}function f5(c,e,f){return ni(c,()=>c.getUniformLocation(e,f),'uniform "'+f+'" not present in program.')}function c5(c,e,f){return c.getUniformLocation(e,f)}function d5(c,e,f,y){Jt(c,()=>h5(c,e,y)),Jt(c,()=>c.uniform1i(f,y))}function Tl(c,e,f){Jt(c,()=>c.bindFramebuffer(c.FRAMEBUFFER,f)),Jt(c,()=>c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,e,0))}function Yd(c,e){Jt(c,()=>c.bindFramebuffer(c.FRAMEBUFFER,e)),Jt(c,()=>c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0))}function lo(c){const e=c.checkFramebufferStatus(c.FRAMEBUFFER);if(e!==c.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+p5(c,e))}function p5(c,e){switch(e){case c.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case c.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case c.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case c.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ni(c,e,f){const y=Jt(c,()=>e());if(y==null)throw new Error(f);return y}function v5(c,e){const f=c.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,y=e+c.TEXTURE0;if(y<c.TEXTURE0||y>f){const S=`[gl.TEXTURE0, gl.TEXTURE${f}]`;throw new Error(`textureUnit must be in ${S}.`)}}function Zr(c,e=2){return bt(c.slice(0,c.length-e))}function Qr(c){if(c.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[c.length>1?c[c.length-2]:1,c[c.length-1]]}function ho(c){let e=[1,1,1];return c.length===0||c.length===1&&c[0]===1||(e=[Zr(c),...Qr(c)]),e}function m5(c,e=!1){let f=St().getNumber("WEBGL_MAX_TEXTURE_SIZE"),y=St().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");y===1/0&&St().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(y=f/2),e&&(f=f*2,y=y*2,c=c.map((x,t)=>t>=c.length-2?Ph(c[t]):c[t]),c.length===1&&(c=[2,c[0]])),c.length!==2&&(c=Pi(c).newShape);let S=bt(c),C=null;c.length<=1&&S<=f?C=[1,S]:c.length===2&&c[0]<=f&&c[1]<=f?C=c:c.length===3&&c[0]*c[1]<=f&&c[2]<=f?C=[c[0]*c[1],c[2]]:c.length===3&&c[0]<=f&&c[1]*c[2]<=f?C=[c[0],c[1]*c[2]]:c.length===4&&c[0]*c[1]*c[2]<=f&&c[3]<=f?C=[c[0]*c[1]*c[2],c[3]]:c.length===4&&c[0]<=f&&c[1]*c[2]*c[3]<=f&&(C=[c[0],c[1]*c[2]*c[3]]);const o=C!=null&&Math.max(...C)>y&&Math.min(...C)<=(e?2:1)&&Math.min(...C)>0;if(C==null||o)if(e){const x=Zr(c);let t=2,s=2;c.length&&([t,s]=Qr(c)),S=x*(t/2)*(s/2),C=Ll(S).map(l=>l*2)}else C=Ll(S);return C}function fo(c){return c%2===0}function Do(c,e){if(c=c.slice(-2),e=e.slice(-2),je(c,e)||!c.length||!e.length||c[0]===0||c[1]===0||e[0]===0||e[1]===0)return!0;if(c.length!==e.length){const f=c[c.length-1],y=e[e.length-1];if(f===y||fo(f)&&fo(y)&&(c[0]===1||e[0]===1))return!0}return c[1]===e[1]&&fo(c[0])&&fo(e[0])}let Sl,Cl;function g5(c){if(Sl==null){const e=Cs(c);Sl=e.getParameter(e.MAX_TEXTURE_SIZE)}return Sl}function x5(c){if(Cl==null){const e=Cs(c);Cl=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Cl)}function y5(c){if(c===0)return 0;let e;const f=Cs(c);return us(f,"EXT_disjoint_timer_query_webgl2")&&c===2?e=2:us(f,"EXT_disjoint_timer_query")?e=1:e=0,e}function us(c,e){return c.getExtension(e)!=null}function Kd(c){try{if(Cs(c)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function T5(c){if(c===0)return!1;const e=Cs(c);if(c===1){if(!us(e,"OES_texture_float"))return!1}else if(!us(e,"EXT_color_buffer_float"))return!1;return rh(e)}function S5(c){if(c===0)return!1;const e=Cs(c);if(c===1){if(!us(e,"OES_texture_float")||!us(e,"WEBGL_color_buffer_float"))return!1}else{if(us(e,"EXT_color_buffer_float"))return rh(e);const y="EXT_color_buffer_half_float";if(us(e,y)){const S=e.getExtension(y);return C5(e,S)}return!1}return rh(e)}function rh(c){const e=ld(c),f=c.createTexture();c.bindTexture(c.TEXTURE_2D,f);const y=1,S=1;c.texImage2D(c.TEXTURE_2D,0,e.internalFormatFloat,y,S,0,e.textureFormatFloat,e.textureTypeFloat,null);const C=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,C),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,f,0);const o=c.checkFramebufferStatus(c.FRAMEBUFFER)===c.FRAMEBUFFER_COMPLETE;return c.bindTexture(c.TEXTURE_2D,null),c.bindFramebuffer(c.FRAMEBUFFER,null),c.deleteTexture(f),c.deleteFramebuffer(C),o}function C5(c,e){const f=ld(c,e),y=c.createTexture();c.bindTexture(c.TEXTURE_2D,y);const S=1,C=1;c.texImage2D(c.TEXTURE_2D,0,f.internalFormatHalfFloat,S,C,0,f.textureFormatFloat,f.textureTypeHalfFloat,null);const o=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,o),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,y,0);const x=c.checkFramebufferStatus(c.FRAMEBUFFER)===c.FRAMEBUFFER_COMPLETE;return c.bindTexture(c.TEXTURE_2D,null),c.bindFramebuffer(c.FRAMEBUFFER,null),c.deleteTexture(y),c.deleteFramebuffer(o),x}function E5(c){return c!==2?!1:Cs(c).fenceSync!=null}function _a(c,e){Array.isArray(c)||(c=[c]),c.forEach(f=>{f!=null&&it(f.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qt=St();qt.registerFlag("HAS_WEBGL",()=>qt.getNumber("WEBGL_VERSION")>0);qt.registerFlag("WEBGL_VERSION",()=>Kd(2)?2:Kd(1)?1:0);qt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);qt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>qt.get("WEBGL_VERSION")===2);qt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);qt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);qt.registerFlag("WEBGL_PACK",()=>qt.getBool("HAS_WEBGL"));qt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_CLIP",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_REDUCE",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_LAZILY_UNPACK",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_CONV_IM2COL",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>g5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>x5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const c=qt.getNumber("WEBGL_VERSION");return c===0?0:y5(c)});qt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>qt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!zv());qt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>T5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>qt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:qt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));qt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>S5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>E5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>qt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);qt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,c=>{if(typeof c!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${c}.`);if(c<0&&c!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${c}.`)});qt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>zv()?1:-1,c=>{if(typeof c!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${c}.`);if(c<0&&c!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${c}.`)});qt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);qt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);qt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);qt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);qt.registerFlag("WEBGL_EXP_CONV",()=>!1);qt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>qt.getBool("IS_TEST"));qt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);qt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);qt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);qt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bn(){let c,e,f,y,S,C,o,x,t,s;return St().getNumber("WEBGL_VERSION")===2?(c="#version 300 es",e="in",f="out",y="in",S="texture",C="outputColor",o="out vec4 outputColor;",x=St().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",t="",s=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(c="",e="attribute",f="varying",y="varying",S="texture2D",C="gl_FragColor",o="",x=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,t=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,s=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:c,attribute:e,varyingVs:f,varyingFs:y,texture2D:S,output:C,defineOutput:o,defineSpecialNaN:x,defineSpecialInf:t,defineRound:s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yr(c,e,f="index"){const y=Me(e);return y.map((S,C)=>{const o=`int ${c[C]} = ${f} / ${S}`,x=C===y.length-1?`int ${c[C+1]} = ${f} - ${c[C]} * ${S}`:`index -= ${c[C]} * ${S}`;return`${o}; ${x};`}).join("")}function al(c,e,f="index"){const y=Me(e);return y.map((S,C)=>{const o=`int ${c[C]} = ${f} / outShapeStrides[${C}]`,x=C===y.length-1?`int ${c[C+1]} = ${f} - ${c[C]} * outShapeStrides[${C}]`:`index -= ${c[C]} * outShapeStrides[${C}]`;return`${o}; ${x};`}).join("")}function w5(c,e){const f=c.length,y=c.map(C=>`${e}[${C}]`),S=new Array(f-1);S[f-2]=y[f-1];for(let C=f-3;C>=0;--C)S[C]=`(${S[C+1]} * ${y[C+1]})`;return S}function b5(c,e,f="index"){const y=c.map((C,o)=>o),S=w5(y,e);return S.map((C,o)=>{const x=`int ${c[o]} = ${f} / ${S[o]}`,t=o===S.length-1?`int ${c[o+1]} = ${f} - ${c[o]} * ${S[o]}`:`index -= ${c[o]} * ${S[o]}`;return`${x}; ${t};`}).join("")}function hd(c){const e=Me(c).map(f=>f.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function fd(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Mg=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Ng}=W6;function A5(c,e,f){const y=[];if(c.forEach(i=>{const n=bt(i.shapeInfo.logicalShape);if(i.shapeInfo.isUniform?y.push(`uniform float ${i.name}${n>1?`[${n}]`:""};`):(y.push(`uniform sampler2D ${i.name};`),y.push(`uniform int offset${i.name};`)),f.enableShapeUniforms){const{uniformShape:h}=cd(f.packedInputs,i.shapeInfo.logicalShape,i.shapeInfo.texShape);switch(h.length){case 1:y.push(`uniform int ${i.name}Shape;`);break;case 2:y.push(`uniform ivec2 ${i.name}Shape;`);break;case 3:y.push(`uniform ivec3 ${i.name}Shape;`);break;case 4:y.push(`uniform ivec4 ${i.name}Shape;`);break}y.push(`uniform ivec2 ${i.name}TexShape;`)}}),f.enableShapeUniforms){switch(e.logicalShape.length){case 1:y.push("uniform int outShape;");break;case 2:y.push("uniform ivec2 outShape;"),y.push("uniform int outShapeStrides;");break;case 3:y.push("uniform ivec3 outShape;"),y.push("uniform ivec2 outShapeStrides;");break;case 4:y.push("uniform ivec4 outShape;"),y.push("uniform ivec3 outShapeStrides;");break}y.push("uniform ivec2 outTexShape;")}f.customUniforms&&f.customUniforms.forEach(i=>{y.push(`uniform ${i.type} ${i.name}${i.arrayIndex?`[${i.arrayIndex}]`:""};`)});const S=y.join(`
`),C=c.map(i=>R5(i,e,f.packedInputs,f.enableShapeUniforms)).join(`
`),o=e.texShape,x=bn(),t=F5(x);let s,l,a=O5(x);return e.isPacked?(s=I5(e.logicalShape,o,f.enableShapeUniforms),l=N5(x)):(s=P5(e.logicalShape,o,f.enableShapeUniforms),l=M5(x)),f.packedInputs&&(a+=$5),[a,t,l,S,s,C,f.userCode].join(`
`)}function sa(c,e=!1){const f=c.shapeInfo.logicalShape;switch(f.length){case 0:return Z5(c,e);case 1:return J5(c,e);case 2:return _5(c,e);case 3:return eb(c,e);case 4:return sb(c,e);case 5:return ib(c);case 6:return rb(c);default:throw new Error(`${f.length}-D input sampling is not yet supported`)}}function Og(c,e){switch(c.shapeInfo.logicalShape.length){case 0:return j5(c);case 1:return Q5(c,e);case 2:return q5(c,e);case 3:return tb(c,e);default:return nb(c,e)}}function R5(c,e,f=!1,y){let S="";f?S+=Og(c,y):S+=sa(c,y);const C=c.shapeInfo.logicalShape,o=e.logicalShape;return C.length<=o.length&&(f?S+=ab(c,e):S+=ob(c,e)),S}function I5(c,e,f){switch(c.length){case 0:return Dg();case 1:return G5(c,e,f);case 2:return Y5(c,e,f);case 3:return V5(c,e,f);default:return k5(c,e,f)}}function P5(c,e,f){switch(c.length){case 0:return Dg();case 1:return U5(c,e,f);case 2:return K5(c,e,f);case 3:return z5(c,e,f);case 4:return W5(c,e,f);case 5:return X5(c,e);case 6:return H5(c,e);default:throw new Error(`${c.length}-D output sampling is not yet supported`)}}function F5(c){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${c.texture2D}(textureSampler, uv).r;
    }
  `}function M5(c){return`
    void setOutput(float val) {
      ${c.output} = vec4(val, 0, 0, 0);
    }
  `}function N5(c){return`
    void setOutput(vec4 val) {
      ${c.output} = val;
    }
  `}function O5(c){return`${c.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${c.varyingFs} vec2 resultUV;
    ${c.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${c.defineSpecialNaN}
    ${c.defineSpecialInf}
    ${c.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${D5}
    ${L5}
    ${B5}
  `}const D5=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,L5=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,B5=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$5=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Dg(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function G5(c,e,f){const y=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return y[0]===1?f?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${y[1]}.0);
      }
    `:y[1]===1?f?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${y[0]}.0);
      }
    `:f?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${y[0]}, ${y[1]}));
      return 2 * (resTexRC.x * ${y[1]} + resTexRC.y);
    }
  `}function U5(c,e,f){return e[0]===1?f?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?f?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:f?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function V5(c,e,f){if(f)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const y=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],S=Math.ceil(c[2]/2),C=S*Math.ceil(c[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${y[0]}, ${y[1]}));
      int index = resTexRC.x * ${y[1]} + resTexRC.y;

      int b = index / ${C};
      index -= b * ${C};

      int r = 2 * (index / ${S});
      int c = imod(index, ${S}) * 2;

      return ivec3(b, r, c);
    }
  `}function z5(c,e,f){if(f)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${al(["r","c","d"],c)}
    return ivec3(r, c, d);
  }
`;const y=yr(["r","c","d"],c);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${y}
      return ivec3(r, c, d);
    }
  `}function k5(c,e,f){if(f)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const y=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],S=Math.ceil(c[c.length-1]/2),C=S*Math.ceil(c[c.length-2]/2);let o=C,x="",t="b, r, c";for(let s=2;s<c.length-1;s++)o*=c[c.length-s-1],x=`
      int b${s} = index / ${o};
      index -= b${s} * ${o};
    `+x,t=`b${s}, `+t;return`
    ivec${c.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${y[0]}, ${y[1]}));
      int index = resTexRC.x * ${y[1]} + resTexRC.y;

      ${x}

      int b = index / ${C};
      index -= b * ${C};

      int r = 2 * (index / ${S});
      int c = imod(index, ${S}) * 2;

      return ivec${c.length}(${t});
    }
  `}function W5(c,e,f){if(f)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${al(["r","c","d","d2"],c)}
      return ivec4(r, c, d, d2);
    }
  `;const y=yr(["r","c","d","d2"],c);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${y}
      return ivec4(r, c, d, d2);
    }
  `}function X5(c,e){const f=yr(["r","c","d","d2","d3"],c);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${f}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function H5(c,e){const f=yr(["r","c","d","d2","d3","d4"],c);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${f}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Y5(c,e,f){const y=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(je(c,e))return f?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${y[0]}, ${y[1]}));
      }
    `;const S=Math.ceil(c[1]/2);return f?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${y[0]}, ${y[1]}));

      int index = resTexRC.x * ${y[1]} + resTexRC.y;
      int r = 2 * (index / ${S});
      int c = imod(index, ${S}) * 2;

      return ivec2(r, c);
    }
  `}function K5(c,e,f){return je(c,e)?f?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:c[1]===1?f?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:c[0]===1?f?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:f?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${c[1]};
      int c = index - r * ${c[1]};
      return ivec2(r, c);
    }
  `}function Tr(c){return`offset${c}`}function j5(c){const e=c.name,f="get"+e.charAt(0).toUpperCase()+e.slice(1),y=bn();return`
    vec4 ${f}() {
      return ${y.texture2D}(${e}, halfCR);
    }
  `}function Z5(c,e){const f=c.name,y="get"+f.charAt(0).toUpperCase()+f.slice(1);if(c.shapeInfo.isUniform)return`float ${y}() {return ${f};}`;const[S,C]=c.shapeInfo.texShape;if(S===1&&C===1)return`
      float ${y}() {
        return sampleTexture(${f}, halfCR);
      }
    `;const o=Tr(f);if(e)return`
    float ${y}() {
      vec2 uv = uvFromFlat(${f}TexShape[0], ${f}TexShape[1], ${o});
      return sampleTexture(${f}, uv);
    }
  `;const[x,t]=c.shapeInfo.texShape;return`
    float ${y}() {
      vec2 uv = uvFromFlat(${x}, ${t}, ${o});
      return sampleTexture(${f}, uv);
    }
  `}function Q5(c,e){const f=c.name,y="get"+f.charAt(0).toUpperCase()+f.slice(1),S=c.shapeInfo.texShape,C=bn();if(e)return`
    vec4 ${y}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${f}TexShape[0]) / 2.0), ceil(float(${f}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${C.texture2D}(${f}, uv);
    }
  `;const o=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];return`
    vec4 ${y}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${C.texture2D}(${f}, uv);
    }
  `}function J5(c,e){const f=c.name,y="get"+f.charAt(0).toUpperCase()+f.slice(1);if(c.shapeInfo.isUniform)return`
      float ${y}(int index) {
        ${ia(c)}
      }
    `;const S=c.shapeInfo.texShape,C=S[0],o=S[1];if(o===1&&C===1)return`
      float ${y}(int index) {
        return sampleTexture(${f}, halfCR);
      }
    `;const x=Tr(f);return o===1?e?`
      float ${y}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${x}) + 0.5) / float(${f}TexShape[0]));
        return sampleTexture(${f}, uv);
      }
    `:`
      float ${y}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${x}) + 0.5) / ${C}.0);
        return sampleTexture(${f}, uv);
      }
    `:C===1?e?`
      float ${y}(int index) {
        vec2 uv = vec2((float(index + ${x}) + 0.5) / float(${f}TexShape[1]), 0.5);
        return sampleTexture(${f}, uv);
      }
    `:`
      float ${y}(int index) {
        vec2 uv = vec2((float(index + ${x}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${f}, uv);
      }
    `:e?`
    float ${y}(int index) {
      vec2 uv = uvFromFlat(${f}TexShape[0], ${f}TexShape[1], index + ${x});
      return sampleTexture(${f}, uv);
    }
  `:`
    float ${y}(int index) {
      vec2 uv = uvFromFlat(${C}, ${o}, index + ${x});
      return sampleTexture(${f}, uv);
    }
  `}function q5(c,e){const f=c.shapeInfo.logicalShape,y=c.name,S="get"+y.charAt(0).toUpperCase()+y.slice(1),C=c.shapeInfo.texShape,o=C[0],x=C[1],t=bn();if(C!=null&&je(f,C))return e?`
      vec4 ${S}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${y}TexShape[1], ${y}TexShape[0]);

        return ${t.texture2D}(${y}, uv);
      }
    `:`
      vec4 ${S}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${x}.0, ${o}.0);

        return ${t.texture2D}(${y}, uv);
      }
    `;if(e)return`
    vec4 ${S}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${y}TexShape[0]) / 2.0), ceil(float(${y}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${y}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${t.texture2D}(${y}, uv);
    }
  `;const s=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)],l=Math.ceil(f[1]/2);return`
    vec4 ${S}(int row, int col) {
      vec2 uv = packedUVfrom2D(${l}, ${s[0]}, ${s[1]}, row, col);
      return ${t.texture2D}(${y}, uv);
    }
  `}function _5(c,e){const f=c.shapeInfo.logicalShape,y=c.name,S="get"+y.charAt(0).toUpperCase()+y.slice(1),C=c.shapeInfo.texShape;if(C!=null&&je(f,C)){if(e)return`
      float ${S}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${y}TexShape[1], ${y}TexShape[0]);
        return sampleTexture(${y}, uv);
      }
    `;const r=C[0],i=C[1];return`
    float ${S}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${r}.0);
      return sampleTexture(${y}, uv);
    }
  `}const{newShape:o,keptDims:x}=Pi(f),t=o;if(t.length<f.length){const r=ra(c,t),i=["row","col"];return`
      ${sa(r,e)}
      float ${S}(int row, int col) {
        return ${S}(${aa(i,x)});
      }
    `}if(c.shapeInfo.isUniform)return`
      float ${S}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${f[1]}, 1)));
        ${ia(c)}
      }
    `;const s=C[0],l=C[1],a=Tr(y);return l===1?e?`
      float ${S}(int row, int col) {
        float index = dot(vec3(row, col, ${a}), vec3(${y}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${y}TexShape[0]));
        return sampleTexture(${y}, uv);
      }
    `:`
    float ${S}(int row, int col) {
      float index = dot(vec3(row, col, ${a}), vec3(${f[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${s}.0);
      return sampleTexture(${y}, uv);
    }
  `:s===1?e?`
      float ${S}(int row, int col) {
        float index = dot(vec3(row, col, ${a}), vec3(${y}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${y}TexShape[1]), 0.5);
        return sampleTexture(${y}, uv);
      }
    `:`
    float ${S}(int row, int col) {
      float index = dot(vec3(row, col, ${a}), vec3(${f[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);
      return sampleTexture(${y}, uv);
    }
  `:e?`
      float ${S}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${y}Shape[1] + col + ${a};
        vec2 uv = uvFromFlat(${y}TexShape[0], ${y}TexShape[1], index);
        return sampleTexture(${y}, uv);
      }
    `:`
  float ${S}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${f[1]} + col + ${a};
    vec2 uv = uvFromFlat(${s}, ${l}, index);
    return sampleTexture(${y}, uv);
  }
`}function tb(c,e){const f=c.shapeInfo.logicalShape,y=c.name,S="get"+y.charAt(0).toUpperCase()+y.slice(1),C=c.shapeInfo.texShape,o=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];if(f[0]===1){const r=f.slice(1),i=[1,2],n=ra(c,r),h=["b","row","col"];return`
        ${Og(n,e)}
        vec4 ${S}(int b, int row, int col) {
          return ${S}(${aa(h,i)});
        }
      `}const x=bn();if(e)return`
    vec4 ${S}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${y}TexShape[0]) / 2.0), ceil(float(${y}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${y}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${y}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${x.texture2D}(${y}, uv);
    }
  `;const t=o[0],s=o[1],l=Math.ceil(f[2]/2),a=l*Math.ceil(f[1]/2);return`
    vec4 ${S}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${t}, ${s}, ${a}, ${l}, b, row, col);
      return ${x.texture2D}(${y}, uv);
    }
  `}function eb(c,e){const f=c.shapeInfo.logicalShape,y=c.name,S="get"+y.charAt(0).toUpperCase()+y.slice(1),C=f[1]*f[2],o=f[2],{newShape:x,keptDims:t}=Pi(f),s=x;if(s.length<f.length){const h=ra(c,s),d=["row","col","depth"];return`
        ${sa(h,e)}
        float ${S}(int row, int col, int depth) {
          return ${S}(${aa(d,t)});
        }
      `}if(c.shapeInfo.isUniform)return`
      float ${S}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${C}, ${o}, 1)));
        ${ia(c)}
      }
    `;const l=c.shapeInfo.texShape,a=l[0],r=l[1],i=c.shapeInfo.flatOffset;if(r===C&&i==null)return e?`
      float ${S}(int row, int col, int depth) {
        int stride1 = ${y}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}TexShape[1], ${y}TexShape[0]);
        return sampleTexture(${y}, uv);
      }
    `:`
        float ${S}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${r}.0, ${a}.0);
          return sampleTexture(${y}, uv);
        }
      `;if(r===o&&i==null)return e?`
      float ${S}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${y}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${y}TexShape[1], ${y}TexShape[0]);
        return sampleTexture(${y}, uv);
      }
    `:`
    float ${S}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${f[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${a}.0);
      return sampleTexture(${y}, uv);
    }
  `;const n=Tr(y);return e?`
    float ${S}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${y}Shape[1] * ${y}Shape[2];
      int stride1 = ${y}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${n};
      vec2 uv = uvFromFlat(${y}TexShape[0], ${y}TexShape[1], index);
      return sampleTexture(${y}, uv);
    }
    `:`
      float ${S}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${C} + col * ${o} + depth + ${n};
        vec2 uv = uvFromFlat(${a}, ${r}, index);
        return sampleTexture(${y}, uv);
      }
  `}function nb(c,e){const f=c.name,y="get"+f.charAt(0).toUpperCase()+f.slice(1),S=bn();if(e)return`
    vec4 ${y}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${f}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${f}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${f}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${f}TexShape[0]) / 2.0), ceil(float(${f}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${S.texture2D}(${f}, uv);
    }
  `;const C=c.shapeInfo.logicalShape,o=C.length,x=c.shapeInfo.texShape,t=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)],s=t[0],l=t[1],a=Math.ceil(C[o-1]/2);let r=a*Math.ceil(C[o-2]/2),i="int b, int row, int col",n=`b * ${r} + (row / 2) * ${a} + (col / 2)`;for(let h=2;h<o-1;h++)i=`int b${h}, `+i,r*=C[o-h-1],n=`b${h} * ${r} + `+n;return`
    vec4 ${y}(${i}) {
      int index = ${n};
      int texR = index / ${l};
      int texC = index - texR * ${l};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${s});
      return ${S.texture2D}(${f}, uv);
    }
  `}function sb(c,e){const f=c.shapeInfo.logicalShape,y=c.name,S="get"+y.charAt(0).toUpperCase()+y.slice(1),C=f[3],o=f[2]*C,x=f[1]*o,{newShape:t,keptDims:s}=Pi(f);if(t.length<f.length){const p=ra(c,t),v=["row","col","depth","depth2"];return`
      ${sa(p,e)}
      float ${S}(int row, int col, int depth, int depth2) {
        return ${S}(${aa(v,s)});
      }
    `}if(c.shapeInfo.isUniform)return`
      float ${S}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${x}, ${o}, ${C}, 1)));
        ${ia(c)}
      }
    `;const l=c.shapeInfo.flatOffset,a=c.shapeInfo.texShape,r=a[0],i=a[1],n=`int stride2 = ${y}Shape[3];`,h=`int stride1 = ${y}Shape[2] * stride2;`,d=`int stride0 = ${y}Shape[1] * stride1;`;if(i===x&&l==null)return e?`
      float ${S}(int row, int col, int depth, int depth2) {
        ${n}
        ${h}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}TexShape[1], ${y}TexShape[0]);
        return sampleTexture(${y}, uv);
      }
    `:`
      float ${S}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${C}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}.0, ${r}.0);
        return sampleTexture(${y}, uv);
      }
    `;if(i===C&&l==null)return e?`
      float ${S}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${y}Shape[1] * ${y}Shape[2], ${y}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}TexShape[1], ${y}TexShape[0]);
        return sampleTexture(${y}, uv);
      }
    `:`
      float ${S}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${f[1]*f[2]}, ${f[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${i}.0, ${r}.0);
        return sampleTexture(${y}, uv);
      }
    `;const u=Tr(y);return e?`
    float ${S}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${n}
      ${h}
      ${d}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${y}TexShape[0], ${y}TexShape[1], index + ${u});
      return sampleTexture(${y}, uv);
    }
  `:`
    float ${S}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${x} + col * ${o} +
          depth * ${C} + depth2;
      vec2 uv = uvFromFlat(${r}, ${i}, index + ${u});
      return sampleTexture(${y}, uv);
    }
  `}function ib(c){const e=c.shapeInfo.logicalShape,f=c.name,y="get"+f.charAt(0).toUpperCase()+f.slice(1),S=e[4],C=e[3]*S,o=e[2]*C,x=e[1]*o,{newShape:t,keptDims:s}=Pi(e);if(t.length<e.length){const h=ra(c,t),d=["row","col","depth","depth2","depth3"];return`
      ${sa(h)}
      float ${y}(int row, int col, int depth, int depth2, int depth3) {
        return ${y}(${aa(d,s)});
      }
    `}if(c.shapeInfo.isUniform)return`
      float ${y}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${x}, ${o}, ${C}, ${S})) +
          depth3;
        ${ia(c)}
      }
    `;const l=c.shapeInfo.flatOffset,a=c.shapeInfo.texShape,r=a[0],i=a[1];if(i===x&&l==null)return`
      float ${y}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${C}, ${S}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}.0, ${r}.0);
        return sampleTexture(${f}, uv);
      }
    `;if(i===S&&l==null)return`
      float ${y}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${i}.0, ${r}.0);
        return sampleTexture(${f}, uv);
      }
    `;const n=Tr(f);return`
    float ${y}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${x} + col * ${o} + depth * ${C} +
          depth2 * ${S} + depth3 + ${n};
      vec2 uv = uvFromFlat(${r}, ${i}, index);
      return sampleTexture(${f}, uv);
    }
  `}function rb(c){const e=c.shapeInfo.logicalShape,f=c.name,y="get"+f.charAt(0).toUpperCase()+f.slice(1),{newShape:S,keptDims:C}=Pi(e);if(S.length<e.length){const d=ra(c,S),u=["row","col","depth","depth2","depth3","depth4"];return`
      ${sa(d)}
      float ${y}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${y}(${aa(u,C)});
      }
    `}const o=e[5],x=e[4]*o,t=e[3]*x,s=e[2]*t,l=e[1]*s;if(c.shapeInfo.isUniform)return`
      float ${y}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${l}, ${s}, ${t}, ${x})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${ia(c)}
      }
    `;const a=c.shapeInfo.flatOffset,r=c.shapeInfo.texShape,i=r[0],n=r[1];if(n===l&&a==null)return`
      float ${y}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${s}, ${t}, ${x}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${n}.0, ${i}.0);
        return sampleTexture(${f}, uv);
      }
    `;if(n===o&&a==null)return`
      float ${y}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${n}.0, ${i}.0);
        return sampleTexture(${f}, uv);
      }
    `;const h=Tr(f);return`
    float ${y}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${s} + depth * ${t} +
          depth2 * ${x} + depth3 * ${o} + depth4 + ${h};
      vec2 uv = uvFromFlat(${i}, ${n}, index);
      return sampleTexture(${f}, uv);
    }
  `}function ia(c){const e=c.name,f=bt(c.shapeInfo.logicalShape);return f<2?`return ${e};`:`
    for (int i = 0; i < ${f}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function ab(c,e){const f=c.name,y=f.charAt(0).toUpperCase()+f.slice(1),S="get"+y+"AtOutCoords",C=c.shapeInfo.logicalShape.length,o=e.logicalShape.length,x=Ng(c.shapeInfo.logicalShape,e.logicalShape),t=De(o),s=o-C;let l;const a=["x","y","z","w","u","v"];C===0?l="":o<2&&x.length>=1?l="coords = 0;":l=x.map(p=>`coords.${a[p+s]} = 0;`).join(`
`);let r="";o<2&&C>0?r="coords":r=c.shapeInfo.logicalShape.map((p,v)=>`coords.${a[v+s]}`).join(", ");let i="return outputValue;";const h=bt(c.shapeInfo.logicalShape)===1,u=bt(e.logicalShape)===1;if(C===1&&!h&&!u)i=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(h&&!u)o===1?i=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:i=`
        return vec4(outputValue.x);
      `;else if(x.length){const p=C-2,v=C-1;x.indexOf(p)>-1&&x.indexOf(v)>-1?i="return vec4(outputValue.x);":x.indexOf(p)>-1?i="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":x.indexOf(v)>-1&&(i="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${S}() {
      ${t} coords = getOutputCoords();
      ${l}
      vec4 outputValue = get${y}(${r});
      ${i}
    }
  `}function ob(c,e){const f=c.name,y=f.charAt(0).toUpperCase()+f.slice(1),S="get"+y+"AtOutCoords",C=e.texShape,o=c.shapeInfo.texShape,x=c.shapeInfo.logicalShape.length,t=e.logicalShape.length;if(!c.shapeInfo.isUniform&&x===t&&c.shapeInfo.flatOffset==null&&je(o,C))return`
      float ${S}() {
        return sampleTexture(${f}, resultUV);
      }
    `;const s=De(t),l=Ng(c.shapeInfo.logicalShape,e.logicalShape),a=t-x;let r;const i=["x","y","z","w","u","v"];x===0?r="":t<2&&l.length>=1?r="coords = 0;":r=l.map(h=>`coords.${i[h+a]} = 0;`).join(`
`);let n="";return t<2&&x>0?n="coords":n=c.shapeInfo.logicalShape.map((h,d)=>`coords.${i[d+a]}`).join(", "),`
    float ${S}() {
      ${s} coords = getOutputCoords();
      ${r}
      return get${y}(${n});
    }
  `}function De(c){if(c<=1)return"int";if(c===2)return"ivec2";if(c===3)return"ivec3";if(c===4)return"ivec4";if(c===5)return"ivec5";if(c===6)return"ivec6";throw Error(`GPU for rank ${c} is not yet supported`)}function cd(c,e,f){const{newShape:y,keptDims:S}=Pi(e),C=e.length,o=c&&C===3&&e[0]===1,x=o?e.slice(1):y,t=!c&&C>1&&!je(e,f)&&y.length<C||o;return{useSqueezeShape:t,uniformShape:t?x:e,keptDims:S}}function ra(c,e){const f=JSON.parse(JSON.stringify(c));return f.shapeInfo.logicalShape=e,f}function aa(c,e){return e.map(f=>c[f]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ub(c,e,f,y){const S=f.map((l,a)=>{const r={logicalShape:l.shape,texShape:l.isUniform?null:l.texData.texShape,isUniform:l.isUniform,isPacked:l.isUniform?!1:l.texData.isPacked,flatOffset:null};return l.texData!=null&&l.texData.slice!=null&&l.texData.slice.flatOffset>0&&(r.flatOffset=l.texData.slice.flatOffset),{name:e.variableNames[a],shapeInfo:r}}),C=S.map(l=>l.shapeInfo),o={logicalShape:y.shape,texShape:y.texData.texShape,isUniform:!1,isPacked:y.texData.isPacked,flatOffset:null},x=A5(S,o,e),t=e5(c.gl,x),s=c.createProgram(t);return St().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:t,source:x,webGLProgram:s,inShapeInfos:C,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(c.buildVao(s),Object.assign({program:e,fragmentShader:t,source:x,webGLProgram:s,inShapeInfos:C,outShapeInfo:o},Lg(c,e,s)))}function Lg(c,e,f){const y=[],S=[];let C,o,x,t=null,s=null;s=c.getUniformLocation(f,"NAN",!1),St().getNumber("WEBGL_VERSION")===1&&(t=c.getUniformLocation(f,"INFINITY",!1));const l=!1;for(const a of e.variableNames){const r={name:a,uniform:c.getUniformLocation(f,a,l),offset:c.getUniformLocation(f,`offset${a}`,l)};e.enableShapeUniforms&&(r.shape=c.getUniformLocation(f,`${a}Shape`,l),r.texShape=c.getUniformLocation(f,`${a}TexShape`,l)),y.push(r)}if(e.enableShapeUniforms&&(C=c.getUniformLocation(f,"outShape",l),x=c.getUniformLocation(f,"outShapeStrides",l),o=c.getUniformLocation(f,"outTexShape",l)),e.customUniforms)for(const a of e.customUniforms)S.push(c.getUniformLocation(f,a.name,l));return{variablesLocations:y,customUniformLocations:S,infLoc:t,nanLoc:s,outShapeLocation:C,outShapeStridesLocation:x,outTexShapeLocation:o}}function jd(c,e){if(c.length!==e.length)throw Error(`Binary was compiled with ${c.length} inputs, but was executed with ${e.length} inputs`);c.forEach((f,y)=>{const S=f.logicalShape,C=e[y],o=C.shape;if(!je(S,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${S} and ${o} must match`);if(f.isUniform&&C.isUniform)return;const x=f.texShape,t=C.isUniform?null:C.texData.texShape;if(!je(x,t))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${x} and ${t} must match`)})}function lb(c,e,f,y,S){e.program.enableShapeUniforms||(jd(e.inShapeInfos,f),jd([e.outShapeInfo],[y]));const C=y.texData.texture,o=y.texData.texShape;y.texData.isPacked?c.setOutputPackedMatrixTexture(C.texture,o[0],o[1]):c.setOutputMatrixTexture(C.texture,o[0],o[1]),c.setProgram(e.webGLProgram),c.bindVertexArray(e.webGLProgram.vao),St().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&c.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&c.gl.uniform1f(e.nanLoc,NaN);for(let t=0;t<f.length;++t){const s=f[t],{uniform:l,offset:a,shape:r,texShape:i}=e.variablesLocations[t];if(r){const{uniformShape:n}=cd(e.program.packedInputs,s.shape,s.texData.texShape);switch(n.length){case 1:c.gl.uniform1iv(r,new Int32Array(n));break;case 2:c.gl.uniform2iv(r,new Int32Array(n));break;case 3:c.gl.uniform3iv(r,new Int32Array(n));break;case 4:c.gl.uniform4iv(r,new Int32Array(n));break}}if(i&&c.gl.uniform2i(i,s.texData.texShape[0],s.texData.texShape[1]),l!=null){if(s.isUniform){if(bt(s.shape)<2)c.gl.uniform1f(l,s.uniformValues[0]);else{let n=s.uniformValues;n instanceof Float32Array||(n=new Float32Array(n)),c.gl.uniform1fv(l,n)}continue}s.texData.slice!=null&&a!=null&&c.gl.uniform1i(a,s.texData.slice.flatOffset),c.setInputMatrixTexture(s.texData.texture.texture,l,t)}}const x=e.outShapeLocation;if(x)switch(y.shape.length){case 1:c.gl.uniform1iv(x,new Int32Array(y.shape));break;case 2:c.gl.uniform2iv(x,new Int32Array(y.shape));break;case 3:c.gl.uniform3iv(x,new Int32Array(y.shape));break;case 4:c.gl.uniform4iv(x,new Int32Array(y.shape));break}if(e.outShapeStridesLocation){const t=Me(y.shape);switch(y.shape.length){case 2:c.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(t));break;case 3:c.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(t));break;case 4:c.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(t));break}}if(e.outTexShapeLocation&&c.gl.uniform2i(e.outTexShapeLocation,y.texData.texShape[0],y.texData.texShape[1]),e.program.customUniforms&&S)for(let t=0;t<e.program.customUniforms.length;++t){const s=e.program.customUniforms[t],l=e.customUniformLocations[t],a=S[t];if(s.type==="float")c.gl.uniform1fv(l,a);else if(s.type==="vec2")c.gl.uniform2fv(l,a);else if(s.type==="vec3")c.gl.uniform3fv(l,a);else if(s.type==="vec4")c.gl.uniform4fv(l,a);else if(s.type==="int")c.gl.uniform1iv(l,a);else if(s.type==="ivec2")c.gl.uniform2iv(l,a);else if(s.type==="ivec3")c.gl.uniform3iv(l,a);else if(s.type==="ivec4")c.gl.uniform4iv(l,a);else throw Error(`uniform type ${s.type} is not supported yet.`)}c.executeProgram()}function hb(c,e,f){let y="";e.concat(f).forEach(o=>{const x=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(c.enableShapeUniforms&&!o.isUniform){const t=o.texData.texShape,{useSqueezeShape:s,uniformShape:l,keptDims:a}=cd(c.packedInputs,o.shape,t);let r="",i="",n="";if(l.length===1&&c.packedInputs){const g=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];r=`${g[0]>1}_${g[1]>1}`}else if(l.length===2&&!c.packedInputs)i=`${l[0]>1}_${l[1]>1}`;else if(l.length>2&&!c.packedInputs){const g=Me(l);n=`${g[0]===t[1]}_${g[g.length-1]===t[1]}`}const h=o.shape.length,d=l.length===2&&je(o.shape,t),u=bt(o.shape)===1,p=Po(o.shape,f.shape),v=!c.packedInputs&&h===f.shape.length&&je(t,f.texData.texShape),m=c.packedInputs||l.length>2?"":`${t[0]>1}_${t[1]>1}`;y+=`${h}_${v}_${s?a:""}_${l.length}_${u}_${p}_${d}_${r}_${i}_${n}_${m}_${x}`}else{const t=o.isUniform?"uniform":o.texData.texShape;y+=`${o.shape}_${t}_${x}`}});const S=c.userCode;let C=c.constructor.name;return C+="_"+y+"_"+S+`${St().getNumber("WEBGL_VERSION")}`,C}function yn(c){return St().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&c<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fb{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Ga.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const f=bn();this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?al(["r","c","d"],e):yr(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${f.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cb{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Ga.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const f=bn();this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?al(["r","c","d"],e):yr(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${f.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class db{constructor(e){this.variableNames=["A"],this.outTexUsage=Yn.DOWNLOAD;const f=bn();this.outputShape=e,this.userCode=`
      ${Mg}

      void main() {
        float x = getAAtOutCoords();
        ${f.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pb{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Yn.DOWNLOAD;const f=bn();this.outputShape=e,this.userCode=`
      ${Mg}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${f.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vb={R:0,G:1,B:2,A:3};class Zd{constructor(e,f=!1,y="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const S=bn();this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);let C="result";f&&(C="floor(result * 255. + 0.5)");let o="";for(let x=0;x<y.length;x++){const t=y[x];o+=`
          if(offset == ${x}) {
            result = values[${vb[t]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?fd():hd(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${y.length});

        flatIndex = idiv(flatIndex, ${y.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${S.texture2D}(A, uv);
          ${o}
        }
        ${S.output} = vec4(${C}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mb{constructor(e,f=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const y=bn();this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);let S="",C="result";f&&(C="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let x=0;x<=1;x++){const t=o*2+x;S+=`
          localCoords = coords;
          if(localCoords[2] + ${x} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${x};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${y.texture2D}(A, uv);

            if (offset == 0) {
              result[${t}] = values[0];
            } else if (offset == 1) {
              result[${t}] = values[1];
            } else if (offset == 2) {
              result[${t}] = values[2];
            } else {
              result[${t}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?fd():hd(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${S}

          ${y.output} = ${C};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gb(c){const e=bn(),f=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return t5(c,f)}function xb(c){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return r5(c,e)}function yb(c){const e=new Uint16Array([0,1,2,2,1,3]);return a5(c,e)}function to(c,e,f,y,S,C){u5(e,f);const o=o5(c),x=c.TEXTURE_2D;return Jt(c,()=>c.bindTexture(x,o)),Jt(c,()=>c.texParameteri(x,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE)),Jt(c,()=>c.texParameteri(x,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)),Jt(c,()=>c.texParameteri(x,c.TEXTURE_MIN_FILTER,c.NEAREST)),Jt(c,()=>c.texParameteri(x,c.TEXTURE_MAG_FILTER,c.NEAREST)),St().getNumber("WEBGL_VERSION")===1?Jt(c,()=>c.texImage2D(x,0,y,e,f,0,S,C,null)):Jt(c,()=>c.texStorage2D(x,1,y,e,f)),Jt(c,()=>c.bindTexture(c.TEXTURE_2D,null)),{texture:o,texShape:[f,e]}}function Bg(c){return c.internalFormatFloat}function Tb(c,e,f,y){const[S,C]=qa(e,f);return to(c,S,C,Bg(y),y.textureFormatFloat,c.FLOAT)}function $g(c){return c.internalFormatHalfFloat}function Sb(c,e,f,y){const[S,C]=qa(e,f);return to(c,S,C,$g(y),y.textureFormatFloat,y.textureTypeHalfFloat)}function Gg(c){return c.downloadTextureFormat}function Cb(c,e,f,y){const[S,C]=qa(e,f);return to(c,S,C,Gg(y),c.RGBA,c.UNSIGNED_BYTE)}function Ug(c){return c.internalFormatPackedFloat}function Eb(c,e,f,y){const[S,C]=na(e,f);return to(c,S,C,Ug(y),c.RGBA,c.FLOAT)}function Vg(c){return c.internalFormatPackedHalfFloat}function wb(c,e,f,y){const[S,C]=na(e,f);return to(c,S,C,Vg(y),c.RGBA,y.textureTypeHalfFloat)}function bb(c,e,f){return Jt(c,()=>c.bindBuffer(c.ARRAY_BUFFER,f)),Hd(c,e,"clipSpacePos",f,3,20,0)&&Hd(c,e,"uv",f,2,20,12)}function Ab(c,e,f,y,S,C){Jt(c,()=>c.bindTexture(c.TEXTURE_2D,e));let o,x,t;S instanceof Uint8Array?(o=new Uint8Array(f*y*4),x=c.UNSIGNED_BYTE,t=c.RGBA):(o=new Float32Array(f*y*4),x=c.FLOAT,t=C.internalFormatPackedFloat),o.set(S),St().getNumber("WEBGL_VERSION")===2?Jt(c,()=>c.texSubImage2D(c.TEXTURE_2D,0,0,0,f,y,c.RGBA,x,o)):Jt(c,()=>c.texImage2D(c.TEXTURE_2D,0,t,f,y,0,c.RGBA,x,o)),Jt(c,()=>c.bindTexture(c.TEXTURE_2D,null))}function Rb(c,e,f){Jt(c,()=>c.bindTexture(c.TEXTURE_2D,e)),f.data instanceof Uint8Array?St().getNumber("WEBGL_VERSION")===2?Jt(c,()=>c.texSubImage2D(c.TEXTURE_2D,0,0,0,f.width,f.height,c.RGBA,c.UNSIGNED_BYTE,f.data)):Jt(c,()=>c.texImage2D(c.TEXTURE_2D,0,c.RGBA,f.width,f.height,0,c.RGBA,c.UNSIGNED_BYTE,f.data)):St().getNumber("WEBGL_VERSION")===2?Jt(c,()=>c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,f)):Jt(c,()=>c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,f)),Jt(c,()=>c.bindTexture(c.TEXTURE_2D,null))}function Ib(c,e,f,y){const S=c.createBuffer();Jt(c,()=>c.bindBuffer(c.PIXEL_PACK_BUFFER,S));const x=4*4*e*f;return Jt(c,()=>c.bufferData(c.PIXEL_PACK_BUFFER,x,c.STREAM_READ)),Jt(c,()=>c.readPixels(0,0,f,e,c.RGBA,c.FLOAT,0)),Jt(c,()=>c.bindBuffer(c.PIXEL_PACK_BUFFER,null)),S}function Pb(c,e,f){const y=c,S=new Float32Array(f);return y.bindBuffer(y.PIXEL_PACK_BUFFER,e),y.getBufferSubData(y.PIXEL_PACK_BUFFER,0,S),y.bindBuffer(y.PIXEL_PACK_BUFFER,null),S}function Fb(c,e,f,y){const[S,C]=qa(e,f),o=4,x=new Uint8Array(K6(e*f,o));return Jt(c,()=>c.readPixels(0,0,S,C,y.downloadTextureFormat,c.UNSIGNED_BYTE,x)),new Float32Array(x.buffer)}function Mb(c,e,f,y,S,C,o,x){const t=c,s=new Float32Array(j6(C,o));return t.bindBuffer(t.PIXEL_PACK_BUFFER,e),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,s),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),s}function Nb(c,e,f){const y=new Float32Array(e*f*4);return Jt(c,()=>c.readPixels(0,0,f,e,c.RGBA,c.FLOAT,y)),y}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class El{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const f=St().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,X6(f,e)):this.gl=Cs(f),e=this.gl,St().getNumber("WEBGL_VERSION")===2){const C=e;this.createVertexArray=()=>Jt(C,()=>C.createVertexArray()),this.bindVertexArray=o=>Jt(C,()=>C.bindVertexArray(o)),this.deleteVertexArray=o=>Jt(C,()=>C.deleteVertexArray(o)),this.getVertexArray=()=>Jt(C,()=>C.getParameter(C.VERTEX_ARRAY_BINDING))}else if(e!=null){const C=e.getExtension("OES_vertex_array_object");if(C==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Jt(e,()=>C.createVertexArrayOES()),this.bindVertexArray=o=>Jt(e,()=>C.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Jt(e,()=>C.deleteVertexArrayOES(o)),this.getVertexArray=()=>Jt(e,()=>e.getParameter(C.VERTEX_ARRAY_BINDING_OES))}let y="WEBGL_color_buffer_float";const S="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),St().getNumber("WEBGL_VERSION")===1){const C="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=uo(this.gl,C),us(this.gl,o))this.textureHalfFloatExtension=uo(this.gl,o);else if(St().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(y),us(this.gl,S))this.colorBufferHalfFloatExtension=uo(this.gl,S);else if(St().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(y="EXT_color_buffer_float",us(this.gl,y))this.colorBufferFloatExtension=this.gl.getExtension(y);else if(us(this.gl,S))this.colorBufferHalfFloatExtension=this.gl.getExtension(S);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=xb(this.gl),this.indexBuffer=yb(this.gl),this.framebuffer=l5(this.gl),this.textureConfig=ld(this.gl,this.textureHalfFloatExtension)}get debug(){return St().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Jt(e,()=>e.finish()),Jt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Jt(e,()=>e.deleteFramebuffer(this.framebuffer)),Jt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Jt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Jt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,f){return this.throwIfDisposed(),Tb(this.gl,e,f,this.textureConfig)}createFloat16MatrixTexture(e,f){return this.throwIfDisposed(),Sb(this.gl,e,f,this.textureConfig)}createUnsignedBytesMatrixTexture(e,f){return this.throwIfDisposed(),Cb(this.gl,e,f,this.textureConfig)}uploadPixelDataToTexture(e,f){this.throwIfDisposed(),Rb(this.gl,e,f)}uploadDenseMatrixToTexture(e,f,y,S){this.throwIfDisposed(),Ab(this.gl,e,f,y,S,this.textureConfig)}createFloat16PackedMatrixTexture(e,f){return this.throwIfDisposed(),wb(this.gl,e,f,this.textureConfig)}createPackedMatrixTexture(e,f){return this.throwIfDisposed(),Eb(this.gl,e,f,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Yd(this.gl,this.framebuffer),this.outputTexture=null),Jt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,f,y){return this.downloadMatrixDriver(e,()=>Fb(this.gl,f,y,this.textureConfig))}downloadPackedMatrixFromBuffer(e,f,y,S,C,o){return Mb(this.gl,e,f,y,S,C,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,f){return Pb(this.gl,e,f)}createBufferFromTexture(e,f,y){this.bindTextureToFrameBuffer(e);const S=Ib(this.gl,f,y,this.textureConfig);return this.unbindTextureToFrameBuffer(),S}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let f,y;if(St().getBool("WEBGL_FENCE_API_ENABLED")){const S=e,C=S.fenceSync(S.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),y=()=>{const o=S.clientWaitSync(C,0,0);return o===S.ALREADY_SIGNALED||o===S.CONDITION_SATISFIED},f=C}else St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(f=this.beginQuery(),this.endQuery(),y=()=>this.isQueryAvailable(f,St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):y=()=>!0;return{query:f,isFencePassed:y}}downloadMatrixFromPackedTexture(e,f,y){return this.downloadMatrixDriver(e,()=>Nb(this.gl,f,y))}createProgram(e){this.throwIfDisposed();const f=this.gl;this.vertexShader==null&&(this.vertexShader=gb(f));const y=s5(f);Jt(f,()=>f.attachShader(y,this.vertexShader)),Jt(f,()=>f.attachShader(y,e)),i5(f,y);const S=Object.assign(y,{vao:this.createVertexArray()});return this.debug&&yl(f,S),S}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const f=this.gl;Jt(f,()=>f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),bb(f,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Jt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&yl(this.gl,this.program),Jt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,f,y=!0){return this.throwIfDisposed(),y?f5(this.gl,e,f):c5(this.gl,e,f)}getAttributeLocation(e,f){return this.throwIfDisposed(),Jt(this.gl,()=>this.gl.getAttribLocation(e,f))}getUniformLocationNoThrow(e,f){return this.throwIfDisposed(),this.gl.getUniformLocation(e,f)}setInputMatrixTexture(e,f,y){this.throwIfDisposed(),this.throwIfNoProgram(),d5(this.gl,e,f,y)}setOutputMatrixTexture(e,f,y){this.setOutputMatrixTextureDriver(e,y,f)}setOutputPackedMatrixTexture(e,f,y){this.throwIfDisposed();const[S,C]=na(f,y);this.setOutputMatrixTextureDriver(e,S,C)}setOutputMatrixWriteRegion(e,f,y,S){this.setOutputMatrixWriteRegionDriver(y,e,S,f)}setOutputPackedMatrixWriteRegion(e,f,y,S){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&yl(this.gl,this.program),lo(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const f=this.getVertexArray();console.assert(f===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Jt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Jt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=uo(this.gl,St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const y=this.gl,S=this.getQueryTimerExtensionWebGL2(),C=y.createQuery();return y.beginQuery(S.TIME_ELAPSED_EXT,C),C}const e=this.getQueryTimerExtensionWebGL1(),f=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,f),f}endQuery(){if(St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const f=this.gl,y=this.getQueryTimerExtensionWebGL2();f.endQuery(y.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Sd(()=>this.disposed||this.isQueryAvailable(e,St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,f){if(f===0)return null;if(f===2){const y=this.gl;return y.getQueryParameter(e,y.QUERY_RESULT)/1e6}else{const y=this.getQueryTimerExtensionWebGL1();return y.getQueryObjectEXT(e,y.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,f){if(f===0)return!0;if(f===2){const y=this.gl,S=this.getQueryTimerExtensionWebGL2(),C=y.getQueryParameter(e,y.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(S.GPU_DISJOINT_EXT)),C&&!this.disjoint}else{const y=this.getQueryTimerExtensionWebGL1(),S=y.getQueryObjectEXT(e,y.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(y.GPU_DISJOINT_EXT)),S&&!this.disjoint}}pollFence(e){return new Promise(f=>{this.addItemToPoll(()=>e.isFencePassed(),()=>f())})}pollItems(){const e=Ob(this.itemsToPoll.map(f=>f.isDoneFn));for(let f=0;f<=e;++f){const{resolveFn:y}=this.itemsToPoll[f];y()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,f){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:f}),this.itemsToPoll.length>1)return;let y;"setTimeoutCustom"in St().platform&&(y=St().platform.setTimeoutCustom.bind(St().platform)),Sd(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,y)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),Tl(this.gl,e,this.framebuffer),this.debug&&lo(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Tl(this.gl,this.outputTexture,this.framebuffer),this.debug&&lo(this.gl)):Yd(this.gl,this.framebuffer)}downloadMatrixDriver(e,f){this.bindTextureToFrameBuffer(e);const y=f();return this.unbindTextureToFrameBuffer(),y}setOutputMatrixTextureDriver(e,f,y){this.throwIfDisposed();const S=this.gl;Tl(S,e,this.framebuffer),this.debug&&lo(S),this.outputTexture=e,Jt(S,()=>S.viewport(0,0,f,y)),Jt(S,()=>S.scissor(0,0,f,y))}setOutputMatrixWriteRegionDriver(e,f,y,S){this.throwIfDisposed(),Jt(this.gl,()=>this.gl.scissor(e,f,y,S))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Ob(c){let e=0;for(;e<c.length&&c[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Db(c){const e=new Float32Array(c.length);for(let f=0;f<c.length;++f)e[f]=Math.abs(c[f]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ln(c){return(e,f,y,S,C)=>{const o=Te(e,f),x=o.length,t=Me(o),s=bt(o),l=wi(C,s),a=e.length,r=f.length,i=Me(e),n=Me(f),h=Po(e,o),d=Po(f,o);if(h.length+d.length===0)for(let u=0;u<l.length;++u)l[u]=c(y[u%y.length],S[u%S.length]);else for(let u=0;u<l.length;++u){const p=Fh(u,x,t),v=p.slice(-a);h.forEach(w=>v[w]=0);const m=Ul(v,a,i),g=p.slice(-r);d.forEach(w=>g[w]=0);const T=Ul(g,r,n);l[u]=c(y[m],S[T])}return[l,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lb(c,e,f,y){if(y==="int32"){const S=Int32Array.from(c);return[e,"int32",S]}if(y==="bool"){const S=Yu([0],f),[C,o]=Ln((x,t)=>x!==t?1:0)(e,[],c,S,"bool");return[o,"bool",C]}throw new Error(`Error in Cast: failed to cast ${f} to ${y}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bb=Ln((c,e)=>c+e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $b(c,e,f,y,S){const C=bt(y),o=bi(S,f);for(let x=0;x<c.length;x++){const t=c[x];if(t<0)throw new Error("Input x must be non-negative!");t>=S||(C>0?o[t]+=e[x]:o[t]+=1)}return o}function Gb(c,e,f,y=!1){const S=c.shape[0],C=c.shape[1],o=Ze([S,f],e.dtype);for(let x=0;x<S;x++)for(let t=0;t<C;t++){const s=c.get(x,t);if(s<0)throw new Error("Input x must be non-negative!");s>=f||(y?o.set(1,x,s):e.size>0?o.set(o.get(x,s)+e.get(x,t),x,s):o.set(o.get(x,s)+1,x,s))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ub=Ln((c,e)=>c&e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(c){return(e,f,y)=>{const S=un(f,e.length);for(let C=0;C<e.length;++C)S[C]=c(e[C],y);return S}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vb=si(c=>Math.ceil(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zg(c,e,f,y){const S=un(f,bt(e));if(y&&f!=="string"){let C=0;c.forEach(o=>{const x=bt(o.shape);S.set(o.vals,C),C+=x})}else{let C=0;c.forEach(o=>{const x=f==="string"?jr(o.vals):o.vals;let t=0;for(let s=0;s<o.shape[0];++s){const l=s*e[1]+C;for(let a=0;a<o.shape[1];++a)S[l+a]=x[t++]}C+=o.shape[1]})}return S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zb=Ln((c,e)=>c===e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kb=si(c=>Math.exp(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wb=si(c=>Math.expm1(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xb=si(c=>Math.floor(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hb=Ln((c,e)=>Math.floor(c/e));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yb(c,e,f,y,S,C,o,x,t){const s=Ze([y,C],f);for(let l=0;l<y;l++){const a=[];let r=0;for(let i=0;i<S;i++){const n=c[l*S+i];r+=n*o[i],a.push(n)}if(r<0||r>=t/C)throw new Error(`Invalid indices: ${a} does not index into ${x}`);for(let i=0;i<C;i++)s.values[l*C+i]=e.get(...e.indexToLoc(r*C+i))}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kb(c,e,f){const y=Ze(f,c.dtype);for(let S=0;S<y.size;++S){const o=y.indexToLoc(S).slice(),x=o[0],t=o[2],s=e.locToIndex([x,t]);o[2]=e.values[s];const l=c.locToIndex(o);0<=l&&l<c.values.length&&(y.values[S]=c.values[l])}return y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jb=Ln((c,e)=>c>e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zb=Ln((c,e)=>c>=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qb=Ln((c,e)=>c<e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jb=Ln((c,e)=>c<=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qb(c,e,f){const y=(e-c)/(f-1),S=bi(f,"float32");S[0]=c;for(let C=1;C<S.length;C++)S[C]=S[C-1]+y;return S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _b=si(c=>Math.log(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tA(c,e,f,y){const S=wi(y,bt(f));for(let C=0;C<S.length;++C){const o=C*e;let x=c[o];for(let t=0;t<e;++t){const s=c[o+t];(Number.isNaN(s)||s>x)&&(x=s)}S[C]=x}return S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eA=Ln((c,e)=>Math.max(c,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nA=Ln((c,e)=>Math.min(c,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kg=Ln((c,e)=>c*e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sA(c,e,f){const y=_r(-1,f);return kg([],e,y,c,f)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iA=Ln((c,e)=>c!==e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rA(c,e,f,y,S){const C=e.length,o=bt(e),x=Me(e),t=Me(S),s=wi(f,bt(S));for(let l=0;l<o;++l){const a=Fh(l,C,x),r=new Array(a.length);for(let n=0;n<r.length;n++)r[n]=a[y[n]];const i=Ul(r,C,t);s[i]=c[l]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aA(c,e,f,y){const[S,C]=xn(c,y),o=Ns(e,"int32"),x=bi(bt(S),o),t=bt(C);for(let s=0;s<x.length;++s){const l=s*t;let a=1;for(let r=0;r<t;++r)a*=f[l+r];x[s]=a}return{outVals:x,outShape:S,outDtype:o}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oA(c,e,f){c.forEach((y,S)=>{if(y<0||y>=f){const C=Fh(S,e.length,Me(e)).join(",");throw new Error(`indices[${C}] = ${y} is not in [0, ${f})`)}})}function uA(c,e){for(let f=0;f<c.length;++f){const y=c[f],S=f===c.length-1?e:c[f+1].length;if(y.length===0)throw new Error("Ragged splits may not be empty");if(y[0]<0)throw new Error("Ragged splits must be non-negative");if(y[y.length-1]>S)throw new Error("Ragged splits must not point past values");for(let C=1;C<y.length;++C)if(y[C-1]>y[C])throw new Error("Ragged splits must be sorted in ascending order")}}function lA(c,e,f,y){const S=[];let C=0;const o=e.length-1+f.length,x=new Array(o).fill(null).map(()=>[0]);uA(f,y);let t=1;for(let s=0;s<e.length-1;++s){t*=e[s];const l=e[s+1];for(let a=1;a<t+1;++a)x[s].push(a*l)}for(let s=0;s<c.length;++s){let l=c[s],a=c[s]+1;for(let r=0;r<f.length;++r){const i=f[r],n=r+e.length-1;if(n>=0){const h=x[n],d=h[h.length-1]-i[l];for(let u=l;u<a;++u)x[n].push(i[u+1]+d)}l=i[l],a=i[a]}a!==l&&(S.push([l,a]),C+=a-l)}return{outSplits:x,valueSlices:S,numValues:C}}function hA(c){const e=[];for(let f=0;f<c.length;++f){const y=c[f].length,S=un("int32",y);e.push(S),c[f].forEach((C,o)=>S[o]=C)}return e}function Qd(c,e){const f=c.slice(0,e);for(;f.length<e;)f.push(1);for(let y=e;y<c.length;y++)f[e-1]*=c[y];return f}function fA(c,e,f,y,S,C){const o=Qd(e,2)[1],x=Qd(C,2)[1];let t=0;for(const s of f)for(let l=s[0];l<s[1];++l){for(let a=0;a<y;++a)S[t*x+a]=c[l*o+a];++t}}function cA(c,e,f,y,S){const C=e.slice();C[0]=S;const o=un(f,bt(C)),x=c.length,t=x===0?0:x/e[0];return fA(c,e,y,t,o,C),[o,C]}function dA(c,e,f,y,S,C,o,x){if(c.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const t=e[0][0]-1;if(oA(C,o,t),y.length===0)throw new Error("params.rank must be nonzero");const s=y[0],{outSplits:l,valueSlices:a,numValues:r}=lA(C,o,c,s),i=hA(l),n=cA(f,y,S,a,r);return[i,n[0],n[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jd=2147483647;function pA(c,e,f,y,S,C,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(S.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const x=e.length===0,t=S.length===0,s=o.length===0,l=[];x||l.push(e[0]),t||l.push(S[0]),s||l.push(o[0]);for(let d=1;d<l.length;++d)if(l[d]!==l[d-1])throw new Error("starts, limits, and deltas must have the same shape");const a=l.length===0?1:l[0],r=un("int32",a+1);r[0]=0;for(let d=0;d<a;++d){const u=x?c[0]:c[d],p=t?y[0]:y[d],v=s?C[0]:C[d];if(v===0)throw new Error("Requires delta != 0");let m;if(v>0&&p<u||v<0&&p>u)m=0;else if(m=Math.ceil(Math.abs((p-u)/v)),m>Jd)throw new Error(`Requires ((limit - start) / delta) <= ${Jd}`);r[d+1]=r[d]+m}const i=r[a],n=un(f,i);let h=0;for(let d=0;d<a;++d){const u=r[d+1]-r[d];let p=x?c[0]:c[d];const v=s?C[0]:C[d];for(let m=0;m<u;++m)n[h++]=p,p+=v}return[r,n]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var es=gs;class Lo{constructor(e,f,y,S,C,o,x,t,s,l){this.shape=e,this.shapeShape=f,this.values=y,this.valuesShape=S,this.valuesDType=C,this.defaultValue=o,this.defaultValueShape=x,this.rowPartitionValues=t,this.rowPartitionValuesShapes=s,this.rowPartitionTypes=cg(l),this.raggedRank=dg(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===es.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===es.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const f=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case es.VALUE_ROWIDS:return Lo.getMaxWidthValueRowID(f);case es.ROW_SPLITS:return Lo.getMaxWidthRowSplit(f);default:throw new Error(`Cannot handle partition type ${es[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const f=e.length;if(f===0||f===1)return 0;let y=0;for(let S=0;S<f-1;++S){const C=e[S+1]-e[S];C>y&&(y=C)}return y}static getMaxWidthValueRowID(e){const f=e.length;if(f===0)return 0;let y=0,S=e[0],C=0;for(let o=1;o<f;++o){const x=e[o];x!==S&&(S=x,C=Math.max(o-y,C),y=o)}return Math.max(f-y,C)}tensorShapeFromTensor(e,f,y=!0){if(f.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return _d(e,y)}calculateOutputSize(e){const f=this.valuesShape,y=this.defaultValueShape;pg(y,f);const S=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=fg(this.raggedRank,S,f);o[0]<0&&(o[0]=e);for(let x=1;x<=this.raggedRank;++x)o[x]<0&&(o[x]=this.getMaxWidth(x));return o}calculateFirstParentOutputIndex(e,f,y){const S=Math.min(e,y),C=[];let o=0;for(let x=0;x<S;++x,o+=f)C.push(o);for(let x=S;x<e;++x)C.push(-1);return it(C.length===e,()=>"Final length of result must be equal to firstDimension."),C}calculateOutputIndexRowSplit(e,f,y,S){const C=e.length,o=[];for(let x=0;x<C-1;++x){const t=e[x+1]-e[x];let s=Math.min(S,t),l=f[x];l===-1&&(s=0);for(let a=0;a<s;++a)o.push(l),l+=y;for(let a=0;a<t-s;++a)o.push(-1)}if(C>0&&o.length!==e[C-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,f,y,S){const C=e.length,o=[];if(C===0)return[];let x=0,t=e[0];if(t>=f.length)throw new Error(`Got currentValueRowId=${t}, which is not less than ${f.length}`);let s=f[t];o.push(s);for(let l=1;l<C;++l){const a=e[l];if(a===t)s>=0&&(++x,x<S?s+=y:s=-1);else{if(x=0,t=a,a>=f.length)throw new Error(`Got nextValueRowId=${a} which is not less than ${f.length}`);s=f[a]}o.push(s)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,f,y,S){const C=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case es.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(C,f,y,S);case es.ROW_SPLITS:if(C.length-1>f.length)throw new Error(`Row partition size is greater than output size: ${C.length-1} > ${f.length}`);return this.calculateOutputIndexRowSplit(C,f,y,S);default:throw new Error(`Unsupported partition type: ${es[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const f=this.rowPartitionTypes[0];switch(f){case es.FIRST_DIM_SIZE:return e[0];case es.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case es.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${es[f]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const f=this.getFirstDimensionSize(),y=this.calculateOutputSize(f),S=new Array(this.raggedRank+1);S[S.length-1]=1;for(let t=S.length-2;t>=0;--t)S[t]=S[t+1]*y[t+1];const C=_d(y,!1),o=un(this.valuesDType,bt(C));if(S[0]*y[0]>0){let t=this.calculateFirstParentOutputIndex(f,S[0],y[0]);for(let s=1;s<=this.raggedRank;++s)t=this.calculateOutputIndex(s-1,t,S[s],y[s]);this.setOutput(this.raggedRank,t,o,C)}return[C,o]}setOutput(e,f,y,S){if(y.length===0)return;const C=this.values,o=y;let x=S.slice();x=x.slice(e+1);const t=bt(x),s=f.length;let l=this.defaultValue;if(l.length!==t&&l.length!==1){const n=this.defaultValueShape;de(()=>{const h=Mt(l,n);l=Ca(h,x).dataSync()})}let a=0,r=0,i=0;for(let n=0;n<=s;++n){let h=n<s?f[n]:-1;if(h===i){++i;continue}if(r<i){const d=C.subarray(a*t),u=o.subarray(r*t),p=(i-r)*t;qd(u,d,p)}if(n>=s){const d=y.length;h=Math.floor(d/t)}if(h>i)if(this.defaultValue.length===1)o.subarray(i*t,h*t).fill(this.defaultValue[0]),i=h;else for(;h>i;){const d=o.slice(i*t);qd(d,l,t),++i}h<0?(a=n+1,r=i):(a=n,r=i,i=r+1)}}}function qd(c,e,f){for(let y=0;y<f;y++)c[y]=e[y]}function _d(c,e){const f=[];for(let y of c){if(y<0){if(!e)throw new Error(`Dimension ${y} must be >= 0`);if(y<-1)throw new Error(`Dimension ${y} must be >= -1`);y=-1}f.push(y)}return f}function vA(c,e,f,y,S,C,o,x,t,s){return new Lo(c,e,f,y,S,C,o,x,t,s).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wg(c,e,f,y){const S=c===e,C=c<e&&f<0,o=e<c&&f>1;if(S||C||o)return bi(0,y);const x=Math.abs(Math.ceil((e-c)/f)),t=bi(x,y);e<c&&f===1&&(f=-1),t[0]=c;for(let s=1;s<t.length;s++)t[s]=t[s-1]+f;return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mA=si(c=>1/Math.sqrt(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gA(c,e,f,y,S,C,o,x,t,s){const l=[y/S,S],a=c.values,r=e.values;if(y===0)return Ze(f,e.dtype);const i=t instanceof Yr?t:Ze(l,e.dtype);typeof t=="string"||typeof t=="number"?i.values.fill(t):typeof t=="boolean"&&i.values.fill(+t);for(let n=0;n<C;n++){const h=[];let d=0;for(let u=0;u<o;u++){const p=a[n*o+u];h.push(p),d+=p*x[u]}if(d<0||d>=y/S)throw new Error(`Invalid indices: ${h} does not index into ${f}`);for(let u=0;u<S;u++)s?i.values[d*S+u]+=r[n*S+u]:i.values[d*S+u]=e.rank===0?r[0]:r[n*S+u]}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xA=si(c=>1/(1+Math.exp(-c)));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ah(c,e,f,y,S){const C=sl(y,e,f),o=bt(f),x=Me(y);if(C){const a=il(e,x);return S==="string"?c.slice(a,a+o):c.subarray(a,a+o)}const t=S==="string"?jr(c):c,s=Ze(y,S,t),l=Ze(f,S);for(let a=0;a<l.size;++a){const r=l.indexToLoc(a),i=r.map((n,h)=>n+e[h]);l.set(s.get(...i),...r)}return S==="string"?ud(l.values):l.values}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yA(c,e,f,y,S,C,o){const x=e[0],t=C[0],s=new Array(t),l=new Array(x),a=e[1];if(t===0){if(x!==0)throw new Error(Qc(x));const d=un(f,0),u=un(S,0);return[d,[0,a],u,s,l]}let r=!0,i=0;const n=new Array(t).fill(0);for(let d=0;d<x;++d){const u=c[d*a];if(u<0)throw new Error(Jc(d,u));if(u>=t)throw new Error(qc(d,u,t));++n[u],r=r&&u>=i,i=u}let h=!0;for(let d=0;d<t;++d){const u=n[d]===0;s[d]=u,h=h&&!u,n[d]=Math.max(n[d],1),d>0&&(n[d]+=n[d-1])}if(h&&r){const d=c,u=y;for(let p=0;p<x;++p)l[p]=p;return[d,[x,a],u,s,l]}else{const d=n[t-1],u=un(f,d*a),p=un(S,d),v=new Array(t).fill(0);for(let m=0;m<x;++m){const g=c[m*a],T=v[g],w=(g===0?0:n[g-1])+T;v[g]++;for(let b=0;b<a;++b)u[w*a+b]=c[m*a+b];p[w]=y[m],l[m]=w}for(let m=0;m<t;++m)if(v[m]===0){const T=m===0?0:n[m-1];u[T*a+0]=m;for(let w=1;w<a;++w)u[T*a+w]=0;p[T]=o}return[u,[d,a],p,s,l]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TA(c,e,f,y,S){const C=bt(y),o=e[0],x=S.length,t=[];let s=1,l=-1;for(let d=0;d<x;++d){const u=S[d];if(u===-1){if(l!==-1)throw new Error(_c(l,d));l=d,t.push(1)}else{if(u<0)throw new Error(td(d,u));s*=u,t.push(u)}}if(l!==-1){if(s<=0)throw new Error(ed());const d=Math.trunc(C/s);if(s*d!==C)throw new Error(nd(y,t));t[l]=d}if(bt(t)!==C)throw new Error(sd(y,t));const r=y.length,i=[];if(r>0){i[r-1]=1;for(let d=r-2;d>=0;--d)i[d]=i[d+1]*y[d+1]}const n=[];if(x>0){n[x-1]=1;for(let d=x-2;d>=0;--d)n[d]=n[d+1]*t[d+1]}const h=un(f,o*x);for(let d=0;d<o;++d){let u=0;for(let p=0;p<r;++p)u+=c[d*r+p]*i[p];for(let p=0;p<x;++p)h[d*x+p]=Math.trunc(u/n[p]),u%=n[p]}return[h,[o,x],t]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SA(c,e,f,y,S,C=!1,o=0){const x=y.length,t=[e[0],c.length/e[0]],s=t[1],a=x>0?S[x-1]+1:0;if(a<0)throw new Error($a());const r=e.slice();r[0]=a;const i=r.reduce((v,m)=>v*m,1),n=un(f,i);if(x===0)return a>0&&n.fill(o),[n,r];if(a<=0)throw new Error($a());let h=0,d=1,u=0,p=S[h];for(;;){let v=0;if(d<x){if(v=S[d],p===v){++d;continue}if(p>=v)throw new Error(id())}if(p<0||p>=a)throw new Error(rd(p,a));p>u&&n.fill(o,u*s,p*s);for(let m=h;m<d;++m){const g=y[m];if(g<0||g>=t[0])throw new Error(ad(m,y[m],t[0]));for(let T=0;T<s;T++)n[p*s+T]+=c[g*s+T]}if(C)for(let m=0;m<s;m++)n[p*s+m]/=d-h;if(h=d,++d,u=p+1,p=v,d>x)break}return u<a&&n.fill(o,u*s,a*s),[n,r]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CA=si(c=>Math.sqrt(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EA=Ln((c,e)=>{const f=c-e;return f*f});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wA=si((c,e)=>{const{pattern:f,replaceGlobal:y,rewrite:S}=e;return c.replace(new RegExp(f,y?"g":""),S)});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bA(c,e,f,y){const S=Ze(c,e.dtype);for(let C=0;C<S.size;C++){const o=S.indexToLoc(C),x=new Array(o.length);for(let t=0;t<x.length;t++)x[t]=o[t]*f[t]+y[t];S.set(e.get(...x),...o)}return S}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AA{constructor(e,f,y,S,C,o){this.separator=er(e),this.nGramWidths=f,this.leftPad=er(y),this.rightPad=er(S),this.padWidth=C,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,f){const y=this.getPadWidth(f);return Math.max(0,e+2*y-f+1)}createNGrams(e,f,y,S,C,o){for(let x=0;x<C;++x){const t=this.getPadWidth(o),s=Math.max(0,t-x),l=Math.max(0,t-(C-(x+1))),a=o-(s+l),r=f+(s>0?0:x-t);let i=0;i+=s*this.leftPad.length;for(let p=0;p<a;++p)i+=e[r+p].length;i+=l*this.rightPad.length;const n=s+l+a-1;i+=n*this.separator.length,y[S+x]=new Uint8Array(i);const h=y[S+x];let d=0;const u=p=>p.forEach(v=>h[d++]=v);for(let p=0;p<s;++p)u(this.leftPad),u(this.separator);for(let p=0;p<a-1;++p)u(e[r+p]),u(this.separator);if(a>0){u(e[r+a-1]);for(let p=0;p<l;++p)u(this.separator),u(this.rightPad)}else{for(let p=0;p<l-1;++p)u(this.rightPad),u(this.separator);u(this.rightPad)}}}compute(e,f){const y=e.length,S=f.length;if(S>0){let t=f[0];if(t!==0)throw new Error(`First split value must be 0, got ${t}`);for(let s=1;s<S;++s){let l=f[s]>=t;if(l=l&&f[s]<=y,!l)throw new Error(`Invalid split value ${f[s]}, must be in [${t}, ${y}]`);t=f[s]}if(t!==y)throw new Error(`Last split value must be data size. Expected ${y}, got ${t}`)}const C=S-1,o=un("int32",S);if(y===0||S===0){const t=new Array(y);for(let s=0;s<=C;++s)o[s]=0;return[t,o]}o[0]=0;for(let t=1;t<=C;++t){const s=f[t]-f[t-1];let l=0;this.nGramWidths.forEach(a=>{l+=this.getNumNGrams(s,a)}),this.preserveShort&&s>0&&l===0&&(l=1),o[t]=o[t-1]+l}const x=new Array(o[C]);for(let t=0;t<C;++t){const s=f[t];let l=o[t];if(this.nGramWidths.forEach(a=>{const r=f[t+1]-f[t],i=this.getNumNGrams(r,a);this.createNGrams(e,s,x,l,i,a),l+=i}),this.preserveShort&&l===o[t]){const a=f[t+1]-f[t];if(a===0)continue;const r=a+2*this.padWidth,i=1;this.createNGrams(e,s,x,l,i,r)}}return[x,o]}}function Xg(c,e,f,y,S,C,o,x){return new AA(f,y,S,C,o,x).compute(c,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RA(c,e,f,y){if(!c.length)return;if(e.length===0){for(let C=0;C<c.length;++C)y.push(c.subarray(C,C+1));return}if(e.length===1){const C=e[0];let o=c.indexOf(C);for(;o!==-1;){const x=c.subarray(0,o);(!f||x.length!==0)&&y.push(x),c=c.subarray(o+1),o=c.indexOf(C)}(!f||c.length!==0)&&y.push(c);return}let S=0;for(let C=0;C<c.length+1;C++)if(C===c.length||e.indexOf(c[C])!==-1){const o=c.subarray(S,C);(!f||o.length!==0)&&y.push(o),S=C+1}}function Hg(c,e,f){const y=c.length,S=[];let C=0,o=0;const x=new Array(y);for(let r=0;r<y;++r){const i=S.length;RA(c[r],e,f,S);const n=S.length-i;x[r]=n,C+=n,o=Math.max(o,n)}const t=un("int32",C*2),s=new Array(C),l=[y,o];let a=0;for(let r=0;r<y;++r)for(let i=0;i<x[r];++i)t[a*2]=r,t[a*2+1]=i,s[a]=S[a],++a;return[t,s,l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yg(c,e){const f=un("int32",c.length);for(let y=0;y<c.length;++y)f[y]=ex(c[y]).modulo(e).getLowBitsUnsigned();return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IA=Ln((c,e)=>c-e);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PA(c,e){const f=new Array(c.rank);for(let S=0;S<f.length;S++)f[S]=c.shape[S]*e[S];const y=Ze(f,c.dtype);for(let S=0;S<y.values.length;++S){const C=y.indexToLoc(S),o=new Array(c.rank);for(let t=0;t<o.length;t++)o[t]=C[t]%c.shape[t];const x=c.locToIndex(o);y.values[S]=c.values[x]}return y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ya=(c,e)=>{const f=e.value-c.value;return f===0?c.index-e.index:f};function Kg(c,e,f=0,y=c.length-1){for(;y>f;){if(y-f>600){const x=y-f+1,t=e-f+1,s=Math.log(x),l=.5*Math.exp(2*s/3),a=.5*Math.sqrt(s*l*(x-l)/x)*Math.sign(t-x/2),r=Math.max(f,Math.floor(e-t*l/x+a)),i=Math.min(y,Math.floor(e+(x-t)*l/x+a));Kg(c,e,r,i)}const S=c[e];let C=f,o=y;for(pa(c,f,e),ya(c[y],S)>0&&pa(c,f,y);C<o;){for(pa(c,C,o),C++,o--;ya(c[C],S)<0;)C=C+1;for(;ya(c[o],S)>0;)o=o-1}ya(c[f],S)===0?pa(c,f,o):(o=o+1,pa(c,o,y)),o<=e&&(f=o+1),e<=o&&(y=o-1)}}function FA(c,e,f,y,S){const C=e[e.length-1],[o,x]=[c.length/C,C],t=wi(f,o*y),s=wi("int32",o*y);for(let a=0;a<o;a++){const r=a*x,i=c.subarray(r,r+x);let n=new Array(i.length);i.forEach((p,v)=>n[v]={value:p,index:v}),y<n.length&&(Kg(n,y),n=n.slice(0,y)),S&&n.sort(ya);const h=a*y,d=t.subarray(h,h+y),u=s.subarray(h,h+y);for(let p=0;p<y;p++)d[p]=n[p].value,u[p]=n[p].index}const l=e.slice();return l[l.length-1]=y,[Ze(l,f,t),Ze(l,"int32",s)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jg(c,e,f,y){const S=Qe(e,f)[0],C=[1,f[0],1];for(let n=0;n<S;n++)C[0]*=f[n];C[1]=f[S];for(let n=S+1;n<f.length;n++)C[2]*=f[n];const o=new Map,x=new Int32Array(f[S]),t=new Yr(C,y,c),s=[],l=C[0]===1&&C[2]===1;for(let n=0;n<f[S];n++){let h;if(l)h=c[n].toString();else{const u=[];for(let p=0;p<C[0];p++)for(let v=0;v<C[2];v++)u.push(t.get(p,n,v));h=u.join(",")}const d=o.get(h);if(d!=null)x[n]=d;else{const u=o.size;o.set(h,u),x[n]=u,s.push(n)}}const a=C.slice();a[1]=o.size;const r=new Yr(a,y);s.forEach((n,h)=>{for(let d=0;d<C[0];d++)for(let u=0;u<C[2];u++)r.set(t.get(d,n,u),d,h,u)});const i=f.slice();return i[S]=a[1],{outputValues:r.values,outputShape:i,indices:x}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MA=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Bb,bincountImpl:$b,bincountReduceImpl:Gb,bitwiseAndImpl:Ub,castImpl:Lb,ceilImpl:Vb,concatImpl:zg,equalImpl:zb,expImpl:kb,expm1Impl:Wb,floorDivImpl:Hb,floorImpl:Xb,gatherNdImpl:Yb,gatherV2Impl:Kb,greaterEqualImpl:Zb,greaterImpl:jb,lessEqualImpl:Jb,lessImpl:Qb,linSpaceImpl:qb,logImpl:_b,maxImpl:tA,maximumImpl:eA,minimumImpl:nA,multiplyImpl:kg,negImpl:sA,notEqualImpl:iA,prodImpl:aA,raggedGatherImpl:dA,raggedRangeImpl:pA,raggedTensorToTensorImpl:vA,rangeImpl:Wg,rsqrtImpl:mA,scatterImpl:gA,sigmoidImpl:xA,simpleAbsImpl:Db,sliceImpl:ah,sparseFillEmptyRowsImpl:yA,sparseReshapeImpl:TA,sparseSegmentReductionImpl:SA,sqrtImpl:CA,squaredDifferenceImpl:EA,staticRegexReplaceImpl:wA,stridedSliceImpl:bA,stringNGramsImpl:Xg,stringSplitImpl:Hg,stringToHashBucketFastImpl:Yg,subImpl:IA,tileImpl:PA,topKImpl:FA,transposeImpl:rA,uniqueImpl:jg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:NA,bincountImpl:Zg,bincountReduceImpl:OA,bitwiseAndImpl:DA,castImpl:LA,ceilImpl:BA,concatImpl:$A,equalImpl:GA,expImpl:UA,expm1Impl:VA,floorImpl:zA,gatherNdImpl:kA,gatherV2Impl:WA,greaterImpl:XA,greaterEqualImpl:HA,lessImpl:YA,lessEqualImpl:KA,linSpaceImpl:jA,logImpl:ZA,maxImpl:QA,maximumImpl:JA,minimumImpl:qA,multiplyImpl:_A,negImpl:tR,notEqualImpl:eR,prodImpl:nR,raggedGatherImpl:sR,raggedRangeImpl:iR,raggedTensorToTensorImpl:rR,rangeImpl:aR,rsqrtImpl:oR,scatterImpl:uR,sigmoidImpl:lR,simpleAbsImpl:Qg,sliceImpl:hR,sparseFillEmptyRowsImpl:fR,sparseReshapeImpl:cR,sparseSegmentReductionImpl:Jg,sqrtImpl:dR,staticRegexReplaceImpl:pR,stridedSliceImpl:vR,stringNGramsImpl:mR,stringSplitImpl:gR,stringToHashBucketFastImpl:xR,subImpl:yR,tileImpl:TR,topKImpl:SR,transposeImpl:dd,uniqueImpl:CR}=MA;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qg(c,e){return["x","y","z","w","u","v"].slice(0,e).map(f=>`${c}.${f}`)}function En(c,e){return e===1?[c]:qg(c,e)}function ER(c,e){if(c===1)return"rc";let f="";for(let y=0;y<c;y++)f+=e[y],y<c-1&&(f+=",");return f}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wR{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=yn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const f=En("rc",this.rank),y=De(this.rank),S=this.getOutOfBoundsCondition(f),C=this.getSetup(f),o=this.getOutput(f);this.userCode=`
        void main() {
          ${y} rc = getOutputCoords();

          if(${S}) {
            setOutput(vec4(0));
          } else {
            ${C}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const f=[];for(let y=0;y<=1;y++)for(let S=0;S<=1;S++){let C=`${y===0?"r":"rp1"}, ${S===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)C=`${e[e.length-1-o]},`+C;f.push(C)}return f}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let f="";for(let y=this.rank-2;y<this.rank;y++)f+=`${e[y]} >= ${this.enableShapeUniforms?`outShape[${y}]`:this.outputShape[y]}`,y<this.rank-1&&(f+="||");return f}getSetup(e){if(this.rank===1)return"";const f=e.slice(-2),y=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],S=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${f[0]};
      int c = ${f[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${y};
      bool rEdge = rp1 >= ${S};
    `}getOutput(e){const f=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${f[0]}),
            cEdge ? 0. : getA(${f[1]}),
            rEdge ? 0. : getA(${f[2]}),
            rEdge || cEdge ? 0. : getA(${f[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _g{constructor(e,f){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);let y="";for(let S=0;S<4;S++){let C="thisRC = rc;";S%2===1&&(C+="thisRC.z += 1;"),S>1&&(C+="thisRC.y += 1;"),y+=`
        ${C}
        ${S>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${S}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${S>0?"}":""}
      `}this.userCode=`
      ${bR(f,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?fd():hd(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${y}

        setOutput(result);
      }
    `}}function bR(c,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?b5(["r","c","d"],"inputShape"):yr(["r","c","d"],c)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AR{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,f,y){const S=ep(f,y),C=np(e,S,y);C in this.freeTextures||(this.freeTextures[C]=[]),C in this.usedTextures||(this.usedTextures[C]=[]);const o=tp(e,S,this.gpgpu.gl,this.gpgpu.textureConfig,y);if(this.freeTextures[C].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const t=this.freeTextures[C].pop();return this.usedTextures[C].push(t),t}let x;return S===ln.PACKED_2X2_FLOAT32?x=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):S===ln.PACKED_2X2_FLOAT16?x=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):S===ln.UNPACKED_FLOAT32?x=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):S===ln.UNPACKED_FLOAT16?x=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):S===ln.PACKED_4X1_UNSIGNED_BYTE&&(x=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[C].push(x),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),x}releaseTexture(e,f,y,S){if(this.freeTextures==null)return;const C=ep(y,S),o=np(f,C,S);o in this.freeTextures||(this.freeTextures[o]=[]);const x=tp(f,C,this.gpgpu.gl,this.gpgpu.textureConfig,S),t=St().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");t!==-1&&this._numBytesAllocated>t?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=x):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=x),this.numUsedTextures--;const s=this.usedTextures[o],l=s&&s.indexOf(e);if(l==null||l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s[l]=s[s.length-1],s.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const f=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*f)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(f=>{this.gpgpu.deleteMatrixTexture(f.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(f=>{this.gpgpu.deleteMatrixTexture(f.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function RR(c,e){const f=c;if(e===f.R32F)return 4;if(e===f.R16F)return 2;if(e===f.RGBA32F)return 16;if(e===c.RGBA)return 16;if(e===f.RGBA16F)return 8;if(e===f.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function tp(c,e,f,y,S){const C=IR(e,y);let o;if(S){const[t,s]=na(c[0],c[1]);o=t*s}else{const[t,s]=qa(c[0],c[1]);o=t*s}const x=RR(f,C);return o*x}function IR(c,e){switch(c){case ln.PACKED_2X2_FLOAT32:return Ug(e);case ln.PACKED_2X2_FLOAT16:return Vg(e);case ln.UNPACKED_FLOAT32:return Bg(e);case ln.UNPACKED_FLOAT16:return $g(e);case ln.PACKED_4X1_UNSIGNED_BYTE:return Gg(e);default:throw new Error(`Unknown physical texture type ${c}`)}}function PR(c){return St().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?c?ln.PACKED_2X2_FLOAT32:ln.UNPACKED_FLOAT32:c?ln.PACKED_2X2_FLOAT16:ln.UNPACKED_FLOAT16}function ep(c,e){if(c===Yn.UPLOAD)return ln.PACKED_2X2_FLOAT32;if(c===Yn.RENDER||c==null)return PR(e);if(c===Yn.DOWNLOAD||c===Yn.PIXELS)return ln.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${c}`)}function np(c,e,f){return`${c[0]}_${c[1]}_${e}_${f}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ps{constructor(e,f){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${f}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const cs="if (isnan(x)) return x;",FR="return x;",sp="return abs(x);",MR="return (x >= 0.0) ? x : (exp(x) - 1.0);",NR=cs+`
  return (x < 0.0) ? 0.0 : x;
`,OR=cs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,mi="return x;",DR="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LR="return x;",BR=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,$R=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,GR=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,UR="return 1.0 / (1.0 + exp(-1.0 * x));";class yi{constructor(e,f){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${f}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VR{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);const f=e.length,y=En("rc",f),S=De(f),C=ER(f,y),o=y.slice(-2),x=f<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${S} rc = getOutputCoords();
        vec4 packedInput = getA(${C});

        setOutput(getChannel(packedInput, ${x}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zR=Um,kR=1e-7,WR=1e-4,co={};function XR(c){return c in co||(co[c]={}),co[c]}const HR=St().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),YR=600;function KR(){return St().global.screen==null?1024:St().global.screen.height*St().global.screen.width*window.devicePixelRatio*YR/1024/1024}class ol extends Ih{nextDataId(){return ol.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!St().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let f;if(e!=null){if(e instanceof El)f=e;else{const y=Cs(St().getNumber("WEBGL_VERSION"),e);f=new El(y)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const y=Cs(St().getNumber("WEBGL_VERSION"));f=new El(y),this.binaryCache=XR(St().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=f,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new AR(this.gpgpu),this.numMBBeforeWarning=KR(),this.texData=new Zp(this,zs())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,f,y,S,C,o){const x=this.makeTensorInfo(f,y),t=this.texData.get(x.dataId);t.isPacked=!1,t.texture={texture:e,texShape:[S,C]},t.texShape=[S,C];const s=ho(f),l=new Zd(s,!1,o),a=this.runWebGLProgram(l,[x],y,[[S,C]]);return a.shape=f,t.texture=null,this.disposeIntermediateTensorInfo(x),a.dataId}write(e,f,y){if((St().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||St().getBool("DEBUG"))&&this.checkNumericalProblems(e),y==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const S={id:this.nextDataId()};return this.texData.set(S,{shape:f,dtype:y,values:e,usage:Yn.UPLOAD,refCount:1}),S}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const f=this.texData.get(e);f.refCount++}decRef(e){if(this.texData.has(e)){const f=this.texData.get(e);f.refCount--}}move(e,f,y,S,C){if(St().getBool("DEBUG")&&this.checkNumericalProblems(f),S==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:y,dtype:S,values:f,usage:Yn.UPLOAD,refCount:C})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const f=this.texData.get(e),{values:y,dtype:S,complexTensorInfos:C,slice:o,shape:x,isPacked:t}=f;if(o!=null){let r;t?r=new yi(x,mi):r=new Ps(x,mi);const i=this.runWebGLProgram(r,[{dataId:e,shape:x,dtype:S}],S),n=this.readSync(i.dataId);return this.disposeIntermediateTensorInfo(i),n}if(y!=null)return this.convertAndCacheOnCPU(e);if(S==="string")return y;const s=this.activeTimers!=null;let l;s&&(l=Hn());let a;if(S==="complex64"){const r=this.readSync(C.real.dataId),i=this.readSync(C.imag.dataId);a=ih(r,i)}else a=this.getValuesFromTexture(e);return s&&(this.downloadWaitMs+=Hn()-l),this.convertAndCacheOnCPU(e,a)}async read(e){if(this.pendingRead.has(e)){const n=this.pendingRead.get(e);return new Promise(h=>n.push(h))}const f=this.texData.get(e),{values:y,shape:S,slice:C,dtype:o,complexTensorInfos:x,isPacked:t}=f;if(C!=null){let n;t?n=new yi(S,mi):n=new Ps(S,mi);const h=this.runWebGLProgram(n,[{dataId:e,shape:S,dtype:o}],o),d=this.read(h.dataId);return this.disposeIntermediateTensorInfo(h),d}if(y!=null)return this.convertAndCacheOnCPU(e);if(St().getBool("DEBUG")&&!St().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&St().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let s=null,l;if(o!=="complex64"&&St().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const n=this.texData.get(l.dataId);s=this.gpgpu.createBufferFromTexture(n.texture.texture,...oo(S))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let a;if(o==="complex64"){const n=await Promise.all([this.read(x.real.dataId),this.read(x.imag.dataId)]),h=n[0],d=n[1];a=ih(h,d)}else if(s==null)a=this.getValuesFromTexture(e);else{const n=bt(S);a=this.gpgpu.downloadFloat32MatrixFromBuffer(s,n)}if(l!=null&&this.disposeIntermediateTensorInfo(l),s!=null){const n=this.gpgpu.gl;Jt(n,()=>n.deleteBuffer(s))}const r=this.convertAndCacheOnCPU(e,a),i=this.pendingRead.get(e);return this.pendingRead.delete(e),i.forEach(n=>n(r)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&zs().removeDataId(e,this),this.pendingDeletes--),r}readToGPU(e,f={}){const y=this.texData.get(e),{values:S,shape:C,slice:o,dtype:x,isPacked:t,texture:s}=y;if(x==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let i;t?i=new yi(C,mi):i=new Ps(C,mi);const n=this.runWebGLProgram(i,[{dataId:e,shape:C,dtype:x}],x),h=this.readToGPU(n,f);return this.disposeIntermediateTensorInfo(n),h}if(s==null)throw S!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const l=this.decode(e,f.customTexShape),a=zs().makeTensorFromTensorInfo(l),r=this.texData.get(l.dataId);return Object.assign({tensorRef:a},r.texture)}bufferSync(e){const f=this.readSync(e.dataId);if(e.dtype==="string")try{const y=f.map(S=>Hr(S));return Ze(e.shape,e.dtype,y)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ze(e.shape,e.dtype,f)}checkNumericalProblems(e){if(e!=null)for(let f=0;f<e.length;f++){const y=e[f];if(!q6(y))throw St().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${y} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${y} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:f,dtype:y,isPacked:S}=this.texData.get(e),C=bt(f);if(St().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const r=this.decode(e),i=this.texData.get(r.dataId),n=this.gpgpu.downloadMatrixFromPackedTexture(i.texture.texture,...oo(f)).subarray(0,C);return this.disposeIntermediateTensorInfo(r),n}const o=St().getBool("WEBGL_PACK")&&S===!0,x=o?ho(f):f,t=o?new pb(x):new db(x),s=this.runWebGLProgram(t,[{shape:x,dtype:y,dataId:e}],"float32"),l=this.texData.get(s.dataId),a=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture.texture,l.texShape[0],l.texShape[1]).subarray(0,C);return this.disposeIntermediateTensorInfo(s),a}timerAvailable(){return St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const f=this.activeTimers,y=[];let S=!1;this.programTimersStack==null?(this.programTimersStack=y,S=!0):this.activeTimers.push(y),this.activeTimers=y,e();const C=ir(this.activeTimers.map(t=>t.query)).filter(t=>t!=null),o=ir(this.activeTimers.map(t=>t.name)).filter(t=>t!=null);this.activeTimers=f,S&&(this.programTimersStack=null);const x={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(C);x.kernelMs=M2(t),x.getExtraProfileInfo=()=>t.map((s,l)=>({name:o[l],ms:s})).map(s=>`${s.name}: ${s.ms}`).join(", ")}else x.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,x})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Hn(),endMs:null}}endTimer(e){return St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Hn(),e)}async getQueryTime(e){if(St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const f=e;return f.endMs-f.startMs}disposeData(e,f=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(f?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!f&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:y}=this.texData.get(e);return y!=null&&(this.disposeData(y.real.dataId,f),this.disposeData(y.imag.dataId,f)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:f,dtype:y,texShape:S,usage:C,isPacked:o,slice:x}=this.texData.get(e),t=x&&x.origDataId||e,s=this.dataRefCount.get(t);s>1?this.dataRefCount.set(t,s-1):(this.dataRefCount.delete(t),f!=null&&(this.numBytesInGPU-=this.computeBytes(S,y),this.textureManager.releaseTexture(f,S,C,o)));const l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,f=HR){return St().getBool("WEBGL_CPU_FORWARD")&&e.every(y=>this.texData.get(y.dataId).texture==null&&bt(y.shape)<f)}getGPGPUContext(){return this.gpgpu}where(e){xs("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const f=e.dataSync();return zR(e.shape,f)}packedUnaryOp(e,f,y){const S=new yi(e.shape,f),C=this.compileAndRun(S,[e],y);return zs().makeTensorFromTensorInfo(C)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const S=Qg(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,S)}if(St().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,sp,e.dtype);const f=new Ps(e.shape,sp),y=this.compileAndRun(f,[e]);return zs().makeTensorFromTensorInfo(y)}makeTensorInfo(e,f,y){let S;if(f==="string"&&y!=null&&y.length>0&&Xo(y[0])){const C=y.map(o=>er(o));S=this.write(C,e,f)}else S=this.write(y,e,f);return this.texData.get(S).usage=null,{dataId:S,shape:e,dtype:f}}makeOutput(e,f,y){return zs().makeTensorFromTensorInfo(this.makeTensorInfo(e,f,y),this)}unpackTensor(e){const f=new VR(e.shape);return this.runWebGLProgram(f,[e],e.dtype)}packTensor(e){const f=new wR(e.shape),y=!0;return this.runWebGLProgram(f,[e],e.dtype,null,y)}packedReshape(e,f){const y=[Zr(e.shape),...Qr(e.shape)],S={dtype:e.dtype,shape:y,dataId:e.dataId},C=[Zr(f),...Qr(f)],o=new _g(C,y),x=!0,t=[y],s=this.runWebGLProgram(o,[S],e.dtype,t,x);return{dataId:s.dataId,shape:f,dtype:s.dtype}}decode(e,f){const y=this.texData.get(e),{isPacked:S,shape:C,dtype:o}=y;if(f!=null){const r=bt(C),i=f[0]*f[1]*4;it(r<=i,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const x=ho(C);let t;S?t=new cb(x):t=new fb(x);const s=!0,l=[f??oo(x)],a=this.runWebGLProgram(t,[{shape:x,dtype:o,dataId:e}],o,l,s,f);return{dtype:o,shape:C,dataId:a.dataId}}runWebGLProgram(e,f,y,S,C=!1,o){const x=this.makeTensorInfo(e.outputShape,y),t=this.texData.get(x.dataId);if(e.packedOutput&&(t.isPacked=!0),e.outPackingScheme===Ga.DENSE){const u=o??oo(e.outputShape);t.texShape=u.map(p=>p*2)}if(e.outTexUsage!=null&&(t.usage=e.outTexUsage),bt(x.shape)===0)return t.values=wi(x.dtype,0),x;const s=[],l=f.map(u=>{if(u.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let p=this.texData.get(u.dataId);if(p.texture==null){if(!e.packedInputs&&bt(u.shape)<=St().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:u.shape,texData:null,isUniform:!0,uniformValues:p.values};e.packedInputs&&(p.isPacked=!0,p.shape=u.shape)}if(this.uploadToGPU(u.dataId),!!p.isPacked!=!!e.packedInputs)u=p.isPacked?this.unpackTensor(u):this.packTensor(u),s.push(u),p=this.texData.get(u.dataId);else if(p.isPacked&&!Do(p.shape,u.shape)){const v=u,m=u.shape;u.shape=p.shape,u=this.packedReshape(u,m),s.push(u),p=this.texData.get(u.dataId),v.shape=m}return{shape:u.shape,texData:p,isUniform:!1}});this.uploadToGPU(x.dataId);const a={shape:x.shape,texData:t,isUniform:!1},r=hb(e,l,a),i=this.getAndSaveBinary(r,()=>ub(this.gpgpu,e,l,a)),n=this.activeTimers!=null;let h;n&&(h=this.startTimer()),St().get("ENGINE_COMPILE_ONLY")||lb(this.gpgpu,i,l,a,S),s.forEach(u=>this.disposeIntermediateTensorInfo(u)),n&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));const d=St().getNumber("WEBGL_FLUSH_THRESHOLD");if(d>0){const u=Hn();u-this.lastGlFlushTime>d&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=u)}if(!St().getBool("WEBGL_LAZILY_UNPACK")&&t.isPacked&&C===!1){const u=this.unpackTensor(x);return this.disposeIntermediateTensorInfo(x),u}return x}compileAndRun(e,f,y,S,C=!1){return y=y||f[0].dtype,this.runWebGLProgram(e,f,y,S,C)}getAndSaveBinary(e,f){return e in this.binaryCache||(this.binaryCache[e]=f()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(St().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(f=>{this.gpgpu.deleteProgram(this.binaryCache[f].webGLProgram),delete this.binaryCache[f]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=de(()=>{if(!St().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=St().getBool("DEBUG");St().set("DEBUG",!1);const f=this.abs(Ce(1e-8)).dataSync()[0];if(St().set("DEBUG",e),f>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?kR:WR}uploadToGPU(e){const f=this.texData.get(e),{shape:y,dtype:S,values:C,texture:o,usage:x,isPacked:t}=f;if(o!=null)return;const s=this.activeTimers!=null;let l;s&&(l=Hn());let a=f.texShape;if(a==null&&(a=m5(y,t),f.texShape=a),C!=null){const r=ho(y);let i,n=a[1],h=a[0];const d=C instanceof Uint8Array||C instanceof Uint8ClampedArray;(t||!d)&&([n,h]=na(a[0],a[1])),t?i=new mb(r,d):i=new Zd(r,d);const u=d?[h,n]:a,p=this.makeTensorInfo(u,S),v=this.texData.get(p.dataId);d?v.usage=Yn.PIXELS:v.usage=Yn.UPLOAD,v.texShape=u,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),n,h,C);const m=[[h,n]],g=!0,T=this.runWebGLProgram(i,[p],S,m,g),w=this.texData.get(T.dataId);f.texShape=w.texShape,f.isPacked=w.isPacked,f.usage=w.usage,St().get("ENGINE_COMPILE_ONLY")?this.disposeData(T.dataId):(f.texture=w.texture,f.values=null,this.texData.delete(T.dataId)),this.disposeIntermediateTensorInfo(p),s&&(this.uploadWaitMs+=Hn()-l)}else{const r=this.acquireTexture(a,x,S,t);f.texture=r}}convertAndCacheOnCPU(e,f){const y=this.texData.get(e),{dtype:S}=y;return f!=null&&(y.values=jR(f,S)),y.values}acquireTexture(e,f,y,S){if(this.numBytesInGPU+=this.computeBytes(e,y),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const C=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${C} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,f,S)}computeBytes(e,f){return e[0]*e[1]*Wr(f)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,f]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(f));return Promise.all(e)}else{for(const[,f]of Object.entries(this.binaryCache)){const y=new Promise(S=>{try{this.checkCompletion_(f),S(!0)}catch(C){throw C}});e.push(y)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await N6(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(Fg(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:f,customUniformLocations:y,infLoc:S,nanLoc:C,outShapeLocation:o,outShapeStridesLocation:x,outTexShapeLocation:t}=Lg(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=f,e.customUniformLocations=y,e.infLoc=S,e.nanLoc=C,e.outShapeLocation=o,e.outShapeStridesLocation=x,e.outTexShapeLocation=t}}createTensorFromGPUData(e,f,y){e.channels=e.channels||"RGBA";const{texture:S,height:C,width:o,channels:x}=e,t=zs().backend;if(!t.gpgpu.gl.isTexture(S))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const s=t.writeTexture(S,f,y,C,o,x);return zs().makeTensorFromDataId(s,f,y,t)}}ol.nextDataId=0;function jR(c,e){if(e==="float32"||e==="complex64")return c;if(e==="int32"||e==="bool"){const f=e==="int32"?new Int32Array(c.length):new Uint8Array(c.length);for(let y=0;y<f.length;++y)f[y]=Math.round(c[y]);return f}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */kv()&&sm("webgl",()=>new ol,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pd=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class fr{constructor(e,f,y){this.variableNames=["A","B"],this.outputShape=Te(f,y),this.enableShapeUniforms=yn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sr=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class oa{constructor(e,f,y,S=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Te(f,y);const C=this.outputShape.length;this.enableShapeUniforms=yn(C);let o="";if(S)if(C===0||bt(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${De(C)} coords = getOutputCoords();
        `,C===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const t=En("coords",C);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${t[C-2]} + 1) >= outShape[${C} - 2];
            bool nextColOutOfBounds =
              (${t[C-1]} + 1) >= outShape[${C} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${t[C-2]} + 1) >= ${this.outputShape[C-2]};
            bool nextColOutOfBounds =
              (${t[C-1]} + 1) >= ${this.outputShape[C-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vn(c){const{inputs:e,backend:f}=c,{x:y}=e;return f.incRef(y.dataId),{dataId:y.dataId,shape:y.shape,dtype:y.dtype}}const ZR={kernelName:du,backendName:"webgl",kernelFunc:Vn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Di(c){const{inputs:e,backend:f}=c,{real:y,imag:S}=e,C=f.makeTensorInfo(y.shape,"complex64"),o=f.texData.get(C.dataId),x=Vn({inputs:{x:y},backend:f}),t=Vn({inputs:{x:S},backend:f});return o.complexTensorInfos={real:x,imag:t},C}const QR={kernelName:sv,backendName:"webgl",kernelFunc:Di};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0="return (a < 0.) ? b * a : a;",e0=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function JR(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{alpha:C}=y,o=f.makeTensorInfo([],"float32",_r(C,"float32")),x=St().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new oa(e0,S.shape,o.shape):new fr(t0,S.shape,o.shape),t=f.runWebGLProgram(x,[S,o],"float32");return f.disposeIntermediateTensorInfo(o),t}const qR={kernelName:pu,backendName:"webgl",kernelFunc:JR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n0="return (a < 0.) ? b * a : a;",s0=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function _R(c){const{inputs:e,backend:f}=c,{x:y,alpha:S}=e,C=St().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new oa(s0,y.shape,S.shape):new fr(n0,y.shape,S.shape);return f.runWebGLProgram(C,[y,S],"float32")}const tI={kernelName:Iu,backendName:"webgl",kernelFunc:_R};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ua="if (isnan(x)) return x;";function be({opSnippet:c,packedOpSnippet:e,cpuKernelImpl:f,dtype:y}){return({inputs:S,backend:C})=>{const{x:o}=S,x=C,t=y||o.dtype;if(x.shouldExecuteOnCPU([o])&&f!=null){const a=x.texData.get(o.dataId),r=f(a.values,t);return x.makeTensorInfo(o.shape,t,r)}const s=St().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let l;return s?l=new yi(o.shape,e):l=new Ps(o.shape,c),x.runWebGLProgram(l,[o],t)}}function pn({opSnippet:c,packedOpSnippet:e,checkOutOfBounds:f=!1,supportsComplex:y=!1,cpuKernelImpl:S,dtype:C}){return({inputs:o,backend:x})=>{const{a:t,b:s}=o,l=x;if(y&&t.dtype==="complex64"){const n=l.texData.get(t.dataId),h=l.texData.get(s.dataId),[d,u]=[[n.complexTensorInfos.real,h.complexTensorInfos.real],[n.complexTensorInfos.imag,h.complexTensorInfos.imag]].map(v=>{const[m,g]=v,T={dataId:m.dataId,dtype:m.dtype,shape:t.shape},w={dataId:g.dataId,dtype:g.dtype,shape:s.shape},b=new fr(c,t.shape,s.shape);return l.runWebGLProgram(b,[T,w],Ns(m.dtype,g.dtype))}),p=Di({inputs:{real:d,imag:u},backend:l});return l.disposeIntermediateTensorInfo(d),l.disposeIntermediateTensorInfo(u),p}const a=C||Ns(t.dtype,s.dtype);if((t.dtype==="string"||s.dtype==="string"||l.shouldExecuteOnCPU([t,s]))&&S!=null){const n=l.texData.get(t.dataId).values,h=l.texData.get(s.dataId).values,d=t.dtype==="string"?jr(n):n,u=t.dtype==="string"?jr(h):h,[p,v]=S(t.shape,s.shape,d,u,a),m=l.makeTensorInfo(v,a),g=l.texData.get(m.dataId);return g.values=p,m}const r=St().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let i;return r?i=new oa(e,t.shape,s.shape,f):i=new fr(c,t.shape,s.shape),l.runWebGLProgram(i,[t,s],a)}}function Ua(c,e=!1){if(c==="linear")return e?LR:FR;if(c==="relu")return e?$R:NR;if(c==="elu")return e?BR:MR;if(c==="relu6")return e?GR:OR;if(c==="prelu")return e?s0:n0;if(c==="leakyrelu")return e?e0:t0;if(c==="sigmoid")return e?UR:DR;throw new Error(`Activation ${c} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i0{constructor(e,f,y,S=!1,C=!1,o=!1,x=null,t=!1,s=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=y,this.enableShapeUniforms=yn(this.outputShape.length);const l=S?e[1]:e[2],a=Math.ceil(l/2),r=S?"i * 2, rc.y":"rc.y, i * 2",i=C?"rc.z, i * 2":"i * 2, rc.z",n=S?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=C?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let d="",u="";x&&(t?d=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${x}
        }`:s?d=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${x}
        }`:d=`vec4 activation(vec4 x) {
          ${x}
        }`,u="result = activation(result);");const p=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),t&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha");let v="rc.x",m="rc.x";e[0]<f[0]?v=`imod(rc.x, ${e[0]})`:f[0]<e[0]&&(m=`imod(rc.x, ${f[0]})`),this.userCode=`
      ${d}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${a}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${m};
        for (int i = 0; i < ${a}; i++) {
          vec4 a = getMatrixA(batchA, ${r});
          vec4 b = getMatrixB(batchB, ${i});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${n[0]} * ${h[0]});
          result += (${n[1]} * ${h[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${p}

        ${u}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ip={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class rp{constructor(e,f,y){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Te(f,y),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ap="return a * b;";function vd(c){const{inputs:e,backend:f}=c,{a:y,b:S}=e,C=Ns(y.dtype,S.dtype);if(y.dtype==="complex64"){const x=f.texData.get(y.dataId),t=f.texData.get(S.dataId),s=new rp(ip.REAL,y.shape,S.shape),l=new rp(ip.IMAG,y.shape,S.shape),a=[{dataId:x.complexTensorInfos.real.dataId,dtype:x.complexTensorInfos.real.dtype,shape:y.shape},{dataId:x.complexTensorInfos.imag.dataId,dtype:x.complexTensorInfos.imag.dtype,shape:y.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:S.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:S.shape}],r=f.runWebGLProgram(s,a,"float32"),i=f.runWebGLProgram(l,a,"float32"),n=Di({inputs:{real:r,imag:i},backend:f});return f.disposeIntermediateTensorInfo(r),f.disposeIntermediateTensorInfo(i),n}if(f.shouldExecuteOnCPU([y,S])){const x=f.texData.get(y.dataId),t=f.texData.get(S.dataId),[s,l]=_A(y.shape,S.shape,x.values,t.values,C),a=f.makeTensorInfo(l,C),r=f.texData.get(a.dataId);return r.values=s,a}let o;return St().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new oa(ap,y.shape,S.shape):o=new fr(ap,y.shape,S.shape),f.runWebGLProgram(o,[y,S],C)}const eI={kernelName:Ff,backendName:"webgl",kernelFunc:vd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nI(c,e,f){const y=[Zr(c.shape),...Qr(c.shape)],S={dtype:c.dtype,shape:y,dataId:c.dataId},C=[Zr(e),...Qr(e)],o=new _g(C,y),x=!0,t=[y],s=f.runWebGLProgram(o,[S],c.dtype,t,x);return{dataId:s.dataId,shape:e,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{shape:C}=y,o=f,x=bt(S.shape),t=Qp(C,x),s=bt(t);it(x===s,()=>`The new shape (${t}) has ${s} elements and the old shape (${S.shape}) has ${x} elements. The new shape and old shape must have the same number of elements.`);const l=o.texData.get(S.dataId);return l.isPacked&&!Do(S.shape,t)&&!(l.texture!==null&&Do(l.shape,t))?nI(S,t,o):(o.incRef(S.dataId),{dataId:S.dataId,shape:t,dtype:S.dtype})}const sI={kernelName:Uf,backendName:"webgl",kernelFunc:Yt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class op{constructor(e,f){this.variableNames=["x"];const{windowSize:y,batchSize:S,inSize:C,outSize:o}=e;this.outputShape=[S,o];const x=Math.floor(y/4)*4,t=y%4;let s="sumValue += dot(values, ones);";if(f!=null){const a=1/f;s=`sumValue += dot(values * ${kr(a)?a.toPrecision(2):a}, ones);`}let l="";C%y>0&&(l=`
        if (inIdx < 0 || inIdx >= ${C}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${l}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${y};

        float sumValue = 0.0;

        for (int i = 0; i < ${x}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${s}
        }

        int inIdx = inOffset + ${x};
        if (${t===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${s}
        } else if (${t===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${s}
        } else if (${t===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${s}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iI{constructor(e,f){this.variableNames=["x"];const{windowSize:y,batchSize:S,inSize:C,outSize:o}=e;this.outputShape=[S,o];let x="0.0",t="";f==="prod"?x="1.0":f==="min"?(x="1.0 / 1e-20",t="min"):f==="max"&&(x="-1.0 / 1e-20",t="max");let s=`${f}(${f}(${f}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;f==="sum"?s="sumValue":f==="prod"?s="prodValue":f==="all"?s="allValue":f==="any"&&(s="anyValue");const l=Math.floor(y/4)*4,a=y%4;let r=`
      if (${f==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${f==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${t}(values, minMaxValue);
        if (${f==="min"} || ${f==="max"}) {
          minMaxValue = ${t}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,i="vec4";f==="all"?(x="1.0",r=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,i="bvec4"):f==="any"&&(x="0.0",r=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,i="bvec4");let n="";C%y>0&&(n=`
        if (inIdx < 0 || inIdx >= ${C}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${n}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${y};

        vec4 minMaxValue = vec4(${x});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          ${i} values = ${i}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${r}
        }

        int inIdx = inOffset + ${l};
        if (${a===1}) {
          ${i} values = ${i}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${r}
        } else if (${a===2}) {
          ${i} values = ${i}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${r}
        } else if (${a===3}) {
          ${i} values = ${i}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${r}
        }
        setOutput(${s});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rI(c){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const f=e.length?e[e.length-1].outSize:c[1],y=rl(f);e.push({inSize:f,windowSize:y,outSize:Math.ceil(f/y)})}return e}function Cr(c,e,f,y){const S=rI(c.shape);let C=c;for(let o=0;o<S.length;o++){const{inSize:x,windowSize:t,outSize:s}=S[o];let l,a;f==="mean"?l=o===0?new op({windowSize:t,inSize:x,batchSize:c.shape[0],outSize:s},x):new op({windowSize:t,inSize:x,batchSize:c.shape[0],outSize:s}):l=new iI({windowSize:t,inSize:x,batchSize:c.shape[0],outSize:s},f),a=C,C=y.runWebGLProgram(l,[C],e),a.dataId!==c.dataId&&y.disposeIntermediateTensorInfo(a)}return C}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aI{constructor(e,f){this.variableNames=["A"];const y=new Array(e.length);for(let o=0;o<y.length;o++)y[o]=e[f[o]];this.outputShape=y,this.rank=y.length;const S=De(this.rank),C=oI(f);this.userCode=`
    void main() {
      ${S} resRC = getOutputCoords();
      setOutput(getA(${C}));
    }
    `}}function oI(c){const e=c.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const f=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],y=new Array(e);for(let S=0;S<c.length;S++)y[c[S]]=f[S];return y.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uI{constructor(e,f){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const y=new Array(e.length);for(let l=0;l<y.length;l++)y[l]=e[f[l]];if(this.outputShape=y,this.rank=y.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const S=De(this.rank),C=qg("rc",this.rank),o=new Array(this.rank);for(let l=0;l<f.length;l++)o[f[l]]=C[l];const x=`vec2(${o.slice(-2).join()})`,t=`++${C[this.rank-1]} < ${y[this.rank-1]}`,s=`getChannel(getA(${o.join()}), ${x})`;this.userCode=`
    void main() {
      ${S} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${s};
      if(${t}) {
        result[1] = ${s};
      }
      --${C[this.rank-1]};
      if(++${C[this.rank-2]} < ${y[this.rank-2]}) {
        result[2] = ${s};
        if(${t}) {
          result[3] = ${s};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ul(c,e,f){const y=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uI(c.shape,e):new aI(c.shape,e);return f.runWebGLProgram(y,[c],c.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lI(c,e,f,y){const S=e,C=c.shape.length,o=Qe(S,c.shape);let x=o;const t=Dn(x,C),s=t!=null;let l=c;s&&(l=ul(c,t,y),x=dn(x.length,C)),rn("sum",x,C);const[a,r]=xn(l.shape,x);let i=a;f&&(i=sn(a,o));const n=bt(r),d=bt(c.shape)/n,u=Yt({inputs:{x:l},attrs:{shape:[d,n]},backend:y}),p=mc(c.dtype),v=Cr(u,p,"sum",y),m=Yt({inputs:{x:v},attrs:{shape:i},backend:y});return y.disposeIntermediateTensorInfo(u),y.disposeIntermediateTensorInfo(v),s&&y.disposeIntermediateTensorInfo(l),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ll(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C,keepDims:o}=y;return lI(S,C,o,f)}const hI={kernelName:Bu,backendName:"webgl",kernelFunc:ll};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wn(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{perm:C}=y,o=f,x=S.shape.length,t=new Array(x);for(let l=0;l<t.length;l++)t[l]=S.shape[C[l]];let s;if(o.shouldExecuteOnCPU([S])){const a=o.texData.get(S.dataId).values,r=dd(a,S.shape,S.dtype,C,t);s=o.makeTensorInfo(t,S.dtype);const i=o.texData.get(s.dataId);i.values=r}else s=ul(S,C,o);return s}const fI={kernelName:Gr,backendName:"webgl",kernelFunc:wn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r0=1e3;function Bo({a:c,b:e,transposeA:f,transposeB:y,backend:S,bias:C=null,preluActivationWeights:o=null,leakyreluAlpha:x=0,activation:t=null}){const s=c.shape.length,l=e.shape.length,a=f?c.shape[s-2]:c.shape[s-1],r=y?e.shape[l-1]:e.shape[l-2],i=f?c.shape[s-1]:c.shape[s-2],n=y?e.shape[l-2]:e.shape[l-1],h=c.shape.slice(0,-2),d=e.shape.slice(0,-2),u=bt(h),p=bt(d),m=Te(c.shape.slice(0,-2),e.shape.slice(0,-2)).concat([i,n]);it(a===r,()=>`Error in matMul: inner shapes (${a}) and (${r}) of Tensors with shapes ${c.shape} and ${e.shape} and transposeA=${f} and transposeB=${y} must match.`);const g=f?[u,a,i]:[u,i,a],T=y?[p,n,r]:[p,r,n],w=Yt({inputs:{x:c},backend:S,attrs:{shape:g}}),b=Yt({inputs:{x:e},backend:S,attrs:{shape:T}}),E=[w,b],A=Math.max(u,p),R=f?w.shape[1]:w.shape[2],I=C!=null,P=o!=null,M=t==="leakyrelu",F=t!=null?Ua(t,!0):null,O=I||P||M||F!=null;let D;if((i===1||n===1)&&R>r0&&O===!1){let z=w,X=b;f&&(z=wn({inputs:{x:w},backend:S,attrs:{perm:[0,2,1]}}),E.push(z)),y&&(X=wn({inputs:{x:b},backend:S,attrs:{perm:[0,2,1]}}),E.push(X));const H=n!==1,J=n===1;let G=z;H&&(G=Yt({inputs:{x:z},backend:S,attrs:{shape:[A,R,1]}}),E.push(G));const k=n===1?2:1;let N=X;J&&(N=Yt({inputs:{x:X},backend:S,attrs:{shape:[A,1,R]}}),E.push(N));const B=vd({inputs:{a:G,b:N},backend:S});D=ll({inputs:{x:B},backend:S,attrs:{axis:k,keepDims:!0}}),E.push(B)}else{const z=Ns(c.dtype,e.dtype),X=new i0(g,T,[A,i,n],f,y,I,F,P,M),H=[w,b];if(C!=null&&H.push(C),P&&H.push(o),M){const J=S.makeTensorInfo([],"float32",_r(x,"float32"));H.push(J),E.push(J)}D=S.runWebGLProgram(X,H,z)}const L=Yt({inputs:{x:D},backend:S,attrs:{shape:m}});E.push(D);for(const z of E)S.disposeIntermediateTensorInfo(z);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cI(c){const{inputs:e,backend:f,attrs:y}=c,{a:S,b:C,bias:o,preluActivationWeights:x}=e,{transposeA:t,transposeB:s,activation:l,leakyreluAlpha:a}=y;return Bo({a:S,b:C,transposeA:t,transposeB:s,backend:f,bias:o,preluActivationWeights:x,leakyreluAlpha:a,activation:l})}const dI={kernelName:Aa,backendName:"webgl",kernelFunc:cI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const up="return abs(x);";function pI(c){const{inputs:e,backend:f}=c,{x:y}=e;if(f.shouldExecuteOnCPU([y])&&y.dtype!=="complex64"){const C=f.texData.get(y.dataId),o=Qg(C.values);return f.makeTensorInfo(y.shape,y.dtype,o)}let S;return St().getBool("WEBGL_PACK_UNARY_OPERATIONS")?S=new yi(y.shape,up):S=new Ps(y.shape,up),f.runWebGLProgram(S,[y],y.dtype)}const vI={kernelName:Nh,backendName:"webgl",kernelFunc:pI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mI=cs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,gI=be({opSnippet:mI}),xI={kernelName:Oh,backendName:"webgl",kernelFunc:gI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yI=cs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,TI=be({opSnippet:yI}),SI={kernelName:Dh,backendName:"webgl",kernelFunc:TI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lp="return a + b;",CI=pn({opSnippet:lp,packedOpSnippet:lp,supportsComplex:!0,cpuKernelImpl:NA}),EI={kernelName:Ho,backendName:"webgl",kernelFunc:CI};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wI{constructor(e,f){this.outputShape=[],this.outputShape=e,this.variableNames=f.map((C,o)=>`T${o}`);const y=[];this.variableNames.forEach(C=>{y.push(`float v${C} = get${C}AtOutCoords();`)});const S=this.variableNames.map(C=>`v${C}`).join(" + ");this.userCode=`
      void main() {
        ${y.join(`
        `)}

        float result = ${S};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bI{constructor(e,f){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=f.map((C,o)=>`T${o}`);const y=[];this.variableNames.forEach(C=>{y.push(`vec4 v${C} = get${C}AtOutCoords();`)});const S=this.variableNames.map(C=>`v${C}`).join(" + ");this.userCode=`
      void main() {
        ${y.join(`
        `)}

        vec4 result = ${S};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xo(c){const{inputs:e,backend:f}=c,y=e;if(y.length===1)return Vn({inputs:{x:y[0]},backend:f});if(y.length>St().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(y.length/2),s=xo({inputs:y.slice(0,t),backend:f}),l=xo({inputs:y.slice(t),backend:f});return xo({inputs:[s,l],backend:f})}const S=y.map(t=>t.dtype).reduce((t,s)=>Ns(t,s)),C=y.map(t=>t.shape),x=St().getBool("WEBGL_PACK")?new bI(y[0].shape,C):new wI(y[0].shape,C);return f.runWebGLProgram(x,y,S)}const AI={kernelName:Yo,backendName:"webgl",kernelFunc:xo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RI(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C,keepDims:o}=y,x=S.shape.length,t=Qe(C,S.shape);let s=t;const l=Dn(s,x);let a=S;l!=null&&(a=wn({inputs:{x:S},backend:f,attrs:{perm:l}}),s=dn(s.length,x)),rn("all",s,x);const[r,i]=xn(a.shape,s),n=bt(i),h=Yt({inputs:{x:a},backend:f,attrs:{shape:[-1,n]}}),d=Cr(h,h.dtype,"all",f);let u;if(o){const p=sn(r,t);u=Yt({inputs:{x:d},backend:f,attrs:{shape:p}})}else u=Yt({inputs:{x:d},backend:f,attrs:{shape:r}});return f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(d),l!=null&&f.disposeIntermediateTensorInfo(a),u}const II={kernelName:Ko,backendName:"webgl",kernelFunc:RI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PI(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C,keepDims:o}=y,x=S.shape.length,t=Qe(C,S.shape);let s=t;const l=Dn(s,x);let a=S;l!=null&&(a=wn({inputs:{x:S},backend:f,attrs:{perm:l}}),s=dn(s.length,x)),rn("any",s,x);const[r,i]=xn(a.shape,s),n=bt(i),h=Yt({inputs:{x:a},backend:f,attrs:{shape:[-1,n]}}),d=Cr(h,h.dtype,"any",f);let u;if(o){const p=sn(r,t);u=Yt({inputs:{x:d},backend:f,attrs:{shape:p}})}else u=Yt({inputs:{x:d},backend:f,attrs:{shape:r}});return f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(d),l!=null&&f.disposeIntermediateTensorInfo(a),u}const FI={kernelName:jo,backendName:"webgl",kernelFunc:PI};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MI{constructor(e,f,y){this.variableNames=["A"];const{windowSize:S,batchSize:C,outSize:o}=e;y||this.variableNames.push("bestIndicesA"),this.outputShape=[C,o];const x=f==="max"?">":"<",t=y?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${S};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${S}; i++) {
          int inIdx = ${t};
          float candidate = getA(batch, inIdx);
          if (candidate ${x} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NI{constructor(e,f,y,S){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,it(e.length>2,()=>`Packed arg${y.charAt(0).toUpperCase()+y.slice(1)} supports only inputs with rank above 2.`);const C=e[e.length-1],o=Math.ceil(C/f);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),S||this.variableNames.push("bestIndicesA");const x=this.outputShape,t=x.length,s=De(t),l=En("coords",t);let a,r;if(o===1){r=t+1;const b=De(r);a=`
        ${b} sourceLocR = ${b}(${l.join()}, 0);
        ++${l[t-1]};
        ${b} sourceLocG = ${b}(${l.join()}, 0);
        ++${l[t-2]};
        ${b} sourceLocA = ${b}(${l.join()}, 0);
        --${l[t-1]};
        ${b} sourceLocB = ${b}(${l.join()}, 0);
        --${l[t-2]};`}else r=t,a=`
        ${s} sourceLocR = coords;
        ++${l[t-1]};
        ${s} sourceLocG = coords;
        ++${l[t-2]};
        ${s} sourceLocA = coords;
        --${l[t-1]};
        ${s} sourceLocB = coords;
        --${l[t-2]};`;const i=["x","y","z","w","u","v"].slice(0,r),n="."+i[r-1],h=i.map(b=>"int "+b),d=En("sourceLocR",r-1).concat("inIdx.r"),u=En("sourceLocG",r-1).concat("inIdx.g"),p=En("sourceLocB",r-1).concat("inIdx.b"),v=En("sourceLocA",r-1).concat("inIdx.a"),m=y==="max"?"greaterThan":"lessThan",g=S?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${d.join()}),
                             getBestIndicesAChannel(${u.join()}),
                             getBestIndicesAChannel(${p.join()}),
                             getBestIndicesAChannel(${v.join()})));`,T=`vec4(
            getAChannel(${d.join()}),
            hasNextCol ? getAChannel(${u.join()}) : 0.,
            hasNextRow ? getAChannel(${p.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,w=S?"":`
      float getBestIndicesAChannel(${h.join()}) {
        return getChannel(getBestIndicesA(${i.join()}),
                                          vec2(${i.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${h.join()}) {
        return getChannel(getA(${i.join()}),
                               vec2(${i.slice(-2).join()}));
      }
      ${w}
      void main() {
        ${s} coords = getOutputCoords();
        bool hasNextCol = ${l[t-1]} < ${x[t-1]-1};
        bool hasNextRow = ${l[t-2]} < ${x[t-2]-1};
        ${a}
        ivec4 srcIdx = ivec4(sourceLocR${n}, sourceLocG${n},
          sourceLocB${n}, sourceLocA${n}) * ${f};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${T};

        for (int i = 0; i < ${f}; i++) {
          inIdx = srcIdx;
          ${g}
          vec4 candidate = ${T};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${m}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a0(c,e,f,y=null){let S=e.shape[0],C=e.shape[1];y!=null&&(S=y.shape[0],C=y.shape[1]);const o=rl(C),x={windowSize:o,inSize:C,batchSize:S,outSize:Math.ceil(C/o)},t=new MI(x,f,y==null),s=[e];y!=null&&s.push(y);const l=c.runWebGLProgram(t,s,"int32");if(l.shape[1]===1)return l;const a=a0(c,e,f,l);return c.disposeIntermediateTensorInfo(l),a}function o0(c,e,f,y=null){const S=y!=null?y.shape:e.shape,C=S[S.length-1],o=rl(C),x=new NI(S,o,f,y==null),t=y==null?[e]:[e,y],s=c.runWebGLProgram(x,t,"int32");if(s.shape.length===e.shape.length){const l=o0(c,e,f,s);return c.disposeIntermediateTensorInfo(s),l}return s}function u0(c,e,f,y){const S=[f];if(rn("arg"+y.charAt(0).toUpperCase()+y.slice(1),S,e.shape.length),!St().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const C=[],o=c.texData.get(e.dataId),x=o!==null&&o.isPacked;let t=e;x&&(t=c.unpackTensor(e),C.push(t));const[s,l]=xn(t.shape,S),a=bt(l),r=Yt({inputs:{x:t},backend:c,attrs:{shape:[-1,a]}});C.push(r);const i=a0(c,r,y);C.push(i);const n=Yt({inputs:{x:i},backend:c,attrs:{shape:s}});return C.forEach(h=>c.disposeIntermediateTensorInfo(h)),n}return o0(c,e,y)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OI(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C}=y;let o=Qe(C,S.shape);const x=Dn(o,S.shape.length);let t=S;const s=[];x!=null&&(t=wn({inputs:{x:S},backend:f,attrs:{perm:x}}),s.push(t),o=dn(o.length,t.shape.length)),rn("argMax",[o[0]],t.shape.length);const l=u0(f,t,o[0],"max");return s.forEach(a=>f.disposeIntermediateTensorInfo(a)),l}const DI={kernelName:Lh,backendName:"webgl",kernelFunc:OI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LI(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C}=y;let o=Qe(C,S.shape);const x=Dn(o,S.shape.length);let t=S;const s=[];x!=null&&(t=wn({inputs:{x:S},backend:f,attrs:{perm:x}}),s.push(t),o=dn(o.length,t.shape.length)),rn("argMin",[o[0]],t.shape.length);const l=u0(f,t,o[0],"min");return s.forEach(a=>f.disposeIntermediateTensorInfo(a)),l}const BI={kernelName:Bh,backendName:"webgl",kernelFunc:LI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $I=cs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,GI=be({opSnippet:$I}),UI={kernelName:$h,backendName:"webgl",kernelFunc:GI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VI=cs+"return log(x + sqrt(x * x + 1.0));",zI=be({opSnippet:VI}),kI={kernelName:Gh,backendName:"webgl",kernelFunc:zI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WI=cs+`
  return atan(x);
`,XI=be({opSnippet:WI}),HI={kernelName:Uh,backendName:"webgl",kernelFunc:XI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YI=pd+`
  return atan(a, b);
`,KI=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Sr+`
  return result;
`,jI=pn({opSnippet:YI,packedOpSnippet:KI}),ZI={kernelName:zh,backendName:"webgl",kernelFunc:jI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QI=cs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,JI=be({opSnippet:QI}),qI={kernelName:Vh,backendName:"webgl",kernelFunc:JI};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Va{constructor(e,f,y,S=!1,C=!1){if(this.variableNames=["x"],f==="avg"&&y)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,x=e.strideHeight,t=e.strideWidth,s=e.dilationHeight,l=e.dilationWidth,a=e.effectiveFilterHeight,r=e.effectiveFilterWidth,i=e.padInfo.top,n=e.padInfo.left;this.outputShape=e.outShape;const h=f==="avg",d=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,u=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let p="0.0";if(h||(p="-1.0 / 1e-20"),y){const b=">=";this.userCode=`
        const ivec2 strides = ivec2(${x}, ${t});
        const ivec2 pads = ivec2(${i}, ${n});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${a};
              wR += ${s}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${r};
                wC += ${l}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${b} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${S?C?d:u:`wR * ${r} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const v="max";let m=`${f}(${f}(${f}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;f==="avg"&&(m="avgValue / max(count, 1.0)");const g=Math.floor(o/4)*4,T=o%4,w=`
      if (${h}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${x}, ${t});
      const ivec2 pads = ivec2(${i}, ${n});
      const float initializationValue = ${p};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${p});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${a};
            wR += ${s}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC += 4) {
            int xC = xCCorner + wC * ${l};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              getValue(batch, xR, xC + 2 * ${l}, d),
              getValue(batch, xR, xC + 3 * ${l}, d)
            );

            ${w}
          }

          int xC = xCCorner + ${g};
          if (${T===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${w}
          } else if (${T===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              initializationValue,
              initializationValue
            );

            ${w}
          } else if (${T===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              getValue(batch, xR, xC + 2 * ${l}, d),
              initializationValue
            );

            ${w}
          }
        }
        setOutput(${m});
      }
    `}}class md{constructor(e,f,y,S=!1,C=!1){if(this.variableNames=["x"],f==="avg"&&y)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,x=e.strideDepth,t=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,a=e.dilationHeight,r=e.dilationWidth,i=e.effectiveFilterDepth,n=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,u=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const v=f==="avg";let m="0.0";if(v||(m="-1.0 / 1e-20"),y){const A=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${x}, ${t}, ${s});
        const ivec3 pads = ivec3(${d}, ${u}, ${p});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${i};
              wD += ${l}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${n};
                wR += ${a}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${h};
                  wC += ${r}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${A} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${S?C?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${n} * ${h} +
                      wR * ${h} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const g="max";let T=`${f}(${f}(${f}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;f==="avg"&&(T="avgValue / max(count, 1.0)");const w=Math.floor(o/4)*4,b=o%4,E=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${g}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${x}, ${t}, ${s});
      const ivec3 pads = ivec3(${d}, ${u}, ${p});
      const float initializationValue = ${m};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${m});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${i};
            wD += ${l}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${n};
            wR += ${a}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${w}; wC += 4) {
              int xC = xCCorner + wC * ${r};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${r}, ch),
                getValue(batch, xD, xR, xC + 2 * ${r}, ch),
                getValue(batch, xD, xR, xC + 3 * ${r}, ch)
              );

              ${E}
            }

            int xC = xCCorner + ${w};
            if (${b===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${b===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${r}, ch),
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${b===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${r}, ch),
                getValue(batch, xD, xR, xC + 2 * ${r}, ch),
                initializationValue
              );

              ${E}
            }
          }
        }
        setOutput(${T});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _I(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e;_a(S,"avgPool");const{filterSize:C,strides:o,pad:x,dimRoundingMode:t}=y,s=1;it(On(o,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const l=hs(S.shape,C,o,s,x,t);if(l.filterWidth===1&&l.filterHeight===1&&je(l.inShape,l.outShape))return Vn({inputs:{x:S},backend:f});const a=new Va(l,"avg",!1);return f.runWebGLProgram(a,[S],"float32")}const t9={kernelName:Zo,backendName:"webgl",kernelFunc:_I};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{filterSize:C,strides:o,pad:x,dimRoundingMode:t,dataFormat:s}=y,l=[1,1,1],a=ti(S.shape,C,o,l,x,t,s),r=new md(a,"avg",!1);return f.runWebGLProgram(r,[S],"float32")}const n9={kernelName:kh,backendName:"webgl",kernelFunc:e9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s9{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const f=e.filterHeight,y=e.filterWidth,S=e.strideHeight,C=e.strideWidth,o=e.dilationHeight,x=e.dilationWidth,t=e.effectiveFilterHeight,s=e.effectiveFilterWidth,l=t-1-e.padInfo.top,a=s-1-e.padInfo.left,r=1/(f*y);this.userCode=`
      const ivec2 pads = ivec2(${l}, ${a});
      const float avgMultiplier = float(${r});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${S}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s};
            wC+= ${x}) {
            float dyC = float(dyCCorner + wC) / ${C}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class i9{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const f=e.filterDepth,y=e.filterHeight,S=e.filterWidth,C=e.strideDepth,o=e.strideHeight,x=e.strideWidth,t=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,a=e.effectiveFilterDepth,r=e.effectiveFilterHeight,i=e.effectiveFilterWidth,n=a-1-e.padInfo.front,h=r-1-e.padInfo.top,d=i-1-e.padInfo.left,u=1/(f*y*S);this.userCode=`
      const ivec3 pads = ivec3(${n}, ${h}, ${d});
      const float avgMultiplier = float(${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${a};
            wD += ${t}) {
          float dyD = float(dyDCorner + wD) / ${C}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${r};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${i};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${x}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r9(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,input:C}=e,o=C,{filterSize:x,strides:t,pad:s,dimRoundingMode:l}=y,a=[1,1,1],r=ti(o.shape,x,t,a,s,l),i=new i9(r);return f.runWebGLProgram(i,[S],o.dtype)}const a9={kernelName:nv,backendName:"webgl",kernelFunc:r9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o9(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,input:C}=e,o=C;_a([S,C],"avgPoolGrad");const{filterSize:x,strides:t,pad:s}=y,l=hs(o.shape,x,t,1,s),a=new s9(l);return f.runWebGLProgram(a,[S],o.dtype)}const u9={kernelName:ev,backendName:"webgl",kernelFunc:o9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9(c){const{inputs:e,backend:f,attrs:y}=c,{a:S,b:C}=e,{transposeA:o,transposeB:x}=y;return Bo({a:S,b:C,transposeA:o,transposeB:x,backend:f})}const h9={kernelName:Qo,backendName:"webgl",kernelFunc:l9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f9{constructor(e,f,y,S,C,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Te(e,f),Te(e,y);let x="0.0";S!=null&&(Te(e,S),this.variableNames.push("offset"),x="getOffsetAtOutCoords()");let t="1.0";C!=null&&(Te(e,C),this.variableNames.push("scale"),t="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${x};
        float scale = ${t};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c9{constructor(e,f,y,S,C,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Te(e,f),Te(e,y);let x="vec4(0.0)";S!=null&&(Te(e,S),this.variableNames.push("offset"),x="getOffsetAtOutCoords()");let t="vec4(1.0)";C!=null&&(Te(e,C),this.variableNames.push("scale"),t="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${x};
        vec4 scale = ${t};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9=({inputs:c,backend:e,attrs:f})=>{const{x:y,mean:S,variance:C,offset:o,scale:x}=c;it(S.shape.length===C.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),it(o==null||S.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),it(x==null||S.shape.length===x.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:t}=f;t==null&&(t=.001);const s=[y,S,C];let l=null;o!=null&&(l=o.shape,s.push(o));let a=null;x!=null&&(a=x.shape,s.push(x));const r=St().getBool("WEBGL_PACK_NORMALIZATION")?new c9(y.shape,S.shape,C.shape,l,a,t):new f9(y.shape,S.shape,C.shape,l,a,t);return e.runWebGLProgram(r,s,s[0].dtype)},p9={kernelName:fu,backendName:"webgl",kernelFunc:d9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v9{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const f=De(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const y=m9(this.rank);let S;const C=e.map((o,x)=>`sourceLoc.${oh[x]} = start[${x}] + coords.${oh[x]};`);S=`
        ${f} sourceLoc;
        ${f} coords = getOutputCoords();
        ${C.join(`
`)}
      `,this.userCode=`
      void main() {
        ${S}
        setOutput(getSource(${y}));
      }
    `}}const oh=["x","y","z","w","u","v"];function m9(c){if(c===1)return"sourceLoc";if(c<=6)return oh.slice(0,c).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${c} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g9{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const f=De(this.rank),y=En("coords",this.rank),S=En("sourceLoc",this.rank),C=this.rank===1?"sourceLoc":`vec2(${S.slice(-2).join()})`,o=`getChannel(getSource(${S.join()}), ${C})`,x=`
      result.x = ${o};
      if (++${y[this.rank-1]} < ${e[this.rank-1]}) {
        ++${S[this.rank-1]};
        result.y = ${o};
        --${S[this.rank-1]};
      }
    `,t=this.rank===1?"":`
      --${y[this.rank-1]};
      if (++${y[this.rank-2]} < ${e[this.rank-2]}) {
        ++${S[this.rank-2]};
        result.z = ${o};
        if (++${y[this.rank-1]} < ${e[this.rank-1]}) {
          ++${S[this.rank-1]};
          result.w = ${o};
        }
      }
    `,s=this.rank<=4?`sourceLoc = coords +
            ${f}(${e.map((l,a)=>`start[${a}]`).join()});`:e.map((l,a)=>`${S[a]} = ${y[a]} + start[${a}];`).join(`
`);this.userCode=`
      void main() {
        ${f} coords = getOutputCoords();
        ${f} sourceLoc;
        ${s}
        vec4 result = vec4(0.);
        ${x}
        ${t}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x9(c,e,f,y){const S=y.texData.get(c.dataId),C=y.makeTensorInfo(f,c.dtype),o=y.texData.get(C.dataId);Object.assign(o,S),o.refCount=1,o.shape=f,o.dtype=c.dtype;let x=il(e,Me(c.shape));S.slice&&(x+=S.slice.flatOffset),o.slice={flatOffset:x,origDataId:S.slice&&S.slice.origDataId||c.dataId};const t=y.dataRefCount.get(o.slice.origDataId)||1;return y.dataRefCount.set(o.slice.origDataId,t+1),C}function la(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{begin:C,size:o}=y,[x,t]=kc(S,C,o);if(ng(S,x,t),bt(t)===0)return f.makeTensorInfo(t,S.dtype,[]);if(f.shouldExecuteOnCPU([S])||S.dtype==="string"){const a=f.texData.get(S.dataId),r=hR(a.values,x,t,S.shape,S.dtype);return f.makeTensorInfo(t,S.dtype,r)}const{isPacked:s}=f.texData.get(S.dataId),l=sl(S.shape,x,t);if(s||!l){const a=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new g9(t):new v9(t),r=[x];return f.runWebGLProgram(a,[S],S.dtype,r)}return f.uploadToGPU(S.dataId),x9(S,x,t,f)}const y9={kernelName:Kf,backendName:"webgl",kernelFunc:la};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T9=c=>{const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{blockShape:C,crops:o}=y;it(S.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const x=C.reduce((p,v)=>p*v),t=Za(S.shape,C,x),s=Qa(t.length,C.length),l=Ja(S.shape,C,x),a=Kc(o,C.length),r=jc(l,o,C.length),i=[],n=Yt({inputs:{x:S},backend:f,attrs:{shape:t}}),h=wn({inputs:{x:n},backend:f,attrs:{perm:s}}),d=Yt({inputs:{x:h},backend:f,attrs:{shape:l}}),u=la({inputs:{x:d},backend:f,attrs:{begin:a,size:r}});return i.push(n),i.push(h),i.push(d),i.forEach(p=>f.disposeIntermediateTensorInfo(p)),u},S9={kernelName:Wh,backendName:"webgl",kernelFunc:T9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C9(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,weights:C}=e,{size:o}=y,x=f.readSync(S.dataId),t=f.readSync(C.dataId),s=Zg(x,t,C.dtype,C.shape,o);return f.makeTensorInfo([o],C.dtype,s)}const E9={kernelName:Jo,backendName:"webgl",kernelFunc:C9};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w9=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,b9=`
  return float(int(a.r) & int(b.r));
`;function A9(c){const{inputs:e,backend:f}=c,{a:y,b:S}=e,C=St().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=St().getNumber("WEBGL_VERSION");if(f.shouldExecuteOnCPU([y,S])||o===1){const t=f.texData.get(y.dataId).values,s=f.texData.get(S.dataId).values,[l,a]=DA(y.shape,S.shape,t,s,y.dtype),r=f.makeTensorInfo(a,y.dtype),i=f.texData.get(r.dataId);return i.values=l,r}let x;return C?x=new oa(w9,y.shape,S.shape,!1):x=new fr(b9,y.shape,S.shape),f.runWebGLProgram(x,[y,S],y.dtype)}const R9={kernelName:Xh,backendName:"webgl",kernelFunc:A9};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I9(c){const{inputs:e,backend:f}=c,{s0:y,s1:S}=e,C=f.readSync(y.dataId),o=f.readSync(S.dataId),x=Te(Array.from(C),Array.from(o));return f.makeTensorInfo([x.length],"int32",Int32Array.from(x))}const P9={kernelName:Hh,backendName:"webgl",kernelFunc:I9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F9="return float(a != b);",l0=pn({opSnippet:F9,cpuKernelImpl:eR,dtype:"bool"}),M9={kernelName:Nf,backendName:"webgl",kernelFunc:l0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eo(c){const{inputs:e,backend:f}=c,{input:y}=e,S=f.texData.get(y.dataId);return Vn({inputs:{x:S.complexTensorInfos.real},backend:f})}const N9={kernelName:yv,backendName:"webgl",kernelFunc:eo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O9="return float(int(x));";function D9(c,e){const f=new Ps(c.shape,O9),y=e.runWebGLProgram(f,[c],"int32");return{dataId:y.dataId,shape:y.shape,dtype:y.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uh(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{dtype:C}=y;if(C==="complex64"){if(S.dtype==="complex64")return Vn({inputs:{x:S},backend:f});const o=ur(S.shape),x=uh({inputs:{x:S},backend:f,attrs:{dtype:"float32"}}),t=Di({inputs:{real:x,imag:o},backend:f});return o.dispose(),f.disposeIntermediateTensorInfo(x),t}if(S.dtype==="complex64"){const o=eo({inputs:{input:S},backend:f}),x=uh({inputs:{x:o},backend:f,attrs:{dtype:C}});return f.disposeIntermediateTensorInfo(o),x}if(!L2(S.dtype,C)){const o=Vn({inputs:{x:S},backend:f});return{dataId:o.dataId,shape:o.shape,dtype:C}}if(f.shouldExecuteOnCPU([S])){const o=f.texData.get(S.dataId).values,[x,t,s]=LA(o,S.shape,S.dtype,C);return f.makeTensorInfo(x,t,s)}if(C==="int32")return D9(S,f);if(C==="bool"){const o=f.makeTensorInfo([],"bool",wi("bool",1)),t=l0({inputs:{a:S,b:o},backend:f});return f.disposeIntermediateTensorInfo(o),t}throw new Error(`Error in Cast: failed to cast ${S.dtype} to ${C}`)}const L9={kernelName:qo,backendName:"webgl",kernelFunc:uh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hp="return ceil(x);",B9=be({opSnippet:hp,packedOpSnippet:hp,cpuKernelImpl:BA}),$9={kernelName:Yh,backendName:"webgl",kernelFunc:B9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G9{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U9{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V9(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{clipValueMin:C,clipValueMax:o}=y;let x;St().getBool("WEBGL_PACK_CLIP")?x=new U9(S.shape):x=new G9(S.shape);const t=[[C],[o]];return f.runWebGLProgram(x,[S],S.dtype,t)}const z9={kernelName:_o,backendName:"webgl",kernelFunc:V9};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k9{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fp(c,e){return{dataId:e.dataId,dtype:e.dtype,shape:c.shape}}function W9(c){const{inputs:e,backend:f}=c,{x:y}=e,S=f.texData.get(y.dataId),C=new k9(y.shape),o=[fp(y,S.complexTensorInfos.real),fp(y,S.complexTensorInfos.imag)];return f.runWebGLProgram(C,o,o[0].dtype)}const X9={kernelName:iv,backendName:"webgl",kernelFunc:W9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H9{constructor(e){this.outputShape=[],this.outputShape=Ms(e,1),this.variableNames=e.map((o,x)=>`T${x}`);const f=new Array(e.length-1);f[0]=e[0][1];for(let o=1;o<f.length;o++)f[o]=f[o-1]+e[o][1];const y=[`if (yC < ${f[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<f.length;o++){const x=f[o-1];y.push(`else if (yC < ${f[o]}) setOutput(getT${o}(yR, yC-${x}));`)}const S=f.length,C=f[f.length-1];y.push(`else setOutput(getT${S}(yR, yC-${C}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${y.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y9{constructor(e,f){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ms(e,f);const y=this.outputShape,S=y.length,C=De(S),o=En("coords",S),x=["x","y","z","w","u","v"].slice(0,S);this.variableNames=e.map((h,d)=>`T${d}`);const t=new Array(e.length-1);t[0]=e[0][f];for(let h=1;h<t.length;h++)t[h]=t[h-1]+e[h][f];const s=x[f],l=x.slice(-2),a=x.join();let r=`if (${s} < ${t[0]}) {
        return getChannel(
            getT0(${a}), vec2(${l.join()}));
        }`;for(let h=1;h<t.length;h++){const d=t[h-1];r+=`
        if (${s} < ${t[h]}  && ${s} >= ${t[h-1]}) {
          return getChannel(
            getT${h}(${po(x,s,d)}),
            vec2(${po(l,s,d)}));
        }`}const i=t.length,n=t[t.length-1];r+=`
        return getChannel(
          getT${i}(${po(x,s,n)}),
          vec2(${po(l,s,n)}));`,this.userCode=`
      float getValue(${x.map(h=>"int "+h)}) {
        ${r}
      }

      void main() {
        ${C} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[S-1]} = ${o[S-1]} + 1;
        if (${o[S-1]} < ${y[S-1]}) {
          result.g = getValue(${o});
        }

        ${o[S-2]} = ${o[S-2]} + 1;
        if (${o[S-2]} < ${y[S-2]}) {
          result.a = getValue(${o});
        }

        ${o[S-1]} = ${o[S-1]} - 1;
        if (${o[S-2]} < ${y[S-2]} &&
            ${o[S-1]} < ${y[S-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function po(c,e,f){const y=c.indexOf(e);return c.map((C,o)=>o===y?`${C} - ${f}`:C).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hl(c){const{inputs:e,backend:f}=c,{input:y}=e,S=f.texData.get(y.dataId);return Vn({inputs:{x:S.complexTensorInfos.imag},backend:f})}const K9={kernelName:dv,backendName:"webgl",kernelFunc:hl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ta(c,e,f){const y=c[0].dtype;if(y==="complex64"){const i=c.map(p=>eo({inputs:{input:p},backend:f})),n=c.map(p=>hl({inputs:{input:p},backend:f})),h=Ta(i,e,f),d=Ta(n,e,f),u=Di({inputs:{real:h,imag:d},backend:f});return i.forEach(p=>f.disposeIntermediateTensorInfo(p)),n.forEach(p=>f.disposeIntermediateTensorInfo(p)),f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(d),u}let S=f.shouldExecuteOnCPU(c);if(y==="string"&&(S=!0),S){const i=c.map(m=>{const T=[-1,bt(m.shape.slice(e))];return Yt({inputs:{x:m},backend:f,attrs:{shape:T}})}),n=i.map(m=>({vals:f.readSync(m.dataId),shape:m.shape})),h=Ms(i.map(m=>m.shape),1),d=i[0].shape[0]===1,u=$A(n,h,y,d),p=Ms(c.map(m=>m.shape),e),v=f.makeTensorInfo(p,y,u);return i.forEach(m=>f.disposeIntermediateTensorInfo(m)),v}const C=c.filter(i=>bt(i.shape)>0),o=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&C[0].shape.length>1;if(C.length===1){const i=o?new Ps(c[0].shape,mi):new yi(c[0].shape,mi);return f.runWebGLProgram(i,c,y)}const x=St().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(C.length>x){const i=[];for(let h=0;h<C.length;h+=x){const d=C.slice(h,h+x);i.push(Ta(d,e,f))}const n=Ta(i,e,f);for(const h of i)f.disposeIntermediateTensorInfo(h);return n}if(o){const i=new Y9(C.map(n=>n.shape),e);return f.runWebGLProgram(i,C,y)}const{tensors2D:t,outShape:s}=j9(C,e,f),l=new H9(t.map(i=>i.shape)),a=f.runWebGLProgram(l,t,y);t.forEach(i=>f.disposeIntermediateTensorInfo(i));const r=Yt({inputs:{x:a},attrs:{shape:s},backend:f});return f.disposeIntermediateTensorInfo(a),r}function j9(c,e,f){const y=Ms(c.map(C=>C.shape),e);return{tensors2D:c.map(C=>Yt({inputs:{x:C},attrs:{shape:[-1,bt(C.shape.slice(e))]},backend:f})),outShape:y}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0(c){const{inputs:e,backend:f,attrs:y}=c,{axis:S}=y,C=Qe(S,e[0].shape)[0],o=e.map(s=>s.shape);Xc(o,C);const x=Ms(e.map(s=>s.shape),C);if(bt(x)===0)return f.makeTensorInfo(x,e[0].dtype,[]);const t=e.filter(s=>bt(s.shape)>0);return t.length===1?Vn({inputs:{x:t[0]},backend:f}):Ta(t,C,f)}const Z9={kernelName:Kh,backendName:"webgl",kernelFunc:h0};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f0{constructor(e,f=!1,y=null,S=!1,C=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,x=e.padInfo.left,t=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,a=e.dilationWidth,r=e.filterHeight,i=e.filterWidth,n=Math.floor(e.inChannels/4)*4,h=e.inChannels%4,d=e.dataFormat==="channelsLast",u=d?1:2,p=d?2:3,v=d?3:1;let m="",g="";y&&(S?m=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${y}
        }`:C?m=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${y}
        }`:m=`
          float activation(float x) {
            ${y}
          }
        `,g="result = activation(result);");const T=f?"result += getBiasAtOutCoords();":"";f&&this.variableNames.push("bias"),S&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      const ivec2 strides = ivec2(${t}, ${s});
      const ivec2 pads = ivec2(${o}, ${x});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${u}], coords[${p}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r}; wR++) {
          int xR = xRCorner + wR * ${l};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${i}; wC++) {
            int xC = xCCorner + wC * ${a};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${n}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${d}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${h===1}) {

              if (${d}) {
                dotProd +=
                    getX(batch, xR, xC, ${n}) *
                    getW(wR, wC, ${n}, d2);
              } else {
                dotProd +=
                    getX(batch, ${n}, xR, xC) *
                    getW(wR, wC, ${n}, d2);
              }

            } else if (${h===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${n}, d2),
                getW(wR, wC, ${n} + 1, d2)
              );

              if (${d}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${n}),
                  getX(batch, xR, xC, ${n} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${n}, xR, xC),
                  getX(batch, ${n} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${h===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${n}, d2),
                getW(wR, wC, ${n} + 1, d2),
                getW(wR, wC, ${n} + 2, d2)
              );

              if (${d}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${n}),
                  getX(batch, xR, xC, ${n} + 1),
                  getX(batch, xR, xC, ${n} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${n}, xR, xC),
                  getX(batch, ${n} + 1, xR, xC),
                  getX(batch, ${n} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${T}
        ${g}
        setOutput(result);
      }
    `}}class Q9{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const f=e.padInfo.front,y=e.padInfo.top,S=e.padInfo.left,C=e.strideDepth,o=e.strideHeight,x=e.strideWidth,t=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,a=e.filterDepth,r=e.filterHeight,i=e.filterWidth,n=Math.floor(e.inChannels/4)*4,h=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${C}, ${o}, ${x});
      const ivec3 pads = ivec3(${f}, ${y}, ${S});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${a}; wF++) {
          int xF = xFCorner + wF * ${t};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${r}; wR++) {
            int xR = xRCorner + wR * ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${i}; wC++) {
              int xC = xCCorner + wC * ${l};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${n}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${h===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${n}) *
                  getW(wF, wR, wC, ${n}, d2);
              } else if (${h===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${n}),
                  getX(batch, xF, xR, xC, ${n} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${n}, d2),
                  getW(wF, wR, wC, ${n} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${h===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${n}),
                  getX(batch, xF, xR, xC, ${n} + 1),
                  getX(batch, xF, xR, xC, ${n} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${n}, d2),
                  getW(wF, wR, wC, ${n} + 1, d2),
                  getW(wF, wR, wC, ${n} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c0{constructor(e,f=!1,y=null,S=!1,C=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=yn(this.outputShape.length);const o=e.padInfo.left,x=e.strideWidth,t=e.dilationWidth,s=e.filterHeight,l=e.filterWidth,a=l;let r=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let d=0;d<l;d++)r+=`
           vec4 xTexelC${d*2};
           int xTexelC${d*2}Ready;
           vec4 xTexelC${d*2+1};
           int xTexelC${d*2+1}Ready;
           vec4 xC${d};`;r+=`
     for (int r = 0; r < ${s}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let d=0;d<l;d++)r+=`
           xTexelC${d*2} = vec4(0.0);
           xTexelC${d*2}Ready = 0;
           xTexelC${d*2+1} = vec4(0.0);
           xTexelC${d*2+1}Ready = 0;
           xC${d} = vec4(0.0);`;r+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let d=0;d<(a+1)/2;d++){const u=d*2;if(r+=`
           xC = xCCorner + ${u*t};
           `,x===1){if(u<l&&(o%2===1?(r+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u}Ready == 0) {
                   xTexelC${u} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${u}.zw = vec2(0.0);
                   }
                   xTexelC${u}Ready = 1;
                 }
               `,t===1&&u>0?r+=`
                 xC${u} = vec4(xTexelC${u-2}.zw, xTexelC${u}.xy);
                 `:r+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${u} = vec4(previous.zw, xTexelC${u}.xy);
                   } else {
                     xC${u} = vec4(0.0, 0.0, xTexelC${u}.xy);
                   }
                   `):r+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${u}Ready == 0) {
                   xTexelC${u} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${u}.zw = vec2(0.0);
                   }
                   xTexelC${u}Ready = 1;
                 }

                 xC${u} = xTexelC${u};
                 `,u+1<l)){const p=o%2===0?Ph(t):t;t%2===0&&o%2===1||t%2!==0&&o%2!==1?(r+=`
                   xCOffset = xC + imod(pads[1], 2) + ${p};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u+1}Ready == 0) {
                     xTexelC${u+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${u+1}.zw = vec2(0.0);
                     }
                     xTexelC${u+1}Ready = 1;
                   }
                   `,t>1?r+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${u+1} = vec4(previous.zw, xTexelC${u+1}.xy);
                     } else {
                      xC${u+1} = vec4(0.0, 0.0, xTexelC${u+1}.xy);
                     }
                     `:r+=`
                     xC${u+1} = vec4(xTexelC${u}.zw, xTexelC${u+1}.xy);
                     `):p===1?r+=`
                     xC${u+1} = xTexelC${u};
                     `:r+=`
                     xCOffset = xC + ${p};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u+1}Ready == 0) {
                       xTexelC${u+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${u+1}.zw = vec2(0.0);
                       }
                       xTexelC${u+1}Ready = 1;
                     }

                     xC${u+1} = xTexelC${u+1};
                     `}}else u<l&&(o%2===1?(r+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u}Ready == 0) {
                   xTexelC${u} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${u}.zw = vec2(0.0);
                   }
                   xTexelC${u}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${u+1}Ready == 0) {
                   xTexelC${u+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${u+1}.zw = vec2(0.0);
                   }
                   xTexelC${u+1}Ready = 1;
                 }

                 xC${u} = vec4(xTexelC${u}.zw, xTexelC${u+1}.zw);
               `,u+1<l&&(r+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${u+1} = vec4(xTexelC${u+1}.xy, final.xy);
                 `)):(r+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${u}Ready == 0) {
                   xTexelC${u} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${u}.zw = vec2(0.0);
                   }
                   xTexelC${u}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u+1}Ready == 0) {
                   xTexelC${u+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${u+1}.zw = vec2(0.);
                   }
                   xTexelC${u+1}Ready = 1;
                 }

                 xC${u} = vec4(
                   xTexelC${u}.xy, xTexelC${u+1}.xy);
               `,u+1<l&&(r+=`
                   xC${u+1} = vec4(xTexelC${u}.zw, xTexelC${u+1}.zw);
                 `)));u<l&&(r+=`
             wTexel = getW(r, ${u}, d1, d2);
             dotProd += xC${u}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${u}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,u+1<l&&(r+=`
               wTexel = getW(r, ${u+1}, d1, d2);
               dotProd += xC${u+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${u+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}r+=`
     }
   `,r+=`
     }
   `,r+=`
     }
   `;let i="",n="";y&&(S?i=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${y}
         }`:C?i=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${y}
         }`:i=`vec4 activation(vec4 x) {
           ${y}
         }`,n="result = activation(result);");const h=f?"result += getBiasAtOutCoords();":"";f&&this.variableNames.push("bias"),S&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${i}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${r}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${h}
         ${n}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J9{constructor(e,f){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);const{dataFormat:y}=f,S=bn(),C=y==="channelsLast",o=C?1:2,x=C?2:3,t=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let s="";for(let l=0;l<=1;l++)for(let a=0;a<=1;a++)s+=`
          blockIndex = rc.z + ${a};
          pos = rc.y + ${l};

          ${t}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${x}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${C}) {
                  innerDims = vec2(d1, ch);
                  result[${l*2+a}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${l*2+a}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${s}

        ${S.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $o(c,e){const f=c.length;return f>=3?e?[...c.slice(0,-3),c[f-3]*c[f-2],c[f-1]]:[...c.slice(0,-3),c[f-3],c[f-2]*c[f-1]]:!e&&f===1&&c[0]>1?[c[0],1]:null}function d0({x:c,filter:e,convInfo:f,backend:y,bias:S=null,preluActivationWeights:C=null,leakyreluAlpha:o=0,activation:x=null}){const t=c.shape,s=y.texData.get(c.dataId),l=f.inChannels,a=t[0]*t[1]*t[2],r=f.outChannels,i=f.dataFormat==="channelsLast",n=!1,h=!1;let d;const u=[];if(C!=null){const m=$o(C.shape,i);m!=null&&(C=Yt({inputs:{x:C},backend:y,attrs:{shape:m}}),u.push(C))}if(S!=null){const m=$o(S.shape,i);m!=null&&(S=Yt({inputs:{x:S},backend:y,attrs:{shape:m}}),u.push(S))}if(!((a===1||r===1)&&l>r0)&&s.isPacked&&i&&s.texture!=null&&t[2]%2!==0&&je(s.shape.slice(-3),t.slice(-3))){const m=t[0]*t[1]*(t[2]+1),g={dataId:c.dataId,shape:[1,m,f.inChannels],dtype:c.dtype},T=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,it(Do(s.shape,g.shape),()=>`packed reshape ${s.shape} to ${g.shape} isn't free`);const w=Yt({inputs:{x:e},backend:y,attrs:{shape:[1,f.inChannels,f.outChannels]}});u.push(w);const b=Bo({a:g,b:w,backend:y,transposeA:n,transposeB:h,bias:S,activation:x,preluActivationWeights:C,leakyreluAlpha:o}),E=y.texData.get(b.dataId);it(E.isPacked,()=>"batchMatMul result is expected to be packed"),s.shape=T,E.shape=f.outShape,d=Vn({inputs:{x:b},backend:y}),d.shape=f.outShape,u.push(b)}else{const m=f.outHeight*f.outWidth,g=Yt({inputs:{x:c},backend:y,attrs:{shape:i?[f.batchSize,m,f.inChannels]:[f.batchSize,f.inChannels,m]}}),T=Yt({inputs:{x:e},backend:y,attrs:{shape:[1,f.inChannels,f.outChannels]}}),w=Bo({a:i?g:T,b:i?T:g,transposeA:!i,transposeB:h,backend:y,bias:S,activation:x,preluActivationWeights:C,leakyreluAlpha:o});d=Yt({inputs:{x:w},backend:y,attrs:{shape:f.outShape}}),u.push(g),u.push(T),u.push(w)}for(const m of u)y.disposeIntermediateTensorInfo(m);return d}function p0({x:c,filter:e,convInfo:f,backend:y,bias:S=null,preluActivationWeights:C=null,leakyreluAlpha:o=0,activation:x=null}){const{filterWidth:t,filterHeight:s,inChannels:l,outWidth:a,outHeight:r,dataFormat:i}=f,n=i==="channelsLast",h=t*s*l,d=r*a,u=[f.batchSize,h,d],p=!0,v=!1,m=[];if(C!=null){const L=$o(C.shape,n);L!=null&&(C=Yt({inputs:{x:C},backend:y,attrs:{shape:L}}),m.push(C))}if(S!=null){const L=$o(S.shape,n);L!=null&&(S=Yt({inputs:{x:S},backend:y,attrs:{shape:L}}),m.push(S))}const g=Yt({inputs:{x:e},backend:y,attrs:{shape:[1,h,bt(e.shape)/h]}});m.push(g);const T=new J9(u,f),w=[c.shape,[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inChannels],[f.filterWidth*f.inChannels],[f.outWidth]],b=y.runWebGLProgram(T,[c],"float32",w),E=Yt({inputs:{x:b},backend:y,attrs:{shape:u}});m.push(b),m.push(E);const A=S!=null,R=C!=null,I=x==="leakyrelu",P=x?Ua(x,!0):null,M=new i0(n?E.shape:g.shape,n?g.shape:E.shape,n?[f.batchSize,d,f.outChannels]:[f.batchSize,f.outChannels,d],p,v,A,P,R,I),F=n?[E,g]:[g,E];if(S&&F.push(S),R&&F.push(C),I){const L=y.makeTensorInfo([],"float32",_r(o,"float32"));F.push(L),m.push(L)}const O=y.runWebGLProgram(M,F,"float32"),D=Yt({inputs:{x:O},backend:y,attrs:{shape:f.outShape}});m.push(O);for(const L of m)y.disposeIntermediateTensorInfo(L);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q9(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C}=e,{strides:o,pad:x,dataFormat:t,dilations:s,dimRoundingMode:l}=y,a=Oi(t),r=cn(S.shape,C.shape,o,s,x,l,!1,a);let i;if(r.filterHeight===1&&r.filterWidth===1&&r.dilationHeight===1&&r.dilationWidth===1&&r.strideHeight===1&&r.strideWidth===1&&(r.padInfo.type==="SAME"||r.padInfo.type==="VALID"))i=d0({x:S,filter:C,convInfo:r,backend:f});else if(r.strideWidth<=2&&a==="channelsLast"&&St().getBool("WEBGL_EXP_CONV")){const h=new c0(r),d=[[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inHeight,r.inWidth]];i=f.runWebGLProgram(h,[S,C],"float32",d)}else if(St().getBool("WEBGL_CONV_IM2COL"))i=p0({x:S,filter:C,convInfo:r,backend:f});else{const h=new f0(r);i=f.runWebGLProgram(h,[S,C],"float32")}const n=Yt({inputs:{x:i},backend:f,attrs:{shape:r.outShape}});return f.disposeIntermediateTensorInfo(i),n}const _9={kernelName:tu,backendName:"webgl",kernelFunc:q9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tP{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const f=e.strideHeight,y=e.strideWidth,S=e.padInfo.top,C=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${f} - ${S};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${y} - ${C};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eP{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const f=e.filterHeight,y=e.filterWidth,S=e.strideHeight,C=e.strideWidth,o=e.dataFormat==="channelsLast",x=f-1-e.padInfo.top,t=y-1-e.padInfo.left,s=o?1:2,l=o?2:3,a=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${x}, ${t});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${a}];

        ivec2 dyCorner = ivec2(coords[${s}], coords[${l}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          float dyR = float(dyRCorner + wR) / ${S}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${f} - 1 - wR;

          for (int wC = 0; wC < ${y}; wC++) {
            float dyC = float(dyCCorner + wC) / ${C}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${y} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class nP{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const f=e.strideDepth,y=e.strideHeight,S=e.strideWidth,C=e.padInfo.front,o=e.padInfo.top,x=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${f} - ${C};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${y} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${S} - ${x};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class sP{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const f=e.filterDepth,y=e.filterHeight,S=e.filterWidth,C=e.strideDepth,o=e.strideHeight,x=e.strideWidth,t=f-1-e.padInfo.front,s=y-1-e.padInfo.top,l=S-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${t}, ${s}, ${l});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          float dyF = float(dyFCorner + wF) / ${C}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${f} - 1 - wF;

          for (int wR = 0; wR < ${y}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${y} - 1 - wR;

            for (int wC = 0; wC < ${S}; wC++) {
              float dyC = float(dyCCorner + wC) / ${x}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${S} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,dy:C}=e,{strides:o,pad:x,dataFormat:t,dimRoundingMode:s,filterShape:l}=y,a=Oi(t),r=cn(S.shape,l,o,1,x,s,!1,a),i=new tP(r);return f.runWebGLProgram(i,[S,C],"float32")}const rP={kernelName:rv,backendName:"webgl",kernelFunc:iP};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aP{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=yn(this.outputShape.length);const f=e.filterHeight,y=e.filterWidth,S=f-1-e.padInfo.top,C=y-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${S}, ${C});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${f}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${f} - 1 - wR;

          for (int wC = 0; wC < ${y}; wC++) {
            int wCPerm = ${y} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oP(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,filter:C}=e,{inputShape:o,strides:x,pad:t,dataFormat:s,dimRoundingMode:l}=y,a=Oi(s),r=cn(o,C.shape,x,1,t,l,!1,a);if(St().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&a==="channelsLast"){const i=[[r.strideHeight,r.strideWidth]],n=new aP(r);return f.runWebGLProgram(n,[S,C],"float32",i)}else{const i=new eP(r);return f.runWebGLProgram(i,[S,C],"float32")}}const uP={kernelName:eu,backendName:"webgl",kernelFunc:oP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C}=e,{strides:o,pad:x,dilations:t}=y,s=Ni(S.shape,C.shape,o,t,x),l=new Q9(s);return f.runWebGLProgram(l,[S,C],"float32")}const hP={kernelName:nu,backendName:"webgl",kernelFunc:lP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,dy:C}=e,{strides:o,pad:x,filterShape:t}=y,s=Ni(S.shape,t,o,1,x),l=new nP(s);return f.runWebGLProgram(l,[S,C],"float32")}const cP={kernelName:jh,backendName:"webgl",kernelFunc:fP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dP(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,filter:C}=e,{pad:o,strides:x,inputShape:t}=y,s=Ni(t,C.shape,x,1,o),l=new sP(s);return f.runWebGLProgram(l,[S,C],"float32")}const pP={kernelName:su,backendName:"webgl",kernelFunc:dP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vP=ua+`
  return cos(x);
`,mP=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Sr}
  return result;
`,gP=be({opSnippet:vP,packedOpSnippet:mP}),xP={kernelName:Zh,backendName:"webgl",kernelFunc:gP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yP=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,TP=be({opSnippet:yP}),SP={kernelName:Qh,backendName:"webgl",kernelFunc:TP};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CP{constructor(e,f,y,S,C){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,x,t,s]=e,[l]=f,[a,r]=y;this.outputShape=[l,a,r,s];const i=S==="bilinear"?1:0,[n,h]=[`${x-1}.0`,`${t-1}.0`],[d,u,p]=a>1?[`${(x-1)/(a-1)}`,"(y2-y1) * height_ratio",`y1*${n} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${n}`],[v,m,g]=r>1?[`${(t-1)/(r-1)}`,"(x2-x1) * width_ratio",`x1*${h} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${h}`];this.userCode=`
      const float height_ratio = float(${d});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${u};
        float width_scale = ${m};

        float in_y = ${p};
        if( in_y < 0.0 || in_y > ${n} ) {
          setOutput(float(${C}));
          return;
        }
        float in_x = ${g};
        if( in_x < 0.0 || in_x > ${h} ) {
          setOutput(float(${C}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${i} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EP=c=>{const{inputs:e,backend:f,attrs:y}=c,{image:S,boxes:C,boxInd:o}=e,{cropSize:x,method:t,extrapolationValue:s}=y,l=new CP(S.shape,C.shape,x,t,s);return f.runWebGLProgram(l,[S,C,o],"float32")},wP={kernelName:au,backendName:"webgl",kernelFunc:EP};var za;(function(c){c.Prod="*",c.Sum="+"})(za||(za={}));class cp{constructor(e,f,y,S){this.op=e,this.outputShape=f,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const C=this.outputShape.length,o=this.op===za.Prod?"1.0":"0.0",x=y?o:`getX(${dp(C,"coords",this.op)})`,t=this.outputShape[this.outputShape.length-1];let s="",l="";y?(s=S?`end != ${t-1}`:"end != 0",l=S?"end + 1":"end - 1"):(s=S?`end + pow2 < ${t}`:"end >= pow2",l=S?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${De(C)} coords = getOutputCoords();
        int end = ${pp(C,"coords",this.op)};
        float val = ${x};
        int pow2 = int(pow(2.0, index));
        if (${s}) {
          int idx = ${l};
          ${pp(C,"coords",this.op)} = idx;
          val ${this.op}= getX(${dp(C,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function dp(c,e,f){if(c===1)return`${e}`;if(c===2)return`${e}.x, ${e}.y`;if(c===3)return`${e}.x, ${e}.y, ${e}.z`;if(c===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${f} for rank ${c} is not yet supported`)}function pp(c,e,f){if(c===1)return`${e}`;if(c===2)return`${e}.y`;if(c===3)return`${e}.z`;if(c===4)return`${e}.w`;throw new Error(`Cumulative ${f} for rank ${c} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0(c,e,f,y,S,C){const o=e.shape.length,x=Dn([y],o);let t=e;x!=null&&(t=wn({inputs:{x:e},backend:f,attrs:{perm:x}}));const s=dn(1,o)[0];if(s!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${y}`);const l=t.shape[s];let a=Vn({inputs:{x:t},backend:f});for(let r=0;r<=Math.ceil(Math.log2(l))-1;r++){const i=new cp(c,t.shape,!1,C),n=[[r]],h=a;a=f.runWebGLProgram(i,[a],a.dtype,n),f.disposeIntermediateTensorInfo(h)}if(S){const r=new cp(c,t.shape,S,C),i=a;a=f.runWebGLProgram(r,[a],a.dtype),f.disposeIntermediateTensorInfo(i)}if(x!=null){const r=Ka(x),i=wn({inputs:{x:a},backend:f,attrs:{perm:r}});return f.disposeIntermediateTensorInfo(a),f.disposeIntermediateTensorInfo(t),i}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C,exclusive:o,reverse:x}=y;return v0(za.Prod,S,f,C,o,x)}const AP={kernelName:iu,backendName:"webgl",kernelFunc:bP};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C,exclusive:o,reverse:x}=y;return v0(za.Sum,S,f,C,o,x)}const IP={kernelName:ru,backendName:"webgl",kernelFunc:RP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,weights:C}=e,{size:o,binaryOutput:x}=y;if(S.shape.length===1){const t=f.readSync(S.dataId),s=f.readSync(C.dataId),l=Zg(t,s,C.dtype,C.shape,o);return f.makeTensorInfo([o],C.dtype,l)}else if(S.shape.length===2){const t=f.bufferSync(S),s=f.bufferSync(C),l=OA(t,s,o,x);return f.makeTensorInfo(l.shape,C.dtype,l.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${S.shape.length}.`)}const FP={kernelName:Jh,backendName:"webgl",kernelFunc:PP};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MP{constructor(e,f,y){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=f,this.dataFormat=y,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${f};
      int offset_h = imod(h, ${f});
      int in_w = w / ${f};
      int offset_w = imod(w, ${f});
      int offset_d = (offset_h * ${f} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{blockSize:C,dataFormat:o}=y,x=S.shape[0],t=o==="NHWC"?S.shape[1]:S.shape[2],s=o==="NHWC"?S.shape[2]:S.shape[3],l=o==="NHWC"?S.shape[3]:S.shape[1],a=t*C,r=s*C,i=l/(C*C),n=o==="NHWC"?[x,a,r,i]:[x,i,a,r],h=new MP(n,C,o);return f.runWebGLProgram(h,[S],S.dtype)}const OP={kernelName:ou,backendName:"webgl",kernelFunc:NP};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m0{constructor(e,f=!1,y=null,S=!1,C=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=yn(this.outputShape.length);const o=e.filterHeight,x=e.filterWidth,t=e.outChannels/e.inChannels;let s="",l="";y&&(S?s=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${y}
        }`:C?s=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${y}
        }`:s=`
          float activation(float x) {
            ${y}
          }
        `,l="result = activation(result);");const a=f?"result += getBiasAtOutCoords();":"";f&&this.variableNames.push("bias"),S&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${s}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${t};
        int q = d2 - d1 * ${t};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${x}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g0{constructor(e,f=!1,y=null,S=!1,C=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=yn(this.outputShape.length);const o=e.outChannels/e.inChannels,x=e.padInfo.left,t=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,a=e.filterWidth,r=a;let i=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let u=0;u<a;u++)i+=`
          vec4 xTexelC${u*2};
          int xTexelC${u*2}Ready;
          vec4 xTexelC${u*2+1};
          int xTexelC${u*2+1}Ready;
          vec4 xC${u};`;i+=`
    for (int r = 0; r < ${l}; r++) {
      `;for(let u=0;u<a;u++)i+=`
          xTexelC${u*2} = vec4(0.0);
          xTexelC${u*2}Ready = 0;
          xTexelC${u*2+1} = vec4(0.0);
          xTexelC${u*2+1}Ready = 0;
          xC${u} = vec4(0.0);`;i+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let u=0;u<(r+1)/2;u++){const p=u*2;if(i+=`
          xC = xCCorner + ${p*s};
          `,t===1){if(p<a&&(x%2===1?(i+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }
              `,s===1&&p>0?i+=`
                xC${p} = vec4(xTexelC${p-2}.zw, xTexelC${p}.xy);
                `:i+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${p} = vec4(previous.zw, xTexelC${p}.xy);
                  } else {
                    xC${p} = vec4(0.0, 0.0, xTexelC${p}.xy);
                  }
                  `):i+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }

                xC${p} = xTexelC${p};
                `,p+1<a)){const v=x%2===0?Ph(s):s;s%2===0&&x%2===1||s%2!==0&&x%2!==1?(i+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p+1}Ready == 0) {
                    xTexelC${p+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${p+1}.zw = vec2(0.0);
                    }
                    xTexelC${p+1}Ready = 1;
                  }
                  `,s>1?i+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${p+1} = vec4(previous.zw, xTexelC${p+1}.xy);
                    } else {
                     xC${p+1} = vec4(0.0, 0.0, xTexelC${p+1}.xy);
                    }
                    `:i+=`
                    xC${p+1} = vec4(xTexelC${p}.zw, xTexelC${p+1}.xy);
                    `):v===1?i+=`
                    xC${p+1} = xTexelC${p};
                    `:i+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p+1}Ready == 0) {
                      xTexelC${p+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${p+1}.zw = vec2(0.0);
                      }
                      xTexelC${p+1}Ready = 1;
                    }

                    xC${p+1} = xTexelC${p+1};
                    `}}else p<a&&(x%2===1?(i+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${p+1}Ready == 0) {
                  xTexelC${p+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${p+1}.zw = vec2(0.0);
                  }
                  xTexelC${p+1}Ready = 1;
                }

                xC${p} = vec4(xTexelC${p}.zw, xTexelC${p+1}.zw);
              `,p+1<a&&(i+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${p+1} = vec4(xTexelC${p+1}.xy, final.xy);
                `)):(i+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p+1}Ready == 0) {
                  xTexelC${p+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${p+1}.zw = vec2(0.);
                  }
                  xTexelC${p+1}Ready = 1;
                }

                xC${p} = vec4(
                  xTexelC${p}.xy, xTexelC${p+1}.xy);
              `,p+1<a&&(i+=`
                  xC${p+1} = vec4(xTexelC${p}.zw, xTexelC${p+1}.zw);
                `)));p<a&&(i+=`
            wTexel = getW(r, ${p}, d1, q);
            dotProd += xC${p} * vec4(wTexel.xz, wTexel.xz);
          `,p+1<a&&(i+=`
              wTexel = getW(r, ${p+1}, d1, q);
              dotProd += xC${p+1} * vec4(wTexel.xz, wTexel.xz);
            `))}i+=`
    }
  `,i+=`
      }
    `;let n="",h="";y&&(S?n=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${y}
        }`:C?n=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${y}
        }`:n=`vec4 activation(vec4 x) {
          ${y}
        }`,h="result = activation(result);");const d=f?"result += getBiasAtOutCoords();":"";f&&this.variableNames.push("bias"),S&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${n}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${i}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${d}
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C}=e,{strides:o,pad:x,dilations:t,dimRoundingMode:s}=y;let l=t;l==null&&(l=[1,1]),it(On(o,l),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const a=cn(S.shape,C.shape,o,l,x,s,!0);let r;St().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels===1?r=new g0(a):r=new m0(a);const i=[[a.padInfo.top,a.padInfo.left],[a.strideHeight,a.strideWidth],[a.dilationHeight,a.dilationWidth],[a.inHeight,a.inWidth]];return f.runWebGLProgram(r,[S,C],"float32",i)}const LP={kernelName:uu,backendName:"webgl",kernelFunc:DP};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BP{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const f=e.strideHeight,y=e.strideWidth,S=e.padInfo.top,C=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${f} - ${S};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${y} - ${C};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class $P{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const f=e.filterHeight,y=e.filterWidth,S=e.strideHeight,C=e.strideWidth,o=f-1-e.padInfo.top,x=y-1-e.padInfo.left,t=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${x});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${f}; wR++) {
          float dyR = float(dyRCorner + wR) / ${S}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${f} - 1 - wR;

          for (int wC = 0; wC < ${y}; wC++) {
            float dyC = float(dyCCorner + wC) / ${C}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${y} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${t}; dm++) {
              int d2 = d1 * ${t} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,dy:C}=e,{strides:o,dilations:x,pad:t,dimRoundingMode:s,filterShape:l}=y,a=cn(S.shape,l,o,x,t,s,!0),r=new BP(a);return f.runWebGLProgram(r,[S,C],"float32")}const UP={kernelName:av,backendName:"webgl",kernelFunc:GP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VP(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,filter:C}=e,{strides:o,dilations:x,pad:t,dimRoundingMode:s,inputShape:l}=y,a=cn(l,C.shape,o,x,t,s,!0),r=new $P(a);return f.runWebGLProgram(r,[S,C],"float32")}const zP={kernelName:ov,backendName:"webgl",kernelFunc:VP};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kP{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WP(c){const{inputs:e,backend:f}=c,{x:y}=e,S=[...y.shape,...y.shape],C=bt(y.shape),o=Yt({inputs:{x:y},backend:f,attrs:{shape:[C]}}),x=new kP(C),t=f.runWebGLProgram(x,[o],o.dtype),s=Yt({inputs:{x:t},backend:f,attrs:{shape:S}});return f.disposeIntermediateTensorInfo(o),f.disposeIntermediateTensorInfo(t),s}const XP={kernelName:qh,backendName:"webgl",kernelFunc:WP};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HP{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:f,inWidth:y,padInfo:S,strideHeight:C,strideWidth:o,filterHeight:x,filterWidth:t,dilationHeight:s,dilationWidth:l}=e,{top:a,left:r}=S;this.userCode=`
      const ivec2 strides = ivec2(${C}, ${o});
      const ivec2 pads = ivec2(${a}, ${r});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${x}; h++) {
          int hIn = hBeg + h * ${s};

          if (hIn >= 0 && hIn < ${f}) {
            for (int w = 0; w < ${t}; w++) {
              int wIn = wBeg + w * ${l};

              if (wIn >= 0 && wIn < ${y}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YP(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C}=e,{strides:o,pad:x,dilations:t}=y,s=Ha(S.shape,C.shape,o,x,"NHWC",t);let l;const a=new HP(s);l=f.runWebGLProgram(a,[S,C],"float32");const r=Yt({inputs:{x:l},backend:f,attrs:{shape:s.outShape}});return f.disposeIntermediateTensorInfo(l),r}const KP={kernelName:lu,backendName:"webgl",kernelFunc:YP};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jP(c){const{inputs:e,backend:f,attrs:y}=c,{equation:S}=y,C=e,{allDims:o,summedDims:x,idDims:t}=Eg(S,C.length);bg(o.length,t,C);const{path:s,steps:l}=Ag(x,t),a=l.length;let r=null,i=o.length;const n=[];for(let h=0;h<a;++h){for(const d of l[h]){const{permutationIndices:u,expandDims:p}=wg(i,t[d]);let v;Rg(u)?v=C[d]:(v=wn({inputs:{x:C[d]},backend:f,attrs:{perm:u}}),n.push(v));const m=v.shape.slice();for(let g=0;g<p.length;++g)m.splice(p[g],0,1);je(v.shape,m)||(v=Yt({inputs:{x:v},backend:f,attrs:{shape:m}}),n.push(v)),r===null?r=v:(r=vd({inputs:{a:v,b:r},backend:f}),n.push(r))}h<a-1&&(s[h]>=0&&(r=ll({inputs:{x:r},backend:f,attrs:{axis:s[h]-(o.length-i),keepDims:!1}}),n.push(r)),i--)}for(const h of n)h!==r&&f.disposeIntermediateTensorInfo(h);return r}const ZP={kernelName:hv,backendName:"webgl",kernelFunc:jP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QP="return (x >= 0.0) ? x : (exp(x) - 1.0);",JP=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,qP=be({opSnippet:QP,packedOpSnippet:JP}),_P={kernelName:tf,backendName:"webgl",kernelFunc:qP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t8="return (b >= 0.0) ? a : a * (b + 1.0);",e8=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n8=c=>{const{inputs:e,backend:f}=c,{dy:y,y:S}=e,C=St().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new oa(e8,y.shape,S.shape):new fr(t8,y.shape,S.shape);return f.runWebGLProgram(C,[y,S],y.dtype)},s8={kernelName:ef,backendName:"webgl",kernelFunc:n8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i8=`
  return vec4(equal(a, b));
`,r8="return float(a == b);",a8=pn({opSnippet:r8,packedOpSnippet:i8,dtype:"bool",cpuKernelImpl:GA}),o8={kernelName:sf,backendName:"webgl",kernelFunc:a8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u8=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${gg};
  float a1 = ${xg};
  float a2 = ${yg};
  float a3 = ${Tg};
  float a4 = ${Sg};
  float a5 = ${Cg};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,l8=be({opSnippet:u8}),h8={kernelName:nf,backendName:"webgl",kernelFunc:l8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f8=ua+`
  return exp(x);
`,c8=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,x0=be({opSnippet:f8,packedOpSnippet:c8,cpuKernelImpl:UA,dtype:"float32"}),d8={kernelName:rf,backendName:"webgl",kernelFunc:x0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lh(c){const{inputs:e,attrs:f,backend:y}=c,{dim:S}=f,{input:C}=e,o=C.shape.length,x=C.shape.slice();let t=S;return S<0&&(it(-(o+1)<=S,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),t=o+S+1),x.splice(t,0,1),Yt({inputs:{x:C},backend:y,attrs:{shape:x}})}const p8={kernelName:af,backendName:"webgl",kernelFunc:lh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vp="return exp(x) - 1.0;",v8=be({opSnippet:vp,packedOpSnippet:vp,cpuKernelImpl:VA}),m8={kernelName:of,backendName:"webgl",kernelFunc:v8};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mp{constructor(e,f,y){this.variableNames=["real","imag"];const S=f[1];this.outputShape=f;const C=y?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=y?`${S}.0`:"1.0";let x;if(e==="real")x="return real * expR - imag * expI;";else if(e==="imag")x="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${C};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${x}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${S});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${S}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y0(c,e,f){const y=f.texData.get(c.dataId),S=bt(c.shape),C=c.shape[c.shape.length-1],o=S/C,x=Yt({inputs:{x:c},backend:f,attrs:{shape:[o,C]}}),t=x.shape,s=new mp("real",t,e),l=new mp("imag",t,e),a=[{dataId:y.complexTensorInfos.real.dataId,dtype:y.complexTensorInfos.real.dtype,shape:t},{dataId:y.complexTensorInfos.imag.dataId,dtype:y.complexTensorInfos.imag.dtype,shape:t}],r=f.runWebGLProgram(s,a,"float32"),i=f.runWebGLProgram(l,a,"float32"),n=Di({inputs:{real:r,imag:i},backend:f});f.disposeIntermediateTensorInfo(r),f.disposeIntermediateTensorInfo(i);const h=Yt({inputs:{x:n},backend:f,attrs:{shape:c.shape}});return f.disposeIntermediateTensorInfo(x),f.disposeIntermediateTensorInfo(n),h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8(c){const{inputs:e,backend:f}=c,{input:y}=e;return y0(y,!1,f)}const x8={kernelName:fv,backendName:"webgl",kernelFunc:g8};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8{constructor(e,f){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function no(c){const{backend:e,attrs:f}=c,{shape:y,value:S}=f;let{dtype:C}=f;if(C=C||qr(S),C==="string"){const o=un(C,bt(y));return o.fill(S),e.makeTensorInfo(y,C,o)}else{const o=new y8(y,S),x=[[S]];return e.runWebGLProgram(o,[],C,x)}}const T8={kernelName:uf,backendName:"webgl",kernelFunc:no};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S8{constructor(e){this.variableNames=["Image"],this.outputShape=[];const f=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${f} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${f}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C8={kernelName:hu,backendName:"webgl",kernelFunc:({inputs:c,backend:e})=>{const{image:f}=c,y=e,S=new S8(f.shape);return y.runWebGLProgram(S,[f],f.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gp="return floor(x);",E8=be({opSnippet:gp,packedOpSnippet:gp,cpuKernelImpl:zA}),w8={kernelName:lf,backendName:"webgl",kernelFunc:E8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b8=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,A8=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,R8=pn({opSnippet:b8,packedOpSnippet:A8,dtype:"int32"}),I8={kernelName:hf,backendName:"webgl",kernelFunc:R8};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P8{constructor(e){this.variableNames=["A"];const f=bn(),[y,S]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${S}.0, ${y}.0);

        vec4 values = ${f.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F8{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const f=bn(),[y,S]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${S}.0, ${y}.0);
            vec4 values = ${f.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${f.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M8={kernelName:Vl,backendName:"webgl",kernelFunc:N8};let Mr,wl=St().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function N8(c){const{inputs:e,backend:f,attrs:y}=c;let{pixels:S}=e;const{numChannels:C}=y,o=typeof HTMLVideoElement<"u"&&S instanceof HTMLVideoElement,x=typeof HTMLImageElement<"u"&&S instanceof HTMLImageElement,[t,s]=o?[S.videoWidth,S.videoHeight]:[S.width,S.height],l=[s,t],a=[s,t,C];if(x||o){const h=St().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Mr==null||h!==wl)&&(wl=h,Mr=document.createElement("canvas").getContext("2d",{willReadFrequently:wl})),Mr.canvas.width=t,Mr.canvas.height=s,Mr.drawImage(S,0,0,t,s),S=Mr.canvas}const r=f.makeTensorInfo(l,"int32");f.texData.get(r.dataId).usage=Yn.PIXELS,f.gpgpu.uploadPixelDataToTexture(f.getTexture(r.dataId),S);const i=St().getBool("WEBGL_PACK")?new F8(a):new P8(a),n=f.runWebGLProgram(i,[r],"int32");return f.disposeData(r.dataId),n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C,bias:o,preluActivationWeights:x}=e,{strides:t,pad:s,dataFormat:l,dilations:a,dimRoundingMode:r,activation:i,leakyreluAlpha:n}=y,h=Oi(l),d=cn(S.shape,C.shape,t,a,s,r,!1,h);let u;const p=[],v=o!=null,m=x!=null,g=i==="leakyrelu",T=()=>{const b=[S,C],E=(A,R)=>{if(R==="NCHW"&&A.shape.length===1&&A.shape[0]!==1){const I=Yt({inputs:{x:A},backend:f,attrs:{shape:[A.shape[0],1,1]}});return p.push(I),I}return A};if(v&&b.push(E(o,l)),m&&b.push(E(x,l)),g){const A=f.makeTensorInfo([],"float32",_r(n,"float32"));b.push(A),p.push(A)}return b};if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))u=d0({x:S,filter:C,convInfo:d,backend:f,bias:o,activation:i,preluActivationWeights:x,leakyreluAlpha:n});else if(d.strideWidth<=2&&h==="channelsLast"&&St().getBool("WEBGL_EXP_CONV")){const b=i?Ua(i,!0):null,E=new c0(d,v,b,m,g),A=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]],R=T();u=f.runWebGLProgram(E,R,"float32",A)}else if(St().getBool("WEBGL_CONV_IM2COL"))u=p0({x:S,filter:C,convInfo:d,backend:f,bias:o,activation:i,preluActivationWeights:x,leakyreluAlpha:n});else{const b=i?Ua(i,!1):null,E=new f0(d,v,b,m,g),A=T();u=f.runWebGLProgram(E,A,"float32")}const w=Yt({inputs:{x:u},backend:f,attrs:{shape:d.outShape}});return p.push(u),p.forEach(b=>f.disposeIntermediateTensorInfo(b)),w}const D8={kernelName:Ra,backendName:"webgl",kernelFunc:O8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C,bias:o,preluActivationWeights:x}=e,{strides:t,pad:s,dilations:l,dimRoundingMode:a,activation:r,leakyreluAlpha:i}=y,n=[];let h=l;h==null&&(h=[1,1]),it(On(t,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${h}'`);const d=cn(S.shape,C.shape,t,h,s,a,!0),u=St().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1,p=r?Ua(r,u):null,v=[S,C],m=o!=null,g=x!=null,T=r==="leakyrelu";if(m&&v.push(o),g&&v.push(x),T){const A=f.makeTensorInfo([],"float32",_r(i,"float32"));v.push(A),n.push(A)}let w;u?w=new g0(d,m,p,g,T):w=new m0(d,m,p,g,T);const b=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]],E=f.runWebGLProgram(w,v,"float32",b);return n.forEach(A=>f.disposeIntermediateTensorInfo(A)),E}const B8={kernelName:Ia,backendName:"webgl",kernelFunc:L8};class $8{constructor(e,f,y,S){this.sliceDim=e,this.strides=f,this.paramsShape=S,this.variableNames=["x","indices"],this.outputShape=y;const C=De(y.length);let o=`
    int index;`;for(let x=0;x<this.sliceDim;x++)o+=`
          index = round(getIndices(coords[0], ${x}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[x]};
          flattenIndex += index * ${this.strides[x]};`;this.userCode=`
         void main() {
          ${C} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8(c){const{inputs:e,backend:f}=c,{params:y,indices:S}=e,C=S.shape,o=C[C.length-1],x=bt(y.shape),[t,s,l,a]=Vc(y,S),r=Yt({inputs:{x:S},backend:f,attrs:{shape:[s,o]}}),i=Yt({inputs:{x:y},backend:f,attrs:{shape:[bt(y.shape)/l,l]}});if(f.shouldExecuteOnCPU([y,S])||y.dtype==="string"){const u=f.readSync(S.dataId),p=f.bufferSync(y),v=kA(u,p,y.dtype,s,o,l,a,y.shape,x);return f.makeTensorInfo(t,y.dtype,v.values)}const n=new $8(o,a,[s,l],y.shape),h=f.runWebGLProgram(n,[i,r],i.dtype),d=Yt({inputs:{x:h},backend:f,attrs:{shape:t}});return f.disposeIntermediateTensorInfo(r),f.disposeIntermediateTensorInfo(i),f.disposeIntermediateTensorInfo(h),d}const U8={kernelName:cu,backendName:"webgl",kernelFunc:G8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V8{constructor(e,f){this.variableNames=["A","indices"],this.outputShape=f,this.rank=f.length;const y=De(this.rank),S=z8(e);this.userCode=`
      void main() {
        ${y} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${S}));
      }
    `}}function z8(c,e){const f=["resRC.x","resRC.y","resRC.z","resRC.w"],y=[];for(let S=0;S<c.length;S++)S===2?y.push("index"):y.push(`${f[S]}`);return y.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,indices:C}=e,{axis:o,batchDims:x}=y,t=Qe(o,S.shape)[0];if(St().get("DEBUG")){const p=f.readSync(C.dataId),v=S.shape[t];for(let m=0;m<p.length;++m){const g=p[m];it(g<=v-1&&g>=0,()=>`GatherV2: the index value ${g} is not in [0, ${v-1}]`)}}const s=od(S,C,t,x),l=bt(C.shape),a=[],r=Yt({inputs:{x:S},backend:f,attrs:{shape:[s.batchSize,s.outerSize,s.dimSize,s.sliceSize]}}),i=Yt({inputs:{x:C},backend:f,attrs:{shape:[s.batchSize,l/s.batchSize]}});a.push(r),a.push(i);const n=[s.batchSize,s.outerSize,l/s.batchSize,s.sliceSize];if(f.shouldExecuteOnCPU([S,C])||S.dtype==="string"){const p=f.bufferSync(i),v=f.bufferSync(r),m=WA(v,p,n);return a.forEach(g=>f.disposeIntermediateTensorInfo(g)),f.makeTensorInfo(s.outputShape,m.dtype,m.values)}const h=new V8(r.shape,n),d=f.runWebGLProgram(h,[r,i],r.dtype);a.push(d);const u=Yt({inputs:{x:d},backend:f,attrs:{shape:s.outputShape}});return a.forEach(p=>f.disposeIntermediateTensorInfo(p)),u}const k8={kernelName:ff,backendName:"webgl",kernelFunc:T0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W8="return float(a > b);",X8=`
  return vec4(greaterThan(a, b));
`,H8=pn({opSnippet:W8,packedOpSnippet:X8,cpuKernelImpl:XA,dtype:"bool"}),Y8={kernelName:cf,backendName:"webgl",kernelFunc:H8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K8="return float(a >= b);",j8=`
  return vec4(greaterThanEqual(a, b));
`,Z8=pn({opSnippet:K8,packedOpSnippet:j8,dtype:"bool",cpuKernelImpl:HA}),Q8={kernelName:df,backendName:"webgl",kernelFunc:Z8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J8(c){const{inputs:e,backend:f}=c,{input:y}=e;return y0(y,!0,f)}const q8={kernelName:cv,backendName:"webgl",kernelFunc:J8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _8="return float(!isnan(x) && !isinf(x));",tF=be({opSnippet:_8,dtype:"bool"}),eF={kernelName:pf,backendName:"webgl",kernelFunc:tF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nF="return float(isinf(x));",sF=be({opSnippet:nF,dtype:"bool"}),iF={kernelName:vf,backendName:"webgl",kernelFunc:sF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rF="return float(isnan(x));",aF=be({opSnippet:rF,dtype:"bool"}),oF={kernelName:mf,backendName:"webgl",kernelFunc:aF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uF="return float(a < b);",lF=`
  return vec4(lessThan(a, b));
`,hF=pn({opSnippet:uF,packedOpSnippet:lF,cpuKernelImpl:YA,dtype:"bool"}),fF={kernelName:gf,backendName:"webgl",kernelFunc:hF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cF="return float(a <= b);",dF=`
  return vec4(lessThanEqual(a, b));
`,pF=pn({opSnippet:cF,packedOpSnippet:dF,cpuKernelImpl:KA,dtype:"bool"}),vF={kernelName:xf,backendName:"webgl",kernelFunc:pF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mF(c){const{backend:e,attrs:f}=c,{start:y,stop:S,num:C}=f,o=jA(y,S,C);return e.makeTensorInfo([o.length],"float32",o)}const gF={kernelName:vu,backendName:"webgl",kernelFunc:mF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xF=ua+`
  return x < 0.0 ? 0./0. : log(x);
`,yF=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,TF=be({opSnippet:xF,packedOpSnippet:yF,cpuKernelImpl:ZA}),SF={kernelName:yf,backendName:"webgl",kernelFunc:TF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CF=ua+`
  return log(1.0 + x);
`,EF=be({opSnippet:CF}),wF={kernelName:Tf,backendName:"webgl",kernelFunc:EF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bF="return float(a >= 1.0 && b >= 1.0);",AF=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,RF=pn({opSnippet:bF,packedOpSnippet:AF,dtype:"bool"}),IF={kernelName:Sf,backendName:"webgl",kernelFunc:RF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PF="return float(!(x >= 1.0));",FF=be({opSnippet:PF}),MF={kernelName:Cf,backendName:"webgl",kernelFunc:FF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NF="return float(a >= 1.0 || b >= 1.0);",OF=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,DF=pn({opSnippet:NF,packedOpSnippet:OF,dtype:"bool"}),LF={kernelName:Ef,backendName:"webgl",kernelFunc:DF};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BF{constructor(e,f,y,S,C){this.variableNames=["x"],this.outputShape=[];const o=f,x=e[3]-1;this.outputShape=e;let t;const s=`float(${y}) + float(${S}) * sum`;C===.5?t=`inversesqrt(${s})`:C===1?t=`1.0/(${s})`:t=`exp(log(${s}) * float(-${C}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${x}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${t};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $F{constructor(e,f,y,S,C){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=f,x=e[3]-1;this.outputShape=e;let t;const s=`float(${y}) + float(${S}) * sum`;C===.5?t=`inversesqrt(${s})`:C===1?t=`1.0/(${s})`:t=`exp(log(${s}) * float(-${C}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${x}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${t};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GF=c=>{const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{depthRadius:C,bias:o,alpha:x,beta:t}=y,s=St().getBool("WEBGL_PACK_NORMALIZATION")?new $F(S.shape,C,o,x,t):new BF(S.shape,C,o,x,t);return f.runWebGLProgram(s,[S],S.dtype)},UF={kernelName:mu,backendName:"webgl",kernelFunc:GF};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VF{constructor(e,f,y,S,C){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=f,this.bias=y,this.alpha=S,this.beta=C,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${f})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${f} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${S}) * norm + float(${y});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${S})
                * float(${C})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${C});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zF=c=>{const{inputs:e,backend:f,attrs:y}=c,{x:S,y:C,dy:o}=e,{depthRadius:x,bias:t,alpha:s,beta:l}=y,a=new VF(S.shape,x,t,s,l);return f.runWebGLProgram(a,[S,C,o],S.dtype)},kF={kernelName:wf,backendName:"webgl",kernelFunc:zF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WF(c,e,f,y){const S=bt(e),o=bt(c.shape)/S,x=Yt({inputs:{x:c},attrs:{shape:[o,S]},backend:y}),t=Cr(x,c.dtype,"max",y),s=Yt({inputs:{x:t},attrs:{shape:f},backend:y});return y.disposeIntermediateTensorInfo(x),y.disposeIntermediateTensorInfo(t),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S0(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{reductionIndices:C,keepDims:o}=y,x=S.shape.length,t=Qe(C,S.shape);let s=t;const l=Dn(s,x),a=l!=null,r=f.shouldExecuteOnCPU([S]);let i=S;if(a){if(r){const v=f.texData.get(i.dataId).values,m=new Array(x);for(let w=0;w<m.length;w++)m[w]=S.shape[l[w]];const g=dd(v,S.shape,S.dtype,l,m);i=f.makeTensorInfo(m,S.dtype);const T=f.texData.get(i.dataId);T.values=g}else i=ul(S,l,f);s=dn(s.length,x)}rn("max",s,x);const[n,h]=xn(i.shape,s);let d=n;o&&(d=sn(n,t));let u;if(r){const v=f.texData.get(i.dataId).values,m=QA(v,bt(h),d,S.dtype);u=f.makeTensorInfo(d,S.dtype);const g=f.texData.get(u.dataId);g.values=m}else u=WF(i,h,d,f);return a&&f.disposeIntermediateTensorInfo(i),u}const XF={kernelName:gu,backendName:"webgl",kernelFunc:S0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HF=pd+`
  return max(a, b);
`,YF=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Sr+`
  return result;
`,KF=pn({opSnippet:HF,packedOpSnippet:YF,cpuKernelImpl:JA}),jF={kernelName:bf,backendName:"webgl",kernelFunc:KF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZF(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e;_a(S,"maxPool");const{filterSize:C,strides:o,pad:x,dimRoundingMode:t}=y,s=1;it(On(o,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const l=hs(S.shape,C,o,s,x,t);if(l.filterWidth===1&&l.filterHeight===1&&je(l.inShape,l.outShape))return Vn({inputs:{x:S},backend:f});const a=new Va(l,"max",!1);return f.runWebGLProgram(a,[S],S.dtype)}const QF={kernelName:xu,backendName:"webgl",kernelFunc:ZF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JF(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{filterSize:C,strides:o,pad:x,dataFormat:t,dimRoundingMode:s}=y,l=[1,1,1],a=ti(S.shape,C,o,l,x,s,t),r=new md(a,"max",!1);return f.runWebGLProgram(r,[S],S.dtype)}const qF={kernelName:Af,backendName:"webgl",kernelFunc:JF};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _F{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const f=e.strideHeight,y=e.strideWidth,S=e.dilationHeight,C=e.effectiveFilterHeight,o=e.effectiveFilterWidth,x=C-1-e.padInfo.top,t=o-1-e.padInfo.left,s=C*o-1;this.userCode=`
      const ivec2 pads = ivec2(${x}, ${t});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${C};
          wR += ${S}) {
          float dyR = float(dyRCorner + wR) / ${f}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${y}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${s} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class t7{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const f=e.strideDepth,y=e.strideHeight,S=e.strideWidth,C=e.dilationDepth,o=e.dilationHeight,x=e.dilationWidth,t=e.effectiveFilterDepth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,a=t-1-e.padInfo.front,r=s-1-e.padInfo.top,i=l-1-e.padInfo.left,n=t*s*l-1;this.userCode=`
      const ivec3 pads = ivec3(${a}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${t};
           wD += ${C}) {
          float dyD = float(dyDCorner + wD) / ${f}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${s};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${y}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${l};
                wC += ${x}) {
              float dyC = float(dyCCorner + wC) / ${S}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${n} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${s} * ${l} +
                  wR * ${l} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,input:C}=e,o=C,{filterSize:x,strides:t,pad:s,dimRoundingMode:l}=y,a=[1,1,1],r=ti(o.shape,x,t,a,s,l),i=new md(r,"max",!0),n=f.runWebGLProgram(i,[o],o.dtype),h=new t7(r),d=f.runWebGLProgram(h,[S,n],o.dtype);return f.disposeIntermediateTensorInfo(n),d}const n7={kernelName:vv,backendName:"webgl",kernelFunc:e7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,input:C,output:o}=e,x=C;_a([C,o],"maxPoolGrad");const{filterSize:t,strides:s,pad:l,dimRoundingMode:a}=y,r=hs(x.shape,t,s,1,l,a),i=!0,n=new Va(r,"max",i),h=f.runWebGLProgram(n,[x],x.dtype),d=new _F(r),u=f.runWebGLProgram(d,[S,h],x.dtype);return f.disposeIntermediateTensorInfo(h),u}const i7={kernelName:pv,backendName:"webgl",kernelFunc:s7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7(c,e,f,y){let S=new Va(f,"max",!1);const C=y.runWebGLProgram(S,[c],"float32");S=new Va(f,"max",!0,!0,e);const o=y.runWebGLProgram(S,[c],"float32");return[C,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a7={kernelName:Rf,backendName:"webgl",kernelFunc:({inputs:c,attrs:e,backend:f})=>{const{x:y}=c,{filterSize:S,strides:C,pad:o,includeBatchInIndex:x}=e,t=f;it(y.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${y.shape.length}.`);const s=[1,1];it(On(C,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${C} and dilations '${s}'`);const l=hs(y.shape,S,C,s,o),[a,r]=r7(y,x,l,t);return[a,r]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7(c,e,f,y){const S=bt(e),o=bt(c.shape)/S,x=Yt({inputs:{x:c},attrs:{shape:[o,S]},backend:y}),t=Cr(x,"float32","mean",y),s=Yt({inputs:{x:t},attrs:{shape:f},backend:y});return y.disposeIntermediateTensorInfo(x),y.disposeIntermediateTensorInfo(t),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u7={kernelName:yu,backendName:"webgl",kernelFunc:({inputs:c,attrs:e,backend:f})=>{const{x:y}=c,{keepDims:S,axis:C}=e,o=f,x=y.shape.length,t=Qe(C,y.shape);let s=t;const l=Dn(s,x),a=l!=null,r=o.shouldExecuteOnCPU([y]),i=[];let n=y;if(a){if(r){const m=o.texData.get(n.dataId).values,g=new Array(x);for(let b=0;b<g.length;b++)g[b]=y.shape[l[b]];const T=dd(m,y.shape,y.dtype,l,g);n=o.makeTensorInfo(g,y.dtype);const w=o.texData.get(n.dataId);w.values=T}else n=ul(y,l,o);i.push(n),s=dn(s.length,x)}rn("sum",s,x);const[h,d]=xn(n.shape,s);let u=h;S&&(u=sn(h,t));const p=o7(n,d,u,o);for(const v of i)o.disposeIntermediateTensorInfo(v);return p}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C,keepDims:o}=y,x=S.shape.length,t=Qe(C,S.shape);let s=t;const l=Dn(s,x);let a=S;l!=null&&(a=wn({inputs:{x:S},backend:f,attrs:{perm:l}}),s=dn(s.length,S.shape.length)),rn("min",s,x);const[r,i]=xn(a.shape,s),n=bt(i),h=Yt({inputs:{x:a},backend:f,attrs:{shape:[-1,n]}}),d=Cr(h,h.dtype,"min",f);let u;if(o){const p=sn(r,t);u=Yt({inputs:{x:d},backend:f,attrs:{shape:p}})}else u=Yt({inputs:{x:d},backend:f,attrs:{shape:r}});return f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(d),l!=null&&f.disposeIntermediateTensorInfo(a),u}const h7={kernelName:Tu,backendName:"webgl",kernelFunc:l7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f7=pd+`
  return min(a, b);
`,c7=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Sr+`
  return result;
`,d7=pn({opSnippet:f7,packedOpSnippet:c7,cpuKernelImpl:qA}),p7={kernelName:If,backendName:"webgl",kernelFunc:d7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v7{constructor(e,f,y){this.variableNames=["x"],this.outputShape=f.map((l,a)=>l[0]+e[a]+l[1]);const S=e.length,C=De(S),o=f.map(l=>l[0]).join(","),x=f.map((l,a)=>l[0]+e[a]).join(","),t=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,S),s=y==="reflect"?0:1;if(S===1){this.userCode=`
        int start = ${o};
        int end = ${x};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${s};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${s};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${C} start = ${C}(${o});
      ${C} end = ${C}(${x});

      void main() {
        ${C} outC = getOutputCoords();
        for (int i = 0; i < ${S}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${s};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${s};
          }
        }
        ${C} coords = outC - start;
        setOutput(getX(${t}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m7{constructor(e,f,y){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=f.map((n,h)=>n[0]+e[h]+n[1]);const S=e.length,C=De(S),o=f.map(n=>n[0]).join(","),x=f.map((n,h)=>n[0]+e[h]).join(","),t=En("rc",S),s=En("source",S),l=`${t[S-1]} < ${this.outputShape[S-1]}`,a=S===1?"source":`vec2(${s.slice(-2).join()})`,r=y==="reflect"?0:1;let i="";if(S===1){const n=`
        ${C} source = rc;
        if (source < start) {
          source = start * 2 - source - ${r};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${r};
        }
        source -= start;
      `;i=`
        ${C} rc = outputLoc;
        ${n}
        result[0] = getChannel(getX(${s.join()}), ${a});
        ${t[S-1]} += 1;
        if(${l}) {
          ${n}
          result[1] = getChannel(getX(${s.join()}), ${a});
        }
      `}else{const n=`
        ${C} source = rc;
        ${C} lt = ${C}(lessThan(source, start));
        ${C} gte = ${C}(greaterThanEqual(source, end));
        ${C} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${r}) +
                gte * ((end - 1) * 2 - source + ${r});
        source -= start;
      `;i=`
        ${C} rc = outputLoc;
        ${n}
        result[0] = getChannel(getX(${s.join()}), ${a});
        ${t[S-1]} += 1;
        if(${l}) {
          ${n}
          result[1] = getChannel(getX(${s.join()}), ${a});
        }
        rc = outputLoc;
        ${t[S-2]} += 1;
        if(${t[S-2]} < ${this.outputShape[S-2]}) {
          ${n}
          result[2] = getChannel(getX(${s.join()}), ${a});
          ${t[S-1]} += 1;
          if(${l}) {
            ${n}
            result[3] = getChannel(getX(${s.join()}), ${a});
          }
        }
      `}this.userCode=`
      const ${C} start = ${C}(${o});
      const ${C} end = ${C}(${x});

      void main() {
        ${C} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${i}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g7=({inputs:c,backend:e,attrs:f})=>{const{x:y}=c,{paddings:S,mode:C}=f,o=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new m7(y.shape,S,C):new v7(y.shape,S,C);return e.runWebGLProgram(o,[y],y.dtype)},x7={kernelName:Su,backendName:"webgl",kernelFunc:g7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y7=`if (b == 0.0) return NAN;
  return mod(a, b);`,T7=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Sr+`
  return result;
`,S7=pn({opSnippet:y7,packedOpSnippet:T7}),C7={kernelName:Pf,backendName:"webgl",kernelFunc:S7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E7{constructor(e,f,y){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,y],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${f-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${f-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w7=`
if (a == b) {
  return 1.0;
};
return a / b;`,b7=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,C0=pn({opSnippet:w7,packedOpSnippet:b7,checkOutOfBounds:!0}),A7={kernelName:_h,backendName:"webgl",kernelFunc:C0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xp="return a - b;",E0=pn({opSnippet:xp,packedOpSnippet:xp,supportsComplex:!0,cpuKernelImpl:yR}),R7={kernelName:lc,backendName:"webgl",kernelFunc:E0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w0(c){const{inputs:e,backend:f,attrs:y}=c,{logits:S}=e,{dim:C}=y,o=Qe([C],S.shape),x=S0({inputs:{x:S},backend:f,attrs:{reductionIndices:o,keepDims:!1}}),t=sn(x.shape,o),s=Yt({inputs:{x},backend:f,attrs:{shape:t}}),l=E0({inputs:{a:S,b:s},backend:f}),a=x0({inputs:{x:l},backend:f}),r=ll({inputs:{x:a},backend:f,attrs:{axis:o,keepDims:!1}}),i=Yt({inputs:{x:r},backend:f,attrs:{shape:t}}),n=C0({inputs:{a,b:i},backend:f});return f.disposeIntermediateTensorInfo(x),f.disposeIntermediateTensorInfo(s),f.disposeIntermediateTensorInfo(l),f.disposeIntermediateTensorInfo(a),f.disposeIntermediateTensorInfo(r),f.disposeIntermediateTensorInfo(i),n}const I7={kernelName:$u,backendName:"webgl",kernelFunc:w0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P7(c){const{inputs:e,backend:f,attrs:y}=c,{logits:S}=e,{numSamples:C,seed:o,normalized:x}=y,t=x?S:w0({inputs:{logits:S},backend:f,attrs:{dim:S.shape.length-1}}),s=t.shape[0],l=t.shape[1],a=new E7(s,l,C),r=[[o]],i=f.runWebGLProgram(a,[t],"int32",r);return x||f.disposeIntermediateTensorInfo(t),i}const F7={kernelName:Cu,backendName:"webgl",kernelFunc:P7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M7=cs+`
  return -x;
`,N7=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function O7(c){const{inputs:e,backend:f}=c,{x:y}=e;if(f.shouldExecuteOnCPU([y])){const C=f.texData.get(y.dataId),[o,x]=tR(C.values,y.shape,y.dtype);return f.makeTensorInfo(x,y.dtype,o)}let S;return St().getBool("WEBGL_PACK_UNARY_OPERATIONS")?S=new yi(y.shape,N7):S=new Ps(y.shape,M7),f.runWebGLProgram(S,[y],y.dtype)}const D7={kernelName:Mf,backendName:"webgl",kernelFunc:O7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L7=Xm;function B7(c){xs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:f,attrs:y}=c,{boxes:S,scores:C}=e,{maxOutputSize:o,iouThreshold:x,scoreThreshold:t}=y,s=f.readSync(S.dataId),l=f.readSync(C.dataId),{selectedIndices:a}=L7(s,l,o,x,t);return f.makeTensorInfo([a.length],"int32",new Int32Array(a))}const $7={kernelName:Eu,backendName:"webgl",kernelFunc:B7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G7=Hm;function U7(c){xs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:f,attrs:y}=c,{boxes:S,scores:C}=e,{maxOutputSize:o,iouThreshold:x,scoreThreshold:t,padToMaxOutputSize:s}=y,l=f.readSync(S.dataId),a=f.readSync(C.dataId),{selectedIndices:r,validOutputs:i}=G7(l,a,o,x,t,s);return[f.makeTensorInfo([r.length],"int32",new Int32Array(r)),f.makeTensorInfo([],"int32",new Int32Array([i]))]}const V7={kernelName:wu,backendName:"webgl",kernelFunc:U7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z7=Ym;function k7(c){xs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:f,attrs:y}=c,{boxes:S,scores:C}=e,{maxOutputSize:o,iouThreshold:x,scoreThreshold:t,softNmsSigma:s}=y,l=f.readSync(S.dataId),a=f.readSync(C.dataId),r=o,i=x,n=t,h=s,{selectedIndices:d,selectedScores:u}=z7(l,a,r,i,n,h);return[f.makeTensorInfo([d.length],"int32",new Int32Array(d)),f.makeTensorInfo([u.length],"float32",new Float32Array(u))]}const W7={kernelName:bu,backendName:"webgl",kernelFunc:k7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X7{constructor(e,f,y,S){this.variableNames=["indices"],this.outputShape=[e,f],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${S}), float(${y}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H7=c=>{const{inputs:e,backend:f,attrs:y}=c,{indices:S}=e,{dtype:C,depth:o,onValue:x,offValue:t}=y,s=bt(S.shape),l=new X7(s,o,x,t),a=Yt({inputs:{x:S},backend:f,attrs:{shape:[s]}}),r=f.runWebGLProgram(l,[a],C);f.disposeIntermediateTensorInfo(a);const i=[...S.shape,o],n=Yt({inputs:{x:r},backend:f,attrs:{shape:i}});return f.disposeIntermediateTensorInfo(r),n},Y7={kernelName:Au,backendName:"webgl",kernelFunc:H7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Go(c){const{inputs:e,backend:f}=c,{x:y}=e;if(y.dtype==="complex64"){const S=eo({inputs:{input:y},backend:f}),C=Go({inputs:{x:S},backend:f}),o=hl({inputs:{input:y},backend:f}),x=Go({inputs:{x:o},backend:f}),t=Di({inputs:{real:C,imag:x},backend:f});return f.disposeIntermediateTensorInfo(S),f.disposeIntermediateTensorInfo(C),f.disposeIntermediateTensorInfo(o),f.disposeIntermediateTensorInfo(x),t}else return no({attrs:{shape:y.shape,dtype:y.dtype,value:y.dtype==="string"?"":0},backend:f})}const K7={kernelName:pc,backendName:"webgl",kernelFunc:Go};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b0(c){const{inputs:e,backend:f}=c,{x:y}=e;if(y.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(y.dtype==="complex64"){const S=eo({inputs:{input:y},backend:f}),C=b0({inputs:{x:S},backend:f}),o=hl({inputs:{input:y},backend:f}),x=Go({inputs:{x:o},backend:f}),t=Di({inputs:{real:C,imag:x},backend:f});return f.disposeIntermediateTensorInfo(S),f.disposeIntermediateTensorInfo(C),f.disposeIntermediateTensorInfo(o),f.disposeIntermediateTensorInfo(x),t}else return no({attrs:{shape:y.shape,dtype:y.dtype,value:1},backend:f})}const j7={kernelName:Of,backendName:"webgl",kernelFunc:b0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7(c){const{inputs:e,backend:f,attrs:y}=c,{axis:S}=y;if(e.length===1)return lh({inputs:{input:e[0]},backend:f,attrs:{dim:S}});const C=e[0].shape,o=e[0].dtype;e.forEach(l=>{zn(C,l.shape,"All tensors passed to stack must have matching shapes"),it(o===l.dtype,()=>"All tensors passed to stack must have matching dtypes")});const x=[],t=e.map(l=>{const a=lh({inputs:{input:l},backend:f,attrs:{dim:S}});return x.push(a),a}),s=h0({inputs:t,backend:f,attrs:{axis:S}});return x.forEach(l=>f.disposeIntermediateTensorInfo(l)),s}const Q7={kernelName:Df,backendName:"webgl",kernelFunc:Z7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J7{constructor(e,f,y){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=f.map((s,l)=>s[0]+e[l]+s[1]);const S=e.length,C=De(S),o=f.map(s=>s[0]).join(","),x=f.map((s,l)=>s[0]+e[l]).join(","),t=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,S);if(S===1){this.userCode=`
        int start = ${o};
        int end = ${x};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${C} start = ${C}(${o});
      ${C} end = ${C}(${x});

      void main() {
        ${C} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${C} coords = outC - start;
          setOutput(getX(${t}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q7{constructor(e,f,y){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=f.map((h,d)=>h[0]+e[d]+h[1]);const S=e.length,C=De(S),o=f.map(h=>h[0]).join(","),x=f.map((h,d)=>h[0]+e[d]).join(","),t=En("rc",S),s=En("source",S),l=`${t[S-1]} < ${this.outputShape[S-1]}`,a=S===1?"source":`vec2(${s.slice(-2).join()})`,r=[`${C} rc = outputLoc;`,`${t[S-1]} += 1;
       if(${l}) {
      `,S===1?"":`}
       rc = outputLoc;
       ${t[S-2]} += 1;
       if(${t[S-2]} < ${this.outputShape[S-2]}) {`,S===1?"":`  ${t[S-1]} += 1;
         if(${l}) {`],i=S===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let n="";for(let h=0,d=S===1?2:4;h<d;h++)n+=`
        ${r[h]}
        if (${i}) {
          result[${h}] = float(value);
        } else {
          ${C} source = rc - start;
          result[${h}] = getChannel(getX(${s.join()}), ${a});
        }
      `;n+=S===1?"} ":"}}",this.userCode=`
      const ${C} start = ${C}(${o});
      const ${C} end = ${C}(${x});

      void main() {
        ${C} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${n}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A0=c=>{const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{paddings:C,constantValue:o}=y;if(bt(S.shape)===0){const s=C.map((l,a)=>l[0]+S.shape[a]+l[1]);return no({backend:f,attrs:{shape:s,value:o,dtype:S.dtype}})}const x=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new q7(S.shape,C,o):new J7(S.shape,C,o),t=[[o]];return f.runWebGLProgram(x,[S],S.dtype,t)},_7={kernelName:Ru,backendName:"webgl",kernelFunc:A0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tM=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,eM=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Sr+`
  return result;
`,nM=pn({opSnippet:tM,packedOpSnippet:eM}),sM={kernelName:Lf,backendName:"webgl",kernelFunc:nM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iM(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C,keepDims:o}=y,x=S.shape.length,t=[],s=Qe(C,S.shape);let l=s;const a=Dn(l,x);let r=S;a!=null&&(r=wn({inputs:{x:S},backend:f,attrs:{perm:a}}),l=dn(l.length,x),t.push(r)),rn("prod",l,x);let i;if(f.shouldExecuteOnCPU([r])){const n=f.texData.get(r.dataId).values,{outVals:h,outShape:d,outDtype:u}=nR(r.shape,r.dtype,n,l);i=f.makeTensorInfo(d,u,h)}else{const[n,h]=xn(r.shape,l),d=bt(h),u=Yt({inputs:{x:r},backend:f,attrs:{shape:[-1,d]}}),p=mc(S.dtype),v=Cr(u,p,"prod",f);i=Yt({inputs:{x:v},backend:f,attrs:{shape:n}}),t.push(u),t.push(v)}if(o){t.push(i);const n=sn(i.shape,s);i=Yt({inputs:{x:i},backend:f,attrs:{shape:n}})}return t.forEach(n=>f.disposeIntermediateTensorInfo(n)),i}const rM={kernelName:Pu,backendName:"webgl",kernelFunc:iM};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aM(c){const{inputs:e,backend:f,attrs:y}=c,{paramsNestedSplits:S,paramsDenseValues:C,indices:o}=e,{outputRaggedRank:x}=y,t=S.map(u=>f.readSync(u.dataId)),s=S.map(u=>u.shape),l=f.readSync(C.dataId),a=f.readSync(o.dataId),[r,i,n]=sR(t,s,l,C.shape,C.dtype,a,o.shape,x),h=r.map(u=>f.makeTensorInfo([u.length],"int32",u)),d=f.makeTensorInfo(n,C.dtype,i);return h.concat([d])}const oM={kernelName:mv,backendName:"webgl",kernelFunc:aM};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uM(c){const{inputs:e,backend:f}=c,{starts:y,limits:S,deltas:C}=e,o=f.readSync(y.dataId),x=f.readSync(S.dataId),t=f.readSync(C.dataId),[s,l]=iR(o,y.shape,y.dtype,x,S.shape,t,C.shape),a=f.makeTensorInfo([s.length],"int32",s),r=f.makeTensorInfo([l.length],y.dtype,l);return[a,r]}const lM={kernelName:gv,backendName:"webgl",kernelFunc:uM};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hM(c){const{inputs:e,backend:f,attrs:y}=c,{shape:S,values:C,defaultValue:o,rowPartitionTensors:x}=e,{rowPartitionTypes:t}=y,s=f.readSync(S.dataId),l=f.readSync(C.dataId),a=f.readSync(o.dataId),r=x.map(d=>f.readSync(d.dataId)),i=x.map(d=>d.shape),[n,h]=rR(s,S.shape,l,C.shape,C.dtype,a,o.shape,r,i,t);return f.makeTensorInfo(n,C.dtype,h)}const fM={kernelName:xv,backendName:"webgl",kernelFunc:hM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R0=c=>{const{backend:e,attrs:f}=c,{start:y,stop:S,step:C,dtype:o}=f,x=aR(y,S,C,o);return e.makeTensorInfo([x.length],o,x)},cM={kernelName:Bf,backendName:"webgl",kernelFunc:R0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dM="return 1.0 / x;",pM=be({opSnippet:dM}),vM={kernelName:$f,backendName:"webgl",kernelFunc:pM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mM=cs+`
  return (x < 0.0) ? 0.0 : x;
`,gM=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xM=be({opSnippet:mM,packedOpSnippet:gM}),yM={kernelName:Gf,backendName:"webgl",kernelFunc:xM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TM=cs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,SM=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,CM=be({opSnippet:TM,packedOpSnippet:SM}),EM={kernelName:kf,backendName:"webgl",kernelFunc:CM};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wM{constructor(e,f,y,S,C){this.variableNames=["A"],this.outputShape=[];const[o,x,t,s]=e;this.outputShape=[o,f,y,s];const l=[S&&f>1?x-1:x,S&&y>1?t-1:t],a=[S&&f>1?f-1:f,S&&y>1?y-1:y];let r;C?r="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":r="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${l[0]/a[0]},
          ${l[1]/a[1]});
      const vec2 inputShapeRC = vec2(${x}.0, ${t}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${r};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bM{constructor(e,f,y,S,C){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,x,t,s]=e;this.outputShape=[o,f,y,s];const l=[S&&f>1?x-1:x,S&&y>1?t-1:t],a=[S&&f>1?f-1:f,S&&y>1?y-1:y];let r;C?r="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":r="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${l[0]/a[0]},
          ${l[1]/a[1]},
          ${l[1]/a[1]});
      const vec3 inputShapeRC = vec3(${x}.0, ${t}.0,
                                     ${t}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${r};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${s-1};
        bool hasNextRow = coords.z < ${y-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AM(c){const{inputs:e,backend:f,attrs:y}=c,{images:S}=e,{alignCorners:C,halfPixelCenters:o,size:x}=y,[t,s]=x,l=St().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bM(S.shape,t,s,C,o):new wM(S.shape,t,s,C,o);return f.runWebGLProgram(l,[S],"float32")}const RM={kernelName:Mu,backendName:"webgl",kernelFunc:AM};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IM{constructor(e,f,y){this.variableNames=["dy"],this.outputShape=[],this.outputShape=f;const[,S,C]=f,[,o,x]=e,t=[y&&o>1?S-1:S,y&&x>1?C-1:C],s=[y&&o>1?o-1:o,y&&x>1?x-1:x],l=t[0]/s[0],a=t[1]/s[1],r=1/l,i=1/a,n=Math.ceil(r)*2+2,h=Math.ceil(i)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${l});
        const float widthScale = float(${a});

        const float invHeightScale = float(${r});
        const float invWidthScale = float(${i});

        const int winHeight = int(${n});
        const int winWidth = int(${h});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${x}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${S-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${C-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PM(c){const{inputs:e,backend:f,attrs:y}=c,{images:S,dy:C}=e,{alignCorners:o}=y,x=new IM(C.shape,S.shape,o);return f.runWebGLProgram(x,[C],C.dtype)}const FM={kernelName:zf,backendName:"webgl",kernelFunc:PM};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MM{constructor(e,f,y,S,C){this.variableNames=["A"],this.outputShape=[];const[o,x,t,s]=e;this.outputShape=[o,f,y,s];const l=[S&&f>1?x-1:x,S&&y>1?t-1:t],a=[S&&f>1?f-1:f,S&&y>1?y-1:y],r=S?"0.5":"0.0";let i;C?i="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":i="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${l[0]/a[0]},
          ${l[1]/a[1]});
      const vec2 inputShapeRC = vec2(${x}.0, ${t}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${i};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NM{constructor(e,f,y,S,C){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,x,t,s]=e;this.outputShape=[o,f,y,s];const l=[S&&f>1?x-1:x,S&&y>1?t-1:t],a=[S&&f>1?f-1:f,S&&y>1?y-1:y],r=S?"0.5":"0.0";let i;C?i="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":i="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${l[0]/a[0]},
          ${l[1]/a[1]},
          ${l[1]/a[1]});
      const vec3 inputShapeRC = vec3(${x}.0, ${t}.0,
                                     ${t}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${i};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${s-1};
        bool hasNextRow = coords.z < ${y-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OM(c){const{inputs:e,backend:f,attrs:y}=c,{images:S}=e,{alignCorners:C,halfPixelCenters:o,size:x}=y,[t,s]=x,l=St().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new NM(S.shape,t,s,C,o):new MM(S.shape,t,s,C,o);return f.runWebGLProgram(l,[S],S.dtype)}const DM={kernelName:Fu,backendName:"webgl",kernelFunc:OM};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LM{constructor(e,f,y){this.variableNames=["dy"],this.outputShape=[],this.outputShape=f;const[,S,C]=f,[,o,x]=e,t=[y&&o>1?S-1:S,y&&x>1?C-1:C],s=[y&&o>1?o-1:o,y&&x>1?x-1:x],l=t[0]/s[0],a=t[1]/s[1],r=1/l,i=1/a,n=Math.ceil(r)*2+2,h=Math.ceil(i)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${l});
        const float widthScale = float(${a});

        const float invHeightScale = float(${r});
        const float invWidthScale = float(${i});

        const int winHeight = int(${n});
        const int winWidth = int(${h});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${x}) {
              continue;
            }

            float sourceFracRow =
              float(${t[0]}) *
                (float(dyR) / float(${s[0]}));

            float sourceFracCol =
                float(${t[1]}) *
                  (float(dyC) / float(${s[1]}));

            int sourceNearestRow = int(min(
                float(int(${S}) - 1),
                ${y} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${C}) - 1),
                ${y} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BM(c){const{inputs:e,backend:f,attrs:y}=c,{images:S,dy:C}=e,{alignCorners:o}=y,x=new LM(C.shape,S.shape,o);return f.runWebGLProgram(x,[C],C.dtype)}const $M={kernelName:Vf,backendName:"webgl",kernelFunc:BM};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GM{constructor(e,f){this.variableNames=["x"];const y=e.length;if(y>4)throw new Error(`WebGL backend: Reverse of rank-${y} tensor is not yet supported`);if(this.outputShape=e,y===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const S=x=>f.indexOf(x)!==-1&&e[x]!==1?`${e[x]} - coords[${x}] - 1`:`coords[${x}]`,C=e.map((x,t)=>S(t)).join(","),o=De(y);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${C}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UM{constructor(e,f){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const y=e.length;if(y>4)throw new Error(`WebGL backend: Reverse of rank-${y} tensor is not yet supported`);this.outputShape=e;const S=En("rc",y),C=`${S[y-1]} + 1 < ${this.outputShape[y-1]}`,o=`${S[y-2]} + 1 < ${this.outputShape[y-2]}`,x=De(y);y===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${C}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${x} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${t(S.slice())};
          if(${C}){
            result.g = ${s(S.slice())};
          }
          if(${o}) {
            result.b = ${l(S.slice())};
            if(${C}) {
              result.a = ${a(S.slice())};
            }
          }
          setOutput(result);
        }
    `;function t(n){return r(n)}function s(n){return n[y-1]="("+n[y-1]+" + 1)",r(n)}function l(n){return n[y-2]="("+n[y-2]+" + 1)",r(n)}function a(n){return n[y-1]="("+n[y-1]+" + 1)",n[y-2]="("+n[y-2]+" + 1)",r(n)}function r(n){const h=e.map((p,v)=>i(v,n)),d=h.join(","),u=h.slice(-2).join(",");return`getChannel(getX(${d}), vec2(${u}))`}function i(n,h){return f.indexOf(n)!==-1&&e[n]!==1?`${e[n]} - ${h[n]} - 1`:`${h[n]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VM(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{dims:C}=y,o=S.shape.length,x=Qe(C,S.shape);if(o===0)return Vn({inputs:{x:S},backend:f});const t=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UM(S.shape,x):new GM(S.shape,x);return f.runWebGLProgram(t,[S],S.dtype)}const zM={kernelName:Nu,backendName:"webgl",kernelFunc:VM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kM{constructor(e,f){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const y=e[1],S=e[2];this.outputShape=e;let C="";typeof f=="number"?C=`float outputValue = ${f.toFixed(2)};`:C=`
        vec3 fill = vec3(${f.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${C}
          if(coordX >= 0 && coordX < ${S} && coordY >= 0 && coordY < ${y}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WM={kernelName:Xu,backendName:"webgl",kernelFunc:({inputs:c,attrs:e,backend:f})=>{const{image:y}=c,{radians:S,fillValue:C,center:o}=e,x=f,t=new kM(y.shape,C),[s,l]=Yc(o,y.shape[1],y.shape[2]),a=[[s,l,Math.sin(S),Math.cos(S)]];return x.runWebGLProgram(t,[y],y.dtype,a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XM=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,HM=be({opSnippet:XM}),YM={kernelName:Wf,backendName:"webgl",kernelFunc:HM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KM="return inversesqrt(x);",jM=be({opSnippet:KM,cpuKernelImpl:oR}),ZM={kernelName:Xf,backendName:"webgl",kernelFunc:jM};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gd{constructor(e,f,y,S,C,o,x=!0,t=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=De(C.length),l=De(o.length);let a="";y===1?a="i":y===2&&(a="i, j");const r=`getIndices(${a})`;let i="";S===1?i="i":S===2&&(i="i, coords[1]");const n=`getUpdates(${i})`;let h="";t&&(h="coords[0], coords[1]");const d=`getDefaultValue(${h})`,u=f>1?"strides[j]":"strides";this.userCode=`
        ${s} strides = ${s}(${C});

        void main() {
          ${l} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${f}; j++) {
              int index = round(${r});
              flattenedIndex += index * ${u};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${n};
              found = true;
            }
          }
          setOutput(mix(${d}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QM{constructor(e,f,y,S,C,o,x=!0,t=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const s=De(C.length),l=De(o.length);let a="";y===1?a="i":y===2&&(a="i, j");const r=`getIndices(${a})`;let i="";S===1?i="i":S===2&&(i="i, coords[1]");const n=`getUpdates(${i})`;let h="";t&&(h="coords[0], coords[1]");const d=`getDefaultValue(${h})`,u=f>1?"strides[j]":"strides",p=f>1?"strides[j + 1]":"strides";this.userCode=`
        ${s} strides = ${s}(${C});

        void main() {
          ${l} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${f}; j+=2) {
              ivec4 index = round(${r});
              flattenedIndex += index.xz * ${u};
              if (j + 1 < ${f}) {
                flattenedIndex += index.yw * ${p};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${n};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${d}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JM(c){const{inputs:e,backend:f,attrs:y}=c,{indices:S,updates:C}=e,{shape:o}=y,{sliceRank:x,numUpdates:t,sliceSize:s,strides:l,outputSize:a}=mr(C,S,o),r=[a/s,s];if(a===0)return f.makeTensorInfo(o,S.dtype);const i=Yt({inputs:{x:S},backend:f,attrs:{shape:[t,x]}}),n=Yt({inputs:{x:C},backend:f,attrs:{shape:[t,s]}}),h=f.makeTensorInfo([],"float32",new Float32Array([0]));let d;St().getBool("WEBGL_PACK")?d=new QM(t,x,i.shape.length,n.shape.length,l,r):d=new gd(t,x,i.shape.length,n.shape.length,l,r);const u=f.runWebGLProgram(d,[n,i,h],n.dtype),p=Yt({inputs:{x:u},backend:f,attrs:{shape:o}});return f.disposeIntermediateTensorInfo(i),f.disposeIntermediateTensorInfo(n),f.disposeIntermediateTensorInfo(u),f.disposeIntermediateTensorInfo(h),p}const qM={kernelName:Ou,backendName:"webgl",kernelFunc:JM};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _M{constructor(e,f,y,S){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,y];const C="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(f+1))}; ++i) { if (left >= right) break;`,x=St().getNumber("WEBGL_VERSION")===2?C:o,t=S==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${x}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${t} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tN(c){const{inputs:e,backend:f,attrs:y}=c,{sortedSequence:S,values:C}=e,{side:o}=y,x=new _M(S.shape[0],S.shape[1],C.shape[1],o),t=[[S.shape[1]]];return f.runWebGLProgram(x,[S,C],"int32",t)}const eN={kernelName:Lu,backendName:"webgl",kernelFunc:tN};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nN{constructor(e,f,y){this.variableNames=["c","a","b"],this.outputShape=f;let S,C;if(y>4)throw Error(`Where for rank ${y} is not yet supported`);if(y===1)C="resRC",S="resRC";else{const x=["resRC.x","resRC.y","resRC.z","resRC.w"],t=[],s=[];for(let l=0;l<f.length;l++)s.push(`${x[l]}`),l<e&&t.push(`${x[l]}`);S=t.join(),C=s.join()}const o=De(y);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${S});
        if (cVal >= 1.0) {
          setOutput(getA(${C}));
        } else {
          setOutput(getB(${C}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sN(c){const{inputs:e,backend:f}=c,{condition:y,t:S,e:C}=e,o=new nN(y.shape.length,S.shape,S.shape.length);return f.runWebGLProgram(o,[y,S,C],Ns(S.dtype,C.dtype))}const iN={kernelName:Hf,backendName:"webgl",kernelFunc:sN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rN=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${vg};
  float scale = ${mg};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,aN=be({opSnippet:rN}),oN={kernelName:Yf,backendName:"webgl",kernelFunc:aN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uN=ua+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,lN=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hN=be({opSnippet:uN,packedOpSnippet:lN,cpuKernelImpl:lR}),fN={kernelName:Jf,backendName:"webgl",kernelFunc:hN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cN=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,dN=be({opSnippet:cN}),pN={kernelName:Qf,backendName:"webgl",kernelFunc:dN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vN=ua+`
  return sin(x);
`,mN=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Sr}
  return result;
`,gN=be({opSnippet:vN,packedOpSnippet:mN}),xN={kernelName:jf,backendName:"webgl",kernelFunc:gN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yN=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,TN=be({opSnippet:yN}),SN={kernelName:Zf,backendName:"webgl",kernelFunc:TN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CN=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,EN=be({opSnippet:CN}),wN={kernelName:qf,backendName:"webgl",kernelFunc:EN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bN=c=>{const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{blockShape:C,paddings:o}=y;it(S.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const x=C.reduce((u,p)=>u*p),t=[[0,0]];t.push(...o);for(let u=1+C.length;u<S.shape.length;++u)t.push([0,0]);const s=[],l=A0({inputs:{x:S},backend:f,attrs:{paddings:t,constantValue:0}}),a=Za(l.shape,C,x,!1),r=Qa(a.length,C.length,!1),i=Ja(l.shape,C,x,!1),n=Yt({inputs:{x:l},backend:f,attrs:{shape:a}}),h=wn({inputs:{x:n},backend:f,attrs:{perm:r}}),d=Yt({inputs:{x:h},backend:f,attrs:{shape:i}});return s.push(l),s.push(n),s.push(h),s.forEach(u=>f.disposeIntermediateTensorInfo(u)),d},AN={kernelName:tc,backendName:"webgl",kernelFunc:bN};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RN(c){const{inputs:e,backend:f}=c,{indices:y,values:S,denseShape:C,defaultValue:o}=e;if(C.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${C.shape}`);if(y.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${y.shape}`);if(S.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${S.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const x=f.readSync(y.dataId),t=f.readSync(S.dataId),s=f.readSync(C.dataId),l=f.readSync(o.dataId)[0],[a,r,i,n,h]=fR(x,y.shape,y.dtype,t,S.dtype,s,l);return[f.makeTensorInfo(r,y.dtype,a),f.makeTensorInfo([r[0]],S.dtype,i),f.makeTensorInfo([n.length],"bool",new Uint8Array(n.map(d=>Number(d)))),f.makeTensorInfo([h.length],y.dtype,new Int32Array(h))]}const IN={kernelName:nc,backendName:"webgl",kernelFunc:RN};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PN(c){const{inputs:e,backend:f}=c,{inputIndices:y,inputShape:S,newShape:C}=e;if(y.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${y.shape}`);if(S.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${S.shape}`);if(C.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${C.shape}`);const o=Array.from(f.readSync(S.dataId)),x=f.readSync(y.dataId),t=Array.from(f.readSync(C.dataId)),[s,l,a]=cR(x,y.shape,y.dtype,o,t);return[f.makeTensorInfo(l,y.dtype,s),f.makeTensorInfo([a.length],C.dtype,new Int32Array(a))]}const FN={kernelName:Gu,backendName:"webgl",kernelFunc:PN};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MN(c){const{inputs:e,backend:f}=c,{data:y,indices:S,segmentIds:C}=e;if(y.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(S.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${S.shape}`);if(C.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${C.shape}`);const o=f.readSync(y.dataId),x=f.readSync(S.dataId),t=f.readSync(C.dataId),[s,l]=Jg(o,y.shape,y.dtype,x,t,!0);return f.makeTensorInfo(l,y.dtype,s)}const NN={kernelName:sc,backendName:"webgl",kernelFunc:MN};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ON(c){const{inputs:e,backend:f}=c,{data:y,indices:S,segmentIds:C}=e;if(y.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(S.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${S.shape}`);if(C.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${C.shape}`);const o=f.readSync(y.dataId),x=f.readSync(S.dataId),t=f.readSync(C.dataId),[s,l]=Jg(o,y.shape,y.dtype,x,t);return f.makeTensorInfo(l,y.dtype,s)}const DN={kernelName:ic,backendName:"webgl",kernelFunc:ON};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LN(c){const{inputs:e,backend:f,attrs:y}=c,{sparseIndices:S,sparseValues:C,defaultValue:o}=e,{outputShape:x}=y,{sliceRank:t,numUpdates:s,sliceSize:l,strides:a,outputSize:r}=mr(C,S,x),i=!1;if(C.dtype==="string"){const u=f.bufferSync(S),p=f.bufferSync(C),v=Hr(f.readSync(o.dataId)[0]),m=uR(u,p,x,r,l,s,t,a,v,i);return f.makeTensorInfo(x,m.dtype,m.values)}const n=new gd(s,t,S.shape.length,C.shape.length,a,[r,1],i),h=f.runWebGLProgram(n,[C,S,o],C.dtype),d=Yt({inputs:{x:h},backend:f,attrs:{shape:x}});return f.disposeIntermediateTensorInfo(h),d}const BN={kernelName:Uu,backendName:"webgl",kernelFunc:LN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $N(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{numOrSizeSplits:C,axis:o}=y,x=Qe(o,S.shape)[0],t=Zc(S,C,x),s=S.shape.length,l=new Array(s).fill(0),a=S.shape.slice();return t.map(r=>{const i=[...a];i[x]=r;const n=la({inputs:{x:S},backend:f,attrs:{begin:l,size:i}});return l[x]+=r,n})}const GN={kernelName:ec,backendName:"webgl",kernelFunc:$N};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yp="return sqrt(x);",UN=be({opSnippet:yp,packedOpSnippet:yp,cpuKernelImpl:dR}),VN={kernelName:_f,backendName:"webgl",kernelFunc:UN};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zN="return x * x;",kN=be({opSnippet:zN}),WN={kernelName:Tv,backendName:"webgl",kernelFunc:kN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tp="return (a - b) * (a - b);",XN=pn({opSnippet:Tp,packedOpSnippet:Tp}),HN={kernelName:rc,backendName:"webgl",kernelFunc:XN};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YN(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e;if(S.dtype!=="string")throw new Error("Input must be of datatype string");const C=f.readSync(S.dataId),o=jr(C),x=pR(o,"string",y);return f.makeTensorInfo(S.shape,"string",x)}const KN={kernelName:Sv,backendName:"webgl",kernelFunc:YN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jN({inputs:c,attrs:e,backend:f}){const{x:y}=c,S=cs+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,C=new Ps(y.shape,S);return f.runWebGLProgram(C,[y],y.dtype)}const ZN={kernelName:Wu,backendName:"webgl",kernelFunc:jN};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QN{constructor(e,f,y){this.variableNames=["x"],this.outputShape=y;const S=y.length,C=De(y.length),o=De(y.length);let x="";if(S===1)x="coords * strides + begin";else{let t=0;x=y.map((s,l)=>(t++,y.length===1?`coords * strides[${l}] + begin[${l}]`:`coords[${t-1}] * strides[${l}] + begin[${l}]`)).join(",")}this.userCode=`
      ${C} begin = ${C}(${e});
      ${C} strides = ${C}(${f});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${x}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JN(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{begin:C,end:o,strides:x,beginMask:t,endMask:s,ellipsisMask:l,newAxisMask:a,shrinkAxisMask:r}=y,{finalShapeSparse:i,finalShape:n,isIdentity:h,sliceDim0:d,isSimpleSlice:u,begin:p,end:v,strides:m}=Wc(S.shape,C,o,x,t,s,l,a,r);let g;if(h)g=Yt({inputs:{x:S},backend:f,attrs:{shape:n}});else if(d||u){it(S.shape.length>=1,()=>`Input must have rank at least 1, got: ${S.shape.length}`);const w=zc(p,v,m),b=la({inputs:{x:S},backend:f,attrs:{begin:p,size:w}});g=Yt({inputs:{x:b},backend:f,attrs:{shape:n}}),f.disposeIntermediateTensorInfo(b)}else if(f.shouldExecuteOnCPU([S])){const b=f.readSync(S.dataId),E=Ze(S.shape,S.dtype,b),A=vR(i,E,m,p);g=f.makeTensorInfo(n,S.dtype,A.values)}else{const b=new QN(p,m,i);g=f.runWebGLProgram(b,[S],S.dtype)}const T=Yt({inputs:{x:g},backend:f,attrs:{shape:n}});return f.disposeIntermediateTensorInfo(g),T}const qN={kernelName:Vu,backendName:"webgl",kernelFunc:JN};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _N(c){const{inputs:e,backend:f,attrs:y}=c,{separator:S,nGramWidths:C,leftPad:o,rightPad:x,padWidth:t,preserveShortSequences:s}=y,{data:l,dataSplits:a}=e,r=f.readSync(l.dataId),i=f.readSync(a.dataId),[n,h]=mR(r,i,S,C,o,x,t,s);return[f.makeTensorInfo([n.length],"string",n),f.makeTensorInfo(a.shape,"int32",h)]}const tO={kernelName:ac,backendName:"webgl",kernelFunc:_N};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eO(c){const{inputs:e,backend:f,attrs:y}=c,{skipEmpty:S}=y,{input:C,delimiter:o}=e;if(C.dtype!=="string")throw new Error("Input must be of datatype string");if(C.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${C.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const x=f.readSync(C.dataId),t=f.readSync(o.dataId)[0],[s,l,a]=gR(x,t,S),r=l.length;return[f.makeTensorInfo([r,2],"int32",s),f.makeTensorInfo([r],"string",l),f.makeTensorInfo([2],"int32",new Int32Array(a))]}const nO={kernelName:oc,backendName:"webgl",kernelFunc:eO};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sO(c){const{inputs:e,backend:f,attrs:y}=c,{numBuckets:S}=y,{input:C}=e;if(C.dtype!=="string")throw new Error("Input must be of datatype string");if(S<=0)throw new Error("Number of buckets must be at least 1");const o=f.readSync(C.dataId),x=xR(o,S);return f.makeTensorInfo(C.shape,"int32",x)}const iO={kernelName:uc,backendName:"webgl",kernelFunc:sO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rO="return tan(x);",aO=be({opSnippet:rO}),oO={kernelName:hc,backendName:"webgl",kernelFunc:aO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uO=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,lO=be({opSnippet:uO}),hO={kernelName:fc,backendName:"webgl",kernelFunc:lO};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fO(c){const{inputs:e,backend:f,attrs:y}=c,{tensor:S,indices:C,updates:o}=e,{sliceRank:x,numUpdates:t,sliceSize:s,strides:l,outputSize:a}=mr(o,C,S.shape),r=[a/s,s];if(a===0)return f.makeTensorInfo(S.shape,C.dtype);const i=Yt({inputs:{x:C},backend:f,attrs:{shape:[t,x]}}),n=Yt({inputs:{x:o},backend:f,attrs:{shape:[t,s]}}),h=Yt({inputs:{x:S},backend:f,attrs:{shape:r}}),d=new gd(t,x,i.shape.length,n.shape.length,l,r,!1,!0),u=f.runWebGLProgram(d,[n,i,h],h.dtype),p=Yt({inputs:{x:u},backend:f,attrs:{shape:S.shape}});return f.disposeIntermediateTensorInfo(i),f.disposeIntermediateTensorInfo(n),f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(u),p}const cO={kernelName:Du,backendName:"webgl",kernelFunc:fO};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dO{constructor(e,f){this.variableNames=["A"];const y=new Array(e.length);for(let o=0;o<y.length;o++)y[o]=e[o]*f[o];this.outputShape=y,this.rank=y.length;const S=De(this.rank),C=pO(e);this.userCode=`
      void main() {
        ${S} resRC = getOutputCoords();
        setOutput(getA(${C}));
      }
    `}}function pO(c){const e=c.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${c[0]})`;const f=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],y=[];for(let S=0;S<c.length;S++)y.push(`imod(${f[S]}, ${c[S]})`);return y.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I0(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{reps:C}=y;if(S.dtype==="string"||S.shape.length>5){const t=f.readSync(S.dataId),s=S.dtype==="string"?t.map(r=>Hr(r)):t,l=Ze(S.shape,S.dtype,s),a=TR(l,C);return f.makeTensorInfo(a.shape,a.dtype,a.values)}const o=new dO(S.shape,C);return f.runWebGLProgram(o,[S],S.dtype)}const vO={kernelName:Wa,backendName:"webgl",kernelFunc:I0};class mO{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class gO{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hi(c,e){e!==null&&c.disposeIntermediateTensorInfo(e)}function Sp(c){let e=1;for(;e<c;)e*=2;return e}function xO(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{k:C,sorted:o}=y,x=St().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),t=St().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),s=S.shape,l=s[s.length-1];if(f.shouldExecuteOnCPU([S])||l<x||C>t){const A=f.readSync(S.dataId),[R,I]=SR(A,s,S.dtype,C,o);return[f.makeTensorInfo(R.shape,R.dtype,R.values),f.makeTensorInfo(I.shape,I.dtype,I.values)]}if(C===0)return s[s.length-1]=0,[f.makeTensorInfo(s,S.dtype,[]),f.makeTensorInfo(s,"int32",[])];if(l===1)return[S,no({attrs:{shape:s,dtype:"int32",value:0},backend:f})];const a=f.texData.get(S.dataId),r=a!==null&&a.isPacked,i=r?f.unpackTensor(S):S,h=bt(s)/l,d=Yt({inputs:{x:i},attrs:{shape:[h,l]},backend:f});r&&Hi(f,i);const u=Sp(C),p=Sp(l);let v=null;const m=()=>v===null?[d,d]:[d,v],g=(A,R,I)=>{const P=m(),M=new mO(I),O=[[l],[v===null?1:0],[Number.NEGATIVE_INFINITY],[A],[R]],D=v;v=f.runWebGLProgram(M,P,"int32",O),Hi(f,D)};for(let A=1;A<u;A*=2){const R=A*2;for(let I=A;I>=1;I/=2)g(R,I,[h,p])}for(let A=p;A>u;A/=2){const R=m(),I=new gO([h,A/2]),M=[[l],[v===null?1:0],[u]],F=v;v=f.runWebGLProgram(I,R,"int32",M),Hi(f,F);const O=u/2,D=O*2;for(let L=O;L>=1;L/=2)g(D,L,v.shape)}let T=v;v=la({inputs:{x:v},backend:f,attrs:{begin:0,size:[h,C]}}),Hi(f,T);let w=T0({inputs:{x:d,indices:v},backend:f,attrs:{axis:1,batchDims:1}});Hi(f,d);const b=s.slice(0,-1);b.push(C),T=v,v=Yt({inputs:{x:v},attrs:{shape:b},backend:f}),Hi(f,T);const E=w;return w=Yt({inputs:{x:w},attrs:{shape:b},backend:f}),Hi(f,E),[w,v]}const yO={kernelName:zu,backendName:"webgl",kernelFunc:xO};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TO{constructor(e,f,y,S,C,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const x=y==="nearest"?1:2;let t;switch(S){case"constant":t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4;break;default:t=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${t} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${t} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${t} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${f}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${C});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${C});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${f}));
                float mapY = mapCoord(inY, float(${e}));

                if (${x} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SO(c){const{inputs:e,backend:f,attrs:y}=c,{image:S,transforms:C}=e,{interpolation:o,fillMode:x,fillValue:t,outputShape:s}=y,[l,a,r,i]=S.shape,[n,h]=s??[a,r],d=[l,n,h,i],u=new TO(a,r,o,x,t,d);return f.runWebGLProgram(u,[S,C],"float32")}const CO={kernelName:ku,backendName:"webgl",kernelFunc:SO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EO(c){const{inputs:e,attrs:f,backend:y}=c,{axis:S}=f,{x:C}=e;_a(C,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=y.readSync(C.dataId),{outputValues:x,outputShape:t,indices:s}=CR(o,S,C.shape,C.dtype);return[y.makeTensorInfo(t,C.dtype,x),y.makeTensorInfo([s.length],"int32",s)]}const wO={kernelName:cc,backendName:"webgl",kernelFunc:EO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bO(c){const{inputs:e,backend:f,attrs:y}=c,{value:S}=e;let{axis:C}=y;C<0&&(C+=S.shape.length);const o=S,x=o.shape.length,t=S.shape[C],s=new Array(x-1);let l=0;for(let h=0;h<x;h++)h!==C&&(s[l++]=o.shape[h]);const a=[],r=new Array(x).fill(0),i=o.shape.slice();i[C]=1;const n=new Array(t);for(let h=0;h<n.length;h++){r[C]=h;const d=la({inputs:{x:o},backend:f,attrs:{begin:r,size:i}}),u=Yt({inputs:{x:d},backend:f,attrs:{shape:s}});n[h]=u,a.push(d)}return a.forEach(h=>f.disposeIntermediateTensorInfo(h)),n}const AO={kernelName:dc,backendName:"webgl",kernelFunc:bO};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RO{constructor(e,f){this.variableNames=["x","segmentIds"];const y=e.windowSize,S=e.batchSize,C=e.inSize,o=e.numSegments,x=o*Math.ceil(C/y);this.outputShape=[S,x];const t="0.0",s="sumValue",l=Math.floor(y/4)*4,a=y%4,r=`
        sumValue += dot(values, segFilter);
    `;let i="";C%y>0&&(i=`
        if (inIdx < 0 || inIdx >= ${C}) {
          return initializationValue;
        }
      `);let n="";C%y>0&&(n=`
        if (inIdx < 0 || inIdx >= ${C}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${t};

      float getValue(int batch, int inIdx) {
        ${i}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${n}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${y}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${r}
        }

        int inIdx = inOffset + ${l};
        if (${a===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${r}
        } else if (${a===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${r}
        } else if (${a===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${r}
        }
        setOutput(${s});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IO(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,segmentIds:C}=e,{numSegments:o}=y,x=S.shape.length,t=[];let s=0;const l=Dn([s],x);let a=S;l!=null&&(a=wn({inputs:{x:S},backend:f,attrs:{perm:l}}),t.push(a),s=dn(1,x)[0]);const r=Pg(a.shape,s,o),i=bt([a.shape[s]]),n=Yt({inputs:{x:a},backend:f,attrs:{shape:[-1,i]}});t.push(n);const h=mc(S.dtype),d=(m,g,T,w,b)=>{const E=m.shape[0],A=m.shape[1],R=Ig(A,b),I={windowSize:R,inSize:A,batchSize:E,numSegments:b},P=new RO(I,g),M=f.compileAndRun(P,[m,T],w);if(t.push(M),M.shape[1]===b)return M;const F=R0({backend:f,attrs:{start:0,stop:b,step:1,dtype:"float32"}}),O=I0({inputs:{x:F},backend:f,attrs:{reps:[A/R]}});return t.push(F),t.push(O),d(M,g,O,w,b)},u=d(n,"unsortedSegmentSum",C,h,o),p=Yt({inputs:{x:u},backend:f,attrs:{shape:r}});let v=p;if(l!=null){t.push(p);const m=Ka(l);v=wn({inputs:{x:v},backend:f,attrs:{perm:m}})}return t.forEach(m=>f.disposeIntermediateTensorInfo(m)),v}const PO={kernelName:Cv,backendName:"webgl",kernelFunc:IO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FO=[dI,vI,xI,SI,EI,AI,II,FI,DI,BI,UI,kI,HI,ZI,qI,t9,n9,a9,u9,h9,p9,S9,E9,R9,P9,L9,$9,z9,QR,X9,Z9,_9,rP,uP,hP,cP,pP,xP,SP,wP,AP,IP,FP,OP,LP,UP,zP,XP,KP,ZP,_P,s8,o8,h8,d8,p8,m8,x8,T8,C8,w8,I8,M8,D8,B8,U8,k8,Y8,Q8,ZR,q8,K9,eF,iF,oF,qR,fF,vF,gF,SF,wF,IF,MF,LF,UF,kF,XF,jF,QF,qF,n7,i7,a7,u7,h7,p7,x7,C7,F7,eI,D7,$7,V7,W7,M9,Y7,j7,Q7,_7,sM,tI,rM,oM,lM,fM,cM,N9,A7,vM,yM,EM,sI,RM,FM,DM,$M,zM,WM,YM,ZM,qM,eN,iN,oN,fN,pN,xN,SN,y9,I7,wN,AN,IN,FN,NN,DN,BN,GN,VN,WN,HN,KN,ZN,qN,tO,nO,iO,R7,hI,oO,hO,cO,vO,yO,CO,fI,wO,AO,PO,K7];for(const c of FO)Ev(c);var P0={};(function(){var c;function e(V){var j=0;return function(){return j<V.length?{done:!1,value:V[j++]}:{done:!0}}}var f=typeof Object.defineProperties=="function"?Object.defineProperty:function(V,j,Q){return V==Array.prototype||V==Object.prototype||(V[j]=Q.value),V};function y(V){V=[typeof globalThis=="object"&&globalThis,V,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kn=="object"&&Kn];for(var j=0;j<V.length;++j){var Q=V[j];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var S=y(this);function C(V,j){if(j)t:{var Q=S;V=V.split(".");for(var ht=0;ht<V.length-1;ht++){var gt=V[ht];if(!(gt in Q))break t;Q=Q[gt]}V=V[V.length-1],ht=Q[V],j=j(ht),j!=ht&&j!=null&&f(Q,V,{configurable:!0,writable:!0,value:j})}}C("Symbol",function(V){function j(Rt){if(this instanceof j)throw new TypeError("Symbol is not a constructor");return new Q(ht+(Rt||"")+"_"+gt++,Rt)}function Q(Rt,Ct){this.g=Rt,f(this,"description",{configurable:!0,writable:!0,value:Ct})}if(V)return V;Q.prototype.toString=function(){return this.g};var ht="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",gt=0;return j}),C("Symbol.iterator",function(V){if(V)return V;V=Symbol("Symbol.iterator");for(var j="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Q=0;Q<j.length;Q++){var ht=S[j[Q]];typeof ht=="function"&&typeof ht.prototype[V]!="function"&&f(ht.prototype,V,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return V});function o(V){return V={next:V},V[Symbol.iterator]=function(){return this},V}function x(V){var j=typeof Symbol<"u"&&Symbol.iterator&&V[Symbol.iterator];return j?j.call(V):{next:e(V)}}function t(V){if(!(V instanceof Array)){V=x(V);for(var j,Q=[];!(j=V.next()).done;)Q.push(j.value);V=Q}return V}var s=typeof Object.create=="function"?Object.create:function(V){function j(){}return j.prototype=V,new j},l;if(typeof Object.setPrototypeOf=="function")l=Object.setPrototypeOf;else{var a;t:{var r={a:!0},i={};try{i.__proto__=r,a=i.a;break t}catch{}a=!1}l=a?function(V,j){if(V.__proto__=j,V.__proto__!==j)throw new TypeError(V+" is not extensible");return V}:null}var n=l;function h(V,j){if(V.prototype=s(j.prototype),V.prototype.constructor=V,n)n(V,j);else for(var Q in j)if(Q!="prototype")if(Object.defineProperties){var ht=Object.getOwnPropertyDescriptor(j,Q);ht&&Object.defineProperty(V,Q,ht)}else V[Q]=j[Q];V.ea=j.prototype}function d(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function u(V){if(V.l)throw new TypeError("Generator is already running");V.l=!0}d.prototype.o=function(V){this.h=V};function p(V,j){V.j={U:j,V:!0},V.g=V.m||V.s}d.prototype.return=function(V){this.j={return:V},this.g=this.s};function v(V,j,Q){return V.g=Q,{value:j}}function m(V){this.g=new d,this.h=V}function g(V,j){u(V.g);var Q=V.g.i;return Q?T(V,"return"in Q?Q.return:function(ht){return{value:ht,done:!0}},j,V.g.return):(V.g.return(j),w(V))}function T(V,j,Q,ht){try{var gt=j.call(V.g.i,Q);if(!(gt instanceof Object))throw new TypeError("Iterator result "+gt+" is not an object");if(!gt.done)return V.g.l=!1,gt;var Rt=gt.value}catch(Ct){return V.g.i=null,p(V.g,Ct),w(V)}return V.g.i=null,ht.call(V.g,Rt),w(V)}function w(V){for(;V.g.g;)try{var j=V.h(V.g);if(j)return V.g.l=!1,{value:j.value,done:!1}}catch(Q){V.g.h=void 0,p(V.g,Q)}if(V.g.l=!1,V.g.j){if(j=V.g.j,V.g.j=null,j.V)throw j.U;return{value:j.return,done:!0}}return{value:void 0,done:!0}}function b(V){this.next=function(j){return u(V.g),V.g.i?j=T(V,V.g.i.next,j,V.g.o):(V.g.o(j),j=w(V)),j},this.throw=function(j){return u(V.g),V.g.i?j=T(V,V.g.i.throw,j,V.g.o):(p(V.g,j),j=w(V)),j},this.return=function(j){return g(V,j)},this[Symbol.iterator]=function(){return this}}function E(V,j){return j=new b(new m(j)),n&&V.prototype&&n(j,V.prototype),j}function A(V,j){V instanceof String&&(V+="");var Q=0,ht=!1,gt={next:function(){if(!ht&&Q<V.length){var Rt=Q++;return{value:j(Rt,V[Rt]),done:!1}}return ht=!0,{done:!0,value:void 0}}};return gt[Symbol.iterator]=function(){return gt},gt}var R=typeof Object.assign=="function"?Object.assign:function(V,j){for(var Q=1;Q<arguments.length;Q++){var ht=arguments[Q];if(ht)for(var gt in ht)Object.prototype.hasOwnProperty.call(ht,gt)&&(V[gt]=ht[gt])}return V};C("Object.assign",function(V){return V||R}),C("Promise",function(V){function j(Ct){this.h=0,this.i=void 0,this.g=[],this.o=!1;var et=this.j();try{Ct(et.resolve,et.reject)}catch(lt){et.reject(lt)}}function Q(){this.g=null}function ht(Ct){return Ct instanceof j?Ct:new j(function(et){et(Ct)})}if(V)return V;Q.prototype.h=function(Ct){if(this.g==null){this.g=[];var et=this;this.i(function(){et.l()})}this.g.push(Ct)};var gt=S.setTimeout;Q.prototype.i=function(Ct){gt(Ct,0)},Q.prototype.l=function(){for(;this.g&&this.g.length;){var Ct=this.g;this.g=[];for(var et=0;et<Ct.length;++et){var lt=Ct[et];Ct[et]=null;try{lt()}catch(Tt){this.j(Tt)}}}this.g=null},Q.prototype.j=function(Ct){this.i(function(){throw Ct})},j.prototype.j=function(){function Ct(Tt){return function(Lt){lt||(lt=!0,Tt.call(et,Lt))}}var et=this,lt=!1;return{resolve:Ct(this.C),reject:Ct(this.l)}},j.prototype.C=function(Ct){if(Ct===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Ct instanceof j)this.F(Ct);else{t:switch(typeof Ct){case"object":var et=Ct!=null;break t;case"function":et=!0;break t;default:et=!1}et?this.u(Ct):this.m(Ct)}},j.prototype.u=function(Ct){var et=void 0;try{et=Ct.then}catch(lt){this.l(lt);return}typeof et=="function"?this.G(et,Ct):this.m(Ct)},j.prototype.l=function(Ct){this.s(2,Ct)},j.prototype.m=function(Ct){this.s(1,Ct)},j.prototype.s=function(Ct,et){if(this.h!=0)throw Error("Cannot settle("+Ct+", "+et+"): Promise already settled in state"+this.h);this.h=Ct,this.i=et,this.h===2&&this.D(),this.A()},j.prototype.D=function(){var Ct=this;gt(function(){if(Ct.B()){var et=S.console;typeof et<"u"&&et.error(Ct.i)}},1)},j.prototype.B=function(){if(this.o)return!1;var Ct=S.CustomEvent,et=S.Event,lt=S.dispatchEvent;return typeof lt>"u"?!0:(typeof Ct=="function"?Ct=new Ct("unhandledrejection",{cancelable:!0}):typeof et=="function"?Ct=new et("unhandledrejection",{cancelable:!0}):(Ct=S.document.createEvent("CustomEvent"),Ct.initCustomEvent("unhandledrejection",!1,!0,Ct)),Ct.promise=this,Ct.reason=this.i,lt(Ct))},j.prototype.A=function(){if(this.g!=null){for(var Ct=0;Ct<this.g.length;++Ct)Rt.h(this.g[Ct]);this.g=null}};var Rt=new Q;return j.prototype.F=function(Ct){var et=this.j();Ct.J(et.resolve,et.reject)},j.prototype.G=function(Ct,et){var lt=this.j();try{Ct.call(et,lt.resolve,lt.reject)}catch(Tt){lt.reject(Tt)}},j.prototype.then=function(Ct,et){function lt(Xt,Nt){return typeof Xt=="function"?function(Ft){try{Tt(Xt(Ft))}catch($){Lt($)}}:Nt}var Tt,Lt,Kt=new j(function(Xt,Nt){Tt=Xt,Lt=Nt});return this.J(lt(Ct,Tt),lt(et,Lt)),Kt},j.prototype.catch=function(Ct){return this.then(void 0,Ct)},j.prototype.J=function(Ct,et){function lt(){switch(Tt.h){case 1:Ct(Tt.i);break;case 2:et(Tt.i);break;default:throw Error("Unexpected state: "+Tt.h)}}var Tt=this;this.g==null?Rt.h(lt):this.g.push(lt),this.o=!0},j.resolve=ht,j.reject=function(Ct){return new j(function(et,lt){lt(Ct)})},j.race=function(Ct){return new j(function(et,lt){for(var Tt=x(Ct),Lt=Tt.next();!Lt.done;Lt=Tt.next())ht(Lt.value).J(et,lt)})},j.all=function(Ct){var et=x(Ct),lt=et.next();return lt.done?ht([]):new j(function(Tt,Lt){function Kt(Ft){return function($){Xt[Ft]=$,Nt--,Nt==0&&Tt(Xt)}}var Xt=[],Nt=0;do Xt.push(void 0),Nt++,ht(lt.value).J(Kt(Xt.length-1),Lt),lt=et.next();while(!lt.done)})},j}),C("Object.is",function(V){return V||function(j,Q){return j===Q?j!==0||1/j===1/Q:j!==j&&Q!==Q}}),C("Array.prototype.includes",function(V){return V||function(j,Q){var ht=this;ht instanceof String&&(ht=String(ht));var gt=ht.length;for(Q=Q||0,0>Q&&(Q=Math.max(Q+gt,0));Q<gt;Q++){var Rt=ht[Q];if(Rt===j||Object.is(Rt,j))return!0}return!1}}),C("String.prototype.includes",function(V){return V||function(j,Q){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(j instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(j,Q||0)!==-1}}),C("Array.prototype.keys",function(V){return V||function(){return A(this,function(j){return j})}});var I=this||self;function P(V,j){V=V.split(".");var Q=I;V[0]in Q||typeof Q.execScript>"u"||Q.execScript("var "+V[0]);for(var ht;V.length&&(ht=V.shift());)V.length||j===void 0?Q[ht]&&Q[ht]!==Object.prototype[ht]?Q=Q[ht]:Q=Q[ht]={}:Q[ht]=j}function M(V,j){return j=String.fromCharCode.apply(null,j),V==null?j:V+j}var F,O=typeof TextDecoder<"u",D,L=typeof TextEncoder<"u";function z(V){if(L)V=(D||(D=new TextEncoder)).encode(V);else{var j=void 0;j=j===void 0?!1:j;for(var Q=0,ht=new Uint8Array(3*V.length),gt=0;gt<V.length;gt++){var Rt=V.charCodeAt(gt);if(128>Rt)ht[Q++]=Rt;else{if(2048>Rt)ht[Q++]=Rt>>6|192;else{if(55296<=Rt&&57343>=Rt){if(56319>=Rt&&gt<V.length){var Ct=V.charCodeAt(++gt);if(56320<=Ct&&57343>=Ct){Rt=1024*(Rt-55296)+Ct-56320+65536,ht[Q++]=Rt>>18|240,ht[Q++]=Rt>>12&63|128,ht[Q++]=Rt>>6&63|128,ht[Q++]=Rt&63|128;continue}else gt--}if(j)throw Error("Found an unpaired surrogate");Rt=65533}ht[Q++]=Rt>>12|224,ht[Q++]=Rt>>6&63|128}ht[Q++]=Rt&63|128}}V=ht.subarray(0,Q)}return V}var X={},H=null;function J(V,j){j===void 0&&(j=0),N(),j=X[j];for(var Q=Array(Math.floor(V.length/3)),ht=j[64]||"",gt=0,Rt=0;gt<V.length-2;gt+=3){var Ct=V[gt],et=V[gt+1],lt=V[gt+2],Tt=j[Ct>>2];Ct=j[(Ct&3)<<4|et>>4],et=j[(et&15)<<2|lt>>6],lt=j[lt&63],Q[Rt++]=Tt+Ct+et+lt}switch(Tt=0,lt=ht,V.length-gt){case 2:Tt=V[gt+1],lt=j[(Tt&15)<<2]||ht;case 1:V=V[gt],Q[Rt]=j[V>>2]+j[(V&3)<<4|Tt>>4]+lt+ht}return Q.join("")}function G(V){var j=V.length,Q=3*j/4;Q%3?Q=Math.floor(Q):"=.".indexOf(V[j-1])!=-1&&(Q="=.".indexOf(V[j-2])!=-1?Q-2:Q-1);var ht=new Uint8Array(Q),gt=0;return k(V,function(Rt){ht[gt++]=Rt}),ht.subarray(0,gt)}function k(V,j){function Q(lt){for(;ht<V.length;){var Tt=V.charAt(ht++),Lt=H[Tt];if(Lt!=null)return Lt;if(!/^[\s\xa0]*$/.test(Tt))throw Error("Unknown base64 encoding at char: "+Tt)}return lt}N();for(var ht=0;;){var gt=Q(-1),Rt=Q(0),Ct=Q(64),et=Q(64);if(et===64&&gt===-1)break;j(gt<<2|Rt>>4),Ct!=64&&(j(Rt<<4&240|Ct>>2),et!=64&&j(Ct<<6&192|et))}}function N(){if(!H){H={};for(var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),j=["+/=","+/","-_=","-_.","-_"],Q=0;5>Q;Q++){var ht=V.concat(j[Q].split(""));X[Q]=ht;for(var gt=0;gt<ht.length;gt++){var Rt=ht[gt];H[Rt]===void 0&&(H[Rt]=gt)}}}}var B=typeof Uint8Array.prototype.slice=="function",U;function W(V,j,Q){return j===Q?U||(U=new Uint8Array(0)):B?V.slice(j,Q):new Uint8Array(V.subarray(j,Q))}var K=0,q=0;function _(V,j){j=j===void 0?{}:j,j=j.v===void 0?!1:j.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=j,V&&rt(this,V)}function rt(V,j){j=j.constructor===Uint8Array?j:j.constructor===ArrayBuffer?new Uint8Array(j):j.constructor===Array?new Uint8Array(j):j.constructor===String?G(j):j instanceof Uint8Array?new Uint8Array(j.buffer,j.byteOffset,j.byteLength):new Uint8Array(0),V.h=j,V.l=0,V.j=V.h.length,V.g=V.l}_.prototype.reset=function(){this.g=this.l};function ft(V){for(var j=128,Q=0,ht=0,gt=0;4>gt&&128<=j;gt++)j=V.h[V.g++],Q|=(j&127)<<7*gt;if(128<=j&&(j=V.h[V.g++],Q|=(j&127)<<28,ht|=(j&127)>>4),128<=j)for(gt=0;5>gt&&128<=j;gt++)j=V.h[V.g++],ht|=(j&127)<<7*gt+3;if(128>j)return V=Q>>>0,j=ht>>>0,(ht=j&2147483648)&&(V=~V+1>>>0,j=~j>>>0,V==0&&(j=j+1>>>0)),V=4294967296*j+(V>>>0),ht?-V:V;V.m=!0}_.prototype.i=function(){var V=this.h,j=V[this.g],Q=j&127;return 128>j?(this.g+=1,Q):(j=V[this.g+1],Q|=(j&127)<<7,128>j?(this.g+=2,Q):(j=V[this.g+2],Q|=(j&127)<<14,128>j?(this.g+=3,Q):(j=V[this.g+3],Q|=(j&127)<<21,128>j?(this.g+=4,Q):(j=V[this.g+4],Q|=(j&15)<<28,128>j?(this.g+=5,Q>>>0):(this.g+=5,128<=V[this.g++]&&128<=V[this.g++]&&128<=V[this.g++]&&128<=V[this.g++]&&this.g++,Q)))))},_.prototype.o=function(){var V=this.h[this.g],j=this.h[this.g+1],Q=this.h[this.g+2],ht=this.h[this.g+3];return this.g+=4,Q=(V<<0|j<<8|Q<<16|ht<<24)>>>0,V=2*(Q>>31)+1,j=Q>>>23&255,Q&=8388607,j==255?Q?NaN:1/0*V:j==0?V*Math.pow(2,-149)*Q:V*Math.pow(2,j-150)*(Q+Math.pow(2,23))};var vt=[];function mt(){this.g=new Uint8Array(64),this.h=0}mt.prototype.push=function(V){if(!(this.h+1<this.g.length)){var j=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(j)}this.g[this.h++]=V},mt.prototype.length=function(){return this.h},mt.prototype.end=function(){var V=this.g,j=this.h;return this.h=0,W(V,0,j)};function yt(V,j){for(;127<j;)V.push(j&127|128),j>>>=7;V.push(j)}function xt(V){var j={},Q=j.N===void 0?!1:j.N;this.o={v:j.v===void 0?!1:j.v},this.N=Q,j=this.o,vt.length?(Q=vt.pop(),j&&(Q.v=j.v),V&&rt(Q,V),V=Q):V=new _(V,j),this.g=V,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}xt.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function It(V){var j=V.g;if((j=j.g==j.j)||(j=V.j)||(j=V.g,j=j.m||0>j.g||j.g>j.j),j)return!1;V.m=V.g.g,j=V.g.i();var Q=j&7;return Q!=0&&Q!=5&&Q!=1&&Q!=2&&Q!=3&&Q!=4?(V.j=!0,!1):(V.i=j,V.l=j>>>3,V.h=Q,!0)}function Gt(V){switch(V.h){case 0:if(V.h!=0)Gt(V);else{for(V=V.g;V.h[V.g]&128;)V.g++;V.g++}break;case 1:V.h!=1?Gt(V):(V=V.g,V.g+=8);break;case 2:if(V.h!=2)Gt(V);else{var j=V.g.i();V=V.g,V.g+=j}break;case 5:V.h!=5?Gt(V):(V=V.g,V.g+=4);break;case 3:j=V.l;do{if(!It(V)){V.j=!0;break}if(V.h==4){V.l!=j&&(V.j=!0);break}Gt(V)}while(1);break;default:V.j=!0}}function Zt(V,j,Q){var ht=V.g.j,gt=V.g.i(),Rt=V.g.g+gt;if(V.g.j=Rt,Q(j,V),Q=Rt-V.g.g,Q!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+gt+" bytes, instead read "+(gt-Q)+" bytes, either the data ended unexpectedly or the message misreported its own length");return V.g.g=Rt,V.g.j=ht,j}function Bt(V){return V.g.o()}function At(V){var j=V.g.i();V=V.g;var Q=V.g;V.g+=j,V=V.h;var ht;if(O)(ht=F)||(ht=F=new TextDecoder("utf-8",{fatal:!1})),ht=ht.decode(V.subarray(Q,Q+j));else{j=Q+j;for(var gt=[],Rt=null,Ct,et,lt;Q<j;)Ct=V[Q++],128>Ct?gt.push(Ct):224>Ct?Q>=j?gt.push(65533):(et=V[Q++],194>Ct||(et&192)!==128?(Q--,gt.push(65533)):gt.push((Ct&31)<<6|et&63)):240>Ct?Q>=j-1?gt.push(65533):(et=V[Q++],(et&192)!==128||Ct===224&&160>et||Ct===237&&160<=et||((ht=V[Q++])&192)!==128?(Q--,gt.push(65533)):gt.push((Ct&15)<<12|(et&63)<<6|ht&63)):244>=Ct?Q>=j-2?gt.push(65533):(et=V[Q++],(et&192)!==128||(Ct<<28)+(et-144)>>30||((ht=V[Q++])&192)!==128||((lt=V[Q++])&192)!==128?(Q--,gt.push(65533)):(Ct=(Ct&7)<<18|(et&63)<<12|(ht&63)<<6|lt&63,Ct-=65536,gt.push((Ct>>10&1023)+55296,(Ct&1023)+56320))):gt.push(65533),8192<=gt.length&&(Rt=M(Rt,gt),gt.length=0);ht=M(Rt,gt)}return ht}function kt(V,j,Q){var ht=V.g.i();for(ht=V.g.g+ht;V.g.g<ht;)Q.push(j.call(V.g))}function Ut(V,j){V.h==2?kt(V,_.prototype.o,j):j.push(Bt(V))}function ee(){this.h=[],this.i=0,this.g=new mt}function te(V,j){j.length!==0&&(V.h.push(j),V.i+=j.length)}function fe(V){var j=V.i+V.g.length();if(j===0)return new Uint8Array(0);j=new Uint8Array(j);for(var Q=V.h,ht=Q.length,gt=0,Rt=0;Rt<ht;Rt++){var Ct=Q[Rt];Ct.length!==0&&(j.set(Ct,gt),gt+=Ct.length)}return Q=V.g,ht=Q.h,ht!==0&&(j.set(Q.g.subarray(0,ht),gt),Q.h=0),V.h=[j],j}function ae(V,j,Q){if(Q!=null){yt(V.g,8*j+5),V=V.g;var ht=Q;ht=(Q=0>ht?1:0)?-ht:ht,ht===0?0<1/ht?K=q=0:(q=0,K=2147483648):isNaN(ht)?(q=0,K=2147483647):34028234663852886e22<ht?(q=0,K=(Q<<31|2139095040)>>>0):11754943508222875e-54>ht?(ht=Math.round(ht/Math.pow(2,-149)),q=0,K=(Q<<31|ht)>>>0):(j=Math.floor(Math.log(ht)/Math.LN2),ht*=Math.pow(2,-j),ht=Math.round(8388608*ht),16777216<=ht&&++j,q=0,K=(Q<<31|j+127<<23|ht&8388607)>>>0),Q=K,V.push(Q>>>0&255),V.push(Q>>>8&255),V.push(Q>>>16&255),V.push(Q>>>24&255)}}var le=typeof Uint8Array=="function";function re(V,j,Q){if(V!=null)return typeof V=="object"?le&&V instanceof Uint8Array?Q(V):we(V,j,Q):j(V)}function we(V,j,Q){if(Array.isArray(V)){for(var ht=Array(V.length),gt=0;gt<V.length;gt++)ht[gt]=re(V[gt],j,Q);return Array.isArray(V)&&V.W&&ce(ht),ht}ht={};for(gt in V)ht[gt]=re(V[gt],j,Q);return ht}function Se(V){return typeof V=="number"?isFinite(V)?V:String(V):V}var Ne={W:{value:!0,configurable:!0}};function ce(V){return Array.isArray(V)&&!Object.isFrozen(V)&&Object.defineProperties(V,Ne),V}var se;function Ae(V,j,Q){var ht=se;se=null,V||(V=ht),ht=this.constructor.ca,V||(V=ht?[ht]:[]),this.j=ht?0:-1,this.m=this.g=null,this.h=V;t:{if(ht=this.h.length,V=ht-1,ht&&(ht=this.h[V],!(ht===null||typeof ht!="object"||Array.isArray(ht)||le&&ht instanceof Uint8Array))){this.l=V-this.j,this.i=ht;break t}j!==void 0&&-1<j?(this.l=Math.max(j,V+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(Q)for(j=0;j<Q.length;j++)V=Q[j],V<this.l?(V+=this.j,(ht=this.h[V])?ce(ht):this.h[V]=Le):(en(this),(ht=this.i[V])?ce(ht):this.i[V]=Le)}var Le=Object.freeze(ce([]));function en(V){var j=V.l+V.j;V.h[j]||(V.i=V.h[j]={})}function ge(V,j,Q){return j===-1?null:Q!==void 0&&Q||j>=V.l?V.i?V.i[j]:void 0:V.h[j+V.j]}function Xe(V,j){var Q=Q===void 0?!1:Q,ht=ge(V,j,Q);return ht==null&&(ht=Le),ht===Le&&(ht=ce([]),ue(V,j,ht,Q)),ht}function Qn(V){var j=Xe(V,3);if(V.m||(V.m={}),!V.m[3]){for(var Q=0;Q<j.length;Q++)j[Q]=+j[Q];V.m[3]=!0}return j}function An(V,j,Q){return V=ge(V,j),V??Q}function _e(V,j,Q){return V=ge(V,j),V=V==null?V:+V,V??(Q===void 0?0:Q)}function ue(V,j,Q,ht){ht!==void 0&&ht||j>=V.l?(en(V),V.i[j]=Q):V.h[j+V.j]=Q}function Os(V,j,Q){if(Q===-1)return null;if(V.g||(V.g={}),!V.g[Q]){var ht=ge(V,Q,!1);ht&&(V.g[Q]=new j(ht))}return V.g[Q]}function wt(V,j){V.g||(V.g={});var Q=V.g[1];if(!Q){var ht=Xe(V,1);Q=[];for(var gt=0;gt<ht.length;gt++)Q[gt]=new j(ht[gt]);V.g[1]=Q}return Q}function Dt(V,j,Q){var ht=ht===void 0?!1:ht;V.g||(V.g={});var gt=Q&&zt(Q);V.g[j]=Q,ue(V,j,gt,ht)}function _t(V,j,Q,ht){var gt=wt(V,Q);j=j||new Q,V=Xe(V,1),ht!=null?(gt.splice(ht,0,j),V.splice(ht,0,zt(j))):(gt.push(j),V.push(zt(j)))}Ae.prototype.toJSON=function(){var V=zt(this);return we(V,Se,J)};function zt(V,j){if(V.g)for(var Q in V.g){var ht=V.g[Q];if(Array.isArray(ht))for(var gt=0;gt<ht.length;gt++)ht[gt]&&zt(ht[gt]);else ht&&zt(ht)}return V.h}Ae.prototype.toString=function(){return zt(this).toString()};function Re(V,j){if(V=V.o){te(j,j.g.end());for(var Q=0;Q<V.length;Q++)te(j,V[Q])}}function xe(V,j){if(j.h==4)return!1;var Q=j.m;return Gt(j),j.N||(j=W(j.g.h,Q,j.g.g),(Q=V.o)?Q.push(j):V.o=[j]),!0}function ie(V){Ae.call(this,V,-1,He)}h(ie,Ae),ie.prototype.getRows=function(){return ge(this,1)},ie.prototype.getCols=function(){return ge(this,2)},ie.prototype.getPackedDataList=function(){return Qn(this)},ie.prototype.getLayout=function(){return An(this,4,0)};function oe(V,j){for(;It(j);)switch(j.i){case 8:var Q=j.g.i();ue(V,1,Q);break;case 16:Q=j.g.i(),ue(V,2,Q);break;case 29:case 26:Ut(j,V.getPackedDataList());break;case 32:Q=ft(j.g),ue(V,4,Q);break;default:if(!xe(V,j))return V}return V}var He=[3];function Pe(V,j){var Q=void 0;return new(Q||(Q=Promise))(function(ht,gt){function Rt(lt){try{et(j.next(lt))}catch(Tt){gt(Tt)}}function Ct(lt){try{et(j.throw(lt))}catch(Tt){gt(Tt)}}function et(lt){lt.done?ht(lt.value):new Q(function(Tt){Tt(lt.value)}).then(Rt,Ct)}et((j=j.apply(V,void 0)).next())})}function nn(V){Ae.call(this,V)}h(nn,Ae);function Ds(V,j){for(;It(j);)switch(j.i){case 8:var Q=j.g.i();ue(V,1,Q);break;case 21:Q=Bt(j),ue(V,2,Q);break;case 26:Q=At(j),ue(V,3,Q);break;case 34:Q=At(j),ue(V,4,Q);break;default:if(!xe(V,j))return V}return V}function Jn(V){Ae.call(this,V,-1,Ls)}h(Jn,Ae),Jn.prototype.addClassification=function(V,j){return _t(this,V,nn,j),this};var Ls=[1];function Ge(V){Ae.call(this,V)}h(Ge,Ae);function qn(V,j){for(;It(j);)switch(j.i){case 13:var Q=Bt(j);ue(V,1,Q);break;case 21:Q=Bt(j),ue(V,2,Q);break;case 29:Q=Bt(j),ue(V,3,Q);break;case 37:Q=Bt(j),ue(V,4,Q);break;case 45:Q=Bt(j),ue(V,5,Q);break;default:if(!xe(V,j))return V}return V}function Bs(V){Ae.call(this,V,-1,ii)}h(Bs,Ae);function Er(V){t:{var j=new Bs;for(V=new xt(V);It(V);)switch(V.i){case 10:var Q=Zt(V,new Ge,qn);_t(j,Q,Ge,void 0);break;default:if(!xe(j,V))break t}}return j}var ii=[1];function ri(V){Ae.call(this,V)}h(ri,Ae);function ds(V){Ae.call(this,V,-1,$s)}h(ds,Ae),ds.prototype.getVertexType=function(){return An(this,1,0)},ds.prototype.getPrimitiveType=function(){return An(this,2,0)},ds.prototype.getVertexBufferList=function(){return Qn(this)},ds.prototype.getIndexBufferList=function(){return Xe(this,4)};function ha(V,j){for(;It(j);)switch(j.i){case 8:var Q=ft(j.g);ue(V,1,Q);break;case 16:Q=ft(j.g),ue(V,2,Q);break;case 29:case 26:Ut(j,V.getVertexBufferList());break;case 32:case 34:Q=j;var ht=V.getIndexBufferList();Q.h==2?kt(Q,_.prototype.i,ht):ht.push(Q.g.i());break;default:if(!xe(V,j))return V}return V}var $s=[3,4];function ai(V){Ae.call(this,V)}h(ai,Ae),ai.prototype.getMesh=function(){return Os(this,ds,1)},ai.prototype.getPoseTransformMatrix=function(){return Os(this,ie,2)};function wr(V){t:{var j=new ai;for(V=new xt(V);It(V);)switch(V.i){case 10:var Q=Zt(V,new ds,ha);Dt(j,1,Q);break;case 18:Q=Zt(V,new ie,oe),Dt(j,2,Q);break;default:if(!xe(j,V))break t}}return j}function oi(V,j,Q){if(Q=V.createShader(Q===0?V.VERTEX_SHADER:V.FRAGMENT_SHADER),V.shaderSource(Q,j),V.compileShader(Q),!V.getShaderParameter(Q,V.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+V.getShaderInfoLog(Q));return Q}function $i(V){return wt(V,nn).map(function(j){return{index:An(j,1,0),Y:_e(j,2),label:ge(j,3)!=null?An(j,3,""):void 0,displayName:ge(j,4)!=null?An(j,4,""):void 0}})}function Gs(V){return{x:_e(V,1),y:_e(V,2),z:_e(V,3),visibility:ge(V,4)!=null?_e(V,4):void 0}}function Us(V,j){this.h=V,this.g=j,this.l=0}function bs(V,j,Q){return Rn(V,j),typeof V.g.canvas.transferToImageBitmap=="function"?Promise.resolve(V.g.canvas.transferToImageBitmap()):Q?Promise.resolve(V.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(V.g.canvas):(V.i===void 0&&(V.i=document.createElement("canvas")),new Promise(function(ht){V.i.height=V.g.canvas.height,V.i.width=V.g.canvas.width,V.i.getContext("2d",{}).drawImage(V.g.canvas,0,0,V.g.canvas.width,V.g.canvas.height),ht(V.i)}))}function Rn(V,j){var Q=V.g;if(V.m===void 0){var ht=oi(Q,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),gt=oi(Q,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Rt=Q.createProgram();if(Q.attachShader(Rt,ht),Q.attachShader(Rt,gt),Q.linkProgram(Rt),!Q.getProgramParameter(Rt,Q.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Q.getProgramInfoLog(Rt));ht=V.m=Rt,Q.useProgram(ht),gt=Q.getUniformLocation(ht,"sampler0"),V.j={I:Q.getAttribLocation(ht,"aVertex"),H:Q.getAttribLocation(ht,"aTex"),da:gt},V.s=Q.createBuffer(),Q.bindBuffer(Q.ARRAY_BUFFER,V.s),Q.enableVertexAttribArray(V.j.I),Q.vertexAttribPointer(V.j.I,2,Q.FLOAT,!1,0,0),Q.bufferData(Q.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Q.STATIC_DRAW),Q.bindBuffer(Q.ARRAY_BUFFER,null),V.o=Q.createBuffer(),Q.bindBuffer(Q.ARRAY_BUFFER,V.o),Q.enableVertexAttribArray(V.j.H),Q.vertexAttribPointer(V.j.H,2,Q.FLOAT,!1,0,0),Q.bufferData(Q.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Q.STATIC_DRAW),Q.bindBuffer(Q.ARRAY_BUFFER,null),Q.uniform1i(gt,0)}ht=V.j,Q.useProgram(V.m),Q.canvas.width=j.width,Q.canvas.height=j.height,Q.viewport(0,0,j.width,j.height),Q.activeTexture(Q.TEXTURE0),V.h.bindTexture2d(j.glName),Q.enableVertexAttribArray(ht.I),Q.bindBuffer(Q.ARRAY_BUFFER,V.s),Q.vertexAttribPointer(ht.I,2,Q.FLOAT,!1,0,0),Q.enableVertexAttribArray(ht.H),Q.bindBuffer(Q.ARRAY_BUFFER,V.o),Q.vertexAttribPointer(ht.H,2,Q.FLOAT,!1,0,0),Q.bindFramebuffer(Q.DRAW_FRAMEBUFFER?Q.DRAW_FRAMEBUFFER:Q.FRAMEBUFFER,null),Q.clearColor(0,0,0,0),Q.clear(Q.COLOR_BUFFER_BIT),Q.colorMask(!0,!0,!0,!0),Q.drawArrays(Q.TRIANGLE_FAN,0,4),Q.disableVertexAttribArray(ht.I),Q.disableVertexAttribArray(ht.H),Q.bindBuffer(Q.ARRAY_BUFFER,null),V.h.bindTexture2d(0)}function As(V){this.g=V}var Gi=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function br(V,j){return j+V}function Ui(V,j){window[V]=j}function Tn(V){var j=document.createElement("script");return j.setAttribute("src",V),j.setAttribute("crossorigin","anonymous"),new Promise(function(Q){j.addEventListener("load",function(){Q()},!1),j.addEventListener("error",function(){Q()},!1),document.body.appendChild(j)})}function Ar(){return Pe(this,function V(){return E(V,function(j){switch(j.g){case 1:return j.m=2,v(j,WebAssembly.instantiate(Gi),4);case 4:j.g=3,j.m=0;break;case 2:return j.m=0,j.j=null,j.return(!1);case 3:return j.return(!0)}})})}function _n(V){if(this.g=V,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=V&&V.locateFile||br,typeof window=="object")var j=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")j=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=j,V.options){j=x(Object.keys(V.options));for(var Q=j.next();!Q.done;Q=j.next()){Q=Q.value;var ht=V.options[Q].default;ht!==void 0&&(this.j[Q]=typeof ht=="function"?ht():ht)}}}c=_n.prototype,c.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Vi(V,j){return V.g.files===void 0?[]:typeof V.g.files=="function"?V.g.files(j):V.g.files}function zi(V){return Pe(V,function j(){var Q=this,ht,gt,Rt,Ct,et,lt,Tt,Lt,Kt,Xt,Nt;return E(j,function(Ft){switch(Ft.g){case 1:return ht=Q,Q.R?(gt=Vi(Q,Q.j),v(Ft,Ar(),2)):Ft.return();case 2:if(Rt=Ft.h,typeof window=="object")return Ui("createMediapipeSolutionsWasm",{locateFile:Q.locateFile}),Ui("createMediapipeSolutionsPackedAssets",{locateFile:Q.locateFile}),lt=gt.filter(function($){return $.data!==void 0}),Tt=gt.filter(function($){return $.data===void 0}),Lt=Promise.all(lt.map(function($){var Z=ps(ht,$.url);if($.path!==void 0){var tt=$.path;Z=Z.then(function(nt){return ht.overrideFile(tt,nt),Promise.resolve(nt)})}return Z})),Kt=Promise.all(Tt.map(function($){return $.simd===void 0||$.simd&&Rt||!$.simd&&!Rt?Tn(ht.locateFile($.url,ht.S)):Promise.resolve()})).then(function(){return Pe(ht,function $(){var Z,tt,nt=this;return E($,function(ut){if(ut.g==1)return Z=window.createMediapipeSolutionsWasm,tt=window.createMediapipeSolutionsPackedAssets,v(ut,Z(tt),2);nt.h=ut.h,ut.g=0})})}),Xt=function(){return Pe(ht,function $(){var Z=this;return E($,function(tt){return Z.g.graph&&Z.g.graph.url?tt=v(tt,ps(Z,Z.g.graph.url),0):(tt.g=0,tt=void 0),tt})})}(),v(Ft,Promise.all([Kt,Lt,Xt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Ct=gt.filter(function($){return $.simd===void 0||$.simd&&Rt||!$.simd&&!Rt}).map(function($){return ht.locateFile($.url,ht.S)}),importScripts.apply(null,t(Ct)),v(Ft,createMediapipeSolutionsWasm(Module),6);case 6:Q.h=Ft.h,Q.l=new OffscreenCanvas(1,1),Q.h.canvas=Q.l,et=Q.h.GL.createContext(Q.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),Q.h.GL.makeContextCurrent(et),Ft.g=4;break;case 7:if(Q.l=document.createElement("canvas"),Nt=Q.l.getContext("webgl2",{}),!Nt&&(Nt=Q.l.getContext("webgl",{}),!Nt))return alert("Failed to create WebGL canvas context when passing video frame."),Ft.return();Q.D=Nt,Q.h.canvas=Q.l,Q.h.createContext(Q.l,!0,!0,{});case 4:Q.i=new Q.h.SolutionWasm,Q.R=!1,Ft.g=0}})})}function fa(V){return Pe(V,function j(){var Q=this,ht,gt,Rt,Ct,et,lt,Tt,Lt;return E(j,function(Kt){if(Kt.g==1){if(Q.g.graph&&Q.g.graph.url&&Q.P===Q.g.graph.url)return Kt.return();if(Q.o=!0,!Q.g.graph||!Q.g.graph.url){Kt.g=2;return}return Q.P=Q.g.graph.url,v(Kt,ps(Q,Q.g.graph.url),3)}for(Kt.g!=2&&(ht=Kt.h,Q.i.loadGraph(ht)),gt=x(Object.keys(Q.B)),Rt=gt.next();!Rt.done;Rt=gt.next())Ct=Rt.value,Q.i.overrideFile(Ct,Q.B[Ct]);if(Q.B={},Q.g.listeners)for(et=x(Q.g.listeners),lt=et.next();!lt.done;lt=et.next())Tt=lt.value,ca(Q,Tt);Lt=Q.j,Q.j={},Q.setOptions(Lt),Kt.g=0})})}c.reset=function(){return Pe(this,function V(){var j=this;return E(V,function(Q){j.i&&(j.i.reset(),j.m={},j.s={}),Q.g=0})})},c.setOptions=function(V,j){var Q=this;if(j=j||this.g.options){for(var ht=[],gt=[],Rt={},Ct=x(Object.keys(V)),et=Ct.next();!et.done;Rt={K:Rt.K,L:Rt.L},et=Ct.next()){var lt=et.value;lt in this.j&&this.j[lt]===V[lt]||(this.j[lt]=V[lt],et=j[lt],et!==void 0&&(et.onChange&&(Rt.K=et.onChange,Rt.L=V[lt],ht.push(function(Tt){return function(){return Pe(Q,function Lt(){var Kt,Xt=this;return E(Lt,function(Nt){if(Nt.g==1)return v(Nt,Tt.K(Tt.L),2);Kt=Nt.h,Kt===!0&&(Xt.o=!0),Nt.g=0})})}}(Rt))),et.graphOptionXref&&(lt={valueNumber:et.type===1?V[lt]:0,valueBoolean:et.type===0?V[lt]:!1,valueString:et.type===2?V[lt]:""},et=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),et.graphOptionXref),lt),gt.push(et))))}(ht.length!==0||gt.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(gt),this.u=(this.u===void 0?[]:this.u).concat(ht))}};function Rr(V){return Pe(V,function j(){var Q=this,ht,gt,Rt,Ct,et,lt,Tt;return E(j,function(Lt){switch(Lt.g){case 1:if(!Q.o)return Lt.return();if(!Q.u){Lt.g=2;break}ht=x(Q.u),gt=ht.next();case 3:if(gt.done){Lt.g=5;break}return Rt=gt.value,v(Lt,Rt(),4);case 4:gt=ht.next(),Lt.g=3;break;case 5:Q.u=void 0;case 2:if(Q.A){for(Ct=new Q.h.GraphOptionChangeRequestList,et=x(Q.A),lt=et.next();!lt.done;lt=et.next())Tt=lt.value,Ct.push_back(Tt);Q.i.changeOptions(Ct),Ct.delete(),Q.A=void 0}Q.o=!1,Lt.g=0}})})}c.initialize=function(){return Pe(this,function V(){var j=this;return E(V,function(Q){return Q.g==1?v(Q,zi(j),2):Q.g!=3?v(Q,fa(j),3):v(Q,Rr(j),0)})})};function ps(V,j){return Pe(V,function Q(){var ht=this,gt,Rt;return E(Q,function(Ct){return j in ht.F?Ct.return(ht.F[j]):(gt=ht.locateFile(j,""),Rt=fetch(gt).then(function(et){return et.arrayBuffer()}),ht.F[j]=Rt,Ct.return(Rt))})})}c.overrideFile=function(V,j){this.i?this.i.overrideFile(V,j):this.B[V]=j},c.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},c.send=function(V,j){return Pe(this,function Q(){var ht=this,gt,Rt,Ct,et,lt,Tt,Lt,Kt,Xt;return E(Q,function(Nt){switch(Nt.g){case 1:return ht.g.inputs?(gt=1e3*(j??performance.now()),v(Nt,ht.C,2)):Nt.return();case 2:return v(Nt,ht.initialize(),3);case 3:for(Rt=new ht.h.PacketDataList,Ct=x(Object.keys(V)),et=Ct.next();!et.done;et=Ct.next())if(lt=et.value,Tt=ht.g.inputs[lt]){t:{var Ft=ht,$=V[lt];switch(Tt.type){case"video":var Z=Ft.m[Tt.stream];if(Z||(Z=new Us(Ft.h,Ft.D),Ft.m[Tt.stream]=Z),Ft=Z,Ft.l===0&&(Ft.l=Ft.h.createTexture()),typeof HTMLVideoElement<"u"&&$ instanceof HTMLVideoElement){var tt=$.videoWidth;Z=$.videoHeight}else typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(tt=$.naturalWidth,Z=$.naturalHeight):(tt=$.width,Z=$.height);Z={glName:Ft.l,width:tt,height:Z},tt=Ft.g,tt.canvas.width=Z.width,tt.canvas.height=Z.height,tt.activeTexture(tt.TEXTURE0),Ft.h.bindTexture2d(Ft.l),tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,tt.RGBA,tt.UNSIGNED_BYTE,$),Ft.h.bindTexture2d(0),Ft=Z;break t;case"detections":for(Z=Ft.m[Tt.stream],Z||(Z=new As(Ft.h),Ft.m[Tt.stream]=Z),Ft=Z,Ft.data||(Ft.data=new Ft.g.DetectionListData),Ft.data.reset($.length),Z=0;Z<$.length;++Z){tt=$[Z];var nt=Ft.data,ut=nt.setBoundingBox,at=Z,ot=tt.T,dt=new ri;ue(dt,1,ot.Z),ue(dt,2,ot.$),ue(dt,3,ot.height),ue(dt,4,ot.width),ue(dt,5,ot.rotation),ue(dt,6,ot.X);var Et=ot=new ee;ae(Et,1,ge(dt,1)),ae(Et,2,ge(dt,2)),ae(Et,3,ge(dt,3)),ae(Et,4,ge(dt,4)),ae(Et,5,ge(dt,5));var Pt=ge(dt,6);if(Pt!=null&&Pt!=null){yt(Et.g,48);var Ot=Et.g,Vt=Pt;Pt=0>Vt,Vt=Math.abs(Vt);var Ht=Vt>>>0;for(Vt=Math.floor((Vt-Ht)/4294967296),Vt>>>=0,Pt&&(Vt=~Vt>>>0,Ht=(~Ht>>>0)+1,4294967295<Ht&&(Ht=0,Vt++,4294967295<Vt&&(Vt=0))),K=Ht,q=Vt,Pt=K,Ht=q;0<Ht||127<Pt;)Ot.push(Pt&127|128),Pt=(Pt>>>7|Ht<<25)>>>0,Ht>>>=7;Ot.push(Pt)}if(Re(dt,Et),ot=fe(ot),ut.call(nt,at,ot),tt.O)for(nt=0;nt<tt.O.length;++nt)dt=tt.O[nt],Et=!!dt.visibility,ut=Ft.data,at=ut.addNormalizedLandmark,ot=Z,dt=Object.assign(Object.assign({},dt),{visibility:Et?dt.visibility:0}),Et=new Ge,ue(Et,1,dt.x),ue(Et,2,dt.y),ue(Et,3,dt.z),dt.visibility&&ue(Et,4,dt.visibility),Ot=dt=new ee,ae(Ot,1,ge(Et,1)),ae(Ot,2,ge(Et,2)),ae(Ot,3,ge(Et,3)),ae(Ot,4,ge(Et,4)),ae(Ot,5,ge(Et,5)),Re(Et,Ot),dt=fe(dt),at.call(ut,ot,dt);if(tt.M)for(nt=0;nt<tt.M.length;++nt){if(ut=Ft.data,at=ut.addClassification,ot=Z,dt=tt.M[nt],Et=new nn,ue(Et,2,dt.Y),dt.index&&ue(Et,1,dt.index),dt.label&&ue(Et,3,dt.label),dt.displayName&&ue(Et,4,dt.displayName),Ot=dt=new ee,Ht=ge(Et,1),Ht!=null&&Ht!=null)if(yt(Ot.g,8),Pt=Ot.g,0<=Ht)yt(Pt,Ht);else{for(Vt=0;9>Vt;Vt++)Pt.push(Ht&127|128),Ht>>=7;Pt.push(1)}ae(Ot,2,ge(Et,2)),Pt=ge(Et,3),Pt!=null&&(Pt=z(Pt),yt(Ot.g,26),yt(Ot.g,Pt.length),te(Ot,Ot.g.end()),te(Ot,Pt)),Pt=ge(Et,4),Pt!=null&&(Pt=z(Pt),yt(Ot.g,34),yt(Ot.g,Pt.length),te(Ot,Ot.g.end()),te(Ot,Pt)),Re(Et,Ot),dt=fe(dt),at.call(ut,ot,dt)}}Ft=Ft.data;break t;default:Ft={}}}switch(Lt=Ft,Kt=Tt.stream,Tt.type){case"video":Rt.pushTexture2d(Object.assign(Object.assign({},Lt),{stream:Kt,timestamp:gt}));break;case"detections":Xt=Lt,Xt.stream=Kt,Xt.timestamp=gt,Rt.pushDetectionList(Xt);break;default:throw Error("Unknown input config type: '"+Tt.type+"'")}}return ht.i.send(Rt),v(Nt,ht.C,4);case 4:Rt.delete(),Nt.g=0}})})};function Ir(V,j,Q){return Pe(V,function ht(){var gt,Rt,Ct,et,lt,Tt,Lt=this,Kt,Xt,Nt,Ft,$,Z,tt,nt;return E(ht,function(ut){switch(ut.g){case 1:if(!Q)return ut.return(j);for(gt={},Rt=0,Ct=x(Object.keys(Q)),et=Ct.next();!et.done;et=Ct.next())lt=et.value,Tt=Q[lt],typeof Tt!="string"&&Tt.type==="texture"&&j[Tt.stream]!==void 0&&++Rt;1<Rt&&(Lt.G=!1),Kt=x(Object.keys(Q)),et=Kt.next();case 2:if(et.done){ut.g=4;break}if(Xt=et.value,Nt=Q[Xt],typeof Nt=="string")return tt=gt,nt=Xt,v(ut,Pr(Lt,Xt,j[Nt]),14);if(Ft=j[Nt.stream],Nt.type==="detection_list"){if(Ft){for(var at=Ft.getRectList(),ot=Ft.getLandmarksList(),dt=Ft.getClassificationsList(),Et=[],Pt=0;Pt<at.size();++Pt){var Ot=at.get(Pt);t:{var Vt=new ri;for(Ot=new xt(Ot);It(Ot);)switch(Ot.i){case 13:var Ht=Bt(Ot);ue(Vt,1,Ht);break;case 21:Ht=Bt(Ot),ue(Vt,2,Ht);break;case 29:Ht=Bt(Ot),ue(Vt,3,Ht);break;case 37:Ht=Bt(Ot),ue(Vt,4,Ht);break;case 45:Ht=Bt(Ot),ue(Vt,5,Ht);break;case 48:Ht=ft(Ot.g),ue(Vt,6,Ht);break;default:if(!xe(Vt,Ot))break t}}Vt={Z:_e(Vt,1),$:_e(Vt,2),height:_e(Vt,3),width:_e(Vt,4),rotation:_e(Vt,5,0),X:An(Vt,6,0)},Ot=wt(Er(ot.get(Pt)),Ge).map(Gs);var Qt=dt.get(Pt);t:for(Ht=new Jn,Qt=new xt(Qt);It(Qt);)switch(Qt.i){case 10:Ht.addClassification(Zt(Qt,new nn,Ds));break;default:if(!xe(Ht,Qt))break t}Vt={T:Vt,O:Ot,M:$i(Ht)},Et.push(Vt)}at=Et}else at=[];gt[Xt]=at,ut.g=7;break}if(Nt.type==="proto_list"){if(Ft){for(at=Array(Ft.size()),ot=0;ot<Ft.size();ot++)at[ot]=Ft.get(ot);Ft.delete()}else at=[];gt[Xt]=at,ut.g=7;break}if(Ft===void 0){ut.g=3;break}if(Nt.type==="float_list"){gt[Xt]=Ft,ut.g=7;break}if(Nt.type==="proto"){gt[Xt]=Ft,ut.g=7;break}if(Nt.type!=="texture")throw Error("Unknown output config type: '"+Nt.type+"'");return $=Lt.s[Xt],$||($=new Us(Lt.h,Lt.D),Lt.s[Xt]=$),v(ut,bs($,Ft,Lt.G),13);case 13:Z=ut.h,gt[Xt]=Z;case 7:Nt.transform&&gt[Xt]&&(gt[Xt]=Nt.transform(gt[Xt])),ut.g=3;break;case 14:tt[nt]=ut.h;case 3:et=Kt.next(),ut.g=2;break;case 4:return ut.return(gt)}})})}function Pr(V,j,Q){return Pe(V,function ht(){var gt=this,Rt;return E(ht,function(Ct){return typeof Q=="number"||Q instanceof Uint8Array||Q instanceof gt.h.Uint8BlobList?Ct.return(Q):Q instanceof gt.h.Texture2dDataOut?(Rt=gt.s[j],Rt||(Rt=new Us(gt.h,gt.D),gt.s[j]=Rt),Ct.return(bs(Rt,Q,gt.G))):Ct.return(void 0)})})}function ca(V,j){for(var Q=j.name||"$",ht=[].concat(t(j.wants)),gt=new V.h.StringList,Rt=x(j.wants),Ct=Rt.next();!Ct.done;Ct=Rt.next())gt.push_back(Ct.value);Rt=V.h.PacketListener.implement({onResults:function(et){for(var lt={},Tt=0;Tt<j.wants.length;++Tt)lt[ht[Tt]]=et.get(Tt);var Lt=V.listeners[Q];Lt&&(V.C=Ir(V,lt,j.outs).then(function(Kt){Kt=Lt(Kt);for(var Xt=0;Xt<j.wants.length;++Xt){var Nt=lt[ht[Xt]];typeof Nt=="object"&&Nt.hasOwnProperty&&Nt.hasOwnProperty("delete")&&Nt.delete()}Kt&&(V.C=Kt)}))}}),V.i.attachMultiListener(gt,Rt),gt.delete()}c.onResults=function(V,j){this.listeners[j||"$"]=V},P("Solution",_n),P("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function da(V){V=wr(V);var j=V.getMesh();if(!j)return V;var Q=new Float32Array(j.getVertexBufferList());j.getVertexBufferList=function(){return Q};var ht=new Uint32Array(j.getIndexBufferList());return j.getIndexBufferList=function(){return ht},V}var ui={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(V){return V.map(da)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(V){return V.map(function(j){return wt(Er(j),Ge).map(Gs)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Rs=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],li=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],hi=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],fi=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Vs=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],ci=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],ki=[].concat(t(Rs),t(li),t(hi),t(fi),t(Vs),t(ci));function di(V){V=V||{},V=Object.assign(Object.assign({},ui),V),this.g=new _n(V)}c=di.prototype,c.close=function(){return this.g.close(),Promise.resolve()},c.onResults=function(V){this.g.onResults(V)},c.initialize=function(){return Pe(this,function V(){var j=this;return E(V,function(Q){return v(Q,j.g.initialize(),0)})})},c.reset=function(){this.g.reset()},c.send=function(V){return Pe(this,function j(){var Q=this;return E(j,function(ht){return v(ht,Q.g.send(V),0)})})},c.setOptions=function(V){this.g.setOptions(V)},P("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),P("FaceMesh",di),P("FACEMESH_LIPS",Rs),P("FACEMESH_LEFT_EYE",li),P("FACEMESH_LEFT_EYEBROW",hi),P("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),P("FACEMESH_RIGHT_EYE",fi),P("FACEMESH_RIGHT_EYEBROW",Vs),P("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),P("FACEMESH_FACE_OVAL",ci),P("FACEMESH_CONTOURS",ki),P("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),P("matrixDataToMatrix",function(V){for(var j=V.getCols(),Q=V.getRows(),ht=V.getPackedDataList(),gt=[],Rt=0;Rt<Q;Rt++)gt.push(Array(j));for(Rt=0;Rt<Q;Rt++)for(var Ct=0;Ct<j;Ct++){var et=V.getLayout()===1?Rt*j+Ct:Ct*Q+Rt;gt[Rt][Ct]=ht[et]}return gt}),P("VERSION","0.4.1633559619")}).call(Kn);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ie;(function(c){c[c.float32=0]="float32",c[c.int32=1]="int32",c[c.bool=2]="bool",c[c.string=3]="string",c[c.complex64=4]="complex64"})(Ie||(Ie={}));var ka;(function(c){c[c.linear=0]="linear",c[c.relu=1]="relu",c[c.relu6=2]="relu6",c[c.prelu=3]="prelu",c[c.leakyrelu=4]="leakyrelu",c[c.sigmoid=5]="sigmoid",c[c.elu=6]="elu"})(ka||(ka={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let F0;function MO(c){F0=c.wasm.cwrap(Aa,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function NO(c){const{inputs:e,backend:f,attrs:y}=c,{a:S,b:C,bias:o,preluActivationWeights:x}=e;if(S.dtype!=="float32"||C.dtype!=="float32")throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:t,transposeB:s,activation:l,leakyreluAlpha:a}=y,r=f.dataIdMap.get(S.dataId).id,i=f.dataIdMap.get(C.dataId).id;let n=0;if(o!=null){const b=f.dataIdMap.get(o.dataId);if(b.shape.length!==1)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${b.shape.length}.`);n=b.id}const h=x==null?0:f.dataIdMap.get(x.dataId).id,d=ka[l];if(d==null)throw new Error(`${l} activation not yet supported for FusedConv2D in the wasm backend.`);const u=t?S.shape[2]:S.shape[1],p=s?C.shape[1]:C.shape[2],v=Te(S.shape.slice(0,-2),C.shape.slice(0,-2)),m=f.makeOutput([...v,u,p],S.dtype),g=f.dataIdMap.get(m.dataId).id,T=new Uint8Array(new Int32Array(S.shape).buffer),w=new Uint8Array(new Int32Array(C.shape).buffer);return F0(r,T,S.shape.length,i,w,C.shape.length,t,s,d,n,h,a||0,g),m}const OO={kernelName:Aa,backendName:"wasm",setupFunc:MO,kernelFunc:NO};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ee(c,e){let f;function y(C){f=C.wasm.cwrap(c,null,["number","number","number"])}function S(C){const{backend:o,inputs:{x}}=C,t=o.dataIdMap.get(x.dataId).id,s=o.makeOutput(x.shape,e||x.dtype),l=o.dataIdMap.get(s.dataId).id;return bt(s.shape)===0||f(t,Ie[x.dtype],l),s}return{kernelName:c,backendName:"wasm",setupFunc:y,kernelFunc:S}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DO=Ee(Nh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LO=Ee(Oh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BO=Ee(Dh);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tn(c,e,f){let y;function S(o){y=o.wasm.cwrap(c,null,["number","array","number","number","array","number","number","number"])}function C(o){const{backend:x,inputs:t}=o,{a:s,b:l}=t,a=x.dataIdMap.get(s.dataId).id,r=x.dataIdMap.get(l.dataId).id,i=f??s.dtype,n=Te(s.shape,l.shape),h=x.makeOutput(n,i);if(bt(n)===0)return h;const d=new Uint8Array(new Int32Array(s.shape).buffer),u=new Uint8Array(new Int32Array(l.shape).buffer),p=x.dataIdMap.get(h.dataId).id;return(()=>y(a,d,s.shape.length,r,u,l.shape.length,Ie[s.dtype],p))(),h}return{kernelName:c,backendName:"wasm",setupFunc:S,kernelFunc:C}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $O=tn(Ho);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let M0;function GO(c){M0=c.wasm.cwrap(Yo,null,["array","number","number","number"])}function UO(c){const{inputs:e,backend:f}=c,y=f.makeOutput(e[0].shape,e[0].dtype);if(bt(y.shape)===0)return y;const S=e.map(x=>f.dataIdMap.get(x.dataId).id),C=new Uint8Array(new Int32Array(S).buffer),o=f.dataIdMap.get(y.dataId).id;return M0(C,S.length,Ie[y.dtype],o),y}const VO={kernelName:Yo,backendName:"wasm",setupFunc:GO,kernelFunc:UO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fl(c){const{inputs:{x:e},backend:f}=c;if(e.dtype==="string")return ys(f.readSync(e.dataId),e.shape,e.dtype);const y=f.makeOutput(e.shape,e.dtype),S=f.typedArrayFromHeap(e);return f.typedArrayFromHeap(y).set(S),y}const zO={kernelName:du,backendName:"wasm",kernelFunc:fl};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let N0;function kO(c){N0=c.wasm.cwrap(Gr,null,["number","array","number","number","number","array","number"])}function Ri(c){const{inputs:e,backend:f,attrs:y}=c,[S,C]=XO(e.x.shape,y.perm);let o=!0;for(let n=0;n<C.length;n++)C[n]!==n&&(o=!1);const x=WO(e.x.shape,y.perm),t={dataId:e.x.dataId,shape:S,dtype:e.x.dtype};if(o){const n=fl({inputs:e,backend:f});return n.shape=x,n}const s=f.makeOutput(x,t.dtype),l=f.dataIdMap.get(t.dataId).id,a=f.dataIdMap.get(s.dataId).id,r=new Uint8Array(new Int32Array(C).buffer),i=new Uint8Array(new Int32Array(t.shape).buffer);return N0(l,i,t.shape.length,Ie[t.dtype],a,r,C.length),s}function WO(c,e){const f=new Array(c.length);for(let y=0;y<f.length;y++)f[y]=c[e[y]];return f}function XO(c,e){const f=[],y=[];for(let S=0;S<c.length;++S)c[S]!==1&&f.push(c[S]),c[e[S]]!==1&&y.push(e[S]);for(let S=0;S<y.length;++S){let C=-1;for(let o=0;o<y.length;++o)y[o]>=S&&(C===-1||y[C]>y[o])&&(C=o);y[C]=S}return[f,y]}const HO={kernelName:Gr,backendName:"wasm",kernelFunc:Ri,setupFunc:kO};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Li(c,e,f){const y=c.shape,S=c.shape.length,C=Qe(e,y);let o=C;const x=Dn(o,S);let t=null,s=!1;if(x!=null){const l=new Array(S);for(let i=0;i<l.length;i++)l[i]=y[x[i]];o=dn(o.length,S),t=Ri({inputs:{x:c},attrs:{perm:x},backend:f});const a=f.dataIdMap.get(c.dataId).id;f.dataIdMap.get(t.dataId).id!==a&&(s=!0)}return{transposed:t,originalAxes:C,axes:o,inputWasTransposed:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let O0;function YO(c){O0=c.wasm.cwrap(Ko,null,["number, number, number"])}function KO(c){const{backend:e,inputs:f,attrs:y}=c,{axis:S,keepDims:C}=y,{x:o}=f;let t=e.dataIdMap.get(o.dataId).id,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Li(o,S,e);if(i){const v=e.dataIdMap.get(l.dataId).id;s=l,t=v}const n=s.shape.length;rn("all",a,n);const[h,d]=xn(s.shape,a),u=bt(d),p=e.makeOutput(h,o.dtype);if(bt(s.shape)!==0){const v=e.dataIdMap.get(p.dataId).id;O0(t,u,v)}if(i&&e.disposeData(l.dataId),C){const v=sn(p.shape,r);p.shape=v}return p}const jO={kernelName:Ko,backendName:"wasm",setupFunc:YO,kernelFunc:KO};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let D0;function ZO(c){D0=c.wasm.cwrap(jo,null,["number, number, number"])}function QO(c){const{backend:e,inputs:f,attrs:y}=c,{axis:S,keepDims:C}=y,{x:o}=f;let t=e.dataIdMap.get(o.dataId).id,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Li(o,S,e);if(i){const v=e.dataIdMap.get(l.dataId).id;s=l,t=v}const n=s.shape.length;rn("any",a,n);const[h,d]=xn(s.shape,a),u=bt(d),p=e.makeOutput(h,o.dtype);if(bt(s.shape)!==0){const v=e.dataIdMap.get(p.dataId).id;D0(t,u,v)}if(i&&e.disposeData(l.dataId),C){const v=sn(p.shape,r);p.shape=v}return p}const JO={kernelName:jo,backendName:"wasm",setupFunc:ZO,kernelFunc:QO};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0(c){let e;function f(S){e=S.wasm.cwrap(c,null,["number","number","number","number","number"])}function y(S){const{backend:C,inputs:o,attrs:x}=S,{axis:t}=x,{x:s}=o,l=C.dataIdMap.get(s.dataId).id;let a=l,r=s;const{transposed:i,axes:n,inputWasTransposed:h}=Li(s,t,C);if(h){const g=C.dataIdMap.get(i.dataId).id;g!==l&&(r=i,a=g)}const d=r.shape.slice(0,-1),u=C.makeOutput(d,"int32"),p=C.dataIdMap.get(u.dataId).id,v=bt(u.shape),m=r.shape[n[0]];return e(a,Ie[r.dtype],v,m,p),h&&C.disposeData(i.dataId),u}return{kernelName:c,backendName:"wasm",setupFunc:f,kernelFunc:y}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qO=L0(Lh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _O=L0(Bh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tD=Ee($h);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eD=Ee(Gh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nD=Ee(Uh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sD=tn(zh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iD=Ee(Vh);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let B0;function rD(c){B0=c.wasm.cwrap(Zo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function aD(c){const{inputs:e,attrs:f,backend:y}=c,S=e.x,C=y.dataIdMap.get(S.dataId).id,{filterSize:o,strides:x,pad:t,dimRoundingMode:s}=f,l=hs(S.shape,o,x,1,t,s),a=l.filterHeight,r=l.filterWidth,i=l.padInfo.top,n=l.padInfo.right,h=l.padInfo.bottom,d=l.padInfo.left,u=l.strideHeight,p=l.strideWidth,v=l.inChannels;if(l.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);if(l.dilationWidth!==1||l.dilationHeight!==1)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${l.dilationHeight}, ${l.dilationWidth}].`);const m=y.makeOutput(l.outShape,"float32"),g=y.dataIdMap.get(m.dataId).id;return B0(C,S.shape[0],S.shape[1],S.shape[2],a,r,i,n,h,d,u,p,v,g),m}const oD={kernelName:Zo,backendName:"wasm",setupFunc:rD,kernelFunc:aD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let $0;function uD(c){$0=c.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function lD(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{filterSize:C,strides:o,pad:x,dimRoundingMode:t,dataFormat:s}=y,l=ti(S.shape,C,o,1,x,t,s),a=f.makeOutput(l.outShape,S.dtype);return $0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),a}const hD={kernelName:kh,backendName:"wasm",setupFunc:uD,kernelFunc:lD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let G0;function fD(c){G0=c.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function cD(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,input:C}=e,{filterSize:o,strides:x,pad:t,dimRoundingMode:s}=y,l=ti(C.shape,o,x,1,t,s),a=f.makeOutput(C.shape,C.dtype);return G0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left,l.filterDepth,l.filterHeight,l.filterWidth),a}const dD={kernelName:nv,backendName:"wasm",setupFunc:fD,kernelFunc:cD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let U0;function pD(c){U0=c.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function vD(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,input:C}=e,{filterSize:o,strides:x,pad:t}=y,s=hs(C.shape,o,x,1,t),l=f.makeOutput(C.shape,C.dtype);return U0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(l.dataId).id,s.batchSize,s.inChannels,s.inHeight,s.inWidth,s.outHeight,s.outWidth,s.strideHeight,s.strideWidth,s.dilationHeight,s.dilationWidth,s.effectiveFilterHeight,s.effectiveFilterWidth,s.padInfo.top,s.padInfo.left,s.filterHeight,s.filterWidth),l}const mD={kernelName:ev,backendName:"wasm",setupFunc:pD,kernelFunc:vD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mn(c){const{inputs:e,attrs:f}=c,{x:y}=e,{shape:S}=f,C=bt(y.shape),o=Qp(S,C);return it(C===bt(o),()=>`new shape: ${o}, old shape: ${y.shape}. New shape and old shape must have the same number of elements.`),c.backend.incRef(y.dataId),{dataId:y.dataId,shape:o,dtype:y.dtype}}const gD={kernelName:Uf,backendName:"wasm",kernelFunc:Mn};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let V0;function xD(c){V0=c.wasm.cwrap(Qo,null,["number","array","number","number","array","number","number","number","number"])}function yD(c){const{inputs:e,backend:f,attrs:y}=c,{a:S,b:C}=e,{transposeA:o,transposeB:x}=y;if(S.dtype!=="float32"||C.dtype!=="float32")throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const t=S.shape.length,s=C.shape.length,l=o?S.shape[t-2]:S.shape[t-1],a=x?C.shape[s-1]:C.shape[s-2],r=o?S.shape[t-1]:S.shape[t-2],i=x?C.shape[s-2]:C.shape[s-1],n=S.shape.slice(0,-2),h=C.shape.slice(0,-2),d=bt(n),u=bt(h),v=Te(S.shape.slice(0,-2),C.shape.slice(0,-2)).concat([r,i]);it(l===a,()=>`Error in matMul: inner shapes (${l}) and (${a}) of Tensors with shapes ${S.shape} and ${C.shape} and transposeA=${o} and transposeB=${x} must match.`);const m=o?[d,l,r]:[d,r,l],g=x?[u,i,a]:[u,a,i],T=Mn({inputs:{x:S},backend:f,attrs:{shape:m}}),w=Mn({inputs:{x:C},backend:f,attrs:{shape:g}}),b=f.dataIdMap.get(T.dataId).id,E=f.dataIdMap.get(w.dataId).id,A=o?T.shape[2]:T.shape[1],R=x?w.shape[1]:w.shape[2],I=Math.max(d,u),P=f.makeOutput([I,A,R],T.dtype),M=f.dataIdMap.get(P.dataId).id,F=new Uint8Array(new Int32Array(T.shape).buffer),O=new Uint8Array(new Int32Array(w.shape).buffer);return V0(b,F,T.shape.length,E,O,w.shape.length,o,x,M),f.disposeData(T.dataId),f.disposeData(w.dataId),P.shape=v,P}const TD={kernelName:Qo,backendName:"wasm",setupFunc:xD,kernelFunc:yD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cr(c){const{inputs:{x:e},attrs:{begin:f,size:y},backend:S}=c,[C,o]=kc(e,f,y),x=sl(e.shape,C,o),t=S.readSync(e.dataId),s=S.makeOutput(o,e.dtype),l=Me(e.shape),a=S.dataIdMap.get(s.dataId);if(x){const n=il(C,l);return e.dtype==="string"?a.stringBytes=t.slice(n,n+bt(o)):S.typedArrayFromHeap(s).set(t.subarray(n,n+bt(o))),s}if(e.dtype==="string"){const n=ah(t,C,o,e.shape,e.dtype);return a.stringBytes=n,s}const r=S.typedArrayFromHeap(s),i=e.shape.length;if(i===2)SD(t,l[0],r,C,o);else if(i===3)CD(t,l[0],l[1],r,C,o);else if(i===4)ED(t,l[0],l[1],l[2],r,C,o);else{const n=ah(t,C,o,e.shape,e.dtype);r.set(n)}return s}function SD(c,e,f,y,S){let C=0;const o=y[0],x=y[1],t=o+S[0];for(let s=o;s<t;s++){const l=s*e+x;f.set(c.subarray(l,l+S[1]),C),C+=S[1]}}function CD(c,e,f,y,S,C){let o=0;const x=S[0],t=S[1],s=S[2],l=x+C[0],a=t+C[1];for(let r=x;r<l;r++)for(let i=t;i<a;i++){const n=r*e+i*f+s;y.set(c.subarray(n,n+C[2]),o),o+=C[2]}}function ED(c,e,f,y,S,C,o){let x=0;const t=C[0],s=C[1],l=C[2],a=t+o[0],r=s+o[1],i=l+o[2],n=C[3];for(let h=t;h<a;h++)for(let d=s;d<r;d++)for(let u=l;u<i;u++){const p=h*e+d*f+u*y+n;S.set(c.subarray(p,p+o[3]),x),x+=o[3]}}const wD={kernelName:Kf,backendName:"wasm",kernelFunc:cr};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bD(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{blockShape:C,crops:o}=y,x=C.reduce((u,p)=>u*p),t=Za(S.shape,C,x),s=Qa(t.length,C.length),l=Ja(S.shape,C,x),a=Kc(o,C.length),r=jc(l,o,C.length),i=Mn({inputs:{x:S},backend:f,attrs:{shape:t}}),n=Ri({inputs:{x:i},backend:f,attrs:{perm:s}}),h=Mn({inputs:{x:n},backend:f,attrs:{shape:l}}),d=cr({inputs:{x:h},backend:f,attrs:{begin:a,size:r}});return f.disposeData(i.dataId),f.disposeData(n.dataId),f.disposeData(h.dataId),d}const AD={kernelName:Wh,backendName:"wasm",kernelFunc:bD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let z0;function RD(c){z0=c.wasm.cwrap(Jo,null,["number","number","boolean","number","number","number"])}function ID(c){const{backend:e,inputs:f,attrs:y}=c,{x:S,weights:C}=f,{size:o}=y,x=C.shape.reduce((a,r)=>a*r,1)!==0,t=S.shape.length===1?[o]:[S.shape[0],o],s=e.makeOutput(t,C.dtype);function l(a){return e.dataIdMap.get(a.dataId).id}return z0(l(S),o,x,l(C),Ie[C.dtype],l(s)),s}const PD={kernelName:Jo,backendName:"wasm",setupFunc:RD,kernelFunc:ID};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FD=tn(Xh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MD(c){const{inputs:e,backend:f}=c,{s0:y,s1:S}=e,C=f.typedArrayFromHeap(y),o=f.typedArrayFromHeap(S),x=Te(Array.from(C),Array.from(o));return f.makeOutput([x.length],"int32",void 0,new Int32Array(x))}const ND={kernelName:Hh,backendName:"wasm",kernelFunc:MD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bi(c){const{inputs:{x:e},attrs:{dtype:f},backend:y}=c,S=y.makeOutput(e.shape,f),C=y.typedArrayFromHeap(e);return y.typedArrayFromHeap(S).set(C),S}const OD={kernelName:qo,backendName:"wasm",kernelFunc:Bi};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DD=Ee(Yh);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let k0;function LD(c){k0=c.wasm.cwrap(_o,null,["number","number","number","number"])}function BD(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{clipValueMin:C,clipValueMax:o}=y,x=f.dataIdMap.get(S.dataId).id,t=f.makeOutput(S.shape,S.dtype),s=f.dataIdMap.get(t.dataId).id;return k0(x,C,o,s),t}const $D={kernelName:_o,backendName:"wasm",setupFunc:LD,kernelFunc:BD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W0(c){const{inputs:e,backend:f}=c,y=Qe(c.attrs.axis,e[0].shape)[0],S=e.map(i=>i.shape);Xc(S,y);let C=Ms(e.map(i=>i.shape),y);const o=e.filter(i=>bt(i.shape)>0);if(o.length===1)return fl({inputs:{x:o[0]},backend:f});const x=f.makeOutput(C,e[0].dtype);if(bt(C)===0)return x;if(o[0].dtype==="string"){const i=o.map(v=>{const g=[-1,bt(v.shape.slice(y))];return Mn({inputs:{x:v},backend:f,attrs:{shape:g}})}),n=i.map(v=>({vals:f.readSync(v.dataId),shape:v.shape}));C=Ms(i.map(v=>v.shape),1);const h=i[0].shape[0]===1,d=zg(n,C,e[0].dtype,h),u=Ms(o.map(v=>v.shape),y);x.shape=u;const p=f.dataIdMap.get(x.dataId);return p.stringBytes=ud(d),i.forEach(v=>f.disposeData(v.dataId)),x}const t=bt(o[0].shape.slice(0,y));let s=0;const l=o.map(i=>{const n=bt(i.shape.slice(y));return s+=n,n}),a=o.map(i=>f.typedArrayFromHeap(i)),r=f.typedArrayFromHeap(x);for(let i=0;i<t;i++){let n=i*s;for(let h=0;h<a.length;h++){const d=l[h],u=i*d,p=a[h].subarray(u,u+d);r.set(p,n),n+=d}}return x}const GD={kernelName:Kh,backendName:"wasm",kernelFunc:W0};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let X0;function UD(c){X0=c.wasm.cwrap(tu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function VD(c){const{inputs:e,attrs:f,backend:y}=c,{x:S,filter:C}=e,o=y.dataIdMap.get(S.dataId).id,x=y.dataIdMap.get(C.dataId).id,{strides:t,dilations:s,pad:l,dimRoundingMode:a,dataFormat:r}=f,i=Oi(r),n=cn(S.shape,C.shape,t,s,l,a,!1,i),h=n.filterHeight,d=n.filterWidth,u=n.padInfo.top,p=n.padInfo.right,v=n.padInfo.bottom,m=n.padInfo.left,g=n.dilationHeight,T=n.dilationWidth,w=n.strideHeight,b=n.strideWidth,E=n.inChannels,A=n.outChannels,R=n.padInfo.type==="SAME"?1:0;if(n.dataFormat!=="channelsLast")throw new Error(`wasm backend Conv2D does not support dataFormat:'${n.dataFormat}'. Please use 'channelsLast'.`);const I=y.makeOutput(n.outShape,"float32"),P=y.dataIdMap.get(I.dataId).id;return X0(o,S.shape[0],S.shape[1],S.shape[2],x,h,d,u,p,v,m,R,g,T,w,b,E,A,P),I}const zD={kernelName:tu,backendName:"wasm",setupFunc:UD,kernelFunc:VD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let H0;function kD(c){H0=c.wasm.cwrap(eu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function WD(c){const{backend:e,inputs:f,attrs:y}=c,{dy:S,filter:C}=f,{strides:o,pad:x,dataFormat:t,dimRoundingMode:s,inputShape:l}=y,a=1,r=Oi(t),i=cn(l,C.shape,o,a,x,s,!1,r),{batchSize:n,filterHeight:h,filterWidth:d,inChannels:u,inHeight:p,inWidth:v,outChannels:m,outHeight:g,outWidth:T,strideHeight:w,strideWidth:b}=i,E=h-1-i.padInfo.top,A=d-1-i.padInfo.left,R=i.dataFormat==="channelsLast",I=Me(i.inShape),P=Me(S.shape),[M,F,O]=Me(C.shape),D=I[0],L=R?I[1]:I[2],z=R?I[2]:1,X=R?1:I[1],H=P[0],J=R?P[1]:P[2],G=R?P[2]:1,k=R?1:P[1],N=e.makeOutput(i.inShape,"float32"),B=e.dataIdMap.get(N.dataId).id,U=e.dataIdMap.get(S.dataId).id,W=e.dataIdMap.get(C.dataId).id;return H0(U,W,n,h,d,p,v,u,g,T,m,w,b,E,A,M,F,O,D,L,z,X,H,J,G,k,B),N}const XD={kernelName:eu,backendName:"wasm",setupFunc:kD,kernelFunc:WD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Y0;function HD(c){Y0=c.wasm.cwrap(nu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function YD(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C}=e,{strides:o,pad:x,dilations:t}=y;if(S.dtype!=="float32")throw new Error(`Tensor x must have dtype float32, got ${S.dtype}`);if(C.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${C.dtype}`);const s=Ni(S.shape,C.shape,o,t,x),l=f.makeOutput(s.outShape,S.dtype);return Y0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(l.dataId).id,s.batchSize,s.inDepth,s.inHeight,s.inWidth,s.inChannels,s.outDepth,s.outHeight,s.outWidth,s.outChannels,s.strideDepth,s.strideHeight,s.strideWidth,s.dilationDepth,s.dilationHeight,s.dilationWidth,s.filterDepth,s.filterHeight,s.filterWidth,s.padInfo.front,s.padInfo.top,s.padInfo.left),l}const KD={kernelName:nu,backendName:"wasm",setupFunc:HD,kernelFunc:YD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let K0;function jD(c){K0=c.wasm.cwrap(jh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function ZD(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,dy:C}=e,{strides:o,pad:x,filterShape:t}=y;if(S.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${S.dtype}`);if(C.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${C.dtype}`);const s=Ni(S.shape,t,o,1,x),l=f.makeOutput(s.filterShape,C.dtype);return K0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(l.dataId).id,s.batchSize,s.inDepth,s.inHeight,s.inWidth,s.inChannels,s.outDepth,s.outHeight,s.outWidth,s.outChannels,s.strideDepth,s.strideHeight,s.strideWidth,s.dilationDepth,s.dilationHeight,s.dilationWidth,s.filterDepth,s.filterHeight,s.filterWidth,s.padInfo.front,s.padInfo.top,s.padInfo.left),l}const QD={kernelName:jh,backendName:"wasm",setupFunc:jD,kernelFunc:ZD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let j0;function JD(c){j0=c.wasm.cwrap(su,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function qD(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,filter:C}=e,{pad:o,strides:x,inputShape:t}=y;if(S.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${S.dtype}`);if(C.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${C.dtype}`);const s=Ni(t,C.shape,x,1,o),l=f.makeOutput(s.inShape,S.dtype);return j0(f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(l.dataId).id,s.batchSize,s.inDepth,s.inHeight,s.inWidth,s.inChannels,s.outDepth,s.outHeight,s.outWidth,s.outChannels,s.strideDepth,s.strideHeight,s.strideWidth,s.dilationDepth,s.dilationHeight,s.dilationWidth,s.filterDepth,s.filterHeight,s.filterWidth,s.padInfo.front,s.padInfo.top,s.padInfo.left),l}const _D={kernelName:su,backendName:"wasm",setupFunc:JD,kernelFunc:qD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tL=Ee(Zh);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eL=Ee(Qh);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var hh;(function(c){c[c.bilinear=0]="bilinear",c[c.nearest=1]="nearest"})(hh||(hh={}));let Z0;function nL(c){Z0=c.wasm.cwrap(au,null,["number","number","number","number","array","number","number","number","number","number"])}function sL(c){const{backend:e,inputs:f,attrs:y}=c,{method:S,extrapolationValue:C,cropSize:o}=y,{image:x,boxes:t,boxInd:s}=f,l=t.shape[0],[a,r]=o,i=[l,a,r,x.shape[3]];let n=e.dataIdMap.get(x.dataId),h;x.dtype!=="float32"&&(h=Bi({backend:e,inputs:{x},attrs:{dtype:"float32"}}),n=e.dataIdMap.get(h.dataId));const d=n.id,u=e.dataIdMap.get(t.dataId).id,p=e.dataIdMap.get(s.dataId).id,v=e.makeOutput(i,"float32"),m=e.dataIdMap.get(v.dataId).id,g=new Uint8Array(new Int32Array(x.shape).buffer);return Z0(d,u,p,l,g,a,r,hh[S],C,m),h!=null&&e.disposeData(h.dataId),v}const iL={kernelName:au,backendName:"wasm",setupFunc:nL,kernelFunc:sL};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Q0;function rL(c){Q0=c.wasm.cwrap(iu,null,["number","number","number","number","number","number"])}function aL(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C,exclusive:o,reverse:x}=y,t=S.shape.length;it(S.dtype==="float32"||S.dtype==="int32",()=>`cumprod does not support ${S.dtype} tensors in the WASM backend`);const s=Dn([C],t);let l=S;s!==null&&(l=Ri({inputs:{x:S},attrs:{perm:s},backend:f}));const a=dn(1,t)[0];rn("cumprod",[a],t);const r=f.makeOutput(l.shape,l.dtype),i=l.shape[a],n=f.dataIdMap.get(l.dataId).id,h=f.dataIdMap.get(r.dataId).id;Q0(n,o?1:0,x?1:0,i,h,Ie[S.dtype]);let d=r;if(s!==null){const u=Ka(s);d=Ri({inputs:{x:r},attrs:{perm:u},backend:f}),f.disposeData(l.dataId),f.disposeData(r.dataId)}return d}const oL={kernelName:iu,backendName:"wasm",setupFunc:rL,kernelFunc:aL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let J0;function uL(c){J0=c.wasm.cwrap(ru,null,["number","number","number","number","number","number"])}function lL(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{axis:C,exclusive:o,reverse:x}=y,t=S.shape.length;it(S.dtype==="float32"||S.dtype==="int32",()=>`cumsum does not support ${S.dtype} tensors in the WASM backend`);const s=Dn([C],t);let l=S;s!==null&&(l=Ri({inputs:{x:S},attrs:{perm:s},backend:f}));const a=dn(1,t)[0];rn("cumsum",[a],t);const r=f.makeOutput(l.shape,l.dtype),i=l.shape[a],n=f.dataIdMap.get(l.dataId).id,h=f.dataIdMap.get(r.dataId).id;J0(n,o?1:0,x?1:0,i,h,Ie[S.dtype]);let d=r;if(s!==null){const u=Ka(s);d=Ri({inputs:{x:r},attrs:{perm:u},backend:f}),f.disposeData(l.dataId),f.disposeData(r.dataId)}return d}const hL={kernelName:ru,backendName:"wasm",setupFunc:uL,kernelFunc:lL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let q0;function fL(c){q0=c.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])}function cL(c){const{backend:e,inputs:f,attrs:y}=c,{x:S,weights:C}=f,{size:o,binaryOutput:x}=y,t=C.shape.reduce((r,i)=>r*i,1)!==0,s=S.shape.length===1?[o]:[S.shape[0],o],l=e.makeOutput(s,C.dtype);function a(r){return e.dataIdMap.get(r.dataId).id}return q0(a(S),new Uint8Array(new Int32Array(S.shape).buffer),S.shape.length,o,t,a(C),Ie[C.dtype],x,a(l)),l}const dL={kernelName:Jh,backendName:"wasm",setupFunc:fL,kernelFunc:cL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _0;function pL(c){_0=c.wasm.cwrap(ou,null,["number","number","number","array","number","array","array","number","number"])}function vL(c){const{backend:e,inputs:f,attrs:y}=c,{x:S}=f,{blockSize:C,dataFormat:o}=y,x=S.shape[0],t=o==="NHWC"?S.shape[1]:S.shape[2],s=o==="NHWC"?S.shape[2]:S.shape[3],l=o==="NHWC"?S.shape[3]:S.shape[1],a=t*C,r=s*C,i=l/(C*C),n=o==="NHWC"?[x,a,r,i]:[x,i,a,r],h=e.makeOutput(n,"float32"),u=e.dataIdMap.get(S.dataId).id,p=new Uint8Array(new Int32Array(Me(S.shape)).buffer),v=new Uint8Array(new Int32Array(n).buffer),m=new Uint8Array(new Int32Array(Me(n)).buffer),g=e.dataIdMap.get(h.dataId).id;return _0(u,C,o==="NHWC"?1:0,p,S.shape.length-1,v,m,n.length,g),h}const mL={kernelName:ou,backendName:"wasm",setupFunc:pL,kernelFunc:vL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let t1;function gL(c){t1=c.wasm.cwrap(uu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function xL(c){const{inputs:e,attrs:f,backend:y}=c,{x:S,filter:C}=e,o=y.dataIdMap.get(S.dataId).id,x=y.dataIdMap.get(C.dataId).id,{strides:t,dilations:s,pad:l,dimRoundingMode:a}=f,r=s??[1,1],i=cn(S.shape,C.shape,t,r,l,a,!0),n=i.filterHeight,h=i.filterWidth,d=i.padInfo.top,u=i.padInfo.right,p=i.padInfo.bottom,v=i.padInfo.left,m=i.dilationHeight,g=i.dilationWidth,T=i.strideHeight,w=i.strideWidth,b=i.inChannels,E=i.outChannels,A=i.padInfo.type==="SAME"?1:0;if(i.dataFormat!=="channelsLast")throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${i.dataFormat}'. Please use 'channelsLast'.`);const R=y.makeOutput(i.outShape,"float32"),I=y.dataIdMap.get(R.dataId).id;return t1(o,S.shape[0],S.shape[1],S.shape[2],x,n,h,d,u,p,v,A,m,g,T,w,b,E,I),R}const yL={kernelName:uu,backendName:"wasm",setupFunc:gL,kernelFunc:xL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e1;function TL(c){e1=c.wasm.cwrap("Diag",null,["number","number","number","number"])}function SL(c){const{inputs:e,backend:f}=c,{x:y}=e,S=bt(y.shape),C=f.makeOutput([...y.shape,...y.shape],y.dtype);return e1(f.dataIdMap.get(y.dataId).id,Ie[y.dtype],S,f.dataIdMap.get(C.dataId).id),C}const CL={kernelName:qh,backendName:"wasm",setupFunc:TL,kernelFunc:SL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let n1;function EL(c){n1=c.wasm.cwrap(lu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function wL(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C}=e,{strides:o,pad:x,dilations:t}=y;if(S.dtype!==C.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${S.dtype} and ${C.dtype}`);const s=Ha(S.shape,C.shape,o,x,"NHWC",t),l=f.makeOutput(s.outShape,S.dtype);return n1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(l.dataId).id,Ie[S.dtype],s.batchSize,s.inChannels,s.inHeight,s.inWidth,s.outHeight,s.outWidth,s.strideHeight,s.strideWidth,s.dilationHeight,s.dilationWidth,s.filterHeight,s.filterWidth,s.padInfo.top,s.padInfo.left),l}const bL={kernelName:lu,backendName:"wasm",setupFunc:EL,kernelFunc:wL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let s1;function AL(c){s1=c.wasm.cwrap(lv,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function RL(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C,dy:o}=e,{strides:x,pad:t,dilations:s}=y;if(S.dtype!==C.dtype||S.dtype!==o.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${S.dtype}, ${C.dtype}, and ${o.dtype}`);const l=Ha(S.shape,C.shape,x,t,"NHWC",s),a=f.makeOutput(C.shape,C.dtype);return s1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(o.dataId).id,f.dataIdMap.get(a.dataId).id,Ie[S.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),a}const IL={kernelName:lv,backendName:"wasm",setupFunc:AL,kernelFunc:RL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let i1;function PL(c){i1=c.wasm.cwrap(uv,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function FL(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,filter:C,dy:o}=e,{strides:x,pad:t,dilations:s}=y;if(S.dtype!==C.dtype||S.dtype!==o.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${S.dtype}, ${C.dtype}, and ${o.dtype}`);const l=Ha(S.shape,C.shape,x,t,"NHWC",s),a=f.makeOutput(S.shape,S.dtype);return i1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(o.dataId).id,f.dataIdMap.get(a.dataId).id,Ie[S.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),a}const ML={kernelName:uv,backendName:"wasm",setupFunc:PL,kernelFunc:FL};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NL=Ee(tf);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let r1;function OL(c){r1=c.wasm.cwrap(ef,null,["number","number","number"])}function DL(c){const{inputs:e,backend:f}=c,{dy:y,y:S}=e,C=f.makeOutput(S.shape,"float32"),o=x=>f.dataIdMap.get(x.dataId).id;return r1(o(S),o(y),o(C)),C}const LL={kernelName:ef,backendName:"wasm",setupFunc:OL,kernelFunc:DL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BL=!1,$L=tn(sf,BL,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GL=Ee(nf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UL=Ee(rf,"float32");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fh(c){const{inputs:e,attrs:f,backend:y}=c,{input:S}=e,{dim:C}=f,o=S.shape.length,x=S.shape.slice();let t=C;return C<0&&(it(-(o+1)<=C,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),t=o+C+1),x.splice(t,0,1),Mn({inputs:{x:S},backend:y,attrs:{shape:x}})}const VL={kernelName:af,backendName:"wasm",kernelFunc:fh};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zL=Ee(of,"float32");/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1(c){const{attrs:{shape:e,value:f},backend:y}=c;let{attrs:{dtype:S}}=c;S=S||qr(f);const C=y.makeOutput(e,S);return y.typedArrayFromHeap(C).fill(f),C}const kL={kernelName:uf,backendName:"wasm",kernelFunc:a1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let o1;function WL(c){o1=c.wasm.cwrap(hu,null,["number","number","number","number","number","number"])}function XL(c){const{inputs:e,backend:f}=c,{image:y}=e,S=f.makeOutput(y.shape,y.dtype),C=f.dataIdMap.get(y.dataId).id,o=f.dataIdMap.get(S.dataId).id,[x,t,s,l]=y.shape;return o1(C,x,t,s,l,o),S}const HL={kernelName:hu,backendName:"wasm",kernelFunc:XL,setupFunc:WL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YL=Ee(lf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KL=tn(hf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let u1;function jL(c){u1=c.wasm.cwrap(fu,null,["number","number","number","number","number","number","number"])}function ZL(c){const{backend:e,inputs:f,attrs:y}=c,{varianceEpsilon:S}=y,{x:C,mean:o,variance:x,offset:t,scale:s}=f,l=e.dataIdMap.get(C.dataId).id,a=e.dataIdMap.get(o.dataId).id,r=e.dataIdMap.get(x.dataId).id,i=t!=null?e.dataIdMap.get(t.dataId).id:0,n=s!=null?e.dataIdMap.get(s.dataId).id:0,h=e.makeOutput(C.shape,C.dtype);if(bt(C.shape)===0)return h;const d=e.dataIdMap.get(h.dataId).id;return u1(l,a,r,i,n,S,d),h}const QL={kernelName:fu,backendName:"wasm",setupFunc:jL,kernelFunc:ZL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let l1;function JL(c){l1=c.wasm.cwrap(Ra,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function qL(c){const{inputs:e,attrs:f,backend:y}=c,{x:S,filter:C,bias:o,preluActivationWeights:x}=e,{strides:t,pad:s,dilations:l,dataFormat:a,dimRoundingMode:r,activation:i,leakyreluAlpha:n}=f,h=cn(S.shape,C.shape,t,l,s,r),d=ka[i];if(d==null)throw new Error(`${i} activation not yet supported for FusedConv2D in the wasm backend.`);const u=y.dataIdMap.get(S.dataId).id,p=y.dataIdMap.get(C.dataId).id,v=h.outChannels;let m=0;if(o!=null){const G=y.dataIdMap.get(o.dataId);if(G.shape.length!==1)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${G.shape.length}.`);if(G.shape[0]!==v)throw new Error(`FusedConv2D bias shape (${G.shape}) does not match the number of output channels (${v})`);m=G.id}const g=h.filterHeight,T=h.filterWidth,w=h.padInfo.top,b=h.padInfo.right,E=h.padInfo.bottom,A=h.padInfo.left,R=h.dilationHeight,I=h.dilationWidth,P=h.strideHeight,M=h.strideWidth,F=h.inChannels,O=h.padInfo.type==="SAME"?1:0,D=h.batchSize,L=h.inHeight,z=h.inWidth;if(a!=="NHWC")throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${a}'. Please use 'NHWC'.`);const X=y.makeOutput(h.outShape,"float32"),H=y.dataIdMap.get(X.dataId).id,J=x==null?0:y.dataIdMap.get(x.dataId).id;return l1(u,D,L,z,p,g,T,m,w,b,E,A,O,R,I,P,M,F,v,d,J,n||0,H),X}const _L={kernelName:Ra,backendName:"wasm",setupFunc:JL,kernelFunc:qL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let h1;function tB(c){h1=c.wasm.cwrap(Ia,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function eB(c){const{inputs:e,attrs:f,backend:y}=c,{x:S,filter:C,bias:o,preluActivationWeights:x}=e,{strides:t,pad:s,dilations:l,dataFormat:a,dimRoundingMode:r,activation:i,leakyreluAlpha:n}=f,h=cn(S.shape,C.shape,t,l,s,r,!0),d=ka[i];if(d==null)throw new Error(`${i} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);const u=y.dataIdMap.get(S.dataId).id,p=y.dataIdMap.get(C.dataId).id,v=h.outChannels;let m=0;if(o!=null){const G=y.dataIdMap.get(o.dataId);if(G.shape.length!==1)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${G.shape.length}.`);if(G.shape[0]!==v)throw new Error(`FusedDepthwiseConv2D bias shape (${G.shape}) does not match the number of output channels (${v})`);m=G.id}const g=h.filterHeight,T=h.filterWidth,w=h.padInfo.top,b=h.padInfo.right,E=h.padInfo.bottom,A=h.padInfo.left,R=h.dilationHeight,I=h.dilationWidth,P=h.strideHeight,M=h.strideWidth,F=h.inChannels,O=h.padInfo.type==="SAME"?1:0,D=h.batchSize,L=h.inHeight,z=h.inWidth;if(a!=="NHWC")throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${a}'. Please use 'NHWC'.`);const X=y.makeOutput(h.outShape,"float32"),H=y.dataIdMap.get(X.dataId).id,J=x==null?0:y.dataIdMap.get(x.dataId).id;return h1(u,D,L,z,p,g,T,m,w,b,E,A,O,R,I,P,M,F,v,d,J,n||0,H),X}const nB={kernelName:Ia,backendName:"wasm",setupFunc:tB,kernelFunc:eB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let f1;function sB(c){f1=c.wasm.cwrap(cu,null,["number","number","number","number","number","number","array","number"])}function iB(c){const{backend:e,inputs:f}=c,{params:y,indices:S}=f,[C,o,x,t]=Vc(y,S),s=e.makeOutput(C,y.dtype);if(o===0)return s;const l=S.shape,a=l[l.length-1],i=e.dataIdMap.get(y.dataId).id,h=e.dataIdMap.get(S.dataId).id,d=new Uint8Array(new Int32Array(t).buffer),u=e.dataIdMap.get(s.dataId).id;return f1(i,Ie[y.dtype],h,o,a,x,d,u),s}const rB={kernelName:cu,backendName:"wasm",setupFunc:sB,kernelFunc:iB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let c1;function aB(c){c1=c.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function oB(c){const{backend:e,inputs:f,attrs:y}=c,{x:S,indices:C}=f,{axis:o,batchDims:x}=y,t=Qe(o,S.shape)[0],s=e.readSync(C.dataId),l=S.shape[t];for(let E=0;E<s.length;++E){const A=s[E];it(A<=l-1&&A>=0,()=>`GatherV2: the index value ${A} is not in [0, ${l-1}]`)}const a=od(S,C,t,x),r=Mn({inputs:{x:S},attrs:{shape:[a.batchSize,a.outerSize,a.dimSize,a.sliceSize]},backend:e}),i=bt(C.shape),n=Mn({inputs:{x:C},attrs:{shape:[a.batchSize,i/a.batchSize]},backend:e}),h=[a.batchSize,a.outerSize,i/a.batchSize,a.sliceSize],d=e.makeOutput(h,S.dtype);if(bt(S.shape)===0)return d;const u=r.shape.length-1,v=e.dataIdMap.get(r.dataId).id,g=e.dataIdMap.get(n.dataId).id,T=e.dataIdMap.get(d.dataId).id,w=new Uint8Array(new Int32Array(Me(r.shape)).buffer),b=new Uint8Array(new Int32Array(Me(h)).buffer);return c1(v,Ie[S.dtype],w,u,g,a.batchSize,b,T),e.disposeData(r.dataId),e.disposeData(n.dataId),d.shape=a.outputShape,d}const uB={kernelName:ff,backendName:"wasm",setupFunc:aB,kernelFunc:oB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lB=!1,hB=tn(cf,lB,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fB=!1,cB=tn(df,fB,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dB=Ee(pf,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pB=Ee(vf,"bool");/**
 * @license
 * Copyright 2022 The TensorFlow Authors. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vB=Ee(mf,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let d1;function mB(c){d1=c.wasm.cwrap(pu,null,["number","number","number","number"])}function gB(c){const{inputs:{x:e},attrs:{alpha:f},backend:y}=c,S=y.dataIdMap.get(e.dataId).id,C=y.makeOutput(e.shape,"float32");if(bt(e.shape)!==0){const o=y.dataIdMap.get(C.dataId).id;d1(S,Ie[e.dtype],f,o)}return C}const xB={kernelName:pu,backendName:"wasm",setupFunc:mB,kernelFunc:gB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yB=!1,TB=tn(gf,yB,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SB=!1,CB=tn(xf,SB,"bool");/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let p1;function EB(c){p1=c.wasm.cwrap(vu,null,["number","number","number","number"])}function wB(c){const{attrs:e,backend:f}=c,{start:y,stop:S,num:C}=e,o=Math.floor(C),x=f.makeOutput([o],"float32");return p1(f.dataIdMap.get(x.dataId).id,y,S,o),x}const bB={kernelName:vu,backendName:"wasm",setupFunc:EB,kernelFunc:wB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AB=Ee(yf);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RB=Ee(Tf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IB=!1,PB=tn(Sf,IB,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FB=Ee(Cf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MB=!1,NB=tn(Ef,MB,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OB=!1,DB=tn(Y2,OB,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let v1;function LB(c){v1=c.wasm.cwrap(mu,null,["number","number","number","number","number","number","number"])}function BB(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{depthRadius:C,bias:o,alpha:x,beta:t}=y;if(S.dtype!=="float32")throw new Error("LRN error: x must have dtype float32");const s=f.makeOutput(S.shape,S.dtype);return v1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(s.dataId).id,S.shape[3],C,o,x,t),s}const $B={kernelName:mu,backendName:"wasm",setupFunc:LB,kernelFunc:BB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let m1;function GB(c){m1=c.wasm.cwrap(wf,null,["number","number","number","number","number","number","number","number","number"])}function UB(c){const{inputs:e,backend:f,attrs:y}=c,{x:S,y:C,dy:o}=e,{depthRadius:x,bias:t,alpha:s,beta:l}=y;if(S.dtype!=="float32"||C.dtype!=="float32"||o.dtype!=="float32")throw new Error("LRNGrad error: x, y, and dy must have dtype float32");const a=f.makeOutput(S.shape,S.dtype);return m1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(o.dataId).id,f.dataIdMap.get(a.dataId).id,o.shape[3],x,t,s,l),a}const VB={kernelName:wf,backendName:"wasm",setupFunc:GB,kernelFunc:UB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g1;function zB(c){g1=c.wasm.cwrap(gu,null,["number","number","number","number"])}function kB(c){const{backend:e,inputs:f,attrs:y}=c,{reductionIndices:S,keepDims:C}=y,{x:o}=f;let t=e.dataIdMap.get(o.dataId).id,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Li(o,S,e);if(i){const v=e.dataIdMap.get(l.dataId).id;s=l,t=v}const n=s.shape.length;rn("max",a,n);const[h,d]=xn(s.shape,a),u=bt(d),p=e.makeOutput(h,o.dtype);if(bt(s.shape)!==0){const v=e.dataIdMap.get(p.dataId).id;g1(t,Ie[o.dtype],u,v)}if(i&&e.disposeData(l.dataId),C){const v=sn(p.shape,r);p.shape=v}return p}const WB={kernelName:gu,backendName:"wasm",setupFunc:zB,kernelFunc:kB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XB=tn(bf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let x1;function HB(c){x1=c.wasm.cwrap(xu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function YB(c){const{inputs:e,attrs:f,backend:y}=c,S=e.x,C=y.dataIdMap.get(S.dataId).id;it(S.dtype==="float32",()=>`Error in MaxPool: only float32 input is supported. Got ${S.dtype}.`);const{filterSize:o,strides:x,pad:t,dimRoundingMode:s}=f,l=hs(S.shape,o,x,1,t,s),a=l.filterHeight,r=l.filterWidth,i=l.padInfo.top,n=l.padInfo.right,h=l.padInfo.bottom,d=l.padInfo.left,u=l.dilationHeight,p=l.dilationWidth,v=l.strideHeight,m=l.strideWidth,g=l.inChannels,T=l.outChannels;if(l.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);const w=y.makeOutput(l.outShape,"float32"),b=y.dataIdMap.get(w.dataId).id;return x1(C,S.shape[0],S.shape[1],S.shape[2],a,r,i,n,h,d,u,p,v,m,g,T,b),w}const KB={kernelName:xu,backendName:"wasm",setupFunc:HB,kernelFunc:YB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let y1;function jB(c){y1=c.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function ZB(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{filterSize:C,strides:o,pad:x,dimRoundingMode:t,dataFormat:s}=y,l=ti(S.shape,C,o,1,x,t,s),a=f.makeOutput(l.outShape,S.dtype);return y1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),a}const QB={kernelName:Af,backendName:"wasm",setupFunc:jB,kernelFunc:ZB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let T1;function JB(c){T1=c.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function qB(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,input:C}=e,{filterSize:o,strides:x,pad:t,dimRoundingMode:s}=y,l=ti(C.shape,o,x,1,t,s),a=f.makeOutput(C.shape,C.dtype);return T1(f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),a}const _B={kernelName:vv,backendName:"wasm",setupFunc:JB,kernelFunc:qB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let S1;function t$(c){S1=c.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function e$(c){const{inputs:e,backend:f,attrs:y}=c,{dy:S,input:C}=e,{filterSize:o,strides:x,pad:t,dimRoundingMode:s}=y,l=hs(C.shape,o,x,1,t,s),a=f.makeOutput(C.shape,C.dtype);return S1(f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left),a}const n$={kernelName:pv,backendName:"wasm",setupFunc:t$,kernelFunc:e$};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let C1;function s$(c){C1=c.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function i$(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{filterSize:C,strides:o,pad:x,includeBatchInIndex:t}=y;it(S.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${S.shape.length}.`);const s=[1,1];it(On(o,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const l=hs(S.shape,C,o,[1,1],x),a=f.makeOutput(l.outShape,S.dtype),r=f.makeOutput(l.outShape,"int32");return C1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,f.dataIdMap.get(r.dataId).id,Ie[S.dtype],t,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left),[a,r]}const r$={kernelName:Rf,backendName:"wasm",setupFunc:s$,kernelFunc:i$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let E1;function a$(c){E1=c.wasm.cwrap(yu,null,["number, number, number"])}function o$(c){const{backend:e,inputs:f,attrs:y}=c,{axis:S,keepDims:C}=y,{x:o}=f,x=e.dataIdMap.get(o.dataId).id;let t=x,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Li(o,S,e);let n=a;if(i){const m=e.dataIdMap.get(l.dataId).id;m!==x&&(s=l,t=m,n=dn(n.length,s.shape.length))}rn("mean",n,s.shape.length);const[h,d]=xn(s.shape,n),u=bt(d);let p=s;s.dtype!=="float32"&&(p=Bi({backend:e,inputs:{x:s},attrs:{dtype:"float32"}}),t=e.dataIdMap.get(p.dataId).id);const v=e.makeOutput(h,"float32");if(bt(s.shape)!==0){const m=e.dataIdMap.get(v.dataId).id;E1(t,u,m)}if(i&&e.disposeData(l.dataId),C){const m=sn(v.shape,r);v.shape=m}return s.dtype!=="float32"&&e.disposeData(p.dataId),v}const u$={kernelName:yu,backendName:"wasm",setupFunc:a$,kernelFunc:o$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let w1;function l$(c){w1=c.wasm.cwrap(Tu,null,["number","number","number","number"])}function h$(c){const{backend:e,inputs:f,attrs:y}=c,{axis:S,keepDims:C}=y,{x:o}=f,x=e.dataIdMap.get(o.dataId).id;let t=x,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Li(o,S,e);if(i){const v=e.dataIdMap.get(l.dataId).id;v!==x&&(s=l,t=v)}const n=s.shape.length;rn("min",a,n);const[h,d]=xn(s.shape,a),u=bt(d),p=e.makeOutput(h,s.dtype);if(bt(s.shape)!==0){const v=e.dataIdMap.get(p.dataId).id;w1(t,Ie[o.dtype],u,v)}if(i&&e.disposeData(l.dataId),C){const v=sn(p.shape,r);p.shape=v}return p}const f$={kernelName:Tu,backendName:"wasm",setupFunc:l$,kernelFunc:h$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c$=tn(If);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ch;(function(c){c[c.reflect=0]="reflect",c[c.symmetric=1]="symmetric"})(ch||(ch={}));let b1;function d$(c){b1=c.wasm.cwrap(Su,null,["number","array","number","number","array","array","number","number"])}function p$(c){const{inputs:{x:e},backend:f,attrs:{paddings:y,mode:S}}=c,C=y.map((n,h)=>n[0]+e.shape[h]+n[1]),o=f.dataIdMap.get(e.dataId).id,x=f.makeOutput(C,e.dtype),t=f.dataIdMap.get(x.dataId).id,s=new Uint8Array(new Int32Array(e.shape).buffer),l=y.map(n=>n[0]),a=y.map(n=>n[1]),r=new Uint8Array(new Int32Array(l).buffer),i=new Uint8Array(new Int32Array(a).buffer);return b1(o,s,e.shape.length,Ie[e.dtype],r,i,ch[S],t),x}const v$={kernelName:Su,backendName:"wasm",kernelFunc:p$,setupFunc:d$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let A1;function m$(c){A1=c.wasm.cwrap($u,null,["number","number","number","number"])}function R1(c){const{backend:e,inputs:{logits:f},attrs:{dim:y}}=c,S=e.dataIdMap.get(f.dataId).id,C=e.makeOutput(f.shape,f.dtype),o=e.dataIdMap.get(C.dataId).id,x=f.shape[y],t=bt(f.shape)/x;return bt(C.shape)===0||A1(S,o,x,t),C}const g$={kernelName:$u,backendName:"wasm",setupFunc:m$,kernelFunc:R1};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let I1;function x$(c){I1=c.wasm.cwrap(Cu,null,["number","number","number","number","number","number"])}function y$(c){const{inputs:e,backend:f,attrs:y}=c,{logits:S}=e,{numSamples:C,seed:o,normalized:x}=y;if(S.dtype!=="float32")throw new Error(`Tensor logits must have dtype float32, got ${S.dtype}`);const t=x?S:R1({inputs:{logits:S},backend:f,attrs:{dim:S.shape.length-1}}),[s,l]=t.shape,a=f.makeOutput([s,C],"int32");return I1(f.dataIdMap.get(t.dataId).id,s,l,C,o,f.dataIdMap.get(a.dataId).id),x||f.disposeData(t.dataId),a}const T$={kernelName:Cu,backendName:"wasm",setupFunc:x$,kernelFunc:y$};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S$=tn(Pf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C$=tn(Ff);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$=Ee(Mf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xd(c,e){const f=new Int32Array(c.wasm.HEAPU8.buffer,e,4),y=f[0],S=f[1],C=f[2],o=f[3];return c.wasm._free(e),{pSelectedIndices:y,selectedSize:S,pSelectedScores:C,pValidOutputs:o}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let P1;function w$(c){P1=c.wasm.cwrap(Eu,"number",["number","number","number","number","number"])}function b$(c){const{backend:e,inputs:f,attrs:y}=c,{iouThreshold:S,maxOutputSize:C,scoreThreshold:o}=y,{boxes:x,scores:t}=f,s=e.dataIdMap.get(x.dataId).id,l=e.dataIdMap.get(t.dataId).id,a=P1(s,l,C,S,o),{pSelectedIndices:r,selectedSize:i,pSelectedScores:n,pValidOutputs:h}=xd(e,a);return e.wasm._free(n),e.wasm._free(h),e.makeOutput([i],"int32",r)}const A$={kernelName:Eu,backendName:"wasm",setupFunc:w$,kernelFunc:b$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let F1;function R$(c){F1=c.wasm.cwrap(wu,"number",["number","number","number","number","number","bool"])}function I$(c){const{backend:e,inputs:f,attrs:y}=c,{iouThreshold:S,maxOutputSize:C,scoreThreshold:o,padToMaxOutputSize:x}=y,{boxes:t,scores:s}=f,l=e.dataIdMap.get(t.dataId).id,a=e.dataIdMap.get(s.dataId).id,r=F1(l,a,C,S,o,x),{pSelectedIndices:i,selectedSize:n,pSelectedScores:h,pValidOutputs:d}=xd(e,r);e.wasm._free(h);const u=e.makeOutput([n],"int32",i),p=e.makeOutput([],"int32",d);return[u,p]}const P$={kernelName:wu,backendName:"wasm",setupFunc:R$,kernelFunc:I$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let M1;function F$(c){M1=c.wasm.cwrap(bu,"number",["number","number","number","number","number","number"])}function M$(c){const{backend:e,inputs:f,attrs:y}=c,{iouThreshold:S,maxOutputSize:C,scoreThreshold:o,softNmsSigma:x}=y,{boxes:t,scores:s}=f,l=e.dataIdMap.get(t.dataId).id,a=e.dataIdMap.get(s.dataId).id,r=M1(l,a,C,S,o,x),{pSelectedIndices:i,selectedSize:n,pSelectedScores:h,pValidOutputs:d}=xd(e,r);e.wasm._free(d);const u=e.makeOutput([n],"int32",i),p=e.makeOutput([n],"float32",h);return[u,p]}const N$={kernelName:bu,backendName:"wasm",setupFunc:F$,kernelFunc:M$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O$=!1,D$=tn(Nf,O$,"bool");/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let N1;function L$(c){N1=c.wasm.cwrap(Au,null,["number","number","number","number","number"])}function B$(c){const{inputs:e,backend:f,attrs:y}=c,{indices:S}=e,{dtype:C,depth:o,onValue:x,offValue:t}=y,s=f.makeOutput([...S.shape,o],C),l=f.dataIdMap.get(s.dataId).id,r=f.dataIdMap.get(S.dataId).id;return N1(r,o,x,t,l),s}const $$={kernelName:Au,backendName:"wasm",setupFunc:L$,kernelFunc:B$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$(c){const{inputs:{x:e},backend:f}=c,y=f.makeOutput(e.shape,e.dtype);return f.typedArrayFromHeap(y).fill(1),y}const U$={kernelName:Of,backendName:"wasm",kernelFunc:G$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$(c){const{inputs:e,backend:f,attrs:y}=c,{axis:S}=y;if(e.length===1)return fh({inputs:{input:e[0]},backend:f,attrs:{dim:S}});const C=e[0].shape,o=e[0].dtype;e.forEach(l=>{zn(C,l.shape,"All tensors passed to stack must have matching shapes"),it(o===l.dtype,()=>"All tensors passed to stack must have matching dtypes")});const x=[],t=e.map(l=>{const a=fh({inputs:{input:l},backend:f,attrs:{dim:S}});return x.push(a),a}),s=W0({inputs:t,backend:f,attrs:{axis:S}});return x.forEach(l=>f.disposeData(l.dataId)),s}const z$={kernelName:Df,backendName:"wasm",kernelFunc:V$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let O1;function k$(c){O1=c.wasm.cwrap(Ru,null,["number","array","number","number","array","array","number","number"])}function W$(c){const{inputs:{x:e},backend:f,attrs:{paddings:y,constantValue:S}}=c,C=y.map((h,d)=>h[0]+e.shape[d]+h[1]);if(bt(e.shape)===0)return a1({backend:f,attrs:{shape:C,value:S,dtype:e.dtype}});const o=f.dataIdMap.get(e.dataId).id,x=f.makeOutput(C,e.dtype),s=f.dataIdMap.get(x.dataId).id,l=new Uint8Array(new Int32Array(e.shape).buffer),a=y.map(h=>h[0]),r=y.map(h=>h[1]),i=new Uint8Array(new Int32Array(a).buffer),n=new Uint8Array(new Int32Array(r).buffer);return O1(o,l,e.shape.length,Ie[e.dtype],i,n,S,s),x}const D1={kernelName:Ru,backendName:"wasm",kernelFunc:W$,setupFunc:k$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X$=tn(Lf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let L1;function H$(c){L1=c.wasm.cwrap(Iu,null,["number","number","number"])}function Y$(c){const{inputs:e,backend:f}=c,{x:y,alpha:S}=e,C=f.dataIdMap.get(y.dataId).id,o=f.dataIdMap.get(S.dataId).id;let x=C;const t=y;let s=t;t.dtype!=="float32"&&(s=Bi({backend:f,inputs:{x:y},attrs:{dtype:"float32"}}),x=f.dataIdMap.get(s.dataId).id);const l=f.makeOutput(y.shape,"float32"),a=f.dataIdMap.get(l.dataId).id;return L1(x,o,a),t.dtype!=="float32"&&f.disposeData(s.dataId),l}const K$={kernelName:Iu,backendName:"wasm",setupFunc:H$,kernelFunc:Y$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let B1;function j$(c){B1=c.wasm.cwrap(Pu,null,["number","number","number","number"])}function Z$(c){const{backend:e,inputs:f,attrs:y}=c,{axis:S,keepDims:C}=y,{x:o}=f,x=e.dataIdMap.get(o.dataId).id;let t=x,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Li(o,S,e);let n=a;if(i){const v=e.dataIdMap.get(l.dataId).id;v!==x&&(s=l,t=v,n=dn(n.length,s.shape.length))}rn("prod",n,s.shape.length);const[h,d]=xn(s.shape,n),u=bt(d),p=e.makeOutput(h,s.dtype);if(bt(s.shape)!==0){const v=e.dataIdMap.get(p.dataId).id;B1(t,u,Ie[p.dtype],v)}if(i&&e.disposeData(l.dataId),C){const v=sn(p.shape,r);p.shape=v}return p}const Q$={kernelName:Pu,backendName:"wasm",setupFunc:j$,kernelFunc:Z$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J$=c=>{const{backend:e,attrs:f}=c,{start:y,stop:S,step:C,dtype:o}=f,x=Wg(y,S,C,o),t=e.makeOutput([x.length],o);return e.typedArrayFromHeap(t).set(x),t},q$={kernelName:Bf,backendName:"wasm",kernelFunc:J$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _$=tn(_h);/**
 * @license
 * Copyright 2022 The TensorFlow Authors. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tG=Ee($f);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eG=Ee(Gf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nG=Ee(kf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let $1;function sG(c){$1=c.wasm.cwrap(Mu,null,["number","number","number","number","number","number","number","number","number","number"])}function iG(c){const{backend:e,inputs:f,attrs:y}=c,{images:S}=f,{alignCorners:C,halfPixelCenters:o,size:x}=y,[t,s]=x,[l,a,r,i]=S.shape,n=[l,t,s,i];let h=e.dataIdMap.get(S.dataId),d;h.dtype!=="float32"&&(d=Bi({backend:e,inputs:{x:S},attrs:{dtype:"float32"}}),h=e.dataIdMap.get(d.dataId));const u=h.id,p=e.makeOutput(n,"float32");if(bt(S.shape)===0)return p;const v=e.dataIdMap.get(p.dataId).id;return $1(u,l,a,r,i,t,s,C?1:0,o?1:0,v),d!=null&&e.disposeData(d.dataId),p}const rG={kernelName:Mu,backendName:"wasm",setupFunc:sG,kernelFunc:iG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let G1;function aG(c){G1=c.wasm.cwrap(zf,null,["number","number","number","array","array","boolean"])}function oG(c){const{inputs:e,backend:f,attrs:y}=c,{images:S,dy:C}=e,{alignCorners:o}=y,x=f.makeOutput(S.shape,"float32");let t=f.dataIdMap.get(S.dataId),s;return t.dtype!=="float32"&&(s=Bi({backend:f,inputs:{x:S},attrs:{dtype:"float32"}}),t=f.dataIdMap.get(s.dataId)),G1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(x.dataId).id,new Uint8Array(new Int32Array(S.shape).buffer),new Uint8Array(new Int32Array(C.shape).buffer),o),s!=null&&f.disposeData(s.dataId),x}const uG={kernelName:zf,backendName:"wasm",setupFunc:aG,kernelFunc:oG};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let U1;function lG(c){U1=c.wasm.cwrap(Fu,null,["number","number","number","number","number","number","number","number","number","number"])}function hG(c){const{backend:e,inputs:f,attrs:y}=c,{images:S}=f,{alignCorners:C,halfPixelCenters:o,size:x}=y,[t,s]=x,[l,a,r,i]=S.shape,n=[l,t,s,i],h=e.makeOutput(n,"float32");if(bt(S.shape)===0)return h;let d=e.dataIdMap.get(S.dataId),u;d.dtype!=="float32"&&(u=Bi({backend:e,inputs:{x:S},attrs:{dtype:"float32"}}),d=e.dataIdMap.get(u.dataId));const p=d.id,v=e.dataIdMap.get(h.dataId).id;return U1(p,l,a,r,i,t,s,C?1:0,o?1:0,v),u!=null&&e.disposeData(u.dataId),h}const fG={kernelName:Fu,backendName:"wasm",setupFunc:lG,kernelFunc:hG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let V1;function cG(c){V1=c.wasm.cwrap(Vf,null,["number","number","number","array","array","boolean"])}function dG(c){const{inputs:e,backend:f,attrs:y}=c,{images:S,dy:C}=e,{alignCorners:o}=y,x=f.makeOutput(S.shape,"float32");let t=f.dataIdMap.get(S.dataId),s;return t.dtype!=="float32"&&(s=Bi({backend:f,inputs:{x:S},attrs:{dtype:"float32"}}),t=f.dataIdMap.get(s.dataId)),V1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(x.dataId).id,new Uint8Array(new Int32Array(S.shape).buffer),new Uint8Array(new Int32Array(C.shape).buffer),o),s!=null&&f.disposeData(s.dataId),x}const pG={kernelName:Vf,backendName:"wasm",setupFunc:cG,kernelFunc:dG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let z1;function vG(c){z1=c.wasm.cwrap(Nu,null,["number","array","number","array","number","number"])}function mG(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{dims:C}=y,o=Qe(C,S.shape);if(S.shape.length===0)return fl({inputs:{x:S},backend:f});const x=f.makeOutput(S.shape,S.dtype),t=f.dataIdMap.get(S.dataId).id,s=f.dataIdMap.get(x.dataId).id,l=new Uint8Array(new Int32Array(o).buffer),a=new Uint8Array(new Int32Array(S.shape).buffer);z1(t,l,o.length,a,S.shape.length,s);const r=Mn({inputs:{x},attrs:{shape:S.shape},backend:f});return f.disposeData(x.dataId),r}const gG={kernelName:Nu,backendName:"wasm",kernelFunc:mG,setupFunc:vG};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let k1;function xG(c){k1=c.wasm.cwrap(Xu,null,["number","number","number","number","number","number","number","number","array","number","number"])}function yG(c){const{inputs:e,backend:f,attrs:y}=c,{image:S}=e,{radians:C,fillValue:o,center:x}=y,t=f.makeOutput(S.shape,S.dtype),s=f.dataIdMap.get(S.dataId).id,l=f.dataIdMap.get(t.dataId).id,[a,r,i,n]=S.shape,[h,d]=Yc(x,r,i),u=o===0,p=255,v=typeof o=="number"?[o,o,o,u?0:p]:[...o,p],m=new Uint8Array(new Int32Array(v).buffer);return k1(s,a,r,i,n,C,h,d,m,v.length,l),t}const TG={kernelName:Xu,backendName:"wasm",kernelFunc:yG,setupFunc:xG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SG=Ee(Wf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CG=Ee(Xf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let W1;function EG(c){W1=c.wasm.cwrap(Ou,null,["number","number","number","number","number","number","array","number","number"])}function wG(c){const{backend:e,inputs:f,attrs:y}=c,{indices:S,updates:C}=f,{shape:o}=y,x=e.makeOutput(o,C.dtype);if(bt(o)===0)return x;const{sliceRank:t,numUpdates:s,sliceSize:l,strides:a,outputSize:r}=mr(C,S,o),n=e.dataIdMap.get(S.dataId).id,d=e.dataIdMap.get(C.dataId).id,u=new Uint8Array(new Int32Array(a).buffer),p=e.dataIdMap.get(x.dataId).id;return W1(n,d,Ie[C.dtype],t,s,l,u,r,p),x}const bG={kernelName:Ou,backendName:"wasm",setupFunc:EG,kernelFunc:wG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let X1;function AG(c){X1=c.wasm.cwrap(Lu,null,["number","number","number","number","number","number","bool","number"])}function RG(c){const{inputs:e,backend:f,attrs:y}=c,{sortedSequence:S,values:C}=e,{side:o}=y;if(S.dtype!==C.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${S.dtype} and ${C.dtype}`);const x=f.makeOutput(C.shape,"int32");function t(s){return f.dataIdMap.get(s.dataId).id}return X1(t(S),t(C),S.shape[0],S.shape[1],C.shape[1],Ie[S.dtype],o==="left",t(x)),x}const IG={kernelName:Lu,backendName:"wasm",setupFunc:AG,kernelFunc:RG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let H1;function PG(c){H1=c.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function FG(c){const{inputs:e,backend:f}=c,{condition:y,t:S,e:C}=e,o=f.dataIdMap.get(y.dataId).id,x=f.dataIdMap.get(S.dataId).id,t=f.dataIdMap.get(C.dataId).id,s=f.makeOutput(S.shape,S.dtype),l=f.dataIdMap.get(s.dataId).id,a=y.shape.length,r=S.shape.length,i=a===0||a>1||r===1?1:bt(S.shape.slice(1));return H1(o,x,t,i,l),s}const MG={kernelName:Hf,backendName:"wasm",kernelFunc:FG,setupFunc:PG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NG=Ee(Yf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Y1;function OG(c){Y1=c.wasm.cwrap(Jf,null,["number","number"])}function DG(c){const{backend:e,inputs:{x:f}}=c,y=e.dataIdMap.get(f.dataId).id,S=e.makeOutput(f.shape,f.dtype),C=e.dataIdMap.get(S.dataId).id;return bt(S.shape)===0||Y1(y,C),S}const LG={kernelName:"Sigmoid",backendName:"wasm",setupFunc:OG,kernelFunc:DG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BG=Ee(Qf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $G=Ee(jf);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GG=Ee(Zf);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UG=Ee(qf);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VG(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,{blockShape:C,paddings:o}=y,x=bt(C),t=[[0,0]];t.push(...o);for(let T=1+C.length;T<S.shape.length;++T)t.push([0,0]);const s=D1.kernelFunc({inputs:{x:S},backend:f,attrs:{paddings:t,constantValue:0}}),l=Za(s.shape,C,x,!1),a=Qa(l.length,C.length,!1),r=Ja(s.shape,C,x,!1),h=Mn({inputs:{x:s},backend:f,attrs:{shape:l}}),p=Ri({inputs:{x:h},backend:f,attrs:{perm:a}}),g=Mn({inputs:{x:p},backend:f,attrs:{shape:r}});return f.disposeData(s.dataId),f.disposeData(h.dataId),f.disposeData(p.dataId),g}const zG={kernelName:tc,backendName:"wasm",kernelFunc:VG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let K1;function kG(c){K1=c.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function WG(c){const{backend:e,inputs:f}=c,{indices:y,values:S,denseShape:C,defaultValue:o}=f,x=y.shape[0],t=y.shape[1],s=e.readSync(C.dataId)[0],l=[x+s,t],a=e.dataIdMap.get(y.dataId).id,r=e.dataIdMap.get(S.dataId).id,i=e.dataIdMap.get(o.dataId).id,n=e.makeOutput(l,y.dtype),h=e.dataIdMap.get(n.dataId).id,d=e.makeOutput(l.slice(0,1),S.dtype),u=e.dataIdMap.get(d.dataId).id,p=e.makeOutput([s],"bool"),v=e.dataIdMap.get(p.dataId).id,m=e.makeOutput([x],y.dtype),g=e.dataIdMap.get(m.dataId).id,T=e.makeOutput([4],"int32"),w=e.dataIdMap.get(T.dataId).id,b=K1(a,r,Ie[S.dtype],x,s,t,i,h,u,v,g,w),E=e.readSync(T.dataId);let A;switch(E[0]){case 1:{A=Qc(E[1]);break}case 2:{A=Jc(E[1],E[2]);break}case 3:A=qc(E[1],E[2],E[3]);break;default:A=""}if(e.disposeData(T.dataId),A)throw e.disposeData(n.dataId),e.disposeData(d.dataId),e.disposeData(p.dataId),e.disposeData(m.dataId),new Error(A);let R=n,I=d;return b!==l[0]&&(R=cr({inputs:{x:n},attrs:{begin:0,size:[b,t]},backend:e}),I=cr({inputs:{x:d},attrs:{begin:0,size:b},backend:e}),e.disposeData(n.dataId),e.disposeData(d.dataId)),[R,I,p,m]}const XG={kernelName:nc,backendName:"wasm",setupFunc:kG,kernelFunc:WG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let j1;function HG(c){j1=c.wasm.cwrap(Gu,null,["number","number","number","number","number","number","number"])}function YG(c){const{backend:e,inputs:f}=c,{inputIndices:y,inputShape:S,newShape:C}=f;if(y.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${y.shape}`);if(S.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${S.shape}`);if(C.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${C.shape}`);const o=e.dataIdMap.get(y.dataId).id,x=e.dataIdMap.get(S.dataId).id,t=e.dataIdMap.get(C.dataId).id,s=y.shape[0],l=bt(C.shape),a=e.makeOutput([s,l],y.dtype),r=e.dataIdMap.get(a.dataId).id,i=e.makeOutput([l],C.dtype),n=e.dataIdMap.get(i.dataId).id,h=e.makeOutput([3],"int32"),d=e.dataIdMap.get(h.dataId).id;j1(o,x,t,s,r,n,d);const u=e.readSync(h.dataId);let p;switch(u[0]){case 0:{p=_c(u[1],u[2]);break}case 1:{p=td(u[1],u[2]);break}case 2:p=ed();break;case 3:{const v=Array.from(e.readSync(S.dataId)),m=Array.from(e.readSync(i.dataId));p=nd(v,m);break}case 4:{const v=Array.from(e.readSync(S.dataId)),m=Array.from(e.readSync(i.dataId));p=sd(v,m);break}default:p=""}if(e.disposeData(h.dataId),p)throw e.disposeData(a.dataId),e.disposeData(i.dataId),new Error(p);return[a,i]}const KG={kernelName:Gu,backendName:"wasm",setupFunc:HG,kernelFunc:YG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Z1;function Q1(c){Z1=c.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function J1(c,e){const{backend:f,inputs:y}=c,{data:S,indices:C,segmentIds:o}=y,x=C.shape[0],t=f.readSync(o.dataId,x-1,x)[0],l=x>0?t+1:0;if(l<0)throw new Error($a());const a=S.shape.slice();a[0]=l;const r=f.dataIdMap.get(S.dataId).id,i=f.dataIdMap.get(C.dataId).id,n=f.dataIdMap.get(o.dataId).id,h=f.makeOutput(a,S.dtype),d=f.dataIdMap.get(h.dataId).id,u=f.makeOutput([4],"int32"),p=f.dataIdMap.get(u.dataId).id;Z1(r,Ie[S.dtype],S.shape[0],i,n,d,p,e,0);const v=f.readSync(u.dataId);let m;switch(v[0]){case 0:{m=$a();break}case 1:{m=id();break}case 2:m=rd(v[1],v[2]);break;case 3:m=ad(v[1],v[2],v[3]);break;default:m=""}if(f.disposeData(u.dataId),m)throw f.disposeData(h.dataId),new Error(m);return h}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jG(c){return J1(c,!0)}const ZG={kernelName:sc,backendName:"wasm",setupFunc:Q1,kernelFunc:jG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QG(c){return J1(c,!1)}const JG={kernelName:ic,backendName:"wasm",setupFunc:Q1,kernelFunc:QG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let q1;function qG(c){q1=c.wasm.cwrap(Uu,null,["number","number","number","number","number","number","number","number","array","number","number"])}function _G(c){const{backend:e,inputs:f,attrs:y}=c,{sparseIndices:S,sparseValues:C,defaultValue:o}=f,{outputShape:x}=y,t=e.makeOutput(x,o.dtype);if(bt(x)===0)return t;const{sliceRank:s,numUpdates:l,sliceSize:a,strides:r,outputSize:i}=mr(C,S,x),n=e.dataIdMap.get(S.dataId).id,h=e.dataIdMap.get(C.dataId).id,d=e.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(r).buffer),p=e.dataIdMap.get(t.dataId).id;return q1(n,h,C.shape.length,d,Ie[o.dtype],s,l,a,u,i,p),t}const tU={kernelName:Uu,backendName:"wasm",setupFunc:qG,kernelFunc:_G};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eU(c){const{inputs:e,attrs:f,backend:y}=c,{x:S}=e,{numOrSizeSplits:C,axis:o}=f,x=Qe(o,S.shape)[0],t=Zc(S,C,x),s=new Array(S.shape.length).fill(0),l=S.shape.slice();return t.map(a=>{const r=[...l];r[x]=a;const i=cr({inputs:{x:S},attrs:{begin:s,size:r},backend:y});return s[x]+=a,i})}const nU={kernelName:ec,backendName:"wasm",kernelFunc:eU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sU=Ee(_f);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iU=Ee(Tv);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rU=tn(rc);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _1;function aU(c){_1=c.wasm.cwrap(Wu,null,["number","number","number","number"])}function oU(c){const{backend:e,inputs:f,attrs:y}=c,{alpha:S}=y,{x:C}=f,o=e.dataIdMap.get(C.dataId).id,x=e.makeOutput(C.shape,C.dtype),t=e.dataIdMap.get(x.dataId).id;return _1(o,S,Ie[C.dtype],t),x}const uU={kernelName:Wu,backendName:"wasm",setupFunc:aU,kernelFunc:oU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let t2;function lU(c){t2=c.wasm.cwrap(Vu,null,["number","array","number","array","array","array","array","array","number","number"])}function hU(c){const{backend:e,inputs:f,attrs:y}=c,{x:S}=f,{begin:C,end:o,strides:x,beginMask:t,endMask:s,ellipsisMask:l,newAxisMask:a,shrinkAxisMask:r}=y,{finalShapeSparse:i,finalShape:n,isIdentity:h,sliceDim0:d,isSimpleSlice:u,begin:p,end:v,strides:m}=Wc(S.shape,C,o,x,t,s,l,a,r);let g;if(h)g=Mn({inputs:{x:S},backend:e,attrs:{shape:n}});else if(d||u){it(S.shape.length>=1,()=>`Input must have rank at least 1, got: ${S.shape.length}`);const T=zc(p,v,m),w=cr({inputs:{x:S},backend:e,attrs:{begin:p,size:T}});g=Mn({inputs:{x:w},backend:e,attrs:{shape:n}}),e.disposeData(w.dataId)}else{const T=e.makeOutput(i,"float32"),w=e.dataIdMap.get(S.dataId).id,b=new Uint8Array(new Int32Array(Me(S.shape)).buffer),E=new Uint8Array(new Int32Array(p).buffer),A=new Uint8Array(new Int32Array(v).buffer),R=new Uint8Array(new Int32Array(m).buffer),I=new Uint8Array(new Int32Array(i).buffer),P=new Uint8Array(new Int32Array(Me(i)).buffer),M=e.dataIdMap.get(T.dataId).id;t2(w,b,S.shape.length,E,A,R,I,P,i.length,M),g=Mn({inputs:{x:T},backend:e,attrs:{shape:n}}),e.disposeData(T.dataId)}return g}const fU={kernelName:Vu,backendName:"wasm",setupFunc:lU,kernelFunc:hU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cU(c){const{backend:e,inputs:f,attrs:y}=c,{data:S,dataSplits:C}=f,{separator:o,nGramWidths:x,leftPad:t,rightPad:s,padWidth:l,preserveShortSequences:a}=y,r=e.readSync(S.dataId),i=e.readSync(C.dataId),[n,h]=Xg(r,i,o,x,t,s,l,a),d=e.makeOutput([n.length],"string"),u=e.dataIdMap.get(d.dataId);u.stringBytes=n;const p=e.makeOutput(C.shape,"int32");return e.typedArrayFromHeap(p).set(h),[d,p]}const dU={kernelName:ac,backendName:"wasm",kernelFunc:cU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pU(c){const{backend:e,inputs:f,attrs:y}=c,{input:S,delimiter:C}=f,{skipEmpty:o}=y,x=e.readSync(S.dataId),t=e.readSync(C.dataId),[s,l,a]=Hg(x,t[0],o),r=l.length,i=e.makeOutput([r,2],"int32");e.typedArrayFromHeap(i).set(s);const h=e.makeOutput([r],"string"),d=e.dataIdMap.get(h.dataId);d.stringBytes=l;const u=e.makeOutput([2],"int32");return e.typedArrayFromHeap(u).set(a),[i,h,u]}const vU={kernelName:oc,backendName:"wasm",kernelFunc:pU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mU(c){const{backend:e,inputs:f,attrs:y}=c,{input:S}=f,{numBuckets:C}=y,o=e.readSync(S.dataId),x=Yg(o,C),t=e.makeOutput(S.shape,"int32");return e.typedArrayFromHeap(t).set(x),t}const gU={kernelName:uc,backendName:"wasm",kernelFunc:mU};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xU=tn(lc);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e2;function yU(c){e2=c.wasm.cwrap(Bu,null,["number","number","number","number"])}function TU(c){const{backend:e,inputs:f,attrs:y}=c,{axis:S,keepDims:C}=y,{x:o}=f,x=e.dataIdMap.get(o.dataId).id;let t=x,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Li(o,S,e);let n=a;if(i){const v=e.dataIdMap.get(l.dataId).id;v!==x&&(s=l,t=v,n=dn(n.length,s.shape.length))}rn("sum",n,s.shape.length);const[h,d]=xn(s.shape,n),u=bt(d),p=e.makeOutput(h,s.dtype);if(bt(s.shape)!==0){const v=e.dataIdMap.get(p.dataId).id;e2(t,u,Ie[p.dtype],v)}if(i&&e.disposeData(l.dataId),C){const v=sn(p.shape,r);p.shape=v}return p}const SU={kernelName:Bu,backendName:"wasm",setupFunc:yU,kernelFunc:TU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CU=Ee(hc);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EU=Ee(fc);/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let n2;function wU(c){n2=c.wasm.cwrap(Du,null,["number","number","number","number","number","number","array","number","number","number"])}function bU(c){const{backend:e,inputs:f,attrs:y}=c,{tensor:S,indices:C,updates:o}=f,x=e.makeOutput(S.shape,S.dtype);if(bt(S.shape)===0)return x;const{sliceRank:t,numUpdates:s,sliceSize:l,strides:a,outputSize:r}=mr(o,C,S.shape),n=e.dataIdMap.get(C.dataId).id,d=e.dataIdMap.get(o.dataId).id,p=e.dataIdMap.get(S.dataId).id,v=new Uint8Array(new Int32Array(a).buffer),m=e.dataIdMap.get(x.dataId).id;return n2(n,d,Ie[o.dtype],t,s,l,v,r,m,p),x}const AU={kernelName:Du,backendName:"wasm",setupFunc:wU,kernelFunc:bU};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let s2;function RU(c){s2=c.wasm.cwrap(Wa,null,["number","array","number","array","number","number"])}function IU(c){const{inputs:e,backend:f,attrs:y}=c,{x:S}=e,C=f.dataIdMap.get(S.dataId).id,{reps:o}=y,x=new Array(S.shape.length);for(let r=0;r<x.length;r++)x[r]=S.shape[r]*o[r];const t=new Uint8Array(new Int32Array(S.shape).buffer),s=new Uint8Array(new Int32Array(x).buffer),l=f.makeOutput(x,S.dtype),a=f.dataIdMap.get(l.dataId).id;return s2(C,t,S.shape.length,s,x.length,Ie[l.dtype],a),l}const PU={kernelName:Wa,backendName:"wasm",setupFunc:RU,kernelFunc:IU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let i2;function FU(c){i2=c.wasm.cwrap(zu,null,["number","array","number","number","number","bool","number","number"])}const MU=({inputs:c,backend:e,attrs:f})=>{const{x:y}=c,{k:S,sorted:C}=f,o=e.dataIdMap.get(y.dataId).id,x=new Uint8Array(new Int32Array(y.shape).buffer),t=y.shape.slice();t[t.length-1]=S;const s=e.makeOutput(t,y.dtype),l=e.dataIdMap.get(s.dataId).id,a=e.makeOutput(t,"int32"),r=e.dataIdMap.get(a.dataId).id;return i2(o,x,y.shape.length,Ie[y.dtype],S,C,l,r),[s,a]},NU={kernelName:zu,backendName:"wasm",setupFunc:FU,kernelFunc:MU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let r2;function OU(c){r2=c.wasm.cwrap(ku,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])}function DU(c){const{backend:e,inputs:f,attrs:y}=c,{image:S,transforms:C}=f,{interpolation:o,fillMode:x,fillValue:t,outputShape:s}=y,[l,a,r,i]=S.shape,[n,h]=s??[a,r],d=[l,n,h,i],u=new Uint8Array(new Int32Array(Me(S.shape)).buffer),p=new Uint8Array(new Int32Array(Me(d)).buffer),v=e.makeOutput(d,S.dtype),m=e.dataIdMap.get(v.dataId).id,T=e.dataIdMap.get(S.dataId).id,b=e.dataIdMap.get(C.dataId).id,E=o==="nearest"?1:2;let A;switch(x){case"constant":A=1;break;case"reflect":A=2;break;case"wrap":A=3;break;case"nearest":A=4;break;default:A=1;break}return r2(T,b,C.shape[0]>1,l,n,h,i,r,a,u,S.shape.length-1,p,d.length-1,E,A,t,m),v}const LU={kernelName:ku,backendName:"wasm",setupFunc:OU,kernelFunc:DU};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BU(c){const{inputs:e,attrs:f,backend:y}=c,{axis:S}=f,{x:C}=e,{outputValues:o,outputShape:x,indices:t}=jg(y.readSync(C.dataId),S,C.shape,C.dtype);return[y.makeOutput(x,C.dtype,void 0,o),y.makeOutput([t.length],"int32",void 0,t)]}const $U={kernelName:cc,backendName:"wasm",kernelFunc:BU};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GU(c){const{inputs:e,backend:f,attrs:y}=c,{value:S}=e;let{axis:C}=y;C<0&&(C+=S.shape.length);const o=S.shape[C],x=S.shape.length,t=new Array(x-1);let s=0;for(let i=0;i<x;i++)i!==C&&(t[s++]=S.shape[i]);const l=new Array(o),a=new Array(x).fill(0),r=S.shape.slice();r[C]=1;for(let i=0;i<l.length;i++)a[C]=i,l[i]=cr({inputs:{x:S},attrs:{begin:a,size:r},backend:f});return l.map(({dataId:i,dtype:n})=>({dataId:i,dtype:n,shape:t}))}const UU={kernelName:dc,backendName:"wasm",kernelFunc:GU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VU(c){const{inputs:{x:e},backend:f}=c,y=f.makeOutput(e.shape,e.dtype);return f.typedArrayFromHeap(y).fill(0),y}const zU={kernelName:pc,backendName:"wasm",kernelFunc:VU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kU=[OO,DO,LO,BO,$O,VO,jO,JO,qO,_O,tD,eD,nD,sD,iD,oD,mD,hD,dD,TD,AD,PD,FD,ND,OD,DD,$D,GD,zD,XD,KD,QD,_D,tL,eL,iL,oL,hL,dL,mL,yL,CL,bL,IL,ML,NL,LL,$L,GL,UL,VL,zL,kL,HL,YL,KL,QL,_L,nB,rB,uB,hB,cB,zO,dB,pB,vB,xB,TB,CB,bB,RB,AB,PB,FB,NB,DB,$B,VB,WB,XB,KB,QB,_B,n$,r$,u$,f$,c$,v$,T$,S$,C$,E$,A$,P$,N$,D$,$$,U$,z$,D1,X$,K$,Q$,q$,_$,tG,eG,nG,gD,rG,uG,fG,pG,gG,TG,SG,CG,bG,IG,MG,NG,LG,BG,$G,GG,wD,g$,UG,zG,XG,KG,ZG,JG,tU,nU,sU,iU,rU,uU,fU,dU,vU,gU,xU,SU,CU,EU,AU,PU,NU,LU,HO,$U,UU,zU];for(const c of kU)Ev(c);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dh=St();dh.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch{return!1}});dh.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(dh.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}});var a2={exports:{}};(function(c,e){var f=(()=>{var y=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(y=y||__filename),function(S){S=S||{};function C(){return L.buffer!=W&&vt(L.buffer),K}function o(){return L.buffer!=W&&vt(L.buffer),q}function x(){return L.buffer!=W&&vt(L.buffer),_}function t(){return L.buffer!=W&&vt(L.buffer),rt}function s(){return L.buffer!=W&&vt(L.buffer),ft}var l=typeof S<"u"?S:{},a,r;l.ready=new Promise(function(et,lt){a=et,r=lt});var i;typeof process<"u"&&process.listeners&&(i={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var n=Object.assign({},l),h=(et,lt)=>{throw lt},d=typeof window=="object",u=typeof importScripts=="function",p=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",v=l.ENVIRONMENT_IS_PTHREAD||!1,m="";function g(et){return l.locateFile?l.locateFile(et,m):m+et}var T,w,b;function E(et){if(et instanceof Xe)return;F("exiting due to exception: "+et)}if(p){var A=gi,R=gi;u?m=R.dirname(m)+"/":m=__dirname+"/",T=(lt,Tt)=>(lt=ce(lt)?new URL(lt):R.normalize(lt),A.readFileSync(lt,Tt?void 0:"utf8")),b=lt=>{var Tt=T(lt,!0);return Tt.buffer||(Tt=new Uint8Array(Tt)),Tt},w=(lt,Tt,Lt)=>{lt=ce(lt)?new URL(lt):R.normalize(lt),A.readFile(lt,function(Kt,Xt){Kt?Lt(Kt):Tt(Xt.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(lt){if(!(lt instanceof Xe))throw lt}),process.on("unhandledRejection",function(lt){throw lt}),h=(lt,Tt)=>{if(Zt())throw process.exitCode=lt,Tt;E(Tt),process.exit(lt)},l.inspect=function(){return"[Emscripten Module object]"};let et;try{et=gi}catch(lt){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),lt}Kn.Worker=et.Worker}else(d||u)&&(u?m=self.location.href:typeof document<"u"&&document.currentScript&&(m=document.currentScript.src),typeof y<"u"&&y&&(m=y),m.indexOf("blob:")!==0?m=m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):m="",p||(T=et=>{var lt=new XMLHttpRequest;return lt.open("GET",et,!1),lt.send(null),lt.responseText},u&&(b=et=>{var lt=new XMLHttpRequest;return lt.open("GET",et,!1),lt.responseType="arraybuffer",lt.send(null),new Uint8Array(lt.response)}),w=(et,lt,Tt)=>{var Lt=new XMLHttpRequest;Lt.open("GET",et,!0),Lt.responseType="arraybuffer",Lt.onload=()=>{if(Lt.status==200||Lt.status==0&&Lt.response){lt(Lt.response);return}Tt()},Lt.onerror=Tt,Lt.send(null)}));p&&typeof performance>"u"&&(Kn.performance=gi.performance);var I=console.log.bind(console),P=console.warn.bind(console);p&&(I=et=>A.writeSync(1,et+`
`),P=et=>A.writeSync(2,et+`
`));var M=l.print||I,F=l.printErr||P;Object.assign(l,n),n=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram,l.quit&&(h=l.quit);var O;l.wasmBinary&&(O=l.wasmBinary);var D=l.noExitRuntime||!0;typeof WebAssembly!="object"&&we("no native wasm support detected");var L,z,X=!1,H;function J(et,lt){et||we(lt)}var G=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function k(et,lt,Tt){lt>>>=0;for(var Lt=lt+Tt,Kt=lt;et[Kt]&&!(Kt>=Lt);)++Kt;if(Kt-lt>16&&et.buffer&&G)return G.decode(et.buffer instanceof SharedArrayBuffer?et.slice(lt,Kt):et.subarray(lt,Kt));for(var Xt="";lt<Kt;){var Nt=et[lt++];if(!(Nt&128)){Xt+=String.fromCharCode(Nt);continue}var Ft=et[lt++]&63;if((Nt&224)==192){Xt+=String.fromCharCode((Nt&31)<<6|Ft);continue}var $=et[lt++]&63;if((Nt&240)==224?Nt=(Nt&15)<<12|Ft<<6|$:Nt=(Nt&7)<<18|Ft<<12|$<<6|et[lt++]&63,Nt<65536)Xt+=String.fromCharCode(Nt);else{var Z=Nt-65536;Xt+=String.fromCharCode(55296|Z>>10,56320|Z&1023)}}return Xt}function N(et,lt){return et>>>=0,et?k(o(),et,lt):""}function B(et,lt,Tt,Lt){if(Tt>>>=0,!(Lt>0))return 0;for(var Kt=Tt,Xt=Tt+Lt-1,Nt=0;Nt<et.length;++Nt){var Ft=et.charCodeAt(Nt);if(Ft>=55296&&Ft<=57343){var $=et.charCodeAt(++Nt);Ft=65536+((Ft&1023)<<10)|$&1023}if(Ft<=127){if(Tt>=Xt)break;lt[Tt++>>>0]=Ft}else if(Ft<=2047){if(Tt+1>=Xt)break;lt[Tt++>>>0]=192|Ft>>6,lt[Tt++>>>0]=128|Ft&63}else if(Ft<=65535){if(Tt+2>=Xt)break;lt[Tt++>>>0]=224|Ft>>12,lt[Tt++>>>0]=128|Ft>>6&63,lt[Tt++>>>0]=128|Ft&63}else{if(Tt+3>=Xt)break;lt[Tt++>>>0]=240|Ft>>18,lt[Tt++>>>0]=128|Ft>>12&63,lt[Tt++>>>0]=128|Ft>>6&63,lt[Tt++>>>0]=128|Ft&63}}return lt[Tt>>>0]=0,Tt-Kt}function U(et,lt,Tt){return B(et,o(),lt,Tt)}var W,K,q,_,rt,ft;v&&(W=l.buffer);function vt(et){W=et,l.HEAP8=K=new Int8Array(et),l.HEAP16=new Int16Array(et),l.HEAP32=_=new Int32Array(et),l.HEAPU8=q=new Uint8Array(et),l.HEAPU16=new Uint16Array(et),l.HEAPU32=rt=new Uint32Array(et),l.HEAPF32=new Float32Array(et),l.HEAPF64=ft=new Float64Array(et)}var mt=l.INITIAL_MEMORY||16777216;if(v)L=l.wasmMemory,W=l.buffer;else if(l.wasmMemory)L=l.wasmMemory;else if(L=new WebAssembly.Memory({initial:mt/65536,maximum:65536,shared:!0}),!(L.buffer instanceof SharedArrayBuffer))throw F("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),p&&F("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");L&&(W=L.buffer),mt=W.byteLength,vt(W);var yt,xt=[],It=[],Gt=[];function Zt(){return D}function Bt(){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)Ut(l.preRun.shift());Re(xt)}function At(){v||Re(It)}function kt(){if(!v){if(l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;)te(l.postRun.shift());Re(Gt)}}function Ut(et){xt.unshift(et)}function ee(et){It.unshift(et)}function te(et){Gt.unshift(et)}var fe=0,ae=null;function le(et){fe++,l.monitorRunDependencies&&l.monitorRunDependencies(fe)}function re(et){if(fe--,l.monitorRunDependencies&&l.monitorRunDependencies(fe),fe==0&&ae){var lt=ae;ae=null,lt()}}function we(et){l.onAbort&&l.onAbort(et),et="Aborted("+et+")",F(et),X=!0,H=1,et+=". Build with -sASSERTIONS for more info.";var lt=new WebAssembly.RuntimeError(et);throw r(lt),lt}var Se="data:application/octet-stream;base64,";function Ne(et){return et.startsWith(Se)}function ce(et){return et.startsWith("file://")}var se;se="tfjs-backend-wasm-threaded-simd.wasm",Ne(se)||(se=g(se));function Ae(et){try{if(et==se&&O)return new Uint8Array(O);if(b)return b(et);throw"both async and sync fetching of the wasm failed"}catch(lt){we(lt)}}function Le(){if(!O&&(d||u)){if(typeof fetch=="function"&&!ce(se))return fetch(se,{credentials:"same-origin"}).then(function(et){if(!et.ok)throw"failed to load wasm binary file at '"+se+"'";return et.arrayBuffer()}).catch(function(){return Ae(se)});if(w)return new Promise(function(et,lt){w(se,function(Tt){et(new Uint8Array(Tt))},lt)})}return Promise.resolve().then(function(){return Ae(se)})}function en(){var et={env:ui,wasi_snapshot_preview1:ui};function lt(Nt,Ft){var $=Nt.exports;if(l.asm=$,nn(l.asm._emscripten_tls_init),yt=l.asm.__indirect_function_table,ee(l.asm.__wasm_call_ctors),z=Ft,!v){var Z=zt.unusedWorkers.length;zt.unusedWorkers.forEach(function(tt){zt.loadWasmModuleToWorker(tt,function(){--Z||re()})})}}v||le();function Tt(Nt){lt(Nt.instance,Nt.module)}function Lt(Nt){return Le().then(function(Ft){return WebAssembly.instantiate(Ft,et)}).then(function(Ft){return Ft}).then(Nt,function(Ft){F("failed to asynchronously prepare wasm: "+Ft),we(Ft)})}function Kt(){return!O&&typeof WebAssembly.instantiateStreaming=="function"&&!Ne(se)&&!ce(se)&&!p&&typeof fetch=="function"?fetch(se,{credentials:"same-origin"}).then(function(Nt){var Ft=WebAssembly.instantiateStreaming(Nt,et);return Ft.then(Tt,function($){return F("wasm streaming compile failed: "+$),F("falling back to ArrayBuffer instantiation"),Lt(Tt)})}):Lt(Tt)}if(l.instantiateWasm)try{var Xt=l.instantiateWasm(et,lt);return Xt}catch(Nt){F("Module.instantiateWasm callback failed with error: "+Nt),r(Nt)}return Kt().catch(r),{}}var ge={};function Xe(et){this.name="ExitStatus",this.message="Program terminated with exit("+et+")",this.status=et}function Qn(et){var lt=zt.pthreads[et];delete zt.pthreads[et],lt.terminate(),Vs(et),zt.runningWorkers.splice(zt.runningWorkers.indexOf(lt),1),lt.pthread_ptr=0}function An(et){var lt=zt.pthreads[et];lt.postMessage({cmd:"cancel"})}function _e(et){var lt=zt.pthreads[et];J(lt),zt.returnWorkerToPool(lt)}function ue(et){var lt=zt.getNewWorker();if(!lt)return 6;zt.runningWorkers.push(lt),zt.pthreads[et.pthread_ptr]=lt,lt.pthread_ptr=et.pthread_ptr;var Tt={cmd:"run",start_routine:et.startRoutine,arg:et.arg,pthread_ptr:et.pthread_ptr};return lt.runPthread=()=>{p&&lt.ref(),lt.postMessage(Tt,et.transferList),delete lt.runPthread},lt.loaded&&lt.runPthread(),0}function Os(et){if(v)return As(1,1,et);H=et,Zt()||(zt.terminateAllThreads(),l.onExit&&l.onExit(et),X=!0),h(et,new Xe(et))}function wt(et,lt){if(H=et,!lt&&v)throw ie(et),"unwind";Os(et)}var Dt=wt;function _t(et){if(et instanceof Xe||et=="unwind")return H;h(1,et)}var zt={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){v?zt.initWorker():zt.initMainThread()},initMainThread:function(){for(var et=8;et--;)zt.allocateUnusedWorker()},initWorker:function(){D=!1},setExitStatus:function(et){H=et},terminateAllThreads:function(){for(var et of Object.values(zt.pthreads))zt.returnWorkerToPool(et);for(var et of zt.unusedWorkers)et.terminate();zt.unusedWorkers=[]},returnWorkerToPool:function(et){var lt=et.pthread_ptr;delete zt.pthreads[lt],zt.unusedWorkers.push(et),zt.runningWorkers.splice(zt.runningWorkers.indexOf(et),1),et.pthread_ptr=0,p&&et.unref(),Vs(lt)},receiveObjectTransfer:function(et){},threadInitTLS:function(){zt.tlsInitFunctions.forEach(et=>et())},loadWasmModuleToWorker:function(et,lt){et.onmessage=Xt=>{var Nt=Xt.data,Ft=Nt.cmd;if(et.pthread_ptr&&(zt.currentProxiedOperationCallerThread=et.pthread_ptr),Nt.targetThread&&Nt.targetThread!=Rs()){var $=zt.pthreads[Nt.targetThread];$?$.postMessage(Nt,Nt.transferList):F('Internal error! Worker sent a message "'+Ft+'" to target pthread '+Nt.targetThread+", but that thread no longer exists!"),zt.currentProxiedOperationCallerThread=void 0;return}Ft==="processProxyingQueue"?ii(Nt.queue):Ft==="spawnThread"?ue(Nt):Ft==="cleanupThread"?_e(Nt.thread):Ft==="killThread"?Qn(Nt.thread):Ft==="cancelThread"?An(Nt.thread):Ft==="loaded"?(et.loaded=!0,p&&et.unref(),lt&&lt(et),et.runPthread&&et.runPthread()):Ft==="print"?M("Thread "+Nt.threadId+": "+Nt.text):Ft==="printErr"?F("Thread "+Nt.threadId+": "+Nt.text):Ft==="alert"?alert("Thread "+Nt.threadId+": "+Nt.text):Nt.target==="setimmediate"?et.postMessage(Nt):Ft==="callHandler"?l[Nt.handler](...Nt.args):Ft&&F("worker sent an unknown command "+Ft),zt.currentProxiedOperationCallerThread=void 0},et.onerror=Xt=>{var Nt="worker sent an error!";throw F(Nt+" "+Xt.filename+":"+Xt.lineno+": "+Xt.message),Xt},p&&(et.on("message",function(Xt){et.onmessage({data:Xt})}),et.on("error",function(Xt){et.onerror(Xt)}),et.on("detachedExit",function(){}));var Tt=[],Lt=["onExit","onAbort","print","printErr"];for(var Kt of Lt)l.hasOwnProperty(Kt)&&Tt.push(Kt);et.postMessage({cmd:"load",handlers:Tt,urlOrBlob:l.mainScriptUrlOrBlob||y,wasmMemory:L,wasmModule:z})},allocateUnusedWorker:function(){var et,lt=g("tfjs-backend-wasm-threaded-simd.worker.js");et=new Worker(lt),zt.unusedWorkers.push(et)},getNewWorker:function(){return zt.unusedWorkers.length==0&&(zt.allocateUnusedWorker(),zt.loadWasmModuleToWorker(zt.unusedWorkers[0])),zt.unusedWorkers.pop()}};l.PThread=zt;function Re(et){for(;et.length>0;)et.shift()(l)}function xe(){var et=Rs(),lt=x()[et+52>>>2],Tt=x()[et+56>>>2],Lt=lt-Tt;ki(lt,Lt),V(lt)}l.establishStackSpace=xe;function ie(et){if(v)return As(2,0,et);try{Dt(et)}catch(lt){_t(lt)}}var oe=[];function He(et){var lt=oe[et];return lt||(et>=oe.length&&(oe.length=et+1),oe[et]=lt=yt.get(et)),lt}function Pe(et,lt){var Tt=He(et)(lt);Zt()?zt.setExitStatus(Tt):ci(Tt)}l.invokeEntryPoint=Pe;function nn(et){zt.tlsInitFunctions.push(et)}function Ds(et){li(et,!u,1,!d),zt.threadInitTLS()}function Jn(et){v?postMessage({cmd:"cleanupThread",thread:et}):_e(et)}function Ls(et,lt,Tt,Lt){return v?As(3,1,et,lt,Tt,Lt):Ge(et,lt,Tt,Lt)}function Ge(et,lt,Tt,Lt){if(typeof SharedArrayBuffer>"u")return F("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Kt=[],Xt=0;if(v&&(Kt.length===0||Xt))return Ls(et,lt,Tt,Lt);var Nt={startRoutine:Tt,pthread_ptr:et,arg:Lt,transferList:Kt};return v?(Nt.cmd="spawnThread",postMessage(Nt,Kt),0):ue(Nt)}function qn(){return 65536}var Bs=!0;function Er(){return Bs}function ii(et){Atomics.store(x(),et>>2,1),Rs()&&fi(et),Atomics.compareExchange(x(),et>>2,1,0)}l.executeNotifiedProxyingQueue=ii;function ri(et,lt,Tt,Lt){if(et==lt)setTimeout(()=>ii(Lt));else if(v)postMessage({targetThread:et,cmd:"processProxyingQueue",queue:Lt});else{var Kt=zt.pthreads[et];if(!Kt)return;Kt.postMessage({cmd:"processProxyingQueue",queue:Lt})}return 1}function ds(et,lt,Tt){return-1}function ha(){we("")}function $s(et){$s.shown||($s.shown={}),$s.shown[et]||($s.shown[et]=1,p&&(et="warning: "+et),F(et))}function ai(){p||u||$s("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function wr(){return Date.now()}function oi(){return 4294901760}function $i(){return oi()}var Gs;p?Gs=()=>{var et=process.hrtime();return et[0]*1e3+et[1]/1e6}:Gs=()=>performance.timeOrigin+performance.now();function Us(et,lt,Tt){o().copyWithin(et>>>0,lt>>>0,lt+Tt>>>0)}function bs(){return p?gi.cpus().length:navigator.hardwareConcurrency}function Rn(et){var lt=di(),Tt=et();return V(lt),Tt}function As(et,lt){var Tt=arguments.length-2,Lt=arguments;return Rn(()=>{for(var Kt=Tt,Xt=j(Kt*8),Nt=Xt>>3,Ft=0;Ft<Tt;Ft++){var $=Lt[2+Ft];s()[Nt+Ft>>>0]=$}return hi(et,Kt,Xt,lt)})}var Gi=[];function br(et,lt,Tt){Gi.length=lt;for(var Lt=Tt>>3,Kt=0;Kt<lt;Kt++)Gi[Kt]=s()[Lt+Kt>>>0];var Xt=et<0,Nt=Xt?ge[-et-1]:da[et];return Nt.apply(null,Gi)}function Ui(et){try{return L.grow(et-W.byteLength+65535>>>16),vt(L.buffer),1}catch{}}function Tn(et){var lt=o().length;if(et=et>>>0,et<=lt)return!1;var Tt=oi();if(et>Tt)return!1;let Lt=($,Z)=>$+(Z-$%Z)%Z;for(var Kt=1;Kt<=4;Kt*=2){var Xt=lt*(1+.2/Kt);Xt=Math.min(Xt,et+100663296);var Nt=Math.min(Tt,Lt(Math.max(et,Xt),65536)),Ft=Ui(Nt);if(Ft)return!0}return!1}function Ar(){throw"unwind"}function _n(et){return v?As(4,1,et):52}function Vi(et,lt,Tt,Lt,Kt){return v?As(5,1,et,lt,Tt,Lt,Kt):70}var zi=[null,[],[]];function fa(et,lt){var Tt=zi[et];lt===0||lt===10?((et===1?M:F)(k(Tt,0)),Tt.length=0):Tt.push(lt)}function Rr(et,lt,Tt,Lt){if(v)return As(6,1,et,lt,Tt,Lt);for(var Kt=0,Xt=0;Xt<Tt;Xt++){var Nt=t()[lt>>>2],Ft=t()[lt+4>>>2];lt+=8;for(var $=0;$<Ft;$++)fa(et,o()[Nt+$>>>0]);Kt+=Ft}return t()[Lt>>>2]=Kt,0}function ps(et){var lt=l["_"+et];return lt}function Ir(et,lt){C().set(et,lt>>>0)}function Pr(et,lt,Tt,Lt,Kt){var Xt={string:ot=>{var dt=0;if(ot!=null&&ot!==0){var Et=(ot.length<<2)+1;dt=j(Et),U(ot,dt,Et)}return dt},array:ot=>{var dt=j(ot.length);return Ir(ot,dt),dt}};function Nt(ot){return lt==="string"?N(ot):lt==="boolean"?!!ot:ot}var Ft=ps(et),$=[],Z=0;if(Lt)for(var tt=0;tt<Lt.length;tt++){var nt=Xt[Tt[tt]];nt?(Z===0&&(Z=di()),$[tt]=nt(Lt[tt])):$[tt]=Lt[tt]}var ut=Ft.apply(null,$);function at(ot){return Z!==0&&V(Z),Nt(ot)}return ut=at(ut),ut}function ca(et,lt,Tt,Lt){Tt=Tt||[];var Kt=Tt.every(Nt=>Nt==="number"||Nt==="boolean"),Xt=lt!=="string";return Xt&&Kt&&!Lt?ps(et):function(){return Pr(et,lt,Tt,arguments)}}zt.init();var da=[null,Os,ie,Ls,_n,Vi,Rr],ui={__emscripten_init_main_thread_js:Ds,__emscripten_thread_cleanup:Jn,__pthread_create_js:Ge,_emscripten_default_pthread_stack_size:qn,_emscripten_get_now_is_monotonic:Er,_emscripten_notify_task_queue:ri,_emscripten_set_offscreencanvas_size:ds,abort:ha,emscripten_check_blocking_allowed:ai,emscripten_date_now:wr,emscripten_get_heap_max:$i,emscripten_get_now:Gs,emscripten_memcpy_big:Us,emscripten_num_logical_cores:bs,emscripten_receive_on_main_thread_js:br,emscripten_resize_heap:Tn,emscripten_unwind_to_js_event_loop:Ar,exit:Dt,fd_close:_n,fd_seek:Vi,fd_write:Rr,memory:L||l.wasmMemory};en(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.__wasm_call_ctors).apply(null,arguments)},l._init=function(){return(l._init=l.asm.init).apply(null,arguments)},l._init_with_threads_count=function(){return(l._init_with_threads_count=l.asm.init_with_threads_count).apply(null,arguments)},l._get_threads_count=function(){return(l._get_threads_count=l.asm.get_threads_count).apply(null,arguments)},l._register_tensor=function(){return(l._register_tensor=l.asm.register_tensor).apply(null,arguments)},l._dispose_data=function(){return(l._dispose_data=l.asm.dispose_data).apply(null,arguments)},l._dispose=function(){return(l._dispose=l.asm.dispose).apply(null,arguments)},l._Abs=function(){return(l._Abs=l.asm.Abs).apply(null,arguments)},l._Acos=function(){return(l._Acos=l.asm.Acos).apply(null,arguments)},l._Acosh=function(){return(l._Acosh=l.asm.Acosh).apply(null,arguments)},l._Add=function(){return(l._Add=l.asm.Add).apply(null,arguments)},l._AddN=function(){return(l._AddN=l.asm.AddN).apply(null,arguments)},l._All=function(){return(l._All=l.asm.All).apply(null,arguments)},l._Any=function(){return(l._Any=l.asm.Any).apply(null,arguments)},l._ArgMax=function(){return(l._ArgMax=l.asm.ArgMax).apply(null,arguments)},l._ArgMin=function(){return(l._ArgMin=l.asm.ArgMin).apply(null,arguments)},l._Asin=function(){return(l._Asin=l.asm.Asin).apply(null,arguments)},l._Asinh=function(){return(l._Asinh=l.asm.Asinh).apply(null,arguments)},l._Atan=function(){return(l._Atan=l.asm.Atan).apply(null,arguments)},l._Atan2=function(){return(l._Atan2=l.asm.Atan2).apply(null,arguments)},l._Atanh=function(){return(l._Atanh=l.asm.Atanh).apply(null,arguments)},l._AvgPool=function(){return(l._AvgPool=l.asm.AvgPool).apply(null,arguments)},l._AvgPool3D=function(){return(l._AvgPool3D=l.asm.AvgPool3D).apply(null,arguments)},l._AvgPool3DGrad=function(){return(l._AvgPool3DGrad=l.asm.AvgPool3DGrad).apply(null,arguments)},l._AvgPoolGrad=function(){return(l._AvgPoolGrad=l.asm.AvgPoolGrad).apply(null,arguments)},l._BatchMatMul=function(){return(l._BatchMatMul=l.asm.BatchMatMul).apply(null,arguments)},l._Bincount=function(){return(l._Bincount=l.asm.Bincount).apply(null,arguments)},l._BitwiseAnd=function(){return(l._BitwiseAnd=l.asm.BitwiseAnd).apply(null,arguments)},l._Ceil=function(){return(l._Ceil=l.asm.Ceil).apply(null,arguments)},l._ClipByValue=function(){return(l._ClipByValue=l.asm.ClipByValue).apply(null,arguments)},l._Conv2D=function(){return(l._Conv2D=l.asm.Conv2D).apply(null,arguments)},l._Conv2DBackpropInput=function(){return(l._Conv2DBackpropInput=l.asm.Conv2DBackpropInput).apply(null,arguments)},l._Conv3D=function(){return(l._Conv3D=l.asm.Conv3D).apply(null,arguments)},l._Conv3DBackpropFilterV2=function(){return(l._Conv3DBackpropFilterV2=l.asm.Conv3DBackpropFilterV2).apply(null,arguments)},l._Conv3DBackpropInputV2=function(){return(l._Conv3DBackpropInputV2=l.asm.Conv3DBackpropInputV2).apply(null,arguments)},l._Cos=function(){return(l._Cos=l.asm.Cos).apply(null,arguments)},l._Cosh=function(){return(l._Cosh=l.asm.Cosh).apply(null,arguments)},l._CropAndResize=function(){return(l._CropAndResize=l.asm.CropAndResize).apply(null,arguments)},l._Cumprod=function(){return(l._Cumprod=l.asm.Cumprod).apply(null,arguments)},l._Cumsum=function(){return(l._Cumsum=l.asm.Cumsum).apply(null,arguments)},l._DenseBincount=function(){return(l._DenseBincount=l.asm.DenseBincount).apply(null,arguments)},l._DepthToSpace=function(){return(l._DepthToSpace=l.asm.DepthToSpace).apply(null,arguments)},l._DepthwiseConv2dNative=function(){return(l._DepthwiseConv2dNative=l.asm.DepthwiseConv2dNative).apply(null,arguments)},l._Diag=function(){return(l._Diag=l.asm.Diag).apply(null,arguments)},l._Dilation2D=function(){return(l._Dilation2D=l.asm.Dilation2D).apply(null,arguments)},l._Dilation2DBackpropFilter=function(){return(l._Dilation2DBackpropFilter=l.asm.Dilation2DBackpropFilter).apply(null,arguments)},l._Dilation2DBackpropInput=function(){return(l._Dilation2DBackpropInput=l.asm.Dilation2DBackpropInput).apply(null,arguments)},l._Elu=function(){return(l._Elu=l.asm.Elu).apply(null,arguments)},l._EluGrad=function(){return(l._EluGrad=l.asm.EluGrad).apply(null,arguments)},l._Equal=function(){return(l._Equal=l.asm.Equal).apply(null,arguments)},l._Erf=function(){return(l._Erf=l.asm.Erf).apply(null,arguments)},l._Exp=function(){return(l._Exp=l.asm.Exp).apply(null,arguments)},l._Expm1=function(){return(l._Expm1=l.asm.Expm1).apply(null,arguments)},l._FlipLeftRight=function(){return(l._FlipLeftRight=l.asm.FlipLeftRight).apply(null,arguments)},l._Floor=function(){return(l._Floor=l.asm.Floor).apply(null,arguments)},l._FloorDiv=function(){return(l._FloorDiv=l.asm.FloorDiv).apply(null,arguments)},l._FusedBatchNorm=function(){return(l._FusedBatchNorm=l.asm.FusedBatchNorm).apply(null,arguments)},l._FusedConv2D=function(){return(l._FusedConv2D=l.asm.FusedConv2D).apply(null,arguments)},l._FusedDepthwiseConv2D=function(){return(l._FusedDepthwiseConv2D=l.asm.FusedDepthwiseConv2D).apply(null,arguments)},l._Gather=function(){return(l._Gather=l.asm.Gather).apply(null,arguments)},l._GatherNd=function(){return(l._GatherNd=l.asm.GatherNd).apply(null,arguments)},l._Greater=function(){return(l._Greater=l.asm.Greater).apply(null,arguments)},l._GreaterEqual=function(){return(l._GreaterEqual=l.asm.GreaterEqual).apply(null,arguments)},l._IsFinite=function(){return(l._IsFinite=l.asm.IsFinite).apply(null,arguments)},l._IsInf=function(){return(l._IsInf=l.asm.IsInf).apply(null,arguments)},l._IsNan=function(){return(l._IsNan=l.asm.IsNan).apply(null,arguments)},l._LRN=function(){return(l._LRN=l.asm.LRN).apply(null,arguments)},l._LRNGrad=function(){return(l._LRNGrad=l.asm.LRNGrad).apply(null,arguments)},l._LeakyRelu=function(){return(l._LeakyRelu=l.asm.LeakyRelu).apply(null,arguments)},l._Less=function(){return(l._Less=l.asm.Less).apply(null,arguments)},l._LessEqual=function(){return(l._LessEqual=l.asm.LessEqual).apply(null,arguments)},l._LinSpace=function(){return(l._LinSpace=l.asm.LinSpace).apply(null,arguments)},l._Log=function(){return(l._Log=l.asm.Log).apply(null,arguments)},l._Log1p=function(){return(l._Log1p=l.asm.Log1p).apply(null,arguments)},l._LogicalAnd=function(){return(l._LogicalAnd=l.asm.LogicalAnd).apply(null,arguments)},l._LogicalNot=function(){return(l._LogicalNot=l.asm.LogicalNot).apply(null,arguments)},l._LogicalOr=function(){return(l._LogicalOr=l.asm.LogicalOr).apply(null,arguments)},l._LogicalXor=function(){return(l._LogicalXor=l.asm.LogicalXor).apply(null,arguments)},l._Max=function(){return(l._Max=l.asm.Max).apply(null,arguments)},l._MaxPool=function(){return(l._MaxPool=l.asm.MaxPool).apply(null,arguments)},l._MaxPool3D=function(){return(l._MaxPool3D=l.asm.MaxPool3D).apply(null,arguments)},l._MaxPool3DGrad=function(){return(l._MaxPool3DGrad=l.asm.MaxPool3DGrad).apply(null,arguments)},l._MaxPoolGrad=function(){return(l._MaxPoolGrad=l.asm.MaxPoolGrad).apply(null,arguments)},l._MaxPoolWithArgmax=function(){return(l._MaxPoolWithArgmax=l.asm.MaxPoolWithArgmax).apply(null,arguments)},l._Maximum=function(){return(l._Maximum=l.asm.Maximum).apply(null,arguments)},l._Mean=function(){return(l._Mean=l.asm.Mean).apply(null,arguments)},l._Min=function(){return(l._Min=l.asm.Min).apply(null,arguments)},l._Minimum=function(){return(l._Minimum=l.asm.Minimum).apply(null,arguments)},l._MirrorPad=function(){return(l._MirrorPad=l.asm.MirrorPad).apply(null,arguments)},l._Mod=function(){return(l._Mod=l.asm.Mod).apply(null,arguments)},l._Multinomial=function(){return(l._Multinomial=l.asm.Multinomial).apply(null,arguments)},l._Multiply=function(){return(l._Multiply=l.asm.Multiply).apply(null,arguments)},l._Neg=function(){return(l._Neg=l.asm.Neg).apply(null,arguments)},l._NonMaxSuppressionV3=function(){return(l._NonMaxSuppressionV3=l.asm.NonMaxSuppressionV3).apply(null,arguments)},l._NonMaxSuppressionV4=function(){return(l._NonMaxSuppressionV4=l.asm.NonMaxSuppressionV4).apply(null,arguments)},l._NonMaxSuppressionV5=function(){return(l._NonMaxSuppressionV5=l.asm.NonMaxSuppressionV5).apply(null,arguments)},l._NotEqual=function(){return(l._NotEqual=l.asm.NotEqual).apply(null,arguments)},l._OneHot=function(){return(l._OneHot=l.asm.OneHot).apply(null,arguments)},l._PadV2=function(){return(l._PadV2=l.asm.PadV2).apply(null,arguments)},l._Pow=function(){return(l._Pow=l.asm.Pow).apply(null,arguments)},l._Prelu=function(){return(l._Prelu=l.asm.Prelu).apply(null,arguments)},l._Prod=function(){return(l._Prod=l.asm.Prod).apply(null,arguments)},l._RealDiv=function(){return(l._RealDiv=l.asm.RealDiv).apply(null,arguments)},l._Reciprocal=function(){return(l._Reciprocal=l.asm.Reciprocal).apply(null,arguments)},l._Relu=function(){return(l._Relu=l.asm.Relu).apply(null,arguments)},l._Relu6=function(){return(l._Relu6=l.asm.Relu6).apply(null,arguments)},l._ResizeBilinear=function(){return(l._ResizeBilinear=l.asm.ResizeBilinear).apply(null,arguments)},l._ResizeBilinearGrad=function(){return(l._ResizeBilinearGrad=l.asm.ResizeBilinearGrad).apply(null,arguments)},l._ResizeNearestNeighbor=function(){return(l._ResizeNearestNeighbor=l.asm.ResizeNearestNeighbor).apply(null,arguments)},l._ResizeNearestNeighborGrad=function(){return(l._ResizeNearestNeighborGrad=l.asm.ResizeNearestNeighborGrad).apply(null,arguments)},l._Reverse=function(){return(l._Reverse=l.asm.Reverse).apply(null,arguments)},l._RotateWithOffset=function(){return(l._RotateWithOffset=l.asm.RotateWithOffset).apply(null,arguments)},l._Round=function(){return(l._Round=l.asm.Round).apply(null,arguments)},l._Rsqrt=function(){return(l._Rsqrt=l.asm.Rsqrt).apply(null,arguments)},l._ScatterNd=function(){return(l._ScatterNd=l.asm.ScatterNd).apply(null,arguments)},l._SearchSorted=function(){return(l._SearchSorted=l.asm.SearchSorted).apply(null,arguments)},l._SelectV2=function(){return(l._SelectV2=l.asm.SelectV2).apply(null,arguments)},l._Selu=function(){return(l._Selu=l.asm.Selu).apply(null,arguments)},l._Sigmoid=function(){return(l._Sigmoid=l.asm.Sigmoid).apply(null,arguments)},l._Sign=function(){return(l._Sign=l.asm.Sign).apply(null,arguments)},l._Sin=function(){return(l._Sin=l.asm.Sin).apply(null,arguments)},l._Sinh=function(){return(l._Sinh=l.asm.Sinh).apply(null,arguments)},l._Softmax=function(){return(l._Softmax=l.asm.Softmax).apply(null,arguments)},l._Softplus=function(){return(l._Softplus=l.asm.Softplus).apply(null,arguments)},l._SparseFillEmptyRows=function(){return(l._SparseFillEmptyRows=l.asm.SparseFillEmptyRows).apply(null,arguments)},l._SparseReshape=function(){return(l._SparseReshape=l.asm.SparseReshape).apply(null,arguments)},l._SparseSegmentReduction=function(){return(l._SparseSegmentReduction=l.asm.SparseSegmentReduction).apply(null,arguments)},l._SparseToDense=function(){return(l._SparseToDense=l.asm.SparseToDense).apply(null,arguments)},l._Sqrt=function(){return(l._Sqrt=l.asm.Sqrt).apply(null,arguments)},l._Square=function(){return(l._Square=l.asm.Square).apply(null,arguments)},l._SquaredDifference=function(){return(l._SquaredDifference=l.asm.SquaredDifference).apply(null,arguments)},l._Step=function(){return(l._Step=l.asm.Step).apply(null,arguments)},l._StridedSlice=function(){return(l._StridedSlice=l.asm.StridedSlice).apply(null,arguments)},l._Sub=function(){return(l._Sub=l.asm.Sub).apply(null,arguments)},l._Sum=function(){return(l._Sum=l.asm.Sum).apply(null,arguments)},l._Tan=function(){return(l._Tan=l.asm.Tan).apply(null,arguments)},l._Tanh=function(){return(l._Tanh=l.asm.Tanh).apply(null,arguments)},l._TensorScatterUpdate=function(){return(l._TensorScatterUpdate=l.asm.TensorScatterUpdate).apply(null,arguments)},l._Tile=function(){return(l._Tile=l.asm.Tile).apply(null,arguments)},l._TopK=function(){return(l._TopK=l.asm.TopK).apply(null,arguments)},l._Transform=function(){return(l._Transform=l.asm.Transform).apply(null,arguments)},l._Transpose=function(){return(l._Transpose=l.asm.Transpose).apply(null,arguments)},l.__FusedMatMul=function(){return(l.__FusedMatMul=l.asm._FusedMatMul).apply(null,arguments)},l._malloc=function(){return(l._malloc=l.asm.malloc).apply(null,arguments)},l._free=function(){return(l._free=l.asm.free).apply(null,arguments)},l.__emscripten_tls_init=function(){return(l.__emscripten_tls_init=l.asm._emscripten_tls_init).apply(null,arguments)};var Rs=l._pthread_self=function(){return(Rs=l._pthread_self=l.asm.pthread_self).apply(null,arguments)};l.___errno_location=function(){return(l.___errno_location=l.asm.__errno_location).apply(null,arguments)};var li=l.__emscripten_thread_init=function(){return(li=l.__emscripten_thread_init=l.asm._emscripten_thread_init).apply(null,arguments)};l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm._emscripten_thread_crashed).apply(null,arguments)},l._emscripten_main_thread_process_queued_calls=function(){return(l._emscripten_main_thread_process_queued_calls=l.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},l._emscripten_main_browser_thread_id=function(){return(l._emscripten_main_browser_thread_id=l.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var hi=l._emscripten_run_in_main_runtime_thread_js=function(){return(hi=l._emscripten_run_in_main_runtime_thread_js=l.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};l._emscripten_dispatch_to_thread_=function(){return(l._emscripten_dispatch_to_thread_=l.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var fi=l.__emscripten_proxy_execute_task_queue=function(){return(fi=l.__emscripten_proxy_execute_task_queue=l.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},Vs=l.__emscripten_thread_free_data=function(){return(Vs=l.__emscripten_thread_free_data=l.asm._emscripten_thread_free_data).apply(null,arguments)},ci=l.__emscripten_thread_exit=function(){return(ci=l.__emscripten_thread_exit=l.asm._emscripten_thread_exit).apply(null,arguments)},ki=l._emscripten_stack_set_limits=function(){return(ki=l._emscripten_stack_set_limits=l.asm.emscripten_stack_set_limits).apply(null,arguments)},di=l.stackSave=function(){return(di=l.stackSave=l.asm.stackSave).apply(null,arguments)},V=l.stackRestore=function(){return(V=l.stackRestore=l.asm.stackRestore).apply(null,arguments)},j=l.stackAlloc=function(){return(j=l.stackAlloc=l.asm.stackAlloc).apply(null,arguments)};l.dynCall_iijjiiii=function(){return(l.dynCall_iijjiiii=l.asm.dynCall_iijjiiii).apply(null,arguments)},l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.dynCall_jiji).apply(null,arguments)},l.keepRuntimeAlive=Zt,l.wasmMemory=L,l.cwrap=ca,l.ExitStatus=Xe,l.PThread=zt;var Q;ae=function et(){Q||ht(),Q||(ae=et)};function ht(et){if(fe>0)return;if(v){a(l),At(),startWorker(l);return}if(Bt(),fe>0)return;function lt(){Q||(Q=!0,l.calledRun=!0,!X&&(At(),a(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),kt()))}l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),lt()},1)):lt()}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();ht();var gt;i&&(gt={uncaughtException:process.listeners("uncaughtException").filter(function(et){return!i.uncaughtException.indexOf(et)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(et){return!i.unhandledRejection.indexOf(et)>-1})});var Rt;if(typeof WasmBackendModule<"u")Rt=WasmBackendModule;else if(typeof S<"u")Rt=S;else throw new Error("Could not find wasm module in post.js");if(gt){var Ct=Rt._dispose;Rt._dispose=function(){Ct(),gt.uncaughtException.forEach(function(et){process.removeListener("uncaughtException",et)}),gt.unhandledRejection.forEach(function(et){process.removeListener("unhandledRejection",et)})}}return S.ready}})();c.exports=f})(a2);var o2=a2.exports;const u2=Rh(o2),WU=Ah({__proto__:null,default:u2},[o2]);var XU=`"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"
");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};`,l2={exports:{}};(function(c,e){var f=(()=>{var y=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(y=y||__filename),function(S){S=S||{};var C=typeof S<"u"?S:{},o,x;C.ready=new Promise(function(wt,Dt){o=wt,x=Dt});var t;typeof process<"u"&&process.listeners&&(t={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var s=Object.assign({},C),l=typeof window=="object",a=typeof importScripts=="function",r=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",i="";function n(wt){return C.locateFile?C.locateFile(wt,i):i+wt}var h,d,u;if(r){var p=gi,v=gi;a?i=v.dirname(i)+"/":i=__dirname+"/",h=(wt,Dt)=>(wt=mt(wt)?new URL(wt):v.normalize(wt),p.readFileSync(wt,Dt?void 0:"utf8")),u=wt=>{var Dt=h(wt,!0);return Dt.buffer||(Dt=new Uint8Array(Dt)),Dt},d=(wt,Dt,_t)=>{wt=mt(wt)?new URL(wt):v.normalize(wt),p.readFile(wt,function(zt,Re){zt?_t(zt):Dt(Re.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(wt){if(!(wt instanceof Zt))throw wt}),process.on("unhandledRejection",function(wt){throw wt}),C.inspect=function(){return"[Emscripten Module object]"}}else(l||a)&&(a?i=self.location.href:typeof document<"u"&&document.currentScript&&(i=document.currentScript.src),y&&(i=y),i.indexOf("blob:")!==0?i=i.substr(0,i.replace(/[?#].*/,"").lastIndexOf("/")+1):i="",h=wt=>{var Dt=new XMLHttpRequest;return Dt.open("GET",wt,!1),Dt.send(null),Dt.responseText},a&&(u=wt=>{var Dt=new XMLHttpRequest;return Dt.open("GET",wt,!1),Dt.responseType="arraybuffer",Dt.send(null),new Uint8Array(Dt.response)}),d=(wt,Dt,_t)=>{var zt=new XMLHttpRequest;zt.open("GET",wt,!0),zt.responseType="arraybuffer",zt.onload=()=>{if(zt.status==200||zt.status==0&&zt.response){Dt(zt.response);return}_t()},zt.onerror=_t,zt.send(null)});var m=C.print||console.log.bind(console),g=C.printErr||console.warn.bind(console);Object.assign(C,s),s=null,C.arguments&&C.arguments,C.thisProgram&&C.thisProgram,C.quit&&C.quit;var T;C.wasmBinary&&(T=C.wasmBinary),C.noExitRuntime,typeof WebAssembly!="object"&&rt("no native wasm support detected");var w,b=!1,E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function A(wt,Dt,_t){Dt>>>=0;for(var zt=Dt+_t,Re=Dt;wt[Re]&&!(Re>=zt);)++Re;if(Re-Dt>16&&wt.buffer&&E)return E.decode(wt.subarray(Dt,Re));for(var xe="";Dt<Re;){var ie=wt[Dt++];if(!(ie&128)){xe+=String.fromCharCode(ie);continue}var oe=wt[Dt++]&63;if((ie&224)==192){xe+=String.fromCharCode((ie&31)<<6|oe);continue}var He=wt[Dt++]&63;if((ie&240)==224?ie=(ie&15)<<12|oe<<6|He:ie=(ie&7)<<18|oe<<12|He<<6|wt[Dt++]&63,ie<65536)xe+=String.fromCharCode(ie);else{var Pe=ie-65536;xe+=String.fromCharCode(55296|Pe>>10,56320|Pe&1023)}}return xe}function R(wt,Dt){return wt>>>=0,wt?A(O,wt,Dt):""}function I(wt,Dt,_t,zt){if(_t>>>=0,!(zt>0))return 0;for(var Re=_t,xe=_t+zt-1,ie=0;ie<wt.length;++ie){var oe=wt.charCodeAt(ie);if(oe>=55296&&oe<=57343){var He=wt.charCodeAt(++ie);oe=65536+((oe&1023)<<10)|He&1023}if(oe<=127){if(_t>=xe)break;Dt[_t++>>>0]=oe}else if(oe<=2047){if(_t+1>=xe)break;Dt[_t++>>>0]=192|oe>>6,Dt[_t++>>>0]=128|oe&63}else if(oe<=65535){if(_t+2>=xe)break;Dt[_t++>>>0]=224|oe>>12,Dt[_t++>>>0]=128|oe>>6&63,Dt[_t++>>>0]=128|oe&63}else{if(_t+3>=xe)break;Dt[_t++>>>0]=240|oe>>18,Dt[_t++>>>0]=128|oe>>12&63,Dt[_t++>>>0]=128|oe>>6&63,Dt[_t++>>>0]=128|oe&63}}return Dt[_t>>>0]=0,_t-Re}function P(wt,Dt,_t){return I(wt,O,Dt,_t)}var M,F,O,D;function L(wt){M=wt,C.HEAP8=F=new Int8Array(wt),C.HEAP16=new Int16Array(wt),C.HEAP32=new Int32Array(wt),C.HEAPU8=O=new Uint8Array(wt),C.HEAPU16=new Uint16Array(wt),C.HEAPU32=D=new Uint32Array(wt),C.HEAPF32=new Float32Array(wt),C.HEAPF64=new Float64Array(wt)}C.INITIAL_MEMORY;var z=[],X=[],H=[];function J(){if(C.preRun)for(typeof C.preRun=="function"&&(C.preRun=[C.preRun]);C.preRun.length;)N(C.preRun.shift());Bt(z)}function G(){Bt(X)}function k(){if(C.postRun)for(typeof C.postRun=="function"&&(C.postRun=[C.postRun]);C.postRun.length;)U(C.postRun.shift());Bt(H)}function N(wt){z.unshift(wt)}function B(wt){X.unshift(wt)}function U(wt){H.unshift(wt)}var W=0,K=null;function q(wt){W++,C.monitorRunDependencies&&C.monitorRunDependencies(W)}function _(wt){if(W--,C.monitorRunDependencies&&C.monitorRunDependencies(W),W==0&&K){var Dt=K;K=null,Dt()}}function rt(wt){C.onAbort&&C.onAbort(wt),wt="Aborted("+wt+")",g(wt),b=!0,wt+=". Build with -sASSERTIONS for more info.";var Dt=new WebAssembly.RuntimeError(wt);throw x(Dt),Dt}var ft="data:application/octet-stream;base64,";function vt(wt){return wt.startsWith(ft)}function mt(wt){return wt.startsWith("file://")}var yt;yt="tfjs-backend-wasm.wasm",vt(yt)||(yt=n(yt));function xt(wt){try{if(wt==yt&&T)return new Uint8Array(T);if(u)return u(wt);throw"both async and sync fetching of the wasm failed"}catch(Dt){rt(Dt)}}function It(){if(!T&&(l||a)){if(typeof fetch=="function"&&!mt(yt))return fetch(yt,{credentials:"same-origin"}).then(function(wt){if(!wt.ok)throw"failed to load wasm binary file at '"+yt+"'";return wt.arrayBuffer()}).catch(function(){return xt(yt)});if(d)return new Promise(function(wt,Dt){d(yt,function(_t){wt(new Uint8Array(_t))},Dt)})}return Promise.resolve().then(function(){return xt(yt)})}function Gt(){var wt={env:Le,wasi_snapshot_preview1:Le};function Dt(ie,oe){var He=ie.exports;C.asm=He,w=C.asm.memory,L(w.buffer),C.asm.__indirect_function_table,B(C.asm.__wasm_call_ctors),_()}q();function _t(ie){Dt(ie.instance)}function zt(ie){return It().then(function(oe){return WebAssembly.instantiate(oe,wt)}).then(function(oe){return oe}).then(ie,function(oe){g("failed to asynchronously prepare wasm: "+oe),rt(oe)})}function Re(){return!T&&typeof WebAssembly.instantiateStreaming=="function"&&!vt(yt)&&!mt(yt)&&!r&&typeof fetch=="function"?fetch(yt,{credentials:"same-origin"}).then(function(ie){var oe=WebAssembly.instantiateStreaming(ie,wt);return oe.then(_t,function(He){return g("wasm streaming compile failed: "+He),g("falling back to ArrayBuffer instantiation"),zt(_t)})}):zt(_t)}if(C.instantiateWasm)try{var xe=C.instantiateWasm(wt,Dt);return xe}catch(ie){g("Module.instantiateWasm callback failed with error: "+ie),x(ie)}return Re().catch(x),{}}function Zt(wt){this.name="ExitStatus",this.message="Program terminated with exit("+wt+")",this.status=wt}function Bt(wt){for(;wt.length>0;)wt.shift()(C)}function At(){rt("")}function kt(){return 4294901760}function Ut(){return kt()}function ee(wt,Dt,_t){O.copyWithin(wt>>>0,Dt>>>0,Dt+_t>>>0)}function te(wt){try{return w.grow(wt-M.byteLength+65535>>>16),L(w.buffer),1}catch{}}function fe(wt){var Dt=O.length;wt=wt>>>0;var _t=kt();if(wt>_t)return!1;let zt=(He,Pe)=>He+(Pe-He%Pe)%Pe;for(var Re=1;Re<=4;Re*=2){var xe=Dt*(1+.2/Re);xe=Math.min(xe,wt+100663296);var ie=Math.min(_t,zt(Math.max(wt,xe),65536)),oe=te(ie);if(oe)return!0}return!1}function ae(wt){return 52}function le(wt,Dt,_t,zt,Re){return 70}var re=[null,[],[]];function we(wt,Dt){var _t=re[wt];Dt===0||Dt===10?((wt===1?m:g)(A(_t,0)),_t.length=0):_t.push(Dt)}function Se(wt,Dt,_t,zt){for(var Re=0,xe=0;xe<_t;xe++){var ie=D[Dt>>>2],oe=D[Dt+4>>>2];Dt+=8;for(var He=0;He<oe;He++)we(wt,O[ie+He>>>0]);Re+=oe}return D[zt>>>2]=Re,0}function Ne(wt){var Dt=C["_"+wt];return Dt}function ce(wt,Dt){F.set(wt,Dt>>>0)}function se(wt,Dt,_t,zt,Re){var xe={string:Ge=>{var qn=0;if(Ge!=null&&Ge!==0){var Bs=(Ge.length<<2)+1;qn=Xe(Bs),P(Ge,qn,Bs)}return qn},array:Ge=>{var qn=Xe(Ge.length);return ce(Ge,qn),qn}};function ie(Ge){return Dt==="string"?R(Ge):Dt==="boolean"?!!Ge:Ge}var oe=Ne(wt),He=[],Pe=0;if(zt)for(var nn=0;nn<zt.length;nn++){var Ds=xe[_t[nn]];Ds?(Pe===0&&(Pe=en()),He[nn]=Ds(zt[nn])):He[nn]=zt[nn]}var Jn=oe.apply(null,He);function Ls(Ge){return Pe!==0&&ge(Pe),ie(Ge)}return Jn=Ls(Jn),Jn}function Ae(wt,Dt,_t,zt){_t=_t||[];var Re=_t.every(ie=>ie==="number"||ie==="boolean"),xe=Dt!=="string";return xe&&Re&&!zt?Ne(wt):function(){return se(wt,Dt,_t,arguments)}}var Le={abort:At,emscripten_get_heap_max:Ut,emscripten_memcpy_big:ee,emscripten_resize_heap:fe,fd_close:ae,fd_seek:le,fd_write:Se};Gt(),C.___wasm_call_ctors=function(){return(C.___wasm_call_ctors=C.asm.__wasm_call_ctors).apply(null,arguments)},C._init=function(){return(C._init=C.asm.init).apply(null,arguments)},C._init_with_threads_count=function(){return(C._init_with_threads_count=C.asm.init_with_threads_count).apply(null,arguments)},C._get_threads_count=function(){return(C._get_threads_count=C.asm.get_threads_count).apply(null,arguments)},C._register_tensor=function(){return(C._register_tensor=C.asm.register_tensor).apply(null,arguments)},C._dispose_data=function(){return(C._dispose_data=C.asm.dispose_data).apply(null,arguments)},C._dispose=function(){return(C._dispose=C.asm.dispose).apply(null,arguments)},C._Abs=function(){return(C._Abs=C.asm.Abs).apply(null,arguments)},C._Acos=function(){return(C._Acos=C.asm.Acos).apply(null,arguments)},C._Acosh=function(){return(C._Acosh=C.asm.Acosh).apply(null,arguments)},C._Add=function(){return(C._Add=C.asm.Add).apply(null,arguments)},C._AddN=function(){return(C._AddN=C.asm.AddN).apply(null,arguments)},C._All=function(){return(C._All=C.asm.All).apply(null,arguments)},C._Any=function(){return(C._Any=C.asm.Any).apply(null,arguments)},C._ArgMax=function(){return(C._ArgMax=C.asm.ArgMax).apply(null,arguments)},C._ArgMin=function(){return(C._ArgMin=C.asm.ArgMin).apply(null,arguments)},C._Asin=function(){return(C._Asin=C.asm.Asin).apply(null,arguments)},C._Asinh=function(){return(C._Asinh=C.asm.Asinh).apply(null,arguments)},C._Atan=function(){return(C._Atan=C.asm.Atan).apply(null,arguments)},C._Atan2=function(){return(C._Atan2=C.asm.Atan2).apply(null,arguments)},C._Atanh=function(){return(C._Atanh=C.asm.Atanh).apply(null,arguments)},C._AvgPool=function(){return(C._AvgPool=C.asm.AvgPool).apply(null,arguments)},C._AvgPool3D=function(){return(C._AvgPool3D=C.asm.AvgPool3D).apply(null,arguments)},C._AvgPool3DGrad=function(){return(C._AvgPool3DGrad=C.asm.AvgPool3DGrad).apply(null,arguments)},C._AvgPoolGrad=function(){return(C._AvgPoolGrad=C.asm.AvgPoolGrad).apply(null,arguments)},C._BatchMatMul=function(){return(C._BatchMatMul=C.asm.BatchMatMul).apply(null,arguments)},C._Bincount=function(){return(C._Bincount=C.asm.Bincount).apply(null,arguments)},C._BitwiseAnd=function(){return(C._BitwiseAnd=C.asm.BitwiseAnd).apply(null,arguments)},C._Ceil=function(){return(C._Ceil=C.asm.Ceil).apply(null,arguments)},C._ClipByValue=function(){return(C._ClipByValue=C.asm.ClipByValue).apply(null,arguments)},C._Conv2D=function(){return(C._Conv2D=C.asm.Conv2D).apply(null,arguments)},C._Conv2DBackpropInput=function(){return(C._Conv2DBackpropInput=C.asm.Conv2DBackpropInput).apply(null,arguments)},C._Conv3D=function(){return(C._Conv3D=C.asm.Conv3D).apply(null,arguments)},C._Conv3DBackpropFilterV2=function(){return(C._Conv3DBackpropFilterV2=C.asm.Conv3DBackpropFilterV2).apply(null,arguments)},C._Conv3DBackpropInputV2=function(){return(C._Conv3DBackpropInputV2=C.asm.Conv3DBackpropInputV2).apply(null,arguments)},C._Cos=function(){return(C._Cos=C.asm.Cos).apply(null,arguments)},C._Cosh=function(){return(C._Cosh=C.asm.Cosh).apply(null,arguments)},C._CropAndResize=function(){return(C._CropAndResize=C.asm.CropAndResize).apply(null,arguments)},C._Cumprod=function(){return(C._Cumprod=C.asm.Cumprod).apply(null,arguments)},C._Cumsum=function(){return(C._Cumsum=C.asm.Cumsum).apply(null,arguments)},C._DenseBincount=function(){return(C._DenseBincount=C.asm.DenseBincount).apply(null,arguments)},C._DepthToSpace=function(){return(C._DepthToSpace=C.asm.DepthToSpace).apply(null,arguments)},C._DepthwiseConv2dNative=function(){return(C._DepthwiseConv2dNative=C.asm.DepthwiseConv2dNative).apply(null,arguments)},C._Diag=function(){return(C._Diag=C.asm.Diag).apply(null,arguments)},C._Dilation2D=function(){return(C._Dilation2D=C.asm.Dilation2D).apply(null,arguments)},C._Dilation2DBackpropFilter=function(){return(C._Dilation2DBackpropFilter=C.asm.Dilation2DBackpropFilter).apply(null,arguments)},C._Dilation2DBackpropInput=function(){return(C._Dilation2DBackpropInput=C.asm.Dilation2DBackpropInput).apply(null,arguments)},C._Elu=function(){return(C._Elu=C.asm.Elu).apply(null,arguments)},C._EluGrad=function(){return(C._EluGrad=C.asm.EluGrad).apply(null,arguments)},C._Equal=function(){return(C._Equal=C.asm.Equal).apply(null,arguments)},C._Erf=function(){return(C._Erf=C.asm.Erf).apply(null,arguments)},C._Exp=function(){return(C._Exp=C.asm.Exp).apply(null,arguments)},C._Expm1=function(){return(C._Expm1=C.asm.Expm1).apply(null,arguments)},C._FlipLeftRight=function(){return(C._FlipLeftRight=C.asm.FlipLeftRight).apply(null,arguments)},C._Floor=function(){return(C._Floor=C.asm.Floor).apply(null,arguments)},C._FloorDiv=function(){return(C._FloorDiv=C.asm.FloorDiv).apply(null,arguments)},C._FusedBatchNorm=function(){return(C._FusedBatchNorm=C.asm.FusedBatchNorm).apply(null,arguments)},C._FusedConv2D=function(){return(C._FusedConv2D=C.asm.FusedConv2D).apply(null,arguments)},C._FusedDepthwiseConv2D=function(){return(C._FusedDepthwiseConv2D=C.asm.FusedDepthwiseConv2D).apply(null,arguments)},C._Gather=function(){return(C._Gather=C.asm.Gather).apply(null,arguments)},C._GatherNd=function(){return(C._GatherNd=C.asm.GatherNd).apply(null,arguments)},C._Greater=function(){return(C._Greater=C.asm.Greater).apply(null,arguments)},C._GreaterEqual=function(){return(C._GreaterEqual=C.asm.GreaterEqual).apply(null,arguments)},C._IsFinite=function(){return(C._IsFinite=C.asm.IsFinite).apply(null,arguments)},C._IsInf=function(){return(C._IsInf=C.asm.IsInf).apply(null,arguments)},C._IsNan=function(){return(C._IsNan=C.asm.IsNan).apply(null,arguments)},C._LRN=function(){return(C._LRN=C.asm.LRN).apply(null,arguments)},C._LRNGrad=function(){return(C._LRNGrad=C.asm.LRNGrad).apply(null,arguments)},C._LeakyRelu=function(){return(C._LeakyRelu=C.asm.LeakyRelu).apply(null,arguments)},C._Less=function(){return(C._Less=C.asm.Less).apply(null,arguments)},C._LessEqual=function(){return(C._LessEqual=C.asm.LessEqual).apply(null,arguments)},C._LinSpace=function(){return(C._LinSpace=C.asm.LinSpace).apply(null,arguments)},C._Log=function(){return(C._Log=C.asm.Log).apply(null,arguments)},C._Log1p=function(){return(C._Log1p=C.asm.Log1p).apply(null,arguments)},C._LogicalAnd=function(){return(C._LogicalAnd=C.asm.LogicalAnd).apply(null,arguments)},C._LogicalNot=function(){return(C._LogicalNot=C.asm.LogicalNot).apply(null,arguments)},C._LogicalOr=function(){return(C._LogicalOr=C.asm.LogicalOr).apply(null,arguments)},C._LogicalXor=function(){return(C._LogicalXor=C.asm.LogicalXor).apply(null,arguments)},C._Max=function(){return(C._Max=C.asm.Max).apply(null,arguments)},C._MaxPool=function(){return(C._MaxPool=C.asm.MaxPool).apply(null,arguments)},C._MaxPool3D=function(){return(C._MaxPool3D=C.asm.MaxPool3D).apply(null,arguments)},C._MaxPool3DGrad=function(){return(C._MaxPool3DGrad=C.asm.MaxPool3DGrad).apply(null,arguments)},C._MaxPoolGrad=function(){return(C._MaxPoolGrad=C.asm.MaxPoolGrad).apply(null,arguments)},C._MaxPoolWithArgmax=function(){return(C._MaxPoolWithArgmax=C.asm.MaxPoolWithArgmax).apply(null,arguments)},C._Maximum=function(){return(C._Maximum=C.asm.Maximum).apply(null,arguments)},C._Mean=function(){return(C._Mean=C.asm.Mean).apply(null,arguments)},C._Min=function(){return(C._Min=C.asm.Min).apply(null,arguments)},C._Minimum=function(){return(C._Minimum=C.asm.Minimum).apply(null,arguments)},C._MirrorPad=function(){return(C._MirrorPad=C.asm.MirrorPad).apply(null,arguments)},C._Mod=function(){return(C._Mod=C.asm.Mod).apply(null,arguments)},C._Multinomial=function(){return(C._Multinomial=C.asm.Multinomial).apply(null,arguments)},C._Multiply=function(){return(C._Multiply=C.asm.Multiply).apply(null,arguments)},C._Neg=function(){return(C._Neg=C.asm.Neg).apply(null,arguments)},C._NonMaxSuppressionV3=function(){return(C._NonMaxSuppressionV3=C.asm.NonMaxSuppressionV3).apply(null,arguments)},C._NonMaxSuppressionV4=function(){return(C._NonMaxSuppressionV4=C.asm.NonMaxSuppressionV4).apply(null,arguments)},C._NonMaxSuppressionV5=function(){return(C._NonMaxSuppressionV5=C.asm.NonMaxSuppressionV5).apply(null,arguments)},C._NotEqual=function(){return(C._NotEqual=C.asm.NotEqual).apply(null,arguments)},C._OneHot=function(){return(C._OneHot=C.asm.OneHot).apply(null,arguments)},C._PadV2=function(){return(C._PadV2=C.asm.PadV2).apply(null,arguments)},C._Pow=function(){return(C._Pow=C.asm.Pow).apply(null,arguments)},C._Prelu=function(){return(C._Prelu=C.asm.Prelu).apply(null,arguments)},C._Prod=function(){return(C._Prod=C.asm.Prod).apply(null,arguments)},C._RealDiv=function(){return(C._RealDiv=C.asm.RealDiv).apply(null,arguments)},C._Reciprocal=function(){return(C._Reciprocal=C.asm.Reciprocal).apply(null,arguments)},C._Relu=function(){return(C._Relu=C.asm.Relu).apply(null,arguments)},C._Relu6=function(){return(C._Relu6=C.asm.Relu6).apply(null,arguments)},C._ResizeBilinear=function(){return(C._ResizeBilinear=C.asm.ResizeBilinear).apply(null,arguments)},C._ResizeBilinearGrad=function(){return(C._ResizeBilinearGrad=C.asm.ResizeBilinearGrad).apply(null,arguments)},C._ResizeNearestNeighbor=function(){return(C._ResizeNearestNeighbor=C.asm.ResizeNearestNeighbor).apply(null,arguments)},C._ResizeNearestNeighborGrad=function(){return(C._ResizeNearestNeighborGrad=C.asm.ResizeNearestNeighborGrad).apply(null,arguments)},C._Reverse=function(){return(C._Reverse=C.asm.Reverse).apply(null,arguments)},C._RotateWithOffset=function(){return(C._RotateWithOffset=C.asm.RotateWithOffset).apply(null,arguments)},C._Round=function(){return(C._Round=C.asm.Round).apply(null,arguments)},C._Rsqrt=function(){return(C._Rsqrt=C.asm.Rsqrt).apply(null,arguments)},C._ScatterNd=function(){return(C._ScatterNd=C.asm.ScatterNd).apply(null,arguments)},C._SearchSorted=function(){return(C._SearchSorted=C.asm.SearchSorted).apply(null,arguments)},C._SelectV2=function(){return(C._SelectV2=C.asm.SelectV2).apply(null,arguments)},C._Selu=function(){return(C._Selu=C.asm.Selu).apply(null,arguments)},C._Sigmoid=function(){return(C._Sigmoid=C.asm.Sigmoid).apply(null,arguments)},C._Sign=function(){return(C._Sign=C.asm.Sign).apply(null,arguments)},C._Sin=function(){return(C._Sin=C.asm.Sin).apply(null,arguments)},C._Sinh=function(){return(C._Sinh=C.asm.Sinh).apply(null,arguments)},C._Softmax=function(){return(C._Softmax=C.asm.Softmax).apply(null,arguments)},C._Softplus=function(){return(C._Softplus=C.asm.Softplus).apply(null,arguments)},C._SparseFillEmptyRows=function(){return(C._SparseFillEmptyRows=C.asm.SparseFillEmptyRows).apply(null,arguments)},C._SparseReshape=function(){return(C._SparseReshape=C.asm.SparseReshape).apply(null,arguments)},C._SparseSegmentReduction=function(){return(C._SparseSegmentReduction=C.asm.SparseSegmentReduction).apply(null,arguments)},C._SparseToDense=function(){return(C._SparseToDense=C.asm.SparseToDense).apply(null,arguments)},C._Sqrt=function(){return(C._Sqrt=C.asm.Sqrt).apply(null,arguments)},C._Square=function(){return(C._Square=C.asm.Square).apply(null,arguments)},C._SquaredDifference=function(){return(C._SquaredDifference=C.asm.SquaredDifference).apply(null,arguments)},C._Step=function(){return(C._Step=C.asm.Step).apply(null,arguments)},C._StridedSlice=function(){return(C._StridedSlice=C.asm.StridedSlice).apply(null,arguments)},C._Sub=function(){return(C._Sub=C.asm.Sub).apply(null,arguments)},C._Sum=function(){return(C._Sum=C.asm.Sum).apply(null,arguments)},C._Tan=function(){return(C._Tan=C.asm.Tan).apply(null,arguments)},C._Tanh=function(){return(C._Tanh=C.asm.Tanh).apply(null,arguments)},C._TensorScatterUpdate=function(){return(C._TensorScatterUpdate=C.asm.TensorScatterUpdate).apply(null,arguments)},C._Tile=function(){return(C._Tile=C.asm.Tile).apply(null,arguments)},C._TopK=function(){return(C._TopK=C.asm.TopK).apply(null,arguments)},C._Transform=function(){return(C._Transform=C.asm.Transform).apply(null,arguments)},C._Transpose=function(){return(C._Transpose=C.asm.Transpose).apply(null,arguments)},C.__FusedMatMul=function(){return(C.__FusedMatMul=C.asm._FusedMatMul).apply(null,arguments)},C._malloc=function(){return(C._malloc=C.asm.malloc).apply(null,arguments)},C._free=function(){return(C._free=C.asm.free).apply(null,arguments)},C.___errno_location=function(){return(C.___errno_location=C.asm.__errno_location).apply(null,arguments)};var en=C.stackSave=function(){return(en=C.stackSave=C.asm.stackSave).apply(null,arguments)},ge=C.stackRestore=function(){return(ge=C.stackRestore=C.asm.stackRestore).apply(null,arguments)},Xe=C.stackAlloc=function(){return(Xe=C.stackAlloc=C.asm.stackAlloc).apply(null,arguments)};C.dynCall_iijjiiii=function(){return(C.dynCall_iijjiiii=C.asm.dynCall_iijjiiii).apply(null,arguments)},C.dynCall_jiji=function(){return(C.dynCall_jiji=C.asm.dynCall_jiji).apply(null,arguments)},C.cwrap=Ae;var Qn;K=function wt(){Qn||An(),Qn||(K=wt)};function An(wt){if(W>0||(J(),W>0))return;function Dt(){Qn||(Qn=!0,C.calledRun=!0,!b&&(G(),o(C),C.onRuntimeInitialized&&C.onRuntimeInitialized(),k()))}C.setStatus?(C.setStatus("Running..."),setTimeout(function(){setTimeout(function(){C.setStatus("")},1),Dt()},1)):Dt()}if(C.preInit)for(typeof C.preInit=="function"&&(C.preInit=[C.preInit]);C.preInit.length>0;)C.preInit.pop()();An();var _e;t&&(_e={uncaughtException:process.listeners("uncaughtException").filter(function(wt){return!t.uncaughtException.indexOf(wt)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(wt){return!t.unhandledRejection.indexOf(wt)>-1})});var ue;if(typeof S<"u")ue=S;else if(typeof WasmBackendModuleThreadedSimd<"u")ue=WasmBackendModuleThreadedSimd;else throw new Error("Could not find wasm module in post.js");if(_e){var Os=ue._dispose;ue._dispose=function(){Os(),_e.uncaughtException.forEach(function(wt){process.removeListener("uncaughtException",wt)}),_e.unhandledRejection.forEach(function(wt){process.removeListener("unhandledRejection",wt)})}}return S.ready}})();c.exports=f})(l2);var h2=l2.exports;const f2=Rh(h2),HU=Ah({__proto__:null,default:f2},[h2]);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cp=u2||WU,YU=f2||HU;class KU extends Ih{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(tV),this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new Zp(this,zs())}write(e,f,y){const S={id:this.dataIdNextNumber++};return this.move(S,e,f,y,1),S}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){const f=Hn();return e(),{kernelMs:Hn()-f}}move(e,f,y,S,C){const o=this.dataIdNextNumber++;if(S==="string"){const l=f;this.dataIdMap.set(e,{id:o,stringBytes:l,shape:y,dtype:S,memoryOffset:null,refCount:C});return}const x=bt(y),t=x*Wr(S),s=this.wasm._malloc(t)>>>0;this.dataIdMap.set(e,{id:o,memoryOffset:s,shape:y,dtype:S,refCount:C}),this.wasm.tfjs.registerTensor(o,x,s),f!=null&&this.wasm.HEAPU8.set(new Uint8Array(f.buffer,f.byteOffset,t),s)}async read(e){return this.readSync(e)}readSync(e,f,y){const{memoryOffset:S,dtype:C,shape:o,stringBytes:x}=this.dataIdMap.get(e);if(C==="string")return(f==null||f===0)&&(y==null||y>=x.length)?x:x.slice(f,y);f=f||0,y=y||bt(o);const t=Wr(C),s=this.wasm.HEAPU8.slice(S+f*t,S+y*t);return QU(s.buffer,C)}disposeData(e,f=!1){if(this.dataIdMap.has(e)){const y=this.dataIdMap.get(e);if(y.refCount--,!f&&y.refCount>0)return!1;this.wasm._free(y.memoryOffset),this.wasm.tfjs.disposeData(y.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){const f=this.dataIdMap.get(e);f!=null&&f.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,f,y,S){let C;if(y==null)C=this.write(S??null,e,f);else{const o=this.dataIdNextNumber++;C={id:o},this.dataIdMap.set(C,{id:o,memoryOffset:y,shape:e,dtype:f,refCount:1});const x=bt(e);this.wasm.tfjs.registerTensor(o,x,y)}return{dataId:C,shape:e,dtype:f}}typedArrayFromHeap({shape:e,dtype:f,dataId:y}){const S=this.wasm.HEAPU8.buffer,{memoryOffset:C}=this.dataIdMap.get(y),o=bt(e);switch(f){case"float32":return new Float32Array(S,C,o);case"int32":return new Int32Array(S,C,o);case"bool":return new Uint8Array(S,C,o);default:throw new Error(`Unknown dtype ${f}`)}}}function jU(c){return(e,f)=>(sx(c,{credentials:"same-origin"}).then(y=>{y.ok||e.env.a(`failed to load wasm binary file at '${c}'`),y.arrayBuffer().then(S=>{WebAssembly.instantiate(S,e).then(C=>{f(C.instance,C.module)})})}),{})}function Ep(c,e,f){let y="tfjs-backend-wasm.wasm";return c&&e?y="tfjs-backend-wasm-threaded-simd.wasm":c&&(y="tfjs-backend-wasm-simd.wasm"),wa!=null&&wa[y]!=null?wa[y]:f+y}async function ZU(){const[c,e]=await Promise.all([St().getAsync("WASM_HAS_SIMD_SUPPORT"),St().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((f,y)=>{const S={};S.locateFile=(x,t)=>{if(x.endsWith(".worker.js")){const s=XU.replace(/\n/g,"\\n"),l=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(l)}return x.endsWith(".wasm")?Ep(c,e,Sa??t):t+x},c2&&(S.instantiateWasm=jU(Ep(c,e,Sa??"")));let C=!1;S.onAbort=()=>{if(C||yo)return;yo=!0,y({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})};let o;e&&c&&qU==null?(S.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+Cp.toString()],{type:"text/javascript"}),o=Cp(S)):o=YU(S),o.then(x=>{C=!0,yo=!1;const t=null;x.tfjs={init:x.cwrap("init",null,[]),initWithThreadsCount:x.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:x.cwrap("get_threads_count","number",[]),registerTensor:x.cwrap("register_tensor",null,["number","number","number"]),disposeData:x.cwrap("dispose_data",t,["number"]),dispose:x.cwrap("dispose",t,[])},f({wasm:x})}).catch(y)})}function QU(c,e){switch(e){case"float32":return new Float32Array(c);case"int32":return new Int32Array(c);case"bool":return new Uint8Array(c);default:throw new Error(`Unknown dtype ${e}`)}}const JU=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let qU=null,Sa=null,wa={},yo=!1,c2=!1;function _U(c,e=!1){if(yo)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if(typeof c=="string")Sa=c;else{wa=c;const f=JU.filter(y=>wa[y]==null);if(f.length>0)throw new Error(`There were no entries found for the following binaries: ${f.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}c2=e}let tV=-1;/** @license See the LICENSE file. */const eV="4.13.0";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nV=2;sm("wasm",async()=>{const{wasm:c}=await ZU();return new KU(c)},nV);const wp={"640 X 480":{width:640,height:480},"640 X 360":{width:640,height:360},"360 X 270":{width:360,height:270}};function sV(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}function iV(){return/Android/i.test(navigator.userAgent)}function bp(){return iV()||sV()}const Br=class Br{constructor(){$t(this,"video");this.video=document.getElementById("video")}static async setup(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw Error("No Camrea Available");const e=await navigator.mediaDevices.getUserMedia(Br.videoConfig);this.defaultCamera=new Br,this.defaultCamera.video.srcObject=e,await new Promise(S=>{this.defaultCamera.video.onloadedmetadata=()=>{S(this.defaultCamera.video)}}),this.defaultCamera.video.play();const f=this.defaultCamera.video.videoWidth,y=this.defaultCamera.video.videoHeight;return this.defaultCamera.video.width=f,this.defaultCamera.video.height=y,!0}};$t(Br,"defaultCamera"),$t(Br,"videoConfig",{audio:!1,video:{facingMode:"user",width:bp()?wp["360 X 270"].width:640,height:bp()?wp["360 X 270"].height:480,frameRate:{ideal:60}}});let vs=Br;/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rV=St();rV.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,c=>{c&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ns;(function(c){c[c.DT_INVALID=0]="DT_INVALID",c[c.DT_FLOAT=1]="DT_FLOAT",c[c.DT_DOUBLE=2]="DT_DOUBLE",c[c.DT_INT32=3]="DT_INT32",c[c.DT_UINT8=4]="DT_UINT8",c[c.DT_INT16=5]="DT_INT16",c[c.DT_INT8=6]="DT_INT8",c[c.DT_STRING=7]="DT_STRING",c[c.DT_COMPLEX64=8]="DT_COMPLEX64",c[c.DT_INT64=9]="DT_INT64",c[c.DT_BOOL=10]="DT_BOOL",c[c.DT_QINT8=11]="DT_QINT8",c[c.DT_QUINT8=12]="DT_QUINT8",c[c.DT_QINT32=13]="DT_QINT32",c[c.DT_BFLOAT16=14]="DT_BFLOAT16",c[c.DT_QINT16=15]="DT_QINT16",c[c.DT_QUINT16=16]="DT_QUINT16",c[c.DT_UINT16=17]="DT_UINT16",c[c.DT_COMPLEX128=18]="DT_COMPLEX128",c[c.DT_HALF=19]="DT_HALF",c[c.DT_RESOURCE=20]="DT_RESOURCE",c[c.DT_VARIANT=21]="DT_VARIANT",c[c.DT_UINT32=22]="DT_UINT32",c[c.DT_UINT64=23]="DT_UINT64",c[c.DT_FLOAT_REF=101]="DT_FLOAT_REF",c[c.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",c[c.DT_INT32_REF=103]="DT_INT32_REF",c[c.DT_UINT8_REF=104]="DT_UINT8_REF",c[c.DT_INT16_REF=105]="DT_INT16_REF",c[c.DT_INT8_REF=106]="DT_INT8_REF",c[c.DT_STRING_REF=107]="DT_STRING_REF",c[c.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",c[c.DT_INT64_REF=109]="DT_INT64_REF",c[c.DT_BOOL_REF=110]="DT_BOOL_REF",c[c.DT_QINT8_REF=111]="DT_QINT8_REF",c[c.DT_QUINT8_REF=112]="DT_QUINT8_REF",c[c.DT_QINT32_REF=113]="DT_QINT32_REF",c[c.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",c[c.DT_QINT16_REF=115]="DT_QINT16_REF",c[c.DT_QUINT16_REF=116]="DT_QUINT16_REF",c[c.DT_UINT16_REF=117]="DT_UINT16_REF",c[c.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",c[c.DT_HALF_REF=119]="DT_HALF_REF",c[c.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",c[c.DT_VARIANT_REF=121]="DT_VARIANT_REF",c[c.DT_UINT32_REF=122]="DT_UINT32_REF",c[c.DT_UINT64_REF=123]="DT_UINT64_REF"})(ns||(ns={}));var Ap;(function(c){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(c.CheckpointFormatVersion||(c.CheckpointFormatVersion={}))})(Ap||(Ap={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aV={};function d2(c){return aV[c]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y(c,e,f,y,S){const C=e.inputParams[c];if(C&&C.inputIndexStart!==void 0){const x=C.inputIndexStart,t=C.inputIndexEnd===0?void 0:C.inputIndexEnd===void 0?x+1:C.inputIndexEnd,s=x<0?e.inputNames.length+x:x;if(C.type==="tensor")return hn(e.inputNames[s],f,y,S);if(C.type==="tensors"){const r=e.inputs.slice(x,t);return e.inputNames.slice(x,t).filter((n,h)=>{var d;return((d=r[h])===null||d===void 0?void 0:d.op)!=="NoOp"}).map(n=>hn(n,f,y,S))}const l=hn(e.inputNames[s],f,y,S),a=l.dataSync();return C.type==="number"?a[0]:Gl(l.shape,a)}const o=e.attrParams[c];return o&&o.value}function hn(c,e,f,y){const[S,C]=Gn(c,f);if(y!=null){const x=y.getHashTableHandleByName(S);if(x!=null)return x}const o=f.currentContextIds.find(x=>!!e[Uo(S,x)]);return o!==void 0?e[Uo(S,o)][C]:void 0}function Rp(c,e,f){return e[Uo(c,f.currentContextId)]}function ks(c,e){const[f,y,S]=Gn(c,e);return[Uo(f,e&&e.currentContextId),y,S]}function Uo(c,e){return e?`${c}-${e}`:c}function Gn(c,e){if(c==="")return["",0,void 0];const f=e!=null&&e.parseNodeNameCache!=null;if(f){const C=e.parseNodeNameCache.get(c);if(C!=null)return C}const y=c.split(":");let S;if(y.length===1)S=[c,0,void 0];else{const C=y[0],o=y.length===3?y[1]:void 0,x=Number(y[y.length-1]);S=[C,x,o]}return f&&e.parseNodeNameCache.set(c,S),S}function To(c,e,f){let y=Y("pad",c,e,f);if(y==="explicit"){y=Y("explicitPaddings",c,e,f);const S=[[0,0],[0,0],[0,0],[0,0]];for(let C=0;C<4;C++)S[C][0]=y[C*2],S[C][1]=y[C*2+1];return S}return y}function Ws(c){return c.kept?c:Si(c)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oV=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],uV=Object.freeze(Object.defineProperty({__proto__:null,json:oV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lV=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],hV=Object.freeze(Object.defineProperty({__proto__:null,json:lV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fV=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],cV=Object.freeze(Object.defineProperty({__proto__:null,json:fV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dV=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],pV=Object.freeze(Object.defineProperty({__proto__:null,json:dV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vV=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],mV=Object.freeze(Object.defineProperty({__proto__:null,json:vV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gV=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xV=Object.freeze(Object.defineProperty({__proto__:null,json:gV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yV=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],TV=Object.freeze(Object.defineProperty({__proto__:null,json:yV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SV=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],CV=Object.freeze(Object.defineProperty({__proto__:null,json:SV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EV=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],wV=Object.freeze(Object.defineProperty({__proto__:null,json:EV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bV=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],AV=Object.freeze(Object.defineProperty({__proto__:null,json:bV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RV=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],IV=Object.freeze(Object.defineProperty({__proto__:null,json:RV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PV=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],FV=Object.freeze(Object.defineProperty({__proto__:null,json:PV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MV=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],NV=Object.freeze(Object.defineProperty({__proto__:null,json:MV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OV=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],DV=Object.freeze(Object.defineProperty({__proto__:null,json:OV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LV=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],BV=Object.freeze(Object.defineProperty({__proto__:null,json:LV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $V=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],GV=Object.freeze(Object.defineProperty({__proto__:null,json:$V},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UV=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],VV=Object.freeze(Object.defineProperty({__proto__:null,json:UV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zV=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],kV=Object.freeze(Object.defineProperty({__proto__:null,json:zV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WV=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],XV=Object.freeze(Object.defineProperty({__proto__:null,json:WV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ip{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[uV,hV,cV,pV,mV,xV,TV,CV,wV,AV,IV,FV,NV,DV,BV,GV,VV,kV,XV],f=[].concat(...e.map(y=>y.json));this.opMappers=f.reduce((y,S)=>(y[S.tfOpName]=S,y),{})}transformGraph(e,f={}){const y=e.node,S=[],C=[],o=[],x=y.reduce((h,d)=>(h[d.name]=this.mapNode(d),d.op.startsWith("Placeholder")?S.push(h[d.name]):d.op==="Const"?C.push(h[d.name]):(d.input==null||d.input.length===0)&&o.push(h[d.name]),h),{});let t=[];const s=[];let l={},a={};f!=null&&(l=this.mapSignatureEntries(f.inputs),a=this.mapSignatureEntries(f.outputs));const r=Object.keys(x);r.forEach(h=>{const d=x[h];d.inputNames.forEach((u,p)=>{const[v,,m]=ks(u),g=x[v];if(g.outputs!=null){const T=g.outputs.indexOf(m);if(T!==-1){const w=`${v}:${T}`;d.inputNames[p]=w}}d.inputs.push(g),g.children.push(d)})}),Object.keys(a).length===0?r.forEach(h=>{const d=x[h];d.children.length===0&&s.push(d)}):Object.keys(a).forEach(h=>{const[d]=ks(h),u=x[d];u!=null&&(u.signatureKey=a[h],s.push(u))}),Object.keys(l).length>0?Object.keys(l).forEach(h=>{const[d]=ks(h),u=x[d];u&&(u.signatureKey=l[h],t.push(u))}):t=S;let i={};e.library!=null&&e.library.function!=null&&(i=e.library.function.reduce((h,d)=>(h[d.signature.name]=this.mapFunction(d),h),{}));const n={nodes:x,inputs:t,outputs:s,weights:C,placeholders:S,signature:f,functions:i};return o.length>0&&(n.initNodes=o),n}mapSignatureEntries(e){return Object.keys(e||{}).reduce((f,y)=>(f[e[y].name]=y,f),{})}mapNode(e){const f=d2(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const y={name:e.name,op:e.op,category:f.category,inputNames:(e.input||[]).map(S=>S.startsWith("^")?S.slice(1):S),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:f.outputs};return f.inputs!=null&&(y.inputParams=f.inputs.reduce((S,C)=>(S[C.name]={type:C.type,inputIndexStart:C.start,inputIndexEnd:C.end},S),{})),f.attrs!=null&&(y.attrParams=f.attrs.reduce((S,C)=>{const o=C.type;let x;switch(C.type){case"string":x=ph(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=ph(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"string[]":x=Sh(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=Sh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"number":x=mh(e.attr,C.tfName,C.defaultValue||0),x===void 0&&C.tfDeprecatedName&&(x=mh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"number[]":x=Th(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=Th(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"bool":x=vh(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=vh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"bool[]":x=Eh(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=Eh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"shape":x=yh(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=yh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"shape[]":x=Ch(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=Ch(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"dtype":x=gh(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=gh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"dtype[]":x=xh(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=xh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"func":x=Pp(e.attr,C.tfName,C.defaultValue),x===void 0&&C.tfDeprecatedName&&(x=Pp(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${C.type} for op: ${e.op}`)}return S[C.name]={value:x,type:o},S},{})),y}mapFunction(e){const f=e.nodeDef,y=[],S=[];let C={};f!=null&&(C=f.reduce((a,r)=>(a[r.name]=this.mapNode(r),r.op==="Const"&&S.push(a[r.name]),a),{}));const o=[],x=[];e.signature.inputArg.forEach(a=>{const[r]=ks(a.name),i={name:r,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:yd(a.type),type:"dtype"}},children:[]};i.signatureKey=a.name,o.push(i),C[r]=i}),Object.keys(C).forEach(a=>{const r=C[a];r.inputNames.forEach((i,n)=>{const[h,,d]=ks(i),u=C[h];if(u.outputs!=null){const p=u.outputs.indexOf(d);if(p!==-1){const v=`${h}:${p}`;r.inputNames[n]=v}}r.inputs.push(u),u.children.push(r)})});const s=e.ret;e.signature.outputArg.forEach(a=>{const[r,i]=ks(s[a.name]),n=C[r];n!=null&&(n.defaultOutput=i,x.push(n))});const l=this.mapArgsToSignature(e);return{nodes:C,inputs:o,outputs:x,weights:S,placeholders:y,signature:l}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((f,y)=>(f[y.name]=this.mapArgToTensorInfo(y),f),{}),outputs:e.signature.outputArg.reduce((f,y)=>(f[y.name]=this.mapArgToTensorInfo(y,e.ret),f),{})}}mapArgToTensorInfo(e,f){let y=e.name;return f!=null&&(y=f[y]),{name:y,dtype:e.type}}}function HV(c){const e=St().global;if(typeof e.atob<"u")return e.atob(c);if(typeof Buffer<"u")return new Buffer(c,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function p2(c,e){const f=Array.isArray(c)?String.fromCharCode.apply(null,c):HV(c);return e?f:f.toLowerCase()}function ph(c,e,f,y=!1){const S=c[e];return S!=null?p2(S.s,y):f}function vh(c,e,f){const y=c[e];return y?y.b:f}function mh(c,e,f){const y=c[e]||{},S=y.i!=null?y.i:y.f!=null?y.f:f;return typeof S=="number"?S:parseInt(S,10)}function yd(c){switch(typeof c=="string"&&(c=ns[c]),c){case ns.DT_FLOAT:case ns.DT_HALF:return"float32";case ns.DT_INT32:case ns.DT_INT64:case ns.DT_INT8:case ns.DT_UINT8:return"int32";case ns.DT_BOOL:return"bool";case ns.DT_DOUBLE:return"float32";case ns.DT_STRING:return"string";default:return null}}function Pp(c,e,f){const y=c[e];return y&&y.func?y.func.name:f}function gh(c,e,f){const y=c[e];return y&&y.type?yd(y.type):f}function xh(c,e,f){const y=c[e];return y&&y.list&&y.list.type?y.list.type.map(S=>yd(S)):f}function v2(c){if(!c.unknownRank)return c.dim!=null?c.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function yh(c,e,f){const y=c[e];return y&&y.shape?v2(y.shape):f}function Th(c,e,f){const y=c[e];return y?((y.list.f&&y.list.f.length?y.list.f:y.list.i)||[]).map(S=>typeof S=="number"?S:parseInt(S,10)):f}function Sh(c,e,f,y=!1){const S=c[e];return S&&S.list&&S.list.s?S.list.s.map(C=>p2(C,y)):f}function Ch(c,e,f){const y=c[e];return y&&y.list&&y.list.shape?y.list.shape.map(S=>v2(S)):f}function Eh(c,e,f){const y=c[e];return y&&y.list&&y.list.b?y.list.b:f}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YV{constructor(e,f,y){this.node=e,this.tensorMap=f,this.context=y,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(S=>this.getInput(S)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((S,C)=>(S[C]=this.getAttr(C),S),{}))}getInput(e){return hn(e,this.tensorMap,this.context)}getAttr(e,f){const y=this.node.rawAttrs[e];if(y.tensor!=null)return hn(e,this.tensorMap,this.context);if(y.i!=null||y.f!=null)return mh(this.node.rawAttrs,e,f);if(y.s!=null)return ph(this.node.rawAttrs,e,f);if(y.b!=null)return vh(this.node.rawAttrs,e,f);if(y.shape!=null)return yh(this.node.rawAttrs,e,f);if(y.type!=null)return gh(this.node.rawAttrs,e,f);if(y.list!=null){if(y.list.i!=null||y.list.f!=null)return Th(this.node.rawAttrs,e,f);if(y.list.s!=null)return Sh(this.node.rawAttrs,e,f);if(y.list.shape!=null)return Ch(this.node.rawAttrs,e,f);if(y.list.b!=null)return Eh(this.node.rawAttrs,e,f);if(y.list.type!=null)return xh(this.node.rawAttrs,e,f)}return f}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vn=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:Xv,abs:Xn,acos:oy,acosh:ly,add:ne,addN:fy,all:dy,any:vy,argMax:gy,argMin:yy,asin:Sy,asinh:Ey,atan:by,atan2:Ry,atanh:Py,avgPool:rm,avgPool3d:$y,basicLSTMCell:Xy,batchNorm:Ku,batchNorm2d:Zy,batchNorm3d:Jy,batchNorm4d:_y,batchToSpaceND:am,bincount:om,bitwiseAnd:n3,booleanMaskAsync:UC,broadcastArgs:i3,broadcastTo:Ca,buffer:Ze,cast:We,ceil:o3,clipByValue:um,clone:Si,complex:Ai,concat:fn,concat1d:h3,concat2d:c3,concat3d:p3,concat4d:m3,conv1d:y3,conv2d:ju,conv2dTranspose:C3,conv3d:w3,conv3dTranspose:I3,cos:F3,cosh:N3,cosineWindow:Bc,cumprod:D3,cumsum:B3,denseBincount:G3,depthToSpace:V3,depthwiseConv2d:Tc,diag:W3,dilation2d:H3,div:ye,divNoNan:Q3,dot:q3,dropout:qC,einsum:Dr,elu:cm,enclosingPowerOfTwo:zm,ensureShape:nT,equal:fm,erf:iT,euclideanNorm:dT,exp:Zs,expandDims:is,expm1:gT,eye:vm,fft:Oc,fill:Ya,floor:mm,floorDiv:im,fused:dE,gather:gm,gatherND:ZC,greater:Qu,greaterEqual:xm,ifft:Oo,imag:Ju,image:ea,inTopKAsync:tE,irfft:Dm,isFinite:AT,isInf:IT,isNaN:FT,leakyRelu:ym,less:th,lessEqual:Cc,linalg:Yw,linspace:DT,localResponseNormalization:BT,log:Oa,log1p:Tm,logSigmoid:WT,logSoftmax:YT,logSumExp:Cm,logicalAnd:Fo,logicalNot:Em,logicalOr:wm,logicalXor:qT,losses:Kw,lowerBound:t4,matMul:Oe,max:zr,maxPool:bm,maxPool3d:s4,maxPoolWithArgmax:r4,maximum:Am,mean:Mo,meshgrid:u4,min:_l,minimum:No,mirrorPad:f4,mod:d4,moments:v4,movingAverage:kC,mul:Wt,multiRNNCell:g4,multinomial:y4,neg:Fs,norm:Zu,notEqual:Rm,oneHot:C4,ones:tr,onesLike:w4,op:ct,outerProduct:A4,pad:ja,pad1d:P4,pad2d:M4,pad3d:O4,pad4d:L4,pool:V4,pow:Na,prelu:Pm,print:nm,prod:W4,raggedGather:H4,raggedRange:K4,raggedTensorToTensor:Z4,rand:J4,randomGamma:mS,randomNormal:Mm,randomStandardNormal:yS,randomUniform:Nc,randomUniformInt:CS,range:Da,real:La,reciprocal:bS,relu:qu,relu6:Nm,reshape:Mt,reverse:lr,reverse1d:FS,reverse2d:NS,reverse3d:DS,reverse4d:BS,rfft:Dc,round:Om,rsqrt:US,scalar:Ce,scatterND:XC,searchSorted:Ec,selu:zS,separableConv2d:WS,setdiff1dAsync:HS,sigmoid:nr,sign:KS,signal:Hw,sin:ZS,sinh:JS,slice:ve,slice1d:_S,slice2d:eC,slice3d:sC,slice4d:rC,softmax:oC,softplus:Sm,spaceToBatchND:Im,sparse:jw,sparseToDense:KC,spectral:Xw,split:Ba,sqrt:js,square:Ts,squaredDifference:Lm,squeeze:an,stack:Js,step:Bm,stridedSlice:xC,string:Zw,sub:me,sum:Ve,tan:TC,tanh:ql,tensor:ys,tensor1d:gn,tensor2d:Ei,tensor3d:$m,tensor4d:SC,tensor5d:CC,tensor6d:EC,tensorScatterUpdate:bC,tile:Ea,topk:RC,transpose:eh,truncatedNormal:PC,unique:MC,unsortedSegmentSum:OC,unstack:gr,upperBound:LC,variable:BC,where:Ci,whereAsync:Vm,zeros:ur,zerosLike:jn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KV=(c,e,f,y=vn)=>{switch(c.op){case"BiasAdd":case"AddV2":case"Add":return[y.add(Y("a",c,e,f),Y("b",c,e,f))];case"AddN":return[y.addN(Y("tensors",c,e,f))];case"FloorMod":case"Mod":return[y.mod(Y("a",c,e,f),Y("b",c,e,f))];case"Mul":return[y.mul(Y("a",c,e,f),Y("b",c,e,f))];case"RealDiv":case"Div":return[y.div(Y("a",c,e,f),Y("b",c,e,f))];case"DivNoNan":return[y.divNoNan(Y("a",c,e,f),Y("b",c,e,f))];case"FloorDiv":return[y.floorDiv(Y("a",c,e,f),Y("b",c,e,f))];case"Sub":return[y.sub(Y("a",c,e,f),Y("b",c,e,f))];case"Minimum":return[y.minimum(Y("a",c,e,f),Y("b",c,e,f))];case"Maximum":return[y.maximum(Y("a",c,e,f),Y("b",c,e,f))];case"Pow":return[y.pow(Y("a",c,e,f),Y("b",c,e,f))];case"SquaredDifference":return[y.squaredDifference(Y("a",c,e,f),Y("b",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jV=(c,e,f,y=vn)=>{switch(c.op){case"Abs":case"ComplexAbs":return[y.abs(Y("x",c,e,f))];case"Acos":return[y.acos(Y("x",c,e,f))];case"Acosh":return[y.acosh(Y("x",c,e,f))];case"Asin":return[y.asin(Y("x",c,e,f))];case"Asinh":return[y.asinh(Y("x",c,e,f))];case"Atan":return[y.atan(Y("x",c,e,f))];case"Atan2":return[y.atan2(Y("x",c,e,f),Y("y",c,e,f))];case"Atanh":return[y.atanh(Y("x",c,e,f))];case"Ceil":return[y.ceil(Y("x",c,e,f))];case"Complex":return[y.complex(Y("real",c,e,f),Y("imag",c,e,f))];case"Cos":return[y.cos(Y("x",c,e,f))];case"Cosh":return[y.cosh(Y("x",c,e,f))];case"Elu":return[y.elu(Y("x",c,e,f))];case"Erf":return[y.erf(Y("x",c,e,f))];case"Exp":return[y.exp(Y("x",c,e,f))];case"Expm1":return[y.expm1(Y("x",c,e,f))];case"Floor":return[y.floor(Y("x",c,e,f))];case"Log":return[y.log(Y("x",c,e,f))];case"Log1p":return[y.log1p(Y("x",c,e,f))];case"Imag":return[y.imag(Y("x",c,e,f))];case"Neg":return[y.neg(Y("x",c,e,f))];case"Reciprocal":return[y.reciprocal(Y("x",c,e,f))];case"Real":return[y.real(Y("x",c,e,f))];case"Relu":return[y.relu(Y("x",c,e,f))];case"Round":return[y.round(Y("x",c,e,f))];case"Selu":return[y.selu(Y("x",c,e,f))];case"Sigmoid":return[y.sigmoid(Y("x",c,e,f))];case"Sin":return[y.sin(Y("x",c,e,f))];case"Sign":return[y.sign(Y("x",c,e,f))];case"Sinh":return[y.sinh(Y("x",c,e,f))];case"Softplus":return[y.softplus(Y("x",c,e,f))];case"Sqrt":return[y.sqrt(Y("x",c,e,f))];case"Square":return[y.square(Y("x",c,e,f))];case"Tanh":return[y.tanh(Y("x",c,e,f))];case"Tan":return[y.tan(Y("x",c,e,f))];case"ClipByValue":return[y.clipByValue(Y("x",c,e,f),Y("clipValueMin",c,e,f),Y("clipValueMax",c,e,f))];case"Relu6":return[y.relu6(Y("x",c,e,f))];case"Rsqrt":return[y.rsqrt(hn(c.inputNames[0],e,f))];case"LeakyRelu":return[y.leakyRelu(Y("x",c,e,f),Y("alpha",c,e,f))];case"Prelu":return[y.prelu(Y("x",c,e,f),Y("alpha",c,e,f))];case"IsNan":return[y.isNaN(hn(c.inputNames[0],e,f))];case"IsInf":return[y.isInf(hn(c.inputNames[0],e,f))];case"IsFinite":return[y.isFinite(hn(c.inputNames[0],e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ss(c,e,f=""){if(!(typeof c=="number"||typeof e=="number")){it(c.length===e.length,()=>f+` Shapes ${c} and ${e} must match`);for(let y=0;y<c.length;y++){const S=c[y],C=e[y];it(S<0||C<0||S===C,()=>f+` Shapes ${c} and ${e} must match`)}}}function Fp(c){return!(typeof c=="number"||c.some(e=>e<0))}function ma(c,e,f){let y=wh(c,f);const S=!Fp(y);if(S&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${y}`);if(S&&e.forEach(C=>{y=wh(C.shape,y)}),!Fp(y))throw new Error(`Non-fully-defined elementShape: ${y}`);return y}function wh(c,e){if(typeof c=="number")return e;if(typeof e=="number")return c;if(c.length!==e.length)throw new Error(`Incompatible ranks during merge: ${c} vs. ${e}`);const f=[];for(let y=0;y<c.length;++y){const S=c[y],C=e[y];if(S>=0&&C>=0&&S!==C)throw new Error(`Incompatible shape during merge: ${c} vs. ${e}`);f[y]=S>=0?S:C}return f}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZV{constructor(e,f,y,S,C,o,x){this.name=e,this.dtype=f,this.maxSize=y,this.elementShape=S,this.identicalElementShapes=C,this.dynamicSize=o,this.clearAfterRead=x,this.tensors=[],this.closed_=!1,this.idTensor=Ce(0),Is(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(f=>{(e==null||!e.has(f.tensor.id))&&f.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const f=this.tensors[e];if(f.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(f.cleared=!0),f.read=!0,f.tensor}readMany(e){return e.map(f=>this.read(f))}write(e,f){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const y=this.tensors[e]||{};if(f.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${f.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=f.shape),ss(this.elementShape,f.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),y.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(y.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);y.tensor=f,Is(f),y.written=!0,this.tensors[e]=y}writeMany(e,f){if(e.length!==f.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${f.length}.`);e.forEach((y,S)=>this.write(y,f[S]))}gather(e,f){if(f&&f!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${f}`);if(e)e=e.slice(0,this.size());else{e=[];for(let S=0;S<this.size();S++)e.push(S)}if(e.length===0)return ys([],[0].concat(this.elementShape));const y=this.readMany(e);return ss(this.elementShape,y[0].shape,"TensorArray shape mismatch: "),Js(y,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ys([],[0].concat(this.elementShape));const f=[];for(let S=0;S<this.size();S++)f.push(S);const y=this.readMany(f);return ss(this.elementShape,y[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${y[0].shape})`),fn(y,0)}scatter(e,f){if(f.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${f.dtype}`);if(e.length!==f.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${f.shape[0]}`);const y=Math.max(...e);if(!this.dynamicSize&&y>=this.maxSize)throw new Error(`Max index must be < array size (${y}  vs. ${this.maxSize})`);this.writeMany(e,gr(f,0))}split(e,f){if(f.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${f.dtype}`);let y=0;const S=e.map(t=>(y+=t,y));if(y!==f.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${y}, and tensor's shape is: ${f.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const C=y===0?0:f.size/y,o=[];de(()=>{f=Mt(f,[1,y,C]);for(let t=0;t<e.length;++t){const l=[0,t===0?0:S[t-1],0],a=[1,e[t],C];o[t]=Mt(ve(f,l,a),this.elementShape)}return o});const x=[];for(let t=0;t<e.length;t++)x[t]=t;this.writeMany(x,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dr{get id(){return this.idTensor.id}constructor(e,f,y,S=-1){this.tensors=e,this.elementShape=f,this.elementDtype=y,e!=null&&e.forEach(C=>{if(y!==C.dtype)throw new Error(`Invalid data types; op elements ${y}, but list elements ${C.dtype}`);ss(f,C.shape,"TensorList shape mismatch: "),Is(C)}),this.idTensor=Ce(0),this.maxNumElements=S,Is(this.idTensor)}copy(){return new dr([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(f=>{(e==null||!e.has(f.id))&&f.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,f,y=-1){if(f!==this.elementDtype)throw new Error(`Invalid data types; op elements ${f}, but list elements ${this.elementDtype}`);if(y!==-1&&this.tensors.length!==y)throw new Error(`Operation expected a list with ${y} elements but got a list with ${this.tensors.length} elements.`);ss(e,this.elementShape,"TensorList shape mismatch: ");const S=ma(this.elementShape,this.tensors,e);return de(()=>{const C=this.tensors.map(o=>Mt(o,S));return Js(C,0)})}popBack(e,f){if(f!==this.elementDtype)throw new Error(`Invalid data types; op elements ${f}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const y=ma(this.elementShape,this.tensors,e),S=this.tensors.pop();return S.kept=!1,ss(S.shape,e,"TensorList shape mismatch: "),Mt(S,y)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ss(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Is(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const f=new dr([],this.elementShape,this.elementDtype,this.maxNumElements);f.tensors.length=e;for(let y=0;y<Math.min(this.tensors.length,e);++y)f.tensors[y]=this.tensors[y];return f}getItem(e,f,y){if(y!==this.elementDtype)throw new Error(`Invalid data types; op elements ${y}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);ss(this.tensors[e].shape,f,"TensorList shape mismatch: ");const S=ma(this.elementShape,this.tensors,f);return Mt(this.tensors[e],S)}setItem(e,f){if(f.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${f.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ss(this.elementShape,f.shape,"TensorList shape mismatch: "),Is(f),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=f}gather(e,f,y){if(f!==this.elementDtype)throw new Error(`Invalid data types; op elements ${f}, but list elements ${this.elementDtype}`);ss(this.elementShape,y,"TensorList shape mismatch: "),e=e.slice(0,this.size());const S=ma(this.elementShape,this.tensors,y);return e.length===0?ys([],[0].concat(S)):de(()=>{const C=e.map(o=>Mt(this.tensors[o],S));return Js(C,0)})}concat(e,f){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ss(this.elementShape,f,"TensorList shape mismatch: ");const y=ma(this.elementShape,this.tensors,f);return this.size()===0?ys([],[0].concat(y)):de(()=>{const S=this.tensors.map(C=>Mt(C,y));return fn(S,0)})}}function QV(c,e,f){const y=c.dtype;if(c.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${c.shape}`);if(c.dtype!==f)throw new Error(`Invalid data types; op elements ${c.dtype}, but list elements ${f}`);const S=c.shape.slice(1);ss(S,e,"TensorList shape mismatch: ");const C=gr(c);return new dr(C,e,y)}function JV(c,e,f,y){return new dr([],c,e,y)}function qV(c,e,f,y){if(e.length!==c.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${c.shape[0]}`);const S=Math.max(...e);if(y!=null&&y!==-1&&S>=y)throw new Error(`Max index must be < array size (${S}  vs. ${y})`);const C=new dr([],f,c.dtype,y),o=gr(c,0);return e.forEach((x,t)=>{C.setItem(x,o[t])}),C}function _V(c,e,f){let y=0;const S=e.map(l=>(y+=l,y));if(y!==c.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${y}, and tensor's shape is: ${c.shape}`);const C=c.shape.slice(1),o=wh(C,f),x=y===0?0:c.size/y,t=de(()=>{const l=[];c=Mt(c,[1,y,x]);for(let a=0;a<e.length;++a){const i=[0,a===0?0:S[a-1],0],n=[1,e[a],x];l[a]=Mt(ve(c,i,n),o)}return c.dispose(),l}),s=new dr([],f,c.dtype,e.length);for(let l=0;l<t.length;l++)s.setItem(l,t[l]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tz=async(c,e,f)=>{switch(c.op){case"If":case"StatelessIf":{const y=Y("thenBranch",c,e,f),S=Y("elseBranch",c,e,f),C=Y("cond",c,e,f),o=Y("args",c,e,f);return(await C.data())[0]?f.functionMap[y].executeFunctionAsync(o,f.tensorArrayMap,f.tensorListMap):f.functionMap[S].executeFunctionAsync(o,f.tensorArrayMap,f.tensorListMap)}case"While":case"StatelessWhile":{const y=Y("body",c,e,f),S=Y("cond",c,e,f),C=Y("args",c,e,f),o=await f.functionMap[S].executeFunctionAsync(C,f.tensorArrayMap,f.tensorListMap),x=C.map(l=>l.id);let t=await o[0].data();o.forEach(l=>{!l.kept&&x.indexOf(l.id)===-1&&l.dispose()});let s=C;for(;t[0];){const l=s;s=await f.functionMap[y].executeFunctionAsync(s,f.tensorArrayMap,f.tensorListMap);const a=s.map(i=>i.id);l.forEach(i=>{!i.kept&&x.indexOf(i.id)===-1&&a.indexOf(i.id)===-1&&i.dispose()});const r=await f.functionMap[S].executeFunctionAsync(s,f.tensorArrayMap,f.tensorListMap);t=await r[0].data(),r.forEach(i=>{!i.kept&&x.indexOf(i.id)===-1&&a.indexOf(i.id)===-1&&i.dispose()})}return s}case"LoopCond":{const y=Y("pred",c,e,f);return[Ws(y)]}case"Switch":{const y=Y("pred",c,e,f);let S=Y("data",c,e,f);return S.kept||(S=Ws(S)),(await y.data())[0]?[void 0,S]:[S,void 0]}case"Merge":{const y=c.inputNames.find(S=>hn(S,e,f)!==void 0);if(y){const S=hn(y,e,f);return[Ws(S)]}return}case"Enter":{const y=Y("frameName",c,e,f),S=Y("tensor",c,e,f);return f.enterFrame(y),[Ws(S)]}case"Exit":{const y=Y("tensor",c,e,f);return f.exitFrame(),[Ws(y)]}case"NextIteration":{const y=Y("tensor",c,e,f);return f.nextIteration(),[Ws(y)]}case"TensorArrayV3":{const y=Y("size",c,e,f),S=Y("dtype",c,e,f),C=Y("elementShape",c,e,f),o=Y("dynamicSize",c,e,f),x=Y("clearAfterRead",c,e,f),t=Y("identicalElementShapes",c,e,f),s=Y("name",c,e,f),l=new ZV(s,S,y,C,t,o,x);return f.addTensorArray(l),[l.idTensor,Ce(1)]}case"TensorArrayWriteV3":{const y=Y("tensorArrayId",c,e,f),S=Y("index",c,e,f),C=Y("tensor",c,e,f),o=f.getTensorArray(y.id);return o.write(S,C),[o.idTensor]}case"TensorArrayReadV3":{const y=Y("tensorArrayId",c,e,f),S=Y("index",c,e,f);return[f.getTensorArray(y.id).read(S)]}case"TensorArrayGatherV3":{const y=Y("tensorArrayId",c,e,f),S=Y("indices",c,e,f),C=Y("dtype",c,e,f);return[f.getTensorArray(y.id).gather(S,C)]}case"TensorArrayScatterV3":{const y=Y("tensorArrayId",c,e,f),S=Y("indices",c,e,f),C=Y("tensor",c,e,f),o=f.getTensorArray(y.id);return o.scatter(S,C),[o.idTensor]}case"TensorArrayConcatV3":{const y=Y("tensorArrayId",c,e,f),S=f.getTensorArray(y.id),C=Y("dtype",c,e,f);return[S.concat(C)]}case"TensorArraySplitV3":{const y=Y("tensorArrayId",c,e,f),S=Y("tensor",c,e,f),C=Y("lengths",c,e,f),o=f.getTensorArray(y.id);return o.split(C,S),[o.idTensor]}case"TensorArraySizeV3":{const y=Y("tensorArrayId",c,e,f),S=f.getTensorArray(y.id);return[Ce(S.size(),"int32")]}case"TensorArrayCloseV3":{const y=Y("tensorArrayId",c,e,f),S=f.getTensorArray(y.id);return S.clearAndClose(),[S.idTensor]}case"TensorListSetItem":{const y=Y("tensorListId",c,e,f),S=Y("index",c,e,f),C=Y("tensor",c,e,f),o=f.getTensorList(y.id);return o.setItem(S,C),[o.idTensor]}case"TensorListGetItem":{const y=Y("tensorListId",c,e,f),S=Y("index",c,e,f),C=Y("elementShape",c,e,f),o=Y("elementDType",c,e,f);return[f.getTensorList(y.id).getItem(S,C,o)]}case"TensorListScatterV2":case"TensorListScatter":{const y=Y("indices",c,e,f),S=Y("tensor",c,e,f),C=Y("elementShape",c,e,f),o=Y("numElements",c,e,f),x=qV(S,y,C,o);return f.addTensorList(x),[x.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const y=Y("elementShape",c,e,f),S=Y("elementDType",c,e,f);let C;c.op==="TensorListReserve"?C="numElements":C="maxNumElements";const o=Y(C,c,e,f),x=c.op==="TensorListReserve"?-1:o,t=JV(y,S,o,x);return f.addTensorList(t),[t.idTensor]}case"TensorListGather":{const y=Y("tensorListId",c,e,f),S=Y("indices",c,e,f),C=Y("elementShape",c,e,f),o=Y("elementDType",c,e,f);return[f.getTensorList(y.id).gather(S,o,C)]}case"TensorListStack":{const y=Y("tensorListId",c,e,f),S=Y("elementShape",c,e,f),C=Y("elementDType",c,e,f),o=Y("numElements",c,e,f);return[f.getTensorList(y.id).stack(S,C,o)]}case"TensorListFromTensor":{const y=Y("tensor",c,e,f),S=Y("elementShape",c,e,f),C=Y("elementDType",c,e,f),o=QV(y,S,C);return f.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const y=Y("tensorListId",c,e,f),S=f.getTensorList(y.id),C=Y("dtype",c,e,f),o=Y("elementShape",c,e,f);return[S.concat(C,o)]}case"TensorListPushBack":{const y=Y("tensorListId",c,e,f),S=Y("tensor",c,e,f),C=f.getTensorList(y.id);return C.pushBack(S),[C.idTensor]}case"TensorListPopBack":{const y=Y("tensorListId",c,e,f),S=Y("elementShape",c,e,f),C=Y("elementDType",c,e,f);return[f.getTensorList(y.id).popBack(S,C)]}case"TensorListSplit":{const y=Y("tensor",c,e,f),S=Y("elementShape",c,e,f),C=Y("lengths",c,e,f),o=_V(y,C,S);return f.addTensorList(o),[o.idTensor]}case"TensorListLength":{const y=Y("tensorListId",c,e,f),S=f.getTensorList(y.id);return[Ce(S.size(),"int32")]}case"TensorListResize":{const y=Y("tensorListId",c,e,f),S=Y("size",c,e,f),o=f.getTensorList(y.id).resize(S);return f.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mp(c,e,f){const[y,S]=Y("fusedOps",c,e,f),C=y==="biasadd",o=!C,x=S==="prelu",t=y==="fusedbatchnorm",s=Y("numArgs",c,e,f);if(C){if(x&&s!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!x&&C&&s!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(t)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const l=Y("strides",c,e,f),a=To(c,e,f),r=Y("dataFormat",c,e,f).toUpperCase(),i=Y("dilations",c,e,f);let[n,h]=Y("args",c,e,f);o&&(h=n,n=void 0);const d=Y("leakyreluAlpha",c,e,f);return{stride:l,pad:a,dataFormat:r,dilations:i,biasArg:n,preluArg:h,activationFunc:S,leakyreluAlpha:d}}const ez=(c,e,f,y=vn)=>{switch(c.op){case"Conv1D":{const S=Y("stride",c,e,f),C=Y("pad",c,e,f),o=Y("dataFormat",c,e,f).toUpperCase(),x=Y("dilation",c,e,f);return[y.conv1d(Y("x",c,e,f),Y("filter",c,e,f),S,C,o,x)]}case"Conv2D":{const S=Y("strides",c,e,f),C=To(c,e,f),o=Y("dataFormat",c,e,f).toUpperCase(),x=Y("dilations",c,e,f);return[y.conv2d(Y("x",c,e,f),Y("filter",c,e,f),[S[1],S[2]],C,o,[x[1],x[2]])]}case"_FusedConv2D":{const{stride:S,pad:C,dataFormat:o,dilations:x,biasArg:t,preluArg:s,activationFunc:l,leakyreluAlpha:a}=Mp(c,e,f);return[y.fused.conv2d({x:Y("x",c,e,f),filter:Y("filter",c,e,f),strides:[S[1],S[2]],pad:C,dataFormat:o,dilations:[x[1],x[2]],bias:t,activation:l,preluActivationWeights:s,leakyreluAlpha:a})]}case"FusedDepthwiseConv2dNative":{const{stride:S,pad:C,dataFormat:o,dilations:x,biasArg:t,preluArg:s,activationFunc:l,leakyreluAlpha:a}=Mp(c,e,f);return[y.fused.depthwiseConv2d({x:Y("x",c,e,f),filter:Y("filter",c,e,f),strides:[S[1],S[2]],pad:C,dataFormat:o,dilations:[x[1],x[2]],bias:t,activation:l,preluActivationWeights:s,leakyreluAlpha:a})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const S=Y("outputShape",c,e,f),C=Y("strides",c,e,f),o=To(c,e,f);return[y.conv2dTranspose(Y("x",c,e,f),Y("filter",c,e,f),S,[C[1],C[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const S=Y("strides",c,e,f),C=To(c,e,f),o=Y("dilations",c,e,f),x=Y("dataFormat",c,e,f).toUpperCase();return[y.depthwiseConv2d(Y("input",c,e,f),Y("filter",c,e,f),[S[1],S[2]],C,x,[o[1],o[2]])]}case"Conv3D":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("dataFormat",c,e,f).toUpperCase(),x=Y("dilations",c,e,f);return[y.conv3d(Y("x",c,e,f),Y("filter",c,e,f),[S[1],S[2],S[3]],C,o,[x[1],x[2],x[3]])]}case"AvgPool":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f);return[y.avgPool(Y("x",c,e,f),[o[1],o[2]],[S[1],S[2]],C)]}case"MaxPool":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f);return[y.maxPool(Y("x",c,e,f),[o[1],o[2]],[S[1],S[2]],C)]}case"MaxPoolWithArgmax":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f),x=Y("includeBatchInIndex",c,e,f),{result:t,indexes:s}=y.maxPoolWithArgmax(Y("x",c,e,f),[o[1],o[2]],[S[1],S[2]],C,x);return[t,s]}case"AvgPool3D":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f);return[y.avgPool3d(Y("x",c,e,f),[o[1],o[2],o[3]],[S[1],S[2],S[3]],C)]}case"MaxPool3D":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f);return[y.maxPool3d(Y("x",c,e,f),[o[1],o[2],o[3]],[S[1],S[2],S[3]],C)]}case"Dilation2D":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("dilations",c,e,f),x=S[1],t=S[2],s=o[1],l=o[2];return[y.dilation2d(Y("x",c,e,f),Y("filter",c,e,f),[x,t],C,[s,l],"NHWC")]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nz=(c,e,f,y=vn)=>{switch(c.op){case"Fill":{const S=Y("shape",c,e,f),C=Y("dtype",c,e,f),o=Y("value",c,e,f);return[y.fill(S,o,C)]}case"LinSpace":{const S=Y("start",c,e,f),C=Y("stop",c,e,f),o=Y("num",c,e,f);return[y.linspace(S,C,o)]}case"Multinomial":{const S=Y("logits",c,e,f),C=Y("numSamples",c,e,f),o=Y("seed",c,e,f);return[y.multinomial(S,C,o)]}case"OneHot":{const S=Y("indices",c,e,f),C=Y("depth",c,e,f),o=Y("onValue",c,e,f),x=Y("offValue",c,e,f),t=Y("dtype",c,e,f);return[y.oneHot(S,C,o,x,t)]}case"Ones":return[y.ones(Y("shape",c,e,f),Y("dtype",c,e,f))];case"OnesLike":return[y.onesLike(Y("x",c,e,f))];case"RandomStandardNormal":return[y.randomStandardNormal(Y("shape",c,e,f),Y("dtype",c,e,f),Y("seed",c,e,f))];case"RandomUniform":return[y.randomUniform(Y("shape",c,e,f),Y("minval",c,e,f),Y("maxval",c,e,f),Y("dtype",c,e,f))];case"RandomUniformInt":return[y.randomUniformInt(Y("shape",c,e,f),Y("minval",c,e,f),Y("maxval",c,e,f),Y("seed",c,e,f))];case"Range":{const S=Y("start",c,e,f),C=Y("stop",c,e,f),o=Y("step",c,e,f);return[y.range(S,C,o,Y("dtype",c,e,f))]}case"TruncatedNormal":{const S=Y("shape",c,e,f),C=Y("mean",c,e,f),o=Y("stdDev",c,e,f),x=Y("seed",c,e,f);return[y.truncatedNormal(S,C,o,Y("dtype",c,e,f),x)]}case"Zeros":return[y.zeros(Y("shape",c,e,f),Y("dtype",c,e,f))];case"ZerosLike":return[y.zerosLike(Y("x",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bl(c,e,f){const y=Y("boxes",c,e,f),S=Y("scores",c,e,f),C=Y("maxOutputSize",c,e,f),o=Y("iouThreshold",c,e,f),x=Y("scoreThreshold",c,e,f),t=Y("softNmsSigma",c,e,f);return{boxes:y,scores:S,maxOutputSize:C,iouThreshold:o,scoreThreshold:x,softNmsSigma:t}}const sz=async(c,e,f,y,S=vn)=>{switch(c.op){case"NonMaxSuppressionV5":{const{boxes:C,scores:o,maxOutputSize:x,iouThreshold:t,scoreThreshold:s,softNmsSigma:l}=bl(c,e,f),a=await S.image.nonMaxSuppressionWithScoreAsync(C,o,x,t,s,l);return[a.selectedIndices,a.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:C,scores:o,maxOutputSize:x,iouThreshold:t,scoreThreshold:s}=bl(c,e,f),l=Y("padToMaxOutputSize",c,e,f),a=await S.image.nonMaxSuppressionPaddedAsync(C,o,x,t,s,l);return[a.selectedIndices,a.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:C,scores:o,maxOutputSize:x,iouThreshold:t,scoreThreshold:s}=bl(c,e,f);return[await S.image.nonMaxSuppressionAsync(C,o,x,t,s)]}case"Where":{const C=S.cast(Y("condition",c,e,f),"bool"),o=[await S.whereAsync(C)];return C.dispose(),o}case"ListDiff":return S.setdiff1dAsync(Y("x",c,e,f),Y("y",c,e,f));default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iz=(c,e,f,y=vn)=>{switch(c.op){case"LowerBound":{const S=Y("sortedSequence",c,e,f),C=Y("values",c,e,f);return[y.lowerBound(S,C)]}case"TopKV2":{const S=Y("x",c,e,f),C=Y("k",c,e,f),o=Y("sorted",c,e,f),x=y.topk(S,C,o);return[x.values,x.indices]}case"UpperBound":{const S=Y("sortedSequence",c,e,f),C=Y("values",c,e,f);return[y.upperBound(S,C)]}case"Unique":{const S=Y("x",c,e,f),C=y.unique(S);return[C.values,C.indices]}case"UniqueV2":{const S=Y("x",c,e,f),C=Y("axis",c,e,f),o=y.unique(S,C);return[o.values,o.indices]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rz=(c,e,f,y=vn)=>{switch(c.op){case"Const":return e[c.name];case"PlaceholderWithDefault":const S=Y("default",c,e,f);return[hn(c.name,e,f)||S];case"Placeholder":return[hn(c.name,e,f)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const l=Y("x",c,e,f);return[Ws(l)]}case"IdentityN":return Y("x",c,e,f).map(l=>Ws(l));case"Snapshot":const C=Y("x",c,e,f);return[Ws(C)];case"Shape":return[y.tensor1d(Y("x",c,e,f).shape,"int32")];case"ShapeN":return Y("x",c,e,f).map(l=>y.tensor1d(l.shape));case"Size":return[y.scalar(Y("x",c,e,f).size,"int32")];case"Rank":return[y.scalar(Y("x",c,e,f).rank,"int32")];case"NoOp":return[y.scalar(1)];case"Print":const o=Y("x",c,e,f),x=Y("data",c,e,f),t=Y("message",c,e,f),s=Y("summarize",c,e,f);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(t);for(let l=0;l<x.length;l++)console.log(Array.prototype.slice.call(x[l].dataSync()).slice(0,s));return[o];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class az{get id(){return this.handle.id}constructor(e,f){this.keyDType=e,this.valueDType=f,this.handle=Ce(0),this.tensorMap=new Map,Is(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ce(this.size(),"int32")}async import(e,f){this.checkKeyAndValueTensor(e,f);const y=await e.data();return this.tensorMap.forEach(S=>S.dispose()),this.tensorMap.clear(),de(()=>{const S=gr(f),C=y.length,o=S.length;it(C===o,()=>`The number of elements doesn't match, keys has ${C} elements, the values has ${o} elements.`);for(let x=0;x<C;x++){const t=y[x],s=S[x];Is(s),this.tensorMap.set(t,s)}return this.handle})}async find(e,f){this.checkKeyAndValueTensor(e,f);const y=await e.data();return de(()=>{const S=[];for(let C=0;C<y.length;C++){const o=y[C],x=this.findWithDefault(o,f);S.push(x)}return Js(S)})}findWithDefault(e,f){const y=this.tensorMap.get(e);return y??f}checkKeyAndValueTensor(e,f){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(f.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${f.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oz=async(c,e,f,y)=>{switch(c.op){case"HashTable":case"HashTableV2":{const S=y.getHashTableHandleByName(c.name);if(S!=null)return[S];{const C=Y("keyDType",c,e,f),o=Y("valueDType",c,e,f),x=new az(C,o);return y.addHashTable(c.name,x),[x.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const S=Y("tableHandle",c,e,f,y),C=Y("keys",c,e,f),o=Y("values",c,e,f);return[await y.getHashTableById(S.id).import(C,o)]}case"LookupTableFind":case"LookupTableFindV2":{const S=Y("tableHandle",c,e,f,y),C=Y("keys",c,e,f),o=Y("defaultValue",c,e,f);return[await y.getHashTableById(S.id).find(C,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const S=Y("tableHandle",c,e,f,y);return[y.getHashTableById(S.id).tensorSize()]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uz=(c,e,f,y=vn)=>{switch(c.op){case"ResizeBilinear":{const S=Y("images",c,e,f),C=Y("size",c,e,f),o=Y("alignCorners",c,e,f),x=Y("halfPixelCenters",c,e,f);return[y.image.resizeBilinear(S,[C[0],C[1]],o,x)]}case"ResizeNearestNeighbor":{const S=Y("images",c,e,f),C=Y("size",c,e,f),o=Y("alignCorners",c,e,f),x=Y("halfPixelCenters",c,e,f);return[y.image.resizeNearestNeighbor(S,[C[0],C[1]],o,x)]}case"CropAndResize":{const S=Y("image",c,e,f),C=Y("boxes",c,e,f),o=Y("boxInd",c,e,f),x=Y("cropSize",c,e,f),t=Y("method",c,e,f),s=Y("extrapolationValue",c,e,f);return[y.image.cropAndResize(S,C,o,x,t,s)]}case"ImageProjectiveTransformV3":{const S=Y("images",c,e,f),C=Y("transforms",c,e,f),o=Y("outputShape",c,e,f),x=Y("fillValue",c,e,f),t=Y("interpolation",c,e,f),s=Y("fillMode",c,e,f);return[y.image.transform(S,C,t.toLowerCase(),s.toLowerCase(),x,o)]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lz=(c,e,f,y=vn)=>{switch(c.op){case"Equal":return[y.equal(Y("a",c,e,f),Y("b",c,e,f))];case"NotEqual":return[y.notEqual(Y("a",c,e,f),Y("b",c,e,f))];case"Greater":return[y.greater(Y("a",c,e,f),Y("b",c,e,f))];case"GreaterEqual":return[y.greaterEqual(Y("a",c,e,f),Y("b",c,e,f))];case"Less":return[y.less(Y("a",c,e,f),Y("b",c,e,f))];case"LessEqual":return[y.lessEqual(Y("a",c,e,f),Y("b",c,e,f))];case"LogicalAnd":return[y.logicalAnd(Y("a",c,e,f),Y("b",c,e,f))];case"LogicalNot":return[y.logicalNot(Y("a",c,e,f))];case"LogicalOr":return[y.logicalOr(Y("a",c,e,f),Y("b",c,e,f))];case"Select":case"SelectV2":return[y.where(Y("condition",c,e,f),Y("a",c,e,f),Y("b",c,e,f))];case"BitwiseAnd":return[y.bitwiseAnd(Y("a",c,e,f),Y("b",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hz=(c,e,f,y=vn)=>{switch(c.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[y.matMul(Y("a",c,e,f),Y("b",c,e,f),Y("transposeA",c,e,f),Y("transposeB",c,e,f))];case"Einsum":return[y.einsum(Y("equation",c,e,f),...Y("tensors",c,e,f))];case"Transpose":return[y.transpose(Y("x",c,e,f),Y("perm",c,e,f))];case"_FusedMatMul":const[S,C]=Y("fusedOps",c,e,f),o=S==="biasadd",x=C==="prelu",t=Y("numArgs",c,e,f),s=Y("leakyreluAlpha",c,e,f);if(o){if(x&&t!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!x&&t!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[l,a]=Y("args",c,e,f);return[y.fused.matMul({a:Y("a",c,e,f),b:Y("b",c,e,f),transposeA:Y("transposeA",c,e,f),transposeB:Y("transposeB",c,e,f),bias:l,activation:C,preluActivationWeights:a,leakyreluAlpha:s})];case"MatrixBandPart":return[y.linalg.bandPart(Y("a",c,e,f),Y("numLower",c,e,f),Y("numUpper",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fz=(c,e,f,y=vn)=>{switch(c.op){case"EuclideanNorm":return[y.euclideanNorm(Y("x",c,e,f),Y("axis",c,e,f),Y("keepDims",c,e,f))];case"FusedBatchNorm":case"FusedBatchNormV2":return[y.batchNorm(Y("x",c,e,f),Y("mean",c,e,f),Y("variance",c,e,f),Y("offset",c,e,f),Y("scale",c,e,f),Y("epsilon",c,e,f))];case"FusedBatchNormV3":return[y.batchNorm(Y("x",c,e,f),Y("mean",c,e,f),Y("variance",c,e,f),Y("offset",c,e,f),Y("scale",c,e,f),Y("epsilon",c,e,f))];case"LRN":return[y.localResponseNormalization(Y("x",c,e,f),Y("radius",c,e,f),Y("bias",c,e,f),Y("alpha",c,e,f),Y("beta",c,e,f))];case"Softmax":return[y.softmax(Y("x",c,e,f))];case"LogSoftmax":return[y.logSoftmax(Y("x",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cz=(c,e,f,y=vn)=>{switch(c.op){case"RaggedGather":{const{outputNestedSplits:S,outputDenseValues:C}=y.raggedGather(Y("paramsNestedSplits",c,e,f),Y("paramsDenseValues",c,e,f),Y("indices",c,e,f),Y("outputRaggedRank",c,e,f));return S.concat(C)}case"RaggedRange":{const{rtNestedSplits:S,rtDenseValues:C}=y.raggedRange(Y("starts",c,e,f),Y("limits",c,e,f),Y("splits",c,e,f));return[S,C]}case"RaggedTensorToTensor":return[y.raggedTensorToTensor(Y("shape",c,e,f),Y("values",c,e,f),Y("defaultValue",c,e,f),Y("rowPartitionTensors",c,e,f),Y("rowPartitionTypes",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dz=(c,e,f,y=vn)=>{switch(c.op){case"Max":{const x=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[y.max(Y("x",c,e,f),x,t)]}case"Mean":{const x=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[y.mean(Y("x",c,e,f),x,t)]}case"Min":{const x=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[y.min(Y("x",c,e,f),x,t)]}case"Sum":{const x=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[y.sum(Y("x",c,e,f),x,t)]}case"All":{const x=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[y.all(Y("x",c,e,f),x,t)]}case"Any":{const x=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[y.any(Y("x",c,e,f),x,t)]}case"ArgMax":{const x=Y("axis",c,e,f);return[y.argMax(Y("x",c,e,f),x)]}case"ArgMin":{const x=Y("axis",c,e,f);return[y.argMin(Y("x",c,e,f),x)]}case"Prod":{const x=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[y.prod(Y("x",c,e,f),x,t)]}case"Cumprod":{const x=Y("axis",c,e,f),t=Y("exclusive",c,e,f),s=Y("reverse",c,e,f);return[y.cumprod(Y("x",c,e,f),x,t,s)]}case"Cumsum":{const x=Y("axis",c,e,f),t=Y("exclusive",c,e,f),s=Y("reverse",c,e,f);return[y.cumsum(Y("x",c,e,f),x,t,s)]}case"Bincount":const S=Y("x",c,e,f),C=Y("weights",c,e,f),o=Y("size",c,e,f);return[y.bincount(S,C,o)];case"DenseBincount":{const x=Y("x",c,e,f),t=Y("weights",c,e,f),s=Y("size",c,e,f),l=Y("binaryOutput",c,e,f);return[y.denseBincount(x,t,s,l)]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pz=(c,e,f,y=vn)=>{switch(c.op){case"ConcatV2":case"Concat":{const S=Y("n",c,e,f),C=Y("axis",c,e,f);let o=Y("tensors",c,e,f);return o=o.slice(0,S),[y.concat(o,C)]}case"Gather":{const S=Y("x",c,e,f),C=Y("indices",c,e,f);return[y.gather(S,y.cast(C,"int32"),0)]}case"GatherV2":{const S=Y("axis",c,e,f),C=Y("batchDims",c,e,f),o=Y("x",c,e,f),x=Y("indices",c,e,f);return[y.gather(o,y.cast(x,"int32"),S,C)]}case"Reverse":{const S=Y("dims",c,e,f),C=[];for(let x=0;x<S.length;x++)S[x]&&C.push(x);const o=Y("x",c,e,f);return[y.reverse(o,C)]}case"ReverseV2":{const S=Y("axis",c,e,f),C=Y("x",c,e,f);return[y.reverse(C,S)]}case"Slice":{const S=Y("begin",c,e,f),C=Y("size",c,e,f);return[y.slice(Y("x",c,e,f),S,C)]}case"StridedSlice":{const S=Y("begin",c,e,f),C=Y("end",c,e,f),o=Y("strides",c,e,f),x=Y("beginMask",c,e,f),t=Y("endMask",c,e,f),s=Y("ellipsisMask",c,e,f),l=Y("newAxisMask",c,e,f),a=Y("shrinkAxisMask",c,e,f),r=Y("x",c,e,f);return[y.stridedSlice(r,S,C,o,x,t,s,l,a)]}case"Pack":return de(()=>{const S=Y("axis",c,e,f),C=Y("tensors",c,e,f),o=C[0].shape,x=y.squeeze(C[0]).shape,t=C.map(s=>{const l=je(s.shape,o);if(!l&&!je(y.squeeze(s).shape,x))throw new Error("the input tensors shape does not match");return l?s:y.reshape(s,o)});return[y.stack(t,S)]});case"Unpack":{const S=Y("axis",c,e,f),C=Y("tensor",c,e,f);return y.unstack(C,S)}case"Tile":{const S=Y("reps",c,e,f);return[y.tile(Y("x",c,e,f),S)]}case"Split":case"SplitV":{const S=Y("axis",c,e,f),C=Y("numOrSizeSplits",c,e,f),o=Y("x",c,e,f);return y.split(o,C,S)}case"ScatterNd":{const S=Y("indices",c,e,f),C=Y("values",c,e,f),o=Y("shape",c,e,f);return[y.scatterND(S,C,o)]}case"GatherNd":{const S=Y("x",c,e,f),C=Y("indices",c,e,f);return[y.gatherND(S,C)]}case"SparseToDense":{const S=Y("sparseIndices",c,e,f),C=Y("outputShape",c,e,f),o=Y("sparseValues",c,e,f),x=Y("defaultValue",c,e,f);return[y.sparseToDense(S,o,C,o.dtype===x.dtype?x:y.cast(x,o.dtype))]}case"TensorScatterUpdate":{const S=Y("indices",c,e,f),C=Y("values",c,e,f),o=Y("tensor",c,e,f);return[y.tensorScatterUpdate(o,S,C)]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vz=(c,e,f,y=vn)=>{switch(c.op){case"SparseFillEmptyRows":{const{outputIndices:S,outputValues:C,emptyRowIndicator:o,reverseIndexMap:x}=y.sparse.sparseFillEmptyRows(Y("indices",c,e,f),Y("values",c,e,f),Y("denseShape",c,e,f),Y("defaultValue",c,e,f));return[S,C,o,x]}case"SparseReshape":{const{outputIndices:S,outputShape:C}=y.sparse.sparseReshape(Y("inputIndices",c,e,f),Y("inputShape",c,e,f),Y("newShape",c,e,f));return[S,C]}case"SparseSegmentMean":return[y.sparse.sparseSegmentMean(Y("data",c,e,f),Y("indices",c,e,f),Y("segmentIds",c,e,f))];case"SparseSegmentSum":return[y.sparse.sparseSegmentSum(Y("data",c,e,f),Y("indices",c,e,f),Y("segmentIds",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mz=(c,e,f,y=vn)=>{switch(c.op){case"FFT":return[y.fft(Y("x",c,e,f))];case"IFFT":return[y.ifft(Y("x",c,e,f))];case"RFFT":return[y.rfft(Y("x",c,e,f))];case"IRFFT":return[y.irfft(Y("x",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gz=(c,e,f,y=vn)=>{switch(c.op){case"StaticRegexReplace":return[y.string.staticRegexReplace(Y("input",c,e,f),Y("pattern",c,e,f),Y("rewrite",c,e,f),Y("replaceGlobal",c,e,f))];case"StringNGrams":{const{nGrams:S,nGramsSplits:C}=y.string.stringNGrams(Y("data",c,e,f),Y("dataSplits",c,e,f),Y("separator",c,e,f),Y("nGramWidths",c,e,f),Y("leftPad",c,e,f),Y("rightPad",c,e,f),Y("padWidth",c,e,f),Y("preserveShortSequences",c,e,f));return[S,C]}case"StringSplit":{const{indices:S,values:C,shape:o}=y.string.stringSplit(Y("input",c,e,f),Y("delimiter",c,e,f),Y("skipEmpty",c,e,f));return[S,C,o]}case"StringToHashBucketFast":return[y.string.stringToHashBucketFast(Y("input",c,e,f),Y("numBuckets",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xz=(c,e,f,y=vn)=>{switch(c.op){case"Cast":return[y.cast(Y("x",c,e,f),Y("dtype",c,e,f))];case"ExpandDims":{const S=Y("axis",c,e,f);return[y.expandDims(Y("x",c,e,f),S)]}case"Squeeze":{const S=Y("axis",c,e,f);return[y.squeeze(Y("x",c,e,f),S)]}case"Reshape":return[y.reshape(Y("x",c,e,f),Y("shape",c,e,f))];case"EnsureShape":return[y.ensureShape(Y("x",c,e,f),Y("shape",c,e,f))];case"MirrorPad":return[y.mirrorPad(Y("x",c,e,f),Y("padding",c,e,f),Y("mode",c,e,f))];case"PadV2":case"Pad":return[y.pad(Y("x",c,e,f),Y("padding",c,e,f),Y("constantValue",c,e,f))];case"SpaceToBatchND":{const S=Y("blockShape",c,e,f),C=Y("paddings",c,e,f);return[y.spaceToBatchND(Y("x",c,e,f),S,C)]}case"BatchToSpaceND":{const S=Y("blockShape",c,e,f),C=Y("crops",c,e,f);return[y.batchToSpaceND(Y("x",c,e,f),S,C)]}case"DepthToSpace":{const S=Y("blockSize",c,e,f),C=Y("dataFormat",c,e,f).toUpperCase();return[y.depthToSpace(Y("x",c,e,f),S,C)]}case"BroadcastTo":return[y.broadcastTo(Y("x",c,e,f),Y("shape",c,e,f))];case"BroadcastArgs":return[y.broadcastArgs(Y("s0",c,e,f),Y("s1",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Np(c,e,f,y,S=de){const C=((o,x,t)=>{switch(o.category){case"arithmetic":return S(()=>KV(o,x,t));case"basic_math":return S(()=>jV(o,x,t));case"control":return tz(o,x,t);case"convolution":return S(()=>ez(o,x,t));case"creation":return S(()=>nz(o,x,t));case"dynamic":return sz(o,x,t);case"evaluation":return S(()=>iz(o,x,t));case"image":return S(()=>uz(o,x,t));case"graph":return S(()=>rz(o,x,t));case"logical":return S(()=>lz(o,x,t));case"matrices":return S(()=>hz(o,x,t));case"normalization":return S(()=>fz(o,x,t));case"ragged":return S(()=>cz(o,x,t));case"reduction":return S(()=>dz(o,x,t));case"slice_join":return S(()=>pz(o,x,t));case"sparse":return S(()=>vz(o,x,t));case"spectral":return S(()=>mz(o,x,t));case"string":return S(()=>gz(o,x,t));case"transformation":return S(()=>xz(o,x,t));case"hash_table":return oz(o,x,t,y);case"custom":const s=d2(o.op);if(s&&s.customExecutor)return s.customExecutor(new YV(o,x,t));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(c,e,f);return sr(C)?C.then(o=>[].concat(o)):[].concat(C)}class Op{constructor(e={},f={},y={},S={},C){this.weightMap=e,this.tensorArrayMap=f,this.tensorListMap=y,this.functionMap=S,this.parseNodeNameCache=C,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,f){return{id:e,frameName:f,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let f=0;f<this.contexts.length-1;f++){const y=this.contexts.slice(0,this.contexts.length-f);e.push(this.contextIdforContexts(y))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(f=>f.id===0&&f.iterationId===0?"":`${f.frameName}-${f.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const f in this.tensorArrayMap)this.tensorArrayMap[f].clearAndClose(e);for(const f in this.tensorListMap)this.tensorListMap[f].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dp(c,e,f,y){const S=new Set,C=[];let o=null,x=null;const t=new Set,s=new Set(Object.keys(c).map(r=>Gn(r)[0]));y=y||[];const l=new Set(y.map(r=>Gn(r.name)[0])),a=[...e];for(;a.length>0;){const r=a.pop();if((Ji(r)||Az(r)||Rz(r))&&o==null&&(o=r,x=o.children.map(i=>i.name).filter(i=>S.has(i))),S.add(r.name),f[r.name]==null&&!s.has(r.name)&&!l.has(r.name)){if(r.inputs.length===0){C.push(r.name);continue}r.inputs.forEach(i=>{t.has(i.name)||(t.add(i.name),a.push(i))})}}return{inputs:c,outputs:e,usedNodes:S,missingInputs:C,dynamicNode:o,syncInputs:x}}function yz(c,e){const{usedNodes:f,inputs:y}=e,S=Object.keys(y).map(d=>Gn(d)[0]).map(d=>c.nodes[d]),C=c.initNodes||[],o=d=>f.has(typeof d=="string"?d:d.name);function x(d){return[...new Map(d.map(u=>[u.name,u])).values()]}const t=x([...S,...c.weights,...C]).filter(o),s=x([...t,...Object.values(c.nodes)]).filter(o),l=new Map(s.map(d=>[d.name,d])),a={};for(const d of s){a[d.name]=a[d.name]||0;for(const u of d.children)o(u)||(a[u.name]=Number.POSITIVE_INFINITY),a[u.name]=(a[u.name]||0)+1}const r=Object.entries(a).filter(([,d])=>d===0).map(([d])=>d),i=[...r];for(;r.length>0;){const d=r.pop(),u=l.get(d);for(const p of u.children.filter(o))--a[p.name]===0&&(i.push(p.name),r.push(p.name))}const n=i.map(d=>l.get(d)),h=Tz(n,t);return Sz(h,t),h}function Tz(c,e){const f=new Map(c.map(o=>[o.name,o])),y=e.map(o=>o.name),S=new Set(y);for(;y.length>0;){const o=y.pop(),x=f.get(o);for(const t of x.children)!f.has(t.name)||S.has(t.name)||(S.add(t.name),y.push(t.name))}return c.filter(o=>S.has(o.name))}class vo extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Sz(c,e){const f=new Map(c.map((x,t)=>[x.name,t])),y=new Set(e.map(x=>x.name)),S=x=>y.has(typeof x=="string"?x:x.name),C=new Set(c.map(x=>x.name)),o=x=>C.has(typeof x=="string"?x:x.name);for(const x of c){for(const t of x.children.filter(o)){if(!f.has(t.name))throw new vo(`Child ${t.name} of node ${x.name} is unreachable.`);if(f.get(x.name)>f.get(t.name))throw new vo(`Node ${x.name} is scheduled to run after its child ${t.name}.`)}if(!S(x))for(const t of x.inputs){if(!f.has(t.name))throw new vo(`Input ${t.name} of node ${x.name} is unreachable.`);if(f.get(t.name)>f.get(x.name))throw new vo(`Node ${x.name} is scheduled to run before its input ${t.name}.`)}}}function Cz(c){const e=new Map(c.map((x,t)=>[x.name,t])),f=Number.MAX_SAFE_INTEGER,y=c.map((x,t)=>Ji(x)?f:t),S=x=>{const t=y[e.get(x.name)];return t??-1},C=c.map((x,t)=>x.children.map(S).reduce((s,l)=>Math.max(s,l),y[t])),o=new Map;for(let x=0;x<c.length;++x){const t=C[x];if(t===f)continue;const s=c[x],l=c[t];o.has(l.name)||o.set(l.name,[]),o.get(l.name).push(s)}return o}const Ez=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),wz=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),bz=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Ji(c){return Ez.has(c.op)}function Az(c){return wz.has(c.op)}function Rz(c){return bz.has(c.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vo{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const f=Object.keys(e).map(y=>e[y].map(S=>S.id));this._weightIds=[].concat(...f),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const f=e.signatureKey||e.name;return e.defaultOutput?`${f}:${e.defaultOutput}`:f})}get functions(){return Object.keys(this._functions).reduce((e,f)=>(e[f]=this._functions[f].signature,e),{})}constructor(e,f){this.graph=e,this.parent=f,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(y=>{this._functionExecutorMap[y]=new Vo(e.functions[y],this)})}getCompilationKey(e,f){const y=e.map(C=>C.name).sort(),S=f.map(C=>C.name).sort();return y.join(this.SEPARATOR)+"--"+S.join(this.SEPARATOR)}compile(e,f){const y=Dp(e,f,this.weightMap,this._initNodes),{missingInputs:S,dynamicNode:C,syncInputs:o}=y;if(C!=null)throw new Error(`This execution contains the node '${C.name}', which has the dynamic op '${C.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(S.length>0){const s=f.map(a=>a.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${l}]. Missing the following inputs: [${S}]`)}const x=yz(this.graph,y),t=Cz(x);return{orderedNodes:x,nodeLiveUntilMap:t}}cloneAndKeepTensor(e){if(e==null)return null;const f=e.clone();return Is(f),f}cloneTensorList(e){return e?e.map(y=>this.cloneAndKeepTensor(y)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([f,y])=>[f,this.cloneTensorList(y)]))}execute(e,f){this.disposeIntermediateTensors(),e=this.mapInputs(e);const y=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),f=this.mapOutputs(f),this.checkOutputs(f);const S=y.map(r=>this.graph.nodes[Gn(r)[0]]),C=f.map(r=>Gn(r)[0]),o=new Set(C);let x=C.map(r=>this.graph.nodes[r]);x.length===0&&(x=this._outputs);const t=this.getCompilationKey(S,x);let s=this.compiledMap.get(t);s==null&&(s=this.compile(e,x),this.compiledMap.set(t,s));try{this.keepIntermediateTensors=St().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(r){this.keepIntermediateTensors=!1,console.warn(r.message)}const l={},a={};return de(()=>{const r=new Op(this.weightMap,l,a,this.functionExecutorMap,this.parseNodeNameCache),i=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(u=>{const[p,v]=Gn(u,r),m=[];m[v]=e[u],i[p]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(m))});const n=this.getFrozenTensorIds(i),{orderedNodes:h,nodeLiveUntilMap:d}=s;for(const u of h){if(i[u.name])continue;const p=Np(u,i,r,this._resourceManager);if(sr(p))throw new Error(`The execution of the op '${u.op}' returned a promise. Please use model.executeAsync() instead.`);i[u.name]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[u.name]=this.cloneTensorList(p)),this.checkTensorForDisposalWithNodeLiveUntilInfo(u,i,r,n,o,d.get(u.name))}return this.parent==null&&r.dispose(n),f.map(u=>hn(u,i,r))})}getFrozenTensorIds(e){const f=[].concat.apply([],Object.keys(e).map(y=>e[y]).map(y=>y.map(S=>S.id)));return new Set(f)}checkTensorForDisposal(e,f,y,S,C,o,x){if(!(Ji(f)||o.has(e))){for(const t of y[e])t!=null&&(x[t.id]=(x[t.id]||0)+f.children.length);for(const t of f.inputs){if(Ji(t))continue;const s=Rp(t.name,y,S);if(s!=null)for(const l of s){if(!l||l.kept||C.has(l.id))continue;const a=x[l.id];a===1?(l.dispose(),delete x[l.id]):a!=null&&x[l.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,f,y,S,C,o){function x(t){return Ji(t)||C.has(t.name)}if(!(Ji(e)||o==null))for(const t of o){if(x(t))continue;const s=Rp(t.name,f,y);for(const l of s)!l||l.kept||S.has(l.id)||l.dispose()}}async executeAsync(e,f){return this._executeAsync(e,f)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const f of e)f&&!f.isDisposed&&f.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,f,y=!1,S={},C={}){this.disposeIntermediateTensors(),y||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),f=this.mapOutputs(f),this.checkOutputs(f));try{this.keepIntermediateTensors=St().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(r){this.keepIntermediateTensors=!1,console.warn(r.message)}const o=new Op(this.weightMap,S,C,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const x=await this.executeWithControlFlow(e,o,f,y),t=f.map(r=>hn(r,x,o)),s=t.map(r=>r.id),l=Object.keys(e).map(r=>e[r].id),a=new Set([...s,...l,...this.weightIds]);return Object.values(x).forEach(r=>{r.forEach(i=>{i&&!i.isDisposed&&!a.has(i.id)&&i.dispose()})}),this.parent==null&&o.dispose(a),t}async executeFunctionAsync(e,f,y){const S=e.reduce((C,o,x)=>(C[this.inputs[x].name]=o,C),{});return this._executeAsync(S,this.outputNodes,!0,f,y)}async executeWithControlFlow(e,f,y,S){const C=Object.keys(e),o=C.map(m=>this.graph.nodes[Gn(m)[0]]),x=y.map(m=>Gn(m)[0]),t=new Set(x);let s=x.map(m=>this.graph.nodes[m]);s.length===0&&(s=this._outputs);const{usedNodes:l,missingInputs:a,dynamicNode:r,syncInputs:i}=Dp(e,s,this.weightMap,this._initNodes),n=[...o,...this.graph.weights,...this._initNodes||[]].map(m=>({node:m,contexts:f.currentContext})),h=Object.assign({},this.weightMap);Object.keys(e).forEach(m=>{const[g,T]=Gn(m),w=[];w[T]=e[m],h[g]=w});const d={},u=this.getFrozenTensorIds(h),p={};for(;n.length>0;){const m=this.processStack(o,n,f,h,p,u,t,d,l);await Promise.all(m)}r==null&&!S&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=s.filter(m=>!Ji(m)&&!hn(m.name,h,f)).map(m=>m.name);if(v.length>0){let m="";throw r!=null&&(m=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${i}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${C}]. Consider providing the following inputs: [${a}]. ${m}`)}return h}processStack(e,f,y,S,C,o,x,t,s){const l=[];for(;f.length>0;){const a=f.pop();y.currentContext=a.contexts;let r="";if(a.node.op==="Enter"&&Y("isConstant",a.node,S,y)&&([r]=ks(a.node.name,y)),S[a.node.name]==null){const i=Np(a.node,S,y,this._resourceManager);r||([r]=ks(a.node.name,y));const n=y.currentContext;sr(i)?l.push(i.then(h=>(S[r]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[r]=this.cloneTensorList(h)),y.currentContext=n,this.checkTensorForDisposal(r,a.node,S,y,o,x,t),this.processChildNodes(a.node,f,y,S,C,s),h))):(S[r]=i,this.keepIntermediateTensors&&(this.clonedTensorsMap[r]=this.cloneTensorList(i)),this.checkTensorForDisposal(r,a.node,S,y,o,x,t),this.processChildNodes(a.node,f,y,S,C,s))}else this.processChildNodes(a.node,f,y,S,C,s)}return l}processChildNodes(e,f,y,S,C,o){e.children.forEach(x=>{const[t]=ks(x.name,y);C[t]||!o.has(x.name)||(x.op==="Merge"?x.inputNames.some(s=>!!hn(s,S,y))&&(C[t]=!0,f.push({contexts:y.currentContext,node:x})):x.inputNames.every(s=>!!hn(s,S,y))&&(C[t]=!0,f.push({contexts:y.currentContext,node:x})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(f=>f.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(f=>{const y=e[f],[S]=Gn(f),C=this.graph.nodes[S];if(C.attrParams.shape&&C.attrParams.shape.value){const o=C.attrParams.shape.value,x=o.length===y.shape.length&&y.shape.every((t,s)=>o[s]===-1||o[s]===t);it(x,()=>`The shape of dict['${C.name}'] provided in model.execute(dict) must be [${o}], but was [${y.shape}]`)}C.attrParams.dtype&&C.attrParams.dtype.value&&it(y.dtype===C.attrParams.dtype.value,()=>`The dtype of dict['${C.name}'] provided in model.execute(dict) must be ${C.attrParams.dtype.value}, but was ${y.dtype}`)})}mapInputs(e){var f,y;const S={};for(const C in e){const o=(y=(f=this._signature)===null||f===void 0?void 0:f.inputs)===null||y===void 0?void 0:y[C];o!=null?S[o.name]=e[C]:S[C]=e[C]}return S}checkInputs(e){const f=Object.keys(e).filter(y=>{const[S]=Gn(y);return this.graph.nodes[S]==null});if(f.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${f}] that are not part of graph`)}mapOutputs(e){return e.map(f=>{var y,S;const C=(S=(y=this._signature)===null||y===void 0?void 0:y.outputs)===null||S===void 0?void 0:S[f];return C!=null?C.name:f},{})}checkOutputs(e){e.forEach(f=>{const[y]=Gn(f);if(!this.graph.nodes[y])throw new Error(`The output '${f}' is not found in the graph`)})}}class Iz{constructor(e={},f={}){this.hashTableNameToHandle=e,this.hashTableMap=f}addHashTable(e,f){this.hashTableNameToHandle[e]=f.handle,this.hashTableMap[f.id]=f}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pz="?tfjs-format=file",Fz="model.json";class Mz{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,f={},y=_m){this.modelUrl=e,this.loadOptions=f,this.version="n/a",this.io=y,f==null&&(this.loadOptions={}),this.resourceManager=new Iz}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const f=this.io.getLoadHandlers(e,this.loadOptions);if(f.length===0)f.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(f.length>1)throw new Error(`Found more than one (${f.length}) load handlers for URL '${[e]}'`);this.handler=f[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return sr(e)?e.then(f=>this.loadSync(f)):this.loadSync(e)}loadSync(e){this.artifacts=e;const f=this.artifacts.modelTopology;let y=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const C=this.artifacts.userDefinedMetadata;C.signature!=null&&(y=C.signature),C.structuredOutputKeys!=null&&(this.structuredOutputKeys=C.structuredOutputKeys)}this.signature=y,this.version=`${f.versions.producer}.${f.versions.minConsumer}`;const S=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Vo(Ip.Instance.transformGraph(f,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(S),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const C=Ip.Instance.transformGraph(e.modelInitializer);this.initializer=new Vo(C),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,f){if(typeof e=="string"){const y=this.io.getSaveHandlers(e);if(y.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(y.length>1)throw new Error(`Found more than one (${y.length}) save handlers for URL '${e}'`);e=y[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const f=e instanceof Je?[e]:e,y={};return f.forEach((S,C)=>y[this.structuredOutputKeys[C]]=S),y}return e}predict(e,f){const y=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(y)}async predictAsync(e,f){const y=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(y)}normalizeInputs(e){var f;if(!(e instanceof Je)&&!Array.isArray(e)){const C=(f=this.signature)===null||f===void 0?void 0:f.inputs;if(C!=null)for(const o in C){const x=C[o];x.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[x.resourceId])}return e}e=Array.isArray(e)?e:[e];const y=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+y!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-y} non-resource placeholders, while there are ${e.length} input tensors provided.`);let S=0;return this.inputNodes.reduce((C,o)=>{var x,t,s;const l=(s=(t=(x=this.signature)===null||x===void 0?void 0:x.inputs)===null||t===void 0?void 0:t[o])===null||s===void 0?void 0:s.resourceId;return l!=null?C[o]=this.resourceIdToCapturedInput[l]:C[o]=e[S++],C},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const f=this.initializerSignature.outputs,y=Object.keys(f);for(let S=0;S<y.length;S++){const C=y[S],o=f[C];this.resourceIdToCapturedInput[o.resourceId]=e[S]}}}execute(e,f){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),f=this.normalizeOutputs(f);const y=this.executor.execute(e,f);return y.length>1?y:y[0]}async executeAsync(e,f){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),f=this.normalizeOutputs(f);const y=await this.executor.executeAsync(e,f);return y.length>1?y:y[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((f,y)=>(f[y]=[e[y]],f),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Ke(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function m2(c,e={},f=_m){if(c==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof c=="string"&&(c=Nz(c));const y=new Mz(c,e,f);return await y.load(),y}function Nz(c){return c.endsWith("/")||(c=c+"/"),`${c}${Fz}${Pz}`}/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var Ss=function(){return Ss=Object.assign||function(c){for(var e,f=1,y=arguments.length;f<y;f++)for(var S in e=arguments[f])Object.prototype.hasOwnProperty.call(e,S)&&(c[S]=e[S]);return c},Ss.apply(this,arguments)};function Hs(c,e,f,y){return new(f||(f=Promise))(function(S,C){function o(s){try{t(y.next(s))}catch(l){C(l)}}function x(s){try{t(y.throw(s))}catch(l){C(l)}}function t(s){var l;s.done?S(s.value):(l=s.value,l instanceof f?l:new f(function(a){a(l)})).then(o,x)}t((y=y.apply(c,e||[])).next())})}function Ys(c,e){var f,y,S,C,o={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return C={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function x(t){return function(s){return function(l){if(f)throw new TypeError("Generator is already executing.");for(;o;)try{if(f=1,y&&(S=2&l[0]?y.return:l[0]?y.throw||((S=y.return)&&S.call(y),0):y.next)&&!(S=S.call(y,l[1])).done)return S;switch(y=0,S&&(l=[2&l[0],S.value]),l[0]){case 0:case 1:S=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,y=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(S=o.trys,!((S=S.length>0&&S[S.length-1])||l[0]!==6&&l[0]!==2)){o=0;continue}if(l[0]===3&&(!S||l[1]>S[0]&&l[1]<S[3])){o.label=l[1];break}if(l[0]===6&&o.label<S[1]){o.label=S[1],S=l;break}if(S&&o.label<S[2]){o.label=S[2],o.ops.push(l);break}S[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(c,o)}catch(a){l=[6,a],y=0}finally{f=S=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([t,s])}}}function vi(c){var e=c.map(function(f){return f[0]});return e.push(c[c.length-1][1]),e}var Oz={lips:vi([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:vi([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:vi([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:vi([[474,475],[475,476],[476,477],[477,474]]),rightEye:vi([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:vi([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:vi([[469,470],[470,471],[471,472],[472,469]]),faceOval:vi([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},Dz=Object.entries(Oz).map(function(c){var e=c[0];return c[1].map(function(f){return[f,e]})}).flat(),g2=new Map(Dz);function bh(c){for(var e={locationData:{relativeKeypoints:[]}},f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER,S=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER,o=0;o<c.length;++o){var x=c[o];f=Math.min(f,x.x),y=Math.max(y,x.x),S=Math.min(S,x.y),C=Math.max(C,x.y),e.locationData.relativeKeypoints.push({x:x.x,y:x.y})}return e.locationData.relativeBoundingBox={xMin:f,yMin:S,xMax:y,yMax:C,width:y-f,height:C-S},e}var Al={runtime:"mediapipe",maxFaces:1,refineLandmarks:!1},Lz=function(){function c(e){var f=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new P0.FaceMesh({locateFile:function(y,S){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+y:S+"/"+y}}),this.faceMeshSolution.setOptions({refineLandmarks:e.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:e.maxFaces}),this.faceMeshSolution.onResults(function(y){if(f.height=y.image.height,f.width=y.image.width,f.faces=[],y.multiFaceLandmarks!==null)for(var S=y.multiFaceLandmarks,C=0;C<S.length;C++){var o=f.translateOutput(S[C]);f.faces.push({keypoints:o,box:bh(o).locationData.relativeBoundingBox})}})}return c.prototype.translateOutput=function(e){var f=this;return e.map(function(y,S){var C={x:y.x*f.width,y:y.y*f.height,z:y.z*f.width},o=g2.get(S);return o!=null&&(C.name=o),C})},c.prototype.estimateFaces=function(e,f){return Hs(this,void 0,void 0,function(){var y,S;return Ys(this,function(C){switch(C.label){case 0:return f&&f.flipHorizontal&&f.flipHorizontal!==this.selfieMode&&(this.selfieMode=f.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Je?(S=ImageData.bind,[4,tg(e)]):[3,2];case 1:return y=new(S.apply(ImageData,[void 0,C.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:y=e,C.label=3;case 3:return e=y,[4,this.faceMeshSolution.send({image:e})];case 4:return C.sent(),[2,this.faces]}})})},c.prototype.dispose=function(){this.faceMeshSolution.close()},c.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},c.prototype.initialize=function(){return this.faceMeshSolution.initialize()},c}();function Bz(c){return Hs(this,void 0,void 0,function(){var e,f;return Ys(this,function(y){switch(y.label){case 0:return e=function(S){if(S==null)return Ss({},Al);var C=Ss({},S);return C.runtime="mediapipe",C.maxFaces==null&&(C.maxFaces=Al.maxFaces),C.refineLandmarks==null&&(C.refineLandmarks=Al.refineLandmarks),C}(c),[4,(f=new Lz(e)).initialize()];case 1:return y.sent(),[2,f]}})})}var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$z={};(function(){var c;function e($){var Z=0;return function(){return Z<$.length?{done:!1,value:$[Z++]}:{done:!0}}}var f=typeof Object.defineProperties=="function"?Object.defineProperty:function($,Z,tt){return $==Array.prototype||$==Object.prototype||($[Z]=tt.value),$},y=function($){$=[typeof globalThis=="object"&&globalThis,$,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rl=="object"&&Rl];for(var Z=0;Z<$.length;++Z){var tt=$[Z];if(tt&&tt.Math==Math)return tt}throw Error("Cannot find global object")}(this);function S($,Z){if(Z)t:{var tt=y;$=$.split(".");for(var nt=0;nt<$.length-1;nt++){var ut=$[nt];if(!(ut in tt))break t;tt=tt[ut]}(Z=Z(nt=tt[$=$[$.length-1]]))!=nt&&Z!=null&&f(tt,$,{configurable:!0,writable:!0,value:Z})}}function C($){return($={next:$})[Symbol.iterator]=function(){return this},$}function o($){var Z=typeof Symbol<"u"&&Symbol.iterator&&$[Symbol.iterator];return Z?Z.call($):{next:e($)}}function x($){if(!($ instanceof Array)){$=o($);for(var Z,tt=[];!(Z=$.next()).done;)tt.push(Z.value);$=tt}return $}S("Symbol",function($){function Z(ut,at){this.g=ut,f(this,"description",{configurable:!0,writable:!0,value:at})}if($)return $;Z.prototype.toString=function(){return this.g};var tt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",nt=0;return function ut(at){if(this instanceof ut)throw new TypeError("Symbol is not a constructor");return new Z(tt+(at||"")+"_"+nt++,at)}}),S("Symbol.iterator",function($){if($)return $;$=Symbol("Symbol.iterator");for(var Z="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),tt=0;tt<Z.length;tt++){var nt=y[Z[tt]];typeof nt=="function"&&typeof nt.prototype[$]!="function"&&f(nt.prototype,$,{configurable:!0,writable:!0,value:function(){return C(e(this))}})}return $});var t,s=typeof Object.create=="function"?Object.create:function($){function Z(){}return Z.prototype=$,new Z};if(typeof Object.setPrototypeOf=="function")t=Object.setPrototypeOf;else{var l;t:{var a={};try{a.__proto__={a:!0},l=a.a;break t}catch{}l=!1}t=l?function($,Z){if($.__proto__=Z,$.__proto__!==Z)throw new TypeError($+" is not extensible");return $}:null}var r=t;function i($,Z){if($.prototype=s(Z.prototype),$.prototype.constructor=$,r)r($,Z);else for(var tt in Z)if(tt!="prototype")if(Object.defineProperties){var nt=Object.getOwnPropertyDescriptor(Z,tt);nt&&Object.defineProperty($,tt,nt)}else $[tt]=Z[tt];$.na=Z.prototype}function n(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function h($){if($.l)throw new TypeError("Generator is already running");$.l=!0}function d($,Z){$.j={da:Z,ea:!0},$.g=$.o||$.u}function u($,Z,tt){return $.g=tt,{value:Z}}function p($){this.g=new n,this.h=$}function v($,Z,tt,nt){try{var ut=Z.call($.g.i,tt);if(!(ut instanceof Object))throw new TypeError("Iterator result "+ut+" is not an object");if(!ut.done)return $.g.l=!1,ut;var at=ut.value}catch(ot){return $.g.i=null,d($.g,ot),m($)}return $.g.i=null,nt.call($.g,at),m($)}function m($){for(;$.g.g;)try{var Z=$.h($.g);if(Z)return $.g.l=!1,{value:Z.value,done:!1}}catch(tt){$.g.h=void 0,d($.g,tt)}if($.g.l=!1,$.g.j){if(Z=$.g.j,$.g.j=null,Z.ea)throw Z.da;return{value:Z.return,done:!0}}return{value:void 0,done:!0}}function g($){this.next=function(Z){return h($.g),$.g.i?Z=v($,$.g.i.next,Z,$.g.s):($.g.s(Z),Z=m($)),Z},this.throw=function(Z){return h($.g),$.g.i?Z=v($,$.g.i.throw,Z,$.g.s):(d($.g,Z),Z=m($)),Z},this.return=function(Z){return function(tt,nt){h(tt.g);var ut=tt.g.i;return ut?v(tt,"return"in ut?ut.return:function(at){return{value:at,done:!0}},nt,tt.g.return):(tt.g.return(nt),m(tt))}($,Z)},this[Symbol.iterator]=function(){return this}}function T($){return function(Z){function tt(ut){return Z.next(ut)}function nt(ut){return Z.throw(ut)}return new Promise(function(ut,at){(function ot(dt){dt.done?ut(dt.value):Promise.resolve(dt.value).then(tt,nt).then(ot,at)})(Z.next())})}(new g(new p($)))}n.prototype.s=function($){this.h=$},n.prototype.return=function($){this.j={return:$},this.g=this.u},S("Promise",function($){function Z(ot){this.h=0,this.i=void 0,this.g=[],this.s=!1;var dt=this.j();try{ot(dt.resolve,dt.reject)}catch(Et){dt.reject(Et)}}function tt(){this.g=null}function nt(ot){return ot instanceof Z?ot:new Z(function(dt){dt(ot)})}if($)return $;tt.prototype.h=function(ot){if(this.g==null){this.g=[];var dt=this;this.i(function(){dt.l()})}this.g.push(ot)};var ut=y.setTimeout;tt.prototype.i=function(ot){ut(ot,0)},tt.prototype.l=function(){for(;this.g&&this.g.length;){var ot=this.g;this.g=[];for(var dt=0;dt<ot.length;++dt){var Et=ot[dt];ot[dt]=null;try{Et()}catch(Pt){this.j(Pt)}}}this.g=null},tt.prototype.j=function(ot){this.i(function(){throw ot})},Z.prototype.j=function(){function ot(Pt){return function(Ot){Et||(Et=!0,Pt.call(dt,Ot))}}var dt=this,Et=!1;return{resolve:ot(this.D),reject:ot(this.l)}},Z.prototype.D=function(ot){if(ot===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(ot instanceof Z)this.H(ot);else{t:switch(typeof ot){case"object":var dt=ot!=null;break t;case"function":dt=!0;break t;default:dt=!1}dt?this.A(ot):this.o(ot)}},Z.prototype.A=function(ot){var dt=void 0;try{dt=ot.then}catch(Et){return void this.l(Et)}typeof dt=="function"?this.I(dt,ot):this.o(ot)},Z.prototype.l=function(ot){this.u(2,ot)},Z.prototype.o=function(ot){this.u(1,ot)},Z.prototype.u=function(ot,dt){if(this.h!=0)throw Error("Cannot settle("+ot+", "+dt+"): Promise already settled in state"+this.h);this.h=ot,this.i=dt,this.h===2&&this.G(),this.B()},Z.prototype.G=function(){var ot=this;ut(function(){if(ot.C()){var dt=y.console;dt!==void 0&&dt.error(ot.i)}},1)},Z.prototype.C=function(){if(this.s)return!1;var ot=y.CustomEvent,dt=y.Event,Et=y.dispatchEvent;return Et===void 0||(typeof ot=="function"?ot=new ot("unhandledrejection",{cancelable:!0}):typeof dt=="function"?ot=new dt("unhandledrejection",{cancelable:!0}):(ot=y.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,ot),ot.promise=this,ot.reason=this.i,Et(ot))},Z.prototype.B=function(){if(this.g!=null){for(var ot=0;ot<this.g.length;++ot)at.h(this.g[ot]);this.g=null}};var at=new tt;return Z.prototype.H=function(ot){var dt=this.j();ot.M(dt.resolve,dt.reject)},Z.prototype.I=function(ot,dt){var Et=this.j();try{ot.call(dt,Et.resolve,Et.reject)}catch(Pt){Et.reject(Pt)}},Z.prototype.then=function(ot,dt){function Et(Ht,Qt){return typeof Ht=="function"?function(he){try{Pt(Ht(he))}catch(pe){Ot(pe)}}:Qt}var Pt,Ot,Vt=new Z(function(Ht,Qt){Pt=Ht,Ot=Qt});return this.M(Et(ot,Pt),Et(dt,Ot)),Vt},Z.prototype.catch=function(ot){return this.then(void 0,ot)},Z.prototype.M=function(ot,dt){function Et(){switch(Pt.h){case 1:ot(Pt.i);break;case 2:dt(Pt.i);break;default:throw Error("Unexpected state: "+Pt.h)}}var Pt=this;this.g==null?at.h(Et):this.g.push(Et),this.s=!0},Z.resolve=nt,Z.reject=function(ot){return new Z(function(dt,Et){Et(ot)})},Z.race=function(ot){return new Z(function(dt,Et){for(var Pt=o(ot),Ot=Pt.next();!Ot.done;Ot=Pt.next())nt(Ot.value).M(dt,Et)})},Z.all=function(ot){var dt=o(ot),Et=dt.next();return Et.done?nt([]):new Z(function(Pt,Ot){function Vt(he){return function(pe){Ht[he]=pe,--Qt==0&&Pt(Ht)}}var Ht=[],Qt=0;do Ht.push(void 0),Qt++,nt(Et.value).M(Vt(Ht.length-1),Ot),Et=dt.next();while(!Et.done)})},Z});var w=typeof Object.assign=="function"?Object.assign:function($,Z){for(var tt=1;tt<arguments.length;tt++){var nt=arguments[tt];if(nt)for(var ut in nt)Object.prototype.hasOwnProperty.call(nt,ut)&&($[ut]=nt[ut])}return $};S("Object.assign",function($){return $||w}),S("Object.is",function($){return $||function(Z,tt){return Z===tt?Z!==0||1/Z==1/tt:Z!=Z&&tt!=tt}}),S("Array.prototype.includes",function($){return $||function(Z,tt){var nt=this;nt instanceof String&&(nt=String(nt));var ut=nt.length;for(0>(tt=tt||0)&&(tt=Math.max(tt+ut,0));tt<ut;tt++){var at=nt[tt];if(at===Z||Object.is(at,Z))return!0}return!1}}),S("String.prototype.includes",function($){return $||function(Z,tt){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Z instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Z,tt||0)!==-1}}),S("Array.prototype.keys",function($){return $||function(){return function(Z,tt){Z instanceof String&&(Z+="");var nt=0,ut=!1,at={next:function(){if(!ut&&nt<Z.length){var ot=nt++;return{value:tt(ot,Z[ot]),done:!1}}return ut=!0,{done:!0,value:void 0}}};return at[Symbol.iterator]=function(){return at},at}(this,function(Z){return Z})}});var b=this||self;function E($,Z){$=$.split(".");var tt,nt=b;for(($[0]in nt)||nt.execScript===void 0||nt.execScript("var "+$[0]);$.length&&(tt=$.shift());)$.length||Z===void 0?nt=nt[tt]&&nt[tt]!==Object.prototype[tt]?nt[tt]:nt[tt]={}:nt[tt]=Z}function A(){throw Error("Invalid UTF8")}function R($,Z){return Z=String.fromCharCode.apply(null,Z),$==null?Z:$+Z}var I,P,M=typeof TextDecoder<"u",F=typeof TextEncoder<"u",O={},D=null;function L($){var Z;Z===void 0&&(Z=0),X(),Z=O[Z];for(var tt=Array(Math.floor($.length/3)),nt=Z[64]||"",ut=0,at=0;ut<$.length-2;ut+=3){var ot=$[ut],dt=$[ut+1],Et=$[ut+2],Pt=Z[ot>>2];ot=Z[(3&ot)<<4|dt>>4],dt=Z[(15&dt)<<2|Et>>6],Et=Z[63&Et],tt[at++]=Pt+ot+dt+Et}switch(Pt=0,Et=nt,$.length-ut){case 2:Et=Z[(15&(Pt=$[ut+1]))<<2]||nt;case 1:$=$[ut],tt[at]=Z[$>>2]+Z[(3&$)<<4|Pt>>4]+Et+nt}return tt.join("")}function z($){var Z=$.length,tt=3*Z/4;tt%3?tt=Math.floor(tt):"=.".indexOf($[Z-1])!=-1&&(tt="=.".indexOf($[Z-2])!=-1?tt-2:tt-1);var nt=new Uint8Array(tt),ut=0;return function(at,ot){function dt(Qt){for(;Et<at.length;){var he=at.charAt(Et++),pe=D[he];if(pe!=null)return pe;if(!/^[\s\xa0]*$/.test(he))throw Error("Unknown base64 encoding at char: "+he)}return Qt}X();for(var Et=0;;){var Pt=dt(-1),Ot=dt(0),Vt=dt(64),Ht=dt(64);if(Ht===64&&Pt===-1)break;ot(Pt<<2|Ot>>4),Vt!=64&&(ot(Ot<<4&240|Vt>>2),Ht!=64&&ot(Vt<<6&192|Ht))}}($,function(at){nt[ut++]=at}),ut!==tt?nt.subarray(0,ut):nt}function X(){if(!D){D={};for(var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Z=["+/=","+/","-_=","-_.","-_"],tt=0;5>tt;tt++){var nt=$.concat(Z[tt].split(""));O[tt]=nt;for(var ut=0;ut<nt.length;ut++){var at=nt[ut];D[at]===void 0&&(D[at]=ut)}}}}var H,J=typeof Uint8Array=="function";function G($){return J&&$!=null&&$ instanceof Uint8Array}function k($){if(this.L=$,$!==null&&$.length===0)throw Error("ByteString should be constructed with non-empty values")}var N=typeof Uint8Array.prototype.slice=="function",B=0;function U($,Z){return Error("Invalid wire type: "+$+" (at position "+Z+")")}function W(){return Error("Failed to read varint, encoding is invalid.")}function K($,Z){Z=(Z=Z===void 0?{}:Z).v!==void 0&&Z.v,this.h=null,this.g=this.i=this.j=0,this.v=Z,$&&q(this,$)}function q($,Z){$.h=function(tt,nt){if(tt.constructor===Uint8Array)return tt;if(tt.constructor===ArrayBuffer)return new Uint8Array(tt);if(tt.constructor===Array)return new Uint8Array(tt);if(tt.constructor===String)return z(tt);if(tt.constructor===k)return!nt&&(nt=tt.L)&&nt.constructor===Uint8Array?nt:(nt=(nt=tt.L)==null||G(nt)?nt:typeof nt=="string"?z(nt):null,(tt=tt.L=nt)?new Uint8Array(tt):H||(H=new Uint8Array(0)));if(tt instanceof Uint8Array)return new Uint8Array(tt.buffer,tt.byteOffset,tt.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(Z,$.v),$.j=0,$.i=$.h.length,$.g=$.j}function _($){if($.g>$.i)throw Error("Tried to read past the end of the data "+$.g+" > "+$.i)}function rt($){var Z=$.h,tt=Z[$.g],nt=127&tt;if(128>tt)return $.g+=1,_($),nt;if(nt|=(127&(tt=Z[$.g+1]))<<7,128>tt)return $.g+=2,_($),nt;if(nt|=(127&(tt=Z[$.g+2]))<<14,128>tt)return $.g+=3,_($),nt;if(nt|=(127&(tt=Z[$.g+3]))<<21,128>tt)return $.g+=4,_($),nt;if(tt=Z[$.g+4],$.g+=5,nt|=(15&tt)<<28,128>tt)return _($),nt;if(128<=Z[$.g++]&&128<=Z[$.g++]&&128<=Z[$.g++]&&128<=Z[$.g++]&&128<=Z[$.g++])throw W();return _($),nt}K.prototype.reset=function(){this.g=this.j};var ft=[];function vt(){this.g=[]}function mt($,Z){for(;127<Z;)$.g.push(127&Z|128),Z>>>=7;$.g.push(Z)}function yt($){var Z={},tt=Z.W!==void 0&&Z.W;this.l={v:Z.v!==void 0&&Z.v},this.W=tt,Z=this.l,ft.length?(tt=ft.pop(),Z&&(tt.v=Z.v),$&&q(tt,$),$=tt):$=new K($,Z),this.g=$,this.j=this.g.g,this.h=this.i=-1}function xt($){var Z=$.g;if(Z.g==Z.i)return!1;$.j=$.g.g;var tt=rt($.g)>>>0;if(Z=tt>>>3,!(0<=(tt&=7)&&5>=tt))throw U(tt,$.j);if(1>Z)throw Error("Invalid field number: "+Z+" (at position "+$.j+")");return $.i=Z,$.h=tt,!0}function It($){switch($.h){case 0:if($.h!=0)It($);else t:{for(var Z=($=$.g).g,tt=Z+10;Z<tt;)if(!(128&$.h[Z++])){$.g=Z,_($);break t}throw W()}break;case 1:($=$.g).g+=8,_($);break;case 2:$.h!=2?It($):(Z=rt($.g)>>>0,($=$.g).g+=Z,_($));break;case 5:($=$.g).g+=4,_($);break;case 3:for(Z=$.i;;){if(!xt($))throw Error("Unmatched start-group tag: stream EOF");if($.h==4){if($.i!=Z)throw Error("Unmatched end-group tag");break}It($)}break;default:throw U($.h,$.j)}}vt.prototype.length=function(){return this.g.length},vt.prototype.end=function(){var $=this.g;return this.g=[],$},yt.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var Gt=[];function Zt(){this.i=[],this.h=0,this.g=new vt}function Bt($,Z){Z.length!==0&&($.i.push(Z),$.h+=Z.length)}var At=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function kt($,Z){Object.isFrozen($)||(At?$[At]|=Z:$.N!==void 0?$.N|=Z:Object.defineProperties($,{N:{value:Z,configurable:!0,writable:!0,enumerable:!1}}))}function Ut($){var Z;return(Z=At?$[At]:$.N)==null?0:Z}function ee($){return kt($,1),$}function te($){return!!Array.isArray($)&&!!(2&Ut($))}function fe($){if(!Array.isArray($))throw Error("cannot mark non-array as immutable");kt($,2)}function ae($){return $!==null&&typeof $=="object"&&!Array.isArray($)&&$.constructor===Object}var le=Object.freeze(ee([]));function re($){if(te($.m))throw Error("Cannot mutate an immutable Message")}var we,Se=typeof Symbol<"u"&&Symbol.hasInstance!==void 0;function Ne($){return{value:$,configurable:!1,writable:!1,enumerable:!1}}function ce($,Z,tt){return Z===-1?null:Z>=$.i?$.g?$.g[Z]:void 0:tt!==void 0&&tt&&$.g&&(tt=$.g[Z])!=null?tt:$.m[Z+$.h]}function se($,Z,tt,nt){nt=nt!==void 0&&nt,re($),Z<$.i&&!nt?$.m[Z+$.h]=tt:($.g||($.g=$.m[$.i+$.h]={}))[Z]=tt}function Ae($,Z,tt,nt){tt=tt===void 0||tt;var ut=ce($,Z,nt=nt!==void 0&&nt);return ut==null&&(ut=le),te($.m)?tt&&(fe(ut),Object.freeze(ut)):(ut===le||te(ut))&&se($,Z,ut=ee(ut.slice()),nt),ut}function Le($,Z,tt){return($=($=ce($,Z))==null?$:+$)==null?tt===void 0?0:tt:$}function en($,Z,tt,nt){$.j||($.j={});var ut=te($.m),at=$.j[tt];if(!at){nt=Ae($,tt,!0,nt!==void 0&&nt),at=[],ut=ut||te(nt);for(var ot=0;ot<nt.length;ot++)at[ot]=new Z(nt[ot]),ut&&fe(at[ot].m);ut&&(fe(at),Object.freeze(at)),$.j[tt]=at}return at}function ge($,Z,tt,nt,ut){var at=at!==void 0&&at;return re($),at=en($,tt,Z,at),tt=nt||new tt,$=Ae($,Z),ut!=null?(at.splice(ut,0,tt),$.splice(ut,0,tt.m)):(at.push(tt),$.push(tt.m)),tt}function Xe($,Z){return($=ce($,Z))==null?0:$}function Qn($,Z){return($=ce($,Z))==null?"":$}function An($){var Z=Os;return ue($,Z=Z===void 0?wt:Z)}function _e($,Z){if($!=null){if(Array.isArray($))$=ue($,Z);else if(ae($)){var tt,nt={};for(tt in $)nt[tt]=_e($[tt],Z);$=nt}else $=Z($);return $}}function ue($,Z){for(var tt=$.slice(),nt=0;nt<tt.length;nt++)tt[nt]=_e(tt[nt],Z);return Array.isArray($)&&1&Ut($)&&ee(tt),tt}function Os($){return $&&typeof $=="object"&&$.toJSON?$.toJSON():($=function(Z){switch(typeof Z){case"number":return isFinite(Z)?Z:String(Z);case"object":if(Z&&!Array.isArray(Z)){if(G(Z))return L(Z);if(Z instanceof k){var tt=Z.L;return tt=tt==null||typeof tt=="string"?tt:J&&tt instanceof Uint8Array?L(tt):null,(Z.L=tt)||""}}}return Z}($),Array.isArray($)?An($):$)}function wt($){return G($)?new Uint8Array($):$}function Dt($,Z,tt){$||($=we),we=null;var nt=this.constructor.h;if($||($=nt?[nt]:[]),this.h=(nt?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=$,$=(nt=this.m.length)-1,nt&&ae(nt=this.m[$])?(this.i=$-this.h,this.g=nt):Z!==void 0&&-1<Z?(this.i=Math.max(Z,$+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,tt)for(Z=0;Z<tt.length;Z++)if(($=tt[Z])<this.i)$+=this.h,(nt=this.m[$])?Array.isArray(nt)&&ee(nt):this.m[$]=le;else{var ut=(nt=this.g||(this.g=this.m[this.i+this.h]={}))[$];ut?Array.isArray(ut)&&ee(ut):nt[$]=le}}function _t(){Dt.apply(this,arguments)}if(Dt.prototype.toJSON=function(){return An(this.m)},Dt.prototype.toString=function(){return this.m.toString()},i(_t,Dt),Se){var zt={};Object.defineProperties(_t,(zt[Symbol.hasInstance]=Ne(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),zt))}function Re($,Z,tt){if(tt){var nt,ut={};for(nt in tt){var at=tt[nt],ot=at.ha;ot||(ut.F=at.la||at.fa.P,at.aa?(ut.U=Ds(at.aa),ot=function(dt){return function(Et,Pt,Ot){return dt.F(Et,Pt,Ot,dt.U)}}(ut)):at.ca?(ut.T=Jn(at.X.g,at.ca),ot=function(dt){return function(Et,Pt,Ot){return dt.F(Et,Pt,Ot,dt.T)}}(ut)):ot=ut.F,at.ha=ot),ot(Z,$,at.X),ut={F:ut.F,U:ut.U,T:ut.T}}}(function(dt,Et){if(Et=Et.ba){Bt(dt,dt.g.end());for(var Pt=0;Pt<Et.length;Pt++)Bt(dt,Et[Pt])}})(Z,$)}var xe=Symbol();function ie($,Z,tt){return $[xe]||($[xe]=function(nt,ut){return Z(nt,ut,tt)})}function oe($){var Z=$[xe];if(!Z){var tt=wr($);Z=function(nt,ut){return oi(nt,ut,tt)},$[xe]=Z}return Z}function He($){var Z=function(ut){var at=ut.aa;return at?oe(at):(at=ut.ka)?ie(ut.X.g,at,ut.ca):void 0}($),tt=$.X,nt=$.fa.O;return Z?function(ut,at){return nt(ut,at,tt,Z)}:function(ut,at){return nt(ut,at,tt)}}function Pe($,Z,tt,nt,ut,at){var ot=0;for(($=$()).length&&typeof $[0]!="number"&&(tt(Z,$[0]),ot++);ot<$.length;){tt=$[ot++];for(var dt=ot+1;dt<$.length&&typeof $[dt]!="number";)dt++;var Et=$[ot++];switch(dt-=ot){case 0:nt(Z,tt,Et);break;case 1:nt(Z,tt,Et,$[ot++]);break;case 2:ut(Z,tt,Et,$[ot++],$[ot++]);break;case 3:dt=$[ot++];var Pt=$[ot++],Ot=$[ot++];Array.isArray(Ot)?ut(Z,tt,Et,dt,Pt,Ot):at(Z,tt,Et,dt,Pt,Ot);break;case 4:at(Z,tt,Et,$[ot++],$[ot++],$[ot++],$[ot++]);break;default:throw Error("unexpected number of binary field arguments: "+dt)}}return Z}var nn=Symbol();function Ds($){var Z=$[nn];if(!Z){var tt=ii($);Z=function(nt,ut){return Gs(nt,ut,tt)},$[nn]=Z}return Z}function Jn($,Z){var tt=$[nn];return tt||(tt=function(nt,ut){return Re(nt,ut,Z)},$[nn]=tt),tt}var Ls=Symbol();function Ge($,Z){$.push(Z)}function qn($,Z,tt){$.push(Z,tt.P)}function Bs($,Z,tt,nt,ut){var at=Ds(ut),ot=tt.P;$.push(Z,function(dt,Et,Pt){return ot(dt,Et,Pt,nt,at)})}function Er($,Z,tt,nt,ut,at){var ot=Jn(nt,at),dt=tt.P;$.push(Z,function(Et,Pt,Ot){return dt(Et,Pt,Ot,nt,ot)})}function ii($){var Z=$[Ls];return Z||Pe($,$[Ls]=[],Ge,qn,Bs,Er)}var ri=Symbol();function ds($,Z){$[0]=Z}function ha($,Z,tt,nt){var ut=tt.O;$[Z]=nt?function(at,ot,dt){return ut(at,ot,dt,nt)}:ut}function $s($,Z,tt,nt,ut,at){var ot=tt.O,dt=oe(ut);$[Z]=function(Et,Pt,Ot){return ot(Et,Pt,Ot,nt,dt,at)}}function ai($,Z,tt,nt,ut,at,ot){var dt=tt.O,Et=ie(nt,ut,at);$[Z]=function(Pt,Ot,Vt){return dt(Pt,Ot,Vt,nt,Et,ot)}}function wr($){var Z=$[ri];return Z||Pe($,$[ri]={},ds,ha,$s,ai)}function oi($,Z,tt){for(;xt(Z)&&Z.h!=4;){var nt=Z.i,ut=tt[nt];if(!ut){var at=tt[0];at&&(at=at[nt])&&(ut=tt[nt]=He(at))}if(!(ut&&ut(Z,$,nt)||(ut=Z,nt=$,at=ut.j,It(ut),ut.W))){var ot=ut.g.h;ut=at===(ut=ut.g.g)?H||(H=new Uint8Array(0)):N?ot.slice(at,ut):new Uint8Array(ot.subarray(at,ut)),(at=nt.ba)?at.push(ut):nt.ba=[ut]}}return $}function $i($,Z,tt){if(Gt.length){var nt=Gt.pop();$&&(q(nt.g,$),nt.i=-1,nt.h=-1),$=nt}else $=new yt($);try{return oi(new Z,$,wr(tt))}finally{(Z=$.g).h=null,Z.j=0,Z.i=0,Z.g=0,Z.v=!1,$.i=-1,$.h=-1,100>Gt.length&&Gt.push($)}}function Gs($,Z,tt){for(var nt=tt.length,ut=nt%2==1,at=ut?1:0;at<nt;at+=2)(0,tt[at+1])(Z,$,tt[at]);Re($,Z,ut?tt[0]:void 0)}function Us($,Z){var tt=new Zt;Gs($,tt,ii(Z)),Bt(tt,tt.g.end()),$=new Uint8Array(tt.h);for(var nt=(Z=tt.i).length,ut=0,at=0;at<nt;at++){var ot=Z[at];$.set(ot,ut),ut+=ot.length}return tt.i=[$],$}function bs($,Z){return{O:$,P:Z}}var Rn=bs(function($,Z,tt){if($.h!==5)return!1;var nt=($=$.g).h[$.g],ut=$.h[$.g+1],at=$.h[$.g+2],ot=$.h[$.g+3];return $.g+=4,_($),$=2*((ut=(nt<<0|ut<<8|at<<16|ot<<24)>>>0)>>31)+1,nt=ut>>>23&255,ut&=8388607,se(Z,tt,nt==255?ut?NaN:1/0*$:nt==0?$*Math.pow(2,-149)*ut:$*Math.pow(2,nt-150)*(ut+Math.pow(2,23))),!0},function($,Z,tt){if((Z=ce(Z,tt))!=null){mt($.g,8*tt+5),$=$.g;var nt=Z;(nt=(tt=0>nt?1:0)?-nt:nt)===0?0<1/nt?B=0:B=2147483648:isNaN(nt)?B=2147483647:34028234663852886e22<nt?B=(tt<<31|2139095040)>>>0:11754943508222875e-54>nt?(nt=Math.round(nt/Math.pow(2,-149)),B=(tt<<31|nt)>>>0):(Z=Math.floor(Math.log(nt)/Math.LN2),nt*=Math.pow(2,-Z),16777216<=(nt=Math.round(8388608*nt))&&++Z,B=(tt<<31|Z+127<<23|8388607&nt)>>>0),tt=B,$.g.push(tt>>>0&255),$.g.push(tt>>>8&255),$.g.push(tt>>>16&255),$.g.push(tt>>>24&255)}}),As=bs(function($,Z,tt){if($.h!==0)return!1;for(var nt=$.g,ut=128,at=0,ot=$=0;4>ot&&128<=ut;ot++)ut=nt.h[nt.g++],_(nt),at|=(127&ut)<<7*ot;if(128<=ut&&(ut=nt.h[nt.g++],_(nt),at|=(127&ut)<<28,$|=(127&ut)>>4),128<=ut)for(ot=0;5>ot&&128<=ut;ot++)ut=nt.h[nt.g++],_(nt),$|=(127&ut)<<7*ot+3;if(!(128>ut))throw W();return nt=at>>>0,($=2147483648&(ut=$>>>0))&&(ut=~ut>>>0,(nt=1+~nt>>>0)==0&&(ut=ut+1>>>0)),nt=4294967296*ut+(nt>>>0),se(Z,tt,$?-nt:nt),!0},function($,Z,tt){if((Z=ce(Z,tt))!=null&&Z!=null){mt($.g,8*tt),$=$.g;var nt=Z;for(tt=0>nt,Z=(nt=Math.abs(nt))>>>0,nt=Math.floor((nt-Z)/4294967296),nt>>>=0,tt&&(nt=~nt>>>0,4294967295<(Z=1+(~Z>>>0))&&(Z=0,4294967295<++nt&&(nt=0))),tt=B=Z,Z=nt;0<Z||127<tt;)$.g.push(127&tt|128),tt=(tt>>>7|Z<<25)>>>0,Z>>>=7;$.g.push(tt)}}),Gi=bs(function($,Z,tt){return $.h===0&&(se(Z,tt,rt($.g)),!0)},function($,Z,tt){if((Z=ce(Z,tt))!=null&&Z!=null)if(mt($.g,8*tt),$=$.g,0<=(tt=Z))mt($,tt);else{for(Z=0;9>Z;Z++)$.g.push(127&tt|128),tt>>=7;$.g.push(1)}}),br=bs(function($,Z,tt){if($.h!==2)return!1;var nt,ut=rt($.g)>>>0,at=($=$.g).g;if($.g+=ut,_($),$=$.h,M)(nt=I)||(nt=I=new TextDecoder("utf-8",{fatal:!0})),nt=nt.decode($.subarray(at,at+ut));else{ut=at+ut;for(var ot,dt,Et,Pt=[],Ot=null;at<ut;)128>(ot=$[at++])?Pt.push(ot):224>ot?at>=ut?A():(dt=$[at++],194>ot||(192&dt)!=128?(at--,A()):Pt.push((31&ot)<<6|63&dt)):240>ot?at>=ut-1?A():(192&(dt=$[at++]))!=128||ot===224&&160>dt||ot===237&&160<=dt||(192&(nt=$[at++]))!=128?(at--,A()):Pt.push((15&ot)<<12|(63&dt)<<6|63&nt):244>=ot?at>=ut-2?A():(192&(dt=$[at++]))!=128||dt-144+(ot<<28)>>30||(192&(nt=$[at++]))!=128||(192&(Et=$[at++]))!=128?(at--,A()):(ot=(7&ot)<<18|(63&dt)<<12|(63&nt)<<6|63&Et,ot-=65536,Pt.push(55296+(ot>>10&1023),56320+(1023&ot))):A(),8192<=Pt.length&&(Ot=R(Ot,Pt),Pt.length=0);nt=R(Ot,Pt)}return se(Z,tt,nt),!0},function($,Z,tt){if((Z=ce(Z,tt))!=null){var nt=!1;if(nt=nt!==void 0&&nt,F){if(nt&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(Z))throw Error("Found an unpaired surrogate");Z=(P||(P=new TextEncoder)).encode(Z)}else{for(var ut=0,at=new Uint8Array(3*Z.length),ot=0;ot<Z.length;ot++){var dt=Z.charCodeAt(ot);if(128>dt)at[ut++]=dt;else{if(2048>dt)at[ut++]=dt>>6|192;else{if(55296<=dt&&57343>=dt){if(56319>=dt&&ot<Z.length){var Et=Z.charCodeAt(++ot);if(56320<=Et&&57343>=Et){dt=1024*(dt-55296)+Et-56320+65536,at[ut++]=dt>>18|240,at[ut++]=dt>>12&63|128,at[ut++]=dt>>6&63|128,at[ut++]=63&dt|128;continue}ot--}if(nt)throw Error("Found an unpaired surrogate");dt=65533}at[ut++]=dt>>12|224,at[ut++]=dt>>6&63|128}at[ut++]=63&dt|128}}Z=at.subarray(0,ut)}mt($.g,8*tt+2),mt($.g,Z.length),Bt($,$.g.end()),Bt($,Z)}}),Ui=bs(function($,Z,tt,nt,ut){if($.h!==2)return!1;Z=ge(Z,tt,nt),tt=$.g.i,nt=rt($.g)>>>0;var at=$.g.g+nt,ot=at-tt;if(0>=ot&&($.g.i=at,ut(Z,$),ot=at-$.g.g),ot)throw Error("Message parsing ended unexpectedly. Expected to read "+nt+" bytes, instead read "+(nt-ot)+" bytes, either the data ended unexpectedly or the message misreported its own length");return $.g.g=at,$.g.i=tt,!0},function($,Z,tt,nt,ut){if((Z=en(Z,nt,tt))!=null)for(nt=0;nt<Z.length;nt++){var at=$;mt(at.g,8*tt+2);var ot=at.g.end();Bt(at,ot),ot.push(at.h),at=ot,ut(Z[nt],$),ot=$;var dt=at.pop();for(dt=ot.h+ot.g.length()-dt;127<dt;)at.push(127&dt|128),dt>>>=7,ot.h++;at.push(dt),ot.h++}});function Tn(){_t.apply(this,arguments)}if(i(Tn,_t),Se){var Ar={};Object.defineProperties(Tn,(Ar[Symbol.hasInstance]=Ne(Object[Symbol.hasInstance]),Ar))}function _n($){Tn.call(this,$)}function Vi(){return[1,Gi,2,Rn,3,br,4,br]}function zi($){Tn.call(this,$,-1,Rr)}function fa(){return[1,Ui,_n,Vi]}i(_n,Tn),i(zi,Tn),zi.prototype.addClassification=function($,Z){return ge(this,1,_n,$,Z),this};var Rr=[1];function ps($){Tn.call(this,$)}function Ir(){return[1,Rn,2,Rn,3,Rn,4,Rn,5,Rn]}function Pr($){Tn.call(this,$,-1,da)}function ca(){return[1,Ui,ps,Ir]}i(ps,Tn),i(Pr,Tn);var da=[1];function ui($){Tn.call(this,$)}function Rs(){return[1,Rn,2,Rn,3,Rn,4,Rn,5,Rn,6,As]}i(ui,Tn);var li=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],hi=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],fi=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Vs=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],ci=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],ki=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],di=[].concat(x(li),x(hi),x(fi),x(Vs),x(ci),x(ki));function V($,Z,tt){if(tt=$.createShader(tt===0?$.VERTEX_SHADER:$.FRAGMENT_SHADER),$.shaderSource(tt,Z),$.compileShader(tt),!$.getShaderParameter(tt,$.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+$.getShaderInfoLog(tt));return tt}function j($){return en($,_n,1).map(function(Z){return{index:Xe(Z,1),ga:Le(Z,2),label:ce(Z,3)!=null?Qn(Z,3):void 0,displayName:ce(Z,4)!=null?Qn(Z,4):void 0}})}function Q($){return{x:Le($,1),y:Le($,2),z:Le($,3),visibility:ce($,4)!=null?Le($,4):void 0}}function ht($,Z){this.h=$,this.g=Z,this.l=0}function gt($,Z,tt){return function(nt,ut){var at=nt.g;if(nt.o===void 0){var ot=V(at,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),dt=V(at,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Et=at.createProgram();if(at.attachShader(Et,ot),at.attachShader(Et,dt),at.linkProgram(Et),!at.getProgramParameter(Et,at.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+at.getProgramInfoLog(Et));ot=nt.o=Et,at.useProgram(ot),dt=at.getUniformLocation(ot,"sampler0"),nt.j={K:at.getAttribLocation(ot,"aVertex"),J:at.getAttribLocation(ot,"aTex"),ma:dt},nt.u=at.createBuffer(),at.bindBuffer(at.ARRAY_BUFFER,nt.u),at.enableVertexAttribArray(nt.j.K),at.vertexAttribPointer(nt.j.K,2,at.FLOAT,!1,0,0),at.bufferData(at.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),at.STATIC_DRAW),at.bindBuffer(at.ARRAY_BUFFER,null),nt.s=at.createBuffer(),at.bindBuffer(at.ARRAY_BUFFER,nt.s),at.enableVertexAttribArray(nt.j.J),at.vertexAttribPointer(nt.j.J,2,at.FLOAT,!1,0,0),at.bufferData(at.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),at.STATIC_DRAW),at.bindBuffer(at.ARRAY_BUFFER,null),at.uniform1i(dt,0)}ot=nt.j,at.useProgram(nt.o),at.canvas.width=ut.width,at.canvas.height=ut.height,at.viewport(0,0,ut.width,ut.height),at.activeTexture(at.TEXTURE0),nt.h.bindTexture2d(ut.glName),at.enableVertexAttribArray(ot.K),at.bindBuffer(at.ARRAY_BUFFER,nt.u),at.vertexAttribPointer(ot.K,2,at.FLOAT,!1,0,0),at.enableVertexAttribArray(ot.J),at.bindBuffer(at.ARRAY_BUFFER,nt.s),at.vertexAttribPointer(ot.J,2,at.FLOAT,!1,0,0),at.bindFramebuffer(at.DRAW_FRAMEBUFFER?at.DRAW_FRAMEBUFFER:at.FRAMEBUFFER,null),at.clearColor(0,0,0,0),at.clear(at.COLOR_BUFFER_BIT),at.colorMask(!0,!0,!0,!0),at.drawArrays(at.TRIANGLE_FAN,0,4),at.disableVertexAttribArray(ot.K),at.disableVertexAttribArray(ot.J),at.bindBuffer(at.ARRAY_BUFFER,null),nt.h.bindTexture2d(0)}($,Z),typeof $.g.canvas.transferToImageBitmap=="function"?Promise.resolve($.g.canvas.transferToImageBitmap()):tt?Promise.resolve($.g.canvas):typeof createImageBitmap=="function"?createImageBitmap($.g.canvas):($.i===void 0&&($.i=document.createElement("canvas")),new Promise(function(nt){$.i.height=$.g.canvas.height,$.i.width=$.g.canvas.width,$.i.getContext("2d",{}).drawImage($.g.canvas,0,0,$.g.canvas.width,$.g.canvas.height),nt($.i)}))}function Rt($){this.g=$}var Ct=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function et($,Z){return Z+$}function lt($,Z){window[$]=Z}function Tt($){if(this.g=$,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=$&&$.locateFile||et,typeof window=="object")var Z=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if(typeof location>"u")throw Error("solutions can only be loaded on a web page or in a web worker");Z=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=Z,$.options)for(var tt=(Z=o(Object.keys($.options))).next();!tt.done;tt=Z.next()){tt=tt.value;var nt=$.options[tt].default;nt!==void 0&&(this.j[tt]=typeof nt=="function"?nt():nt)}}function Lt($){var Z,tt,nt,ut,at,ot,dt,Et,Pt,Ot,Vt;return T(function(Ht){switch(Ht.g){case 1:return $.Z?(Z=$.g.files===void 0?[]:typeof $.g.files=="function"?$.g.files($.j):$.g.files,u(Ht,T(function(Qt){switch(Qt.g){case 1:return Qt.o=2,u(Qt,WebAssembly.instantiate(Ct),4);case 4:Qt.g=3,Qt.o=0;break;case 2:return Qt.o=0,Qt.j=null,Qt.return(!1);case 3:return Qt.return(!0)}}),2)):Ht.return();case 2:if(tt=Ht.h,typeof window=="object")return lt("createMediapipeSolutionsWasm",{locateFile:$.locateFile}),lt("createMediapipeSolutionsPackedAssets",{locateFile:$.locateFile}),ot=Z.filter(function(Qt){return Qt.data!==void 0}),dt=Z.filter(function(Qt){return Qt.data===void 0}),Et=Promise.all(ot.map(function(Qt){var he=Kt($,Qt.url);if(Qt.path!==void 0){var pe=Qt.path;he=he.then(function(Be){return $.overrideFile(pe,Be),Promise.resolve(Be)})}return he})),Pt=Promise.all(dt.map(function(Qt){return Qt.simd===void 0||Qt.simd&&tt||!Qt.simd&&!tt?function(he){var pe=document.createElement("script");return pe.setAttribute("src",he),pe.setAttribute("crossorigin","anonymous"),new Promise(function(Be){pe.addEventListener("load",function(){Be()},!1),pe.addEventListener("error",function(){Be()},!1),document.body.appendChild(pe)})}($.locateFile(Qt.url,$.$)):Promise.resolve()})).then(function(){var Qt,he,pe;return T(function(Be){if(Be.g==1)return Qt=window.createMediapipeSolutionsWasm,he=window.createMediapipeSolutionsPackedAssets,pe=$,u(Be,Qt(he),2);pe.h=Be.h,Be.g=0})}),Ot=T(function(Qt){return $.g.graph&&$.g.graph.url?Qt=u(Qt,Kt($,$.g.graph.url),0):(Qt.g=0,Qt=void 0),Qt}),u(Ht,Promise.all([Pt,Et,Ot]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return nt=Z.filter(function(Qt){return Qt.simd===void 0||Qt.simd&&tt||!Qt.simd&&!tt}).map(function(Qt){return $.locateFile(Qt.url,$.$)}),importScripts.apply(null,x(nt)),ut=$,u(Ht,createMediapipeSolutionsWasm(Module),6);case 6:ut.h=Ht.h,$.l=new OffscreenCanvas(1,1),$.h.canvas=$.l,at=$.h.GL.createContext($.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),$.h.GL.makeContextCurrent(at),Ht.g=4;break;case 7:if($.l=document.createElement("canvas"),!(Vt=$.l.getContext("webgl2",{}))&&!(Vt=$.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),Ht.return();$.G=Vt,$.h.canvas=$.l,$.h.createContext($.l,!0,!0,{});case 4:$.i=new $.h.SolutionWasm,$.Z=!1,Ht.g=0}})}function Kt($,Z){var tt,nt;return T(function(ut){return Z in $.H?ut.return($.H[Z]):(tt=$.locateFile(Z,""),nt=fetch(tt).then(function(at){return at.arrayBuffer()}),$.H[Z]=nt,ut.return(nt))})}function Xt($,Z,tt){var nt,ut,at,ot,dt,Et,Pt,Ot,Vt,Ht,Qt,he,pe,Be;return T(function(Ue){switch(Ue.g){case 1:if(!tt)return Ue.return(Z);for(nt={},ut=0,at=o(Object.keys(tt)),ot=at.next();!ot.done;ot=at.next())dt=ot.value,typeof(Et=tt[dt])!="string"&&Et.type==="texture"&&Z[Et.stream]!==void 0&&++ut;1<ut&&($.I=!1),Pt=o(Object.keys(tt)),ot=Pt.next();case 2:if(ot.done){Ue.g=4;break}if(Ot=ot.value,typeof(Vt=tt[Ot])=="string")return pe=nt,Be=Ot,u(Ue,function(Wi,Td,Fr){var so;return T(function(cl){return typeof Fr=="number"||Fr instanceof Uint8Array||Fr instanceof Wi.h.Uint8BlobList?cl.return(Fr):Fr instanceof Wi.h.Texture2dDataOut?((so=Wi.u[Td])||(so=new ht(Wi.h,Wi.G),Wi.u[Td]=so),cl.return(gt(so,Fr,Wi.I))):cl.return(void 0)})}($,Ot,Z[Vt]),14);if(Ht=Z[Vt.stream],Vt.type==="detection_list"){if(Ht){for(var In=Ht.getRectList(),ts=Ht.getLandmarksList(),Bn=Ht.getClassificationsList(),Fe=[],mn=0;mn<In.size();++mn){var pi=$i(In.get(mn),ui,Rs);pi={boundingBox:{xCenter:Le(pi,1),yCenter:Le(pi,2),height:Le(pi,3),width:Le(pi,4),rotation:Le(pi,5,0),rectId:Xe(pi,6)},landmarks:en($i(ts.get(mn),Pr,ca),ps,1).map(Q),V:j($i(Bn.get(mn),zi,fa))},Fe.push(pi)}In=Fe}else In=[];nt[Ot]=In,Ue.g=7;break}if(Vt.type==="proto_list"){if(Ht){for(In=Array(Ht.size()),ts=0;ts<Ht.size();ts++)In[ts]=Ht.get(ts);Ht.delete()}else In=[];nt[Ot]=In,Ue.g=7;break}if(Ht===void 0){Ue.g=3;break}if(Vt.type==="float_list"){nt[Ot]=Ht,Ue.g=7;break}if(Vt.type==="proto"){nt[Ot]=Ht,Ue.g=7;break}if(Vt.type!=="texture")throw Error("Unknown output config type: '"+Vt.type+"'");return(Qt=$.u[Ot])||(Qt=new ht($.h,$.G),$.u[Ot]=Qt),u(Ue,gt(Qt,Ht,$.I),13);case 13:he=Ue.h,nt[Ot]=he;case 7:Vt.transform&&nt[Ot]&&(nt[Ot]=Vt.transform(nt[Ot])),Ue.g=3;break;case 14:pe[Be]=Ue.h;case 3:ot=Pt.next(),Ue.g=2;break;case 4:return Ue.return(nt)}})}function Nt($,Z){for(var tt=Z.name||"$",nt=[].concat(x(Z.wants)),ut=new $.h.StringList,at=o(Z.wants),ot=at.next();!ot.done;ot=at.next())ut.push_back(ot.value);at=$.h.PacketListener.implement({onResults:function(dt){for(var Et={},Pt=0;Pt<Z.wants.length;++Pt)Et[nt[Pt]]=dt.get(Pt);var Ot=$.listeners[tt];Ot&&($.D=Xt($,Et,Z.outs).then(function(Vt){Vt=Ot(Vt);for(var Ht=0;Ht<Z.wants.length;++Ht){var Qt=Et[nt[Ht]];typeof Qt=="object"&&Qt.hasOwnProperty&&Qt.hasOwnProperty("delete")&&Qt.delete()}Vt&&($.D=Vt)}))}}),$.i.attachMultiListener(ut,at),ut.delete()}function Ft($){var Z=this;$=$||{};var tt={url:"face_detection_short.binarypb"},nt={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Tt({locateFile:$.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:tt,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window=="object"&&window.navigator!==void 0&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(ut){var at,ot,dt,Et,Pt;return T(function(Ot){switch(Ot.g){case 1:at=o(ut==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),ot=at.next();case 2:if(ot.done){Ot.g=4;break}return dt=ot.value,Et="third_party/mediapipe/modules/face_detection/"+dt,u(Ot,Kt(Z.g,dt),5);case 5:Pt=Ot.h,Z.g.overrideFile(Et,Pt),ot=at.next(),Ot.g=2;break;case 4:return tt.url=ut==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",nt.graphOptionXref.calculatorName=ut==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",Ot.return(!0)}})}},minDetectionConfidence:nt}})}(c=Tt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},c.reset=function(){var $=this;return T(function(Z){$.i&&($.i.reset(),$.o={},$.u={}),Z.g=0})},c.setOptions=function($,Z){var tt=this;if(Z=Z||this.g.options){for(var nt=[],ut=[],at={},ot=o(Object.keys($)),dt=ot.next();!dt.done;at={R:at.R,S:at.S},dt=ot.next()){var Et=dt.value;Et in this.j&&this.j[Et]===$[Et]||(this.j[Et]=$[Et],(dt=Z[Et])!==void 0&&(dt.onChange&&(at.R=dt.onChange,at.S=$[Et],nt.push(function(Pt){return function(){return T(function(Ot){if(Ot.g==1)return u(Ot,Pt.R(Pt.S),2);Ot.h===!0&&(tt.s=!0),Ot.g=0})}}(at))),dt.graphOptionXref&&(Et={valueNumber:dt.type===1?$[Et]:0,valueBoolean:dt.type===0&&$[Et],valueString:dt.type===2?$[Et]:""},dt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),dt.graphOptionXref),Et),ut.push(dt))))}nt.length===0&&ut.length===0||(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(ut),this.A=(this.A===void 0?[]:this.A).concat(nt))}},c.initialize=function(){var $=this;return T(function(Z){return Z.g==1?u(Z,Lt($),2):Z.g!=3?u(Z,function(tt){var nt,ut,at,ot,dt,Et,Pt,Ot;return T(function(Vt){if(Vt.g==1)return tt.g.graph&&tt.g.graph.url&&tt.Y===tt.g.graph.url?Vt.return():(tt.s=!0,tt.g.graph&&tt.g.graph.url?(tt.Y=tt.g.graph.url,u(Vt,Kt(tt,tt.g.graph.url),3)):void(Vt.g=2));for(Vt.g!=2&&(nt=Vt.h,tt.i.loadGraph(nt)),ut=o(Object.keys(tt.C)),at=ut.next();!at.done;at=ut.next())ot=at.value,tt.i.overrideFile(ot,tt.C[ot]);if(tt.C={},tt.g.listeners)for(dt=o(tt.g.listeners),Et=dt.next();!Et.done;Et=dt.next())Pt=Et.value,Nt(tt,Pt);Ot=tt.j,tt.j={},tt.setOptions(Ot),Vt.g=0})}($),3):u(Z,function(tt){var nt,ut,at,ot,dt,Et;return T(function(Pt){switch(Pt.g){case 1:if(!tt.s)return Pt.return();if(!tt.A){Pt.g=2;break}nt=o(tt.A),ut=nt.next();case 3:if(ut.done){Pt.g=5;break}return u(Pt,(0,ut.value)(),4);case 4:ut=nt.next(),Pt.g=3;break;case 5:tt.A=void 0;case 2:if(tt.B){for(at=new tt.h.GraphOptionChangeRequestList,ot=o(tt.B),dt=ot.next();!dt.done;dt=ot.next())Et=dt.value,at.push_back(Et);tt.i.changeOptions(at),at.delete(),tt.B=void 0}tt.s=!1,Pt.g=0}})}($),0)})},c.overrideFile=function($,Z){this.i?this.i.overrideFile($,Z):this.C[$]=Z},c.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},c.send=function($,Z){var tt,nt,ut,at,ot,dt,Et,Pt,Ot,Vt=this;return T(function(Ht){switch(Ht.g){case 1:return Vt.g.inputs?(tt=1e3*(Z??performance.now()),u(Ht,Vt.D,2)):Ht.return();case 2:return u(Ht,Vt.initialize(),3);case 3:for(nt=new Vt.h.PacketDataList,ut=o(Object.keys($)),at=ut.next();!at.done;at=ut.next())if(ot=at.value,dt=Vt.g.inputs[ot]){t:{var Qt=$[ot];switch(dt.type){case"video":var he=Vt.o[dt.stream];if(he||(he=new ht(Vt.h,Vt.G),Vt.o[dt.stream]=he),he.l===0&&(he.l=he.h.createTexture()),typeof HTMLVideoElement<"u"&&Qt instanceof HTMLVideoElement)var pe=Qt.videoWidth,Be=Qt.videoHeight;else typeof HTMLImageElement<"u"&&Qt instanceof HTMLImageElement?(pe=Qt.naturalWidth,Be=Qt.naturalHeight):(pe=Qt.width,Be=Qt.height);Be={glName:he.l,width:pe,height:Be},(pe=he.g).canvas.width=Be.width,pe.canvas.height=Be.height,pe.activeTexture(pe.TEXTURE0),he.h.bindTexture2d(he.l),pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,pe.RGBA,pe.UNSIGNED_BYTE,Qt),he.h.bindTexture2d(0),he=Be;break t;case"detections":for((he=Vt.o[dt.stream])||(he=new Rt(Vt.h),Vt.o[dt.stream]=he),he.data||(he.data=new he.g.DetectionListData),he.data.reset(Qt.length),Be=0;Be<Qt.length;++Be){pe=Qt[Be];var Ue=he.data,In=Ue.setBoundingBox,ts=Be,Bn=pe.boundingBox,Fe=new ui;if(se(Fe,1,Bn.xCenter),se(Fe,2,Bn.yCenter),se(Fe,3,Bn.height),se(Fe,4,Bn.width),se(Fe,5,Bn.rotation),se(Fe,6,Bn.rectId),Bn=Us(Fe,Rs),In.call(Ue,ts,Bn),pe.landmarks)for(Ue=0;Ue<pe.landmarks.length;++Ue){var mn=!!(Fe=pe.landmarks[Ue]).visibility;ts=(In=he.data).addNormalizedLandmark,Bn=Be,Fe=Object.assign(Object.assign({},Fe),{visibility:mn?Fe.visibility:0}),se(mn=new ps,1,Fe.x),se(mn,2,Fe.y),se(mn,3,Fe.z),Fe.visibility&&se(mn,4,Fe.visibility),Fe=Us(mn,Ir),ts.call(In,Bn,Fe)}if(pe.V)for(Ue=0;Ue<pe.V.length;++Ue)ts=(In=he.data).addClassification,Bn=Be,Fe=pe.V[Ue],se(mn=new _n,2,Fe.ga),Fe.index&&se(mn,1,Fe.index),Fe.label&&se(mn,3,Fe.label),Fe.displayName&&se(mn,4,Fe.displayName),Fe=Us(mn,Vi),ts.call(In,Bn,Fe)}he=he.data;break t;default:he={}}}switch(Et=he,Pt=dt.stream,dt.type){case"video":nt.pushTexture2d(Object.assign(Object.assign({},Et),{stream:Pt,timestamp:tt}));break;case"detections":(Ot=Et).stream=Pt,Ot.timestamp=tt,nt.pushDetectionList(Ot);break;default:throw Error("Unknown input config type: '"+dt.type+"'")}}return Vt.i.send(nt),u(Ht,Vt.D,4);case 4:nt.delete(),Ht.g=0}})},c.onResults=function($,Z){this.listeners[Z||"$"]=$},E("Solution",Tt),E("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(c=Ft.prototype).close=function(){return this.g.close(),Promise.resolve()},c.onResults=function($){this.g.onResults($)},c.initialize=function(){var $=this;return T(function(Z){return u(Z,$.g.initialize(),0)})},c.reset=function(){this.g.reset()},c.send=function($){var Z=this;return T(function(tt){return u(tt,Z.g.send($),0)})},c.setOptions=function($){this.g.setOptions($)},E("FaceDetection",Ft),E("FACEDETECTION_LIPS",li),E("FACEDETECTION_LEFT_EYE",hi),E("FACEDETECTION_LEFT_EYEBROW",fi),E("FACEDETECTION_RIGHT_EYE",Vs),E("FACEDETECTION_RIGHT_EYEBROW",ci),E("FACEDETECTION_FACE_OVAL",ki),E("FACEDETECTION_CONTOURS",di),E("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),E("VERSION","0.4.1646425229")}).call(Rl);var Ii=function(){return Ii=Object.assign||function(c){for(var e,f=1,y=arguments.length;f<y;f++)for(var S in e=arguments[f])Object.prototype.hasOwnProperty.call(e,S)&&(c[S]=e[S]);return c},Ii.apply(this,arguments)};function qs(c,e,f,y){return new(f||(f=Promise))(function(S,C){function o(s){try{t(y.next(s))}catch(l){C(l)}}function x(s){try{t(y.throw(s))}catch(l){C(l)}}function t(s){var l;s.done?S(s.value):(l=s.value,l instanceof f?l:new f(function(a){a(l)})).then(o,x)}t((y=y.apply(c,e||[])).next())})}function _s(c,e){var f,y,S,C,o={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return C={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function x(t){return function(s){return function(l){if(f)throw new TypeError("Generator is already executing.");for(;o;)try{if(f=1,y&&(S=2&l[0]?y.return:l[0]?y.throw||((S=y.return)&&S.call(y),0):y.next)&&!(S=S.call(y,l[1])).done)return S;switch(y=0,S&&(l=[2&l[0],S.value]),l[0]){case 0:case 1:S=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,y=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((S=(S=o.trys).length>0&&S[S.length-1])||l[0]!==6&&l[0]!==2)){o=0;continue}if(l[0]===3&&(!S||l[1]>S[0]&&l[1]<S[3])){o.label=l[1];break}if(l[0]===6&&o.label<S[1]){o.label=S[1],S=l;break}if(S&&o.label<S[2]){o.label=S[2],o.ops.push(l);break}S[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(c,o)}catch(a){l=[6,a],y=0}finally{f=S=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([t,s])}}}var x2=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],Il={modelType:"short",runtime:"mediapipe",maxFaces:1},Gz=function(){function c(e){var f=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new $z.FaceDetection({locateFile:function(y,S){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+y:S+"/"+y}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults(function(y){if(f.height=y.image.height,f.width=y.image.width,f.faces=[],y.detections!==null)for(var S=0,C=y.detections;S<C.length;S++){var o=C[S];f.faces.push(f.normalizedToAbsolute(o.landmarks,{xMin:t=(x=o.boundingBox).xCenter-x.width/2,xMax:t+x.width,yMin:s=x.yCenter-x.height/2,yMax:s+x.height,width:x.width,height:x.height}))}var x,t,s})}return c.prototype.normalizedToAbsolute=function(e,f){var y=this;return{keypoints:e.map(function(S,C){return{x:S.x*y.width,y:S.y*y.height,name:x2[C]}}),box:{xMin:f.xMin*this.width,yMin:f.yMin*this.height,xMax:f.xMax*this.width,yMax:f.yMax*this.height,width:f.width*this.width,height:f.height*this.height}}},c.prototype.estimateFaces=function(e,f){return qs(this,void 0,void 0,function(){var y,S;return _s(this,function(C){switch(C.label){case 0:return f&&f.flipHorizontal&&f.flipHorizontal!==this.selfieMode&&(this.selfieMode=f.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Je?(S=ImageData.bind,[4,tg(e)]):[3,2];case 1:return y=new(S.apply(ImageData,[void 0,C.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:y=e,C.label=3;case 3:return e=y,[4,this.faceDetectorSolution.send({image:e})];case 4:return C.sent(),[2,this.faces]}})})},c.prototype.dispose=function(){this.faceDetectorSolution.close()},c.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},c.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},c}();function Uz(c){return qs(this,void 0,void 0,function(){var e,f;return _s(this,function(y){switch(y.label){case 0:return e=function(S){if(S==null)return Ii({},Il);var C=Ii({},S);return C.runtime="mediapipe",C.modelType==null&&(C.modelType=Il.modelType),C.maxFaces==null&&(C.maxFaces=Il.maxFaces),C}(c),[4,(f=new Gz(e)).initialize()];case 1:return y.sent(),[2,f]}})})}function y2(c){return c instanceof Je?{height:c.shape[0],width:c.shape[1]}:{height:c.height,width:c.width}}function T2(c){return c instanceof Je?c:eg(c)}function Pl(c,e){it(c.width!==0,function(){return e+" width cannot be 0."}),it(c.height!==0,function(){return e+" height cannot be 0."})}function Vz(c,e,f){var y=e.outputTensorSize,S=e.keepAspectRatio,C=e.borderMode,o=e.outputTensorFloatRange,x=y2(c),t=function(r,i){return i?{xCenter:i.xCenter*r.width,yCenter:i.yCenter*r.height,width:i.width*r.width,height:i.height*r.height,rotation:i.rotation}:{xCenter:.5*r.width,yCenter:.5*r.height,width:r.width,height:r.height,rotation:0}}(x,f),s=function(r,i,n){if(n===void 0&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var h=i.height,d=i.width;Pl(i,"targetSize"),Pl(r,"roi");var u,p,v=h/d,m=r.height/r.width,g=0,T=0;return v>m?(u=r.width,p=r.width*v,T=(1-m/v)/2):(u=r.height/v,p=r.height,g=(1-v/m)/2),r.width=u,r.height=p,{top:T,left:g,right:g,bottom:T}}(t,y,S),l=function(r,i,n,h){var d=r.width,u=r.height,p=h?-1:1,v=Math.cos(r.rotation),m=Math.sin(r.rotation),g=r.xCenter,T=r.yCenter,w=1/i,b=1/n,E=new Array(16);return E[0]=d*v*p*w,E[1]=-u*m*w,E[2]=0,E[3]=(-.5*d*v*p+.5*u*m+g)*w,E[4]=d*m*p*b,E[5]=u*v*b,E[6]=0,E[7]=(-.5*u*v-.5*d*m*p+T)*b,E[8]=0,E[9]=0,E[10]=d*w,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,function(A){if(A.length!==16)throw new Error("Array length must be 16 but got "+A.length);return[[A[0],A[1],A[2],A[3]],[A[4],A[5],A[6],A[7]],[A[8],A[9],A[10],A[11]],[A[12],A[13],A[14],A[15]]]}(E)}(t,x.width,x.height,!1),a=de(function(){var r=T2(c),i=Ei(function(d,u,p){return Pl(p,"inputResolution"),[1/p.width*d[0][0]*u.width,1/p.height*d[0][1]*u.width,d[0][3]*u.width,1/p.width*d[1][0]*u.height,1/p.height*d[1][1]*u.height,d[1][3]*u.height,0,0]}(l,x,y),[1,8]),n=C==="zero"?"constant":"nearest",h=ea.transform(is(We(r,"float32")),i,"bilinear",n,0,[y.height,y.width]);return o!=null?function(d,u){var p=function(v,m,g,T){var w=(T-g)/255;return{scale:w,offset:g-0*w}}(0,0,u[0],u[1]);return de(function(){return ne(Wt(d,p.scale),p.offset)})}(h,o):h});return{imageTensor:a,padding:s,transformationMatrix:l}}function Lp(c){c.reduceBoxesInLowestLayer==null&&(c.reduceBoxesInLowestLayer=!1),c.interpolatedScaleAspectRatio==null&&(c.interpolatedScaleAspectRatio=1),c.fixedAnchorSize==null&&(c.fixedAnchorSize=!1);for(var e=[],f=0;f<c.numLayers;){for(var y=[],S=[],C=[],o=[],x=f;x<c.strides.length&&c.strides[x]===c.strides[f];){var t=Bp(c.minScale,c.maxScale,x,c.strides.length);if(x===0&&c.reduceBoxesInLowestLayer)C.push(1),C.push(2),C.push(.5),o.push(.1),o.push(t),o.push(t);else{for(var s=0;s<c.aspectRatios.length;++s)C.push(c.aspectRatios[s]),o.push(t);if(c.interpolatedScaleAspectRatio>0){var l=x===c.strides.length-1?1:Bp(c.minScale,c.maxScale,x+1,c.strides.length);o.push(Math.sqrt(t*l)),C.push(c.interpolatedScaleAspectRatio)}}x++}for(var a=0;a<C.length;++a){var r=Math.sqrt(C[a]);y.push(o[a]/r),S.push(o[a]*r)}var i=0,n=0;if(c.featureMapHeight.length>0)i=c.featureMapHeight[f],n=c.featureMapWidth[f];else{var h=c.strides[f];i=Math.ceil(c.inputSizeHeight/h),n=Math.ceil(c.inputSizeWidth/h)}for(var d=0;d<i;++d)for(var u=0;u<n;++u)for(var p=0;p<y.length;++p){var v={xCenter:(u+c.anchorOffsetX)/n,yCenter:(d+c.anchorOffsetY)/i,width:0,height:0};c.fixedAnchorSize?(v.width=1,v.height=1):(v.width=S[p],v.height=y[p]),e.push(v)}f=x}return e}function Bp(c,e,f,y){return y===1?.5*(c+e):c+(e-c)*f/(y-1)}function $p(c,e){var f=e[0],y=e[1];return[f*c[0]+y*c[1]+c[3],f*c[4]+y*c[5]+c[7]]}function zz(c,e,f,y){return qs(this,void 0,void 0,function(){var S,C,o,x,t;return _s(this,function(s){switch(s.label){case 0:return c.sort(function(l,a){return Math.max.apply(Math,a.score)-Math.max.apply(Math,l.score)}),S=Ei(c.map(function(l){return[l.locationData.relativeBoundingBox.yMin,l.locationData.relativeBoundingBox.xMin,l.locationData.relativeBoundingBox.yMax,l.locationData.relativeBoundingBox.xMax]})),C=gn(c.map(function(l){return l.score[0]})),[4,ea.nonMaxSuppressionAsync(S,C,e,f)];case 1:return[4,(o=s.sent()).array()];case 2:return x=s.sent(),t=c.filter(function(l,a){return x.indexOf(a)>-1}),Ke([S,C,o]),[2,t]}})})}function kz(c,e,f){return qs(this,void 0,void 0,function(){var y,S,C,o,x;return _s(this,function(t){switch(t.label){case 0:return y=c[0],S=c[1],C=function(s,l,a){return de(function(){var r,i,n,h;a.reverseOutputOrder?(i=an(ve(s,[0,a.boxCoordOffset+0],[-1,1])),r=an(ve(s,[0,a.boxCoordOffset+1],[-1,1])),h=an(ve(s,[0,a.boxCoordOffset+2],[-1,1])),n=an(ve(s,[0,a.boxCoordOffset+3],[-1,1]))):(r=an(ve(s,[0,a.boxCoordOffset+0],[-1,1])),i=an(ve(s,[0,a.boxCoordOffset+1],[-1,1])),n=an(ve(s,[0,a.boxCoordOffset+2],[-1,1])),h=an(ve(s,[0,a.boxCoordOffset+3],[-1,1]))),i=ne(Wt(ye(i,a.xScale),l.w),l.x),r=ne(Wt(ye(r,a.yScale),l.h),l.y),a.applyExponentialOnBoxSize?(n=Wt(Zs(ye(n,a.hScale)),l.h),h=Wt(Zs(ye(h,a.wScale)),l.w)):(n=Wt(ye(n,a.hScale),l.h),h=Wt(ye(h,a.wScale),l.h));var d=me(r,ye(n,2)),u=me(i,ye(h,2)),p=ne(r,ye(n,2)),v=ne(i,ye(h,2)),m=fn([Mt(d,[a.numBoxes,1]),Mt(u,[a.numBoxes,1]),Mt(p,[a.numBoxes,1]),Mt(v,[a.numBoxes,1])],1);if(a.numKeypoints)for(var g=0;g<a.numKeypoints;++g){var T=a.keypointCoordOffset+g*a.numValuesPerKeypoint,w=void 0,b=void 0;a.reverseOutputOrder?(w=an(ve(s,[0,T],[-1,1])),b=an(ve(s,[0,T+1],[-1,1]))):(b=an(ve(s,[0,T],[-1,1])),w=an(ve(s,[0,T+1],[-1,1])));var E=ne(Wt(ye(w,a.xScale),l.w),l.x),A=ne(Wt(ye(b,a.yScale),l.h),l.y);m=fn([m,Mt(E,[a.numBoxes,1]),Mt(A,[a.numBoxes,1])],1)}return m})}(S,e,f),o=de(function(){var s=y;return f.sigmoidScore?(f.scoreClippingThresh!=null&&(s=um(y,-f.scoreClippingThresh,f.scoreClippingThresh)),s=nr(s)):s}),[4,Wz(C,o,f)];case 1:return x=t.sent(),Ke([C,o]),[2,x]}})})}function Wz(c,e,f){return qs(this,void 0,void 0,function(){var y,S,C,o,x,t,s,l,a,r,i,n;return _s(this,function(h){switch(h.label){case 0:return y=[],[4,c.data()];case 1:return S=h.sent(),[4,e.data()];case 2:for(C=h.sent(),o=0;o<f.numBoxes;++o)if(!(f.minScoreThresh!=null&&C[o]<f.minScoreThresh||(x=o*f.numCoords,t=Xz(S[x+0],S[x+1],S[x+2],S[x+3],C[o],f.flipVertically,o),(s=t.locationData.relativeBoundingBox).width<0||s.height<0))){if(f.numKeypoints>0)for((l=t.locationData).relativeKeypoints=[],a=f.numKeypoints*f.numValuesPerKeypoint,r=0;r<a;r+=f.numValuesPerKeypoint)i=x+f.keypointCoordOffset+r,n={x:S[i+0],y:f.flipVertically?1-S[i+1]:S[i+1]},l.relativeKeypoints.push(n);y.push(t)}return[2,y]}})})}function Xz(c,e,f,y,S,C,o){return{score:[S],ind:o,locationData:{relativeBoundingBox:{xMin:e,yMin:C?1-f:c,xMax:y,yMax:C?1-c:f,width:y-e,height:f-c}}}}var zo,Hz={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},Yz={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},Fl={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},Kz={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},jz={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},Zz={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},Qz={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},Jz=function(){function c(e,f,y){this.detectorModel=f,this.maxFaces=y,e==="full"?(this.imageToTensorConfig=Qz,this.tensorsToDetectionConfig=jz,this.anchors=Lp(Yz)):(this.imageToTensorConfig=Zz,this.tensorsToDetectionConfig=Kz,this.anchors=Lp(Hz));var S=gn(this.anchors.map(function(t){return t.width})),C=gn(this.anchors.map(function(t){return t.height})),o=gn(this.anchors.map(function(t){return t.xCenter})),x=gn(this.anchors.map(function(t){return t.yCenter}));this.anchorTensor={x:o,y:x,w:S,h:C}}return c.prototype.dispose=function(){this.detectorModel.dispose(),Ke([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},c.prototype.reset=function(){},c.prototype.detectFaces=function(e,f){return f===void 0&&(f=!1),qs(this,void 0,void 0,function(){var y,S,C,o,x,t,s,l,a,r,i;return _s(this,function(n){switch(n.label){case 0:return e==null?(this.reset(),[2,[]]):(y=de(function(){var h=We(T2(e),"float32");return f&&(h=an(ea.flipLeftRight(is(h,0)),[0])),h}),S=Vz(y,this.imageToTensorConfig),C=S.imageTensor,o=S.transformationMatrix,x=this.detectorModel.execute(C,"Identity:0"),t=function(h){return de(function(){var d=function(v){return de(function(){return[ve(v,[0,0,0],[1,-1,1]),ve(v,[0,0,1],[1,-1,-1])]})}(h),u=d[0],p=d[1];return{boxes:an(p),logits:an(u)}})}(x),s=t.boxes,[4,kz([l=t.logits,s],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return(a=n.sent()).length===0?(Ke([y,C,x,l,s]),[2,a]):[4,zz(a,this.maxFaces,.3)];case 2:return r=n.sent(),i=function(h,d){h===void 0&&(h=[]);var u,p=(u=d,[].concat.apply([],u));return h.forEach(function(v){var m=v.locationData;m.relativeKeypoints.forEach(function(A){var R=$p(p,[A.x,A.y]),I=R[0],P=R[1];A.x=I,A.y=P});var g=m.relativeBoundingBox,T=Number.MAX_VALUE,w=Number.MAX_VALUE,b=Number.MIN_VALUE,E=Number.MIN_VALUE;[[g.xMin,g.yMin],[g.xMin+g.width,g.yMin],[g.xMin+g.width,g.yMin+g.height],[g.xMin,g.yMin+g.height]].forEach(function(A){var R=$p(p,A),I=R[0],P=R[1];T=Math.min(T,I),b=Math.max(b,I),w=Math.min(w,P),E=Math.max(E,P)}),m.relativeBoundingBox={xMin:T,xMax:b,yMin:w,yMax:E,width:b-T,height:E-w}}),h}(r,o),Ke([y,C,x,l,s]),[2,i]}})})},c.prototype.estimateFaces=function(e,f){return qs(this,void 0,void 0,function(){var y,S;return _s(this,function(C){return y=y2(e),S=!!f&&f.flipHorizontal,[2,this.detectFaces(e,S).then(function(o){return o.map(function(x){for(var t=x.locationData.relativeKeypoints.map(function(n,h){return Ii(Ii({},n),{x:n.x*y.width,y:n.y*y.height,name:x2[h]})}),s=x.locationData.relativeBoundingBox,l=0,a=["width","xMax","xMin"];l<a.length;l++)s[a[l]]*=y.width;for(var r=0,i=["height","yMax","yMin"];r<i.length;r++)s[i[r]]*=y.height;return{keypoints:t,box:s}})})]})})},c}();function qz(c){return qs(this,void 0,void 0,function(){var e,f,y;return _s(this,function(S){switch(S.label){case 0:return e=function(C){if(C==null)return Ii({},Fl);var o=Ii({},C);return o.modelType==null&&(o.modelType=Fl.modelType),o.maxFaces==null&&(o.maxFaces=Fl.maxFaces),o.detectorModelUrl==null&&(o.modelType==="full"?o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),o}(c),f=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,m2(e.detectorModelUrl,{fromTFHub:f})];case 1:return y=S.sent(),[2,new Jz(e.modelType,y,e.maxFaces)]}})})}function _z(c,e){return qs(this,void 0,void 0,function(){var f,y;return _s(this,function(S){if(c===zo.MediaPipeFaceDetector){if(y=void 0,(f=e)!=null){if(f.runtime==="tfjs")return[2,qz(f)];if(f.runtime==="mediapipe")return[2,Uz(f)];y=f.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+y)}throw new Error(c+" is not a supported model name.")})})}function Ml(c){return c.width*c.height}function Gp(c){var e=c.xCenter-c.width/2,f=e+c.width,y=c.yCenter-c.height/2;return{xMin:e,xMax:f,yMin:y,yMax:y+c.height,width:c.width,height:c.height}}function tk(c,e){var f=Gp(c),y=Gp(e);if(!function(o,x){return!(o.xMax<x.xMin||x.xMax<o.xMin||o.yMax<x.yMin||x.yMax<o.yMin)}(f,y))return 0;var S=Ml(function(o,x){var t=Math.max(o.xMin,x.xMin),s=Math.min(o.xMax,x.xMax),l=Math.max(o.yMin,x.yMin),a=Math.min(o.yMax,x.yMax);return{xMin:t,xMax:s,yMin:l,yMax:a,width:Math.max(s-t,0),height:Math.max(a-l,0)}}(f,y)),C=Ml(f)+Ml(y)-S;return C>0?S/C:0}function ek(c,e,f,y){var S=c.width,C=c.height,o=y?-1:1,x=Math.cos(c.rotation),t=Math.sin(c.rotation),s=c.xCenter,l=c.yCenter,a=1/e,r=1/f,i=new Array(16);return i[0]=S*x*o*a,i[1]=-C*t*a,i[2]=0,i[3]=(-.5*S*x*o+.5*C*t+s)*a,i[4]=S*t*o*r,i[5]=C*x*r,i[6]=0,i[7]=(-.5*C*x-.5*S*t*o+l)*r,i[8]=0,i[9]=0,i[10]=S*a,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,function(n){if(n.length!==16)throw new Error("Array length must be 16 but got "+n.length);return[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]],[n[8],n[9],n[10],n[11]],[n[12],n[13],n[14],n[15]]]}(i)}function S2(c){return c instanceof Je?{height:c.shape[0],width:c.shape[1]}:{height:c.height,width:c.width}}function C2(c){return c-2*Math.PI*Math.floor((c+Math.PI)/(2*Math.PI))}function E2(c){return c instanceof Je?c:eg(c)}function Nl(c,e){it(c.width!==0,function(){return e+" width cannot be 0."}),it(c.height!==0,function(){return e+" height cannot be 0."})}function nk(c,e){var f=function(y,S,C,o){var x=S-y,t=o-C;if(x===0)throw new Error("Original min and max are both "+y+", range cannot be 0.");var s=t/x;return{scale:s,offset:C-y*s}}(0,255,e[0],e[1]);return de(function(){return ne(Wt(c,f.scale),f.offset)})}function sk(c,e,f){var y=e.outputTensorSize,S=e.keepAspectRatio,C=e.borderMode,o=e.outputTensorFloatRange,x=S2(c),t=function(r,i){return i?{xCenter:i.xCenter*r.width,yCenter:i.yCenter*r.height,width:i.width*r.width,height:i.height*r.height,rotation:i.rotation}:{xCenter:.5*r.width,yCenter:.5*r.height,width:r.width,height:r.height,rotation:0}}(x,f),s=function(r,i,n){if(n===void 0&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var h=i.height,d=i.width;Nl(i,"targetSize"),Nl(r,"roi");var u,p,v=h/d,m=r.height/r.width,g=0,T=0;return v>m?(u=r.width,p=r.width*v,T=(1-m/v)/2):(u=r.height/v,p=r.height,g=(1-v/m)/2),r.width=u,r.height=p,{top:T,left:g,right:g,bottom:T}}(t,y,S),l=ek(t,x.width,x.height,!1),a=de(function(){var r=E2(c),i=Ei(function(d,u,p){return Nl(p,"inputResolution"),[1/p.width*d[0][0]*u.width,1/p.height*d[0][1]*u.width,d[0][3]*u.width,1/p.width*d[1][0]*u.height,1/p.height*d[1][1]*u.height,d[1][3]*u.height,0,0]}(l,x,y),[1,8]),n=C==="zero"?"constant":"nearest",h=ea.transform(is(We(r,"float32")),i,"bilinear",n,0,[y.height,y.width]);return o!=null?nk(h,o):h});return{imageTensor:a,padding:s,transformationMatrix:l}}function Up(c){return{xCenter:c.xMin+c.width/2,yCenter:c.yMin+c.height/2,width:c.width,height:c.height}}function Vp(c){var e=c.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var f=Number.MAX_VALUE,y=Number.MAX_VALUE,S=Number.MIN_VALUE,C=Number.MIN_VALUE;return e.forEach(function(o){f=Math.min(f,o.x),S=Math.max(S,o.x),y=Math.min(y,o.y),C=Math.max(C,o.y)}),{xCenter:(f+S)/2,yCenter:(y+C)/2,width:S-f,height:C-y}}function zp(c,e,f,y,S){var C=f==="rect"?function(o,x,t){var s,l=o.locationData;if(x==="boundingbox")s=Up(l.boundingBox);else{s=Vp(l);var a=t.width,r=t.height;s.xCenter=Math.round(s.xCenter*a),s.yCenter=Math.round(s.yCenter*r),s.width=Math.round(s.width*a),s.height=Math.round(s.height*r)}return s}(c,e,y):function(o,x){var t=o.locationData;return x==="boundingbox"?Up(t.relativeBoundingBox):Vp(t)}(c,e);return S&&(C.rotation=function(o,x,t){var s,l=o.locationData,a=t.rotationVectorStartKeypointIndex,r=t.rotationVectorEndKeypointIndex;s=t.rotationVectorTargetAngle?t.rotationVectorTargetAngle:Math.PI*t.rotationVectorTargetAngleDegree/180;var i=l.relativeKeypoints[a].x*x.width,n=l.relativeKeypoints[a].y*x.height,h=l.relativeKeypoints[r].x*x.width,d=l.relativeKeypoints[r].y*x.height;return C2(s-Math.atan2(-(d-n),h-i))}(c,y,S)),C}function ik(c,e,f){for(var y=0;y<e.length;++y){var S=e[y],C=f[c[y]];C.x=S.x,C.y=S.y}}function rk(c,e,f,y){if(typeof e=="string"){if(e==="copy")for(var S=0;S<f.length;++S)y[c[S]].z=f[S].z}else{var C=function(o,x){for(var t=0,s=0;s<x.length;++s)t+=o[x[s]].z;return t/x.length}(y,e);for(S=0;S<c.length;++S)y[c[S]].z=C}}function ak(c,e){for(var f=function(x){var t=[].concat.apply([],x.map(function(i){return i.indexesMapping}));if(t.length===0)throw new Error("There should be at least one landmark in indexes mapping");var s=t[0],l=t[0],a=new Set(t);a.forEach(function(i){s=Math.min(s,i),l=Math.max(l,i)});var r=a.size;if(s!==0)throw new Error("Indexes are expected to start with 0 instead of "+s);if(l+1!==r)throw new Error("Indexes should have no gaps but "+(l-r+1)+" indexes are missing");return r}(e),y=new Array(f).fill(null).map(Object),S=0;S<c.length;++S){var C=c[S],o=e[S];if(C.length!==o.indexesMapping.length)throw new Error("There are "+C.length+" refinement landmarks while mapping has "+o.indexesMapping.length);ik(o.indexesMapping,C,y),rk(o.indexesMapping,o.zRefinement,C,y)}return y}function ok(c,e){return c.map(function(f){var y=Ss(Ss({},f),{x:f.x*e.width,y:f.y*e.height});return f.z!=null&&(y.z=f.z*e.width),y})}function uk(c,e){return c==="none"?e:function(f){return 1/(1+Math.exp(-f))}(e)}function Yi(c,e,f,y){return Hs(this,void 0,void 0,function(){var S,C,o,x,t,s,l,a;return Ys(this,function(r){switch(r.label){case 0:return f=f||e.flipHorizontally||!1,y=y||e.flipVertically||!1,S=c.size,C=S/e.numLandmarks,[4,c.data()];case 1:for(o=r.sent(),x=[],t=0;t<e.numLandmarks;++t)s=t*C,(a={x:0,y:0}).x=f?e.inputImageWidth-o[s]:o[s],C>1&&(a.y=y?e.inputImageHeight-o[s+1]:o[s+1]),C>2&&(a.z=o[s+2]),C>3&&(a.score=uk(e.visibilityActivation,o[s+3])),x.push(a);for(l=0;l<x.length;++l)(a=x[l]).x=a.x/e.inputImageWidth,a.y=a.y/e.inputImageHeight,a.z=a.z/e.inputImageWidth/(e.normalizeZ||1);return[2,x]}})})}function kp(c,e,f){var y=c.width,S=c.height,C=c.rotation;if(f.rotation==null&&f.rotationDegree==null||(C=function(l,a){return a.rotation!=null?l+=a.rotation:a.rotationDegree!=null&&(l+=Math.PI*a.rotationDegree/180),C2(l)}(C,f)),C===0)c.xCenter=c.xCenter+y*f.shiftX,c.yCenter=c.yCenter+S*f.shiftY;else{var o=(e.width*y*f.shiftX*Math.cos(C)-e.height*S*f.shiftY*Math.sin(C))/e.width,x=(e.width*y*f.shiftX*Math.sin(C)+e.height*S*f.shiftY*Math.cos(C))/e.height;c.xCenter=c.xCenter+o,c.yCenter=c.yCenter+x}if(f.squareLong){var t=Math.max(y*e.width,S*e.height);y=t/e.width,S=t/e.height}else if(f.squareShort){var s=Math.min(y*e.width,S*e.height);y=s/e.width,S=s/e.height}return c.width=y*f.scaleX,c.height=S*f.scaleY,c}(zo||(zo={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var Ol={runtime:"tfjs",maxFaces:1,refineLandmarks:!1,landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"},Dl={flipHorizontal:!1,staticImageMode:!1},Wp={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5,squareLong:!0},lk={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1],borderMode:"replicate"},Xp={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},hk={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Hp={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Yp={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},fk={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},ck={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},dk={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},pk={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},vk={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},mk={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]},ko,gk=function(){function c(e,f,y,S){this.detector=e,this.landmarkModel=f,this.maxFaces=y,this.withAttention=S,this.prevFaceRectsFromLandmarks=null}return c.prototype.estimateFaces=function(e,f){return Hs(this,void 0,void 0,function(){var y,S,C,o,x,t,s,l,a,r,i,n,h,d=this;return Ys(this,function(u){switch(u.label){case 0:return y=function(m){if(m==null)return Ss({},Dl);var g=Ss({},m);return g.flipHorizontal==null&&(g.flipHorizontal=Dl.flipHorizontal),g.staticImageMode==null&&(g.staticImageMode=Dl.staticImageMode),g}(f),e==null?(this.reset(),[2,[]]):(S=S2(e),C=de(function(){var m=We(E2(e),"float32");return y.flipHorizontal&&(m=an(ea.flipLeftRight(is(m,0)),[0])),m}),o=this.prevFaceRectsFromLandmarks,y.staticImageMode||o==null||o.length<this.maxFaces?[4,this.detector.detectFaces(C,!1)]:[3,2]);case 1:return(t=u.sent()).length===0?(this.reset(),C.dispose(),[2,[]]):(x=t.map(function(m){return d.faceDetectionFrontDetectionToRoi(m,S)}),[3,3]);case 2:x=[],u.label=3;case 3:return p=.5,v=[],[x,o||[]].forEach(function(m){return m.forEach(function(g){(v=v.filter(function(T){return tk(g,T)<=p})).push(g)})}),s=v,[4,Promise.all(s.map(function(m){return d.faceLandmark(m,C)}))];case 4:for(l=u.sent(),a=[],this.prevFaceRectsFromLandmarks=[],r=0;r<l.length;++r)(i=l[r])!=null&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(i,S)),(n=ok(i,S))!=null&&n.forEach(function(m,g){var T=g2.get(g);T!=null&&(m.name=T)}),h=bh(n),a.push({keypoints:n,box:h.locationData.relativeBoundingBox}));return C.dispose(),[2,a]}var p,v})})},c.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},c.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},c.prototype.faceDetectionFrontDetectionToRoi=function(e,f){return kp(zp(e,"boundingbox","normRect",f,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),f,Wp)},c.prototype.faceLandmark=function(e,f){return Hs(this,void 0,void 0,function(){var y,S,C,o,x,t,s;return Ys(this,function(l){switch(l.label){case 0:return y=sk(f,lk,e).imageTensor,S=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),C=this.landmarkModel.execute(y,S),o=C[0],x=C.slice(1),[4,o.data()];case 1:return l.sent()[0]<.5?(Ke(C),Ke(y),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(x)]:[3,3];case 2:return t=l.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(x)];case 4:t=l.sent(),l.label=5;case 5:return s=function(a,r,i){i===void 0&&(i={ignoreRotation:!1});for(var n=[],h=0,d=a;h<d.length;h++){var u=d[h],p=u.x-.5,v=u.y-.5,m=i.ignoreRotation?0:r.rotation,g=Math.cos(m)*p-Math.sin(m)*v,T=Math.sin(m)*p+Math.cos(m)*v;g=g*r.width+r.xCenter,T=T*r.height+r.yCenter;var w=u.z*r.width,b=Ss({},u);b.x=g,b.y=T,b.z=w,n.push(b)}return n}(t,e),Ke(C),Ke(y),[2,s]}})})},c.prototype.tensorsToFaceLandmarks=function(e){return Hs(this,void 0,void 0,function(){return Ys(this,function(f){return[2,Yi(e[0],Xp)]})})},c.prototype.tensorsToFaceLandmarksWithAttention=function(e){return Hs(this,void 0,void 0,function(){var f,y,S,C,o,x;return Ys(this,function(t){switch(t.label){case 0:return[4,Yi(e[0],Xp)];case 1:return f=t.sent(),[4,Yi(e[1],hk)];case 2:return y=t.sent(),[4,Yi(e[3],Hp)];case 3:return S=t.sent(),[4,Yi(e[5],Hp)];case 4:return C=t.sent(),[4,Yi(e[4],Yp)];case 5:return o=t.sent(),[4,Yi(e[2],Yp)];case 6:return x=t.sent(),[2,ak([f,y,S,C,o,x],[fk,ck,dk,pk,vk,mk])]}})})},c.prototype.faceLandmarksToRoi=function(e,f){return kp(zp(bh(e),"boundingbox","normRect",f,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),f,Wp)},c}();function xk(c){return Hs(this,void 0,void 0,function(){var e,f,y,S;return Ys(this,function(C){switch(C.label){case 0:return e=function(o){if(o==null)return Ss({},Ol);var x=Ss({},o);return x.runtime="tfjs",x.maxFaces==null&&(x.maxFaces=Ol.maxFaces),x.refineLandmarks==null&&(x.refineLandmarks=Ol.refineLandmarks),x.landmarkModelUrl==null&&(x.landmarkModelUrl=x.refineLandmarks?"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/attention_mesh/1":"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"),x}(c),f=typeof e.landmarkModelUrl=="string"&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,m2(e.landmarkModelUrl,{fromTFHub:f})];case 1:return y=C.sent(),[4,_z(zo.MediaPipeFaceDetector,{modelType:"short",maxFaces:e.maxFaces,detectorModelUrl:e.detectorModelUrl,runtime:e.runtime})];case 2:return S=C.sent(),[2,new gk(S,y,e.maxFaces,e.refineLandmarks)]}})})}function yk(c,e){return Hs(this,void 0,void 0,function(){var f,y;return Ys(this,function(S){if(c===ko.MediaPipeFaceMesh){if(y=void 0,(f=e)!=null){if(f.runtime==="tfjs")return[2,xk(f)];if(f.runtime==="mediapipe")return[2,Bz(f)];y=f.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+y)}throw new Error(c+" is not a supported model name.")})})}(function(c){c.MediaPipeFaceMesh="MediaPipeFaceMesh"})(ko||(ko={}));_U(`https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@${eV}/dist/`);var Ks;let Wn=(Ks=class{constructor(){$t(this,"detector");$t(this,"startInferenceTime",0);$t(this,"numInferences",0);$t(this,"inferenceTimeSum",0);$t(this,"lastPanelUpdate",0);$t(this,"rafId");$t(this,"translateX",0);$t(this,"translateY",0);$t(this,"scale",0);$t(this,"blinkingStatus",Pn.None);$t(this,"_previousBlink",Pn.None);$t(this,"blinkConfirmationDelay",0);$t(this,"smoothFace");$t(this,"smoothingFactor",.8);$t(this,"faceInit",!0)}static async setup(){Ks.default=new Ks,await vs.setup();let e={runtime:"mediapipe",refineLandmarks:!0,solutionPath:`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@${P0.VERSION}`};Ks.default.detector=await yk(ko.MediaPipeFaceMesh,e),await Ks.default.renderPrediction()}beginEstimateFaceStats(){this.startInferenceTime=(performance||Date).now()}endEstimateFaceStats(){const e=(performance||Date).now();this.inferenceTimeSum+=e-this.startInferenceTime,++this.numInferences;const f=1e3;e-this.lastPanelUpdate>=f&&(this.inferenceTimeSum/this.numInferences,this.inferenceTimeSum=0,this.numInferences=0,this.lastPanelUpdate=e)}async renderPrediction(){await this.renderResult(),this.rafId=requestAnimationFrame(()=>this.renderPrediction())}async renderResult(){var f,y;vs.defaultCamera.video.readyState<2&&await new Promise(S=>{vs.defaultCamera.video.onloadeddata=()=>{S(vs.defaultCamera.video)}});let e=null;if(this.detector!=null){this.beginEstimateFaceStats();try{if(e=await((f=this.detector)==null?void 0:f.estimateFaces(vs.defaultCamera.video,{flipHorizontal:!1})),e.length==1){let S=e[0];this.smoothFace==null&&this.faceInit==!0?(console.log("First Face"),this.smoothFace=S,this.faceInit=!1):this.smoothFace={box:{xMin:Math.round(this.smoothFace.box.xMin*this.smoothingFactor+S.box.xMin*(1-this.smoothingFactor)),xMax:Math.round(this.smoothFace.box.xMax*this.smoothingFactor+S.box.xMax*(1-this.smoothingFactor)),yMin:Math.round(this.smoothFace.box.yMin*this.smoothingFactor+S.box.yMin*(1-this.smoothingFactor)),yMax:Math.round(this.smoothFace.box.yMax*this.smoothingFactor+S.box.yMax*(1-this.smoothingFactor)),width:Math.round(this.smoothFace.box.width*this.smoothingFactor+S.box.width*(1-this.smoothingFactor)),height:Math.round(this.smoothFace.box.height*this.smoothingFactor+S.box.height*(1-this.smoothingFactor))},keypoints:[...S.keypoints]},await this.calculatePosition(this.smoothFace)}}catch(S){(y=this.detector)==null||y.dispose(),alert(S)}this.endEstimateFaceStats()}}async calculatePosition(e){this.translateX=(vs.videoConfig.video.width-(e.box.xMin+e.box.width/2))/vs.videoConfig.video.width,this.translateY=(e.box.yMin+e.box.height/1.8)/vs.videoConfig.video.height,this.translateX=this.translateX*2.4-.7,this.translateY=this.translateY*2.4-.7,this.translateX=Math.round(this.translateX*1e3)/1e3,this.translateY=Math.round(this.translateY*1e3)/1e3,this.scale=Math.round(vs.videoConfig.video.height/2/e.box.height*100)/100;let f=Math.round(e.keypoints[159].y-e.keypoints[145].y),y=Math.round(e.keypoints[385].y-e.keypoints[380].y),S;if(f>-4&&y>-4?S=Pn.Both:f<-4&&y>=-4?S=Pn.LeftEye:f>=-4&&y<-4?S=Pn.RightEye:S=Pn.None,this.blinkingStatus!=S)if(this.blinkConfirmationDelay==10){this.blinkingStatus=this._previousBlink,this.blinkConfirmationDelay=0;let C=b2.scene.getAt(0).currentScene;C&&C.onBlinkStatusChanged(this.blinkingStatus)}else S!=this._previousBlink?(this._previousBlink=S,this.blinkConfirmationDelay=0):this.blinkConfirmationDelay+=1}},$t(Ks,"default"),Ks);const Tk={active:!1,visible:!1,key:"Chapter1"};class Sk extends Wo{constructor(){super(Tk);$t(this,"title","Lost in the Flood");$t(this,"subtitle","Chapter 1");$t(this,"sceneWidth",4796);$t(this,"sceneHeight",8525);$t(this,"depth",1);$t(this,"eyeMask");$t(this,"blackBackground");$t(this,"backgrounds",[]);$t(this,"phones",[]);$t(this,"maskX",Phaser.Math.Between(0,800));$t(this,"maskY",Phaser.Math.Between(0,600));$t(this,"windowWidth",window.innerWidth);$t(this,"windowHeight",window.innerHeight);$t(this,"backgroundImageWidth",8525);$t(this,"backgroundImageHeight",4796);$t(this,"widthScale",this.windowWidth/this.backgroundImageWidth);$t(this,"heightScale",this.windowHeight/this.backgroundImageHeight);$t(this,"phonesPosition",[{x:833.56,y:1913.68},{x:2475.68,y:1279.96},{x:-629.34,y:838.02},{x:350.1,y:612.88},{x:-475.138,y:120.91},{x:516.81,y:112.57},{x:-1271.18,y:-341.88},{x:33.34,y:-358.55},{x:-129.2,y:-1438.39}]);$t(this,"phoneTrigger",[1,5,9]);$t(this,"scope",150);$t(this,"phoneMap",new Map);$t(this,"isNear",(f,y,S,C)=>Math.abs(f-S)<this.scope&&Math.abs(y-C)<this.scope);$t(this,"playFrameAnimation",(f,y)=>{f.anims.create({key:"frameAnimation",frames:y.map(S=>({key:f.texture.key,frame:S})),frameRate:.5,repeat:-1}),f.anims.play("frameAnimation")});$t(this,"iconList",["flag.png","oil.png","flowers.png"]);$t(this,"icons");$t(this,"iconTween",f=>{this.tweens.add({targets:f,duration:2e3,scaleX:1.5*this.widthScale,scaleY:1.5*this.heightScale,alpha:.7,yoyo:!0,repeat:0})})}preload(){console.log("Preload"),this.phonesPosition=this.phonesPosition.map(f=>({x:(this.backgroundImageWidth/2+f.x)*(this.windowWidth/this.backgroundImageWidth),y:(this.backgroundImageHeight/2-f.y)*(this.windowHeight/this.backgroundImageHeight)})),console.log(this.phonesPosition),this.load.image("eyeMask","/EyeMask.svg"),this.load.multiatlas("backgrounds","/Chapter1/background.json","/Chapter1/");for(let f=0;f<this.phonesPosition.length;f++)this.load.multiatlas(`phone_0${f+1}`,`/Chapter1/phone_0${f+1}.json`,"/Chapter1/");this.load.multiatlas("icons","/Chapter1/icons.json","/Chapter1/")}create(){const f=this.textures.get("backgrounds");for(let S=0;S<f.getFrameNames().length;S++)this.backgrounds.push(this.add.sprite(this.windowWidth/2,this.windowHeight/2,"backgrounds",`background_0${S+1}.png`)),this.backgrounds[S].setScale(this.widthScale,this.heightScale),this.backgrounds[S].setDepth(this.depth),this.depth++;for(let S=0;S<this.phonesPosition.length;S++){const C=this.textures.get(`phone_0${S+1}`);this.phones.push(this.add.sprite(this.phonesPosition[S].x,this.phonesPosition[S].y,`phone_0${S+1}`,C.getFrameNames()[0])),this.phones[S].setScale(this.widthScale,this.heightScale),this.playFrameAnimation(this.phones[S],C.getFrameNames()),this.phones[S].setDepth(this.depth),this.depth++}this.blackBackground=this.add.rectangle(this.windowWidth/2,this.windowHeight/2,this.windowWidth,this.windowHeight,0),this.blackBackground.setDepth(100),this.eyeMask=this.add.image(this.windowWidth/2,this.windowHeight/2,"eyeMask"),console.log(this.eyeMask.width,this.eyeMask.height),console.log(this.windowWidth,this.windowHeight),this.eyeMask.setScale(this.windowWidth/this.eyeMask.width*2/3,this.windowHeight/this.eyeMask.height*2/3);const y=this.eyeMask.createBitmapMask();y.invertAlpha=!0,this.blackBackground.setMask(y),this.icons=[];for(let S=0;S<this.iconList.length;S++)this.icons.push(this.add.sprite(this.windowWidth/2+this.windowWidth/6*(S-1),this.windowHeight/10*9,"icons",this.iconList[S])),this.icons[S].setDepth(1e3),this.icons[S].setScale(this.widthScale,this.heightScale)}update(){Wn.default.translateX>=.15&&Wn.default.translateX<=1-.15&&Wn.default.translateY>=.2&&Wn.default.translateY<=1-.2&&(this.backgrounds.forEach(S=>{S.setX(Wn.default.translateX*window.innerWidth),S.setY(Wn.default.translateY*window.innerHeight)}),this.phones.forEach((S,C)=>{S.setX(Wn.default.translateX*window.innerWidth+this.phonesPosition[C].x-this.windowWidth/2),S.setY(Wn.default.translateY*window.innerHeight+this.phonesPosition[C].y-this.windowHeight/2)}))}onBlinkStatusChanged(f){switch(f){case Pn.None:console.log("None");return;case Pn.LeftEye:console.log("LeftEye");return;case Pn.RightEye:console.log("RightEye",Wn.default.translateX*window.innerWidth,Wn.default.translateY*window.innerHeight);for(let y=0;y<this.phoneTrigger.length;y++)this.isNear(this.phonesPosition[this.phoneTrigger[y]-1].x,this.phonesPosition[this.phoneTrigger[y]-1].y,Wn.default.translateX*window.innerWidth,Wn.default.translateY*window.innerHeight)&&!this.phoneMap.get(this.phoneTrigger[y])&&(this.phoneMap.set(this.phoneTrigger[y],!0),console.log(this.phoneMap));this.phoneMap.size===this.phonesPosition.length&&this.scene.start("Chapter2");return;case Pn.Both:console.log("Both");return}}}const Ck={active:!1,visible:!1,key:"Chapter2"};class Ek extends Phaser.Scene{constructor(){super(Ck)}preload(){console.log("Preload")}create(){}update(){}}const wk={active:!1,visible:!1,key:"Chapter3"};class bk extends Wo{constructor(){super(wk);$t(this,"sceneWidth",1920);$t(this,"sceneHeight",1080);$t(this,"title","Lost in the Flood");$t(this,"subtitle","Chapter 1");$t(this,"depth",1);$t(this,"windowWidth",window.innerWidth);$t(this,"windowHeight",window.innerHeight);$t(this,"backgroundImageWidth",8e3);$t(this,"backgroundImageHeight",4500);$t(this,"widthScale",this.windowWidth/this.backgroundImageWidth);$t(this,"heightScale",this.windowHeight/this.backgroundImageHeight);$t(this,"iconList",["icons/fight.png","icons/wheel.png","icons/brain.png","icons/goggles.png"]);$t(this,"icons")}preload(){console.log("Preload"),this.load.image("eyeMask","/EyeMask.svg"),this.load.multiatlas("chapter_3_factory","/Chapter3/chapter_3_factory.json","/Chapter3/")}create(){const f=this.textures.get("chapter_3_factory");console.log(f.getFrameNames()),this.background=this.add.image(this.windowWidth/2,this.windowHeight/2,"chapter_3_factory","background/factory_03.png"),this.background.setScale(this.widthScale,this.heightScale),this.background.setDepth(this.depth),this.depth++,this.blackBackground=this.add.rectangle(this.windowWidth/2,this.windowHeight/2,this.windowWidth,this.windowHeight,0),this.blackBackground.setDepth(100),this.eyeMask=this.add.image(this.windowWidth/2,this.windowHeight/2,"eyeMask"),console.log(this.eyeMask.width,this.eyeMask.height),console.log(this.windowWidth,this.windowHeight),this.eyeMask.setScale(this.windowWidth/this.eyeMask.width*2/3,this.windowHeight/this.eyeMask.height*2/3);const y=this.eyeMask.createBitmapMask();y.invertAlpha=!0,this.blackBackground.setMask(y),this.icons=[];for(let S=0;S<this.iconList.length;S++)this.icons.push(this.add.sprite(this.windowWidth/2+this.windowWidth/8*(S-1.5),this.windowHeight/10*9,"chapter_3_factory",this.iconList[S])),this.icons[S].setScale(this.widthScale,this.heightScale),this.icons[S].setDepth(1e3)}update(){Detector.default.translateX>=.15&&Detector.default.translateX<=1-.15&&Detector.default.translateY>=.2&&Detector.default.translateY<=1-.2&&(this.background.setX(Detector.default.translateX*window.innerWidth),this.background.setY(Detector.default.translateY*window.innerHeight))}}const Ak={active:!1,visible:!1,key:"Chapter4"};class Rk extends Phaser.Scene{constructor(){super(Ak)}preload(){console.log("Preload")}create(){}update(){}}const Ik={active:!1,visible:!1,key:"Chapter5"};class Pk extends Phaser.Scene{constructor(){super(Ik)}preload(){console.log("Preload")}create(){}update(){}}const Fk={active:!1,visible:!1,key:"MainMenu"};class Mk extends Wo{constructor(){super(Fk);$t(this,"title");$t(this,"subtitle");$t(this,"sceneHeight",1080);$t(this,"sceneWidth",1920);$t(this,"colour",16777215);$t(this,"background")}preload(){console.log("Preload")}create(){super.create(),this.load.on("progress",f=>{console.log(f)}),this.load.on("fileprogress",f=>{console.log(f.src)}),this.load.on("complete",f=>{console.log(f)}),this.background=this.add.rectangle(0,0,this.sceneWidth,this.sceneHeight,16776960).setMask(this.mask)}update(){super.update(),this.background.width=this.windowWidth*2,this.background.height=this.windowHeight*2}onBlinkStatusChanged(f){switch(f){case Pn.None:this.colour=16777215;return;case Pn.LeftEye:this.colour=65535;return;case Pn.RightEye:this.colour=16711935;return;case Pn.Both:this.colour=16776960;return}}}const Nk={active:!1,visible:!1,key:"UserInterface"},Kp="Road Rage",ba="Gaegu",Ok=128,w2=32,Dk=22,Lk=18;class Bk extends Phaser.Scene{constructor(){super(Nk);$t(this,"showUserInterface",!1);$t(this,"currentScene");$t(this,"isUserInterfaceVisible",!1);$t(this,"isLoadingVisible",!1);$t(this,"eyeMask");$t(this,"hiddenObjectIndicators");$t(this,"zoomIndicator");$t(this,"zoomIndicatorBackground");$t(this,"cutsceneBackground");$t(this,"cutsceneTitleText");$t(this,"cutsceneSubtitleText");$t(this,"iconTween",f=>{this.tweens.add({targets:f,duration:2e3,alpha:.7,yoyo:!0,repeat:0})})}preload(){this.load.image("eyeMask","Interface/Mask_Eye.svg"),this.load.image("zoomIndicator","Interface/Control_Zoom_Indicator.svg"),this.load.bitmapFont(Kp,"Fonts/RoadRage_0.png","Fonts/RoadRage.fnt"),this.load.bitmapFont(ba,"Fonts/Gaegu_0.png","Fonts/Gaegu.fnt")}create(){const f=this.add.image(window.innerWidth/2,window.innerHeight/2,"eyeMask");this.eyeMask=f.createBitmapMask(),this.eyeMask.invertAlpha=!0,this.changeScene("Permission"),this.scale.on("resize",this.resize,this)}update(){}changeScene(f,y){this.currentScene&&this.scene.remove(this.currentScene),this.currentScene=this.scene.get(f),this.currentScene.title&&this.currentScene.subtitle?this.showCutscene(this.currentScene.title,this.currentScene.subtitle):this.scene.launch(this.currentScene)}reloadIcons(){if(this.hiddenObjectIndicators.length!=0){for(let y=0;y<this.hiddenObjectIndicators.length;y++)this.hiddenObjectIndicators[y].removedFromScene();this.hiddenObjectIndicators=[]}this.load.multiatlas("icons","/Interface/icons.json","/Interface/");const f=this.textures.get("icons");for(let y=0;y<f.getFrameNames().length;y++)this.hiddenObjectIndicators.push(this.add.sprite(window.innerWidth/2+window.innerWidth/6*(y-1),window.innerHeight/12*11,"icons",f.getFrameNames()[y])),this.hiddenObjectIndicators[y].setDepth(1e3),this.hiddenObjectIndicators[y].setScale(1,1)}showCutscene(f,y,S=3e3){this.cutsceneBackground=this.add.rectangle(0,0,window.innerWidth,window.innerHeight,0),this.cutsceneBackground.setDepth(1e4),this.cutsceneBackground.alpha=0,this.cutsceneTitleText=this.add.bitmapText(0,0,Kp,f,Ok),this.cutsceneTitleText.tint=16777215,this.cutsceneTitleText.x=window.innerWidth/2-this.cutsceneTitleText.width/2,this.cutsceneTitleText.y=window.innerHeight/2-this.cutsceneTitleText.height/2,this.cutsceneTitleText.setDepth(10001),this.cutsceneTitleText.alpha=0,this.cutsceneSubtitleText=this.add.bitmapText(0,0,ba,y.toUpperCase(),w2),this.cutsceneSubtitleText.letterSpacing=.5,this.cutsceneSubtitleText.tint=16777215,this.cutsceneSubtitleText.x=window.innerWidth/2-this.cutsceneSubtitleText.width/2,this.cutsceneSubtitleText.y=window.innerHeight/2+this.cutsceneTitleText.height/2,this.cutsceneSubtitleText.setDepth(10002),this.cutsceneSubtitleText.alpha=0,this.tweens.add({targets:[this.cutsceneBackground,this.cutsceneSubtitleText,this.cutsceneTitleText],duration:700,alpha:1}),this.time.delayedCall(S,()=>{this.tweens.add({targets:[this.cutsceneBackground,this.cutsceneSubtitleText,this.cutsceneTitleText],duration:700,alpha:0,onComplete:()=>{this.cutsceneBackground.removedFromScene(),this.cutsceneTitleText.removedFromScene(),this.cutsceneSubtitleText.removedFromScene(),this.scene.launch(this.currentScene)}})},[],this)}hiddenObjectIsFound(f){}resize(f,y,S,C){const o=this.currentScene.scale.gameSize.width,x=this.currentScene.scale.gameSize.height;this.currentScene.parent=new Phaser.Structs.Size(o,x),this.currentScene.sizer=new Phaser.Structs.Size(this.currentScene.scale.width,this.currentScene.scale.height);const t=this.currentScene.sizer.width/this.game.canvas.width,s=this.currentScene.sizer.height/this.game.canvas.height;this.currentScene.cameras.main.setZoom(Math.max(t,s)),this.currentScene.cameras.main.centerOn(this.game.canvas.width/2,this.game.canvas.height/2)}}const $k={active:!1,visible:!1,key:"Permission"};class Gk extends Wo{constructor(){super($k);$t(this,"title");$t(this,"subtitle");$t(this,"sceneWidth",1920);$t(this,"sceneHeight",1080);$t(this,"background");$t(this,"headline");$t(this,"description");$t(this,"image");$t(this,"cameraPermissionButton");$t(this,"keyboardButton")}preload(){this.load.image("permission","Interface/Image_Permission.svg")}create(){this.background=this.add.rectangle(0,0,window.innerWidth,window.innerHeight,16777215),this.headline=this.add.bitmapText(0,0,ba,`Hi there, little eye.
How would you like to play this game ?`,w2),this.headline.tint=0,this.headline.lineSpacing=.5,this.headline.setCenterAlign();const f=`We recommend granting us access to your camera.
Then, blink, wink, and bob your way through this game using face tracking.
If people around you start to stare,
you can always switch to using your cursor.`;this.description=this.add.bitmapText(0,0,ba,f,Dk,.5),this.description.tint=0,this.description.setCenterAlign(),this.image=this.add.image(0,0,"permission"),this.input.topOnly=!1,this.cameraPermissionButton=this.createButton("Great, face tracking it is!"),this.keyboardButton=this.createButton("I wanna use cursor instead"),this.input.on("pointerup",(y,S)=>{S[0]==this.cameraPermissionButton?this.askCameraPermission():this.enterGameWithoutCameraPermission()})}createButton(f){const y=this.add.graphics();y.fillStyle(0),y.fillRoundedRect(0,0,300,48,24);const S=this.add.bitmapText(0,0,ba,f,Lk);S.tint=16777215;const C=this.add.container(0,0,[y,S]);return C.setInteractive(new Phaser.Geom.Rectangle(0,0,300,48),Phaser.Geom.Rectangle.Contains),C}update(){this.background.width=this.windowWidth*2,this.background.height=this.windowHeight*2,this.headline.x=window.innerWidth/2-this.headline.width/2,this.headline.y=100,this.description.x=window.innerWidth/2-this.description.width/2,this.description.y=window.innerHeight/2+30,this.image.x=window.innerWidth/2,this.image.y=window.innerHeight/2-this.image.height/2,this.cameraPermissionButton.x=window.innerWidth/2-320,this.cameraPermissionButton.y=window.innerHeight-150,this.keyboardButton.x=window.innerWidth/2+20,this.keyboardButton.y=window.innerHeight-150}enterGameWithoutCameraPermission(){this.defaultUIScene.changeScene("Chapter1")}async askCameraPermission(){try{await Wn.setup(),this.defaultUIScene.changeScene("Chapter1")}catch(f){console.log(f)}}}const Uk=1920,Vk=1080,zk=270,kk=480,Wk=540,Xk=960,Hk={title:"focus-but-what",type:So.AUTO,scale:{mode:So.Scale.RESIZE,parent:"game",width:Wk,height:Xk,min:{width:zk,height:kk},max:{width:Uk,height:Vk}},physics:{default:"arcade",arcade:{debug:!0}},dom:{createContainer:!0},backgroundColor:"#000000",scene:[Bk,Gk,Mk,Sk,Ek,bk,Rk,Pk]},b2=new So.Game(Hk);b2.input.globalTopOnly=!1;
