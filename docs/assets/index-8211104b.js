var $2=Object.defineProperty;var G2=(c,e,f)=>e in c?$2(c,e,{enumerable:!0,configurable:!0,writable:!0,value:f}):c[e]=f;var Gt=(c,e,f)=>(G2(c,typeof e!="symbol"?e+"":e,f),f);function Nh(c,e){for(var f=0;f<e.length;f++){const x=e[f];if(typeof x!="string"&&!Array.isArray(x)){for(const S in x)if(S!=="default"&&!(S in c)){const C=Object.getOwnPropertyDescriptor(x,S);C&&Object.defineProperty(c,S,C.get?C:{enumerable:!0,get:()=>x[S]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))x(S);new MutationObserver(S=>{for(const C of S)if(C.type==="childList")for(const o of C.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&x(o)}).observe(document,{childList:!0,subtree:!0});function f(S){const C={};return S.integrity&&(C.integrity=S.integrity),S.referrerPolicy&&(C.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?C.credentials="include":S.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function x(S){if(S.ep)return;S.ep=!0;const C=f(S);fetch(S.href,C)}})();var Kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mh(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function U2(c){if(c.__esModule)return c;var e=c.default;if(typeof e=="function"){var f=function x(){return this instanceof x?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};f.prototype=e.prototype}else f={};return Object.defineProperty(f,"__esModule",{value:!0}),Object.keys(c).forEach(function(x){var S=Object.getOwnPropertyDescriptor(c,x);Object.defineProperty(f,x,S.get?S:{enumerable:!0,get:function(){return c[x]}})}),f}var _p={exports:{}};(function(c,e){(function(x,S){c.exports=S()})(Kn,()=>(()=>{var f={6659:o=>{var y=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function l(n,h,d){this.fn=n,this.context=h,this.once=d||!1}function a(n,h,d,u,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new l(d,u||n,p),v=t?t+h:h;return n._events[v]?n._events[v].fn?n._events[v]=[n._events[v],m]:n._events[v].push(m):(n._events[v]=m,n._eventsCount++),n}function r(n,h){--n._eventsCount===0?n._events=new s:delete n._events[h]}function i(){this._events=new s,this._eventsCount=0}i.prototype.eventNames=function(){var h=[],d,u;if(this._eventsCount===0)return h;for(u in d=this._events)y.call(d,u)&&h.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},i.prototype.listeners=function(h){var d=t?t+h:h,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,m=u.length,v=new Array(m);p<m;p++)v[p]=u[p].fn;return v},i.prototype.listenerCount=function(h){var d=t?t+h:h,u=this._events[d];return u?u.fn?1:u.length:0},i.prototype.emit=function(h,d,u,p,m,v){var g=t?t+h:h;if(!this._events[g])return!1;var T=this._events[g],w=arguments.length,b,E;if(T.fn){switch(T.once&&this.removeListener(h,T.fn,void 0,!0),w){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,d),!0;case 3:return T.fn.call(T.context,d,u),!0;case 4:return T.fn.call(T.context,d,u,p),!0;case 5:return T.fn.call(T.context,d,u,p,m),!0;case 6:return T.fn.call(T.context,d,u,p,m,v),!0}for(E=1,b=new Array(w-1);E<w;E++)b[E-1]=arguments[E];T.fn.apply(T.context,b)}else{var A=T.length,R;for(E=0;E<A;E++)switch(T[E].once&&this.removeListener(h,T[E].fn,void 0,!0),w){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,d);break;case 3:T[E].fn.call(T[E].context,d,u);break;case 4:T[E].fn.call(T[E].context,d,u,p);break;default:if(!b)for(R=1,b=new Array(w-1);R<w;R++)b[R-1]=arguments[R];T[E].fn.apply(T[E].context,b)}}return!0},i.prototype.on=function(h,d,u){return a(this,h,d,u,!1)},i.prototype.once=function(h,d,u){return a(this,h,d,u,!0)},i.prototype.removeListener=function(h,d,u,p){var m=t?t+h:h;if(!this._events[m])return this;if(!d)return r(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!p||v.once)&&(!u||v.context===u)&&r(this,m);else{for(var g=0,T=[],w=v.length;g<w;g++)(v[g].fn!==d||p&&!v[g].once||u&&v[g].context!==u)&&T.push(v[g]);T.length?this._events[m]=T.length===1?T[0]:T:r(this,m)}return this},i.prototype.removeAllListeners=function(h){var d;return h?(d=t?t+h:h,this._events[d]&&r(this,d)):(this._events=new s,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,o.exports=i},62270:(o,y,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82590),l=function(a,r,i,n){for(var h=a[0],d=1;d<a.length;d++){var u=a[d];s(u,h,r,i,n),h=u}return a};o.exports=l},61148:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"angle",r,i,n,h)};o.exports=l},22015:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){for(var a=0;a<t.length;a++){var r=t[a];s.call(l,r)}return t};o.exports=y},31060:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){l===void 0&&(l=0);for(var a=l;a<t.length;a++){var r=t[a],i=!0;for(var n in s)r[n]!==s[n]&&(i=!1);if(i)return r}return null};o.exports=y},52367:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){l===void 0&&(l=0);for(var a=t.length-1;a>=l;a--){var r=t[a],i=!0;for(var n in s)r[n]!==s[n]&&(i=!1);if(i)return r}return null};o.exports=y},12673:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40327),l=t(84093),a=t(72632),r=t(72283),i=t(71030),n=new i({sys:{queueDepthSort:r,events:{once:r}}},0,0,1,1).setOrigin(0,0),h=function(d,u){u===void 0&&(u={});var p=u.hasOwnProperty("width"),m=u.hasOwnProperty("height"),v=a(u,"width",-1),g=a(u,"height",-1),T=a(u,"cellWidth",1),w=a(u,"cellHeight",T),b=a(u,"position",l.TOP_LEFT),E=a(u,"x",0),A=a(u,"y",0),R=0,I=0,P=v*T,N=g*w;n.setPosition(E,A),n.setSize(T,w);for(var F=0;F<d.length;F++)if(s(d[F],n,b),p&&v===-1)n.x+=T;else if(m&&g===-1)n.y+=w;else if(m&&!p){if(I+=w,n.y+=w,I===N&&(I=0,R+=T,n.y=A,n.x+=T,R===P))break}else if(R+=T,n.x+=T,R===P&&(R=0,I+=w,n.x=E,n.y+=w,I===N))break;return d};o.exports=h},691:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"alpha",r,i,n,h)};o.exports=l},3877:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"x",r,i,n,h)};o.exports=l},71020:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"x",r,n,d,u),s(a,"y",i,h,d,u)};o.exports=l},28970:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"y",r,i,n,h)};o.exports=l},82249:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l===void 0&&(l=0),a===void 0&&(a=6.28);for(var r=l,i=(a-l)/t.length,n=s.x,h=s.y,d=s.radius,u=0;u<t.length;u++)t[u].x=n+d*Math.cos(r),t[u].y=h+d*Math.sin(r),r+=i;return t};o.exports=y},30285:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l===void 0&&(l=0),a===void 0&&(a=6.28);for(var r=l,i=(a-l)/t.length,n=s.width/2,h=s.height/2,d=0;d<t.length;d++)t[d].x=s.x+n*Math.cos(r),t[d].y=s.y+h*Math.sin(r),r+=i;return t};o.exports=y},61557:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8570),l=function(a,r){for(var i=s(r,a.length),n=0;n<a.length;n++){var h=a[n],d=i[n];h.x=d.x,h.y=d.y}return a};o.exports=l},63549:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40053),l=t(77640),a=t(38487),r=function(i,n,h){h===void 0&&(h=0);var d=s(n,!1,i.length);h>0?l(d,h):h<0&&a(d,Math.abs(h));for(var u=0;u<i.length;u++)i[u].x=d[u].x,i[u].y=d[u].y;return i};o.exports=r},51629:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(58813),l=function(a,r,i){var n=s({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},i),h=s({x1:r.x2,y1:r.y2,x2:r.x3,y2:r.y3},i),d=s({x1:r.x3,y1:r.y3,x2:r.x1,y2:r.y1},i);n.pop(),h.pop(),d.pop(),n=n.concat(h,d);for(var u=n.length/a.length,p=0,m=0;m<a.length;m++){var v=a[m],g=n[Math.floor(p)];v.x=g.x,v.y=g.y,p+=u}return a};o.exports=l},1045:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){for(var a=0;a<t.length;a++){var r=t[a];r.anims&&r.anims.play(s,l)}return t};o.exports=y},6124:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r,i){a===void 0&&(a=0),r===void 0&&(r=0),i===void 0&&(i=1);var n,h=0,d=t.length;if(i===1)for(n=r;n<d;n++)t[n][s]+=l+h*a,h++;else for(n=r;n>=0;n--)t[n][s]+=l+h*a,h++;return t};o.exports=y},23646:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r,i){a===void 0&&(a=0),r===void 0&&(r=0),i===void 0&&(i=1);var n,h=0,d=t.length;if(i===1)for(n=r;n<d;n++)t[n][s]=l+h*a,h++;else for(n=r;n>=0;n--)t[n][s]=l+h*a,h++;return t};o.exports=y},4392:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30977),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},94985:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72006),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},63305:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74077),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},90739:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30001),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},91417:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99761),l=function(a,r){for(var i=0;i<a.length;i++)s(r,a[i]);return a};o.exports=l},26182:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"rotation",r,i,n,h)};o.exports=l},87299:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72395),l=t(53996),a=function(r,i,n){for(var h=i.x,d=i.y,u=0;u<r.length;u++){var p=r[u];s(p,h,d,n,Math.max(1,l(p.x,p.y,h,d)))}return r};o.exports=a},92194:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72395),l=function(a,r,i,n){var h=r.x,d=r.y;if(n===0)return a;for(var u=0;u<a.length;u++)s(a[u],h,d,i,n);return a};o.exports=l},30363:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"scaleX",r,i,n,h)};o.exports=l},51449:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"scaleX",r,n,d,u),s(a,"scaleY",i,h,d,u)};o.exports=l},64895:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6124),l=function(a,r,i,n,h){return s(a,"scaleY",r,i,n,h)};o.exports=l},30329:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"alpha",r,i,n,h)};o.exports=l},43954:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n){return s(a,"blendMode",r,0,i,n)};o.exports=l},70688:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"depth",r,i,n,h)};o.exports=l},8314:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){for(var a=0;a<t.length;a++)t[a].setInteractive(s,l);return t};o.exports=y},12894:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"originX",r,n,d,u),s(a,"originY",i,h,d,u),a.forEach(function(p){p.updateDisplayOrigin()}),a};o.exports=l},38767:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"rotation",r,i,n,h)};o.exports=l},18584:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"scaleX",r,n,d,u),s(a,"scaleY",i,h,d,u)};o.exports=l},17381:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"scaleX",r,i,n,h)};o.exports=l},74370:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"scaleY",r,i,n,h)};o.exports=l},27773:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"scrollFactorX",r,n,d,u),s(a,"scrollFactorY",i,h,d,u)};o.exports=l},75257:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"scrollFactorX",r,i,n,h)};o.exports=l},54512:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"scrollFactorY",r,i,n,h)};o.exports=l},69423:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r){for(var i=0;i<t.length;i++)t[i].setTint(s,l,a,r);return t};o.exports=y},58291:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n){return s(a,"visible",r,0,i,n)};o.exports=l},94833:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"x",r,i,n,h)};o.exports=l},14284:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h,d,u){return i==null&&(i=r),s(a,"x",r,n,d,u),s(a,"y",i,h,d,u)};o.exports=l},96574:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23646),l=function(a,r,i,n,h){return s(a,"y",r,i,n,h)};o.exports=l},74086:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h){n===void 0&&(n=0),h===void 0&&(h=new s);var d,u,p=a.length;if(p===1)d=a[0].x,u=a[0].y,a[0].x=r,a[0].y=i;else{var m=1,v=0;n===0&&(v=p-1,m=p-2),d=a[v].x,u=a[v].y,a[v].x=r,a[v].y=i;for(var g=0;g<p;g++)if(!(m>=p||m===-1)){var T=a[m],w=T.x,b=T.y;T.x=d,T.y=u,d=w,u=b,n===0?m--:m++}}return h.x=d,h.y=u,h};o.exports=l},86347:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18592),l=function(a){return s(a)};o.exports=l},1558:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5514),l=function(a,r,i,n,h){h===void 0&&(h=!1);var d=Math.abs(n-i)/a.length,u;if(h)for(u=0;u<a.length;u++)a[u][r]+=s(u*d,i,n);else for(u=0;u<a.length;u++)a[u][r]=s(u*d,i,n);return a};o.exports=l},9938:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87736),l=function(a,r,i,n,h){h===void 0&&(h=!1);var d=Math.abs(n-i)/a.length,u;if(h)for(u=0;u<a.length;u++)a[u][r]+=s(u*d,i,n);else for(u=0;u<a.length;u++)a[u][r]=s(u*d,i,n);return a};o.exports=l},71060:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r){if(r===void 0&&(r=!1),t.length===0)return t;if(t.length===1)return r?t[0][s]+=(a+l)/2:t[0][s]=(a+l)/2,t;var i=Math.abs(a-l)/(t.length-1),n;if(r)for(n=0;n<t.length;n++)t[n][s]+=n*i+l;else for(n=0;n<t.length;n++)t[n][s]=n*i+l;return t};o.exports=y},11207:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){for(var s=0;s<t.length;s++)t[s].visible=!t[s].visible;return t};o.exports=y},24404:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1071),l=function(a,r,i){i===void 0&&(i=0);for(var n=0;n<a.length;n++){var h=a[n];h.x=s(h.x,r.left-i,r.right+i),h.y=s(h.y,r.top-i,r.bottom+i)}return a};o.exports=l},83979:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AlignTo:t(62270),Angle:t(61148),Call:t(22015),GetFirst:t(31060),GetLast:t(52367),GridAlign:t(12673),IncAlpha:t(691),IncX:t(3877),IncXY:t(71020),IncY:t(28970),PlaceOnCircle:t(82249),PlaceOnEllipse:t(30285),PlaceOnLine:t(61557),PlaceOnRectangle:t(63549),PlaceOnTriangle:t(51629),PlayAnimation:t(1045),PropertyValueInc:t(6124),PropertyValueSet:t(23646),RandomCircle:t(4392),RandomEllipse:t(94985),RandomLine:t(63305),RandomRectangle:t(90739),RandomTriangle:t(91417),Rotate:t(26182),RotateAround:t(87299),RotateAroundDistance:t(92194),ScaleX:t(30363),ScaleXY:t(51449),ScaleY:t(64895),SetAlpha:t(30329),SetBlendMode:t(43954),SetDepth:t(70688),SetHitArea:t(8314),SetOrigin:t(12894),SetRotation:t(38767),SetScale:t(18584),SetScaleX:t(17381),SetScaleY:t(74370),SetScrollFactor:t(27773),SetScrollFactorX:t(75257),SetScrollFactorY:t(54512),SetTint:t(69423),SetVisible:t(58291),SetX:t(94833),SetXY:t(14284),SetY:t(96574),ShiftPosition:t(74086),Shuffle:t(86347),SmootherStep:t(9938),SmoothStep:t(1558),Spread:t(71060),ToggleVisible:t(11207),WrapInRectangle:t(24404)}},85463:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(16938),r=t(2406),i=t(71519),n=t(10850),h=t(28834),d=new l({initialize:function(p,m,v){this.manager=p,this.key=m,this.type="frame",this.frames=this.getFrames(p.textureManager,n(v,"frames",[]),n(v,"defaultTextureKey",null),n(v,"sortFrames",!0)),this.frameRate=n(v,"frameRate",null),this.duration=n(v,"duration",null),this.msPerFrame,this.skipMissedFrames=n(v,"skipMissedFrames",!0),this.delay=n(v,"delay",0),this.repeat=n(v,"repeat",0),this.repeatDelay=n(v,"repeatDelay",0),this.yoyo=n(v,"yoyo",!1),this.showBeforeDelay=n(v,"showBeforeDelay",!1),this.showOnStart=n(v,"showOnStart",!1),this.hideOnComplete=n(v,"hideOnComplete",!1),this.randomFrame=n(v,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(u,p,m,v){m===null&&v===null?(u.frameRate=24,u.duration=24/p*1e3):m&&v===null?(u.duration=m,u.frameRate=p/(m/1e3)):(u.frameRate=v,u.duration=p/v*1e3),u.msPerFrame=1e3/u.frameRate},addFrame:function(u){return this.addFrameAt(this.frames.length,u)},addFrameAt:function(u,p){var m=this.getFrames(this.manager.textureManager,p);if(m.length>0){if(u===0)this.frames=m.concat(this.frames);else if(u===this.frames.length)this.frames=this.frames.concat(m);else{var v=this.frames.slice(0,u),g=this.frames.slice(u);this.frames=v.concat(m,g)}this.updateFrameSequence()}return this},checkFrame:function(u){return u>=0&&u<this.frames.length},getFirstTick:function(u){u.accumulator=0,u.nextTick=u.msPerFrame+u.currentFrame.duration},getFrameAt:function(u){return this.frames[u]},getFrames:function(u,p,m,v){v===void 0&&(v=!0);var g=[],T,w,b=1,E,A;if(typeof p=="string"){if(A=p,!u.exists(A))return console.warn('Texture "%s" not found',A),g;var R=u.get(A),I=R.getFrameNames();v&&h(I),p=[],I.forEach(function(L){p.push({key:A,frame:L})})}if(!Array.isArray(p)||p.length===0)return g;for(E=0;E<p.length;E++){var P=p[E],N=n(P,"key",m);if(N){var F=n(P,"frame",0),O=u.getFrame(N,F);if(!O){console.warn('Texture "%s" not found',N);continue}w=new i(N,F,b,O),w.duration=n(P,"duration",0),w.isFirst=!T,T&&(T.nextFrame=w,w.prevFrame=T),g.push(w),T=w,b++}}if(g.length>0){w.isLast=!0,w.nextFrame=g[0],g[0].prevFrame=w;var D=1/(g.length-1);for(E=0;E<g.length;E++)g[E].progress=E*D}return g},getNextTick:function(u){u.accumulator-=u.nextTick,u.nextTick=u.msPerFrame+u.currentFrame.duration},getFrameByProgress:function(u){return u=s(u,0,1),r(u,this.frames,"progress")},nextFrame:function(u){var p=u.currentFrame;p.isLast?u.yoyo?this.handleYoyoFrame(u,!1):u.repeatCounter>0?u.inReverse&&u.forward?u.forward=!1:this.repeatAnimation(u):u.complete():this.updateAndGetNextTick(u,p.nextFrame)},handleYoyoFrame:function(u,p){if(p||(p=!1),u.inReverse===!p&&u.repeatCounter>0){(u.repeatDelay===0||u.pendingRepeat)&&(u.forward=p),this.repeatAnimation(u);return}if(u.inReverse!==p&&u.repeatCounter===0){u.complete();return}u.forward=p;var m=p?u.currentFrame.nextFrame:u.currentFrame.prevFrame;this.updateAndGetNextTick(u,m)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(u){var p=u.currentFrame;p.isFirst?u.yoyo?this.handleYoyoFrame(u,!0):u.repeatCounter>0?u.inReverse&&!u.forward?this.repeatAnimation(u):(u.forward=!0,this.repeatAnimation(u)):u.complete():this.updateAndGetNextTick(u,p.prevFrame)},updateAndGetNextTick:function(u,p){u.setCurrentFrame(p),this.getNextTick(u)},removeFrame:function(u){var p=this.frames.indexOf(u);return p!==-1&&this.removeFrameAt(p),this},removeFrameAt:function(u){return this.frames.splice(u,1),this.updateFrameSequence(),this},repeatAnimation:function(u){if(u._pendingStop===2){if(u._pendingStopValue===0)return u.stop();u._pendingStopValue--}u.repeatDelay>0&&!u.pendingRepeat?(u.pendingRepeat=!0,u.accumulator-=u.nextTick,u.nextTick+=u.repeatDelay):(u.repeatCounter--,u.forward?u.setCurrentFrame(u.currentFrame.nextFrame):u.setCurrentFrame(u.currentFrame.prevFrame),u.isPlaying&&(this.getNextTick(u),u.handleRepeat()))},toJSON:function(){var u={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(p){u.frames.push(p.toJSON())}),u},updateFrameSequence:function(){for(var u=this.frames.length,p=1/(u-1),m,v=0;v<u;v++)m=this.frames[v],m.index=v+1,m.isFirst=!1,m.isLast=!1,m.progress=v*p,v===0?(m.isFirst=!0,u===1?(m.isLast=!0,m.nextFrame=m,m.prevFrame=m):(m.isLast=!1,m.prevFrame=this.frames[u-1],m.nextFrame=this.frames[v+1])):v===u-1&&u>1?(m.isLast=!0,m.prevFrame=this.frames[u-2],m.nextFrame=this.frames[0]):u>1&&(m.prevFrame=this.frames[v-1],m.nextFrame=this.frames[v+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var u=0;u<this.frames.length;u++)this.frames[u].destroy();this.frames=[],this.manager=null}});o.exports=d},71519:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h,d){d===void 0&&(d=!1),this.textureKey=r,this.textureFrame=i,this.index=n,this.frame=h,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});o.exports=l},90249:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85463),l=t(56694),a=t(33885),r=t(6659),i=t(16938),n=t(97081),h=t(72632),d=t(10850),u=t(83392),p=t(13401),m=t(76400),v=new l({Extends:r,initialize:function(T){r.call(this),this.game=T,this.textureManager=null,this.globalTimeScale=1,this.anims=new a,this.mixes=new a,this.paused=!1,this.name="AnimationManager",T.events.once(n.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(n.DESTROY,this.destroy,this)},addMix:function(g,T,w){var b=this.anims,E=this.mixes,A=typeof g=="string"?g:g.key,R=typeof T=="string"?T:T.key;if(b.has(A)&&b.has(R)){var I=E.get(A);I||(I={}),I[R]=w,E.set(A,I)}return this},removeMix:function(g,T){var w=this.mixes,b=typeof g=="string"?g:g.key,E=w.get(b);if(E)if(T){var A=typeof T=="string"?T:T.key;E.hasOwnProperty(A)&&delete E[A]}else T||w.delete(b);return this},getMix:function(g,T){var w=this.mixes,b=typeof g=="string"?g:g.key,E=typeof T=="string"?T:T.key,A=w.get(b);return A&&A.hasOwnProperty(E)?A[E]:0},add:function(g,T){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(T.key=g,this.anims.set(g,T),this.emit(i.ADD_ANIMATION,g,T),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,T,w){var b=[],E=this.game.cache.json.get(g);if(!E)return console.warn("No Aseprite data found for: "+g),b;var A=this,R=d(E,"meta",null),I=d(E,"frames",null);if(R&&I){var P=d(R,"frameTags",[]);P.forEach(function(N){var F=[],O=h(N,"name",null),D=h(N,"from",0),L=h(N,"to",0),z=h(N,"direction","forward");if(O&&(!T||T&&T.indexOf(O)>-1)){for(var X=0,H=D;H<=L;H++){var J=H.toString(),G=I[J];if(G){var k=h(G,"duration",u.MAX_SAFE_INTEGER);F.push({key:g,frame:J,duration:k}),X+=k}}var M=X/F.length;F.forEach(function(W){W.duration-=M}),z==="reverse"&&(F=F.reverse());var B={key:O,frames:F,duration:X,yoyo:z==="pingpong"},U;w?w.anims&&(U=w.anims.create(B)):U=A.create(B),U&&b.push(U)}})}return b},create:function(g){var T=g.key,w=!1;return T&&(w=this.get(T),w?console.warn("AnimationManager key already exists: "+T):(w=new s(this,T,g),this.anims.set(T,w),this.emit(i.ADD_ANIMATION,T,w))),w},fromJSON:function(g,T){T===void 0&&(T=!1),T&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var w=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var b=0;b<g.anims.length;b++)w.push(this.create(g.anims[b]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&w.push(this.create(g));return w},generateFrameNames:function(g,T){var w=d(T,"prefix",""),b=d(T,"start",0),E=d(T,"end",0),A=d(T,"suffix",""),R=d(T,"zeroPad",0),I=d(T,"outputArray",[]),P=d(T,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),I;var N=this.textureManager.get(g);if(!N)return I;var F;if(T)for(P||(P=p(b,E)),F=0;F<P.length;F++){var O=w+m(P[F],R,"0",1)+A;N.has(O)?I.push({key:g,frame:O}):console.warn('Frame "%s" not found in texture "%s"',O,g)}else for(P=N.getFrameNames(),F=0;F<P.length;F++)I.push({key:g,frame:P[F]});return I},generateFrameNumbers:function(g,T){var w=d(T,"start",0),b=d(T,"end",-1),E=d(T,"first",!1),A=d(T,"outputArray",[]),R=d(T,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),A;var I=this.textureManager.get(g);if(!I)return A;E&&I.has(E)&&A.push({key:g,frame:E}),R||(b===-1&&(b=I.frameTotal-2),R=p(w,b));for(var P=0;P<R.length;P++){var N=R[P];I.has(N)?A.push({key:g,frame:N}):console.warn('Frame "%s" not found in texture "%s"',N,g)}return A},get:function(g){return this.anims.get(g)},getAnimsFromTexture:function(g){for(var T=this.textureManager.get(g),w=T.key,b=this.anims.getArray(),E=[],A=0;A<b.length;A++)for(var R=b[A],I=R.frames,P=0;P<I.length;P++)if(I[P].textureKey===w){E.push(R.key);break}return E},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(i.PAUSE_ALL)),this},play:function(g,T){Array.isArray(T)||(T=[T]);for(var w=0;w<T.length;w++)T[w].anims.play(g);return this},staggerPlay:function(g,T,w,b){w===void 0&&(w=0),b===void 0&&(b=!0),Array.isArray(T)||(T=[T]);var E=T.length;b||E--;for(var A=0;A<T.length;A++){var R=w<0?Math.abs(w)*(E-A):w*A;T[A].anims.playAfterDelay(g,R)}return this},remove:function(g){var T=this.get(g);return T&&(this.emit(i.REMOVE_ANIMATION,g,T),this.anims.delete(g),this.removeMix(g)),T},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(i.RESUME_ALL)),this},toJSON:function(g){var T={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?T.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(w,b){T.anims.push(b.toJSON())}),T},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});o.exports=v},16569:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85463),l=t(17489),a=t(56694),r=t(33885),i=t(16938),n=t(72632),h=new a({initialize:function(u){this.parent=u,this.animationManager=u.scene.sys.anims,this.animationManager.on(i.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(d){var u=this.parent;if(d===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,u;Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++){var m=d[p];this.nextAnim?this.nextAnimsQueue.push(m):this.nextAnim=m}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(d){this.isPlaying&&this.stop();var u=this.animationManager,p=typeof d=="string"?d:n(d,"key",null),m=this.exists(p)?this.get(p):u.get(p);if(!m)console.warn("Missing animation: "+p);else{this.currentAnim=m;var v=m.getTotalFrames(),g=n(d,"frameRate",m.frameRate),T=n(d,"duration",m.duration);m.calculateDuration(this,v,T,g),this.delay=n(d,"delay",m.delay),this.repeat=n(d,"repeat",m.repeat),this.repeatDelay=n(d,"repeatDelay",m.repeatDelay),this.yoyo=n(d,"yoyo",m.yoyo),this.showBeforeDelay=n(d,"showBeforeDelay",m.showBeforeDelay),this.showOnStart=n(d,"showOnStart",m.showOnStart),this.hideOnComplete=n(d,"hideOnComplete",m.hideOnComplete),this.skipMissedFrames=n(d,"skipMissedFrames",m.skipMissedFrames),this.randomFrame=n(d,"randomFrame",m.randomFrame),this.timeScale=n(d,"timeScale",this.timeScale);var w=n(d,"startFrame",0);w>v&&(w=0),this.randomFrame&&(w=l(0,v-1));var b=m.frames[w];w===0&&!this.forward&&(b=m.getLastFrame()),this.currentFrame=b}return this.parent},pause:function(d){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),d!==void 0&&this.setCurrentFrame(d),this.parent},resume:function(d){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),d!==void 0&&this.setCurrentFrame(d),this.parent},playAfterDelay:function(d,u){if(!this.isPlaying)this.delayCounter=u,this.play(d,!0);else{var p=this.nextAnim,m=this.nextAnimsQueue;p&&m.unshift(p),this.nextAnim=d,this._pendingStop=1,this._pendingStopValue=u}return this.parent},playAfterRepeat:function(d,u){if(u===void 0&&(u=1),!this.isPlaying)this.play(d);else{var p=this.nextAnim,m=this.nextAnimsQueue;p&&m.unshift(p),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this.nextAnim=d,this._pendingStop=2,this._pendingStopValue=u}return this.parent},play:function(d,u){u===void 0&&(u=!1);var p=this.currentAnim,m=this.parent,v=typeof d=="string"?d:d.key;if(u&&this.isPlaying&&p.key===v)return m;if(p&&this.isPlaying){var g=this.animationManager.getMix(p.key,d);if(g>0)return this.playAfterDelay(d,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d)},playReverse:function(d,u){u===void 0&&(u=!1);var p=typeof d=="string"?d:d.key;return u&&this.isPlaying&&this.currentAnim.key===p?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d))},startAnimation:function(d){this.load(d);var u=this.currentAnim,p=this.parent;return u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,u.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),p},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(i.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(i.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(i.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(i.ANIMATION_COMPLETE,i.ANIMATION_COMPLETE_KEY)},emitEvents:function(d,u){var p=this.currentAnim;if(p){var m=this.currentFrame,v=this.parent,g=m.textureFrame;v.emit(d,p,m,v,g),u&&v.emit(u+p.key,p,m,v,g)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var d=this.currentFrame;if(!d)return 0;var u=d.progress;return this.inReverse&&(u*=-1),u},setProgress:function(d){return this.forward||(d=1-d),this.setCurrentFrame(this.currentAnim.getFrameByProgress(d)),this.parent},setRepeat:function(d){return this.repeatCounter=d===-1?Number.MAX_VALUE:d,this.parent},globalRemove:function(d,u){u===void 0&&(u=this.currentAnim),this.isPlaying&&u.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(d,u){d===void 0&&(d=!1),u===void 0&&(u=!1);var p=this.currentAnim,m=this.parent;return p?(u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),p.getFirstTick(this),this.emitEvents(i.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!d,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(p.frames[0]),this.parent):m},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(d)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(d)}return this.parent},stopAfterDelay:function(d){return this._pendingStop=1,this._pendingStopValue=d,this.parent},stopAfterRepeat:function(d){return d===void 0&&(d=1),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=d,this.parent},stopOnFrame:function(d){return this._pendingStop=3,this._pendingStopValue=d,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(d,u){var p=this.currentAnim;if(!(!this.isPlaying||!p||p.paused)){if(this.accumulator+=u*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=u,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?p.nextFrame(this):p.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var m=0;do this.forward?p.nextFrame(this):p.previousFrame(this),m++;while(this.isPlaying&&this.accumulator>this.nextTick&&m<60)}}},setCurrentFrame:function(d){var u=this.parent;return this.currentFrame=d,u.texture=d.frame.texture,u.frame=d.frame,u.isCropped&&u.frame.updateCropUVs(u._crop,u.flipX,u.flipY),d.setAlpha&&(u.alpha=d.alpha),u.setSizeToFrame(),u._originComponent&&(d.frame.customPivot?u.setOrigin(d.frame.pivotX,d.frame.pivotY):u.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(i.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===d&&this.stop()),u},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(d){return this.anims?this.anims.get(d):null},exists:function(d){return this.anims?this.anims.has(d):!1},create:function(d){var u=d.key,p=!1;return u&&(p=this.get(u),p?console.warn("Animation key already exists: "+u):(p=new s(this,u,d),this.anims||(this.anims=new r),this.anims.set(u,p))),p},createFromAseprite:function(d,u){return this.animationManager.createFromAseprite(d,u,this.parent)},generateFrameNames:function(d,u){return this.animationManager.generateFrameNames(d,u)},generateFrameNumbers:function(d,u){return this.animationManager.generateFrameNumbers(d,u)},remove:function(d){var u=this.get(d);return u&&(this.currentAnim===u&&this.stop(),this.anims.delete(d)),u},destroy:function(){this.animationManager.off(i.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});o.exports=h},44509:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},84563:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete"},61586:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete-"},72175:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrepeat"},568:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrestart"},37690:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstart"},58525:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstop"},5243:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationupdate"},10598:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"},4860:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},31865:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"},16938:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD_ANIMATION:t(44509),ANIMATION_COMPLETE:t(84563),ANIMATION_COMPLETE_KEY:t(61586),ANIMATION_REPEAT:t(72175),ANIMATION_RESTART:t(568),ANIMATION_START:t(37690),ANIMATION_STOP:t(58525),ANIMATION_UPDATE:t(5243),PAUSE_ALL:t(10598),REMOVE_ANIMATION:t(4860),RESUME_ALL:t(31865)}},13517:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Animation:t(85463),AnimationFrame:t(71519),AnimationManager:t(90249),AnimationState:t(16569),Events:t(16938)}},23740:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(33885),a=t(6659),r=t(69773),i=new s({initialize:function(){this.entries=new l,this.events=new a},add:function(n,h){return this.entries.set(n,h),this.events.emit(r.ADD,this,n,h),this},has:function(n){return this.entries.has(n)},exists:function(n){return this.entries.has(n)},get:function(n){return this.entries.get(n)},remove:function(n){var h=this.get(n);return h&&(this.entries.delete(n),this.events.emit(r.REMOVE,this,n,h.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});o.exports=i},43474:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23740),l=t(56694),a=t(97081),r=new l({initialize:function(n){this.game=n,this.binary=new s,this.bitmapFont=new s,this.json=new s,this.physics=new s,this.shader=new s,this.audio=new s,this.video=new s,this.text=new s,this.html=new s,this.obj=new s,this.tilemap=new s,this.xml=new s,this.custom={},this.game.events.once(a.DESTROY,this.destroy,this)},addCustom:function(i){return this.custom.hasOwnProperty(i)||(this.custom[i]=new s),this.custom[i]},destroy:function(){for(var i=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],n=0;n<i.length;n++)this[i[n]].destroy(),this[i[n]]=null;for(var h in this.custom)this.custom[h].destroy();this.custom=null,this.game=null}});o.exports=r},94762:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},75968:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},69773:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:t(94762),REMOVE:t(75968)}},45820:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BaseCache:t(23740),CacheManager:t(43474),Events:t(69773)}},51052:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(75606),r=t(6659),i=t(89787),n=t(74118),h=t(69360),d=t(93222),u=t(93736),p=new s({Extends:r,Mixins:[l.AlphaSingle,l.Visible],initialize:function(v,g,T,w){v===void 0&&(v=0),g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=0),r.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new n,this.dirty=!0,this._x=v,this._y=g,this._width=T,this._height=w,this._bounds=new n,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new h,this.transparent=!0,this.backgroundColor=d("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new u(T/2,w/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(m){this.renderList.push(m)},setOrigin:function(m,v){return m===void 0&&(m=.5),v===void 0&&(v=m),this.originX=m,this.originY=v,this},getScroll:function(m,v,g){g===void 0&&(g=new u);var T=this.width*.5,w=this.height*.5;return g.x=m-T,g.y=v-w,this.useBounds&&(g.x=this.clampX(g.x),g.y=this.clampY(g.y)),g},centerOnX:function(m){var v=this.width*.5;return this.midPoint.x=m,this.scrollX=m-v,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(m){var v=this.height*.5;return this.midPoint.y=m,this.scrollY=m-v,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(m,v){return this.centerOnX(m),this.centerOnY(v),this},centerToBounds:function(){if(this.useBounds){var m=this._bounds,v=this.width*.5,g=this.height*.5;this.midPoint.set(m.centerX,m.centerY),this.scrollX=m.centerX-v,this.scrollY=m.centerY-g}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(m){if(this.disableCull)return m;var v=this.matrix.matrix,g=v[0],T=v[1],w=v[2],b=v[3],E=g*b-T*w;if(!E)return m;var A=v[4],R=v[5],I=this.scrollX,P=this.scrollY,N=this.width,F=this.height,O=this.y,D=O+F,L=this.x,z=L+N,X=this.culledObjects,H=m.length;E=1/E,X.length=0;for(var J=0;J<H;++J){var G=m[J];if(!G.hasOwnProperty("width")||G.parentContainer){X.push(G);continue}var k=G.width,M=G.height,B=G.x-I*G.scrollFactorX-k*G.originX,U=G.y-P*G.scrollFactorY-M*G.originY,W=B*g+U*w+A,K=B*T+U*b+R,q=(B+k)*g+(U+M)*w+A,_=(B+k)*T+(U+M)*b+R;q>L&&W<z&&_>O&&K<D&&X.push(G)}return X},getWorldPoint:function(m,v,g){g===void 0&&(g=new u);var T=this.matrix.matrix,w=T[0],b=T[1],E=T[2],A=T[3],R=T[4],I=T[5],P=w*A-b*E;if(!P)return g.x=m,g.y=v,g;P=1/P;var N=A*P,F=-b*P,O=-E*P,D=w*P,L=(E*I-A*R)*P,z=(b*R-w*I)*P,X=Math.cos(this.rotation),H=Math.sin(this.rotation),J=this.zoomX,G=this.zoomY,k=this.scrollX,M=this.scrollY,B=m+(k*X-M*H)*J,U=v+(k*H+M*X)*G;return g.x=B*N+U*O+L,g.y=B*F+U*D+z,g},ignore:function(m){var v=this.id;Array.isArray(m)||(m=[m]);for(var g=0;g<m.length;g++){var T=m[g];Array.isArray(T)?this.ignore(T):T.isParent?this.ignore(T.getChildren()):T.cameraFilter|=v}return this},preRender:function(){this.renderList.length=0;var m=this.width,v=this.height,g=m*.5,T=v*.5,w=this.zoomX,b=this.zoomY,E=this.matrix,A=m*this.originX,R=v*this.originY,I=this.scrollX,P=this.scrollY;this.useBounds&&(I=this.clampX(I),P=this.clampY(P)),this.scrollX=I,this.scrollY=P;var N=I+g,F=P+T;this.midPoint.set(N,F);var O=m/w,D=v/b;this.worldView.setTo(N-O/2,F-D/2,O,D),E.applyITRS(this.x+A,this.y+R,this.rotation,w,b),E.translate(-A,-R)},clampX:function(m){var v=this._bounds,g=this.displayWidth,T=v.x+(g-this.width)/2,w=Math.max(T,T+v.width-g);return m<T?m=T:m>w&&(m=w),m},clampY:function(m){var v=this._bounds,g=this.displayHeight,T=v.y+(g-this.height)/2,w=Math.max(T,T+v.height-g);return m<T?m=T:m>w&&(m=w),m},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(m){return m===void 0&&(m=0),this.rotation=a(m),this},setBackgroundColor:function(m){return m===void 0&&(m="rgba(0,0,0,0)"),this.backgroundColor=d(m),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(m,v,g,T,w){return w===void 0&&(w=!1),this._bounds.setTo(m,v,g,T),this.dirty=!0,this.useBounds=!0,w?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(m){m===void 0&&(m=new n);var v=this._bounds;return m.setTo(v.x,v.y,v.width,v.height),m},setName:function(m){return m===void 0&&(m=""),this.name=m,this},setPosition:function(m,v){return v===void 0&&(v=m),this.x=m,this.y=v,this},setRotation:function(m){return m===void 0&&(m=0),this.rotation=m,this},setRoundPixels:function(m){return this.roundPixels=m,this},setScene:function(m,v){v===void 0&&(v=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=m,this.isSceneCamera=v;var g=m.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(m,v){return v===void 0&&(v=m),this.scrollX=m,this.scrollY=v,this},setSize:function(m,v){return v===void 0&&(v=m),this.width=m,this.height=v,this},setViewport:function(m,v,g,T){return this.x=m,this.y=v,this.width=g,this.height=T,this},setZoom:function(m,v){return m===void 0&&(m=1),v===void 0&&(v=m),m===0&&(m=.001),v===0&&(v=.001),this.zoomX=m,this.zoomY=v,this},setMask:function(m,v){return v===void 0&&(v=!0),this.mask=m,this._maskCamera=v?this.cameraManager.default:this,this},clearMask:function(m){return m===void 0&&(m=!1),m&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var m={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(m.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),m},update:function(){},setIsSceneCamera:function(m){return this.isSceneCamera=m,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var m=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,v=this.sceneManager;m&&!this._customViewport?v.customViewports++:!m&&this._customViewport&&v.customViewports--,this.dirty=!0,this._customViewport=m}},destroy:function(){this.emit(i.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(m){this._x=m,this.updateSystem()}},y:{get:function(){return this._y},set:function(m){this._y=m,this.updateSystem()}},width:{get:function(){return this._width},set:function(m){this._width=m,this.updateSystem()}},height:{get:function(){return this._height},set:function(m){this._height=m,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(m){m!==this._scrollX&&(this._scrollX=m,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(m){m!==this._scrollY&&(this._scrollY=m,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(m){this._zoomX=m,this._zoomY=m,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(m){this._zoomX=m,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(m){this._zoomY=m,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(m){this._rotation=m,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});o.exports=p},47751:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(51052),l=t(79993),a=t(82897),r=t(56694),i=t(64937),n=t(53030),h=t(89787),d=t(42798),u=t(74118),p=t(93736),m=new r({Extends:s,Mixins:[i.PostPipeline],initialize:function(g,T,w,b){s.call(this,g,T,w,b),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new p(1,1),this.followOffset=new p,this.deadzone=null,this._follow=null},setDeadzone:function(v,g){if(v===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=v,this.deadzone.height=g):this.deadzone=new u(0,0,v,g),this._follow){var T=this.width/2,w=this.height/2,b=this._follow.x-this.followOffset.x,E=this._follow.y-this.followOffset.y;this.midPoint.set(b,E),this.scrollX=b-T,this.scrollY=E-w}l(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(v,g,T,w,b,E){return this.fadeEffect.start(!1,v,g,T,w,!0,b,E)},fadeOut:function(v,g,T,w,b,E){return this.fadeEffect.start(!0,v,g,T,w,!0,b,E)},fadeFrom:function(v,g,T,w,b,E,A){return this.fadeEffect.start(!1,v,g,T,w,b,E,A)},fade:function(v,g,T,w,b,E,A){return this.fadeEffect.start(!0,v,g,T,w,b,E,A)},flash:function(v,g,T,w,b,E,A){return this.flashEffect.start(v,g,T,w,b,E,A)},shake:function(v,g,T,w,b){return this.shakeEffect.start(v,g,T,w,b)},pan:function(v,g,T,w,b,E,A){return this.panEffect.start(v,g,T,w,b,E,A)},rotateTo:function(v,g,T,w,b,E,A){return this.rotateToEffect.start(v,g,T,w,b,E,A)},zoomTo:function(v,g,T,w,b,E){return this.zoomEffect.start(v,g,T,w,b,E)},preRender:function(){this.renderList.length=0;var v=this.width,g=this.height,T=v*.5,w=g*.5,b=this.zoom,E=this.matrix,A=v*this.originX,R=g*this.originY,I=this._follow,P=this.deadzone,N=this.scrollX,F=this.scrollY;P&&l(P,this.midPoint.x,this.midPoint.y);var O=!1;if(I&&!this.panEffect.isRunning){var D=this.lerp,L=I.x-this.followOffset.x,z=I.y-this.followOffset.y;P?(L<P.x?N=d(N,N-(P.x-L),D.x):L>P.right&&(N=d(N,N+(L-P.right),D.x)),z<P.y?F=d(F,F-(P.y-z),D.y):z>P.bottom&&(F=d(F,F+(z-P.bottom),D.y))):(N=d(N,L-A,D.x),F=d(F,z-R,D.y)),O=!0}this.useBounds&&(N=this.clampX(N),F=this.clampY(F)),this.scrollX=N,this.scrollY=F;var X=N+T,H=F+w;this.midPoint.set(X,H);var J=v/b,G=g/b,k=Math.floor(X-J/2),M=Math.floor(H-G/2);this.worldView.setTo(k,M,J,G),E.applyITRS(Math.floor(this.x+A),Math.floor(this.y+R),this.rotation,b,b),E.translate(-A,-R),this.shakeEffect.preRender(),O&&this.emit(h.FOLLOW_UPDATE,this,I)},setLerp:function(v,g){return v===void 0&&(v=1),g===void 0&&(g=v),this.lerp.set(v,g),this},setFollowOffset:function(v,g){return v===void 0&&(v=0),g===void 0&&(g=0),this.followOffset.set(v,g),this},startFollow:function(v,g,T,w,b,E){g===void 0&&(g=!1),T===void 0&&(T=1),w===void 0&&(w=T),b===void 0&&(b=0),E===void 0&&(E=b),this._follow=v,this.roundPixels=g,T=a(T,0,1),w=a(w,0,1),this.lerp.set(T,w),this.followOffset.set(b,E);var A=this.width/2,R=this.height/2,I=v.x-b,P=v.y-E;return this.midPoint.set(I,P),this.scrollX=I-A,this.scrollY=P-R,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(v,g){this.visible&&(this.rotateToEffect.update(v,g),this.panEffect.update(v,g),this.zoomEffect.update(v,g),this.shakeEffect.update(v,g),this.flashEffect.update(v,g),this.fadeEffect.update(v,g))},destroy:function(){this.resetFX(),s.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});o.exports=m},62382:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47751),l=t(56694),a=t(72632),r=t(91963),i=t(94287),n=t(40444),h=t(7599),d=new l({initialize:function(p){this.scene=p,this.systems=p.sys,this.roundPixels=p.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,p.sys.events.once(h.BOOT,this.boot,this),p.sys.events.on(h.START,this.start,this)},boot:function(){var u=this.systems;u.settings.cameras?this.fromJSON(u.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new s(0,0,u.scale.width,u.scale.height).setScene(this.scene),u.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){if(!this.main){var u=this.systems;u.settings.cameras?this.fromJSON(u.settings.cameras):this.add(),this.main=this.cameras[0]}var p=this.systems.events;p.on(h.UPDATE,this.update,this),p.once(h.SHUTDOWN,this.shutdown,this)},add:function(u,p,m,v,g,T){u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),g===void 0&&(g=!1),T===void 0&&(T="");var w=new s(u,p,m,v);return w.setName(T),w.setScene(this.scene),w.setRoundPixels(this.roundPixels),w.id=this.getNextID(),this.cameras.push(w),g&&(this.main=w),w},addExisting:function(u,p){p===void 0&&(p=!1);var m=this.cameras.indexOf(u);return m===-1?(u.id=this.getNextID(),u.setRoundPixels(this.roundPixels),this.cameras.push(u),p&&(this.main=u),u):null},getNextID:function(){for(var u=this.cameras,p=1,m=0;m<32;m++){for(var v=!1,g=0;g<u.length;g++){var T=u[g];if(T&&T.id===p){v=!0;continue}}if(v)p=p<<1;else return p}return 0},getTotal:function(u){u===void 0&&(u=!1);for(var p=0,m=this.cameras,v=0;v<m.length;v++){var g=m[v];(!u||u&&g.visible)&&p++}return p},fromJSON:function(u){Array.isArray(u)||(u=[u]);for(var p=this.scene.sys.scale.width,m=this.scene.sys.scale.height,v=0;v<u.length;v++){var g=u[v],T=a(g,"x",0),w=a(g,"y",0),b=a(g,"width",p),E=a(g,"height",m),A=this.add(T,w,b,E);A.name=a(g,"name",""),A.zoom=a(g,"zoom",1),A.rotation=a(g,"rotation",0),A.scrollX=a(g,"scrollX",0),A.scrollY=a(g,"scrollY",0),A.roundPixels=a(g,"roundPixels",!1),A.visible=a(g,"visible",!0);var R=a(g,"backgroundColor",!1);R&&A.setBackgroundColor(R);var I=a(g,"bounds",null);if(I){var P=a(I,"x",0),N=a(I,"y",0),F=a(I,"width",p),O=a(I,"height",m);A.setBounds(P,N,F,O)}}return this},getCamera:function(u){for(var p=this.cameras,m=0;m<p.length;m++)if(p[m].name===u)return p[m];return null},getCamerasBelowPointer:function(u){for(var p=this.cameras,m=u.x,v=u.y,g=[],T=0;T<p.length;T++){var w=p[T];w.visible&&w.inputEnabled&&i(w,m,v)&&g.unshift(w)}return g},remove:function(u,p){p===void 0&&(p=!0),Array.isArray(u)||(u=[u]);for(var m=0,v=this.cameras,g=0;g<u.length;g++){var T=v.indexOf(u[g]);T!==-1&&(p?v[T].destroy():v[T].renderList=[],v.splice(T,1),m++)}return!this.main&&v[0]&&(this.main=v[0]),m},render:function(u,p){for(var m=this.scene,v=this.cameras,g=0;g<v.length;g++){var T=v[g];if(T.visible&&T.alpha>0){T.preRender();var w=this.getVisibleChildren(p.getChildren(),T);u.render(m,w,T)}}},getVisibleChildren:function(u,p){return u.filter(function(m){return m.willRender(p)})},resetAll:function(){for(var u=0;u<this.cameras.length;u++)this.cameras[u].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(u,p){for(var m=0;m<this.cameras.length;m++)this.cameras[m].update(u,p)},onResize:function(u,p,m,v,g){for(var T=0;T<this.cameras.length;T++){var w=this.cameras[T];w._x===0&&w._y===0&&w._width===v&&w._height===g&&w.setSize(p.width,p.height)}},resize:function(u,p){for(var m=0;m<this.cameras.length;m++)this.cameras[m].setSize(u,p)},shutdown:function(){this.main=void 0;for(var u=0;u<this.cameras.length;u++)this.cameras[u].destroy();this.cameras=[];var p=this.systems.events;p.off(h.UPDATE,this.update,this),p.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(h.START,this.start,this),this.systems.events.off(h.DESTROY,this.destroy,this),this.systems.game.scale.off(n.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});r.register("CameraManager",d,"cameras"),o.exports=d},92522:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(89787),r=new l({initialize:function(n){this.camera=n,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,n,h,d,u,p,m,v){if(i===void 0&&(i=!0),n===void 0&&(n=1e3),h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=!1),m===void 0&&(m=null),v===void 0&&(v=this.camera.scene),!p&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=n,this.direction=i,this.progress=0,this.red=h,this.green=d,this.blue=u,this.alpha=i?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=m,this._onUpdateScope=v;var g=i?a.FADE_OUT_START:a.FADE_IN_START;return this.camera.emit(g,this.camera,this,n,h,d,u),this.camera},update:function(i,n){this.isRunning&&(this._elapsed+=n,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(i){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(i,n){if(!this.isRunning&&!this.isComplete)return!1;var h=this.camera,d=this.red/255,u=this.green/255,p=this.blue/255;return i.drawFillRect(h.x,h.y,h.width,h.height,n(p,u,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var i=this.direction?a.FADE_OUT_COMPLETE:a.FADE_IN_COMPLETE;this.camera.emit(i,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=r},22151:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(89787),r=new l({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(i,n,h,d,u,p,m){return i===void 0&&(i=250),n===void 0&&(n=255),h===void 0&&(h=255),d===void 0&&(d=255),u===void 0&&(u=!1),p===void 0&&(p=null),m===void 0&&(m=this.camera.scene),!u&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=i,this.progress=0,this.red=n,this.green=h,this.blue=d,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=m,this.camera.emit(a.FLASH_START,this.camera,this,i,n,h,d),this.camera)},update:function(i,n){this.isRunning&&(this._elapsed+=n,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(i){if(!this.isRunning)return!1;var n=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(i,n){if(!this.isRunning)return!1;var h=this.camera,d=this.red/255,u=this.green/255,p=this.blue/255;return i.drawFillRect(h.x,h.y,h.width,h.height,n(p,u,d,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=r},37551:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(35060),r=t(89787),i=t(93736),n=new l({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=new i,this.current=new i,this.destination=new i,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,d,u,p,m,v,g){u===void 0&&(u=1e3),p===void 0&&(p=a.Linear),m===void 0&&(m=!1),v===void 0&&(v=null),g===void 0&&(g=this.camera.scene);var T=this.camera;return!m&&this.isRunning||(this.isRunning=!0,this.duration=u,this.progress=0,this.source.set(T.scrollX,T.scrollY),this.destination.set(h,d),T.getScroll(h,d,this.current),typeof p=="string"&&a.hasOwnProperty(p)?this.ease=a[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=g,this.camera.emit(r.PAN_START,this.camera,this,u,h,d)),T},update:function(h,d){if(this.isRunning){this._elapsed+=d;var u=s(this._elapsed/this.duration,0,1);this.progress=u;var p=this.camera;if(this._elapsed<this.duration){var m=this.ease(u);p.getScroll(this.destination.x,this.destination.y,this.current);var v=this.source.x+(this.current.x-this.source.x)*m,g=this.source.y+(this.current.y-this.source.y)*m;p.setScroll(v,g),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,u,v,g)}else p.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,u,p.scrollX,p.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=n},1771:(o,y,t)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var s=t(82897),l=t(56694),a=t(89787),r=t(35060),i=new l({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(n,h,d,u,p,m,v){d===void 0&&(d=1e3),u===void 0&&(u=r.Linear),p===void 0&&(p=!1),m===void 0&&(m=null),v===void 0&&(v=this.camera.scene),h===void 0&&(h=!1),this.shortestPath=h;var g=n;n<0?(g=-1*n,this.clockwise=!1):this.clockwise=!0;var T=360*Math.PI/180;g=g-Math.floor(g/T)*T;var w=this.camera;if(!p&&this.isRunning)return w;if(this.isRunning=!0,this.duration=d,this.progress=0,this.source=w.rotation,this.destination=g,typeof u=="string"&&r.hasOwnProperty(u)?this.ease=r[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=m,this._onUpdateScope=v,this.shortestPath){var b=0,E=0;this.destination>this.source?b=Math.abs(this.destination-this.source):b=Math.abs(this.destination+T)-this.source,this.source>this.destination?E=Math.abs(this.source-this.destination):E=Math.abs(this.source+T)-this.destination,b<E?this.clockwise=!0:b>E&&(this.clockwise=!1)}return this.camera.emit(a.ROTATE_START,this.camera,this,d,g),w},update:function(n,h){if(this.isRunning){this._elapsed+=h;var d=s(this._elapsed/this.duration,0,1);this.progress=d;var u=this.camera;if(this._elapsed<this.duration){var p=this.ease(d);this.current=u.rotation;var m=0,v=360*Math.PI/180,g=this.destination,T=this.current;this.clockwise===!1&&(g=this.current,T=this.destination),g>=T?m=Math.abs(g-T):m=Math.abs(g+v)-T;var w=0;this.clockwise?w=u.rotation+m*p:w=u.rotation-m*p,u.rotation=w,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,d,w)}else u.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,d,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=i},3241:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(89787),r=t(93736),i=new l({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.intensity=new r,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(n,h,d,u,p){return n===void 0&&(n=100),h===void 0&&(h=.05),d===void 0&&(d=!1),u===void 0&&(u=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,typeof h=="number"?this.intensity.set(h):this.intensity.set(h.x,h.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=u,this._onUpdateScope=p,this.camera.emit(a.SHAKE_START,this.camera,this,n,h),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(n,h){if(this.isRunning)if(this._elapsed+=h,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var d=this.intensity,u=this.camera.width,p=this.camera.height,m=this.camera.zoom;this._offsetX=(Math.random()*d.x*u*2-d.x*u)*m,this._offsetY=(Math.random()*d.y*p*2-d.y*p)*m,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});o.exports=i},13383:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(35060),r=t(89787),i=new l({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,h,d,u,p,m){h===void 0&&(h=1e3),d===void 0&&(d=a.Linear),u===void 0&&(u=!1),p===void 0&&(p=null),m===void 0&&(m=this.camera.scene);var v=this.camera;return!u&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source=v.zoom,this.destination=n,typeof d=="string"&&a.hasOwnProperty(d)?this.ease=a[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=m,this.camera.emit(r.ZOOM_START,this.camera,this,h,n)),v},update:function(n,h){this.isRunning&&(this._elapsed+=h,this.progress=s(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=i},53030:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Fade:t(92522),Flash:t(22151),Pan:t(37551),Shake:t(3241),RotateTo:t(1771),Zoom:t(13383)}},39577:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameradestroy"},85373:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeincomplete"},92057:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeinstart"},1903:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutcomplete"},96131:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutstart"},85409:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashcomplete"},25500:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashstart"},44071:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="followupdate"},19818:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapancomplete"},80002:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapanstart"},87966:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},74217:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},34805:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatecomplete"},30408:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatestart"},49856:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakecomplete"},69189:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakestart"},67657:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomcomplete"},14229:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomstart"},89787:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DESTROY:t(39577),FADE_IN_COMPLETE:t(85373),FADE_IN_START:t(92057),FADE_OUT_COMPLETE:t(1903),FADE_OUT_START:t(96131),FLASH_COMPLETE:t(85409),FLASH_START:t(25500),FOLLOW_UPDATE:t(44071),PAN_COMPLETE:t(19818),PAN_START:t(80002),POST_RENDER:t(87966),PRE_RENDER:t(74217),ROTATE_COMPLETE:t(34805),ROTATE_START:t(30408),SHAKE_COMPLETE:t(49856),SHAKE_START:t(69189),ZOOM_COMPLETE:t(67657),ZOOM_START:t(14229)}},32356:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Camera:t(47751),BaseCamera:t(51052),CameraManager:t(62382),Effects:t(53030),Events:t(89787)}},84219:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(10850),a=new s({initialize:function(i){this.camera=l(i,"camera",null),this.left=l(i,"left",null),this.right=l(i,"right",null),this.up=l(i,"up",null),this.down=l(i,"down",null),this.zoomIn=l(i,"zoomIn",null),this.zoomOut=l(i,"zoomOut",null),this.zoomSpeed=l(i,"zoomSpeed",.01),this.minZoom=l(i,"minZoom",.001),this.maxZoom=l(i,"maxZoom",1e3),this.speedX=0,this.speedY=0;var n=l(i,"speed",null);typeof n=="number"?(this.speedX=n,this.speedY=n):(this.speedX=l(i,"speed.x",0),this.speedY=l(i,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var i=this.camera;this.up&&this.up.isDown?i.scrollY-=this.speedY*r|0:this.down&&this.down.isDown&&(i.scrollY+=this.speedY*r|0),this.left&&this.left.isDown?i.scrollX-=this.speedX*r|0:this.right&&this.right.isDown&&(i.scrollX+=this.speedX*r|0),this.zoomIn&&this.zoomIn.isDown?(i.zoom-=this.zoomSpeed,i.zoom<this.minZoom&&(i.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(i.zoom+=this.zoomSpeed,i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=a},69370:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(10850),a=new s({initialize:function(i){this.camera=l(i,"camera",null),this.left=l(i,"left",null),this.right=l(i,"right",null),this.up=l(i,"up",null),this.down=l(i,"down",null),this.zoomIn=l(i,"zoomIn",null),this.zoomOut=l(i,"zoomOut",null),this.zoomSpeed=l(i,"zoomSpeed",.01),this.minZoom=l(i,"minZoom",.001),this.maxZoom=l(i,"maxZoom",1e3),this.accelX=0,this.accelY=0;var n=l(i,"acceleration",null);typeof n=="number"?(this.accelX=n,this.accelY=n):(this.accelX=l(i,"acceleration.x",0),this.accelY=l(i,"acceleration.y",0)),this.dragX=0,this.dragY=0;var h=l(i,"drag",null);typeof h=="number"?(this.dragX=h,this.dragY=h):(this.dragX=l(i,"drag.x",0),this.dragY=l(i,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var d=l(i,"maxSpeed",null);typeof d=="number"?(this.maxSpeedX=d,this.maxSpeedY=d):(this.maxSpeedX=l(i,"maxSpeed.x",0),this.maxSpeedY=l(i,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var i=this.camera;this._speedX>0?(this._speedX-=this.dragX*r,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*r,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*r,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*r,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(i.scrollX-=this._speedX*r|0),this._speedY!==0&&(i.scrollY-=this._speedY*r|0),this._zoom!==0&&(i.zoom+=this._zoom,i.zoom<this.minZoom?i.zoom=this.minZoom:i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=a},6524:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FixedKeyControl:t(84219),SmoothedKeyControl:t(69370)}},44143:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Controls:t(6524),Scene2D:t(32356)}},86459:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={VERSION:"3.70.0",BlendModes:t(95723),ScaleModes:t(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};o.exports=s},14033:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(86459),a=t(18360),r=t(77290),i=t(72632),n=t(10850),h=t(42911),d=t(72283),u=t(5923),p=t(65641),m=t(93222),v=new s({initialize:function(T){T===void 0&&(T={});var w=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],b="#ffffff",E=n(T,"scale",null);this.width=n(E,"width",1024,T),this.height=n(E,"height",768,T),this.zoom=n(E,"zoom",1,T),this.parent=n(E,"parent",void 0,T),this.scaleMode=n(E,E?"mode":"scaleMode",0,T),this.expandParent=n(E,"expandParent",!0,T),this.autoRound=n(E,"autoRound",!1,T),this.autoCenter=n(E,"autoCenter",0,T),this.resizeInterval=n(E,"resizeInterval",500,T),this.fullscreenTarget=n(E,"fullscreenTarget",null,T),this.minWidth=n(E,"min.width",0,T),this.maxWidth=n(E,"max.width",0,T),this.minHeight=n(E,"min.height",0,T),this.maxHeight=n(E,"max.height",0,T),this.renderType=n(T,"type",l.AUTO),this.canvas=n(T,"canvas",null),this.context=n(T,"context",null),this.canvasStyle=n(T,"canvasStyle",null),this.customEnvironment=n(T,"customEnvironment",!1),this.sceneConfig=n(T,"scene",null),this.seed=n(T,"seed",[(Date.now()*Math.random()).toString()]),u.RND=new u.RandomDataGenerator(this.seed),this.gameTitle=n(T,"title",""),this.gameURL=n(T,"url","https://phaser.io"),this.gameVersion=n(T,"version",""),this.autoFocus=n(T,"autoFocus",!0),this.stableSort=n(T,"stableSort",-1),this.stableSort===-1&&(this.stableSort=r.browser.es2019?1:0),r.features.stableSort=this.stableSort,this.domCreateContainer=n(T,"dom.createContainer",!1),this.domPointerEvents=n(T,"dom.pointerEvents","none"),this.inputKeyboard=n(T,"input.keyboard",!0),this.inputKeyboardEventTarget=n(T,"input.keyboard.target",window),this.inputKeyboardCapture=n(T,"input.keyboard.capture",[]),this.inputMouse=n(T,"input.mouse",!0),this.inputMouseEventTarget=n(T,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(T,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(T,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(T,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(T,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(T,"input.touch",r.input.touch),this.inputTouchEventTarget=n(T,"input.touch.target",null),this.inputTouchCapture=n(T,"input.touch.capture",!0),this.inputActivePointers=n(T,"input.activePointers",1),this.inputSmoothFactor=n(T,"input.smoothFactor",0),this.inputWindowEvents=n(T,"input.windowEvents",!0),this.inputGamepad=n(T,"input.gamepad",!1),this.inputGamepadEventTarget=n(T,"input.gamepad.target",window),this.disableContextMenu=n(T,"disableContextMenu",!1),this.audio=n(T,"audio",{}),this.hideBanner=n(T,"banner",null)===!1,this.hidePhaser=n(T,"banner.hidePhaser",!1),this.bannerTextColor=n(T,"banner.text",b),this.bannerBackgroundColor=n(T,"banner.background",w),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(T,"fps",null),this.disablePreFX=n(T,"disablePreFX",!1),this.disablePostFX=n(T,"disablePostFX",!1);var A=n(T,"render",null);this.pipeline=n(A,"pipeline",null,T),this.autoMobilePipeline=n(A,"autoMobilePipeline",!0,T),this.defaultPipeline=n(A,"defaultPipeline",p.MULTI_PIPELINE,T),this.antialias=n(A,"antialias",!0,T),this.antialiasGL=n(A,"antialiasGL",!0,T),this.mipmapFilter=n(A,"mipmapFilter","",T),this.desynchronized=n(A,"desynchronized",!1,T),this.roundPixels=n(A,"roundPixels",!0,T),this.pixelArt=n(A,"pixelArt",this.zoom!==1,T),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(A,"transparent",!1,T),this.clearBeforeRender=n(A,"clearBeforeRender",!0,T),this.preserveDrawingBuffer=n(A,"preserveDrawingBuffer",!1,T),this.premultipliedAlpha=n(A,"premultipliedAlpha",!0,T),this.failIfMajorPerformanceCaveat=n(A,"failIfMajorPerformanceCaveat",!1,T),this.powerPreference=n(A,"powerPreference","default",T),this.batchSize=n(A,"batchSize",4096,T),this.maxTextures=n(A,"maxTextures",-1,T),this.maxLights=n(A,"maxLights",10,T);var R=n(T,"backgroundColor",0);this.backgroundColor=m(R),this.transparent&&(this.backgroundColor=m(0),this.backgroundColor.alpha=0),this.preBoot=n(T,"callbacks.preBoot",d),this.postBoot=n(T,"callbacks.postBoot",d),this.physics=n(T,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(T,"loader.baseURL",""),this.loaderPath=n(T,"loader.path",""),this.loaderMaxParallelDownloads=n(T,"loader.maxParallelDownloads",r.os.android?6:32),this.loaderCrossOrigin=n(T,"loader.crossOrigin",void 0),this.loaderResponseType=n(T,"loader.responseType",""),this.loaderAsync=n(T,"loader.async",!0),this.loaderUser=n(T,"loader.user",""),this.loaderPassword=n(T,"loader.password",""),this.loaderTimeout=n(T,"loader.timeout",0),this.loaderWithCredentials=n(T,"loader.withCredentials",!1),this.loaderImageLoadType=n(T,"loader.imageLoadType","XHR"),this.loaderLocalScheme=n(T,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=n(T,"fx.glow.quality",.1),this.glowFXDistance=n(T,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var I=n(T,"plugins",null),P=a.DefaultScene;I&&(Array.isArray(I)?this.defaultPlugins=I:h(I)&&(this.installGlobalPlugins=i(I,"global",[]),this.installScenePlugins=i(I,"scene",[]),Array.isArray(I.default)?P=I.default:Array.isArray(I.defaultMerge)&&(P=P.concat(I.defaultMerge)))),this.defaultPlugins=P;var N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(T,"images.default",N+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(T,"images.missing",N+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(T,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=l.WEBGL:window.FORCE_CANVAS&&(this.renderType=l.CANVAS))}});o.exports=v},50150:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70616),l=t(61068),a=t(86459),r=t(90185),i=function(n){var h=n.config;if((h.customEnvironment||h.canvas)&&h.renderType===a.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!h.customEnvironment&&!h.canvas&&h.renderType!==a.HEADLESS)if(h.renderType===a.AUTO&&(h.renderType=r.webGL?a.WEBGL:a.CANVAS),h.renderType===a.WEBGL){if(!r.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(h.renderType===a.CANVAS){if(!r.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+h.renderType);h.antialias||l.disableSmoothing();var d=n.scale.baseSize,u=d.width,p=d.height;if(h.canvas?(n.canvas=h.canvas,n.canvas.width=u,n.canvas.height=p):n.canvas=l.create(n,u,p,h.renderType),h.canvasStyle&&(n.canvas.style=h.canvasStyle),h.antialias||s.setCrisp(n.canvas),h.renderType!==a.HEADLESS){var m,v;m=t(91135),v=t(11857),h.renderType===a.WEBGL?n.renderer=new v(n):(n.renderer=new m(n),n.context=n.renderer.gameContext)}};o.exports=i},77291:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86459),l=function(a){var r=a.config;if(!r.hideBanner){var i="WebGL";r.renderType===s.CANVAS?i="Canvas":r.renderType===s.HEADLESS&&(i="Headless");var n=r.audio,h=a.device.audio,d;if(h.webAudio&&!n.disableWebAudio?d="Web Audio":n.noAudio||!h.webAudio&&!h.audioData?d="No Audio":d="HTML5 Audio",a.device.browser.ie)window.console&&console.log("Phaser v"+s.VERSION+" / https://phaser.io");else{var u="",p=[u];if(Array.isArray(r.bannerBackgroundColor)){var m;r.bannerBackgroundColor.forEach(function(g){u=u.concat("%c "),p.push("background: "+g),m=g}),p[p.length-1]="color: "+r.bannerTextColor+"; background: "+m}else u=u.concat("%c "),p.push("color: "+r.bannerTextColor+"; background: "+r.bannerBackgroundColor);p.push("background: transparent"),r.gameTitle&&(u=u.concat(r.gameTitle),r.gameVersion&&(u=u.concat(" v"+r.gameVersion)),r.hidePhaser||(u=u.concat(" / ")));var v="";r.hidePhaser||(u=u.concat("Phaser v"+s.VERSION+v+" ("+i+" | "+d+")")),u=u.concat(" %c "+r.gameURL),p[0]=u,console.log.apply(console,p)}}};o.exports=l},15213:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99584),l=t(90249),a=t(43474),r=t(61068),i=t(56694),n=t(14033),h=t(85178),d=t(50150),u=t(81078),p=t(77291),m=t(77290),v=t(21546),g=t(6659),T=t(97081),w=t(69898),b=t(91963),E=t(49274),A=t(756),R=t(13553),I=t(38203),P=t(6237),N=t(26617),F=t(26493),O=t(84191),D=new i({initialize:function(z){this.config=new n(z),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new l(this),this.textures=new P(this),this.cache=new a(this),this.registry=new u(this,new g),this.input=new w(this,this.config),this.scene=new R(this,this.config.sceneConfig),this.device=m,this.scale=new A(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new N(this,this.config.fps),this.plugins=new E(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,v(this.boot.bind(this))},boot:function(){if(!b.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),d(this),h(this),p(this),s(this.canvas,this.config.parent),this.textures.once(I.READY,this.texturesReady,this),this.events.emit(T.BOOT)},texturesReady:function(){this.events.emit(T.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),F(this);var L=this.events;L.on(T.HIDDEN,this.onHidden,this),L.on(T.VISIBLE,this.onVisible,this),L.on(T.BLUR,this.onBlur,this),L.on(T.FOCUS,this.onFocus,this)},step:function(L,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var X=this.events;X.emit(T.PRE_STEP,L,z),X.emit(T.STEP,L,z),this.scene.update(L,z),X.emit(T.POST_STEP,L,z);var H=this.renderer;H.preRender(),X.emit(T.PRE_RENDER,H,L,z),this.scene.render(H),H.postRender(),X.emit(T.POST_RENDER,H,L,z)}},headlessStep:function(L,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var X=this.events;X.emit(T.PRE_STEP,L,z),X.emit(T.STEP,L,z),this.scene.update(L,z),X.emit(T.POST_STEP,L,z),this.scene.isProcessing=!1,X.emit(T.PRE_RENDER,null,L,z),X.emit(T.POST_RENDER,null,L,z)}},onHidden:function(){this.loop.pause(),this.events.emit(T.PAUSE)},pause:function(){var L=this.isPaused;this.isPaused=!0,L||this.events.emit(T.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(T.RESUME)},resume:function(){var L=this.isPaused;this.isPaused=!1,L&&this.events.emit(T.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(L,z){z===void 0&&(z=!1),this.pendingDestroy=!0,this.removeCanvas=L,this.noReturn=z},runDestroy:function(){this.scene.destroy(),this.events.emit(T.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(r.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});o.exports=D},26617:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(10850),a=t(72283),r=t(27385),i=new s({initialize:function(h,d){this.game=h,this.raf=new r,this.started=!1,this.running=!1,this.minFps=l(d,"min",5),this.targetFps=l(d,"target",60),this.fpsLimit=l(d,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=a,this.forceSetTimeOut=l(d,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=l(d,"deltaHistory",10),this.panicMax=l(d,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=l(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var n=window.performance.now();this.time=n,this.lastTime=n,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=Math.min(this._target,this.deltaHistory[h]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(n){if(this.started)return this;this.started=!0,this.running=!0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=n;var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target)},smoothDelta:function(n){var h=this.deltaIndex,d=this.deltaHistory,u=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=d[h],n=Math.min(n,this._min)),d[h]=n,this.deltaIndex++,this.deltaIndex>=u&&(this.deltaIndex=0);for(var p=0,m=0;m<u;m++)p+=d[m];return p/=u,p},updateFPS:function(n){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0},stepLimitFPS:function(n){this.now=n;var h=Math.max(0,n-this.lastTime);this.rawDelta=h,this.time+=this.rawDelta,this.smoothStep&&(h=this.smoothDelta(h)),this.delta+=h,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(n,this.delta),this.delta=0),this.lastTime=n,this.frame++},step:function(n){this.now=n;var h=Math.max(0,n-this.lastTime);this.rawDelta=h,this.time+=this.rawDelta,this.smoothStep&&(h=this.smoothDelta(h)),this.delta=h,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.callback(n,h),this.lastTime=n,this.frame++},tick:function(){var n=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(n):this.step(n)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(n){n===void 0&&(n=!1);var h=window.performance.now();if(!this.running){n&&(this.startTime+=-this.lastTime+(this.lastTime+h));var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=h+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});o.exports=i},26493:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97081),l=function(a){var r,i=a.events;if(document.hidden!==void 0)r="visibilitychange";else{var n=["webkit","moz","ms"];n.forEach(function(d){document[d+"Hidden"]!==void 0&&(document.hidden=function(){return document[d+"Hidden"]},r=d+"visibilitychange")})}var h=function(d){document.hidden||d.type==="pause"?i.emit(s.HIDDEN):i.emit(s.VISIBLE)};r&&document.addEventListener(r,h,!1),window.onblur=function(){i.emit(s.BLUR)},window.onfocus=function(){i.emit(s.FOCUS)},window.focus&&a.config.autoFocus&&window.focus()};o.exports=l},41651:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="blur"},5520:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},51673:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="contextlost"},25055:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},23767:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="focus"},57564:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="hidden"},38327:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},43807:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},73652:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="poststep"},780:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},13781:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prestep"},38247:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},29129:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},34994:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="step"},55237:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="systemready"},98704:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="visible"},97081:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BLUR:t(41651),BOOT:t(5520),CONTEXT_LOST:t(51673),DESTROY:t(25055),FOCUS:t(23767),HIDDEN:t(57564),PAUSE:t(38327),POST_RENDER:t(43807),POST_STEP:t(73652),PRE_RENDER:t(780),PRE_STEP:t(13781),READY:t(38247),RESUME:t(29129),STEP:t(34994),SYSTEM_READY:t(55237),VISIBLE:t(98704)}},80293:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Config:t(14033),CreateRenderer:t(50150),DebugHeader:t(77291),Events:t(97081),TimeStep:t(26617),VisibilityHandler:t(26493)}},52780:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(81543),l=t(61068),a=t(10850),r=function(i){var n=a(i,"data",[]),h=a(i,"canvas",null),d=a(i,"palette",s),u=a(i,"pixelWidth",1),p=a(i,"pixelHeight",u),m=a(i,"resizeCanvas",!0),v=a(i,"clearCanvas",!0),g=a(i,"preRender",null),T=a(i,"postRender",null),w=Math.floor(Math.abs(n[0].length*u)),b=Math.floor(Math.abs(n.length*p));h||(h=l.create2D(this,w,b),m=!1,v=!1),m&&(h.width=w,h.height=b);var E=h.getContext("2d",{willReadFrequently:!0});v&&E.clearRect(0,0,w,b),g&&g(h,E);for(var A=0;A<n.length;A++)for(var R=n[A],I=0;I<R.length;I++){var P=R[I];P!=="."&&P!==" "&&(E.fillStyle=d[P],E.fillRect(I*u,A*p,u,p))}return T&&T(h,E),h};o.exports=r},84106:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GenerateTexture:t(52780),Palettes:t(25235)}},81543:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARNE16:t(81543),C64:t(75846),CGA:t(83206),JMP:t(13194),MSX:t(50686)}},63120:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(34631),a=t(38517),r=t(93736),i=new s({Extends:a,initialize:function(h,d,u,p){a.call(this,"CubicBezierCurve"),Array.isArray(h)&&(p=new r(h[6],h[7]),u=new r(h[4],h[5]),d=new r(h[2],h[3]),h=new r(h[0],h[1])),this.p0=h,this.p1=d,this.p2=u,this.p3=p},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,h){h===void 0&&(h=new r);var d=this.p0,u=this.p1,p=this.p2,m=this.p3;return h.set(l(n,d.x,u.x,p.x,m.x),l(n,d.y,u.y,p.y,m.y))},draw:function(n,h){h===void 0&&(h=32);var d=this.getPoints(h);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var u=1;u<d.length;u++)n.lineTo(d[u].x,d[u].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});i.fromJSON=function(n){var h=n.points,d=new r(h[0],h[1]),u=new r(h[2],h[3]),p=new r(h[4],h[5]),m=new r(h[6],h[7]);return new i(d,u,p,m)},o.exports=i},38517:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(80222),a=t(74118),r=t(93736),i=new s({initialize:function(h){this.type=h,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new r,this._tmpVec2B=new r},draw:function(n,h){return h===void 0&&(h=32),n.strokePoints(this.getPoints(h))},getBounds:function(n,h){n||(n=new a),h===void 0&&(h=16);var d=this.getLength();h>d&&(h=d/2);var u=Math.max(1,Math.round(d/h));return l(this.getSpacedPoints(u),n)},getDistancePoints:function(n){var h=this.getLength(),d=Math.max(1,h/n);return this.getSpacedPoints(d)},getEndPoint:function(n){return n===void 0&&(n=new r),this.getPointAt(1,n)},getLength:function(){var n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var h=[],d,u=this.getPoint(0,this._tmpVec2A),p=0;h.push(0);for(var m=1;m<=n;m++)d=this.getPoint(m/n,this._tmpVec2B),p+=d.distance(u),h.push(p),u.copy(d);return this.cacheArcLengths=h,h},getPointAt:function(n,h){var d=this.getUtoTmapping(n);return this.getPoint(d,h)},getPoints:function(n,h,d){d===void 0&&(d=[]),n||(h?n=this.getLength()/h:n=this.defaultDivisions);for(var u=0;u<=n;u++)d.push(this.getPoint(u/n));return d},getRandomPoint:function(n){return n===void 0&&(n=new r),this.getPoint(Math.random(),n)},getSpacedPoints:function(n,h,d){d===void 0&&(d=[]),n||(h?n=this.getLength()/h:n=this.defaultDivisions);for(var u=0;u<=n;u++){var p=this.getUtoTmapping(u/n,null,n);d.push(this.getPoint(p))}return d},getStartPoint:function(n){return n===void 0&&(n=new r),this.getPointAt(0,n)},getTangent:function(n,h){h===void 0&&(h=new r);var d=1e-4,u=n-d,p=n+d;return u<0&&(u=0),p>1&&(p=1),this.getPoint(u,this._tmpVec2A),this.getPoint(p,h),h.subtract(this._tmpVec2A).normalize()},getTangentAt:function(n,h){var d=this.getUtoTmapping(n);return this.getTangent(d,h)},getTFromDistance:function(n,h){return n<=0?0:this.getUtoTmapping(0,n,h)},getUtoTmapping:function(n,h,d){var u=this.getLengths(d),p=0,m=u.length,v;h?v=Math.min(h,u[m-1]):v=n*u[m-1];for(var g=0,T=m-1,w;g<=T;)if(p=Math.floor(g+(T-g)/2),w=u[p]-v,w<0)g=p+1;else if(w>0)T=p-1;else{T=p;break}if(p=T,u[p]===v)return p/(m-1);var b=u[p],E=u[p+1],A=E-b,R=(v-b)/A;return(p+R)/(m-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});o.exports=i},48835:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(38517),a=t(75606),r=t(10850),i=t(23701),n=t(93736),h=new s({Extends:l,initialize:function(u,p,m,v,g,T,w,b){if(typeof u=="object"){var E=u;u=r(E,"x",0),p=r(E,"y",0),m=r(E,"xRadius",0),v=r(E,"yRadius",m),g=r(E,"startAngle",0),T=r(E,"endAngle",360),w=r(E,"clockwise",!1),b=r(E,"rotation",0)}else v===void 0&&(v=m),g===void 0&&(g=0),T===void 0&&(T=360),w===void 0&&(w=!1),b===void 0&&(b=0);l.call(this,"EllipseCurve"),this.p0=new n(u,p),this._xRadius=m,this._yRadius=v,this._startAngle=a(g),this._endAngle=a(T),this._clockwise=w,this._rotation=a(b)},getStartPoint:function(d){return d===void 0&&(d=new n),this.getPoint(0,d)},getResolution:function(d){return d*2},getPoint:function(d,u){u===void 0&&(u=new n);for(var p=Math.PI*2,m=this._endAngle-this._startAngle,v=Math.abs(m)<Number.EPSILON;m<0;)m+=p;for(;m>p;)m-=p;m<Number.EPSILON&&(v?m=0:m=p),this._clockwise&&!v&&(m===p?m=-p:m=m-p);var g=this._startAngle+d*m,T=this.p0.x+this._xRadius*Math.cos(g),w=this.p0.y+this._yRadius*Math.sin(g);if(this._rotation!==0){var b=Math.cos(this._rotation),E=Math.sin(this._rotation),A=T-this.p0.x,R=w-this.p0.y;T=A*b-R*E+this.p0.x,w=A*E+R*b+this.p0.y}return u.set(T,w)},setXRadius:function(d){return this.xRadius=d,this},setYRadius:function(d){return this.yRadius=d,this},setWidth:function(d){return this.xRadius=d/2,this},setHeight:function(d){return this.yRadius=d/2,this},setStartAngle:function(d){return this.startAngle=d,this},setEndAngle:function(d){return this.endAngle=d,this},setClockwise:function(d){return this.clockwise=d,this},setRotation:function(d){return this.rotation=d,this},x:{get:function(){return this.p0.x},set:function(d){this.p0.x=d}},y:{get:function(){return this.p0.y},set:function(d){this.p0.y=d}},xRadius:{get:function(){return this._xRadius},set:function(d){this._xRadius=d}},yRadius:{get:function(){return this._yRadius},set:function(d){this._yRadius=d}},startAngle:{get:function(){return i(this._startAngle)},set:function(d){this._startAngle=a(d)}},endAngle:{get:function(){return i(this._endAngle)},set:function(d){this._endAngle=a(d)}},clockwise:{get:function(){return this._clockwise},set:function(d){this._clockwise=d}},angle:{get:function(){return i(this._rotation)},set:function(d){this._rotation=a(d)}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:i(this._startAngle),endAngle:i(this._endAngle),clockwise:this._clockwise,rotation:i(this._rotation)}}});h.fromJSON=function(d){return new h(d)},o.exports=h},58084:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(38517),a=t(80222),r=t(74118),i=t(93736),n=new s({Extends:l,initialize:function(d,u){l.call(this,"LineCurve"),Array.isArray(d)&&(u=new i(d[2],d[3]),d=new i(d[0],d[1])),this.p0=d,this.p1=u,this.arcLengthDivisions=1},getBounds:function(h){return h===void 0&&(h=new r),a([this.p0,this.p1],h)},getStartPoint:function(h){return h===void 0&&(h=new i),h.copy(this.p0)},getResolution:function(h){return h===void 0&&(h=1),h},getPoint:function(h,d){return d===void 0&&(d=new i),h===1?d.copy(this.p1):(d.copy(this.p1).subtract(this.p0).scale(h).add(this.p0),d)},getPointAt:function(h,d){return this.getPoint(h,d)},getTangent:function(h,d){return d===void 0&&(d=new i),d.copy(this.p1).subtract(this.p0).normalize(),d},getUtoTmapping:function(h,d,u){var p;if(d){var m=this.getLengths(u),v=m[m.length-1],g=Math.min(d,v);p=g/v}else p=h;return p},draw:function(h){return h.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),h},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});n.fromJSON=function(h){var d=h.points,u=new i(d[0],d[1]),p=new i(d[2],d[3]);return new n(u,p)},o.exports=n},64761:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(38517),a=t(16252),r=t(93736),i=new s({Extends:l,initialize:function(h,d,u){l.call(this,"QuadraticBezierCurve"),Array.isArray(h)&&(u=new r(h[4],h[5]),d=new r(h[2],h[3]),h=new r(h[0],h[1])),this.p0=h,this.p1=d,this.p2=u},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,h){h===void 0&&(h=new r);var d=this.p0,u=this.p1,p=this.p2;return h.set(a(n,d.x,u.x,p.x),a(n,d.y,u.y,p.y))},draw:function(n,h){h===void 0&&(h=32);var d=this.getPoints(h);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var u=1;u<d.length;u++)n.lineTo(d[u].x,d[u].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});i.fromJSON=function(n){var h=n.points,d=new r(h[0],h[1]),u=new r(h[2],h[3]),p=new r(h[4],h[5]);return new i(d,u,p)},o.exports=i},11956:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14976),l=t(56694),a=t(38517),r=t(93736),i=new l({Extends:a,initialize:function(h){h===void 0&&(h=[]),a.call(this,"SplineCurve"),this.points=[],this.addPoints(h)},addPoints:function(n){for(var h=0;h<n.length;h++){var d=new r;typeof n[h]=="number"?(d.x=n[h],d.y=n[h+1],h++):Array.isArray(n[h])?(d.x=n[h][0],d.y=n[h][1]):(d.x=n[h].x,d.y=n[h].y),this.points.push(d)}return this},addPoint:function(n,h){var d=new r(n,h);return this.points.push(d),d},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.points[0])},getResolution:function(n){return n*this.points.length},getPoint:function(n,h){h===void 0&&(h=new r);var d=this.points,u=(d.length-1)*n,p=Math.floor(u),m=u-p,v=d[p===0?p:p-1],g=d[p],T=d[p>d.length-2?d.length-1:p+1],w=d[p>d.length-3?d.length-1:p+2];return h.set(s(m,v.x,g.x,T.x,w.x),s(m,v.y,g.y,T.y,w.y))},toJSON:function(){for(var n=[],h=0;h<this.points.length;h++)n.push(this.points[h].x),n.push(this.points[h].y);return{type:this.type,points:n}}});i.fromJSON=function(n){return new i(n.points)},o.exports=i},73962:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Path:t(12822),MoveTo:t(53639),CubicBezier:t(63120),Curve:t(38517),Ellipse:t(48835),Line:t(58084),QuadraticBezier:t(64761),Spline:t(11956)}},53639:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93736),a=new s({initialize:function(i,n){this.active=!1,this.p0=new l(i,n)},getPoint:function(r,i){return i===void 0&&(i=new l),i.copy(this.p0)},getPointAt:function(r,i){return this.getPoint(r,i)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});o.exports=a},12822:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(63120),a=t(48835),r=t(61286),i=t(58084),n=t(53639),h=t(64761),d=t(74118),u=t(11956),p=t(93736),m=t(83392),v=new s({initialize:function(T,w){T===void 0&&(T=0),w===void 0&&(w=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new p,this._tmpVec2A=new p,this._tmpVec2B=new p,typeof T=="object"?this.fromJSON(T):this.startPoint.set(T,w)},add:function(g){return this.curves.push(g),this},circleTo:function(g,T,w){return T===void 0&&(T=!1),this.ellipseTo(g,g,0,360,T,w)},closePath:function(){var g=this.curves[0].getPoint(0),T=this.curves[this.curves.length-1].getPoint(1);return g.equals(T)||this.curves.push(new i(T,g)),this},cubicBezierTo:function(g,T,w,b,E,A){var R=this.getEndPoint(),I,P,N;return g instanceof p?(I=g,P=T,N=w):(I=new p(w,b),P=new p(E,A),N=new p(g,T)),this.add(new l(R,I,P,N))},quadraticBezierTo:function(g,T,w,b){var E=this.getEndPoint(),A,R;return g instanceof p?(A=g,R=T):(A=new p(w,b),R=new p(g,T)),this.add(new h(E,A,R))},draw:function(g,T){for(var w=0;w<this.curves.length;w++){var b=this.curves[w];b.active&&b.draw(g,T)}return g},ellipseTo:function(g,T,w,b,E,A){var R=new a(0,0,g,T,w,b,E,A),I=this.getEndPoint(this._tmpVec2A),P=R.getStartPoint(this._tmpVec2B);return I.subtract(P),R.x=I.x,R.y=I.y,this.add(R)},fromJSON:function(g){this.curves=[],this.cacheLengths=[],this.startPoint.set(g.x,g.y),this.autoClose=g.autoClose;for(var T=0;T<g.curves.length;T++){var w=g.curves[T];switch(w.type){case"LineCurve":this.add(i.fromJSON(w));break;case"EllipseCurve":this.add(a.fromJSON(w));break;case"SplineCurve":this.add(u.fromJSON(w));break;case"CubicBezierCurve":this.add(l.fromJSON(w));break;case"QuadraticBezierCurve":this.add(h.fromJSON(w));break}}return this},getBounds:function(g,T){g===void 0&&(g=new d),T===void 0&&(T=16),g.x=Number.MAX_VALUE,g.y=Number.MAX_VALUE;for(var w=new d,b=m.MIN_SAFE_INTEGER,E=m.MIN_SAFE_INTEGER,A=0;A<this.curves.length;A++){var R=this.curves[A];R.active&&(R.getBounds(w,T),g.x=Math.min(g.x,w.x),g.y=Math.min(g.y,w.y),b=Math.max(b,w.right),E=Math.max(E,w.bottom))}return g.right=b,g.bottom=E,g},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var g=[],T=0,w=0;w<this.curves.length;w++)T+=this.curves[w].getLength(),g.push(T);return this.cacheLengths=g,g},getCurveAt:function(g){for(var T=g*this.getLength(),w=this.getCurveLengths(),b=0;b<w.length;){if(w[b]>=T)return this.curves[b];b++}return null},getEndPoint:function(g){return g===void 0&&(g=new p),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,g):g.copy(this.startPoint),g},getLength:function(){var g=this.getCurveLengths();return g[g.length-1]},getPoint:function(g,T){T===void 0&&(T=new p);for(var w=g*this.getLength(),b=this.getCurveLengths(),E=0;E<b.length;){if(b[E]>=w){var A=b[E]-w,R=this.curves[E],I=R.getLength(),P=I===0?0:1-A/I;return R.getPointAt(P,T)}E++}return null},getPoints:function(g,T){!g&&!T&&(g=this.defaultDivisions);for(var w=[],b,E=0;E<this.curves.length;E++){var A=this.curves[E];if(A.active)for(var R=A.getResolution(g),I=A.getPoints(R,T),P=0;P<I.length;P++){var N=I[P];b&&b.equals(N)||(w.push(N),b=N)}}return this.autoClose&&w.length>1&&!w[w.length-1].equals(w[0])&&w.push(w[0]),w},getRandomPoint:function(g){return g===void 0&&(g=new p),this.getPoint(Math.random(),g)},getSpacedPoints:function(g){g===void 0&&(g=40);for(var T=[],w=0;w<=g;w++)T.push(this.getPoint(w/g));return this.autoClose&&T.push(T[0]),T},getStartPoint:function(g){return g===void 0&&(g=new p),g.copy(this.startPoint)},getTangent:function(g,T){T===void 0&&(T=new p);for(var w=g*this.getLength(),b=this.getCurveLengths(),E=0;E<b.length;){if(b[E]>=w){var A=b[E]-w,R=this.curves[E],I=R.getLength(),P=I===0?0:1-A/I;return R.getTangentAt(P,T)}E++}return null},lineTo:function(g,T){g instanceof p?this._tmpVec2B.copy(g):this._tmpVec2B.set(g,T);var w=this.getEndPoint(this._tmpVec2A);return this.add(new i([w.x,w.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(g){return g.unshift(this.getEndPoint()),this.add(new u(g))},moveTo:function(g,T){return g instanceof p?this.add(new n(g.x,g.y)):this.add(new n(g,T))},toJSON:function(){for(var g=[],T=0;T<this.curves.length;T++)g.push(this.curves[T].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:g}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});r.register("path",function(g,T){return new v(g,T)}),o.exports=v},81078:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(35026),a=new s({initialize:function(i,n){this.parent=i,this.events=n,n||(this.events=i.events?i.events:i),this.list={},this.values={},this._frozen=!1,!i.hasOwnProperty("sys")&&this.events&&this.events.once(l.DESTROY,this.destroy,this)},get:function(r){var i=this.list;if(Array.isArray(r)){for(var n=[],h=0;h<r.length;h++)n.push(i[r[h]]);return n}else return i[r]},getAll:function(){var r={};for(var i in this.list)this.list.hasOwnProperty(i)&&(r[i]=this.list[i]);return r},query:function(r){var i={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(r)&&(i[n]=this.list[n]);return i},set:function(r,i){if(this._frozen)return this;if(typeof r=="string")return this.setValue(r,i);for(var n in r)this.setValue(n,r[n]);return this},inc:function(r,i){if(this._frozen)return this;i===void 0&&(i=1);var n=this.get(r);return n===void 0&&(n=0),this.set(r,n+i),this},toggle:function(r){return this._frozen?this:(this.set(r,!this.get(r)),this)},setValue:function(r,i){if(this._frozen)return this;if(this.has(r))this.values[r]=i;else{var n=this,h=this.list,d=this.events,u=this.parent;Object.defineProperty(this.values,r,{enumerable:!0,configurable:!0,get:function(){return h[r]},set:function(p){if(!n._frozen){var m=h[r];h[r]=p,d.emit(l.CHANGE_DATA,u,r,p,m),d.emit(l.CHANGE_DATA_KEY+r,u,p,m)}}}),h[r]=i,d.emit(l.SET_DATA,u,r,i)}return this},each:function(r,i){for(var n=[this.parent,null,void 0],h=1;h<arguments.length;h++)n.push(arguments[h]);for(var d in this.list)n[1]=d,n[2]=this.list[d],r.apply(i,n);return this},merge:function(r,i){i===void 0&&(i=!0);for(var n in r)r.hasOwnProperty(n)&&(i||!i&&!this.has(n))&&this.setValue(n,r[n]);return this},remove:function(r){if(this._frozen)return this;if(Array.isArray(r))for(var i=0;i<r.length;i++)this.removeValue(r[i]);else return this.removeValue(r);return this},removeValue:function(r){if(this.has(r)){var i=this.list[r];delete this.list[r],delete this.values[r],this.events.emit(l.REMOVE_DATA,this.parent,r,i)}return this},pop:function(r){var i=void 0;return!this._frozen&&this.has(r)&&(i=this.list[r],delete this.list[r],delete this.values[r],this.events.emit(l.REMOVE_DATA,this.parent,r,i)),i},has:function(r){return this.list.hasOwnProperty(r)},setFreeze:function(r){return this._frozen=r,this},reset:function(){for(var r in this.list)delete this.list[r],delete this.values[r];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(l.CHANGE_DATA),this.events.off(l.SET_DATA),this.events.off(l.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(r){this._frozen=!!r}},count:{get:function(){var r=0;for(var i in this.list)this.list[i]!==void 0&&r++;return r}}});o.exports=a},76508:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(81078),a=t(91963),r=t(7599),i=new s({Extends:l,initialize:function(h){l.call(this,h,h.sys.events),this.scene=h,this.systems=h.sys,h.sys.events.once(r.BOOT,this.boot,this),h.sys.events.on(r.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){l.prototype.destroy.call(this),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});a.register("DataManagerPlugin",i,"data"),o.exports=i},73569:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata"},15590:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata-"},37669:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},87090:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedata"},90142:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="setdata"},35026:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CHANGE_DATA:t(73569),CHANGE_DATA_KEY:t(15590),DESTROY:t(37669),REMOVE_DATA:t(87090),SET_DATA:t(90142)}},1999:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DataManager:t(81078),DataManagerPlugin:t(76508),Events:t(35026)}},10720:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1350),l={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function a(){if(typeof importScripts=="function")return l;l.audioData=!!window.Audio,l.webAudio=!!(window.AudioContext||window.webkitAudioContext);var r=document.createElement("audio"),i=!!r.canPlayType;try{if(i){var n=function(u,p){var m=r.canPlayType("audio/"+u).replace(/^no$/,"");return p?!!(m||r.canPlayType("audio/"+p).replace(/^no$/,"")):!!m};if(l.ogg=n('ogg; codecs="vorbis"'),l.opus=n('ogg; codecs="opus"',"opus"),l.mp3=n("mpeg"),l.wav=n("wav"),l.m4a=n("x-m4a"),l.aac=n("aac"),l.flac=n("flac","x-flac"),l.webm=n('webm; codecs="vorbis"'),r.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(s.edge)l.dolby=!0;else if(s.safari&&s.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var h=parseInt(RegExp.$1,10),d=parseInt(RegExp.$2,10);(h===10&&d>=11||h>10)&&(l.dolby=!0)}}}}catch{}return l}o.exports=a()},1350:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36580),l={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function a(){var r=navigator.userAgent;return/Edg\/\d+/.test(r)?(l.edge=!0,l.es2019=!0):/OPR/.test(r)?(l.opera=!0,l.es2019=!0):/Chrome\/(\d+)/.test(r)&&!s.windowsPhone?(l.chrome=!0,l.chromeVersion=parseInt(RegExp.$1,10),l.es2019=l.chromeVersion>69):/Firefox\D+(\d+)/.test(r)?(l.firefox=!0,l.firefoxVersion=parseInt(RegExp.$1,10),l.es2019=l.firefoxVersion>10):/AppleWebKit/.test(r)&&s.iOS?(l.mobileSafari=!0,l.es2019=!0):/MSIE (\d+\.\d+);/.test(r)?(l.ie=!0,l.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(r)&&!s.windowsPhone?(l.safari=!0,l.safariVersion=parseInt(RegExp.$1,10),l.es2019=l.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(l.ie=!0,l.trident=!0,l.tridentVersion=parseInt(RegExp.$1,10),l.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(l.silk=!0),l}o.exports=a()},98581:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l={supportInverseAlpha:!1,supportNewBlendModes:!1};function a(){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",h="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",d=new Image;return d.onload=function(){var u=new Image;u.onload=function(){var p=s.create2D(u,6),m=p.getContext("2d",{willReadFrequently:!0});if(m.globalCompositeOperation="multiply",m.drawImage(d,0,0),m.drawImage(u,2,0),!m.getImageData(2,0,1,1))return!1;var v=m.getImageData(2,0,1,1).data;s.remove(u),l.supportNewBlendModes=v[0]===255&&v[1]===0&&v[2]===0},u.src=n+"/wCKxvRF"+h},d.src=n+"AP804Oa6"+h,!1}function r(){var n=s.create2D(this,2),h=n.getContext("2d",{willReadFrequently:!0});h.fillStyle="rgba(10, 20, 30, 0.5)",h.fillRect(0,0,1,1);var d=h.getImageData(0,0,1,1);if(d===null)return!1;h.putImageData(d,1,0);var u=h.getImageData(1,0,1,1),p=u.data[0]===d.data[0]&&u.data[1]===d.data[1]&&u.data[2]===d.data[2]&&u.data[3]===d.data[3];return s.remove(this),p}function i(){return typeof importScripts!="function"&&document!==void 0&&(l.supportNewBlendModes=a(),l.supportInverseAlpha=r()),l}o.exports=i()},90185:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36580),l=t(1350),a=t(61068),r={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function i(){var h=new ArrayBuffer(4),d=new Uint8Array(h),u=new Uint32Array(h);return d[0]=161,d[1]=178,d[2]=195,d[3]=212,u[0]===3569595041?!0:u[0]===2712847316?!1:null}function n(){if(typeof importScripts=="function")return r;r.canvas=!!window.CanvasRenderingContext2D;try{r.localStorage=!!localStorage.getItem}catch{r.localStorage=!1}r.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,r.fileSystem=!!window.requestFileSystem;var h=!1,d=function(){if(window.WebGLRenderingContext)try{var u=a.createWebGL(this),p=u.getContext("webgl")||u.getContext("experimental-webgl"),m=a.create2D(this),v=m.getContext("2d",{willReadFrequently:!0}),g=v.createImageData(1,1);return h=g.data instanceof Uint8ClampedArray,a.remove(u),a.remove(m),!!p}catch{return!1}return!1};return r.webGL=d(),r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,l.firefox&&l.firefoxVersion<21&&(r.getUserMedia=!1),!s.iOS&&(l.ie||l.firefox||l.chrome)&&(r.canvasBitBltShift=!0),(l.safari||l.mobileSafari)&&(r.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(r.littleEndian=i()),r.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&r.littleEndian!==null&&h,r}o.exports=n()},33553:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={available:!1,cancel:"",keyboard:!1,request:""};function t(){if(typeof importScripts=="function")return y;var s,l="Fullscreen",a="FullScreen",r=["request"+l,"request"+a,"webkitRequest"+l,"webkitRequest"+a,"msRequest"+l,"msRequest"+a,"mozRequest"+a,"mozRequest"+l];for(s=0;s<r.length;s++)if(document.documentElement[r[s]]){y.available=!0,y.request=r[s];break}var i=["cancel"+a,"exit"+l,"webkitCancel"+a,"webkitExit"+l,"msCancel"+a,"msExit"+l,"mozCancel"+a,"mozExit"+l];if(y.available){for(s=0;s<i.length;s++)if(document[i[s]]){y.cancel=i[s];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(y.keyboard=!0),Object.defineProperty(y,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),y}o.exports=t()},95872:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1350),l={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function a(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(l.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(l.mspointer=!0),navigator.getGamepads&&(l.gamepads=!0),"onwheel"in window||s.ie&&"WheelEvent"in window?l.wheelEvent="wheel":"onmousewheel"in window?l.wheelEvent="mousewheel":s.firefox&&"MouseScrollEvent"in window&&(l.wheelEvent="DOMMouseScroll")),l}o.exports=a()},36580:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function t(){if(typeof importScripts=="function")return y;var s=navigator.userAgent;/Windows/.test(s)?y.windows=!0:/Mac OS/.test(s)&&!/like Mac OS/.test(s)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(y.iOS=!0,y.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),y.iOSVersion=parseInt(RegExp.$1,10)):y.macOS=!0:/Android/.test(s)?y.android=!0:/Linux/.test(s)?y.linux=!0:/iP[ao]d|iPhone/i.test(s)?(y.iOS=!0,navigator.appVersion.match(/OS (\d+)/),y.iOSVersion=parseInt(RegExp.$1,10),y.iPhone=s.toLowerCase().indexOf("iphone")!==-1,y.iPad=s.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(s)||/\bKF[A-Z][A-Z]+/.test(s)||/Silk.*Mobile Safari/.test(s)?y.kindle=!0:/CrOS/.test(s)&&(y.chromeOS=!0),(/Windows Phone/i.test(s)||/IEMobile/i.test(s))&&(y.android=!1,y.iOS=!1,y.macOS=!1,y.windows=!0,y.windowsPhone=!0);var l=/Silk/.test(s);return(y.windows||y.macOS||y.linux&&!l||y.chromeOS)&&(y.desktop=!0),(y.windowsPhone||/Windows NT/i.test(s)&&/Touch/i.test(s))&&(y.desktop=!1),navigator.standalone&&(y.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(y.cordova=!0),window.ejecta!==void 0&&(y.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(y.node=!0),y.node&&typeof process.versions=="object"&&(y.nodeWebkit=!!process.versions["node-webkit"],y.electron=!!process.versions.electron),/Crosswalk/.test(s)&&(y.crosswalk=!0),y.pixelRatio=window.devicePixelRatio||1,y}o.exports=t()},53861:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function a(){if(typeof importScripts=="function")return l;var r=document.createElement("video"),i=!!r.canPlayType,n=/^no$/;try{i&&(r.canPlayType('video/ogg; codecs="theora"').replace(n,"")&&(l.ogg=!0),r.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(n,"")&&(l.h264=!0,l.mp4=!0),r.canPlayType("video/x-m4v").replace(n,"")&&(l.m4v=!0),r.canPlayType('video/webm; codecs="vp8, vorbis"').replace(n,"")&&(l.webm=!0),r.canPlayType('video/webm; codecs="vp9"').replace(n,"")&&(l.vp9=!0),r.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(n,"")&&(l.hls=!0))}catch{}return r.parentNode&&r.parentNode.removeChild(r),l.getVideoURL=function(h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var u=s(h[d],"url",h[d]);if(u.indexOf("blob:")===0)return{url:u,type:""};var p;if(u.indexOf("data:")===0?p=u.split(",")[0].match(/\/(.*?);/):p=u.match(/\.([a-zA-Z0-9]+)($|\?)/),p=s(h[d],"type",p?p[1]:"").toLowerCase(),l[p])return{url:u,type:p}}return null},l}o.exports=a()},77290:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={os:t(36580),browser:t(1350),features:t(90185),input:t(95872),audio:t(10720),video:t(53861),fullscreen:t(33553),canvasFeatures:t(98581)}},65246:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new Float32Array(20),a=new s({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(r){return this._matrix.set(r),this._dirty=!0,this},reset:function(){var r=this._matrix;return r.fill(0),r[0]=1,r[6]=1,r[12]=1,r[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var r=this._data;return this._dirty&&(r.set(this._matrix),r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._dirty=!1),r},brightness:function(r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var n=r;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],i)},saturate:function(r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var n=r*2/3+1,h=(n-1)*-.5;return this.multiply([n,h,h,0,0,h,n,h,0,0,h,h,n,0,0,0,0,0,1,0],i)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,i){r===void 0&&(r=0),i===void 0&&(i=!1),r=r/180*Math.PI;var n=Math.cos(r),h=Math.sin(r),d=.213,u=.715,p=.072;return this.multiply([d+n*(1-d)+h*-d,u+n*-u+h*-u,p+n*-p+h*(1-p),0,0,d+n*-d+h*.143,u+n*(1-u)+h*.14,p+n*-p+h*-.283,0,0,d+n*-d+h*-(1-d),u+n*-u+h*u,p+n*(1-p)+h*p,0,0,0,0,0,1,0],i)},grayscale:function(r,i){return r===void 0&&(r=1),i===void 0&&(i=!1),this.saturate(-r,i)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply(a.BLACK_WHITE,r)},contrast:function(r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var n=r+1,h=-.5*(n-1);return this.multiply([n,0,0,0,h,0,n,0,0,h,0,0,n,0,h,0,0,0,1,0],i)},negative:function(r){return r===void 0&&(r=!1),this.multiply(a.NEGATIVE,r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply(a.DESATURATE_LUMINANCE,r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply(a.SEPIA,r)},night:function(r,i){return r===void 0&&(r=.1),i===void 0&&(i=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],i)},lsd:function(r){return r===void 0&&(r=!1),this.multiply(a.LSD,r)},brown:function(r){return r===void 0&&(r=!1),this.multiply(a.BROWN,r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply(a.VINTAGE,r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply(a.KODACHROME,r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply(a.TECHNICOLOR,r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply(a.POLAROID,r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply(a.SHIFT_BGR,r)},multiply:function(r,i){i===void 0&&(i=!1),i||this.reset();var n=this._matrix,h=l;return h.set(n),n.set([h[0]*r[0]+h[1]*r[5]+h[2]*r[10]+h[3]*r[15],h[0]*r[1]+h[1]*r[6]+h[2]*r[11]+h[3]*r[16],h[0]*r[2]+h[1]*r[7]+h[2]*r[12]+h[3]*r[17],h[0]*r[3]+h[1]*r[8]+h[2]*r[13]+h[3]*r[18],h[0]*r[4]+h[1]*r[9]+h[2]*r[14]+h[3]*r[19]+h[4],h[5]*r[0]+h[6]*r[5]+h[7]*r[10]+h[8]*r[15],h[5]*r[1]+h[6]*r[6]+h[7]*r[11]+h[8]*r[16],h[5]*r[2]+h[6]*r[7]+h[7]*r[12]+h[8]*r[17],h[5]*r[3]+h[6]*r[8]+h[7]*r[13]+h[8]*r[18],h[5]*r[4]+h[6]*r[9]+h[7]*r[14]+h[8]*r[19]+h[9],h[10]*r[0]+h[11]*r[5]+h[12]*r[10]+h[13]*r[15],h[10]*r[1]+h[11]*r[6]+h[12]*r[11]+h[13]*r[16],h[10]*r[2]+h[11]*r[7]+h[12]*r[12]+h[13]*r[17],h[10]*r[3]+h[11]*r[8]+h[12]*r[13]+h[13]*r[18],h[10]*r[4]+h[11]*r[9]+h[12]*r[14]+h[13]*r[19]+h[14],h[15]*r[0]+h[16]*r[5]+h[17]*r[10]+h[18]*r[15],h[15]*r[1]+h[16]*r[6]+h[17]*r[11]+h[18]*r[16],h[15]*r[2]+h[16]*r[7]+h[17]*r[12]+h[18]*r[17],h[15]*r[3]+h[16]*r[8]+h[17]*r[13]+h[18]*r[18],h[15]*r[4]+h[16]*r[9]+h[17]*r[14]+h[18]*r[19]+h[19]]),this._dirty=!0,this}});a.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],a.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],a.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],a.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],o.exports=a},39298:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72283),a=new s({initialize:function(i,n,h){this._rgb=[0,0,0],this.onChangeCallback=l,this.dirty=!1,this.set(i,n,h)},set:function(r,i,n){return r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this._rgb=[r,i,n],this.onChange(),this},equals:function(r,i,n){var h=this._rgb;return h[0]===r&&h[1]===i&&h[2]===n},onChange:function(){this.dirty=!0;var r=this._rgb;this.onChangeCallback.call(this,r[0],r[1],r[2])},r:{get:function(){return this._rgb[0]},set:function(r){this._rgb[0]=r,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(r){this._rgb[1]=r,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(r){this._rgb[2]=r,this.onChange()}},destroy:function(){this.onChangeCallback=null}});o.exports=a},84093:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};o.exports=y},32058:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(59994),a=t(73174),r=t(28417),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},85535:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(40163),a=t(73174),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)-d),a(n,s(h)+u),n};o.exports=i},9605:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(70271),a=t(73174),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},22529:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(21843),l=t(59994),a=t(29568),r=function(i,n,h,d){return h===void 0&&(h=0),d===void 0&&(d=0),s(i,l(n)+h,a(n)+d),i};o.exports=r},5739:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29568),l=t(40163),a=t(81711),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)-d),a(n,s(h)+u),n};o.exports=i},40327:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84093),l=[];l[s.BOTTOM_CENTER]=t(32058),l[s.BOTTOM_LEFT]=t(85535),l[s.BOTTOM_RIGHT]=t(9605),l[s.CENTER]=t(22529),l[s.LEFT_CENTER]=t(5739),l[s.RIGHT_CENTER]=t(27683),l[s.TOP_CENTER]=t(96439),l[s.TOP_LEFT]=t(81447),l[s.TOP_RIGHT]=t(47888),l[s.LEFT_BOTTOM]=l[s.BOTTOM_LEFT],l[s.LEFT_TOP]=l[s.TOP_LEFT],l[s.RIGHT_BOTTOM]=l[s.BOTTOM_RIGHT],l[s.RIGHT_TOP]=l[s.TOP_RIGHT];var a=function(r,i,n,h,d){return l[n](r,i,h,d)};o.exports=a},27683:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29568),l=t(70271),a=t(81711),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},96439:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59994),l=t(47196),a=t(28417),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)+d),r(n,l(h)-u),n};o.exports=i},81447:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40163),l=t(47196),a=t(74465),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)-d),r(n,l(h)-u),n};o.exports=i},47888:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70271),l=t(47196),a=t(19298),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)+d),r(n,l(h)-u),n};o.exports=i},46997:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:t(32058),BottomLeft:t(85535),BottomRight:t(9605),Center:t(22529),LeftCenter:t(5739),QuickSet:t(40327),RightCenter:t(27683),TopCenter:t(96439),TopLeft:t(81447),TopRight:t(47888)}},93545:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84093),l=t(98611),a={In:t(46997),To:t(86639)};a=l(!1,a,s),o.exports=a},27118:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(59994),a=t(28417),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,l(h)+d),r(n,s(h)+u),n};o.exports=i},84469:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(40163),a=t(74465),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,l(h)-d),r(n,s(h)+u),n};o.exports=i},51577:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(70271),a=t(19298),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,l(h)+d),r(n,s(h)+u),n};o.exports=i},90271:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(40163),a=t(73174),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)-d),a(n,s(h)+u),n};o.exports=i},30466:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29568),l=t(40163),a=t(81711),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)-d),a(n,s(h)+u),n};o.exports=i},50087:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40163),l=t(47196),a=t(19298),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)-d),r(n,l(h)-u),n};o.exports=i},82590:(o,y,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84093),l=[];l[s.BOTTOM_CENTER]=t(27118),l[s.BOTTOM_LEFT]=t(84469),l[s.BOTTOM_RIGHT]=t(51577),l[s.LEFT_BOTTOM]=t(90271),l[s.LEFT_CENTER]=t(30466),l[s.LEFT_TOP]=t(50087),l[s.RIGHT_BOTTOM]=t(13555),l[s.RIGHT_CENTER]=t(99049),l[s.RIGHT_TOP]=t(67788),l[s.TOP_CENTER]=t(78170),l[s.TOP_LEFT]=t(54145),l[s.TOP_RIGHT]=t(75548);var a=function(r,i,n,h,d){return l[n](r,i,h,d)};o.exports=a},13555:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(70271),a=t(73174),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},99049:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29568),l=t(70271),a=t(81711),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,l(h)+d),a(n,s(h)+u),n};o.exports=i},67788:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70271),l=t(47196),a=t(74465),r=t(84349),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),a(n,s(h)+d),r(n,l(h)-u),n};o.exports=i},78170:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59994),l=t(47196),a=t(73174),r=t(28417),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,s(h)+d),a(n,l(h)-u),n};o.exports=i},54145:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40163),l=t(47196),a=t(73174),r=t(74465),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,s(h)-d),a(n,l(h)-u),n};o.exports=i},75548:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70271),l=t(47196),a=t(73174),r=t(19298),i=function(n,h,d,u){return d===void 0&&(d=0),u===void 0&&(u=0),r(n,s(h)+d),a(n,l(h)-u),n};o.exports=i},86639:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:t(27118),BottomLeft:t(84469),BottomRight:t(51577),LeftBottom:t(90271),LeftCenter:t(30466),LeftTop:t(50087),QuickSet:t(82590),RightBottom:t(13555),RightCenter:t(99049),RightTop:t(67788),TopCenter:t(78170),TopLeft:t(54145),TopRight:t(75548)}},21843:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28417),l=t(81711),a=function(r,i,n){return s(r,i),l(r,n)};o.exports=a},97328:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.y+t.height-t.height*t.originY};o.exports=y},7126:(o,y,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97328),l=t(40163),a=t(70271),r=t(47196),i=t(74118),n=function(h,d){d===void 0&&(d=new i);var u=l(h),p=r(h);return d.x=u,d.y=p,d.width=a(h)-u,d.height=s(h)-p,d};o.exports=n},59994:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.x-t.width*t.originX+t.width*.5};o.exports=y},29568:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.y-t.height*t.originY+t.height*.5};o.exports=y},40163:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.x-t.width*t.originX};o.exports=y},52088:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.width*t.originX};o.exports=y},23379:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.height*t.originY};o.exports=y},70271:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.x+t.width-t.width*t.originX};o.exports=y},47196:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.y-t.height*t.originY};o.exports=y},73174:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.y=s-t.height+t.height*t.originY,t};o.exports=y},28417:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.width*t.originX;return t.x=s+l-t.width*.5,t};o.exports=y},81711:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.height*t.originY;return t.y=s+l-t.height*.5,t};o.exports=y},74465:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x=s+t.width*t.originX,t};o.exports=y},19298:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x=s-t.width+t.width*t.originX,t};o.exports=y},84349:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.y=s+t.height*t.originY,t};o.exports=y},15252:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CenterOn:t(21843),GetBottom:t(97328),GetBounds:t(7126),GetCenterX:t(59994),GetCenterY:t(29568),GetLeft:t(40163),GetOffsetX:t(52088),GetOffsetY:t(23379),GetRight:t(70271),GetTop:t(47196),SetBottom:t(73174),SetCenterX:t(28417),SetCenterY:t(81711),SetLeft:t(74465),SetRight:t(19298),SetTop:t(84349)}},70616:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setCrisp:function(t){var s=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return s.forEach(function(l){t.style["image-rendering"]=l}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};o.exports=y},61068:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86459),l=t(8213),a=[],r=!1,i=function(){var n=function(w,b,E,A,R){b===void 0&&(b=1),E===void 0&&(E=1),A===void 0&&(A=s.CANVAS),R===void 0&&(R=!1);var I,P=u(A);return P===null?(P={parent:w,canvas:document.createElement("canvas"),type:A},A===s.CANVAS&&a.push(P),I=P.canvas):(P.parent=w,I=P.canvas),R&&(P.parent=I),I.width=b,I.height=E,r&&A===s.CANVAS&&l.disable(I.getContext("2d",{willReadFrequently:!1})),I},h=function(w,b,E){return n(w,b,E,s.CANVAS)},d=function(w,b,E){return n(w,b,E,s.WEBGL)},u=function(w){if(w===void 0&&(w=s.CANVAS),w===s.WEBGL)return null;for(var b=0;b<a.length;b++){var E=a[b];if(!E.parent&&E.type===w)return E}return null},p=function(w){var b=w instanceof HTMLCanvasElement;a.forEach(function(E){(b&&E.canvas===w||!b&&E.parent===w)&&(E.parent=null,E.canvas.width=1,E.canvas.height=1)})},m=function(){var w=0;return a.forEach(function(b){b.parent&&w++}),w},v=function(){return a.length-m()},g=function(){r=!0},T=function(){r=!1};return{create2D:h,create:n,createWebGL:d,disableSmoothing:g,enableSmoothing:T,first:u,free:v,pool:a,remove:p,total:m}};o.exports=i()},8213:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y="",t=function(){var s=function(i){for(var n=["i","webkitI","msI","mozI","oI"],h=0;h<n.length;h++){var d=n[h]+"mageSmoothingEnabled";if(d in i)return d}return null},l=function(i){return y===""&&(y=s(i)),y&&(i[y]=!0),i},a=function(i){return y===""&&(y=s(i)),y&&(i[y]=!1),i},r=function(i){return y!==null?i[y]:null};return{disable:a,enable:l,getPrefix:s,isEnabled:r}};o.exports=t()},59271:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s="none"),t.style.msTouchAction=s,t.style["ms-touch-action"]=s,t.style["touch-action"]=s,t};o.exports=y},36505:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s="none");var l=["-webkit-","-khtml-","-moz-","-ms-",""];return l.forEach(function(a){t.style[a+"user-select"]=s}),t.style["-webkit-touch-callout"]=s,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t};o.exports=y},23514:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasInterpolation:t(70616),CanvasPool:t(61068),Smoothing:t(8213),TouchAction:t(59271),UserSelect:t(36505)}},27119:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(22946),a=t(5657),r=t(24650),i=t(68033),n=new s({initialize:function(d,u,p,m){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(d,u,p,m)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(h,d,u,p,m){return p===void 0&&(p=255),m===void 0&&(m=!0),this._locked=!0,this.red=h,this.green=d,this.blue=u,this.alpha=p,this._locked=!1,this.update(m)},setGLTo:function(h,d,u,p){return p===void 0&&(p=1),this._locked=!0,this.redGL=h,this.greenGL=d,this.blueGL=u,this.alphaGL=p,this._locked=!1,this.update(!0)},setFromRGB:function(h){return this._locked=!0,this.red=h.r,this.green=h.g,this.blue=h.b,h.hasOwnProperty("a")&&(this.alpha=h.a),this._locked=!1,this.update(!0)},setFromHSV:function(h,d,u){return r(h,d,u,this)},update:function(h){if(h===void 0&&(h=!1),this._locked)return this;var d=this.r,u=this.g,p=this.b,m=this.a;return this._color=l(d,u,p),this._color32=a(d,u,p,m),this._rgba="rgba("+d+","+u+","+p+","+m/255+")",h&&i(d,u,p,this),this},updateHSV:function(){var h=this.r,d=this.g,u=this.b;return i(h,d,u,this),this},clone:function(){return new n(this.r,this.g,this.b,this.a)},gray:function(h){return this.setTo(h,h,h)},random:function(h,d){h===void 0&&(h=0),d===void 0&&(d=255);var u=Math.floor(h+Math.random()*(d-h)),p=Math.floor(h+Math.random()*(d-h)),m=Math.floor(h+Math.random()*(d-h));return this.setTo(u,p,m)},randomGray:function(h,d){h===void 0&&(h=0),d===void 0&&(d=255);var u=Math.floor(h+Math.random()*(d-h));return this.setTo(u,u,u)},saturate:function(h){return this.s+=h/100,this},desaturate:function(h){return this.s-=h/100,this},lighten:function(h){return this.v+=h/100,this},darken:function(h){return this.v-=h/100,this},brighten:function(h){var d=this.r,u=this.g,p=this.b;return d=Math.max(0,Math.min(255,d-Math.round(255*-(h/100)))),u=Math.max(0,Math.min(255,u-Math.round(255*-(h/100)))),p=Math.max(0,Math.min(255,p-Math.round(255*-(h/100)))),this.setTo(d,u,p)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(h){this.gl[0]=Math.min(Math.abs(h),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(h){this.gl[1]=Math.min(Math.abs(h),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(h){this.gl[2]=Math.min(Math.abs(h),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(h){this.gl[3]=Math.min(Math.abs(h),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(h){h=Math.floor(Math.abs(h)),this.r=Math.min(h,255),this.gl[0]=h/255,this.update(!0)}},green:{get:function(){return this.g},set:function(h){h=Math.floor(Math.abs(h)),this.g=Math.min(h,255),this.gl[1]=h/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(h){h=Math.floor(Math.abs(h)),this.b=Math.min(h,255),this.gl[2]=h/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(h){h=Math.floor(Math.abs(h)),this.a=Math.min(h,255),this.gl[3]=h/255,this.update()}},h:{get:function(){return this._h},set:function(h){this._h=h,r(h,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(h){this._s=h,r(this._h,h,this._v,this)}},v:{get:function(){return this._v},set:function(h){this._v=h,r(this._h,this._s,h,this)}}});o.exports=n},30245:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22946),l=function(a){a===void 0&&(a=1024);var r=[],i=255,n,h=255,d=0,u=0;for(n=0;n<=i;n++)r.push({r:h,g:n,b:u,color:s(h,n,u)});for(d=255,n=i;n>=0;n--)r.push({r:n,g:d,b:u,color:s(n,d,u)});for(h=0,n=0;n<=i;n++,d--)r.push({r:h,g:d,b:n,color:s(h,d,n)});for(d=0,u=255,n=0;n<=i;n++,u--,h++)r.push({r:h,g:d,b:u,color:s(h,d,u)});if(a===1024)return r;var p=[],m=0,v=1024/a;for(n=0;n<a;n++)p.push(r[Math.floor(m)]),m+=v;return p};o.exports=l},86672:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s={r:t>>16&255,g:t>>8&255,b:t&255,a:255};return t>16777215&&(s.a=t>>>24),s};o.exports=y},25409:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s=t.toString(16);return s.length===1?"0"+s:s};o.exports=y},22946:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t<<16|s<<8|l};o.exports=y},5657:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){return a<<24|t<<16|s<<8|l};o.exports=y},74777:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=t(59998),a=function(r,i,n){var h=n,d=n,u=n;if(i!==0){var p=n<.5?n*(1+i):n+i-n*i,m=2*n-p;h=l(m,p,r+1/3),d=l(m,p,r),u=l(m,p,r-1/3)}var v=new s;return v.setGLTo(h,d,u,1)};o.exports=a},89263:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(24650),l=function(a,r){a===void 0&&(a=1),r===void 0&&(r=1);for(var i=[],n=0;n<=359;n++)i.push(s(n/359,a,r));return i};o.exports=l},24650:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22946);function l(r,i,n,h){var d=(r+i*6)%6,u=Math.min(d,4-d,1);return Math.round(255*(h-h*n*Math.max(0,u)))}var a=function(r,i,n,h){i===void 0&&(i=1),n===void 0&&(n=1);var d=l(5,r,i,n),u=l(3,r,i,n),p=l(1,r,i,n);return h?h.setTo?h.setTo(d,u,p,h.alpha,!0):(h.r=d,h.g=u,h.b=p,h.color=s(d,u,p),h):{r:d,g:u,b:p,color:s(d,u,p)}};o.exports=a},91487:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=function(a){var r=new s;a=a.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(u,p,m,v){return p+p+m+m+v+v});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);if(i){var n=parseInt(i[1],16),h=parseInt(i[2],16),d=parseInt(i[3],16);r.setTo(n,h,d)}return r};o.exports=l},59998:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return l<0&&(l+=1),l>1&&(l-=1),l<.16666666666666666?t+(s-t)*6*l:l<.5?s:l<.6666666666666666?t+(s-t)*(.6666666666666666-l)*6:t};o.exports=y},74853:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=t(15978),a=function(r){var i=l(r);return new s(i.r,i.g,i.b,i.a)};o.exports=a},15978:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:t&255}:{a:255,r:t>>16&255,g:t>>8&255,b:t&255}};o.exports=y},53756:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42798),l=function(i,n,h,d,u,p,m,v){m===void 0&&(m=100),v===void 0&&(v=0);var g=v/m;return{r:s(i,d,g),g:s(n,u,g),b:s(h,p,g)}},a=function(i,n,h,d){return h===void 0&&(h=100),d===void 0&&(d=0),l(i.r,i.g,i.b,n.r,n.g,n.b,h,d)},r=function(i,n,h,d,u,p){return u===void 0&&(u=100),p===void 0&&(p=0),l(i.r,i.g,i.b,n,h,d,u,p)};o.exports={RGBWithRGB:l,ColorWithRGB:r,ColorWithColor:a}},73904:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=function(a){return new s(a.r,a.g,a.b,a.a)};o.exports=l},26841:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119),l=function(a){var r=new s,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(a.toLowerCase());if(i){var n=parseInt(i[1],10),h=parseInt(i[2],10),d=parseInt(i[3],10),u=i[4]!==void 0?parseFloat(i[4]):1;r.setTo(n,h,d,u*255)}return r};o.exports=l},68033:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){a===void 0&&(a={h:0,s:0,v:0}),t/=255,s/=255,l/=255;var r=Math.min(t,s,l),i=Math.max(t,s,l),n=i-r,h=0,d=i===0?0:n/i,u=i;return i!==r&&(i===t?h=(s-l)/n+(s<l?6:0):i===s?h=(l-t)/n+2:i===l&&(h=(t-s)/n+4),h/=6),a.hasOwnProperty("_h")?(a._h=h,a._s=d,a._v=u):(a.h=h,a.s=d,a.v=u),a};o.exports=y},4880:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25409),l=function(a,r,i,n,h){return n===void 0&&(n=255),h===void 0&&(h="#"),h==="#"?"#"+((1<<24)+(a<<16)+(r<<8)+i).toString(16).slice(1,7):"0x"+s(n)+s(a)+s(r)+s(i)};o.exports=l},37243:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17489),l=t(27119),a=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=255),new l(s(r,i),s(r,i),s(r,i))};o.exports=a},93222:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(91487),l=t(74853),a=t(73904),r=t(26841),i=function(n){var h=typeof n;switch(h){case"string":return n.substr(0,3).toLowerCase()==="rgb"?r(n):s(n);case"number":return l(n);case"object":return a(n)}};o.exports=i},95509:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27119);s.ColorSpectrum=t(30245),s.ColorToRGBA=t(86672),s.ComponentToHex=t(25409),s.GetColor=t(22946),s.GetColor32=t(5657),s.HexStringToColor=t(91487),s.HSLToColor=t(74777),s.HSVColorWheel=t(89263),s.HSVToRGB=t(24650),s.HueToComponent=t(59998),s.IntegerToColor=t(74853),s.IntegerToRGB=t(15978),s.Interpolate=t(53756),s.ObjectToColor=t(73904),s.RandomRGB=t(37243),s.RGBStringToColor=t(26841),s.RGBToHSV=t(68033),s.RGBToString=t(4880),s.ValueToColor=t(93222),o.exports=s},24816:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Align:t(93545),BaseShader:t(31053),Bounds:t(15252),Canvas:t(23514),Color:t(95509),ColorMatrix:t(65246),Masks:t(93310),RGB:t(39298)}},76756:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(61286),a=new s({initialize:function(i,n,h,d,u,p){n||(n=i.sys.make.image({x:h,y:d,key:u,frame:p,add:!1})),this.bitmapMask=n,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(r){this.bitmapMask=r},preRenderWebGL:function(r,i,n){r.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,n)},postRenderWebGL:function(r,i,n){r.pipelines.BITMAPMASK_PIPELINE.endMask(this,i,n)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});l.register("bitmapMask",function(r,i,n,h,d){return new a(this.scene,r,i,n,h,d)}),o.exports=a},63037:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(a){return this.geometryMask=a,this},setInvertAlpha:function(a){return a===void 0&&(a=!0),this.invertAlpha=a,this},preRenderWebGL:function(a,r,i){var n=a.gl;a.flush(),a.maskStack.length===0&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),a.maskCount=0),a.currentCameraMask.mask!==this&&(a.currentMask.mask=this),a.maskStack.push({mask:this,camera:i}),this.applyStencil(a,i,!0),a.maskCount++},applyStencil:function(a,r,i){var n=a.gl,h=this.geometryMask,d=a.maskCount,u=255;n.colorMask(!1,!1,!1,!1),i?(n.stencilFunc(n.EQUAL,d,u),n.stencilOp(n.KEEP,n.KEEP,n.INCR),d++):(n.stencilFunc(n.EQUAL,d+1,u),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),this.level=d,h.renderWebGL(a,h,r),a.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.invertAlpha?n.stencilFunc(n.NOTEQUAL,d,u):n.stencilFunc(n.EQUAL,d,u)},postRenderWebGL:function(a){var r=a.gl;a.maskStack.pop(),a.maskCount--,a.flush();var i=a.currentMask;if(a.maskStack.length===0)i.mask=null,r.disable(r.STENCIL_TEST);else{var n=a.maskStack[a.maskStack.length-1];n.mask.applyStencil(a,n.camera,!1),a.currentCameraMask.mask!==n.mask?(i.mask=n.mask,i.camera=n.camera):i.mask=null}},preRenderCanvas:function(a,r,i){var n=this.geometryMask;a.currentContext.save(),n.renderCanvas(a,n,i,null,null,!0),a.currentContext.clip()},postRenderCanvas:function(a){a.currentContext.restore()},destroy:function(){this.geometryMask=null}});o.exports=l},93310:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BitmapMask:t(76756),GeometryMask:t(63037)}},31053:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h){(!i||i==="")&&(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!n||n==="")&&(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),h===void 0&&(h=null),this.key=r,this.fragmentSrc=i,this.vertexSrc=n,this.uniforms=h}});o.exports=l},99584:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l;if(s)typeof s=="string"?l=document.getElementById(s):typeof s=="object"&&s.nodeType===1&&(l=s);else if(t.parentElement||s===null)return t;return l||(l=document.body),l.appendChild(t),t};o.exports=y},85178:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99584),l=function(a){var r=a.config;if(!(!r.parent||!r.domCreateContainer)){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+a.scale.width+"px;","height: "+a.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+r.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),a.domContainer=i,s(i,r.parent)}};o.exports=l},21546:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36580),l=function(a){if(document.readyState==="complete"||document.readyState==="interactive"){a();return}var r=function(){document.removeEventListener("deviceready",r,!0),document.removeEventListener("DOMContentLoaded",r,!0),window.removeEventListener("load",r,!0),a()};document.body?s.cordova?document.addEventListener("deviceready",r,!1):(document.addEventListener("DOMContentLoaded",r,!0),window.addEventListener("load",r,!0)):window.setTimeout(r,20)};o.exports=l},74181:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){if(!t)return window.innerHeight;var s=Math.abs(window.orientation),l={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),l.w=s===90?a.offsetHeight:window.innerWidth,l.h=s===90?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,Math.abs(window.orientation)!==90?l.h:l.w};o.exports=y},9229:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(55301),l=function(a,r){var i=window.screen,n=i?i.orientation||i.mozOrientation||i.msOrientation:!1;if(n&&typeof n.type=="string")return n.type;if(typeof n=="string")return n;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return s.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return s.ORIENTATION.LANDSCAPE}else return r>a?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE};o.exports=l},2893:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s;return t!==""&&(typeof t=="string"?s=document.getElementById(t):t&&t.nodeType===1&&(s=t)),s||(s=document.body),s};o.exports=y},89200:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s="";try{if(window.DOMParser){var l=new DOMParser;s=l.parseFromString(t,"text/xml")}else s=new ActiveXObject("Microsoft.XMLDOM"),s.loadXML(t)}catch{s=null}return!s||!s.documentElement||s.getElementsByTagName("parsererror").length?null:s};o.exports=y},55638:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){t.parentNode&&t.parentNode.removeChild(t)};o.exports=y},27385:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72283),a=new s({initialize:function(){this.isRunning=!1,this.callback=l,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var i=this;this.step=function n(h){i.callback(h),i.isRunning&&(i.timeOutID=window.requestAnimationFrame(n))},this.stepTimeout=function n(){i.isRunning&&(i.timeOutID=window.setTimeout(n,i.delay)),i.callback(window.performance.now())}},start:function(r,i,n){this.isRunning||(this.callback=r,this.isSetTimeOut=i,this.delay=n,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=l}});o.exports=a},3590:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={AddToDOM:t(99584),DOMContentLoaded:t(21546),GetInnerHeight:t(74181),GetScreenOrientation:t(9229),GetTarget:t(2893),ParseXML:t(89200),RemoveFromDOM:t(55638),RequestAnimationFrame:t(27385)};o.exports=s},78491:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(91963),r=new s({Extends:l,initialize:function(){l.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});a.register("EventEmitter",r,"events"),o.exports=r},95146:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EventEmitter:t(78491)}},20170:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h){h===void 0&&(h=1),l.call(this,a.BARREL,n),this.amount=h}});o.exports=r},51182:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,m,v){d===void 0&&(d=1),u===void 0&&(u=1),p===void 0&&(p=1),m===void 0&&(m=1),v===void 0&&(v=4),l.call(this,a.BLOOM,n),this.steps=v,this.offsetX=d,this.offsetY=u,this.blurStrength=p,this.strength=m,this.glcolor=[1,1,1],h!=null&&(this.color=h)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}}});o.exports=r},51498:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,m,v){h===void 0&&(h=0),d===void 0&&(d=2),u===void 0&&(u=2),p===void 0&&(p=1),v===void 0&&(v=4),l.call(this,a.BLUR,n),this.quality=h,this.x=d,this.y=u,this.steps=v,this.strength=p,this.glcolor=[1,1,1],m!=null&&(this.color=m)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}}});o.exports=r},12042:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,m,v,g){h===void 0&&(h=.5),d===void 0&&(d=1),u===void 0&&(u=.2),p===void 0&&(p=!1),m===void 0&&(m=1),v===void 0&&(v=1),g===void 0&&(g=1),l.call(this,a.BOKEH,n),this.radius=h,this.amount=d,this.contrast=u,this.isTiltShift=p,this.strength=g,this.blurX=m,this.blurY=v}});o.exports=r},69900:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,m){h===void 0&&(h=8),p===void 0&&(p=1),m===void 0&&(m=.005),l.call(this,a.CIRCLE,n),this.scale=p,this.feather=m,this.thickness=h,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],d!=null&&(this.color=d),u!=null&&(this.backgroundColor=u)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}},backgroundColor:{get:function(){var i=this.glcolor2;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor2;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(i){this.glcolor2[3]=i}}});o.exports=r},48991:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(65246),a=t(47406),r=new s({Extends:l,initialize:function(n){l.call(this),this.type=a.COLOR_MATRIX,this.gameObject=n,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});o.exports=r},47551:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i){this.type=r,this.gameObject=i,this.active=!0},setActive:function(a){return this.active=a,this},destroy:function(){this.gameObject=null,this.active=!1}});o.exports=l},47909:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u){h===void 0&&(h="__WHITE"),d===void 0&&(d=.005),u===void 0&&(u=.005),l.call(this,a.DISPLACEMENT,n),this.x=d,this.y=u,this.glTexture,this.setTexture(h)},setTexture:function(i){var n=this.gameObject.scene.sys.textures.getFrame(i);return n&&(this.glTexture=n.glTexture),this}});o.exports=r},18919:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p){d===void 0&&(d=4),u===void 0&&(u=0),p===void 0&&(p=!1),l.call(this,a.GLOW,n),this.outerStrength=d,this.innerStrength=u,this.knockout=p,this.glcolor=[1,1,1,1],h!==void 0&&(this.color=h)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}}});o.exports=r},62494:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,m,v,g,T){u===void 0&&(u=.2),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),g===void 0&&(g=1),T===void 0&&(T=0),l.call(this,a.GRADIENT,n),this.alpha=u,this.size=T,this.fromX=p,this.fromY=m,this.toX=v,this.toY=g,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],h!=null&&(this.color1=h),d!=null&&(this.color2=d)},color1:{get:function(){var i=this.glcolor1;return(i[0]<<16)+(i[1]<<8)+(i[2]|0)},set:function(i){var n=this.glcolor1;n[0]=i>>16&255,n[1]=i>>8&255,n[2]=i&255}},color2:{get:function(){var i=this.glcolor2;return(i[0]<<16)+(i[1]<<8)+(i[2]|0)},set:function(i){var n=this.glcolor2;n[0]=i>>16&255,n[1]=i>>8&255,n[2]=i&255}}});o.exports=r},68897:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h){h===void 0&&(h=1),l.call(this,a.PIXELATE,n),this.amount=h}});o.exports=r},58575:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p,m,v,g){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=.1),p===void 0&&(p=1),v===void 0&&(v=6),g===void 0&&(g=1),l.call(this,a.SHADOW,n),this.x=h,this.y=d,this.decay=u,this.power=p,this.glcolor=[0,0,0,1],this.samples=v,this.intensity=g,m!==void 0&&(this.color=m)},color:{get:function(){var i=this.glcolor;return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)},set:function(i){var n=this.glcolor;n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255}}});o.exports=r},33755:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p){h===void 0&&(h=.5),d===void 0&&(d=.5),u===void 0&&(u=3),p===void 0&&(p=!1),l.call(this,a.SHINE,n),this.speed=h,this.lineWidth=d,this.gradient=u,this.reveal=p}});o.exports=r},24949:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p){h===void 0&&(h=.5),d===void 0&&(d=.5),u===void 0&&(u=.5),p===void 0&&(p=.5),l.call(this,a.VIGNETTE,n),this.x=h,this.y=d,this.radius=u,this.strength=p}});o.exports=r},66241:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(47551),a=t(47406),r=new s({Extends:l,initialize:function(n,h,d,u,p){h===void 0&&(h=.1),d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=!1),l.call(this,a.WIPE,n),this.progress=0,this.wipeWidth=h,this.direction=d,this.axis=u,this.reveal=p}});o.exports=r},47406:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};o.exports=y},96910:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(47406),a={Barrel:t(20170),Controller:t(47551),Bloom:t(51182),Blur:t(51498),Bokeh:t(12042),Circle:t(69900),ColorMatrix:t(48991),Displacement:t(47909),Glow:t(18919),Gradient:t(62494),Pixelate:t(68897),Shadow:t(58575),Shine:t(33755),Vignette:t(24949),Wipe:t(66241)};a=s(!1,a,l),o.exports=a},88933:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(20494),a=function(r,i,n){i.x=l(n,"x",0),i.y=l(n,"y",0),i.depth=l(n,"depth",0),i.flipX=l(n,"flipX",!1),i.flipY=l(n,"flipY",!1);var h=l(n,"scale",null);typeof h=="number"?i.setScale(h):h!==null&&(i.scaleX=l(h,"x",1),i.scaleY=l(h,"y",1));var d=l(n,"scrollFactor",null);typeof d=="number"?i.setScrollFactor(d):d!==null&&(i.scrollFactorX=l(d,"x",1),i.scrollFactorY=l(d,"y",1)),i.rotation=l(n,"rotation",0);var u=l(n,"angle",null);u!==null&&(i.angle=u),i.alpha=l(n,"alpha",1);var p=l(n,"origin",null);if(typeof p=="number")i.setOrigin(p);else if(p!==null){var m=l(p,"x",.5),v=l(p,"y",.5);i.setOrigin(m,v)}i.blendMode=l(n,"blendMode",s.NORMAL),i.visible=l(n,"visible",!0);var g=l(n,"add",!0);return g&&r.sys.displayList.add(i),i.preUpdate&&r.sys.updateList.add(i),i};o.exports=a},32291:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(20494),l=function(a,r){var i=s(r,"anims",null);if(i===null)return a;if(typeof i=="string")a.anims.play(i);else if(typeof i=="object"){var n=a.anims,h=s(i,"key",void 0);if(h){var d=s(i,"startFrame",void 0),u=s(i,"delay",0),p=s(i,"repeat",0),m=s(i,"repeatDelay",0),v=s(i,"yoyo",!1),g=s(i,"play",!1),T=s(i,"delayedPlay",0),w={key:h,delay:u,repeat:p,repeatDelay:m,yoyo:v,startFrame:d};g?n.play(w):T>0?n.playAfterDelay(w,T):n.load(w)}}return a};o.exports=l},91713:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(71207),a=t(91963),r=t(56631),i=t(7599),n=t(17922),h=new s({Extends:l,initialize:function(u){l.call(this,u),this.sortChildrenFlag=!1,this.scene=u,this.systems=u.sys,this.events=u.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(i.BOOT,this.boot,this),this.events.on(i.START,this.start,this)},boot:function(){this.events.once(i.DESTROY,this.destroy,this)},addChildCallback:function(d){d.displayList&&d.displayList!==this&&d.removeFromDisplayList(),d.parentContainer&&d.parentContainer.remove(d),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(r.ADDED_TO_SCENE,d,this.scene),this.events.emit(i.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(r.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(i.REMOVED_FROM_SCENE,d,this.scene)},start:function(){this.events.once(i.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,u){return d._depth-u._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list;d.length;)d[0].destroy(!0);this.events.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(i.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});a.register("DisplayList",h,"displayList"),o.exports=h},89980:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(48129),a=t(81078),r=t(6659),i=t(56631),n=t(7599),h=new s({Extends:r,initialize:function(u,p){r.call(this),this.scene=u,this.displayList=null,this.type=p,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(i.ADDED_TO_SCENE,this.addedToScene,this),this.on(i.REMOVED_FROM_SCENE,this.removedFromScene,this),u.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(d,u){return this.data||(this.data=new a(this)),this.data.set(d,u),this},incData:function(d,u){return this.data||(this.data=new a(this)),this.data.inc(d,u),this},toggleData:function(d){return this.data||(this.data=new a(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new a(this)),this.data.get(d)},setInteractive:function(d,u,p){return this.scene.sys.input.enable(this,d,u,p),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return l(this)},willRender:function(d){var u=this.displayList&&this.displayList.active?this.displayList.willRender(d):!0;return!(!u||h.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,u=this.parentContainer,p=[];u&&(p.unshift(u.getIndex(d)),d=u,u.parentContainer);)u=u.parentContainer;return this.displayList?p.unshift(this.displayList.getIndex(d)):p.unshift(this.scene.sys.displayList.getIndex(d)),p},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(i.ADDED_TO_SCENE,this,this.scene),d.events.emit(n.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d&&d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(i.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(n.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(d){!this.scene||this.ignoreDestroy||(d===void 0&&(d=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(i.DESTROY,this,d),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});h.RENDER_MASK=15,o.exports=h},99325:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91963),a=t(7599),r=new s({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(i,n){r.prototype.hasOwnProperty(i)||(r.prototype[i]=n)},r.remove=function(i){r.prototype.hasOwnProperty(i)&&delete r.prototype[i]},l.register("GameObjectCreator",r,"make"),o.exports=r},61286:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91963),a=t(7599),r=new s({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},existing:function(i){return(i.renderCanvas||i.renderWebGL)&&this.displayList.add(i),i.preUpdate&&this.updateList.add(i),i},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(i,n){r.prototype.hasOwnProperty(i)||(r.prototype[i]=n)},r.remove=function(i){r.prototype.hasOwnProperty(i)&&delete r.prototype[i]},l.register("GameObjectFactory",r,"add"),o.exports=r},73329:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(69360),l=new s,a=new s,r=new s,i={camera:l,sprite:a,calc:r},n=function(h,d,u){var p=l,m=a,v=r;return m.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),p.copyFrom(d.matrix),u?(p.multiplyWithOffset(u,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),m.e=h.x,m.f=h.y):(m.e-=d.scrollX*h.scrollFactorX,m.f-=d.scrollY*h.scrollFactorY),p.multiply(m,v),i};o.exports=n},92034:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(74623),a=t(91963),r=t(7599),i=new s({Extends:l,initialize:function(h){l.call(this),this.checkQueue=!0,this.scene=h,this.systems=h.sys,h.sys.events.once(r.BOOT,this.boot,this),h.sys.events.on(r.START,this.start,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(r.PRE_UPDATE,this.update,this),n.on(r.UPDATE,this.sceneUpdate,this),n.once(r.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(n,h){for(var d=this._active,u=d.length,p=0;p<u;p++){var m=d[p];m.active&&m.preUpdate.call(m,n,h)}},shutdown:function(){for(var n=this._active.length;n--;)this._active[n].destroy(!0);for(n=this._pending.length;n--;)this._pending[n].destroy(!0);for(n=this._destroy.length;n--;)this._destroy[n].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var h=this.systems.events;h.off(r.PRE_UPDATE,this.update,this),h.off(r.UPDATE,this.sceneUpdate,this),h.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});a.register("UpdateList",i,"updateList"),o.exports=i},8810:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r,i,n,h,d,u,p,m,v,g,T){var w=l.x-s.displayOriginX+r,b=l.y-s.displayOriginY+i,E=w+l.w,A=b+l.h,R=n.getXRound(w,b,h),I=n.getYRound(w,b,h),P=n.getXRound(w,A,h),N=n.getYRound(w,A,h),F=n.getXRound(E,A,h),O=n.getYRound(E,A,h),D=n.getXRound(E,b,h),L=n.getYRound(E,b,h);t.batchQuad(s,R,I,P,N,F,O,D,L,a.u0,a.v0,a.u1,a.v1,d,u,p,m,v,g,T)};o.exports=y},82173:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){if(l===void 0&&(l=!1),a===void 0)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},a;var r=t.text,i=r.length,n=t.maxWidth,h=t.wordWrapCharCode,d=Number.MAX_VALUE,u=Number.MAX_VALUE,p=0,m=0,v=t.fontData.chars,g=t.fontData.lineHeight,T=t.letterSpacing,w=t.lineSpacing,b=0,E=0,A=0,R=null,I=t._align,P=0,N=0,F=t.fontSize/t.fontData.size,O=F*t.scaleX,D=F*t.scaleY,L=null,z=0,X=[],H=Number.MAX_VALUE,J=0,G=0,k=0,M,B=[],U=[],W=null;if(n>0){for(M=0;M<i;M++){if(A=r.charCodeAt(M),A===10){W!==null&&(B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D,cr:!0}),W=null),b=0,E+=g+w,L=null;continue}if(R=v[A],!!R){if(L!==null)var K=R.kerning[z];A===h?W!==null&&(B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D,cr:!1}),W=null):(W===null&&(W={word:"",i:M,x:b,y:E,w:0,h:g,cr:!1}),W.word=W.word.concat(r[M]),W.w+=R.xOffset+R.xAdvance+(K!==void 0?K:0)),b+=R.xAdvance+T,L=R,z=A}}W!==null&&B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D,cr:!1}),b=0,E=0,L=null,z=0;var q,_=0,rt=[];for(M=0;M<B.length;M++){var ft=B[M],mt=ft.x,vt=ft.x+ft.w;if(q){var yt=mt-(q.x+q.w);_=mt-(yt+q.w),q=null}var xt=mt-_,It=vt-_;xt>n||It>n?(rt.push(ft.i-1),ft.cr?(rt.push(ft.i+ft.word.length),_=0,q=null):q=ft):ft.cr&&(rt.push(ft.i+ft.word.length),_=0,q=null)}var $t=function(Se,Me,ce){return Se.substr(0,Me)+ce+Se.substr(Me+1)};for(M=rt.length-1;M>=0;M--)r=$t(r,rt[M],`
`);a.wrappedText=r,i=r.length,B=[],W=null}var Zt=0;for(M=0;M<i;M++){if(A=r.charCodeAt(M),A===10){W!==null&&(B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D}),W=null),b=0,E+=g+w,L=null,X[G]=k,k>J&&(J=k),k<H&&(H=k),G++,k=0;continue}if(R=v[A],!!R){if(P=b,N=E,L!==null){var Bt=R.kerning[z];P+=Bt!==void 0?Bt:0}d>P&&(d=P),u>N&&(u=N);var At=P+R.xAdvance,kt=N+g;p<At&&(p=At),m<kt&&(m=kt);var Ut=R.xOffset+R.xAdvance+(Bt!==void 0?Bt:0);A===h?W!==null&&(B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D}),W=null):(W===null&&(W={word:"",i:Zt,x:b,y:E,w:0,h:g}),W.word=W.word.concat(r[M]),W.w+=Ut),U.push({i:Zt,idx:M,char:r[M],code:A,x:(R.xOffset+P)*F,y:(R.yOffset+E)*F,w:R.width*F,h:R.height*F,t:E*F,r:At*F,b:g*F,line:G,glyph:R}),b+=R.xAdvance+T+(Bt!==void 0?Bt:0),L=R,z=A,k=At*F,Zt++}}if(W!==null&&B.push({word:W.word,i:W.i,x:W.x*O,y:W.y*D,w:W.w*O,h:W.h*D}),X[G]=k,k>J&&(J=k),k<H&&(H=k),I>0)for(var ee=0;ee<U.length;ee++){var te=U[ee];if(I===1){var fe=(J-X[te.line])/2;te.x+=fe,te.r+=fe}else if(I===2){var ae=J-X[te.line];te.x+=ae,te.r+=ae}}var le=a.local,re=a.global,we=a.lines;return le.x=d*F,le.y=u*F,le.width=p*F,le.height=m*F,re.x=t.x-t._displayOriginX+d*O,re.y=t.y-t._displayOriginY+u*D,re.width=p*O,re.height=m*D,we.shortest=H,we.longest=J,we.lengths=X,s&&(le.x=Math.ceil(le.x),le.y=Math.ceil(le.y),le.width=Math.ceil(le.width),le.height=Math.ceil(le.height),re.x=Math.ceil(re.x),re.y=Math.ceil(re.y),re.width=Math.ceil(re.width),re.height=Math.ceil(re.height),we.shortest=Math.ceil(H),we.longest=Math.ceil(J)),l&&(t._displayOriginX=t.originX*le.width,t._displayOriginY=t.originY*le.height,re.x=t.x-t._displayOriginX*t.scaleX,re.y=t.y-t._displayOriginY*t.scaleY,s&&(re.x=Math.ceil(re.x),re.y=Math.ceil(re.y))),a.words=B,a.characters=U,a.lines.height=g,a.scale=F,a.scaleX=t.scaleX,a.scaleY=t.scaleY,a};o.exports=y},68298:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31476),l=function(a,r,i,n,h,d,u){var p=a.sys.textures.get(i),m=p.get(n),v=a.sys.cache.xml.get(h);if(m&&v){var g=s(v,m,d,u,p);return a.sys.cache.bitmapFont.add(r,{data:g,texture:i,frame:n,fromAtlas:!0}),!0}else return!1};o.exports=l},39860:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l=function(a,r){var i=r.width,n=r.height,h=Math.floor(i/2),d=Math.floor(n/2),u=s(r,"chars","");if(u!==""){var p=s(r,"image",""),m=a.sys.textures.getFrame(p),v=m.cutX,g=m.cutY,T=m.source.width,w=m.source.height,b=s(r,"offset.x",0),E=s(r,"offset.y",0),A=s(r,"spacing.x",0),R=s(r,"spacing.y",0),I=s(r,"lineSpacing",0),P=s(r,"charsPerRow",null);P===null&&(P=T/i,P>u.length&&(P=u.length));for(var N=b,F=E,O={retroFont:!0,font:p,size:i,lineHeight:n+I,chars:{}},D=0,L=0;L<u.length;L++){var z=u.charCodeAt(L),X=(v+N)/T,H=(g+F)/w,J=(v+N+i)/T,G=(g+F+n)/w;O.chars[z]={x:N,y:F,width:i,height:n,centerX:h,centerY:d,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:X,v0:H,u1:J,v1:G},D++,D===P?(D=0,N=b,F+=n+R):N+=i+A}var k={data:O,frame:null,texture:p};return k}};o.exports=l},31476:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(s,l){return parseInt(s.getAttribute(l),10)}var t=function(s,l,a,r,i){a===void 0&&(a=0),r===void 0&&(r=0);var n=l.cutX,h=l.cutY,d=l.source.width,u=l.source.height,p=l.sourceIndex,m={},v=s.getElementsByTagName("info")[0],g=s.getElementsByTagName("common")[0];m.font=v.getAttribute("face"),m.size=y(v,"size"),m.lineHeight=y(g,"lineHeight")+r,m.chars={};var T=s.getElementsByTagName("char"),w=l!==void 0&&l.trimmed;if(w)var b=l.height,E=l.width;for(var A=0;A<T.length;A++){var R=T[A],I=y(R,"id"),P=String.fromCharCode(I),N=y(R,"x"),F=y(R,"y"),O=y(R,"width"),D=y(R,"height");w&&(N<E&&(E=N),F<b&&(b=F)),w&&b!==0&&E!==0&&(N-=l.x,F-=l.y);var L=(n+N)/d,z=(h+F)/u,X=(n+N+O)/d,H=(h+F+D)/u;if(m.chars[I]={x:N,y:F,width:O,height:D,centerX:Math.floor(O/2),centerY:Math.floor(D/2),xOffset:y(R,"xoffset"),yOffset:y(R,"yoffset"),xAdvance:y(R,"xadvance")+a,data:{},kerning:{},u0:L,v0:z,u1:X,v1:H},i&&O!==0&&D!==0){var J=i.add(P,p,N,F,O,D);J&&J.setUVs(O,D,L,z,X,H)}}var G=s.getElementsByTagName("kerning");for(A=0;A<G.length;A++){var k=G[A],M=y(k,"first"),B=y(k,"second"),U=y(k,"amount");m.chars[B].kerning[M]=U}return m};o.exports=t},55873:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66863),l=t(98611),a={Parse:t(39860)};a=l(!1,a,s),o.exports=a},66863:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};o.exports=y},13468:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44616),l=t(56694),a=t(88899),r=new l({Extends:s,Mixins:[a],initialize:function(n,h,d,u,p,m,v){s.call(this,n,h,d,u,p,m,v),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(i,n){return this.cropWidth=i,this.cropHeight=n,this},setDisplayCallback:function(i){return this.displayCallback=i,this},setScrollX:function(i){return this.scrollX=i,this},setScrollY:function(i){return this.scrollY=i,this}});o.exports=r},93438:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(49584),l=function(a,r,i,n){var h=r._text,d=h.length,u=a.currentContext;if(!(d===0||!s(a,u,r,i,n))){i.addToRenderList(r);var p=r.fromAtlas?r.frame:r.texture.frames.__BASE,m=r.displayCallback,v=r.callbackData,g=r.fontData.chars,T=r.fontData.lineHeight,w=r._letterSpacing,b=0,E=0,A=0,R=null,I=0,P=0,N=0,F=0,O=0,D=0,L=null,z=0,X=r.frame.source.image,H=p.cutX,J=p.cutY,G=0,k=0,M=r._fontSize/r.fontData.size,B=r._align,U=0,W=0;r.getTextBounds(!1);var K=r._bounds.lines;B===1?W=(K.longest-K.lengths[0])/2:B===2&&(W=K.longest-K.lengths[0]),u.translate(-r.displayOriginX,-r.displayOriginY);var q=i.roundPixels;r.cropWidth>0&&r.cropHeight>0&&(u.beginPath(),u.rect(0,0,r.cropWidth,r.cropHeight),u.clip());for(var _=0;_<d;_++){if(k=M,G=0,A=h.charCodeAt(_),A===10){U++,B===1?W=(K.longest-K.lengths[U])/2:B===2&&(W=K.longest-K.lengths[U]),b=0,E+=T,L=null;continue}if(R=g[A],!!R){if(I=H+R.x,P=J+R.y,N=R.width,F=R.height,O=R.xOffset+b-r.scrollX,D=R.yOffset+E-r.scrollY,L!==null){var rt=R.kerning[z];O+=rt!==void 0?rt:0}if(m){v.index=_,v.charCode=A,v.x=O,v.y=D,v.scale=k,v.rotation=G,v.data=R.data;var ft=m(v);O=ft.x,D=ft.y,k=ft.scale,G=ft.rotation}O*=k,D*=k,O+=W,b+=R.xAdvance+w+(rt!==void 0?rt:0),L=R,z=A,!(N===0||F===0||A===32)&&(q&&(O=Math.round(O),D=Math.round(D)),u.save(),u.translate(O,D),u.rotate(G),u.scale(k,k),u.drawImage(X,I,P,N,F,0,0,N,F),u.restore())}}u.restore()}};o.exports=l},67513:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(13468),l=t(88933),a=t(99325),r=t(20494);a.register("dynamicBitmapText",function(i,n){i===void 0&&(i={});var h=r(i,"font",""),d=r(i,"text",""),u=r(i,"size",!1),p=new s(this.scene,0,0,h,d,u);return n!==void 0&&(i.add=n),l(this.scene,p,i),p})},94145:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(13468),l=t(61286);l.register("dynamicBitmapText",function(a,r,i,n,h){return this.displayList.add(new s(this.scene,a,r,i,n,h))})},88899:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(16873),a=t(93438),o.exports={renderWebGL:l,renderCanvas:a}},16873:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(69360),a=t(75512),r=new l,i=function(n,h,d,u){var p=h.text,m=p.length;if(m!==0){d.addToRenderList(h);var v=n.pipelines.set(h.pipeline,h),g=s(h,d,u);n.pipelines.preBatch(h);var T=g.sprite,w=g.calc,b=r,E=h.cropWidth>0||h.cropHeight>0;E&&(v.flush(),n.pushScissor(w.tx,w.ty,h.cropWidth*w.scaleX,h.cropHeight*w.scaleY));var A=h.frame,R=A.glTexture,I=h.tintFill,P=a.getTintAppendFloatAlpha(h.tintTopLeft,d.alpha*h._alphaTL),N=a.getTintAppendFloatAlpha(h.tintTopRight,d.alpha*h._alphaTR),F=a.getTintAppendFloatAlpha(h.tintBottomLeft,d.alpha*h._alphaBL),O=a.getTintAppendFloatAlpha(h.tintBottomRight,d.alpha*h._alphaBR),D=v.setGameObject(h),L=0,z=0,X=0,H=0,J=h.letterSpacing,G,k=0,M=0,B,U=h.scrollX,W=h.scrollY,K=h.fontData,q=K.chars,_=K.lineHeight,rt=h.fontSize/K.size,ft=0,mt=h._align,vt=0,yt=0,xt=h.getTextBounds(!1);h.maxWidth>0&&(p=xt.wrappedText,m=p.length);var It=h._bounds.lines;mt===1?yt=(It.longest-It.lengths[0])/2:mt===2&&(yt=It.longest-It.lengths[0]);for(var $t=d.roundPixels,Zt=h.displayCallback,Bt=h.callbackData,At=0;At<m;At++){if(X=p.charCodeAt(At),X===10){vt++,mt===1?yt=(It.longest-It.lengths[vt])/2:mt===2&&(yt=It.longest-It.lengths[vt]),L=0,z+=_,B=null;continue}if(G=q[X],!!G){k=G.width,M=G.height;var kt=G.xOffset+L-U,Ut=G.yOffset+z-W;if(B!==null){var ee=G.kerning[H];kt+=ee!==void 0?ee:0}if(L+=G.xAdvance+J,B=G,H=X,!(k===0||M===0||X===32)){if(rt=h.fontSize/h.fontData.size,ft=0,Zt){Bt.color=0,Bt.tint.topLeft=P,Bt.tint.topRight=N,Bt.tint.bottomLeft=F,Bt.tint.bottomRight=O,Bt.index=At,Bt.charCode=X,Bt.x=kt,Bt.y=Ut,Bt.scale=rt,Bt.rotation=ft,Bt.data=G.data;var te=Zt(Bt);kt=te.x,Ut=te.y,rt=te.scale,ft=te.rotation,te.color?(P=te.color,N=te.color,F=te.color,O=te.color):(P=te.tint.topLeft,N=te.tint.topRight,F=te.tint.bottomLeft,O=te.tint.bottomRight),P=a.getTintAppendFloatAlpha(P,d.alpha*h._alphaTL),N=a.getTintAppendFloatAlpha(N,d.alpha*h._alphaTR),F=a.getTintAppendFloatAlpha(F,d.alpha*h._alphaBL),O=a.getTintAppendFloatAlpha(O,d.alpha*h._alphaBR)}kt*=rt,Ut*=rt,kt-=h.displayOriginX,Ut-=h.displayOriginY,kt+=yt,b.applyITRS(kt,Ut,ft,rt,rt),w.multiply(b,T);var fe=G.u0,ae=G.v0,le=G.u1,re=G.v1,we=k,Se=M,Me=T.e,ce=T.f,se=Se*T.c+T.e,Ae=Se*T.d+T.f,Le=we*T.a+Se*T.c+T.e,nn=we*T.b+Se*T.d+T.f,ge=we*T.a+T.e,Xe=we*T.b+T.f;$t&&(Me=Math.round(Me),ce=Math.round(ce),se=Math.round(se),Ae=Math.round(Ae),Le=Math.round(Le),nn=Math.round(nn),ge=Math.round(ge),Xe=Math.round(Xe)),v.shouldFlush(6)&&(v.flush(),D=v.setGameObject(h)),v.batchQuad(h,Me,ce,se,Ae,Le,nn,ge,Xe,fe,ae,le,re,P,N,F,O,I,R,D)}}}E&&(v.flush(),n.popScissor()),n.pipelines.postBatch(h)}};o.exports=i},44616:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82897),a=t(64937),r=t(89980),i=t(82173),n=t(68298),h=t(31476),d=t(74118),u=t(84557),p=new s({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Texture,a.Tint,a.Transform,a.Visible,u],initialize:function(v,g,T,w,b,E,A){b===void 0&&(b=""),A===void 0&&(A=0),r.call(this,v,"BitmapText"),this.font=w;var R=this.scene.sys.cache.bitmapFont.get(w);R||console.warn("Invalid BitmapText key: "+w),this.fontData=R.data,this._text="",this._fontSize=E||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=A,this._bounds=i(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=R.fromAtlas,this.setTexture(R.texture,R.frame),this.setPosition(g,T),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(b)},setLeftAlign:function(){return this._align=p.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=p.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=p.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(m){return this._fontSize=m,this._dirty=!0,this},setLetterSpacing:function(m){return m===void 0&&(m=0),this._letterSpacing=m,this._dirty=!0,this},setLineSpacing:function(m){return m===void 0&&(m=0),this.lineSpacing=m,this},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this.text&&(this._text=m.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(m,v,g,T){return m===void 0&&(m=0),v===void 0&&(v=0),g===void 0&&(g=0),T===void 0&&(T=.5),this.dropShadowX=m,this.dropShadowY=v,this.dropShadowColor=g,this.dropShadowAlpha=T,this},setCharacterTint:function(m,v,g,T,w,b,E){m===void 0&&(m=0),v===void 0&&(v=1),g===void 0&&(g=!1),T===void 0&&(T=-1),w===void 0&&(w=T,b=T,E=T);var A=this.text.length;v===-1&&(v=A),m<0&&(m=A+m),m=l(m,0,A-1);for(var R=l(m+v,m,A),I=this.charColors,P=m;P<R;P++){var N=I[P];if(T===-1)I[P]=null;else{var F=g?1:0;N?(N.tintEffect=F,N.tintTL=T,N.tintTR=w,N.tintBL=b,N.tintBR=E):I[P]={tintEffect:F,tintTL:T,tintTR:w,tintBL:b,tintBR:E}}}return this},setWordTint:function(m,v,g,T,w,b,E){v===void 0&&(v=1);for(var A=this.getTextBounds(),R=A.words,I=typeof m=="number",P=0,N=0;N<R.length;N++){var F=R[N];if((I&&N===m||!I&&F.word===m)&&(this.setCharacterTint(F.i,F.word.length,g,T,w,b,E),P++,P===v))return this}return this},getTextBounds:function(m){var v=this._bounds;return(this._dirty||m||this.scaleX!==v.scaleX||this.scaleY!==v.scaleY)&&(i(this,m,!0,v),this._dirty=!1),v},getCharacterAt:function(m,v,g){for(var T=this.getLocalPoint(m,v,null,g),w=this.getTextBounds(),b=w.characters,E=new d,A=0;A<b.length;A++){var R=b[A];if(E.setTo(R.x,R.t,R.r-R.x,R.b),E.contains(T.x,T.y))return R}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(m,v,g){if(v===void 0&&(v=this._fontSize),g===void 0&&(g=this._align),m!==this.font){var T=this.scene.sys.cache.bitmapFont.get(m);T&&(this.font=m,this.fontData=T.data,this._fontSize=v,this._align=g,this.fromAtlas=T.fromAtlas===!0,this.setTexture(T.texture,T.frame),i(this,!1,!0,this._bounds))}return this},setMaxWidth:function(m,v){return this._maxWidth=m,this._dirty=!0,v!==void 0&&(this.wordWrapCharCode=v),this},align:{set:function(m){this._align=m,this._dirty=!0},get:function(){return this._align}},text:{set:function(m){this.setText(m)},get:function(){return this._text}},fontSize:{set:function(m){this._fontSize=m,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(m){this._letterSpacing=m,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(m){this._lineSpacing=m,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(m){this._maxWidth=m,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var m=a.ToJSON(this),v={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return m.data=v,m},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});p.ALIGN_LEFT=0,p.ALIGN_CENTER=1,p.ALIGN_RIGHT=2,p.ParseFromAtlas=n,p.ParseXMLBitmapFont=h,o.exports=p},97545:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(49584),l=function(a,r,i,n){var h=r._text,d=h.length,u=a.currentContext;if(!(d===0||!s(a,u,r,i,n))){i.addToRenderList(r);var p=r.fromAtlas?r.frame:r.texture.frames.__BASE,m=r.fontData.chars,v=r.fontData.lineHeight,g=r._letterSpacing,T=r._lineSpacing,w=0,b=0,E=0,A=null,R=0,I=0,P=0,N=0,F=0,O=0,D=null,L=0,z=p.source.image,X=p.cutX,H=p.cutY,J=r._fontSize/r.fontData.size,G=r._align,k=0,M=0,B=r.getTextBounds(!1);r.maxWidth>0&&(h=B.wrappedText,d=h.length);var U=r._bounds.lines;G===1?M=(U.longest-U.lengths[0])/2:G===2&&(M=U.longest-U.lengths[0]),u.translate(-r.displayOriginX,-r.displayOriginY);for(var W=i.roundPixels,K=0;K<d;K++){if(E=h.charCodeAt(K),E===10){k++,G===1?M=(U.longest-U.lengths[k])/2:G===2&&(M=U.longest-U.lengths[k]),w=0,b+=v+T,D=null;continue}if(A=m[E],!!A){if(R=X+A.x,I=H+A.y,P=A.width,N=A.height,F=A.xOffset+w,O=A.yOffset+b,D!==null){var q=A.kerning[L];F+=q!==void 0?q:0}F*=J,O*=J,F+=M,w+=A.xAdvance+g+(q!==void 0?q:0),D=A,L=E,!(P===0||N===0||E===32)&&(W&&(F=Math.round(F),O=Math.round(O)),u.save(),u.translate(F,O),u.scale(J,J),u.drawImage(z,R,I,P,N,0,0,P,N),u.restore())}}u.restore()}};o.exports=l},95499:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44616),l=t(88933),a=t(99325),r=t(20494),i=t(10850);a.register("bitmapText",function(n,h){n===void 0&&(n={});var d=i(n,"font",""),u=r(n,"text",""),p=r(n,"size",!1),m=i(n,"align",0),v=new s(this.scene,0,0,d,u,p,m);return h!==void 0&&(n.add=h),l(this.scene,v,n),v})},21797:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44616),l=t(61286);l.register("bitmapText",function(a,r,i,n,h,d){return this.displayList.add(new s(this.scene,a,r,i,n,h,d))})},84557:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(26372),a=t(97545),o.exports={renderWebGL:l,renderCanvas:a}},26372:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8810),l=t(73329),a=t(75512),r=function(i,n,h,d){var u=n._text,p=u.length;if(p!==0){h.addToRenderList(n);var m=i.pipelines.set(n.pipeline,n),v=l(n,h,d).calc;i.pipelines.preBatch(n);var g=h.roundPixels,T=h.alpha,w=n.charColors,b=n.tintFill,E=a.getTintAppendFloatAlpha,A=E(n.tintTopLeft,T*n._alphaTL),R=E(n.tintTopRight,T*n._alphaTR),I=E(n.tintBottomLeft,T*n._alphaBL),P=E(n.tintBottomRight,T*n._alphaBR),N=n.frame.glTexture,F=m.setGameObject(n),O=n.getTextBounds(!1),D,L,z,X=O.characters,H=n.dropShadowX,J=n.dropShadowY,G=H!==0||J!==0;if(G){var k=n.dropShadowColor,M=n.dropShadowAlpha,B=E(k,T*M*n._alphaTL),U=E(k,T*M*n._alphaTR),W=E(k,T*M*n._alphaBL),K=E(k,T*M*n._alphaBR);for(D=0;D<X.length;D++)L=X[D],z=L.glyph,!(L.code===32||z.width===0||z.height===0)&&s(m,n,L,z,H,J,v,g,B,U,W,K,1,N,F)}for(D=0;D<X.length;D++)if(L=X[D],z=L.glyph,!(L.code===32||z.width===0||z.height===0))if(m.shouldFlush(6)&&(m.flush(),F=m.setGameObject(n)),w[L.i]){var q=w[L.i],_=q.tintEffect,rt=E(q.tintTL,T*n._alphaTL),ft=E(q.tintTR,T*n._alphaTR),mt=E(q.tintBL,T*n._alphaBL),vt=E(q.tintBR,T*n._alphaBR);s(m,n,L,z,0,0,v,g,rt,ft,mt,vt,_,N,F)}else s(m,n,L,z,0,0,v,g,A,R,I,P,b,N,F);i.pipelines.postBatch(n)}};o.exports=r},52816:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92246),l=t(41664),a=t(56694),r=t(64937),i=t(82047),n=t(89980),h=t(71207),d=new a({Extends:n,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Size,r.Texture,r.Transform,r.Visible,s],initialize:function(p,m,v,g,T){n.call(this,p,"Blitter"),this.setTexture(g,T),this.setPosition(m,v),this.initPipeline(),this.initPostPipeline(),this.children=new h,this.renderList=[],this.dirty=!1},create:function(u,p,m,v,g){v===void 0&&(v=!0),g===void 0&&(g=this.children.length),m===void 0?m=this.frame:m instanceof i||(m=this.texture.get(m));var T=new l(this,u,p,m,v);return this.children.addAt(T,g,!1),this.dirty=!0,T},createFromCallback:function(u,p,m,v){for(var g=this.createMultiple(p,m,v),T=0;T<g.length;T++){var w=g[T];u.call(this,w,T)}return g},createMultiple:function(u,p,m){p===void 0&&(p=this.frame.name),m===void 0&&(m=!0),Array.isArray(p)||(p=[p]);var v=[],g=this;return p.forEach(function(T){for(var w=0;w<u;w++)v.push(g.create(0,0,T,m))}),v},childCanRender:function(u){return u.visible&&u.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});o.exports=d},33177:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=s.getRenderList();if(r.length!==0){var i=t.currentContext,n=l.alpha*s.alpha;if(n!==0){l.addToRenderList(s),i.globalCompositeOperation=t.blendModes[s.blendMode],i.imageSmoothingEnabled=!s.frame.source.scaleMode;var h=s.x-l.scrollX*s.scrollFactorX,d=s.y-l.scrollY*s.scrollFactorY;i.save(),a&&a.copyToContext(i);for(var u=l.roundPixels,p=0;p<r.length;p++){var m=r[p],v=m.flipX||m.flipY,g=m.frame,T=g.canvasData,w=g.x,b=g.y,E=1,A=1,R=m.alpha*n;R!==0&&(i.globalAlpha=R,v?(m.flipX&&(E=-1,w-=T.width),m.flipY&&(A=-1,b-=T.height),T.width>0&&T.height>0&&(i.save(),i.translate(m.x+h,m.y+d),i.scale(E,A),i.drawImage(g.source.image,T.x,T.y,T.width,T.height,w,b,T.width,T.height),i.restore())):(u&&(w=Math.round(w),b=Math.round(b)),T.width>0&&T.height>0&&i.drawImage(g.source.image,T.x,T.y,T.width,T.height,w+m.x+h,b+m.y+d,T.width,T.height)))}i.restore()}}};o.exports=y},68452:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(52816),l=t(88933),a=t(99325),r=t(20494);a.register("blitter",function(i,n){i===void 0&&(i={});var h=r(i,"key",null),d=r(i,"frame",null),u=new s(this.scene,0,0,h,d);return n!==void 0&&(i.add=n),l(this.scene,u,i),u})},38906:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(52816),l=t(61286);l.register("blitter",function(a,r,i,n){return this.displayList.add(new s(this.scene,a,r,i,n))})},92246:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(89165),a=t(33177),o.exports={renderWebGL:l,renderCanvas:a}},89165:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(69360),l=t(75512),a=new s,r=function(i,n,h,d){var u=n.getRenderList(),p=h.alpha*n.alpha;if(!(u.length===0||p===0)){h.addToRenderList(n);var m=i.pipelines.set(this.pipeline,n),v=h.scrollX*n.scrollFactorX,g=h.scrollY*n.scrollFactorY,T=a.copyFrom(h.matrix);d&&(T.multiplyWithOffset(d,-v,-g),v=0,g=0);var w=n.x-v,b=n.y-g,E=-1,A=!1;i.pipelines.preBatch(n);for(var R=0;R<u.length;R++){var I=u[R],P=I.frame,N=I.alpha*p;if(N!==0){var F=P.width,O=P.height,D=w+I.x+P.x,L=b+I.y+P.y;I.flipX&&(F*=-1,D+=P.width),I.flipY&&(O*=-1,L+=P.height);var z=T.setQuad(D,L,D+F,L+O),X=l.getTintAppendFloatAlpha(I.tint,N);if(P.sourceIndex!==E){var H=m.setGameObject(n,P);E=P.sourceIndex}m.batchQuad(n,z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],P.u0,P.v0,P.u1,P.v1,X,X,X,X,A,P.glTexture,H)&&(E=-1)}}i.pipelines.postBatch(n)}};o.exports=r},41664:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82047),a=new s({initialize:function(i,n,h,d,u){this.parent=i,this.x=n,this.y=h,this.frame=d,this.data={},this.tint=16777215,this._visible=u,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(r){return r===void 0?this.frame=this.parent.frame:r instanceof l&&r.texture===this.parent.texture?this.frame=r:this.frame=this.parent.texture.get(r),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(r,i,n){return this.x=r,this.y=i,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(r,i){return this.x=r,this.y=i,this},setFlipX:function(r){return this.flipX=r,this},setFlipY:function(r){return this.flipY=r,this},setFlip:function(r,i){return this.flipX=r,this.flipY=i,this},setVisible:function(r){return this.visible=r,this},setAlpha:function(r){return this.alpha=r,this},setTint:function(r){return this.tint=r,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(r){this.parent.dirty|=this._visible!==r,this._visible=r}},alpha:{get:function(){return this._alpha},set:function(r){this.parent.dirty|=this._alpha>0!=r>0,this._alpha=r}}});o.exports=a},97123:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=2,a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r,i,n,h){return r===void 0&&(r=1),i===void 0?this.alpha=r:(this._alphaTL=s(r,0,1),this._alphaTR=s(i,0,1),this._alphaBL=s(n,0,1),this._alphaBR=s(h,0,1)),this},alpha:{get:function(){return this._alpha},set:function(r){var i=s(r,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,i===0?this.renderFlags&=~l:this.renderFlags|=l}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(r){var i=s(r,0,1);this._alphaTL=i,i!==0&&(this.renderFlags|=l)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(r){var i=s(r,0,1);this._alphaTR=i,i!==0&&(this.renderFlags|=l)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(r){var i=s(r,0,1);this._alphaBL=i,i!==0&&(this.renderFlags|=l)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(r){var i=s(r,0,1);this._alphaBR=i,i!==0&&(this.renderFlags|=l)}}};o.exports=a},15720:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=2,a={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r){return r===void 0&&(r=1),this.alpha=r,this},alpha:{get:function(){return this._alpha},set:function(r){var i=s(r,0,1);this._alpha=i,i===0?this.renderFlags&=~l:this.renderFlags|=l}}};o.exports=a},69732:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l={_blendMode:s.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(a){typeof a=="string"&&(a=s[a]),a|=0,a>=-1&&(this._blendMode=a)}},setBlendMode:function(a){return this.blendMode=a,this}};o.exports=l},28284:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,s){return this.width=t,this.height=s,this},setDisplaySize:function(t,s){return this.displayWidth=t,this.displayHeight=s,this}};o.exports=y},85293:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={texture:null,frame:null,isCropped:!1,setCrop:function(t,s,l,a){if(t===void 0)this.isCropped=!1;else if(this.frame){if(typeof t=="number")this.frame.setCropUVs(this._crop,t,s,l,a,this.flipX,this.flipY);else{var r=t;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=y},14975:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return t===void 0&&(t=0),this.depth=t,this}};o.exports=y},88677:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(96910),a=t(72677),r=new s({initialize:function(n,h){this.gameObject=n,this.isPost=h,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(i){return i===void 0&&(i=0),this.padding=i,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(i){if(!this.isPost){var n=this.gameObject.scene.sys.renderer;n&&n.pipelines?(this.gameObject.pipeline=n.pipelines.FX_PIPELINE,i!==void 0&&(this.padding=i),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var i=this.list,n=0;n<i.length;n++)i[n].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(i){var n;if(this.isPost){var h=this.gameObject.getPostPipeline(String(i.type));for(Array.isArray(h)||(h=[h]),n=0;n<h.length;n++){var d=h[n];if(d.controller===i){this.gameObject.removePostPipeline(d),i.destroy();break}}}else{var u=this.list;for(n=0;n<u.length;n++)u[n]===i&&(a(u,n),i.destroy())}return this.gameObject},disable:function(i){return i===void 0&&(i=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,i&&this.clear(),this.gameObject},add:function(i,n){if(this.isPost){var h=String(i.type);this.gameObject.setPostPipeline(h,n);var d=this.gameObject.getPostPipeline(h);if(d)return Array.isArray(d)&&(d=d.pop()),d.controller=i,i}else return this.enabled||this.enable(),this.list.push(i),i},addGlow:function(i,n,h,d,u,p){return this.add(new l.Glow(this.gameObject,i,n,h,d),{quality:u,distance:p})},addShadow:function(i,n,h,d,u,p,m){return this.add(new l.Shadow(this.gameObject,i,n,h,d,u,p,m))},addPixelate:function(i){return this.add(new l.Pixelate(this.gameObject,i))},addVignette:function(i,n,h,d){return this.add(new l.Vignette(this.gameObject,i,n,h,d))},addShine:function(i,n,h,d){return this.add(new l.Shine(this.gameObject,i,n,h,d))},addBlur:function(i,n,h,d,u,p){return this.add(new l.Blur(this.gameObject,i,n,h,d,u,p))},addGradient:function(i,n,h,d,u,p,m,v){return this.add(new l.Gradient(this.gameObject,i,n,h,d,u,p,m,v))},addBloom:function(i,n,h,d,u,p){return this.add(new l.Bloom(this.gameObject,i,n,h,d,u,p))},addColorMatrix:function(){return this.add(new l.ColorMatrix(this.gameObject))},addCircle:function(i,n,h,d,u){return this.add(new l.Circle(this.gameObject,i,n,h,d,u))},addBarrel:function(i){return this.add(new l.Barrel(this.gameObject,i))},addDisplacement:function(i,n,h){return this.add(new l.Displacement(this.gameObject,i,n,h))},addWipe:function(i,n,h){return this.add(new l.Wipe(this.gameObject,i,n,h))},addReveal:function(i,n,h){return this.add(new l.Wipe(this.gameObject,i,n,h,!0))},addBokeh:function(i,n,h){return this.add(new l.Bokeh(this.gameObject,i,n,h))},addTiltShift:function(i,n,h,d,u,p){return this.add(new l.Bokeh(this.gameObject,i,n,h,!0,d,u,p))},destroy:function(){this.clear(),this.gameObject=null}});o.exports=r},92972:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,s){return this.flipX=t,this.flipY=s,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};o.exports=y},80693:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(2386),a=t(93736),r={prepareBoundsOutput:function(i,n){if(n===void 0&&(n=!1),this.rotation!==0&&l(i,this.x,this.y,this.rotation),n&&this.parentContainer){var h=this.parentContainer.getBoundsTransformMatrix();h.transformPoint(i.x,i.y,i)}return i},getCenter:function(i,n){return i===void 0&&(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,n)},getTopLeft:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,n)},getTopCenter:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,n)},getTopRight:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,n)},getLeftCenter:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,n)},getRightCenter:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,n)},getBottomLeft:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,n)},getBottomCenter:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,n)},getBottomRight:function(i,n){return i||(i=new a),i.x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,n)},getBounds:function(i){i===void 0&&(i=new s);var n,h,d,u,p,m,v,g;if(this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(i),T.transformPoint(i.x,i.y,i),n=i.x,h=i.y,this.getTopRight(i),T.transformPoint(i.x,i.y,i),d=i.x,u=i.y,this.getBottomLeft(i),T.transformPoint(i.x,i.y,i),p=i.x,m=i.y,this.getBottomRight(i),T.transformPoint(i.x,i.y,i),v=i.x,g=i.y}else this.getTopLeft(i),n=i.x,h=i.y,this.getTopRight(i),d=i.x,u=i.y,this.getBottomLeft(i),p=i.x,m=i.y,this.getBottomRight(i),v=i.x,g=i.y;return i.x=Math.min(n,d,p,v),i.y=Math.min(h,u,m,g),i.width=Math.max(n,d,p,v)-i.x,i.height=Math.max(h,u,m,g)-i.y,i}};o.exports=r},39171:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(76756),l=t(63037),a={mask:null,setMask:function(r){return this.mask=r,this},clearMask:function(r){return r===void 0&&(r=!1),r&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(r,i,n,h,d){return r===void 0&&(this.texture||this.shader||this.geom)&&(r=this),new s(this.scene,r,i,n,h,d)},createGeometryMask:function(r){return r===void 0&&(this.type==="Graphics"||this.geom)&&(r=this),new l(this.scene,r)}};o.exports=a},28072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,s){return t===void 0&&(t=.5),s===void 0&&(s=t),this.originX=t,this.originY=s,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(t,s){return t===void 0&&(t=0),s===void 0&&(s=t),this.displayOriginX=t,this.displayOriginY=s,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};o.exports=y},54211:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75606),l=t(63130),a=t(10850),r=t(55303),i=t(93736),n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:r.PLAYING_FORWARD,setPath:function(h,d){d===void 0&&(d=this.pathConfig);var u=this.pathTween;return u&&u.isPlaying()&&u.stop(),this.path=h,d&&this.startFollow(d),this},setRotateToPath:function(h,d){return d===void 0&&(d=0),this.rotateToPath=h,this.pathRotationOffset=d,this},isFollowing:function(){var h=this.pathTween;return h&&h.isPlaying()},startFollow:function(h,d){h===void 0&&(h={}),d===void 0&&(d=0);var u=this.pathTween;u&&u.isPlaying()&&u.stop(),typeof h=="number"&&(h={duration:h}),h.from=a(h,"from",0),h.to=a(h,"to",1);var p=l(h,"positionOnPath",!1);this.rotateToPath=l(h,"rotateToPath",!1),this.pathRotationOffset=a(h,"rotationOffset",0);var m=a(h,"startAt",d);if(m&&(h.onStart=function(g){var T=g.data[0];T.progress=m,T.elapsed=T.duration*m;var w=T.ease(T.progress);T.current=T.start+(T.end-T.start)*w,T.setTargetValue()}),this.pathOffset||(this.pathOffset=new i(this.x,this.y)),this.pathVector||(this.pathVector=new i),this.pathDelta||(this.pathDelta=new i),this.pathDelta.reset(),h.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(h),this.path.getStartPoint(this.pathOffset),p&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=r.PLAYING_FORWARD,this.rotateToPath){var v=this.path.getPoint(.1);this.rotation=Math.atan2(v.y-this.y,v.x-this.x)+s(this.pathRotationOffset)}return this.pathConfig=h,this},pauseFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.pause(),this},resumeFollow:function(){var h=this.pathTween;return h&&h.isPaused()&&h.resume(),this},stopFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this},pathUpdate:function(){var h=this.pathTween;if(h&&h.data){var d=h.data[0],u=this.pathDelta,p=this.pathVector;if(u.copy(p).negate(),d.state===r.COMPLETE){this.path.getPoint(d.end,p),u.add(p),p.add(this.pathOffset),this.setPosition(p.x,p.y);return}else if(d.state!==r.PLAYING_FORWARD&&d.state!==r.PLAYING_BACKWARD)return;this.path.getPoint(h.getValue(),p),u.add(p),p.add(this.pathOffset);var m=this.x,v=this.y;this.setPosition(p.x,p.y);var g=this.x-m,T=this.y-v;if(g===0&&T===0)return;if(d.state!==this._prevDirection){this._prevDirection=d.state;return}this.rotateToPath&&(this.rotation=Math.atan2(T,g)+s(this.pathRotationOffset))}}};o.exports=n},58210:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28699),l={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(a){this.pipelineData={};var r=this.scene.sys.renderer;if(!r)return!1;var i=r.pipelines;if(i){a===void 0&&(a=i.default);var n=i.get(a);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(a,r,i){var n=this.scene.sys.renderer;if(!n)return this;var h=n.pipelines;if(h){var d=h.get(a);d&&(this.pipeline=d),r&&(this.pipelineData=i?s(r):r)}return this},setPipelineData:function(a,r){var i=this.pipelineData;return r===void 0?delete i[a]:i[a]=r,this},resetPipeline:function(a){return a===void 0&&(a=!1),this.pipeline=this.defaultPipeline,a&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};o.exports=l},44086:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28699),l=t(88677),a=t(72677),r={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(i){this.postPipelines=[],this.postPipelineData={},this.postFX=new l(this,!0),i&&(this.preFX=new l(this,!1))},setPostPipeline:function(i,n,h){var d=this.scene.sys.renderer;if(!d)return this;var u=d.pipelines;if(u){Array.isArray(i)||(i=[i]);for(var p=0;p<i.length;p++){var m=u.getPostPipeline(i[p],this,n);m&&this.postPipelines.push(m)}n&&(this.postPipelineData=h?s(n):n)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(i,n){var h=this.postPipelineData;return n===void 0?delete h[i]:h[i]=n,this},getPostPipeline:function(i){for(var n=typeof i=="string",h=this.postPipelines,d=[],u=0;u<h.length;u++){var p=h[u];(n&&p.name===i||!n&&p instanceof i)&&d.push(p)}return d.length===1?d[0]:d},resetPostPipeline:function(i){i===void 0&&(i=!1);for(var n=this.postPipelines,h=0;h<n.length;h++)n[h].destroy();this.postPipelines=[],this.hasPostPipeline=!1,i&&(this.postPipelineData={})},removePostPipeline:function(i){for(var n=typeof i=="string",h=this.postPipelines,d=h.length-1;d>=0;d--){var u=h[d];(n&&u.name===i||!n&&u===i)&&(u.destroy(),a(h,d))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};o.exports=r},45900:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,s){return s===void 0&&(s=t),this.scrollFactorX=t,this.scrollFactorY=s,this}};o.exports=y},31654:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},setSize:function(t,s){return this.width=t,this.height=s,this},setDisplaySize:function(t,s){return this.displayWidth=t,this.displayHeight=s,this}};o.exports=y},82081:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82047),l=8,a={texture:null,frame:null,isCropped:!1,setTexture:function(r,i,n,h){return this.texture=this.scene.sys.textures.get(r),this.setFrame(i,n,h)},setFrame:function(r,i,n){return i===void 0&&(i=!0),n===void 0&&(n=!0),r instanceof s?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};o.exports=a},21850:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82047),l=8,a={texture:null,frame:null,isCropped:!1,setCrop:function(r,i,n,h){if(r===void 0)this.isCropped=!1;else if(this.frame){if(typeof r=="number")this.frame.setCropUVs(this._crop,r,i,n,h,this.flipX,this.flipY);else{var d=r;this.frame.setCropUVs(this._crop,d.x,d.y,d.width,d.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(r,i){return this.texture=this.scene.sys.textures.get(r),this.setFrame(i)},setFrame:function(r,i,n){return i===void 0&&(i=!0),n===void 0&&(n=!0),r instanceof s?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=a},58072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,s,l,a){return t===void 0&&(t=16777215),s===void 0&&(s=t,l=t,a=t),this.tintTopLeft=t,this.tintTopRight=s,this.tintBottomLeft=l,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function(t,s,l,a){return this.setTint(t,s,l,a),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};o.exports=y},48129:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(s.textureKey=t.texture.key,s.frameKey=t.frame.name),s};o.exports=y},56584:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(69360),a=t(64462),r=t(35786),i=t(62138),n=t(93736),h=4,d={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(u){this._scaleX=u,this._scaleY=u,u===0?this.renderFlags&=~h:this.renderFlags|=h}},scaleX:{get:function(){return this._scaleX},set:function(u){this._scaleX=u,u===0?this.renderFlags&=~h:this._scaleY!==0&&(this.renderFlags|=h)}},scaleY:{get:function(){return this._scaleY},set:function(u){this._scaleY=u,u===0?this.renderFlags&=~h:this._scaleX!==0&&(this.renderFlags|=h)}},angle:{get:function(){return i(this._rotation*s.RAD_TO_DEG)},set:function(u){this.rotation=i(u)*s.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=r(u)}},setPosition:function(u,p,m,v){return u===void 0&&(u=0),p===void 0&&(p=u),m===void 0&&(m=0),v===void 0&&(v=0),this.x=u,this.y=p,this.z=m,this.w=v,this},copyPosition:function(u){return u.x!==void 0&&(this.x=u.x),u.y!==void 0&&(this.y=u.y),u.z!==void 0&&(this.z=u.z),u.w!==void 0&&(this.w=u.w),this},setRandomPosition:function(u,p,m,v){return u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),this.x=u+Math.random()*m,this.y=p+Math.random()*v,this},setRotation:function(u){return u===void 0&&(u=0),this.rotation=u,this},setAngle:function(u){return u===void 0&&(u=0),this.angle=u,this},setScale:function(u,p){return u===void 0&&(u=1),p===void 0&&(p=u),this.scaleX=u,this.scaleY=p,this},setX:function(u){return u===void 0&&(u=0),this.x=u,this},setY:function(u){return u===void 0&&(u=0),this.y=u,this},setZ:function(u){return u===void 0&&(u=0),this.z=u,this},setW:function(u){return u===void 0&&(u=0),this.w=u,this},getLocalTransformMatrix:function(u){return u===void 0&&(u=new l),u.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(u,p){u===void 0&&(u=new l);var m=this.parentContainer;if(!m)return this.getLocalTransformMatrix(u);for(p||(p=new l),u.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);m;)p.applyITRS(m.x,m.y,m._rotation,m._scaleX,m._scaleY),p.multiply(u,u),m=m.parentContainer;return u},getLocalPoint:function(u,p,m,v){m||(m=new n),v||(v=this.scene.sys.cameras.main);var g=v.scrollX,T=v.scrollY,w=u+g*this.scrollFactorX-g,b=p+T*this.scrollFactorY-T;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(w,b,m):a(w,b,this.x,this.y,this.rotation,this.scaleX,this.scaleY,m),this._originComponent&&(m.x+=this._displayOriginX,m.y+=this._displayOriginY),m},getParentRotation:function(){for(var u=0,p=this.parentContainer;p;)u+=p.rotation,p=p.parentContainer;return u}};o.exports=d},69360:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(83392),a=t(93736),r=new s({initialize:function(n,h,d,u,p,m){n===void 0&&(n=1),h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=1),p===void 0&&(p=0),m===void 0&&(m=0),this.matrix=new Float32Array([n,h,d,u,p,m,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(i){this.matrix[0]=i}},b:{get:function(){return this.matrix[1]},set:function(i){this.matrix[1]=i}},c:{get:function(){return this.matrix[2]},set:function(i){this.matrix[2]=i}},d:{get:function(){return this.matrix[3]},set:function(i){this.matrix[3]=i}},e:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},f:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},tx:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},ty:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var i=this.matrix,n=i[0],h=i[1],d=i[2],u=i[3];return n||h?h>0?Math.acos(n/this.scaleX):-Math.acos(n/this.scaleX):d||u?l.TAU-(u>0?Math.acos(-d/this.scaleY):-Math.acos(d/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var i=this.matrix;return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,this},translate:function(i,n){var h=this.matrix;return h[4]=h[0]*i+h[2]*n+h[4],h[5]=h[1]*i+h[3]*n+h[5],this},scale:function(i,n){var h=this.matrix;return h[0]*=i,h[1]*=i,h[2]*=n,h[3]*=n,this},rotate:function(i){var n=Math.sin(i),h=Math.cos(i),d=this.matrix,u=d[0],p=d[1],m=d[2],v=d[3];return d[0]=u*h+m*n,d[1]=p*h+v*n,d[2]=u*-n+m*h,d[3]=p*-n+v*h,this},multiply:function(i,n){var h=this.matrix,d=i.matrix,u=h[0],p=h[1],m=h[2],v=h[3],g=h[4],T=h[5],w=d[0],b=d[1],E=d[2],A=d[3],R=d[4],I=d[5],P=n===void 0?h:n.matrix;return P[0]=w*u+b*m,P[1]=w*p+b*v,P[2]=E*u+A*m,P[3]=E*p+A*v,P[4]=R*u+I*m+g,P[5]=R*p+I*v+T,P},multiplyWithOffset:function(i,n,h){var d=this.matrix,u=i.matrix,p=d[0],m=d[1],v=d[2],g=d[3],T=d[4],w=d[5],b=n*p+h*v+T,E=n*m+h*g+w,A=u[0],R=u[1],I=u[2],P=u[3],N=u[4],F=u[5];return d[0]=A*p+R*v,d[1]=A*m+R*g,d[2]=I*p+P*v,d[3]=I*m+P*g,d[4]=N*p+F*v+b,d[5]=N*m+F*g+E,this},transform:function(i,n,h,d,u,p){var m=this.matrix,v=m[0],g=m[1],T=m[2],w=m[3],b=m[4],E=m[5];return m[0]=i*v+n*T,m[1]=i*g+n*w,m[2]=h*v+d*T,m[3]=h*g+d*w,m[4]=u*v+p*T+b,m[5]=u*g+p*w+E,this},transformPoint:function(i,n,h){h===void 0&&(h={x:0,y:0});var d=this.matrix,u=d[0],p=d[1],m=d[2],v=d[3],g=d[4],T=d[5];return h.x=i*u+n*m+g,h.y=i*p+n*v+T,h},invert:function(){var i=this.matrix,n=i[0],h=i[1],d=i[2],u=i[3],p=i[4],m=i[5],v=n*u-h*d;return i[0]=u/v,i[1]=-h/v,i[2]=-d/v,i[3]=n/v,i[4]=(d*m-u*p)/v,i[5]=-(n*m-h*p)/v,this},copyFrom:function(i){var n=this.matrix;return n[0]=i.a,n[1]=i.b,n[2]=i.c,n[3]=i.d,n[4]=i.e,n[5]=i.f,this},copyFromArray:function(i){var n=this.matrix;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],this},copyToContext:function(i){var n=this.matrix;return i.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i},setToContext:function(i){return i.setTransform(this),i},copyToArray:function(i){var n=this.matrix;return i===void 0?i=[n[0],n[1],n[2],n[3],n[4],n[5]]:(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5]),i},setTransform:function(i,n,h,d,u,p){var m=this.matrix;return m[0]=i,m[1]=n,m[2]=h,m[3]=d,m[4]=u,m[5]=p,this},decomposeMatrix:function(){var i=this.decomposedMatrix,n=this.matrix,h=n[0],d=n[1],u=n[2],p=n[3],m=h*p-d*u;if(i.translateX=n[4],i.translateY=n[5],h||d){var v=Math.sqrt(h*h+d*d);i.rotation=d>0?Math.acos(h/v):-Math.acos(h/v),i.scaleX=v,i.scaleY=m/v}else if(u||p){var g=Math.sqrt(u*u+p*p);i.rotation=Math.PI*.5-(p>0?Math.acos(-u/g):-Math.acos(u/g)),i.scaleX=m/g,i.scaleY=g}else i.rotation=0,i.scaleX=0,i.scaleY=0;return i},applyITRS:function(i,n,h,d,u){var p=this.matrix,m=Math.sin(h),v=Math.cos(h);return p[4]=i,p[5]=n,p[0]=v*d,p[1]=m*d,p[2]=-m*u,p[3]=v*u,this},applyInverse:function(i,n,h){h===void 0&&(h=new a);var d=this.matrix,u=d[0],p=d[1],m=d[2],v=d[3],g=d[4],T=d[5],w=1/(u*v+m*-p);return h.x=v*w*i+-m*w*n+(T*m-g*v)*w,h.y=u*w*n+-p*w*i+(-T*u+g*p)*w,h},setQuad:function(i,n,h,d,u,p){u===void 0&&(u=!1),p===void 0&&(p=this.quad);var m=this.matrix,v=m[0],g=m[1],T=m[2],w=m[3],b=m[4],E=m[5];return u?(p[0]=Math.round(i*v+n*T+b),p[1]=Math.round(i*g+n*w+E),p[2]=Math.round(i*v+d*T+b),p[3]=Math.round(i*g+d*w+E),p[4]=Math.round(h*v+d*T+b),p[5]=Math.round(h*g+d*w+E),p[6]=Math.round(h*v+n*T+b),p[7]=Math.round(h*g+n*w+E)):(p[0]=i*v+n*T+b,p[1]=i*g+n*w+E,p[2]=i*v+d*T+b,p[3]=i*g+d*w+E,p[4]=h*v+d*T+b,p[5]=h*g+d*w+E,p[6]=h*v+n*T+b,p[7]=h*g+n*w+E),p},getX:function(i,n){return i*this.a+n*this.c+this.e},getY:function(i,n){return i*this.b+n*this.d+this.f},getXRound:function(i,n,h){var d=this.getX(i,n);return h&&(d=Math.round(d)),d},getYRound:function(i,n,h){var d=this.getY(i,n);return h&&(d=Math.round(d)),d},getCSSMatrix:function(){var i=this.matrix;return"matrix("+i[0]+","+i[1]+","+i[2]+","+i[3]+","+i[4]+","+i[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});o.exports=r},59694:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=1,t={_visible:!0,visible:{get:function(){return this._visible},set:function(s){s?(this._visible=!0,this.renderFlags|=y):(this._visible=!1,this.renderFlags&=~y)}},setVisible:function(s){return this.visible=s,this}};o.exports=t},64937:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Alpha:t(97123),AlphaSingle:t(15720),BlendMode:t(69732),ComputedSize:t(28284),Crop:t(85293),Depth:t(14975),Flip:t(92972),FX:t(88677),GetBounds:t(80693),Mask:t(39171),Origin:t(28072),PathFollower:t(54211),Pipeline:t(58210),PostPipeline:t(44086),ScrollFactor:t(45900),Size:t(31654),Texture:t(82081),TextureCrop:t(21850),Tint:t(58072),ToJSON:t(48129),Transform:t(56584),TransformMatrix:t(69360),Visible:t(59694)}},70339:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59959),l=t(95723),a=t(56694),r=t(64937),i=t(56631),n=t(89980),h=t(74118),d=t(98524),u=t(58795),p=t(93736),m=new a({Extends:n,Mixins:[r.AlphaSingle,r.BlendMode,r.ComputedSize,r.Depth,r.Mask,r.PostPipeline,r.Transform,r.Visible,d],initialize:function(g,T,w,b){n.call(this,g,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new r.TransformMatrix,this.tempTransformMatrix=new r.TransformMatrix,this._sortKey="",this._sysEvents=g.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(T,w),this.setBlendMode(l.SKIP_CHECK),b&&this.add(b)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(v){return v===void 0&&(v=!0),this.exclusive=v,this},getBounds:function(v){if(v===void 0&&(v=new h),v.setTo(this.x,this.y,0,0),this.parentContainer){var g=this.parentContainer.getBoundsTransformMatrix(),T=g.transformPoint(this.x,this.y);v.setTo(T.x,T.y,0,0)}if(this.list.length>0){var w=this.list,b=new h,E=!1;v.setEmpty();for(var A=0;A<w.length;A++){var R=w[A];R.getBounds&&(R.getBounds(b),E?u(b,v,v):(v.setTo(b.x,b.y,b.width,b.height),E=!0))}}return v},addHandler:function(v){v.once(i.DESTROY,this.remove,this),this.exclusive&&(v.parentContainer&&v.parentContainer.remove(v),v.parentContainer=this,v.removeFromDisplayList(),v.addedToScene())},removeHandler:function(v){v.off(i.DESTROY,this.remove,this),this.exclusive&&(v.parentContainer=null,v.removedFromScene(),v.addToDisplayList())},pointToContainer:function(v,g){g===void 0&&(g=new p),this.parentContainer?this.parentContainer.pointToContainer(v,g):(g.x=v.x,g.y=v.y);var T=this.tempTransformMatrix;return T.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),T.invert(),T.transformPoint(v.x,v.y,g),g},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(v){return s.Add(this.list,v,this.maxSize,this.addHandler,this),this},addAt:function(v,g){return s.AddAt(this.list,v,g,this.maxSize,this.addHandler,this),this},getAt:function(v){return this.list[v]},getIndex:function(v){return this.list.indexOf(v)},sort:function(v,g){return v?(g===void 0&&(g=function(T,w){return T[v]-w[v]}),s.StableSort(this.list,g),this):this},getByName:function(v){return s.GetFirst(this.list,"name",v)},getRandom:function(v,g){return s.GetRandom(this.list,v,g)},getFirst:function(v,g,T,w){return s.GetFirst(this.list,v,g,T,w)},getAll:function(v,g,T,w){return s.GetAll(this.list,v,g,T,w)},count:function(v,g,T,w){return s.CountAllMatching(this.list,v,g,T,w)},swap:function(v,g){return s.Swap(this.list,v,g),this},moveTo:function(v,g){return s.MoveTo(this.list,v,g),this},moveAbove:function(v,g){return s.MoveAbove(this.list,v,g),this},moveBelow:function(v,g){return s.MoveBelow(this.list,v,g),this},remove:function(v,g){var T=s.Remove(this.list,v,this.removeHandler,this);if(g&&T){Array.isArray(T)||(T=[T]);for(var w=0;w<T.length;w++)T[w].destroy()}return this},removeAt:function(v,g){var T=s.RemoveAt(this.list,v,this.removeHandler,this);return g&&T&&T.destroy(),this},removeBetween:function(v,g,T){var w=s.RemoveBetween(this.list,v,g,this.removeHandler,this);if(T)for(var b=0;b<w.length;b++)w[b].destroy();return this},removeAll:function(v){var g=this.list;if(v){for(var T=0;T<g.length;T++)g[T]&&g[T].scene&&(g[T].off(i.DESTROY,this.remove,this),g[T].destroy());this.list=[]}else s.RemoveBetween(g,0,g.length,this.removeHandler,this);return this},bringToTop:function(v){return s.BringToTop(this.list,v),this},sendToBack:function(v){return s.SendToBack(this.list,v),this},moveUp:function(v){return s.MoveUp(this.list,v),this},moveDown:function(v){return s.MoveDown(this.list,v),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(v,g,T){var w=s.Replace(this.list,v,g);return w&&(this.addHandler(g),this.removeHandler(v),T&&v.destroy()),this},exists:function(v){return this.list.indexOf(v)>-1},setAll:function(v,g,T,w){return s.SetAll(this.list,v,g,T,w),this},each:function(v,g){var T=[null],w,b=this.list.slice(),E=b.length;for(w=2;w<arguments.length;w++)T.push(arguments[w]);for(w=0;w<E;w++)T[0]=b[w],v.apply(g,T);return this},iterate:function(v,g){var T=[null],w;for(w=2;w<arguments.length;w++)T.push(arguments[w]);for(w=0;w<this.list.length;w++)T[0]=this.list[w],v.apply(g,T);return this},setScrollFactor:function(v,g,T){return g===void 0&&(g=v),T===void 0&&(T=!1),this.scrollFactorX=v,this.scrollFactorY=g,T&&(s.SetAll(this.list,"scrollFactorX",v),s.SetAll(this.list,"scrollFactorY",g)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});o.exports=m},13916:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l.addToRenderList(s);var r=s.list;if(r.length!==0){var i=s.localTransform;a?(i.loadIdentity(),i.multiply(a),i.translate(s.x,s.y),i.rotate(s.rotation),i.scale(s.scaleX,s.scaleY)):i.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY);var n=s.blendMode!==-1;n||t.setBlendMode(0);var h=s._alpha,d=s.scrollFactorX,u=s.scrollFactorY;s.mask&&s.mask.preRenderCanvas(t,null,l);for(var p=0;p<r.length;p++){var m=r[p];if(m.willRender(l)){var v=m.alpha,g=m.scrollFactorX,T=m.scrollFactorY;!n&&m.blendMode!==t.currentBlendMode&&t.setBlendMode(m.blendMode),m.setScrollFactor(g*d,T*u),m.setAlpha(v*h),m.renderCanvas(t,m,l,i),m.setAlpha(v),m.setScrollFactor(g,T)}}s.mask&&s.mask.postRenderCanvas(t)}};o.exports=y},44516:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(70339),a=t(99325),r=t(20494);a.register("container",function(i,n){i===void 0&&(i={});var h=r(i,"x",0),d=r(i,"y",0),u=r(i,"children",null),p=new l(this.scene,h,d,u);return n!==void 0&&(i.add=n),s(this.scene,p,i),p})},23400:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70339),l=t(61286);l.register("container",function(a,r,i){return this.displayList.add(new s(this.scene,a,r,i))})},98524:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(36934),a=t(13916),o.exports={renderWebGL:l,renderCanvas:a}},36934:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l.addToRenderList(s);var r=s.list,i=r.length;if(i!==0){var n=s.localTransform;a?(n.loadIdentity(),n.multiply(a),n.translate(s.x,s.y),n.rotate(s.rotation),n.scale(s.scaleX,s.scaleY)):n.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),t.pipelines.preBatch(s);var h=s.blendMode!==-1;h||t.setBlendMode(0);for(var d=s.alpha,u=s.scrollFactorX,p=s.scrollFactorY,m=0;m<i;m++){var v=r[m];if(v.willRender(l)){var g,T,w,b;if(v.alphaTopLeft!==void 0)g=v.alphaTopLeft,T=v.alphaTopRight,w=v.alphaBottomLeft,b=v.alphaBottomRight;else{var E=v.alpha;g=E,T=E,w=E,b=E}var A=v.scrollFactorX,R=v.scrollFactorY;!h&&v.blendMode!==t.currentBlendMode&&t.setBlendMode(v.blendMode);var I=v.mask;I&&I.preRenderWebGL(t,v,l);var P=v.type;P!==t.currentType&&(t.newType=!0,t.currentType=P),t.nextTypeMatch=m<i-1?r[m+1].type===t.currentType:!1,v.setScrollFactor(A*u,R*p),v.setAlpha(g*d,T*d,w*d,b*d),v.renderWebGL(t,v,l,n,s),v.setAlpha(g,T,w,b),v.setScrollFactor(A,R),I&&I.postRenderWebGL(t,l),t.newType=!1}}t.pipelines.postBatch(s)}};o.exports=y},2452:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(11603),r=t(89980),i=t(42911),n=t(55638),h=t(7599),d=t(51729),u=new s({Extends:r,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Origin,l.ScrollFactor,l.Transform,l.Visible,a],initialize:function(m,v,g,T,w,b){r.call(this,m,"DOMElement"),this.parent=m.sys.game.domContainer,this.cache=m.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(v,g),typeof T=="string"?T[0]==="#"?this.setElement(T.substr(1),w,b):this.createElement(T,w,b):T&&this.setElement(T,w,b),m.sys.events.on(h.SLEEP,this.handleSceneEvent,this),m.sys.events.on(h.WAKE,this.handleSceneEvent,this),m.sys.events.on(h.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(p){var m=this.node,v=m.style;m&&(v.display=p.settings.visible?"block":"none")},setSkew:function(p,m){return p===void 0&&(p=0),m===void 0&&(m=p),this.skewX=p,this.skewY=m,this},setPerspective:function(p){return this.parent.style.perspective=p+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(p){this.parent.style.perspective=p+"px"}},addListener:function(p){if(this.node){p=p.split(" ");for(var m=0;m<p.length;m++)this.node.addEventListener(p[m],this.handler,!1)}return this},removeListener:function(p){if(this.node){p=p.split(" ");for(var m=0;m<p.length;m++)this.node.removeEventListener(p[m],this.handler)}return this},dispatchNativeEvent:function(p){this.emit(p.type,p)},createElement:function(p,m,v){return this.setElement(document.createElement(p),m,v)},setElement:function(p,m,v){this.removeElement();var g;if(typeof p=="string"?(p[0]==="#"&&(p=p.substr(1)),g=document.getElementById(p)):typeof p=="object"&&p.nodeType===1&&(g=p),!g)return this;if(this.node=g,m&&i(m))for(var T in m)g.style[T]=m[T];else typeof m=="string"&&(g.style=m);return g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),v&&(g.innerText=v),this.updateSize()},createFromCache:function(p,m){var v=this.cache.get(p);return v&&this.createFromHTML(v,m),this},createFromHTML:function(p,m){m===void 0&&(m="div"),this.removeElement();var v=document.createElement(m);return this.node=v,v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent&&this.parent.appendChild(v),v.innerHTML=p,this.updateSize()},removeElement:function(){return this.node&&(n(this.node),this.node=null),this},updateSize:function(){var p=this.node,m=p.getBoundingClientRect();return this.width=p.clientWidth,this.height=p.clientHeight,this.displayWidth=m.width||0,this.displayHeight=m.height||0,this},getChildByProperty:function(p,m){if(this.node){for(var v=this.node.querySelectorAll("*"),g=0;g<v.length;g++)if(v[g][p]===m)return v[g]}return null},getChildByID:function(p){return this.getChildByProperty("id",p)},getChildByName:function(p){return this.getChildByProperty("name",p)},setClassName:function(p){return this.node&&(this.node.className=p,this.updateSize()),this},setText:function(p){return this.node&&(this.node.innerText=p,this.updateSize()),this},setHTML:function(p){return this.node&&(this.node.innerHTML=p,this.updateSize()),this},preRender:function(){var p=this.parentContainer,m=this.node;m&&p&&!p.willRender()&&(m.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(h.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(h.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(h.PRE_RENDER,this.preRender,this)}});o.exports=u},66070:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2452),l=t(89980),a=t(69360),r=new a,i=new a,n=new a,h=function(d,u,p,m){if(u.node){var v=u.node.style,g=u.scene.sys.settings;if(!v||!g.visible||l.RENDER_MASK!==u.renderFlags||u.cameraFilter!==0&&u.cameraFilter&p.id||u.parentContainer&&!u.parentContainer.willRender()){v.display="none";return}var T=u.parentContainer,w=p.alpha*u.alpha;T&&(w*=T.alpha);var b=r,E=i,A=n,R=0,I=0,P="0%",N="0%";m?(R=u.width*u.scaleX*u.originX,I=u.height*u.scaleY*u.originY,E.applyITRS(u.x-R,u.y-I,u.rotation,u.scaleX,u.scaleY),b.copyFrom(p.matrix),b.multiplyWithOffset(m,-p.scrollX*u.scrollFactorX,-p.scrollY*u.scrollFactorY),E.e=u.x-R,E.f=u.y-I,b.multiply(E,A)):(R=u.width*u.originX,I=u.height*u.originY,E.applyITRS(u.x-R,u.y-I,u.rotation,u.scaleX,u.scaleY),b.copyFrom(p.matrix),P=100*u.originX+"%",N=100*u.originY+"%",E.e-=p.scrollX*u.scrollFactorX,E.f-=p.scrollY*u.scrollFactorY,b.multiply(E,A)),u.transformOnly||(v.display="block",v.opacity=w,v.zIndex=u._depth,v.pointerEvents=u.pointerEvents,v.mixBlendMode=s[u._blendMode]),v.transform=A.getCSSMatrix()+" skew("+u.skewX+"rad, "+u.skewY+"rad) rotate3d("+u.rotate3d.x+","+u.rotate3d.y+","+u.rotate3d.z+","+u.rotate3d.w+u.rotate3dAngle+")",v.transformOrigin=P+" "+N}};o.exports=h},66788:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38943),l=t(61286);l.register("dom",function(a,r,i,n,h){var d=new s(this.scene,a,r,i,n,h);return this.displayList.add(d),d})},11603:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(66070),a=t(66070),o.exports={renderWebGL:l,renderCanvas:a}},65492:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"},98398:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},40239:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"},17286:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},31496:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="created"},89587:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="error"},59792:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="locked"},96342:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},6017:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="playing"},49614:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"},24418:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeked"},87318:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeking"},50009:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stalled"},61922:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},79501:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="textureready"},4052:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"},54857:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unsupported"},56631:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:t(65492),DESTROY:t(98398),REMOVED_FROM_SCENE:t(40239),VIDEO_COMPLETE:t(17286),VIDEO_CREATED:t(31496),VIDEO_ERROR:t(89587),VIDEO_LOCKED:t(59792),VIDEO_LOOP:t(96342),VIDEO_PLAY:t(49614),VIDEO_PLAYING:t(6017),VIDEO_SEEKED:t(24418),VIDEO_SEEKING:t(87318),VIDEO_STALLED:t(50009),VIDEO_STOP:t(61922),VIDEO_TEXTURE:t(79501),VIDEO_UNLOCKED:t(4052),VIDEO_UNSUPPORTED:t(54857)}},39419:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(79394),i=new s({Extends:a,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.Origin,l.ScrollFactor,l.Size,l.Texture,l.Tint,l.Transform,l.Visible,r],initialize:function(h){a.call(this,h,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});o.exports=i},96699:()=>{},41155:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39419),l=t(61286);l.register("extern",function(){var a=new s(this.scene);return this.displayList.add(a),a})},79394:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(81410),a=t(96699),o.exports={renderWebGL:l,renderCanvas:a}},81410:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n){a.pipelines.clear();var h=s(r,i,n).calc;r.render.call(r,a,i,h),a.pipelines.rebind()};o.exports=l},36266:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(51052),l=t(56694),a=t(36266),r=t(64937),i=t(95669),n=t(89980),h=t(72632),d=t(10850),u=t(83392),p=t(60898),m=new l({Extends:n,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.Transform,r.Visible,r.ScrollFactor,p],initialize:function(g,T){var w=d(T,"x",0),b=d(T,"y",0);n.call(this,g,"Graphics"),this.setPosition(w,b),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(T)},setDefaultStyles:function(v){return d(v,"lineStyle",null)&&(this.defaultStrokeWidth=d(v,"lineStyle.width",1),this.defaultStrokeColor=d(v,"lineStyle.color",16777215),this.defaultStrokeAlpha=d(v,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),d(v,"fillStyle",null)&&(this.defaultFillColor=d(v,"fillStyle.color",16777215),this.defaultFillAlpha=d(v,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(v,g,T){return T===void 0&&(T=1),this.commandBuffer.push(a.LINE_STYLE,v,g,T),this._lineWidth=v,this},fillStyle:function(v,g){return g===void 0&&(g=1),this.commandBuffer.push(a.FILL_STYLE,v,g),this},fillGradientStyle:function(v,g,T,w,b,E,A,R){return b===void 0&&(b=1),E===void 0&&(E=b),A===void 0&&(A=b),R===void 0&&(R=b),this.commandBuffer.push(a.GRADIENT_FILL_STYLE,b,E,A,R,v,g,T,w),this},lineGradientStyle:function(v,g,T,w,b,E){return E===void 0&&(E=1),this.commandBuffer.push(a.GRADIENT_LINE_STYLE,v,E,g,T,w,b),this},beginPath:function(){return this.commandBuffer.push(a.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(a.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(a.FILL_PATH),this},fill:function(){return this.commandBuffer.push(a.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(a.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(a.STROKE_PATH),this},fillCircleShape:function(v){return this.fillCircle(v.x,v.y,v.radius)},strokeCircleShape:function(v){return this.strokeCircle(v.x,v.y,v.radius)},fillCircle:function(v,g,T){return this.beginPath(),this.arc(v,g,T,0,u.PI2),this.fillPath(),this},strokeCircle:function(v,g,T){return this.beginPath(),this.arc(v,g,T,0,u.PI2),this.strokePath(),this},fillRectShape:function(v){return this.fillRect(v.x,v.y,v.width,v.height)},strokeRectShape:function(v){return this.strokeRect(v.x,v.y,v.width,v.height)},fillRect:function(v,g,T,w){return this.commandBuffer.push(a.FILL_RECT,v,g,T,w),this},strokeRect:function(v,g,T,w){var b=this._lineWidth/2,E=v-b,A=v+b;return this.beginPath(),this.moveTo(v,g),this.lineTo(v,g+w),this.strokePath(),this.beginPath(),this.moveTo(v+T,g),this.lineTo(v+T,g+w),this.strokePath(),this.beginPath(),this.moveTo(E,g),this.lineTo(A+T,g),this.strokePath(),this.beginPath(),this.moveTo(E,g+w),this.lineTo(A+T,g+w),this.strokePath(),this},fillRoundedRect:function(v,g,T,w,b){b===void 0&&(b=20);var E=b,A=b,R=b,I=b;typeof b!="number"&&(E=h(b,"tl",20),A=h(b,"tr",20),R=h(b,"bl",20),I=h(b,"br",20));var P=E>=0,N=A>=0,F=R>=0,O=I>=0;return E=Math.abs(E),A=Math.abs(A),R=Math.abs(R),I=Math.abs(I),this.beginPath(),this.moveTo(v+E,g),this.lineTo(v+T-A,g),N?this.arc(v+T-A,g+A,A,-u.TAU,0):this.arc(v+T,g,A,Math.PI,u.TAU,!0),this.lineTo(v+T,g+w-I),O?this.arc(v+T-I,g+w-I,I,0,u.TAU):this.arc(v+T,g+w,I,-u.TAU,Math.PI,!0),this.lineTo(v+R,g+w),F?this.arc(v+R,g+w-R,R,u.TAU,Math.PI):this.arc(v,g+w,R,0,-u.TAU,!0),this.lineTo(v,g+E),P?this.arc(v+E,g+E,E,-Math.PI,-u.TAU):this.arc(v,g,E,u.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(v,g,T,w,b){b===void 0&&(b=20);var E=b,A=b,R=b,I=b,P=Math.min(T,w)/2;typeof b!="number"&&(E=h(b,"tl",20),A=h(b,"tr",20),R=h(b,"bl",20),I=h(b,"br",20));var N=E>=0,F=A>=0,O=R>=0,D=I>=0;return E=Math.min(Math.abs(E),P),A=Math.min(Math.abs(A),P),R=Math.min(Math.abs(R),P),I=Math.min(Math.abs(I),P),this.beginPath(),this.moveTo(v+E,g),this.lineTo(v+T-A,g),this.moveTo(v+T-A,g),F?this.arc(v+T-A,g+A,A,-u.TAU,0):this.arc(v+T,g,A,Math.PI,u.TAU,!0),this.lineTo(v+T,g+w-I),this.moveTo(v+T,g+w-I),D?this.arc(v+T-I,g+w-I,I,0,u.TAU):this.arc(v+T,g+w,I,-u.TAU,Math.PI,!0),this.lineTo(v+R,g+w),this.moveTo(v+R,g+w),O?this.arc(v+R,g+w-R,R,u.TAU,Math.PI):this.arc(v,g+w,R,0,-u.TAU,!0),this.lineTo(v,g+E),this.moveTo(v,g+E),N?this.arc(v+E,g+E,E,-Math.PI,-u.TAU):this.arc(v,g,E,u.TAU,0,!0),this.strokePath(),this},fillPointShape:function(v,g){return this.fillPoint(v.x,v.y,g)},fillPoint:function(v,g,T){return!T||T<1?T=1:(v-=T/2,g-=T/2),this.commandBuffer.push(a.FILL_RECT,v,g,T,T),this},fillTriangleShape:function(v){return this.fillTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},strokeTriangleShape:function(v){return this.strokeTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},fillTriangle:function(v,g,T,w,b,E){return this.commandBuffer.push(a.FILL_TRIANGLE,v,g,T,w,b,E),this},strokeTriangle:function(v,g,T,w,b,E){return this.commandBuffer.push(a.STROKE_TRIANGLE,v,g,T,w,b,E),this},strokeLineShape:function(v){return this.lineBetween(v.x1,v.y1,v.x2,v.y2)},lineBetween:function(v,g,T,w){return this.beginPath(),this.moveTo(v,g),this.lineTo(T,w),this.strokePath(),this},lineTo:function(v,g){return this.commandBuffer.push(a.LINE_TO,v,g),this},moveTo:function(v,g){return this.commandBuffer.push(a.MOVE_TO,v,g),this},strokePoints:function(v,g,T,w){g===void 0&&(g=!1),T===void 0&&(T=!1),w===void 0&&(w=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var b=1;b<w;b++)this.lineTo(v[b].x,v[b].y);return g&&this.lineTo(v[0].x,v[0].y),T&&this.closePath(),this.strokePath(),this},fillPoints:function(v,g,T,w){g===void 0&&(g=!1),T===void 0&&(T=!1),w===void 0&&(w=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var b=1;b<w;b++)this.lineTo(v[b].x,v[b].y);return g&&this.lineTo(v[0].x,v[0].y),T&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(v,g){g===void 0&&(g=32);var T=v.getPoints(g);return this.strokePoints(T,!0)},strokeEllipse:function(v,g,T,w,b){b===void 0&&(b=32);var E=new i(v,g,T,w),A=E.getPoints(b);return this.strokePoints(A,!0)},fillEllipseShape:function(v,g){g===void 0&&(g=32);var T=v.getPoints(g);return this.fillPoints(T,!0)},fillEllipse:function(v,g,T,w,b){b===void 0&&(b=32);var E=new i(v,g,T,w),A=E.getPoints(b);return this.fillPoints(A,!0)},arc:function(v,g,T,w,b,E,A){return E===void 0&&(E=!1),A===void 0&&(A=0),this.commandBuffer.push(a.ARC,v,g,T,w,b,E,A),this},slice:function(v,g,T,w,b,E,A){return E===void 0&&(E=!1),A===void 0&&(A=0),this.commandBuffer.push(a.BEGIN_PATH),this.commandBuffer.push(a.MOVE_TO,v,g),this.commandBuffer.push(a.ARC,v,g,T,w,b,E,A),this.commandBuffer.push(a.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(a.SAVE),this},restore:function(){return this.commandBuffer.push(a.RESTORE),this},translateCanvas:function(v,g){return this.commandBuffer.push(a.TRANSLATE,v,g),this},scaleCanvas:function(v,g){return this.commandBuffer.push(a.SCALE,v,g),this},rotateCanvas:function(v){return this.commandBuffer.push(a.ROTATE,v),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(v,g,T){var w=this.scene.sys,b=w.game.renderer;g===void 0&&(g=w.scale.width),T===void 0&&(T=w.scale.height),m.TargetCamera.setScene(this.scene),m.TargetCamera.setViewport(0,0,g,T),m.TargetCamera.scrollX=this.x,m.TargetCamera.scrollY=this.y;var E,A,R={willReadFrequently:!0};if(typeof v=="string")if(w.textures.exists(v)){E=w.textures.get(v);var I=E.getSourceImage();I instanceof HTMLCanvasElement&&(A=I.getContext("2d",R))}else E=w.textures.createCanvas(v,g,T),A=E.getSourceImage().getContext("2d",R);else v instanceof HTMLCanvasElement&&(A=v.getContext("2d",R));return A&&(this.renderCanvas(b,this,m.TargetCamera,null,A,!1),E&&E.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});m.TargetCamera=new s,o.exports=m},91543:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36266),l=t(49584),a=function(r,i,n,h,d,u){var p=i.commandBuffer,m=p.length,v=d||r.currentContext;if(!(m===0||!l(r,v,i,n,h))){n.addToRenderList(i);var g=1,T=1,w=0,b=0,E=1,A=0,R=0,I=0;v.beginPath();for(var P=0;P<m;++P){var N=p[P];switch(N){case s.ARC:v.arc(p[P+1],p[P+2],p[P+3],p[P+4],p[P+5],p[P+6]),P+=7;break;case s.LINE_STYLE:E=p[P+1],w=p[P+2],g=p[P+3],A=(w&16711680)>>>16,R=(w&65280)>>>8,I=w&255,v.strokeStyle="rgba("+A+","+R+","+I+","+g+")",v.lineWidth=E,P+=3;break;case s.FILL_STYLE:b=p[P+1],T=p[P+2],A=(b&16711680)>>>16,R=(b&65280)>>>8,I=b&255,v.fillStyle="rgba("+A+","+R+","+I+","+T+")",P+=2;break;case s.BEGIN_PATH:v.beginPath();break;case s.CLOSE_PATH:v.closePath();break;case s.FILL_PATH:u||v.fill();break;case s.STROKE_PATH:u||v.stroke();break;case s.FILL_RECT:u?v.rect(p[P+1],p[P+2],p[P+3],p[P+4]):v.fillRect(p[P+1],p[P+2],p[P+3],p[P+4]),P+=4;break;case s.FILL_TRIANGLE:v.beginPath(),v.moveTo(p[P+1],p[P+2]),v.lineTo(p[P+3],p[P+4]),v.lineTo(p[P+5],p[P+6]),v.closePath(),u||v.fill(),P+=6;break;case s.STROKE_TRIANGLE:v.beginPath(),v.moveTo(p[P+1],p[P+2]),v.lineTo(p[P+3],p[P+4]),v.lineTo(p[P+5],p[P+6]),v.closePath(),u||v.stroke(),P+=6;break;case s.LINE_TO:v.lineTo(p[P+1],p[P+2]),P+=2;break;case s.MOVE_TO:v.moveTo(p[P+1],p[P+2]),P+=2;break;case s.LINE_FX_TO:v.lineTo(p[P+1],p[P+2]),P+=5;break;case s.MOVE_FX_TO:v.moveTo(p[P+1],p[P+2]),P+=5;break;case s.SAVE:v.save();break;case s.RESTORE:v.restore();break;case s.TRANSLATE:v.translate(p[P+1],p[P+2]),P+=2;break;case s.SCALE:v.scale(p[P+1],p[P+2]),P+=2;break;case s.ROTATE:v.rotate(p[P+1]),P+=1;break;case s.GRADIENT_FILL_STYLE:P+=5;break;case s.GRADIENT_LINE_STYLE:P+=6;break}}v.restore()}};o.exports=a},41286:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99325),l=t(33182);s.register("graphics",function(a,r){a===void 0&&(a={}),r!==void 0&&(a.add=r);var i=new l(this.scene,a);return a.add&&this.scene.sys.displayList.add(i),i})},13122:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33182),l=t(61286);l.register("graphics",function(a){return this.displayList.add(new s(this.scene,a))})},60898:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(34429),a=t(91543),a=t(91543),o.exports={renderWebGL:l,renderCanvas:a}},34429:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36266),l=t(73329),a=t(69360),r=t(75512),i=function(p,m,v){this.x=p,this.y=m,this.width=v},n=function(p,m,v){this.points=[],this.pointsLength=1,this.points[0]=new i(p,m,v)},h=[],d=new a,u=function(p,m,v,g){if(m.commandBuffer.length!==0){v.addToRenderList(m);var T=p.pipelines.set(m.pipeline,m);p.pipelines.preBatch(m);for(var w=l(m,v,g).calc,b=d.loadIdentity(),E=m.commandBuffer,A=v.alpha*m.alpha,R=1,I=T.fillTint,P=T.strokeTint,N=0,F=0,O=0,D=.01,L=Math.PI*2,z,X=[],H=0,J=!0,G=null,k=r.getTintAppendFloatAlpha,M=0;M<E.length;M++)switch(z=E[M],z){case s.BEGIN_PATH:{X.length=0,G=null,J=!0;break}case s.CLOSE_PATH:{J=!1,G&&G.points.length&&G.points.push(G.points[0]);break}case s.FILL_PATH:{for(H=0;H<X.length;H++)T.batchFillPath(X[H].points,b,w);break}case s.STROKE_PATH:{for(H=0;H<X.length;H++)T.batchStrokePath(X[H].points,R,J,b,w);break}case s.LINE_STYLE:{R=E[++M];var B=E[++M],U=E[++M]*A,W=k(B,U);P.TL=W,P.TR=W,P.BL=W,P.BR=W;break}case s.FILL_STYLE:{var K=E[++M],q=E[++M]*A,_=k(K,q);I.TL=_,I.TR=_,I.BL=_,I.BR=_;break}case s.GRADIENT_FILL_STYLE:{var rt=E[++M]*A,ft=E[++M]*A,mt=E[++M]*A,vt=E[++M]*A;I.TL=k(E[++M],rt),I.TR=k(E[++M],ft),I.BL=k(E[++M],mt),I.BR=k(E[++M],vt);break}case s.GRADIENT_LINE_STYLE:{R=E[++M];var yt=E[++M]*A;P.TL=k(E[++M],yt),P.TR=k(E[++M],yt),P.BL=k(E[++M],yt),P.BR=k(E[++M],yt);break}case s.ARC:{var xt=0,It=E[++M],$t=E[++M],Zt=E[++M],Bt=E[++M],At=E[++M],kt=E[++M],Ut=E[++M];for(At-=Bt,kt?At<-L?At=-L:At>0&&(At=-L+At%L):At>L?At=L:At<0&&(At=L+At%L),G===null&&(G=new n(It+Math.cos(Bt)*Zt,$t+Math.sin(Bt)*Zt,R),X.push(G),xt+=D);xt<1+Ut;)O=At*xt+Bt,N=It+Math.cos(O)*Zt,F=$t+Math.sin(O)*Zt,G.points.push(new i(N,F,R)),xt+=D;O=At+Bt,N=It+Math.cos(O)*Zt,F=$t+Math.sin(O)*Zt,G.points.push(new i(N,F,R));break}case s.FILL_RECT:{T.batchFillRect(E[++M],E[++M],E[++M],E[++M],b,w);break}case s.FILL_TRIANGLE:{T.batchFillTriangle(E[++M],E[++M],E[++M],E[++M],E[++M],E[++M],b,w);break}case s.STROKE_TRIANGLE:{T.batchStrokeTriangle(E[++M],E[++M],E[++M],E[++M],E[++M],E[++M],R,b,w);break}case s.LINE_TO:{G!==null?G.points.push(new i(E[++M],E[++M],R)):(G=new n(E[++M],E[++M],R),X.push(G));break}case s.MOVE_TO:{G=new n(E[++M],E[++M],R),X.push(G);break}case s.SAVE:{h.push(b.copyToArray());break}case s.RESTORE:{b.copyFromArray(h.pop());break}case s.TRANSLATE:{It=E[++M],$t=E[++M],b.translate(It,$t);break}case s.SCALE:{It=E[++M],$t=E[++M],b.scale(It,$t);break}case s.ROTATE:{b.rotate(E[++M]);break}}p.pipelines.postBatch(m)}};o.exports=u},59192:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83979),l=t(56694),a=t(56631),r=t(6659),i=t(71608),n=t(72632),h=t(10850),d=t(19256),u=t(42911),p=t(75757),m=t(58403),v=t(13747),g=new l({Extends:r,initialize:function(w,b,E){r.call(this),E?b&&!Array.isArray(b)&&(b=[b]):Array.isArray(b)?u(b[0])&&(E=b,b=null):u(b)&&(E=b,b=null),this.scene=w,this.children=new m,this.isParent=!0,this.type="Group",this.classType=n(E,"classType",v),this.name=n(E,"name",""),this.active=n(E,"active",!0),this.maxSize=n(E,"maxSize",-1),this.defaultKey=n(E,"defaultKey",null),this.defaultFrame=n(E,"defaultFrame",null),this.runChildUpdate=n(E,"runChildUpdate",!1),this.createCallback=n(E,"createCallback",null),this.removeCallback=n(E,"removeCallback",null),this.createMultipleCallback=n(E,"createMultipleCallback",null),this.internalCreateCallback=n(E,"internalCreateCallback",null),this.internalRemoveCallback=n(E,"internalRemoveCallback",null),b&&this.addMultiple(b),E&&this.createMultiple(E),this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(T,w,b,E,A,R){if(T===void 0&&(T=0),w===void 0&&(w=0),b===void 0&&(b=this.defaultKey),E===void 0&&(E=this.defaultFrame),A===void 0&&(A=!0),R===void 0&&(R=!0),this.isFull())return null;var I=new this.classType(this.scene,T,w,b,E);return I.addToDisplayList(this.scene.sys.displayList),I.addToUpdateList(),I.visible=A,I.setActive(R),this.add(I),I},createMultiple:function(T){if(this.isFull())return[];Array.isArray(T)||(T=[T]);var w=[];if(T[0].key)for(var b=0;b<T.length;b++){var E=this.createFromConfig(T[b]);w=w.concat(E)}return w},createFromConfig:function(T){if(this.isFull())return[];this.classType=n(T,"classType",this.classType);var w=n(T,"key",void 0),b=n(T,"frame",null),E=n(T,"visible",!0),A=n(T,"active",!0),R=[];if(w===void 0)return R;Array.isArray(w)||(w=[w]),Array.isArray(b)||(b=[b]);var I=n(T,"repeat",0),P=n(T,"randomKey",!1),N=n(T,"randomFrame",!1),F=n(T,"yoyo",!1),O=n(T,"quantity",!1),D=n(T,"frameQuantity",1),L=n(T,"max",0),z=p(w,b,{max:L,qty:O||D,random:P,randomB:N,repeat:I,yoyo:F});T.createCallback&&(this.createCallback=T.createCallback),T.removeCallback&&(this.removeCallback=T.removeCallback),T.internalCreateCallback&&(this.internalCreateCallback=T.internalCreateCallback),T.internalRemoveCallback&&(this.internalRemoveCallback=T.internalRemoveCallback);for(var X=0;X<z.length;X++){var H=this.create(0,0,z[X].a,z[X].b,E,A);if(!H)break;R.push(H)}if(d(T,"setXY")){var J=h(T,"setXY.x",0),G=h(T,"setXY.y",0),k=h(T,"setXY.stepX",0),M=h(T,"setXY.stepY",0);s.SetXY(R,J,G,k,M)}if(d(T,"setRotation")){var B=h(T,"setRotation.value",0),U=h(T,"setRotation.step",0);s.SetRotation(R,B,U)}if(d(T,"setScale")){var W=h(T,"setScale.x",1),K=h(T,"setScale.y",W),q=h(T,"setScale.stepX",0),_=h(T,"setScale.stepY",0);s.SetScale(R,W,K,q,_)}if(d(T,"setOrigin")){var rt=h(T,"setOrigin.x",.5),ft=h(T,"setOrigin.y",rt),mt=h(T,"setOrigin.stepX",0),vt=h(T,"setOrigin.stepY",0);s.SetOrigin(R,rt,ft,mt,vt)}if(d(T,"setAlpha")){var yt=h(T,"setAlpha.value",1),xt=h(T,"setAlpha.step",0);s.SetAlpha(R,yt,xt)}if(d(T,"setDepth")){var It=h(T,"setDepth.value",0),$t=h(T,"setDepth.step",0);s.SetDepth(R,It,$t)}if(d(T,"setScrollFactor")){var Zt=h(T,"setScrollFactor.x",1),Bt=h(T,"setScrollFactor.y",Zt),At=h(T,"setScrollFactor.stepX",0),kt=h(T,"setScrollFactor.stepY",0);s.SetScrollFactor(R,Zt,Bt,At,kt)}var Ut=n(T,"hitArea",null),ee=n(T,"hitAreaCallback",null);Ut&&s.SetHitArea(R,Ut,ee);var te=n(T,"gridAlign",!1);return te&&s.GridAlign(R,te),this.createMultipleCallback&&this.createMultipleCallback.call(this,R),R},preUpdate:function(T,w){if(!(!this.runChildUpdate||this.children.size===0))for(var b=this.children.entries.slice(),E=0;E<b.length;E++){var A=b[E];A.active&&A.update(T,w)}},add:function(T,w){return w===void 0&&(w=!1),this.isFull()?this:(this.children.set(T),this.internalCreateCallback&&this.internalCreateCallback.call(this,T),this.createCallback&&this.createCallback.call(this,T),w&&(T.addToDisplayList(this.scene.sys.displayList),T.addToUpdateList()),T.on(a.DESTROY,this.remove,this),this)},addMultiple:function(T,w){if(w===void 0&&(w=!1),Array.isArray(T))for(var b=0;b<T.length;b++)this.add(T[b],w);return this},remove:function(T,w,b){return w===void 0&&(w=!1),b===void 0&&(b=!1),this.children.contains(T)?(this.children.delete(T),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,T),this.removeCallback&&this.removeCallback.call(this,T),T.off(a.DESTROY,this.remove,this),b?T.destroy():w&&(T.removeFromDisplayList(),T.removeFromUpdateList()),this):this},clear:function(T,w){T===void 0&&(T=!1),w===void 0&&(w=!1);for(var b=this.children,E=0;E<b.size;E++){var A=b.entries[E];A.off(a.DESTROY,this.remove,this),w?A.destroy():T&&(A.removeFromDisplayList(),A.removeFromUpdateList())}return this.children.clear(),this},contains:function(T){return this.children.contains(T)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(T,w,b,E){return i(this.children.entries,T,w,b,E)},getFirst:function(T,w,b,E,A,R,I){return this.getHandler(!0,1,T,w,b,E,A,R,I)},getFirstNth:function(T,w,b,E,A,R,I,P){return this.getHandler(!0,T,w,b,E,A,R,I,P)},getLast:function(T,w,b,E,A,R,I){return this.getHandler(!1,1,T,w,b,E,A,R,I)},getLastNth:function(T,w,b,E,A,R,I,P){return this.getHandler(!1,T,w,b,E,A,R,I,P)},getHandler:function(T,w,b,E,A,R,I,P,N){b===void 0&&(b=!1),E===void 0&&(E=!1);var F,O,D=0,L=this.children.entries;if(T)for(O=0;O<L.length;O++)if(F=L[O],F.active===b){if(D++,D===w)break}else F=null;else for(O=L.length-1;O>=0;O--)if(F=L[O],F.active===b){if(D++,D===w)break}else F=null;return F?(typeof A=="number"&&(F.x=A),typeof R=="number"&&(F.y=R),F):E?this.create(A,R,I,P,N):null},get:function(T,w,b,E,A){return this.getFirst(!1,!0,T,w,b,E,A)},getFirstAlive:function(T,w,b,E,A,R){return this.getFirst(!0,T,w,b,E,A,R)},getFirstDead:function(T,w,b,E,A,R){return this.getFirst(!1,T,w,b,E,A,R)},playAnimation:function(T,w){return s.PlayAnimation(this.children.entries,T,w),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(T){T===void 0&&(T=!0);for(var w=0,b=0;b<this.children.size;b++)this.children.entries[b].active===T&&w++;return w},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var T=this.getTotalUsed(),w=this.maxSize===-1?999999999999:this.maxSize;return w-T},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},propertyValueSet:function(T,w,b,E,A){return s.PropertyValueSet(this.children.entries,T,w,b,E,A),this},propertyValueInc:function(T,w,b,E,A){return s.PropertyValueInc(this.children.entries,T,w,b,E,A),this},setX:function(T,w){return s.SetX(this.children.entries,T,w),this},setY:function(T,w){return s.SetY(this.children.entries,T,w),this},setXY:function(T,w,b,E){return s.SetXY(this.children.entries,T,w,b,E),this},incX:function(T,w){return s.IncX(this.children.entries,T,w),this},incY:function(T,w){return s.IncY(this.children.entries,T,w),this},incXY:function(T,w,b,E){return s.IncXY(this.children.entries,T,w,b,E),this},shiftPosition:function(T,w,b){return s.ShiftPosition(this.children.entries,T,w,b),this},angle:function(T,w){return s.Angle(this.children.entries,T,w),this},rotate:function(T,w){return s.Rotate(this.children.entries,T,w),this},rotateAround:function(T,w){return s.RotateAround(this.children.entries,T,w),this},rotateAroundDistance:function(T,w,b){return s.RotateAroundDistance(this.children.entries,T,w,b),this},setAlpha:function(T,w){return s.SetAlpha(this.children.entries,T,w),this},setTint:function(T,w,b,E){return s.SetTint(this.children.entries,T,w,b,E),this},setOrigin:function(T,w,b,E){return s.SetOrigin(this.children.entries,T,w,b,E),this},scaleX:function(T,w){return s.ScaleX(this.children.entries,T,w),this},scaleY:function(T,w){return s.ScaleY(this.children.entries,T,w),this},scaleXY:function(T,w,b,E){return s.ScaleXY(this.children.entries,T,w,b,E),this},setDepth:function(T,w){return s.SetDepth(this.children.entries,T,w),this},setBlendMode:function(T){return s.SetBlendMode(this.children.entries,T),this},setHitArea:function(T,w){return s.SetHitArea(this.children.entries,T,w),this},shuffle:function(){return s.Shuffle(this.children.entries),this},kill:function(T){this.children.contains(T)&&T.setActive(!1)},killAndHide:function(T){this.children.contains(T)&&(T.setActive(!1),T.setVisible(!1))},setVisible:function(T,w,b){return s.SetVisible(this.children.entries,T,w,b),this},toggleVisible:function(){return s.ToggleVisible(this.children.entries),this},destroy:function(T,w){T===void 0&&(T=!1),w===void 0&&(w=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(a.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(w,T),this.scene=void 0,this.children=void 0)}});o.exports=g},61295:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99325),l=t(59192);s.register("group",function(a){return new l(this.scene,null,a)})},62598:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59192),l=t(61286);l.register("group",function(a,r){return this.updateList.add(new s(this.scene,a,r))})},1539:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(57322),i=new s({Extends:a,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Size,l.TextureCrop,l.Tint,l.Transform,l.Visible,r],initialize:function(h,d,u,p,m){a.call(this,h,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,m),this.setPosition(d,u),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=i},57786:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l.addToRenderList(s),t.batchSprite(s,s.frame,l,a)};o.exports=y},83556:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(1539);l.register("image",function(i,n){i===void 0&&(i={});var h=a(i,"key",null),d=a(i,"frame",null),u=new r(this.scene,0,0,h,d);return n!==void 0&&(i.add=n),s(this.scene,u,i),u})},20927:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1539),l=t(61286);l.register("image",function(a,r,i,n){return this.displayList.add(new s(this.scene,a,r,i,n))})},57322:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(59390),a=t(57786),o.exports={renderWebGL:l,renderCanvas:a}},59390:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l.addToRenderList(s),this.pipeline.batchSprite(s,l,a)};o.exports=y},48013:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Events:t(56631),DisplayList:t(91713),GameObjectCreator:t(99325),GameObjectFactory:t(61286),UpdateList:t(92034),Components:t(64937),GetCalcMatrix:t(73329),BuildGameObject:t(88933),BuildGameObjectAnimation:t(32291),GameObject:t(89980),BitmapText:t(44616),Blitter:t(52816),Bob:t(41664),Container:t(70339),DOMElement:t(38943),DynamicBitmapText:t(13468),Extern:t(39419),Graphics:t(33182),Group:t(59192),Image:t(1539),Layer:t(85305),Particles:t(27684),PathFollower:t(29598),RenderTexture:t(15996),RetroFont:t(55873),Rope:t(79968),Sprite:t(13747),Text:t(76555),GetTextSize:t(32979),MeasureText:t(27030),TextStyle:t(74744),TileSprite:t(35856),Zone:t(71030),Video:t(8630),Shape:t(91461),Arc:t(28593),Curve:t(15220),Ellipse:t(28591),Grid:t(39169),IsoBox:t(4415),IsoTriangle:t(65159),Line:t(579),Polygon:t(91249),Rectangle:t(517),Star:t(77843),Triangle:t(21873),Factories:{Blitter:t(38906),Container:t(23400),DOMElement:t(66788),DynamicBitmapText:t(94145),Extern:t(41155),Graphics:t(13122),Group:t(62598),Image:t(20927),Layer:t(17676),Particles:t(81212),PathFollower:t(19626),RenderTexture:t(29599),Rope:t(31982),Sprite:t(66135),StaticBitmapText:t(21797),Text:t(94627),TileSprite:t(20509),Zone:t(34546),Video:t(215),Arc:t(10369),Curve:t(10147),Ellipse:t(99869),Grid:t(9326),IsoBox:t(88154),IsoTriangle:t(67765),Line:t(85665),Polygon:t(88203),Rectangle:t(94355),Star:t(23962),Triangle:t(79296)},Creators:{Blitter:t(68452),Container:t(44516),DynamicBitmapText:t(67513),Graphics:t(41286),Group:t(61295),Image:t(83556),Layer:t(56378),Particles:t(765),RenderTexture:t(85692),Rope:t(96027),Sprite:t(89219),StaticBitmapText:t(95499),Text:t(75397),TileSprite:t(63950),Zone:t(24067),Video:t(65601)}};s.Shader=t(27902),s.Mesh=t(83321),s.NineSlice=t(44139),s.PointLight=t(13171),s.Plane=t(33412),s.Factories.Shader=t(51979),s.Factories.Mesh=t(8767),s.Factories.NineSlice=t(53778),s.Factories.PointLight=t(91201),s.Factories.Plane=t(58322),s.Creators.Shader=t(13908),s.Creators.Mesh=t(41839),s.Creators.NineSlice=t(40964),s.Creators.PointLight=t(162),s.Creators.Plane=t(10912),s.Light=t(14455),s.LightsManager=t(26193),s.LightsPlugin=t(50296),o.exports=s},85305:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(56694),a=t(64937),r=t(48129),i=t(81078),n=t(6659),h=t(56631),d=t(71207),u=t(47427),p=t(58010),m=t(7599),v=t(17922),g=new l({Extends:d,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.PostPipeline,a.Visible,n,p],initialize:function(w,b){d.call(this,w),n.call(this),this.scene=w,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=w.sys,this.events=w.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),b&&this.add(b),w.sys.queueDepthSort()},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},setState:function(T){return this.state=T,this},setDataEnabled:function(){return this.data||(this.data=new i(this)),this},setData:function(T,w){return this.data||(this.data=new i(this)),this.data.set(T,w),this},incData:function(T,w){return this.data||(this.data=new i(this)),this.data.inc(T,w),this},toggleData:function(T){return this.data||(this.data=new i(this)),this.data.toggle(T),this},getData:function(T){return this.data||(this.data=new i(this)),this.data.get(T)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},add:function(T){return d.prototype.add.call(this,T),this},remove:function(T,w){var b=d.prototype.remove.call(this,T);if(w&&b){Array.isArray(b)||(b=[b]);for(var E=0;E<b.length;E++)b[E].destroy()}return this},removeAll:function(T){var w=this.list;if(T){for(var b=0;b<w.length;b++)w[b]&&w[b].scene&&(w[b].off(h.DESTROY,this.remove,this),w[b].destroy());this.list=[]}else u(w,0,w.length,this.removeChildCallback,this);return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(T){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&T.id)},getIndexList:function(){for(var T=this,w=this.parentContainer,b=[];w&&(b.unshift(w.getIndex(T)),T=w,w.parentContainer);)w=w.parentContainer;return b.unshift(this.displayList.getIndex(T)),b},addChildCallback:function(T){T.once(h.DESTROY,this.remove,this),T.displayList&&T.displayList!==this&&T.removeFromDisplayList(),T.displayList||(this.queueDepthSort(),T.displayList=this,T.emit(h.ADDED_TO_SCENE,T,this.scene),this.events.emit(m.ADDED_TO_SCENE,T,this.scene))},removeChildCallback:function(T){T.off(h.DESTROY,this.remove,this),this.queueDepthSort(),T.displayList=null,T.emit(h.REMOVED_FROM_SCENE,T,this.scene),this.events.emit(m.REMOVED_FROM_SCENE,T,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(v(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(T,w){return T._depth-w._depth},getChildren:function(){return this.list},addToDisplayList:function(T){return T===void 0&&(T=this.scene.sys.displayList),this.displayList&&this.displayList!==T&&this.removeFromDisplayList(),T.exists(this)||(this.displayList=T,T.add(this,!0),T.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),T.events.emit(m.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var T=this.displayList||this.scene.sys.displayList;return T.exists(this)&&(T.remove(this,!0),T.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),T.events.emit(m.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(T){if(!(!this.scene||this.ignoreDestroy)){this.emit(h.DESTROY,this);for(var w=this.list;w.length;)w[0].destroy(T);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});o.exports=g},834:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=s.list;if(a.length!==0){s.depthSort();var r=s.blendMode!==-1;r||t.setBlendMode(0);var i=s._alpha;s.mask&&s.mask.preRenderCanvas(t,null,l);for(var n=0;n<a.length;n++){var h=a[n];if(h.willRender(l)){var d=h.alpha;!r&&h.blendMode!==t.currentBlendMode&&t.setBlendMode(h.blendMode),h.setAlpha(d*i),h.renderCanvas(t,h,l),h.setAlpha(d)}}s.mask&&s.mask.postRenderCanvas(t)}};o.exports=y},56378:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(85305),a=t(99325),r=t(20494);a.register("layer",function(i,n){i===void 0&&(i={});var h=r(i,"children",null),d=new l(this.scene,h);return n!==void 0&&(i.add=n),s(this.scene,d,i),d})},17676:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85305),l=t(61286);l.register("layer",function(a){return this.displayList.add(new s(this.scene,a))})},58010:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(17576),a=t(834),o.exports={renderWebGL:l,renderCanvas:a}},17576:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=s.list,r=a.length;if(r!==0){s.depthSort(),t.pipelines.preBatch(s);var i=s.blendMode!==-1;i||t.setBlendMode(0);for(var n=s.alpha,h=0;h<r;h++){var d=a[h];if(d.willRender(l)){var u,p,m,v;if(d.alphaTopLeft!==void 0)u=d.alphaTopLeft,p=d.alphaTopRight,m=d.alphaBottomLeft,v=d.alphaBottomRight;else{var g=d.alpha;u=g,p=g,m=g,v=g}!i&&d.blendMode!==t.currentBlendMode&&t.setBlendMode(d.blendMode);var T=d.mask;T&&T.preRenderWebGL(t,d,l);var w=d.type;w!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=h<r-1?a[h+1].type===t.currentType:!1,d.setAlpha(u*n,p*n,m*n,v*n),d.renderWebGL(t,d,l),d.setAlpha(u,p,m,v),T&&T.postRenderWebGL(t,l),t.newType=!1}}t.pipelines.postBatch(s)}};o.exports=y},14455:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673),l=t(56694),a=t(64937),r=t(39298),i=t(75512),n=new l({Extends:s,Mixins:[a.Origin,a.ScrollFactor,a.Transform,a.Visible],initialize:function(d,u,p,m,v,g,T){s.call(this,d,u,p),this.color=new r(m,v,g),this.intensity=T,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(p)},displayWidth:{get:function(){return this.diameter},set:function(h){this.diameter=h}},displayHeight:{get:function(){return this.diameter},set:function(h){this.diameter=h}},width:{get:function(){return this.diameter},set:function(h){this.diameter=h}},height:{get:function(){return this.diameter},set:function(h){this.diameter=h}},willRender:function(h){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&h.id)},setColor:function(h){var d=i.getFloatsFromUintRGB(h);return this.color.set(d[0],d[1],d[2]),this},setIntensity:function(h){return this.intensity=h,this},setRadius:function(h){return this.radius=h,this}});n.RENDER_MASK=15,o.exports=n},26193:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26535),l=t(56694),a=t(53996),r=t(14455),i=t(13171),n=t(39298),h=t(72677),d=t(17922),u=t(75512),p=new l({initialize:function(){this.lights=[],this.ambientColor=new n(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(m,v,g,T,w,b){return this.systems.displayList.add(new i(this.scene,m,v,g,T,w,b))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(m){for(var v=this.lights,g=m.worldView,T=[],w=0;w<v.length;w++){var b=v[w];b.willRender(m)&&s(b,g)&&T.push({light:b,distance:a(b.x,b.y,g.centerX,g.centerY)})}return T.length>this.maxLights&&(d(T,this.sortByDistance),T=T.slice(0,this.maxLights)),this.visibleLights=T.length,T},sortByDistance:function(m,v){return m.distance>=v.distance},setAmbientColor:function(m){var v=u.getFloatsFromUintRGB(m);return this.ambientColor.set(v[0],v[1],v[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(m,v,g,T,w){m===void 0&&(m=0),v===void 0&&(v=0),g===void 0&&(g=128),T===void 0&&(T=16777215),w===void 0&&(w=1);var b=u.getFloatsFromUintRGB(T),E=new r(m,v,g,b[0],b[1],b[2],w);return this.lights.push(E),E},removeLight:function(m){var v=this.lights.indexOf(m);return v>=0&&h(this.lights,v),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});o.exports=p},50296:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(26193),a=t(91963),r=t(7599),i=new s({Extends:l,initialize:function(h){this.scene=h,this.systems=h.sys,h.sys.settings.isBooted||h.sys.events.once(r.BOOT,this.boot,this),l.call(this)},boot:function(){var n=this.systems.events;n.on(r.SHUTDOWN,this.shutdown,this),n.on(r.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});a.register("LightsPlugin",i,"lights"),o.exports=i},83321:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(75606),r=t(18693),i=t(89980),n=t(53267),h=t(67623),d=t(73329),u=t(16650),p=t(23464),m=t(23701),v=t(17922),g=t(70015),T=t(85769),w=new s({Extends:i,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Size,l.Texture,l.Transform,l.Visible,p],initialize:function(E,A,R,I,P,N,F,O,D,L,z,X){A===void 0&&(A=0),R===void 0&&(R=0),I===void 0&&(I="__WHITE"),i.call(this,E,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new u,this.viewPosition=new g,this.viewMatrix=new u,this.projectionMatrix=new u,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var H=E.sys.renderer;this.setPosition(A,R),this.setTexture(I,P),this.setSize(H.width,H.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(H.width,H.height),N&&this.addVertices(N,F,O,D,L,z,X)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(b){return this.viewPosition.addScale(g.LEFT,b),this.dirtyCache[10]=1,this},panY:function(b){return this.viewPosition.y+=g.DOWN.y*b,this.dirtyCache[10]=1,this},panZ:function(b){return this.viewPosition.z+=b,this.dirtyCache[10]=1,this},setPerspective:function(b,E,A,R,I){return A===void 0&&(A=45),R===void 0&&(R=.01),I===void 0&&(I=1e3),this.fov=A,this.projectionMatrix.perspective(a(A),b/E,R,I),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(b,E,A,R){return b===void 0&&(b=this.scene.sys.renderer.getAspectRatio()),E===void 0&&(E=1),A===void 0&&(A=-1e3),R===void 0&&(R=1e3),this.fov=0,this.projectionMatrix.ortho(-b,b,-E,E,A,R),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(b){b.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(b,E,A,R,I,P,N,F,O){var D=this.scene.sys.cache.obj.get(b),L;return D&&(L=n(D,this,E,A,R,I,P,N,F,O)),(!L||L.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",b),this},sortByDepth:function(b,E){return b.depth-E.depth},depthSort:function(){return v(this.faces,this.sortByDepth),this},addVertex:function(b,E,A,R,I,P,N){var F=new T(b,E,A,R,I,P,N);return this.vertices.push(F),F},addFace:function(b,E,A){var R=new r(b,E,A);return this.faces.push(R),this.dirtyCache[9]=-1,R},addVertices:function(b,E,A,R,I,P,N){var F=h(b,E,A,R,I,P,N);return F?(this.faces=this.faces.concat(F.faces),this.vertices=this.vertices.concat(F.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(b){return this.faces[b]},hasFaceAt:function(b,E,A){A===void 0&&(A=this.scene.sys.cameras.main);for(var R=d(this,A).calc,I=this.faces,P=0;P<I.length;P++){var N=I[P];if(N.contains(b,E,R))return!0}return!1},getFaceAt:function(b,E,A){A===void 0&&(A=this.scene.sys.cameras.main);for(var R=d(this,A).calc,I=this.faces,P=[],N=0;N<I.length;N++){var F=I[N];F.contains(b,E,R)&&P.push(F)}return v(P,this.sortByDepth)},setDebug:function(b,E){return this.debugGraphic=b,!b&&!E?this.debugCallback=null:E?this.debugCallback=E:this.debugCallback=this.renderDebug,this},isDirty:function(){var b=this.modelPosition,E=this.modelRotation,A=this.modelScale,R=this.dirtyCache,I=b.x,P=b.y,N=b.z,F=E.x,O=E.y,D=E.z,L=A.x,z=A.y,X=A.z,H=this.getFaceCount(),J=R[0],G=R[1],k=R[2],M=R[3],B=R[4],U=R[5],W=R[6],K=R[7],q=R[8],_=R[9];return R[0]=I,R[1]=P,R[2]=N,R[3]=F,R[4]=O,R[5]=D,R[6]=L,R[7]=z,R[8]=X,R[9]=H,J!==I||G!==P||k!==N||M!==F||B!==O||U!==D||W!==L||K!==z||q!==X||_!==H},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var b=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!b[10]&&!this.isDirty())){var E=this.width,A=this.height,R=this.viewMatrix,I=this.viewPosition;b[10]&&(R.identity(),R.translate(I),R.invert(),b[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var N=I.z,F=this.faces,O=0;O<F.length;O++)F[O].transformCoordinatesLocal(P,E,A,N);this.depthSort()}},renderDebug:function(b,E){for(var A=b.debugGraphic,R=0;R<E.length;R++){var I=E[R],P=I.vertex1.tx,N=I.vertex1.ty,F=I.vertex2.tx,O=I.vertex2.ty,D=I.vertex3.tx,L=I.vertex3.ty;A.strokeTriangle(P,N,F,O,D,L)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var b=(function(E,A,R){for(var I=this.faces,P=0;P<I.length;P++){var N=I[P];if(N.contains(A,R))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,b),this},setTint:function(b){b===void 0&&(b=16777215);for(var E=this.vertices,A=0;A<E.length;A++)E[A].color=b;return this},uvScroll:function(b,E){for(var A=this.faces,R=0;R<A.length;R++)A[R].scrollUV(b,E);return this},uvScale:function(b,E){for(var A=this.faces,R=0;R<A.length;R++)A[R].scaleUV(b,E);return this},tint:{set:function(b){this.setTint(b)}},rotateX:{get:function(){return m(this.modelRotation.x)},set:function(b){this.modelRotation.x=a(b)}},rotateY:{get:function(){return m(this.modelRotation.y)},set:function(b){this.modelRotation.y=a(b)}},rotateZ:{get:function(){return m(this.modelRotation.z)},set:function(b){this.modelRotation.z=a(b)}}});o.exports=w},6317:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){};o.exports=y},41839:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(10850),i=t(83321);l.register("mesh",function(n,h){n===void 0&&(n={});var d=a(n,"key",null),u=a(n,"frame",null),p=r(n,"vertices",[]),m=r(n,"uvs",[]),v=r(n,"indicies",[]),g=r(n,"containsZ",!1),T=r(n,"normals",[]),w=r(n,"colors",16777215),b=r(n,"alphas",1),E=new i(this.scene,0,0,d,u,p,m,v,g,T,w,b);return h!==void 0&&(n.add=h),s(this.scene,E,n),E})},8767:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83321),l=t(61286);l.register("mesh",function(a,r,i,n,h,d,u,p,m,v,g){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u,p,m,v,g))})},23464:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(57410),a=t(6317),o.exports={renderWebGL:l,renderCanvas:a}},57410:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n){var h=r.faces,d=h.length;if(d!==0){i.addToRenderList(r);var u=a.pipelines.set(r.pipeline,r),p=s(r,i,n).calc;a.pipelines.preBatch(r);for(var m=u.setGameObject(r),v=u.vertexViewF32,g=u.vertexViewU32,T=u.vertexCount*u.currentShader.vertexComponentCount-1,w=r.tintFill,b=[],E=r.debugCallback,A=p.a,R=p.b,I=p.c,P=p.d,N=p.e,F=p.f,O=r.viewPosition.z,D=r.hideCCW,L=i.roundPixels,z=i.alpha*r.alpha,X=0,H=0;H<d;H++){var J=h[H];J.isInView(i,D,O,z,A,R,I,P,N,F,L)&&(u.shouldFlush(3)&&(u.flush(),m=u.setGameObject(r),T=0),T=J.load(v,g,T,m,w),X++,u.vertexCount+=3,u.currentBatch.count=u.vertexCount-u.currentBatch.start,E&&b.push(J))}r.totalFrame+=X,E&&E.call(r,r,b),a.pipelines.postBatch(r)}};o.exports=l},44139:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(94456),i=t(85769),n=new s({Extends:a,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Texture,l.Transform,l.Visible,r],initialize:function(d,u,p,m,v,g,T,w,b,E,A){a.call(this,d,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var R=d.textures.getFrame(m,v);this.is3Slice=!E&&!A,R.scale9&&(this.is3Slice=R.is3Slice);for(var I=this.is3Slice?18:54,P=0;P<I;P++)this.vertices.push(new i);this.setPosition(u,p),this.setTexture(m,v),this.setSlices(g,T,w,b,E,A,!1),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(h,d,u,p,m,v,g){u===void 0&&(u=10),p===void 0&&(p=10),m===void 0&&(m=0),v===void 0&&(v=0),g===void 0&&(g=!1);var T=this.frame,w=!1;if(this.is3Slice&&g&&m!==0&&v!==0&&(w=!0),w)console.warn("Cannot change 9 slice to 3 slice");else{if(T.scale9&&!g){var b=T.data.scale9Borders,E=b.x,A=b.y;u=E,p=T.width-b.w-E,m=A,v=T.height-b.h-A,h===void 0&&(h=T.width),d===void 0&&(d=T.height)}else h===void 0&&(h=256),d===void 0&&(d=256);this._width=h,this._height=d,this.leftWidth=u,this.rightWidth=p,this.topHeight=m,this.bottomHeight=v,this.is3Slice&&(d=T.height,this._height=d,this.topHeight=d,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var h=this.leftWidth,d=this.rightWidth,u=this.topHeight,p=this.bottomHeight,m=this.frame.width,v=this.frame.height;this.updateQuadUVs(0,0,0,h/m,u/v),this.updateQuadUVs(6,h/m,0,1-d/m,u/v),this.updateQuadUVs(12,1-d/m,0,1,u/v),this.is3Slice||(this.updateQuadUVs(18,0,u/v,h/m,1-p/v),this.updateQuadUVs(24,h/m,u/v,1-d/m,1-p/v),this.updateQuadUVs(30,1-d/m,u/v,1,1-p/v),this.updateQuadUVs(36,0,1-p/v,h/m,1),this.updateQuadUVs(42,h/m,1-p/v,1-d/m,1),this.updateQuadUVs(48,1-d/m,1-p/v,1,1))},updateVertices:function(){var h=this.leftWidth,d=this.rightWidth,u=this.topHeight,p=this.bottomHeight,m=this.width,v=this.height;this.updateQuad(0,-.5,.5,-.5+h/m,.5-u/v),this.updateQuad(6,-.5+h/m,.5,.5-d/m,.5-u/v),this.updateQuad(12,.5-d/m,.5,.5,.5-u/v),this.is3Slice||(this.updateQuad(18,-.5,.5-u/v,-.5+h/m,-.5+p/v),this.updateQuad(24,-.5+h/m,.5-u/v,.5-d/m,-.5+p/v),this.updateQuad(30,.5-d/m,.5-u/v,.5,-.5+p/v),this.updateQuad(36,-.5,-.5+p/v,-.5+h/m,-.5),this.updateQuad(42,-.5+h/m,-.5+p/v,.5-d/m,-.5),this.updateQuad(48,.5-d/m,-.5+p/v,.5,-.5))},updateQuad:function(h,d,u,p,m){var v=this.width,g=this.height,T=this.originX,w=this.originY,b=this.vertices;b[h+0].resize(d,u,v,g,T,w),b[h+1].resize(d,m,v,g,T,w),b[h+2].resize(p,u,v,g,T,w),b[h+3].resize(d,m,v,g,T,w),b[h+4].resize(p,m,v,g,T,w),b[h+5].resize(p,u,v,g,T,w)},updateQuadUVs:function(h,d,u,p,m){var v=this.vertices,g=this.frame,T=g.u0,w=g.v0,b=g.u1,E=g.v1;if(T!==0||b!==1){var A=b-T;d=T+d*A,p=T+p*A}if(w!==0||E!==1){var R=E-w;u=w+u*R,m=w+m*R}v[h+0].setUVs(d,u),v[h+1].setUVs(d,m),v[h+2].setUVs(p,u),v[h+3].setUVs(d,m),v[h+4].setUVs(p,m),v[h+5].setUVs(p,u)},clearTint:function(){return this.setTint(16777215),this},setTint:function(h){return h===void 0&&(h=16777215),this.tint=h,this.tintFill=!1,this},setTintFill:function(h){return this.setTint(h),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(h){this._width=Math.max(h,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(h){this.is3Slice||(this._height=Math.max(h,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(h){this.scaleX=h/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(h){this.scaleY=h/this.height}},setSize:function(h,d){this.width=h,this.height=d;var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=this.width,u.hitArea.height=this.height),this},setDisplaySize:function(h,d){return this.displayWidth=h,this.displayHeight=d,this},originX:{get:function(){return this._originX},set:function(h){this._originX=h,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(h){this._originY=h,this.updateVertices()}},setOrigin:function(h,d){return h===void 0&&(h=.5),d===void 0&&(d=h),this._originX=h,this._originY=d,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var h=this.frame.height;this._height=h,this.topHeight=h,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});o.exports=n},40964:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(10850),i=t(44139);l.register("nineslice",function(n,h){n===void 0&&(n={});var d=a(n,"key",null),u=a(n,"frame",null),p=r(n,"width",256),m=r(n,"height",256),v=r(n,"leftWidth",10),g=r(n,"rightWidth",10),T=r(n,"topHeight",0),w=r(n,"bottomHeight",0),b=new i(this.scene,0,0,d,u,p,m,v,g,T,w);return h!==void 0&&(n.add=h),s(this.scene,b,n),b})},53778:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44139),l=t(61286);l.register("nineslice",function(a,r,i,n,h,d,u,p,m,v){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u,p,m,v))})},94456:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(27420),o.exports={renderWebGL:l,renderCanvas:a}},27420:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){var d=i.vertices,u=d.length;if(u!==0){n.addToRenderList(i);var p=r.pipelines.set(i.pipeline,i),m=s(i,n,h,!1).calc;r.pipelines.preBatch(i);var v=p.setGameObject(i),g=p.vertexViewF32,T=p.vertexViewU32,w=p.vertexCount*p.currentShader.vertexComponentCount-1,b=n.roundPixels,E=i.tintFill,A=n.alpha*i.alpha,R=l.getTintAppendFloatAlpha(i.tint,A),I=p.vertexAvailable(),P=-1;I<u&&(P=I);for(var N=0;N<u;N++){var F=d[N];N===P&&(p.flush(),v=p.setGameObject(i),w=0),g[++w]=m.getXRound(F.vx,F.vy,b),g[++w]=m.getYRound(F.vx,F.vy,b),g[++w]=F.u,g[++w]=F.v,g[++w]=v,g[++w]=E,T[++w]=R,p.vertexCount++,p.currentBatch.count=p.vertexCount-p.currentBatch.start}r.pipelines.postBatch(i)}};o.exports=a},19737:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93025),a=t(22946),r=t(21902),i=t(4840),n=t(15978),h=new s({Extends:l,initialize:function(u){l.call(this,u,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var d=this.propertyValue,u=d,p=this.defaultEmit,m=this.defaultUpdate;if(this.method===9){this.start=d[0],this.ease=r("Linear"),this.interpolation=i("linear"),p=this.easedValueEmit,m=this.easeValueUpdate,u=d[0],this.active=!0;for(var v=0;v<d.length;v++){var g=n(d[v]);this.r.push(g.r),this.g.push(g.g),this.b.push(g.b)}}return this.onEmit=p,this.onUpdate=m,this.current=u,this},setEase:function(d){this.easeName=d,this.ease=r(d)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(d,u,p){var m=this.ease(p),v=this.interpolation(this.r,m),g=this.interpolation(this.g,m),T=this.interpolation(this.b,m),w=a(v,g,T);return this.current=w,w}});o.exports=h},93025:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17489),l=t(82897),a=t(56694),r=t(61616),i=t(21902),n=t(72632),h=t(4840),d=t(88462),u=t(1071),p=new a({initialize:function(v,g,T){T===void 0&&(T=!1),this.propertyKey=v,this.propertyValue=g,this.defaultValue=g,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=T,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(m,v){m===void 0&&(m={}),v&&(this.propertyKey=v),this.propertyValue=n(m,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(m){var v;switch(this.method){case 1:case 3:case 8:v=m;break;case 2:this.propertyValue.indexOf(m)>=0&&(v=m);break;case 4:var g=(this.end-this.start)/this.steps;v=d(m,g),this.counter=v;break;case 5:case 6:case 7:v=l(m,this.start,this.end);break;case 9:v=this.start[0];break}return this.current=v,this},getMethod:function(){var m=this.propertyValue;if(m===null)return 0;var v=typeof m;if(v==="number")return 1;if(Array.isArray(m))return 2;if(v==="function")return 3;if(v==="object"){if(this.hasBoth(m,"start","end"))return this.has(m,"steps")?4:5;if(this.hasBoth(m,"min","max"))return 6;if(this.has(m,"random"))return 7;if(this.hasEither(m,"onEmit","onUpdate"))return 8;if(this.hasEither(m,"values","interpolation"))return 9}return 0},setMethods:function(){var m=this.propertyValue,v=m,g=this.defaultEmit,T=this.defaultUpdate;switch(this.method){case 1:g=this.staticValueEmit;break;case 2:g=this.randomStaticValueEmit,v=m[0];break;case 3:this._onEmit=m,g=this.proxyEmit;break;case 4:this.start=m.start,this.end=m.end,this.steps=m.steps,this.counter=this.start,this.yoyo=this.has(m,"yoyo")?m.yoyo:!1,this.direction=0,g=this.steppedEmit,v=this.start;break;case 5:this.start=m.start,this.end=m.end;var w=this.has(m,"ease")?m.ease:"Linear";this.ease=i(w,m.easeParams),g=this.has(m,"random")&&m.random?this.randomRangedValueEmit:this.easedValueEmit,T=this.easeValueUpdate,v=this.start;break;case 6:this.start=m.min,this.end=m.max,g=this.has(m,"int")&&m.int?this.randomRangedIntEmit:this.randomRangedValueEmit,v=this.start;break;case 7:var b=m.random;Array.isArray(b)&&(this.start=b[0],this.end=b[1]),g=this.randomRangedIntEmit,v=this.start;break;case 8:this._onEmit=this.has(m,"onEmit")?m.onEmit:this.defaultEmit,this._onUpdate=this.has(m,"onUpdate")?m.onUpdate:this.defaultUpdate,g=this.proxyEmit,T=this.proxyUpdate;break;case 9:this.start=m.values;var E=this.has(m,"ease")?m.ease:"Linear";this.ease=i(E,m.easeParams),this.interpolation=h(m.interpolation),g=this.easedValueEmit,T=this.easeValueUpdate,v=this.start[0];break}return this.onEmit=g,this.onUpdate=T,this.current=v,this},has:function(m,v){return m.hasOwnProperty(v)},hasBoth:function(m,v,g){return m.hasOwnProperty(v)&&m.hasOwnProperty(g)},hasEither:function(m,v,g){return m.hasOwnProperty(v)||m.hasOwnProperty(g)},defaultEmit:function(m,v,g){return g},defaultUpdate:function(m,v,g,T){return T},proxyEmit:function(m,v,g){var T=this._onEmit(m,v,g);return this.current=T,T},proxyUpdate:function(m,v,g,T){var w=this._onUpdate(m,v,g,T);return this.current=w,w},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var m=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[m],this.current},randomRangedValueEmit:function(m,v){var g=r(this.start,this.end);return m&&m.data[v]&&(m.data[v].min=g,m.data[v].max=this.end),this.current=g,g},randomRangedIntEmit:function(m,v){var g=s(this.start,this.end);return m&&m.data[v]&&(m.data[v].min=g,m.data[v].max=this.end),this.current=g,g},steppedEmit:function(){var m=this.counter,v=m,g=(this.end-this.start)/this.steps;if(this.yoyo){var T;this.direction===0?(v+=g,v>=this.end&&(T=v-this.end,v=this.end-T,this.direction=1)):(v-=g,v<=this.start&&(T=this.start-v,v=this.start+T,this.direction=0)),this.counter=v}else this.counter=u(v+g,this.start,this.end);return this.current=m,m},easedValueEmit:function(m,v){if(m&&m.data[v]){var g=m.data[v];g.min=this.start,g.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(m,v,g){var T=m.data[v],w,b=this.ease(g);return this.interpolation?w=this.interpolation(this.start,b):w=(T.max-T.min)*b+T.min,this.current=w,w},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});o.exports=p},87811:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(30891),r=new s({Extends:a,initialize:function(n,h,d,u,p){if(typeof n=="object"){var m=n;n=l(m,"x",0),h=l(m,"y",0),d=l(m,"power",0),u=l(m,"epsilon",100),p=l(m,"gravity",50)}else n===void 0&&(n=0),h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=100),p===void 0&&(p=50);a.call(this,n,h,!0),this._gravity=p,this._power=d*p,this._epsilon=u*u},update:function(i,n){var h=this.x-i.x,d=this.y-i.y,u=h*h+d*d;if(u!==0){var p=Math.sqrt(u);u<this._epsilon&&(u=this._epsilon);var m=this._power*n/(u*p)*100;i.velocityX+=h*m,i.velocityY+=d*m}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(i){this._epsilon=i*i}},power:{get:function(){return this._power/this._gravity},set:function(i){this._power=i*this._gravity}},gravity:{get:function(){return this._gravity},set:function(i){var n=this.power;this._gravity=i,this.power=n}}});o.exports=r},14909:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(82897),a=t(56694),r=t(75606),i=t(74118),n=t(2386),h=t(93736),d=new a({initialize:function(p){this.emitter=p,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new h,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=p.scene,this.anims=new s(this),this.bounds=new i},emit:function(u,p,m,v,g,T){return this.emitter.emit(u,p,m,v,g,T)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(u,p){u===void 0&&(u=0),p===void 0&&(p=0),this.x=u,this.y=p},fire:function(u,p){var m=this.emitter,v=m.ops,g=m.getAnim();if(g?this.anims.play(g):(this.frame=m.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(m.getEmitZone(this),u===void 0?this.x+=v.x.onEmit(this,"x"):v.x.steps>0?this.x+=u+v.x.onEmit(this,"x"):this.x+=u,p===void 0?this.y+=v.y.onEmit(this,"y"):v.y.steps>0?this.y+=p+v.y.onEmit(this,"y"):this.y+=p,this.life=v.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=v.delay.onEmit(this,"delay"),this.holdCurrent=v.hold.onEmit(this,"hold"),this.scaleX=v.scaleX.onEmit(this,"scaleX"),this.scaleY=v.scaleY.active?v.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=v.rotate.onEmit(this,"rotate"),this.rotation=r(this.angle),m.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&m.getDeathZone(this))return this.lifeCurrent=0,!1;var T=v.speedX.onEmit(this,"speedX"),w=v.speedY.active?v.speedY.onEmit(this,"speedY"):T;if(m.radial){var b=r(v.angle.onEmit(this,"angle"));this.velocityX=Math.cos(b)*Math.abs(T),this.velocityY=Math.sin(b)*Math.abs(w)}else if(m.moveTo){var E=v.moveToX.onEmit(this,"moveToX"),A=v.moveToY.onEmit(this,"moveToY"),R=this.life/1e3;this.velocityX=(E-this.x)/R,this.velocityY=(A-this.y)/R}else this.velocityX=T,this.velocityY=w;return m.acceleration&&(this.accelerationX=v.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=v.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=v.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=v.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=v.bounce.onEmit(this,"bounce"),this.alpha=v.alpha.onEmit(this,"alpha"),v.color.active?this.tint=v.color.onEmit(this,"tint"):this.tint=v.tint.onEmit(this,"tint"),!0},update:function(u,p,m){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=u,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=u,!1;this.anims.update(0,u);var v=this.emitter,g=v.ops,T=1-this.lifeCurrent/this.life;if(this.lifeT=T,this.x=g.x.onUpdate(this,"x",T,this.x),this.y=g.y.onUpdate(this,"y",T,this.y),v.moveTo){var w=g.moveToX.onUpdate(this,"moveToX",T,v.moveToX),b=g.moveToY.onUpdate(this,"moveToY",T,v.moveToY),E=this.lifeCurrent/1e3;this.velocityX=(w-this.x)/E,this.velocityY=(b-this.y)/E}return this.computeVelocity(v,u,p,m,T),this.scaleX=g.scaleX.onUpdate(this,"scaleX",T,this.scaleX),g.scaleY.active?this.scaleY=g.scaleY.onUpdate(this,"scaleY",T,this.scaleY):this.scaleY=this.scaleX,this.angle=g.rotate.onUpdate(this,"rotate",T,this.angle),this.rotation=r(this.angle),v.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=l(g.alpha.onUpdate(this,"alpha",T,this.alpha),0,1),g.color.active?this.tint=g.color.onUpdate(this,"color",T,this.tint):this.tint=g.tint.onUpdate(this,"tint",T,this.tint),this.lifeCurrent-=u,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(u,p,m,v,g){var T=u.ops,w=this.velocityX,b=this.velocityY,E=T.accelerationX.onUpdate(this,"accelerationX",g,this.accelerationX),A=T.accelerationY.onUpdate(this,"accelerationY",g,this.accelerationY),R=T.maxVelocityX.onUpdate(this,"maxVelocityX",g,this.maxVelocityX),I=T.maxVelocityY.onUpdate(this,"maxVelocityY",g,this.maxVelocityY);this.bounce=T.bounce.onUpdate(this,"bounce",g,this.bounce),w+=u.gravityX*m+E*m,b+=u.gravityY*m+A*m,w=l(w,-R,R),b=l(b,-I,I),this.velocityX=w,this.velocityY=b,this.x+=w*m,this.y+=b*m,u.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var P=0;P<v.length;P++){var N=v[P];N.active&&N.update(this,p,m,g)}},setSizeToFrame:function(){},getBounds:function(u){u===void 0&&(u=this.emitter.getWorldTransformMatrix());var p=Math.abs(u.scaleX)*this.scaleX,m=Math.abs(u.scaleY)*this.scaleY,v=this.x,g=this.y,T=this.rotation,w=this.frame.width*p/2,b=this.frame.height*m/2,E=this.bounds,A=new h(v-w,g-b),R=new h(v+w,g-b),I=new h(v-w,g+b),P=new h(v+w,g+b);return T!==0&&(n(A,v,g,T),n(R,v,g,T),n(I,v,g,T),n(P,v,g,T)),u.transformPoint(A.x,A.y,A),u.transformPoint(R.x,R.y,R),u.transformPoint(I.x,I.y,I),u.transformPoint(P.x,P.y,P),E.x=Math.min(A.x,R.x,I.x,P.x),E.y=Math.min(A.y,R.y,I.y,P.y),E.width=Math.max(A.x,R.x,I.x,P.x)-E.x,E.height=Math.max(A.y,R.y,I.y,P.y)-E.y,E},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});o.exports=d},73106:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(30891),a=t(74118),r=new s({Extends:l,initialize:function(n,h,d,u,p,m,v,g){p===void 0&&(p=!0),m===void 0&&(m=!0),v===void 0&&(v=!0),g===void 0&&(g=!0),l.call(this,n,h,!0),this.bounds=new a(n,h,d,u),this.collideLeft=p,this.collideRight=m,this.collideTop=v,this.collideBottom=g},update:function(i){var n=this.bounds,h=-i.bounce,d=i.worldPosition;d.x<n.x&&this.collideLeft?(i.x+=n.x-d.x,i.velocityX*=h):d.x>n.right&&this.collideRight&&(i.x-=d.x-n.right,i.velocityX*=h),d.y<n.y&&this.collideTop?(i.y+=n.y-d.y,i.velocityY*=h):d.y>n.bottom&&this.collideBottom&&(i.y-=d.y-n.bottom,i.velocityY*=h)}});o.exports=r},9216:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(48129),r=t(29538),i=t(69361),n=t(54213),h=t(19737),d=t(93025),u=t(40629),p=t(89980),m=t(72632),v=t(72861),g=t(87811),T=t(53523),w=t(19256),b=t(7782),E=t(71207),A=t(14655),R=t(14909),I=t(68433),P=t(74118),N=t(90205),F=t(66458),O=t(69116),D=t(17922),L=t(69360),z=t(93736),X=t(1071),H=t(73106),J=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],G=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],k=new s({Extends:p,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Texture,l.Transform,l.Visible,O],initialize:function(B,U,W,K,q){p.call(this,B,"ParticleEmitter"),this.particleClass=R,this.ops={accelerationX:new d("accelerationX",0),accelerationY:new d("accelerationY",0),alpha:new d("alpha",1),angle:new d("angle",{min:0,max:360},!0),bounce:new d("bounce",0),color:new h("color"),delay:new d("delay",0,!0),hold:new d("hold",0,!0),lifespan:new d("lifespan",1e3,!0),maxVelocityX:new d("maxVelocityX",1e4),maxVelocityY:new d("maxVelocityY",1e4),moveToX:new d("moveToX",0),moveToY:new d("moveToY",0),quantity:new d("quantity",1,!0),rotate:new d("rotate",0),scaleX:new d("scaleX",1),scaleY:new d("scaleY",1),speedX:new d("speedX",0,!0),speedY:new d("speedY",0,!0),tint:new d("tint",16777215),x:new d("x",0),y:new d("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new z,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new L,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new E(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(U,W),this.setTexture(K),q&&this.setConfig(q)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(M){if(!M)return this;var B=0,U="",W=this.ops;for(B=0;B<G.length;B++)U=G[B],W[U].loadConfig(M);for(B=0;B<J.length;B++)U=J[B],w(M,U)&&(this[U]=m(M,U));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,w(M,"speed")&&(W.speedX.loadConfig(M,"speed"),W.speedY.active=!1),(T(M,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),w(M,"scale")&&(W.scaleX.loadConfig(M,"scale"),W.scaleY.active=!1),w(M,"callbackScope")){var K=m(M,"callbackScope",null);this.emitCallbackScope=K,this.deathCallbackScope=K}if(w(M,"emitZone")&&this.addEmitZone(M.emitZone),w(M,"deathZone")&&this.addDeathZone(M.deathZone),w(M,"bounds")){var q=this.addParticleBounds(M.bounds);q.collideLeft=m(M,"collideLeft",!0),q.collideRight=m(M,"collideRight",!0),q.collideTop=m(M,"collideTop",!0),q.collideBottom=m(M,"collideBottom",!0)}return w(M,"followOffset")&&this.followOffset.setFromObject(m(M,"followOffset",0)),w(M,"texture")&&this.setTexture(M.texture),w(M,"frame")?this.setEmitterFrame(M.frame):w(M,"anim")&&this.setAnim(M.anim),w(M,"reserve")&&this.reserve(M.reserve),w(M,"advance")&&this.fastForward(M.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(u.START,this),this},toJSON:function(){var M=a(this),B=0,U="";for(B=0;B<J.length;B++)U=J[B],M[U]=this[U];var W=this.ops;for(B=0;B<G.length;B++)U=G[B],W[U]&&(M[U]=W[U].toJSON());return W.speedY.active||(delete M.speedX,M.speed=W.speedX.toJSON()),this.scaleX===this.scaleY&&(delete M.scaleX,delete M.scaleY,M.scale=W.scaleX.toJSON()),M},resetCounters:function(M,B){var U=this.counters;U.fill(0),U[0]=M,B&&(U[5]=1)},startFollow:function(M,B,U,W){return B===void 0&&(B=0),U===void 0&&(U=0),W===void 0&&(W=!1),this.follow=M,this.followOffset.set(B,U),this.trackVisible=W,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var M=this.frames,B=M.length,U;return B===1?U=M[0]:this.randomFrame?U=v(M):(U=M[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===B&&(this.currentFrame=0))),this.texture.get(U)},setEmitterFrame:function(M,B,U){B===void 0&&(B=!0),U===void 0&&(U=1),this.randomFrame=B,this.frameQuantity=U,this.currentFrame=0;var W=typeof M;if(this.frames.length=0,Array.isArray(M))this.frames=this.frames.concat(M);else if(W==="string"||W==="number")this.frames.push(M);else if(W==="object"){var K=M;M=m(K,"frames",null),M&&(this.frames=this.frames.concat(M));var q=m(K,"cycle",!1);this.randomFrame=!q,this.frameQuantity=m(K,"quantity",U)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var M=this.anims,B=M.length;if(B===0)return null;if(B===1)return M[0];if(this.randomAnim)return v(M);var U=M[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=X(this.currentAnim+1,0,B)),U},setAnim:function(M,B,U){B===void 0&&(B=!0),U===void 0&&(U=1),this.randomAnim=B,this.animQuantity=U,this.currentAnim=0;var W=typeof M;if(this.anims.length=0,Array.isArray(M))this.anims=this.anims.concat(M);else if(W==="string")this.anims.push(M);else if(W==="object"){var K=M;M=m(K,"anims",null),M&&(this.anims=this.anims.concat(M));var q=m(K,"cycle",!1);this.randomAnim=!q,this.animQuantity=m(K,"quantity",U)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(M){return M===void 0&&(M=!0),this.radial=M,this},addParticleBounds:function(M,B,U,W,K,q,_,rt){if(typeof M=="object"){var ft=M;M=ft.x,B=ft.y,U=w(ft,"w")?ft.w:ft.width,W=w(ft,"h")?ft.h:ft.height}return this.addParticleProcessor(new H(M,B,U,W,K,q,_,rt))},setParticleSpeed:function(M,B){return B===void 0&&(B=M),this.ops.speedX.onChange(M),M===B?this.ops.speedY.active=!1:this.ops.speedY.onChange(B),this.radial=!0,this},setParticleScale:function(M,B){return M===void 0&&(M=1),B===void 0&&(B=M),this.ops.scaleX.onChange(M),this.ops.scaleY.onChange(B),this},setParticleGravity:function(M,B){return this.gravityX=M,this.gravityY=B,this},setParticleAlpha:function(M){return this.ops.alpha.onChange(M),this},setParticleTint:function(M){return this.ops.tint.onChange(M),this},setEmitterAngle:function(M){return this.ops.angle.onChange(M),this},setParticleLifespan:function(M){return this.ops.lifespan.onChange(M),this},setQuantity:function(M){return this.quantity=M,this},setFrequency:function(M,B){return this.frequency=M,this.flowCounter=M>0?M:0,B&&(this.quantity=B),this},addDeathZone:function(M){Array.isArray(M)||(M=[M]);for(var B,U=[],W=0;W<M.length;W++)if(B=M[W],B instanceof i)U.push(B);else if(typeof B.contains=="function")B=new i(B,!0),U.push(B);else{var K=m(B,"type","onEnter"),q=m(B,"source",null);if(q&&typeof q.contains=="function"){var _=K==="onEnter";B=new i(q,_),U.push(B)}}return this.deathZones=this.deathZones.concat(U),U},removeDeathZone:function(M){return F(this.deathZones,M),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(M){Array.isArray(M)||(M=[M]);for(var B,U=[],W=0;W<M.length;W++)if(B=M[W],B instanceof I||B instanceof n)U.push(B);else{var K=m(B,"source",null);if(K){var q=m(B,"type","random");if(q==="random"&&typeof K.getRandomPoint=="function")B=new I(K),U.push(B);else if(q==="edge"&&typeof K.getPoints=="function"){var _=m(B,"quantity",1),rt=m(B,"stepRate",0),ft=m(B,"yoyo",!1),mt=m(B,"seamless",!0),vt=m(B,"total",-1);B=new n(K,_,rt,ft,mt,vt),U.push(B)}}}return this.emitZones=this.emitZones.concat(U),U},removeEmitZone:function(M){return F(this.emitZones,M),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(M){var B=this.emitZones,U=B.length;if(U!==0){var W=B[this.zoneIndex];W.getPoint(M),W.total>-1&&(this.zoneTotal++,this.zoneTotal===W.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===U&&(this.zoneIndex=0)))}},getDeathZone:function(M){for(var B=this.deathZones,U=0;U<B.length;U++){var W=B[U];if(W.willKill(M))return this.emit(u.DEATH_ZONE,this,M,W),!0}return!1},setEmitZone:function(M){var B;return isFinite(M)?B=M:B=this.emitZones.indexOf(M),B>=0&&(this.zoneIndex=B),this},addParticleProcessor:function(M){return this.processors.exists(M)||(M.emitter&&M.emitter.removeParticleProcessor(M),this.processors.add(M),M.emitter=this),M},removeParticleProcessor:function(M){return this.processors.exists(M)&&(this.processors.remove(M,!0),M.emitter=null),M},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(M){return this.addParticleProcessor(new g(M))},reserve:function(M){var B=this.dead;if(this.maxParticles>0){var U=this.getParticleCount();U+M>this.maxParticles&&(M=this.maxParticles-(U+M))}for(var W=0;W<M;W++)B.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(M,B){return M===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof M=="function"&&(this.emitCallback=M,B&&(this.emitCallbackScope=B)),this},onParticleDeath:function(M,B){return M===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof M=="function"&&(this.deathCallback=M,B&&(this.deathCallbackScope=B)),this},killAll:function(){for(var M=this.dead,B=this.alive;B.length>0;)M.push(B.pop());return this},forEachAlive:function(M,B){for(var U=this.alive,W=U.length,K=0;K<W;K++)M.call(B,U[K],this);return this},forEachDead:function(M,B){for(var U=this.dead,W=U.length,K=0;K<W;K++)M.call(B,U[K],this);return this},start:function(M,B){return M===void 0&&(M=0),this.emitting||(M>0&&this.fastForward(M),this.emitting=!0,this.resetCounters(this.frequency,!0),B!==void 0&&(this.duration=Math.abs(B)),this.emit(u.START,this)),this},stop:function(M){return M===void 0&&(M=!1),this.emitting&&(this.emitting=!1,M&&this.killAll(),this.emit(u.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(M,B){return M===void 0&&(M=""),B===void 0&&(B=this.true),this.sortProperty=M,this.sortOrderAsc=B,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(M){return this.sortProperty!==""?M=this.depthSortCallback:M=null,this.sortCallback=M,this},depthSort:function(){return D(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(M,B){var U=this.sortProperty;return this.sortOrderAsc?M[U]-B[U]:B[U]-M[U]},flow:function(M,B,U){return B===void 0&&(B=1),this.emitting=!1,this.frequency=M,this.quantity=B,U!==void 0&&(this.stopAfter=U),this.start()},explode:function(M,B,U){this.frequency=-1,this.resetCounters(-1,!0);var W=this.emitParticle(M,B,U);return this.emit(u.EXPLODE,this,W),W},emitParticleAt:function(M,B,U){return this.emitParticle(U,M,B)},emitParticle:function(M,B,U){if(!this.atLimit()){M===void 0&&(M=this.ops.quantity.onEmit());for(var W=this.dead,K=this.stopAfter,q=this.follow?this.follow.x+this.followOffset.x:B,_=this.follow?this.follow.y+this.followOffset.y:U,rt=0;rt<M;rt++){var ft=W.pop();if(ft||(ft=new this.particleClass(this)),ft.fire(q,_)?(this.particleBringToTop?this.alive.push(ft):this.alive.unshift(ft),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,ft,this)):this.dead.push(ft),K>0&&(this.stopCounter++,this.stopCounter>=K)||this.atLimit())break}return ft}},fastForward:function(M,B){B===void 0&&(B=1e3/60);var U=0;for(this.skipping=!0;U<Math.abs(M);)this.preUpdate(0,B),U+=B;return this.skipping=!1,this},preUpdate:function(M,B){B*=this.timeScale;var U=B/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var W=this.getProcessors(),K=this.alive,q=this.dead,_=0,rt=[],ft=K.length;for(_=0;_<ft;_++){var mt=K[_];mt.update(B,U,W)&&rt.push({index:_,particle:mt})}if(ft=rt.length,ft>0){var vt=this.deathCallback,yt=this.deathCallbackScope;for(_=ft-1;_>=0;_--){var xt=rt[_];K.splice(xt.index,1),q.push(xt.particle),vt&&vt.call(yt,xt.particle),xt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&K.length===0&&(this.completeFlag=0,this.emit(u.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=B;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=B,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(M){for(var B=this.getWorldTransformMatrix(),U=this.alive,W=U.length,K=[],q=0;q<W;q++){var _=U[q];N(M,_.getBounds(B))&&K.push(_)}return K},getBounds:function(M,B,U,W){M===void 0&&(M=0),B===void 0&&(B=0),U===void 0&&(U=1e3/60),W===void 0&&(W=new P);var K=this.getWorldTransformMatrix(),q,_,rt=this.alive,ft=!1;if(W.setTo(0,0,0,0),B>0){var mt=0;for(this.skipping=!0;mt<Math.abs(B);){for(this.preUpdate(0,U),q=0;q<rt.length;q++)_=rt[q].getBounds(K),ft?A(W,_):(ft=!0,r(_,W));mt+=U}this.skipping=!1}else for(q=0;q<rt.length;q++)_=rt[q].getBounds(K),ft?A(W,_):(ft=!0,r(_,W));return M>0&&b(W,M,M),W},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(M){this.ops.x.onChange(M)}},particleY:{get:function(){return this.ops.y.current},set:function(M){this.ops.y.onChange(M)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(M){this.ops.accelerationX.onChange(M)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(M){this.ops.accelerationY.onChange(M)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(M){this.ops.maxVelocityX.onChange(M)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(M){this.ops.maxVelocityY.onChange(M)}},speed:{get:function(){return this.ops.speedX.current},set:function(M){this.ops.speedX.onChange(M),this.ops.speedY.onChange(M)}},speedX:{get:function(){return this.ops.speedX.current},set:function(M){this.ops.speedX.onChange(M)}},speedY:{get:function(){return this.ops.speedY.current},set:function(M){this.ops.speedY.onChange(M)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(M){this.ops.moveToX.onChange(M)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(M){this.ops.moveToY.onChange(M)}},bounce:{get:function(){return this.ops.bounce.current},set:function(M){this.ops.bounce.onChange(M)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(M){this.ops.scaleX.onChange(M)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(M){this.ops.scaleY.onChange(M)}},particleColor:{get:function(){return this.ops.color.current},set:function(M){this.ops.color.onChange(M)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(M){this.ops.color.setEase(M)}},particleTint:{get:function(){return this.ops.tint.current},set:function(M){this.ops.tint.onChange(M)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(M){this.ops.alpha.onChange(M)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(M){this.ops.lifespan.onChange(M)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(M){this.ops.angle.onChange(M)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(M){this.ops.rotate.onChange(M)}},quantity:{get:function(){return this.ops.quantity.current},set:function(M){this.ops.quantity.onChange(M)}},delay:{get:function(){return this.ops.delay.current},set:function(M){this.ops.delay.onChange(M)}},hold:{get:function(){return this.ops.hold.current},set:function(M){this.ops.hold.onChange(M)}},flowCounter:{get:function(){return this.counters[0]},set:function(M){this.counters[0]=M}},frameCounter:{get:function(){return this.counters[1]},set:function(M){this.counters[1]=M}},animCounter:{get:function(){return this.counters[2]},set:function(M){this.counters[2]=M}},elapsed:{get:function(){return this.counters[3]},set:function(M){this.counters[3]=M}},stopCounter:{get:function(){return this.counters[4]},set:function(M){this.counters[4]=M}},completeFlag:{get:function(){return this.counters[5]},set:function(M){this.counters[5]=M}},zoneIndex:{get:function(){return this.counters[6]},set:function(M){this.counters[6]=M}},zoneTotal:{get:function(){return this.counters[7]},set:function(M){this.counters[7]=M}},currentFrame:{get:function(){return this.counters[8]},set:function(M){this.counters[8]=M}},currentAnim:{get:function(){return this.counters[9]},set:function(M){this.counters[9]=M}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var M,B=this.ops;for(M=0;M<G.length;M++){var U=G[M];B[U].destroy()}for(M=0;M<this.alive.length;M++)this.alive[M].destroy();for(M=0;M<this.dead.length;M++)this.dead[M].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});o.exports=k},10456:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(90205),l=t(69360),a=new l,r=new l,i=new l,n=new l,h=function(d,u,p,m){var v=a,g=r,T=i,w=n;m?(w.loadIdentity(),w.multiply(m),w.translate(u.x,u.y),w.rotate(u.rotation),w.scale(u.scaleX,u.scaleY)):w.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var b=d.currentContext,E=p.roundPixels,A=p.alpha,R=u.alpha,I=u.alive,P=I.length,N=u.viewBounds;if(!(!u.visible||P===0||N&&!s(N,p.worldView))){u.sortCallback&&u.depthSort(),p.addToRenderList(u);var F=u.scrollFactorX,O=u.scrollFactorY;b.save(),b.globalCompositeOperation=d.blendModes[u.blendMode];for(var D=0;D<P;D++){var L=I[D],z=L.alpha*R*A;if(!(z<=0||L.scaleX===0||L.scaleY===0)){T.applyITRS(L.x,L.y,L.rotation,L.scaleX,L.scaleY),v.copyFrom(p.matrix),v.multiplyWithOffset(w,-p.scrollX*F,-p.scrollY*O),T.e=L.x,T.f=L.y,v.multiply(T,g);var X=L.frame,H=X.canvasData;if(H.width>0&&H.height>0){var J=-X.halfWidth,G=-X.halfHeight;b.globalAlpha=z,b.save(),g.setToContext(b),E&&(J=Math.round(J),G=Math.round(G)),b.imageSmoothingEnabled=!X.source.scaleMode,b.drawImage(X.source.image,H.x,H.y,H.width,H.height,J,G,H.width,H.height),b.restore()}}}b.restore()}};o.exports=h},765:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(72632),i=t(9216);l.register("particles",function(n,h){n===void 0&&(n={});var d=a(n,"key",null),u=r(n,"config",null),p=new i(this.scene,0,0,d);return h!==void 0&&(n.add=h),s(this.scene,p,n),u&&p.setConfig(u),p})},81212:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(9216);s.register("particles",function(a,r,i,n){return a!==void 0&&typeof a=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new l(this.scene,a,r,i,n))})},69116:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(10275),a=t(10456),o.exports={renderWebGL:l,renderCanvas:a}},10275:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(90205),l=t(69360),a=t(75512),r=new l,i=new l,n=new l,h=new l,d=function(u,p,m,v){var g=u.pipelines.set(p.pipeline),T=r,w=i,b=n,E=h;v?(E.loadIdentity(),E.multiply(v),E.translate(p.x,p.y),E.rotate(p.rotation),E.scale(p.scaleX,p.scaleY)):E.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY);var A=a.getTintAppendFloatAlpha,R=m.alpha,I=p.alpha;u.pipelines.preBatch(p);var P=p.alive,N=P.length,F=p.viewBounds;if(!(N===0||F&&!s(F,m.worldView))){p.sortCallback&&p.depthSort(),m.addToRenderList(p),T.copyFrom(m.matrix),T.multiplyWithOffset(E,-m.scrollX*p.scrollFactorX,-m.scrollY*p.scrollFactorY),u.setBlendMode(p.blendMode),p.mask&&(p.mask.preRenderWebGL(u,p,m),u.pipelines.set(p.pipeline));for(var O=p.tintFill,D,L,z=0;z<N;z++){var X=P[z],H=X.alpha*I*R;if(!(H<=0||X.scaleX===0||X.scaleY===0)){b.applyITRS(X.x,X.y,X.rotation,X.scaleX,X.scaleY),b.e=X.x,b.f=X.y,T.multiply(b,w);var J=X.frame;J.glTexture!==L&&(L=J.glTexture,D=g.setGameObject(p,J));var G=-J.halfWidth,k=-J.halfHeight,M=w.setQuad(G,k,G+J.width,k+J.height),B=A(X.tint,H);g.shouldFlush(6)&&(g.flush(),D=g.setGameObject(p,J)),g.batchQuad(p,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],J.u0,J.v0,J.u1,J.v1,B,B,B,B,O,L,D)}}p.mask&&p.mask.postRenderWebGL(u,m),u.pipelines.postBatch(p)}};o.exports=d},30891:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n){r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=!0),this.emitter,this.x=r,this.y=i,this.active=n},update:function(){},destroy:function(){this.emitter=null}});o.exports=l},76100:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},26677:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="deathzone"},62736:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="explode"},56490:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},85715:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},40629:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:t(76100),DEATH_ZONE:t(26677),EXPLODE:t(62736),START:t(56490),STOP:t(85715)}},27684:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EmitterColorOp:t(19737),EmitterOp:t(93025),Events:t(40629),GravityWell:t(87811),Particle:t(14909),ParticleBounds:t(73106),ParticleEmitter:t(9216),ParticleProcessor:t(30891),Zones:t(25962)}},69361:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i){this.source=r,this.killOnEnter=i},willKill:function(a){var r=a.worldPosition,i=this.source.contains(r.x,r.y);return i&&this.killOnEnter||!i&&!this.killOnEnter}});o.exports=l},54213:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h,d,u){h===void 0&&(h=!1),d===void 0&&(d=!0),u===void 0&&(u=-1),this.source=r,this.points=[],this.quantity=i,this.stepRate=n,this.yoyo=h,this.counter=-1,this.seamless=d,this._length=0,this._direction=0,this.total=u,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var a=this.points[0],r=this.points[this.points.length-1];a.x===r.x&&a.y===r.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(a){return this.source=a,this.updateSource()},getPoint:function(a){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var r=this.points[this.counter];r&&(a.x=r.x,a.y=r.y)}});o.exports=l},68433:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93736),a=new s({initialize:function(i){this.source=i,this._tempVec=new l,this.total=-1},getPoint:function(r){var i=this._tempVec;this.source.getRandomPoint(i),r.x=i.x,r.y=i.y}});o.exports=a},25962:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DeathZone:t(69361),EdgeZone:t(54213),RandomZone:t(68433)}},29598:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(13747),r=new s({Extends:a,Mixins:[l.PathFollower],initialize:function(n,h,d,u,p,m){a.call(this,n,d,u,p,m),this.path=h},preUpdate:function(i,n){this.anims.update(i,n),this.pathUpdate(i)}});o.exports=r},19626:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(29598);s.register("follower",function(a,r,i,n,h){var d=new l(this.scene,a,r,i,n,h);return this.displayList.add(d),this.updateList.add(d),d})},33412:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(56694),a=t(99425),r=t(15978),i=t(83321),n=t(76583),h=new l({Extends:i,initialize:function(u,p,m,v,g,T,w,b){v||(v="__DEFAULT"),i.call(this,u,p,m,v,g),this.type="Plane",this.anims=new s(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(T,w,b),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(d,u,p){d===void 0&&(d=8),u===void 0&&(u=8),p===void 0&&(p=!1);var m=!1;return p&&(m=!0),this.gridWidth=d,this.gridHeight=u,this.isTiled=p,this.clear(),a({mesh:this,widthSegments:d,heightSegments:u,isOrtho:!1,tile:p,flipY:m}),this},setSizeToFrame:function(d){d===void 0&&(d=!0);var u=this.frame;if(this.setPerspective(this.width/u.width,this.height/u.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!d)return this;var p=this.gridWidth,m=this.gridHeight,v=this.vertices,g=u.u0,T=u.u1,w=u.v0,b=u.v1,E,A,R=0;if(this.isTiled)for(w=u.v1,b=u.v0,A=0;A<m;A++)for(E=0;E<p;E++)v[R++].setUVs(g,b),v[R++].setUVs(g,w),v[R++].setUVs(T,b),v[R++].setUVs(g,w),v[R++].setUVs(T,w),v[R++].setUVs(T,b);else{var I=p+1,P=m+1,N=T-g,F=b-w,O=[];for(A=0;A<P;A++)for(E=0;E<I;E++){var D=g+N*(E/p),L=w+F*(A/m);O.push(D,L)}for(A=0;A<m;A++)for(E=0;E<p;E++){var z=(E+I*A)*2,X=(E+I*(A+1))*2,H=(E+1+I*(A+1))*2,J=(E+1+I*A)*2;v[R++].setUVs(O[z],O[z+1]),v[R++].setUVs(O[X],O[X+1]),v[R++].setUVs(O[J],O[J+1]),v[R++].setUVs(O[X],O[X+1]),v[R++].setUVs(O[H],O[H+1]),v[R++].setUVs(O[J],O[J+1])}}return this},setViewHeight:function(d){d===void 0&&(d=this.frame.height);var u=this.fov*(Math.PI/180);this.viewPosition.z=this.height/d/Math.tan(u/2),this.dirtyCache[10]=1},createCheckerboard:function(d,u,p,m,v){d===void 0&&(d=16777215),u===void 0&&(u=255),p===void 0&&(p=255),m===void 0&&(m=255),v===void 0&&(v=128);var g=this.scene.sys.renderer.gl,T=g.createTexture();g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,T),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);for(var w=r(d),b=r(u),E=[],A=0;A<16;A++)for(var R=0;R<16;R++)A<8&&R<8||A>7&&R>7?E.push(w.r,w.g,w.b,p):E.push(b.r,b.g,b.b,m);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,16,16,0,g.RGBA,g.UNSIGNED_BYTE,new Uint8Array(E)),T.isAlphaPremultiplied=!0,T.isRenderTexture=!1,T.width=16,T.height=16;var I=this.scene.sys.textures.addGLTexture(n(),T,16,16);return this.removeCheckerboard(),this._checkerboard=I,g.bindTexture(g.TEXTURE_2D,null),this.setTexture(I),this.setSizeToFrame(),this.setViewHeight(v),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(d,u){return this.anims.play(d,u)},playReverse:function(d,u){return this.anims.playReverse(d,u)},playAfterDelay:function(d,u){return this.anims.playAfterDelay(d,u)},playAfterRepeat:function(d,u){return this.anims.playAfterRepeat(d,u)},stop:function(){return this.anims.stop()},stopAfterDelay:function(d){return this.anims.stopAfterDelay(d)},stopAfterRepeat:function(d){return this.anims.stopAfterRepeat(d)},stopOnFrame:function(d){return this.anims.stopOnFrame(d)},preUpdate:function(d,u){i.prototype.preUpdate.call(this,d,u),this.anims.update(d,u)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});o.exports=h},10912:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(32291),a=t(99325),r=t(20494),i=t(10850),n=t(33412);a.register("plane",function(h,d){h===void 0&&(h={});var u=r(h,"key",null),p=r(h,"frame",null),m=i(h,"width",8),v=i(h,"height",8),g=i(h,"tile",!1),T=new n(this.scene,0,0,u,p,m,v,g);d!==void 0&&(h.add=d);var w=i(h,"checkerboard",null);if(w){var b=i(w,"color1",16777215),E=i(w,"color2",255),A=i(w,"alpha1",255),R=i(w,"alpha2",255),I=i(w,"height",128);T.createCheckerboard(b,E,A,R,I)}return s(this.scene,T,h),l(T,h),T})},58322:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33412),l=t(61286);l.register("plane",function(a,r,i,n,h,d,u){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u))})},13171:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(74853),i=t(65641),n=t(71606),h=new s({Extends:a,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Transform,l.Visible,n],initialize:function(u,p,m,v,g,T,w){v===void 0&&(v=16777215),g===void 0&&(g=128),T===void 0&&(T=1),w===void 0&&(w=.1),a.call(this,u,"PointLight"),this.initPipeline(i.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(p,m),this.color=r(v),this.intensity=T,this.attenuation=w,this.width=g*2,this.height=g*2,this._radius=g},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this.width=d*2,this.height=d*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});o.exports=h},162:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(13171);l.register("pointlight",function(i,n){i===void 0&&(i={});var h=a(i,"color",16777215),d=a(i,"radius",128),u=a(i,"intensity",1),p=a(i,"attenuation",.1),m=new r(this.scene,0,0,h,d,u,p);return n!==void 0&&(i.add=n),s(this.scene,m,i),m})},91201:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(13171);s.register("pointlight",function(a,r,i,n,h,d){return this.displayList.add(new l(this.scene,a,r,i,n,h,d))})},71606:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(80590),o.exports={renderWebGL:l,renderCanvas:a}},80590:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n){i.addToRenderList(r);var h=a.pipelines.set(r.pipeline),d=s(r,i,n).calc,u=r.width,p=r.height,m=-r._radius,v=-r._radius,g=m+u,T=v+p,w=d.getX(0,0),b=d.getY(0,0),E=d.getX(m,v),A=d.getY(m,v),R=d.getX(m,T),I=d.getY(m,T),P=d.getX(g,T),N=d.getY(g,T),F=d.getX(g,v),O=d.getY(g,v);a.pipelines.preBatch(r),h.batchPointLight(r,i,E,A,R,I,P,N,F,O,w,b),a.pipelines.postBatch(r)};o.exports=l},15996:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(845),a=t(1539),r=new s({Extends:a,initialize:function(n,h,d,u,p){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=32),p===void 0&&(p=32);var m=new l(n.sys.textures,"",u,p);a.call(this,n,h,d,m),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(i,n){this.width=i,this.height=n,this.texture.setSize(i,n),this.updateDisplayOrigin();var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=i,h.hitArea.height=n),this},resize:function(i,n){return this.setSize(i,n),this},saveTexture:function(i){var n=this.texture;return n.key=i,n.manager.addDynamicTexture(n)&&(this._saved=!0),n},fill:function(i,n,h,d,u,p){return this.texture.fill(i,n,h,d,u,p),this},clear:function(){return this.texture.clear(),this},stamp:function(i,n,h,d,u){return this.texture.stamp(i,n,h,d,u),this},erase:function(i,n,h){return this.texture.erase(i,n,h),this},draw:function(i,n,h,d,u){return this.texture.draw(i,n,h,d,u),this},drawFrame:function(i,n,h,d,u,p){return this.texture.drawFrame(i,n,h,d,u,p),this},repeat:function(i,n,h,d,u,p,m,v,g){return this.texture.repeat(i,n,h,d,u,p,m,v,g),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(i,n,h,d,u){return this.texture.batchDraw(i,n,h,d,u),this},batchDrawFrame:function(i,n,h,d,u,p){return this.texture.batchDrawFrame(i,n,h,d,u,p),this},endDraw:function(i){return this.texture.endDraw(i),this},snapshotArea:function(i,n,h,d,u,p,m){return this.texture.snapshotArea(i,n,h,d,u,p,m),this},snapshot:function(i,n,h){return this.snapshotArea(0,0,this.width,this.height,i,n,h)},snapshotPixel:function(i,n,h){return this.snapshotArea(i,n,1,1,h,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});o.exports=r},85692:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(15996);l.register("renderTexture",function(i,n){i===void 0&&(i={});var h=a(i,"x",0),d=a(i,"y",0),u=a(i,"width",32),p=a(i,"height",32),m=new r(this.scene,h,d,u,p);return n!==void 0&&(i.add=n),s(this.scene,m,i),m})},29599:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(15996);s.register("renderTexture",function(a,r,i,n){return this.displayList.add(new l(this.scene,a,r,i,n))})},79968:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(56694),a=t(64937),r=t(89980),i=t(65641),n=t(58912),h=t(93736),d=new l({Extends:r,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Flip,a.Mask,a.Pipeline,a.PostPipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,n],initialize:function(p,m,v,g,T,w,b,E,A){g===void 0&&(g="__DEFAULT"),w===void 0&&(w=2),b===void 0&&(b=!0),r.call(this,p,"Rope"),this.anims=new s(this),this.points=w,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=g==="__DEFAULT",this.dirty=!1,this.horizontal=b,this._flipX=!1,this._flipY=!1,this._perp=new h,this.debugCallback=null,this.debugGraphic=null,this.setTexture(g,T),this.setPosition(m,v),this.setSizeToFrame(),this.initPipeline(i.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(w)&&this.resizeArrays(w.length),this.setPoints(w,E,A),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(u,p){var m=this.anims.currentFrame;this.anims.update(u,p),this.anims.currentFrame!==m&&(this.updateUVs(),this.updateVertices())},play:function(u,p,m){return this.anims.play(u,p,m),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(u,p,m){return u===void 0&&(u=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(u,p,m))},setVertical:function(u,p,m){return u===void 0&&(u=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(u,p,m)):this},setTintFill:function(u){return u===void 0&&(u=!1),this.tintFill=u,this},setAlphas:function(u,p){var m=this.points.length;if(m<1)return this;var v=this.alphas;u===void 0?u=[1]:!Array.isArray(u)&&p===void 0&&(u=[u]);var g,T=0;if(p!==void 0)for(g=0;g<m;g++)T=g*2,v[T]=u,v[T+1]=p;else if(u.length===m)for(g=0;g<m;g++)T=g*2,v[T]=u[g],v[T+1]=u[g];else{var w=u[0];for(g=0;g<m;g++)T=g*2,u.length>T&&(w=u[T]),v[T]=w,u.length>T+1&&(w=u[T+1]),v[T+1]=w}return this},setColors:function(u){var p=this.points.length;if(p<1)return this;var m=this.colors;u===void 0?u=[16777215]:Array.isArray(u)||(u=[u]);var v,g=0;if(u.length===p)for(v=0;v<p;v++)g=v*2,m[g]=u[v],m[g+1]=u[v];else{var T=u[0];for(v=0;v<p;v++)g=v*2,u.length>g&&(T=u[g]),m[g]=T,u.length>g+1&&(T=u[g+1]),m[g+1]=T}return this},setPoints:function(u,p,m){if(u===void 0&&(u=2),typeof u=="number"){var v=u;v<2&&(v=2),u=[];var g,T,w;if(this.horizontal)for(w=-this.frame.halfWidth,T=this.frame.width/(v-1),g=0;g<v;g++)u.push({x:w+g*T,y:0});else for(w=-this.frame.halfHeight,T=this.frame.height/(v-1),g=0;g<v;g++)u.push({x:0,y:w+g*T})}var b=u.length,E=this.points.length;return b<1?(console.warn("Rope: Not enough points given"),this):(b===1&&(u.unshift({x:0,y:0}),b++),E!==b&&this.resizeArrays(b),this.dirty=!0,this.points=u,this.updateUVs(),p!=null&&this.setColors(p),m!=null&&this.setAlphas(m),this)},updateUVs:function(){for(var u=this.uv,p=this.points.length,m=this.frame.u0,v=this.frame.v0,g=this.frame.u1,T=this.frame.v1,w=(g-m)/(p-1),b=(T-v)/(p-1),E=0;E<p;E++){var A=E*4,R,I,P,N;this.horizontal?(this._flipX?(R=g-E*w,P=g-E*w):(R=m+E*w,P=m+E*w),this._flipY?(I=T,N=v):(I=v,N=T)):(this._flipX?(R=m,P=g):(R=g,P=m),this._flipY?(I=T-E*b,N=T-E*b):(I=v+E*b,N=v+E*b)),u[A+0]=R,u[A+1]=I,u[A+2]=P,u[A+3]=N}return this},resizeArrays:function(u){var p=this.colors,m=this.alphas;this.vertices=new Float32Array(u*4),this.uv=new Float32Array(u*4),p=new Uint32Array(u*2),m=new Float32Array(u*2);for(var v=0;v<u*2;v++)p[v]=16777215,m[v]=1;return this.colors=p,this.alphas=m,this.dirty=!0,this},updateVertices:function(){var u=this._perp,p=this.points,m=this.vertices,v=p.length;if(this.dirty=!1,!(v<1)){for(var g,T=p[0],w=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,b=0;b<v;b++){var E=p[b],A=b*4;b<v-1?g=p[b+1]:g=E,u.x=g.y-T.y,u.y=-(g.x-T.x);var R=u.length();u.x/=R,u.y/=R,u.x*=w,u.y*=w,m[A]=E.x+u.x,m[A+1]=E.y+u.y,m[A+2]=E.x-u.x,m[A+3]=E.y-u.y,T=E}return this}},setDebug:function(u,p){return this.debugGraphic=u,!u&&!p?this.debugCallback=null:p?this.debugCallback=p:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(u,p,m){var v=u.debugGraphic,g=m[0],T=m[1],w=m[2],b=m[3];v.lineBetween(g,T,w,b);for(var E=4;E<p;E+=4){var A=m[E+0],R=m[E+1],I=m[E+2],P=m[E+3];v.lineBetween(g,T,A,R),v.lineBetween(w,b,I,P),v.lineBetween(w,b,A,R),v.lineBetween(A,R,I,P),g=A,T=R,w=I,b=P}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(u){return this._flipX=u,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(u){return this._flipY=u,this.updateUVs()}}});o.exports=d},44598:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){};o.exports=y},96027:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(10850),i=t(79968);l.register("rope",function(n,h){n===void 0&&(n={});var d=a(n,"key",null),u=a(n,"frame",null),p=a(n,"horizontal",!0),m=r(n,"points",void 0),v=r(n,"colors",void 0),g=r(n,"alphas",void 0),T=new i(this.scene,0,0,d,u,m,p,v,g);return h!==void 0&&(n.add=h),s(this.scene,T,n),T})},31982:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79968),l=t(61286);l.register("rope",function(a,r,i,n,h,d,u,p){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u,p))})},58912:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(49489),a=t(44598),o.exports={renderWebGL:l,renderCanvas:a}},49489:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline,i),u=s(i,n,h).calc,p=i.vertices,m=i.uv,v=i.colors,g=i.alphas,T=i.alpha,w=l.getTintAppendFloatAlpha,b=n.roundPixels,E=p.length,A=Math.floor(E*.5);d.flush(),r.pipelines.preBatch(i);var R=d.setGameObject(i),I=d.vertexViewF32,P=d.vertexViewU32,N=d.vertexCount*d.currentShader.vertexComponentCount-1,F=0,O=i.tintFill;i.dirty&&i.updateVertices();for(var D=i.debugCallback,L=[],z=0;z<E;z+=2){var X=p[z+0],H=p[z+1],J=X*u.a+H*u.c+u.e,G=X*u.b+H*u.d+u.f;b&&(J=Math.round(J),G=Math.round(G)),I[++N]=J,I[++N]=G,I[++N]=m[z+0],I[++N]=m[z+1],I[++N]=R,I[++N]=O,P[++N]=w(v[F],n.alpha*(g[F]*T)),F++,D&&(L[z+0]=J,L[z+1]=G)}D&&D.call(i,i,E,L),d.vertexCount+=A,d.currentBatch.count=d.vertexCount-d.currentBatch.start,r.pipelines.postBatch(i)};o.exports=a},27902:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(72632),i=t(98611),n=t(22440),h=t(24252),d=t(69360),u=new s({Extends:a,Mixins:[l.ComputedSize,l.Depth,l.GetBounds,l.Mask,l.Origin,l.ScrollFactor,l.Transform,l.Visible,h],initialize:function(m,v,g,T,w,b,E,A){g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=128),b===void 0&&(b=128),a.call(this,m,"Shader"),this.blendMode=-1,this.shader;var R=m.sys.renderer;this.renderer=R,this.gl=R.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=R.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=R.width,this._rendererHeight=R.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(g,T),this.setSize(w,b),this.setOrigin(.5,.5),this.setShader(v,E,A)},willRender:function(p){return this.renderToTexture?!0:!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&p.id)},setRenderToTexture:function(p,m){if(m===void 0&&(m=!1),!this.renderToTexture){var v=this.width,g=this.height,T=this.renderer;this.glTexture=T.createTextureFromSource(null,v,g,0),this.glTexture.flipY=m,this.framebuffer=T.createFramebuffer(v,g,this.glTexture,!1),this._rendererWidth=v,this._rendererHeight=g,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),p&&(this.texture=this.scene.sys.textures.addGLTexture(p,this.glTexture,v,g))}return this.shader&&(T.pipelines.clear(),this.load(),this.flush(),T.pipelines.rebind()),this},setShader:function(p,m,v){if(m===void 0&&(m=[]),typeof p=="string"){var g=this.scene.sys.cache.shader;if(!g.has(p))return console.warn("Shader missing: "+p),this;this.shader=g.get(p)}else this.shader=p;var T=this.gl,w=this.renderer;this.program&&T.deleteProgram(this.program);var b=w.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);T.uniformMatrix4fv(T.getUniformLocation(b,"uViewMatrix"),!1,this.viewMatrix),T.uniformMatrix4fv(T.getUniformLocation(b,"uProjectionMatrix"),!1,this.projectionMatrix),T.uniform2f(T.getUniformLocation(b,"uResolution"),this.width,this.height),this.program=b;var E=new Date,A={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[E.getFullYear(),E.getMonth(),E.getDate(),E.getHours()*60*60+E.getMinutes()*60+E.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=i(!0,{},this.shader.uniforms,A):this.uniforms=A;for(var R=0;R<4;R++)m[R]&&this.setSampler2D("iChannel"+R,m[R],R,v);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(p){return this.pointer=p,this},projOrtho:function(p,m,v,g){var T=-1e3,w=1e3,b=1/(p-m),E=1/(v-g),A=1/(T-w),R=this.projectionMatrix;R[0]=-2*b,R[5]=-2*E,R[10]=2*A,R[12]=(p+m)*b,R[13]=(g+v)*E,R[14]=(w+T)*A;var I=this.program,P=this.gl,N=this.renderer;N.setProgram(I),P.uniformMatrix4fv(P.getUniformLocation(I,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=m,this._rendererHeight=v},initUniforms:function(){var p=this.gl,m=this.renderer.glFuncMap,v=this.program;this._textureCount=0;for(var g in this.uniforms){var T=this.uniforms[g],w=T.type,b=m[w];T.uniformLocation=p.getUniformLocation(v,g),w!=="sampler2D"&&(T.glMatrix=b.matrix,T.glValueLength=b.length,T.glFunc=b.func)}},setSampler2DBuffer:function(p,m,v,g,T,w){T===void 0&&(T=0),w===void 0&&(w={});var b=this.uniforms[p];return b.value=m,w.width=v,w.height=g,b.textureData=w,this._textureCount=T,this.initSampler2D(b),this},setSampler2D:function(p,m,v,g){v===void 0&&(v=0);var T=this.scene.sys.textures;if(T.exists(m)){var w=T.getFrame(m);if(w.glTexture&&w.glTexture.isRenderTexture)return this.setSampler2DBuffer(p,w.glTexture,w.width,w.height,v,g);var b=this.uniforms[p],E=w.source;b.textureKey=m,b.source=E.image,b.value=w.glTexture,E.isGLTexture&&(g||(g={}),g.width=E.width,g.height=E.height),g&&(b.textureData=g),this._textureCount=v,this.initSampler2D(b)}return this},setUniform:function(p,m){return n(this.uniforms,p,m),this},getUniform:function(p){return r(this.uniforms,p,null)},setChannel0:function(p,m){return this.setSampler2D("iChannel0",p,0,m)},setChannel1:function(p,m){return this.setSampler2D("iChannel1",p,1,m)},setChannel2:function(p,m){return this.setSampler2D("iChannel2",p,2,m)},setChannel3:function(p,m){return this.setSampler2D("iChannel3",p,3,m)},initSampler2D:function(p){if(p.value){var m=this.gl;m.activeTexture(m.TEXTURE0+this._textureCount),m.bindTexture(m.TEXTURE_2D,p.value);var v=p.textureData;if(v&&!p.value.isRenderTexture){var g=m[r(v,"magFilter","linear").toUpperCase()],T=m[r(v,"minFilter","linear").toUpperCase()],w=m[r(v,"wrapS","repeat").toUpperCase()],b=m[r(v,"wrapT","repeat").toUpperCase()],E=m[r(v,"format","rgba").toUpperCase()];if(v.repeat&&(w=m.REPEAT,b=m.REPEAT),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,!!v.flipY),v.width){var A=r(v,"width",512),R=r(v,"height",2),I=r(v,"border",0);m.texImage2D(m.TEXTURE_2D,0,E,A,R,I,E,m.UNSIGNED_BYTE,null)}else m.texImage2D(m.TEXTURE_2D,0,E,m.RGBA,m.UNSIGNED_BYTE,p.source);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,g),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,T),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,w),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,b)}this.renderer.setProgram(this.program),m.uniform1i(p.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var p=this.gl,m=this.uniforms,v,g,T,w,b,E=0;for(var A in m)v=m[A],T=v.glFunc,g=v.glValueLength,w=v.uniformLocation,b=v.value,b!==null&&(g===1?v.glMatrix?T.call(p,w,v.transpose,b):T.call(p,w,b):g===2?T.call(p,w,b.x,b.y):g===3?T.call(p,w,b.x,b.y,b.z):g===4?T.call(p,w,b.x,b.y,b.z,b.w):v.type==="sampler2D"&&(p.activeTexture(p.TEXTURE0+E),p.bindTexture(p.TEXTURE_2D,b),p.uniform1i(w,E),E++))},load:function(p){var m=this.gl,v=this.width,g=this.height,T=this.renderer,w=this.program,b=this.viewMatrix;if(!this.renderToTexture){var E=-this._displayOriginX,A=-this._displayOriginY;b[0]=p[0],b[1]=p[1],b[4]=p[2],b[5]=p[3],b[8]=p[4],b[9]=p[5],b[12]=b[0]*E+b[4]*A,b[13]=b[1]*E+b[5]*A}m.useProgram(w),m.uniformMatrix4fv(m.getUniformLocation(w,"uViewMatrix"),!1,b),m.uniform2f(m.getUniformLocation(w,"uResolution"),this.width,this.height);var R=this.uniforms,I=R.resolution;I.value.x=v,I.value.y=g,R.time.value=T.game.loop.getDuration();var P=this.pointer;if(P){var N=R.mouse,F=P.x/v,O=1-P.y/g;N.value.x=F.toFixed(2),N.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var p=this.width,m=this.height,v=this.program,g=this.gl,T=this.vertexBuffer,w=this.renderer,b=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(w.setFramebuffer(this.framebuffer),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT)),g.bindBuffer(g.ARRAY_BUFFER,T);var E=g.getAttribLocation(v,"inPosition");E!==-1&&(g.enableVertexAttribArray(E),g.vertexAttribPointer(E,2,g.FLOAT,!1,b,0));var A=this.vertexViewF32;A[3]=m,A[4]=p,A[5]=m,A[8]=p,A[9]=m,A[10]=p;var R=6;g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,R*b)),g.drawArrays(g.TRIANGLES,0,R),this.renderToTexture&&w.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var p=this.gl;p.deleteProgram(this.program),p.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});o.exports=u},10612:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){};o.exports=y},13908:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(27902);l.register("shader",function(i,n){i===void 0&&(i={});var h=a(i,"key",null),d=a(i,"x",0),u=a(i,"y",0),p=a(i,"width",128),m=a(i,"height",128),v=new r(this.scene,h,d,u,p,m);return n!==void 0&&(i.add=n),s(this.scene,v,i),v})},51979:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27902),l=t(61286);l.register("shader",function(a,r,i,n,h,d,u){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u))})},24252:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(19782),a=t(10612),o.exports={renderWebGL:l,renderCanvas:a}},19782:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n){if(r.shader){if(i.addToRenderList(r),a.pipelines.clear(),r.renderToTexture)r.load(),r.flush();else{var h=s(r,i,n).calc;(a.width!==r._rendererWidth||a.height!==r._rendererHeight)&&r.projOrtho(0,a.width,a.height,0),r.load(h.matrix),r.flush()}a.pipelines.rebind()}};o.exports=l},19543:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i,n,h,d){for(var u=s.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*n),p=i.pathData,m=i.pathIndexes,v=0;v<m.length;v+=3){var g=m[v]*2,T=m[v+1]*2,w=m[v+2]*2,b=p[g+0]-h,E=p[g+1]-d,A=p[T+0]-h,R=p[T+1]-d,I=p[w+0]-h,P=p[w+1]-d,N=r.getX(b,E),F=r.getY(b,E),O=r.getX(A,R),D=r.getY(A,R),L=r.getX(I,P),z=r.getY(I,P);a.batchTri(i,N,F,O,D,L,z,0,0,1,1,u,u,u,2)}};o.exports=l},15608:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=l||s.fillColor,i=a||s.fillAlpha,n=(r&16711680)>>>16,h=(r&65280)>>>8,d=r&255;t.fillStyle="rgba("+n+","+h+","+d+","+i+")"};o.exports=y},17876:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=l||s.strokeColor,i=a||s.strokeAlpha,n=(r&16711680)>>>16,h=(r&65280)>>>8,d=r&255;t.strokeStyle="rgba("+n+","+h+","+d+","+i+")",t.lineWidth=s.lineWidth};o.exports=y},91461:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(89980),r=t(88829),i=new s({Extends:a,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Transform,l.Visible],initialize:function(h,d,u){d===void 0&&(d="Shape"),a.call(this,h,d),this.geom=u,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new r,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(n,h){return h===void 0&&(h=1),n===void 0?this.isFilled=!1:(this.fillColor=n,this.fillAlpha=h,this.isFilled=!0),this},setStrokeStyle:function(n,h,d){return d===void 0&&(d=1),n===void 0?this.isStroked=!1:(this.lineWidth=n,this.strokeColor=h,this.strokeAlpha=d,this.isStroked=!0),this},setClosePath:function(n){return this.closePath=n,this},setSize:function(n,h){return this.width=n,this.height=h,this},setDisplaySize:function(n,h){return this.displayWidth=n,this.displayHeight=h,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}}});o.exports=i},50262:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i,n,h){var d=a.strokeTint,u=s.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*i);d.TL=u,d.TR=u,d.BL=u,d.BR=u;var p=r.pathData,m=p.length-1,v=r.lineWidth,g=v/2,T=p[0]-n,w=p[1]-h;r.closePath||(m-=2);for(var b=2;b<m;b+=2){var E=p[b]-n,A=p[b+1]-h;a.batchLine(T,w,E,A,g,g,v,b-2,r.closePath?b===m-1:!1),T=E,w=A}};o.exports=l},28593:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2213),l=t(56694),a=t(75606),r=t(11117),i=t(26673),n=t(83392),h=t(91461),d=new l({Extends:h,Mixins:[s],initialize:function(p,m,v,g,T,w,b,E,A){m===void 0&&(m=0),v===void 0&&(v=0),g===void 0&&(g=128),T===void 0&&(T=0),w===void 0&&(w=360),b===void 0&&(b=!1),h.call(this,p,"Arc",new i(0,0,g)),this._startAngle=T,this._endAngle=w,this._anticlockwise=b,this._iterations=.01,this.setPosition(m,v);var R=this.geom.radius*2;this.setSize(R,R),E!==void 0&&this.setFillStyle(E,A),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(u){this._iterations=u,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(u){this.geom.radius=u;var p=u*2;this.setSize(p,p),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(u){this._startAngle=u,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(u){this._endAngle=u,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(u){this._anticlockwise=u,this.updateData()}},setRadius:function(u){return this.radius=u,this},setIterations:function(u){return u===void 0&&(u=.01),this.iterations=u,this},setStartAngle:function(u,p){return this._startAngle=u,p!==void 0&&(this._anticlockwise=p),this.updateData()},setEndAngle:function(u,p){return this._endAngle=u,p!==void 0&&(this._anticlockwise=p),this.updateData()},updateData:function(){var u=this._iterations,p=u,m=this.geom.radius,v=a(this._startAngle),g=a(this._endAngle),T=this._anticlockwise,w=m,b=m;g-=v,T?g<-n.PI2?g=-n.PI2:g>0&&(g=-n.PI2+g%n.PI2):g>n.PI2?g=n.PI2:g<0&&(g=n.PI2+g%n.PI2);for(var E=[w+Math.cos(v)*m,b+Math.sin(v)*m],A;p<1;)A=g*p+v,E.push(w+Math.cos(A)*m,b+Math.sin(A)*m),p+=u;return A=g+v,E.push(w+Math.cos(A)*m,b+Math.sin(A)*m),E.push(w+Math.cos(v)*m,b+Math.sin(v)*m),this.pathIndexes=r(E),this.pathData=E,this}});o.exports=d},23560:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75606),l=t(15608),a=t(17876),r=t(49584),i=function(n,h,d,u){d.addToRenderList(h);var p=n.currentContext;if(r(n,p,h,d,u)){var m=h.radius;p.beginPath(),p.arc(m-h.originX*(m*2),m-h.originY*(m*2),m,s(h._startAngle),s(h._endAngle),h.anticlockwise),h.closePath&&p.closePath(),h.isFilled&&(l(p,h),p.fill()),h.isStroked&&(a(p,h),p.stroke()),p.restore()}};o.exports=i},10369:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28593),l=t(61286);l.register("arc",function(a,r,i,n,h,d,u,p){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u,p))}),l.register("circle",function(a,r,i,n,h){return this.displayList.add(new s(this.scene,a,r,i,0,360,!1,n,h))})},2213:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(58356),a=t(23560),o.exports={renderWebGL:l,renderCanvas:a}},58356:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(19543),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=s(n,h,d),m=u.calcMatrix.copyFrom(p.calc),v=n._displayOriginX,g=n._displayOriginY,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&l(u,m,n,T,v,g),n.isStroked&&a(u,n,T,v,g),i.pipelines.postBatch(n)};o.exports=r},15220:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(87203),a=t(11117),r=t(74118),i=t(91461),n=new s({Extends:i,Mixins:[l],initialize:function(d,u,p,m,v,g){u===void 0&&(u=0),p===void 0&&(p=0),i.call(this,d,"Curve",m),this._smoothness=32,this._curveBounds=new r,this.closePath=!1,this.setPosition(u,p),v!==void 0&&this.setFillStyle(v,g),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){var h=this._curveBounds,d=this._smoothness;this.geom.getBounds(h,d),this.setSize(h.width,h.height),this.updateDisplayOrigin();for(var u=[],p=this.geom.getPoints(d),m=0;m<p.length;m++)u.push(p[m].x,p[m].y);return u.push(p[0].x,p[0].y),this.pathIndexes=a(u),this.pathData=u,this}});o.exports=n},4024:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX+n._curveBounds.x,m=n._displayOriginY+n._curveBounds.y,v=n.pathData,g=v.length-1,T=v[0]-p,w=v[1]-m;u.beginPath(),u.moveTo(T,w),n.closePath||(g-=2);for(var b=2;b<g;b+=2){var E=v[b]-p,A=v[b+1]-m;u.lineTo(E,A)}n.closePath&&u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},10147:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(15220);s.register("curve",function(a,r,i,n,h){return this.displayList.add(new l(this.scene,a,r,i,n,h))})},87203:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(82958),a=t(4024),o.exports={renderWebGL:l,renderCanvas:a}},82958:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19543),l=t(73329),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=l(n,h,d),m=u.calcMatrix.copyFrom(p.calc),v=n._displayOriginX+n._curveBounds.x,g=n._displayOriginY+n._curveBounds.y,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&s(u,m,n,T,v,g),n.isStroked&&a(u,n,T,v,g),i.pipelines.postBatch(n)};o.exports=r},28591:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(11117),a=t(84171),r=t(95669),i=t(91461),n=new s({Extends:i,Mixins:[a],initialize:function(d,u,p,m,v,g,T){u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=128),v===void 0&&(v=128),i.call(this,d,"Ellipse",new r(m/2,v/2,m,v)),this._smoothness=64,this.setPosition(u,p),this.width=m,this.height=v,g!==void 0&&this.setFillStyle(g,T),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSize:function(h,d){return this.width=h,this.height=d,this.geom.setPosition(h/2,d/2),this.geom.setSize(h,d),this.updateData()},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){for(var h=[],d=this.geom.getPoints(this._smoothness),u=0;u<d.length;u++)h.push(d[u].x,d[u].y);return h.push(d[0].x,d[0].y),this.pathIndexes=l(h),this.pathData=h,this}});o.exports=n},55881:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,m=n._displayOriginY,v=n.pathData,g=v.length-1,T=v[0]-p,w=v[1]-m;u.beginPath(),u.moveTo(T,w),n.closePath||(g-=2);for(var b=2;b<g;b+=2){var E=v[b]-p,A=v[b+1]-m;u.lineTo(E,A)}u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},99869:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28591),l=t(61286);l.register("ellipse",function(a,r,i,n,h,d){return this.displayList.add(new s(this.scene,a,r,i,n,h,d))})},84171:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(17554),a=t(55881),o.exports={renderWebGL:l,renderCanvas:a}},17554:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19543),l=t(73329),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=l(n,h,d),m=u.calcMatrix.copyFrom(p.calc),v=n._displayOriginX,g=n._displayOriginY,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&s(u,m,n,T,v,g),n.isStroked&&a(u,n,T,v,g),i.pipelines.postBatch(n)};o.exports=r},39169:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91461),a=t(88059),r=new s({Extends:l,Mixins:[a],initialize:function(n,h,d,u,p,m,v,g,T,w,b){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=128),p===void 0&&(p=128),m===void 0&&(m=32),v===void 0&&(v=32),l.call(this,n,"Grid",null),this.cellWidth=m,this.cellHeight=v,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(h,d),this.setSize(u,p),this.setFillStyle(g,T),w!==void 0&&this.setOutlineStyle(w,b),this.updateDisplayOrigin()},setFillStyle:function(i,n){return n===void 0&&(n=1),i===void 0?this.showCells=!1:(this.fillColor=i,this.fillAlpha=n,this.showCells=!0),this},setAltFillStyle:function(i,n){return n===void 0&&(n=1),i===void 0?this.showAltCells=!1:(this.altFillColor=i,this.altFillAlpha=n,this.showAltCells=!0),this},setOutlineStyle:function(i,n){return n===void 0&&(n=1),i===void 0?this.showOutline=!1:(this.outlineFillColor=i,this.outlineFillAlpha=n,this.showOutline=!0),this}});o.exports=r},95525:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=-n._displayOriginX,m=-n._displayOriginY,v=h.alpha*n.alpha,g=n.width,T=n.height,w=n.cellWidth,b=n.cellHeight,E=Math.ceil(g/w),A=Math.ceil(T/b),R=w,I=b,P=w-(E*w-g),N=b-(A*b-T),F=n.showCells,O=n.showAltCells,D=n.showOutline,L=0,z=0,X=0,H=0,J=0;if(D&&(R--,I--,P===w&&P--,N===b&&N--),F&&n.fillAlpha>0)for(s(u,n),z=0;z<A;z++)for(O&&(X=z%2),L=0;L<E;L++){if(O&&X){X=0;continue}X++,H=L<E-1?R:P,J=z<A-1?I:N,u.fillRect(p+L*w,m+z*b,H,J)}if(O&&n.altFillAlpha>0)for(s(u,n,n.altFillColor,n.altFillAlpha*v),z=0;z<A;z++)for(O&&(X=z%2),L=0;L<E;L++){if(O&&!X){X=1;continue}X=0,H=L<E-1?R:P,J=z<A-1?I:N,u.fillRect(p+L*w,m+z*b,H,J)}if(D&&n.outlineFillAlpha>0){for(l(u,n,n.outlineFillColor,n.outlineFillAlpha*v),L=1;L<E;L++){var G=L*w;u.beginPath(),u.moveTo(G+p,m),u.lineTo(G+p,T+m),u.stroke()}for(z=1;z<A;z++){var k=z*b;u.beginPath(),u.moveTo(p,k+m),u.lineTo(p+g,k+m),u.stroke()}}u.restore()}};o.exports=r},9326:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(39169);s.register("grid",function(a,r,i,n,h,d,u,p,m,v){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u,p,m,v))})},88059:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(50639),a=t(95525),o.exports={renderWebGL:l,renderCanvas:a}},50639:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline),u=s(i,n,h),p=d.calcMatrix.copyFrom(u.calc);p.translate(-i._displayOriginX,-i._displayOriginY);var m=n.alpha*i.alpha,v=i.width,g=i.height,T=i.cellWidth,w=i.cellHeight,b=Math.ceil(v/T),E=Math.ceil(g/w),A=T,R=w,I=T-(b*T-v),P=w-(E*w-g),N,F,O=i.showCells,D=i.showAltCells,L=i.showOutline,z=0,X=0,H=0,J=0,G=0;if(L&&(A--,R--,I===T&&I--,P===w&&P--),r.pipelines.preBatch(i),O&&i.fillAlpha>0)for(N=d.fillTint,F=l.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*m),N.TL=F,N.TR=F,N.BL=F,N.BR=F,X=0;X<E;X++)for(D&&(H=X%2),z=0;z<b;z++){if(D&&H){H=0;continue}H++,J=z<b-1?A:I,G=X<E-1?R:P,d.batchFillRect(z*T,X*w,J,G)}if(D&&i.altFillAlpha>0)for(N=d.fillTint,F=l.getTintAppendFloatAlpha(i.altFillColor,i.altFillAlpha*m),N.TL=F,N.TR=F,N.BL=F,N.BR=F,X=0;X<E;X++)for(D&&(H=X%2),z=0;z<b;z++){if(D&&!H){H=1;continue}H=0,J=z<b-1?A:I,G=X<E-1?R:P,d.batchFillRect(z*T,X*w,J,G)}if(L&&i.outlineFillAlpha>0){var k=d.strokeTint,M=l.getTintAppendFloatAlpha(i.outlineFillColor,i.outlineFillAlpha*m);for(k.TL=M,k.TR=M,k.BL=M,k.BR=M,z=1;z<b;z++){var B=z*T;d.batchLine(B,0,B,g,1,1,1,0,!1)}for(X=1;X<E;X++){var U=X*w;d.batchLine(0,U,v,U,1,1,1,0,!1)}}r.pipelines.postBatch(i)};o.exports=a},4415:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72296),l=t(56694),a=t(91461),r=new l({Extends:a,Mixins:[s],initialize:function(n,h,d,u,p,m,v,g){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=48),p===void 0&&(p=32),m===void 0&&(m=15658734),v===void 0&&(v=10066329),g===void 0&&(g=13421772),a.call(this,n,"IsoBox",null),this.projection=4,this.fillTop=m,this.fillLeft=v,this.fillRight=g,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(h,d),this.setSize(u,p),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setFaces:function(i,n,h){return i===void 0&&(i=!0),n===void 0&&(n=!0),h===void 0&&(h=!0),this.showTop=i,this.showLeft=n,this.showRight=h,this},setFillStyle:function(i,n,h){return this.fillTop=i,this.fillLeft=n,this.fillRight=h,this.isFilled=!0,this}});o.exports=r},32884:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(49584),a=function(r,i,n,h){n.addToRenderList(i);var d=r.currentContext;if(l(r,d,i,n,h)&&i.isFilled){var u=i.width,p=i.height,m=u/2,v=u/i.projection;i.showTop&&(s(d,i,i.fillTop),d.beginPath(),d.moveTo(-m,-p),d.lineTo(0,-v-p),d.lineTo(m,-p),d.lineTo(m,-1),d.lineTo(0,v-1),d.lineTo(-m,-1),d.lineTo(-m,-p),d.fill()),i.showLeft&&(s(d,i,i.fillLeft),d.beginPath(),d.moveTo(-m,0),d.lineTo(0,v),d.lineTo(0,v-p),d.lineTo(-m,-p),d.lineTo(-m,0),d.fill()),i.showRight&&(s(d,i,i.fillRight),d.beginPath(),d.moveTo(m,0),d.lineTo(0,v),d.lineTo(0,v-p),d.lineTo(m,-p),d.lineTo(m,0),d.fill()),d.restore()}};o.exports=a},88154:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(4415);s.register("isobox",function(a,r,i,n,h,d,u){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u))})},72296:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(33101),a=t(32884),o.exports={renderWebGL:l,renderCanvas:a}},33101:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline),u=s(i,n,h),p=d.calcMatrix.copyFrom(u.calc),m=i.width,v=i.height,g=m/2,T=m/i.projection,w=n.alpha*i.alpha;if(i.isFilled){var b,E,A,R,I,P,N,F,O;r.pipelines.preBatch(i),i.showTop&&(b=l.getTintAppendFloatAlpha(i.fillTop,w),E=p.getX(-g,-v),A=p.getY(-g,-v),R=p.getX(0,-T-v),I=p.getY(0,-T-v),P=p.getX(g,-v),N=p.getY(g,-v),F=p.getX(0,T-v),O=p.getY(0,T-v),d.batchQuad(i,E,A,R,I,P,N,F,O,0,0,1,1,b,b,b,b,2)),i.showLeft&&(b=l.getTintAppendFloatAlpha(i.fillLeft,w),E=p.getX(-g,0),A=p.getY(-g,0),R=p.getX(0,T),I=p.getY(0,T),P=p.getX(0,T-v),N=p.getY(0,T-v),F=p.getX(-g,-v),O=p.getY(-g,-v),d.batchQuad(i,E,A,R,I,P,N,F,O,0,0,1,1,b,b,b,b,2)),i.showRight&&(b=l.getTintAppendFloatAlpha(i.fillRight,w),E=p.getX(g,0),A=p.getY(g,0),R=p.getX(0,T),I=p.getY(0,T),P=p.getX(0,T-v),N=p.getY(0,T-v),F=p.getX(g,-v),O=p.getY(g,-v),d.batchQuad(i,E,A,R,I,P,N,F,O,0,0,1,1,b,b,b,b,2)),r.pipelines.postBatch(i)}};o.exports=a},65159:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93387),a=t(91461),r=new s({Extends:a,Mixins:[l],initialize:function(n,h,d,u,p,m,v,g,T){h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u=48),p===void 0&&(p=32),m===void 0&&(m=!1),v===void 0&&(v=15658734),g===void 0&&(g=10066329),T===void 0&&(T=13421772),a.call(this,n,"IsoTriangle",null),this.projection=4,this.fillTop=v,this.fillLeft=g,this.fillRight=T,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=m,this.isFilled=!0,this.setPosition(h,d),this.setSize(u,p),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setReversed:function(i){return this.isReversed=i,this},setFaces:function(i,n,h){return i===void 0&&(i=!0),n===void 0&&(n=!0),h===void 0&&(h=!0),this.showTop=i,this.showLeft=n,this.showRight=h,this},setFillStyle:function(i,n,h){return this.fillTop=i,this.fillLeft=n,this.fillRight=h,this.isFilled=!0,this}});o.exports=r},9923:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(49584),a=function(r,i,n,h){n.addToRenderList(i);var d=r.currentContext;if(l(r,d,i,n,h)&&i.isFilled){var u=i.width,p=i.height,m=u/2,v=u/i.projection,g=i.isReversed;i.showTop&&g&&(s(d,i,i.fillTop),d.beginPath(),d.moveTo(-m,-p),d.lineTo(0,-v-p),d.lineTo(m,-p),d.lineTo(0,v-p),d.fill()),i.showLeft&&(s(d,i,i.fillLeft),d.beginPath(),g?(d.moveTo(-m,-p),d.lineTo(0,v),d.lineTo(0,v-p)):(d.moveTo(-m,0),d.lineTo(0,v),d.lineTo(0,v-p)),d.fill()),i.showRight&&(s(d,i,i.fillRight),d.beginPath(),g?(d.moveTo(m,-p),d.lineTo(0,v),d.lineTo(0,v-p)):(d.moveTo(m,0),d.lineTo(0,v),d.lineTo(0,v-p)),d.fill()),d.restore()}};o.exports=a},67765:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(65159);s.register("isotriangle",function(a,r,i,n,h,d,u,p){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u,p))})},93387:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(54946),a=t(9923),o.exports={renderWebGL:l,renderCanvas:a}},54946:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline),u=s(i,n,h),p=d.calcMatrix.copyFrom(u.calc),m=i.width,v=i.height,g=m/2,T=m/i.projection,w=i.isReversed,b=n.alpha*i.alpha;if(i.isFilled){r.pipelines.preBatch(i);var E,A,R,I,P,N,F;if(i.showTop&&w){E=l.getTintAppendFloatAlpha(i.fillTop,b),A=p.getX(-g,-v),R=p.getY(-g,-v),I=p.getX(0,-T-v),P=p.getY(0,-T-v),N=p.getX(g,-v),F=p.getY(g,-v);var O=p.getX(0,T-v),D=p.getY(0,T-v);d.batchQuad(i,A,R,I,P,N,F,O,D,0,0,1,1,E,E,E,E,2)}i.showLeft&&(E=l.getTintAppendFloatAlpha(i.fillLeft,b),w?(A=p.getX(-g,-v),R=p.getY(-g,-v),I=p.getX(0,T),P=p.getY(0,T),N=p.getX(0,T-v),F=p.getY(0,T-v)):(A=p.getX(-g,0),R=p.getY(-g,0),I=p.getX(0,T),P=p.getY(0,T),N=p.getX(0,T-v),F=p.getY(0,T-v)),d.batchTri(i,A,R,I,P,N,F,0,0,1,1,E,E,E,2)),i.showRight&&(E=l.getTintAppendFloatAlpha(i.fillRight,b),w?(A=p.getX(g,-v),R=p.getY(g,-v),I=p.getX(0,T),P=p.getY(0,T),N=p.getX(0,T-v),F=p.getY(0,T-v)):(A=p.getX(g,0),R=p.getY(g,0),I=p.getX(0,T),P=p.getY(0,T),N=p.getX(0,T-v),F=p.getY(0,T-v)),d.batchTri(i,A,R,I,P,N,F,0,0,1,1,E,E,E,2)),r.pipelines.postBatch(i)}};o.exports=a},579:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91461),a=t(88829),r=t(52660),i=new s({Extends:l,Mixins:[r],initialize:function(h,d,u,p,m,v,g,T,w){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=128),g===void 0&&(g=0),l.call(this,h,"Line",new a(p,m,v,g));var b=Math.max(1,this.geom.right-this.geom.left),E=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(d,u),this.setSize(b,E),T!==void 0&&this.setStrokeStyle(1,T,w),this.updateDisplayOrigin()},setLineWidth:function(n,h){return h===void 0&&(h=n),this._startWidth=n,this._endWidth=h,this.lineWidth=n,this},setTo:function(n,h,d,u){return this.geom.setTo(n,h,d,u),this}});o.exports=i},52044:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17876),l=t(49584),a=function(r,i,n,h){n.addToRenderList(i);var d=r.currentContext;if(l(r,d,i,n,h)){var u=i._displayOriginX,p=i._displayOriginY;i.isStroked&&(s(d,i),d.beginPath(),d.moveTo(i.geom.x1-u,i.geom.y1-p),d.lineTo(i.geom.x2-u,i.geom.y2-p),d.stroke()),d.restore()}};o.exports=a},85665:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(579);s.register("line",function(a,r,i,n,h,d,u,p){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u,p))})},52660:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(46952),a=t(52044),o.exports={renderWebGL:l,renderCanvas:a}},46952:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(75512),a=function(r,i,n,h){n.addToRenderList(i);var d=r.pipelines.set(i.pipeline),u=s(i,n,h);d.calcMatrix.copyFrom(u.calc);var p=i._displayOriginX,m=i._displayOriginY,v=n.alpha*i.alpha;if(r.pipelines.preBatch(i),i.isStroked){var g=d.strokeTint,T=l.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*v);g.TL=T,g.TR=T,g.BL=T,g.BR=T,d.batchLine(i.geom.x1-p,i.geom.y1-m,i.geom.x2-p,i.geom.y2-m,i._startWidth/2,i._endWidth/2,1,0,!1,u.sprite,u.camera)}r.pipelines.postBatch(i)};o.exports=a},91249:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70573),l=t(56694),a=t(11117),r=t(14045),i=t(8580),n=t(91461),h=t(18974),d=new l({Extends:n,Mixins:[s],initialize:function(p,m,v,g,T,w){m===void 0&&(m=0),v===void 0&&(v=0),n.call(this,p,"Polygon",new i(g));var b=r(this.geom);this.setPosition(m,v),this.setSize(b.width,b.height),T!==void 0&&this.setFillStyle(T,w),this.updateDisplayOrigin(),this.updateData()},smooth:function(u){u===void 0&&(u=1);for(var p=0;p<u;p++)h(this.geom);return this.updateData()},setTo:function(u){this.geom.setTo(u);var p=r(this.geom);return this.setSize(p.width,p.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var u=[],p=this.geom.points,m=0;m<p.length;m++)u.push(p[m].x,p[m].y);return u.push(p[0].x,p[0].y),this.pathIndexes=a(u),this.pathData=u,this}});o.exports=d},40834:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,m=n._displayOriginY,v=n.pathData,g=v.length-1,T=v[0]-p,w=v[1]-m;u.beginPath(),u.moveTo(T,w),n.closePath||(g-=2);for(var b=2;b<g;b+=2){var E=v[b]-p,A=v[b+1]-m;u.lineTo(E,A)}n.closePath&&u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},88203:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(91249);s.register("polygon",function(a,r,i,n,h){return this.displayList.add(new l(this.scene,a,r,i,n,h))})},70573:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(72841),a=t(40834),o.exports={renderWebGL:l,renderCanvas:a}},72841:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19543),l=t(73329),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=l(n,h,d),m=u.calcMatrix.copyFrom(p.calc),v=n._displayOriginX,g=n._displayOriginY,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&s(u,m,n,T,v,g),n.isStroked&&a(u,n,T,v,g),i.pipelines.postBatch(n)};o.exports=r},517:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(74118),a=t(91461),r=t(37673),i=new s({Extends:a,Mixins:[r],initialize:function(h,d,u,p,m,v,g){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=128),m===void 0&&(m=128),a.call(this,h,"Rectangle",new l(0,0,p,m)),this.setPosition(d,u),this.setSize(p,m),v!==void 0&&this.setFillStyle(v,g),this.updateDisplayOrigin(),this.updateData()},setSize:function(n,h){this.width=n,this.height=h,this.geom.setSize(n,h),this.updateData(),this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=n,d.hitArea.height=h),this},updateData:function(){var n=[],h=this.geom,d=this._tempLine;return h.getLineA(d),n.push(d.x1,d.y1,d.x2,d.y2),h.getLineB(d),n.push(d.x2,d.y2),h.getLineC(d),n.push(d.x2,d.y2),h.getLineD(d),n.push(d.x2,d.y2),this.pathData=n,this}});o.exports=i},4091:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,m=n._displayOriginY;n.isFilled&&(s(u,n),u.fillRect(-p,-m,n.width,n.height)),n.isStroked&&(l(u,n),u.beginPath(),u.rect(-p,-m,n.width,n.height),u.stroke()),u.restore()}};o.exports=r},94355:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(517);s.register("rectangle",function(a,r,i,n,h,d){return this.displayList.add(new l(this.scene,a,r,i,n,h,d))})},37673:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(43532),a=t(4091),o.exports={renderWebGL:l,renderCanvas:a}},43532:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(50262),a=t(75512),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=s(n,h,d);u.calcMatrix.copyFrom(p.calc);var m=n._displayOriginX,v=n._displayOriginY,g=h.alpha*n.alpha;if(i.pipelines.preBatch(n),n.isFilled){var T=u.fillTint,w=a.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*g);T.TL=w,T.TR=w,T.BL=w,T.BR=w,u.batchFillRect(-m,-v,n.width,n.height)}n.isStroked&&l(u,n,g,m,v),i.pipelines.postBatch(n)};o.exports=r},77843:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87956),l=t(56694),a=t(11117),r=t(91461),i=new l({Extends:r,Mixins:[s],initialize:function(h,d,u,p,m,v,g,T){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=5),m===void 0&&(m=32),v===void 0&&(v=64),r.call(this,h,"Star",null),this._points=p,this._innerRadius=m,this._outerRadius=v,this.setPosition(d,u),this.setSize(v*2,v*2),g!==void 0&&this.setFillStyle(g,T),this.updateDisplayOrigin(),this.updateData()},setPoints:function(n){return this._points=n,this.updateData()},setInnerRadius:function(n){return this._innerRadius=n,this.updateData()},setOuterRadius:function(n){return this._outerRadius=n,this.updateData()},points:{get:function(){return this._points},set:function(n){this._points=n,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(n){this._innerRadius=n,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(n){this._outerRadius=n,this.updateData()}},updateData:function(){var n=[],h=this._points,d=this._innerRadius,u=this._outerRadius,p=Math.PI/2*3,m=Math.PI/h,v=u,g=u;n.push(v,g+-u);for(var T=0;T<h;T++)n.push(v+Math.cos(p)*u,g+Math.sin(p)*u),p+=m,n.push(v+Math.cos(p)*d,g+Math.sin(p)*d),p+=m;return n.push(v,g+-u),this.pathIndexes=a(n),this.pathData=n,this}});o.exports=i},11401:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,m=n._displayOriginY,v=n.pathData,g=v.length-1,T=v[0]-p,w=v[1]-m;u.beginPath(),u.moveTo(T,w),n.closePath||(g-=2);for(var b=2;b<g;b+=2){var E=v[b]-p,A=v[b+1]-m;u.lineTo(E,A)}u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},23962:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77843),l=t(61286);l.register("star",function(a,r,i,n,h,d,u){return this.displayList.add(new s(this.scene,a,r,i,n,h,d,u))})},87956:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(12037),a=t(11401),o.exports={renderWebGL:l,renderCanvas:a}},12037:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19543),l=t(73329),a=t(50262),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=l(n,h,d),m=u.calcMatrix.copyFrom(p.calc),v=n._displayOriginX,g=n._displayOriginY,T=h.alpha*n.alpha;i.pipelines.preBatch(n),n.isFilled&&s(u,m,n,T,v,g),n.isStroked&&a(u,n,T,v,g),i.pipelines.postBatch(n)};o.exports=r},21873:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91461),a=t(66349),r=t(70498),i=new s({Extends:l,Mixins:[r],initialize:function(h,d,u,p,m,v,g,T,w,b,E){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=128),v===void 0&&(v=64),g===void 0&&(g=0),T===void 0&&(T=128),w===void 0&&(w=128),l.call(this,h,"Triangle",new a(p,m,v,g,T,w));var A=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(d,u),this.setSize(A,R),b!==void 0&&this.setFillStyle(b,E),this.updateDisplayOrigin(),this.updateData()},setTo:function(n,h,d,u,p,m){return this.geom.setTo(n,h,d,u,p,m),this.updateData()},updateData:function(){var n=[],h=this.geom,d=this._tempLine;return h.getLineA(d),n.push(d.x1,d.y1,d.x2,d.y2),h.getLineB(d),n.push(d.x2,d.y2),h.getLineC(d),n.push(d.x2,d.y2),this.pathData=n,this}});o.exports=i},60213:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15608),l=t(17876),a=t(49584),r=function(i,n,h,d){h.addToRenderList(n);var u=i.currentContext;if(a(i,u,n,h,d)){var p=n._displayOriginX,m=n._displayOriginY,v=n.geom.x1-p,g=n.geom.y1-m,T=n.geom.x2-p,w=n.geom.y2-m,b=n.geom.x3-p,E=n.geom.y3-m;u.beginPath(),u.moveTo(v,g),u.lineTo(T,w),u.lineTo(b,E),u.closePath(),n.isFilled&&(s(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};o.exports=r},79296:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(21873);s.register("triangle",function(a,r,i,n,h,d,u,p,m,v){return this.displayList.add(new l(this.scene,a,r,i,n,h,d,u,p,m,v))})},70498:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(72291),a=t(60213),o.exports={renderWebGL:l,renderCanvas:a}},72291:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=t(50262),a=t(75512),r=function(i,n,h,d){h.addToRenderList(n);var u=i.pipelines.set(n.pipeline),p=s(n,h,d);u.calcMatrix.copyFrom(p.calc);var m=n._displayOriginX,v=n._displayOriginY,g=h.alpha*n.alpha;if(i.pipelines.preBatch(n),n.isFilled){var T=u.fillTint,w=a.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*g);T.TL=w,T.TR=w,T.BL=w,T.BR=w;var b=n.geom.x1-m,E=n.geom.y1-v,A=n.geom.x2-m,R=n.geom.y2-v,I=n.geom.x3-m,P=n.geom.y3-v;u.batchFillTriangle(b,E,A,R,I,P,p.sprite,p.camera)}n.isStroked&&l(u,n,g,m,v),i.pipelines.postBatch(n)};o.exports=r},13747:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(56694),a=t(64937),r=t(89980),i=t(20791),n=new l({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,i],initialize:function(d,u,p,m,v){r.call(this,d,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(m,v),this.setPosition(u,p),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,d){this.anims.update(h,d)},play:function(h,d){return this.anims.play(h,d)},playReverse:function(h,d){return this.anims.playReverse(h,d)},playAfterDelay:function(h,d){return this.anims.playAfterDelay(h,d)},playAfterRepeat:function(h,d){return this.anims.playAfterRepeat(h,d)},chain:function(h){return this.anims.chain(h)},stop:function(){return this.anims.stop()},stopAfterDelay:function(h){return this.anims.stopAfterDelay(h)},stopAfterRepeat:function(h){return this.anims.stopAfterRepeat(h)},stopOnFrame:function(h){return this.anims.stopOnFrame(h)},toJSON:function(){return a.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});o.exports=n},27573:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l.addToRenderList(s),t.batchSprite(s,s.frame,l,a)};o.exports=y},89219:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(32291),a=t(99325),r=t(20494),i=t(13747);a.register("sprite",function(n,h){n===void 0&&(n={});var d=r(n,"key",null),u=r(n,"frame",null),p=new i(this.scene,0,0,d,u);return h!==void 0&&(n.add=h),s(this.scene,p,n),l(p,n),p})},66135:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(13747);s.register("sprite",function(a,r,i,n){return this.displayList.add(new l(this.scene,a,r,i,n))})},20791:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(21034),a=t(27573),o.exports={renderWebGL:l,renderCanvas:a}},21034:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l.addToRenderList(s),s.pipeline.batchSprite(s,l,a)};o.exports=y},32979:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=t.canvas,r=t.context,i=t.style,n=[],h=0,d=l.length;i.maxLines>0&&i.maxLines<l.length&&(d=i.maxLines),i.syncFont(a,r);for(var u=0;u<d;u++){var p=i.strokeThickness;p+=r.measureText(l[u]).width,l[u].length>1&&(p+=t.letterSpacing*(l[u].length-1)),i.wordWrap&&(p-=r.measureText(" ").width),n[u]=Math.ceil(p),h=Math.max(h,n[u])}var m=s.fontSize+i.strokeThickness,v=m*d,g=t.lineSpacing;return d>1&&(v+=g*(d-1)),{width:h,height:v,lines:d,lineWidths:n,lineSpacing:g,lineHeight:m}};o.exports=y},27030:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=function(a){var r=s.create(this),i=r.getContext("2d",{willReadFrequently:!0});a.syncFont(r,i);var n=i.measureText(a.testString);if("actualBoundingBoxAscent"in n){var h=n.actualBoundingBoxAscent,d=n.actualBoundingBoxDescent;return s.remove(r),{ascent:h,descent:d,fontSize:h+d}}var u=Math.ceil(n.width*a.baselineX),p=u,m=2*p;p=p*a.baselineY|0,r.width=u,r.height=m,i.fillStyle="#f00",i.fillRect(0,0,u,m),i.font=a._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a.testString,0,p);var v={ascent:0,descent:0,fontSize:0},g=i.getImageData(0,0,u,m);if(!g)return v.ascent=p,v.descent=p+6,v.fontSize=v.ascent+v.descent,s.remove(r),v;var T=g.data,w=T.length,b=u*4,E,A,R=0,I=!1;for(E=0;E<p;E++){for(A=0;A<b;A+=4)if(T[R+A]!==255){I=!0;break}if(!I)R+=b;else break}for(v.ascent=p-E,R=w-b,I=!1,E=m;E>p;E--){for(A=0;A<b;A+=4)if(T[R+A]!==255){I=!0;break}if(!I)R-=b;else break}return v.descent=E-p,v.fontSize=v.ascent+v.descent,s.remove(r),v};o.exports=l},76555:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99584),l=t(61068),a=t(56694),r=t(64937),i=t(89980),n=t(32979),h=t(10850),d=t(55638),u=t(80032),p=t(74744),m=new a({Extends:i,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,u],initialize:function(g,T,w,b,E){T===void 0&&(T=0),w===void 0&&(w=0),i.call(this,g,"Text"),this.renderer=g.sys.renderer,this.setPosition(T,w),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=l.create(this),this.context,this.style=new p(this,E),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=g.sys.textures.addCanvas(null,this.canvas,!0),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(b),E&&E.padding&&this.setPadding(E.padding),E&&E.lineSpacing&&this.setLineSpacing(E.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(v){var g=this.style;if(g.wordWrapCallback){var T=g.wordWrapCallback.call(g.wordWrapCallbackScope,v,this);return Array.isArray(T)&&(T=T.join(`
`)),T}else return g.wordWrapWidth?g.wordWrapUseAdvanced?this.advancedWordWrap(v,this.context,this.style.wordWrapWidth):this.basicWordWrap(v,this.context,this.style.wordWrapWidth):v},advancedWordWrap:function(v,g,T){for(var w="",b=v.replace(/ +/gi," ").split(this.splitRegExp),E=b.length,A=0;A<E;A++){var R=b[A],I="";R=R.replace(/^ *|\s*$/gi,"");var P=g.measureText(R).width;if(P<T){w+=R+`
`;continue}for(var N=T,F=R.split(" "),O=0;O<F.length;O++){var D=F[O],L=D+" ",z=g.measureText(L).width;if(z>N){if(O===0){for(var X=L;X.length&&(X=X.slice(0,-1),z=g.measureText(X).width,!(z<=N)););if(!X.length)throw new Error("wordWrapWidth < a single character");var H=D.substr(X.length);F[O]=H,I+=X}var J=F[O].length?O:O+1,G=F.slice(J).join(" ").replace(/[ \n]*$/gi,"");b.splice(A+1,0,G),E=b.length;break}else I+=L,N-=z}w+=I.replace(/[ \n]*$/gi,"")+`
`}return w=w.replace(/[\s|\n]*$/gi,""),w},basicWordWrap:function(v,g,T){for(var w="",b=v.split(this.splitRegExp),E=b.length-1,A=g.measureText(" ").width,R=0;R<=E;R++){for(var I=T,P=b[R].split(" "),N=P.length-1,F=0;F<=N;F++){var O=P[F],D=g.measureText(O).width,L=D;F<N&&(L+=A),L>I&&F>0&&(w+=`
`,I=T),w+=O,F<N?(w+=" ",I-=L):I-=D}R<E&&(w+=`
`)}return w},getWrappedText:function(v){v===void 0&&(v=this._text),this.style.syncFont(this.canvas,this.context);var g=this.runWordWrap(v);return g.split(this.splitRegExp)},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this._text&&(this._text=v.toString(),this.updateText()),this},appendText:function(v,g){g===void 0&&(g=!0),!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v=v.toString();var T=this._text.concat(g?`
`+v:v);return T!==this._text&&(this._text=T,this.updateText()),this},setStyle:function(v){return this.style.setStyle(v)},setFont:function(v){return this.style.setFont(v)},setFontFamily:function(v){return this.style.setFontFamily(v)},setFontSize:function(v){return this.style.setFontSize(v)},setFontStyle:function(v){return this.style.setFontStyle(v)},setFixedSize:function(v,g){return this.style.setFixedSize(v,g)},setBackgroundColor:function(v){return this.style.setBackgroundColor(v)},setFill:function(v){return this.style.setFill(v)},setColor:function(v){return this.style.setColor(v)},setStroke:function(v,g){return this.style.setStroke(v,g)},setShadow:function(v,g,T,w,b,E){return this.style.setShadow(v,g,T,w,b,E)},setShadowOffset:function(v,g){return this.style.setShadowOffset(v,g)},setShadowColor:function(v){return this.style.setShadowColor(v)},setShadowBlur:function(v){return this.style.setShadowBlur(v)},setShadowStroke:function(v){return this.style.setShadowStroke(v)},setShadowFill:function(v){return this.style.setShadowFill(v)},setWordWrapWidth:function(v,g){return this.style.setWordWrapWidth(v,g)},setWordWrapCallback:function(v,g){return this.style.setWordWrapCallback(v,g)},setAlign:function(v){return this.style.setAlign(v)},setResolution:function(v){return this.style.setResolution(v)},setLineSpacing:function(v){return this.lineSpacing=v,this.updateText()},setLetterSpacing:function(v){return this.letterSpacing=v,this.updateText()},setPadding:function(v,g,T,w){if(typeof v=="object"){var b=v,E=h(b,"x",null);E!==null?(v=E,T=E):(v=h(b,"left",0),T=h(b,"right",v));var A=h(b,"y",null);A!==null?(g=A,w=A):(g=h(b,"top",0),w=h(b,"bottom",g))}else v===void 0&&(v=0),g===void 0&&(g=v),T===void 0&&(T=v),w===void 0&&(w=g);return this.padding.left=v,this.padding.top=g,this.padding.right=T,this.padding.bottom=w,this.updateText()},setMaxLines:function(v){return this.style.setMaxLines(v)},setRTL:function(v){v===void 0&&(v=!0);var g=this.style;return g.rtl===v?this:(g.rtl=v,v?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),g.align==="left"?g.align="right":g.align==="right"&&(g.align="left"),this)},updateText:function(){var v=this.canvas,g=this.context,T=this.style,w=T.resolution,b=T.metrics;T.syncFont(v,g);var E=this._text;(T.wordWrapWidth||T.wordWrapCallback)&&(E=this.runWordWrap(this._text));var A=E.split(this.splitRegExp),R=n(this,b,A),I=this.padding,P;T.fixedWidth===0?(this.width=R.width+I.left+I.right,P=R.width):(this.width=T.fixedWidth,P=this.width-I.left-I.right,P<R.width&&(P=R.width)),T.fixedHeight===0?this.height=R.height+I.top+I.bottom:this.height=T.fixedHeight;var N=this.width,F=this.height;this.updateDisplayOrigin(),N*=w,F*=w,N=Math.max(N,1),F=Math.max(F,1),v.width!==N||v.height!==F?(v.width=N,v.height=F,this.frame.setSize(N,F),T.syncFont(v,g),T.rtl&&(g.direction="rtl")):g.clearRect(0,0,N,F),g.save(),g.scale(w,w),T.backgroundColor&&(g.fillStyle=T.backgroundColor,g.fillRect(0,0,N,F)),T.syncStyle(v,g),g.translate(I.left,I.top);for(var O,D,L=0;L<R.lines;L++){if(O=T.strokeThickness/2,D=T.strokeThickness/2+L*R.lineHeight+b.ascent,L>0&&(D+=R.lineSpacing*L),T.rtl)O=N-O-I.left-I.right;else if(T.align==="right")O+=P-R.lineWidths[L];else if(T.align==="center")O+=(P-R.lineWidths[L])/2;else if(T.align==="justify"){var z=.85;if(R.lineWidths[L]/R.width>=z){var X=R.width-R.lineWidths[L],H=g.measureText(" ").width,J=A[L].trim(),G=J.split(" ");X+=(A[L].length-J.length)*H;for(var k=Math.floor(X/H),M=0;k>0;)G[M]+=" ",M=(M+1)%(G.length-1||1),--k;A[L]=G.join(" ")}}if(this.autoRound&&(O=Math.round(O),D=Math.round(D)),T.strokeThickness&&(T.syncShadow(g,T.shadowStroke),g.strokeText(A[L],O,D)),T.color){T.syncShadow(g,T.shadowFill);var B=this.letterSpacing;if(B!==0)for(var U=0,W=A[L].split(""),K=0;K<W.length;K++)g.fillText(W[K],O+U,D),U+=g.measureText(W[K]).width+B;else g.fillText(A[L],O,D)}}g.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(v,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture);var q=this.input;return q&&!q.customHitArea&&(q.hitArea.width=this.width,q.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(v){this.setText(v)}},toJSON:function(){var v=r.ToJSON(this),g={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return v.data=g,v},preDestroy:function(){d(this.canvas),l.remove(this.canvas),this.texture.destroy()}});o.exports=m},71649:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){s.width===0||s.height===0||(l.addToRenderList(s),t.batchSprite(s,s.frame,l,a))};o.exports=y},75397:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(76555);l.register("text",function(i,n){i===void 0&&(i={});var h=a(i,"text",""),d=a(i,"style",null),u=a(i,"padding",null);u!==null&&(d.padding=u);var p=new r(this.scene,0,0,h,d);return n!==void 0&&(i.add=n),s(this.scene,p,i),p.autoRound=a(i,"autoRound",!0),p.resolution=a(i,"resolution",1),p})},94627:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(76555),l=t(61286);l.register("text",function(a,r,i,n){return this.displayList.add(new s(this.scene,a,r,i,n))})},80032:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(76128),a=t(71649),o.exports={renderWebGL:l,renderCanvas:a}},74744:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(20494),a=t(10850),r=t(27030),i={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new s({initialize:function(d,u){this.parent=d,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(u,!1,!0)},setStyle:function(h,d,u){d===void 0&&(d=!0),u===void 0&&(u=!1),h&&h.hasOwnProperty("fontSize")&&typeof h.fontSize=="number"&&(h.fontSize=h.fontSize.toString()+"px");for(var p in i){var m=u?i[p][1]:this[p];p==="wordWrapCallback"||p==="wordWrapCallbackScope"?this[p]=a(h,i[p][0],m):this[p]=l(h,i[p][0],m)}var v=a(h,"font",null);v!==null&&this.setFont(v,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var g=a(h,"fill",null);g!==null&&(this.color=g);var T=a(h,"metrics",!1);return T?this.metrics={ascent:a(T,"ascent",0),descent:a(T,"descent",0),fontSize:a(T,"fontSize",0)}:(d||!this.metrics)&&(this.metrics=r(this)),d?this.parent.updateText():this.parent},syncFont:function(h,d){d.font=this._font},syncStyle:function(h,d){d.textBaseline="alphabetic",d.fillStyle=this.color,d.strokeStyle=this.stroke,d.lineWidth=this.strokeThickness,d.lineCap="round",d.lineJoin="round"},syncShadow:function(h,d){d?(h.shadowOffsetX=this.shadowOffsetX,h.shadowOffsetY=this.shadowOffsetY,h.shadowColor=this.shadowColor,h.shadowBlur=this.shadowBlur):(h.shadowOffsetX=0,h.shadowOffsetY=0,h.shadowColor=0,h.shadowBlur=0)},update:function(h){return h&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=r(this)),this.parent.updateText()},setFont:function(h,d){d===void 0&&(d=!0);var u=h,p="",m="";if(typeof h!="string")u=a(h,"fontFamily","Courier"),p=a(h,"fontSize","16px"),m=a(h,"fontStyle","");else{var v=h.split(" "),g=0;m=v.length>2?v[g++]:"",p=v[g++]||"16px",u=v[g++]||"Courier"}return(u!==this.fontFamily||p!==this.fontSize||m!==this.fontStyle)&&(this.fontFamily=u,this.fontSize=p,this.fontStyle=m,d&&this.update(!0)),this.parent},setFontFamily:function(h){return this.fontFamily!==h&&(this.fontFamily=h,this.update(!0)),this.parent},setFontStyle:function(h){return this.fontStyle!==h&&(this.fontStyle=h,this.update(!0)),this.parent},setFontSize:function(h){return typeof h=="number"&&(h=h.toString()+"px"),this.fontSize!==h&&(this.fontSize=h,this.update(!0)),this.parent},setTestString:function(h){return this.testString=h,this.update(!0)},setFixedSize:function(h,d){return this.fixedWidth=h,this.fixedHeight=d,h&&(this.parent.width=h),d&&(this.parent.height=d),this.update(!1)},setBackgroundColor:function(h){return this.backgroundColor=h,this.update(!1)},setFill:function(h){return this.color=h,this.update(!1)},setColor:function(h){return this.color=h,this.update(!1)},setResolution:function(h){return this.resolution=h,this.update(!1)},setStroke:function(h,d){return d===void 0&&(d=this.strokeThickness),h===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==h||this.strokeThickness!==d)&&(this.stroke=h,this.strokeThickness=d,this.update(!0)),this.parent},setShadow:function(h,d,u,p,m,v){return h===void 0&&(h=0),d===void 0&&(d=0),u===void 0&&(u="#000"),p===void 0&&(p=0),m===void 0&&(m=!1),v===void 0&&(v=!0),this.shadowOffsetX=h,this.shadowOffsetY=d,this.shadowColor=u,this.shadowBlur=p,this.shadowStroke=m,this.shadowFill=v,this.update(!1)},setShadowOffset:function(h,d){return h===void 0&&(h=0),d===void 0&&(d=h),this.shadowOffsetX=h,this.shadowOffsetY=d,this.update(!1)},setShadowColor:function(h){return h===void 0&&(h="#000"),this.shadowColor=h,this.update(!1)},setShadowBlur:function(h){return h===void 0&&(h=0),this.shadowBlur=h,this.update(!1)},setShadowStroke:function(h){return this.shadowStroke=h,this.update(!1)},setShadowFill:function(h){return this.shadowFill=h,this.update(!1)},setWordWrapWidth:function(h,d){return d===void 0&&(d=!1),this.wordWrapWidth=h,this.wordWrapUseAdvanced=d,this.update(!1)},setWordWrapCallback:function(h,d){return d===void 0&&(d=null),this.wordWrapCallback=h,this.wordWrapCallbackScope=d,this.update(!1)},setAlign:function(h){return h===void 0&&(h="left"),this.align=h,this.update(!1)},setMaxLines:function(h){return h===void 0&&(h=0),this.maxLines=h,this.update(!1)},getTextMetrics:function(){var h=this.metrics;return{ascent:h.ascent,descent:h.descent,fontSize:h.fontSize}},toJSON:function(){var h={};for(var d in i)h[d]=this[d];return h.metrics=this.getTextMetrics(),h},destroy:function(){this.parent=void 0}});o.exports=n},76128:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i,n){if(!(r.width===0||r.height===0)){i.addToRenderList(r);var h=r.frame,d=h.width,u=h.height,p=s.getTintAppendFloatAlpha,m=a.pipelines.set(r.pipeline,r),v=m.setTexture2D(h.glTexture,r);m.batchTexture(r,h.glTexture,d,u,r.x,r.y,d/r.style.resolution,u/r.style.resolution,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.displayOriginX,r.displayOriginY,0,0,d,u,p(r.tintTopLeft,i.alpha*r._alphaTL),p(r.tintTopRight,i.alpha*r._alphaTR),p(r.tintBottomLeft,i.alpha*r._alphaBL),p(r.tintBottomRight,i.alpha*r._alphaBR),r.tintFill,0,0,i,n,!1,v)}};o.exports=l},35856:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(56694),a=t(64937),r=t(89980),i=t(3504),n=t(8213),h=t(9271),d=t(93736),u=8,p=new l({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,h],initialize:function(v,g,T,w,b,E,A){var R=v.sys.renderer;r.call(this,v,"TileSprite");var I=v.sys.textures.get(E),P=I.get(A);P.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),I=v.sys.textures.get("__MISSING"),P=I.get()),I.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),I=v.sys.textures.get("__MISSING"),P=I.get()),!w||!b?(w=P.width,b=P.height):(w=Math.floor(w),b=Math.floor(b)),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=R,this.canvas=s.create(this,w,b),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=I,this.displayFrame=P,this._crop=this.resetCropObject(),this.texture=v.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=i(P.width),this.potHeight=i(P.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(g,T),this.setSize(w,b),this.setFrame(A),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(m,v){return this.displayTexture=this.scene.sys.textures.get(m),this.setFrame(v)},setFrame:function(m){var v=this.displayTexture.get(m);return this.potWidth=i(v.width),this.potHeight=i(v.height),this.canvas.width=0,!v.cutWidth||!v.cutHeight?this.renderFlags&=~u:this.renderFlags|=u,this.displayFrame=v,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(m,v){return m!==void 0&&(this.tilePositionX=m),v!==void 0&&(this.tilePositionY=v),this},setTileScale:function(m,v){return m===void 0&&(m=this.tileScaleX),v===void 0&&(v=m),this.tileScaleX=m,this.tileScaleY=v,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var m=this.displayFrame;if(m.source.isRenderTexture||m.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var v=this.fillContext,g=this.fillCanvas,T=this.potWidth,w=this.potHeight;(!this.renderer||!this.renderer.gl)&&(T=m.cutWidth,w=m.cutHeight),v.clearRect(0,0,T,w),g.width=T,g.height=w,v.drawImage(m.source.image,m.cutX,m.cutY,m.cutWidth,m.cutHeight,0,0,T,w),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(g,this.fillPattern):this.fillPattern=v.createPattern(g,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var m=this.canvas;if((m.width!==this.width||m.height!==this.height)&&(m.width=this.width,m.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var v=this.context;this.scene.sys.game.config.antialias||n.disable(v);var g=this._tileScale.x,T=this._tileScale.y,w=this._tilePosition.x,b=this._tilePosition.y;v.clearRect(0,0,this.width,this.height),v.save(),v.scale(g,T),v.translate(-w,-b),v.fillStyle=this.fillPattern,v.fillRect(w,b,this.width/g,this.height/T),v.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(m){this._tilePosition.x=m,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(m){this._tilePosition.y=m,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(m){this._tileScale.x=m,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(m){this._tileScale.y=m,this.dirty=!0}}});o.exports=p},93305:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){s.updateCanvas(),l.addToRenderList(s),t.batchSprite(s,s.frame,l,a)};o.exports=y},63950:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(35856);l.register("tileSprite",function(i,n){i===void 0&&(i={});var h=a(i,"x",0),d=a(i,"y",0),u=a(i,"width",512),p=a(i,"height",512),m=a(i,"key",""),v=a(i,"frame",""),g=new r(this.scene,h,d,u,p,m,v);return n!==void 0&&(i.add=n),s(this.scene,g,i),g})},20509:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35856),l=t(61286);l.register("tileSprite",function(a,r,i,n,h,d){return this.displayList.add(new s(this.scene,a,r,i,n,h,d))})},9271:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(74287),a=t(93305),o.exports={renderWebGL:l,renderCanvas:a}},74287:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i,n){r.updateCanvas();var h=r.width,d=r.height;if(!(h===0||d===0)){i.addToRenderList(r);var u=s.getTintAppendFloatAlpha,p=a.pipelines.set(r.pipeline,r),m=p.setTexture2D(r.fillPattern,r);p.batchTexture(r,r.fillPattern,r.displayFrame.width*r.tileScaleX,r.displayFrame.height*r.tileScaleY,r.x,r.y,h,d,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.originX*h,r.originY*d,0,0,h,d,u(r.tintTopLeft,i.alpha*r._alphaTL),u(r.tintTopRight,i.alpha*r._alphaTR),u(r.tintBottomLeft,i.alpha*r._alphaBL),u(r.tintBottomRight,i.alpha*r._alphaBR),r.tintFill,r.tilePositionX%r.displayFrame.width/r.displayFrame.width,r.tilePositionY%r.displayFrame.height/r.displayFrame.height,i,n,!1,m)}};o.exports=l},8630:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(64937),r=t(56631),i=t(97081),n=t(89980),h=t(83392),d=t(76038),u=t(76583),p=t(77974),m=new l({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,p],initialize:function(g,T,w,b){n.call(this,g,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=u(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var E=g.sys.game;this._device=E.device.video,this.setPosition(T,w),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),E.events.on(i.PAUSE,this.globalPause,this),E.events.on(i.RESUME,this.globalResume,this);var A=g.sys.sound;A&&A.on(d.GLOBAL_MUTE,this.globalMute,this),b&&this.load(b)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(v){var g=this.scene.sys.cache.video.get(v);return g?(this.cacheKey=v,this.loadHandler(g.url,g.noAudio,g.crossOrigin)):console.warn("No video in cache for key: "+v),this},changeSource:function(v,g,T,w,b){g===void 0&&(g=!0),T===void 0&&(T=!1),this.cacheKey!==v&&(this.load(v),g&&this.play(T,w,b))},getVideoKey:function(){return this.cacheKey},loadURL:function(v,g,T){g===void 0&&(g=!1);var w=this._device.getVideoURL(v);return w?(this.cacheKey="",this.loadHandler(w.url,g,T)):console.warn("No supported video format found for "+v),this},loadMediaStream:function(v,g,T){return this.loadHandler(null,g,T,v)},loadHandler:function(v,g,T,w){g||(g=!1);var b=this.video;if(b?(this.removeLoadEventHandlers(),this.stop()):(b=document.createElement("video"),b.controls=!1,b.setAttribute("playsinline","playsinline"),b.setAttribute("preload","auto"),b.setAttribute("disablePictureInPicture","true")),g?(b.muted=!0,b.defaultMuted=!0,b.setAttribute("autoplay","autoplay")):(b.muted=!1,b.defaultMuted=!1,b.removeAttribute("autoplay")),T?b.setAttribute("crossorigin",T):b.removeAttribute("crossorigin"),w)if("srcObject"in b)try{b.srcObject=w}catch(E){if(E.name!=="TypeError")throw E;b.src=URL.createObjectURL(w)}else b.src=URL.createObjectURL(w);else b.src=v;return this.addLoadEventHandlers(),this.retry=0,this.video=b,this._playCalled=!1,b.load(),this},requestVideoFrame:function(v,g){var T=this.video;if(T){var w=g.width,b=g.height,E=this.videoTexture,A=this.videoTextureSource,R=!E||A.source!==T;R?(this._codePaused=T.paused,this._codeMuted=T.muted,E?(A.source=T,A.width=w,A.height=b,E.get().setSize(w,b)):(E=this.scene.sys.textures.create(this._key,T,w,b),E.add("__BASE",0,0,0,w,b),this.setTexture(E),this.videoTexture=E,this.videoTextureSource=E.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(r.VIDEO_TEXTURE,this,E)),this.setSizeToFrame(),this.updateDisplayOrigin()):A.update(),this.isStalled=!1,this.metadata=g;var I=g.mediaTime;R&&(this._lastUpdate=I,this.emit(r.VIDEO_CREATED,this,w,b),this.frameReady||(this.frameReady=!0,this.emit(r.VIDEO_PLAY,this))),this._playingMarker?I>=this._markerOut&&(T.loop?(T.currentTime=this._markerIn,this.emit(r.VIDEO_LOOP,this)):(this.stop(!1),this.emit(r.VIDEO_COMPLETE,this))):I<this._lastUpdate&&this.emit(r.VIDEO_LOOP,this),this._lastUpdate=I,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(v,g,T){g===void 0&&(g=-1),T===void 0&&(T=h.MAX_SAFE_INTEGER);var w=this.video;return!w||this.isPlaying()?(w||console.warn("Video not loaded"),this):(v===void 0&&(v=w.loop),w.loop=v,this._markerIn=g,this._markerOut=T,this._playingMarker=g>-1&&T>g&&T<h.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=w.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var v=this.video;v&&(v.addEventListener("error",this._loadCallbackHandler),v.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var v=this.video;v&&(v.removeEventListener("error",this._loadCallbackHandler),v.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var v=this.video;if(v){var g=this._callbacks;for(var T in g)v.addEventListener(T,g[T])}},removeEventHandlers:function(){var v=this.video;if(v){var g=this._callbacks;for(var T in g)v.removeEventListener(T,g[T])}},createPlayPromise:function(v){v===void 0&&(v=!0);var g=this.video,T=g.play();if(T!==void 0){var w=this.playSuccess.bind(this),b=this.playError.bind(this);if(!v){var E=this;b=function(){E.failedPlayAttempts++}}T.then(w).catch(b)}else g.addEventListener("playing",this._callbacks.legacy),v||this.failedPlayAttempts++},addMarker:function(v,g,T){return!isNaN(g)&&g>=0&&!isNaN(T)&&T>g&&(this.markers[v]=[g,T]),this},playMarker:function(v,g){var T=this.markers[v];return T&&this.play(g,T[0],T[1]),this},removeMarker:function(v){return delete this.markers[v],this},snapshot:function(v,g){return v===void 0&&(v=this.width),g===void 0&&(g=this.height),this.snapshotArea(0,0,this.width,this.height,v,g)},snapshotArea:function(v,g,T,w,b,E){v===void 0&&(v=0),g===void 0&&(g=0),T===void 0&&(T=this.width),w===void 0&&(w=this.height),b===void 0&&(b=T),E===void 0&&(E=w);var A=this.video,R=this.snapshotTexture;return R?(R.setSize(b,E),A&&R.context.drawImage(A,v,g,T,w,0,0,b,E)):(R=this.scene.sys.textures.createCanvas(u(),b,E),this.snapshotTexture=R,A&&R.context.drawImage(A,v,g,T,w,0,0,b,E)),R.update()},saveSnapshotTexture:function(v){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,v):this.snapshotTexture=this.scene.sys.textures.createCanvas(v,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(r.VIDEO_UNLOCKED,this));var v=this.scene.sys.sound;v&&v.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(v){var g=v.name;g==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(r.VIDEO_LOCKED,this)):g==="NotSupportedError"?(this.stop(!1),this.emit(r.VIDEO_UNSUPPORTED,this,v)):(this.stop(!1),this.emit(r.VIDEO_ERROR,this,v))},legacyPlayHandler:function(){var v=this.video;v&&(this.playSuccess(),v.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(r.VIDEO_PLAYING,this)},loadErrorHandler:function(v){this.stop(!1),this.emit(r.VIDEO_ERROR,this,v)},stalledHandler:function(v){this.isStalled=!0,this.emit(r.VIDEO_STALLED,this,v)},completeHandler:function(){this._playCalled=!1,this.emit(r.VIDEO_COMPLETE,this)},preUpdate:function(v,g){var T=this.video;!T||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=g,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(v){var g=this.video;if(g){var T=g.duration;if(T!==1/0&&!isNaN(T)){var w=T*v;this.setCurrentTime(w)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(v){var g=this.video;if(g){if(typeof v=="string"){var T=v[0],w=parseFloat(v.substr(1));T==="+"?v=g.currentTime+w:T==="-"&&(v=g.currentTime-w)}g.currentTime=v}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(r.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(r.VIDEO_SEEKED,this)},getProgress:function(){var v=this.video;if(v){var g=v.duration;if(g!==1/0&&!isNaN(g))return v.currentTime/g}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(v){v===void 0&&(v=!0),this._codeMuted=v;var g=this.video;return g&&(g.muted=this._systemMuted?!0:v),this},isMuted:function(){return this._codeMuted},globalMute:function(v,g){this._systemMuted=g;var T=this.video;T&&(T.muted=this._codeMuted?!0:g)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(v){v===void 0&&(v=!0);var g=this.video;return this._codePaused=v,g&&!g.ended&&(v?g.paused||(this.removeEventHandlers(),g.pause()):v||(this._playCalled?g.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(v){return v===void 0&&(v=1),this.video&&(this.video.volume=s(v,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(v){return this.video&&(this.video.playbackRate=v),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(v){return v===void 0&&(v=!0),this.video&&(this.video.loop=v),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(v,g){return g===void 0&&(g=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,v),this.videoTextureSource.setFlipY(g)),this._key=v,this.flipY=g,!!this.videoTexture},stop:function(v){v===void 0&&(v=!0);var g=this.video;return g&&(this.removeEventHandlers(),g.cancelVideoFrameCallback(this._rfvCallbackId),g.pause()),this.retry=0,this._playCalled=!1,v&&this.emit(r.VIDEO_STOP,this),this},removeVideoElement:function(){var v=this.video;if(v){for(v.parentNode&&v.parentNode.removeChild(v);v.hasChildNodes();)v.removeChild(v.firstChild);v.removeAttribute("autoplay"),v.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var v=this.scene.sys.game.events;v.off(i.PAUSE,this.globalPause,this),v.off(i.RESUME,this.globalResume,this);var g=this.scene.sys.sound;g&&g.off(d.GLOBAL_MUTE,this.globalMute,this)}});o.exports=m},56933:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){s.videoTexture&&(l.addToRenderList(s),t.batchSprite(s,s.frame,l,a))};o.exports=y},65601:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88933),l=t(99325),a=t(20494),r=t(8630);l.register("video",function(i,n){i===void 0&&(i={});var h=a(i,"key",null),d=new r(this.scene,0,0,h);return n!==void 0&&(i.add=n),s(this.scene,d,i),d})},215:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8630),l=t(61286);l.register("video",function(a,r,i){return this.displayList.add(new s(this.scene,a,r,i))})},77974:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(83572),a=t(56933),o.exports={renderWebGL:l,renderCanvas:a}},83572:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){s.videoTexture&&(l.addToRenderList(s),s.pipeline.batchSprite(s,l,a))};o.exports=y},71030:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(26673),a=t(65650),r=t(56694),i=t(64937),n=t(89980),h=t(74118),d=t(94287),u=new r({Extends:n,Mixins:[i.Depth,i.GetBounds,i.Origin,i.Transform,i.ScrollFactor,i.Visible],initialize:function(m,v,g,T,w){T===void 0&&(T=1),w===void 0&&(w=T),n.call(this,m,"Zone"),this.setPosition(v,g),this.width=T,this.height=w,this.blendMode=s.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(p){this.scaleX=p/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(p){this.scaleY=p/this.height}},setSize:function(p,m,v){v===void 0&&(v=!0),this.width=p,this.height=m,this.updateDisplayOrigin();var g=this.input;return v&&g&&!g.customHitArea&&(g.hitArea.width=p,g.hitArea.height=m),this},setDisplaySize:function(p,m){return this.displayWidth=p,this.displayHeight=m,this},setCircleDropZone:function(p){return this.setDropZone(new l(0,0,p),a)},setRectangleDropZone:function(p,m){return this.setDropZone(new h(0,0,p,m),d)},setDropZone:function(p,m){return this.input||this.setInteractive(p,m,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(p,m,v){v.addToRenderList(m)},renderWebGL:function(p,m,v){v.addToRenderList(m)}});o.exports=u},24067:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99325),l=t(20494),a=t(71030);s.register("zone",function(r){var i=l(r,"x",0),n=l(r,"y",0),h=l(r,"width",1),d=l(r,"height",h);return new a(this.scene,i,n,h,d)})},34546:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(71030),l=t(61286);l.register("zone",function(a,r,i,n){return this.displayList.add(new s(this.scene,a,r,i,n))})},95847:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0};o.exports=y},26673:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(65650),a=t(94026),r=t(62941),i=t(52394),n=t(30977),h=new s({initialize:function(u,p,m){u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=0),this.type=i.CIRCLE,this.x=u,this.y=p,this._radius=m,this._diameter=m*2},contains:function(d,u){return l(this,d,u)},getPoint:function(d,u){return a(this,d,u)},getPoints:function(d,u,p){return r(this,d,u,p)},getRandomPoint:function(d){return n(this,d)},setTo:function(d,u,p){return this.x=d,this.y=u,this._radius=p,this._diameter=p*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(d,u){return u===void 0&&(u=d),this.x=d,this.y=u,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this._diameter=d*2}},diameter:{get:function(){return this._diameter},set:function(d){this._diameter=d,this._radius=d*.5}},left:{get:function(){return this.x-this._radius},set:function(d){this.x=d+this._radius}},right:{get:function(){return this.x+this._radius},set:function(d){this.x=d-this._radius}},top:{get:function(){return this.y-this._radius},set:function(d){this.y=d+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(d){this.y=d-this._radius}}});o.exports=h},37964:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return 2*(Math.PI*t.radius)};o.exports=y},72233:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){return i===void 0&&(i=new s),i.x=a.x+a.radius*Math.cos(r),i.y=a.y+a.radius*Math.sin(r),i};o.exports=l},61761:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673),l=function(a){return new s(a.x,a.y,a.radius)};o.exports=l},65650:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(t.radius>0&&s>=t.left&&s<=t.right&&l>=t.top&&l<=t.bottom){var a=(t.x-s)*(t.x-s),r=(t.y-l)*(t.y-l);return a+r<=t.radius*t.radius}else return!1};o.exports=y},39187:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65650),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},58672:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65650),l=function(a,r){return s(a,r.x,r.y)&&s(a,r.right,r.y)&&s(a,r.x,r.bottom)&&s(a,r.right,r.bottom)};o.exports=l},42997:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s.setTo(t.x,t.y,t.radius)};o.exports=y},94894:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x===s.x&&t.y===s.y&&t.radius===s.radius};o.exports=y},48027:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r){return r===void 0&&(r=new s),r.x=a.left,r.y=a.top,r.width=a.diameter,r.height=a.diameter,r};o.exports=l},94026:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72233),l=t(91806),a=t(83392),r=t(79967),i=function(n,h,d){d===void 0&&(d=new r);var u=l(h,0,a.PI2);return s(n,u,d)};o.exports=i},62941:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(37964),l=t(72233),a=t(91806),r=t(83392),i=function(n,h,d,u){u===void 0&&(u=[]),!h&&d>0&&(h=s(n)/d);for(var p=0;p<h;p++){var m=a(p/h,0,r.PI2);u.push(l(n,m))}return u};o.exports=i},34585:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t.x+=s,t.y+=l,t};o.exports=y},88665:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x+=s.x,t.y+=s.y,t};o.exports=y},30977:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){r===void 0&&(r=new s);var i=2*Math.PI*Math.random(),n=Math.random()+Math.random(),h=n>1?2-n:n,d=h*Math.cos(i),u=h*Math.sin(i);return r.x=a.x+d*a.radius,r.y=a.y+u*a.radius,r};o.exports=l},6112:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673);s.Area=t(95847),s.Circumference=t(37964),s.CircumferencePoint=t(72233),s.Clone=t(61761),s.Contains=t(65650),s.ContainsPoint=t(39187),s.ContainsRect=t(58672),s.CopyFrom=t(42997),s.Equals=t(94894),s.GetBounds=t(48027),s.GetPoint=t(94026),s.GetPoints=t(62941),s.Offset=t(34585),s.OffsetPoint=t(88665),s.Random=t(30977),o.exports=s},52394:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};o.exports=y},58605:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI};o.exports=y},39507:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s=t.width/2,l=t.height/2,a=Math.pow(s-l,2)/Math.pow(s+l,2);return Math.PI*(s+l)*(1+3*a/(10+Math.sqrt(4-3*a)))};o.exports=y},86998:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){i===void 0&&(i=new s);var n=a.width/2,h=a.height/2;return i.x=a.x+n*Math.cos(r),i.y=a.y+h*Math.sin(r),i};o.exports=l},81773:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95669),l=function(a){return new s(a.x,a.y,a.width,a.height)};o.exports=l},72313:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(t.width<=0||t.height<=0)return!1;var a=(s-t.x)/t.width,r=(l-t.y)/t.height;return a*=a,r*=r,a+r<.25};o.exports=y},34368:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72313),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},71431:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72313),l=function(a,r){return s(a,r.x,r.y)&&s(a,r.right,r.y)&&s(a,r.x,r.bottom)&&s(a,r.right,r.bottom)};o.exports=l},75459:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s.setTo(t.x,t.y,t.width,t.height)};o.exports=y},95669:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72313),a=t(95340),r=t(54978),i=t(52394),n=t(72006),h=new s({initialize:function(u,p,m,v){u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),this.type=i.ELLIPSE,this.x=u,this.y=p,this.width=m,this.height=v},contains:function(d,u){return l(this,d,u)},getPoint:function(d,u){return a(this,d,u)},getPoints:function(d,u,p){return r(this,d,u,p)},getRandomPoint:function(d){return n(this,d)},setTo:function(d,u,p,m){return this.x=d,this.y=u,this.width=p,this.height=m,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(d,u){return u===void 0&&(u=d),this.x=d,this.y=u,this},setSize:function(d,u){return u===void 0&&(u=d),this.width=d,this.height=u,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(d){this.x=d+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(d){this.y=d+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});o.exports=h},98068:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height};o.exports=y},72897:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r){return r===void 0&&(r=new s),r.x=a.left,r.y=a.top,r.width=a.width,r.height=a.height,r};o.exports=l},95340:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86998),l=t(91806),a=t(83392),r=t(79967),i=function(n,h,d){d===void 0&&(d=new r);var u=l(h,0,a.PI2);return s(n,u,d)};o.exports=i},54978:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39507),l=t(86998),a=t(91806),r=t(83392),i=function(n,h,d,u){u===void 0&&(u=[]),!h&&d>0&&(h=s(n)/d);for(var p=0;p<h;p++){var m=a(p/h,0,r.PI2);u.push(l(n,m))}return u};o.exports=i},77951:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t.x+=s,t.y+=l,t};o.exports=y},36233:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x+=s.x,t.y+=s.y,t};o.exports=y},72006:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){r===void 0&&(r=new s);var i=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return r.x=a.x+n*Math.cos(i)*a.width/2,r.y=a.y+n*Math.sin(i)*a.height/2,r};o.exports=l},40652:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95669);s.Area=t(58605),s.Circumference=t(39507),s.CircumferencePoint=t(86998),s.Clone=t(81773),s.Contains=t(72313),s.ContainsPoint=t(34368),s.ContainsRect=t(71431),s.CopyFrom=t(75459),s.Equals=t(98068),s.GetBounds=t(72897),s.GetPoint=t(95340),s.GetPoints=t(54978),s.Offset=t(77951),s.OffsetPoint=t(36233),s.Random=t(72006),o.exports=s},84068:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(52394),l=t(98611),a={Circle:t(6112),Ellipse:t(40652),Intersects:t(7563),Line:t(28482),Mesh:t(14293),Point:t(63472),Polygon:t(44359),Rectangle:t(66658),Triangle:t(87619)};a=l(!1,a,s),o.exports=a},22184:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(53996),l=function(a,r){return s(a.x,a.y,r.x,r.y)<=a.radius+r.radius};o.exports=l},26535:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=s.width/2,a=s.height/2,r=Math.abs(t.x-s.x-l),i=Math.abs(t.y-s.y-a),n=l+t.radius,h=a+t.radius;if(r>n||i>h)return!1;if(r<=l||i<=a)return!0;var d=r-l,u=i-a,p=d*d,m=u*u,v=t.radius*t.radius;return p+m<=v};o.exports=y},71145:(o,y,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(22184),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=r.x,d=r.y,u=r.radius,p=i.x,m=i.y,v=i.radius,g,T,w,b,E;if(d===m)E=(v*v-u*u-p*p+h*h)/(2*(h-p)),g=1,T=-2*m,w=p*p+E*E-2*p*E+m*m-v*v,b=T*T-4*g*w,b===0?n.push(new s(E,-T/(2*g))):b>0&&(n.push(new s(E,(-T+Math.sqrt(b))/(2*g))),n.push(new s(E,(-T-Math.sqrt(b))/(2*g))));else{var A=(h-p)/(d-m),R=(v*v-u*u-p*p+h*h-m*m+d*d)/(2*(d-m));g=A*A+1,T=2*d*A-2*R*A-2*h,w=h*h+d*d+R*R-u*u-2*d*R,b=T*T-4*g*w,b===0?(E=-T/(2*g),n.push(new s(E,R-E*A))):b>0&&(E=(-T+Math.sqrt(b))/(2*g),n.push(new s(E,R-E*A)),E=(-T-Math.sqrt(b))/(2*g),n.push(new s(E,R-E*A)))}}return n};o.exports=a},62508:(o,y,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26111),l=t(26535),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=i.getLineA(),d=i.getLineB(),u=i.getLineC(),p=i.getLineD();s(h,r,n),s(d,r,n),s(u,r,n),s(p,r,n)}return n};o.exports=a},26111:(o,y,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(61472),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=r.x1,d=r.y1,u=r.x2,p=r.y2,m=i.x,v=i.y,g=i.radius,T=u-h,w=p-d,b=h-m,E=d-v,A=T*T+w*w,R=2*(T*b+w*E),I=b*b+E*E-g*g,P=R*R-4*A*I,N,F;if(P===0){var O=-R/(2*A);N=h+O*T,F=d+O*w,O>=0&&O<=1&&n.push(new s(N,F))}else if(P>0){var D=(-R-Math.sqrt(P))/(2*A);N=h+D*T,F=d+D*w,D>=0&&D<=1&&n.push(new s(N,F));var L=(-R+Math.sqrt(P))/(2*A);N=h+L*T,F=d+L*w,L>=0&&L<=1&&n.push(new s(N,F))}}return n};o.exports=a},96537:(o,y,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70015),l=function(a,r,i,n){i===void 0&&(i=!1);var h=a.x1,d=a.y1,u=a.x2,p=a.y2,m=r.x1,v=r.y1,g=r.x2,T=r.y2,w=u-h,b=p-d,E=g-m,A=T-v,R=w*A-b*E;if(R===0)return null;var I,P,N;if(i){if(I=(w*(v-d)+b*(h-m))/(E*b-A*w),P=(m+E*I-h)/w,P<0||I<0||I>1)return null;N=P}else{if(I=((m-h)*A-(v-d)*E)/R,P=((d-v)*w-(h-m)*b)/R,I<0||I>1||P<0||P>1)return null;N=I}return n===void 0&&(n=new s),n.set(h+w*N,d+b*N,N)};o.exports=l},17647:(o,y,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(96537),l=t(88829),a=t(70015),r=new l,i=new a,n=function(h,d,u,p){u===void 0&&(u=!1),p===void 0&&(p=new a);var m=!1;p.set(),i.set();for(var v=d[d.length-1],g=0;g<d.length;g++){var T=d[g];r.setTo(v.x,v.y,T.x,T.y),v=T,s(h,r,u,i)&&(!m||i.z<p.z)&&(p.copy(i),m=!0)}return m?p:null};o.exports=n},68439:(o,y,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70015),l=t(51729),a=t(17647),r=new s,i=function(n,h,d,u){u===void 0&&(u=new l),Array.isArray(h)||(h=[h]);var p=!1;u.set(),r.set();for(var m=0;m<h.length;m++)a(n,h[m].points,d,r)&&(!p||r.z<u.z)&&(u.set(r.x,r.y,r.z,m),p=!0);return p?u:null};o.exports=i},9569:(o,y,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(25227),a=t(47910),r=function(i,n,h){if(h===void 0&&(h=[]),a(i,n))for(var d=n.getLineA(),u=n.getLineB(),p=n.getLineC(),m=n.getLineD(),v=[new s,new s,new s,new s],g=[l(d,i,v[0]),l(u,i,v[1]),l(p,i,v[2]),l(m,i,v[3])],T=0;T<4;T++)g[T]&&h.push(v[T]);return h};o.exports=r},7449:(o,y,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(51729),l=t(68439),a=t(88829),r=new a;function i(d,u,p,m,v){var g=Math.cos(d),T=Math.sin(d);r.setTo(u,p,u+g,p+T);var w=l(r,m,!0);w&&v.push(new s(w.x,w.y,d,w.w))}function n(d,u){return d.z-u.z}var h=function(d,u,p){Array.isArray(p)||(p=[p]);for(var m=[],v=[],g=0;g<p.length;g++)for(var T=p[g].points,w=0;w<T.length;w++){var b=Math.atan2(T[w].y-u,T[w].x-d);v.indexOf(b)===-1&&(i(b,d,u,p,m),i(b-1e-5,d,u,p,m),i(b+1e-5,d,u,p,m),v.push(b))}return m.sort(n)};o.exports=h},82931:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(90205),a=function(r,i,n){return n===void 0&&(n=new s),l(r,i)&&(n.x=Math.max(r.x,i.x),n.y=Math.max(r.y,i.y),n.width=Math.min(r.right,i.right)-n.x,n.height=Math.min(r.bottom,i.bottom)-n.y),n};o.exports=a},1946:(o,y,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(9569),l=t(90205),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=r.getLineA(),d=r.getLineB(),u=r.getLineC(),p=r.getLineD();s(h,i,n),s(d,i,n),s(u,i,n),s(p,i,n)}return n};o.exports=a},34211:(o,y,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(20370),l=t(9569),a=function(r,i,n){if(n===void 0&&(n=[]),s(r,i)){var h=i.getLineA(),d=i.getLineB(),u=i.getLineC();l(h,r,n),l(d,r,n),l(u,r,n)}return n};o.exports=a},80511:(o,y,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26111),l=t(48411),a=function(r,i,n){if(n===void 0&&(n=[]),l(r,i)){var h=r.getLineA(),d=r.getLineB(),u=r.getLineC();s(h,i,n),s(d,i,n),s(u,i,n)}return n};o.exports=a},31343:(o,y,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(86117),a=t(25227),r=function(i,n,h){if(h===void 0&&(h=[]),l(i,n))for(var d=i.getLineA(),u=i.getLineB(),p=i.getLineC(),m=[new s,new s,new s],v=[a(d,n,m[0]),a(u,n,m[1]),a(p,n,m[2])],g=0;g<3;g++)v[g]&&h.push(m[g]);return h};o.exports=r},70534:(o,y,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(23589),l=t(31343),a=function(r,i,n){if(n===void 0&&(n=[]),s(r,i)){var h=i.getLineA(),d=i.getLineB(),u=i.getLineC();l(r,h,n),l(r,d,n),l(r,u,n)}return n};o.exports=a},61472:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65650),l=t(79967),a=new l,r=function(i,n,h){if(h===void 0&&(h=a),s(n,i.x1,i.y1))return h.x=i.x1,h.y=i.y1,!0;if(s(n,i.x2,i.y2))return h.x=i.x2,h.y=i.y2,!0;var d=i.x2-i.x1,u=i.y2-i.y1,p=n.x-i.x1,m=n.y-i.y1,v=d*d+u*u,g=d,T=u;if(v>0){var w=(p*d+m*u)/v;g*=w,T*=w}h.x=i.x1+g,h.y=i.y1+T;var b=g*g+T*T;return b<=v&&g*d+T*u>=0&&s(n,h.x,h.y)};o.exports=r},25227:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=t.x1,r=t.y1,i=t.x2,n=t.y2,h=s.x1,d=s.y1,u=s.x2,p=s.y2;if(a===i&&r===n||h===u&&d===p)return!1;var m=(p-d)*(i-a)-(u-h)*(n-r);if(m===0)return!1;var v=((u-h)*(r-d)-(p-d)*(a-h))/m,g=((i-a)*(r-d)-(n-r)*(a-h))/m;return v<0||v>1||g<0||g>1?!1:(l&&(l.x=a+v*(i-a),l.y=r+v*(n-r)),!0)};o.exports=y},47910:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.x1,a=t.y1,r=t.x2,i=t.y2,n=s.x,h=s.y,d=s.right,u=s.bottom,p=0;if(l>=n&&l<=d&&a>=h&&a<=u||r>=n&&r<=d&&i>=h&&i<=u)return!0;if(l<n&&r>=n){if(p=a+(i-a)*(n-l)/(r-l),p>h&&p<=u)return!0}else if(l>d&&r<=d&&(p=a+(i-a)*(d-l)/(r-l),p>=h&&p<=u))return!0;if(a<h&&i>=h){if(p=l+(r-l)*(h-a)/(i-a),p>=n&&p<=d)return!0}else if(a>u&&i<=u&&(p=l+(r-l)*(u-a)/(i-a),p>=n&&p<=d))return!0;return!1};o.exports=y},34426:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){l===void 0&&(l=1);var a=s.x1,r=s.y1,i=s.x2,n=s.y2,h=t.x,d=t.y,u=(i-a)*(i-a)+(n-r)*(n-r);if(u===0)return!1;var p=((h-a)*(i-a)+(d-r)*(n-r))/u;if(p<0)return Math.sqrt((a-h)*(a-h)+(r-d)*(r-d))<=l;if(p>=0&&p<=1){var m=((r-d)*(i-a)-(a-h)*(n-r))/u;return Math.abs(m)*Math.sqrt(u)<=l}else return Math.sqrt((i-h)*(i-h)+(n-d)*(n-d))<=l};o.exports=y},81414:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(34426),l=function(a,r){if(!s(a,r))return!1;var i=Math.min(r.x1,r.x2),n=Math.max(r.x1,r.x2),h=Math.min(r.y1,r.y2),d=Math.max(r.y1,r.y2);return a.x>=i&&a.x<=n&&a.y>=h&&a.y<=d};o.exports=l},90205:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.width<=0||t.height<=0||s.width<=0||s.height<=0?!1:!(t.right<s.x||t.bottom<s.y||t.x>s.right||t.y>s.bottom)};o.exports=y},20370:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25227),l=t(94287),a=t(86875),r=t(87279),i=function(n,h){if(h.left>n.right||h.right<n.left||h.top>n.bottom||h.bottom<n.top)return!1;var d=h.getLineA(),u=h.getLineB(),p=h.getLineC();if(l(n,d.x1,d.y1)||l(n,d.x2,d.y2)||l(n,u.x1,u.y1)||l(n,u.x2,u.y2)||l(n,p.x1,p.y1)||l(n,p.x2,p.y2))return!0;var m=n.getLineA(),v=n.getLineB(),g=n.getLineC(),T=n.getLineD();if(s(d,m)||s(d,v)||s(d,g)||s(d,T)||s(u,m)||s(u,v)||s(u,g)||s(u,T)||s(p,m)||s(p,v)||s(p,g)||s(p,T))return!0;var w=r(n),b=a(h,w,!0);return b.length>0};o.exports=i},8786:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r,i){return i===void 0&&(i=0),!(s>t.right+i||l<t.left-i||a>t.bottom+i||r<t.top-i)};o.exports=y},48411:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61472),l=t(60689),a=function(r,i){return r.left>i.right||r.right<i.left||r.top>i.bottom||r.bottom<i.top?!1:!!(l(r,i.x,i.y)||s(r.getLineA(),i)||s(r.getLineB(),i)||s(r.getLineC(),i))};o.exports=a},86117:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25227),l=function(a,r){return!!(a.contains(r.x1,r.y1)||a.contains(r.x2,r.y2)||s(a.getLineA(),r)||s(a.getLineB(),r)||s(a.getLineC(),r))};o.exports=l},23589:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86875),l=t(18680),a=t(25227),r=function(i,n){if(i.left>n.right||i.right<n.left||i.top>n.bottom||i.bottom<n.top)return!1;var h=i.getLineA(),d=i.getLineB(),u=i.getLineC(),p=n.getLineA(),m=n.getLineB(),v=n.getLineC();if(a(h,p)||a(h,m)||a(h,v)||a(d,p)||a(d,m)||a(d,v)||a(u,p)||a(u,m)||a(u,v))return!0;var g=l(i),T=s(n,g,!0);return T.length>0||(g=l(n),T=s(i,g,!0),T.length>0)};o.exports=r},7563:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CircleToCircle:t(22184),CircleToRectangle:t(26535),GetCircleToCircle:t(71145),GetCircleToRectangle:t(62508),GetLineToCircle:t(26111),GetLineToLine:t(96537),GetLineToPoints:t(17647),GetLineToPolygon:t(68439),GetLineToRectangle:t(9569),GetRaysFromPointToPolygon:t(7449),GetRectangleIntersection:t(82931),GetRectangleToRectangle:t(1946),GetRectangleToTriangle:t(34211),GetTriangleToCircle:t(80511),GetTriangleToLine:t(31343),GetTriangleToTriangle:t(70534),LineToCircle:t(61472),LineToLine:t(25227),LineToRectangle:t(47910),PointToLine:t(34426),PointToLineSegment:t(81414),RectangleToRectangle:t(90205),RectangleToTriangle:t(20370),RectangleToValues:t(8786),TriangleToCircle:t(48411),TriangleToLine:t(86117),TriangleToTriangle:t(23589)}},50599:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)};o.exports=y},58813:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){s===void 0&&(s=1),l===void 0&&(l=[]);var a=Math.round(t.x1),r=Math.round(t.y1),i=Math.round(t.x2),n=Math.round(t.y2),h=Math.abs(i-a),d=Math.abs(n-r),u=a<i?1:-1,p=r<n?1:-1,m=h-d;l.push({x:a,y:r});for(var v=1;!(a===i&&r===n);){var g=m<<1;g>-d&&(m-=d,a+=u),g<h&&(m+=h,r+=p),v%s===0&&l.push({x:a,y:r}),v++}return l};o.exports=y},88513:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=s-(t.x1+t.x2)/2,r=l-(t.y1+t.y2)/2;return t.x1+=a,t.y1+=r,t.x2+=a,t.y2+=r,t};o.exports=y},26718:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88829),l=function(a){return new s(a.x1,a.y1,a.x2,a.y2)};o.exports=l},88930:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s.setTo(t.x1,t.y1,t.x2,t.y2)};o.exports=y},90656:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x1===s.x1&&t.y1===s.y1&&t.x2===s.x2&&t.y2===s.y2};o.exports=y},30897:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=function(a,r,i){i===void 0&&(i=r);var n=s(a),h=a.x2-a.x1,d=a.y2-a.y1;return r&&(a.x1=a.x1-h/n*r,a.y1=a.y1-d/n*r),i&&(a.x2=a.x2+h/n*i,a.y2=a.y2+d/n*i),a};o.exports=l},30684:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92951),l=t(21902),a=t(79967),r=function(i,n,h,d,u){d===void 0&&(d=0),u===void 0&&(u=[]);var p=[],m=i.x1,v=i.y1,g=i.x2-m,T=i.y2-v,w=l(n,u),b,E,A=h-1;for(b=0;b<A;b++)E=w(b/A),p.push(new a(m+g*E,v+T*E));if(E=w(1),p.push(new a(m+g*E,v+T*E)),d>0){var R=p[0],I=[R];for(b=1;b<p.length-1;b++){var P=p[b];s(R,P)>=d&&(I.push(P),R=P)}var N=p[p.length-1];return s(R,N)<d&&I.pop(),I.push(N),I}else return p};o.exports=r},20487:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=(a.x1+a.x2)/2,r.y=(a.y1+a.y2)/2,r};o.exports=l},11222:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){i===void 0&&(i=new s);var n=a.x1,h=a.y1,d=a.x2,u=a.y2,p=(d-n)*(d-n)+(u-h)*(u-h);if(p===0)return i;var m=((r.x-n)*(d-n)+(r.y-h)*(u-h))/p;return i.x=n+m*(d-n),i.y=h+m*(u-h),i};o.exports=l},7377:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(50599),a=t(79967),r=function(i,n){n===void 0&&(n=new a);var h=l(i)-s.TAU;return n.x=Math.cos(h),n.y=Math.sin(h),n};o.exports=r},66464:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){return i===void 0&&(i=new s),i.x=a.x1+(a.x2-a.x1)*r,i.y=a.y1+(a.y2-a.y1)*r,i};o.exports=l},8570:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=t(79967),a=function(r,i,n,h){h===void 0&&(h=[]),!i&&n>0&&(i=s(r)/n);for(var d=r.x1,u=r.y1,p=r.x2,m=r.y2,v=0;v<i;v++){var g=v/i,T=d+(p-d)*g,w=u+(m-u)*g;h.push(new l(T,w))}return h};o.exports=a},65269:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.x1,a=t.y1,r=t.x2,i=t.y2,n=(r-l)*(r-l)+(i-a)*(i-a);if(n===0)return!1;var h=((a-s.y)*(r-l)-(l-s.x)*(i-a))/n;return Math.abs(h)*Math.sqrt(n)};o.exports=y},82996:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return Math.abs(t.y1-t.y2)};o.exports=y},16028:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))};o.exports=y},88829:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(66464),a=t(8570),r=t(52394),i=t(74077),n=t(93736),h=new s({initialize:function(u,p,m,v){u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),this.type=r.LINE,this.x1=u,this.y1=p,this.x2=m,this.y2=v},getPoint:function(d,u){return l(this,d,u)},getPoints:function(d,u,p){return a(this,d,u,p)},getRandomPoint:function(d){return i(this,d)},setTo:function(d,u,p,m){return d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=0),this.x1=d,this.y1=u,this.x2=p,this.y2=m,this},setFromObjects:function(d,u){return this.x1=d.x,this.y1=d.y,this.x2=u.x,this.y2=u.y,this},getPointA:function(d){return d===void 0&&(d=new n),d.set(this.x1,this.y1),d},getPointB:function(d){return d===void 0&&(d=new n),d.set(this.x2,this.y2),d},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(d){this.x1<=this.x2?this.x1=d:this.x2=d}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(d){this.x1>this.x2?this.x1=d:this.x2=d}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(d){this.y1<=this.y2?this.y1=d:this.y2=d}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(d){this.y1>this.y2?this.y1=d:this.y2=d}}});o.exports=h},73273:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(1071),a=t(50599),r=function(i){var n=a(i)-s.TAU;return l(n,-Math.PI,Math.PI)};o.exports=r},96936:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(50599),a=function(r){return Math.cos(l(r)-s.TAU)};o.exports=a},43581:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(50599),a=function(r){return Math.sin(l(r)-s.TAU)};o.exports=a},13990:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t.x1+=s,t.y1+=l,t.x2+=s,t.y2+=l,t};o.exports=y},1298:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return-((t.x2-t.x1)/(t.y2-t.y1))};o.exports=y},74077:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){r===void 0&&(r=new s);var i=Math.random();return r.x=a.x1+i*(a.x2-a.x1),r.y=a.y1+i*(a.y2-a.y1),r};o.exports=l},30473:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50599),l=t(73273),a=function(r,i){return 2*l(i)-Math.PI-s(r)};o.exports=a},25968:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1809),l=function(a,r){var i=(a.x1+a.x2)/2,n=(a.y1+a.y2)/2;return s(a,i,n,r)};o.exports=l},24296:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1809),l=function(a,r,i){return s(a,r.x,r.y,i)};o.exports=l},1809:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=Math.cos(a),i=Math.sin(a),n=t.x1-s,h=t.y1-l;return t.x1=n*r-h*i+s,t.y1=n*i+h*r+l,n=t.x2-s,h=t.y2-l,t.x2=n*r-h*i+s,t.y2=n*i+h*r+l,t};o.exports=y},88171:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r){return t.x1=s,t.y1=l,t.x2=s+Math.cos(a)*r,t.y2=l+Math.sin(a)*r,t};o.exports=y},82797:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return(t.y2-t.y1)/(t.x2-t.x1)};o.exports=y},41067:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return Math.abs(t.x1-t.x2)};o.exports=y},28482:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88829);s.Angle=t(50599),s.BresenhamPoints=t(58813),s.CenterOn=t(88513),s.Clone=t(26718),s.CopyFrom=t(88930),s.Equals=t(90656),s.Extend=t(30897),s.GetEasedPoints=t(30684),s.GetMidPoint=t(20487),s.GetNearestPoint=t(11222),s.GetNormal=t(7377),s.GetPoint=t(66464),s.GetPoints=t(8570),s.GetShortestDistance=t(65269),s.Height=t(82996),s.Length=t(16028),s.NormalAngle=t(73273),s.NormalX=t(96936),s.NormalY=t(43581),s.Offset=t(13990),s.PerpSlope=t(1298),s.Random=t(74077),s.ReflectAngle=t(30473),s.Rotate=t(25968),s.RotateAroundPoint=t(24296),s.RotateAroundXY=t(1809),s.SetToAngle=t(88171),s.Slope=t(82797),s.Width=t(41067),o.exports=s},18693:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(74118),a=t(93736);function r(n,h,d,u){var p=n-d,m=h-u,v=p*p+m*m;return Math.sqrt(v)}var i=new s({initialize:function(h,d,u){this.vertex1=h,this.vertex2=d,this.vertex3=u,this.bounds=new l,this._inCenter=new a},getInCenter:function(n){n===void 0&&(n=!0);var h=this.vertex1,d=this.vertex2,u=this.vertex3,p,m,v,g,T,w;n?(p=h.x,m=h.y,v=d.x,g=d.y,T=u.x,w=u.y):(p=h.vx,m=h.vy,v=d.vx,g=d.vy,T=u.vx,w=u.vy);var b=r(T,w,v,g),E=r(p,m,T,w),A=r(v,g,p,m),R=b+E+A;return this._inCenter.set((p*b+v*E+T*A)/R,(m*b+g*E+w*A)/R)},contains:function(n,h,d){var u=this.vertex1,p=this.vertex2,m=this.vertex3,v=u.vx,g=u.vy,T=p.vx,w=p.vy,b=m.vx,E=m.vy;if(d){var A=d.a,R=d.b,I=d.c,P=d.d,N=d.e,F=d.f;v=u.vx*A+u.vy*I+N,g=u.vx*R+u.vy*P+F,T=p.vx*A+p.vy*I+N,w=p.vx*R+p.vy*P+F,b=m.vx*A+m.vy*I+N,E=m.vx*R+m.vy*P+F}var O=b-v,D=E-g,L=T-v,z=w-g,X=n-v,H=h-g,J=O*O+D*D,G=O*L+D*z,k=O*X+D*H,M=L*L+z*z,B=L*X+z*H,U=J*M-G*G,W=U===0?0:1/U,K=(M*k-G*B)*W,q=(J*B-G*k)*W;return K>=0&&q>=0&&K+q<1},isCounterClockwise:function(n){var h=this.vertex1,d=this.vertex2,u=this.vertex3,p=(d.vx-h.vx)*(u.vy-h.vy)-(d.vy-h.vy)*(u.vx-h.vx);return n<=0?p>=0:p<0},load:function(n,h,d,u,p){return d=this.vertex1.load(n,h,d,u,p),d=this.vertex2.load(n,h,d,u,p),d=this.vertex3.load(n,h,d,u,p),d},transformCoordinatesLocal:function(n,h,d,u){return this.vertex1.transformCoordinatesLocal(n,h,d,u),this.vertex2.transformCoordinatesLocal(n,h,d,u),this.vertex3.transformCoordinatesLocal(n,h,d,u),this},updateBounds:function(){var n=this.vertex1,h=this.vertex2,d=this.vertex3,u=this.bounds;return u.x=Math.min(n.vx,h.vx,d.vx),u.y=Math.min(n.vy,h.vy,d.vy),u.width=Math.max(n.vx,h.vx,d.vx)-u.x,u.height=Math.max(n.vy,h.vy,d.vy)-u.y,this},isInView:function(n,h,d,u,p,m,v,g,T,w,b){this.update(u,p,m,v,g,T,w,b);var E=this.vertex1,A=this.vertex2,R=this.vertex3;if(E.ta<=0&&A.ta<=0&&R.ta<=0||h&&!this.isCounterClockwise(d))return!1;var I=this.bounds;I.x=Math.min(E.tx,A.tx,R.tx),I.y=Math.min(E.ty,A.ty,R.ty),I.width=Math.max(E.tx,A.tx,R.tx)-I.x,I.height=Math.max(E.ty,A.ty,R.ty)-I.y;var P=n.x+n.width,N=n.y+n.height;return I.width<=0||I.height<=0||n.width<=0||n.height<=0?!1:!(I.right<n.x||I.bottom<n.y||I.x>P||I.y>N)},scrollUV:function(n,h){return this.vertex1.scrollUV(n,h),this.vertex2.scrollUV(n,h),this.vertex3.scrollUV(n,h),this},scaleUV:function(n,h){return this.vertex1.scaleUV(n,h),this.vertex2.scaleUV(n,h),this.vertex3.scaleUV(n,h),this},setColor:function(n){return this.vertex1.color=n,this.vertex2.color=n,this.vertex3.color=n,this},update:function(n,h,d,u,p,m,v,g){return this.vertex1.update(h,d,u,p,m,v,g,n),this.vertex2.update(h,d,u,p,m,v,g,n),this.vertex3.update(h,d,u,p,m,v,g,n),this},translate:function(n,h){h===void 0&&(h=0);var d=this.vertex1,u=this.vertex2,p=this.vertex3;return d.x+=n,d.y+=h,u.x+=n,u.y+=h,p.x+=n,p.y+=h,this},x:{get:function(){return this.getInCenter().x},set:function(n){var h=this.getInCenter();this.translate(n-h.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(n){var h=this.getInCenter();this.translate(0,n-h.y)}},alpha:{get:function(){var n=this.vertex1,h=this.vertex2,d=this.vertex3;return(n.alpha+h.alpha+d.alpha)/3},set:function(n){this.vertex1.alpha=n,this.vertex2.alpha=n,this.vertex3.alpha=n}},depth:{get:function(){var n=this.vertex1,h=this.vertex2,d=this.vertex3;return(n.vz+h.vz+d.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});o.exports=i},99425:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18693),l=t(72632),a=t(16650),r=t(70015),i=t(85769),n=new r,h=new r,d=new a,u=function(p){var m=l(p,"mesh"),v=l(p,"texture",null),g=l(p,"frame"),T=l(p,"width",1),w=l(p,"height",T),b=l(p,"widthSegments",1),E=l(p,"heightSegments",b),A=l(p,"x",0),R=l(p,"y",0),I=l(p,"z",0),P=l(p,"rotateX",0),N=l(p,"rotateY",0),F=l(p,"rotateZ",0),O=l(p,"zIsUp",!0),D=l(p,"isOrtho",m?m.dirtyCache[11]:!1),L=l(p,"colors",[16777215]),z=l(p,"alphas",[1]),X=l(p,"tile",!1),H=l(p,"flipY",!1),J=l(p,"width",null),G={faces:[],verts:[]};n.set(A,R,I),h.set(P,N,F),d.fromRotationXYTranslation(h,n,O);var k;if(!v&&m)v=m.texture,g||(k=m.frame);else if(m&&typeof v=="string")v=m.scene.sys.textures.get(v);else if(!v)return G;k||(k=v.get(g)),!J&&D&&v&&m&&(T=k.width/m.height,w=k.height/m.height);var M=T/2,B=w/2,U=Math.floor(b),W=Math.floor(E),K=U+1,q=W+1,_=T/U,rt=w/W,ft=[],mt=[],vt,yt,xt=0,It=1,$t=0,Zt=1;k&&(xt=k.u0,It=k.u1,H?($t=k.v1,Zt=k.v0):($t=k.v0,Zt=k.v1));var Bt=It-xt,At=Zt-$t;for(yt=0;yt<q;yt++){var kt=yt*rt-B;for(vt=0;vt<K;vt++){var Ut=vt*_-M;mt.push(Ut,-kt);var ee=xt+Bt*(vt/U),te=$t+At*(yt/W);ft.push(ee,te)}}Array.isArray(L)||(L=[L]),Array.isArray(z)||(z=[z]);var fe=0,ae=0;for(yt=0;yt<W;yt++)for(vt=0;vt<U;vt++){var le=(vt+K*yt)*2,re=(vt+K*(yt+1))*2,we=(vt+1+K*(yt+1))*2,Se=(vt+1+K*yt)*2,Me=L[ae],ce=z[fe],se=new i(mt[le],mt[le+1],0,ft[le],ft[le+1],Me,ce).transformMat4(d),Ae=new i(mt[re],mt[re+1],0,ft[re],ft[re+1],Me,ce).transformMat4(d),Le=new i(mt[Se],mt[Se+1],0,ft[Se],ft[Se+1],Me,ce).transformMat4(d),nn=new i(mt[re],mt[re+1],0,ft[re],ft[re+1],Me,ce).transformMat4(d),ge=new i(mt[we],mt[we+1],0,ft[we],ft[we+1],Me,ce).transformMat4(d),Xe=new i(mt[Se],mt[Se+1],0,ft[Se],ft[Se+1],Me,ce).transformMat4(d);X&&(se.setUVs(xt,Zt),Ae.setUVs(xt,$t),Le.setUVs(It,Zt),nn.setUVs(xt,$t),ge.setUVs(It,$t),Xe.setUVs(It,Zt)),ae++,ae===L.length&&(ae=0),fe++,fe===z.length&&(fe=0),G.verts.push(se,Ae,Le,nn,ge,Xe),G.faces.push(new s(se,Ae,Le),new s(nn,ge,Xe))}return m&&(m.faces=m.faces.concat(G.faces),m.vertices=m.vertices.concat(G.verts)),G};o.exports=u},53267:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18693),l=t(16650),a=t(70015),r=t(85769),i=new a,n=new a,h=new l,d=function(u,p,m,v,g,T,w,b,E,A){m===void 0&&(m=1),v===void 0&&(v=0),g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=0),A===void 0&&(A=!0);var R={faces:[],verts:[]},I=u.materials;i.set(v,g,T),n.set(w,b,E),h.fromRotationXYTranslation(n,i,A);for(var P=0;P<u.models.length;P++)for(var N=u.models[P],F=N.vertices,O=N.textureCoords,D=N.faces,L=0;L<D.length;L++){var z=D[L],X=z.vertices[0],H=z.vertices[1],J=z.vertices[2],G=F[X.vertexIndex],k=F[H.vertexIndex],M=F[J.vertexIndex],B=X.textureCoordsIndex,U=H.textureCoordsIndex,W=J.textureCoordsIndex,K=B===-1?{u:0,v:1}:O[B],q=U===-1?{u:0,v:0}:O[U],_=W===-1?{u:1,v:1}:O[W],rt=16777215;z.material!==""&&I[z.material]&&(rt=I[z.material]);var ft=new r(G.x*m,G.y*m,G.z*m,K.u,K.v,rt).transformMat4(h),mt=new r(k.x*m,k.y*m,k.z*m,q.u,q.v,rt).transformMat4(h),vt=new r(M.x*m,M.y*m,M.z*m,_.u,_.v,rt).transformMat4(h);R.verts.push(ft,mt,vt),R.faces.push(new s(ft,mt,vt))}return p&&(p.faces=p.faces.concat(R.faces),p.vertices=p.vertices.concat(R.verts)),R};o.exports=d},67623:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18693),l=t(85769),a=function(r,i,n,h,d,u,p,m){if(h===void 0&&(h=!1),u===void 0&&(u=16777215),p===void 0&&(p=1),m===void 0&&(m=!1),r.length!==i.length&&!h){console.warn("GenerateVerts: vertices and uvs count not equal");return}var v={faces:[],vertices:[]},g,T,w,b,E,A,R,I,P,N,F,O=h?3:2,D=Array.isArray(u),L=Array.isArray(p);if(Array.isArray(n)&&n.length>0)for(g=0;g<n.length;g++){var z=n[g],X=n[g]*2,H=n[g]*O;T=r[H],w=r[H+1],b=h?r[H+2]:0,E=i[X],A=i[X+1],m&&(A=1-A),R=D?u[z]:u,I=L?p[z]:p,P=0,N=0,F=0,d&&(P=d[H],N=d[H+1],F=h?d[H+2]:0),v.vertices.push(new l(T,w,b,E,A,R,I,P,N,F))}else{var J=0,G=0;for(g=0;g<r.length;g+=O)T=r[g],w=r[g+1],b=h?r[g+2]:0,E=i[J],A=i[J+1],R=D?u[G]:u,I=L?p[G]:p,P=0,N=0,F=0,d&&(P=d[g],N=d[g+1],F=h?d[g+2]:0),v.vertices.push(new l(T,w,b,E,A,R,I,P,N,F)),J+=2,G++}for(g=0;g<v.vertices.length;g+=3){var k=v.vertices[g],M=v.vertices[g+1],B=v.vertices[g+2];v.faces.push(new s(k,M,B))}return v};o.exports=a},27291:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=!0,t="untitled",s="",l="";function a(T){var w=T.indexOf("#");return w>-1?T.substring(0,w):T}function r(T){return T.models.length===0&&T.models.push({faces:[],name:t,textureCoords:[],vertexNormals:[],vertices:[]}),s="",T.models[T.models.length-1]}function i(T,w){var b=T.length>=2?T[1]:t;w.models.push({faces:[],name:b,textureCoords:[],vertexNormals:[],vertices:[]}),s=""}function n(T){T.length===2&&(s=T[1])}function h(T,w){var b=T.length,E=b>=2?parseFloat(T[1]):0,A=b>=3?parseFloat(T[2]):0,R=b>=4?parseFloat(T[3]):0;r(w).vertices.push({x:E,y:A,z:R})}function d(T,w){var b=T.length,E=b>=2?parseFloat(T[1]):0,A=b>=3?parseFloat(T[2]):0,R=b>=4?parseFloat(T[3]):0;isNaN(E)&&(E=0),isNaN(A)&&(A=0),isNaN(R)&&(R=0),y&&(A=1-A),r(w).textureCoords.push({u:E,v:A,w:R})}function u(T,w){var b=T.length,E=b>=2?parseFloat(T[1]):0,A=b>=3?parseFloat(T[2]):0,R=b>=4?parseFloat(T[3]):0;r(w).vertexNormals.push({x:E,y:A,z:R})}function p(T,w){var b=T.length-1;if(!(b<3)){for(var E={group:s,material:l,vertices:[]},A=0;A<b;A++){var R=T[A+1],I=R.split("/"),P=I.length;if(!(P<1||P>3)){var N=0,F=0,O=0;N=parseInt(I[0],10),P>1&&I[1]!==""&&(F=parseInt(I[1],10)),P>2&&(O=parseInt(I[2],10)),N!==0&&(N<0&&(N=r(w).vertices.length+1+N),F-=1,N-=1,O-=1,E.vertices.push({textureCoordsIndex:F,vertexIndex:N,vertexNormalIndex:O}))}}r(w).faces.push(E)}}function m(T,w){T.length>=2&&w.materialLibraries.push(T[1])}function v(T){T.length>=2&&(l=T[1])}var g=function(T,w){w===void 0&&(w=!0),y=w;var b={materials:{},materialLibraries:[],models:[]};s="",l="";for(var E=T.split(`
`),A=0;A<E.length;A++){var R=a(E[A]),I=R.replace(/\s\s+/g," ").trim().split(" ");switch(I[0].toLowerCase()){case"o":i(I,b);break;case"g":n(I);break;case"v":h(I,b);break;case"vt":d(I,b);break;case"vn":u(I,b);break;case"f":p(I,b);break;case"mtllib":m(I,b);break;case"usemtl":v(I);break}}return b};o.exports=g},76799:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22946),l=function(a){for(var r={},i=a.split(`
`),n="",h=0;h<i.length;h++){var d=i[h].trim();if(!(d.indexOf("#")===0||d==="")){var u=d.replace(/\s\s+/g," ").trim().split(" ");switch(u[0].toLowerCase()){case"newmtl":{n=u[1];break}case"kd":{var p=Math.floor(u[1]*255),m=u.length>=2?Math.floor(u[2]*255):p,v=u.length>=3?Math.floor(u[3]*255):p;r[n]=s(p,m,v);break}}}}return r};o.exports=l},15313:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r,i;if(l===void 0&&a===void 0){var n=t.getInCenter();r=n.x,i=n.y}var h=Math.cos(s),d=Math.sin(s),u=t.vertex1,p=t.vertex2,m=t.vertex3,v=u.x-r,g=u.y-i;u.set(v*h-g*d+r,v*d+g*h+i),v=p.x-r,g=p.y-i,p.set(v*h-g*d+r,v*d+g*h+i),v=m.x-r,g=m.y-i,m.set(v*h-g*d+r,v*d+g*h+i)};o.exports=y},85769:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(75512),a=t(70015),r=new s({Extends:a,initialize:function(n,h,d,u,p,m,v,g,T,w){m===void 0&&(m=16777215),v===void 0&&(v=1),g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=0),a.call(this,n,h,d),this.vx=0,this.vy=0,this.vz=0,this.nx=g,this.ny=T,this.nz=w,this.u=u,this.v=p,this.color=m,this.alpha=v,this.tx=0,this.ty=0,this.ta=0,this.tu=u,this.tv=p},setUVs:function(i,n){return this.u=i,this.v=n,this.tu=i,this.tv=n,this},scrollUV:function(i,n){return this.tu+=i,this.tv+=n,this},scaleUV:function(i,n){return this.tu=this.u*i,this.tv=this.v*n,this},transformCoordinatesLocal:function(i,n,h,d){var u=this.x,p=this.y,m=this.z,v=i.val,g=u*v[0]+p*v[4]+m*v[8]+v[12],T=u*v[1]+p*v[5]+m*v[9]+v[13],w=u*v[2]+p*v[6]+m*v[10]+v[14],b=u*v[3]+p*v[7]+m*v[11]+v[15];this.vx=g/b*n,this.vy=-(T/b)*h,d<=0?this.vz=w/b:this.vz=-(w/b)},resize:function(i,n,h,d,u,p){return this.x=i,this.y=n,this.vx=this.x*h,this.vy=-this.y*d,this.vz=0,u<.5?this.vx+=h*(.5-u):u>.5&&(this.vx-=h*(u-.5)),p<.5?this.vy+=d*(.5-p):p>.5&&(this.vy-=d*(p-.5)),this},update:function(i,n,h,d,u,p,m,v){var g=this.vx*i+this.vy*h+u,T=this.vx*n+this.vy*d+p;return m&&(g=Math.round(g),T=Math.round(T)),this.tx=g,this.ty=T,this.ta=this.alpha*v,this},load:function(i,n,h,d,u){return i[++h]=this.tx,i[++h]=this.ty,i[++h]=this.tu,i[++h]=this.tv,i[++h]=d,i[++h]=u,n[++h]=l.getTintAppendFloatAlpha(this.color,this.ta),h}});o.exports=r},14293:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Face:t(18693),GenerateGridVerts:t(99425),GenerateObjVerts:t(53267),GenerateVerts:t(67623),ParseObj:t(27291),ParseObjMaterial:t(76799),RotateFace:t(15313),Vertex:t(85769)};o.exports=s},77601:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))};o.exports=y},38933:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a){return new s(a.x,a.y)};o.exports=l},47103:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s.setTo(t.x,t.y)};o.exports=y},13625:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x===s.x&&t.y===s.y};o.exports=y},12536:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))};o.exports=y},54205:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){if(r===void 0&&(r=new s),!Array.isArray(a))throw new Error("GetCentroid points argument must be an array");var i=a.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(i===1)r.x=a[0].x,r.y=a[0].y;else{for(var n=0;n<i;n++)r.x+=a[n].x,r.y+=a[n].y;r.x/=i,r.y/=i}return r};o.exports=l},50083:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)};o.exports=y},82712:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.x*t.x+t.y*t.y};o.exports=y},20052:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r){r===void 0&&(r=new s);for(var i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,u=0;u<a.length;u++){var p=a[u];p.x>i&&(i=p.x),p.x<n&&(n=p.x),p.y>h&&(h=p.y),p.y<d&&(d=p.y)}return r.x=n,r.y=d,r.width=i-n,r.height=h-d,r};o.exports=l},77154:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i,n){return i===void 0&&(i=0),n===void 0&&(n=new s),n.x=a.x+(r.x-a.x)*i,n.y=a.y+(r.y-a.y)*i,n};o.exports=l},42397:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.setTo(t.y,t.x)};o.exports=y},59464:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.setTo(-a.x,-a.y)};o.exports=l},79967:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(52394),a=new s({initialize:function(i,n){i===void 0&&(i=0),n===void 0&&(n=i),this.type=l.POINT,this.x=i,this.y=n},setTo:function(r,i){return r===void 0&&(r=0),i===void 0&&(i=r),this.x=r,this.y=i,this}});o.exports=a},53581:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(82712),a=function(r,i,n){n===void 0&&(n=new s);var h=r.x*i.x+r.y*i.y,d=h/l(i);return d!==0&&(n.x=d*i.x,n.y=d*i.y),n};o.exports=a},50817:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r,i){i===void 0&&(i=new s);var n=a.x*r.x+a.y*r.y;return n!==0&&(i.x=n*r.x,i.y=n*r.y),i};o.exports=l},40525:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50083),l=function(a,r){if(a.x!==0||a.y!==0){var i=s(a);a.x/=i,a.y/=i}return a.x*=r,a.y*=r,a};o.exports=l},63472:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967);s.Ceil=t(77601),s.Clone=t(38933),s.CopyFrom=t(47103),s.Equals=t(13625),s.Floor=t(12536),s.GetCentroid=t(54205),s.GetMagnitude=t(50083),s.GetMagnitudeSq=t(82712),s.GetRectangleFromPoints=t(20052),s.Interpolate=t(77154),s.Invert=t(42397),s.Negative=t(59464),s.Project=t(53581),s.ProjectUnit=t(50817),s.SetMagnitude=t(40525),o.exports=s},19631:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8580),l=function(a){return new s(a.points)};o.exports=l},45604:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){for(var a=!1,r=-1,i=t.points.length-1;++r<t.points.length;i=r){var n=t.points[r].x,h=t.points[r].y,d=t.points[i].x,u=t.points[i].y;(h<=l&&l<u||u<=l&&l<h)&&s<(d-n)*(l-h)/(u-h)+n&&(a=!a)}return a};o.exports=y},87289:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45604),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},11117:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(G,k,M){M=M||2;var B=k&&k.length,U=B?k[0]*M:G.length,W=t(G,0,U,M,!0),K=[];if(!W||W.next===W.prev)return K;var q,_,rt,ft,mt,vt,yt;if(B&&(W=h(G,k,W,M)),G.length>80*M){q=rt=G[0],_=ft=G[1];for(var xt=M;xt<U;xt+=M)mt=G[xt],vt=G[xt+1],mt<q&&(q=mt),vt<_&&(_=vt),mt>rt&&(rt=mt),vt>ft&&(ft=vt);yt=Math.max(rt-q,ft-_),yt=yt!==0?32767/yt:0}return l(W,K,M,q,_,yt,0),K}function t(G,k,M,B,U){var W,K;if(U===J(G,k,M,B)>0)for(W=k;W<M;W+=B)K=z(W,G[W],G[W+1],K);else for(W=M-B;W>=k;W-=B)K=z(W,G[W],G[W+1],K);return K&&R(K,K.next)&&(X(K),K=K.next),K}function s(G,k){if(!G)return G;k||(k=G);var M=G,B;do if(B=!1,!M.steiner&&(R(M,M.next)||A(M.prev,M,M.next)===0)){if(X(M),M=k=M.prev,M===M.next)break;B=!0}else M=M.next;while(B||M!==k);return k}function l(G,k,M,B,U,W,K){if(G){!K&&W&&v(G,B,U,W);for(var q=G,_,rt;G.prev!==G.next;){if(_=G.prev,rt=G.next,W?r(G,B,U,W):a(G)){k.push(_.i/M|0),k.push(G.i/M|0),k.push(rt.i/M|0),X(G),G=rt.next,q=rt.next;continue}if(G=rt,G===q){K?K===1?(G=i(s(G),k,M),l(G,k,M,B,U,W,2)):K===2&&n(G,k,M,B,U,W):l(s(G),k,M,B,U,W,1);break}}}}function a(G){var k=G.prev,M=G,B=G.next;if(A(k,M,B)>=0)return!1;for(var U=k.x,W=M.x,K=B.x,q=k.y,_=M.y,rt=B.y,ft=U<W?U<K?U:K:W<K?W:K,mt=q<_?q<rt?q:rt:_<rt?_:rt,vt=U>W?U>K?U:K:W>K?W:K,yt=q>_?q>rt?q:rt:_>rt?_:rt,xt=B.next;xt!==k;){if(xt.x>=ft&&xt.x<=vt&&xt.y>=mt&&xt.y<=yt&&b(U,q,W,_,K,rt,xt.x,xt.y)&&A(xt.prev,xt,xt.next)>=0)return!1;xt=xt.next}return!0}function r(G,k,M,B){var U=G.prev,W=G,K=G.next;if(A(U,W,K)>=0)return!1;for(var q=U.x,_=W.x,rt=K.x,ft=U.y,mt=W.y,vt=K.y,yt=q<_?q<rt?q:rt:_<rt?_:rt,xt=ft<mt?ft<vt?ft:vt:mt<vt?mt:vt,It=q>_?q>rt?q:rt:_>rt?_:rt,$t=ft>mt?ft>vt?ft:vt:mt>vt?mt:vt,Zt=T(yt,xt,k,M,B),Bt=T(It,$t,k,M,B),At=G.prevZ,kt=G.nextZ;At&&At.z>=Zt&&kt&&kt.z<=Bt;){if(At.x>=yt&&At.x<=It&&At.y>=xt&&At.y<=$t&&At!==U&&At!==K&&b(q,ft,_,mt,rt,vt,At.x,At.y)&&A(At.prev,At,At.next)>=0||(At=At.prevZ,kt.x>=yt&&kt.x<=It&&kt.y>=xt&&kt.y<=$t&&kt!==U&&kt!==K&&b(q,ft,_,mt,rt,vt,kt.x,kt.y)&&A(kt.prev,kt,kt.next)>=0))return!1;kt=kt.nextZ}for(;At&&At.z>=Zt;){if(At.x>=yt&&At.x<=It&&At.y>=xt&&At.y<=$t&&At!==U&&At!==K&&b(q,ft,_,mt,rt,vt,At.x,At.y)&&A(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;kt&&kt.z<=Bt;){if(kt.x>=yt&&kt.x<=It&&kt.y>=xt&&kt.y<=$t&&kt!==U&&kt!==K&&b(q,ft,_,mt,rt,vt,kt.x,kt.y)&&A(kt.prev,kt,kt.next)>=0)return!1;kt=kt.nextZ}return!0}function i(G,k,M){var B=G;do{var U=B.prev,W=B.next.next;!R(U,W)&&I(U,B,B.next,W)&&O(U,W)&&O(W,U)&&(k.push(U.i/M|0),k.push(B.i/M|0),k.push(W.i/M|0),X(B),X(B.next),B=G=W),B=B.next}while(B!==G);return s(B)}function n(G,k,M,B,U,W){var K=G;do{for(var q=K.next.next;q!==K.prev;){if(K.i!==q.i&&E(K,q)){var _=L(K,q);K=s(K,K.next),_=s(_,_.next),l(K,k,M,B,U,W,0),l(_,k,M,B,U,W,0);return}q=q.next}K=K.next}while(K!==G)}function h(G,k,M,B){var U=[],W,K,q,_,rt;for(W=0,K=k.length;W<K;W++)q=k[W]*B,_=W<K-1?k[W+1]*B:G.length,rt=t(G,q,_,B,!1),rt===rt.next&&(rt.steiner=!0),U.push(w(rt));for(U.sort(d),W=0;W<U.length;W++)M=u(U[W],M);return M}function d(G,k){return G.x-k.x}function u(G,k){var M=p(G,k);if(!M)return k;var B=L(M,G);return s(B,B.next),s(M,M.next)}function p(G,k){var M=k,B=G.x,U=G.y,W=-1/0,K;do{if(U<=M.y&&U>=M.next.y&&M.next.y!==M.y){var q=M.x+(U-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(q<=B&&q>W&&(W=q,K=M.x<M.next.x?M:M.next,q===B))return K}M=M.next}while(M!==k);if(!K)return null;var _=K,rt=K.x,ft=K.y,mt=1/0,vt;M=K;do B>=M.x&&M.x>=rt&&B!==M.x&&b(U<ft?B:W,U,rt,ft,U<ft?W:B,U,M.x,M.y)&&(vt=Math.abs(U-M.y)/(B-M.x),O(M,G)&&(vt<mt||vt===mt&&(M.x>K.x||M.x===K.x&&m(K,M)))&&(K=M,mt=vt)),M=M.next;while(M!==_);return K}function m(G,k){return A(G.prev,G,k.prev)<0&&A(k.next,G,G.next)<0}function v(G,k,M,B){var U=G;do U.z===0&&(U.z=T(U.x,U.y,k,M,B)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==G);U.prevZ.nextZ=null,U.prevZ=null,g(U)}function g(G){var k,M,B,U,W,K,q,_,rt=1;do{for(M=G,G=null,W=null,K=0;M;){for(K++,B=M,q=0,k=0;k<rt&&(q++,B=B.nextZ,!!B);k++);for(_=rt;q>0||_>0&&B;)q!==0&&(_===0||!B||M.z<=B.z)?(U=M,M=M.nextZ,q--):(U=B,B=B.nextZ,_--),W?W.nextZ=U:G=U,U.prevZ=W,W=U;M=B}W.nextZ=null,rt*=2}while(K>1);return G}function T(G,k,M,B,U){return G=(G-M)*U|0,k=(k-B)*U|0,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,G|k<<1}function w(G){var k=G,M=G;do(k.x<M.x||k.x===M.x&&k.y<M.y)&&(M=k),k=k.next;while(k!==G);return M}function b(G,k,M,B,U,W,K,q){return(U-K)*(k-q)>=(G-K)*(W-q)&&(G-K)*(B-q)>=(M-K)*(k-q)&&(M-K)*(W-q)>=(U-K)*(B-q)}function E(G,k){return G.next.i!==k.i&&G.prev.i!==k.i&&!F(G,k)&&(O(G,k)&&O(k,G)&&D(G,k)&&(A(G.prev,G,k.prev)||A(G,k.prev,k))||R(G,k)&&A(G.prev,G,G.next)>0&&A(k.prev,k,k.next)>0)}function A(G,k,M){return(k.y-G.y)*(M.x-k.x)-(k.x-G.x)*(M.y-k.y)}function R(G,k){return G.x===k.x&&G.y===k.y}function I(G,k,M,B){var U=N(A(G,k,M)),W=N(A(G,k,B)),K=N(A(M,B,G)),q=N(A(M,B,k));return!!(U!==W&&K!==q||U===0&&P(G,M,k)||W===0&&P(G,B,k)||K===0&&P(M,G,B)||q===0&&P(M,k,B))}function P(G,k,M){return k.x<=Math.max(G.x,M.x)&&k.x>=Math.min(G.x,M.x)&&k.y<=Math.max(G.y,M.y)&&k.y>=Math.min(G.y,M.y)}function N(G){return G>0?1:G<0?-1:0}function F(G,k){var M=G;do{if(M.i!==G.i&&M.next.i!==G.i&&M.i!==k.i&&M.next.i!==k.i&&I(M,M.next,G,k))return!0;M=M.next}while(M!==G);return!1}function O(G,k){return A(G.prev,G,G.next)<0?A(G,k,G.next)>=0&&A(G,G.prev,k)>=0:A(G,k,G.prev)<0||A(G,G.next,k)<0}function D(G,k){var M=G,B=!1,U=(G.x+k.x)/2,W=(G.y+k.y)/2;do M.y>W!=M.next.y>W&&M.next.y!==M.y&&U<(M.next.x-M.x)*(W-M.y)/(M.next.y-M.y)+M.x&&(B=!B),M=M.next;while(M!==G);return B}function L(G,k){var M=new H(G.i,G.x,G.y),B=new H(k.i,k.x,k.y),U=G.next,W=k.prev;return G.next=k,k.prev=G,M.next=U,U.prev=M,B.next=M,M.prev=B,W.next=B,B.prev=W,B}function z(G,k,M,B){var U=new H(G,k,M);return B?(U.next=B.next,U.prev=B,B.next.prev=U,B.next=U):(U.prev=U,U.next=U),U}function X(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function H(G,k,M){this.i=G,this.x=k,this.y=M,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}y.deviation=function(G,k,M,B){var U=k&&k.length,W=U?k[0]*M:G.length,K=Math.abs(J(G,0,W,M));if(U)for(var q=0,_=k.length;q<_;q++){var rt=k[q]*M,ft=q<_-1?k[q+1]*M:G.length;K-=Math.abs(J(G,rt,ft,M))}var mt=0;for(q=0;q<B.length;q+=3){var vt=B[q]*M,yt=B[q+1]*M,xt=B[q+2]*M;mt+=Math.abs((G[vt]-G[xt])*(G[yt+1]-G[vt+1])-(G[vt]-G[yt])*(G[xt+1]-G[vt+1]))}return K===0&&mt===0?0:Math.abs((mt-K)/K)};function J(G,k,M,B){for(var U=0,W=k,K=M-B;W<M;W+=B)U+=(G[K]-G[W])*(G[W+1]+G[K+1]),K=W;return U}y.flatten=function(G){for(var k=G[0][0].length,M={vertices:[],holes:[],dimensions:k},B=0,U=0;U<G.length;U++){for(var W=0;W<G[U].length;W++)for(var K=0;K<k;K++)M.vertices.push(G[U][W][K]);U>0&&(B+=G[U-1].length,M.holes.push(B))}return M},o.exports=y},14045:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r){r===void 0&&(r=new s);for(var i=1/0,n=1/0,h=-i,d=-n,u,p=0;p<a.points.length;p++)u=a.points[p],i=Math.min(i,u.x),n=Math.min(n,u.y),h=Math.max(h,u.x),d=Math.max(d,u.y);return r.x=i,r.y=n,r.width=h-i,r.height=d-n,r};o.exports=l},98286:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s=[]);for(var l=0;l<t.points.length;l++)s.push(t.points[l].x),s.push(t.points[l].y);return s};o.exports=y},89294:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=t(88829),a=t(5159),r=function(i,n,h,d){d===void 0&&(d=[]);var u=i.points,p=a(i);!n&&h>0&&(n=p/h);for(var m=0;m<n;m++)for(var v=p*(m/n),g=0,T=0;T<u.length;T++){var w=u[T],b=u[(T+1)%u.length],E=new l(w.x,w.y,b.x,b.y),A=s(E);if(v<g||v>g+A){g+=A;continue}var R=E.getPoint((v-g)/A);d.push(R);break}return d};o.exports=r},5159:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=t(88829),a=function(r){for(var i=r.points,n=0,h=0;h<i.length;h++){var d=i[h],u=i[(h+1)%i.length],p=new l(d.x,d.y,u.x,u.y);n+=s(p)}return n};o.exports=a},8580:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(45604),a=t(89294),r=t(52394),i=new s({initialize:function(h){this.type=r.POLYGON,this.area=0,this.points=[],h&&this.setTo(h)},contains:function(n,h){return l(this,n,h)},setTo:function(n){if(this.area=0,this.points=[],typeof n=="string"&&(n=n.split(" ")),!Array.isArray(n))return this;for(var h,d=0;d<n.length;d++)h={x:0,y:0},typeof n[d]=="number"||typeof n[d]=="string"?(h.x=parseFloat(n[d]),h.y=parseFloat(n[d+1]),d++):Array.isArray(n[d])?(h.x=n[d][0],h.y=n[d][1]):(h.x=n[d].x,h.y=n[d].y),this.points.push(h);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var n=0,h,d,u=0;u<this.points.length-1;u++)h=this.points[u],d=this.points[u+1],n+=(d.x-h.x)*(h.y+d.y);return h=this.points[0],d=this.points[this.points.length-1],n+=(h.x-d.x)*(d.y+h.y),this.area=-n*.5,this.area},getPoints:function(n,h,d){return a(this,n,h,d)}});o.exports=i},32244:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.points.reverse(),t};o.exports=y},95874:o=>{function y(i,n){var h=i.x-n.x,d=i.y-n.y;return h*h+d*d}function t(i,n,h){var d=n.x,u=n.y,p=h.x-d,m=h.y-u;if(p!==0||m!==0){var v=((i.x-d)*p+(i.y-u)*m)/(p*p+m*m);v>1?(d=h.x,u=h.y):v>0&&(d+=p*v,u+=m*v)}return p=i.x-d,m=i.y-u,p*p+m*m}function s(i,n){for(var h=i[0],d=[h],u,p=1,m=i.length;p<m;p++)u=i[p],y(u,h)>n&&(d.push(u),h=u);return h!==u&&d.push(u),d}function l(i,n,h,d,u){for(var p=d,m,v=n+1;v<h;v++){var g=t(i[v],i[n],i[h]);g>p&&(m=v,p=g)}p>d&&(m-n>1&&l(i,n,m,d,u),u.push(i[m]),h-m>1&&l(i,m,h,d,u))}function a(i,n){var h=i.length-1,d=[i[0]];return l(i,0,h,n,d),d.push(i[h]),d}var r=function(i,n,h){n===void 0&&(n=1),h===void 0&&(h=!1);var d=i.points;if(d.length>2){var u=n*n;h||(d=s(d,u)),i.setTo(a(d,u))}return i};o.exports=r},18974:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(s,l){return s[0]=l[0],s[1]=l[1],s},t=function(s){var l,a=[],r=s.points;for(l=0;l<r.length;l++)a.push([r[l].x,r[l].y]);var i=[];for(a.length>0&&i.push(y([0,0],a[0])),l=0;l<a.length-1;l++){var n=a[l],h=a[l+1],d=n[0],u=n[1],p=h[0],m=h[1];i.push([.85*d+.15*p,.85*u+.15*m]),i.push([.15*d+.85*p,.15*u+.85*m])}return a.length>1&&i.push(y([0,0],a[a.length-1])),s.setTo(i)};o.exports=t},23490:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){for(var a=t.points,r=0;r<a.length;r++)a[r].x+=s,a[r].y+=l;return t};o.exports=y},44359:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8580);s.Clone=t(19631),s.Contains=t(45604),s.ContainsPoint=t(87289),s.Earcut=t(11117),s.GetAABB=t(14045),s.GetNumberArray=t(98286),s.GetPoints=t(89294),s.Perimeter=t(5159),s.Reverse=t(32244),s.Simplify=t(95874),s.Smooth=t(18974),s.Translate=t(23490),o.exports=s},1653:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.width*t.height};o.exports=y},33943:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t};o.exports=y},58662:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t};o.exports=y},79993:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t.x=s-t.width/2,t.y=l-t.height/2,t};o.exports=y},81572:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a){return new s(a.x,a.y,a.width,a.height)};o.exports=l},94287:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t.width<=0||t.height<=0?!1:t.x<=s&&t.x+t.width>=s&&t.y<=l&&t.y+t.height>=l};o.exports=y},28687:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(94287),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},73222:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s.width*s.height>t.width*t.height?!1:s.x>t.x&&s.x<t.right&&s.right>t.x&&s.right<t.right&&s.y>t.y&&s.y<t.bottom&&s.bottom>t.y&&s.bottom<t.bottom};o.exports=y},29538:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s.setTo(t.x,t.y,t.width,t.height)};o.exports=y},87279:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s=[]),s.push({x:t.x,y:t.y}),s.push({x:t.right,y:t.y}),s.push({x:t.right,y:t.bottom}),s.push({x:t.x,y:t.bottom}),s};o.exports=y},19989:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height};o.exports=y},92628:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6700),l=function(a,r){var i=s(a);return i<s(r)?a.setSize(r.height*i,r.height):a.setSize(r.width,r.width/i),a.setPosition(r.centerX-a.width/2,r.centerY-a.height/2)};o.exports=l},85028:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6700),l=function(a,r){var i=s(a);return i>s(r)?a.setSize(r.height*i,r.height):a.setSize(r.width,r.width/i),a.setPosition(r.centerX-a.width/2,r.centerY-a.height/2)};o.exports=l},71356:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t};o.exports=y},21687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t};o.exports=y},80222:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(83392),a=function(r,i){if(i===void 0&&(i=new s),r.length===0)return i;for(var n=Number.MAX_VALUE,h=Number.MAX_VALUE,d=l.MIN_SAFE_INTEGER,u=l.MIN_SAFE_INTEGER,p,m,v,g=0;g<r.length;g++)p=r[g],Array.isArray(p)?(m=p[0],v=p[1]):(m=p.x,v=p.y),n=Math.min(n,m),h=Math.min(h,v),d=Math.max(d,m),u=Math.max(u,v);return i.x=n,i.y=h,i.width=d-n,i.height=u-h,i};o.exports=a},75785:(o,y,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r,i,n,h){return h===void 0&&(h=new s),h.setTo(Math.min(a,i),Math.min(r,n),Math.abs(a-i),Math.abs(r-n))};o.exports=l},6700:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.height===0?NaN:t.width/t.height};o.exports=y},35242:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=a.centerX,r.y=a.centerY,r};o.exports=l},47698:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85876),l=t(79967),a=function(r,i,n){if(n===void 0&&(n=new l),i<=0||i>=1)return n.x=r.x,n.y=r.y,n;var h=s(r)*i;return i>.5?(h-=r.width+r.height,h<=r.width?(n.x=r.right-h,n.y=r.bottom):(n.x=r.x,n.y=r.bottom-(h-r.width))):h<=r.width?(n.x=r.x+h,n.y=r.y):(n.x=r.right,n.y=r.y+(h-r.width)),n};o.exports=a},54932:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47698),l=t(85876),a=function(r,i,n,h){h===void 0&&(h=[]),!i&&n>0&&(i=l(r)/n);for(var d=0;d<i;d++){var u=d/i;h.push(s(r,u))}return h};o.exports=a},31591:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=a.width,r.y=a.height,r};o.exports=l},7782:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79993),l=function(a,r,i){var n=a.centerX,h=a.centerY;return a.setSize(a.width+r*2,a.height+i*2),s(a,n,h)};o.exports=l},66217:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(90205),a=function(r,i,n){return n===void 0&&(n=new s),l(r,i)?(n.x=Math.max(r.x,i.x),n.y=Math.max(r.y,i.y),n.width=Math.min(r.right,i.right)-n.x,n.height=Math.min(r.bottom,i.bottom)-n.y):n.setEmpty(),n};o.exports=a},40053:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85876),l=t(79967),a=function(r,i,n,h){if(h===void 0&&(h=[]),!i&&!n)return h;i?n=Math.round(s(r)/i):i=s(r)/n;for(var d=r.x,u=r.y,p=0,m=0;m<n;m++)switch(h.push(new l(d,u)),p){case 0:d+=i,d>=r.right&&(p=1,u+=d-r.right,d=r.right);break;case 1:u+=i,u>=r.bottom&&(p=2,d-=u-r.bottom,u=r.bottom);break;case 2:d-=i,d<=r.left&&(p=3,u-=r.left-d,d=r.left);break;case 3:u-=i,u<=r.top&&(p=0,u=r.top);break}return h};o.exports=a},86673:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){for(var l=t.x,a=t.right,r=t.y,i=t.bottom,n=0;n<s.length;n++)l=Math.min(l,s[n].x),a=Math.max(a,s[n].x),r=Math.min(r,s[n].y),i=Math.max(i,s[n].y);return t.x=l,t.y=r,t.width=a-l,t.height=i-r,t};o.exports=y},14655:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=Math.min(t.x,s.x),a=Math.max(t.right,s.right);t.x=l,t.width=a-l;var r=Math.min(t.y,s.y),i=Math.max(t.bottom,s.bottom);return t.y=r,t.height=i-r,t};o.exports=y},44755:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=Math.min(t.x,s),r=Math.max(t.right,s);t.x=a,t.width=r-a;var i=Math.min(t.y,l),n=Math.max(t.bottom,l);return t.y=i,t.height=n-i,t};o.exports=y},74466:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t.x+=s,t.y+=l,t};o.exports=y},55946:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x+=s.x,t.y+=s.y,t};o.exports=y},97474:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x<s.right&&t.right>s.x&&t.y<s.bottom&&t.bottom>s.y};o.exports=y},85876:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return 2*(t.width+t.height)};o.exports=y},20243:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(75606),a=function(r,i,n){n===void 0&&(n=new s),i=l(i);var h=Math.sin(i),d=Math.cos(i),u=d>0?r.width/2:r.width/-2,p=h>0?r.height/2:r.height/-2;return Math.abs(u*h)<Math.abs(p*d)?p=u*h/d:u=p*d/h,n.x=u+r.centerX,n.y=p+r.centerY,n};o.exports=a},30001:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=a.x+Math.random()*a.width,r.y=a.y+Math.random()*a.height,r};o.exports=l},97691:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17489),l=t(73222),a=t(79967),r=function(i,n,h){if(h===void 0&&(h=new a),l(i,n))switch(s(0,3)){case 0:h.x=i.x+Math.random()*(n.right-i.x),h.y=i.y+Math.random()*(n.top-i.y);break;case 1:h.x=n.x+Math.random()*(i.right-n.x),h.y=n.bottom+Math.random()*(i.bottom-n.bottom);break;case 2:h.x=i.x+Math.random()*(n.x-i.x),h.y=n.y+Math.random()*(i.bottom-n.y);break;case 3:h.x=n.right+Math.random()*(i.right-n.right),h.y=i.y+Math.random()*(n.bottom-i.y);break}return h};o.exports=r},74118:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(94287),a=t(47698),r=t(54932),i=t(52394),n=t(88829),h=t(30001),d=new s({initialize:function(p,m,v,g){p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),g===void 0&&(g=0),this.type=i.RECTANGLE,this.x=p,this.y=m,this.width=v,this.height=g},contains:function(u,p){return l(this,u,p)},getPoint:function(u,p){return a(this,u,p)},getPoints:function(u,p,m){return r(this,u,p,m)},getRandomPoint:function(u){return h(this,u)},setTo:function(u,p,m,v){return this.x=u,this.y=p,this.width=m,this.height=v,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(u,p){return p===void 0&&(p=u),this.x=u,this.y=p,this},setSize:function(u,p){return p===void 0&&(p=u),this.width=u,this.height=p,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(u){return u===void 0&&(u=new n),u.setTo(this.x,this.y,this.right,this.y),u},getLineB:function(u){return u===void 0&&(u=new n),u.setTo(this.right,this.y,this.right,this.bottom),u},getLineC:function(u){return u===void 0&&(u=new n),u.setTo(this.right,this.bottom,this.x,this.bottom),u},getLineD:function(u){return u===void 0&&(u=new n),u.setTo(this.x,this.bottom,this.x,this.y),u},left:{get:function(){return this.x},set:function(u){u>=this.right?this.width=0:this.width=this.right-u,this.x=u}},right:{get:function(){return this.x+this.width},set:function(u){u<=this.x?this.width=0:this.width=u-this.x}},top:{get:function(){return this.y},set:function(u){u>=this.bottom?this.height=0:this.height=this.bottom-u,this.y=u}},bottom:{get:function(){return this.y+this.height},set:function(u){u<=this.y?this.height=0:this.height=u-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});o.exports=d},51828:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.width===s.width&&t.height===s.height};o.exports=y},5691:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return l===void 0&&(l=s),t.width*=s,t.height*=l,t};o.exports=y},58795:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=function(a,r,i){i===void 0&&(i=new s);var n=Math.min(a.x,r.x),h=Math.min(a.y,r.y),d=Math.max(a.right,r.right)-n,u=Math.max(a.bottom,r.bottom)-h;return i.setTo(n,h,d,u)};o.exports=l},66658:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118);s.Area=t(1653),s.Ceil=t(33943),s.CeilAll=t(58662),s.CenterOn=t(79993),s.Clone=t(81572),s.Contains=t(94287),s.ContainsPoint=t(28687),s.ContainsRect=t(73222),s.CopyFrom=t(29538),s.Decompose=t(87279),s.Equals=t(19989),s.FitInside=t(92628),s.FitOutside=t(85028),s.Floor=t(71356),s.FloorAll=t(21687),s.FromPoints=t(80222),s.FromXY=t(75785),s.GetAspectRatio=t(6700),s.GetCenter=t(35242),s.GetPoint=t(47698),s.GetPoints=t(54932),s.GetSize=t(31591),s.Inflate=t(7782),s.Intersection=t(66217),s.MarchingAnts=t(40053),s.MergePoints=t(86673),s.MergeRect=t(14655),s.MergeXY=t(44755),s.Offset=t(74466),s.OffsetPoint=t(55946),s.Overlaps=t(97474),s.Perimeter=t(85876),s.PerimeterPoint=t(20243),s.Random=t(30001),s.RandomOutside=t(97691),s.SameDimensions=t(51828),s.Scale=t(5691),s.Union=t(58795),o.exports=s},19108:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s=t.x1,l=t.y1,a=t.x2,r=t.y2,i=t.x3,n=t.y3;return Math.abs(((i-s)*(r-l)-(a-s)*(n-l))/2)};o.exports=y},41199:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66349),l=function(a,r,i){var n=i*(Math.sqrt(3)/2),h=a,d=r,u=a+i/2,p=r+n,m=a-i/2,v=r+n;return new s(h,d,u,p,m,v)};o.exports=l},88730:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(11117),l=t(66349),a=function(r,i,n,h,d){i===void 0&&(i=null),n===void 0&&(n=1),h===void 0&&(h=1),d===void 0&&(d=[]);for(var u=s(r,i),p,m,v,g,T,w,b,E,A,R=0;R<u.length;R+=3)p=u[R],m=u[R+1],v=u[R+2],g=r[p*2]*n,T=r[p*2+1]*h,w=r[m*2]*n,b=r[m*2+1]*h,E=r[v*2]*n,A=r[v*2+1]*h,d.push(new l(g,T,w,b,E,A));return d};o.exports=a},3635:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66349),l=function(a,r,i,n){n===void 0&&(n=i);var h=a,d=r,u=a,p=r-n,m=a+i,v=r;return new s(h,d,u,p,m,v)};o.exports=l},1882:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56595),l=t(9640),a=function(r,i,n,h){h===void 0&&(h=s);var d=h(r),u=i-d.x,p=n-d.y;return l(r,u,p)};o.exports=a},56595:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){return r===void 0&&(r=new s),r.x=(a.x1+a.x2+a.x3)/3,r.y=(a.y1+a.y2+a.y3)/3,r};o.exports=l},91835:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736);function l(r,i,n,h){return r*h-i*n}var a=function(r,i){i===void 0&&(i=new s);var n=r.x3,h=r.y3,d=r.x1-n,u=r.y1-h,p=r.x2-n,m=r.y2-h,v=2*l(d,u,p,m),g=l(u,d*d+u*u,m,p*p+m*m),T=l(d,d*d+u*u,p,p*p+m*m);return i.x=n-g/v,i.y=h+T/v,i};o.exports=a},97073:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673),l=function(a,r){r===void 0&&(r=new s);var i=a.x1,n=a.y1,h=a.x2,d=a.y2,u=a.x3,p=a.y3,m=h-i,v=d-n,g=u-i,T=p-n,w=m*(i+h)+v*(n+d),b=g*(i+u)+T*(n+p),E=2*(m*(p-d)-v*(u-h)),A,R;if(Math.abs(E)<1e-6){var I=Math.min(i,h,u),P=Math.min(n,d,p);A=(Math.max(i,h,u)-I)*.5,R=(Math.max(n,d,p)-P)*.5,r.x=I+A,r.y=P+R,r.radius=Math.sqrt(A*A+R*R)}else r.x=(T*w-v*b)/E,r.y=(m*b-g*w)/E,A=r.x-i,R=r.y-n,r.radius=Math.sqrt(A*A+R*R);return r};o.exports=l},75974:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66349),l=function(a){return new s(a.x1,a.y1,a.x2,a.y2,a.x3,a.y3)};o.exports=l},60689:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=t.x3-t.x1,r=t.y3-t.y1,i=t.x2-t.x1,n=t.y2-t.y1,h=s-t.x1,d=l-t.y1,u=a*a+r*r,p=a*i+r*n,m=a*h+r*d,v=i*i+n*n,g=i*h+n*d,T=u*v-p*p,w=T===0?0:1/T,b=(v*m-p*g)*w,E=(u*g-p*m)*w;return b>=0&&E>=0&&b+E<1};o.exports=y},86875:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l===void 0&&(l=!1),a===void 0&&(a=[]);for(var r=t.x3-t.x1,i=t.y3-t.y1,n=t.x2-t.x1,h=t.y2-t.y1,d=r*r+i*i,u=r*n+i*h,p=n*n+h*h,m=d*p-u*u,v=m===0?0:1/m,g,T,w,b,E,A,R=t.x1,I=t.y1,P=0;P<s.length&&(w=s[P].x-R,b=s[P].y-I,E=r*w+i*b,A=n*w+h*b,g=(p*E-u*A)*v,T=(d*A-u*E)*v,!(g>=0&&T>=0&&g+T<1&&(a.push({x:s[P].x,y:s[P].y}),l)));P++);return a};o.exports=y},51532:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60689),l=function(a,r){return s(a,r.x,r.y)};o.exports=l},42538:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)};o.exports=y},18680:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s=[]),s.push({x:t.x1,y:t.y1}),s.push({x:t.x2,y:t.y2}),s.push({x:t.x3,y:t.y3}),s};o.exports=y},29977:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.x1===s.x1&&t.y1===s.y1&&t.x2===s.x2&&t.y2===s.y2&&t.x3===s.x3&&t.y3===s.y3};o.exports=y},56088:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=t(16028),a=function(r,i,n){n===void 0&&(n=new s);var h=r.getLineA(),d=r.getLineB(),u=r.getLineC();if(i<=0||i>=1)return n.x=h.x1,n.y=h.y1,n;var p=l(h),m=l(d),v=l(u),g=p+m+v,T=g*i,w=0;return T<p?(w=T/p,n.x=h.x1+(h.x2-h.x1)*w,n.y=h.y1+(h.y2-h.y1)*w):T>p+m?(T-=p+m,w=T/v,n.x=u.x1+(u.x2-u.x1)*w,n.y=u.y1+(u.y2-u.y1)*w):(T-=p,w=T/m,n.x=d.x1+(d.x2-d.x1)*w,n.y=d.y1+(d.y2-d.y1)*w),n};o.exports=a},24402:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=t(79967),a=function(r,i,n,h){h===void 0&&(h=[]);var d=r.getLineA(),u=r.getLineB(),p=r.getLineC(),m=s(d),v=s(u),g=s(p),T=m+v+g;!i&&n>0&&(i=T/n);for(var w=0;w<i;w++){var b=T*(w/i),E=0,A=new l;b<m?(E=b/m,A.x=d.x1+(d.x2-d.x1)*E,A.y=d.y1+(d.y2-d.y1)*E):b>m+v?(b-=m+v,E=b/g,A.x=p.x1+(p.x2-p.x1)*E,A.y=p.y1+(p.y2-p.y1)*E):(b-=m,E=b/v,A.x=u.x1+(u.x2-u.x1)*E,A.y=u.y1+(u.y2-u.y1)*E),h.push(A)}return h};o.exports=a},83648:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967);function l(r,i,n,h){var d=r-n,u=i-h,p=d*d+u*u;return Math.sqrt(p)}var a=function(r,i){i===void 0&&(i=new s);var n=r.x1,h=r.y1,d=r.x2,u=r.y2,p=r.x3,m=r.y3,v=l(p,m,d,u),g=l(n,h,p,m),T=l(d,u,n,h),w=v+g+T;return i.x=(n*v+d*g+p*T)/w,i.y=(h*v+u*g+m*T)/w,i};o.exports=a},9640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t.x1+=s,t.y1+=l,t.x2+=s,t.y2+=l,t.x3+=s,t.y3+=l,t};o.exports=y},95290:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16028),l=function(a){var r=a.getLineA(),i=a.getLineB(),n=a.getLineC();return s(r)+s(i)+s(n)};o.exports=l},99761:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(79967),l=function(a,r){r===void 0&&(r=new s);var i=a.x2-a.x1,n=a.y2-a.y1,h=a.x3-a.x1,d=a.y3-a.y1,u=Math.random(),p=Math.random();return u+p>=1&&(u=1-u,p=1-p),r.x=a.x1+(i*u+h*p),r.y=a.y1+(n*u+d*p),r};o.exports=l},21934:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19211),l=t(83648),a=function(r,i){var n=l(r);return s(r,n.x,n.y,i)};o.exports=a},68454:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19211),l=function(a,r,i){return s(a,r.x,r.y,i)};o.exports=l},19211:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=Math.cos(a),i=Math.sin(a),n=t.x1-s,h=t.y1-l;return t.x1=n*r-h*i+s,t.y1=n*i+h*r+l,n=t.x2-s,h=t.y2-l,t.x2=n*r-h*i+s,t.y2=n*i+h*r+l,n=t.x3-s,h=t.y3-l,t.x3=n*r-h*i+s,t.y3=n*i+h*r+l,t};o.exports=y},66349:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(60689),a=t(56088),r=t(24402),i=t(52394),n=t(88829),h=t(99761),d=new s({initialize:function(p,m,v,g,T,w){p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),g===void 0&&(g=0),T===void 0&&(T=0),w===void 0&&(w=0),this.type=i.TRIANGLE,this.x1=p,this.y1=m,this.x2=v,this.y2=g,this.x3=T,this.y3=w},contains:function(u,p){return l(this,u,p)},getPoint:function(u,p){return a(this,u,p)},getPoints:function(u,p,m){return r(this,u,p,m)},getRandomPoint:function(u){return h(this,u)},setTo:function(u,p,m,v,g,T){return u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),g===void 0&&(g=0),T===void 0&&(T=0),this.x1=u,this.y1=p,this.x2=m,this.y2=v,this.x3=g,this.y3=T,this},getLineA:function(u){return u===void 0&&(u=new n),u.setTo(this.x1,this.y1,this.x2,this.y2),u},getLineB:function(u){return u===void 0&&(u=new n),u.setTo(this.x2,this.y2,this.x3,this.y3),u},getLineC:function(u){return u===void 0&&(u=new n),u.setTo(this.x3,this.y3,this.x1,this.y1),u},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(u){var p=0;this.x1<=this.x2&&this.x1<=this.x3?p=this.x1-u:this.x2<=this.x1&&this.x2<=this.x3?p=this.x2-u:p=this.x3-u,this.x1-=p,this.x2-=p,this.x3-=p}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(u){var p=0;this.x1>=this.x2&&this.x1>=this.x3?p=this.x1-u:this.x2>=this.x1&&this.x2>=this.x3?p=this.x2-u:p=this.x3-u,this.x1-=p,this.x2-=p,this.x3-=p}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(u){var p=0;this.y1<=this.y2&&this.y1<=this.y3?p=this.y1-u:this.y2<=this.y1&&this.y2<=this.y3?p=this.y2-u:p=this.y3-u,this.y1-=p,this.y2-=p,this.y3-=p}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(u){var p=0;this.y1>=this.y2&&this.y1>=this.y3?p=this.y1-u:this.y2>=this.y1&&this.y2>=this.y3?p=this.y2-u:p=this.y3-u,this.y1-=p,this.y2-=p,this.y3-=p}}});o.exports=d},87619:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66349);s.Area=t(19108),s.BuildEquilateral=t(41199),s.BuildFromPolygon=t(88730),s.BuildRight=t(3635),s.CenterOn=t(1882),s.Centroid=t(56595),s.CircumCenter=t(91835),s.CircumCircle=t(97073),s.Clone=t(75974),s.Contains=t(60689),s.ContainsArray=t(86875),s.ContainsPoint=t(51532),s.CopyFrom=t(42538),s.Decompose=t(18680),s.Equals=t(29977),s.GetPoint=t(56088),s.GetPoints=t(24402),s.InCenter=t(83648),s.Perimeter=t(95290),s.Offset=t(9640),s.Random=t(99761),s.Rotate=t(21934),s.RotateAroundPoint=t(68454),s.RotateAroundXY=t(19211),o.exports=s},27395:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:s,hitAreaCallback:l,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};o.exports=y},18104:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return function(l,a,r,i){var n=t.getPixelAlpha(a,r,i.texture.key,i.frame.name);return n&&n>=s}};o.exports=y},69898:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72687),a=t(6659),r=t(33963),i=t(97081),n=t(71064),h=t(7905),d=t(40398),u=t(37579),p=t(69360),m=t(64462),v=new s({initialize:function(T,w){this.game=T,this.scaleManager,this.canvas,this.config=w,this.enabled=!0,this.events=new a,this.isOver=!0,this.defaultCursor="",this.keyboard=w.inputKeyboard?new n(this):null,this.mouse=w.inputMouse?new h(this):null,this.touch=w.inputTouch?new u(this):null,this.pointers=[],this.pointersTotal=w.inputActivePointers,w.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var b=0;b<=this.pointersTotal;b++){var E=new d(this,b);E.smoothFactor=w.inputSmoothFactor,this.pointers.push(E)}this.mousePointer=w.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new p,this._tempMatrix2=new p,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],T.events.once(i.BOOT,this.boot,this)},boot:function(){var g=this.game,T=g.events;this.canvas=g.canvas,this.scaleManager=g.scale,this.events.emit(r.MANAGER_BOOT),T.on(i.PRE_RENDER,this.preRender,this),T.once(i.DESTROY,this.destroy,this)},setCanvasOver:function(g){this.isOver=!0,this.events.emit(r.GAME_OVER,g)},setCanvasOut:function(g){this.isOver=!1,this.events.emit(r.GAME_OUT,g)},preRender:function(){var g=this.game.loop.now,T=this.game.loop.delta,w=this.game.scene.getScenes(!0,!0);this.time=g,this.events.emit(r.MANAGER_UPDATE);for(var b=0;b<w.length;b++){var E=w[b];if(E.sys.input&&E.sys.input.updatePoll(g,T)&&this.globalTopOnly)return}},setDefaultCursor:function(g){this.defaultCursor=g,this.canvas.style.cursor!==g&&(this.canvas.style.cursor=g)},setCursor:function(g){g.cursor&&(this.canvas.style.cursor=g.cursor)},resetCursor:function(g){g.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(g){g===void 0&&(g=1);var T=[];this.pointersTotal+g>10&&(g=10-this.pointersTotal);for(var w=0;w<g;w++){var b=this.pointers.length,E=new d(this,b);E.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(E),this.pointersTotal++,T.push(E)}return T},updateInputPlugins:function(g,T){var w=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var b=0;b<w.length;b++){var E=w[b];if(E.sys.input){var A=E.sys.input.update(g,T);if(A&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(g){for(var T=this.pointers,w=[],b=0;b<g.changedTouches.length;b++)for(var E=g.changedTouches[b],A=1;A<this.pointersTotal;A++){var R=T[A];if(!R.active){R.touchstart(E,g),this.activePointer=R,w.push(R);break}}this.updateInputPlugins(l.TOUCH_START,w)},onTouchMove:function(g){for(var T=this.pointers,w=[],b=0;b<g.changedTouches.length;b++)for(var E=g.changedTouches[b],A=1;A<this.pointersTotal;A++){var R=T[A];if(R.active&&R.identifier===E.identifier){var I=document.elementFromPoint(E.pageX,E.pageY),P=I===this.canvas;!this.isOver&&P?this.setCanvasOver(g):this.isOver&&!P&&this.setCanvasOut(g),this.isOver&&(R.touchmove(E,g),this.activePointer=R,w.push(R));break}}this.updateInputPlugins(l.TOUCH_MOVE,w)},onTouchEnd:function(g){for(var T=this.pointers,w=[],b=0;b<g.changedTouches.length;b++)for(var E=g.changedTouches[b],A=1;A<this.pointersTotal;A++){var R=T[A];if(R.active&&R.identifier===E.identifier){R.touchend(E,g),w.push(R);break}}this.updateInputPlugins(l.TOUCH_END,w)},onTouchCancel:function(g){for(var T=this.pointers,w=[],b=0;b<g.changedTouches.length;b++)for(var E=g.changedTouches[b],A=1;A<this.pointersTotal;A++){var R=T[A];if(R.active&&R.identifier===E.identifier){R.touchcancel(E,g),w.push(R);break}}this.updateInputPlugins(l.TOUCH_CANCEL,w)},onMouseDown:function(g){var T=this.mousePointer;T.down(g),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(l.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(g){var T=this.mousePointer;T.move(g),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(l.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(g){var T=this.mousePointer;T.up(g),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(l.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(g){var T=this.mousePointer;T.wheel(g),this.activePointer=T,this.updateInputPlugins(l.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(g){var T=this.mouse.locked;this.mousePointer.locked=T,this.events.emit(r.POINTERLOCK_CHANGE,g,T)},inputCandidate:function(g,T){var w=g.input;if(!w||!w.enabled||!g.willRender(T))return!1;var b=!0,E=g.parentContainer;if(E)do{if(!E.willRender(T)){b=!1;break}E=E.parentContainer}while(E);return b},hitTest:function(g,T,w,b){b===void 0&&(b=this._tempHitTest);var E=this._tempPoint,A=w.scrollX,R=w.scrollY;b.length=0;var I=g.x,P=g.y;w.getWorldPoint(I,P,E),g.worldX=E.x,g.worldY=E.y;for(var N={x:0,y:0},F=this._tempMatrix,O=this._tempMatrix2,D=0;D<T.length;D++){var L=T[D];if(this.inputCandidate(L,w)){var z=E.x+A*L.scrollFactorX-A,X=E.y+R*L.scrollFactorY-R;L.parentContainer?(L.getWorldTransformMatrix(F,O),F.applyInverse(z,X,N)):m(z,X,L.x,L.y,L.rotation,L.scaleX,L.scaleY,N),this.pointWithinHitArea(L,N.x,N.y)&&b.push(L)}}return b},pointWithinHitArea:function(g,T,w){T+=g.displayOriginX,w+=g.displayOriginY;var b=g.input;return b&&b.hitAreaCallback(b.hitArea,T,w,g)?(b.localX=T,b.localY=w,!0):!1},pointWithinInteractiveObject:function(g,T,w){return g.hitArea?(T+=g.gameObject.displayOriginX,w+=g.gameObject.displayOriginY,g.localX=T,g.localY=w,g.hitAreaCallback(g.hitArea,T,w,g)):!1},transformPointer:function(g,T,w,b){var E=g.position,A=g.prevPosition;A.x=E.x,A.y=E.y;var R=this.scaleManager.transformX(T),I=this.scaleManager.transformY(w),P=g.smoothFactor;!b||P===0?(E.x=R,E.y=I):(E.x=R*P+A.x*(1-P),E.y=I*P+A.y*(1-P))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(i.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var g=0;g<this.pointers.length;g++)this.pointers[g].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});o.exports=v},12499:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26673),l=t(65650),a=t(56694),r=t(72687),i=t(27395),n=t(18104),h=t(53996),d=t(95669),u=t(72313),p=t(33963),m=t(6659),v=t(72632),g=t(52394),T=t(63399),w=t(42911),b=t(91963),E=t(74118),A=t(94287),R=t(7599),I=t(66349),P=t(60689),N=new a({Extends:m,initialize:function(O){m.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new m,this.enabled=!0,this.displayList,this.cameras,T.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(R.BOOT,this.boot,this),O.sys.events.on(R.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(R.DESTROY,this.destroy,this),this.pluginEvents.emit(p.BOOT)},start:function(){var F=this.systems.events;F.on(R.TRANSITION_START,this.transitionIn,this),F.on(R.TRANSITION_OUT,this.transitionOut,this),F.on(R.TRANSITION_COMPLETE,this.transitionComplete,this),F.on(R.PRE_UPDATE,this.preUpdate,this),F.once(R.SHUTDOWN,this.shutdown,this),this.manager.events.on(p.GAME_OUT,this.onGameOut,this),this.manager.events.on(p.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(p.START)},onGameOver:function(F){this.isActive()&&this.emit(p.GAME_OVER,F.timeStamp,F)},onGameOut:function(F){this.isActive()&&this.emit(p.GAME_OUT,F.timeStamp,F)},preUpdate:function(){this.pluginEvents.emit(p.PRE_UPDATE);var F=this._pendingRemoval,O=this._pendingInsertion,D=F.length,L=O.length;if(!(D===0&&L===0)){for(var z=this._list,X=0;X<D;X++){var H=F[X],J=z.indexOf(H);J>-1&&(z.splice(J,1),this.clear(H,!0))}this._pendingRemoval.length=0,this._list=z.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(F,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(p.UPDATE,F,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,L=this.manager,z=L.pointers,X=L.pointersTotal;for(D=0;D<X;D++)z[D].updateMotion();if(this._list.length===0)return!1;var H=this.pollRate;if(H===-1)return!1;if(H>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var J=!1;for(D=0;D<X;D++){var G=0,k=z[D];this._tempZones=[],this._temp=this.hitTestPointer(k),this.sortGameObjects(this._temp,k),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),G+=this.processOverOutEvents(k),this.getDragState(k)===2&&this.processDragThresholdEvent(k,F),G>0&&(J=!0)}return J},update:function(F,O){if(!this.isActive())return!1;for(var D=O.length,L=!1,z=0;z<D;z++){var X=0,H=O[z];switch(this._tempZones=[],this._temp=this.hitTestPointer(H),this.sortGameObjects(this._temp,H),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),F){case r.MOUSE_DOWN:X+=this.processDragDownEvent(H),X+=this.processDownEvents(H),X+=this.processOverOutEvents(H);break;case r.MOUSE_UP:X+=this.processDragUpEvent(H),X+=this.processUpEvents(H),X+=this.processOverOutEvents(H);break;case r.TOUCH_START:X+=this.processDragDownEvent(H),X+=this.processDownEvents(H),X+=this.processOverEvents(H);break;case r.TOUCH_END:case r.TOUCH_CANCEL:X+=this.processDragUpEvent(H),X+=this.processUpEvents(H),X+=this.processOutEvents(H);break;case r.MOUSE_MOVE:case r.TOUCH_MOVE:X+=this.processDragMoveEvent(H),X+=this.processMoveEvents(H),X+=this.processOverOutEvents(H);break;case r.MOUSE_WHEEL:X+=this.processWheelEvent(H);break}X>0&&(L=!0)}return this._updatedThisFrame=!0,L},clear:function(F,O){O===void 0&&(O=!1),this.disable(F);var D=F.input;D&&(this.removeDebug(F),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,F.input=null),O||this.queueForRemoval(F);var L=this._draggable.indexOf(F);return L>-1&&this._draggable.splice(L,1),F},disable:function(F){var O=F.input;O&&(O.enabled=!1,O.dragState=0);var D=this._temp,L=this._drag,z=this._over,X=this.manager,H=D.indexOf(F);H>-1&&D.splice(H,1);for(var J=0;J<X.pointersTotal;J++)H=L[J].indexOf(F),H>-1&&L[J].splice(H,1),H=z[J].indexOf(F),H>-1&&(z[J].splice(H,1),X.resetCursor(O));return this},enable:function(F,O,D,L){return L===void 0&&(L=!1),F.input?F.input.enabled=!0:this.setHitArea(F,O,D),F.input&&L&&!F.input.dropZone&&(F.input.dropZone=L),this},hitTestPointer:function(F){for(var O=this.cameras.getCamerasBelowPointer(F),D=0;D<O.length;D++){for(var L=O[D],z=this.manager.hitTest(F,this._list,L),X=0;X<z.length;X++){var H=z[X];H.input.dropZone&&this._tempZones.push(H)}if(z.length>0)return F.camera=L,z}return F.camera=O[0],[]},processDownEvents:function(F){var O=0,D=this._temp,L=this._eventData,z=this._eventContainer;L.cancelled=!1;for(var X=!1,H=0;H<D.length;H++){var J=D[H];if(!(!J.input||!J.input.enabled)){if(O++,J.emit(p.GAMEOBJECT_POINTER_DOWN,F,J.input.localX,J.input.localY,z),L.cancelled||!J.input||!J.input.enabled){X=!0;break}if(this.emit(p.GAMEOBJECT_DOWN,F,J,z),L.cancelled||!J.input){X=!0;break}}}return!X&&this.manager&&(F.downElement===this.manager.game.canvas?this.emit(p.POINTER_DOWN,F,D):this.emit(p.POINTER_DOWN_OUTSIDE,F)),O},getDragState:function(F){return this._dragState[F.id]},setDragState:function(F,O){this._dragState[F.id]=O},processDragThresholdEvent:function(F,O){var D=!1,L=this.dragTimeThreshold,z=this.dragDistanceThreshold;if((z>0&&h(F.x,F.y,F.downX,F.downY)>=z||L>0&&O>=F.downTime+L)&&(D=!0),D)return this.setDragState(F,3),this.processDragStartList(F)},processDragStartList:function(F){if(this.getDragState(F)!==3)return 0;for(var O=this._drag[F.id],D=0;D<O.length;D++){var L=O[D],z=L.input;z.dragState=2,z.dragStartX=L.x,z.dragStartY=L.y,z.dragStartXGlobal=F.worldX,z.dragStartYGlobal=F.worldY,z.dragX=z.dragStartXGlobal-z.dragStartX,z.dragY=z.dragStartYGlobal-z.dragStartY,L.emit(p.GAMEOBJECT_DRAG_START,F,z.dragX,z.dragY),this.emit(p.DRAG_START,F,L)}return this.setDragState(F,4),O.length},processDragDownEvent:function(F){var O=this._temp;if(this._draggable.length===0||O.length===0||!F.primaryDown||this.getDragState(F)!==0)return 0;this.setDragState(F,1);for(var D=[],L=0;L<O.length;L++){var z=O[L];z.input.draggable&&z.input.dragState===0&&D.push(z)}return D.length===0?(this.setDragState(F,0),0):(D.length>1&&(this.sortGameObjects(D,F),this.topOnly&&D.splice(1)),this._drag[F.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(F,3),this.processDragStartList(F)):(this.setDragState(F,2),0))},processDragMoveEvent:function(F){if(this.getDragState(F)===2&&this.processDragThresholdEvent(F,this.manager.game.loop.now),this.getDragState(F)!==4)return 0;for(var O=this._tempZones,D=this._drag[F.id],L=0;L<D.length;L++){var z=D[L],X=z.input,H=X.target;if(H){var J=O.indexOf(H);J===0?(z.emit(p.GAMEOBJECT_DRAG_OVER,F,H),this.emit(p.DRAG_OVER,F,z,H)):J>0?(z.emit(p.GAMEOBJECT_DRAG_LEAVE,F,H),this.emit(p.DRAG_LEAVE,F,z,H),X.target=O[0],H=X.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,F,H),this.emit(p.DRAG_ENTER,F,z,H)):(z.emit(p.GAMEOBJECT_DRAG_LEAVE,F,H),this.emit(p.DRAG_LEAVE,F,z,H),O[0]?(X.target=O[0],H=X.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,F,H),this.emit(p.DRAG_ENTER,F,z,H)):X.target=null)}else!H&&O[0]&&(X.target=O[0],H=X.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,F,H),this.emit(p.DRAG_ENTER,F,z,H));var G,k;if(!z.parentContainer)G=F.worldX-X.dragX,k=F.worldY-X.dragY;else{var M=F.worldX-X.dragStartXGlobal,B=F.worldY-X.dragStartYGlobal,U=z.getParentRotation(),W=M*Math.cos(U)+B*Math.sin(U),K=B*Math.cos(U)-M*Math.sin(U);W*=1/z.parentContainer.scaleX,K*=1/z.parentContainer.scaleY,G=W+X.dragStartX,k=K+X.dragStartY}z.emit(p.GAMEOBJECT_DRAG,F,G,k),this.emit(p.DRAG,F,z,G,k)}return D.length},processDragUpEvent:function(F){for(var O=this._drag[F.id],D=0;D<O.length;D++){var L=O[D],z=L.input;if(z&&z.dragState===2){z.dragState=0,z.dragX=z.localX-L.displayOriginX,z.dragY=z.localY-L.displayOriginY;var X=!1,H=z.target;H&&(L.emit(p.GAMEOBJECT_DROP,F,H),this.emit(p.DROP,F,L,H),z.target=null,X=!0),L.input&&L.input.enabled&&(L.emit(p.GAMEOBJECT_DRAG_END,F,z.dragX,z.dragY,X),this.emit(p.DRAG_END,F,L,X))}}return this.setDragState(F,0),O.splice(0),0},processMoveEvents:function(F){var O=0,D=this._temp,L=this._eventData,z=this._eventContainer;L.cancelled=!1;for(var X=!1,H=0;H<D.length;H++){var J=D[H];if(!(!J.input||!J.input.enabled)){if(O++,J.emit(p.GAMEOBJECT_POINTER_MOVE,F,J.input.localX,J.input.localY,z),L.cancelled||!J.input||!J.input.enabled){X=!0;break}if(this.emit(p.GAMEOBJECT_MOVE,F,J,z),L.cancelled||!J.input||!J.input.enabled){X=!0;break}if(this.topOnly)break}}return X||this.emit(p.POINTER_MOVE,F,D),O},processWheelEvent:function(F){var O=0,D=this._temp,L=this._eventData,z=this._eventContainer;L.cancelled=!1;for(var X=!1,H=F.deltaX,J=F.deltaY,G=F.deltaZ,k=0;k<D.length;k++){var M=D[k];if(!(!M.input||!M.input.enabled)){if(O++,M.emit(p.GAMEOBJECT_POINTER_WHEEL,F,H,J,G,z),L.cancelled||!M.input||!M.input.enabled){X=!0;break}if(this.emit(p.GAMEOBJECT_WHEEL,F,M,H,J,G,z),L.cancelled||!M.input||!M.input.enabled){X=!0;break}}}return X||this.emit(p.POINTER_WHEEL,F,D,H,J,G),O},processOverEvents:function(F){var O=this._temp,D=0,L=O.length,z=[];if(L>0){var X=this.manager,H=this._eventData,J=this._eventContainer;H.cancelled=!1;for(var G=!1,k=0;k<L;k++){var M=O[k];if(!(!M.input||!M.input.enabled)){if(z.push(M),X.setCursor(M.input),M.emit(p.GAMEOBJECT_POINTER_OVER,F,M.input.localX,M.input.localY,J),D++,H.cancelled||!M.input||!M.input.enabled){G=!0;break}if(this.emit(p.GAMEOBJECT_OVER,F,M,J),H.cancelled||!M.input||!M.input.enabled){G=!0;break}}}G||this.emit(p.POINTER_OVER,F,z)}return this._over[F.id]=z,D},processOutEvents:function(F){var O=this._over[F.id],D=0,L=O.length;if(L>0){var z=this.manager,X=this._eventData,H=this._eventContainer;X.cancelled=!1;var J=!1;this.sortGameObjects(O,F);for(var G=0;G<L;G++){var k=O[G];if(k=O[G],!(!k.input||!k.input.enabled)){if(z.resetCursor(k.input),k.emit(p.GAMEOBJECT_POINTER_OUT,F,H),D++,X.cancelled||!k.input||!k.input.enabled){J=!0;break}if(this.emit(p.GAMEOBJECT_OUT,F,k,H),X.cancelled||!k.input||!k.input.enabled){J=!0;break}J||this.emit(p.POINTER_OUT,F,O)}}this._over[F.id]=[]}return D},processOverOutEvents:function(F){var O=this._temp,D,L,z=[],X=[],H=[],J=this._over[F.id],G=this._drag[F.id],k=this.manager;for(D=0;D<J.length;D++)L=J[D],O.indexOf(L)===-1&&G.indexOf(L)===-1?z.push(L):H.push(L);for(D=0;D<O.length;D++)L=O[D],J.indexOf(L)===-1&&X.push(L);var M=z.length,B=0,U=this._eventData,W=this._eventContainer;U.cancelled=!1;var K=!1;if(M>0){for(this.sortGameObjects(z,F),D=0;D<M;D++)if(L=z[D],!(!L.input||!L.input.enabled)){if(k.resetCursor(L.input),L.emit(p.GAMEOBJECT_POINTER_OUT,F,W),B++,U.cancelled||!L.input||!L.input.enabled){K=!0;break}if(this.emit(p.GAMEOBJECT_OUT,F,L,W),U.cancelled||!L.input||!L.input.enabled){K=!0;break}}K||this.emit(p.POINTER_OUT,F,z)}if(M=X.length,U.cancelled=!1,K=!1,M>0){for(this.sortGameObjects(X,F),D=0;D<M;D++)if(L=X[D],!(!L.input||!L.input.enabled)){if(k.setCursor(L.input),L.emit(p.GAMEOBJECT_POINTER_OVER,F,L.input.localX,L.input.localY,W),B++,U.cancelled||!L.input||!L.input.enabled){K=!0;break}if(this.emit(p.GAMEOBJECT_OVER,F,L,W),U.cancelled||!L.input||!L.input.enabled){K=!0;break}}K||this.emit(p.POINTER_OVER,F,X)}return J=H.concat(X),this._over[F.id]=this.sortGameObjects(J,F),B},processUpEvents:function(F){var O=this._temp,D=this._eventData,L=this._eventContainer;D.cancelled=!1;for(var z=!1,X=0;X<O.length;X++){var H=O[X];if(!(!H.input||!H.input.enabled)){if(H.emit(p.GAMEOBJECT_POINTER_UP,F,H.input.localX,H.input.localY,L),D.cancelled||!H.input||!H.input.enabled){z=!0;break}if(this.emit(p.GAMEOBJECT_UP,F,H,L),D.cancelled||!H.input||!H.input.enabled){z=!0;break}}}return!z&&this.manager&&(F.upElement===this.manager.game.canvas?this.emit(p.POINTER_UP,F,O):this.emit(p.POINTER_UP_OUTSIDE,F)),O.length},queueForInsertion:function(F){return this._pendingInsertion.indexOf(F)===-1&&this._list.indexOf(F)===-1&&this._pendingInsertion.push(F),this},queueForRemoval:function(F){return this._pendingRemoval.push(F),this},setDraggable:function(F,O){O===void 0&&(O=!0),Array.isArray(F)||(F=[F]);for(var D=0;D<F.length;D++){var L=F[D];L.input.draggable=O;var z=this._draggable.indexOf(L);O&&z===-1?this._draggable.push(L):!O&&z>-1&&this._draggable.splice(z,1)}return this},makePixelPerfect:function(F){F===void 0&&(F=1);var O=this.systems.textures;return n(O,F)},setHitArea:function(F,O,D){if(O===void 0)return this.setHitAreaFromTexture(F);Array.isArray(F)||(F=[F]);var L=!1,z=!1,X=!1,H=!1,J=!1,G=!0;if(w(O)){var k=O;O=v(k,"hitArea",null),D=v(k,"hitAreaCallback",null),L=v(k,"draggable",!1),z=v(k,"dropZone",!1),X=v(k,"cursor",!1),H=v(k,"useHandCursor",!1),J=v(k,"pixelPerfect",!1);var M=v(k,"alphaTolerance",1);J&&(O={},D=this.makePixelPerfect(M)),(!O||!D)&&(this.setHitAreaFromTexture(F),G=!1)}else typeof O=="function"&&!D&&(D=O,O={});for(var B=0;B<F.length;B++){var U=F[B];if(J&&U.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var W=U.input?U.input:i(U,O,D);W.customHitArea=G,W.dropZone=z,W.cursor=H?"pointer":X,U.input=W,L&&this.setDraggable(U),this.queueForInsertion(U)}return this},setHitAreaCircle:function(F,O,D,L,z){z===void 0&&(z=l);var X=new s(O,D,L);return this.setHitArea(F,X,z)},setHitAreaEllipse:function(F,O,D,L,z,X){X===void 0&&(X=u);var H=new d(O,D,L,z);return this.setHitArea(F,H,X)},setHitAreaFromTexture:function(F,O){O===void 0&&(O=A),Array.isArray(F)||(F=[F]);for(var D=0;D<F.length;D++){var L=F[D],z=L.frame,X=0,H=0;if(L.width?(X=L.width,H=L.height):z&&(X=z.realWidth,H=z.realHeight),L.type==="Container"&&(X===0||H===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}X!==0&&H!==0&&(L.input=i(L,new E(0,0,X,H),O),this.queueForInsertion(L))}return this},setHitAreaRectangle:function(F,O,D,L,z,X){X===void 0&&(X=A);var H=new E(O,D,L,z);return this.setHitArea(F,H,X)},setHitAreaTriangle:function(F,O,D,L,z,X,H,J){J===void 0&&(J=P);var G=new I(O,D,L,z,X,H);return this.setHitArea(F,G,J)},enableDebug:function(F,O){O===void 0&&(O=65280);var D=F.input;if(!D||!D.hitArea)return this;var L=D.hitArea,z=L.type,X=D.hitAreaDebug,H=this.systems.add,J=this.systems.updateList;X&&(J.remove(X),X.destroy(),X=null);var G=0,k=0;switch(z){case g.CIRCLE:X=H.arc(0,0,L.radius),G=L.x-L.radius,k=L.y-L.radius;break;case g.ELLIPSE:X=H.ellipse(0,0,L.width,L.height),G=L.x-L.width/2,k=L.y-L.height/2;break;case g.LINE:X=H.line(0,0,L.x1,L.y1,L.x2,L.y2);break;case g.POLYGON:X=H.polygon(0,0,L.points);break;case g.RECTANGLE:X=H.rectangle(0,0,L.width,L.height),G=L.x,k=L.y;break;case g.TRIANGLE:X=H.triangle(0,0,L.x1,L.y1,L.x2,L.y2,L.x3,L.y3);break}return X&&(X.isFilled=!1,X.strokeColor=O,X.preUpdate=function(){X.setStrokeStyle(1/F.scale,X.strokeColor),X.setDisplayOrigin(F.displayOriginX,F.displayOriginY);var M=F.x,B=F.y,U=F.rotation,W=F.scaleX,K=F.scaleY;if(F.parentContainer){var q=F.getWorldTransformMatrix();M=q.tx,B=q.ty,U=q.rotation,W=q.scaleX,K=q.scaleY}X.setRotation(U),X.setScale(W,K),X.setPosition(M+G*W,B+k*K),X.setScrollFactor(F.scrollFactorX,F.scrollFactorY),X.setDepth(F.depth)},J.add(X),D.hitAreaDebug=X),this},removeDebug:function(F){var O=F.input;if(O&&O.hitAreaDebug){var D=O.hitAreaDebug;this.systems.updateList.remove(D),D.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(F){return this.pollRate=F,this._pollTimer=0,this},setGlobalTopOnly:function(F){return this.manager.globalTopOnly=F,this},setTopOnly:function(F){return this.topOnly=F,this},sortGameObjects:function(F,O){if(F.length<2||!O.camera)return F;var D=O.camera.renderList;return F.sort(function(L,z){var X=Math.max(D.indexOf(L),0),H=Math.max(D.indexOf(z),0);return H-X})},sortDropZones:function(F){return F.length<2?F:(this.scene.sys.depthSort(),F.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(F,O){if(!F.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(F);if(F.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-F.parentContainer.getIndex(F);if(F.parentContainer===O)return-1;if(O.parentContainer===F)return 1;for(var D=F.getIndexList(),L=O.getIndexList(),z=Math.min(D.length,L.length),X=0;X<z;X++){var H=D[X],J=L[X];if(H!==J)return J-H}return L.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(F){return this.manager.addPointer(F)},setDefaultCursor:function(F){return this.manager.setDefaultCursor(F),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(p.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var F=0;F<10;F++)this._drag[F]=[],this._over[F]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var D=this.systems.events;D.off(R.TRANSITION_START,this.transitionIn,this),D.off(R.TRANSITION_OUT,this.transitionOut,this),D.off(R.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(R.PRE_UPDATE,this.preUpdate,this),O.events.off(p.GAME_OUT,this.onGameOut,this),O.events.off(p.GAME_OVER,this.onGameOver,this),D.off(R.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var F=this.manager.pointers,O=0;O<F.length;O++)F[O].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(p.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(R.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});b.register("InputPlugin",N,"input"),o.exports=N},63399:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l={},a={};a.register=function(r,i,n,h,d){l[r]={plugin:i,mapping:n,settingsKey:h,configKey:d}},a.getPlugin=function(r){return l[r]},a.install=function(r){var i=r.scene.sys,n=i.settings.input,h=i.game.config;for(var d in l){var u=l[d].plugin,p=l[d].mapping,m=l[d].settingsKey,v=l[d].configKey;s(n,m,h[v])&&(r[p]=new u(r))}},a.remove=function(r){l.hasOwnProperty(r)&&delete l[r]},o.exports=a},40398:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(90447),l=t(56694),a=t(53996),r=t(88456),i=t(44521),n=t(93736),h=t(36580),d=new l({initialize:function(p,m){this.manager=p,this.id=m,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=m===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(u){var p=u.getWorldPoint(this.x,this.y);return this.worldX=p.x,this.worldY=p.y,this},positionToCamera:function(u,p){return u.getWorldPoint(this.x,this.y,p)},updateMotion:function(){var u=this.position.x,p=this.position.y,m=this.midPoint.x,v=this.midPoint.y;if(!(u===m&&p===v)){var g=i(this.motionFactor,m,u),T=i(this.motionFactor,v,p);r(g,u,.1)&&(g=u),r(T,p,.1)&&(T=p),this.midPoint.set(g,T);var w=u-g,b=p-T;this.velocity.set(w,b),this.angle=s(g,T,u,p),this.distance=Math.sqrt(w*w+b*b)}},up:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.button=u.button,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),u.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=u.timeStamp,this.wasTouch=!1)},down:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.button=u.button,this.downElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),u.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),h.macOS&&u.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=u.timeStamp),this.wasTouch=!1},move:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.manager.transformPointer(this,u.pageX,u.pageY,!0),this.locked&&(this.movementX=u.movementX||u.mozMovementX||u.webkitMovementX||0,this.movementY=u.movementY||u.mozMovementY||u.webkitMovementY||0),this.moveTime=u.timeStamp,this.wasTouch=!1},wheel:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.deltaX=u.deltaX,this.deltaY=u.deltaY,this.deltaZ=u.deltaZ,this.wasTouch=!1},touchstart:function(u,p){u.pointerId&&(this.pointerId=u.pointerId),this.identifier=u.identifier,this.target=u.target,this.active=!0,this.buttons=1,this.event=p,this.downElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=p.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(u,p){this.event=p,this.manager.transformPointer(this,u.pageX,u.pageY,!0),this.moveTime=p.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(u,p){this.buttons=0,this.event=p,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(u,p){this.buttons=0,this.event=p,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(u,p){u===void 0&&(u=10),p===void 0&&(p=[]);for(var m=this.prevPosition.x,v=this.prevPosition.y,g=this.position.x,T=this.position.y,w=0;w<u;w++){var b=1/u*w;p[w]={x:i(b,m,g),y:i(b,v,T)}}return p},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(u){this.position.x=u}},y:{get:function(){return this.position.y},set:function(u){this.position.y=u}},time:{get:function(){return this.event?this.event.timeStamp:0}}});o.exports=d},72687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};o.exports=y},14874:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},54168:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},526:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},81623:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"},94472:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},9304:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"},34265:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"},50151:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},98134:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"},56773:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectdown"},45824:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},39578:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"},72072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},82569:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"},70833:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"},81442:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},32936:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"},99658:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectmove"},60515:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectout"},55254:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectover"},34782:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"},41769:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"},65588:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"},61640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"},49342:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"},82662:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"},13058:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectup"},52426:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectwheel"},78072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameout"},1545:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameover"},67137:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},27678:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="process"},22257:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},90379:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerlockchange"},88909:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"},36548:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdownoutside"},18483:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"},22355:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"},7997:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"},66318:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"},94812:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerupoutside"},37310:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"},24196:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"},27053:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"},29413:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},25165:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},33963:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BOOT:t(14874),DESTROY:t(54168),DRAG_END:t(526),DRAG_ENTER:t(81623),DRAG:t(94472),DRAG_LEAVE:t(9304),DRAG_OVER:t(34265),DRAG_START:t(50151),DROP:t(98134),GAME_OUT:t(78072),GAME_OVER:t(1545),GAMEOBJECT_DOWN:t(56773),GAMEOBJECT_DRAG_END:t(45824),GAMEOBJECT_DRAG_ENTER:t(39578),GAMEOBJECT_DRAG:t(72072),GAMEOBJECT_DRAG_LEAVE:t(82569),GAMEOBJECT_DRAG_OVER:t(70833),GAMEOBJECT_DRAG_START:t(81442),GAMEOBJECT_DROP:t(32936),GAMEOBJECT_MOVE:t(99658),GAMEOBJECT_OUT:t(60515),GAMEOBJECT_OVER:t(55254),GAMEOBJECT_POINTER_DOWN:t(34782),GAMEOBJECT_POINTER_MOVE:t(41769),GAMEOBJECT_POINTER_OUT:t(65588),GAMEOBJECT_POINTER_OVER:t(61640),GAMEOBJECT_POINTER_UP:t(49342),GAMEOBJECT_POINTER_WHEEL:t(82662),GAMEOBJECT_UP:t(13058),GAMEOBJECT_WHEEL:t(52426),MANAGER_BOOT:t(67137),MANAGER_PROCESS:t(27678),MANAGER_UPDATE:t(22257),POINTER_DOWN:t(88909),POINTER_DOWN_OUTSIDE:t(36548),POINTER_MOVE:t(18483),POINTER_OUT:t(22355),POINTER_OVER:t(7997),POINTER_UP:t(66318),POINTER_UP_OUTSIDE:t(94812),POINTER_WHEEL:t(37310),POINTERLOCK_CHANGE:t(90379),PRE_UPDATE:t(24196),SHUTDOWN:t(27053),START:t(29413),UPDATE:t(25165)}},70848:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i){this.pad=r,this.events=r.events,this.index=i,this.value=0,this.threshold=.1},update:function(a){this.value=a},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});o.exports=l},21274:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(43200),a=new s({initialize:function(i,n){this.pad=i,this.events=i.manager,this.index=n,this.value=0,this.threshold=1,this.pressed=!1},update:function(r){this.value=r;var i=this.pad,n=this.index;r>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(l.BUTTON_DOWN,i,this,r),this.pad.emit(l.GAMEPAD_BUTTON_DOWN,n,r,this)):this.pressed&&(this.pressed=!1,this.events.emit(l.BUTTON_UP,i,this,r),this.pad.emit(l.GAMEPAD_BUTTON_UP,n,r,this))},destroy:function(){this.pad=null,this.events=null}});o.exports=a},75956:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70848),l=t(21274),a=t(56694),r=t(6659),i=t(93736),n=new a({Extends:r,initialize:function(d,u){r.call(this),this.manager=d,this.pad=u,this.id=u.id,this.index=u.index;for(var p=[],m=0;m<u.buttons.length;m++)p.push(new l(this,m));this.buttons=p;var v=[];for(m=0;m<u.axes.length;m++)v.push(new s(this,m));this.axes=v,this.vibration=u.vibrationActuator;var g={value:0,pressed:!1};this._LCLeft=p[14]?p[14]:g,this._LCRight=p[15]?p[15]:g,this._LCTop=p[12]?p[12]:g,this._LCBottom=p[13]?p[13]:g,this._RCLeft=p[2]?p[2]:g,this._RCRight=p[1]?p[1]:g,this._RCTop=p[3]?p[3]:g,this._RCBottom=p[0]?p[0]:g,this._FBLeftTop=p[4]?p[4]:g,this._FBLeftBottom=p[6]?p[6]:g,this._FBRightTop=p[5]?p[5]:g,this._FBRightBottom=p[7]?p[7]:g;var T={value:0};this._HAxisLeft=v[0]?v[0]:T,this._VAxisLeft=v[1]?v[1]:T,this._HAxisRight=v[2]?v[2]:T,this._VAxisRight=v[3]?v[3]:T,this.leftStick=new i,this.rightStick=new i,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(h){return this.axes[h].getValue()},setAxisThreshold:function(h){for(var d=0;d<this.axes.length;d++)this.axes[d].threshold=h},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(h){return this.buttons[h].value},isButtonDown:function(h){return this.buttons[h].pressed},update:function(h){if(!(h.timestamp<this._created)){var d,u=this.buttons,p=h.buttons,m=u.length;for(d=0;d<m;d++)u[d].update(p[d].value);var v=this.axes,g=h.axes;for(m=v.length,d=0;d<m;d++)v[d].update(g[d]);m>=2&&(this.leftStick.set(v[0].getValue(),v[1].getValue()),m>=4&&this.rightStick.set(v[2].getValue(),v[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var h;for(h=0;h<this.buttons.length;h++)this.buttons[h].destroy();for(h=0;h<this.axes.length;h++)this.axes[h].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});o.exports=n},1379:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(43200),r=t(75956),i=t(10850),n=t(63399),h=t(33963),d=new s({Extends:l,initialize:function(p){l.call(this),this.scene=p.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=p,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,p.pluginEvents.once(h.BOOT,this.boot,this),p.pluginEvents.on(h.START,this.start,this)},boot:function(){var u=this.scene.sys.game,p=this.settings.input,m=u.config;this.enabled=i(p,"gamepad",m.inputGamepad)&&u.device.input.gamepads,this.target=i(p,"gamepad.target",m.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var u=this,p=this.target,m=function(v){v.defaultPrevented||!u.isActive()||(u.refreshPads(),u.queue.push(v))};this.onGamepadHandler=m,p.addEventListener("gamepadconnected",m,!1),p.addEventListener("gamepaddisconnected",m,!1),this.sceneInputPlugin.pluginEvents.on(h.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(h.UPDATE,this.update);for(var u=0;u<this.gamepads.length;u++)this.gamepads[u].removeAllListeners()},disconnectAll:function(){for(var u=0;u<this.gamepads.length;u++)this.gamepads[u].pad.connected=!1},refreshPads:function(){var u=navigator.getGamepads();if(!u)this.disconnectAll();else for(var p=this.gamepads,m=0;m<u.length;m++){var v=u[m];if(v){var g=v.id,T=v.index,w=p[T];if(w)w.id!==g?(w.destroy(),p[T]=new r(this,v)):w.update(v);else{var b=new r(this,v);p[T]=b,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=b):this._pad3=b:this._pad2=b:this._pad1=b}}}},getAll:function(){for(var u=[],p=this.gamepads,m=0;m<p.length;m++)p[m]&&u.push(p[m]);return u},getPad:function(u){for(var p=this.gamepads,m=0;m<p.length;m++)if(p[m]&&p[m].index===u)return p[m]},update:function(){if(this.enabled){this.refreshPads();var u=this.queue.length;if(u!==0)for(var p=this.queue.splice(0,u),m=0;m<u;m++){var v=p[m],g=this.getPad(v.gamepad.index);v.type==="gamepadconnected"?this.emit(a.CONNECTED,g,v):v.type==="gamepaddisconnected"&&this.emit(a.DISCONNECTED,g,v)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var u=0;u<this.gamepads.length;u++)this.gamepads[u]&&this.gamepads[u].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});n.register("GamepadPlugin",d,"gamepad","gamepad","inputGamepad"),o.exports=d},33171:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DUALSHOCK_4:t(74982),SNES_USB:t(33171),XBOX_360:t(43247)}},17344:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},36635:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},85724:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="connected"},55832:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="disconnected"},772:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},33608:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},43200:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BUTTON_DOWN:t(17344),BUTTON_UP:t(36635),CONNECTED:t(85724),DISCONNECTED:t(55832),GAMEPAD_BUTTON_DOWN:t(772),GAMEPAD_BUTTON_UP:t(33608)}},92636:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Axis:t(70848),Button:t(21274),Events:t(43200),Gamepad:t(75956),GamepadPlugin:t(1379),Configs:t(4898)}},20873:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72687),l=t(98611),a={CreatePixelPerfectHandler:t(18104),CreateInteractiveObject:t(27395),Events:t(33963),Gamepad:t(92636),InputManager:t(69898),InputPlugin:t(12499),InputPluginCache:t(63399),Keyboard:t(28388),Mouse:t(11343),Pointer:t(40398),Touch:t(77423)};a=l(!1,a,s),o.exports=a},71064:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66458),l=t(56694),a=t(97081),r=t(33963),i=t(11873),n=t(72283),h=new l({initialize:function(u){this.manager=u,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=n,this.onKeyUp=n,u.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputKeyboard,this.target=d.inputKeyboardEventTarget,this.addCapture(d.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(a.POST_STEP,this.postUpdate,this)},startListeners:function(){var d=this;this.onKeyDown=function(p){if(!(p.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(p),d.manager.events.emit(r.MANAGER_PROCESS);var m=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;d.preventDefault&&!m&&d.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}},this.onKeyUp=function(p){if(!(p.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(p),d.manager.events.emit(r.MANAGER_PROCESS);var m=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;d.preventDefault&&!m&&d.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}};var u=this.target;u&&(u.addEventListener("keydown",this.onKeyDown,!1),u.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var d=this.target;d.removeEventListener("keydown",this.onKeyDown,!1),d.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var u=this.captures,p=0;p<d.length;p++){var m=d[p];typeof m=="string"&&(m=i[m.trim().toUpperCase()]),u.indexOf(m)===-1&&u.push(m)}this.preventDefault=u.length>0},removeCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var u=this.captures,p=0;p<d.length;p++){var m=d[p];typeof m=="string"&&(m=i[m.toUpperCase()]),s(u,m)}this.preventDefault=u.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(a.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});o.exports=h},89666:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(94030),r=t(97081),i=t(10850),n=t(33963),h=t(63399),d=t(50165),u=t(11873),p=t(95625),m=t(48044),v=t(7599),g=t(84314),T=new s({Extends:l,initialize:function(b){l.call(this),this.game=b.systems.game,this.scene=b.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=b,this.manager=b.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,b.pluginEvents.once(n.BOOT,this.boot,this),b.pluginEvents.on(n.START,this.start,this)},boot:function(){var w=this.settings.input;this.enabled=i(w,"keyboard",!0);var b=i(w,"keyboard.capture",null);b&&this.addCaptures(b),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(n.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this),this.game.events.on(r.BLUR,this.resetKeys,this),this.scene.sys.events.on(v.PAUSE,this.resetKeys,this),this.scene.sys.events.on(v.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(w){return this.manager.addCapture(w),this},removeCapture:function(w){return this.manager.removeCapture(w),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:u.UP,down:u.DOWN,left:u.LEFT,right:u.RIGHT,space:u.SPACE,shift:u.SHIFT})},addKeys:function(w,b,E){b===void 0&&(b=!0),E===void 0&&(E=!1);var A={};if(typeof w=="string"){w=w.split(",");for(var R=0;R<w.length;R++){var I=w[R].trim();I&&(A[I]=this.addKey(I,b,E))}}else for(var P in w)A[P]=this.addKey(w[P],b,E);return A},addKey:function(w,b,E){b===void 0&&(b=!0),E===void 0&&(E=!1);var A=this.keys;if(w instanceof d){var R=A.indexOf(w);return R>-1?A[R]=w:A[w.keyCode]=w,b&&this.addCapture(w.keyCode),w.setEmitOnRepeat(E),w}return typeof w=="string"&&(w=u[w.toUpperCase()]),A[w]||(A[w]=new d(this,w),b&&this.addCapture(w),A[w].setEmitOnRepeat(E)),A[w]},removeKey:function(w,b,E){b===void 0&&(b=!1),E===void 0&&(E=!1);var A=this.keys,R;if(w instanceof d){var I=A.indexOf(w);I>-1&&(R=this.keys[I],this.keys[I]=void 0)}else typeof w=="string"&&(w=u[w.toUpperCase()]);return A[w]&&(R=A[w],A[w]=void 0),R&&(R.plugin=null,E&&this.removeCapture(R.keyCode),b&&R.destroy()),this},removeAllKeys:function(w,b){w===void 0&&(w=!1),b===void 0&&(b=!1);for(var E=this.keys,A=0;A<E.length;A++){var R=E[A];R&&(E[A]=void 0,b&&this.removeCapture(R.keyCode),w&&R.destroy())}return this},createCombo:function(w,b){return new p(this,w,b)},checkDown:function(w,b){if(b===void 0&&(b=0),this.enabled&&w.isDown){var E=g(this.time-w.timeDown,b);if(E>w._tick)return w._tick=E,!0}return!1},update:function(){var w=this.manager.queue,b=w.length;if(!(!this.isActive()||b===0))for(var E=this.keys,A=0;A<b;A++){var R=w[A],I=R.keyCode,P=E[I],N=!1;R.cancelled===void 0&&(R.cancelled=0,R.stopImmediatePropagation=function(){R.cancelled=1},R.stopPropagation=function(){R.cancelled=-1}),R.cancelled!==-1&&(I===this.prevCode&&R.timeStamp===this.prevTime&&R.type===this.prevType||(this.prevCode=I,this.prevTime=R.timeStamp,this.prevType=R.type,R.type==="keydown"?(P&&(N=P.isDown,P.onDown(R)),!R.cancelled&&(!P||!N)&&(m[I]&&this.emit(a.KEY_DOWN+m[I],R),R.cancelled||this.emit(a.ANY_KEY_DOWN,R))):(P&&P.onUp(R),R.cancelled||(m[I]&&this.emit(a.KEY_UP+m[I],R),R.cancelled||this.emit(a.ANY_KEY_UP,R))),R.cancelled===1&&(R.cancelled=0)))}},resetKeys:function(){for(var w=this.keys,b=0;b<w.length;b++)w[b]&&w[b].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(n.MANAGER_PROCESS,this.update,this),this.game.events.off(r.BLUR,this.resetKeys),this.scene.sys.events.off(v.PAUSE,this.resetKeys,this),this.scene.sys.events.off(v.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var w=this.keys,b=0;b<w.length;b++)w[b]&&w[b].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});h.register("KeyboardPlugin",T,"keyboard","keyboard","inputKeyboard"),o.exports=T},60258:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s.timeLastMatched=t.timeStamp,s.index++,s.index===s.size?!0:(s.current=s.keyCodes[s.index],!1)};o.exports=y},95625:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(94030),a=t(72632),r=t(2544),i=t(88754),n=new s({initialize:function(d,u,p){if(p===void 0&&(p={}),u.length<2)return!1;this.manager=d,this.enabled=!0,this.keyCodes=[];for(var m=0;m<u.length;m++){var v=u[m];typeof v=="string"?this.keyCodes.push(v.toUpperCase().charCodeAt(0)):typeof v=="number"?this.keyCodes.push(v):v.hasOwnProperty("keyCode")&&this.keyCodes.push(v.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=a(p,"resetOnWrongKey",!0),this.maxKeyDelay=a(p,"maxKeyDelay",0),this.resetOnMatch=a(p,"resetOnMatch",!1),this.deleteOnMatch=a(p,"deleteOnMatch",!1);var g=this,T=function(w){if(!(g.matched||!g.enabled)){var b=r(w,g);b&&(g.manager.emit(l.COMBO_MATCH,g,w),g.resetOnMatch?i(g):g.deleteOnMatch&&g.destroy())}};this.onKeyDown=T,this.manager.on(l.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(l.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});o.exports=n},2544:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60258),l=function(a,r){if(r.matched)return!0;var i=!1,n=!1;if(a.keyCode===r.current)if(r.index>0&&r.maxKeyDelay>0){var h=r.timeLastMatched+r.maxKeyDelay;a.timeStamp<=h&&(n=!0,i=s(a,r))}else n=!0,i=s(a,r);return!n&&r.resetOnWrongKey&&(r.index=0,r.current=r.keyCodes[0]),i&&(r.timeLastMatched=a.timeStamp,r.matched=!0,r.timeMatched=a.timeStamp),i};o.exports=l},88754:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t};o.exports=y},5044:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown"},40813:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup"},89319:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keycombomatch"},43267:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},78595:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown-"},30056:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup-"},81939:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},94030:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ANY_KEY_DOWN:t(5044),ANY_KEY_UP:t(40813),COMBO_MATCH:t(89319),DOWN:t(43267),KEY_DOWN:t(78595),KEY_UP:t(30056),UP:t(81939)}},28388:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:t(94030),KeyboardManager:t(71064),KeyboardPlugin:t(89666),Key:t(50165),KeyCodes:t(11873),KeyCombo:t(95625),AdvanceKeyCombo:t(60258),ProcessKeyCombo:t(2544),ResetKeyCombo:t(88754),JustDown:t(42460),JustUp:t(53162),DownDuration:t(64964),UpDuration:t(70331)}},64964:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s=50);var l=t.plugin.game.loop.time-t.timeDown;return t.isDown&&l<s};o.exports=y},42460:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t._justDown?(t._justDown=!1,!0):!1};o.exports=y},53162:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t._justUp?(t._justUp=!1,!0):!1};o.exports=y},50165:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(94030),r=new s({Extends:l,initialize:function(n,h){l.call(this),this.plugin=n,this.keyCode=h,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(i){return this.emitOnRepeat=i,this},onDown:function(i){this.originalEvent=i,this.enabled&&(this.altKey=i.altKey,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.location=i.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(a.DOWN,this,i):(this.isDown=!0,this.isUp=!1,this.timeDown=i.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(a.DOWN,this,i)))},onUp:function(i){this.originalEvent=i,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=i.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(a.UP,this,i))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});o.exports=r},11873:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};o.exports=y},48044:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(11873),l={};for(var a in s)l[s[a]]=a;o.exports=l},70331:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s=50);var l=t.plugin.game.loop.time-t.timeUp;return t.isUp&&l<s};o.exports=y},7905:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(90185),a=t(33963),r=t(72283),i=new s({initialize:function(h){this.manager=h,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=r,this.onMouseDown=r,this.onMouseUp=r,this.onMouseDownWindow=r,this.onMouseUpWindow=r,this.onMouseOver=r,this.onMouseOut=r,this.onMouseWheel=r,this.pointerLockChange=r,this.isTop=!0,h.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputMouse,this.target=n.inputMouseEventTarget,this.passive=n.inputMousePassive,this.preventDefaultDown=n.inputMousePreventDefaultDown,this.preventDefaultUp=n.inputMousePreventDefaultUp,this.preventDefaultMove=n.inputMousePreventDefaultMove,this.preventDefaultWheel=n.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},requestPointerLock:function(){if(l.pointerLock){var n=this.target;n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock()}},releasePointerLock:function(){l.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var n=this.target;if(n){var h=this,d=this.manager,u=d.canvas,p=window&&window.focus&&d.game.config.autoFocus;this.onMouseMove=function(v){!v.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseMove(v),h.preventDefaultMove&&v.preventDefault())},this.onMouseDown=function(v){p&&window.focus(),!v.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseDown(v),h.preventDefaultDown&&v.target===u&&v.preventDefault())},this.onMouseDownWindow=function(v){!v.defaultPrevented&&h.enabled&&d&&d.enabled&&v.target!==u&&d.onMouseDown(v)},this.onMouseUp=function(v){!v.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseUp(v),h.preventDefaultUp&&v.target===u&&v.preventDefault())},this.onMouseUpWindow=function(v){!v.defaultPrevented&&h.enabled&&d&&d.enabled&&v.target!==u&&d.onMouseUp(v)},this.onMouseOver=function(v){!v.defaultPrevented&&h.enabled&&d&&d.enabled&&d.setCanvasOver(v)},this.onMouseOut=function(v){!v.defaultPrevented&&h.enabled&&d&&d.enabled&&d.setCanvasOut(v)},this.onMouseWheel=function(v){!v.defaultPrevented&&h.enabled&&d&&d.enabled&&d.onMouseWheel(v),h.preventDefaultWheel&&v.target===u&&v.preventDefault()};var m={passive:!0};if(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mouseover",this.onMouseOver,m),n.addEventListener("mouseout",this.onMouseOut,m),this.preventDefaultWheel?n.addEventListener("wheel",this.onMouseWheel,{passive:!1}):n.addEventListener("wheel",this.onMouseWheel,m),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,m),window.top.addEventListener("mouseup",this.onMouseUpWindow,m)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,m),window.addEventListener("mouseup",this.onMouseUpWindow,m),this.isTop=!1}l.pointerLock&&(this.pointerLockChange=function(v){var g=h.target;h.locked=document.pointerLockElement===g||document.mozPointerLockElement===g||document.webkitPointerLockElement===g,d.onPointerLockChange(v)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),n.removeEventListener("mouseover",this.onMouseOver),n.removeEventListener("mouseout",this.onMouseOut),window&&(n=this.isTop?window.top:window,n.removeEventListener("mousedown",this.onMouseDownWindow),n.removeEventListener("mouseup",this.onMouseUpWindow)),l.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=i},11343:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={MouseManager:t(7905)}},37579:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(33963),a=t(72283),r=new s({initialize:function(n){this.manager=n,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=a,this.onTouchStartWindow=a,this.onTouchMove=a,this.onTouchEnd=a,this.onTouchEndWindow=a,this.onTouchCancel=a,this.onTouchCancelWindow=a,this.isTop=!0,n.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var i=this.manager.config;this.enabled=i.inputTouch,this.target=i.inputTouchEventTarget,this.capture=i.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,i.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),this},startListeners:function(){var i=this.target;if(i){var n=this,h=this.manager,d=h.canvas,u=window&&window.focus&&h.game.config.autoFocus;this.onTouchMove=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onTouchMove(g),n.capture&&g.cancelable&&g.preventDefault())},this.onTouchStart=function(g){u&&window.focus(),!g.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onTouchStart(g),n.capture&&g.cancelable&&g.target===d&&g.preventDefault())},this.onTouchStartWindow=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&g.target!==d&&h.onTouchStart(g)},this.onTouchEnd=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onTouchEnd(g),n.capture&&g.cancelable&&g.target===d&&g.preventDefault())},this.onTouchEndWindow=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&g.target!==d&&h.onTouchEnd(g)},this.onTouchCancel=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onTouchCancel(g),n.capture&&g.preventDefault())},this.onTouchCancelWindow=function(g){!g.defaultPrevented&&n.enabled&&h&&h.enabled&&h.onTouchCancel(g)};var p=this.capture,m={passive:!0},v={passive:!1};if(i.addEventListener("touchstart",this.onTouchStart,p?v:m),i.addEventListener("touchmove",this.onTouchMove,p?v:m),i.addEventListener("touchend",this.onTouchEnd,p?v:m),i.addEventListener("touchcancel",this.onTouchCancel,p?v:m),window&&h.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,v),window.top.addEventListener("touchend",this.onTouchEndWindow,v),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,v)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var i=this.target;i.removeEventListener("touchstart",this.onTouchStart),i.removeEventListener("touchmove",this.onTouchMove),i.removeEventListener("touchend",this.onTouchEnd),i.removeEventListener("touchcancel",this.onTouchCancel),window&&(i=this.isTop?window.top:window,i.removeEventListener("touchstart",this.onTouchStartWindow),i.removeEventListener("touchend",this.onTouchEndWindow),i.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=r},77423:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TouchManager:t(37579)}},98035:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(683),r=t(72632),i=t(30750),n=t(43531),h=t(88490),d=t(33868),u=new s({initialize:function(m,v){if(this.loader=m,this.cache=r(v,"cache",!1),this.type=r(v,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=r(v,"key",!1);var g=this.key;if(m.prefix&&m.prefix!==""&&(this.key=m.prefix+g),!this.key)throw new Error("Invalid File key: "+this.key);var T=r(v,"url");T===void 0?T=m.path+g+"."+r(v,"extension",""):typeof T=="string"&&!T.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(T=m.path+T),this.url=T,this.src="",this.xhrSettings=d(r(v,"responseType",void 0)),r(v,"xhrSettings",!1)&&(this.xhrSettings=n(this.xhrSettings,r(v,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?l.FILE_POPULATED:l.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=r(v,"config",{}),this.multiFile,this.linkFile},setLink:function(p){this.linkFile=p,p.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===l.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=l.FILE_LOADING,this.src=i(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=h(this,this.loader.xhr))},onLoad:function(p,m){var v=p.responseURL&&this.loader.localSchemes.some(function(w){return p.responseURL.indexOf(w)===0}),g=v&&m.target.status===0,T=!(m.target&&m.target.status!==200)||g;p.readyState===4&&p.status>=400&&p.status<=599&&(T=!1),this.state=l.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,T)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(p){p.lengthComputable&&(this.bytesLoaded=p.loaded,this.bytesTotal=p.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=l.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=l.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=l.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(p){if(this.state!==l.FILE_PENDING_DESTROY){p===void 0&&(p=this.data);var m=this.key,v=this.type;this.loader.emit(a.FILE_COMPLETE,m,v,p),this.loader.emit(a.FILE_KEY_COMPLETE+v+"-"+m,m,v,p),this.loader.flagForRemoval(this),this.state=l.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});u.createObjectURL=function(p,m,v){if(typeof URL=="function")p.src=URL.createObjectURL(m);else{var g=new FileReader;g.onload=function(){p.removeAttribute("crossOrigin"),p.src="data:"+(m.type||v)+";base64,"+g.result.split(",")[1]},g.onerror=p.onerror,g.readAsDataURL(m)}},u.revokeObjectURL=function(p){typeof URL=="function"&&URL.revokeObjectURL(p.src)},o.exports=u},76846:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={},t={install:function(s){for(var l in y)s[l]=y[l]},register:function(s,l){y[s]=l},destroy:function(){y={}}};o.exports=t},30750:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.url?t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:s+t.url:!1};o.exports=y},67285:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(58403),r=t(6659),i=t(683),n=t(76846),h=t(72632),d=t(10850),u=t(91963),p=t(7599),m=t(33868),v=new s({Extends:r,initialize:function(T){r.call(this);var w=T.sys.game.config,b=T.sys.settings.loader;this.scene=T,this.systems=T.sys,this.cacheManager=T.sys.cache,this.textureManager=T.sys.textures,this.sceneManager=T.sys.game.scene,n.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(h(b,"baseURL",w.loaderBaseURL)),this.setPath(h(b,"path",w.loaderPath)),this.setPrefix(h(b,"prefix",w.loaderPrefix)),this.maxParallelDownloads=h(b,"maxParallelDownloads",w.loaderMaxParallelDownloads),this.xhr=m(h(b,"responseType",w.loaderResponseType),h(b,"async",w.loaderAsync),h(b,"user",w.loaderUser),h(b,"password",w.loaderPassword),h(b,"timeout",w.loaderTimeout),h(b,"withCredentials",w.loaderWithCredentials)),this.crossOrigin=h(b,"crossOrigin",w.loaderCrossOrigin),this.imageLoadType=h(b,"imageLoadType",w.loaderImageLoadType),this.localSchemes=h(b,"localScheme",w.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new a,this.inflight=new a,this.queue=new a,this._deleteQueue=new a,this.totalFailed=0,this.totalComplete=0,this.state=l.LOADER_IDLE,this.multiKeyIndex=0,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.pluginStart,this)},boot:function(){this.systems.events.once(p.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(p.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var T=0;T<g.length;T++){var w=g[T];this.keyExists(w)||(this.list.set(w),this.emit(i.ADD,w.key,w.type,this,w),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var T=g.hasCacheConflict();return T||this.list.iterate(function(w){if(w.type===g.type&&w.key===g.key)return T=!0,!1}),!T&&this.isLoading()&&(this.inflight.iterate(function(w){if(w.type===g.type&&w.key===g.key)return T=!0,!1}),this.queue.iterate(function(w){if(w.type===g.type&&w.key===g.key)return T=!0,!1})),T},addPack:function(g,T){if(typeof T=="string"){var w=d(g,T);w&&(g={packKey:w})}var b=0,E=this.baseURL,A=this.path,R=this.prefix;for(var I in g)if(Object.prototype.hasOwnProperty.call(g,I)){var P=g[I],N=h(P,"baseURL",E),F=h(P,"path",A),O=h(P,"prefix",R),D=h(P,"files",null),L=h(P,"defaultType","void");if(Array.isArray(D)){this.setBaseURL(N),this.setPath(F),this.setPrefix(O);for(var z=0;z<D.length;z++){var X=D[z],H=X.hasOwnProperty("type")?X.type:L;this[H]&&(this[H](X),b++)}}}return this.setBaseURL(E),this.setPath(A),this.setPrefix(R),b>0},isLoading:function(){return this.state===l.LOADER_LOADING||this.state===l.LOADER_PROCESSING},isReady:function(){return this.state===l.LOADER_IDLE||this.state===l.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(i.START,this),this.list.size===0?this.loadComplete():(this.state=l.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(p.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(i.PROGRESS,this.progress)},update:function(){this.state===l.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===l.FILE_POPULATED||g.state===l.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,T){this.inflight&&(this.inflight.delete(g),this.updateProgress(),T?(this.totalComplete++,this.queue.set(g),this.emit(i.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(i.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===l.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===l.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&(g.multiFile.addToCache(),g.multiFile.pendingDestroy()):(g.addToCache(),g.pendingDestroy())),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(i.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=l.LOADER_COMPLETE,this.systems.events.off(p.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(i.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,T){return this.save(JSON.stringify(g),T)},save:function(g,T,w){T===void 0&&(T="file.json"),w===void 0&&(w="application/json");var b=new Blob([g],{type:w}),E=URL.createObjectURL(b),A=document.createElement("a");return A.download=T,A.textContent="Download "+T,A.href=E,A.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,T=this.systems.settings.loader;this.setBaseURL(h(T,"baseURL",g.loaderBaseURL)),this.setPath(h(T,"path",g.loaderPath)),this.setPrefix(h(T,"prefix",g.loaderPrefix)),this.state=l.LOADER_IDLE},shutdown:function(){this.reset(),this.state=l.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=l.LOADER_DESTROYED,this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",v,"load"),o.exports=v},43531:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(33868),a=function(r,i){var n=r===void 0?l():s({},r);if(i)for(var h in i)i[h]!==void 0&&(n[h]=i[h]);return n};o.exports=a},45176:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(683),r=new s({initialize:function(n,h,d,u){var p=[];u.forEach(function(g){g&&p.push(g)}),this.loader=n,this.type=h,this.key=d;var m=this.key;n.prefix&&n.prefix!==""&&(this.key=n.prefix+m),this.multiKeyIndex=n.multiKeyIndex++,this.files=p,this.state=l.FILE_PENDING,this.complete=!1,this.pending=p.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var v=0;v<p.length;v++)p[v].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(i){return this.files.push(i),i.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(i){var n=this.files.indexOf(i);n!==-1&&this.pending--},onFileFailed:function(i){var n=this.files.indexOf(i);n!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,i.type,i.key))},pendingDestroy:function(){if(this.state!==l.FILE_PENDING_DESTROY){var i=this.key,n=this.type;this.loader.emit(a.FILE_COMPLETE,i,n),this.loader.emit(a.FILE_KEY_COMPLETE+n+"-"+i,i,n),this.loader.flagForRemoval(this);for(var h=0;h<this.files.length;h++)this.files[h].pendingDestroy();this.state=l.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});o.exports=r},88490:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43531),l=function(a,r){var i=s(r,a.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",a.src,i.async,i.user,i.password),n.responseType=a.xhrSettings.responseType,n.timeout=i.timeout,i.headers)for(var h in i.headers)n.setRequestHeader(h,i.headers[h]);return i.header&&i.headerValue&&n.setRequestHeader(i.header,i.headerValue),i.requestedWith&&n.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&n.overrideMimeType(i.overrideMimeType),i.withCredentials&&(n.withCredentials=!0),n.onload=a.onLoad.bind(a,n),n.onerror=a.onError.bind(a,n),n.onprogress=a.onProgress.bind(a),n.send(),n};o.exports=l},33868:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r,i){return t===void 0&&(t=""),s===void 0&&(s=!0),l===void 0&&(l=""),a===void 0&&(a=""),r===void 0&&(r=0),i===void 0&&(i=!1),{responseType:t,async:s,user:l,password:a,timeout:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:i}};o.exports=y},12117:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};o.exports=y},7398:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addfile"},52187:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},36627:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete"},81925:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete-"},29774:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loaderror"},20943:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="load"},74693:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fileprogress"},71176:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postprocess"},88984:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="progress"},72753:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},683:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:t(7398),COMPLETE:t(52187),FILE_COMPLETE:t(36627),FILE_KEY_COMPLETE:t(81925),FILE_LOAD_ERROR:t(29774),FILE_LOAD:t(20943),FILE_PROGRESS:t(74693),POST_PROCESS:t(71176),PROGRESS:t(88984),START:t(72753)}},46468:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(70806),r=t(683),i=new s({Extends:a,initialize:function(h,d,u,p,m){a.call(this,h,d,u,p,m),this.type="animationJSON"},onProcess:function(){this.loader.once(r.POST_PROCESS,this.onLoadComplete,this),a.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});l.register("animation",function(n,h,d,u){if(Array.isArray(n))for(var p=0;p<n.length;p++)this.addFile(new i(this,n[p]));else this.addFile(new i(this,n,h,u,d));return this}),o.exports=i},31648:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(70806),h=t(45176),d=new s({Extends:h,initialize:function(p,m,v,g,T,w){var b,E;if(i(m)){var A=m;m=a(A,"key"),b=new r(p,{key:m,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),E=new n(p,{key:m,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","json"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new r(p,m,v,T),E=new n(p,m,g,w);b.linkFile?h.call(this,p,"atlasjson",m,[b,E,b.linkFile]):h.call(this,p,"atlasjson",m,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(u.key,u.data,p.data,m),p.addToCache(),this.complete=!0}}});l.register("aseprite",function(u,p,m,v,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,m,v,g),this.addFile(T.files);return this}),o.exports=d},73152:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(70806),h=t(45176),d=new s({Extends:h,initialize:function(p,m,v,g,T,w){var b,E;if(i(m)){var A=m;m=a(A,"key"),b=new r(p,{key:m,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),E=new n(p,{key:m,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","json"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new r(p,m,v,T),E=new n(p,m,g,w);b.linkFile?h.call(this,p,"atlasjson",m,[b,E,b.linkFile]):h.call(this,p,"atlasjson",m,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(u.key,u.data,p.data,m),this.complete=!0}}});l.register("atlas",function(u,p,m,v,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,m,v,g),this.addFile(T.files);return this}),o.exports=d},24616:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(45176),h=t(15297),d=new s({Extends:n,initialize:function(p,m,v,g,T,w){var b,E;if(i(m)){var A=m;m=a(A,"key"),b=new r(p,{key:m,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),E=new h(p,{key:m,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","xml"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new r(p,m,v,T),E=new h(p,m,g,w);b.linkFile?n.call(this,p,"atlasxml",m,[b,E,b.linkFile]):n.call(this,p,"atlasxml",m,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(u.key,u.data,p.data,m),this.complete=!0}}});l.register("atlasXML",function(u,p,m,v,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,m,v,g),this.addFile(T.files);return this}),o.exports=d},67448:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(30929),h=t(42911),d=new s({Extends:a,initialize:function(p,m,v,g,T){if(h(m)){var w=m;m=i(w,"key"),g=i(w,"xhrSettings"),T=i(w,"context",T)}var b={type:"audio",cache:p.cacheManager.audio,extension:v.type,responseType:"arraybuffer",key:m,url:v.url,xhrSettings:g,config:{context:T}};a.call(this,p,b)},onProcess:function(){this.state=l.FILE_PROCESSING;var u=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(p){u.data=p,u.onProcessComplete()},function(p){console.error("Error decoding audio: "+u.key+" - ",p?p.message:null),u.onProcessError()}),this.config.context=null}});d.create=function(u,p,m,v,g){var T=u.systems.game,w=T.config.audio,b=T.device.audio;h(p)&&(m=i(p,"url",[]),v=i(p,"config",{}));var E=d.getAudioURL(T,m);return E?b.webAudio&&!w.disableWebAudio?new d(u,p,E,g,T.sound.context):new n(u,p,E,v):(console.warn('No audio URLs for "%s" matched this device',p),null)},d.getAudioURL=function(u,p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var v=i(p[m],"url",p[m]);if(v.indexOf("blob:")===0||v.indexOf("data:")===0)return{url:v,type:""};var g=v.match(/\.([a-zA-Z0-9]+)($|\?)/);if(g=i(p[m],"type",g?g[1]:"").toLowerCase(),u.device.audio[g])return{url:v,type:g}}return null},r.register("audio",function(u,p,m,v){var g=this.systems.game,T=g.config.audio,w=g.device.audio;if(T.noAudio||!w.webAudio&&!w.audioData)return this;var b;if(Array.isArray(u))for(var E=0;E<u.length;E++)b=d.create(this,u[E]),b&&this.addFile(b);else b=d.create(this,u,p,m,v),b&&this.addFile(b);return this}),o.exports=d},66109:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67448),l=t(56694),a=t(76846),r=t(72632),i=t(42911),n=t(70806),h=t(45176),d=new l({Extends:h,initialize:function(p,m,v,g,T,w,b){if(i(m)){var E=m;m=r(E,"key"),v=r(E,"jsonURL"),g=r(E,"audioURL"),T=r(E,"audioConfig"),w=r(E,"audioXhrSettings"),b=r(E,"jsonXhrSettings")}var A;if(!g)A=new n(p,m,v,b),h.call(this,p,"audiosprite",m,[A]),this.config.resourceLoad=!0,this.config.audioConfig=T,this.config.audioXhrSettings=w;else{var R=s.create(p,m,g,T,w);R&&(A=new n(p,m,v,b),h.call(this,p,"audiosprite",m,[R,A]),this.config.resourceLoad=!1)}},onFileComplete:function(u){var p=this.files.indexOf(u);if(p!==-1&&(this.pending--,this.config.resourceLoad&&u.type==="json"&&u.data.hasOwnProperty("resources"))){var m=u.data.resources,v=r(this.config,"audioConfig"),g=r(this.config,"audioXhrSettings"),T=s.create(this.loader,u.key,m,v,g);T&&(this.addToMultiFile(T),this.loader.addFile(T))}},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1];u.addToCache(),p.addToCache(),this.complete=!0}}});a.register("audioSprite",function(u,p,m,v,g,T){var w=this.systems.game,b=w.config.audio,E=w.device.audio;if(b&&b.noAudio||!E.webAudio&&!E.audioData)return this;var A;if(Array.isArray(u))for(var R=0;R<u.length;R++)A=new d(this,u[R]),A.files&&this.addFile(A.files);else A=new d(this,u,p,m,v,g,T),A.files&&this.addFile(A.files);return this})},40612:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v,g){var T="bin";if(n(p)){var w=p;p=i(w,"key"),m=i(w,"url"),v=i(w,"xhrSettings"),T=i(w,"extension",T),g=i(w,"dataType",g)}var b={type:"binary",cache:u.cacheManager.binary,extension:T,responseType:"arraybuffer",key:p,url:m,xhrSettings:v,config:{dataType:g}};a.call(this,u,b)},onProcess:function(){this.state=l.FILE_PROCESSING;var d=this.config.dataType;this.data=d?new d(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});r.register("binary",function(d,u,p,m){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new h(this,d[v]));else this.addFile(new h(this,d,u,m,p));return this}),o.exports=h},54565:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(45176),h=t(31476),d=t(15297),u=new s({Extends:n,initialize:function(m,v,g,T,w,b){var E,A;if(i(v)){var R=v;v=a(R,"key"),E=new r(m,{key:v,url:a(R,"textureURL"),extension:a(R,"textureExtension","png"),normalMap:a(R,"normalMap"),xhrSettings:a(R,"textureXhrSettings")}),A=new d(m,{key:v,url:a(R,"fontDataURL"),extension:a(R,"fontDataExtension","xml"),xhrSettings:a(R,"fontDataXhrSettings")})}else E=new r(m,v,g,w),A=new d(m,v,T,b);E.linkFile?n.call(this,m,"bitmapfont",v,[E,A,E.linkFile]):n.call(this,m,"bitmapfont",v,[E,A])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],m=this.files[1];p.addToCache();var v=p.cache.get(p.key),g=h(m.data,p.cache.getFrame(p.key),0,0,v);this.loader.cacheManager.bitmapFont.add(p.key,{data:g,texture:p.key,frame:null}),this.complete=!0}}});l.register("bitmapFont",function(p,m,v,g,T){var w;if(Array.isArray(p))for(var b=0;b<p.length;b++)w=new u(this,p[b]),this.addFile(w.files);else w=new u(this,p,m,v,g,T),this.addFile(w.files);return this}),o.exports=u},99898:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v){var g="css";if(n(p)){var T=p;p=i(T,"key"),m=i(T,"url"),v=i(T,"xhrSettings"),g=i(T,"extension",g)}var w={type:"script",cache:!1,extension:g,responseType:"text",key:p,url:m,xhrSettings:v};a.call(this,u,w)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("css",function(d,u,p){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new h(this,d[m]));else this.addFile(new h(this,d,u,p));return this}),o.exports=h},47375:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73152),l=t(40612),a=t(56694),r=t(76846),i=t(72632),n=t(42927),h=t(42911),d=t(70806),u=t(67409),p=t(30657),m=t(80802),v=t(45176),g=t(24904),T=new a({Extends:v,initialize:function(b,E,A,R){if(A.multiAtlasURL){var I=new d(b,{key:E,url:A.multiAtlasURL,xhrSettings:R,config:A});v.call(this,b,"texture",E,[I])}else{var P=A.textureURL.substr(A.textureURL.length-3);A.type||(A.type=P.toLowerCase()==="ktx"?"KTX":"PVR");var N=new l(b,{key:E,url:A.textureURL,extension:P,xhrSettings:R,config:A});if(A.atlasURL){var F=new d(b,{key:E,url:A.atlasURL,xhrSettings:R,config:A});v.call(this,b,"texture",E,[N,F])}else v.call(this,b,"texture",E,[N])}this.config=A},onFileComplete:function(w){var b=this.files.indexOf(w);if(b!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(w.type==="json"&&w.data.hasOwnProperty("textures")){var E=w.data.textures,A=this.config,R=this.loader,I=R.baseURL,P=R.path,N=R.prefix,F=i(A,"multiBaseURL",this.baseURL),O=i(A,"multiPath",this.path),D=i(A,"prefix",this.prefix),L=i(A,"textureXhrSettings");F&&R.setBaseURL(F),O&&R.setPath(O),D&&R.setPrefix(D);for(var z=0;z<E.length;z++){var X=E[z].image,H="CMA"+this.multiKeyIndex+"_"+X,J=new l(R,H,X,L);if(this.addToMultiFile(J),R.addFile(J),E[z].normalMap){var G=new l(R,H,E[z].normalMap,L);G.type="normalMap",J.setLink(G),this.addToMultiFile(G),R.addFile(G)}}R.setBaseURL(I),R.setPath(P),R.setPrefix(N)}}},addToCache:function(){if(this.isReadyToProcess()){var w=this.config;if(w.multiAtlasURL)this.addMultiToCache();else{var b=this.loader.systems.renderer,E=this.loader.textureManager,A,R=this.files[0],I=this.files[1];if(w.type==="PVR"?A=g(R.data):w.type==="KTX"&&(A=u(R.data)),A&&b.supportsCompressedTexture(w.format,A.internalFormat)){A.format=b.getCompressedTextureName(w.format,A.internalFormat);var P=I&&I.data?I.data:null;E.addCompressedTexture(R.key,A,P)}}this.complete=!0}},addMultiToCache:function(){for(var w=this.config,b=this.files[0],E=[],A=[],R=[],I=this.loader.systems.renderer,P=this.loader.textureManager,N,F=1;F<this.files.length;F++){var O=this.files[F];if(O.type!=="normalMap")for(var D=O.key.indexOf("_"),L=O.key.substr(D+1),z=O.data,X=0;X<b.data.textures.length;X++){var H=b.data.textures[X];if(H.image===L){w.type==="PVR"?N=g(z):w.type==="KTX"&&(N=u(z)),N&&I.supportsCompressedTexture(w.format,N.internalFormat)&&(N.format=I.getCompressedTextureName(w.format,N.internalFormat),A.push(N),E.push(H),O.linkFile&&R.push(O.linkFile.data));break}}}R.length===0&&(R=void 0),P.addAtlasJSONArray(this.key,A,E,R),this.complete=!0}});r.register("texture",function(w,b,E){var A=this.systems.renderer,R=function(P,N,F,O){var D={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(h(N)){var L=N;N=i(L,"key"),F=i(L,"url"),O=i(L,"xhrSettings")}var z=!1;for(var X in F)if(A.supportsCompressedTexture(X)){var H=F[X];typeof H=="string"?D.textureURL=H:D=p(H,D),D.format=X.toUpperCase(),z=!0;break}if(!z)console.warn("No supported compressed texture format or IMG fallback",N);else if(D.format==="IMG"){var J,G;D.multiAtlasURL?(G=new m(P,N,D.multiAtlasURL,D.multiPath,D.multiBaseURL,O),J=G.files):D.atlasURL?(G=new s(P,N,D.textureURL,D.atlasURL,O),J=G.files):J=new n(P,N,D.textureURL,O),P.addFile(J)}else{var k=new T(P,N,D,O);P.addFile(k.files)}};if(Array.isArray(w))for(var I=0;I<w.length;I++)R(this,w[I]);else R(this,w,b,E);return this}),o.exports=T},46568:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=t(31053),d=new s({Extends:a,initialize:function(p,m,v,g,T){var w="glsl";if(n(m)){var b=m;m=i(b,"key"),v=i(b,"url"),g=i(b,"shaderType","fragment"),T=i(b,"xhrSettings"),w=i(b,"extension",w)}else g===void 0&&(g="fragment");var E={type:"glsl",cache:p.cacheManager.shader,extension:w,responseType:"text",key:m,url:v,config:{shaderType:g},xhrSettings:T};a.call(this,p,E)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.split(`
`),p=this.extractBlock(u,0);if(p)for(;p;){var m=this.getShaderName(p.header),v=this.getShaderType(p.header),g=this.getShaderUniforms(p.header),T=p.shader;if(this.cache.has(m)){var w=this.cache.get(m);v==="fragment"?w.fragmentSrc=T:w.vertexSrc=T,w.uniforms||(w.uniforms=g)}else v==="fragment"?this.cache.add(m,new h(m,T,"",g)):this.cache.add(m,new h(m,"",T,g));p=this.extractBlock(u,p.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new h(this.key,this.data)):this.cache.add(this.key,new h(this.key,"",this.data))},getShaderName:function(u){for(var p=0;p<u.length;p++){var m=u[p].trim();if(m.substring(0,5)==="name:")return m.substring(5).trim()}return this.key},getShaderType:function(u){for(var p=0;p<u.length;p++){var m=u[p].trim();if(m.substring(0,5)==="type:")return m.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(u){for(var p={},m=0;m<u.length;m++){var v=u[m].trim();if(v.substring(0,8)==="uniform."){var g=v.indexOf(":");if(g){var T=v.substring(8,g);try{p[T]=JSON.parse(v.substring(g+1))}catch{console.warn("Invalid uniform JSON: "+T)}}}}return p},extractBlock:function(u,p){for(var m=-1,v=-1,g=-1,T=!1,w=!1,b=[],E=[],A=p;A<u.length;A++){var R=u[A].trim();if(R==="---")if(m===-1)m=A,T=!0;else if(T)v=A,T=!1,w=!0;else{w=!1;break}else T?b.push(R):w&&(E.push(R),g=A)}return!T&&v!==-1?{header:b,shader:E.join(`
`),offset:g}:null}});r.register("glsl",function(u,p,m,v){if(Array.isArray(u))for(var g=0;g<u.length;g++)this.addFile(new d(this,u[g]));else this.addFile(new d(this,u,p,m,v));return this}),o.exports=d},30929:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(683),a=t(98035),r=t(72632),i=t(30750),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v){if(n(p)){var g=p;p=r(g,"key"),v=r(g,"config",v)}var T={type:"audio",cache:u.cacheManager.audio,extension:m.type,key:p,url:m.url,config:v};a.call(this,u,T),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var d=0;d<this.data.length;d++){var u=this.data[d];u.oncanplaythrough=null,u.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(d){var u=d.target;u.oncanplaythrough=null,u.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(l.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var d=this.config&&this.config.instances||1;this.filesTotal=d,this.filesLoaded=0,this.percentComplete=0;for(var u=0;u<d;u++){var p=new Audio;p.dataset||(p.dataset={}),p.dataset.name=this.key+("0"+u).slice(-2),p.dataset.used="false",this.locked?p.dataset.locked="true":(p.dataset.locked="false",p.preload="auto",p.oncanplaythrough=this.onProgress.bind(this),p.onerror=this.onError.bind(this)),this.data.push(p)}for(u=0;u<this.data.length;u++)p=this.data[u],p.src=i(this,this.loader.baseURL),this.locked||p.load();this.locked&&setTimeout(this.onLoad.bind(this))}});o.exports=h},77459:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v){var g="html";if(n(p)){var T=p;p=i(T,"key"),m=i(T,"url"),v=i(T,"xhrSettings"),g=i(T,"extension",g)}var w={type:"text",cache:u.cacheManager.html,extension:g,responseType:"text",key:p,url:m,xhrSettings:v};a.call(this,u,w)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("html",function(d,u,p){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new h(this,d[m]));else this.addFile(new h(this,d,u,p));return this}),o.exports=h},9755:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v,g,T){v===void 0&&(v=512),g===void 0&&(g=512);var w="html";if(n(p)){var b=p;p=i(b,"key"),m=i(b,"url"),T=i(b,"xhrSettings"),w=i(b,"extension",w),v=i(b,"width",v),g=i(b,"height",g)}var E={type:"html",cache:u.textureManager,extension:w,responseType:"text",key:p,url:m,xhrSettings:T,config:{width:v,height:g}};a.call(this,u,E)},onProcess:function(){this.state=l.FILE_PROCESSING;var d=this.config.width,u=this.config.height,p=[];p.push('<svg width="'+d+'px" height="'+u+'px" viewBox="0 0 '+d+" "+u+'" xmlns="http://www.w3.org/2000/svg">'),p.push('<foreignObject width="100%" height="100%">'),p.push('<body xmlns="http://www.w3.org/1999/xhtml">'),p.push(this.xhrLoader.responseText),p.push("</body>"),p.push("</foreignObject>"),p.push("</svg>");var m=[p.join(`
`)],v=this;try{var g=new window.Blob(m,{type:"image/svg+xml;charset=utf-8"})}catch{v.state=l.FILE_ERRORED,v.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){a.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(v.data),v.onProcessError()},a.createObjectURL(this.data,g,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("htmlTexture",function(d,u,p,m,v){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,u,p,m,v));return this}),o.exports=h},42927:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=t(30750),d=new s({Extends:a,initialize:function u(p,m,v,g,T){var w="png",b;if(n(m)){var E=m;m=i(E,"key"),v=i(E,"url"),b=i(E,"normalMap"),g=i(E,"xhrSettings"),w=i(E,"extension",w),T=i(E,"frameConfig")}Array.isArray(v)&&(b=v[1],v=v[0]);var A={type:"image",cache:p.textureManager,extension:w,responseType:"blob",key:m,url:v,xhrSettings:g,config:T};if(a.call(this,p,A),b){var R=new u(p,this.key,b,g,T);R.type="normalMap",this.setLink(R),p.addFile(R)}this.useImageElementLoad=p.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this;this.data.onload=function(){a.revokeObjectURL(u.data),u.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(u.data),u.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var u=this.state;this.state=l.FILE_PROCESSING,u===l.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=l.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this;this.data.onload=function(){u.state=l.FILE_LOADED,u.loader.nextFile(u,!0)},this.data.onerror=function(){u.loader.nextFile(u,!1)},this.data.src=this.src}},addToCache:function(){var u=this.linkFile;u?u.state>=l.FILE_COMPLETE&&(u.type==="spritesheet"?u.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,u.data,this.data):this.cache.addImage(this.key,this.data,u.data)):this.cache.addImage(this.key,this.data)}});r.register("image",function(u,p,m){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new d(this,u[v]));else this.addFile(new d(this,u,p,m));return this}),o.exports=d},70806:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(10850),h=t(42911),d=new s({Extends:a,initialize:function(p,m,v,g,T){var w="json";if(h(m)){var b=m;m=i(b,"key"),v=i(b,"url"),g=i(b,"xhrSettings"),w=i(b,"extension",w),T=i(b,"dataKey",T)}var E={type:"json",cache:p.cacheManager.json,extension:w,responseType:"text",key:m,url:v,xhrSettings:g,config:T};a.call(this,p,E),h(v)&&(T?this.data=n(v,T):this.data=v,this.state=l.FILE_POPULATED)},onProcess:function(){if(this.state!==l.FILE_POPULATED){this.state=l.FILE_PROCESSING;try{var u=JSON.parse(this.xhrLoader.responseText)}catch(m){throw this.onProcessError(),m}var p=this.config;typeof p=="string"?this.data=n(u,p,u):this.data=u}this.onProcessComplete()}});r.register("json",function(u,p,m,v){if(Array.isArray(u))for(var g=0;g<u.length;g++)this.addFile(new d(this,u[g]));else this.addFile(new d(this,u,p,v,m));return this}),o.exports=d},80802:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(70806),h=t(45176),d=new s({Extends:h,initialize:function(p,m,v,g,T,w,b){if(i(m)){var E=m;m=a(E,"key"),a(E,"url",!1)?v=a(E,"url"):v=a(E,"atlasURL"),w=a(E,"xhrSettings"),g=a(E,"path"),T=a(E,"baseURL"),b=a(E,"textureXhrSettings")}var A=new n(p,m,v,w);h.call(this,p,"multiatlas",m,[A]),this.config.path=g,this.config.baseURL=T,this.config.textureXhrSettings=b},onFileComplete:function(u){var p=this.files.indexOf(u);if(p!==-1&&(this.pending--,u.type==="json"&&u.data.hasOwnProperty("textures"))){var m=u.data.textures,v=this.config,g=this.loader,T=g.baseURL,w=g.path,b=g.prefix,E=a(v,"baseURL",this.baseURL),A=a(v,"path",this.path),R=a(v,"prefix",this.prefix),I=a(v,"textureXhrSettings");g.setBaseURL(E),g.setPath(A),g.setPrefix(R);for(var P=0;P<m.length;P++){var N=m[P].image,F="MA"+this.multiKeyIndex+"_"+N,O=new r(g,F,N,I);if(this.addToMultiFile(O),g.addFile(O),m[P].normalMap){var D=new r(g,F,m[P].normalMap,I);D.type="normalMap",O.setLink(D),this.addToMultiFile(D),g.addFile(D)}}g.setBaseURL(T),g.setPath(w),g.setPrefix(b)}},addToCache:function(){if(this.isReadyToProcess()){for(var u=this.files[0],p=[],m=[],v=[],g=1;g<this.files.length;g++){var T=this.files[g];if(T.type!=="normalMap")for(var w=T.key.indexOf("_"),b=T.key.substr(w+1),E=T.data,A=0;A<u.data.textures.length;A++){var R=u.data.textures[A];if(R.image===b){m.push(E),p.push(R),T.linkFile&&v.push(T.linkFile.data);break}}}v.length===0&&(v=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,m,p,v),this.complete=!0}}});l.register("multiatlas",function(u,p,m,v,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,m,v,g),this.addFile(T.files);return this}),o.exports=d},39034:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42911),i=t(45176),n=t(55188),h=new s({Extends:i,initialize:function(u,p,m,v){var g="js",T=[];if(r(p)){var w=p;p=a(w,"key"),m=a(w,"url"),v=a(w,"xhrSettings"),g=a(w,"extension",g)}Array.isArray(m)||(m=[m]);for(var b=0;b<m.length;b++){var E=new n(u,{key:p+"_"+b.toString(),url:m[b],extension:g,xhrSettings:v});E.onProcess=function(){this.onProcessComplete()},T.push(E)}i.call(this,u,"scripts",p,T)},addToCache:function(){if(this.isReadyToProcess()){for(var d=0;d<this.files.length;d++){var u=this.files[d];u.data=document.createElement("script"),u.data.language="javascript",u.data.type="text/javascript",u.data.defer=!1,u.data.text=u.xhrLoader.responseText,document.head.appendChild(u.data)}this.complete=!0}}});l.register("scripts",function(d,u,p){var m;if(Array.isArray(d))for(var v=0;v<d.length;v++)m=new h(this,d[v]),this.addFile(m.files);else m=new h(this,d,u,p),this.addFile(m.files);return this}),o.exports=h},85527:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42911),i=t(45176),n=t(27291),h=t(76799),d=t(86897),u=new s({Extends:i,initialize:function(m,v,g,T,w,b){var E,A,R=m.cacheManager.obj;if(r(v)){var I=v;v=a(I,"key"),E=new d(m,{key:v,type:"obj",cache:R,url:a(I,"url"),extension:a(I,"extension","obj"),xhrSettings:a(I,"xhrSettings"),config:{flipUV:a(I,"flipUV",w)}}),T=a(I,"matURL"),T&&(A=new d(m,{key:v,type:"mat",cache:R,url:T,extension:a(I,"matExtension","mat"),xhrSettings:a(I,"xhrSettings")}))}else E=new d(m,{key:v,url:g,type:"obj",cache:R,extension:"obj",xhrSettings:b,config:{flipUV:w}}),T&&(A=new d(m,{key:v,url:T,type:"mat",cache:R,extension:"mat",xhrSettings:b}));i.call(this,m,"obj",v,[E,A])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],m=this.files[1],v=n(p.data,p.config.flipUV);m&&(v.materials=h(m.data)),p.cache.add(p.key,v),this.complete=!0}}});l.register("obj",function(p,m,v,g,T){var w;if(Array.isArray(p))for(var b=0;b<p.length;b++)w=new u(this,p[b]),this.addFile(w.files);else w=new u(this,p,m,v,g,T),this.addFile(w.files);return this}),o.exports=u},3616:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(76846),r=t(70806),i=new s({Extends:r,initialize:function(h,d,u,p,m){r.call(this,h,d,u,p,m),this.type="packfile"},onProcess:function(){if(this.state!==l.FILE_POPULATED&&(this.state=l.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var n={};n[this.config]=this.data,this.data=n}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});a.register("pack",function(n,h,d,u){if(Array.isArray(n))for(var p=0;p<n.length;p++)this.addFile(new i(this,n[p]));else this.addFile(new i(this,n,h,u,d));return this}),o.exports=i},12217:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v,g,T){var w="js";if(n(p)){var b=p;p=i(b,"key"),m=i(b,"url"),T=i(b,"xhrSettings"),w=i(b,"extension",w),v=i(b,"start"),g=i(b,"mapping")}var E={type:"plugin",cache:!1,extension:w,responseType:"text",key:p,url:m,xhrSettings:T,config:{start:v,mapping:g}};a.call(this,u,E),typeof m=="function"&&(this.data=m,this.state=l.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,u=this.config,p=i(u,"start",!1),m=i(u,"mapping",null);if(this.state===l.FILE_POPULATED)d.install(this.key,this.data,p,m);else{this.state=l.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var v=d.install(this.key,window[this.key],p,m);(p||m)&&(this.loader.systems[m]=v,this.loader.scene[m]=v)}this.onProcessComplete()}});r.register("plugin",function(d,u,p,m,v){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,u,p,m,v));return this}),o.exports=h},4474:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v,g){var T="svg";if(n(p)){var w=p;p=i(w,"key"),m=i(w,"url"),v=i(w,"svgConfig",{}),g=i(w,"xhrSettings"),T=i(w,"extension",T)}var b={type:"svg",cache:u.textureManager,extension:T,responseType:"text",key:p,url:m,xhrSettings:g,config:{width:i(v,"width"),height:i(v,"height"),scale:i(v,"scale")}};a.call(this,u,b)},onProcess:function(){this.state=l.FILE_PROCESSING;var d=this.xhrLoader.responseText,u=[d],p=this.config.width,m=this.config.height,v=this.config.scale;t:if(p&&m||v){var g=null,T=new DOMParser;g=T.parseFromString(d,"text/xml");var w=g.getElementsByTagName("svg")[0],b=w.hasAttribute("viewBox"),E=parseFloat(w.getAttribute("width")),A=parseFloat(w.getAttribute("height"));if(!b&&E&&A)w.setAttribute("viewBox","0  0 "+E+" "+A);else if(b&&!E&&!A){var R=w.getAttribute("viewBox").split(/\s+|,/);E=R[2],A=R[3]}if(v)if(E&&A)p=E*v,m=A*v;else break t;w.setAttribute("width",p.toString()+"px"),w.setAttribute("height",m.toString()+"px"),u=[new XMLSerializer().serializeToString(w)]}try{var I=new window.Blob(u,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var P=this,N=!1;this.data.onload=function(){N||a.revokeObjectURL(P.data),P.onProcessComplete()},this.data.onerror=function(){N?P.onProcessError():(N=!0,a.revokeObjectURL(P.data),P.data.src="data:image/svg+xml,"+encodeURIComponent(u.join("")))},a.createObjectURL(this.data,I,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("svg",function(d,u,p,m){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new h(this,d[v]));else this.addFile(new h(this,d,u,p,m));return this}),o.exports=h},95171:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v){var g="js";if(n(p)){var T=p;p=i(T,"key"),m=i(T,"url"),v=i(T,"xhrSettings"),g=i(T,"extension",g)}var w={type:"text",extension:g,responseType:"text",key:p,url:m,xhrSettings:v};a.call(this,u,w)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),u=eval;this.loader.sceneManager.add(this.key,u(d)),this.complete=!0}});r.register("sceneFile",function(d,u,p){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new h(this,d[m]));else this.addFile(new h(this,d,u,p));return this}),o.exports=h},82458:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v,g,T){var w="js";if(n(p)){var b=p;p=i(b,"key"),m=i(b,"url"),T=i(b,"xhrSettings"),w=i(b,"extension",w),v=i(b,"systemKey"),g=i(b,"sceneKey")}var E={type:"scenePlugin",cache:!1,extension:w,responseType:"text",key:p,url:m,xhrSettings:T,config:{systemKey:v,sceneKey:g}};a.call(this,u,E),typeof m=="function"&&(this.data=m,this.state=l.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,u=this.config,p=this.key,m=i(u,"systemKey",p),v=i(u,"sceneKey",p);this.state===l.FILE_POPULATED?d.installScenePlugin(m,this.data,v,this.loader.scene,!0):(this.state=l.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),d.installScenePlugin(m,window[this.key],v,this.loader.scene,!0)),this.onProcessComplete()}});r.register("scenePlugin",function(d,u,p,m,v){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,u,p,m,v));return this}),o.exports=h},55188:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v,g){var T="js";if(n(p)){var w=p;p=i(w,"key"),m=i(w,"url"),v=i(w,"type","script"),g=i(w,"xhrSettings"),T=i(w,"extension",T)}else v===void 0&&(v="script");var b={type:v,cache:!1,extension:T,responseType:"text",key:p,url:m,xhrSettings:g};a.call(this,u,b)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("script",function(d,u,p,m){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new h(this,d[v]));else this.addFile(new h(this,d,u,p,m));return this}),o.exports=h},33536:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(76846),r=t(42927),i=new s({Extends:r,initialize:function(h,d,u,p,m){r.call(this,h,d,u,m,p),this.type="spritesheet"},addToCache:function(){var n=this.linkFile;n?n.state>=l.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,n.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,n.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});a.register("spritesheet",function(n,h,d,u){if(Array.isArray(n))for(var p=0;p<n.length;p++)this.addFile(new i(this,n[p]));else this.addFile(new i(this,n,h,d,u));return this}),o.exports=i},86897:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=new s({Extends:a,initialize:function(u,p,m,v){var g="text",T="txt",w=u.cacheManager.text;if(n(p)){var b=p;p=i(b,"key"),m=i(b,"url"),v=i(b,"xhrSettings"),T=i(b,"extension",T),g=i(b,"type",g),w=i(b,"cache",w)}var E={type:g,cache:w,extension:T,responseType:"text",key:p,url:m,xhrSettings:v};a.call(this,u,E)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("text",function(d,u,p){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new h(this,d[m]));else this.addFile(new h(this,d,u,p));return this}),o.exports=h},58673:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=t(93560),d=new s({Extends:a,initialize:function(p,m,v,g){var T="csv";if(n(m)){var w=m;m=i(w,"key"),v=i(w,"url"),g=i(w,"xhrSettings"),T=i(w,"extension",T)}var b={type:"tilemapCSV",cache:p.cacheManager.tilemap,extension:T,responseType:"text",key:m,url:v,xhrSettings:g};a.call(this,p,b),this.tilemapFormat=h.CSV},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,u)}});r.register("tilemapCSV",function(u,p,m){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new d(this,u[v]));else this.addFile(new d(this,u,p,m));return this}),o.exports=d},98896:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(70806),r=t(93560),i=new s({Extends:a,initialize:function(h,d,u,p){a.call(this,h,d,u,p),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var n={format:r.WELTMEISTER,data:this.data};this.cache.add(this.key,n)}});l.register("tilemapImpact",function(n,h,d){if(Array.isArray(n))for(var u=0;u<n.length;u++)this.addFile(new i(this,n[u]));else this.addFile(new i(this,n,h,d));return this}),o.exports=i},50563:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(70806),r=t(93560),i=new s({Extends:a,initialize:function(h,d,u,p){a.call(this,h,d,u,p),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var n={format:r.TILED_JSON,data:this.data};this.cache.add(this.key,n)}});l.register("tilemapTiledJSON",function(n,h,d){if(Array.isArray(n))for(var u=0;u<n.length;u++)this.addFile(new i(this,n[u]));else this.addFile(new i(this,n,h,d));return this}),o.exports=i},82857:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(76846),a=t(72632),r=t(42927),i=t(42911),n=t(45176),h=t(86897),d=new s({Extends:n,initialize:function(p,m,v,g,T,w){var b,E;if(i(m)){var A=m;m=a(A,"key"),b=new r(p,{key:m,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),E=new h(p,{key:m,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","txt"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new r(p,m,v,T),E=new h(p,m,g,w);b.linkFile?n.call(this,p,"unityatlas",m,[b,E,b.linkFile]):n.call(this,p,"unityatlas",m,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(u.key,u.data,p.data,m),this.complete=!0}}});l.register("unityAtlas",function(u,p,m,v,g){var T;if(Array.isArray(u))for(var w=0;w<u.length;w++)T=new d(this,u[w]),this.addFile(T.files);else T=new d(this,u,p,m,v,g),this.addFile(T.files);return this}),o.exports=d},22833:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(30750),n=t(72632),h=t(42911),d=new s({Extends:a,initialize:function(p,m,v,g){if(g===void 0&&(g=!1),h(m)){var T=m;m=n(T,"key"),v=n(T,"url",[]),g=n(T,"noAudio",!1)}var w=p.systems.game.device.video.getVideoURL(v);w||console.warn("VideoFile: No supported format for "+m);var b={type:"video",cache:p.cacheManager.video,extension:w.type,key:m,url:w.url,config:{noAudio:g}};a.call(this,p,b)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=i(this,this.loader.baseURL),this.state=l.FILE_LOADED,this.loader.nextFile(this,!0)}});r.register("video",function(u,p,m){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new d(this,u[v]));else this.addFile(new d(this,u,p,m));return this}),o.exports=d},15297:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12117),a=t(98035),r=t(76846),i=t(72632),n=t(42911),h=t(89200),d=new s({Extends:a,initialize:function(p,m,v,g){var T="xml";if(n(m)){var w=m;m=i(w,"key"),v=i(w,"url"),g=i(w,"xhrSettings"),T=i(w,"extension",T)}var b={type:"xml",cache:p.cacheManager.xml,extension:T,responseType:"text",key:m,url:v,xhrSettings:g};a.call(this,p,b)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=h(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});r.register("xml",function(u,p,m){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new d(this,u[v]));else this.addFile(new d(this,u,p,m));return this}),o.exports=d},34034:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AnimationJSONFile:t(46468),AsepriteFile:t(31648),AtlasJSONFile:t(73152),AtlasXMLFile:t(24616),AudioFile:t(67448),AudioSpriteFile:t(66109),BinaryFile:t(40612),BitmapFontFile:t(54565),CompressedTextureFile:t(47375),CSSFile:t(99898),GLSLFile:t(46568),HTML5AudioFile:t(30929),HTMLFile:t(77459),HTMLTextureFile:t(9755),ImageFile:t(42927),JSONFile:t(70806),MultiAtlasFile:t(80802),MultiScriptFile:t(39034),OBJFile:t(85527),PackFile:t(3616),PluginFile:t(12217),SceneFile:t(95171),ScenePluginFile:t(82458),ScriptFile:t(55188),SpriteSheetFile:t(33536),SVGFile:t(4474),TextFile:t(86897),TilemapCSVFile:t(58673),TilemapImpactFile:t(98896),TilemapJSONFile:t(50563),UnityAtlasFile:t(82857),VideoFile:t(22833),XMLFile:t(15297)}},95695:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12117),l=t(98611),a={Events:t(683),FileTypes:t(34034),File:t(98035),FileTypesManager:t(76846),GetURL:t(30750),LoaderPlugin:t(67285),MergeXHRSettings:t(43531),MultiFile:t(45176),XHRLoader:t(88490),XHRSettings:t(33868)};a=l(!1,a,s),o.exports=a},26042:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){for(var s=0,l=0;l<t.length;l++)s+=+t[l];return s/t.length};o.exports=y},22824:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(8034),l=function(a,r){return s(a)/s(r)/s(a-r)};o.exports=l},17489:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return Math.floor(Math.random()*(s-t+1)+t)};o.exports=y},14976:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r){var i=(a-s)*.5,n=(r-l)*.5,h=t*t,d=t*h;return(2*l-2*a+i+n)*d+(-3*l+3*a-2*i-n)*h+i*t+l};o.exports=y},89129:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){s===void 0&&(s=0),l===void 0&&(l=10);var a=Math.pow(l,-s);return Math.ceil(t*a)/a};o.exports=y},82897:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return Math.max(s,Math.min(l,t))};o.exports=y},75606:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=function(a){return a*s.DEG_TO_RAD};o.exports=l},767:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return Math.abs(t-s)};o.exports=y},9849:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(16650),r=t(72283),i=new a,n=new l({initialize:function h(d,u,p,m){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m=h.DefaultOrder),this._x=d,this._y=u,this._z=p,this._order=m,this.onChangeCallback=r},x:{get:function(){return this._x},set:function(h){this._x=h,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(h){this._y=h,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(h){this._z=h,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(h){this._order=h,this.onChangeCallback(this)}},set:function(h,d,u,p){return p===void 0&&(p=this._order),this._x=h,this._y=d,this._z=u,this._order=p,this.onChangeCallback(this),this},copy:function(h){return this.set(h.x,h.y,h.z,h.order)},setFromQuaternion:function(h,d,u){return d===void 0&&(d=this._order),u===void 0&&(u=!1),i.fromQuat(h),this.setFromRotationMatrix(i,d,u)},setFromRotationMatrix:function(h,d,u){d===void 0&&(d=this._order),u===void 0&&(u=!1);var p=h.val,m=p[0],v=p[4],g=p[8],T=p[1],w=p[5],b=p[9],E=p[2],A=p[6],R=p[10],I=0,P=0,N=0,F=.99999;switch(d){case"XYZ":{P=Math.asin(s(g,-1,1)),Math.abs(g)<F?(I=Math.atan2(-b,R),N=Math.atan2(-v,m)):I=Math.atan2(A,w);break}case"YXZ":{I=Math.asin(-s(b,-1,1)),Math.abs(b)<F?(P=Math.atan2(g,R),N=Math.atan2(T,w)):P=Math.atan2(-E,m);break}case"ZXY":{I=Math.asin(s(A,-1,1)),Math.abs(A)<F?(P=Math.atan2(-E,R),N=Math.atan2(-v,w)):N=Math.atan2(T,m);break}case"ZYX":{P=Math.asin(-s(E,-1,1)),Math.abs(E)<F?(I=Math.atan2(A,R),N=Math.atan2(T,m)):N=Math.atan2(-v,w);break}case"YZX":{N=Math.asin(s(T,-1,1)),Math.abs(T)<F?(I=Math.atan2(-b,w),P=Math.atan2(-E,m)):P=Math.atan2(g,R);break}case"XZY":{N=Math.asin(-s(v,-1,1)),Math.abs(v)<F?(I=Math.atan2(A,w),P=Math.atan2(g,m)):I=Math.atan2(-b,R);break}}return this._x=I,this._y=P,this._z=N,this._order=d,u&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",o.exports=n},8034:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){if(t===0)return 1;for(var s=t;--t;)s*=t;return s};o.exports=y},61616:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return Math.random()*(s-t)+t};o.exports=y},60679:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){s===void 0&&(s=0),l===void 0&&(l=10);var a=Math.pow(l,-s);return Math.floor(t*a)/a};o.exports=y},91806:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=function(a,r,i){return a=s(a,0,1),(i-r)*a+r};o.exports=l},79366:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t/s/1e3};o.exports=y},43776:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t==parseFloat(t)?!(t%2):void 0};o.exports=y},58442:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t===parseFloat(t)?!(t%2):void 0};o.exports=y},42798:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return(s-t)*l+t};o.exports=y},61072:o=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return l===void 0&&(l=0),t.clone().lerp(s,l)};o.exports=y},5341:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){this.val=new Float32Array(9),r?this.copy(r):this.identity()},clone:function(){return new l(this)},set:function(a){return this.copy(a)},copy:function(a){var r=this.val,i=a.val;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],this},fromMat4:function(a){var r=a.val,i=this.val;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[4],i[4]=r[5],i[5]=r[6],i[6]=r[8],i[7]=r[9],i[8]=r[10],this},fromArray:function(a){var r=this.val;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],this},identity:function(){var a=this.val;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,this},transpose:function(){var a=this.val,r=a[1],i=a[2],n=a[5];return a[1]=a[3],a[2]=a[6],a[3]=r,a[5]=a[7],a[6]=i,a[7]=n,this},invert:function(){var a=this.val,r=a[0],i=a[1],n=a[2],h=a[3],d=a[4],u=a[5],p=a[6],m=a[7],v=a[8],g=v*d-u*m,T=-v*h+u*p,w=m*h-d*p,b=r*g+i*T+n*w;return b?(b=1/b,a[0]=g*b,a[1]=(-v*i+n*m)*b,a[2]=(u*i-n*d)*b,a[3]=T*b,a[4]=(v*r-n*p)*b,a[5]=(-u*r+n*h)*b,a[6]=w*b,a[7]=(-m*r+i*p)*b,a[8]=(d*r-i*h)*b,this):null},adjoint:function(){var a=this.val,r=a[0],i=a[1],n=a[2],h=a[3],d=a[4],u=a[5],p=a[6],m=a[7],v=a[8];return a[0]=d*v-u*m,a[1]=n*m-i*v,a[2]=i*u-n*d,a[3]=u*p-h*v,a[4]=r*v-n*p,a[5]=n*h-r*u,a[6]=h*m-d*p,a[7]=i*p-r*m,a[8]=r*d-i*h,this},determinant:function(){var a=this.val,r=a[0],i=a[1],n=a[2],h=a[3],d=a[4],u=a[5],p=a[6],m=a[7],v=a[8];return r*(v*d-u*m)+i*(-v*h+u*p)+n*(m*h-d*p)},multiply:function(a){var r=this.val,i=r[0],n=r[1],h=r[2],d=r[3],u=r[4],p=r[5],m=r[6],v=r[7],g=r[8],T=a.val,w=T[0],b=T[1],E=T[2],A=T[3],R=T[4],I=T[5],P=T[6],N=T[7],F=T[8];return r[0]=w*i+b*d+E*m,r[1]=w*n+b*u+E*v,r[2]=w*h+b*p+E*g,r[3]=A*i+R*d+I*m,r[4]=A*n+R*u+I*v,r[5]=A*h+R*p+I*g,r[6]=P*i+N*d+F*m,r[7]=P*n+N*u+F*v,r[8]=P*h+N*p+F*g,this},translate:function(a){var r=this.val,i=a.x,n=a.y;return r[6]=i*r[0]+n*r[3]+r[6],r[7]=i*r[1]+n*r[4]+r[7],r[8]=i*r[2]+n*r[5]+r[8],this},rotate:function(a){var r=this.val,i=r[0],n=r[1],h=r[2],d=r[3],u=r[4],p=r[5],m=Math.sin(a),v=Math.cos(a);return r[0]=v*i+m*d,r[1]=v*n+m*u,r[2]=v*h+m*p,r[3]=v*d-m*i,r[4]=v*u-m*n,r[5]=v*p-m*h,this},scale:function(a){var r=this.val,i=a.x,n=a.y;return r[0]=i*r[0],r[1]=i*r[1],r[2]=i*r[2],r[3]=n*r[3],r[4]=n*r[4],r[5]=n*r[5],this},fromQuat:function(a){var r=a.x,i=a.y,n=a.z,h=a.w,d=r+r,u=i+i,p=n+n,m=r*d,v=r*u,g=r*p,T=i*u,w=i*p,b=n*p,E=h*d,A=h*u,R=h*p,I=this.val;return I[0]=1-(T+b),I[3]=v+R,I[6]=g-A,I[1]=v-R,I[4]=1-(m+b),I[7]=w+E,I[2]=g+A,I[5]=w-E,I[8]=1-(m+T),this},normalFromMat4:function(a){var r=a.val,i=this.val,n=r[0],h=r[1],d=r[2],u=r[3],p=r[4],m=r[5],v=r[6],g=r[7],T=r[8],w=r[9],b=r[10],E=r[11],A=r[12],R=r[13],I=r[14],P=r[15],N=n*m-h*p,F=n*v-d*p,O=n*g-u*p,D=h*v-d*m,L=h*g-u*m,z=d*g-u*v,X=T*R-w*A,H=T*I-b*A,J=T*P-E*A,G=w*I-b*R,k=w*P-E*R,M=b*P-E*I,B=N*M-F*k+O*G+D*J-L*H+z*X;return B?(B=1/B,i[0]=(m*M-v*k+g*G)*B,i[1]=(v*J-p*M-g*H)*B,i[2]=(p*k-m*J+g*X)*B,i[3]=(d*k-h*M-u*G)*B,i[4]=(n*M-d*J+u*H)*B,i[5]=(h*J-n*k-u*X)*B,i[6]=(R*z-I*L+P*D)*B,i[7]=(I*O-A*z-P*F)*B,i[8]=(A*L-R*O+P*N)*B,this):null}});o.exports=l},16650:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(70015),a=1e-6,r=new s({initialize:function(m){this.val=new Float32Array(16),m?this.copy(m):this.identity()},clone:function(){return new r(this)},set:function(p){return this.copy(p)},setValues:function(p,m,v,g,T,w,b,E,A,R,I,P,N,F,O,D){var L=this.val;return L[0]=p,L[1]=m,L[2]=v,L[3]=g,L[4]=T,L[5]=w,L[6]=b,L[7]=E,L[8]=A,L[9]=R,L[10]=I,L[11]=P,L[12]=N,L[13]=F,L[14]=O,L[15]=D,this},copy:function(p){var m=p.val;return this.setValues(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15])},fromArray:function(p){return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(p,m,v){var g=i.fromQuat(v),T=g.val,w=m.x,b=m.y,E=m.z;return this.setValues(T[0]*w,T[1]*w,T[2]*w,0,T[4]*b,T[5]*b,T[6]*b,0,T[8]*E,T[9]*E,T[10]*E,0,p.x,p.y,p.z,1)},xyz:function(p,m,v){this.identity();var g=this.val;return g[12]=p,g[13]=m,g[14]=v,this},scaling:function(p,m,v){this.zero();var g=this.val;return g[0]=p,g[5]=m,g[10]=v,g[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var p=this.val,m=p[1],v=p[2],g=p[3],T=p[6],w=p[7],b=p[11];return p[1]=p[4],p[2]=p[8],p[3]=p[12],p[4]=m,p[6]=p[9],p[7]=p[13],p[8]=v,p[9]=T,p[11]=p[14],p[12]=g,p[13]=w,p[14]=b,this},getInverse:function(p){return this.copy(p),this.invert()},invert:function(){var p=this.val,m=p[0],v=p[1],g=p[2],T=p[3],w=p[4],b=p[5],E=p[6],A=p[7],R=p[8],I=p[9],P=p[10],N=p[11],F=p[12],O=p[13],D=p[14],L=p[15],z=m*b-v*w,X=m*E-g*w,H=m*A-T*w,J=v*E-g*b,G=v*A-T*b,k=g*A-T*E,M=R*O-I*F,B=R*D-P*F,U=R*L-N*F,W=I*D-P*O,K=I*L-N*O,q=P*L-N*D,_=z*q-X*K+H*W+J*U-G*B+k*M;return _?(_=1/_,this.setValues((b*q-E*K+A*W)*_,(g*K-v*q-T*W)*_,(O*k-D*G+L*J)*_,(P*G-I*k-N*J)*_,(E*U-w*q-A*B)*_,(m*q-g*U+T*B)*_,(D*H-F*k-L*X)*_,(R*k-P*H+N*X)*_,(w*K-b*U+A*M)*_,(v*U-m*K-T*M)*_,(F*G-O*H+L*z)*_,(I*H-R*G-N*z)*_,(b*B-w*W-E*M)*_,(m*W-v*B+g*M)*_,(O*X-F*J-D*z)*_,(R*J-I*X+P*z)*_)):this},adjoint:function(){var p=this.val,m=p[0],v=p[1],g=p[2],T=p[3],w=p[4],b=p[5],E=p[6],A=p[7],R=p[8],I=p[9],P=p[10],N=p[11],F=p[12],O=p[13],D=p[14],L=p[15];return this.setValues(b*(P*L-N*D)-I*(E*L-A*D)+O*(E*N-A*P),-(v*(P*L-N*D)-I*(g*L-T*D)+O*(g*N-T*P)),v*(E*L-A*D)-b*(g*L-T*D)+O*(g*A-T*E),-(v*(E*N-A*P)-b*(g*N-T*P)+I*(g*A-T*E)),-(w*(P*L-N*D)-R*(E*L-A*D)+F*(E*N-A*P)),m*(P*L-N*D)-R*(g*L-T*D)+F*(g*N-T*P),-(m*(E*L-A*D)-w*(g*L-T*D)+F*(g*A-T*E)),m*(E*N-A*P)-w*(g*N-T*P)+R*(g*A-T*E),w*(I*L-N*O)-R*(b*L-A*O)+F*(b*N-A*I),-(m*(I*L-N*O)-R*(v*L-T*O)+F*(v*N-T*I)),m*(b*L-A*O)-w*(v*L-T*O)+F*(v*A-T*b),-(m*(b*N-A*I)-w*(v*N-T*I)+R*(v*A-T*b)),-(w*(I*D-P*O)-R*(b*D-E*O)+F*(b*P-E*I)),m*(I*D-P*O)-R*(v*D-g*O)+F*(v*P-g*I),-(m*(b*D-E*O)-w*(v*D-g*O)+F*(v*E-g*b)),m*(b*P-E*I)-w*(v*P-g*I)+R*(v*E-g*b))},determinant:function(){var p=this.val,m=p[0],v=p[1],g=p[2],T=p[3],w=p[4],b=p[5],E=p[6],A=p[7],R=p[8],I=p[9],P=p[10],N=p[11],F=p[12],O=p[13],D=p[14],L=p[15],z=m*b-v*w,X=m*E-g*w,H=m*A-T*w,J=v*E-g*b,G=v*A-T*b,k=g*A-T*E,M=R*O-I*F,B=R*D-P*F,U=R*L-N*F,W=I*D-P*O,K=I*L-N*O,q=P*L-N*D;return z*q-X*K+H*W+J*U-G*B+k*M},multiply:function(p){var m=this.val,v=m[0],g=m[1],T=m[2],w=m[3],b=m[4],E=m[5],A=m[6],R=m[7],I=m[8],P=m[9],N=m[10],F=m[11],O=m[12],D=m[13],L=m[14],z=m[15],X=p.val,H=X[0],J=X[1],G=X[2],k=X[3];return m[0]=H*v+J*b+G*I+k*O,m[1]=H*g+J*E+G*P+k*D,m[2]=H*T+J*A+G*N+k*L,m[3]=H*w+J*R+G*F+k*z,H=X[4],J=X[5],G=X[6],k=X[7],m[4]=H*v+J*b+G*I+k*O,m[5]=H*g+J*E+G*P+k*D,m[6]=H*T+J*A+G*N+k*L,m[7]=H*w+J*R+G*F+k*z,H=X[8],J=X[9],G=X[10],k=X[11],m[8]=H*v+J*b+G*I+k*O,m[9]=H*g+J*E+G*P+k*D,m[10]=H*T+J*A+G*N+k*L,m[11]=H*w+J*R+G*F+k*z,H=X[12],J=X[13],G=X[14],k=X[15],m[12]=H*v+J*b+G*I+k*O,m[13]=H*g+J*E+G*P+k*D,m[14]=H*T+J*A+G*N+k*L,m[15]=H*w+J*R+G*F+k*z,this},multiplyLocal:function(p){var m=this.val,v=p.val;return this.setValues(m[0]*v[0]+m[1]*v[4]+m[2]*v[8]+m[3]*v[12],m[0]*v[1]+m[1]*v[5]+m[2]*v[9]+m[3]*v[13],m[0]*v[2]+m[1]*v[6]+m[2]*v[10]+m[3]*v[14],m[0]*v[3]+m[1]*v[7]+m[2]*v[11]+m[3]*v[15],m[4]*v[0]+m[5]*v[4]+m[6]*v[8]+m[7]*v[12],m[4]*v[1]+m[5]*v[5]+m[6]*v[9]+m[7]*v[13],m[4]*v[2]+m[5]*v[6]+m[6]*v[10]+m[7]*v[14],m[4]*v[3]+m[5]*v[7]+m[6]*v[11]+m[7]*v[15],m[8]*v[0]+m[9]*v[4]+m[10]*v[8]+m[11]*v[12],m[8]*v[1]+m[9]*v[5]+m[10]*v[9]+m[11]*v[13],m[8]*v[2]+m[9]*v[6]+m[10]*v[10]+m[11]*v[14],m[8]*v[3]+m[9]*v[7]+m[10]*v[11]+m[11]*v[15],m[12]*v[0]+m[13]*v[4]+m[14]*v[8]+m[15]*v[12],m[12]*v[1]+m[13]*v[5]+m[14]*v[9]+m[15]*v[13],m[12]*v[2]+m[13]*v[6]+m[14]*v[10]+m[15]*v[14],m[12]*v[3]+m[13]*v[7]+m[14]*v[11]+m[15]*v[15])},premultiply:function(p){return this.multiplyMatrices(p,this)},multiplyMatrices:function(p,m){var v=p.val,g=m.val,T=v[0],w=v[4],b=v[8],E=v[12],A=v[1],R=v[5],I=v[9],P=v[13],N=v[2],F=v[6],O=v[10],D=v[14],L=v[3],z=v[7],X=v[11],H=v[15],J=g[0],G=g[4],k=g[8],M=g[12],B=g[1],U=g[5],W=g[9],K=g[13],q=g[2],_=g[6],rt=g[10],ft=g[14],mt=g[3],vt=g[7],yt=g[11],xt=g[15];return this.setValues(T*J+w*B+b*q+E*mt,A*J+R*B+I*q+P*mt,N*J+F*B+O*q+D*mt,L*J+z*B+X*q+H*mt,T*G+w*U+b*_+E*vt,A*G+R*U+I*_+P*vt,N*G+F*U+O*_+D*vt,L*G+z*U+X*_+H*vt,T*k+w*W+b*rt+E*yt,A*k+R*W+I*rt+P*yt,N*k+F*W+O*rt+D*yt,L*k+z*W+X*rt+H*yt,T*M+w*K+b*ft+E*xt,A*M+R*K+I*ft+P*xt,N*M+F*K+O*ft+D*xt,L*M+z*K+X*ft+H*xt)},translate:function(p){return this.translateXYZ(p.x,p.y,p.z)},translateXYZ:function(p,m,v){var g=this.val;return g[12]=g[0]*p+g[4]*m+g[8]*v+g[12],g[13]=g[1]*p+g[5]*m+g[9]*v+g[13],g[14]=g[2]*p+g[6]*m+g[10]*v+g[14],g[15]=g[3]*p+g[7]*m+g[11]*v+g[15],this},scale:function(p){return this.scaleXYZ(p.x,p.y,p.z)},scaleXYZ:function(p,m,v){var g=this.val;return g[0]=g[0]*p,g[1]=g[1]*p,g[2]=g[2]*p,g[3]=g[3]*p,g[4]=g[4]*m,g[5]=g[5]*m,g[6]=g[6]*m,g[7]=g[7]*m,g[8]=g[8]*v,g[9]=g[9]*v,g[10]=g[10]*v,g[11]=g[11]*v,this},makeRotationAxis:function(p,m){var v=Math.cos(m),g=Math.sin(m),T=1-v,w=p.x,b=p.y,E=p.z,A=T*w,R=T*b;return this.setValues(A*w+v,A*b-g*E,A*E+g*b,0,A*b+g*E,R*b+v,R*E-g*w,0,A*E-g*b,R*E+g*w,T*E*E+v,0,0,0,0,1)},rotate:function(p,m){var v=this.val,g=m.x,T=m.y,w=m.z,b=Math.sqrt(g*g+T*T+w*w);if(Math.abs(b)<a)return this;b=1/b,g*=b,T*=b,w*=b;var E=Math.sin(p),A=Math.cos(p),R=1-A,I=v[0],P=v[1],N=v[2],F=v[3],O=v[4],D=v[5],L=v[6],z=v[7],X=v[8],H=v[9],J=v[10],G=v[11],k=v[12],M=v[13],B=v[14],U=v[15],W=g*g*R+A,K=T*g*R+w*E,q=w*g*R-T*E,_=g*T*R-w*E,rt=T*T*R+A,ft=w*T*R+g*E,mt=g*w*R+T*E,vt=T*w*R-g*E,yt=w*w*R+A;return this.setValues(I*W+O*K+X*q,P*W+D*K+H*q,N*W+L*K+J*q,F*W+z*K+G*q,I*_+O*rt+X*ft,P*_+D*rt+H*ft,N*_+L*rt+J*ft,F*_+z*rt+G*ft,I*mt+O*vt+X*yt,P*mt+D*vt+H*yt,N*mt+L*vt+J*yt,F*mt+z*vt+G*yt,k,M,B,U)},rotateX:function(p){var m=this.val,v=Math.sin(p),g=Math.cos(p),T=m[4],w=m[5],b=m[6],E=m[7],A=m[8],R=m[9],I=m[10],P=m[11];return m[4]=T*g+A*v,m[5]=w*g+R*v,m[6]=b*g+I*v,m[7]=E*g+P*v,m[8]=A*g-T*v,m[9]=R*g-w*v,m[10]=I*g-b*v,m[11]=P*g-E*v,this},rotateY:function(p){var m=this.val,v=Math.sin(p),g=Math.cos(p),T=m[0],w=m[1],b=m[2],E=m[3],A=m[8],R=m[9],I=m[10],P=m[11];return m[0]=T*g-A*v,m[1]=w*g-R*v,m[2]=b*g-I*v,m[3]=E*g-P*v,m[8]=T*v+A*g,m[9]=w*v+R*g,m[10]=b*v+I*g,m[11]=E*v+P*g,this},rotateZ:function(p){var m=this.val,v=Math.sin(p),g=Math.cos(p),T=m[0],w=m[1],b=m[2],E=m[3],A=m[4],R=m[5],I=m[6],P=m[7];return m[0]=T*g+A*v,m[1]=w*g+R*v,m[2]=b*g+I*v,m[3]=E*g+P*v,m[4]=A*g-T*v,m[5]=R*g-w*v,m[6]=I*g-b*v,m[7]=P*g-E*v,this},fromRotationTranslation:function(p,m){var v=p.x,g=p.y,T=p.z,w=p.w,b=v+v,E=g+g,A=T+T,R=v*b,I=v*E,P=v*A,N=g*E,F=g*A,O=T*A,D=w*b,L=w*E,z=w*A;return this.setValues(1-(N+O),I+z,P-L,0,I-z,1-(R+O),F+D,0,P+L,F-D,1-(R+N),0,m.x,m.y,m.z,1)},fromQuat:function(p){var m=p.x,v=p.y,g=p.z,T=p.w,w=m+m,b=v+v,E=g+g,A=m*w,R=m*b,I=m*E,P=v*b,N=v*E,F=g*E,O=T*w,D=T*b,L=T*E;return this.setValues(1-(P+F),R+L,I-D,0,R-L,1-(A+F),N+O,0,I+D,N-O,1-(A+P),0,0,0,0,1)},frustum:function(p,m,v,g,T,w){var b=1/(m-p),E=1/(g-v),A=1/(T-w);return this.setValues(T*2*b,0,0,0,0,T*2*E,0,0,(m+p)*b,(g+v)*E,(w+T)*A,-1,0,0,w*T*2*A,0)},perspective:function(p,m,v,g){var T=1/Math.tan(p/2),w=1/(v-g);return this.setValues(T/m,0,0,0,0,T,0,0,0,0,(g+v)*w,-1,0,0,2*g*v*w,0)},perspectiveLH:function(p,m,v,g){return this.setValues(2*v/p,0,0,0,0,2*v/m,0,0,0,0,-g/(v-g),1,0,0,v*g/(v-g),0)},ortho:function(p,m,v,g,T,w){var b=p-m,E=v-g,A=T-w;return b=b===0?b:1/b,E=E===0?E:1/E,A=A===0?A:1/A,this.setValues(-2*b,0,0,0,0,-2*E,0,0,0,0,2*A,0,(p+m)*b,(g+v)*E,(w+T)*A,1)},lookAtRH:function(p,m,v){var g=this.val;return u.subVectors(p,m),u.getLengthSquared()===0&&(u.z=1),u.normalize(),h.crossVectors(v,u),h.getLengthSquared()===0&&(Math.abs(v.z)===1?u.x+=1e-4:u.z+=1e-4,u.normalize(),h.crossVectors(v,u)),h.normalize(),d.crossVectors(u,h),g[0]=h.x,g[1]=h.y,g[2]=h.z,g[4]=d.x,g[5]=d.y,g[6]=d.z,g[8]=u.x,g[9]=u.y,g[10]=u.z,this},lookAt:function(p,m,v){var g=p.x,T=p.y,w=p.z,b=v.x,E=v.y,A=v.z,R=m.x,I=m.y,P=m.z;if(Math.abs(g-R)<a&&Math.abs(T-I)<a&&Math.abs(w-P)<a)return this.identity();var N=g-R,F=T-I,O=w-P,D=1/Math.sqrt(N*N+F*F+O*O);N*=D,F*=D,O*=D;var L=E*O-A*F,z=A*N-b*O,X=b*F-E*N;D=Math.sqrt(L*L+z*z+X*X),D?(D=1/D,L*=D,z*=D,X*=D):(L=0,z=0,X=0);var H=F*X-O*z,J=O*L-N*X,G=N*z-F*L;return D=Math.sqrt(H*H+J*J+G*G),D?(D=1/D,H*=D,J*=D,G*=D):(H=0,J=0,G=0),this.setValues(L,H,N,0,z,J,F,0,X,G,O,0,-(L*g+z*T+X*w),-(H*g+J*T+G*w),-(N*g+F*T+O*w),1)},yawPitchRoll:function(p,m,v){this.zero(),i.zero(),n.zero();var g=this.val,T=i.val,w=n.val,b=Math.sin(v),E=Math.cos(v);return g[10]=1,g[15]=1,g[0]=E,g[1]=b,g[4]=-b,g[5]=E,b=Math.sin(m),E=Math.cos(m),T[0]=1,T[15]=1,T[5]=E,T[10]=E,T[9]=-b,T[6]=b,b=Math.sin(p),E=Math.cos(p),w[5]=1,w[15]=1,w[0]=E,w[2]=-b,w[8]=b,w[10]=E,this.multiplyLocal(i),this.multiplyLocal(n),this},setWorldMatrix:function(p,m,v,g,T){return this.yawPitchRoll(p.y,p.x,p.z),i.scaling(v.x,v.y,v.z),n.xyz(m.x,m.y,m.z),this.multiplyLocal(i),this.multiplyLocal(n),g&&this.multiplyLocal(g),T&&this.multiplyLocal(T),this},multiplyToMat4:function(p,m){var v=this.val,g=p.val,T=v[0],w=v[1],b=v[2],E=v[3],A=v[4],R=v[5],I=v[6],P=v[7],N=v[8],F=v[9],O=v[10],D=v[11],L=v[12],z=v[13],X=v[14],H=v[15],J=g[0],G=g[1],k=g[2],M=g[3],B=g[4],U=g[5],W=g[6],K=g[7],q=g[8],_=g[9],rt=g[10],ft=g[11],mt=g[12],vt=g[13],yt=g[14],xt=g[15];return m.setValues(J*T+G*A+k*N+M*L,G*w+G*R+k*F+M*z,k*b+G*I+k*O+M*X,M*E+G*P+k*D+M*H,B*T+U*A+W*N+K*L,B*w+U*R+W*F+K*z,B*b+U*I+W*O+K*X,B*E+U*P+W*D+K*H,q*T+_*A+rt*N+ft*L,q*w+_*R+rt*F+ft*z,q*b+_*I+rt*O+ft*X,q*E+_*P+rt*D+ft*H,mt*T+vt*A+yt*N+xt*L,mt*w+vt*R+yt*F+xt*z,mt*b+vt*I+yt*O+xt*X,mt*E+vt*P+yt*D+xt*H)},fromRotationXYTranslation:function(p,m,v){var g=m.x,T=m.y,w=m.z,b=Math.sin(p.x),E=Math.cos(p.x),A=Math.sin(p.y),R=Math.cos(p.y),I=g,P=T,N=w,F=-b,O=0-F*A,D=0-E*A,L=F*R,z=E*R;return v||(I=R*g+A*w,P=O*g+E*T+L*w,N=D*g+b*T+z*w),this.setValues(R,O,D,0,0,E,b,0,A,L,z,0,I,P,N,1)},getMaxScaleOnAxis:function(){var p=this.val,m=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],v=p[4]*p[4]+p[5]*p[5]+p[6]*p[6],g=p[8]*p[8]+p[9]*p[9]+p[10]*p[10];return Math.sqrt(Math.max(m,v,g))}}),i=new r,n=new r,h=new l,d=new l,u=new l;o.exports=r},69635:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return Math.min(t+s,l)};o.exports=y},37394:o=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s=t.length;if(s===0)return 0;t.sort(function(a,r){return a-r});var l=Math.floor(s/2);return s%2===0?(t[l]+t[l-1])/2:t[l]};o.exports=y},17259:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return Math.max(t-s,l)};o.exports=y},61820:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){l===void 0&&(l=s+1);var r=(t-s)/(l-s);return r>1?a!==void 0?(r=(a-t)/(a-l),r<0&&(r=0)):r=1:r<0&&(r=0),r};o.exports=y},75003:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(5341),a=t(72283),r=t(70015),i=1e-6,n=new Int8Array([1,2,0]),h=new Float32Array([0,0,0]),d=new r(1,0,0),u=new r(0,1,0),p=new r,m=new l,v=new s({initialize:function(T,w,b,E){this.onChangeCallback=a,this.set(T,w,b,E)},x:{get:function(){return this._x},set:function(g){this._x=g,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(g){this._y=g,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(g){this._z=g,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(g){this._w=g,this.onChangeCallback(this)}},copy:function(g){return this.set(g)},set:function(g,T,w,b,E){return E===void 0&&(E=!0),typeof g=="object"?(this._x=g.x||0,this._y=g.y||0,this._z=g.z||0,this._w=g.w||0):(this._x=g||0,this._y=T||0,this._z=w||0,this._w=b||0),E&&this.onChangeCallback(this),this},add:function(g){return this._x+=g.x,this._y+=g.y,this._z+=g.z,this._w+=g.w,this.onChangeCallback(this),this},subtract:function(g){return this._x-=g.x,this._y-=g.y,this._z-=g.z,this._w-=g.w,this.onChangeCallback(this),this},scale:function(g){return this._x*=g,this._y*=g,this._z*=g,this._w*=g,this.onChangeCallback(this),this},length:function(){var g=this.x,T=this.y,w=this.z,b=this.w;return Math.sqrt(g*g+T*T+w*w+b*b)},lengthSq:function(){var g=this.x,T=this.y,w=this.z,b=this.w;return g*g+T*T+w*w+b*b},normalize:function(){var g=this.x,T=this.y,w=this.z,b=this.w,E=g*g+T*T+w*w+b*b;return E>0&&(E=1/Math.sqrt(E),this._x=g*E,this._y=T*E,this._z=w*E,this._w=b*E),this.onChangeCallback(this),this},dot:function(g){return this.x*g.x+this.y*g.y+this.z*g.z+this.w*g.w},lerp:function(g,T){T===void 0&&(T=0);var w=this.x,b=this.y,E=this.z,A=this.w;return this.set(w+T*(g.x-w),b+T*(g.y-b),E+T*(g.z-E),A+T*(g.w-A))},rotationTo:function(g,T){var w=g.x*T.x+g.y*T.y+g.z*T.z;return w<-.999999?(p.copy(d).cross(g).length()<i&&p.copy(u).cross(g),p.normalize(),this.setAxisAngle(p,Math.PI)):w>.999999?this.set(0,0,0,1):(p.copy(g).cross(T),this._x=p.x,this._y=p.y,this._z=p.z,this._w=1+w,this.normalize())},setAxes:function(g,T,w){var b=m.val;return b[0]=T.x,b[3]=T.y,b[6]=T.z,b[1]=w.x,b[4]=w.y,b[7]=w.z,b[2]=-g.x,b[5]=-g.y,b[8]=-g.z,this.fromMat3(m).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(g,T){T=T*.5;var w=Math.sin(T);return this.set(w*g.x,w*g.y,w*g.z,Math.cos(T))},multiply:function(g){var T=this.x,w=this.y,b=this.z,E=this.w,A=g.x,R=g.y,I=g.z,P=g.w;return this.set(T*P+E*A+w*I-b*R,w*P+E*R+b*A-T*I,b*P+E*I+T*R-w*A,E*P-T*A-w*R-b*I)},slerp:function(g,T){var w=this.x,b=this.y,E=this.z,A=this.w,R=g.x,I=g.y,P=g.z,N=g.w,F=w*R+b*I+E*P+A*N;F<0&&(F=-F,R=-R,I=-I,P=-P,N=-N);var O=1-T,D=T;if(1-F>i){var L=Math.acos(F),z=Math.sin(L);O=Math.sin((1-T)*L)/z,D=Math.sin(T*L)/z}return this.set(O*w+D*R,O*b+D*I,O*E+D*P,O*A+D*N)},invert:function(){var g=this.x,T=this.y,w=this.z,b=this.w,E=g*g+T*T+w*w+b*b,A=E?1/E:0;return this.set(-g*A,-T*A,-w*A,b*A)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(g){g*=.5;var T=this.x,w=this.y,b=this.z,E=this.w,A=Math.sin(g),R=Math.cos(g);return this.set(T*R+E*A,w*R+b*A,b*R-w*A,E*R-T*A)},rotateY:function(g){g*=.5;var T=this.x,w=this.y,b=this.z,E=this.w,A=Math.sin(g),R=Math.cos(g);return this.set(T*R-b*A,w*R+E*A,b*R+T*A,E*R-w*A)},rotateZ:function(g){g*=.5;var T=this.x,w=this.y,b=this.z,E=this.w,A=Math.sin(g),R=Math.cos(g);return this.set(T*R+w*A,w*R-T*A,b*R+E*A,E*R-b*A)},calculateW:function(){var g=this.x,T=this.y,w=this.z;return this.w=-Math.sqrt(1-g*g-T*T-w*w),this},setFromEuler:function(g,T){var w=g.x/2,b=g.y/2,E=g.z/2,A=Math.cos(w),R=Math.cos(b),I=Math.cos(E),P=Math.sin(w),N=Math.sin(b),F=Math.sin(E);switch(g.order){case"XYZ":{this.set(P*R*I+A*N*F,A*N*I-P*R*F,A*R*F+P*N*I,A*R*I-P*N*F,T);break}case"YXZ":{this.set(P*R*I+A*N*F,A*N*I-P*R*F,A*R*F-P*N*I,A*R*I+P*N*F,T);break}case"ZXY":{this.set(P*R*I-A*N*F,A*N*I+P*R*F,A*R*F+P*N*I,A*R*I-P*N*F,T);break}case"ZYX":{this.set(P*R*I-A*N*F,A*N*I+P*R*F,A*R*F-P*N*I,A*R*I+P*N*F,T);break}case"YZX":{this.set(P*R*I+A*N*F,A*N*I+P*R*F,A*R*F-P*N*I,A*R*I-P*N*F,T);break}case"XZY":{this.set(P*R*I-A*N*F,A*N*I-P*R*F,A*R*F+P*N*I,A*R*I+P*N*F,T);break}}return this},setFromRotationMatrix:function(g){var T=g.val,w=T[0],b=T[4],E=T[8],A=T[1],R=T[5],I=T[9],P=T[2],N=T[6],F=T[10],O=w+R+F,D;return O>0?(D=.5/Math.sqrt(O+1),this.set((N-I)*D,(E-P)*D,(A-b)*D,.25/D)):w>R&&w>F?(D=2*Math.sqrt(1+w-R-F),this.set(.25*D,(b+A)/D,(E+P)/D,(N-I)/D)):R>F?(D=2*Math.sqrt(1+R-w-F),this.set((b+A)/D,.25*D,(I+N)/D,(E-P)/D)):(D=2*Math.sqrt(1+F-w-R),this.set((E+P)/D,(I+N)/D,.25*D,(A-b)/D)),this},fromMat3:function(g){var T=g.val,w=T[0]+T[4]+T[8],b;if(w>0)b=Math.sqrt(w+1),this.w=.5*b,b=.5/b,this._x=(T[7]-T[5])*b,this._y=(T[2]-T[6])*b,this._z=(T[3]-T[1])*b;else{var E=0;T[4]>T[0]&&(E=1),T[8]>T[E*3+E]&&(E=2);var A=n[E],R=n[A];b=Math.sqrt(T[E*3+E]-T[A*3+A]-T[R*3+R]+1),h[E]=.5*b,b=.5/b,h[A]=(T[A*3+E]+T[E*3+A])*b,h[R]=(T[R*3+E]+T[E*3+R])*b,this._x=h[0],this._y=h[1],this._z=h[2],this._w=(T[R*3+A]-T[A*3+R])*b}return this.onChangeCallback(this),this}});o.exports=v},23701:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=function(a){return a*s.RAD_TO_DEG};o.exports=l},16906:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s=1);var l=Math.random()*2*Math.PI;return t.x=Math.cos(l)*s,t.y=Math.sin(l)*s,t};o.exports=y},52417:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s=1);var l=Math.random()*2*Math.PI,a=Math.random()*2-1,r=Math.sqrt(1-a*a)*s;return t.x=Math.cos(l)*r,t.y=Math.sin(l)*r,t.z=a*s,t};o.exports=y},17915:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s=1),t.x=(Math.random()*2-1)*s,t.y=(Math.random()*2-1)*s,t.z=(Math.random()*2-1)*s,t.w=(Math.random()*2-1)*s,t};o.exports=y},52257:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.x,a=t.y;return t.x=l*Math.cos(s)-a*Math.sin(s),t.y=l*Math.sin(s)+a*Math.cos(s),t};o.exports=y},2386:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=Math.cos(a),i=Math.sin(a),n=t.x-s,h=t.y-l;return t.x=n*r-h*i+s,t.y=n*i+h*r+l,t};o.exports=y},72395:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r){var i=a+Math.atan2(t.y-l,t.x-s);return t.x=s+r*Math.cos(i),t.y=l+r*Math.sin(i),t};o.exports=y},41061:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r){return t.x=s+r*Math.cos(a),t.y=l+r*Math.sin(a),t};o.exports=y},93709:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(70015),l=t(16650),a=t(75003),r=new l,i=new a,n=new s,h=function(d,u,p){return i.setAxisAngle(u,p),r.fromRotationTranslation(i,n.set(0,0,0)),d.transformMat4(r)};o.exports=h},67233:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t>0?Math.ceil(t):Math.floor(t)};o.exports=y},64333:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){s===void 0&&(s=0),l===void 0&&(l=10);var a=Math.pow(l,-s);return Math.round(t*a)/a};o.exports=y},59533:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){s===void 0&&(s=1),l===void 0&&(l=1),a===void 0&&(a=1),a*=Math.PI/t;for(var r=[],i=[],n=0;n<t;n++)l-=s*a,s+=l*a,r[n]=l,i[n]=s;return{sin:i,cos:r,length:t}};o.exports=y},5514:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t<=s?0:t>=l?1:(t=(t-s)/(l-s),t*t*(3-2*t))};o.exports=y},87736:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t=Math.max(0,Math.min(1,(t-s)/(l-s))),t*t*t*(t*(t*6-15)+10)};o.exports=y},55805:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n){n===void 0&&(n=new s);var h=0,d=0,u=r*i;return a>0&&a<=u&&(a>r-1?(d=Math.floor(a/r),h=a-d*r):h=a),n.set(h,d)};o.exports=l},64462:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d,u,p){p===void 0&&(p=new s);var m=Math.sin(h),v=Math.cos(h),g=v*d,T=m*d,w=-m*u,b=v*u,E=1/(g*b+w*-T);return p.x=b*E*a+-w*E*r+(n*w-i*b)*E,p.y=g*E*r+-T*E*a+(-n*g+i*T)*E,p};o.exports=l},93736:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(88456),a=new s({initialize:function(i,n){this.x=0,this.y=0,typeof i=="object"?(this.x=i.x||0,this.y=i.y||0):(n===void 0&&(n=i),this.x=i||0,this.y=n||0)},clone:function(){return new a(this.x,this.y)},copy:function(r){return this.x=r.x||0,this.y=r.y||0,this},setFromObject:function(r){return this.x=r.x||0,this.y=r.y||0,this},set:function(r,i){return i===void 0&&(i=r),this.x=r,this.y=i,this},setTo:function(r,i){return this.set(r,i)},setToPolar:function(r,i){return i==null&&(i=1),this.x=Math.cos(r)*i,this.y=Math.sin(r)*i,this},equals:function(r){return this.x===r.x&&this.y===r.y},fuzzyEquals:function(r,i){return l(this.x,r.x,i)&&l(this.y,r.y,i)},angle:function(){var r=Math.atan2(this.y,this.x);return r<0&&(r+=2*Math.PI),r},setAngle:function(r){return this.setToPolar(r,this.length())},add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r):(this.x=0,this.y=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(r){var i=r.x-this.x,n=r.y-this.y;return Math.sqrt(i*i+n*n)},distanceSq:function(r){var i=r.x-this.x,n=r.y-this.y;return i*i+n*n},length:function(){var r=this.x,i=this.y;return Math.sqrt(r*r+i*i)},setLength:function(r){return this.normalize().scale(r)},lengthSq:function(){var r=this.x,i=this.y;return r*r+i*i},normalize:function(){var r=this.x,i=this.y,n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=r*n,this.y=i*n),this},normalizeRightHand:function(){var r=this.x;return this.x=this.y*-1,this.y=r,this},normalizeLeftHand:function(){var r=this.x;return this.x=this.y,this.y=r*-1,this},dot:function(r){return this.x*r.x+this.y*r.y},cross:function(r){return this.x*r.y-this.y*r.x},lerp:function(r,i){i===void 0&&(i=0);var n=this.x,h=this.y;return this.x=n+i*(r.x-n),this.y=h+i*(r.y-h),this},transformMat3:function(r){var i=this.x,n=this.y,h=r.val;return this.x=h[0]*i+h[3]*n+h[6],this.y=h[1]*i+h[4]*n+h[7],this},transformMat4:function(r){var i=this.x,n=this.y,h=r.val;return this.x=h[0]*i+h[4]*n+h[12],this.y=h[1]*i+h[5]*n+h[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(r){var i=this.length();return i&&i>r&&this.scale(r/i),this},reflect:function(r){return r=r.clone().normalize(),this.subtract(r.scale(2*this.dot(r)))},mirror:function(r){return this.reflect(r).negate()},rotate:function(r){var i=Math.cos(r),n=Math.sin(r);return this.set(i*this.x-n*this.y,n*this.x+i*this.y)},project:function(r){var i=this.dot(r)/r.dot(r);return this.copy(r).scale(i)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),o.exports=a},70015:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n){this.x=0,this.y=0,this.z=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=i||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clone:function(){return new l(this.x,this.y,this.z)},addVectors:function(a,r){return this.x=a.x+r.x,this.y=a.y+r.y,this.z=a.z+r.z,this},crossVectors:function(a,r){var i=a.x,n=a.y,h=a.z,d=r.x,u=r.y,p=r.z;return this.x=n*p-h*u,this.y=h*d-i*p,this.z=i*u-n*d,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this},set:function(a,r,i){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=r||0,this.z=i||0),this},setFromMatrixPosition:function(a){return this.fromArray(a.val,12)},setFromMatrixColumn:function(a,r){return this.fromArray(a.val,r*4)},fromArray:function(a,r){return r===void 0&&(r=0),this.x=a[r],this.y=a[r+1],this.z=a[r+2],this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addScale:function(a,r){return this.x+=a.x*r,this.y+=a.y*r,this.z+=a.z*r||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(a){var r=a.x-this.x,i=a.y-this.y,n=a.z-this.z||0;return Math.sqrt(r*r+i*i+n*n)},distanceSq:function(a){var r=a.x-this.x,i=a.y-this.y,n=a.z-this.z||0;return r*r+i*i+n*n},length:function(){var a=this.x,r=this.y,i=this.z;return Math.sqrt(a*a+r*r+i*i)},lengthSq:function(){var a=this.x,r=this.y,i=this.z;return a*a+r*r+i*i},normalize:function(){var a=this.x,r=this.y,i=this.z,n=a*a+r*r+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=a*n,this.y=r*n,this.z=i*n),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},cross:function(a){var r=this.x,i=this.y,n=this.z,h=a.x,d=a.y,u=a.z;return this.x=i*u-n*d,this.y=n*h-r*u,this.z=r*d-i*h,this},lerp:function(a,r){r===void 0&&(r=0);var i=this.x,n=this.y,h=this.z;return this.x=i+r*(a.x-i),this.y=n+r*(a.y-n),this.z=h+r*(a.z-h),this},applyMatrix3:function(a){var r=this.x,i=this.y,n=this.z,h=a.val;return this.x=h[0]*r+h[3]*i+h[6]*n,this.y=h[1]*r+h[4]*i+h[7]*n,this.z=h[2]*r+h[5]*i+h[8]*n,this},applyMatrix4:function(a){var r=this.x,i=this.y,n=this.z,h=a.val,d=1/(h[3]*r+h[7]*i+h[11]*n+h[15]);return this.x=(h[0]*r+h[4]*i+h[8]*n+h[12])*d,this.y=(h[1]*r+h[5]*i+h[9]*n+h[13])*d,this.z=(h[2]*r+h[6]*i+h[10]*n+h[14])*d,this},transformMat3:function(a){var r=this.x,i=this.y,n=this.z,h=a.val;return this.x=r*h[0]+i*h[3]+n*h[6],this.y=r*h[1]+i*h[4]+n*h[7],this.z=r*h[2]+i*h[5]+n*h[8],this},transformMat4:function(a){var r=this.x,i=this.y,n=this.z,h=a.val;return this.x=h[0]*r+h[4]*i+h[8]*n+h[12],this.y=h[1]*r+h[5]*i+h[9]*n+h[13],this.z=h[2]*r+h[6]*i+h[10]*n+h[14],this},transformCoordinates:function(a){var r=this.x,i=this.y,n=this.z,h=a.val,d=r*h[0]+i*h[4]+n*h[8]+h[12],u=r*h[1]+i*h[5]+n*h[9]+h[13],p=r*h[2]+i*h[6]+n*h[10]+h[14],m=r*h[3]+i*h[7]+n*h[11]+h[15];return this.x=d/m,this.y=u/m,this.z=p/m,this},transformQuat:function(a){var r=this.x,i=this.y,n=this.z,h=a.x,d=a.y,u=a.z,p=a.w,m=p*r+d*n-u*i,v=p*i+u*r-h*n,g=p*n+h*i-d*r,T=-h*r-d*i-u*n;return this.x=m*p+T*-h+v*-u-g*-d,this.y=v*p+T*-d+g*-h-m*-u,this.z=g*p+T*-u+m*-d-v*-h,this},project:function(a){var r=this.x,i=this.y,n=this.z,h=a.val,d=h[0],u=h[1],p=h[2],m=h[3],v=h[4],g=h[5],T=h[6],w=h[7],b=h[8],E=h[9],A=h[10],R=h[11],I=h[12],P=h[13],N=h[14],F=h[15],O=1/(r*m+i*w+n*R+F);return this.x=(r*d+i*v+n*b+I)*O,this.y=(r*u+i*g+n*E+P)*O,this.z=(r*p+i*T+n*A+N)*O,this},projectViewMatrix:function(a,r){return this.applyMatrix4(a).applyMatrix4(r)},unprojectViewMatrix:function(a,r){return this.applyMatrix4(a).applyMatrix4(r)},unproject:function(a,r){var i=a.x,n=a.y,h=a.z,d=a.w,u=this.x-i,p=d-this.y-1-n,m=this.z;return this.x=2*u/h-1,this.y=2*p/d-1,this.z=2*m-1,this.project(r)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});l.ZERO=new l,l.RIGHT=new l(1,0,0),l.LEFT=new l(-1,0,0),l.UP=new l(0,-1,0),l.DOWN=new l(0,1,0),l.FORWARD=new l(0,0,1),l.BACK=new l(0,0,-1),l.ONE=new l(1,1,1),o.exports=l},51729:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h){this.x=0,this.y=0,this.z=0,this.w=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=i||0,this.z=n||0,this.w=h||0)},clone:function(){return new l(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this.w=a.w||0,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,r,i,n){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=r||0,this.z=i||0,this.w=n||0),this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this.w+=a.w||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this.w-=a.w||0,this},scale:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},length:function(){var a=this.x,r=this.y,i=this.z,n=this.w;return Math.sqrt(a*a+r*r+i*i+n*n)},lengthSq:function(){var a=this.x,r=this.y,i=this.z,n=this.w;return a*a+r*r+i*i+n*n},normalize:function(){var a=this.x,r=this.y,i=this.z,n=this.w,h=a*a+r*r+i*i+n*n;return h>0&&(h=1/Math.sqrt(h),this.x=a*h,this.y=r*h,this.z=i*h,this.w=n*h),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lerp:function(a,r){r===void 0&&(r=0);var i=this.x,n=this.y,h=this.z,d=this.w;return this.x=i+r*(a.x-i),this.y=n+r*(a.y-n),this.z=h+r*(a.z-h),this.w=d+r*(a.w-d),this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this.w*=a.w||1,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this.w/=a.w||1,this},distance:function(a){var r=a.x-this.x,i=a.y-this.y,n=a.z-this.z||0,h=a.w-this.w||0;return Math.sqrt(r*r+i*i+n*n+h*h)},distanceSq:function(a){var r=a.x-this.x,i=a.y-this.y,n=a.z-this.z||0,h=a.w-this.w||0;return r*r+i*i+n*n+h*h},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(a){var r=this.x,i=this.y,n=this.z,h=this.w,d=a.val;return this.x=d[0]*r+d[4]*i+d[8]*n+d[12]*h,this.y=d[1]*r+d[5]*i+d[9]*n+d[13]*h,this.z=d[2]*r+d[6]*i+d[10]*n+d[14]*h,this.w=d[3]*r+d[7]*i+d[11]*n+d[15]*h,this},transformQuat:function(a){var r=this.x,i=this.y,n=this.z,h=a.x,d=a.y,u=a.z,p=a.w,m=p*r+d*n-u*i,v=p*i+u*r-h*n,g=p*n+h*i-d*r,T=-h*r-d*i-u*n;return this.x=m*p+T*-h+v*-u-g*-d,this.y=v*p+T*-d+g*-h-m*-u,this.z=g*p+T*-u+m*-d-v*-h,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});l.prototype.sub=l.prototype.subtract,l.prototype.mul=l.prototype.multiply,l.prototype.div=l.prototype.divide,l.prototype.dist=l.prototype.distance,l.prototype.distSq=l.prototype.distanceSq,l.prototype.len=l.prototype.length,l.prototype.lenSq=l.prototype.lengthSq,o.exports=l},9557:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return Math.abs(t-s)<=l};o.exports=y},1071:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=l-s;return s+((t-s)%a+a)%a};o.exports=y},90447:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){return Math.atan2(a-s,l-t)};o.exports=y},94240:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return Math.atan2(s.y-t.y,s.x-t.x)};o.exports=y},84066:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return Math.atan2(s.x-t.x,s.y-t.y)};o.exports=y},9678:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){return Math.atan2(l-t,a-s)};o.exports=y},76861:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=function(a){return a>Math.PI&&(a-=s.PI2),Math.abs(((a+s.TAU)%s.PI2-s.PI2)%s.PI2)};o.exports=l},37570:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t=t%(2*Math.PI),t>=0?t:t+2*Math.PI};o.exports=y},87597:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61616),l=function(){return s(-Math.PI,Math.PI)};o.exports=l},74493:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61616),l=function(){return s(-180,180)};o.exports=l},19049:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(37570),l=function(a){return s(a+Math.PI)};o.exports=l},90612:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=function(a,r,i){return i===void 0&&(i=.05),a===r||(Math.abs(r-a)<=i||Math.abs(r-a)>=s.PI2-i?a=r:(Math.abs(r-a)>Math.PI&&(r<a?r+=s.PI2:r-=s.PI2),r>a?a+=i:r<a&&(a-=i))),a};o.exports=l},93954:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=s-t;if(l===0)return 0;var a=Math.floor((l- -180)/360);return l-a*360};o.exports=y},35786:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1071),l=function(a){return s(a,-Math.PI,Math.PI)};o.exports=l},62138:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1071),l=function(a){return s(a,-180,180)};o.exports=l},22153:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:t(90447),BetweenPoints:t(94240),BetweenPointsY:t(84066),BetweenY:t(9678),CounterClockwise:t(76861),Normalize:t(37570),Random:t(87597),RandomDegrees:t(74493),Reverse:t(19049),RotateTo:t(90612),ShortestBetween:t(93954),Wrap:t(35786),WrapDegrees:t(62138)}},83392:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};o.exports=y},53996:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=t-l,i=s-a;return Math.sqrt(r*r+i*i)};o.exports=y},92951:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.x-s.x,a=t.y-s.y;return Math.sqrt(l*l+a*a)};o.exports=y},12161:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.x-s.x,a=t.y-s.y;return l*l+a*a};o.exports=y},38057:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){return Math.max(Math.abs(t-l),Math.abs(s-a))};o.exports=y},33297:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r){return r===void 0&&(r=2),Math.sqrt(Math.pow(l-t,r)+Math.pow(a-s,r))};o.exports=y},90366:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){return Math.abs(t-l)+Math.abs(s-a)};o.exports=y},35032:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=t-l,i=s-a;return r*r+i*i};o.exports=y},10130:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:t(53996),BetweenPoints:t(92951),BetweenPointsSquared:t(12161),Chebyshev:t(38057),Power:t(33297),Snake:t(90366),Squared:t(35032)}},35060:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25265),l=t(57428),a=t(73214),r=t(71778),i=t(36468),n=t(88258),h=t(52910),d=t(67799),u=t(74083),p=t(92284),m=t(28035),v=t(8754);o.exports={Power0:h,Power1:d.Out,Power2:r.Out,Power3:u.Out,Power4:p.Out,Linear:h,Quad:d.Out,Cubic:r.Out,Quart:u.Out,Quint:p.Out,Sine:m.Out,Expo:n.Out,Circ:a.Out,Elastic:i.Out,Back:s.Out,Bounce:l.Out,Stepped:v,"Quad.easeIn":d.In,"Cubic.easeIn":r.In,"Quart.easeIn":u.In,"Quint.easeIn":p.In,"Sine.easeIn":m.In,"Expo.easeIn":n.In,"Circ.easeIn":a.In,"Elastic.easeIn":i.In,"Back.easeIn":s.In,"Bounce.easeIn":l.In,"Quad.easeOut":d.Out,"Cubic.easeOut":r.Out,"Quart.easeOut":u.Out,"Quint.easeOut":p.Out,"Sine.easeOut":m.Out,"Expo.easeOut":n.Out,"Circ.easeOut":a.Out,"Elastic.easeOut":i.Out,"Back.easeOut":s.Out,"Bounce.easeOut":l.Out,"Quad.easeInOut":d.InOut,"Cubic.easeInOut":r.InOut,"Quart.easeInOut":u.InOut,"Quint.easeInOut":p.InOut,"Sine.easeInOut":m.InOut,"Expo.easeInOut":n.InOut,"Circ.easeInOut":a.InOut,"Elastic.easeInOut":i.InOut,"Back.easeInOut":s.InOut,"Bounce.easeInOut":l.InOut}},25860:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s=1.70158),t*t*((s+1)*t-s)};o.exports=y},45264:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s=1.70158);var l=s*1.525;return(t*=2)<1?.5*(t*t*((l+1)*t-l)):.5*((t-=2)*t*((l+1)*t+l)+2)};o.exports=y},36699:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s=1.70158),--t*t*((s+1)*t+s)+1};o.exports=y},25265:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(25860),Out:t(36699),InOut:t(45264)}},62191:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t=1-t,t<.36363636363636365?1-7.5625*t*t:t<.7272727272727273?1-(7.5625*(t-=.5454545454545454)*t+.75):t<.9090909090909091?1-(7.5625*(t-=.8181818181818182)*t+.9375):1-(7.5625*(t-=.9545454545454546)*t+.984375)};o.exports=y},24799:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s=!1;return t<.5?(t=1-t*2,s=!0):t=t*2-1,t<.36363636363636365?t=7.5625*t*t:t<.7272727272727273?t=7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?t=7.5625*(t-=.8181818181818182)*t+.9375:t=7.5625*(t-=.9545454545454546)*t+.984375,s?(1-t)*.5:t*.5+.5};o.exports=y},60819:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375};o.exports=y},57428:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(62191),Out:t(60819),InOut:t(24799)}},86855:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return 1-Math.sqrt(1-t*t)};o.exports=y},7280:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)};o.exports=y},18058:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return Math.sqrt(1- --t*t)};o.exports=y},73214:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(86855),Out:t(18058),InOut:t(7280)}},91532:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t*t*t};o.exports=y},63180:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};o.exports=y},16518:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return--t*t*t+1};o.exports=y},71778:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(91532),Out:t(16518),InOut:t(63180)}},24729:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(s===void 0&&(s=.1),l===void 0&&(l=.1),t===0)return 0;if(t===1)return 1;var a=l/4;return s<1?s=1:a=l*Math.asin(1/s)/(2*Math.PI),-(s*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/l))};o.exports=y},50325:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(s===void 0&&(s=.1),l===void 0&&(l=.1),t===0)return 0;if(t===1)return 1;var a=l/4;return s<1?s=1:a=l*Math.asin(1/s)/(2*Math.PI),(t*=2)<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/l)):s*Math.pow(2,-10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/l)*.5+1};o.exports=y},84074:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(s===void 0&&(s=.1),l===void 0&&(l=.1),t===0)return 0;if(t===1)return 1;var a=l/4;return s<1?s=1:a=l*Math.asin(1/s)/(2*Math.PI),s*Math.pow(2,-10*t)*Math.sin((t-a)*(2*Math.PI)/l)+1};o.exports=y},36468:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(24729),Out:t(84074),InOut:t(50325)}},95638:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return Math.pow(2,10*(t-1))-.001};o.exports=y},10357:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))};o.exports=y},14894:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return 1-Math.pow(2,-10*t)};o.exports=y},88258:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(95638),Out:t(14894),InOut:t(10357)}},33063:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Back:t(25265),Bounce:t(57428),Circular:t(73214),Cubic:t(71778),Elastic:t(36468),Expo:t(88258),Linear:t(52910),Quadratic:t(67799),Quartic:t(74083),Quintic:t(92284),Sine:t(28035),Stepped:t(8754)}},43927:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t};o.exports=y},52910:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=t(43927)},77471:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t*t};o.exports=y},83863:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};o.exports=y},44383:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t*(2-t)};o.exports=y},67799:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(77471),Out:t(44383),InOut:t(83863)}},48311:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t*t*t*t};o.exports=y},55248:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)};o.exports=y},23135:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return 1- --t*t*t*t};o.exports=y},74083:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(48311),Out:t(23135),InOut:t(55248)}},7313:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t*t*t*t*t};o.exports=y},98759:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)};o.exports=y},26670:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return--t*t*t*t*t+1};o.exports=y},92284:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(7313),Out:t(26670),InOut:t(98759)}},52929:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t===0?0:t===1?1:1-Math.cos(t*Math.PI/2)};o.exports=y},66333:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t===0?0:t===1?1:.5*(1-Math.cos(Math.PI*t))};o.exports=y},37255:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t===0?0:t===1?1:Math.sin(t*Math.PI/2)};o.exports=y},28035:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:t(52929),Out:t(37255),InOut:t(66333)}},52770:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s=1),t<=0?0:t>=1?1:((s*t|0)+1)*(1/s)};o.exports=y},8754:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=t(52770)},17247:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s=1e-4),Math.ceil(t-s)};o.exports=y},88456:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return l===void 0&&(l=1e-4),Math.abs(t-s)<l};o.exports=y},61824:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s=1e-4),Math.floor(t+s)};o.exports=y},41935:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return l===void 0&&(l=1e-4),t>s-l};o.exports=y},54726:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return l===void 0&&(l=1e-4),t<s+l};o.exports=y},52778:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:t(17247),Equal:t(88456),Floor:t(61824),GreaterThan:t(41935),LessThan:t(54726)}},5923:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(83392),l=t(98611),a={Angle:t(22153),Distance:t(10130),Easing:t(33063),Fuzzy:t(52778),Interpolation:t(48528),Pow2:t(73773),Snap:t(23679),RandomDataGenerator:t(81429),Average:t(26042),Bernstein:t(22824),Between:t(17489),CatmullRom:t(14976),CeilTo:t(89129),Clamp:t(82897),DegToRad:t(75606),Difference:t(767),Euler:t(9849),Factorial:t(8034),FloatBetween:t(61616),FloorTo:t(60679),FromPercent:t(91806),GetSpeed:t(79366),IsEven:t(43776),IsEvenStrict:t(58442),Linear:t(42798),LinearXY:t(61072),MaxAdd:t(69635),Median:t(37394),MinSub:t(17259),Percent:t(61820),RadToDeg:t(23701),RandomXY:t(16906),RandomXYZ:t(52417),RandomXYZW:t(17915),Rotate:t(52257),RotateAround:t(2386),RotateAroundDistance:t(72395),RotateTo:t(41061),RoundAwayFromZero:t(67233),RoundTo:t(64333),SinCosTableGenerator:t(59533),SmootherStep:t(87736),SmoothStep:t(5514),ToXY:t(55805),TransformXY:t(64462),Within:t(9557),Wrap:t(1071),Vector2:t(93736),Vector3:t(70015),Vector4:t(51729),Matrix3:t(5341),Matrix4:t(16650),Quaternion:t(75003),RotateVec3:t(93709)};a=l(!1,a,s),o.exports=a},63210:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22824),l=function(a,r){for(var i=0,n=a.length-1,h=0;h<=n;h++)i+=Math.pow(1-r,n-h)*Math.pow(r,h)*a[h]*s(n,h);return i};o.exports=l},88332:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14976),l=function(a,r){var i=a.length-1,n=i*r,h=Math.floor(n);return a[0]===a[i]?(r<0&&(h=Math.floor(n=i*(1+r))),s(n-h,a[(h-1+i)%i],a[h],a[(h+1)%i],a[(h+2)%i])):r<0?a[0]-(s(-n,a[0],a[0],a[1],a[1])-a[0]):r>1?a[i]-(s(n-i,a[i],a[i],a[i-1],a[i-1])-a[i]):s(n-h,a[h?h-1:0],a[h],a[i<h+1?i:h+1],a[i<h+2?i:h+2])};o.exports=l},34631:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(r,i){var n=1-r;return n*n*n*i}function t(r,i){var n=1-r;return 3*n*n*r*i}function s(r,i){return 3*(1-r)*r*r*i}function l(r,i){return r*r*r*i}var a=function(r,i,n,h,d){return y(r,i)+t(r,n)+s(r,h)+l(r,d)};o.exports=a},47614:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42798),l=function(a,r){var i=a.length-1,n=i*r,h=Math.floor(n);return r<0?s(a[0],a[1],n):r>1?s(a[i],a[i-1],i-n):s(a[h],a[h+1>i?i:h+1],n-h)};o.exports=l},16252:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(a,r){var i=1-a;return i*i*r}function t(a,r){return 2*(1-a)*a*r}function s(a,r){return a*a*r}var l=function(a,r,i,n){return y(a,r)+t(a,i)+s(a,n)};o.exports=l},44521:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5514),l=function(a,r,i){return r+(i-r)*s(a,0,1)};o.exports=l},45507:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87736),l=function(a,r,i){return r+(i-r)*s(a,0,1)};o.exports=l},48528:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bezier:t(63210),CatmullRom:t(88332),CubicBezier:t(34631),Linear:t(47614),QuadraticBezier:t(16252),SmoothStep:t(44521),SmootherStep:t(45507)}},3504:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s=Math.log(t)/.6931471805599453;return 1<<Math.ceil(s)};o.exports=y},28621:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t>0&&(t&t-1)===0&&s>0&&(s&s-1)===0};o.exports=y},2018:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t>0&&(t&t-1)===0};o.exports=y},73773:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetNext:t(3504),IsSize:t(28621),IsValue:t(2018)}},81429:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){r===void 0&&(r=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],r&&this.init(r)},rnd:function(){var a=2091639*this.s0+this.c*23283064365386963e-26;return this.c=a|0,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},hash:function(a){var r,i=this.n;a=a.toString();for(var n=0;n<a.length;n++)i+=a.charCodeAt(n),r=.02519603282416938*i,i=r>>>0,r-=i,r*=i,i=r>>>0,r-=i,i+=r*4294967296;return this.n=i,(i>>>0)*23283064365386963e-26},init:function(a){typeof a=="string"?this.state(a):this.sow(a)},sow:function(a){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!a)for(var r=0;r<a.length&&a[r]!=null;r++){var i=a[r];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(a,r){return Math.floor(this.realInRange(0,r-a+1)+a)},between:function(a,r){return Math.floor(this.realInRange(0,r-a+1)+a)},realInRange:function(a,r){return this.frac()*(r-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",r="";for(r=a="";a++<36;r+=~a%5|a*3&4?(a^15?8^this.frac()*(a^20?16:4):4).toString(16):"-");return r},pick:function(a){return a[this.integerInRange(0,a.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(a){return a[~~(Math.pow(this.frac(),2)*a.length+.5)]},timestamp:function(a,r){return this.realInRange(a||9466848e5,r||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(a){return typeof a=="string"&&a.match(/^!rnd/)&&(a=a.split(","),this.c=parseFloat(a[1]),this.s0=parseFloat(a[2]),this.s1=parseFloat(a[3]),this.s2=parseFloat(a[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(a){for(var r=a.length-1,i=r;i>0;i--){var n=Math.floor(this.frac()*(i+1)),h=a[n];a[n]=a[i],a[i]=h}return a}});o.exports=l},82127:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){return l===void 0&&(l=0),s===0?t:(t-=l,t=s*Math.ceil(t/s),a?(l+t)/s:l+t)};o.exports=y},84314:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){return l===void 0&&(l=0),s===0?t:(t-=l,t=s*Math.floor(t/s),a?(l+t)/s:l+t)};o.exports=y},88462:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){return l===void 0&&(l=0),s===0?t:(t-=l,t=s*Math.round(t/s),a?(l+t)/s:l+t)};o.exports=y},23679:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:t(82127),Floor:t(84314),To:t(88462)}},92491:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t(75205);var s=t(86459),l=t(98611),a={Actions:t(83979),Animations:t(13517),BlendModes:t(95723),Cache:t(45820),Cameras:t(44143),Core:t(80293),Class:t(56694),Create:t(84106),Curves:t(73962),Data:t(1999),Display:t(24816),DOM:t(3590),Events:t(95146),FX:t(96910),Game:t(15213),GameObjects:t(48013),Geom:t(84068),Input:t(20873),Loader:t(95695),Math:t(5923),Physics:t(53954),Plugins:t(45615),Renderer:t(42069),Scale:t(86754),ScaleModes:t(27394),Scene:t(87157),Scenes:t(20436),Structs:t(20010),Textures:t(87499),Tilemaps:t(52678),Time:t(97121),Tweens:t(75193),Utils:t(22178)};a.Sound=t(56751),a=l(!1,a,s),o.exports=a,t.g.Phaser=a},62832:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(7864),a=t(1539),r=new s({Extends:a,Mixins:[l.Acceleration,l.Angular,l.Bounce,l.Collision,l.Debug,l.Drag,l.Enable,l.Friction,l.Gravity,l.Immovable,l.Mass,l.Pushable,l.Size,l.Velocity],initialize:function(n,h,d,u,p){a.call(this,n,h,d,u,p),this.body=null}});o.exports=r},66150:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(75606),a=t(53996),r=t(35032),i=t(99523),n=t(72632),h=t(30657),d=t(2732),u=t(15147),p=t(91963),m=t(7599),v=t(93736),g=t(85233),T=new s({initialize:function(b){this.scene=b,this.systems=b.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,b.sys.events.once(m.BOOT,this.boot,this),b.sys.events.on(m.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new i(this.world),this.systems.events.once(m.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new i(this.world));var w=this.systems.events;n(this.config,"customUpdate",!1)||w.on(m.UPDATE,this.world.update,this.world),w.on(m.POST_UPDATE,this.world.postUpdate,this.world),w.once(m.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(m.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(m.UPDATE,this.world.update,this.world)},getConfig:function(){var w=this.systems.game.config.physics,b=this.systems.settings.physics,E=h(n(b,"arcade",{}),n(w,"arcade",{}));return E},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(w,b,E,A,R){return E===void 0&&(E=null),A===void 0&&(A=null),R===void 0&&(R=E),this.world.collideObjects(w,b,E,A,R,!0)},collide:function(w,b,E,A,R){return E===void 0&&(E=null),A===void 0&&(A=null),R===void 0&&(R=E),this.world.collideObjects(w,b,E,A,R,!1)},collideTiles:function(w,b,E,A,R){return this.world.collideTiles(w,b,E,A,R)},overlapTiles:function(w,b,E,A,R){return this.world.overlapTiles(w,b,E,A,R)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(w,b,E,A,R,I){A===void 0&&(A=60);var P=Math.atan2(E-w.y,b-w.x);return w.body.acceleration.setToPolar(P,A),R!==void 0&&I!==void 0&&w.body.maxVelocity.set(R,I),P},accelerateToObject:function(w,b,E,A,R){return this.accelerateTo(w,b.x,b.y,E,A,R)},closest:function(w,b){b||(b=this.world.bodies.entries);for(var E=Number.MAX_VALUE,A=null,R=w.x,I=w.y,P=b.length,N=0;N<P;N++){var F=b[N],O=F.body||F;if(!(w===F||w===O||w===O.gameObject||w===O.center)){var D=r(R,I,O.center.x,O.center.y);D<E&&(A=F,E=D)}}return A},furthest:function(w,b){b||(b=this.world.bodies.entries);for(var E=-1,A=null,R=w.x,I=w.y,P=b.length,N=0;N<P;N++){var F=b[N],O=F.body||F;if(!(w===F||w===O||w===O.gameObject||w===O.center)){var D=r(R,I,O.center.x,O.center.y);D>E&&(A=F,E=D)}}return A},moveTo:function(w,b,E,A,R){A===void 0&&(A=60),R===void 0&&(R=0);var I=Math.atan2(E-w.y,b-w.x);return R>0&&(A=a(w.x,w.y,b,E)/(R/1e3)),w.body.velocity.setToPolar(I,A),I},moveToObject:function(w,b,E,A){return this.moveTo(w,b.x,b.y,E,A)},velocityFromAngle:function(w,b,E){return b===void 0&&(b=60),E===void 0&&(E=new v),E.setToPolar(l(w),b)},velocityFromRotation:function(w,b,E){return b===void 0&&(b=60),E===void 0&&(E=new v),E.setToPolar(w,b)},overlapRect:function(w,b,E,A,R,I){return u(this.world,w,b,E,A,R,I)},overlapCirc:function(w,b,E,A,R){return d(this.world,w,b,E,A,R)},shutdown:function(){if(this.world){var w=this.systems.events;w.off(m.UPDATE,this.world.update,this.world),w.off(m.POST_UPDATE,this.world.postUpdate,this.world),w.off(m.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(m.START,this.start,this),this.scene=null,this.systems=null}});p.register("ArcadePhysics",T,"arcadePhysics"),o.exports=T},25084:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(7864),a=t(13747),r=new s({Extends:a,Mixins:[l.Acceleration,l.Angular,l.Bounce,l.Collision,l.Debug,l.Drag,l.Enable,l.Friction,l.Gravity,l.Immovable,l.Mass,l.Pushable,l.Size,l.Velocity],initialize:function(n,h,d,u,p){a.call(this,n,h,d,u,p),this.body=null}});o.exports=r},97602:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(95239),a=t(47401),r=t(27037),i=t(23701),n=t(74118),h=t(94287),d=t(15084),u=t(93736),p=new s({Mixins:[l],initialize:function(v,g){var T=64,w=64,b={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},E=g!==void 0;E&&g.displayWidth&&(T=g.displayWidth,w=g.displayHeight),E||(g=b),this.world=v,this.gameObject=E?g:void 0,this.isBody=!0,this.transform={x:g.x,y:g.y,rotation:g.angle,scaleX:g.scaleX,scaleY:g.scaleY,displayOriginX:g.displayOriginX,displayOriginY:g.displayOriginY},this.debugShowBody=v.defaults.debugShowBody,this.debugShowVelocity=v.defaults.debugShowVelocity,this.debugBodyColor=v.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(g.x-g.scaleX*g.displayOriginX,g.y-g.scaleY*g.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=g.angle,this.preRotation=g.angle,this.width=T,this.height=w,this.sourceWidth=T,this.sourceHeight=w,g.frame&&(this.sourceWidth=g.frame.realWidth,this.sourceHeight=g.frame.realHeight),this.halfWidth=Math.abs(T/2),this.halfHeight=Math.abs(w/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new u,this.newVelocity=new u,this.deltaMax=new u,this.acceleration=new u,this.allowDrag=!0,this.drag=new u,this.allowGravity=!0,this.gravity=new u,this.bounce=new u,this.worldBounce=null,this.customBoundsRectangle=v.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new u(1e4,1e4),this.maxSpeed=-1,this.friction=new u(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=a.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new u(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=d(!1),this.touching=d(!0),this.wasTouching=d(!0),this.blocked=d(!0),this.syncBounds=!1,this.physicsType=a.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=g.scaleX,this._sy=g.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new n,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var m=this.gameObject,v=this.transform;if(m.parentContainer){var g=m.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=g.tx,v.y=g.ty,v.rotation=i(g.rotation),v.scaleX=g.scaleX,v.scaleY=g.scaleY,v.displayOriginX=m.displayOriginX,v.displayOriginY=m.displayOriginY}else v.x=m.x,v.y=m.y,v.rotation=m.angle,v.scaleX=m.scaleX,v.scaleY=m.scaleY,v.displayOriginX=m.displayOriginX,v.displayOriginY=m.displayOriginY;var T=!1;if(this.syncBounds){var w=m.getBounds(this._bounds);this.width=w.width,this.height=w.height,T=!0}else{var b=Math.abs(v.scaleX),E=Math.abs(v.scaleY);(this._sx!==b||this._sy!==E)&&(this.width=this.sourceWidth*b,this.height=this.sourceHeight*E,this._sx=b,this._sy=E,T=!0)}T&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var m=this.transform;this.position.x=m.x+m.scaleX*(this.offset.x-m.displayOriginX),this.position.y=m.y+m.scaleY*(this.offset.y-m.displayOriginY),this.updateCenter()},resetFlags:function(m){m===void 0&&(m=!1);var v=this.wasTouching,g=this.touching,T=this.blocked;m?d(!0,v):(v.none=g.none,v.up=g.up,v.down=g.down,v.left=g.left,v.right=g.right),d(!0,g),d(!0,T),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(m,v){if(m&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var g=this.position;this.prev.x=g.x,this.prev.y=g.y,this.prevFrame.x=g.x,this.prevFrame.y=g.y}m&&this.update(v)},update:function(m){var v=this.prev,g=this.position,T=this.velocity;if(v.set(g.x,g.y),!this.moves){this._dx=g.x-v.x,this._dy=g.y-v.y;return}if(this.directControl){var w=this.autoFrame;T.set((g.x-w.x)/m,(g.y-w.y)/m),this.world.updateMotion(this,m),this._dx=g.x-w.x,this._dy=g.y-w.y}else this.world.updateMotion(this,m),this.newVelocity.set(T.x*m,T.y*m),g.add(this.newVelocity),this._dx=g.x-v.x,this._dy=g.y-v.y;var b=T.x,E=T.y;if(this.updateCenter(),this.angle=Math.atan2(E,b),this.speed=Math.sqrt(b*b+E*E),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var A=this.blocked;this.world.emit(r.WORLD_BOUNDS,this,A.up,A.down,A.left,A.right)}},postUpdate:function(){var m=this.position,v=m.x-this.prevFrame.x,g=m.y-this.prevFrame.y,T=this.gameObject;if(this.moves){var w=this.deltaMax.x,b=this.deltaMax.y;w!==0&&v!==0&&(v<0&&v<-w?v=-w:v>0&&v>w&&(v=w)),b!==0&&g!==0&&(g<0&&g<-b?g=-b:g>0&&g>b&&(g=b)),T&&(T.x+=v,T.y+=g)}v<0?this.facing=a.FACING_LEFT:v>0&&(this.facing=a.FACING_RIGHT),g<0?this.facing=a.FACING_UP:g>0&&(this.facing=a.FACING_DOWN),this.allowRotation&&T&&(T.angle+=this.deltaZ()),this._tx=v,this._ty=g,this.autoFrame.set(m.x,m.y)},setBoundsRectangle:function(m){return this.customBoundsRectangle=m||this.world.bounds,this},checkWorldBounds:function(){var m=this.position,v=this.velocity,g=this.blocked,T=this.customBoundsRectangle,w=this.world.checkCollision,b=this.worldBounce?-this.worldBounce.x:-this.bounce.x,E=this.worldBounce?-this.worldBounce.y:-this.bounce.y,A=!1;return m.x<T.x&&w.left?(m.x=T.x,v.x*=b,g.left=!0,A=!0):this.right>T.right&&w.right&&(m.x=T.right-this.width,v.x*=b,g.right=!0,A=!0),m.y<T.y&&w.up?(m.y=T.y,v.y*=E,g.up=!0,A=!0):this.bottom>T.bottom&&w.down&&(m.y=T.bottom-this.height,v.y*=E,g.down=!0,A=!0),A&&(this.blocked.none=!1,this.updateCenter()),A},setOffset:function(m,v){return v===void 0&&(v=m),this.offset.set(m,v),this},setGameObject:function(m,v){return v===void 0&&(v=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=m,m.body&&(m.body=this),this.setSize(),this.world.add(this),this.enable=v,this},setSize:function(m,v,g){g===void 0&&(g=!0);var T=this.gameObject;if(T&&(!m&&T.frame&&(m=T.frame.realWidth),!v&&T.frame&&(v=T.frame.realHeight)),this.sourceWidth=m,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),g&&T&&T.getCenter){var w=(T.width-m)/2,b=(T.height-v)/2;this.offset.set(w,b)}return this.isCircle=!1,this.radius=0,this},setCircle:function(m,v,g){return v===void 0&&(v=this.offset.x),g===void 0&&(g=this.offset.y),m>0?(this.isCircle=!0,this.radius=m,this.sourceWidth=m*2,this.sourceHeight=m*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,g),this.updateCenter()):this.isCircle=!1,this},reset:function(m,v){this.stop();var g=this.gameObject;g&&(g.setPosition(m,v),this.rotation=g.angle,this.preRotation=g.angle);var T=this.position;g&&g.getTopLeft?g.getTopLeft(T):T.set(m,v),this.prev.copy(T),this.prevFrame.copy(T),this.autoFrame.copy(T),g&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(m){return m.x=this.x,m.y=this.y,m.right=this.right,m.bottom=this.bottom,m},hitTest:function(m,v){if(!this.isCircle)return h(this,m,v);if(this.radius>0&&m>=this.left&&m<=this.right&&v>=this.top&&v<=this.bottom){var g=(this.center.x-m)*(this.center.x-m),T=(this.center.y-v)*(this.center.y-v);return g+T<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(m){var v=this.position,g=v.x+this.halfWidth,T=v.y+this.halfHeight;this.debugShowBody&&(m.lineStyle(m.defaultStrokeWidth,this.debugBodyColor),this.isCircle?m.strokeCircle(g,T,this.width/2):(this.checkCollision.up&&m.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&m.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&m.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&m.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(m.lineStyle(m.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),m.lineBetween(g,T,g+this.velocity.x/2,T+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(m){return m===void 0&&(m=!0),this.directControl=m,this},setCollideWorldBounds:function(m,v,g,T){m===void 0&&(m=!0),this.collideWorldBounds=m;var w=v!==void 0,b=g!==void 0;return(w||b)&&(this.worldBounce||(this.worldBounce=new u),w&&(this.worldBounce.x=v),b&&(this.worldBounce.y=g)),T!==void 0&&(this.onWorldBounds=T),this},setVelocity:function(m,v){return this.velocity.set(m,v),m=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(m*m+v*v),this},setVelocityX:function(m){return this.setVelocity(m,this.velocity.y)},setVelocityY:function(m){return this.setVelocity(this.velocity.x,m)},setMaxVelocity:function(m,v){return this.maxVelocity.set(m,v),this},setMaxVelocityX:function(m){return this.maxVelocity.x=m,this},setMaxVelocityY:function(m){return this.maxVelocity.y=m,this},setMaxSpeed:function(m){return this.maxSpeed=m,this},setSlideFactor:function(m,v){return this.slideFactor.set(m,v),this},setBounce:function(m,v){return this.bounce.set(m,v),this},setBounceX:function(m){return this.bounce.x=m,this},setBounceY:function(m){return this.bounce.y=m,this},setAcceleration:function(m,v){return this.acceleration.set(m,v),this},setAccelerationX:function(m){return this.acceleration.x=m,this},setAccelerationY:function(m){return this.acceleration.y=m,this},setAllowDrag:function(m){return m===void 0&&(m=!0),this.allowDrag=m,this},setAllowGravity:function(m){return m===void 0&&(m=!0),this.allowGravity=m,this},setAllowRotation:function(m){return m===void 0&&(m=!0),this.allowRotation=m,this},setDrag:function(m,v){return this.drag.set(m,v),this},setDamping:function(m){return this.useDamping=m,this},setDragX:function(m){return this.drag.x=m,this},setDragY:function(m){return this.drag.y=m,this},setGravity:function(m,v){return this.gravity.set(m,v),this},setGravityX:function(m){return this.gravity.x=m,this},setGravityY:function(m){return this.gravity.y=m,this},setFriction:function(m,v){return this.friction.set(m,v),this},setFrictionX:function(m){return this.friction.x=m,this},setFrictionY:function(m){return this.friction.y=m,this},setAngularVelocity:function(m){return this.angularVelocity=m,this},setAngularAcceleration:function(m){return this.angularAcceleration=m,this},setAngularDrag:function(m){return this.angularDrag=m,this},setMass:function(m){return this.mass=m,this},setImmovable:function(m){return m===void 0&&(m=!0),this.immovable=m,this},setEnable:function(m){return m===void 0&&(m=!0),this.enable=m,this},processX:function(m,v,g,T){this.x+=m,this.updateCenter(),v!==null&&(this.velocity.x=v*this.slideFactor.x);var w=this.blocked;g&&(w.left=!0,w.none=!1),T&&(w.right=!0,w.none=!1)},processY:function(m,v,g,T){this.y+=m,this.updateCenter(),v!==null&&(this.velocity.y=v*this.slideFactor.y);var w=this.blocked;g&&(w.up=!0,w.none=!1),T&&(w.down=!0,w.none=!1)},x:{get:function(){return this.position.x},set:function(m){this.position.x=m}},y:{get:function(){return this.position.y},set:function(m){this.position.y=m}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=p},3909:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h,d,u,p){this.world=r,this.name="",this.active=!0,this.overlapOnly=i,this.object1=n,this.object2=h,this.collideCallback=d,this.processCallback=u,this.callbackContext=p},setName:function(a){return this.name=a,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});o.exports=l},99523:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62832),l=t(25084),a=t(97602),r=t(56694),i=t(47401),n=t(10481),h=t(66634),d=t(46346),u=new r({initialize:function(m){this.world=m,this.scene=m.scene,this.sys=m.scene.sys},collider:function(p,m,v,g,T){return this.world.addCollider(p,m,v,g,T)},overlap:function(p,m,v,g,T){return this.world.addOverlap(p,m,v,g,T)},existing:function(p,m){var v=m?i.STATIC_BODY:i.DYNAMIC_BODY;return this.world.enableBody(p,v),p},staticImage:function(p,m,v,g){var T=new s(this.scene,p,m,v,g);return this.sys.displayList.add(T),this.world.enableBody(T,i.STATIC_BODY),T},image:function(p,m,v,g){var T=new s(this.scene,p,m,v,g);return this.sys.displayList.add(T),this.world.enableBody(T,i.DYNAMIC_BODY),T},staticSprite:function(p,m,v,g){var T=new l(this.scene,p,m,v,g);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,i.STATIC_BODY),T},sprite:function(p,m,v,g){var T=new l(this.scene,p,m,v,g);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,i.DYNAMIC_BODY),T},staticGroup:function(p,m){return this.sys.updateList.add(new d(this.world,this.world.scene,p,m))},group:function(p,m){return this.sys.updateList.add(new n(this.world,this.world.scene,p,m))},body:function(p,m,v,g){var T=new a(this.world);return T.position.set(p,m),v&&g&&T.setSize(v,g),this.world.add(T,i.DYNAMIC_BODY),T},staticBody:function(p,m,v,g){var T=new h(this.world);return T.position.set(p,m),v&&g&&T.setSize(v,g),this.world.add(T,i.STATIC_BODY),T},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=u},44880:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s=0;if(!Array.isArray(t))s=t;else for(var l=0;l<t.length;l++)s|=t[l];return s};o.exports=y},75671:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47401),l=function(a,r,i,n){var h=0,d=a.deltaAbsX()+r.deltaAbsX()+n;return a._dx===0&&r._dx===0?(a.embedded=!0,r.embedded=!0):a._dx>r._dx?(h=a.right-r.x,h>d&&!i||a.checkCollision.right===!1||r.checkCollision.left===!1?h=0:(a.touching.none=!1,a.touching.right=!0,r.touching.none=!1,r.touching.left=!0,r.physicsType===s.STATIC_BODY&&!i&&(a.blocked.none=!1,a.blocked.right=!0),a.physicsType===s.STATIC_BODY&&!i&&(r.blocked.none=!1,r.blocked.left=!0))):a._dx<r._dx&&(h=a.x-r.width-r.x,-h>d&&!i||a.checkCollision.left===!1||r.checkCollision.right===!1?h=0:(a.touching.none=!1,a.touching.left=!0,r.touching.none=!1,r.touching.right=!0,r.physicsType===s.STATIC_BODY&&!i&&(a.blocked.none=!1,a.blocked.left=!0),a.physicsType===s.STATIC_BODY&&!i&&(r.blocked.none=!1,r.blocked.right=!0))),a.overlapX=h,r.overlapX=h,h};o.exports=l},66185:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47401),l=function(a,r,i,n){var h=0,d=a.deltaAbsY()+r.deltaAbsY()+n;return a._dy===0&&r._dy===0?(a.embedded=!0,r.embedded=!0):a._dy>r._dy?(h=a.bottom-r.y,h>d&&!i||a.checkCollision.down===!1||r.checkCollision.up===!1?h=0:(a.touching.none=!1,a.touching.down=!0,r.touching.none=!1,r.touching.up=!0,r.physicsType===s.STATIC_BODY&&!i&&(a.blocked.none=!1,a.blocked.down=!0),a.physicsType===s.STATIC_BODY&&!i&&(r.blocked.none=!1,r.blocked.up=!0))):a._dy<r._dy&&(h=a.y-r.bottom,-h>d&&!i||a.checkCollision.up===!1||r.checkCollision.down===!1?h=0:(a.touching.none=!1,a.touching.up=!0,r.touching.none=!1,r.touching.down=!0,r.physicsType===s.STATIC_BODY&&!i&&(a.blocked.none=!1,a.blocked.up=!0),a.physicsType===s.STATIC_BODY&&!i&&(r.blocked.none=!1,r.blocked.down=!0))),a.overlapY=h,r.overlapY=h,h};o.exports=l},10481:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25084),l=t(56694),a=t(95239),r=t(47401),i=t(72632),n=t(59192),h=t(42911),d=new l({Extends:n,Mixins:[a],initialize:function(p,m,v,g){if(!v&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(h(v))g=v,v=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(v)&&h(v[0])){var T=this;v.forEach(function(w){w.internalCreateCallback=T.createCallbackHandler,w.internalRemoveCallback=T.removeCallbackHandler,w.classType=i(w,"classType",s)}),g=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=p,g&&(g.classType=i(g,"classType",s)),this.physicsType=r.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this.defaults={setCollideWorldBounds:i(g,"collideWorldBounds",!1),setBoundsRectangle:i(g,"customBoundsRectangle",null),setAccelerationX:i(g,"accelerationX",0),setAccelerationY:i(g,"accelerationY",0),setAllowDrag:i(g,"allowDrag",!0),setAllowGravity:i(g,"allowGravity",!0),setAllowRotation:i(g,"allowRotation",!0),setDamping:i(g,"useDamping",!1),setBounceX:i(g,"bounceX",0),setBounceY:i(g,"bounceY",0),setDragX:i(g,"dragX",0),setDragY:i(g,"dragY",0),setEnable:i(g,"enable",!0),setGravityX:i(g,"gravityX",0),setGravityY:i(g,"gravityY",0),setFrictionX:i(g,"frictionX",0),setFrictionY:i(g,"frictionY",0),setMaxSpeed:i(g,"maxSpeed",-1),setMaxVelocityX:i(g,"maxVelocityX",1e4),setMaxVelocityY:i(g,"maxVelocityY",1e4),setVelocityX:i(g,"velocityX",0),setVelocityY:i(g,"velocityY",0),setAngularVelocity:i(g,"angularVelocity",0),setAngularAcceleration:i(g,"angularAcceleration",0),setAngularDrag:i(g,"angularDrag",0),setMass:i(g,"mass",1),setImmovable:i(g,"immovable",!1)},n.call(this,m,v,g),this.type="PhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,r.DYNAMIC_BODY);var p=u.body;for(var m in this.defaults)p[m](this.defaults[m])},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},setVelocity:function(u,p,m){m===void 0&&(m=0);for(var v=this.getChildren(),g=0;g<v.length;g++)v[g].body.velocity.set(u+g*m,p+g*m);return this},setVelocityX:function(u,p){p===void 0&&(p=0);for(var m=this.getChildren(),v=0;v<m.length;v++)m[v].body.velocity.x=u+v*p;return this},setVelocityY:function(u,p){p===void 0&&(p=0);for(var m=this.getChildren(),v=0;v<m.length;v++)m[v].body.velocity.y=u+v*p;return this}});o.exports=d},22916:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y,t,s,l,a,r,i,n,h,d,u,p,m,v,g,T,w,b=function(N,F,O){y=N,t=F;var D=y.velocity.x,L=t.velocity.x;return s=y.pushable,h=y._dx<0,d=y._dx>0,u=y._dx===0,g=Math.abs(y.right-t.x)<=Math.abs(t.right-y.x),i=L-D*y.bounce.x,l=t.pushable,p=t._dx<0,m=t._dx>0,v=t._dx===0,T=!g,n=D-L*t.bounce.x,w=Math.abs(O),E()},E=function(){return d&&g&&t.blocked.right?(y.processX(-w,i,!1,!0),1):h&&T&&t.blocked.left?(y.processX(w,i,!0),1):m&&T&&y.blocked.right?(t.processX(-w,n,!1,!0),2):p&&g&&y.blocked.left?(t.processX(w,n,!0),2):0},A=function(){var N=y.velocity.x,F=t.velocity.x,O=Math.sqrt(F*F*t.mass/y.mass)*(F>0?1:-1),D=Math.sqrt(N*N*y.mass/t.mass)*(N>0?1:-1),L=(O+D)*.5;return O-=L,D-=L,a=L+O*y.bounce.x,r=L+D*t.bounce.x,h&&T?R(0):p&&g?R(1):d&&g?R(2):m&&T?R(3):!1},R=function(N){if(s&&l)w*=.5,N===0||N===3?(y.processX(w,a),t.processX(-w,r)):(y.processX(-w,a),t.processX(w,r));else if(s&&!l)N===0||N===3?y.processX(w,i,!0):y.processX(-w,i,!1,!0);else if(!s&&l)N===0||N===3?t.processX(-w,n,!1,!0):t.processX(w,n,!0);else{var F=w*.5;N===0?v?(y.processX(w,0,!0),t.processX(0,null,!1,!0)):m?(y.processX(F,0,!0),t.processX(-F,0,!1,!0)):(y.processX(F,t.velocity.x,!0),t.processX(-F,null,!1,!0)):N===1?u?(y.processX(0,null,!1,!0),t.processX(w,0,!0)):d?(y.processX(-F,0,!1,!0),t.processX(F,0,!0)):(y.processX(-F,null,!1,!0),t.processX(F,y.velocity.x,!0)):N===2?v?(y.processX(-w,0,!1,!0),t.processX(0,null,!0)):p?(y.processX(-F,0,!1,!0),t.processX(F,0,!0)):(y.processX(-F,t.velocity.x,!1,!0),t.processX(F,null,!0)):N===3&&(u?(y.processX(0,null,!0),t.processX(-w,0,!1,!0)):h?(y.processX(F,0,!0),t.processX(-F,0,!1,!0)):(y.processX(F,t.velocity.y,!0),t.processX(-F,null,!1,!0)))}return!0},I=function(N){N===1?t.velocity.x=0:g?t.processX(w,n,!0):t.processX(-w,n,!1,!0),y.moves&&(t.y+=(y.y-y.prev.y)*y.friction.y,t._dy=t.y-t.prev.y)},P=function(N){N===2?y.velocity.x=0:T?y.processX(w,i,!0):y.processX(-w,i,!1,!0),t.moves&&(y.y+=(t.y-t.prev.y)*t.friction.y,y._dy=y.y-y.prev.y)};o.exports={BlockCheck:E,Check:A,Set:b,Run:R,RunImmovableBody1:I,RunImmovableBody2:P}},67050:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y,t,s,l,a,r,i,n,h,d,u,p,m,v,g,T,w,b=function(N,F,O){y=N,t=F;var D=y.velocity.y,L=t.velocity.y;return s=y.pushable,h=y._dy<0,d=y._dy>0,u=y._dy===0,g=Math.abs(y.bottom-t.y)<=Math.abs(t.bottom-y.y),i=L-D*y.bounce.y,l=t.pushable,p=t._dy<0,m=t._dy>0,v=t._dy===0,T=!g,n=D-L*t.bounce.y,w=Math.abs(O),E()},E=function(){return d&&g&&t.blocked.down?(y.processY(-w,i,!1,!0),1):h&&T&&t.blocked.up?(y.processY(w,i,!0),1):m&&T&&y.blocked.down?(t.processY(-w,n,!1,!0),2):p&&g&&y.blocked.up?(t.processY(w,n,!0),2):0},A=function(){var N=y.velocity.y,F=t.velocity.y,O=Math.sqrt(F*F*t.mass/y.mass)*(F>0?1:-1),D=Math.sqrt(N*N*y.mass/t.mass)*(N>0?1:-1),L=(O+D)*.5;return O-=L,D-=L,a=L+O*y.bounce.y,r=L+D*t.bounce.y,h&&T?R(0):p&&g?R(1):d&&g?R(2):m&&T?R(3):!1},R=function(N){if(s&&l)w*=.5,N===0||N===3?(y.processY(w,a),t.processY(-w,r)):(y.processY(-w,a),t.processY(w,r));else if(s&&!l)N===0||N===3?y.processY(w,i,!0):y.processY(-w,i,!1,!0);else if(!s&&l)N===0||N===3?t.processY(-w,n,!1,!0):t.processY(w,n,!0);else{var F=w*.5;N===0?v?(y.processY(w,0,!0),t.processY(0,null,!1,!0)):m?(y.processY(F,0,!0),t.processY(-F,0,!1,!0)):(y.processY(F,t.velocity.y,!0),t.processY(-F,null,!1,!0)):N===1?u?(y.processY(0,null,!1,!0),t.processY(w,0,!0)):d?(y.processY(-F,0,!1,!0),t.processY(F,0,!0)):(y.processY(-F,null,!1,!0),t.processY(F,y.velocity.y,!0)):N===2?v?(y.processY(-w,0,!1,!0),t.processY(0,null,!0)):p?(y.processY(-F,0,!1,!0),t.processY(F,0,!0)):(y.processY(-F,t.velocity.y,!1,!0),t.processY(F,null,!0)):N===3&&(u?(y.processY(0,null,!0),t.processY(-w,0,!1,!0)):h?(y.processY(F,0,!0),t.processY(-F,0,!1,!0)):(y.processY(F,t.velocity.y,!0),t.processY(-F,null,!1,!0)))}return!0},I=function(N){N===1?t.velocity.y=0:g?t.processY(w,n,!0):t.processY(-w,n,!1,!0),y.moves&&(t.x+=(y.x-y.prev.x)*y.friction.x,t._dx=t.x-t.prev.x)},P=function(N){N===2?y.velocity.y=0:T?y.processY(w,i,!0):y.processY(-w,i,!1,!0),t.moves&&(y.x+=(t.x-t.prev.x)*t.friction.x,y._dx=y.x-y.prev.x)};o.exports={BlockCheck:E,Check:A,Set:b,Run:R,RunImmovableBody1:I,RunImmovableBody2:P}},61777:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75671),l=t(22916),a=function(r,i,n,h,d){d===void 0&&(d=s(r,i,n,h));var u=r.immovable,p=i.immovable;if(n||d===0||u&&p||r.customSeparateX||i.customSeparateX)return d!==0||r.embedded&&i.embedded;var m=l.Set(r,i,d);return!u&&!p?m>0?!0:l.Check():(u?l.RunImmovableBody1(m):p&&l.RunImmovableBody2(m),!0)};o.exports=a},25299:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66185),l=t(67050),a=function(r,i,n,h,d){d===void 0&&(d=s(r,i,n,h));var u=r.immovable,p=i.immovable;if(n||d===0||u&&p||r.customSeparateY||i.customSeparateY)return d!==0||r.embedded&&i.embedded;var m=l.Set(r,i,d);return!u&&!p?m>0?!0:l.Check():(u?l.RunImmovableBody1(m):p&&l.RunImmovableBody2(m),!0)};o.exports=a},15084:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===void 0&&(s={}),s.none=t,s.up=!1,s.down=!1,s.left=!1,s.right=!1,t||(s.up=!0,s.down=!0,s.left=!0,s.right=!0),s};o.exports=y},66634:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65650),l=t(56694),a=t(95239),r=t(47401),i=t(94287),n=t(15084),h=t(93736),d=new l({Mixins:[a],initialize:function(p,m){var v=64,g=64,T={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},w=m!==void 0;w&&m.displayWidth&&(v=m.displayWidth,g=m.displayHeight),w||(m=T),this.world=p,this.gameObject=w?m:void 0,this.isBody=!0,this.debugShowBody=p.defaults.debugShowStaticBody,this.debugBodyColor=p.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(m.x-v*m.originX,m.y-g*m.originY),this.width=v,this.height=g,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=n(!1),this.touching=n(!0),this.wasTouching=n(!0),this.blocked=n(!0),this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(u,p){return u&&u!==this.gameObject&&(this.gameObject.body=null,u.body=this,this.gameObject=u),p&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var u=this.gameObject;return u.getTopLeft(this.position),this.width=u.displayWidth,this.height=u.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(u,p){return p===void 0&&(p=u),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(u,p),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(u,p,m){m===void 0&&(m=!0);var v=this.gameObject;if(v&&v.frame&&(u||(u=v.frame.realWidth),p||(p=v.frame.realHeight)),this.world.staticTree.remove(this),this.width=u,this.height=p,this.halfWidth=Math.floor(u/2),this.halfHeight=Math.floor(p/2),m&&v&&v.getCenter){var g=v.displayWidth/2,T=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(g-this.halfWidth,T-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(u,p,m){return p===void 0&&(p=this.offset.x),m===void 0&&(m=this.offset.y),u>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=u,this.width=u*2,this.height=u*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(p,m),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(u,p){var m=this.gameObject;u===void 0&&(u=m.x),p===void 0&&(p=m.y),this.world.staticTree.remove(this),m.setPosition(u,p),m.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(u){return u.x=this.x,u.y=this.y,u.right=this.right,u.bottom=this.bottom,u},hitTest:function(u,p){return this.isCircle?s(this,u,p):i(this,u,p)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(u){var p=this.position,m=p.x+this.halfWidth,v=p.y+this.halfHeight;this.debugShowBody&&(u.lineStyle(u.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?u.strokeCircle(m,v,this.width/2):u.strokeRect(p.x,p.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(u){return u<=0&&(u=.1),this.mass=u,this},x:{get:function(){return this.position.x},set:function(u){this.world.staticTree.remove(this),this.position.x=u,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(u){this.world.staticTree.remove(this),this.position.y=u,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=d},46346:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25084),l=t(56694),a=t(95239),r=t(47401),i=t(72632),n=t(59192),h=t(42911),d=new l({Extends:n,Mixins:[a],initialize:function(p,m,v,g){!v&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:s}:h(v)?(g=v,v=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=i(g,"classType",s)):Array.isArray(v)&&h(v[0])?(g=v,v=null,g.forEach(function(T){T.internalCreateCallback=this.createCallbackHandler,T.internalRemoveCallback=this.removeCallbackHandler,T.createMultipleCallback=this.createMultipleCallbackHandler,T.classType=i(T,"classType",s)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=p,this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,n.call(this,m,v,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,r.STATIC_BODY)},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var u=this.children.entries,p=0;p<u.length;p++)u[p].body.reset();return this}});o.exports=d},85233:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(94240),l=t(97602),a=t(82897),r=t(56694),i=t(3909),n=t(47401),h=t(53996),d=t(92951),u=t(6659),p=t(27037),m=t(88456),v=t(41935),g=t(54726),T=t(75671),w=t(66185),b=t(44662),E=t(10850),A=t(83392),R=t(74623),I=t(25163),P=t(74118),N=t(68687),F=t(27354),O=t(61777),D=t(25299),L=t(58403),z=t(66634),X=t(28808),H=t(69360),J=t(93736),G=t(1071),k=new r({Extends:u,initialize:function(B,U){u.call(this),this.scene=B,this.bodies=new L,this.staticBodies=new L,this.pendingDestroy=new L,this.colliders=new R,this.gravity=new J(E(U,"gravity.x",0),E(U,"gravity.y",0)),this.bounds=new P(E(U,"x",0),E(U,"y",0),E(U,"width",B.sys.scale.width),E(U,"height",B.sys.scale.height)),this.checkCollision={up:E(U,"checkCollision.up",!0),down:E(U,"checkCollision.down",!0),left:E(U,"checkCollision.left",!0),right:E(U,"checkCollision.right",!0)},this.fps=E(U,"fps",60),this.fixedStep=E(U,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=E(U,"timeScale",1),this.OVERLAP_BIAS=E(U,"overlapBias",4),this.TILE_BIAS=E(U,"tileBias",16),this.forceX=E(U,"forceX",!1),this.isPaused=E(U,"isPaused",!1),this._total=0,this.drawDebug=E(U,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:E(U,"debugShowBody",!0),debugShowStaticBody:E(U,"debugShowStaticBody",!0),debugShowVelocity:E(U,"debugShowVelocity",!0),bodyDebugColor:E(U,"debugBodyColor",16711935),staticBodyDebugColor:E(U,"debugStaticBodyColor",255),velocityDebugColor:E(U,"debugVelocityColor",65280)},this.maxEntries=E(U,"maxEntries",16),this.useTree=E(U,"useTree",!0),this.tree=new N(this.maxEntries),this.staticTree=new N(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new H,this._tempMatrix2=new H,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(M,B){B===void 0&&(B=n.DYNAMIC_BODY),Array.isArray(M)||(M=[M]);for(var U=0;U<M.length;U++){var W=M[U];if(W.isParent)for(var K=W.getChildren(),q=0;q<K.length;q++){var _=K[q];_.isParent?this.enable(_,B):this.enableBody(_,B)}else this.enableBody(W,B)}},enableBody:function(M,B){return B===void 0&&(B=n.DYNAMIC_BODY),M.hasTransformComponent&&(M.body||(B===n.DYNAMIC_BODY?M.body=new l(this,M):B===n.STATIC_BODY&&(M.body=new z(this,M))),this.add(M.body)),M},add:function(M){return M.physicsType===n.DYNAMIC_BODY?this.bodies.set(M):M.physicsType===n.STATIC_BODY&&(this.staticBodies.set(M),this.staticTree.insert(M)),M.enable=!0,M},disable:function(M){Array.isArray(M)||(M=[M]);for(var B=0;B<M.length;B++){var U=M[B];if(U.isParent)for(var W=U.getChildren(),K=0;K<W.length;K++){var q=W[K];q.isParent?this.disable(q):this.disableBody(q.body)}else this.disableBody(U.body)}},disableBody:function(M){this.remove(M),M.enable=!1},remove:function(M){M.physicsType===n.DYNAMIC_BODY?(this.tree.remove(M),this.bodies.delete(M)):M.physicsType===n.STATIC_BODY&&(this.staticBodies.delete(M),this.staticTree.remove(M))},createDebugGraphic:function(){var M=this.scene.sys.add.graphics({x:0,y:0});return M.setDepth(Number.MAX_VALUE),this.debugGraphic=M,this.drawDebug=!0,M},setBounds:function(M,B,U,W,K,q,_,rt){return this.bounds.setTo(M,B,U,W),K!==void 0&&this.setBoundsCollision(K,q,_,rt),this},setBoundsCollision:function(M,B,U,W){return M===void 0&&(M=!0),B===void 0&&(B=!0),U===void 0&&(U=!0),W===void 0&&(W=!0),this.checkCollision.left=M,this.checkCollision.right=B,this.checkCollision.up=U,this.checkCollision.down=W,this},pause:function(){return this.isPaused=!0,this.emit(p.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(p.RESUME),this},addCollider:function(M,B,U,W,K){U===void 0&&(U=null),W===void 0&&(W=null),K===void 0&&(K=U);var q=new i(this,!1,M,B,U,W,K);return this.colliders.add(q),q},addOverlap:function(M,B,U,W,K){U===void 0&&(U=null),W===void 0&&(W=null),K===void 0&&(K=U);var q=new i(this,!0,M,B,U,W,K);return this.colliders.add(q),q},removeCollider:function(M){return this.colliders.remove(M),this},setFPS:function(M){return this.fps=M,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(M,B){if(!(this.isPaused||this.bodies.size===0)){var U,W=this._frameTime,K=this._frameTimeMS*this.timeScale;this._elapsed+=B;var q,_=this.bodies.entries,rt=this._elapsed>=K;for(this.fixedStep||(W=B*.001,rt=!0,this._elapsed=0),U=0;U<_.length;U++)q=_[U],q.enable&&q.preUpdate(rt,W);if(rt){this._elapsed-=K,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(_));var ft=this.colliders.update();for(U=0;U<ft.length;U++){var mt=ft[U];mt.active&&mt.update()}this.emit(p.WORLD_STEP,W)}for(;this._elapsed>=K;)this._elapsed-=K,this.step(W)}},step:function(M){var B,U,W=this.bodies.entries,K=W.length;for(B=0;B<K;B++)U=W[B],U.enable&&U.update(M);this.useTree&&(this.tree.clear(),this.tree.load(W));var q=this.colliders.update();for(B=0;B<q.length;B++){var _=q[B];_.active&&_.update()}this.emit(p.WORLD_STEP,M),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var M,B,U=this.bodies.entries,W=U.length,K=this.bodies,q=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,M=0;M<W;M++)B=U[M],B.enable&&B.postUpdate();if(this.drawDebug){var _=this.debugGraphic;for(_.clear(),M=0;M<W;M++)B=U[M],B.willDrawDebug()&&B.drawDebug(_);for(U=q.entries,W=U.length,M=0;M<W;M++)B=U[M],B.willDrawDebug()&&B.drawDebug(_)}var rt=this.pendingDestroy;if(rt.size>0){var ft=this.tree,mt=this.staticTree;for(U=rt.entries,W=U.length,M=0;M<W;M++)B=U[M],B.physicsType===n.DYNAMIC_BODY?(ft.remove(B),K.delete(B)):B.physicsType===n.STATIC_BODY&&(mt.remove(B),q.delete(B)),B.world=void 0,B.gameObject=void 0;rt.clear()}},updateMotion:function(M,B){M.allowRotation&&this.computeAngularVelocity(M,B),this.computeVelocity(M,B)},computeAngularVelocity:function(M,B){var U=M.angularVelocity,W=M.angularAcceleration,K=M.angularDrag,q=M.maxAngular;W?U+=W*B:M.allowDrag&&K&&(K*=B,v(U-K,0,.1)?U-=K:g(U+K,0,.1)?U+=K:U=0),U=a(U,-q,q);var _=U-M.angularVelocity;M.angularVelocity+=_,M.rotation+=M.angularVelocity*B},computeVelocity:function(M,B){var U=M.velocity.x,W=M.acceleration.x,K=M.drag.x,q=M.maxVelocity.x,_=M.velocity.y,rt=M.acceleration.y,ft=M.drag.y,mt=M.maxVelocity.y,vt=M.speed,yt=M.maxSpeed,xt=M.allowDrag,It=M.useDamping;M.allowGravity&&(U+=(this.gravity.x+M.gravity.x)*B,_+=(this.gravity.y+M.gravity.y)*B),W?U+=W*B:xt&&K&&(It?(K=Math.pow(K,B),U*=K,vt=Math.sqrt(U*U+_*_),m(vt,0,.001)&&(U=0)):(K*=B,v(U-K,0,.01)?U-=K:g(U+K,0,.01)?U+=K:U=0)),rt?_+=rt*B:xt&&ft&&(It?(ft=Math.pow(ft,B),_*=ft,vt=Math.sqrt(U*U+_*_),m(vt,0,.001)&&(_=0)):(ft*=B,v(_-ft,0,.01)?_-=ft:g(_+ft,0,.01)?_+=ft:_=0)),U=a(U,-q,q),_=a(_,-mt,mt),M.velocity.set(U,_),yt>-1&&M.velocity.length()>yt&&(M.velocity.normalize().scale(yt),vt=yt),M.speed=vt},separate:function(M,B,U,W,K){var q,_,rt=!1,ft=!0;if(!M.enable||!B.enable||M.checkCollision.none||B.checkCollision.none||!this.intersects(M,B)||U&&U.call(W,M.gameObject,B.gameObject)===!1)return rt;if(M.isCircle||B.isCircle){var mt=this.separateCircle(M,B,K);mt.result?(rt=!0,ft=!1):(q=mt.x,_=mt.y,ft=!0)}if(ft){var vt=!1,yt=!1,xt=this.OVERLAP_BIAS;K?(vt=O(M,B,K,xt,q),yt=D(M,B,K,xt,_)):this.forceX||Math.abs(this.gravity.y+M.gravity.y)<Math.abs(this.gravity.x+M.gravity.x)?(vt=O(M,B,K,xt,q),this.intersects(M,B)&&(yt=D(M,B,K,xt,_))):(yt=D(M,B,K,xt,_),this.intersects(M,B)&&(vt=O(M,B,K,xt,q))),rt=vt||yt}return rt&&(K?(M.onOverlap||B.onOverlap)&&this.emit(p.OVERLAP,M.gameObject,B.gameObject,M,B):(M.onCollide||B.onCollide)&&this.emit(p.COLLIDE,M.gameObject,B.gameObject,M,B)),rt},separateCircle:function(M,B,U){T(M,B,!1,0),w(M,B,!1,0);var W=M.isCircle,K=B.isCircle,q=M.center,_=B.center,rt=M.immovable,ft=B.immovable,mt=M.velocity,vt=B.velocity,yt=0,xt=!0;if(W!==K){xt=!1;var It=q.x,$t=q.y,Zt=M.halfWidth,Bt=B.position.x,At=B.position.y,kt=B.right,Ut=B.bottom;K&&(It=_.x,$t=_.y,Zt=B.halfWidth,Bt=M.position.x,At=M.position.y,kt=M.right,Ut=M.bottom),$t<At?It<Bt?yt=h(It,$t,Bt,At)-Zt:It>kt&&(yt=h(It,$t,kt,At)-Zt):$t>Ut&&(It<Bt?yt=h(It,$t,Bt,Ut)-Zt:It>kt&&(yt=h(It,$t,kt,Ut)-Zt)),yt*=-1}else yt=M.halfWidth+B.halfWidth-d(q,_);M.overlapR=yt,B.overlapR=yt;var ee=s(q,_),te=(yt+A.EPSILON)*Math.cos(ee),fe=(yt+A.EPSILON)*Math.sin(ee),ae={overlap:yt,result:!1,x:te,y:fe};if(U&&(!xt||xt&&yt!==0))return ae.result=!0,ae;if(!xt&&yt===0||rt&&ft||M.customSeparateX||B.customSeparateX)return ae.x=void 0,ae.y=void 0,ae;var le=!M.pushable&&!B.pushable;if(xt){var re=q.x-_.x,we=q.y-_.y,Se=Math.sqrt(Math.pow(re,2)+Math.pow(we,2)),Me=(_.x-q.x)/Se||0,ce=(_.y-q.y)/Se||0,se=2*(mt.x*Me+mt.y*ce-vt.x*Me-vt.y*ce)/(M.mass+B.mass);(rt||ft)&&(se*=2),rt||(mt.x=mt.x-se/M.mass*Me,mt.y=mt.y-se/M.mass*ce,mt.multiply(M.bounce)),ft||(vt.x=vt.x+se/B.mass*Me,vt.y=vt.y+se/B.mass*ce,vt.multiply(B.bounce)),!rt&&!ft&&(te*=.5,fe*=.5),rt||(M.x-=te,M.y-=fe,M.updateCenter()),ft||(B.x+=te,B.y+=fe,B.updateCenter()),ae.result=!0}else!rt||M.pushable||le?(M.x-=te,M.y-=fe,M.updateCenter()):(!ft||B.pushable||le)&&(B.x+=te,B.y+=fe,B.updateCenter()),ae.x=void 0,ae.y=void 0;return ae},intersects:function(M,B){return M===B?!1:!M.isCircle&&!B.isCircle?!(M.right<=B.left||M.bottom<=B.top||M.left>=B.right||M.top>=B.bottom):M.isCircle?B.isCircle?d(M.center,B.center)<=M.halfWidth+B.halfWidth:this.circleBodyIntersects(M,B):this.circleBodyIntersects(B,M)},circleBodyIntersects:function(M,B){var U=a(M.center.x,B.left,B.right),W=a(M.center.y,B.top,B.bottom),K=(M.center.x-U)*(M.center.x-U),q=(M.center.y-W)*(M.center.y-W);return K+q<=M.halfWidth*M.halfWidth},overlap:function(M,B,U,W,K){return U===void 0&&(U=null),W===void 0&&(W=null),K===void 0&&(K=U),this.collideObjects(M,B,U,W,K,!0)},collide:function(M,B,U,W,K){return U===void 0&&(U=null),W===void 0&&(W=null),K===void 0&&(K=U),this.collideObjects(M,B,U,W,K,!1)},collideObjects:function(M,B,U,W,K,q){var _,rt;M.isParent&&(M.physicsType===void 0||B===void 0||M===B)&&(M=M.children.entries),B&&B.isParent&&B.physicsType===void 0&&(B=B.children.entries);var ft=Array.isArray(M),mt=Array.isArray(B);if(this._total=0,!ft&&!mt)this.collideHandler(M,B,U,W,K,q);else if(!ft&&mt)for(_=0;_<B.length;_++)this.collideHandler(M,B[_],U,W,K,q);else if(ft&&!mt)if(B)for(_=0;_<M.length;_++)this.collideHandler(M[_],B,U,W,K,q);else for(_=0;_<M.length;_++){var vt=M[_];for(rt=_+1;rt<M.length;rt++)_!==rt&&this.collideHandler(vt,M[rt],U,W,K,q)}else for(_=0;_<M.length;_++)for(rt=0;rt<B.length;rt++)this.collideHandler(M[_],B[rt],U,W,K,q);return this._total>0},collideHandler:function(M,B,U,W,K,q){if(B===void 0&&M.isParent)return this.collideGroupVsGroup(M,M,U,W,K,q);if(!M||!B)return!1;if(M.body||M.isBody){if(B.body||B.isBody)return this.collideSpriteVsSprite(M,B,U,W,K,q);if(B.isParent)return this.collideSpriteVsGroup(M,B,U,W,K,q);if(B.isTilemap)return this.collideSpriteVsTilemapLayer(M,B,U,W,K,q)}else if(M.isParent){if(B.body||B.isBody)return this.collideSpriteVsGroup(B,M,U,W,K,q);if(B.isParent)return this.collideGroupVsGroup(M,B,U,W,K,q);if(B.isTilemap)return this.collideGroupVsTilemapLayer(M,B,U,W,K,q)}else if(M.isTilemap){if(B.body||B.isBody)return this.collideSpriteVsTilemapLayer(B,M,U,W,K,q);if(B.isParent)return this.collideGroupVsTilemapLayer(B,M,U,W,K,q)}},canCollide:function(M,B){return M&&B&&(M.collisionMask&B.collisionCategory)!==0&&(B.collisionMask&M.collisionCategory)!==0},collideSpriteVsSprite:function(M,B,U,W,K,q){var _=M.isBody?M:M.body,rt=B.isBody?B:B.body;return this.canCollide(_,rt)?(this.separate(_,rt,W,K,q)&&(U&&U.call(K,M,B),this._total++),!0):!1},collideSpriteVsGroup:function(M,B,U,W,K,q){var _=M.isBody?M:M.body;if(!(B.length===0||!_||!_.enable||_.checkCollision.none||!this.canCollide(_,B))){var rt,ft,mt;if(this.useTree||B.physicsType===n.STATIC_BODY){var vt=this.treeMinMax;vt.minX=_.left,vt.minY=_.top,vt.maxX=_.right,vt.maxY=_.bottom;var yt=B.physicsType===n.DYNAMIC_BODY?this.tree.search(vt):this.staticTree.search(vt);for(ft=yt.length,rt=0;rt<ft;rt++)mt=yt[rt],!(_===mt||!mt.enable||mt.checkCollision.none||!B.contains(mt.gameObject))&&this.separate(_,mt,W,K,q)&&(U&&U.call(K,_.gameObject,mt.gameObject),this._total++)}else{var xt=B.getChildren(),It=B.children.entries.indexOf(M);for(ft=xt.length,rt=0;rt<ft;rt++)mt=xt[rt].body,!(!mt||rt===It||!mt.enable)&&this.separate(_,mt,W,K,q)&&(U&&U.call(K,_.gameObject,mt.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(M,B,U,W,K,q){if(!this.canCollide(M,B))return!1;var _=M.getChildren();if(_.length===0)return!1;for(var rt=!1,ft=0;ft<_.length;ft++)(_[ft].body||_[ft].isBody)&&this.collideSpriteVsTilemapLayer(_[ft],B,U,W,K,q)&&(rt=!0);return rt},collideTiles:function(M,B,U,W,K){return B.length===0||M.body&&!M.body.enable||M.isBody&&!M.enable?!1:this.collideSpriteVsTilesHandler(M,B,U,W,K,!1,!1)},overlapTiles:function(M,B,U,W,K){return B.length===0||M.body&&!M.body.enable||M.isBody&&!M.enable?!1:this.collideSpriteVsTilesHandler(M,B,U,W,K,!0,!1)},collideSpriteVsTilemapLayer:function(M,B,U,W,K,q){var _=M.isBody?M:M.body;if(!_.enable||_.checkCollision.none||!this.canCollide(_,B))return!1;var rt=_.x,ft=_.y,mt=_.width,vt=_.height,yt=B.layer;if(yt.tileWidth>yt.baseTileWidth){var xt=(yt.tileWidth-yt.baseTileWidth)*B.scaleX;rt-=xt,mt+=xt}if(yt.tileHeight>yt.baseTileHeight){var It=(yt.tileHeight-yt.baseTileHeight)*B.scaleY;vt+=It}var $t=q?null:this.tileFilterOptions,Zt=b(rt,ft,mt,vt,$t,B.scene.cameras.main,B.layer);return Zt.length===0?!1:this.collideSpriteVsTilesHandler(M,Zt,U,W,K,q,!0)},collideSpriteVsTilesHandler:function(M,B,U,W,K,q,_){for(var rt=M.isBody?M:M.body,ft,mt={left:0,right:0,top:0,bottom:0},vt,yt=!1,xt=0;xt<B.length;xt++){ft=B[xt],vt=ft.tilemapLayer;var It=vt.tileToWorldXY(ft.x,ft.y);mt.left=It.x,mt.top=It.y,ft.baseHeight!==ft.height&&(mt.top-=(ft.height-ft.baseHeight)*vt.scaleY),mt.right=mt.left+ft.width*vt.scaleX,mt.bottom=mt.top+ft.height*vt.scaleY,X(mt,rt)&&(!W||W.call(K,M,ft))&&I(ft,M)&&(q||F(xt,rt,ft,mt,vt,this.TILE_BIAS,_))&&(this._total++,yt=!0,U&&U.call(K,M,ft),q&&rt.onOverlap?this.emit(p.TILE_OVERLAP,M,ft,rt):rt.onCollide&&this.emit(p.TILE_COLLIDE,M,ft,rt))}return yt},collideGroupVsGroup:function(M,B,U,W,K,q){if(!(M.length===0||B.length===0||!this.canCollide(M,B)))for(var _=M.getChildren(),rt=0;rt<_.length;rt++)this.collideSpriteVsGroup(_[rt],B,U,W,K,q)},wrap:function(M,B){M.body?this.wrapObject(M,B):M.getChildren?this.wrapArray(M.getChildren(),B):Array.isArray(M)?this.wrapArray(M,B):this.wrapObject(M,B)},wrapArray:function(M,B){for(var U=0;U<M.length;U++)this.wrapObject(M[U],B)},wrapObject:function(M,B){B===void 0&&(B=0),M.x=G(M.x,this.bounds.left-B,this.bounds.right+B),M.y=G(M.y,this.bounds.top-B,this.bounds.bottom+B)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});o.exports=k},5321:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setAcceleration:function(t,s){return this.body.acceleration.set(t,s),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}};o.exports=y},29257:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}};o.exports=y},62122:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setBounce:function(t,s){return this.body.bounce.set(t,s),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,s,l,a){return this.body.setCollideWorldBounds(t,s,l,a),this}};o.exports=y},95239:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44880),l={setCollisionCategory:function(a){var r=this.body?this.body:this;return r.collisionCategory=a,this},willCollideWith:function(a){var r=this.body?this.body:this;return(r.collisionMask&a)!==0},addCollidesWith:function(a){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask|a,this},removeCollidesWith:function(a){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask&~a,this},setCollidesWith:function(a){var r=this.body?this.body:this;return r.collisionMask=s(a),this},resetCollisionCategory:function(){var a=this.body?this.body:this;return a.collisionCategory=1,a.collisionMask=1,this}};o.exports=l},99803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setDebug:function(t,s,l){return this.debugShowBody=t,this.debugShowVelocity=s,this.debugBodyColor=l,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}};o.exports=y},87145:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setDrag:function(t,s){return this.body.drag.set(t,s),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}};o.exports=y},96174:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setDirectControl:function(t){return this.body.setDirectControl(t),this},enableBody:function(t,s,l,a,r){return t&&this.body.reset(s,l),a&&(this.body.gameObject.active=!0),r&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,s){return t===void 0&&(t=!1),s===void 0&&(s=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),s&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};o.exports=y},51702:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setFriction:function(t,s){return this.body.friction.set(t,s),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}};o.exports=y},25578:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setGravity:function(t,s){return this.body.gravity.set(t,s),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}};o.exports=y},72029:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setImmovable:function(t){return t===void 0&&(t=!0),this.body.immovable=t,this}};o.exports=y},34566:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setMass:function(t){return this.body.mass=t,this}};o.exports=y},2732:(o,y,t)=>{var s=t(15147),l=t(26673),a=t(22184),r=t(26535),i=function(n,h,d,u,p,m){var v=s(n,h-u,d-u,2*u,2*u,p,m);if(v.length===0)return v;for(var g=new l(h,d,u),T=new l,w=[],b=0;b<v.length;b++){var E=v[b];E.isCircle?(T.setTo(E.center.x,E.center.y,E.halfWidth),a(g,T)&&w.push(E)):r(g,E)&&w.push(E)}return w};o.exports=i},15147:o=>{var y=function(t,s,l,a,r,i,n){i===void 0&&(i=!0),n===void 0&&(n=!1);var h=[],d=[],u=t.treeMinMax;if(u.minX=s,u.minY=l,u.maxX=s+a,u.maxY=l+r,n&&(d=t.staticTree.search(u)),i&&t.useTree)h=t.tree.search(u);else if(i){var p=t.bodies,m={position:{x:s,y:l},left:s,top:l,right:s+a,bottom:l+r,isCircle:!1},v=t.intersects;p.iterate(function(g){v(g,m)&&h.push(g)})}return d.concat(h)};o.exports=y},57527:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setPushable:function(t){return t===void 0&&(t=!0),this.body.pushable=t,this}};o.exports=y},77687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setOffset:function(t,s){return this.body.setOffset(t,s),this},setSize:function(t,s,l){return this.body.setSize(t,s,l),this},setBodySize:function(t,s,l){return this.body.setSize(t,s,l),this},setCircle:function(t,s,l){return this.body.setCircle(t,s,l),this}};o.exports=y},66536:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setVelocity:function(t,s){return this.body.setVelocity(t,s),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,s){return this.body.maxVelocity.set(t,s),this}};o.exports=y},7864:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Acceleration:t(5321),Angular:t(29257),Bounce:t(62122),Collision:t(95239),Debug:t(99803),Drag:t(87145),Enable:t(96174),Friction:t(51702),Gravity:t(25578),Immovable:t(72029),Mass:t(34566),OverlapCirc:t(2732),OverlapRect:t(15147),Pushable:t(57527),Size:t(77687),Velocity:t(66536)}},47401:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};o.exports=y},22346:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collide"},95092:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="overlap"},15775:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},74142:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},22825:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tilecollide"},10851:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tileoverlap"},7543:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldbounds"},1487:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldstep"},27037:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COLLIDE:t(22346),OVERLAP:t(95092),PAUSE:t(15775),RESUME:t(74142),TILE_COLLIDE:t(22825),TILE_OVERLAP:t(10851),WORLD_BOUNDS:t(7543),WORLD_STEP:t(1487)}},39977:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47401),l=t(98611),a={ArcadePhysics:t(66150),Body:t(97602),Collider:t(3909),Components:t(7864),Events:t(27037),Factory:t(99523),GetCollidesWith:t(44880),GetOverlapX:t(75671),GetOverlapY:t(66185),SeparateX:t(61777),SeparateY:t(25299),Group:t(10481),Image:t(62832),Sprite:t(25084),StaticBody:t(66634),StaticGroup:t(46346),Tilemap:t(8413),World:t(85233)};a=l(!1,a,s),o.exports=a},25163:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,s,t):t.layer.callbacks[t.index]?!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,s,t):!0};o.exports=y},98209:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s<0?(t.blocked.none=!1,t.blocked.left=!0):s>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=s,t.updateCenter(),t.bounce.x===0?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x};o.exports=y},72792:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s<0?(t.blocked.none=!1,t.blocked.up=!0):s>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=s,t.updateCenter(),t.bounce.y===0?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y};o.exports=y},27354:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14405),l=t(52926),a=t(28808),r=function(i,n,h,d,u,p,m){var v=d.left,g=d.top,T=d.right,w=d.bottom,b=h.faceLeft||h.faceRight,E=h.faceTop||h.faceBottom;if(m||(b=!0,E=!0),!b&&!E)return!1;var A=0,R=0,I=0,P=1;if(n.deltaAbsX()>n.deltaAbsY()?I=-1:n.deltaAbsX()<n.deltaAbsY()&&(P=-1),n.deltaX()!==0&&n.deltaY()!==0&&b&&E&&(I=Math.min(Math.abs(n.position.x-T),Math.abs(n.right-v)),P=Math.min(Math.abs(n.position.y-w),Math.abs(n.bottom-g))),I<P){if(b&&(A=s(n,h,v,T,p,m),A!==0&&!a(d,n)))return!0;E&&(R=l(n,h,g,w,p,m))}else{if(E&&(R=l(n,h,g,w,p,m),R!==0&&!a(d,n)))return!0;b&&(A=s(n,h,v,T,p,m))}return A!==0||R!==0};o.exports=r},14405:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98209),l=function(a,r,i,n,h,d){var u=0,p=r.faceLeft,m=r.faceRight,v=r.collideLeft,g=r.collideRight;return d||(p=!0,m=!0,v=!0,g=!0),a.deltaX()<0&&g&&a.checkCollision.left?m&&a.x<n&&(u=a.x-n,u<-h&&(u=0)):a.deltaX()>0&&v&&a.checkCollision.right&&p&&a.right>i&&(u=a.right-i,u>h&&(u=0)),u!==0&&(a.customSeparateX?a.overlapX=u:s(a,u)),u};o.exports=l},52926:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72792),l=function(a,r,i,n,h,d){var u=0,p=r.faceTop,m=r.faceBottom,v=r.collideUp,g=r.collideDown;return d||(p=!0,m=!0,v=!0,g=!0),a.deltaY()<0&&g&&a.checkCollision.up?m&&a.y<n&&(u=a.y-n,u<-h&&(u=0)):a.deltaY()>0&&v&&a.checkCollision.down&&p&&a.bottom>i&&(u=a.bottom-i,u>h&&(u=0)),u!==0&&(a.customSeparateY?a.overlapY=u:s(a,u)),u};o.exports=l},28808:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return!(s.right<=t.left||s.bottom<=t.top||s.position.x>=t.right||s.position.y>=t.bottom)};o.exports=y},8413:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ProcessTileCallbacks:t(25163),ProcessTileSeparationX:t(98209),ProcessTileSeparationY:t(72792),SeparateTile:t(27354),TileCheckX:t(14405),TileCheckY:t(52926),TileIntersectsBody:t(28808)};o.exports=s},53954:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Arcade:t(39977),Matter:t(45949)}},63568:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93736),a=new s({initialize:function(){this.boundsCenter=new l,this.centerDiff=new l},parseBody:function(r){if(r=r.hasOwnProperty("body")?r.body:r,!r.hasOwnProperty("bounds")||!r.hasOwnProperty("centerOfMass"))return!1;var i=this.boundsCenter,n=this.centerDiff,h=r.bounds.max.x-r.bounds.min.x,d=r.bounds.max.y-r.bounds.min.y,u=h*r.centerOfMass.x,p=d*r.centerOfMass.y;return i.set(h/2,d/2),n.set(u-i.x,p-i.y),!0},getTopLeft:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+h.x+d.x,n+h.y+d.y)}return!1},getTopCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+d.x,n+h.y+d.y)}return!1},getTopRight:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i-(h.x-d.x),n+h.y+d.y)}return!1},getLeftCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+h.x+d.x,n+d.y)}return!1},getCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.centerDiff;return new l(i+h.x,n+h.y)}return!1},getRightCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i-(h.x-d.x),n+d.y)}return!1},getBottomLeft:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+h.x+d.x,n-(h.y-d.y))}return!1},getBottomCenter:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i+d.x,n-(h.y-d.y))}return!1},getBottomRight:function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),this.parseBody(r)){var h=this.boundsCenter,d=this.centerDiff;return new l(i-(h.x-d.x),n-(h.y-d.y))}return!1}});o.exports=a},18171:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16929);s.Body=t(84125),s.Composite=t(11299),s.World=t(72005),s.Collision=t(63454),s.Detector=t(13657),s.Pairs=t(91327),s.Pair=t(70584),s.Query=t(13390),s.Resolver=t(44272),s.Constraint=t(52838),s.Common=t(68758),s.Engine=t(45775),s.Events=t(39073),s.Sleeping=t(22806),s.Plugin=t(84474),s.Bodies=t(68516),s.Composites=t(56643),s.Axes=t(50658),s.Bounds=t(84091),s.Svg=t(92765),s.Vector=t(10438),s.Vertices=t(39745),s.World.add=s.Composite.add,s.World.remove=s.Composite.remove,s.World.addComposite=s.Composite.addComposite,s.World.addBody=s.Composite.addBody,s.World.addConstraint=s.Composite.addConstraint,s.World.clear=s.Composite.clear,o.exports=s},72653:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(56694),a=t(56643),r=t(52838),i=t(92765),n=t(3860),h=t(7030),d=t(73658),u=t(84720),p=t(10998),m=t(72829),v=t(88596),g=t(39745),T=new l({initialize:function(b){this.world=b,this.scene=b.scene,this.sys=b.scene.sys},rectangle:function(w,b,E,A,R){var I=s.rectangle(w,b,E,A,R);return this.world.add(I),I},trapezoid:function(w,b,E,A,R,I){var P=s.trapezoid(w,b,E,A,R,I);return this.world.add(P),P},circle:function(w,b,E,A,R){var I=s.circle(w,b,E,A,R);return this.world.add(I),I},polygon:function(w,b,E,A,R){var I=s.polygon(w,b,E,A,R);return this.world.add(I),I},fromVertices:function(w,b,E,A,R,I,P){typeof E=="string"&&(E=g.fromPath(E));var N=s.fromVertices(w,b,E,A,R,I,P);return this.world.add(N),N},fromPhysicsEditor:function(w,b,E,A,R){R===void 0&&(R=!0);var I=p.parseBody(w,b,E,A);return R&&!this.world.has(I)&&this.world.add(I),I},fromSVG:function(w,b,E,A,R,I){A===void 0&&(A=1),R===void 0&&(R={}),I===void 0&&(I=!0);for(var P=E.getElementsByTagName("path"),N=[],F=0;F<P.length;F++){var O=i.pathToVertices(P[F],30);A!==1&&g.scale(O,A,A),N.push(O)}var D=s.fromVertices(w,b,N,R);return I&&this.world.add(D),D},fromJSON:function(w,b,E,A,R){A===void 0&&(A={}),R===void 0&&(R=!0);var I=m.parseBody(w,b,E,A);return I&&R&&this.world.add(I),I},imageStack:function(w,b,E,A,R,I,P,N,F){P===void 0&&(P=0),N===void 0&&(N=0),F===void 0&&(F={});var O=this.world,D=this.sys.displayList;F.addToWorld=!1;var L=a.stack(E,A,R,I,P,N,function(z,X){var H=new h(O,z,X,w,b,F);return D.add(H),H.body});return O.add(L),L},stack:function(w,b,E,A,R,I,P){var N=a.stack(w,b,E,A,R,I,P);return this.world.add(N),N},pyramid:function(w,b,E,A,R,I,P){var N=a.pyramid(w,b,E,A,R,I,P);return this.world.add(N),N},chain:function(w,b,E,A,R,I){return a.chain(w,b,E,A,R,I)},mesh:function(w,b,E,A,R){return a.mesh(w,b,E,A,R)},newtonsCradle:function(w,b,E,A,R){var I=a.newtonsCradle(w,b,E,A,R);return this.world.add(I),I},car:function(w,b,E,A,R){var I=a.car(w,b,E,A,R);return this.world.add(I),I},softBody:function(w,b,E,A,R,I,P,N,F,O){var D=a.softBody(w,b,E,A,R,I,P,N,F,O);return this.world.add(D),D},joint:function(w,b,E,A,R){return this.constraint(w,b,E,A,R)},spring:function(w,b,E,A,R){return this.constraint(w,b,E,A,R)},constraint:function(w,b,E,A,R){A===void 0&&(A=1),R===void 0&&(R={}),R.bodyA=w.type==="body"?w:w.body,R.bodyB=b.type==="body"?b:b.body,isNaN(E)||(R.length=E),R.stiffness=A;var I=r.create(R);return this.world.add(I),I},worldConstraint:function(w,b,E,A){E===void 0&&(E=1),A===void 0&&(A={}),A.bodyB=w.type==="body"?w:w.body,isNaN(b)||(A.length=b),A.stiffness=E;var R=r.create(A);return this.world.add(R),R},mouseSpring:function(w){return this.pointerConstraint(w)},pointerConstraint:function(w){w===void 0&&(w={}),w.hasOwnProperty("render")||(w.render={visible:!1});var b=new v(this.scene,this.world,w);return this.world.add(b.constraint),b},image:function(w,b,E,A,R){var I=new h(this.world,w,b,E,A,R);return this.sys.displayList.add(I),I},tileBody:function(w,b){return new u(this.world,w,b)},sprite:function(w,b,E,A,R){var I=new d(this.world,w,b,E,A,R);return this.sys.displayList.add(I),this.sys.updateList.add(I),I},gameObject:function(w,b,E){return n(this.world,w,b,E)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=T},3860:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74527),l=t(72632),a=t(93736);function r(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}var i=function(n,h,d,u){d===void 0&&(d={}),u===void 0&&(u=!0);var p=h.x,m=h.y;h.body={temp:!0,position:{x:p,y:m}};var v=[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity];if(v.forEach(function(T){for(var w in T)r(T[w])?Object.defineProperty(h,w,{get:T[w].get,set:T[w].set}):Object.defineProperty(h,w,{value:T[w]})}),h.world=n,h._tempVec2=new a(p,m),d.hasOwnProperty("type")&&d.type==="body")h.setExistingBody(d,u);else{var g=l(d,"shape",null);g||(g="rectangle"),d.addToWorld=u,h.setBody(g,d)}return h};o.exports=i},7030:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(74527),a=t(89980),r=t(72632),i=t(1539),n=t(58210),h=t(93736),d=new s({Extends:i,Mixins:[l.Bounce,l.Collision,l.Force,l.Friction,l.Gravity,l.Mass,l.Sensor,l.SetBody,l.Sleep,l.Static,l.Transform,l.Velocity,n],initialize:function(p,m,v,g,T,w){a.call(this,p.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(g,T),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new h(m,v);var b=r(w,"shape",null);b?this.setBody(b,w):this.setRectangle(this.width,this.height,w),this.setPosition(m,v),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=d},50583:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84093),l=t(50658),a=t(68516),r=t(84125),i=t(63568),n=t(84091),h=t(56694),d=t(63454),u=t(68758),p=t(11299),m=t(56643),v=t(52838),g=t(13657),T=t(53996),w=t(72653),b=t(72632),E=t(10850),A=t(1675),R=t(80391),I=t(16929),P=t(44097),N=t(30657),F=t(70584),O=t(91327),D=t(84474),L=t(91963),z=t(13390),X=t(44272),H=t(7599),J=t(92765),G=t(10438),k=t(39745),M=t(31468);u.setDecomp(t(81084));var B=new h({initialize:function(W){this.scene=W,this.systems=W.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=r,this.composite=p,this.collision=d,this.detector=g,this.pair=F,this.pairs=O,this.query=z,this.resolver=X,this.constraint=v,this.bodies=a,this.composites=m,this.axes=l,this.bounds=n,this.svg=J,this.vector=G,this.vertices=k,this.verts=k,this._tempVec2=G.create(),E(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),E(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),E(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),X._restingThresh=E(this.config,"restingThresh",4),X._restingThreshTangent=E(this.config,"restingThreshTangent",6),X._positionDampen=E(this.config,"positionDampen",.9),X._positionWarming=E(this.config,"positionWarming",.8),X._frictionNormalMultiplier=E(this.config,"frictionNormalMultiplier",5),W.sys.events.once(H.BOOT,this.boot,this),W.sys.events.on(H.START,this.start,this)},boot:function(){this.world=new M(this.scene,this.config),this.add=new w(this.world),this.bodyBounds=new i,this.systems.events.once(H.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new M(this.scene,this.config),this.add=new w(this.world));var U=this.systems.events;U.on(H.UPDATE,this.world.update,this.world),U.on(H.POST_UPDATE,this.world.postUpdate,this.world),U.once(H.SHUTDOWN,this.shutdown,this)},getConfig:function(){var U=this.systems.game.config.physics,W=this.systems.settings.physics,K=N(b(W,"matter",{}),b(U,"matter",{}));return K},enableAttractorPlugin:function(){return D.register(A),D.use(I,A),this},enableWrapPlugin:function(){return D.register(P),D.use(I,P),this},enableCollisionEventsPlugin:function(){return D.register(R),D.use(I,R),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(U,W){this.world.step(U,W)},containsPoint:function(U,W,K){U=this.getMatterBodies(U);var q=G.create(W,K),_=z.point(U,q);return _.length>0},intersectPoint:function(U,W,K){K=this.getMatterBodies(K);var q=G.create(U,W),_=[],rt=z.point(K,q);return rt.forEach(function(ft){_.indexOf(ft)===-1&&_.push(ft)}),_},intersectRect:function(U,W,K,q,_,rt){_===void 0&&(_=!1),rt=this.getMatterBodies(rt);var ft={min:{x:U,y:W},max:{x:U+K,y:W+q}},mt=[],vt=z.region(rt,ft,_);return vt.forEach(function(yt){mt.indexOf(yt)===-1&&mt.push(yt)}),mt},intersectRay:function(U,W,K,q,_,rt){_===void 0&&(_=1),rt=this.getMatterBodies(rt);for(var ft=[],mt=z.ray(rt,G.create(U,W),G.create(K,q),_),vt=0;vt<mt.length;vt++)ft.push(mt[vt].body);return ft},intersectBody:function(U,W){W=this.getMatterBodies(W);for(var K=[],q=z.collides(U,W),_=0;_<q.length;_++){var rt=q[_];rt.bodyA===U?K.push(rt.bodyB):K.push(rt.bodyA)}return K},overlap:function(U,W,K,q,_){K===void 0&&(K=null),q===void 0&&(q=null),_===void 0&&(_=K),Array.isArray(U)||(U=[U]),U=this.getMatterBodies(U),W=this.getMatterBodies(W);for(var rt=!1,ft=0;ft<U.length;ft++)for(var mt=U[ft],vt=z.collides(mt,W),yt=0;yt<vt.length;yt++){var xt=vt[yt],It=xt.bodyA.id===mt.id?xt.bodyB:xt.bodyA;if(!q||q.call(_,mt,It,xt)){if(rt=!0,K)K.call(_,mt,It,xt);else if(!q)return!0}}return rt},setCollisionCategory:function(U,W){return U=this.getMatterBodies(U),U.forEach(function(K){K.collisionFilter.category=W}),this},setCollisionGroup:function(U,W){return U=this.getMatterBodies(U),U.forEach(function(K){K.collisionFilter.group=W}),this},setCollidesWith:function(U,W){U=this.getMatterBodies(U);var K=0;if(!Array.isArray(W))K=W;else for(var q=0;q<W.length;q++)K|=W[q];return U.forEach(function(_){_.collisionFilter.mask=K}),this},getMatterBodies:function(U){if(!U)return this.world.getAllBodies();Array.isArray(U)||(U=[U]);for(var W=[],K=0;K<U.length;K++){var q=U[K].hasOwnProperty("body")?U[K].body:U[K];W.push(q)}return W},setVelocity:function(U,W,K){U=this.getMatterBodies(U);var q=this._tempVec2;return q.x=W,q.y=K,U.forEach(function(_){r.setVelocity(_,q)}),this},setVelocityX:function(U,W){U=this.getMatterBodies(U);var K=this._tempVec2;return K.x=W,U.forEach(function(q){K.y=q.velocity.y,r.setVelocity(q,K)}),this},setVelocityY:function(U,W){U=this.getMatterBodies(U);var K=this._tempVec2;return K.y=W,U.forEach(function(q){K.x=q.velocity.x,r.setVelocity(q,K)}),this},setAngularVelocity:function(U,W){return U=this.getMatterBodies(U),U.forEach(function(K){r.setAngularVelocity(K,W)}),this},applyForce:function(U,W){U=this.getMatterBodies(U);var K=this._tempVec2;return U.forEach(function(q){K.x=q.position.x,K.y=q.position.y,r.applyForce(q,K,W)}),this},applyForceFromPosition:function(U,W,K,q){U=this.getMatterBodies(U);var _=this._tempVec2;return U.forEach(function(rt){q===void 0&&(q=rt.angle),_.x=K*Math.cos(q),_.y=K*Math.sin(q),r.applyForce(rt,W,_)}),this},applyForceFromAngle:function(U,W,K){U=this.getMatterBodies(U);var q=this._tempVec2;return U.forEach(function(_){K===void 0&&(K=_.angle),q.x=W*Math.cos(K),q.y=W*Math.sin(K),r.applyForce(_,{x:_.position.x,y:_.position.y},q)}),this},getConstraintLength:function(U){var W=U.pointA.x,K=U.pointA.y,q=U.pointB.x,_=U.pointB.y;return U.bodyA&&(W+=U.bodyA.position.x,K+=U.bodyA.position.y),U.bodyB&&(q+=U.bodyB.position.x,_+=U.bodyB.position.y),T(W,K,q,_)},alignBody:function(U,W,K,q){U=U.hasOwnProperty("body")?U.body:U;var _;switch(q){case s.TOP_LEFT:case s.LEFT_TOP:_=this.bodyBounds.getTopLeft(U,W,K);break;case s.TOP_CENTER:_=this.bodyBounds.getTopCenter(U,W,K);break;case s.TOP_RIGHT:case s.RIGHT_TOP:_=this.bodyBounds.getTopRight(U,W,K);break;case s.LEFT_CENTER:_=this.bodyBounds.getLeftCenter(U,W,K);break;case s.CENTER:_=this.bodyBounds.getCenter(U,W,K);break;case s.RIGHT_CENTER:_=this.bodyBounds.getRightCenter(U,W,K);break;case s.LEFT_BOTTOM:case s.BOTTOM_LEFT:_=this.bodyBounds.getBottomLeft(U,W,K);break;case s.BOTTOM_CENTER:_=this.bodyBounds.getBottomCenter(U,W,K);break;case s.BOTTOM_RIGHT:case s.RIGHT_BOTTOM:_=this.bodyBounds.getBottomRight(U,W,K);break}return _&&r.setPosition(U,_),this},shutdown:function(){var U=this.systems.events;this.world&&(U.off(H.UPDATE,this.world.update,this.world),U.off(H.POST_UPDATE,this.world.postUpdate,this.world)),U.off(H.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(H.START,this.start,this),this.scene=null,this.systems=null}});L.register("MatterPhysics",B,"matterPhysics"),o.exports=B},73658:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16569),l=t(56694),a=t(74527),r=t(89980),i=t(72632),n=t(58210),h=t(13747),d=t(93736),u=new l({Extends:h,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,n],initialize:function(m,v,g,T,w,b){r.call(this,m.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(T,w),this.setSizeToFrame(),this.setOrigin(),this.world=m,this._tempVec2=new d(v,g);var E=i(b,"shape",null);E?this.setBody(E,b):this.setRectangle(this.width,this.height,b),this.setPosition(v,g),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=u},84720:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a=t(56694),r=t(74527),i=t(28699),n=t(6659),h=t(72632),d=t(19256),u=t(39745),p=new a({Extends:n,Mixins:[r.Bounce,r.Collision,r.Friction,r.Gravity,r.Mass,r.Sensor,r.Sleep,r.Static],initialize:function(v,g,T){n.call(this),this.tile=g,this.world=v,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var w=h(T,"body",null),b=h(T,"addToWorld",!0);if(w)this.setBody(w,b);else{var E=g.getCollisionGroup(),A=h(E,"objects",[]);A.length>0?this.setFromTileCollision(T):this.setFromTileRectangle(T)}if(g.flipX||g.flipY){var R={x:g.getCenterX(),y:g.getCenterY()},I=g.flipX?-1:1,P=g.flipY?-1:1;l.scale(w,I,P,R)}},setFromTileRectangle:function(m){m===void 0&&(m={}),d(m,"isStatic")||(m.isStatic=!0),d(m,"addToWorld")||(m.addToWorld=!0);var v=this.tile.getBounds(),g=v.x+v.width/2,T=v.y+v.height/2,w=s.rectangle(g,T,v.width,v.height,m);return this.setBody(w,m.addToWorld),this},setFromTileCollision:function(m){m===void 0&&(m={}),d(m,"isStatic")||(m.isStatic=!0),d(m,"addToWorld")||(m.addToWorld=!0);for(var v=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,T=this.tile.getLeft(),w=this.tile.getTop(),b=this.tile.getCollisionGroup(),E=h(b,"objects",[]),A=[],R=0;R<E.length;R++){var I=E[R],P=T+I.x*v,N=w+I.y*g,F=I.width*v,O=I.height*g,D=null;if(I.rectangle)D=s.rectangle(P+F/2,N+O/2,F,O,m);else if(I.ellipse)D=s.circle(P+F/2,N+O/2,F/2,m);else if(I.polygon||I.polyline){var L=I.polygon?I.polygon:I.polyline,z=L.map(function(G){return{x:G.x*v,y:G.y*g}}),X=u.create(z),H=u.centre(X);P+=H.x,N+=H.y,D=s.fromVertices(P,N,X,m)}D&&A.push(D)}if(A.length===1)this.setBody(A[0],m.addToWorld);else if(A.length>1){var J=i(m);J.parts=A,this.setBody(l.create(J),J.addToWorld)}return this},setBody:function(m,v){return v===void 0&&(v=!0),this.body&&this.removeBody(),this.body=m,this.body.gameObject=this,v&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});o.exports=p},10998:(o,y,t)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a=t(68758),r=t(72632),i=t(39745),n={parseBody:function(h,d,u,p){p===void 0&&(p={});for(var m=r(u,"fixtures",[]),v=[],g=0;g<m.length;g++)for(var T=this.parseFixture(m[g]),w=0;w<T.length;w++)v.push(T[w]);var b=a.clone(u,!0);a.extend(b,p,!0),delete b.fixtures,delete b.type;var E=l.create(b);return l.setParts(E,v),l.setPosition(E,{x:h,y:d}),E},parseFixture:function(h){var d=a.extend({},!1,h);delete d.circle,delete d.vertices;var u;if(h.circle){var p=r(h.circle,"x"),m=r(h.circle,"y"),v=r(h.circle,"radius");u=[s.circle(p,m,v,d)]}else h.vertices&&(u=this.parseVertices(h.vertices,d));return u},parseVertices:function(h,d){d===void 0&&(d={});for(var u=[],p=0;p<h.length;p++)i.clockwiseSort(h[p]),u.push(l.create(a.extend({position:i.centre(h[p]),vertices:h[p]},d)));return s.flagCoincidentParts(u)}};o.exports=n},72829:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a={parseBody:function(r,i,n,h){h===void 0&&(h={});var d,u=n.vertices;if(u.length===1)h.vertices=u[0],d=l.create(h),s.flagCoincidentParts(d.parts);else{for(var p=[],m=0;m<u.length;m++){var v=l.create({vertices:u[m]});p.push(v)}s.flagCoincidentParts(p),h.parts=p,d=l.create(h)}return d.label=n.label,l.setPosition(d,{x:r,y:i}),d}};o.exports=a},88596:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84091),l=t(56694),a=t(11299),r=t(52838),i=t(13657),n=t(35416),h=t(33963),d=t(30657),u=t(22806),p=t(93736),m=t(39745),v=new l({initialize:function(T,w,b){b===void 0&&(b={});var E={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=T,this.world=w,this.camera=null,this.pointer=null,this.active=!0,this.position=new p,this.body=null,this.part=null,this.constraint=r.create(d(b,E)),this.world.on(n.BEFORE_UPDATE,this.update,this),T.sys.input.on(h.POINTER_DOWN,this.onDown,this),T.sys.input.on(h.POINTER_UP,this.onUp,this)},onDown:function(g){this.pointer||(this.pointer=g,this.camera=g.camera)},onUp:function(g){g===this.pointer&&(this.pointer=null)},getBody:function(g){var T=this.position,w=this.constraint;this.camera.getWorldPoint(g.x,g.y,T);for(var b=a.allBodies(this.world.localWorld),E=0;E<b.length;E++){var A=b[E];if(!A.ignorePointer&&s.contains(A.bounds,T)&&i.canCollide(A.collisionFilter,w.collisionFilter)&&this.hitTestBody(A,T))return this.world.emit(n.DRAG_START,A,this.part,this),!0}return!1},hitTestBody:function(g,T){for(var w=this.constraint,b=g.parts.length,E=b>1?1:0,A=E;A<b;A++){var R=g.parts[A];if(m.contains(R.vertices,T))return w.pointA=T,w.pointB={x:T.x-g.position.x,y:T.y-g.position.y},w.bodyB=g,w.angleB=g.angle,u.set(g,!1),this.part=R,this.body=g,!0}return!1},update:function(){var g=this.pointer,T=this.body;if(!this.active||!g){T&&this.stopDrag();return}if(!g.isDown&&T){this.stopDrag();return}else if(g.isDown){if(!T&&!this.getBody(g))return;T=this.body;var w=this.position,b=this.constraint;this.camera.getWorldPoint(g.x,g.y,w),b.pointA.x=w.x,b.pointA.y=w.y,u.set(T,!1),this.world.emit(n.DRAG,T,this)}},stopDrag:function(){var g=this.body,T=this.constraint;T.bodyB=null,T.pointB=null,this.pointer=null,this.body=null,this.part=null,g&&this.world.emit(n.DRAG_END,g,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(n.BEFORE_UPDATE,this.update),this.scene.sys.input.off(h.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(h.POINTER_UP,this.onUp,this)}});o.exports=v},31468:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a=t(56694),r=t(68758),i=t(11299),n=t(45775),h=t(6659),d=t(35416),u=t(72632),p=t(10850),m=t(84125),v=t(39073),g=t(84720),T=t(72005),w=t(10438),b=new a({Extends:h,initialize:function(A,R){h.call(this),this.scene=A,this.engine=n.create(R),this.localWorld=this.engine.world;var I=p(R,"gravity",null);I?this.setGravity(I.x,I.y,I.scale):I===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=p(R,"enabled",!0),this.getDelta=p(R,"getDelta",this.update60Hz);var P=u(R,"runner",{}),N=u(P,"fps",!1),F=u(P,"fps",60),O=u(P,"delta",1e3/F),D=u(P,"deltaMin",1e3/F),L=u(P,"deltaMax",1e3/(F*.5));N||(F=1e3/O),this.runner={fps:F,deltaSampleSize:u(P,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:u(P,"isFixed",!1),delta:O,deltaMin:D,deltaMax:L},this.autoUpdate=p(R,"autoUpdate",!0);var z=p(R,"debug",!1);if(this.drawDebug=typeof z=="object"?!0:z,this.debugGraphic,this.debugConfig={showAxes:u(z,"showAxes",!1),showAngleIndicator:u(z,"showAngleIndicator",!1),angleColor:u(z,"angleColor",15208787),showBroadphase:u(z,"showBroadphase",!1),broadphaseColor:u(z,"broadphaseColor",16757760),showBounds:u(z,"showBounds",!1),boundsColor:u(z,"boundsColor",16777215),showVelocity:u(z,"showVelocity",!1),velocityColor:u(z,"velocityColor",44783),showCollisions:u(z,"showCollisions",!1),collisionColor:u(z,"collisionColor",16094476),showSeparations:u(z,"showSeparations",!1),separationColor:u(z,"separationColor",16753920),showBody:u(z,"showBody",!0),showStaticBody:u(z,"showStaticBody",!0),showInternalEdges:u(z,"showInternalEdges",!1),renderFill:u(z,"renderFill",!1),renderLine:u(z,"renderLine",!0),fillColor:u(z,"fillColor",1075465),fillOpacity:u(z,"fillOpacity",1),lineColor:u(z,"lineColor",2678297),lineOpacity:u(z,"lineOpacity",1),lineThickness:u(z,"lineThickness",1),staticFillColor:u(z,"staticFillColor",857979),staticLineColor:u(z,"staticLineColor",1255396),showSleeping:u(z,"showSleeping",!1),staticBodySleepOpacity:u(z,"staticBodySleepOpacity",.7),sleepFillColor:u(z,"sleepFillColor",4605510),sleepLineColor:u(z,"sleepLineColor",10066585),showSensors:u(z,"showSensors",!0),sensorFillColor:u(z,"sensorFillColor",857979),sensorLineColor:u(z,"sensorLineColor",1255396),showPositions:u(z,"showPositions",!0),positionSize:u(z,"positionSize",4),positionColor:u(z,"positionColor",14697178),showJoint:u(z,"showJoint",!0),jointColor:u(z,"jointColor",14737474),jointLineOpacity:u(z,"jointLineOpacity",1),jointLineThickness:u(z,"jointLineThickness",2),pinSize:u(z,"pinSize",4),pinColor:u(z,"pinColor",4382944),springColor:u(z,"springColor",14697184),anchorColor:u(z,"anchorColor",15724527),anchorSize:u(z,"anchorSize",4),showConvexHulls:u(z,"showConvexHulls",!1),hullColor:u(z,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),u(R,"setBounds",!1)){var X=R.setBounds;if(typeof X=="boolean")this.setBounds();else{var H=u(X,"x",0),J=u(X,"y",0),G=u(X,"width",A.sys.scale.width),k=u(X,"height",A.sys.scale.height),M=u(X,"thickness",64),B=u(X,"left",!0),U=u(X,"right",!0),W=u(X,"top",!0),K=u(X,"bottom",!0);this.setBounds(H,J,G,k,M,B,U,W,K)}}},setCompositeRenderStyle:function(E){var A=E.bodies,R=E.constraints,I=E.composites,P,N,F;for(P=0;P<A.length;P++)N=A[P],F=N.render,this.setBodyRenderStyle(N,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity);for(P=0;P<R.length;P++)N=R[P],F=N.render,this.setConstraintRenderStyle(N,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize);for(P=0;P<I.length;P++)N=I[P],this.setCompositeRenderStyle(N);return this},setBodyRenderStyle:function(E,A,R,I,P,N){var F=E.render,O=this.debugConfig;return F?(A==null&&(A=E.isStatic?O.staticLineColor:O.lineColor),R==null&&(R=O.lineOpacity),I==null&&(I=O.lineThickness),P==null&&(P=E.isStatic?O.staticFillColor:O.fillColor),N==null&&(N=O.fillOpacity),A!==!1&&(F.lineColor=A),R!==!1&&(F.lineOpacity=R),I!==!1&&(F.lineThickness=I),P!==!1&&(F.fillColor=P),N!==!1&&(F.fillOpacity=N),this):this},setConstraintRenderStyle:function(E,A,R,I,P,N,F){var O=E.render,D=this.debugConfig;if(!O)return this;if(A==null){var L=O.type;L==="line"?A=D.jointColor:L==="pin"?A=D.pinColor:L==="spring"&&(A=D.springColor)}return R==null&&(R=D.jointLineOpacity),I==null&&(I=D.jointLineThickness),P==null&&(P=D.pinSize),N==null&&(N=D.anchorColor),F==null&&(F=D.anchorSize),A!==!1&&(O.lineColor=A),R!==!1&&(O.lineOpacity=R),I!==!1&&(O.lineThickness=I),P!==!1&&(O.pinSize=P),N!==!1&&(O.anchorColor=N),F!==!1&&(O.anchorSize=F),this},setEventsProxy:function(){var E=this,A=this.engine,R=this.localWorld;this.drawDebug&&(v.on(R,"compositeModified",function(I){E.setCompositeRenderStyle(I)}),v.on(R,"beforeAdd",function(I){for(var P=[].concat(I.object),N=0;N<P.length;N++){var F=P[N],O=F.render;F.type==="body"?E.setBodyRenderStyle(F,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):F.type==="composite"?E.setCompositeRenderStyle(F):F.type==="constraint"&&E.setConstraintRenderStyle(F,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),v.on(R,"beforeAdd",function(I){E.emit(d.BEFORE_ADD,I)}),v.on(R,"afterAdd",function(I){E.emit(d.AFTER_ADD,I)}),v.on(R,"beforeRemove",function(I){E.emit(d.BEFORE_REMOVE,I)}),v.on(R,"afterRemove",function(I){E.emit(d.AFTER_REMOVE,I)}),v.on(A,"beforeUpdate",function(I){E.emit(d.BEFORE_UPDATE,I)}),v.on(A,"afterUpdate",function(I){E.emit(d.AFTER_UPDATE,I)}),v.on(A,"collisionStart",function(I){var P=I.pairs,N,F;P.length>0&&(N=P[0].bodyA,F=P[0].bodyB),E.emit(d.COLLISION_START,I,N,F)}),v.on(A,"collisionActive",function(I){var P=I.pairs,N,F;P.length>0&&(N=P[0].bodyA,F=P[0].bodyB),E.emit(d.COLLISION_ACTIVE,I,N,F)}),v.on(A,"collisionEnd",function(I){var P=I.pairs,N,F;P.length>0&&(N=P[0].bodyA,F=P[0].bodyB),E.emit(d.COLLISION_END,I,N,F)})},setBounds:function(E,A,R,I,P,N,F,O,D){return E===void 0&&(E=0),A===void 0&&(A=0),R===void 0&&(R=this.scene.sys.scale.width),I===void 0&&(I=this.scene.sys.scale.height),P===void 0&&(P=64),N===void 0&&(N=!0),F===void 0&&(F=!0),O===void 0&&(O=!0),D===void 0&&(D=!0),this.updateWall(N,"left",E-P,A-P,P,I+P*2),this.updateWall(F,"right",E+R,A-P,P,I+P*2),this.updateWall(O,"top",E,A-P,R,P),this.updateWall(D,"bottom",E,A+I,R,P),this},updateWall:function(E,A,R,I,P,N){var F=this.walls[A];E?(F&&T.remove(this.localWorld,F),R+=P/2,I+=N/2,this.walls[A]=this.create(R,I,P,N,{isStatic:!0,friction:0,frictionStatic:0})):(F&&T.remove(this.localWorld,F),this.walls[A]=null)},createDebugGraphic:function(){var E=this.scene.sys.add.graphics({x:0,y:0});return E.setDepth(Number.MAX_VALUE),this.debugGraphic=E,this.drawDebug=!0,E},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(E,A,R){return E===void 0&&(E=0),A===void 0&&(A=1),R===void 0&&(R=.001),this.localWorld.gravity.x=E,this.localWorld.gravity.y=A,this.localWorld.gravity.scale=R,this},create:function(E,A,R,I,P){var N=s.rectangle(E,A,R,I,P);return T.add(this.localWorld,N),N},add:function(E){return T.add(this.localWorld,E),this},remove:function(E,A){Array.isArray(E)||(E=[E]);for(var R=0;R<E.length;R++){var I=E[R],P=I.body?I.body:I;i.remove(this.localWorld,P,A)}return this},removeConstraint:function(E,A){return i.remove(this.localWorld,E,A),this},convertTilemapLayer:function(E,A){var R=E.layer,I=E.getTilesWithin(0,0,R.width,R.height,{isColliding:!0});return this.convertTiles(I,A),this},convertTiles:function(E,A){if(E.length===0)return this;for(var R=0;R<E.length;R++)new g(this,E[R],A);return this},nextGroup:function(E){return m.nextGroup(E)},nextCategory:function(){return m.nextCategory()},pause:function(){return this.enabled=!1,this.emit(d.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(d.RESUME),this},update:function(E,A){if(!(!this.enabled||!this.autoUpdate)){var R=this.engine,I=this.runner,P=R.timing;I.isFixed?A=this.getDelta(E,A):(A=E-I.timePrev||I.delta,I.timePrev=E,I.deltaHistory.push(A),I.deltaHistory=I.deltaHistory.slice(-I.deltaSampleSize),A=Math.min.apply(null,I.deltaHistory),A=A<I.deltaMin?I.deltaMin:A,A=A>I.deltaMax?I.deltaMax:A,I.delta=A),I.timeScalePrev=P.timeScale,I.frameCounter+=1,E-I.counterTimestamp>=1e3&&(I.fps=I.frameCounter*((E-I.counterTimestamp)/1e3),I.counterTimestamp=E,I.frameCounter=0),n.update(R,A)}},step:function(E){n.update(this.engine,E)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(E){var A=E.hasOwnProperty("body")?E.body:E;return i.get(this.localWorld,A.id,A.type)!==null},getAllBodies:function(){return i.allBodies(this.localWorld)},getAllConstraints:function(){return i.allConstraints(this.localWorld)},getAllComposites:function(){return i.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var E=this.debugConfig,A=this.engine,R=this.debugGraphic,I=i.allBodies(this.localWorld);this.debugGraphic.clear(),E.showBroadphase&&A.broadphase.controller&&this.renderGrid(A.broadphase,R,E.broadphaseColor,.5),E.showBounds&&this.renderBodyBounds(I,R,E.boundsColor,.5),(E.showBody||E.showStaticBody)&&this.renderBodies(I),E.showJoint&&this.renderJoints(),(E.showAxes||E.showAngleIndicator)&&this.renderBodyAxes(I,R,E.showAxes,E.angleColor,.5),E.showVelocity&&this.renderBodyVelocity(I,R,E.velocityColor,1,2),E.showSeparations&&this.renderSeparations(A.pairs.list,R,E.separationColor),E.showCollisions&&this.renderCollisions(A.pairs.list,R,E.collisionColor)}},renderGrid:function(E,A,R,I){A.lineStyle(1,R,I);for(var P=r.keys(E.buckets),N=0;N<P.length;N++){var F=P[N];if(!(E.buckets[F].length<2)){var O=F.split(/C|R/);A.strokeRect(parseInt(O[1],10)*E.bucketWidth,parseInt(O[2],10)*E.bucketHeight,E.bucketWidth,E.bucketHeight)}}return this},renderSeparations:function(E,A,R){A.lineStyle(1,R,1);for(var I=0;I<E.length;I++){var P=E[I];if(P.isActive){var N=P.collision,F=N.bodyA,O=N.bodyB,D=F.position,L=O.position,z=N.penetration,X=!F.isStatic&&!O.isStatic?4:1;O.isStatic&&(X=0),A.lineBetween(L.x,L.y,L.x-z.x*X,L.y-z.y*X),X=!F.isStatic&&!O.isStatic?4:1,F.isStatic&&(X=0),A.lineBetween(D.x,D.y,D.x-z.x*X,D.y-z.y*X)}}return this},renderCollisions:function(E,A,R){A.lineStyle(1,R,.5),A.fillStyle(R,1);var I,P;for(I=0;I<E.length;I++)if(P=E[I],!!P.isActive)for(var N=0;N<P.activeContacts.length;N++){var F=P.activeContacts[N],O=F.vertex;A.fillRect(O.x-2,O.y-2,5,5)}for(I=0;I<E.length;I++)if(P=E[I],!!P.isActive){var D=P.collision,L=P.activeContacts;if(L.length>0){var z=L[0].vertex.x,X=L[0].vertex.y;L.length===2&&(z=(L[0].vertex.x+L[1].vertex.x)/2,X=(L[0].vertex.y+L[1].vertex.y)/2),D.bodyB===D.supports[0].body||D.bodyA.isStatic?A.lineBetween(z-D.normal.x*8,X-D.normal.y*8,z,X):A.lineBetween(z+D.normal.x*8,X+D.normal.y*8,z,X)}}return this},renderBodyBounds:function(E,A,R,I){A.lineStyle(1,R,I);for(var P=0;P<E.length;P++){var N=E[P];if(N.render.visible){var F=N.bounds;if(F)A.strokeRect(F.min.x,F.min.y,F.max.x-F.min.x,F.max.y-F.min.y);else for(var O=N.parts,D=O.length>1?1:0;D<O.length;D++){var L=O[D];A.strokeRect(L.bounds.min.x,L.bounds.min.y,L.bounds.max.x-L.bounds.min.x,L.bounds.max.y-L.bounds.min.y)}}}return this},renderBodyAxes:function(E,A,R,I,P){A.lineStyle(1,I,P);for(var N=0;N<E.length;N++){var F=E[N],O=F.parts;if(F.render.visible){var D,L,z;if(R)for(L=O.length>1?1:0;L<O.length;L++)for(D=O[L],z=0;z<D.axes.length;z++){var X=D.axes[z];A.lineBetween(D.position.x,D.position.y,D.position.x+X.x*20,D.position.y+X.y*20)}else for(L=O.length>1?1:0;L<O.length;L++)for(D=O[L],z=0;z<D.axes.length;z++)A.lineBetween(D.position.x,D.position.y,(D.vertices[0].x+D.vertices[D.vertices.length-1].x)/2,(D.vertices[0].y+D.vertices[D.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(E,A,R,I,P){A.lineStyle(P,R,I);for(var N=0;N<E.length;N++){var F=E[N];F.render.visible&&A.lineBetween(F.position.x,F.position.y,F.position.x+(F.position.x-F.positionPrev.x)*2,F.position.y+(F.position.y-F.positionPrev.y)*2)}return this},renderBodies:function(E){for(var A=this.debugGraphic,R=this.debugConfig,I=R.showBody,P=R.showStaticBody,N=R.showSleeping,F=R.showInternalEdges,O=R.showConvexHulls,D=R.renderFill,L=R.renderLine,z=R.staticBodySleepOpacity,X=R.sleepFillColor,H=R.sleepLineColor,J=R.hullColor,G=0;G<E.length;G++){var k=E[G];if(k.render.visible&&!(!P&&k.isStatic||!I&&!k.isStatic)){var M=k.render.lineColor,B=k.render.lineOpacity,U=k.render.lineThickness,W=k.render.fillColor,K=k.render.fillOpacity;N&&k.isSleeping&&(k.isStatic?(B*=z,K*=z):(M=H,W=X)),D||(W=null),L||(M=null),this.renderBody(k,A,F,M,B,U,W,K);var q=k.parts.length;O&&q>1&&this.renderConvexHull(k,A,J,U)}}},renderBody:function(E,A,R,I,P,N,F,O){I===void 0&&(I=null),P===void 0&&(P=null),N===void 0&&(N=1),F===void 0&&(F=null),O===void 0&&(O=null);for(var D=this.debugConfig,L=D.sensorFillColor,z=D.sensorLineColor,X=E.parts,H=X.length,J=H>1?1:0;J<H;J++){var G=X[J],k=G.render,M=k.opacity;if(!(!k.visible||M===0||G.isSensor&&!D.showSensors)){var B=G.circleRadius;if(A.beginPath(),G.isSensor?(F!==null&&A.fillStyle(L,O*M),I!==null&&A.lineStyle(N,z,P*M)):(F!==null&&A.fillStyle(F,O*M),I!==null&&A.lineStyle(N,I,P*M)),B)A.arc(G.position.x,G.position.y,B,0,2*Math.PI);else{var U=G.vertices,W=U.length;A.moveTo(U[0].x,U[0].y);for(var K=1;K<W;K++){var q=U[K];if(!U[K-1].isInternal||R?A.lineTo(q.x,q.y):A.moveTo(q.x,q.y),K<W&&q.isInternal&&!R){var _=(K+1)%W;A.moveTo(U[_].x,U[_].y)}}A.closePath()}F!==null&&A.fillPath(),I!==null&&A.strokePath()}}if(D.showPositions&&!E.isStatic){var rt=E.position.x,ft=E.position.y,mt=Math.ceil(D.positionSize/2);A.fillStyle(D.positionColor,1),A.fillRect(rt-mt,ft-mt,D.positionSize,D.positionSize)}return this},renderConvexHull:function(E,A,R,I){I===void 0&&(I=1);var P=E.parts,N=P.length;if(N>1){var F=E.vertices;A.lineStyle(I,R),A.beginPath(),A.moveTo(F[0].x,F[0].y);for(var O=1;O<F.length;O++)A.lineTo(F[O].x,F[O].y);A.lineTo(F[0].x,F[0].y),A.strokePath()}return this},renderJoints:function(){for(var E=this.debugGraphic,A=i.allConstraints(this.localWorld),R=0;R<A.length;R++){var I=A[R].render,P=I.lineColor,N=I.lineOpacity,F=I.lineThickness,O=I.pinSize,D=I.anchorColor,L=I.anchorSize;this.renderConstraint(A[R],E,P,N,F,O,D,L)}},renderConstraint:function(E,A,R,I,P,N,F,O){var D=E.render;if(!D.visible||!E.pointA||!E.pointB)return this;A.lineStyle(P,R,I);var L=E.bodyA,z=E.bodyB,X,H;if(L?X=w.add(L.position,E.pointA):X=E.pointA,D.type==="pin")A.strokeCircle(X.x,X.y,N);else{if(z?H=w.add(z.position,E.pointB):H=E.pointB,A.beginPath(),A.moveTo(X.x,X.y),D.type==="spring")for(var J=w.sub(H,X),G=w.perp(w.normalise(J)),k=Math.ceil(r.clamp(E.length/5,12,20)),M,B=1;B<k;B+=1)M=B%2===0?1:-1,A.lineTo(X.x+J.x*(B/k)+G.x*M*4,X.y+J.y*(B/k)+G.y*M*4);A.lineTo(H.x,H.y)}return A.strokePath(),D.anchors&&O>0&&(A.fillStyle(F),A.fillCircle(X.x,X.y,O),A.fillCircle(H.x,H.y,O)),this},resetCollisionIDs:function(){return l._nextCollidingGroupId=1,l._nextNonCollidingGroupId=-1,l._nextCategory=1,this},shutdown:function(){v.off(this.engine),this.removeAllListeners(),T.clear(this.localWorld,!1),n.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});o.exports=b},95349:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setBounce:function(t){return this.body.restitution=t,this}};o.exports=y},70679:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var s=0;if(!Array.isArray(t))s=t;else for(var l=0;l<t.length;l++)s|=t[l];return this.body.collisionFilter.mask=s,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,s){Array.isArray(t)||(t=[t]);for(var l=0;l<t.length;l++){var a=t[l].hasOwnProperty("body")?t[l].body:t[l];this.body.setOnCollideWith(a,s)}return this}};o.exports=y},77178:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l={applyForce:function(a){return this._tempVec2.set(this.body.position.x,this.body.position.y),s.applyForce(this.body,this._tempVec2,a),this},applyForceFrom:function(a,r){return s.applyForce(this.body,a,r),this},thrust:function(a){var r=this.body.angle;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(a){var r=this.body.angle-Math.PI/2;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(a){var r=this.body.angle+Math.PI/2;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(a){var r=this.body.angle-Math.PI;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};o.exports=l},74015:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setFriction:function(t,s,l){return this.body.friction=t,s!==void 0&&(this.body.frictionAir=s),l!==void 0&&(this.body.frictionStatic=l),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};o.exports=y},11535:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}};o.exports=y},74497:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l=t(93736),a={setMass:function(r){return s.setMass(this.body,r),this},setDensity:function(r){return s.setDensity(this.body,r),this},centerOfMass:{get:function(){return new l(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};o.exports=a},75529:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}};o.exports=y},64024:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68516),l=t(84125),a=t(88456),r=t(72632),i=t(10998),n=t(72829),h=t(39745),d={setRectangle:function(u,p,m){return this.setBody({type:"rectangle",width:u,height:p},m)},setCircle:function(u,p){return this.setBody({type:"circle",radius:u},p)},setPolygon:function(u,p,m){return this.setBody({type:"polygon",sides:p,radius:u},m)},setTrapezoid:function(u,p,m,v){return this.setBody({type:"trapezoid",width:u,height:p,slope:m},v)},setExistingBody:function(u,p){p===void 0&&(p=!0),this.body&&this.world.remove(this.body,!0),this.body=u;for(var m=0;m<u.parts.length;m++)u.parts[m].gameObject=this;var v=this;if(u.destroy=function(){v.world.remove(v.body,!0),v.body.gameObject=null},p&&(this.world.has(u)&&this.world.remove(u,!0),this.world.add(u)),this._originComponent){var g=u.render.sprite.xOffset,T=u.render.sprite.yOffset,w=u.centerOfMass.x,b=u.centerOfMass.y;if(a(w,.5)&&a(b,.5))this.setOrigin(g+.5,T+.5);else{var E=u.centerOffset.x,A=u.centerOffset.y;this.setOrigin(g+E/this.displayWidth,T+A/this.displayHeight)}}return this},setBody:function(u,p){if(!u)return this;var m;typeof u=="string"&&(u={type:u});var v=r(u,"type","rectangle"),g=r(u,"x",this._tempVec2.x),T=r(u,"y",this._tempVec2.y),w=r(u,"width",this.width),b=r(u,"height",this.height);switch(v){case"rectangle":m=s.rectangle(g,T,w,b,p);break;case"circle":var E=r(u,"radius",Math.max(w,b)/2),A=r(u,"maxSides",25);m=s.circle(g,T,E,p,A);break;case"trapezoid":var R=r(u,"slope",.5);m=s.trapezoid(g,T,w,b,R,p);break;case"polygon":var I=r(u,"sides",5),P=r(u,"radius",Math.max(w,b)/2);m=s.polygon(g,T,I,P,p);break;case"fromVertices":case"fromVerts":var N=r(u,"verts",null);if(N)if(typeof N=="string"&&(N=h.fromPath(N)),this.body&&!this.body.hasOwnProperty("temp"))l.setVertices(this.body,N),m=this.body;else{var F=r(u,"flagInternal",!1),O=r(u,"removeCollinear",.01),D=r(u,"minimumArea",10);m=s.fromVertices(g,T,N,p,F,O,D)}break;case"fromPhysicsEditor":m=i.parseBody(g,T,u,p);break;case"fromPhysicsTracer":m=n.parseBody(g,T,u,p);break}return m&&this.setExistingBody(m,u.addToWorld),this}};o.exports=d},25106:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35416),l=t(22806),a=t(39073),r={setToSleep:function(){return l.set(this.body,!0),this},setAwake:function(){return l.set(this.body,!1),this},setSleepThreshold:function(i){return i===void 0&&(i=60),this.body.sleepThreshold=i,this},setSleepEvents:function(i,n){return this.setSleepStartEvent(i),this.setSleepEndEvent(n),this},setSleepStartEvent:function(i){if(i){var n=this.world;a.on(this.body,"sleepStart",function(h){n.emit(s.SLEEP_START,h,this)})}else a.off(this.body,"sleepStart");return this},setSleepEndEvent:function(i){if(i){var n=this.world;a.on(this.body,"sleepEnd",function(h){n.emit(s.SLEEP_END,h,this)})}else a.off(this.body,"sleepEnd");return this}};o.exports=r},82884:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l={setStatic:function(a){return s.setStatic(this.body,a),this},isStatic:function(){return this.body.isStatic}};o.exports=l},4753:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l=t(83392),a=t(35786),r=t(62138),i=4,n={x:{get:function(){return this.body.position.x},set:function(h){this._tempVec2.set(h,this.y),s.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(h){this._tempVec2.set(this.x,h),s.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(h){var d=1/this._scaleX,u=1/this._scaleY;this._scaleX=h,this._scaleX===0?this.renderFlags&=~i:this.renderFlags|=i,s.scale(this.body,d,u),s.scale(this.body,h,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(h){var d=1/this._scaleX,u=1/this._scaleY;this._scaleY=h,this._scaleY===0?this.renderFlags&=~i:this.renderFlags|=i,s.scale(this.body,d,u),s.scale(this.body,this._scaleX,h)}},angle:{get:function(){return r(this.body.angle*l.RAD_TO_DEG)},set:function(h){this.rotation=r(h)*l.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(h){this._rotation=a(h),s.setAngle(this.body,this._rotation)}},setPosition:function(h,d){return h===void 0&&(h=0),d===void 0&&(d=h),this._tempVec2.set(h,d),s.setPosition(this.body,this._tempVec2),this},setRotation:function(h){return h===void 0&&(h=0),this._rotation=a(h),s.setAngle(this.body,h),this},setFixedRotation:function(){return s.setInertia(this.body,1/0),this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,s.setAngle(this.body,this.rotation),this},setScale:function(h,d,u){h===void 0&&(h=1),d===void 0&&(d=h);var p=1/this._scaleX,m=1/this._scaleY;return this._scaleX=h,this._scaleY=d,s.scale(this.body,p,m,u),s.scale(this.body,h,d,u),this}};o.exports=n},37268:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84125),l={setVelocityX:function(a){return this._tempVec2.set(a,this.body.velocity.y),s.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(a){return this._tempVec2.set(this.body.velocity.x,a),s.setVelocity(this.body,this._tempVec2),this},setVelocity:function(a,r){return this._tempVec2.set(a,r),s.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return s.getVelocity(this.body)},setAngularVelocity:function(a){return s.setAngularVelocity(this.body,a),this},getAngularVelocity:function(){return s.getAngularVelocity(this.body)},setAngularSpeed:function(a){return s.setAngularSpeed(this.body,a),this},getAngularSpeed:function(){return s.getAngularSpeed(this.body)}};o.exports=l},74527:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bounce:t(95349),Collision:t(70679),Force:t(77178),Friction:t(74015),Gravity:t(11535),Mass:t(74497),Sensor:t(75529),SetBody:t(64024),Sleep:t(25106),Static:t(82884),Transform:t(4753),Velocity:t(37268)}},63201:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afteradd"},30474:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterremove"},44822:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterupdate"},88820:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeadd"},94849:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeremove"},6391:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeupdate"},96738:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionactive"},7916:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionend"},59529:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionstart"},10219:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},183:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},39143:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},16483:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},35806:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},22106:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepend"},5803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepstart"},35416:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_ADD:t(63201),AFTER_REMOVE:t(30474),AFTER_UPDATE:t(44822),BEFORE_ADD:t(88820),BEFORE_REMOVE:t(94849),BEFORE_UPDATE:t(6391),COLLISION_ACTIVE:t(96738),COLLISION_END:t(7916),COLLISION_START:t(59529),DRAG_END:t(10219),DRAG:t(183),DRAG_START:t(39143),PAUSE:t(16483),RESUME:t(35806),SLEEP_END:t(22106),SLEEP_START:t(5803)}},45949:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BodyBounds:t(63568),Components:t(74527),Events:t(35416),Factory:t(72653),MatterGameObject:t(3860),Image:t(7030),Matter:t(18171),MatterPhysics:t(50583),PolyDecomp:t(81084),Sprite:t(73658),TileBody:t(84720),PhysicsEditorParser:t(10998),PhysicsJSONParser:t(72829),PointerConstraint:t(88596),World:t(31468)}},84125:(o,y,t)=>{var s={};o.exports=s;var l=t(39745),a=t(10438),r=t(22806),i=t(68758),n=t(84091),h=t(50658);(function(){s._timeCorrection=!0,s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s._baseDelta=16.666666666666668,s.create=function(u){var p={id:i.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!u.hasOwnProperty("position")&&u.hasOwnProperty("vertices")?u.position=l.centre(u.vertices):u.hasOwnProperty("vertices")||(p.vertices=l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var m=i.extend(p,u);return d(m,u),m.setOnCollideWith=function(v,g){return g?this.onCollideWith[v.id]=g:delete this.onCollideWith[v.id],this},m},s.nextGroup=function(u){return u?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var d=function(u,p){if(p=p||{},s.set(u,{bounds:u.bounds||n.create(u.vertices),positionPrev:u.positionPrev||a.clone(u.position),anglePrev:u.anglePrev||u.angle,vertices:u.vertices,parts:u.parts||[u],isStatic:u.isStatic,isSleeping:u.isSleeping,parent:u.parent||u}),l.rotate(u.vertices,u.angle,u.position),h.rotate(u.axes,u.angle),n.update(u.bounds,u.vertices,u.velocity),s.set(u,{axes:p.axes||u.axes,area:p.area||u.area,mass:p.mass||u.mass,inertia:p.inertia||u.inertia}),u.parts.length===1){var m=u.bounds,v=u.centerOfMass,g=u.centerOffset,T=m.max.x-m.min.x,w=m.max.y-m.min.y;v.x=-(m.min.x-u.position.x)/T,v.y=-(m.min.y-u.position.y)/w,g.x=T*v.x,g.y=w*v.y}};s.set=function(u,p,m){var v;typeof p=="string"&&(v=p,p={},p[v]=m);for(v in p)if(Object.prototype.hasOwnProperty.call(p,v))switch(m=p[v],v){case"isStatic":s.setStatic(u,m);break;case"isSleeping":r.set(u,m);break;case"mass":s.setMass(u,m);break;case"density":s.setDensity(u,m);break;case"inertia":s.setInertia(u,m);break;case"vertices":s.setVertices(u,m);break;case"position":s.setPosition(u,m);break;case"angle":s.setAngle(u,m);break;case"velocity":s.setVelocity(u,m);break;case"angularVelocity":s.setAngularVelocity(u,m);break;case"speed":s.setSpeed(u,m);break;case"angularSpeed":s.setAngularSpeed(u,m);break;case"parts":s.setParts(u,m);break;case"centre":s.setCentre(u,m);break;default:u[v]=m}},s.setStatic=function(u,p){for(var m=0;m<u.parts.length;m++){var v=u.parts[m];p?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=p}},s.setMass=function(u,p){var m=u.inertia/(u.mass/6);u.inertia=m*(p/6),u.inverseInertia=1/u.inertia,u.mass=p,u.inverseMass=1/u.mass,u.density=u.mass/u.area},s.setDensity=function(u,p){s.setMass(u,p*u.area),u.density=p},s.setInertia=function(u,p){u.inertia=p,u.inverseInertia=1/u.inertia},s.setVertices=function(u,p){p[0].body===u?u.vertices=p:u.vertices=l.create(p,u),u.axes=h.fromVertices(u.vertices),u.area=l.area(u.vertices),s.setMass(u,u.density*u.area);var m=l.centre(u.vertices);l.translate(u.vertices,m,-1),s.setInertia(u,s._inertiaScale*l.inertia(u.vertices,u.mass)),l.translate(u.vertices,u.position),n.update(u.bounds,u.vertices,u.velocity)},s.setParts=function(u,p,m){var v;for(p=p.slice(0),u.parts.length=0,u.parts.push(u),u.parent=u,v=0;v<p.length;v++){var g=p[v];g!==u&&(g.parent=u,u.parts.push(g))}if(u.parts.length!==1){if(m=typeof m<"u"?m:!0,m){var T=[];for(v=0;v<p.length;v++)T=T.concat(p[v].vertices);l.clockwiseSort(T);var w=l.hull(T),b=l.centre(w);s.setVertices(u,w),l.translate(u.vertices,b)}var E=s._totalProperties(u),A=E.centre.x,R=E.centre.y,I=u.bounds,P=u.centerOfMass,N=u.centerOffset;n.update(I,u.vertices,u.velocity),P.x=-(I.min.x-A)/(I.max.x-I.min.x),P.y=-(I.min.y-R)/(I.max.y-I.min.y),N.x=A,N.y=R,u.area=E.area,u.parent=u,u.position.x=A,u.position.y=R,u.positionPrev.x=A,u.positionPrev.y=R,s.setMass(u,E.mass),s.setInertia(u,E.inertia),s.setPosition(u,E.centre)}},s.setCentre=function(u,p,m){m?(u.positionPrev.x+=p.x,u.positionPrev.y+=p.y,u.position.x+=p.x,u.position.y+=p.y):(u.positionPrev.x=p.x-(u.position.x-u.positionPrev.x),u.positionPrev.y=p.y-(u.position.y-u.positionPrev.y),u.position.x=p.x,u.position.y=p.y)},s.setPosition=function(u,p,m){var v=a.sub(p,u.position);m?(u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.velocity.x=v.x,u.velocity.y=v.y,u.speed=a.magnitude(v)):(u.positionPrev.x+=v.x,u.positionPrev.y+=v.y);for(var g=0;g<u.parts.length;g++){var T=u.parts[g];T.position.x+=v.x,T.position.y+=v.y,l.translate(T.vertices,v),n.update(T.bounds,T.vertices,u.velocity)}},s.setAngle=function(u,p,m){var v=p-u.angle;m?(u.anglePrev=u.angle,u.angularVelocity=v,u.angularSpeed=Math.abs(v)):u.anglePrev+=v;for(var g=0;g<u.parts.length;g++){var T=u.parts[g];T.angle+=v,l.rotate(T.vertices,v,u.position),h.rotate(T.axes,v),n.update(T.bounds,T.vertices,u.velocity),g>0&&a.rotateAbout(T.position,v,u.position,T.position)}},s.setVelocity=function(u,p){var m=u.deltaTime/s._baseDelta;u.positionPrev.x=u.position.x-p.x*m,u.positionPrev.y=u.position.y-p.y*m,u.velocity.x=(u.position.x-u.positionPrev.x)/m,u.velocity.y=(u.position.y-u.positionPrev.y)/m,u.speed=a.magnitude(u.velocity)},s.getVelocity=function(u){var p=s._baseDelta/u.deltaTime;return{x:(u.position.x-u.positionPrev.x)*p,y:(u.position.y-u.positionPrev.y)*p}},s.getSpeed=function(u){return a.magnitude(s.getVelocity(u))},s.setSpeed=function(u,p){s.setVelocity(u,a.mult(a.normalise(s.getVelocity(u)),p))},s.setAngularVelocity=function(u,p){var m=u.deltaTime/s._baseDelta;u.anglePrev=u.angle-p*m,u.angularVelocity=(u.angle-u.anglePrev)/m,u.angularSpeed=Math.abs(u.angularVelocity)},s.getAngularVelocity=function(u){return(u.angle-u.anglePrev)*s._baseDelta/u.deltaTime},s.getAngularSpeed=function(u){return Math.abs(s.getAngularVelocity(u))},s.setAngularSpeed=function(u,p){s.setAngularVelocity(u,i.sign(s.getAngularVelocity(u))*p)},s.translate=function(u,p,m){s.setPosition(u,a.add(u.position,p),m)},s.rotate=function(u,p,m,v){if(!m)s.setAngle(u,u.angle+p,v);else{var g=Math.cos(p),T=Math.sin(p),w=u.position.x-m.x,b=u.position.y-m.y;s.setPosition(u,{x:m.x+(w*g-b*T),y:m.y+(w*T+b*g)},v),s.setAngle(u,u.angle+p,v)}},s.scale=function(u,p,m,v){var g=0,T=0;v=v||u.position;for(var w=0;w<u.parts.length;w++){var b=u.parts[w];b.scale.x=p,b.scale.y=m,l.scale(b.vertices,p,m,v),b.axes=h.fromVertices(b.vertices),b.area=l.area(b.vertices),s.setMass(b,u.density*b.area),l.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),s.setInertia(b,s._inertiaScale*l.inertia(b.vertices,b.mass)),l.translate(b.vertices,{x:b.position.x,y:b.position.y}),w>0&&(g+=b.area,T+=b.inertia),b.position.x=v.x+(b.position.x-v.x)*p,b.position.y=v.y+(b.position.y-v.y)*m,n.update(b.bounds,b.vertices,u.velocity)}u.parts.length>1&&(u.area=g,u.isStatic||(s.setMass(u,u.density*g),s.setInertia(u,T))),u.circleRadius&&(p===m?u.circleRadius*=p:u.circleRadius=null)},s.update=function(u,p){p=(typeof p<"u"?p:16.666666666666668)*u.timeScale;var m=p*p,v=s._timeCorrection?p/(u.deltaTime||p):1,g=1-u.frictionAir*(p/i._baseDelta),T=(u.position.x-u.positionPrev.x)*v,w=(u.position.y-u.positionPrev.y)*v;u.velocity.x=T*g+u.force.x/u.mass*m,u.velocity.y=w*g+u.force.y/u.mass*m,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.position.x+=u.velocity.x,u.position.y+=u.velocity.y,u.deltaTime=p,u.angularVelocity=(u.angle-u.anglePrev)*g*v+u.torque/u.inertia*m,u.anglePrev=u.angle,u.angle+=u.angularVelocity,u.speed=a.magnitude(u.velocity),u.angularSpeed=Math.abs(u.angularVelocity);for(var b=0;b<u.parts.length;b++){var E=u.parts[b];l.translate(E.vertices,u.velocity),b>0&&(E.position.x+=u.velocity.x,E.position.y+=u.velocity.y),u.angularVelocity!==0&&(l.rotate(E.vertices,u.angularVelocity,u.position),h.rotate(E.axes,u.angularVelocity),b>0&&a.rotateAbout(E.position,u.angularVelocity,u.position,E.position)),n.update(E.bounds,E.vertices,u.velocity)}},s.updateVelocities=function(u){var p=s._baseDelta/u.deltaTime,m=u.velocity;m.x=(u.position.x-u.positionPrev.x)*p,m.y=(u.position.y-u.positionPrev.y)*p,u.speed=Math.sqrt(m.x*m.x+m.y*m.y),u.angularVelocity=(u.angle-u.anglePrev)*p,u.angularSpeed=Math.abs(u.angularVelocity)},s.applyForce=function(u,p,m){var v={x:p.x-u.position.x,y:p.y-u.position.y};u.force.x+=m.x,u.force.y+=m.y,u.torque+=v.x*m.y-v.y*m.x},s._totalProperties=function(u){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},m=u.parts.length===1?0:1;m<u.parts.length;m++){var v=u.parts[m],g=v.mass!==1/0?v.mass:1;p.mass+=g,p.area+=v.area,p.inertia+=v.inertia,p.centre=a.add(p.centre,a.mult(v.position,g))}return p.centre=a.div(p.centre,p.mass),p}})()},11299:(o,y,t)=>{var s={};o.exports=s;var l=t(39073),a=t(68758),r=t(84091),i=t(84125);(function(){s.create=function(n){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},s.setModified=function(n,h,d,u){if(l.trigger(n,"compositeModified",n),n.isModified=h,h&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),d&&n.parent&&s.setModified(n.parent,h,d,u),u)for(var p=0;p<n.composites.length;p++){var m=n.composites[p];s.setModified(m,h,d,u)}},s.add=function(n,h){var d=[].concat(h);l.trigger(n,"beforeAdd",{object:h});for(var u=0;u<d.length;u++){var p=d[u];switch(p.type){case"body":if(p.parent!==p){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(n,p);break;case"constraint":s.addConstraint(n,p);break;case"composite":s.addComposite(n,p);break;case"mouseConstraint":s.addConstraint(n,p.constraint);break}}return l.trigger(n,"afterAdd",{object:h}),n},s.remove=function(n,h,d){var u=[].concat(h);l.trigger(n,"beforeRemove",{object:h});for(var p=0;p<u.length;p++){var m=u[p];switch(m.type){case"body":s.removeBody(n,m,d);break;case"constraint":s.removeConstraint(n,m,d);break;case"composite":s.removeComposite(n,m,d);break;case"mouseConstraint":s.removeConstraint(n,m.constraint);break}}return l.trigger(n,"afterRemove",{object:h}),n},s.addComposite=function(n,h){return n.composites.push(h),h.parent=n,s.setModified(n,!0,!0,!1),n},s.removeComposite=function(n,h,d){var u=a.indexOf(n.composites,h);if(u!==-1&&s.removeCompositeAt(n,u),d)for(var p=0;p<n.composites.length;p++)s.removeComposite(n.composites[p],h,!0);return n},s.removeCompositeAt=function(n,h){return n.composites.splice(h,1),s.setModified(n,!0,!0,!1),n},s.addBody=function(n,h){return n.bodies.push(h),s.setModified(n,!0,!0,!1),n},s.removeBody=function(n,h,d){var u=a.indexOf(n.bodies,h);if(u!==-1&&s.removeBodyAt(n,u),d)for(var p=0;p<n.composites.length;p++)s.removeBody(n.composites[p],h,!0);return n},s.removeBodyAt=function(n,h){return n.bodies.splice(h,1),s.setModified(n,!0,!0,!1),n},s.addConstraint=function(n,h){return n.constraints.push(h),s.setModified(n,!0,!0,!1),n},s.removeConstraint=function(n,h,d){var u=a.indexOf(n.constraints,h);if(u!==-1&&s.removeConstraintAt(n,u),d)for(var p=0;p<n.composites.length;p++)s.removeConstraint(n.composites[p],h,!0);return n},s.removeConstraintAt=function(n,h){return n.constraints.splice(h,1),s.setModified(n,!0,!0,!1),n},s.clear=function(n,h,d){if(d)for(var u=0;u<n.composites.length;u++)s.clear(n.composites[u],h,!0);return h?n.bodies=n.bodies.filter(function(p){return p.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,s.setModified(n,!0,!0,!1),n},s.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var h=[].concat(n.bodies),d=0;d<n.composites.length;d++)h=h.concat(s.allBodies(n.composites[d]));return n.cache&&(n.cache.allBodies=h),h},s.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var h=[].concat(n.constraints),d=0;d<n.composites.length;d++)h=h.concat(s.allConstraints(n.composites[d]));return n.cache&&(n.cache.allConstraints=h),h},s.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var h=[].concat(n.composites),d=0;d<n.composites.length;d++)h=h.concat(s.allComposites(n.composites[d]));return n.cache&&(n.cache.allComposites=h),h},s.get=function(n,h,d){var u,p;switch(d){case"body":u=s.allBodies(n);break;case"constraint":u=s.allConstraints(n);break;case"composite":u=s.allComposites(n).concat(n);break}return u?(p=u.filter(function(m){return m.id.toString()===h.toString()}),p.length===0?null:p[0]):null},s.move=function(n,h,d){return s.remove(n,h),s.add(d,h),n},s.rebase=function(n){for(var h=s.allBodies(n).concat(s.allConstraints(n)).concat(s.allComposites(n)),d=0;d<h.length;d++)h[d].id=a.nextId();return n},s.translate=function(n,h,d){for(var u=d?s.allBodies(n):n.bodies,p=0;p<u.length;p++)i.translate(u[p],h);return n},s.rotate=function(n,h,d,u){for(var p=Math.cos(h),m=Math.sin(h),v=u?s.allBodies(n):n.bodies,g=0;g<v.length;g++){var T=v[g],w=T.position.x-d.x,b=T.position.y-d.y;i.setPosition(T,{x:d.x+(w*p-b*m),y:d.y+(w*m+b*p)}),i.rotate(T,h)}return n},s.scale=function(n,h,d,u,p){for(var m=p?s.allBodies(n):n.bodies,v=0;v<m.length;v++){var g=m[v],T=g.position.x-u.x,w=g.position.y-u.y;i.setPosition(g,{x:u.x+T*h,y:u.y+w*d}),i.scale(g,h,d)}return n},s.bounds=function(n){for(var h=s.allBodies(n),d=[],u=0;u<h.length;u+=1){var p=h[u];d.push(p.bounds.min,p.bounds.max)}return r.create(d)}})()},72005:(o,y,t)=>{var s={};o.exports=s;var l=t(11299);(function(){s.create=l.create,s.add=l.add,s.remove=l.remove,s.clear=l.clear,s.addComposite=l.addComposite,s.addBody=l.addBody,s.addConstraint=l.addConstraint})()},63454:(o,y,t)=>{var s={};o.exports=s;var l=t(39745),a=t(70584);(function(){var r=[],i={overlap:0,axis:null},n={overlap:0,axis:null};s.create=function(h,d){return{pair:null,collided:!1,bodyA:h,bodyB:d,parentA:h.parent,parentB:d.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},s.collides=function(h,d,u){if(s._overlapAxes(i,h.vertices,d.vertices,h.axes),i.overlap<=0||(s._overlapAxes(n,d.vertices,h.vertices,d.axes),n.overlap<=0))return null;var p=u&&u.table[a.id(h,d)],m;p?m=p.collision:(m=s.create(h,d),m.collided=!0,m.bodyA=h.id<d.id?h:d,m.bodyB=h.id<d.id?d:h,m.parentA=m.bodyA.parent,m.parentB=m.bodyB.parent),h=m.bodyA,d=m.bodyB;var v;i.overlap<n.overlap?v=i:v=n;var g=m.normal,T=m.supports,w=v.axis,b=w.x,E=w.y;b*(d.position.x-h.position.x)+E*(d.position.y-h.position.y)<0?(g.x=b,g.y=E):(g.x=-b,g.y=-E),m.tangent.x=-g.y,m.tangent.y=g.x,m.depth=v.overlap,m.penetration.x=g.x*m.depth,m.penetration.y=g.y*m.depth;var A=s._findSupports(h,d,g,1),R=0;if(l.contains(h.vertices,A[0])&&(T[R++]=A[0]),l.contains(h.vertices,A[1])&&(T[R++]=A[1]),R<2){var I=s._findSupports(d,h,g,-1);l.contains(d.vertices,I[0])&&(T[R++]=I[0]),R<2&&l.contains(d.vertices,I[1])&&(T[R++]=I[1])}return R===0&&(T[R++]=A[0]),T.length=R,m},s._overlapAxes=function(h,d,u,p){var m=d.length,v=u.length,g=d[0].x,T=d[0].y,w=u[0].x,b=u[0].y,E=p.length,A=Number.MAX_VALUE,R=0,I,P,N,F,O,D;for(O=0;O<E;O++){var L=p[O],z=L.x,X=L.y,H=g*z+T*X,J=w*z+b*X,G=H,k=J;for(D=1;D<m;D+=1)F=d[D].x*z+d[D].y*X,F>G?G=F:F<H&&(H=F);for(D=1;D<v;D+=1)F=u[D].x*z+u[D].y*X,F>k?k=F:F<J&&(J=F);if(P=G-J,N=k-H,I=P<N?P:N,I<A&&(A=I,R=O,I<=0))break}h.axis=p[R],h.overlap=A},s._projectToAxis=function(h,d,u){for(var p=d[0].x*u.x+d[0].y*u.y,m=p,v=1;v<d.length;v+=1){var g=d[v].x*u.x+d[v].y*u.y;g>m?m=g:g<p&&(p=g)}h.min=p,h.max=m},s._findSupports=function(h,d,u,p){var m=d.vertices,v=m.length,g=h.position.x,T=h.position.y,w=u.x*p,b=u.y*p,E=Number.MAX_VALUE,A,R,I,P,N;for(N=0;N<v;N+=1)R=m[N],P=w*(g-R.x)+b*(T-R.y),P<E&&(E=P,A=R);return I=m[(v+A.index-1)%v],E=w*(g-I.x)+b*(T-I.y),R=m[(A.index+1)%v],w*(g-R.x)+b*(T-R.y)<E?(r[0]=A,r[1]=R,r):(r[0]=A,r[1]=I,r)}})()},17319:o=>{var y={};o.exports=y,function(){y.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}}()},13657:(o,y,t)=>{var s={};o.exports=s;var l=t(68758),a=t(63454);(function(){s.create=function(r){var i={bodies:[],pairs:null};return l.extend(i,r)},s.setBodies=function(r,i){r.bodies=i.slice(0)},s.clear=function(r){r.bodies=[]},s.collisions=function(r){var i=[],n=r.pairs,h=r.bodies,d=h.length,u=s.canCollide,p=a.collides,m,v;for(h.sort(s._compareBoundsX),m=0;m<d;m++){var g=h[m],T=g.bounds,w=g.bounds.max.x,b=g.bounds.max.y,E=g.bounds.min.y,A=g.isStatic||g.isSleeping,R=g.parts.length,I=R===1;for(v=m+1;v<d;v++){var P=h[v],N=P.bounds;if(N.min.x>w)break;if(!(b<N.min.y||E>N.max.y)&&!(A&&(P.isStatic||P.isSleeping))&&u(g.collisionFilter,P.collisionFilter)){var F=P.parts.length;if(I&&F===1){var O=p(g,P,n);O&&i.push(O)}else for(var D=R>1?1:0,L=F>1?1:0,z=D;z<R;z++)for(var X=g.parts[z],T=X.bounds,H=L;H<F;H++){var J=P.parts[H],N=J.bounds;if(!(T.min.x>N.max.x||T.max.x<N.min.x||T.max.y<N.min.y||T.min.y>N.max.y)){var O=p(X,J,n);O&&i.push(O)}}}}}return i},s.canCollide=function(r,i){return r.group===i.group&&r.group!==0?r.group>0:(r.mask&i.category)!==0&&(i.mask&r.category)!==0},s._compareBoundsX=function(r,i){return r.bounds.min.x-i.bounds.min.x}})()},70584:(o,y,t)=>{var s={};o.exports=s;var l=t(17319);(function(){s.create=function(a,r){var i=a.bodyA,n=a.bodyB,h={id:s.id(i,n),bodyA:i,bodyB:n,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:i.isSensor||n.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(h,a,r),h},s.update=function(a,r,i){var n=a.contacts,h=r.supports,d=a.activeContacts,u=r.parentA,p=r.parentB,m=u.vertices.length;a.isActive=!0,a.timeUpdated=i,a.collision=r,a.separation=r.depth,a.inverseMass=u.inverseMass+p.inverseMass,a.friction=u.friction<p.friction?u.friction:p.friction,a.frictionStatic=u.frictionStatic>p.frictionStatic?u.frictionStatic:p.frictionStatic,a.restitution=u.restitution>p.restitution?u.restitution:p.restitution,a.slop=u.slop>p.slop?u.slop:p.slop,r.pair=a,d.length=0;for(var v=0;v<h.length;v++){var g=h[v],T=g.body===u?g.index:m+g.index,w=n[T];w?d.push(w):d.push(n[T]=l.create(g))}},s.setActive=function(a,r,i){r?(a.isActive=!0,a.timeUpdated=i):(a.isActive=!1,a.activeContacts.length=0)},s.id=function(a,r){return a.id<r.id?"A"+a.id+"B"+r.id:"A"+r.id+"B"+a.id}})()},91327:(o,y,t)=>{var s={};o.exports=s;var l=t(70584),a=t(68758);(function(){s.create=function(r){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},s.update=function(r,i,n){var h=r.list,d=h.length,u=r.table,p=i.length,m=r.collisionStart,v=r.collisionEnd,g=r.collisionActive,T,w,b,E;for(m.length=0,v.length=0,g.length=0,E=0;E<d;E++)h[E].confirmedActive=!1;for(E=0;E<p;E++)T=i[E],b=T.pair,b?(b.isActive?g.push(b):m.push(b),l.update(b,T,n),b.confirmedActive=!0):(b=l.create(T,n),u[b.id]=b,m.push(b),h.push(b));var A=[];for(d=h.length,E=0;E<d;E++)b=h[E],b.confirmedActive||(l.setActive(b,!1,n),v.push(b),!b.collision.bodyA.isSleeping&&!b.collision.bodyB.isSleeping&&A.push(E));for(E=0;E<A.length;E++)w=A[E]-E,b=h[w],h.splice(w,1),delete u[b.id]},s.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()},13390:(o,y,t)=>{var s={};o.exports=s;var l=t(10438),a=t(63454),r=t(84091),i=t(68516),n=t(39745);(function(){s.collides=function(h,d){for(var u=[],p=d.length,m=h.bounds,v=a.collides,g=r.overlaps,T=0;T<p;T++){var w=d[T],b=w.parts.length,E=b===1?0:1;if(h!==w&&g(w.bounds,m))for(var A=E;A<b;A++){var R=w.parts[A];if(g(R.bounds,m)){var I=v(R,h);if(I){u.push(I);break}}}}return u},s.ray=function(h,d,u,p){p=p||1e-100;for(var m=l.angle(d,u),v=l.magnitude(l.sub(d,u)),g=(u.x+d.x)*.5,T=(u.y+d.y)*.5,w=i.rectangle(g,T,v,p,{angle:m}),b=s.collides(w,h),E=0;E<b.length;E+=1){var A=b[E];A.body=A.bodyB=A.bodyA}return b},s.region=function(h,d,u){for(var p=[],m=0;m<h.length;m++){var v=h[m],g=r.overlaps(v.bounds,d);(g&&!u||!g&&u)&&p.push(v)}return p},s.point=function(h,d){for(var u=[],p=0;p<h.length;p++){var m=h[p];if(r.contains(m.bounds,d))for(var v=m.parts.length===1?0:1;v<m.parts.length;v++){var g=m.parts[v];if(r.contains(g.bounds,d)&&n.contains(g.vertices,d)){u.push(m);break}}}return u}})()},44272:(o,y,t)=>{var s={};o.exports=s;var l=t(39745),a=t(68758),r=t(84091);(function(){s._restingThresh=2,s._restingThreshTangent=Math.sqrt(6),s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s._frictionMaxStatic=Number.MAX_VALUE,s.preSolvePosition=function(i){var n,h,d,u=i.length;for(n=0;n<u;n++)h=i[n],h.isActive&&(d=h.activeContacts.length,h.collision.parentA.totalContacts+=d,h.collision.parentB.totalContacts+=d)},s.solvePosition=function(i,n,h){var d,u,p,m,v,g,T,w,b=s._positionDampen*(h||1),E=a.clamp(n/a._baseDelta,0,1),A=i.length;for(d=0;d<A;d++)u=i[d],!(!u.isActive||u.isSensor)&&(p=u.collision,m=p.parentA,v=p.parentB,g=p.normal,u.separation=g.x*(v.positionImpulse.x+p.penetration.x-m.positionImpulse.x)+g.y*(v.positionImpulse.y+p.penetration.y-m.positionImpulse.y));for(d=0;d<A;d++)u=i[d],!(!u.isActive||u.isSensor)&&(p=u.collision,m=p.parentA,v=p.parentB,g=p.normal,w=u.separation-u.slop*E,(m.isStatic||v.isStatic)&&(w*=2),m.isStatic||m.isSleeping||(T=b/m.totalContacts,m.positionImpulse.x+=g.x*w*T,m.positionImpulse.y+=g.y*w*T),v.isStatic||v.isSleeping||(T=b/v.totalContacts,v.positionImpulse.x-=g.x*w*T,v.positionImpulse.y-=g.y*w*T))},s.postSolvePosition=function(i){for(var n=s._positionWarming,h=i.length,d=l.translate,u=r.update,p=0;p<h;p++){var m=i[p],v=m.positionImpulse,g=v.x,T=v.y,w=m.velocity;if(m.totalContacts=0,g!==0||T!==0){for(var b=0;b<m.parts.length;b++){var E=m.parts[b];d(E.vertices,v),u(E.bounds,E.vertices,w),E.position.x+=g,E.position.y+=T}m.positionPrev.x+=g,m.positionPrev.y+=T,g*w.x+T*w.y<0?(v.x=0,v.y=0):(v.x*=n,v.y*=n)}}},s.preSolveVelocity=function(i){var n=i.length,h,d;for(h=0;h<n;h++){var u=i[h];if(!(!u.isActive||u.isSensor)){var p=u.activeContacts,m=p.length,v=u.collision,g=v.parentA,T=v.parentB,w=v.normal,b=v.tangent;for(d=0;d<m;d++){var E=p[d],A=E.vertex,R=E.normalImpulse,I=E.tangentImpulse;if(R!==0||I!==0){var P=w.x*R+b.x*I,N=w.y*R+b.y*I;g.isStatic||g.isSleeping||(g.positionPrev.x+=P*g.inverseMass,g.positionPrev.y+=N*g.inverseMass,g.anglePrev+=g.inverseInertia*((A.x-g.position.x)*N-(A.y-g.position.y)*P)),T.isStatic||T.isSleeping||(T.positionPrev.x-=P*T.inverseMass,T.positionPrev.y-=N*T.inverseMass,T.anglePrev-=T.inverseInertia*((A.x-T.position.x)*N-(A.y-T.position.y)*P))}}}}},s.solveVelocity=function(i,n){var h=n/a._baseDelta,d=h*h,u=d*h,p=-s._restingThresh*h,m=s._restingThreshTangent,v=s._frictionNormalMultiplier*h,g=s._frictionMaxStatic,T=i.length,w,b,E,A;for(E=0;E<T;E++){var R=i[E];if(!(!R.isActive||R.isSensor)){var I=R.collision,P=I.parentA,N=I.parentB,F=P.velocity,O=N.velocity,D=I.normal.x,L=I.normal.y,z=I.tangent.x,X=I.tangent.y,H=R.activeContacts,J=H.length,G=1/J,k=P.inverseMass+N.inverseMass,M=R.friction*R.frictionStatic*v;for(F.x=P.position.x-P.positionPrev.x,F.y=P.position.y-P.positionPrev.y,O.x=N.position.x-N.positionPrev.x,O.y=N.position.y-N.positionPrev.y,P.angularVelocity=P.angle-P.anglePrev,N.angularVelocity=N.angle-N.anglePrev,A=0;A<J;A++){var B=H[A],U=B.vertex,W=U.x-P.position.x,K=U.y-P.position.y,q=U.x-N.position.x,_=U.y-N.position.y,rt=F.x-K*P.angularVelocity,ft=F.y+W*P.angularVelocity,mt=O.x-_*N.angularVelocity,vt=O.y+q*N.angularVelocity,yt=rt-mt,xt=ft-vt,It=D*yt+L*xt,$t=z*yt+X*xt,Zt=R.separation+It,Bt=Math.min(Zt,1);Bt=Zt<0?0:Bt;var At=Bt*M;$t<-At||$t>At?(b=$t>0?$t:-$t,w=R.friction*($t>0?1:-1)*u,w<-b?w=-b:w>b&&(w=b)):(w=$t,b=g);var kt=W*L-K*D,Ut=q*L-_*D,ee=G/(k+P.inverseInertia*kt*kt+N.inverseInertia*Ut*Ut),te=(1+R.restitution)*It*ee;if(w*=ee,It<p)B.normalImpulse=0;else{var fe=B.normalImpulse;B.normalImpulse+=te,B.normalImpulse>0&&(B.normalImpulse=0),te=B.normalImpulse-fe}if($t<-m||$t>m)B.tangentImpulse=0;else{var ae=B.tangentImpulse;B.tangentImpulse+=w,B.tangentImpulse<-b&&(B.tangentImpulse=-b),B.tangentImpulse>b&&(B.tangentImpulse=b),w=B.tangentImpulse-ae}var le=D*te+z*w,re=L*te+X*w;P.isStatic||P.isSleeping||(P.positionPrev.x+=le*P.inverseMass,P.positionPrev.y+=re*P.inverseMass,P.anglePrev+=(W*re-K*le)*P.inverseInertia),N.isStatic||N.isSleeping||(N.positionPrev.x-=le*N.inverseMass,N.positionPrev.y-=re*N.inverseMass,N.anglePrev-=(q*re-_*le)*N.inverseInertia)}}}}})()},52838:(o,y,t)=>{var s={};o.exports=s;var l=t(39745),a=t(10438),r=t(22806),i=t(84091),n=t(50658),h=t(68758);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(d){var u=d;u.bodyA&&!u.pointA&&(u.pointA={x:0,y:0}),u.bodyB&&!u.pointB&&(u.pointB={x:0,y:0});var p=u.bodyA?a.add(u.bodyA.position,u.pointA):u.pointA,m=u.bodyB?a.add(u.bodyB.position,u.pointB):u.pointB,v=a.magnitude(a.sub(p,m));u.length=typeof u.length<"u"?u.length:v,u.id=u.id||h.nextId(),u.label=u.label||"Constraint",u.type="constraint",u.stiffness=u.stiffness||(u.length>0?1:.7),u.damping=u.damping||0,u.angularStiffness=u.angularStiffness||0,u.angleA=u.bodyA?u.bodyA.angle:u.angleA,u.angleB=u.bodyB?u.bodyB.angle:u.angleB,u.plugin={};var g={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return u.length===0&&u.stiffness>.1?(g.type="pin",g.anchors=!1):u.stiffness<.9&&(g.type="spring"),u.render=h.extend(g,u.render),u},s.preSolveAll=function(d){for(var u=0;u<d.length;u+=1){var p=d[u],m=p.constraintImpulse;p.isStatic||m.x===0&&m.y===0&&m.angle===0||(p.position.x+=m.x,p.position.y+=m.y,p.angle+=m.angle)}},s.solveAll=function(d,u){for(var p=h.clamp(u/h._baseDelta,0,1),m=0;m<d.length;m+=1){var v=d[m],g=!v.bodyA||v.bodyA&&v.bodyA.isStatic,T=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(g||T)&&s.solve(d[m],p)}for(m=0;m<d.length;m+=1)v=d[m],g=!v.bodyA||v.bodyA&&v.bodyA.isStatic,T=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!g&&!T&&s.solve(d[m],p)},s.solve=function(d,u){var p=d.bodyA,m=d.bodyB,v=d.pointA,g=d.pointB;if(!(!p&&!m)){p&&!p.isStatic&&(a.rotate(v,p.angle-d.angleA,v),d.angleA=p.angle),m&&!m.isStatic&&(a.rotate(g,m.angle-d.angleB,g),d.angleB=m.angle);var T=v,w=g;if(p&&(T=a.add(p.position,v)),m&&(w=a.add(m.position,g)),!(!T||!w)){var b=a.sub(T,w),E=a.magnitude(b);E<s._minLength&&(E=s._minLength);var A=(E-d.length)/E,R=d.stiffness>=1||d.length===0,I=R?d.stiffness*u:d.stiffness*u*u,P=d.damping*u,N=a.mult(b,A*I),F=(p?p.inverseMass:0)+(m?m.inverseMass:0),O=(p?p.inverseInertia:0)+(m?m.inverseInertia:0),D=F+O,L,z,X,H,J;if(P>0){var G=a.create();X=a.div(b,E),J=a.sub(m&&a.sub(m.position,m.positionPrev)||G,p&&a.sub(p.position,p.positionPrev)||G),H=a.dot(X,J)}p&&!p.isStatic&&(z=p.inverseMass/F,p.constraintImpulse.x-=N.x*z,p.constraintImpulse.y-=N.y*z,p.position.x-=N.x*z,p.position.y-=N.y*z,P>0&&(p.positionPrev.x-=P*X.x*H*z,p.positionPrev.y-=P*X.y*H*z),L=a.cross(v,N)/D*s._torqueDampen*p.inverseInertia*(1-d.angularStiffness),p.constraintImpulse.angle-=L,p.angle-=L),m&&!m.isStatic&&(z=m.inverseMass/F,m.constraintImpulse.x+=N.x*z,m.constraintImpulse.y+=N.y*z,m.position.x+=N.x*z,m.position.y+=N.y*z,P>0&&(m.positionPrev.x+=P*X.x*H*z,m.positionPrev.y+=P*X.y*H*z),L=a.cross(g,N)/D*s._torqueDampen*m.inverseInertia*(1-d.angularStiffness),m.constraintImpulse.angle+=L,m.angle+=L)}}},s.postSolveAll=function(d){for(var u=0;u<d.length;u++){var p=d[u],m=p.constraintImpulse;if(!(p.isStatic||m.x===0&&m.y===0&&m.angle===0)){r.set(p,!1);for(var v=0;v<p.parts.length;v++){var g=p.parts[v];l.translate(g.vertices,m),v>0&&(g.position.x+=m.x,g.position.y+=m.y),m.angle!==0&&(l.rotate(g.vertices,m.angle,p.position),n.rotate(g.axes,m.angle),v>0&&a.rotateAbout(g.position,m.angle,p.position,g.position)),i.update(g.bounds,g.vertices,p.velocity)}m.angle*=s._warming,m.x*=s._warming,m.y*=s._warming}}},s.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),y:(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0)}},s.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),y:(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0)}},s.currentLength=function(d){var u=(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),p=(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0),m=(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),v=(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0),g=u-m,T=p-v;return Math.sqrt(g*g+T*T)}})()},68758:(o,y,t)=>{var s={};o.exports=s,function(){s._baseDelta=16.666666666666668,s._nextId=0,s._seed=0,s._nowStartTime=+new Date,s._warnedOnce={},s._decomp=null,s.extend=function(a,r){var i,n;typeof r=="boolean"?(i=2,n=r):(i=1,n=!0);for(var h=i;h<arguments.length;h++){var d=arguments[h];if(d)for(var u in d)n&&d[u]&&d[u].constructor===Object&&(!a[u]||a[u].constructor===Object)?(a[u]=a[u]||{},s.extend(a[u],n,d[u])):a[u]=d[u]}return a},s.clone=function(a,r){return s.extend({},r,a)},s.keys=function(a){if(Object.keys)return Object.keys(a);var r=[];for(var i in a)r.push(i);return r},s.values=function(a){var r=[];if(Object.keys){for(var i=Object.keys(a),n=0;n<i.length;n++)r.push(a[i[n]]);return r}for(var h in a)r.push(a[h]);return r},s.get=function(a,r,i,n){r=r.split(".").slice(i,n);for(var h=0;h<r.length;h+=1)a=a[r[h]];return a},s.set=function(a,r,i,n,h){var d=r.split(".").slice(n,h);return s.get(a,r,0,-1)[d[d.length-1]]=i,i},s.shuffle=function(a){for(var r=a.length-1;r>0;r--){var i=Math.floor(s.random()*(r+1)),n=a[r];a[r]=a[i],a[i]=n}return a},s.choose=function(a){return a[Math.floor(s.random()*a.length)]},s.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},s.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},s.isFunction=function(a){return typeof a=="function"},s.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},s.isString=function(a){return toString.call(a)==="[object String]"},s.clamp=function(a,r,i){return a<r?r:a>i?i:a},s.sign=function(a){return a<0?-1:1},s.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-s._nowStartTime},s.random=function(a,r){return a=typeof a<"u"?a:0,r=typeof r<"u"?r:1,a+l()*(r-a)};var l=function(){return s._seed=(s._seed*9301+49297)%233280,s._seed/233280};s.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},s.logLevel=1,s.log=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.info=function(){console&&s.logLevel>0&&s.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warn=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");s._warnedOnce[a]||(s.warn(a),s._warnedOnce[a]=!0)},s.deprecated=function(a,r,i){a[r]=s.chain(function(){s.warnOnce(" deprecated ",i)},a[r])},s.nextId=function(){return s._nextId++},s.indexOf=function(a,r){if(a.indexOf)return a.indexOf(r);for(var i=0;i<a.length;i++)if(a[i]===r)return i;return-1},s.map=function(a,r){if(a.map)return a.map(r);for(var i=[],n=0;n<a.length;n+=1)i.push(r(a[n]));return i},s.topologicalSort=function(a){var r=[],i=[],n=[];for(var h in a)!i[h]&&!n[h]&&s._topologicalSort(h,i,n,a,r);return r},s._topologicalSort=function(a,r,i,n,h){var d=n[a]||[];i[a]=!0;for(var u=0;u<d.length;u+=1){var p=d[u];i[p]||r[p]||s._topologicalSort(p,r,i,n,h)}i[a]=!1,r[a]=!0,h.push(a)},s.chain=function(){for(var a=[],r=0;r<arguments.length;r+=1){var i=arguments[r];i._chained?a.push.apply(a,i._chained):a.push(i)}var n=function(){for(var h,d=new Array(arguments.length),u=0,p=arguments.length;u<p;u++)d[u]=arguments[u];for(u=0;u<a.length;u+=1){var m=a[u].apply(h,d);typeof m<"u"&&(h=m)}return h};return n._chained=a,n},s.chainPathBefore=function(a,r,i){return s.set(a,r,s.chain(i,s.get(a,r)))},s.chainPathAfter=function(a,r,i){return s.set(a,r,s.chain(s.get(a,r),i))},s.setDecomp=function(a){s._decomp=a},s.getDecomp=function(){var a=s._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof t.g<"u"&&(a=t.g.decomp)}catch{a=null}return a}}()},45775:(o,y,t)=>{var s={};o.exports=s;var l=t(22806),a=t(44272),r=t(13657),i=t(91327),n=t(39073),h=t(11299),d=t(52838),u=t(68758),p=t(84125);(function(){s.create=function(m){m=m||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},g=u.extend(v,m);return g.world=m.world||h.create({label:"World"}),g.pairs=m.pairs||i.create(),g.detector=m.detector||r.create(),g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},s.update=function(m,v){var g=u.now(),T=m.world,w=m.detector,b=m.pairs,E=m.timing,A=E.timestamp,R;v=typeof v<"u"?v:u._baseDelta,v*=E.timeScale,E.timestamp+=v,E.lastDelta=v;var I={timestamp:E.timestamp,delta:v};n.trigger(m,"beforeUpdate",I);var P=h.allBodies(T),N=h.allConstraints(T);for(T.isModified&&(r.setBodies(w,P),h.setModified(T,!1,!1,!0)),m.enableSleeping&&l.update(P,v),s._bodiesApplyGravity(P,m.gravity),v>0&&s._bodiesUpdate(P,v),n.trigger(m,"beforeSolve",I),d.preSolveAll(P),R=0;R<m.constraintIterations;R++)d.solveAll(N,v);d.postSolveAll(P),w.pairs=m.pairs;var F=r.collisions(w);i.update(b,F,A),m.enableSleeping&&l.afterCollisions(b.list),b.collisionStart.length>0&&n.trigger(m,"collisionStart",{pairs:b.collisionStart,timestamp:E.timestamp,delta:v});var O=u.clamp(20/m.positionIterations,0,1);for(a.preSolvePosition(b.list),R=0;R<m.positionIterations;R++)a.solvePosition(b.list,v,O);for(a.postSolvePosition(P),d.preSolveAll(P),R=0;R<m.constraintIterations;R++)d.solveAll(N,v);for(d.postSolveAll(P),a.preSolveVelocity(b.list),R=0;R<m.velocityIterations;R++)a.solveVelocity(b.list,v);return s._bodiesUpdateVelocities(P),b.collisionActive.length>0&&n.trigger(m,"collisionActive",{pairs:b.collisionActive,timestamp:E.timestamp,delta:v}),b.collisionEnd.length>0&&n.trigger(m,"collisionEnd",{pairs:b.collisionEnd,timestamp:E.timestamp,delta:v}),s._bodiesClearForces(P),n.trigger(m,"afterUpdate",I),m.timing.lastElapsed=u.now()-g,m},s.merge=function(m,v){if(u.extend(m,v),v.world){m.world=v.world,s.clear(m);for(var g=h.allBodies(m.world),T=0;T<g.length;T++){var w=g[T];l.set(w,!1),w.id=u.nextId()}}},s.clear=function(m){i.clear(m.pairs),r.clear(m.detector)},s._bodiesClearForces=function(m){for(var v=m.length,g=0;g<v;g++){var T=m[g];T.force.x=0,T.force.y=0,T.torque=0}},s._bodiesApplyGravity=function(m,v){var g=typeof v.scale<"u"?v.scale:.001,T=m.length;if(!(v.x===0&&v.y===0||g===0))for(var w=0;w<T;w++){var b=m[w];b.ignoreGravity||b.isStatic||b.isSleeping||(b.force.y+=b.mass*v.y*g,b.force.x+=b.mass*v.x*g)}},s._bodiesUpdate=function(m,v){for(var g=m.length,T=0;T<g;T++){var w=m[T];w.isStatic||w.isSleeping||p.update(w,v)}},s._bodiesUpdateVelocities=function(m){for(var v=m.length,g=0;g<v;g++)p.updateVelocities(m[g])}})()},39073:(o,y,t)=>{var s={};o.exports=s;var l=t(68758);(function(){s.on=function(a,r,i){for(var n=r.split(" "),h,d=0;d<n.length;d++)h=n[d],a.events=a.events||{},a.events[h]=a.events[h]||[],a.events[h].push(i);return i},s.off=function(a,r,i){if(!r){a.events={};return}typeof r=="function"&&(i=r,r=l.keys(a.events).join(" "));for(var n=r.split(" "),h=0;h<n.length;h++){var d=a.events[n[h]],u=[];if(i&&d)for(var p=0;p<d.length;p++)d[p]!==i&&u.push(d[p]);a.events[n[h]]=u}},s.trigger=function(a,r,i){var n,h,d,u,p=a.events;if(p&&l.keys(p).length>0){i||(i={}),n=r.split(" ");for(var m=0;m<n.length;m++)if(h=n[m],d=p[h],d){u=l.clone(i,!1),u.name=h,u.source=a;for(var v=0;v<d.length;v++)d[v].apply(a,[u])}}}})()},16929:(o,y,t)=>{var s={};o.exports=s;var l=t(84474),a=t(68758);(function(){s.name="matter-js",s.version="0.19.0",s.uses=[],s.used=[],s.use=function(){l.use(s,Array.prototype.slice.call(arguments))},s.before=function(r,i){return r=r.replace(/^Matter./,""),a.chainPathBefore(s,r,i)},s.after=function(r,i){return r=r.replace(/^Matter./,""),a.chainPathAfter(s,r,i)}})()},84474:(o,y,t)=>{var s={};o.exports=s;var l=t(68758);(function(){s._registry={},s.register=function(a){if(s.isPlugin(a)||l.warn("Plugin.register:",s.toString(a),"does not implement all required fields."),a.name in s._registry){var r=s._registry[a.name],i=s.versionParse(a.version).number,n=s.versionParse(r.version).number;i>n?(l.warn("Plugin.register:",s.toString(r),"was upgraded to",s.toString(a)),s._registry[a.name]=a):i<n?l.warn("Plugin.register:",s.toString(r),"can not be downgraded to",s.toString(a)):a!==r&&l.warn("Plugin.register:",s.toString(a),"is already registered to different plugin object")}else s._registry[a.name]=a;return a},s.resolve=function(a){return s._registry[s.dependencyParse(a).name]},s.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},s.isPlugin=function(a){return a&&a.name&&a.version&&a.install},s.isUsed=function(a,r){return a.used.indexOf(r)>-1},s.isFor=function(a,r){var i=a.for&&s.dependencyParse(a.for);return!a.for||r.name===i.name&&s.versionSatisfies(r.version,i.range)},s.use=function(a,r){if(a.uses=(a.uses||[]).concat(r||[]),a.uses.length===0){l.warn("Plugin.use:",s.toString(a),"does not specify any dependencies to install.");return}for(var i=s.dependencies(a),n=l.topologicalSort(i),h=[],d=0;d<n.length;d+=1)if(n[d]!==a.name){var u=s.resolve(n[d]);if(!u){h.push(" "+n[d]);continue}s.isUsed(a,u.name)||(s.isFor(u,a)||(l.warn("Plugin.use:",s.toString(u),"is for",u.for,"but installed on",s.toString(a)+"."),u._warned=!0),u.install?u.install(a):(l.warn("Plugin.use:",s.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(h.push(" "+s.toString(u)),delete u._warned):h.push(" "+s.toString(u)),a.used.push(u.name))}h.length>0&&!u.silent&&l.info(h.join("  "))},s.dependencies=function(a,r){var i=s.dependencyParse(a),n=i.name;if(r=r||{},!(n in r)){a=s.resolve(a)||a,r[n]=l.map(a.uses||[],function(d){s.isPlugin(d)&&s.register(d);var u=s.dependencyParse(d),p=s.resolve(d);return p&&!s.versionSatisfies(p.version,u.range)?(l.warn("Plugin.dependencies:",s.toString(p),"does not satisfy",s.toString(u),"used by",s.toString(i)+"."),p._warned=!0,a._warned=!0):p||(l.warn("Plugin.dependencies:",s.toString(d),"used by",s.toString(i),"could not be resolved."),a._warned=!0),u.name});for(var h=0;h<r[n].length;h+=1)s.dependencies(r[n][h],r);return r}},s.dependencyParse=function(a){if(l.isString(a)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(a)||l.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},s.versionParse=function(a){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(a)||l.warn("Plugin.versionParse:",a,"is not a valid version or range.");var i=r.exec(a),n=Number(i[4]),h=Number(i[5]),d=Number(i[6]);return{isRange:!!(i[1]||i[2]),version:i[3],range:a,operator:i[1]||i[2]||"",major:n,minor:h,patch:d,parts:[n,h,d],prerelease:i[7],number:n*1e8+h*1e4+d}},s.versionSatisfies=function(a,r){r=r||"*";var i=s.versionParse(r),n=s.versionParse(a);if(i.isRange){if(i.operator==="*"||a==="*")return!0;if(i.operator===">")return n.number>i.number;if(i.operator===">=")return n.number>=i.number;if(i.operator==="~")return n.major===i.major&&n.minor===i.minor&&n.patch>=i.patch;if(i.operator==="^")return i.major>0?n.major===i.major&&n.number>=i.number:i.minor>0?n.minor===i.minor&&n.patch>=i.patch:n.patch===i.patch}return a===r||a==="*"}})()},22806:(o,y,t)=>{var s={};o.exports=s;var l=t(84125),a=t(39073),r=t(68758);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(i,n){for(var h=n/r._baseDelta,d=s._motionSleepThreshold,u=0;u<i.length;u++){var p=i[u],m=l.getSpeed(p),v=l.getAngularSpeed(p),g=m*m+v*v;if(p.force.x!==0||p.force.y!==0){s.set(p,!1);continue}var T=Math.min(p.motion,g),w=Math.max(p.motion,g);p.motion=s._minBias*T+(1-s._minBias)*w,p.sleepThreshold>0&&p.motion<d?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/h&&s.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},s.afterCollisions=function(i){for(var n=s._motionSleepThreshold,h=0;h<i.length;h++){var d=i[h];if(d.isActive){var u=d.collision,p=u.bodyA.parent,m=u.bodyB.parent;if(!(p.isSleeping&&m.isSleeping||p.isStatic||m.isStatic)&&(p.isSleeping||m.isSleeping)){var v=p.isSleeping&&!p.isStatic?p:m,g=v===p?m:p;!v.isStatic&&g.motion>n&&s.set(v,!1)}}}},s.set=function(i,n){var h=i.isSleeping;n?(i.isSleeping=!0,i.sleepCounter=i.sleepThreshold,i.positionImpulse.x=0,i.positionImpulse.y=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.speed=0,i.angularSpeed=0,i.motion=0,h||a.trigger(i,"sleepStart")):(i.isSleeping=!1,i.sleepCounter=0,h&&a.trigger(i,"sleepEnd"))}})()},68516:(o,y,t)=>{var s={};o.exports=s;var l=t(39745),a=t(68758),r=t(84125),i=t(84091),n=t(10438);(function(){s.rectangle=function(h,d,u,p,m){m=m||{};var v={label:"Rectangle Body",position:{x:h,y:d},vertices:l.fromPath("L 0 0 L "+u+" 0 L "+u+" "+p+" L 0 "+p)};if(m.chamfer){var g=m.chamfer;v.vertices=l.chamfer(v.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete m.chamfer}return r.create(a.extend({},v,m))},s.trapezoid=function(h,d,u,p,m,v){v=v||{},m*=.5;var g=(1-m*2)*u,T=u*m,w=T+g,b=w+T,E;m<.5?E="L 0 0 L "+T+" "+-p+" L "+w+" "+-p+" L "+b+" 0":E="L 0 0 L "+w+" "+-p+" L "+b+" 0";var A={label:"Trapezoid Body",position:{x:h,y:d},vertices:l.fromPath(E)};if(v.chamfer){var R=v.chamfer;A.vertices=l.chamfer(A.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete v.chamfer}return r.create(a.extend({},A,v))},s.circle=function(h,d,u,p,m){p=p||{};var v={label:"Circle Body",circleRadius:u};m=m||25;var g=Math.ceil(Math.max(10,Math.min(m,u)));return g%2===1&&(g+=1),s.polygon(h,d,g,u,a.extend({},v,p))},s.polygon=function(h,d,u,p,m){if(m=m||{},u<3)return s.circle(h,d,p,m);for(var v=2*Math.PI/u,g="",T=v*.5,w=0;w<u;w+=1){var b=T+w*v,E=Math.cos(b)*p,A=Math.sin(b)*p;g+="L "+E.toFixed(3)+" "+A.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:h,y:d},vertices:l.fromPath(g)};if(m.chamfer){var I=m.chamfer;R.vertices=l.chamfer(R.vertices,I.radius,I.quality,I.qualityMin,I.qualityMax),delete m.chamfer}return r.create(a.extend({},R,m))},s.fromVertices=function(h,d,u,p,m,v,g,T){var w=a.getDecomp(),b,E,A,R,I,P,N,F,O,D,L;for(b=!!(w&&w.quickDecomp),p=p||{},A=[],m=typeof m<"u"?m:!1,v=typeof v<"u"?v:.01,g=typeof g<"u"?g:10,T=typeof T<"u"?T:.01,a.isArray(u[0])||(u=[u]),D=0;D<u.length;D+=1)if(P=u[D],R=l.isConvex(P),I=!R,I&&!b&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!b)R?P=l.clockwiseSort(P):P=l.hull(P),A.push({position:{x:h,y:d},vertices:P});else{var z=P.map(function(q){return[q.x,q.y]});w.makeCCW(z),v!==!1&&w.removeCollinearPoints(z,v),T!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(z,T);var X=w.quickDecomp(z);for(N=0;N<X.length;N++){var H=X[N],J=H.map(function(q){return{x:q[0],y:q[1]}});g>0&&l.area(J)<g||A.push({position:l.centre(J),vertices:J})}}for(N=0;N<A.length;N++)A[N]=r.create(a.extend(A[N],p));if(m){var G=5;for(N=0;N<A.length;N++){var k=A[N];for(F=N+1;F<A.length;F++){var M=A[F];if(i.overlaps(k.bounds,M.bounds)){var B=k.vertices,U=M.vertices;for(O=0;O<k.vertices.length;O++)for(L=0;L<M.vertices.length;L++){var W=n.magnitudeSquared(n.sub(B[(O+1)%B.length],U[L])),K=n.magnitudeSquared(n.sub(B[O],U[(L+1)%U.length]));W<G&&K<G&&(B[O].isInternal=!0,U[L].isInternal=!0)}}}}}return A.length>1?(E=r.create(a.extend({parts:A.slice(0)},p)),r.setPosition(E,{x:h,y:d}),E):A[0]},s.flagCoincidentParts=function(h,d){d===void 0&&(d=5);for(var u=0;u<h.length;u++)for(var p=h[u],m=u+1;m<h.length;m++){var v=h[m];if(i.overlaps(p.bounds,v.bounds))for(var g=p.vertices,T=v.vertices,w=0;w<p.vertices.length;w++)for(var b=0;b<v.vertices.length;b++){var E=n.magnitudeSquared(n.sub(g[(w+1)%g.length],T[b])),A=n.magnitudeSquared(n.sub(g[w],T[(b+1)%T.length]));E<d&&A<d&&(g[w].isInternal=!0,T[b].isInternal=!0)}}return h}})()},56643:(o,y,t)=>{var s={};o.exports=s;var l=t(11299),a=t(52838),r=t(68758),i=t(84125),n=t(68516);(function(){s.stack=function(h,d,u,p,m,v,g){for(var T=l.create({label:"Stack"}),w=h,b=d,E,A=0,R=0;R<p;R++){for(var I=0,P=0;P<u;P++){var N=g(w,b,P,R,E,A);if(N){var F=N.bounds.max.y-N.bounds.min.y,O=N.bounds.max.x-N.bounds.min.x;F>I&&(I=F),i.translate(N,{x:O*.5,y:F*.5}),w=N.bounds.max.x+m,l.addBody(T,N),E=N,A+=1}else w+=m}b+=I+v,w=h}return T},s.chain=function(h,d,u,p,m,v){for(var g=h.bodies,T=1;T<g.length;T++){var w=g[T-1],b=g[T],E=w.bounds.max.y-w.bounds.min.y,A=w.bounds.max.x-w.bounds.min.x,R=b.bounds.max.y-b.bounds.min.y,I=b.bounds.max.x-b.bounds.min.x,P={bodyA:w,pointA:{x:A*d,y:E*u},bodyB:b,pointB:{x:I*p,y:R*m}},N=r.extend(P,v);l.addConstraint(h,a.create(N))}return h.label+=" Chain",h},s.mesh=function(h,d,u,p,m){var v=h.bodies,g,T,w,b,E;for(g=0;g<u;g++){for(T=1;T<d;T++)w=v[T-1+g*d],b=v[T+g*d],l.addConstraint(h,a.create(r.extend({bodyA:w,bodyB:b},m)));if(g>0)for(T=0;T<d;T++)w=v[T+(g-1)*d],b=v[T+g*d],l.addConstraint(h,a.create(r.extend({bodyA:w,bodyB:b},m))),p&&T>0&&(E=v[T-1+(g-1)*d],l.addConstraint(h,a.create(r.extend({bodyA:E,bodyB:b},m)))),p&&T<d-1&&(E=v[T+1+(g-1)*d],l.addConstraint(h,a.create(r.extend({bodyA:E,bodyB:b},m))))}return h.label+=" Mesh",h},s.pyramid=function(h,d,u,p,m,v,g){return s.stack(h,d,u,p,m,v,function(T,w,b,E,A,R){var I=Math.min(p,Math.ceil(u/2)),P=A?A.bounds.max.x-A.bounds.min.x:0;if(!(E>I)){E=I-E;var N=E,F=u-1-E;if(!(b<N||b>F)){R===1&&i.translate(A,{x:(b+(u%2===1?1:-1))*P,y:0});var O=A?b*P:0;return g(h+O+b*m,w,b,E,A,R)}}})},s.newtonsCradle=function(h,d,u,p,m){for(var v=l.create({label:"Newtons Cradle"}),g=0;g<u;g++){var T=1.9,w=n.circle(h+g*(p*T),d+m,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),b=a.create({pointA:{x:h+g*(p*T),y:d},bodyB:w});l.addBody(v,w),l.addConstraint(v,b)}return v},s.car=function(h,d,u,p,m){var v=i.nextGroup(!0),g=20,T=-u*.5+g,w=u*.5-g,b=0,E=l.create({label:"Car"}),A=n.rectangle(h,d,u,p,{collisionFilter:{group:v},chamfer:{radius:p*.5},density:2e-4}),R=n.circle(h+T,d+b,m,{collisionFilter:{group:v},friction:.8}),I=n.circle(h+w,d+b,m,{collisionFilter:{group:v},friction:.8}),P=a.create({bodyB:A,pointB:{x:T,y:b},bodyA:R,stiffness:1,length:0}),N=a.create({bodyB:A,pointB:{x:w,y:b},bodyA:I,stiffness:1,length:0});return l.addBody(E,A),l.addBody(E,R),l.addBody(E,I),l.addConstraint(E,P),l.addConstraint(E,N),E},s.softBody=function(h,d,u,p,m,v,g,T,w,b){w=r.extend({inertia:1/0},w),b=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},b);var E=s.stack(h,d,u,p,m,v,function(A,R){return n.circle(A,R,T,w)});return s.mesh(E,u,p,g,b),E.label="Soft Body",E}})()},50658:(o,y,t)=>{var s={};o.exports=s;var l=t(10438),a=t(68758);(function(){s.fromVertices=function(r){for(var i={},n=0;n<r.length;n++){var h=(n+1)%r.length,d=l.normalise({x:r[h].y-r[n].y,y:r[n].x-r[h].x}),u=d.y===0?1/0:d.x/d.y;u=u.toFixed(3).toString(),i[u]=d}return a.values(i)},s.rotate=function(r,i){if(i!==0)for(var n=Math.cos(i),h=Math.sin(i),d=0;d<r.length;d++){var u=r[d],p;p=u.x*n-u.y*h,u.y=u.x*h+u.y*n,u.x=p}}})()},84091:o=>{var y={};o.exports=y,function(){y.create=function(t){var s={min:{x:0,y:0},max:{x:0,y:0}};return t&&y.update(s,t),s},y.update=function(t,s,l){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var a=0;a<s.length;a++){var r=s[a];r.x>t.max.x&&(t.max.x=r.x),r.x<t.min.x&&(t.min.x=r.x),r.y>t.max.y&&(t.max.y=r.y),r.y<t.min.y&&(t.min.y=r.y)}l&&(l.x>0?t.max.x+=l.x:t.min.x+=l.x,l.y>0?t.max.y+=l.y:t.min.y+=l.y)},y.contains=function(t,s){return s.x>=t.min.x&&s.x<=t.max.x&&s.y>=t.min.y&&s.y<=t.max.y},y.overlaps=function(t,s){return t.min.x<=s.max.x&&t.max.x>=s.min.x&&t.max.y>=s.min.y&&t.min.y<=s.max.y},y.translate=function(t,s){t.min.x+=s.x,t.max.x+=s.x,t.min.y+=s.y,t.max.y+=s.y},y.shift=function(t,s){var l=t.max.x-t.min.x,a=t.max.y-t.min.y;t.min.x=s.x,t.max.x=s.x+l,t.min.y=s.y,t.max.y=s.y+a}}()},92765:(o,y,t)=>{var s={};o.exports=s,t(84091);var l=t(68758);(function(){s.pathToVertices=function(a,r){typeof window<"u"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,n,h,d,u,p,m,v,g,T,w=[],b,E,A=0,R=0,I=0;r=r||15;var P=function(F,O,D){var L=D%2===1&&D>1;if(!g||F!=g.x||O!=g.y){g&&L?(b=g.x,E=g.y):(b=0,E=0);var z={x:b+F,y:E+O};(L||!g)&&(g=z),w.push(z),R=b+F,I=E+O}},N=function(F){var O=F.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":R=F.x,I=F.y;break;case"H":R=F.x;break;case"V":I=F.y;break}P(R,I,F.pathSegType)}};for(s._svgPathToAbsolute(a),h=a.getTotalLength(),p=[],i=0;i<a.pathSegList.numberOfItems;i+=1)p.push(a.pathSegList.getItem(i));for(m=p.concat();A<h;){if(T=a.getPathSegAtLength(A),u=p[T],u!=v){for(;m.length&&m[0]!=u;)N(m.shift());v=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=a.getPointAtLength(A),P(d.x,d.y,0);break}A+=r}for(i=0,n=m.length;i<n;++i)N(m[i]);return w},s._svgPathToAbsolute=function(a){for(var r,i,n,h,d,u,p=a.pathSegList,m=0,v=0,g=p.numberOfItems,T=0;T<g;++T){var w=p.getItem(T),b=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(b))"x"in w&&(m=w.x),"y"in w&&(v=w.y);else switch("x1"in w&&(n=m+w.x1),"x2"in w&&(d=m+w.x2),"y1"in w&&(h=v+w.y1),"y2"in w&&(u=v+w.y2),"x"in w&&(m+=w.x),"y"in w&&(v+=w.y),b){case"m":p.replaceItem(a.createSVGPathSegMovetoAbs(m,v),T);break;case"l":p.replaceItem(a.createSVGPathSegLinetoAbs(m,v),T);break;case"h":p.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(m),T);break;case"v":p.replaceItem(a.createSVGPathSegLinetoVerticalAbs(v),T);break;case"c":p.replaceItem(a.createSVGPathSegCurvetoCubicAbs(m,v,n,h,d,u),T);break;case"s":p.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(m,v,d,u),T);break;case"q":p.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(m,v,n,h),T);break;case"t":p.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(m,v),T);break;case"a":p.replaceItem(a.createSVGPathSegArcAbs(m,v,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),T);break;case"z":case"Z":m=r,v=i;break}(b=="M"||b=="m")&&(r=m,i=v)}}})()},10438:o=>{var y={};o.exports=y,function(){y.create=function(t,s){return{x:t||0,y:s||0}},y.clone=function(t){return{x:t.x,y:t.y}},y.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},y.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},y.rotate=function(t,s,l){var a=Math.cos(s),r=Math.sin(s);l||(l={});var i=t.x*a-t.y*r;return l.y=t.x*r+t.y*a,l.x=i,l},y.rotateAbout=function(t,s,l,a){var r=Math.cos(s),i=Math.sin(s);a||(a={});var n=l.x+((t.x-l.x)*r-(t.y-l.y)*i);return a.y=l.y+((t.x-l.x)*i+(t.y-l.y)*r),a.x=n,a},y.normalise=function(t){var s=y.magnitude(t);return s===0?{x:0,y:0}:{x:t.x/s,y:t.y/s}},y.dot=function(t,s){return t.x*s.x+t.y*s.y},y.cross=function(t,s){return t.x*s.y-t.y*s.x},y.cross3=function(t,s,l){return(s.x-t.x)*(l.y-t.y)-(s.y-t.y)*(l.x-t.x)},y.add=function(t,s,l){return l||(l={}),l.x=t.x+s.x,l.y=t.y+s.y,l},y.sub=function(t,s,l){return l||(l={}),l.x=t.x-s.x,l.y=t.y-s.y,l},y.mult=function(t,s){return{x:t.x*s,y:t.y*s}},y.div=function(t,s){return{x:t.x/s,y:t.y/s}},y.perp=function(t,s){return s=s===!0?-1:1,{x:s*-t.y,y:s*t.x}},y.neg=function(t){return{x:-t.x,y:-t.y}},y.angle=function(t,s){return Math.atan2(s.y-t.y,s.x-t.x)},y._temp=[y.create(),y.create(),y.create(),y.create(),y.create(),y.create()]}()},39745:(o,y,t)=>{var s={};o.exports=s;var l=t(10438),a=t(68758);(function(){s.create=function(r,i){for(var n=[],h=0;h<r.length;h++){var d=r[h],u={x:d.x,y:d.y,index:h,body:i,isInternal:!1};n.push(u)}return n},s.fromPath=function(r,i){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,h=[];return r.replace(n,function(d,u,p){h.push({x:parseFloat(u),y:parseFloat(p)})}),s.create(h,i)},s.centre=function(r){for(var i=s.area(r,!0),n={x:0,y:0},h,d,u,p=0;p<r.length;p++)u=(p+1)%r.length,h=l.cross(r[p],r[u]),d=l.mult(l.add(r[p],r[u]),h),n=l.add(n,d);return l.div(n,6*i)},s.mean=function(r){for(var i={x:0,y:0},n=0;n<r.length;n++)i.x+=r[n].x,i.y+=r[n].y;return l.div(i,r.length)},s.area=function(r,i){for(var n=0,h=r.length-1,d=0;d<r.length;d++)n+=(r[h].x-r[d].x)*(r[h].y+r[d].y),h=d;return i?n/2:Math.abs(n)/2},s.inertia=function(r,i){for(var n=0,h=0,d=r,u,p,m=0;m<d.length;m++)p=(m+1)%d.length,u=Math.abs(l.cross(d[p],d[m])),n+=u*(l.dot(d[p],d[p])+l.dot(d[p],d[m])+l.dot(d[m],d[m])),h+=u;return i/6*(n/h)},s.translate=function(r,i,n){n=typeof n<"u"?n:1;var h=r.length,d=i.x*n,u=i.y*n,p;for(p=0;p<h;p++)r[p].x+=d,r[p].y+=u;return r},s.rotate=function(r,i,n){if(i!==0){var h=Math.cos(i),d=Math.sin(i),u=n.x,p=n.y,m=r.length,v,g,T,w;for(w=0;w<m;w++)v=r[w],g=v.x-u,T=v.y-p,v.x=u+(g*h-T*d),v.y=p+(g*d+T*h);return r}},s.contains=function(r,i){for(var n=i.x,h=i.y,d=r.length,u=r[d-1],p,m=0;m<d;m++){if(p=r[m],(n-u.x)*(p.y-u.y)+(h-u.y)*(u.x-p.x)>0)return!1;u=p}return!0},s.scale=function(r,i,n,h){if(i===1&&n===1)return r;h=h||s.centre(r);for(var d,u,p=0;p<r.length;p++)d=r[p],u=l.sub(d,h),r[p].x=h.x+u.x*i,r[p].y=h.y+u.y*n;return r},s.chamfer=function(r,i,n,h,d){typeof i=="number"?i=[i]:i=i||[8],n=typeof n<"u"?n:-1,h=h||2,d=d||14;for(var u=[],p=0;p<r.length;p++){var m=r[p-1>=0?p-1:r.length-1],v=r[p],g=r[(p+1)%r.length],T=i[p<i.length?p:i.length-1];if(T===0){u.push(v);continue}var w=l.normalise({x:v.y-m.y,y:m.x-v.x}),b=l.normalise({x:g.y-v.y,y:v.x-g.x}),E=Math.sqrt(2*Math.pow(T,2)),A=l.mult(a.clone(w),T),R=l.normalise(l.mult(l.add(w,b),.5)),I=l.sub(v,l.mult(R,E)),P=n;n===-1&&(P=Math.pow(T,.32)*1.75),P=a.clamp(P,h,d),P%2===1&&(P+=1);for(var N=Math.acos(l.dot(w,b)),F=N/P,O=0;O<P;O++)u.push(l.add(l.rotate(A,F*O),I))}return u},s.clockwiseSort=function(r){var i=s.mean(r);return r.sort(function(n,h){return l.angle(i,n)-l.angle(i,h)}),r},s.isConvex=function(r){var i=0,n=r.length,h,d,u,p;if(n<3)return null;for(h=0;h<n;h++)if(d=(h+1)%n,u=(h+2)%n,p=(r[d].x-r[h].x)*(r[u].y-r[d].y),p-=(r[d].y-r[h].y)*(r[u].x-r[d].x),p<0?i|=1:p>0&&(i|=2),i===3)return!1;return i!==0?!0:null},s.hull=function(r){var i=[],n=[],h,d;for(r=r.slice(0),r.sort(function(u,p){var m=u.x-p.x;return m!==0?m:u.y-p.y}),d=0;d<r.length;d+=1){for(h=r[d];n.length>=2&&l.cross3(n[n.length-2],n[n.length-1],h)<=0;)n.pop();n.push(h)}for(d=r.length-1;d>=0;d-=1){for(h=r[d];i.length>=2&&l.cross3(i[i.length-2],i[i.length-1],h)<=0;)i.pop();i.push(h)}return i.pop(),n.pop(),i.concat(n)}})()},1675:(o,y,t)=>{var s=t(18171),l={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(a){a.after("Body.create",function(){l.Body.init(this)}),a.before("Engine.update",function(r){l.Engine.update(r)})},Body:{init:function(a){a.plugin.attractors=a.plugin.attractors||[]}},Engine:{update:function(a){for(var r=s.Composite.allBodies(a.world),i=0;i<r.length;i++){var n=r[i],h=n.plugin.attractors;if(h&&h.length>0)for(var d=0;d<r.length;d++){var u=r[d];if(i!==d)for(var p=0;p<h.length;p++){var m=h[p],v=m;s.Common.isFunction(m)&&(v=m(n,u)),v&&s.Body.applyForce(u,u.position,v)}}}}},Attractors:{gravityConstant:.001,gravity:function(a,r){var i=s.Vector.sub(r.position,a.position),n=s.Vector.magnitudeSquared(i)||1e-4,h=s.Vector.normalise(i),d=-l.Attractors.gravityConstant*(a.mass*r.mass/n),u=s.Vector.mult(h,d);s.Body.applyForce(a,a.position,s.Vector.neg(u)),s.Body.applyForce(r,r.position,u)}}};o.exports=l},80391:o=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(t){t.after("Engine.create",function(){t.Events.on(this,"collisionStart",function(s){s.pairs.map(function(l){var a=l.bodyA,r=l.bodyB;a.gameObject&&a.gameObject.emit("collide",a,r,l),r.gameObject&&r.gameObject.emit("collide",r,a,l),t.Events.trigger(a,"onCollide",{pair:l}),t.Events.trigger(r,"onCollide",{pair:l}),a.onCollideCallback&&a.onCollideCallback(l),r.onCollideCallback&&r.onCollideCallback(l),a.onCollideWith[r.id]&&a.onCollideWith[r.id](r,l),r.onCollideWith[a.id]&&r.onCollideWith[a.id](a,l)})}),t.Events.on(this,"collisionActive",function(s){s.pairs.map(function(l){var a=l.bodyA,r=l.bodyB;a.gameObject&&a.gameObject.emit("collideActive",a,r,l),r.gameObject&&r.gameObject.emit("collideActive",r,a,l),t.Events.trigger(a,"onCollideActive",{pair:l}),t.Events.trigger(r,"onCollideActive",{pair:l}),a.onCollideActiveCallback&&a.onCollideActiveCallback(l),r.onCollideActiveCallback&&r.onCollideActiveCallback(l)})}),t.Events.on(this,"collisionEnd",function(s){s.pairs.map(function(l){var a=l.bodyA,r=l.bodyB;a.gameObject&&a.gameObject.emit("collideEnd",a,r,l),r.gameObject&&r.gameObject.emit("collideEnd",r,a,l),t.Events.trigger(a,"onCollideEnd",{pair:l}),t.Events.trigger(r,"onCollideEnd",{pair:l}),a.onCollideEndCallback&&a.onCollideEndCallback(l),r.onCollideEndCallback&&r.onCollideEndCallback(l)})})})}};o.exports=y},44097:(o,y,t)=>{var s=t(18171),l={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(a){a.after("Engine.update",function(){l.Engine.update(this)})},Engine:{update:function(a){for(var r=a.world,i=s.Composite.allBodies(r),n=s.Composite.allComposites(r),h=0;h<i.length;h+=1){var d=i[h];d.plugin.wrap&&l.Body.wrap(d,d.plugin.wrap)}for(h=0;h<n.length;h+=1){var u=n[h];u.plugin.wrap&&l.Composite.wrap(u,u.plugin.wrap)}}},Bounds:{wrap:function(a,r){var i=null,n=null;if(typeof r.min.x<"u"&&typeof r.max.x<"u"&&(a.min.x>r.max.x?i=r.min.x-a.max.x:a.max.x<r.min.x&&(i=r.max.x-a.min.x)),typeof r.min.y<"u"&&typeof r.max.y<"u"&&(a.min.y>r.max.y?n=r.min.y-a.max.y:a.max.y<r.min.y&&(n=r.max.y-a.min.y)),i!==null||n!==null)return{x:i||0,y:n||0}}},Body:{wrap:function(a,r){var i=l.Bounds.wrap(a.bounds,r);return i&&s.Body.translate(a,i),i}},Composite:{bounds:function(a){for(var r=s.Composite.allBodies(a),i=[],n=0;n<r.length;n+=1){var h=r[n];i.push(h.bounds.min,h.bounds.max)}return s.Bounds.create(i)},wrap:function(a,r){var i=l.Bounds.wrap(l.Composite.bounds(a),r);return i&&s.Composite.translate(a,i),i}}};o.exports=l},81084:o=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={decomp:N,quickDecomp:L,isSimple:O,removeCollinearPoints:z,removeDuplicatePoints:X,makeCCW:g};function y(G,k,M){M=M||0;var B=[0,0],U,W,K,q,_,rt,ft;return U=G[1][1]-G[0][1],W=G[0][0]-G[1][0],K=U*G[0][0]+W*G[0][1],q=k[1][1]-k[0][1],_=k[0][0]-k[1][0],rt=q*k[0][0]+_*k[0][1],ft=U*_-q*W,H(ft,0,M)||(B[0]=(_*K-W*rt)/ft,B[1]=(U*rt-q*K)/ft),B}function t(G,k,M,B){var U=k[0]-G[0],W=k[1]-G[1],K=B[0]-M[0],q=B[1]-M[1];if(K*W-q*U===0)return!1;var _=(U*(M[1]-G[1])+W*(G[0]-M[0]))/(K*W-q*U),rt=(K*(G[1]-M[1])+q*(M[0]-G[0]))/(q*U-K*W);return _>=0&&_<=1&&rt>=0&&rt<=1}function s(G,k,M){return(k[0]-G[0])*(M[1]-G[1])-(M[0]-G[0])*(k[1]-G[1])}function l(G,k,M){return s(G,k,M)>0}function a(G,k,M){return s(G,k,M)>=0}function r(G,k,M){return s(G,k,M)<0}function i(G,k,M){return s(G,k,M)<=0}var n=[],h=[];function d(G,k,M,B){if(B){var U=n,W=h;U[0]=k[0]-G[0],U[1]=k[1]-G[1],W[0]=M[0]-k[0],W[1]=M[1]-k[1];var K=U[0]*W[0]+U[1]*W[1],q=Math.sqrt(U[0]*U[0]+U[1]*U[1]),_=Math.sqrt(W[0]*W[0]+W[1]*W[1]),rt=Math.acos(K/(q*_));return rt<B}else return s(G,k,M)===0}function u(G,k){var M=k[0]-G[0],B=k[1]-G[1];return M*M+B*B}function p(G,k){var M=G.length;return G[k<0?k%M+M:k%M]}function m(G){G.length=0}function v(G,k,M,B){for(var U=M;U<B;U++)G.push(k[U])}function g(G){for(var k=0,M=G,B=1;B<G.length;++B)(M[B][1]<M[k][1]||M[B][1]===M[k][1]&&M[B][0]>M[k][0])&&(k=B);return l(p(G,k-1),p(G,k),p(G,k+1))?!1:(T(G),!0)}function T(G){for(var k=[],M=G.length,B=0;B!==M;B++)k.push(G.pop());for(var B=0;B!==M;B++)G[B]=k[B]}function w(G,k){return r(p(G,k-1),p(G,k),p(G,k+1))}var b=[],E=[];function A(G,k,M){var B,U,W=b,K=E;if(a(p(G,k+1),p(G,k),p(G,M))&&i(p(G,k-1),p(G,k),p(G,M)))return!1;U=u(p(G,k),p(G,M));for(var q=0;q!==G.length;++q)if(!((q+1)%G.length===k||q===k)&&a(p(G,k),p(G,M),p(G,q+1))&&i(p(G,k),p(G,M),p(G,q))&&(W[0]=p(G,k),W[1]=p(G,M),K[0]=p(G,q),K[1]=p(G,q+1),B=y(W,K),u(p(G,k),B)<U))return!1;return!0}function R(G,k,M){for(var B=0;B!==G.length;++B)if(!(B===k||B===M||(B+1)%G.length===k||(B+1)%G.length===M)&&t(p(G,k),p(G,M),p(G,B),p(G,B+1)))return!1;return!0}function I(G,k,M,B){var U=B||[];if(m(U),k<M)for(var W=k;W<=M;W++)U.push(G[W]);else{for(var W=0;W<=M;W++)U.push(G[W]);for(var W=k;W<G.length;W++)U.push(G[W])}return U}function P(G){for(var k=[],M=[],B=[],U=[],W=Number.MAX_VALUE,K=0;K<G.length;++K)if(w(G,K)){for(var q=0;q<G.length;++q)if(A(G,K,q)){M=P(I(G,K,q,U)),B=P(I(G,q,K,U));for(var _=0;_<B.length;_++)M.push(B[_]);M.length<W&&(k=M,W=M.length,k.push([p(G,K),p(G,q)]))}}return k}function N(G){var k=P(G);return k.length>0?F(G,k):[G]}function F(G,k){if(k.length===0)return[G];if(k instanceof Array&&k.length&&k[0]instanceof Array&&k[0].length===2&&k[0][0]instanceof Array){for(var M=[G],B=0;B<k.length;B++)for(var U=k[B],W=0;W<M.length;W++){var K=M[W],q=F(K,U);if(q){M.splice(W,1),M.push(q[0],q[1]);break}}return M}else{var U=k,B=G.indexOf(U[0]),W=G.indexOf(U[1]);return B!==-1&&W!==-1?[I(G,B,W),I(G,W,B)]:!1}}function O(G){var k=G,M;for(M=0;M<k.length-1;M++)for(var B=0;B<M-1;B++)if(t(k[M],k[M+1],k[B],k[B+1]))return!1;for(M=1;M<k.length-2;M++)if(t(k[0],k[k.length-1],k[M],k[M+1]))return!1;return!0}function D(G,k,M,B,U){U=U||0;var W=k[1]-G[1],K=G[0]-k[0],q=W*G[0]+K*G[1],_=B[1]-M[1],rt=M[0]-B[0],ft=_*M[0]+rt*M[1],mt=W*rt-_*K;return H(mt,0,U)?[0,0]:[(rt*q-K*ft)/mt,(W*ft-_*q)/mt]}function L(G,k,M,B,U,W,K){W=W||100,K=K||0,U=U||25,k=typeof k<"u"?k:[],M=M||[],B=B||[];var q=[0,0],_=[0,0],rt=[0,0],ft=0,mt=0,vt=0,yt=0,xt=0,It=0,$t=0,Zt=[],Bt=[],At=G,kt=G;if(kt.length<3)return k;if(K++,K>W)return console.warn("quickDecomp: max level ("+W+") reached."),k;for(var Ut=0;Ut<G.length;++Ut)if(w(At,Ut)){M.push(At[Ut]),ft=mt=Number.MAX_VALUE;for(var ee=0;ee<G.length;++ee)l(p(At,Ut-1),p(At,Ut),p(At,ee))&&i(p(At,Ut-1),p(At,Ut),p(At,ee-1))&&(rt=D(p(At,Ut-1),p(At,Ut),p(At,ee),p(At,ee-1)),r(p(At,Ut+1),p(At,Ut),rt)&&(vt=u(At[Ut],rt),vt<mt&&(mt=vt,_=rt,It=ee))),l(p(At,Ut+1),p(At,Ut),p(At,ee+1))&&i(p(At,Ut+1),p(At,Ut),p(At,ee))&&(rt=D(p(At,Ut+1),p(At,Ut),p(At,ee),p(At,ee+1)),l(p(At,Ut-1),p(At,Ut),rt)&&(vt=u(At[Ut],rt),vt<ft&&(ft=vt,q=rt,xt=ee)));if(It===(xt+1)%G.length)rt[0]=(_[0]+q[0])/2,rt[1]=(_[1]+q[1])/2,B.push(rt),Ut<xt?(v(Zt,At,Ut,xt+1),Zt.push(rt),Bt.push(rt),It!==0&&v(Bt,At,It,At.length),v(Bt,At,0,Ut+1)):(Ut!==0&&v(Zt,At,Ut,At.length),v(Zt,At,0,xt+1),Zt.push(rt),Bt.push(rt),v(Bt,At,It,Ut+1));else{if(It>xt&&(xt+=G.length),yt=Number.MAX_VALUE,xt<It)return k;for(var ee=It;ee<=xt;++ee)a(p(At,Ut-1),p(At,Ut),p(At,ee))&&i(p(At,Ut+1),p(At,Ut),p(At,ee))&&(vt=u(p(At,Ut),p(At,ee)),vt<yt&&R(At,Ut,ee)&&(yt=vt,$t=ee%G.length));Ut<$t?(v(Zt,At,Ut,$t+1),$t!==0&&v(Bt,At,$t,kt.length),v(Bt,At,0,Ut+1)):(Ut!==0&&v(Zt,At,Ut,kt.length),v(Zt,At,0,$t+1),v(Bt,At,$t,Ut+1))}return Zt.length<Bt.length?(L(Zt,k,M,B,U,W,K),L(Bt,k,M,B,U,W,K)):(L(Bt,k,M,B,U,W,K),L(Zt,k,M,B,U,W,K)),k}return k.push(G),k}function z(G,k){for(var M=0,B=G.length-1;G.length>3&&B>=0;--B)d(p(G,B-1),p(G,B),p(G,B+1),k)&&(G.splice(B%G.length,1),M++);return M}function X(G,k){for(var M=G.length-1;M>=1;--M)for(var B=G[M],U=M-1;U>=0;--U)if(J(B,G[U],k)){G.splice(M,1);continue}}function H(G,k,M){return M=M||0,Math.abs(G-k)<=M}function J(G,k,M){return H(G[0],k[0],M)&&H(G[1],k[1],M)}},88257:(o,y,t)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(56694),l=new s({initialize:function(r){this.pluginManager=r,this.game=r.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=l},18360:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};o.exports=y},91963:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={},t={},s={};s.register=function(l,a,r,i){i===void 0&&(i=!1),y[l]={plugin:a,mapping:r,custom:i}},s.registerCustom=function(l,a,r,i){t[l]={plugin:a,mapping:r,data:i}},s.hasCore=function(l){return y.hasOwnProperty(l)},s.hasCustom=function(l){return t.hasOwnProperty(l)},s.getCore=function(l){return y[l]},s.getCustom=function(l){return t[l]},s.getCustomClass=function(l){return t.hasOwnProperty(l)?t[l].plugin:null},s.remove=function(l){y.hasOwnProperty(l)&&delete y[l]},s.removeCustom=function(l){t.hasOwnProperty(l)&&delete t[l]},s.destroyCorePlugins=function(){for(var l in y)y.hasOwnProperty(l)&&delete y[l]},s.destroyCustomPlugins=function(){for(var l in t)t.hasOwnProperty(l)&&delete t[l]},o.exports=s},49274:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(97081),a=t(6659),r=t(76846),i=t(99325),n=t(61286),h=t(72632),d=t(91963),u=t(66458),p=new s({Extends:a,initialize:function(v){a.call(this),this.game=v,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],v.isBooted?this.boot():v.events.once(l.BOOT,this.boot,this)},boot:function(){var m,v,g,T,w,b,E,A=this.game.config,R=A.installGlobalPlugins;for(R=R.concat(this._pendingGlobal),m=0;m<R.length;m++)v=R[m],g=h(v,"key",null),T=h(v,"plugin",null),w=h(v,"start",!1),b=h(v,"mapping",null),E=h(v,"data",null),g&&(T?this.install(g,T,w,b,E):console.warn("Missing `plugin` for key: "+g));for(R=A.installScenePlugins,R=R.concat(this._pendingScene),m=0;m<R.length;m++)v=R[m],g=h(v,"key",null),T=h(v,"plugin",null),b=h(v,"mapping",null),g&&(T?this.installScenePlugin(g,T,b):console.warn("Missing `plugin` for key: "+g));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(l.DESTROY,this.destroy,this)},addToScene:function(m,v,g){var T,w,b,E=this.game,A=m.scene,R=m.settings.map,I=m.settings.isBooted;for(T=0;T<v.length;T++)w=v[T],E[w]?(m[w]=E[w],R.hasOwnProperty(w)&&(A[R[w]]=m[w])):w==="game"&&R.hasOwnProperty(w)&&(A[R[w]]=E);for(var P=0;P<g.length;P++)for(b=g[P],T=0;T<b.length;T++)if(w=b[T],!!d.hasCore(w)){var N=d.getCore(w),F=N.mapping,O=new N.plugin(A,this,F);m[F]=O,N.custom?A[F]=O:R.hasOwnProperty(F)&&(A[R[F]]=O),I&&O.boot()}for(b=this.plugins,T=0;T<b.length;T++){var D=b[T];D.mapping&&(A[D.mapping]=D.plugin)}},getDefaultScenePlugins:function(){var m=this.game.config.defaultPlugins;return m=m.concat(this.scenePlugins),m},installScenePlugin:function(m,v,g,T,w){if(w===void 0&&(w=!1),typeof v!="function"){console.warn("Invalid Scene Plugin: "+m);return}if(d.hasCore(m)||d.register(m,v,g,!0),this.scenePlugins.indexOf(m)===-1)this.scenePlugins.push(m);else if(!w&&d.hasCore(m)){console.warn("Scene Plugin key in use: "+m);return}if(T){var b=new v(T,this,m);T.sys[m]=b,g&&g!==""&&(T[g]=b),b.boot()}},install:function(m,v,g,T,w){if(g===void 0&&(g=!1),T===void 0&&(T=null),w===void 0&&(w=null),typeof v!="function")return console.warn("Invalid Plugin: "+m),null;if(d.hasCustom(m))return console.warn("Plugin key in use: "+m),null;if(T!==null&&(g=!0),!this.game.isBooted)this._pendingGlobal.push({key:m,plugin:v,start:g,mapping:T,data:w});else if(d.registerCustom(m,v,T,w),g)return this.start(m);return null},getIndex:function(m){for(var v=this.plugins,g=0;g<v.length;g++){var T=v[g];if(T.key===m)return g}return-1},getEntry:function(m){var v=this.getIndex(m);if(v!==-1)return this.plugins[v]},isActive:function(m){var v=this.getEntry(m);return v&&v.active},start:function(m,v){v===void 0&&(v=m);var g=this.getEntry(v);return g&&!g.active?(g.active=!0,g.plugin.start()):g||(g=this.createEntry(m,v)),g?g.plugin:null},createEntry:function(m,v){var g=d.getCustom(m);if(g){var T=new g.plugin(this);g={key:v,plugin:T,active:!0,mapping:g.mapping,data:g.data},this.plugins.push(g),T.init(g.data),T.start()}return g},stop:function(m){var v=this.getEntry(m);return v&&v.active&&(v.active=!1,v.plugin.stop()),this},get:function(m,v){v===void 0&&(v=!0);var g=this.getEntry(m);if(g)return g.plugin;var T=this.getClass(m);return T&&v?(g=this.createEntry(m,m),g?g.plugin:null):T||null},getClass:function(m){return d.getCustomClass(m)},removeGlobalPlugin:function(m){var v=this.getEntry(m);v&&u(this.plugins,v),d.removeCustom(m)},removeScenePlugin:function(m){u(this.scenePlugins,m),d.remove(m)},registerGameObject:function(m,v,g){return v&&n.register(m,v),g&&i.register(m,g),this},removeGameObject:function(m,v,g){return v===void 0&&(v=!0),g===void 0&&(g=!0),v&&n.remove(m),g&&i.remove(m),this},registerFileType:function(m,v,g){r.register(m,v),g&&g.sys.load&&(g.sys.load[m]=v)},destroy:function(){for(var m=0;m<this.plugins.length;m++)this.plugins[m].plugin.destroy();d.destroyCustomPlugins(),this.game.noReturn&&d.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});o.exports=p},39283:(o,y,t)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(88257),l=t(56694),a=t(7599),r=new l({Extends:s,initialize:function(n,h,d){s.call(this,h),this.scene=n,this.systems=n.sys,this.pluginKey=d,n.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=r},45615:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BasePlugin:t(88257),DefaultPlugins:t(18360),PluginCache:t(91963),PluginManager:t(49274),ScenePlugin:t(39283)}},75205:()=>{HTMLVideoElement&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(o){const y=performance.now(),t=this.getVideoPlaybackQuality(),s=this.mozPresentedFrames||this.mozPaintedFrames||t.totalVideoFrames-t.droppedVideoFrames,l=(a,r)=>{const i=this.getVideoPlaybackQuality(),n=this.mozPresentedFrames||this.mozPaintedFrames||i.totalVideoFrames-i.droppedVideoFrames;if(n>s){const h=this.mozFrameDelay||i.totalFrameDelay-t.totalFrameDelay||0,d=r-a;o(r,{presentationTime:r+h*1e3,expectedDisplayTime:r+d,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+d/1e3,presentedFrames:n,processingDuration:h}),delete this._rvfcpolyfillmap[y]}else this._rvfcpolyfillmap[y]=requestAnimationFrame(h=>l(r,h))};return this._rvfcpolyfillmap[y]=requestAnimationFrame(a=>l(y,a)),y},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(o){cancelAnimationFrame(this._rvfcpolyfillmap[o]),delete this._rvfcpolyfillmap[o]})},95723:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={DEFAULT:0,LINEAR:0,NEAREST:1};o.exports=y},91135:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89787),l=t(61840),a=t(56694),r=t(86459),i=t(6659),n=t(81044),h=t(32834),d=t(40444),u=t(38203),p=t(69360),m=new a({Extends:i,initialize:function(g){i.call(this);var T=g.config;this.config={clearBeforeRender:T.clearBeforeRender,backgroundColor:T.backgroundColor,antialias:T.antialias,roundPixels:T.roundPixels},this.game=g,this.type=r.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=g.canvas;var w={alpha:g.config.transparent,desynchronized:g.config.desynchronized,willReadFrequently:!1};this.gameContext=T.context?T.context:this.gameCanvas.getContext("2d",w),this.currentContext=this.gameContext,this.antialias=g.config.antialias,this.blendModes=h(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(u.READY,this.boot,this)},boot:function(){var v=this.game,g=v.scale.baseSize;this.width=g.width,this.height=g.height,this.isBooted=!0,v.scale.on(d.RESIZE,this.onResize,this),this.resize(g.width,g.height)},onResize:function(v,g){(g.width!==this.width||g.height!==this.height)&&this.resize(g.width,g.height)},resize:function(v,g){this.width=v,this.height=g,this.emit(n.RESIZE,v,g)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(v){return this.currentContext.globalCompositeOperation=v,this},setContext:function(v){return this.currentContext=v||this.gameContext,this},setAlpha:function(v){return this.currentContext.globalAlpha=v,this},preRender:function(){var v=this.gameContext,g=this.config,T=this.width,w=this.height;v.globalAlpha=1,v.globalCompositeOperation="source-over",v.setTransform(1,0,0,1,0,0),g.clearBeforeRender&&(v.clearRect(0,0,T,w),g.transparent||(v.fillStyle=g.backgroundColor.rgba,v.fillRect(0,0,T,w))),v.save(),this.drawCount=0,this.emit(n.PRE_RENDER)},render:function(v,g,T){var w=g.length;this.emit(n.RENDER,v,T);var b=T.x,E=T.y,A=T.width,R=T.height,I=T.renderToTexture?T.context:v.sys.context;I.save(),this.game.scene.customViewports&&(I.beginPath(),I.rect(b,E,A,R),I.clip()),T.emit(s.PRE_RENDER,T),this.currentContext=I;var P=T.mask;P&&P.preRenderCanvas(this,null,T._maskCamera),T.transparent||(I.fillStyle=T.backgroundColor.rgba,I.fillRect(b,E,A,R)),I.globalAlpha=T.alpha,I.globalCompositeOperation="source-over",this.drawCount+=w,T.renderToTexture&&T.emit(s.PRE_RENDER,T),T.matrix.copyToContext(I);for(var N=0;N<w;N++){var F=g[N];F.mask&&F.mask.preRenderCanvas(this,F,T),F.renderCanvas(this,F,T),F.mask&&F.mask.postRenderCanvas(this,F,T)}I.setTransform(1,0,0,1,0,0),I.globalCompositeOperation="source-over",I.globalAlpha=1,T.flashEffect.postRenderCanvas(I),T.fadeEffect.postRenderCanvas(I),T.dirty=!1,P&&P.postRenderCanvas(this),I.restore(),T.renderToTexture&&(T.emit(s.POST_RENDER,T),T.renderToGame&&v.sys.context.drawImage(T.canvas,b,E)),T.emit(s.POST_RENDER,T)},postRender:function(){var v=this.gameContext;v.restore(),this.emit(n.POST_RENDER);var g=this.snapshotState;g.callback&&(l(this.gameCanvas,g),g.callback=null)},snapshotCanvas:function(v,g,T,w,b,E,A,R,I){T===void 0&&(T=!1),this.snapshotArea(w,b,E,A,g,R,I);var P=this.snapshotState;return P.getPixel=T,l(v,P),P.callback=null,this},snapshot:function(v,g,T){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,v,g,T)},snapshotArea:function(v,g,T,w,b,E,A){var R=this.snapshotState;return R.callback=b,R.type=E,R.encoder=A,R.getPixel=!1,R.x=v,R.y=g,R.width=Math.min(T,this.gameCanvas.width),R.height=Math.min(w,this.gameCanvas.height),this},snapshotPixel:function(v,g,T){return this.snapshotArea(v,g,1,1,T),this.snapshotState.getPixel=!0,this},batchSprite:function(v,g,T,w){var b=T.alpha*v.alpha;if(b!==0){var E=this.currentContext,A=this._tempMatrix1,R=this._tempMatrix2,I=g.canvasData,P=I.x,N=I.y,F=g.cutWidth,O=g.cutHeight,D=g.customPivot,L=g.source.resolution,z=v.displayOriginX,X=v.displayOriginY,H=-z+g.x,J=-X+g.y;if(v.isCropped){var G=v._crop;(G.flipX!==v.flipX||G.flipY!==v.flipY)&&g.updateCropUVs(G,v.flipX,v.flipY),F=G.cw,O=G.ch,P=G.cx,N=G.cy,H=-z+G.x,J=-X+G.y,v.flipX&&(H>=0?H=-(H+F):H<0&&(H=Math.abs(H)-F)),v.flipY&&(J>=0?J=-(J+O):J<0&&(J=Math.abs(J)-O))}var k=1,M=1;v.flipX&&(D||(H+=-g.realWidth+z*2),k=-1),v.flipY&&(D||(J+=-g.realHeight+X*2),M=-1);var B=v.x,U=v.y;R.applyITRS(B,U,v.rotation,v.scaleX*k,v.scaleY*M),A.copyFrom(T.matrix),w?(A.multiplyWithOffset(w,-T.scrollX*v.scrollFactorX,-T.scrollY*v.scrollFactorY),R.e=B,R.f=U):(R.e-=T.scrollX*v.scrollFactorX,R.f-=T.scrollY*v.scrollFactorY),A.multiply(R),T.roundPixels&&(A.e=Math.round(A.e),A.f=Math.round(A.f)),E.save(),A.setToContext(E),E.globalCompositeOperation=this.blendModes[v.blendMode],E.globalAlpha=b,E.imageSmoothingEnabled=!g.source.scaleMode,v.mask&&v.mask.preRenderCanvas(this,v,T),F>0&&O>0&&(T.roundPixels?E.drawImage(g.source.image,P,N,F,O,Math.round(H),Math.round(J),Math.round(F/L),Math.round(O/L)):E.drawImage(g.source.image,P,N,F,O,H,J,F/L,O/L)),v.mask&&v.mask.postRenderCanvas(this,v,T),E.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});o.exports=m},6046:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasRenderer:t(91135),GetBlendModes:t(32834),SetTransform:t(49584)}},32834:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(98581),a=function(){var r=[],i=l.supportNewBlendModes,n="source-over";return r[s.NORMAL]=n,r[s.ADD]="lighter",r[s.MULTIPLY]=i?"multiply":n,r[s.SCREEN]=i?"screen":n,r[s.OVERLAY]=i?"overlay":n,r[s.DARKEN]=i?"darken":n,r[s.LIGHTEN]=i?"lighten":n,r[s.COLOR_DODGE]=i?"color-dodge":n,r[s.COLOR_BURN]=i?"color-burn":n,r[s.HARD_LIGHT]=i?"hard-light":n,r[s.SOFT_LIGHT]=i?"soft-light":n,r[s.DIFFERENCE]=i?"difference":n,r[s.EXCLUSION]=i?"exclusion":n,r[s.HUE]=i?"hue":n,r[s.SATURATION]=i?"saturation":n,r[s.COLOR]=i?"color":n,r[s.LUMINOSITY]=i?"luminosity":n,r[s.ERASE]="destination-out",r[s.SOURCE_IN]="source-in",r[s.SOURCE_OUT]="source-out",r[s.SOURCE_ATOP]="source-atop",r[s.DESTINATION_OVER]="destination-over",r[s.DESTINATION_IN]="destination-in",r[s.DESTINATION_OUT]="destination-out",r[s.DESTINATION_ATOP]="destination-atop",r[s.LIGHTER]="lighter",r[s.COPY]="copy",r[s.XOR]="xor",r};o.exports=a},49584:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(73329),l=function(a,r,i,n,h){var d=n.alpha*i.alpha;if(d<=0)return!1;var u=s(i,n,h).calc;return r.globalCompositeOperation=a.blendModes[i.blendMode],r.globalAlpha=d,r.save(),u.setToContext(r),r.imageSmoothingEnabled=i.frame?!i.frame.source.scaleMode:a.antialias,!0};o.exports=l},70936:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},99298:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},7743:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"},99519:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"},81044:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={POST_RENDER:t(70936),PRE_RENDER:t(99298),RENDER:t(7743),RESIZE:t(99519)}},42069:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Canvas:t(6046),Events:t(81044),Snapshot:t(95528),WebGL:t(55478)}},61840:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(27119),a=t(72632),r=function(i,n){var h=a(n,"callback"),d=a(n,"type","image/png"),u=a(n,"encoder",.92),p=Math.abs(Math.round(a(n,"x",0))),m=Math.abs(Math.round(a(n,"y",0))),v=Math.floor(a(n,"width",i.width)),g=Math.floor(a(n,"height",i.height)),T=a(n,"getPixel",!1);if(T){var w=i.getContext("2d",{willReadFrequently:!1}),b=w.getImageData(p,m,1,1),E=b.data;h.call(null,new l(E[0],E[1],E[2],E[3]))}else if(p!==0||m!==0||v!==i.width||g!==i.height){var A=s.createWebGL(this,v,g),R=A.getContext("2d",{willReadFrequently:!0});v>0&&g>0&&R.drawImage(i,p,m,v,g,0,0,v,g);var I=new Image;I.onerror=function(){h.call(null),s.remove(A)},I.onload=function(){h.call(null,I),s.remove(A)},I.src=A.toDataURL(d,u)}else{var P=new Image;P.onerror=function(){h.call(null)},P.onload=function(){h.call(null,P)},P.src=i.toDataURL(d,u)}};o.exports=r},1217:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(27119),a=t(72632),r=function(i,n){var h=i,d=a(n,"callback"),u=a(n,"type","image/png"),p=a(n,"encoder",.92),m=Math.abs(Math.round(a(n,"x",0))),v=Math.abs(Math.round(a(n,"y",0))),g=a(n,"getPixel",!1),T=a(n,"isFramebuffer",!1),w=T?a(n,"bufferWidth",1):h.drawingBufferWidth,b=T?a(n,"bufferHeight",1):h.drawingBufferHeight;if(g){var E=new Uint8Array(4),A=T?v:b-v;h.readPixels(m,A,1,1,h.RGBA,h.UNSIGNED_BYTE,E),d.call(null,new l(E[0],E[1],E[2],E[3]))}else{var R=Math.floor(a(n,"width",w)),I=Math.floor(a(n,"height",b)),P=R*I*4,N=new Uint8Array(P);h.readPixels(m,b-v-I,R,I,h.RGBA,h.UNSIGNED_BYTE,N);for(var F=s.createWebGL(this,R,I),O=F.getContext("2d",{willReadFrequently:!0}),D=O.getImageData(0,0,R,I),L=D.data,z=0;z<I;z++)for(var X=0;X<R;X++){var H=((I-z-1)*R+X)*4,J=T?P-(z*R+(R-X))*4:(z*R+X)*4;L[J+0]=N[H+0],L[J+1]=N[H+1],L[J+2]=N[H+2],L[J+3]=N[H+3]}O.putImageData(D,0,0);var G=new Image;G.onerror=function(){d.call(null),s.remove(F)},G.onload=function(){d.call(null,G),s.remove(F)},G.src=F.toDataURL(u,p)}};o.exports=r},95528:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Canvas:t(61840),WebGL:t(1217)}},35217:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(65641),a=t(33885),r=t(77290),i=t(72632),n=t(37410),h=t(82127),d=t(5583),u=t(58136),p=t(47406),m=t(81828),v=t(66901),g=t(71264),T=t(77310),w=t(10919),b=t(21213),E=t(51212),A=t(60848),R=new s({initialize:function(P){this.game=P.game,this.renderer=P,this.classes=new a([[l.UTILITY_PIPELINE,A],[l.MULTI_PIPELINE,T],[l.BITMAPMASK_PIPELINE,d],[l.SINGLE_PIPELINE,E],[l.ROPE_PIPELINE,b],[l.LIGHT_PIPELINE,v],[l.POINTLIGHT_PIPELINE,w],[l.MOBILE_PIPELINE,g]]),this.postPipelineClasses=new a,this.pipelines=new a,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(I,P,N){var F=this.renderer,O=this.renderTargets;this.frameInc=Math.floor(i(I,"frameInc",32));var D=F.width,L=F.height,z=this.game.config.disablePreFX,X=this.game.config.disablePostFX;if(X||this.postPipelineClasses.setAll([[String(p.BARREL),u.Barrel],[String(p.BLOOM),u.Bloom],[String(p.BLUR),u.Blur],[String(p.BOKEH),u.Bokeh],[String(p.CIRCLE),u.Circle],[String(p.COLOR_MATRIX),u.ColorMatrix],[String(p.DISPLACEMENT),u.Displacement],[String(p.GLOW),u.Glow],[String(p.GRADIENT),u.Gradient],[String(p.PIXELATE),u.Pixelate],[String(p.SHADOW),u.Shadow],[String(p.SHINE),u.Shine],[String(p.VIGNETTE),u.Vignette],[String(p.WIPE),u.Wipe]]),!z){this.classes.set(l.FX_PIPELINE,m);for(var H=Math.min(D,L),J=Math.ceil(H/this.frameInc),G=1;G<J;G++){var k=G*this.frameInc;O.push(new n(F,k,k)),O.push(new n(F,k,k)),O.push(new n(F,k,k)),this.maxDimension=k}O.push(new n(F,D,L,1,0,!0,!0)),O.push(new n(F,D,L,1,0,!0,!0)),O.push(new n(F,D,L,1,0,!0,!0))}var M,B,U=this,W=this.game;if(this.classes.each(function(q,_){M=U.add(q,new _({game:W})),q===l.UTILITY_PIPELINE&&(U.UTILITY_PIPELINE=M,U.fullFrame1=M.fullFrame1,U.fullFrame2=M.fullFrame2,U.halfFrame1=M.halfFrame1,U.halfFrame2=M.halfFrame2)}),this.MULTI_PIPELINE=this.get(l.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(l.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(l.MOBILE_PIPELINE),z||(this.FX_PIPELINE=this.get(l.FX_PIPELINE)),I)for(B in I){var K=I[B];M=new K(W),M.name=B,M.isPostFX?this.postPipelineClasses.set(B,K):this.has(B)||(this.classes.set(B,K),this.add(B,M))}this.default=this.get(P),N&&!r.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(I){var P=this.get(I);return P&&(this.default=P),P},add:function(I,P){if(P.isPostFX){console.warn(I+" is a Post Pipeline. Use `addPostPipeline` instead");return}var N=this.pipelines,F=this.renderer;return N.has(I)?console.warn("Pipeline exists: "+I):(P.name=I,P.manager=this,N.set(I,P)),P.hasBooted||P.boot(),F.width!==0&&F.height!==0&&!P.isPreFX&&P.resize(F.width,F.height),P},addPostPipeline:function(I,P){this.postPipelineClasses.has(I)||this.postPipelineClasses.set(I,P)},flush:function(){this.current&&this.current.flush()},has:function(I){var P=this.pipelines;return typeof I=="string"?P.has(I):!!P.contains(I)},get:function(I){var P=this.pipelines;if(typeof I=="string")return P.get(I);if(P.contains(I))return I},getPostPipeline:function(I,P,N){var F=this.postPipelineClasses,O,D="",L=typeof I;if(L==="string"||L==="number"?(O=F.get(I),D=I):L==="function"?(F.contains(I)&&(O=I),D=I.name):L==="object"&&(O=F.get(I.name),D=I.name),O){var z=new O(this.game,N);return z.name=D,P&&(z.gameObject=P),z}},remove:function(I,P,N){P===void 0&&(P=!0),N===void 0&&(N=!0),this.pipelines.delete(I),P&&this.classes.delete(I),N&&this.postPipelineClasses.delete(I)},set:function(I,P,N){if(!I.isPostFX)return this.isCurrent(I,N)||(this.flush(),this.current&&this.current.unbind(),this.current=I,I.bind(N)),I.updateProjectionMatrix(),I.onBind(P),I},preBatch:function(I){if(I.hasPostPipeline){this.flush();for(var P=I.postPipelines,N=P.length-1;N>=0;N--){var F=P[N];F.active&&F.preBatch(I)}}},postBatch:function(I){if(I.hasPostPipeline){this.flush();for(var P=I.postPipelines,N=0;N<P.length;N++){var F=P[N];F.active&&F.postBatch(I)}}},preBatchCamera:function(I){if(I.hasPostPipeline){this.flush();for(var P=I.postPipelines,N=P.length-1;N>=0;N--){var F=P[N];F.active&&F.preBatch(I)}}},postBatchCamera:function(I){if(I.hasPostPipeline){this.flush();for(var P=I.postPipelines,N=0;N<P.length;N++){var F=P[N];F.active&&F.postBatch(I)}}},isCurrent:function(I,P){var N=this.renderer,F=this.current;return F&&!P&&(P=F.currentShader),!(F!==I||P.program!==N.currentProgram)},copyFrame:function(I,P,N,F,O){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(I,P,N,F,O),this},copyToGame:function(I){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(I),this},drawFrame:function(I,P,N,F){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(I,P,N,F),this},blendFrames:function(I,P,N,F,O){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(I,P,N,F,O),this},blendFramesAdditive:function(I,P,N,F,O){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(I,P,N,F,O),this},clearFrame:function(I,P){return this.UTILITY_PIPELINE.clearFrame(I,P),this},blitFrame:function(I,P,N,F,O,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(I,P,N,F,O,D),this},copyFrameRect:function(I,P,N,F,O,D,L,z){return this.UTILITY_PIPELINE.copyFrameRect(I,P,N,F,O,D,L,z),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(I){return this.UTILITY_PIPELINE.bind(I)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(I){I===void 0&&this.previous&&(I=this.previous);var P=this.renderer,N=P.gl;N.disable(N.DEPTH_TEST),N.disable(N.CULL_FACE),P.hasActiveStencilMask()?N.clear(N.DEPTH_BUFFER_BIT):(N.disable(N.STENCIL_TEST),N.clear(N.DEPTH_BUFFER_BIT|N.STENCIL_BUFFER_BIT)),N.viewport(0,0,P.width,P.height),P.currentProgram=null,P.setBlendMode(0,!0);var F=P.vaoExtension;F&&F.bindVertexArrayOES(null);var O=this.pipelines.entries;for(var D in O)O[D].glReset=!0;I&&(this.current=I,I.rebind())},clear:function(){var I=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,I.currentProgram=null,I.setBlendMode(0,!0);var P=I.vaoExtension;P&&P.bindVertexArrayOES(null)},getRenderTarget:function(I){var P=this.renderTargets,N=3;if(I>this.maxDimension)return this.targetIndex=P.length-N,P[this.targetIndex];var F=(h(I,this.frameInc,0,!0)-1)*N;return this.targetIndex=F,P[F]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});o.exports=R},37410:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(81044),a=new s({initialize:function(i,n,h,d,u,p,m,v,g){d===void 0&&(d=1),u===void 0&&(u=0),p===void 0&&(p=!0),m===void 0&&(m=!1),v===void 0&&(v=!0),g===void 0&&(g=!0),this.renderer=i,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=d,this.minFilter=u,this.autoClear=p,this.autoResize=!0,this.hasDepthBuffer=v,this.forceClamp=g,this.resize(n,h),m?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(r){return r&&!this.autoResize?(this.renderer.on(l.RESIZE,this.resize,this),this.autoResize=!0):!r&&this.autoResize&&(this.renderer.off(l.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(r,i){if(r=Math.round(r*this.scale),i=Math.round(i*this.scale),r<=0&&(r=1),i<=0&&(i=1),this.autoResize&&(r!==this.width||i!==this.height)){var n=this.renderer;n.deleteFramebuffer(this.framebuffer),n.deleteTexture(this.texture),this.texture=n.createTextureFromSource(null,r,i,this.minFilter,this.forceClamp),this.framebuffer=n.createFramebuffer(r,i,this.texture,this.hasDepthBuffer),this.width=r,this.height=i}return this},willResize:function(r,i){return r=Math.round(r*this.scale),i=Math.round(i*this.scale),r<=0&&(r=1),i<=0&&(i=1),r!==this.width||i!==this.height},bind:function(r,i,n){r===void 0&&(r=!1);var h=this.renderer;if(r&&h.flush(),i&&n&&this.resize(i,n),h.pushFramebuffer(this.framebuffer,!1,!1),r&&this.adjustViewport(),this.autoClear){var d=this.renderer.gl;d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT)}h.clearStencilMask()},adjustViewport:function(){var r=this.renderer.gl;r.viewport(0,0,this.width,this.height),r.disable(r.SCISSOR_TEST)},clear:function(){var r=this.renderer,i=r.gl;r.pushFramebuffer(this.framebuffer),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),r.popFramebuffer(),r.resetScissor()},unbind:function(r){r===void 0&&(r=!1);var i=this.renderer;return r&&i.flush(),i.popFramebuffer()},destroy:function(){var r=this.renderer;r.off(l.RESIZE,this.resize,this),r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});o.exports=a},75512:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={getTintFromFloats:function(y,t,s,l){var a=(y*255|0)&255,r=(t*255|0)&255,i=(s*255|0)&255,n=(l*255|0)&255;return(n<<24|a<<16|r<<8|i)>>>0},getTintAppendFloatAlpha:function(y,t){var s=(t*255|0)&255;return(s<<24|y)>>>0},getTintAppendFloatAlphaAndSwap:function(y,t){var s=(y>>16|0)&255,l=(y>>8|0)&255,a=(y|0)&255,r=(t*255|0)&255;return(r<<24|a<<16|l<<8|s)>>>0},getFloatsFromUintRGB:function(y){var t=(y>>16|0)&255,s=(y>>8|0)&255,l=(y|0)&255;return[t/255,s/255,l/255]},checkShaderMax:function(y,t){var s=Math.min(16,y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS));return!t||t===-1?s:Math.min(s,t)},parseFragmentShaderMaxTextures:function(y,t){if(!y)return"";for(var s="",l=0;l<t;l++)l>0&&(s+=`
	else `),l<t-1&&(s+="if (outTexId < "+l+".5)"),s+=`
	{`,s+=`
		texture = texture2D(uMainSampler[`+l+"], outTexCoord);",s+=`
	}`;return y=y.replace(/%count%/gi,t.toString()),y.replace(/%forloop%/gi,s)},setGlowQuality:function(y,t,s,l){return s===void 0&&(s=t.config.glowFXQuality),l===void 0&&(l=t.config.glowFXDistance),y=y.replace(/__SIZE__/gi,(1/s/l).toFixed(7)),y=y.replace(/__DIST__/gi,l.toFixed(0)+".0"),y}}},44775:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(28699),a=t(6659),r=t(18970),i=t(72632),n=t(16650),h=t(81044),d=t(37410),u=t(75512),p=t(71305),m=new s({Extends:a,initialize:function(g){a.call(this);var T=g.game,w=T.renderer,b=w.gl;this.name=i(g,"name","WebGLPipeline"),this.game=T,this.renderer=w,this.manager,this.gl=b,this.view=T.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=i(g,"topology",b.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=i(g,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=g,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var v,g=this.gl,T=this.config,w=this.renderer;this.isPostFX||(this.projectionMatrix=new n().identity());var b=this.renderTargets,E=i(T,"renderTarget",!1);typeof E=="boolean"&&E&&(E=1);var A=w.width,R=w.height;if(typeof E=="number")for(v=0;v<E;v++)b.push(new d(w,A,R,1,0,!0));else if(Array.isArray(E))for(v=0;v<E.length;v++){var I=i(E[v],"scale",1),P=i(E[v],"minFilter",0),N=i(E[v],"autoClear",1),F=i(E[v],"width",null),O=i(E[v],"height",F);F?b.push(new d(w,F,O,1,P,N)):b.push(new d(w,A,R,I,P,N))}b.length&&(this.currentRenderTarget=b[0]),this.setShadersFromConfig(T);var D=this.shaders,L=0;for(v=0;v<D.length;v++)D[v].vertexSize>L&&(L=D[v].vertexSize);var z=i(T,"batchSize",w.config.batchSize);this.vertexCapacity=z*6;var X=new ArrayBuffer(this.vertexCapacity*L);this.vertexData=X,this.bytes=new Uint8Array(X),this.vertexViewF32=new Float32Array(X),this.vertexViewU32=new Uint32Array(X);var H=i(T,"vertices",null);for(H?(this.vertexViewF32.set(H),this.vertexBuffer=w.createVertexBuffer(X,g.STATIC_DRAW)):this.vertexBuffer=w.createVertexBuffer(X.byteLength,g.DYNAMIC_DRAW),this.setVertexBuffer(),v=D.length-1;v>=0;v--)D[v].rebind();this.hasBooted=!0,w.on(h.RESIZE,this.resize,this),w.on(h.PRE_RENDER,this.onPreRender,this),w.on(h.RENDER,this.onRender,this),w.on(h.POST_RENDER,this.onPostRender,this),this.emit(r.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(v,g,T){var w=this.renderer;if(v!==this.currentShader||w.currentProgram!==this.currentShader.program){this.flush();var b=this.setVertexBuffer(T);b&&!g&&(g=!0),v.bind(g,!1),this.currentShader=v}return this},getShaderByName:function(v){for(var g=this.shaders,T=0;T<g.length;T++)if(g[T].name===v)return g[T]},setShadersFromConfig:function(v){var g,T=this.shaders,w=this.renderer;for(g=0;g<T.length;g++)T[g].destroy();var b="vertShader",E="fragShader",A="attributes",R=i(v,b,null),I=u.parseFragmentShaderMaxTextures(i(v,E,null),w.maxTextures),P=i(v,A,null),N=i(v,"shaders",[]),F=N.length;if(F===0)R&&I&&(this.shaders=[new p(this,"default",R,I,l(P))]);else{var O=[];for(g=0;g<F;g++){var D=N[g],L,z,X,H;if(typeof D=="string"?(L="default",z=R,X=u.parseFragmentShaderMaxTextures(D,w.maxTextures),H=P):(L=i(D,"name","default"),z=i(D,b,R),X=u.parseFragmentShaderMaxTextures(i(D,E,I),w.maxTextures),H=i(D,A,P)),L==="default"){var J=X.split(`
`),G=J[0].trim();G.indexOf("#define SHADER_NAME")>-1&&(L=G.substring(20))}z&&X&&O.push(new p(this,L,z,X,l(H)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(v){return this.currentBatch={start:this.vertexCount,count:0,texture:[v],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=v,this.batch.push(this.currentBatch),0},addTextureToBatch:function(v){var g=this.currentBatch;g&&(g.texture.push(v),g.unit++,g.maxUnit++)},pushBatch:function(v){if(!this.currentBatch||this.forceZero&&v!==this.currentTexture)return this.createBatch(v);if(v===this.currentTexture)return this.currentUnit;var g=this.currentBatch,T=g.texture.indexOf(v);return T===-1?g.texture.length===this.renderer.maxTextures?this.createBatch(v):(g.unit++,g.maxUnit++,g.texture.push(v),this.currentUnit=g.unit,this.currentTexture=v,g.unit):(this.currentUnit=T,this.currentTexture=v,T)},setGameObject:function(v,g){return g===void 0&&(g=v.frame),this.pushBatch(g.source.glTexture)},shouldFlush:function(v){return v===void 0&&(v=0),this.vertexCount+v>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(v,g){(v!==this.width||g!==this.height)&&this.flush(),this.width=v,this.height=g;for(var T=this.renderTargets,w=0;w<T.length;w++)T[w].resize(v,g);return this.setProjectionMatrix(v,g),this.emit(r.RESIZE,v,g,this),this.onResize(v,g),this},setProjectionMatrix:function(v,g){var T=this.projectionMatrix;if(!T)return this;this.projectionWidth=v,this.projectionHeight=g,T.ortho(0,v,g,0,-1e3,1e3);for(var w=this.shaders,b="uProjectionMatrix",E=0;E<w.length;E++){var A=w[E];A.hasUniform(b)&&(A.resetUniform(b),A.setMatrix4fv(b,!1,T.val,A))}return this},flipProjectionMatrix:function(v){v===void 0&&(v=!0);var g=this.projectionMatrix;if(!g)return this;var T=this.projectionWidth,w=this.projectionHeight;v?g.ortho(0,T,0,w,-1e3,1e3):g.ortho(0,T,w,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,g.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var v=this.renderer.projectionWidth,g=this.renderer.projectionHeight;(this.projectionWidth!==v||this.projectionHeight!==g)&&this.setProjectionMatrix(v,g)}},bind:function(v){if(v===void 0&&(v=this.currentShader),this.glReset)return this.rebind(v);var g=!1,T=this.gl;return T.getParameter(T.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(T.bindBuffer(T.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,g=!0),v.bind(g),this.currentShader=v,this.activeTextures.length=0,this.emit(r.BIND,this,v),this.onActive(v),this},rebind:function(v){this.activeBuffer=null,this.setVertexBuffer();for(var g=this.shaders,T=g.length-1;T>=0;T--){var w=g[T].rebind();(!v||w===v)&&(this.currentShader=w)}return this.activeTextures.length=0,this.emit(r.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(v){if(v===void 0&&(v=this.vertexBuffer),v!==this.activeBuffer){var g=this.gl;return this.gl.bindBuffer(g.ARRAY_BUFFER,v),this.activeBuffer=v,!0}return!1},preBatch:function(v){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(v),this},postBatch:function(v){return this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(v){if(v===void 0&&(v=!1),this.vertexCount>0){this.emit(r.BEFORE_FLUSH,this,v),this.onBeforeFlush(v);var g=this.gl,T=this.vertexCount,w=this.currentShader.vertexSize,b=this.topology;if(this.active){this.setVertexBuffer(),T===this.vertexCapacity?g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.DYNAMIC_DRAW):g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,T*w));var E,A,R,I=this.batch,P=this.activeTextures;if(this.forceZero)for(P[0]||g.activeTexture(g.TEXTURE0),E=0;E<I.length;E++)A=I[E],R=A.texture[0],P[0]!==R&&(g.bindTexture(g.TEXTURE_2D,R),P[0]=R),g.drawArrays(b,A.start,A.count);else for(E=0;E<I.length;E++){A=I[E];for(var N=0;N<=A.maxUnit;N++)R=A.texture[N],P[N]!==R&&(g.activeTexture(g.TEXTURE0+N),g.bindTexture(g.TEXTURE_2D,R),P[N]=R);g.drawArrays(b,A.start,A.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(r.AFTER_FLUSH,this,v),this.onAfterFlush(v)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(v,g,T,w,b,E,A){var R=this.vertexViewF32,I=this.vertexViewU32,P=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++P]=v,R[++P]=g,R[++P]=T,R[++P]=w,R[++P]=b,R[++P]=E,I[++P]=A,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(v,g,T,w,b,E,A,R,I,P,N,F,O,D,L,z,X,H,J,G){G===void 0&&(G=this.currentUnit);var k=!1;this.shouldFlush(6)&&(this.flush(),k=!0),this.currentBatch||(G=this.setTexture2D(J));var M=this.vertexViewF32,B=this.vertexViewU32,U=this.vertexCount*this.currentShader.vertexComponentCount-1;return M[++U]=g,M[++U]=T,M[++U]=P,M[++U]=N,M[++U]=G,M[++U]=H,B[++U]=D,M[++U]=w,M[++U]=b,M[++U]=P,M[++U]=O,M[++U]=G,M[++U]=H,B[++U]=z,M[++U]=E,M[++U]=A,M[++U]=F,M[++U]=O,M[++U]=G,M[++U]=H,B[++U]=X,M[++U]=g,M[++U]=T,M[++U]=P,M[++U]=N,M[++U]=G,M[++U]=H,B[++U]=D,M[++U]=E,M[++U]=A,M[++U]=F,M[++U]=O,M[++U]=G,M[++U]=H,B[++U]=X,M[++U]=R,M[++U]=I,M[++U]=F,M[++U]=N,M[++U]=G,M[++U]=H,B[++U]=L,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),k},batchTri:function(v,g,T,w,b,E,A,R,I,P,N,F,O,D,L,z,X){X===void 0&&(X=this.currentUnit);var H=!1;this.shouldFlush(3)&&(this.flush(),H=!0),this.currentBatch||(X=this.setTexture2D(z));var J=this.vertexViewF32,G=this.vertexViewU32,k=this.vertexCount*this.currentShader.vertexComponentCount-1;return J[++k]=g,J[++k]=T,J[++k]=R,J[++k]=I,J[++k]=X,J[++k]=L,G[++k]=F,J[++k]=w,J[++k]=b,J[++k]=R,J[++k]=N,J[++k]=X,J[++k]=L,G[++k]=O,J[++k]=E,J[++k]=A,J[++k]=P,J[++k]=N,J[++k]=X,J[++k]=L,G[++k]=D,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),H},drawFillRect:function(v,g,T,w,b,E,A,R){A===void 0&&(A=this.renderer.whiteTexture),R===void 0&&(R=!0),v=Math.floor(v),g=Math.floor(g);var I=Math.floor(v+T),P=Math.floor(g+w),N=this.setTexture2D(A),F=u.getTintAppendFloatAlphaAndSwap(b,E),O=0,D=0,L=1,z=1;R&&(D=1,z=0),this.batchQuad(null,v,g,v,P,I,P,I,g,O,D,L,z,F,F,F,F,0,A,N)},setTexture2D:function(v){return v===void 0&&(v=this.renderer.whiteTexture),this.pushBatch(v)},bindTexture:function(v,g){g===void 0&&(g=0);var T=this.gl;return T.activeTexture(T.TEXTURE0+g),T.bindTexture(T.TEXTURE_2D,v),this},bindRenderTarget:function(v,g){return this.bindTexture(v.texture,g)},setTime:function(v,g){return this.set1f(v,this.game.loop.getDuration(),g),this},setBoolean:function(v,g,T){return T===void 0&&(T=this.currentShader),T.setBoolean(v,g),this},set1f:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set1f(v,g),this},set2f:function(v,g,T,w){return w===void 0&&(w=this.currentShader),w.set2f(v,g,T),this},set3f:function(v,g,T,w,b){return b===void 0&&(b=this.currentShader),b.set3f(v,g,T,w),this},set4f:function(v,g,T,w,b,E){return E===void 0&&(E=this.currentShader),E.set4f(v,g,T,w,b),this},set1fv:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set1fv(v,g),this},set2fv:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set2fv(v,g),this},set3fv:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set3fv(v,g),this},set4fv:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set4fv(v,g),this},set1iv:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set1iv(v,g),this},set2iv:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set2iv(v,g),this},set3iv:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set3iv(v,g),this},set4iv:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set4iv(v,g),this},set1i:function(v,g,T){return T===void 0&&(T=this.currentShader),T.set1i(v,g),this},set2i:function(v,g,T,w){return w===void 0&&(w=this.currentShader),w.set2i(v,g,T),this},set3i:function(v,g,T,w,b){return b===void 0&&(b=this.currentShader),b.set3i(v,g,T,w),this},set4i:function(v,g,T,w,b,E){return E===void 0&&(E=this.currentShader),E.set4i(v,g,T,w,b),this},setMatrix2fv:function(v,g,T,w){return w===void 0&&(w=this.currentShader),w.setMatrix2fv(v,g,T),this},setMatrix3fv:function(v,g,T,w){return w===void 0&&(w=this.currentShader),w.setMatrix3fv(v,g,T),this},setMatrix4fv:function(v,g,T,w){return w===void 0&&(w=this.currentShader),w.setMatrix4fv(v,g,T),this},destroy:function(){this.emit(r.DESTROY,this);var v,g=this.shaders;for(v=0;v<g.length;v++)g[v].destroy();var T=this.renderTargets;for(v=0;v<T.length;v++)T[v].destroy();this.gl.deleteBuffer(this.vertexBuffer);var w=this.renderer;return w.off(h.RESIZE,this.resize,this),w.off(h.PRE_RENDER,this.onPreRender,this),w.off(h.RENDER,this.onRender,this),w.off(h.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});o.exports=m},11857:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66458),l=t(89787),a=t(56694),r=t(86459),i=t(6659),n=t(81044),h=t(28621),d=t(16650),u=t(72283),p=t(35217),m=t(37410),v=t(40444),g=t(38203),T=t(75512),w=t(1217),b=new a({Extends:i,initialize:function(A){i.call(this);var R=A.config,I={alpha:R.transparent,desynchronized:R.desynchronized,depth:!0,antialias:R.antialiasGL,premultipliedAlpha:R.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:R.failIfMajorPerformanceCaveat,powerPreference:R.powerPreference,preserveDrawingBuffer:R.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:R.clearBeforeRender,antialias:R.antialias,backgroundColor:R.backgroundColor,contextCreation:I,roundPixels:R.roundPixels,maxTextures:R.maxTextures,maxTextureSize:R.maxTextureSize,batchSize:R.batchSize,maxLights:R.maxLights,mipmapFilter:R.mipmapFilter},this.game=A,this.type=r.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=A.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=u,this.contextRestoredHandler=u,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(E){var A,R=this.game,I=this.canvas,P=E.backgroundColor;if(R.config.context?A=R.config.context:A=I.getContext("webgl",E.contextCreation)||I.getContext("experimental-webgl",E.contextCreation),!A||A.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=A;var N=this;this.contextLostHandler=function(J){N.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),J.preventDefault()},I.addEventListener("webglcontextlost",this.contextLostHandler,!1),R.context=A;for(var F=0;F<=27;F++)this.blendModes.push({func:[A.ONE,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_ADD});this.blendModes[1].func=[A.ONE,A.DST_ALPHA],this.blendModes[2].func=[A.DST_COLOR,A.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[A.ONE,A.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[A.ZERO,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_REVERSE_SUBTRACT},this.glFormats=[A.BYTE,A.SHORT,A.UNSIGNED_BYTE,A.UNSIGNED_SHORT,A.FLOAT],this.glFuncMap={mat2:{func:A.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:A.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:A.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:A.uniform1f,length:1},"1fv":{func:A.uniform1fv,length:1},"1i":{func:A.uniform1i,length:1},"1iv":{func:A.uniform1iv,length:1},"2f":{func:A.uniform2f,length:2},"2fv":{func:A.uniform2fv,length:1},"2i":{func:A.uniform2i,length:2},"2iv":{func:A.uniform2iv,length:1},"3f":{func:A.uniform3f,length:3},"3fv":{func:A.uniform3fv,length:1},"3i":{func:A.uniform3i,length:3},"3iv":{func:A.uniform3iv,length:1},"4f":{func:A.uniform4f,length:4},"4fv":{func:A.uniform4fv,length:1},"4i":{func:A.uniform4i,length:4},"4iv":{func:A.uniform4iv,length:1}};var O=A.getSupportedExtensions();(!E.maxTextures||E.maxTextures===-1)&&(E.maxTextures=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS)),E.maxTextureSize||(E.maxTextureSize=A.getParameter(A.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=O;var D="ANGLE_instanced_arrays";this.instancedArraysExtension=O.indexOf(D)>-1?A.getExtension(D):null;var L="OES_vertex_array_object";this.vaoExtension=O.indexOf(L)>-1?A.getExtension(L):null,A.disable(A.DEPTH_TEST),A.disable(A.CULL_FACE),A.enable(A.BLEND),A.clearColor(P.redGL,P.greenGL,P.blueGL,P.alphaGL);var z=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];z.indexOf(E.mipmapFilter)!==-1&&(this.mipmapFilter=A[E.mipmapFilter]),this.maxTextures=T.checkShaderMax(A,E.maxTextures),this.textureIndexes=[];for(var X=0;X<this.maxTextures;X++){var H=A.createTexture();A.activeTexture(A.TEXTURE0+X),A.bindTexture(A.TEXTURE_2D,H),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(X)}return this.pipelines=new p(this),this.setBlendMode(r.BlendModes.NORMAL),this.projectionMatrix=new d().identity(),R.textures.once(g.READY,this.boot,this),this},boot:function(){var E=this.game,A=this.pipelines,R=E.scale.baseSize,I=R.width,P=R.height;this.width=I,this.height=P,this.isBooted=!0,this.renderTarget=new m(this,I,P,1,0,!0,!0),this.maskTarget=new m(this,I,P,1,0,!0,!0),this.maskSource=new m(this,I,P,1,0,!0,!0);var N=E.config;A.boot(N.pipeline,N.defaultPipeline,N.autoMobilePipeline),this.blankTexture=E.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=E.textures.getFrame("__WHITE").glTexture;var F=this.gl;F.bindFramebuffer(F.FRAMEBUFFER,null),F.enable(F.SCISSOR_TEST),E.scale.on(v.RESIZE,this.onResize,this),this.resize(I,P)},captureFrame:function(E,A){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(E,A,R){},stopCapture:function(){},onCapture:function(E){},onResize:function(E,A){(A.width!==this.width||A.height!==this.height)&&this.resize(A.width,A.height)},beginCapture:function(E,A){E===void 0&&(E=this.width),A===void 0&&(A=this.height),this.renderTarget.bind(!0,E,A),this.setProjectionMatrix(E,A)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(E,A){var R=this.gl;return this.width=E,this.height=A,this.setProjectionMatrix(E,A),R.viewport(0,0,E,A),this.drawingBufferHeight=R.drawingBufferHeight,R.scissor(0,R.drawingBufferHeight-A,E,A),this.defaultScissor[2]=E,this.defaultScissor[3]=A,this.emit(n.RESIZE,E,A),this},getCompressedTextures:function(){var E="WEBGL_compressed_texture_",A="WEBKIT_"+E,R=function(P,N){var F=P.getExtension(E+N)||P.getExtension(A+N);if(F){var O={};for(var D in F)O[F[D]]=D;return O}},I=this.gl;return{ETC:R(I,"etc"),ETC1:R(I,"etc1"),ATC:R(I,"atc"),ASTC:R(I,"astc"),BPTC:R(I,"bptc"),RGTC:R(I,"rgtc"),PVRTC:R(I,"pvrtc"),S3TC:R(I,"s3tc"),S3TCSRGB:R(I,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(E,A){var R=this.compression[E.toUpperCase()];if(A in R)return R[A]},supportsCompressedTexture:function(E,A){var R=this.compression[E.toUpperCase()];return R?A?A in R:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(E,A){return(E!==this.projectionWidth||A!==this.projectionHeight)&&(this.projectionWidth=E,this.projectionHeight=A,this.projectionMatrix.ortho(0,E,A,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(E){return this.supportedExtensions?this.supportedExtensions.indexOf(E):!1},getExtension:function(E){return this.hasExtension(E)?(E in this.extensions||(this.extensions[E]=this.gl.getExtension(E)),this.extensions[E]):null},flush:function(){this.pipelines.flush()},pushScissor:function(E,A,R,I,P){P===void 0&&(P=this.drawingBufferHeight);var N=this.scissorStack,F=[E,A,R,I];return N.push(F),this.setScissor(E,A,R,I,P),this.currentScissor=F,F},setScissor:function(E,A,R,I,P){P===void 0&&(P=this.drawingBufferHeight);var N=this.gl,F=this.currentScissor,O=R>0&&I>0;if(F&&O){var D=F[0],L=F[1],z=F[2],X=F[3];O=D!==E||L!==A||z!==R||X!==I}O&&(this.flush(),N.scissor(E,P-A-I,R,I))},resetScissor:function(){var E=this.gl;E.enable(E.SCISSOR_TEST);var A=this.currentScissor;if(A){var R=A[0],I=A[1],P=A[2],N=A[3];P>0&&N>0&&E.scissor(R,this.drawingBufferHeight-I-N,P,N)}},popScissor:function(){var E=this.scissorStack;E.pop();var A=E[E.length-1];A&&this.setScissor(A[0],A[1],A[2],A[3]),this.currentScissor=A},hasActiveStencilMask:function(){var E=this.currentMask.mask,A=this.currentCameraMask.mask;return E&&E.isStencil||A&&A.isStencil},resetViewport:function(){var E=this.gl;E.viewport(0,0,this.width,this.height),this.drawingBufferHeight=E.drawingBufferHeight},setBlendMode:function(E,A){A===void 0&&(A=!1);var R=this.gl,I=this.blendModes[E];return A||E!==r.BlendModes.SKIP_CHECK&&this.currentBlendMode!==E?(this.flush(),R.enable(R.BLEND),R.blendEquation(I.equation),I.func.length>2?R.blendFuncSeparate(I.func[0],I.func[1],I.func[2],I.func[3]):R.blendFunc(I.func[0],I.func[1]),this.currentBlendMode=E,!0):!1},addBlendMode:function(E,A){var R=this.blendModes.push({func:E,equation:A});return R-1},updateBlendMode:function(E,A,R){return this.blendModes[E]&&(this.blendModes[E].func=A,R&&(this.blendModes[E].equation=R)),this},removeBlendMode:function(E){return E>17&&this.blendModes[E]&&this.blendModes.splice(E,1),this},pushFramebuffer:function(E,A,R,I,P){return E===this.currentFramebuffer?this:(this.fboStack.push(E),this.setFramebuffer(E,A,R,I,P))},setFramebuffer:function(E,A,R,I,P){if(A===void 0&&(A=!1),R===void 0&&(R=!0),I===void 0&&(I=null),P===void 0&&(P=!1),E===this.currentFramebuffer)return this;var N=this.gl,F=this.width,O=this.height;return E&&E.renderTexture&&R?(F=E.renderTexture.width,O=E.renderTexture.height):this.flush(),N.bindFramebuffer(N.FRAMEBUFFER,E),R&&N.viewport(0,0,F,O),I&&N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,I,0),P&&(N.clearColor(0,0,0,0),N.clear(N.COLOR_BUFFER_BIT)),A&&(E?(this.drawingBufferHeight=O,this.pushScissor(0,0,F,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=E,this},popFramebuffer:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!0);var R=this.fboStack;R.pop();var I=R[R.length-1];return I||(I=null),this.setFramebuffer(I,E,A),I},restoreFramebuffer:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!0);var R=this.fboStack,I=R[R.length-1];I||(I=null),this.currentFramebuffer=null,this.setFramebuffer(I,E,A)},setProgram:function(E){return E!==this.currentProgram?(this.flush(),this.gl.useProgram(E),this.currentProgram=E,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(E,A,R,I,P){P===void 0&&(P=!1);var N=this.gl,F=N.NEAREST,O=N.NEAREST,D=N.CLAMP_TO_EDGE,L=null;A=E?E.width:A,R=E?E.height:R;var z=h(A,R);return z&&!P&&(D=N.REPEAT),I===r.ScaleModes.LINEAR&&this.config.antialias&&(F=z&&this.mipmapFilter?this.mipmapFilter:N.LINEAR,O=N.LINEAR),E&&E.compressed&&(F=N.LINEAR,O=N.LINEAR),!E&&typeof A=="number"&&typeof R=="number"?L=this.createTexture2D(0,F,O,D,D,N.RGBA,null,A,R):L=this.createTexture2D(0,F,O,D,D,N.RGBA,E),L},createTexture2D:function(E,A,R,I,P,N,F,O,D,L,z,X){L=L??!0,z===void 0&&(z=!1),X===void 0&&(X=!1);var H=this.gl,J=H.createTexture();H.activeTexture(H.TEXTURE0);var G=H.getParameter(H.TEXTURE_BINDING_2D);H.bindTexture(H.TEXTURE_2D,J),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,A),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,R),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,P),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,I),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L),X&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!0);var k=!1;if(F==null)H.texImage2D(H.TEXTURE_2D,E,N,O,D,0,N,H.UNSIGNED_BYTE,null),k=h(O,D);else if(F.compressed){O=F.width,D=F.height,k=F.generateMipmap;for(var M=0;M<F.mipmaps.length;M++)H.compressedTexImage2D(H.TEXTURE_2D,M,F.internalFormat,F.mipmaps[M].width,F.mipmaps[M].height,0,F.mipmaps[M].data)}else z||(O=F.width,D=F.height),H.texImage2D(H.TEXTURE_2D,E,N,N,H.UNSIGNED_BYTE,F),k=h(O,D);return k&&H.generateMipmap(H.TEXTURE_2D),G&&H.bindTexture(H.TEXTURE_2D,G),J.isAlphaPremultiplied=L,J.isRenderTexture=!1,J.width=O,J.height=D,J},createFramebuffer:function(E,A,R,I){I===void 0&&(I=!0);var P=this.gl,N=P.createFramebuffer(),F=0;if(this.setFramebuffer(N),R.isRenderTexture=!0,R.isAlphaPremultiplied=!1,P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,R,0),F=P.checkFramebufferStatus(P.FRAMEBUFFER),F!==P.FRAMEBUFFER_COMPLETE){var O={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(O[F]||F))}if(N.renderTexture=R,I){var D=P.createRenderbuffer();P.bindRenderbuffer(P.RENDERBUFFER,D),P.renderbufferStorage(P.RENDERBUFFER,P.DEPTH_STENCIL,E,A),P.framebufferRenderbuffer(P.FRAMEBUFFER,P.DEPTH_STENCIL_ATTACHMENT,P.RENDERBUFFER,D)}return this.setFramebuffer(null),N},beginBitmapMask:function(E,A){var R=this.gl;R&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==E&&(this.currentMask.mask=E,this.currentMask.camera=A))},drawBitmapMask:function(E,A,R){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),E.renderWebGL(this,E,A),this.maskSource.unbind(!0),this.maskTarget.unbind();var I=this.gl,P=this.getCurrentStencilMask();P?(I.enable(I.STENCIL_TEST),P.mask.applyStencil(this,P.camera,!0)):this.currentMask.mask=null,this.pipelines.set(R),I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,this.maskTarget.texture),I.activeTexture(I.TEXTURE1),I.bindTexture(I.TEXTURE_2D,this.maskSource.texture)},createProgram:function(E,A){var R=this.gl,I=R.createProgram(),P=R.createShader(R.VERTEX_SHADER),N=R.createShader(R.FRAGMENT_SHADER);R.shaderSource(P,E),R.shaderSource(N,A),R.compileShader(P),R.compileShader(N);var F=`Shader failed:
`;if(!R.getShaderParameter(P,R.COMPILE_STATUS))throw new Error("Vertex "+F+R.getShaderInfoLog(P));if(!R.getShaderParameter(N,R.COMPILE_STATUS))throw new Error("Fragment "+F+R.getShaderInfoLog(N));if(R.attachShader(I,P),R.attachShader(I,N),R.linkProgram(I),!R.getProgramParameter(I,R.LINK_STATUS))throw new Error("Link "+F+R.getProgramInfoLog(I));return R.useProgram(I),I},createVertexBuffer:function(E,A){var R=this.gl,I=R.createBuffer();return R.bindBuffer(R.ARRAY_BUFFER,I),R.bufferData(R.ARRAY_BUFFER,E,A),R.bindBuffer(R.ARRAY_BUFFER,null),I},createIndexBuffer:function(E,A){var R=this.gl,I=R.createBuffer();return R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,I),R.bufferData(R.ELEMENT_ARRAY_BUFFER,E,A),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,null),I},deleteTexture:function(E){return E&&this.gl.deleteTexture(E),this},deleteFramebuffer:function(E){if(!E)return this;var A=this.gl;this.currentFramebuffer===E&&(this.currentFramebuffer=null),s(this.fboStack,E),A.bindFramebuffer(A.FRAMEBUFFER,E),E.renderTexture=void 0;var R=A.getFramebufferAttachmentParameter(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);R!==null&&(A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,null,0),A.deleteTexture(R));var I=A.getFramebufferAttachmentParameter(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);return I!==null&&A.deleteRenderbuffer(I),A.bindFramebuffer(A.FRAMEBUFFER,null),A.deleteFramebuffer(E),this},deleteProgram:function(E){return E&&this.gl.deleteProgram(E),this},deleteBuffer:function(E){return this.gl.deleteBuffer(E),this},preRenderCamera:function(E){var A=E.x,R=E.y,I=E.width,P=E.height,N=E.backgroundColor;if(E.emit(l.PRE_RENDER,E),this.pipelines.preBatchCamera(E),this.pushScissor(A,R,I,P),E.mask&&(this.currentCameraMask.mask=E.mask,this.currentCameraMask.camera=E._maskCamera,E.mask.preRenderWebGL(this,E,E._maskCamera)),N.alphaGL>0){var F=this.pipelines.setMulti();F.drawFillRect(A,R,I,P,T.getTintFromFloats(N.blueGL,N.greenGL,N.redGL,1),N.alphaGL)}},getCurrentStencilMask:function(){var E=null,A=this.maskStack,R=this.currentCameraMask;return A.length>0?E=A[A.length-1]:R.mask&&R.mask.isStencil&&(E=R),E},postRenderCamera:function(E){var A=E.flashEffect,R=E.fadeEffect;if(A.isRunning||R.isRunning||R.isComplete){var I=this.pipelines.setMulti();A.postRenderWebGL(I,T.getTintFromFloats),R.postRenderWebGL(I,T.getTintFromFloats)}E.dirty=!1,this.popScissor(),E.mask&&(this.currentCameraMask.mask=null,E.mask.postRenderWebGL(this,E._maskCamera)),this.pipelines.postBatchCamera(E),E.emit(l.POST_RENDER,E)},preRender:function(){if(!this.contextLost){var E=this.gl;if(E.bindFramebuffer(E.FRAMEBUFFER,null),this.config.clearBeforeRender){var A=this.config.backgroundColor;E.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT|E.STENCIL_BUFFER_BIT)}E.enable(E.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&E.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(n.PRE_RENDER)}},render:function(E,A,R){if(!this.contextLost){var I=A.length;if(this.emit(n.RENDER,E,R),this.preRenderCamera(R),I===0){this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(R);return}this.currentType="";for(var P=this.currentMask,N=0;N<I;N++){this.finalType=N===I-1;var F=A[N],O=F.mask;P=this.currentMask,P.mask&&P.mask!==O&&P.mask.postRenderWebGL(this,P.camera),O&&P.mask!==O&&O.preRenderWebGL(this,F,R),F.blendMode!==this.currentBlendMode&&this.setBlendMode(F.blendMode);var D=F.type;D!==this.currentType&&(this.newType=!0,this.currentType=D),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=A[N+1].type===this.currentType,F.renderWebGL(this,F,R),this.newType=!1}P=this.currentMask,P.mask&&P.mask.postRenderWebGL(this,P.camera),this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(R)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(n.POST_RENDER);var E=this.snapshotState;E.callback&&(w(this.gl,E),E.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var E=this.gl,A=this.getCurrentStencilMask();if(A){var R=A.mask;E.enable(E.STENCIL_TEST),R.invertAlpha?E.stencilFunc(E.NOTEQUAL,R.level,255):E.stencilFunc(E.EQUAL,R.level,255)}},snapshot:function(E,A,R){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,E,A,R)},snapshotArea:function(E,A,R,I,P,N,F){var O=this.snapshotState;return O.callback=P,O.type=N,O.encoder=F,O.getPixel=!1,O.x=E,O.y=A,O.width=R,O.height=I,this},snapshotPixel:function(E,A,R){return this.snapshotArea(E,A,1,1,R),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(E,A,R,I,P,N,F,O,D,L,z){P===void 0&&(P=!1),N===void 0&&(N=0),F===void 0&&(F=0),O===void 0&&(O=A),D===void 0&&(D=R),L==="pixel"&&(P=!0,L="image/png");var X=this.currentFramebuffer;this.snapshotArea(N,F,O,D,I,L,z);var H=this.snapshotState;return H.getPixel=P,H.isFramebuffer=!0,H.bufferWidth=A,H.bufferHeight=R,H.width=Math.min(H.width,A),H.height=Math.min(H.height,R),this.setFramebuffer(E),w(this.gl,H),this.setFramebuffer(X),H.callback=null,H.isFramebuffer=!1,this},canvasToTexture:function(E,A,R,I){return R===void 0&&(R=!1),I===void 0&&(I=!1),A?this.updateCanvasTexture(E,A,I):this.createCanvasTexture(E,R,I)},createCanvasTexture:function(E,A,R){A===void 0&&(A=!1),R===void 0&&(R=!1);var I=this.gl,P=I.NEAREST,N=I.NEAREST,F=E.width,O=E.height,D=I.CLAMP_TO_EDGE,L=h(F,O);return!A&&L&&(D=I.REPEAT),this.config.antialias&&(P=L&&this.mipmapFilter?this.mipmapFilter:I.LINEAR,N=I.LINEAR),this.createTexture2D(0,P,N,D,D,I.RGBA,E,F,O,!0,!1,R)},updateCanvasTexture:function(E,A,R){R===void 0&&(R=!1);var I=this.gl,P=E.width,N=E.height;if(P>0&&N>0){I.activeTexture(I.TEXTURE0);var F=I.getParameter(I.TEXTURE_BINDING_2D);I.bindTexture(I.TEXTURE_2D,A),R&&I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,!0),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,E),A.width=P,A.height=N,F&&I.bindTexture(I.TEXTURE_2D,F)}return A},createVideoTexture:function(E,A,R){A===void 0&&(A=!1),R===void 0&&(R=!1);var I=this.gl,P=I.NEAREST,N=I.NEAREST,F=E.videoWidth,O=E.videoHeight,D=I.CLAMP_TO_EDGE,L=h(F,O);return!A&&L&&(D=I.REPEAT),this.config.antialias&&(P=L&&this.mipmapFilter?this.mipmapFilter:I.LINEAR,N=I.LINEAR),this.createTexture2D(0,P,N,D,D,I.RGBA,E,F,O,!0,!0,R)},updateVideoTexture:function(E,A,R){R===void 0&&(R=!1);var I=this.gl,P=E.videoWidth,N=E.videoHeight;if(P>0&&N>0){I.activeTexture(I.TEXTURE0);var F=I.getParameter(I.TEXTURE_BINDING_2D);I.bindTexture(I.TEXTURE_2D,A),I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,R),I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,E),A.width=P,A.height=N,F&&I.bindTexture(I.TEXTURE_2D,F)}return A},setTextureFilter:function(E,A){var R=this.gl,I=A===0?R.LINEAR:R.NEAREST;R.activeTexture(R.TEXTURE0);var P=R.getParameter(R.TEXTURE_BINDING_2D);return R.bindTexture(R.TEXTURE_2D,E),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,I),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,I),P&&R.bindTexture(R.TEXTURE_2D,P),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});o.exports=b},71305:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(71402),r=new s({initialize:function(n,h,d,u,p){this.pipeline=n,this.name=h,this.renderer=n.renderer,this.gl=this.renderer.gl,this.fragSrc=u,this.vertSrc=d,this.program=this.renderer.createProgram(d,u),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(p),this.createUniforms()},createAttributes:function(i){var n=0,h=0,d=[];this.vertexComponentCount=0;for(var u=0;u<i.length;u++){var p=i[u],m=p.name,v=l(p,"size",1),g=l(p,"type",a.FLOAT),T=g.enum,w=g.size,b=!!p.normalized;d.push({name:m,size:v,type:T,normalized:b,offset:h,enabled:!1,location:-1}),w===4?n+=v:n++,h+=v*w}this.vertexSize=h,this.vertexComponentCount=n,this.attributes=d},bind:function(i,n){return i===void 0&&(i=!1),n===void 0&&(n=!1),n&&this.pipeline.flush(),this.renderer.setProgram(this.program),i&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(i){i===void 0&&(i=!1);for(var n=this.gl,h=this.vertexSize,d=this.attributes,u=this.program,p=0;p<d.length;p++){var m=d[p],v=m.size,g=m.type,T=m.offset,w=m.enabled,b=m.location,E=!!m.normalized;if(i){var A=n.getAttribLocation(u,m.name);A>=0?(n.enableVertexAttribArray(A),n.vertexAttribPointer(A,v,g,E,h,T),m.enabled=!0,m.location=A):A!==-1&&n.disableVertexAttribArray(A)}else w?n.vertexAttribPointer(b,v,g,E,h,T):!w&&b>-1&&(n.disableVertexAttribArray(b),m.location=-1)}return this},createUniforms:function(){var i=this.gl,n=this.program,h=this.uniforms,d,u,p,m=i.getProgramParameter(n,i.ACTIVE_UNIFORMS);for(d=0;d<m;d++){var v=i.getActiveUniform(n,d);if(v){u=v.name,p=i.getUniformLocation(n,u),p!==null&&(h[u]={name:u,location:p,value1:null,value2:null,value3:null,value4:null});var g=u.indexOf("[");g>0&&(u=u.substr(0,g),h.hasOwnProperty(u)||(p=i.getUniformLocation(n,u),p!==null&&(h[u]={name:u,location:p,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(i){return this.uniforms.hasOwnProperty(i)},resetUniform:function(i){var n=this.uniforms[i];return n&&(n.value1=null,n.value2=null,n.value3=null,n.value4=null),this},setUniform1:function(i,n,h,d){var u=this.uniforms[n];return u?((d||u.value1!==h)&&(u.value1=h,this.renderer.setProgram(this.program),i.call(this.gl,u.location,h),this.pipeline.currentShader=this),this):this},setUniform2:function(i,n,h,d,u){var p=this.uniforms[n];return p?((u||p.value1!==h||p.value2!==d)&&(p.value1=h,p.value2=d,this.renderer.setProgram(this.program),i.call(this.gl,p.location,h,d),this.pipeline.currentShader=this),this):this},setUniform3:function(i,n,h,d,u,p){var m=this.uniforms[n];return m?((p||m.value1!==h||m.value2!==d||m.value3!==u)&&(m.value1=h,m.value2=d,m.value3=u,this.renderer.setProgram(this.program),i.call(this.gl,m.location,h,d,u),this.pipeline.currentShader=this),this):this},setUniform4:function(i,n,h,d,u,p,m){var v=this.uniforms[n];return v?((m||v.value1!==h||v.value2!==d||v.value3!==u||v.value4!==p)&&(v.value1=h,v.value2=d,v.value3=u,v.value4=p,this.renderer.setProgram(this.program),i.call(this.gl,v.location,h,d,u,p),this.pipeline.currentShader=this),this):this},setBoolean:function(i,n){return this.setUniform1(this.gl.uniform1i,i,Number(n))},set1f:function(i,n){return this.setUniform1(this.gl.uniform1f,i,n)},set2f:function(i,n,h){return this.setUniform2(this.gl.uniform2f,i,n,h)},set3f:function(i,n,h,d){return this.setUniform3(this.gl.uniform3f,i,n,h,d)},set4f:function(i,n,h,d,u){return this.setUniform4(this.gl.uniform4f,i,n,h,d,u)},set1fv:function(i,n){return this.setUniform1(this.gl.uniform1fv,i,n,!0)},set2fv:function(i,n){return this.setUniform1(this.gl.uniform2fv,i,n,!0)},set3fv:function(i,n){return this.setUniform1(this.gl.uniform3fv,i,n,!0)},set4fv:function(i,n){return this.setUniform1(this.gl.uniform4fv,i,n,!0)},set1iv:function(i,n){return this.setUniform1(this.gl.uniform1iv,i,n,!0)},set2iv:function(i,n){return this.setUniform1(this.gl.uniform2iv,i,n,!0)},set3iv:function(i,n){return this.setUniform1(this.gl.uniform3iv,i,n,!0)},set4iv:function(i,n){return this.setUniform1(this.gl.uniform4iv,i,n,!0)},set1i:function(i,n){return this.setUniform1(this.gl.uniform1i,i,n)},set2i:function(i,n,h){return this.setUniform2(this.gl.uniform2i,i,n,h)},set3i:function(i,n,h,d){return this.setUniform3(this.gl.uniform3i,i,n,h,d)},set4i:function(i,n,h,d,u){return this.setUniform4(this.gl.uniform4i,i,n,h,d,u)},setMatrix2fv:function(i,n,h){return this.setUniform2(this.gl.uniformMatrix2fv,i,n,h,!0)},setMatrix3fv:function(i,n,h){return this.setUniform2(this.gl.uniformMatrix3fv,i,n,h,!0)},setMatrix4fv:function(i,n,h){return this.setUniform2(this.gl.uniformMatrix4fv,i,n,h,!0)},createProgram:function(i,n){i===void 0&&(i=this.vertSrc),n===void 0&&(n=this.fragSrc);var h=this.gl;return this.program&&h.deleteProgram(this.program),this.vertSrc=i,this.fragSrc=n,this.program=this.renderer.createProgram(i,n),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});o.exports=r},71402:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};o.exports=y},55478:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(71402),l=t(98611),a={PipelineManager:t(35217),Pipelines:t(62253),RenderTarget:t(37410),Utils:t(75512),WebGLPipeline:t(44775),WebGLRenderer:t(11857),WebGLShader:t(71305)};a=l(!1,a,s),o.exports=a},5583:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(91679),r=t(89053),i=t(71402),n=t(44775),h=new s({Extends:n,initialize:function(u){u.fragShader=l(u,"fragShader",a),u.vertShader=l(u,"vertShader",r),u.batchSize=l(u,"batchSize",1),u.vertices=l(u,"vertices",[-1,1,-1,-7,7,1]),u.attributes=l(u,"attributes",[{name:"inPosition",size:2,type:i.FLOAT}]),n.call(this,u)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(d,u){n.prototype.resize.call(this,d,u),this.set2f("uResolution",d,u)},beginMask:function(d,u,p){this.renderer.beginBitmapMask(d,p)},endMask:function(d,u,p){var m=this.gl,v=this.renderer,g=d.bitmapMask;g&&m&&(v.drawBitmapMask(g,u,this),p&&this.set2f("uResolution",p.width,p.height),this.set1i("uInvertMaskAlpha",d.invertAlpha),m.drawArrays(this.topology,0,3),p&&this.set2f("uResolution",this.width,this.height),m.bindTexture(m.TEXTURE_2D,null))}});o.exports=h},81828:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(58136),a=t(47406),r=t(72632),i=t(87228),n=t(92462),h=t(75512),d=new s({Extends:i,initialize:function(p){p.shaders=[h.setGlowQuality(n.FXGlowFrag,p.game),n.FXShadowFrag,n.FXPixelateFrag,n.FXVignetteFrag,n.FXShineFrag,n.FXBlurLowFrag,n.FXBlurMedFrag,n.FXBlurHighFrag,n.FXGradientFrag,n.FXBloomFrag,n.ColorMatrixFrag,n.FXCircleFrag,n.FXBarrelFrag,n.FXDisplacementFrag,n.FXWipeFrag,n.FXBokehFrag],i.call(this,p);var m=this.game;this.glow=new l.Glow(m),this.shadow=new l.Shadow(m),this.pixelate=new l.Pixelate(m),this.vignette=new l.Vignette(m),this.shine=new l.Shine(m),this.gradient=new l.Gradient(m),this.circle=new l.Circle(m),this.barrel=new l.Barrel(m),this.wipe=new l.Wipe(m),this.bokeh=new l.Bokeh(m);var v=[];v[a.GLOW]=this.onGlow,v[a.SHADOW]=this.onShadow,v[a.PIXELATE]=this.onPixelate,v[a.VIGNETTE]=this.onVignette,v[a.SHINE]=this.onShine,v[a.BLUR]=this.onBlur,v[a.GRADIENT]=this.onGradient,v[a.BLOOM]=this.onBloom,v[a.COLOR_MATRIX]=this.onColorMatrix,v[a.CIRCLE]=this.onCircle,v[a.BARREL]=this.onBarrel,v[a.DISPLACEMENT]=this.onDisplacement,v[a.WIPE]=this.onWipe,v[a.BOKEH]=this.onBokeh,this.fxHandlers=v,this.source,this.target,this.swap},onDraw:function(u,p,m){this.source=u,this.target=p,this.swap=m;var v=u.width,g=u.height,T=this.tempSprite,w=this.fxHandlers;if(T&&T.preFX)for(var b=T.preFX.list,E=0;E<b.length;E++){var A=b[E];A.active&&w[A.type].call(this,A,v,g)}this.drawToGame(this.source)},runDraw:function(){var u=this.source,p=this.target;this.copy(u,p),this.source=p,this.target=u},onGlow:function(u,p,m){var v=this.shaders[a.GLOW];this.setShader(v),this.glow.onPreRender(u,v,p,m),this.runDraw()},onShadow:function(u){var p=this.shaders[a.SHADOW];this.setShader(p),this.shadow.onPreRender(u,p),this.runDraw()},onPixelate:function(u,p,m){var v=this.shaders[a.PIXELATE];this.setShader(v),this.pixelate.onPreRender(u,v,p,m),this.runDraw()},onVignette:function(u){var p=this.shaders[a.VIGNETTE];this.setShader(p),this.vignette.onPreRender(u,p),this.runDraw()},onShine:function(u,p,m){var v=this.shaders[a.SHINE];this.setShader(v),this.shine.onPreRender(u,v,p,m),this.runDraw()},onBlur:function(u,p,m){var v=r(u,"quality"),g=this.shaders[a.BLUR+v];this.setShader(g),this.set1i("uMainSampler",0),this.set2f("resolution",p,m),this.set1f("strength",r(u,"strength")),this.set3fv("color",r(u,"glcolor"));for(var T=r(u,"x"),w=r(u,"y"),b=r(u,"steps"),E=0;E<b;E++)this.set2f("offset",T,0),this.runDraw(),this.set2f("offset",0,w),this.runDraw()},onGradient:function(u){var p=this.shaders[a.GRADIENT];this.setShader(p),this.gradient.onPreRender(u,p),this.runDraw()},onBloom:function(u,p,m){var v=this.shaders[a.BLOOM];this.copySprite(this.source,this.swap),this.setShader(v),this.set1i("uMainSampler",0),this.set1f("strength",r(u,"blurStrength")),this.set3fv("color",r(u,"glcolor"));for(var g=2/p*r(u,"offsetX"),T=2/m*r(u,"offsetY"),w=r(u,"steps"),b=0;b<w;b++)this.set2f("offset",g,0),this.runDraw(),this.set2f("offset",0,T),this.runDraw();this.blendFrames(this.swap,this.source,this.target,r(u,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(u){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",u.getData()),this.set1f("uAlpha",u.alpha),this.runDraw()},onCircle:function(u,p,m){var v=this.shaders[a.CIRCLE];this.setShader(v),this.circle.onPreRender(u,v,p,m),this.runDraw()},onBarrel:function(u){var p=this.shaders[a.BARREL];this.setShader(p),this.barrel.onPreRender(u,p),this.runDraw()},onDisplacement:function(u){this.setShader(this.shaders[a.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",u.x,u.y),this.bindTexture(u.glTexture,1),this.runDraw()},onWipe:function(u){var p=this.shaders[a.WIPE];this.setShader(p),this.wipe.onPreRender(u,p),this.runDraw()},onBokeh:function(u,p,m){var v=this.shaders[a.BOKEH];this.setShader(v),this.bokeh.onPreRender(u,v,p,m),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,i.prototype.destroy.call(this),this}});o.exports=d},66901:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(65045),r=t(77310),i=t(69360),n=t(93736),h=t(44775),d=new s({Extends:r,initialize:function(p){var m=l(p,"fragShader",a);p.fragShader=m.replace("%LIGHT_COUNT%",p.game.renderer.config.maxLights),r.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new n,this._tempMatrix=new i,this._tempMatrix2=new i},boot:function(){h.prototype.boot.call(this);var u=this.gl,p=u.createTexture();u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,p),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p}},onRender:function(u,p){var m=u.sys.lights;if(this.lightsActive=!1,!(!m||!m.active)){var v=m.getLights(p),g=v.length;this.lightsActive=!0;var T,w=this.renderer,b=w.height,E=p.matrix,A=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",m.ambientColor.r,m.ambientColor.g,m.ambientColor.b),this.set1i("uLightCount",g),T=0;T<g;T++){var R=v[T].light,I=R.color,P="uLights["+T+"].";E.transformPoint(R.x,R.y,A),this.set2f(P+"position",A.x-p.scrollX*R.scrollFactorX*p.zoom,b-(A.y-p.scrollY*R.scrollFactorY*p.zoom)),this.set3f(P+"color",I.r,I.g,I.b),this.set1f(P+"intensity",R.intensity),this.set1f(P+"radius",R.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(u){if(u!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(u){var m=-u,v=Math.cos(m),g=Math.sin(m);p[1]=g,p[3]=-g,p[0]=p[4]=v}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=u}},setTexture2D:function(u,p){var m=this.renderer;u===void 0&&(u=m.whiteTexture);var v=this.getNormalMap(p);this.isNewNormalMap(u,v)&&(this.flush(),this.createBatch(u),this.addTextureToBatch(v),this.currentNormalMap=v);var g=0;if(p&&p.parentContainer){var T=p.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);g=T.rotationNormalized}else p&&(g=p.rotation);return this.setNormalMapRotation(g),0},setGameObject:function(u,p){p===void 0&&(p=u.frame);var m=p.glTexture,v=this.getNormalMap(u);if(this.isNewNormalMap(m,v)&&(this.flush(),this.createBatch(m),this.addTextureToBatch(v),this.currentNormalMap=v),u.parentContainer){var g=u.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(g.rotationNormalized)}else this.setNormalMapRotation(u.rotation);return 0},isNewNormalMap:function(u,p){return this.currentTexture!==u||this.currentNormalMap!==p},getNormalMap:function(u){var p;return u?u.displayTexture?p=u.displayTexture.dataSource[u.displayFrame.sourceIndex]:u.texture?p=u.texture.dataSource[u.frame.sourceIndex]:u.tileset&&(Array.isArray(u.tileset)?p=u.tileset[0].image.dataSource[0]:p=u.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(u,p,m){this.lightsActive&&r.prototype.batchSprite.call(this,u,p,m)},batchTexture:function(u,p,m,v,g,T,w,b,E,A,R,I,P,N,F,O,D,L,z,X,H,J,G,k,M,B,U,W,K,q,_,rt){this.lightsActive&&r.prototype.batchTexture.call(this,u,p,m,v,g,T,w,b,E,A,R,I,P,N,F,O,D,L,z,X,H,J,G,k,M,B,U,W,K,q,_,rt)},batchTextureFrame:function(u,p,m,v,g,T,w){this.lightsActive&&r.prototype.batchTextureFrame.call(this,u,p,m,v,g,T,w)}});o.exports=d},71264:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(77310),r=t(85060),i=t(18166),n=t(71402),h=t(44775),d=new s({Extends:a,initialize:function(p){p.fragShader=l(p,"fragShader",r),p.vertShader=l(p,"vertShader",i),p.attributes=l(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),p.forceZero=!0,a.call(this,p)},boot:function(){h.prototype.boot.call(this);var u=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",u.width,u.height),this.set1i("uRoundPixels",u.config.roundPixels)}});o.exports=d},77310:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(11117),a=t(72632),r=t(53787),i=t(15968),n=t(69360),h=t(75512),d=t(71402),u=t(44775),p=new s({Extends:u,initialize:function(v){var g=v.game.renderer,T=a(v,"fragShader",r);v.fragShader=h.parseFragmentShaderMaxTextures(T,g.maxTextures),v.vertShader=a(v,"vertShader",i),v.attributes=a(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),u.call(this,v),this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){u.prototype.boot.call(this);var m=this.renderer;this.set1iv("uMainSampler",m.textureIndexes),this.set2f("uResolution",m.width,m.height),this.set1i("uRoundPixels",m.config.roundPixels)},batchSprite:function(m,v,g){this.manager.set(this,m);var T=this._tempMatrix1,w=this._tempMatrix2,b=this._tempMatrix3,E=m.frame,A=E.glTexture,R=E.u0,I=E.v0,P=E.u1,N=E.v1,F=E.x,O=E.y,D=E.cutWidth,L=E.cutHeight,z=E.customPivot,X=m.displayOriginX,H=m.displayOriginY,J=-X+F,G=-H+O;if(m.isCropped){var k=m._crop;(k.flipX!==m.flipX||k.flipY!==m.flipY)&&E.updateCropUVs(k,m.flipX,m.flipY),R=k.u0,I=k.v0,P=k.u1,N=k.v1,D=k.width,L=k.height,F=k.x,O=k.y,J=-X+F,G=-H+O}var M=1,B=1;m.flipX&&(z||(J+=-E.realWidth+X*2),M=-1),(m.flipY||E.source.isGLTexture&&!A.flipY)&&(z||(G+=-E.realHeight+H*2),B=-1);var U=m.x,W=m.y;w.applyITRS(U,W,m.rotation,m.scaleX*M,m.scaleY*B),T.copyFrom(v.matrix),g?(T.multiplyWithOffset(g,-v.scrollX*m.scrollFactorX,-v.scrollY*m.scrollFactorY),w.e=U,w.f=W):(w.e-=v.scrollX*m.scrollFactorX,w.f-=v.scrollY*m.scrollFactorY),T.multiply(w,b);var K=b.setQuad(J,G,J+D,G+L),q=h.getTintAppendFloatAlpha,_=v.alpha,rt=q(m.tintTopLeft,_*m._alphaTL),ft=q(m.tintTopRight,_*m._alphaTR),mt=q(m.tintBottomLeft,_*m._alphaBL),vt=q(m.tintBottomRight,_*m._alphaBR);this.shouldFlush(6)&&this.flush();var yt=this.setGameObject(m,E);this.manager.preBatch(m),this.currentShader.set1i("uRoundPixels",v.roundPixels),this.batchQuad(m,K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7],R,I,P,N,rt,ft,mt,vt,m.tintFill,A,yt),this.manager.postBatch(m)},batchTexture:function(m,v,g,T,w,b,E,A,R,I,P,N,F,O,D,L,z,X,H,J,G,k,M,B,U,W,K,q,_,rt,ft,mt,vt){vt===void 0&&(vt=!1),this.manager.set(this,m);var yt=this._tempMatrix1,xt=this._tempMatrix2,It=this._tempMatrix3,$t=X/g+K,Zt=H/T+q,Bt=(X+J)/g+K,At=(H+G)/T+q,kt=E,Ut=A,ee=-L,te=-z;if(m.isCropped){var fe=m._crop,ae=fe.width,le=fe.height;kt=ae,Ut=le,E=ae,A=le,X=fe.x,H=fe.y;var re=X,we=H;N&&(re=J-fe.x-ae),F&&(we=G-fe.y-le),$t=re/g+K,Zt=we/T+q,Bt=(re+ae)/g+K,At=(we+le)/T+q,ee=-L+X,te=-z+H}F=F^(!ft&&v.isRenderTexture?1:0),N&&(kt*=-1,ee+=E),F&&(Ut*=-1,te+=A),xt.applyITRS(w,b,P,R,I),yt.copyFrom(_.matrix),rt?(yt.multiplyWithOffset(rt,-_.scrollX*O,-_.scrollY*D),xt.e=w,xt.f=b):(xt.e-=_.scrollX*O,xt.f-=_.scrollY*D),yt.multiply(xt,It);var Se=It.setQuad(ee,te,ee+kt,te+Ut);mt==null&&(mt=this.setTexture2D(v)),m&&!vt&&this.manager.preBatch(m),this.currentShader.set1i("uRoundPixels",_.roundPixels),this.batchQuad(m,Se[0],Se[1],Se[2],Se[3],Se[4],Se[5],Se[6],Se[7],$t,Zt,Bt,At,k,M,B,U,W,v,mt),m&&!vt&&this.manager.postBatch(m)},batchTextureFrame:function(m,v,g,T,w,b,E){this.manager.set(this);var A=this._tempMatrix1.copyFrom(b),R=this._tempMatrix2;E?A.multiply(E,R):R=A;var I=R.setQuad(v,g,v+m.width,g+m.height),P=this.setTexture2D(m.source.glTexture);T=h.getTintAppendFloatAlpha(T,w),this.batchQuad(null,I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],m.u0,m.v0,m.u1,m.v1,T,T,T,T,0,m.glTexture,P)},batchFillRect:function(m,v,g,T,w,b){this.renderer.pipelines.set(this);var E=this.calcMatrix;b&&b.multiply(w,E);var A=E.setQuad(m,v,m+g,v+T),R=this.fillTint;this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],0,0,1,1,R.TL,R.TR,R.BL,R.BR,2)},batchFillTriangle:function(m,v,g,T,w,b,E,A){this.renderer.pipelines.set(this);var R=this.calcMatrix;A&&A.multiply(E,R);var I=R.getX(m,v),P=R.getY(m,v),N=R.getX(g,T),F=R.getY(g,T),O=R.getX(w,b),D=R.getY(w,b),L=this.fillTint;this.currentShader.set1i("uRoundPixels",!1),this.batchTri(null,I,P,N,F,O,D,0,0,1,1,L.TL,L.TR,L.BL,2)},batchStrokeTriangle:function(m,v,g,T,w,b,E,A,R){var I=this.tempTriangle;I[0].x=m,I[0].y=v,I[0].width=E,I[1].x=g,I[1].y=T,I[1].width=E,I[2].x=w,I[2].y=b,I[2].width=E,I[3].x=m,I[3].y=v,I[3].width=E,this.batchStrokePath(I,E,!1,A,R)},batchFillPath:function(m,v,g){this.renderer.pipelines.set(this);var T=this.calcMatrix;g&&g.multiply(v,T);for(var w=m.length,b=this.polygonCache,E,A,R=this.fillTint.TL,I=this.fillTint.TR,P=this.fillTint.BL,N=0;N<w;++N)A=m[N],b.push(A.x,A.y);E=l(b),w=E.length,this.currentShader.set1i("uRoundPixels",!1);for(var F=0;F<w;F+=3){var O=E[F+0]*2,D=E[F+1]*2,L=E[F+2]*2,z=b[O+0],X=b[O+1],H=b[D+0],J=b[D+1],G=b[L+0],k=b[L+1],M=T.getX(z,X),B=T.getY(z,X),U=T.getX(H,J),W=T.getY(H,J),K=T.getX(G,k),q=T.getY(G,k);this.batchTri(null,M,B,U,W,K,q,0,0,1,1,R,I,P,2)}b.length=0},batchStrokePath:function(m,v,g,T,w){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var b=m.length-1,E=0;E<b;E++){var A=m[E],R=m[E+1];this.batchLine(A.x,A.y,R.x,R.y,A.width/2,R.width/2,v,E,!g&&E===b-1,T,w)}},batchLine:function(m,v,g,T,w,b,E,A,R,I,P){this.renderer.pipelines.set(this);var N=this.calcMatrix;P&&P.multiply(I,N);var F=g-m,O=T-v,D=Math.sqrt(F*F+O*O);if(D!==0){var L=w*(T-v)/D,z=w*(m-g)/D,X=b*(T-v)/D,H=b*(m-g)/D,J=g-X,G=T-H,k=m-L,M=v-z,B=g+X,U=T+H,W=m+L,K=v+z,q=N.getX(J,G),_=N.getY(J,G),rt=N.getX(k,M),ft=N.getY(k,M),mt=N.getX(B,U),vt=N.getY(B,U),yt=N.getX(W,K),xt=N.getY(W,K),It=this.strokeTint,$t=It.TL,Zt=It.TR,Bt=It.BL,At=It.BR;if(this.currentShader.set1i("uRoundPixels",!1),this.batchQuad(null,yt,xt,rt,ft,q,_,mt,vt,0,0,1,1,$t,Zt,Bt,At,2),!(E<=2)){var kt=this.prevQuad,Ut=this.firstQuad;A>0&&kt[4]?this.batchQuad(null,yt,xt,rt,ft,kt[0],kt[1],kt[2],kt[3],0,0,1,1,$t,Zt,Bt,At,2):(Ut[0]=yt,Ut[1]=xt,Ut[2]=rt,Ut[3]=ft,Ut[4]=1),R&&Ut[4]?this.batchQuad(null,q,_,mt,vt,Ut[0],Ut[1],Ut[2],Ut[3],0,0,1,1,$t,Zt,Bt,At,2):(kt[0]=q,kt[1]=_,kt[2]=mt,kt[3]=vt,kt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,u.prototype.destroy.call(this),this}});o.exports=p},10919:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(83327),r=t(54677),i=t(44775),n=new s({Extends:i,initialize:function(d){d.vertShader=l(d,"vertShader",r),d.fragShader=l(d,"fragShader",a),d.attributes=l(d,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),i.call(this,d)},onRender:function(h,d){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",d.zoom)},batchPointLight:function(h,d,u,p,m,v,g,T,w,b,E,A){var R=h.color,I=h.intensity,P=h.radius,N=h.attenuation,F=R.r*I,O=R.g*I,D=R.b*I,L=d.alpha*h.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(u,p,E,A,P,N,F,O,D,L),this.batchLightVert(m,v,E,A,P,N,F,O,D,L),this.batchLightVert(g,T,E,A,P,N,F,O,D,L),this.batchLightVert(u,p,E,A,P,N,F,O,D,L),this.batchLightVert(g,T,E,A,P,N,F,O,D,L),this.batchLightVert(w,b,E,A,P,N,F,O,D,L),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(h,d,u,p,m,v,g,T,w,b){var E=this.vertexViewF32,A=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++A]=h,E[++A]=d,E[++A]=u,E[++A]=p,E[++A]=m,E[++A]=v,E[++A]=g,E[++A]=T,E[++A]=w,E[++A]=b,this.vertexCount++}});o.exports=n},80486:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(65246),a=t(72632),r=t(12569),i=t(99365),n=t(44775),h=new s({Extends:n,initialize:function(u){u.renderTarget=a(u,"renderTarget",1),u.fragShader=a(u,"fragShader",r),u.vertShader=a(u,"vertShader",i),u.attributes=a(u,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),u.batchSize=1,u.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],n.call(this,u),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new l,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){n.prototype.boot.call(this);var d=this.manager.UTILITY_PIPELINE;this.fullFrame1=d.fullFrame1,this.fullFrame2=d.fullFrame2,this.halfFrame1=d.halfFrame1,this.halfFrame2=d.halfFrame2;var u=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",u.width,u.height),this.set1i("uRoundPixels",u.config.roundPixels);for(var p=this.renderTargets,m=0;m<p.length;m++)p[m].autoResize=!0},postBatch:function(d){return this.hasBooted||this.bootFX(),this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(d){this.bindAndDraw(d)},getController:function(d){return d!==void 0?d:this.controller?this.controller:this},copySprite:function(d,u,p){p===void 0&&(p=!1);var m=this.gl;m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,d.texture);var v=m.getParameter(m.FRAMEBUFFER_BINDING);m.bindFramebuffer(m.FRAMEBUFFER,u.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u.texture,0),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),p&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,v))},copyFrame:function(d,u,p,m,v){this.manager.copyFrame(d,u,p,m,v)},copyToGame:function(d){this.manager.copyToGame(d)},drawFrame:function(d,u,p){this.manager.drawFrame(d,u,p,this.colorMatrix)},blendFrames:function(d,u,p,m,v){this.manager.blendFrames(d,u,p,m,v)},blendFramesAdditive:function(d,u,p,m,v){this.manager.blendFramesAdditive(d,u,p,m,v)},clearFrame:function(d,u){this.manager.clearFrame(d,u)},blitFrame:function(d,u,p,m,v,g){this.manager.blitFrame(d,u,p,m,v,g)},copyFrameRect:function(d,u,p,m,v,g,T,w){this.manager.copyFrameRect(d,u,p,m,v,g,T,w)},bindAndDraw:function(d,u,p,m,v){p===void 0&&(p=!0),m===void 0&&(m=!0);var g=this.gl,T=this.renderer;this.bind(v),this.set1i("uMainSampler",0),u?(g.viewport(0,0,u.width,u.height),g.bindFramebuffer(g.FRAMEBUFFER,u.framebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,u.texture,0),p&&(m?g.clearColor(0,0,0,0):g.clearColor(0,0,0,1),g.clear(g.COLOR_BUFFER_BIT))):(T.popFramebuffer(!1,!1),T.currentFramebuffer||g.viewport(0,0,T.width,T.height)),T.restoreStencilMask(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,d.texture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),u&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,T.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,n.prototype.destroy.call(this),this}});o.exports=h},87228:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(79993),a=t(56694),r=t(37486),i=t(72632),n=t(77310),h=t(12569),d=t(74118),u=t(37410),p=t(85060),m=t(18166),v=t(44775),g=new a({Extends:n,initialize:function(w){var b=i(w,"fragShader",h),E=i(w,"vertShader",m),A=i(w,"drawShader",h),R=[{name:"DrawSprite",fragShader:p,vertShader:m},{name:"CopySprite",fragShader:b,vertShader:E},{name:"DrawGame",fragShader:A,vertShader:m},{name:"ColorMatrix",fragShader:r}],I=i(w,"shaders",[]);w.shaders=R.concat(I),w.vertShader||(w.vertShader=E),w.batchSize=1,n.call(this,w),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new d,this.targetBounds=new d,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){v.prototype.boot.call(this);var T=this.shaders,w=this.renderer;this.drawSpriteShader=T[0],this.copyShader=T[1],this.gameShader=T[2],this.colorMatrixShader=T[3],this.fsTarget=new u(w,w.width,w.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var b=new ArrayBuffer(168);this.quadVertexData=b,this.quadVertexViewF32=new Float32Array(b),this.quadVertexBuffer=w.createVertexBuffer(b,this.gl.STATIC_DRAW),this.onResize(w.width,w.height),this.currentShader=this.copyShader,this.set2f("uResolution",w.width,w.height),this.set1i("uRoundPixels",w.config.roundPixels)},onResize:function(T,w){var b=this.quadVertexViewF32;b[1]=w,b[22]=w,b[14]=T,b[28]=T,b[35]=T,b[36]=w},batchQuad:function(T,w,b,E,A,R,I,P,N,F,O,D,L,z,X,H,J,G,k){var M=Math.min(w,E,R,P),B=Math.min(b,A,I,N),U=Math.max(w,E,R,P),W=Math.max(b,A,I,N),K=U-M,q=W-B,_=this.spriteBounds.setTo(M,B,K,q),rt=T?T.preFX.padding:0,ft=K+rt*2,mt=q+rt*2,vt=Math.abs(Math.max(ft,mt)),yt=this.manager.getRenderTarget(vt),xt=this.targetBounds.setTo(0,0,yt.width,yt.height);l(xt,_.centerX,_.centerY),this.tempSprite=T;var It=this.gl,$t=this.renderer;$t.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",$t.width,$t.height),this.set1i("uRoundPixels",$t.config.roundPixels),this.flipProjectionMatrix(!0),T&&(this.onDrawSprite(T,yt),T.preFX.onFX(this));var Zt=this.fsTarget;return this.flush(),It.viewport(0,0,$t.width,$t.height),It.bindFramebuffer(It.FRAMEBUFFER,Zt.framebuffer),It.framebufferTexture2D(It.FRAMEBUFFER,It.COLOR_ATTACHMENT0,It.TEXTURE_2D,Zt.texture,0),It.clearColor(0,0,0,0),It.clear(It.COLOR_BUFFER_BIT),this.setTexture2D(k),this.batchVert(w,b,F,O,0,G,z),this.batchVert(E,A,F,L,0,G,H),this.batchVert(R,I,D,L,0,G,J),this.batchVert(w,b,F,O,0,G,z),this.batchVert(R,I,D,L,0,G,J),this.batchVert(P,N,D,O,0,G,X),this.flush(),this.flipProjectionMatrix(!1),It.activeTexture(It.TEXTURE0),It.bindTexture(It.TEXTURE_2D,yt.texture),It.copyTexSubImage2D(It.TEXTURE_2D,0,0,0,xt.x,xt.y,xt.width,xt.height),It.bindFramebuffer(It.FRAMEBUFFER,null),It.bindTexture(It.TEXTURE_2D,null),this.onBatch(T),this.currentShader=this.copyShader,this.onDraw(yt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(T,w,b,E,A,R,I){b===void 0&&(b=!0),E===void 0&&(E=!0),A===void 0&&(A=!1),I===void 0&&(I=this.copyShader);var P=this.gl,N=this.tempSprite;R&&(I=this.colorMatrixShader),this.currentShader=I;var F=this.setVertexBuffer(this.quadVertexBuffer);I.bind(F,!1);var O=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",O.width,O.height),this.set1i("uRoundPixels",O.config.roundPixels),N.preFX.onFXCopy(this),this.onCopySprite(T,w,N),R&&(this.set1fv("uColorMatrix",R.getData()),this.set1f("uAlpha",R.alpha)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,T.texture),T.height>w.height)P.viewport(0,0,T.width,T.height),this.setTargetUVs(T,w);else{var D=w.height-T.height;P.viewport(0,D,T.width,T.height),this.resetUVs()}if(P.bindFramebuffer(P.FRAMEBUFFER,w.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,w.texture,0),b&&(P.clearColor(0,0,0,+!E),P.clear(P.COLOR_BUFFER_BIT)),A){var L=this.renderer.currentBlendMode;this.renderer.setBlendMode(s.ERASE)}P.bufferData(P.ARRAY_BUFFER,this.quadVertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),A&&this.renderer.setBlendMode(L),P.bindFramebuffer(P.FRAMEBUFFER,null)},copy:function(T,w){var b=this.gl;this.set1i("uMainSampler",0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,T.texture),b.viewport(0,0,T.width,T.height),this.setUVs(0,0,0,1,1,1,1,0),b.bindFramebuffer(b.FRAMEBUFFER,w.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,w.texture,0),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.quadVertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null)},blendFrames:function(T,w,b,E,A){this.manager.blendFrames(T,w,b,E,A)},blendFramesAdditive:function(T,w,b,E,A){this.manager.blendFramesAdditive(T,w,b,E,A)},drawToGame:function(T){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(T)},copyToGame:function(T){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(T)},bindAndDraw:function(T){var w=this.gl,b=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(T.texture);var E=this._tempMatrix1.loadIdentity(),A=this.targetBounds.x,R=this.targetBounds.y,I=A+T.width,P=R+T.height,N=E.getX(A,R),F=E.getX(A,P),O=E.getX(I,P),D=E.getX(I,R),L=E.getY(A,R),z=E.getY(A,P),X=E.getY(I,P),H=E.getY(I,R),J=16777215;this.batchVert(N,L,0,0,0,0,J),this.batchVert(F,z,0,1,0,0,J),this.batchVert(O,X,1,1,0,0,J),this.batchVert(N,L,0,0,0,0,J),this.batchVert(O,X,1,1,0,0,J),this.batchVert(D,H,1,0,0,0,J),b.restoreFramebuffer(!1,!0),b.currentFramebuffer||w.viewport(0,0,b.width,b.height),b.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(T){this.drawToGame(T)},setUVs:function(T,w,b,E,A,R,I,P){var N=this.quadVertexViewF32;N[2]=T,N[3]=w,N[9]=b,N[10]=E,N[16]=A,N[17]=R,N[23]=T,N[24]=w,N[30]=A,N[31]=R,N[37]=I,N[38]=P},setTargetUVs:function(T,w){var b=w.height/T.height;b>.5?b=.5-(b-.5):b=.5+(.5-b),this.setUVs(0,b,0,1+b,1,1+b,1,b)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,n.prototype.destroy.call(this),this}});o.exports=g},21213:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(77310),r=new s({Extends:a,initialize:function(n){n.topology=5,n.batchSize=l(n,"batchSize",256),a.call(this,n)}});o.exports=r},51212:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(77310),r=t(85060),i=t(18166),n=t(44775),h=new s({Extends:a,initialize:function(u){u.fragShader=l(u,"fragShader",r),u.vertShader=l(u,"vertShader",i),u.forceZero=!0,a.call(this,u)},boot:function(){n.prototype.boot.call(this);var d=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",d.width,d.height),this.set1i("uRoundPixels",d.config.roundPixels)}});o.exports=h},60848:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2529),l=t(95723),a=t(56694),r=t(65246),i=t(37486),n=t(79060),h=t(72632),d=t(98921),u=t(99365),p=t(44775),m=new a({Extends:p,initialize:function(g){g.renderTarget=h(g,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),g.vertShader=h(g,"vertShader",u),g.shaders=h(g,"shaders",[{name:"Copy",fragShader:n},{name:"AddBlend",fragShader:s},{name:"LinearBlend",fragShader:d},{name:"ColorMatrix",fragShader:i}]),g.attributes=h(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),g.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],g.batchSize=1,p.call(this,g),this.colorMatrix=new r,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){p.prototype.boot.call(this);var v=this.shaders,g=this.renderTargets;this.copyShader=v[0],this.addShader=v[1],this.linearShader=v[2],this.colorMatrixShader=v[3],this.fullFrame1=g[0],this.fullFrame2=g[1],this.halfFrame1=g[2],this.halfFrame2=g[3]},copyFrame:function(v,g,T,w,b){T===void 0&&(T=1),w===void 0&&(w=!0),b===void 0&&(b=!0);var E=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,v.texture),g?(E.viewport(0,0,g.width,g.height),E.bindFramebuffer(E.FRAMEBUFFER,g.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,g.texture,0)):E.viewport(0,0,v.width,v.height),w&&(b?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blitFrame:function(v,g,T,w,b,E,A){T===void 0&&(T=1),w===void 0&&(w=!0),b===void 0&&(b=!0),E===void 0&&(E=!1),A===void 0&&(A=!1);var R=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,v.texture),v.height>g.height)R.viewport(0,0,v.width,v.height),this.setTargetUVs(v,g);else{var I=g.height-v.height;R.viewport(0,I,v.width,v.height)}if(R.bindFramebuffer(R.FRAMEBUFFER,g.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,g.texture,0),w&&(b?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),E){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(l.ERASE)}A&&this.flipY(),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),E&&this.renderer.setBlendMode(P),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(v,g,T,w,b,E,A,R){A===void 0&&(A=!0),R===void 0&&(R=!0);var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,v.framebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,v.texture,0),A&&(R?I.clearColor(0,0,0,0):I.clearColor(0,0,0,1),I.clear(I.COLOR_BUFFER_BIT)),I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,g.texture),I.copyTexSubImage2D(I.TEXTURE_2D,0,0,0,T,w,b,E),I.bindFramebuffer(I.FRAMEBUFFER,null),I.bindTexture(I.TEXTURE_2D,null)},copyToGame:function(v){var g=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,v.texture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6)},drawFrame:function(v,g,T,w){T===void 0&&(T=!0),w===void 0&&(w=this.colorMatrix);var b=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",w.getData()),this.set1f("uAlpha",w.alpha),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,v.texture),g?(b.viewport(0,0,g.width,g.height),b.bindFramebuffer(b.FRAMEBUFFER,g.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,g.texture,0)):b.viewport(0,0,v.width,v.height),T?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.vertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)},blendFrames:function(v,g,T,w,b,E){w===void 0&&(w=1),b===void 0&&(b=!0),E===void 0&&(E=this.linearShader);var A=this.gl;this.setShader(E),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",w),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,v.texture),A.activeTexture(A.TEXTURE1),A.bindTexture(A.TEXTURE_2D,g.texture),T?(A.bindFramebuffer(A.FRAMEBUFFER,T.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,T.texture,0),A.viewport(0,0,T.width,T.height)):A.viewport(0,0,v.width,v.height),b?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blendFramesAdditive:function(v,g,T,w,b){this.blendFrames(v,g,T,w,b,this.addShader)},clearFrame:function(v,g){g===void 0&&(g=!0);var T=this.gl;T.viewport(0,0,v.width,v.height),T.bindFramebuffer(T.FRAMEBUFFER,v.framebuffer),g?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT);var w=this.renderer.currentFramebuffer;T.bindFramebuffer(T.FRAMEBUFFER,w)},setUVs:function(v,g,T,w,b,E,A,R){var I=this.vertexViewF32;I[2]=v,I[3]=g,I[6]=T,I[7]=w,I[10]=b,I[11]=E,I[14]=v,I[15]=g,I[18]=b,I[19]=E,I[22]=A,I[23]=R},setTargetUVs:function(v,g){var T=g.height/v.height;T>.5?T=.5-(T-.5):T=.5+(.5-T),this.setUVs(0,T,0,1+T,1,1+T,1,T)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});o.exports=m},65641:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};o.exports=y},68726:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineafterflush"},67186:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebeforeflush"},22709:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebind"},74469:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineboot"},93953:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinedestroy"},51687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinerebind"},25034:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineresize"},18970:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_FLUSH:t(68726),BEFORE_FLUSH:t(67186),BIND:t(22709),BOOT:t(74469),DESTROY:t(93953),REBIND:t(51687),RESIZE:t(25034)}},32469:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(87751),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.amount=1},onPreRender:function(i,n){i=this.getController(i),this.set1f("amount",i.amount,n)}});o.exports=r},2134:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(88222),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(i){i=this.getController(i),this.set1f("strength",i.blurStrength),this.set3fv("color",i.glcolor)},onDraw:function(i){var n=this.getController(),h=this.fullFrame1,d=this.fullFrame2;this.copyFrame(i,d);for(var u=2/i.width*n.offsetX,p=2/i.height*n.offsetY,m=0;m<n.steps;m++)this.set2f("offset",u,0),this.copySprite(i,h),this.set2f("offset",0,p),this.copySprite(h,i);this.blendFrames(d,i,h,n.strength),this.copyToGame(h)}});o.exports=r},63377:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(35491),a=t(75568),r=t(44481),i=t(80486),n=new s({Extends:i,initialize:function(d){i.call(this,{game:d,shaders:[{name:"Gaussian5",fragShader:l},{name:"Gaussian9",fragShader:a},{name:"Gaussian13",fragShader:r}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(h){var d=this.getController(),u=this.gl,p=this.fullFrame1,m=u.getParameter(u.FRAMEBUFFER_BINDING);this.bind(this.shaders[d.quality]),u.activeTexture(u.TEXTURE0),u.viewport(0,0,h.width,h.height),this.set1i("uMainSampler",0),this.set2f("resolution",h.width,h.height),this.set1f("strength",d.strength),this.set3fv("color",d.glcolor);for(var v=0;v<d.steps;v++)this.set2f("offset",d.x,0),this.copySprite(h,p),this.set2f("offset",0,d.y),this.copySprite(p,h);u.bindFramebuffer(u.FRAMEBUFFER,m),u.bindTexture(u.TEXTURE_2D,null),this.copyToGame(h)}});o.exports=n},49745:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(69960),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(i,n,h,d){i=this.getController(i),this.set1f("radius",i.radius,n),this.set1f("amount",i.amount,n),this.set1f("contrast",i.contrast,n),this.set1f("strength",i.strength,n),this.set2f("blur",i.blurX,i.blurY,n),this.setBoolean("isTiltShift",i.isTiltShift,n),h&&d&&this.set2f("resolution",h,d,n)},onDraw:function(i){this.set2f("resolution",i.width,i.height),this.bindAndDraw(i)}});o.exports=r},4323:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(33754),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(i,n,h,d){i=this.getController(i),this.set1f("scale",i.scale,n),this.set1f("feather",i.feather,n),this.set1f("thickness",i.thickness,n),this.set3fv("color",i.glcolor,n),this.set4fv("backgroundColor",i.glcolor2,n),h&&d&&this.set2f("resolution",h,d,n)},onDraw:function(i){this.set2f("resolution",i.width,i.height),this.bindAndDraw(i)}});o.exports=r},92066:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(80486),a=new s({Extends:l,initialize:function(i){l.call(this,{game:i})},onDraw:function(r){var i=this.fullFrame1;this.controller?this.manager.drawFrame(r,i,!0,this.controller):this.drawFrame(r,i),this.copyToGame(i)}});o.exports=a},89581:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(35668),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(i){var n=this.game.textures.getFrame(i);n&&(this.glTexture=n.glTexture)},onDraw:function(i){var n=this.getController(),h=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.copySprite(i,h),this.copyToGame(h)}});o.exports=r},55084:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=t(69675),r=t(80486),i=t(75512),n=new s({Extends:r,initialize:function(d,u){var p=l(u,"quality",.1),m=l(u,"distance",10);r.call(this,{game:d,fragShader:i.setGlowQuality(a,d,p,m)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(h,d,u,p){h=this.getController(h),this.set1f("outerStrength",h.outerStrength,d),this.set1f("innerStrength",h.innerStrength,d),this.set4fv("glowColor",h.glcolor,d),this.setBoolean("knockout",h.knockout,d),u&&p&&this.set2f("resolution",u,p,d)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=n},41653:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(90993),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(i,n){i=this.getController(i),this.set1f("alpha",i.alpha,n),this.set1i("size",i.size,n),this.set3fv("color1",i.glcolor1,n),this.set3fv("color2",i.glcolor2,n),this.set2f("positionFrom",i.fromX,i.fromY,n),this.set2f("positionTo",i.toX,i.toY,n)}});o.exports=r},73416:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(37945),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.amount=1},onPreRender:function(i,n,h,d){i=this.getController(i),this.set1f("amount",i.amount,n),h&&d&&this.set2f("resolution",h,d,n)},onDraw:function(i){this.set2f("resolution",i.width,i.height),this.bindAndDraw(i)}});o.exports=r},58049:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(85718),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(i,n){i=this.getController(i);var h=i.samples;this.set1i("samples",h,n),this.set1f("intensity",i.intensity,n),this.set1f("decay",i.decay,n),this.set1f("power",i.power/h,n),this.set2f("lightPosition",i.x,i.y,n),this.set4fv("color",i.glcolor,n)}});o.exports=r},18026:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(13740),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(i,n,h,d){i=this.getController(i),this.setTime("time",n),this.set1f("speed",i.speed,n),this.set1f("lineWidth",i.lineWidth,n),this.set1f("gradient",i.gradient,n),this.setBoolean("reveal",i.reveal,n),h&&d&&this.set2f("resolution",h,d,n)},onDraw:function(i){this.set2f("resolution",i.width,i.height),this.bindAndDraw(i)}});o.exports=r},72381:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(80617),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(i,n){i=this.getController(i),this.set1f("radius",i.radius,n),this.set1f("strength",i.strength,n),this.set2f("position",i.x,i.y,n)}});o.exports=r},80542:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(62879),a=t(80486),r=new s({Extends:a,initialize:function(n){a.call(this,{game:n,fragShader:l}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(i,n){i=this.getController(i);var h=i.progress,d=i.wipeWidth,u=i.direction,p=i.axis;this.set4f("config",h,d,u,p,n),this.setBoolean("reveal",i.reveal,n)}});o.exports=r},58136:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Barrel:t(32469),Bloom:t(2134),Blur:t(63377),Bokeh:t(49745),Circle:t(4323),ColorMatrix:t(92066),Displacement:t(89581),Glow:t(55084),Gradient:t(41653),Pixelate:t(73416),Shadow:t(58049),Shine:t(18026),Vignette:t(72381),Wipe:t(80542)};o.exports=s},62253:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65641),l=t(98611),a={FX:t(58136),BitmapMaskPipeline:t(5583),Events:t(18970),FXPipeline:t(81828),LightPipeline:t(66901),MobilePipeline:t(71264),MultiPipeline:t(77310),PointLightPipeline:t(10919),PostFXPipeline:t(80486),PreFXPipeline:t(87228),RopePipeline:t(21213),SinglePipeline:t(51212),UtilityPipeline:t(60848)};a=l(!1,a,s),o.exports=a},2529:o=>{o.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:o=>{o.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:o=>{o.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:o=>{o.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:o=>{o.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:o=>{o.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:o=>{o.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:o=>{o.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:o=>{o.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:o=>{o.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:o=>{o.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:o=>{o.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:o=>{o.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:o=>{o.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:o=>{o.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:o=>{o.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:o=>{o.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:o=>{o.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:o=>{o.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:o=>{o.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:o=>{o.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:o=>{o.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:o=>{o.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:o=>{o.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AddBlendFrag:t(2529),BitmapMaskFrag:t(91679),BitmapMaskVert:t(89053),ColorMatrixFrag:t(37486),CopyFrag:t(79060),FXBarrelFrag:t(87751),FXBloomFrag:t(88222),FXBlurHighFrag:t(44481),FXBlurLowFrag:t(35491),FXBlurMedFrag:t(75568),FXBokehFrag:t(69960),FXCircleFrag:t(33754),FXDisplacementFrag:t(35668),FXGlowFrag:t(69675),FXGradientFrag:t(90993),FXPixelateFrag:t(37945),FXShadowFrag:t(85718),FXShineFrag:t(13740),FXVignetteFrag:t(80617),FXWipeFrag:t(62879),LightFrag:t(65045),LinearBlendFrag:t(98921),MeshFrag:t(25005),MeshVert:t(94914),MobileFrag:t(11263),MobileVert:t(51852),MultiFrag:t(53787),MultiVert:t(15968),PointLightFrag:t(83327),PointLightVert:t(54677),PostFXFrag:t(12569),QuadVert:t(99365),SingleFrag:t(85060),SingleVert:t(18166)}},756:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(55301),l=t(56694),a=t(6659),r=t(40444),i=t(97081),n=t(74181),h=t(2893),d=t(9229),u=t(72283),p=t(74118),m=t(90881),v=t(84314),g=t(93736),T=t(47751),w=new l({Extends:a,initialize:function(E){a.call(this),this.game=E,this.canvas,this.canvasBounds=new p,this.parent=null,this.parentIsWindow=!1,this.parentSize=new m,this.gameSize=new m,this.baseSize=new m,this.displaySize=new m,this.scaleMode=s.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new g(1,1),this.autoRound=!1,this.autoCenter=s.CENTER.NO_CENTER,this.orientation=s.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:u,windowResize:u,fullScreenChange:u,fullScreenError:u}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(i.BOOT,this.boot,this)},boot:function(){var b=this.game;this.canvas=b.canvas,this.fullscreen=b.device.fullscreen,this.scaleMode!==s.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===s.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),b.events.on(i.PRE_STEP,this.step,this),b.events.once(i.READY,this.refresh,this),b.events.once(i.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(b){this.getParent(b),this.getParentBounds();var E=b.width,A=b.height,R=b.scaleMode,I=b.zoom,P=b.autoRound;if(typeof E=="string")if(E.substr(-1)!=="%")E=parseInt(E,10);else{var N=this.parentSize.width;N===0&&(N=window.innerWidth);var F=parseInt(E,10)/100;E=Math.floor(N*F)}if(typeof A=="string")if(A.substr(-1)!=="%")A=parseInt(A,10);else{var O=this.parentSize.height;O===0&&(O=window.innerHeight);var D=parseInt(A,10)/100;A=Math.floor(O*D)}this.scaleMode=R,this.autoRound=P,this.autoCenter=b.autoCenter,this.resizeInterval=b.resizeInterval,P&&(E=Math.floor(E),A=Math.floor(A)),this.gameSize.setSize(E,A),I===s.ZOOM.MAX_ZOOM&&(I=this.getMaxZoom()),this.zoom=I,I!==1&&(this._resetZoom=!0),this.baseSize.setSize(E,A),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),b.minWidth>0&&this.displaySize.setMin(b.minWidth*I,b.minHeight*I),b.maxWidth>0&&this.displaySize.setMax(b.maxWidth*I,b.maxHeight*I),this.displaySize.setSize(E,A),this.orientation=d(E,A)},getParent:function(b){var E=b.parent;if(E!==null){if(this.parent=h(E),this.parentIsWindow=this.parent===document.body,b.expandParent&&b.scaleMode!==s.SCALE_MODE.NONE){var A=this.parent.getBoundingClientRect();(this.parentIsWindow||A.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",A=this.parent.getBoundingClientRect(),!this.parentIsWindow&&A.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}b.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=h(b.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var b=this.parentSize,E=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(E.height=n(!0));var A=E.width,R=E.height;if(b.width!==A||b.height!==R)return b.setSize(A,R),!0;if(this.canvas){var I=this.canvasBounds,P=this.canvas.getBoundingClientRect();if(P.x!==I.x||P.y!==I.y)return!0}return!1},lockOrientation:function(b){var E=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return E?E.call(screen,b):!1},setParentSize:function(b,E){return this.parentSize.setSize(b,E),this.refresh()},setGameSize:function(b,E){var A=this.autoRound;A&&(b=Math.floor(b),E=Math.floor(E));var R=this.width,I=this.height;return this.gameSize.resize(b,E),this.baseSize.resize(b,E),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(b/E),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(R,I)},resize:function(b,E){var A=this.zoom,R=this.autoRound;R&&(b=Math.floor(b),E=Math.floor(E));var I=this.width,P=this.height;this.gameSize.resize(b,E),this.baseSize.resize(b,E),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(b*A,E*A),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var N=this.canvas.style,F=b*A,O=E*A;return R&&(F=Math.floor(F),O=Math.floor(O)),(F!==b||O!==E)&&(N.width=F+"px",N.height=O+"px"),this.refresh(I,P)},setZoom:function(b){return this.zoom=b,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(b,E){b===void 0&&(b=this.width),E===void 0&&(E=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var A=this.game.domContainer;if(A){this.baseSize.setCSS(A);var R=this.canvas.style,I=A.style;I.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",I.marginLeft=R.marginLeft,I.marginTop=R.marginTop}return this.emit(r.RESIZE,this.gameSize,this.baseSize,this.displaySize,b,E),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var b=d(this.width,this.height);b!==this.orientation&&(this.orientation=b,this.emit(r.ORIENTATION_CHANGE,b))}},updateScale:function(){var b=this.canvas.style,E=this.gameSize.width,A=this.gameSize.height,R,I,P=this.zoom,N=this.autoRound;this.scaleMode===s.SCALE_MODE.NONE?(this.displaySize.setSize(E*P,A*P),R=this.displaySize.width,I=this.displaySize.height,N&&(R=Math.floor(R),I=Math.floor(I)),this._resetZoom&&(b.width=R+"px",b.height=I+"px",this._resetZoom=!1)):this.scaleMode===s.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),R=this.displaySize.width,I=this.displaySize.height,N&&(R=Math.floor(R),I=Math.floor(I)),this.canvas.width=R,this.canvas.height=I):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),R=this.displaySize.width,I=this.displaySize.height,N&&(R=Math.floor(R),I=Math.floor(I)),b.width=R+"px",b.height=I+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var b=v(this.parentSize.width,this.gameSize.width,0,!0),E=v(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(b,E),1)},updateCenter:function(){var b=this.autoCenter;if(b!==s.CENTER.NO_CENTER){var E=this.canvas,A=E.style,R=E.getBoundingClientRect(),I=R.width,P=R.height,N=Math.floor((this.parentSize.width-I)/2),F=Math.floor((this.parentSize.height-P)/2);b===s.CENTER.CENTER_HORIZONTALLY?F=0:b===s.CENTER.CENTER_VERTICALLY&&(N=0),A.marginLeft=N+"px",A.marginTop=F+"px"}},updateBounds:function(){var b=this.canvasBounds,E=this.canvas.getBoundingClientRect();b.x=E.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),b.y=E.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),b.width=E.width,b.height=E.height},transformX:function(b){return(b-this.canvasBounds.left)*this.displayScale.x},transformY:function(b){return(b-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(b){b===void 0&&(b={navigationUI:"hide"});var E=this.fullscreen;if(!E.available){this.emit(r.FULLSCREEN_UNSUPPORTED);return}if(!E.active){var A=this.getFullscreenTarget();E.keyboard?A[E.request](Element.ALLOW_KEYBOARD_INPUT):A[E.request](b)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(r.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(b){this.removeFullscreenTarget(),this.emit(r.FULLSCREEN_FAILED,b)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var b=document.createElement("div");b.style.margin="0",b.style.padding="0",b.style.width="100%",b.style.height="100%",this.fullscreenTarget=b,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var E=this.canvas.parentNode;E.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var b=this.fullscreenTarget;if(b&&b.parentNode){var E=b.parentNode;E.insertBefore(this.canvas,b),E.removeChild(b)}}},stopFullscreen:function(){var b=this.fullscreen;if(!b.available)return this.emit(r.FULLSCREEN_UNSUPPORTED),!1;b.active&&document[b.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(r.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(b){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(b)},startListeners:function(){var b=this,E=this.domlisteners;if(E.orientationChange=function(){b.updateBounds(),b._checkOrientation=!0,b.dirty=!0},E.windowResize=function(){b.updateBounds(),b.dirty=!0},window.addEventListener("orientationchange",E.orientationChange,!1),window.addEventListener("resize",E.windowResize,!1),this.fullscreen.available){E.fullScreenChange=function(R){return b.onFullScreenChange(R)},E.fullScreenError=function(R){return b.onFullScreenError(R)};var A=["webkit","moz",""];A.forEach(function(R){document.addEventListener(R+"fullscreenchange",E.fullScreenChange,!1),document.addEventListener(R+"fullscreenerror",E.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.addEventListener("MSFullscreenError",E.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(b,E){b instanceof T||(E=b,b=void 0),E===void 0&&(E=new p);var A=this.baseSize,R=this.parentSize,I=this.canvasBounds,P=this.displayScale,N=I.x>=0?0:-(I.x*P.x),F=I.y>=0?0:-(I.y*P.y),O;R.width>=I.width?O=A.width:O=A.width-(I.width-R.width)*P.x;var D;return R.height>=I.height?D=A.height:D=A.height-(I.height-R.height)*P.y,E.setTo(N,F,O,D),b&&(E.width/=b.zoomX,E.height/=b.zoomY,E.centerX=b.centerX+b.scrollX,E.centerY=b.centerY+b.scrollY),E},step:function(b,E){this.parent&&(this._lastCheck+=E,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var b=this.domlisteners;window.removeEventListener("orientationchange",b.orientationChange,!1),window.removeEventListener("resize",b.windowResize,!1);var E=["webkit","moz",""];E.forEach(function(A){document.removeEventListener(A+"fullscreenchange",b.fullScreenChange,!1),document.removeEventListener(A+"fullscreenerror",b.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",b.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",b.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===s.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===s.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});o.exports=w},35098:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={CENTER:t(35098),ORIENTATION:t(53539),SCALE_MODE:t(12637),ZOOM:t(10217)};o.exports=s},82085:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="enterfullscreen"},11826:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenfailed"},56691:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenunsupported"},34739:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="leavefullscreen"},26681:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="orientationchange"},11428:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"},40444:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ENTER_FULLSCREEN:t(82085),FULLSCREEN_FAILED:t(11826),FULLSCREEN_UNSUPPORTED:t(56691),LEAVE_FULLSCREEN:t(34739),ORIENTATION_CHANGE:t(26681),RESIZE:t(11428)}},86754:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(55301),a={Center:t(35098),Events:t(40444),Orientation:t(53539),ScaleManager:t(756),ScaleModes:t(12637),Zoom:t(10217)};a=s(!1,a,l.CENTER),a=s(!1,a,l.ORIENTATION),a=s(!1,a,l.SCALE_MODE),a=s(!1,a,l.ZOOM),o.exports=a},47736:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=t(40587),a=function(r){var i=r.game.config.defaultPhysicsSystem,n=s(r.settings,"physics",!1);if(!(!i&&!n)){var h=[];if(i&&h.push(l(i+"Physics")),n)for(var d in n)d=l(d.concat("Physics")),h.indexOf(d)===-1&&h.push(d);return h}};o.exports=a},91088:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a){var r=a.plugins.getDefaultScenePlugins(),i=s(a.settings,"plugins",!1);return Array.isArray(i)?i:r||[]};o.exports=l},90415:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};o.exports=y},87157:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(63946),a=new s({initialize:function(i){this.sys=new l(this,i),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});o.exports=a},13553:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(92980),a=t(7599),r=t(97081),i=t(10850),n=t(683),h=t(72283),d=t(87157),u=t(63946),p=new s({initialize:function(v,g){if(this.game=v,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,g){Array.isArray(g)||(g=[g]);for(var T=0;T<g.length;T++)this._pending.push({key:"default",scene:g[T],autoStart:T===0,data:{}})}v.events.once(r.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new d),this.game.events.emit(r.SYSTEM_READY,this.systemScene,this);var m,v,g,T;for(m=0;m<this._pending.length;m++){v=this._pending[m],g=v.key,T=v.scene;var w;T instanceof d?w=this.createSceneFromInstance(g,T):typeof T=="object"?w=this.createSceneFromObject(g,T):typeof T=="function"&&(w=this.createSceneFromFunction(g,T)),g=w.sys.settings.key,this.keys[g]=w,this.scenes.push(w),this._data[g]&&(w.sys.settings.data=this._data[g].data,this._data[g].autoStart&&(v.autoStart=!0)),(v.autoStart||w.sys.settings.active)&&this._start.push(g)}for(this._pending.length=0,this._data={},this.isBooted=!0,m=0;m<this._start.length;m++)v=this._start[m],this.start(v);this._start.length=0}},processQueue:function(){var m=this._pending.length,v=this._queue.length;if(!(m===0&&v===0)){var g,T;if(m){for(g=0;g<m;g++)T=this._pending[g],this.add(T.key,T.scene,T.autoStart,T.data);for(g=0;g<this._start.length;g++)T=this._start[g],this.start(T);this._start.length=0,this._pending.length=0}for(g=0;g<this._queue.length;g++)T=this._queue[g],this[T.op](T.keyA,T.keyB);this._queue.length=0}},add:function(m,v,g,T){if(g===void 0&&(g=!1),T===void 0&&(T={}),this.isProcessing||!this.isBooted)return this._pending.push({key:m,scene:v,autoStart:g,data:T}),this.isBooted||(this._data[m]={data:T}),null;m=this.getKey(m,v);var w;return v instanceof d?w=this.createSceneFromInstance(m,v):typeof v=="object"?(v.key=m,w=this.createSceneFromObject(m,v)):typeof v=="function"&&(w=this.createSceneFromFunction(m,v)),w.sys.settings.data=T,m=w.sys.settings.key,this.keys[m]=w,this.scenes.push(w),(g||w.sys.settings.active)&&(this._pending.length?this._start.push(m):this.start(m)),w},remove:function(m){if(this.isProcessing)this._queue.push({op:"remove",keyA:m,keyB:null});else{var v=this.getScene(m);if(!v||v.sys.isTransitioning())return this;var g=this.scenes.indexOf(v),T=v.sys.settings.key;g>-1&&(delete this.keys[T],this.scenes.splice(g,1),this._start.indexOf(T)>-1&&(g=this._start.indexOf(T),this._start.splice(g,1)),v.sys.destroy())}return this},bootScene:function(m){var v=m.sys,g=v.settings;v.sceneUpdate=h,m.init&&(m.init.call(m,g.data),g.status=l.INIT,g.isTransition&&v.events.emit(a.TRANSITION_INIT,g.transitionFrom,g.transitionDuration));var T;v.load&&(T=v.load,T.reset()),T&&m.preload?(m.preload.call(m),g.status=l.LOADING,T.once(n.COMPLETE,this.loadComplete,this),T.start()):this.create(m)},loadComplete:function(m){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(m.scene)},payloadComplete:function(m){this.bootScene(m.scene)},update:function(m,v){this.processQueue(),this.isProcessing=!0;for(var g=this.scenes.length-1;g>=0;g--){var T=this.scenes[g].sys;T.settings.status>l.START&&T.settings.status<=l.RUNNING&&T.step(m,v),T.scenePlugin._target&&T.scenePlugin.step(m,v)}},render:function(m){for(var v=0;v<this.scenes.length;v++){var g=this.scenes[v].sys;g.settings.visible&&g.settings.status>=l.LOADING&&g.settings.status<l.SLEEPING&&g.render(m)}this.isProcessing=!1},create:function(m){var v=m.sys,g=v.settings;m.create&&(g.status=l.CREATING,m.create.call(m,g.data),g.status===l.DESTROYED)||(g.isTransition&&v.events.emit(a.TRANSITION_START,g.transitionFrom,g.transitionDuration),m.update&&(v.sceneUpdate=m.update),g.status=l.RUNNING,v.events.emit(a.CREATE,m))},createSceneFromFunction:function(m,v){var g=new v;if(g instanceof d){var T=g.sys.settings.key;if(T!==""&&(m=T),this.keys.hasOwnProperty(m))throw new Error("Cannot add a Scene with duplicate key: "+m);return this.createSceneFromInstance(m,g)}else return g.sys=new u(g),g.sys.settings.key=m,g.sys.init(this.game),g},createSceneFromInstance:function(m,v){var g=v.sys.settings.key;return g===""&&(v.sys.settings.key=m),v.sys.init(this.game),v},createSceneFromObject:function(m,v){var g=new d(v),T=g.sys.settings.key;T!==""?m=T:g.sys.settings.key=m,g.sys.init(this.game);for(var w=["init","preload","create","update","render"],b=0;b<w.length;b++){var E=i(v,w[b],null);E&&(g[w[b]]=E)}if(v.hasOwnProperty("extend")){for(var A in v.extend)if(v.extend.hasOwnProperty(A)){var R=v.extend[A];A==="data"&&g.hasOwnProperty("data")&&typeof R=="object"?g.data.merge(R):A!=="sys"&&(g[A]=R)}}return g},getKey:function(m,v){if(m||(m="default"),typeof v=="function")return m;if(v instanceof d?m=v.sys.settings.key:typeof v=="object"&&v.hasOwnProperty("key")&&(m=v.key),this.keys.hasOwnProperty(m))throw new Error("Cannot add a Scene with duplicate key: "+m);return m},getScenes:function(m,v){m===void 0&&(m=!0),v===void 0&&(v=!1);for(var g=[],T=this.scenes,w=0;w<T.length;w++){var b=T[w];b&&(!m||m&&b.sys.isActive())&&g.push(b)}return v?g.reverse():g},getScene:function(m){if(typeof m=="string"){if(this.keys[m])return this.keys[m]}else for(var v=0;v<this.scenes.length;v++)if(m===this.scenes[v])return m;return null},isActive:function(m){var v=this.getScene(m);return v?v.sys.isActive():null},isPaused:function(m){var v=this.getScene(m);return v?v.sys.isPaused():null},isVisible:function(m){var v=this.getScene(m);return v?v.sys.isVisible():null},isSleeping:function(m){var v=this.getScene(m);return v?v.sys.isSleeping():null},pause:function(m,v){var g=this.getScene(m);return g&&g.sys.pause(v),this},resume:function(m,v){var g=this.getScene(m);return g&&g.sys.resume(v),this},sleep:function(m,v){var g=this.getScene(m);return g&&!g.sys.isTransitioning()&&g.sys.sleep(v),this},wake:function(m,v){var g=this.getScene(m);return g&&g.sys.wake(v),this},run:function(m,v){var g=this.getScene(m);if(!g){for(var T=0;T<this._pending.length;T++)if(this._pending[T].key===m){this.queueOp("start",m,v);break}return this}g.sys.isSleeping()?g.sys.wake(v):g.sys.isPaused()?g.sys.resume(v):this.start(m,v)},start:function(m,v){if(!this.isBooted)return this._data[m]={autoStart:!0,data:v},this;var g=this.getScene(m);if(!g)return console.warn("Scene not found for key: "+m),this;var T=g.sys,w=T.settings.status;if(w>=l.START&&w<=l.CREATING)return this;if(w>=l.RUNNING&&w<=l.SLEEPING)T.shutdown(),T.sceneUpdate=h,T.start(v);else{T.sceneUpdate=h,T.start(v);var b;if(T.load&&(b=T.load),b&&T.settings.hasOwnProperty("pack")&&(b.reset(),b.addPack({payload:T.settings.pack})))return T.settings.status=l.LOADING,b.once(n.COMPLETE,this.payloadComplete,this),b.start(),this}return this.bootScene(g),this},stop:function(m,v){var g=this.getScene(m);if(g&&!g.sys.isTransitioning()&&g.sys.settings.status!==l.SHUTDOWN){var T=g.sys.load;T&&(T.off(n.COMPLETE,this.loadComplete,this),T.off(n.COMPLETE,this.payloadComplete,this)),g.sys.shutdown(v)}return this},switch:function(m,v){var g=this.getScene(m),T=this.getScene(v);return g&&T&&g!==T&&(this.sleep(m),this.isSleeping(v)?this.wake(v):this.start(v)),this},getAt:function(m){return this.scenes[m]},getIndex:function(m){var v=this.getScene(m);return this.scenes.indexOf(v)},bringToTop:function(m){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:m,keyB:null});else{var v=this.getIndex(m);if(v!==-1&&v<this.scenes.length){var g=this.getScene(m);this.scenes.splice(v,1),this.scenes.push(g)}}return this},sendToBack:function(m){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:m,keyB:null});else{var v=this.getIndex(m);if(v!==-1&&v>0){var g=this.getScene(m);this.scenes.splice(v,1),this.scenes.unshift(g)}}return this},moveDown:function(m){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:m,keyB:null});else{var v=this.getIndex(m);if(v>0){var g=v-1,T=this.getScene(m),w=this.getAt(g);this.scenes[v]=w,this.scenes[g]=T}}return this},moveUp:function(m){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:m,keyB:null});else{var v=this.getIndex(m);if(v<this.scenes.length-1){var g=v+1,T=this.getScene(m),w=this.getAt(g);this.scenes[v]=w,this.scenes[g]=T}}return this},moveAbove:function(m,v){if(m===v)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:m,keyB:v});else{var g=this.getIndex(m),T=this.getIndex(v);if(g!==-1&&T!==-1&&T<g){var w=this.getAt(T);this.scenes.splice(T,1),this.scenes.splice(g+(T>g),0,w)}}return this},moveBelow:function(m,v){if(m===v)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:m,keyB:v});else{var g=this.getIndex(m),T=this.getIndex(v);if(g!==-1&&T!==-1&&T>g){var w=this.getAt(T);this.scenes.splice(T,1),g===0?this.scenes.unshift(w):this.scenes.splice(g-(T<g),0,w)}}return this},queueOp:function(m,v,g){return this._queue.push({op:m,keyA:v,keyB:g}),this},swapPosition:function(m,v){if(m===v)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:m,keyB:v});else{var g=this.getIndex(m),T=this.getIndex(v);if(g!==T&&g!==-1&&T!==-1){var w=this.getAt(g);this.scenes[g]=this.scenes[T],this.scenes[T]=w}}return this},dump:function(){for(var m=[],v=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],g=0;g<this.scenes.length;g++){var T=this.scenes[g].sys,w=T.settings.visible&&(T.settings.status===l.RUNNING||T.settings.status===l.PAUSED)?"[*] ":"[-] ";w+=T.settings.key+" ("+v[T.settings.status]+")",m.push(w)}console.log(m.join(`
`))},destroy:function(){for(var m=0;m<this.scenes.length;m++){var v=this.scenes[m].sys;v.destroy()}this.systemScene.sys.destroy(),this.update=h,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});o.exports=p},64051:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(7599),r=t(72632),i=t(91963),n=new l({initialize:function(d){this.scene=d,this.systems=d.sys,this.settings=d.sys.settings,this.key=d.sys.settings.key,this.manager=d.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,d.sys.events.once(a.BOOT,this.boot,this),d.sys.events.on(a.START,this.pluginStart,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},start:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",h,d),this},restart:function(h){var d=this.key;return this.manager.queueOp("stop",d),this.manager.queueOp("start",d,h),this},transition:function(h){h===void 0&&(h={});var d=r(h,"target",!1),u=this.manager.getScene(d);if(!d||!this.checkValidTransition(u))return!1;var p=r(h,"duration",1e3);this._elapsed=0,this._target=u,this._duration=p,this._willSleep=r(h,"sleep",!1),this._willRemove=r(h,"remove",!1);var m=r(h,"onUpdate",null);m&&(this._onUpdate=m,this._onUpdateScope=r(h,"onUpdateScope",this.scene));var v=r(h,"allowInput",!1);this.settings.transitionAllowInput=v;var g=u.sys.settings;g.isTransition=!0,g.transitionFrom=this.scene,g.transitionDuration=p,g.transitionAllowInput=v,r(h,"moveAbove",!1)?this.manager.moveAbove(this.key,d):r(h,"moveBelow",!1)&&this.manager.moveBelow(this.key,d),u.sys.isSleeping()?u.sys.wake(r(h,"data")):this.manager.start(d,r(h,"data"));var T=r(h,"onStart",null),w=r(h,"onStartScope",this.scene);return T&&T.call(w,this.scene,u,p),this.systems.events.emit(a.TRANSITION_OUT,u,p),!0},checkValidTransition:function(h){return!(!h||h.sys.isActive()||h.sys.isTransitioning()||h===this.scene||this.systems.isTransitioning())},step:function(h,d){this._elapsed+=d,this.transitionProgress=s(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var h=this._target.sys,d=this._target.sys.settings;h.events.emit(a.TRANSITION_COMPLETE,this.scene),d.isTransition=!1,d.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(h,d,u,p){return this.manager.add(h,d,u,p)},launch:function(h,d){return h&&h!==this.key&&this.manager.queueOp("start",h,d),this},run:function(h,d){return h&&h!==this.key&&this.manager.queueOp("run",h,d),this},pause:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("pause",h,d),this},resume:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("resume",h,d),this},sleep:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("sleep",h,d),this},wake:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("wake",h,d),this},switch:function(h){return h!==this.key&&this.manager.queueOp("switch",this.key,h),this},stop:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("stop",h,d),this},setActive:function(h,d,u){d===void 0&&(d=this.key);var p=this.manager.getScene(d);return p&&p.sys.setActive(h,u),this},setVisible:function(h,d){d===void 0&&(d=this.key);var u=this.manager.getScene(d);return u&&u.sys.setVisible(h),this},isSleeping:function(h){return h===void 0&&(h=this.key),this.manager.isSleeping(h)},isActive:function(h){return h===void 0&&(h=this.key),this.manager.isActive(h)},isPaused:function(h){return h===void 0&&(h=this.key),this.manager.isPaused(h)},isVisible:function(h){return h===void 0&&(h=this.key),this.manager.isVisible(h)},swapPosition:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.swapPosition(h,d),this},moveAbove:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.moveAbove(h,d),this},moveBelow:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.moveBelow(h,d),this},remove:function(h){return h===void 0&&(h=this.key),this.manager.remove(h),this},moveUp:function(h){return h===void 0&&(h=this.key),this.manager.moveUp(h),this},moveDown:function(h){return h===void 0&&(h=this.key),this.manager.moveDown(h),this},bringToTop:function(h){return h===void 0&&(h=this.key),this.manager.bringToTop(h),this},sendToBack:function(h){return h===void 0&&(h=this.key),this.manager.sendToBack(h),this},get:function(h){return this.manager.getScene(h)},getStatus:function(h){var d=this.manager.getScene(h);if(d)return d.sys.getStatus()},getIndex:function(h){return h===void 0&&(h=this.key),this.manager.getIndex(h)},shutdown:function(){var h=this.systems.events;h.off(a.SHUTDOWN,this.shutdown,this),h.off(a.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});i.register("ScenePlugin",n,"scenePlugin"),o.exports=n},36765:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92980),l=t(10850),a=t(30657),r=t(90415),i={create:function(n){return typeof n=="string"?n={key:n}:n===void 0&&(n={}),{status:s.PENDING,key:l(n,"key",""),active:l(n,"active",!1),visible:l(n,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:l(n,"pack",!1),cameras:l(n,"cameras",null),map:l(n,"map",a(r,l(n,"mapAdd",{}))),physics:l(n,"physics",{}),loader:l(n,"loader",{}),plugins:l(n,"plugins",!1),input:l(n,"input",{})}}};o.exports=i},63946:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(92980),a=t(18360),r=t(7599),i=t(47736),n=t(91088),h=t(72283),d=t(36765),u=new s({initialize:function(m,v){this.scene=m,this.game,this.renderer,this.config=v,this.settings=d.create(v),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=h},init:function(p){this.settings.status=l.INIT,this.sceneUpdate=h,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var m=p.plugins;this.plugins=m,m.addToScene(this,a.Global,[a.CoreScene,n(this),i(this)]),this.events.emit(r.BOOT,this),this.settings.isBooted=!0},step:function(p,m){var v=this.events;v.emit(r.PRE_UPDATE,p,m),v.emit(r.UPDATE,p,m),this.sceneUpdate.call(this.scene,p,m),v.emit(r.POST_UPDATE,p,m)},render:function(p){var m=this.displayList;m.depthSort(),this.events.emit(r.PRE_RENDER,p),this.cameras.render(p,m),this.events.emit(r.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var m=this.settings,v=this.getStatus();return v!==l.CREATING&&v!==l.RUNNING?console.warn("Cannot pause non-running Scene",m.key):this.settings.active&&(m.status=l.PAUSED,m.active=!1,this.events.emit(r.PAUSE,this,p)),this},resume:function(p){var m=this.events,v=this.settings;return this.settings.active||(v.status=l.RUNNING,v.active=!0,m.emit(r.RESUME,this,p)),this},sleep:function(p){var m=this.settings,v=this.getStatus();return v!==l.CREATING&&v!==l.RUNNING?console.warn("Cannot sleep non-running Scene",m.key):(m.status=l.SLEEPING,m.active=!1,m.visible=!1,this.events.emit(r.SLEEP,this,p)),this},wake:function(p){var m=this.events,v=this.settings;return v.status=l.RUNNING,v.active=!0,v.visible=!0,m.emit(r.WAKE,this,p),v.isTransition&&m.emit(r.TRANSITION_WAKE,v.transitionFrom,v.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var p=this.settings.status;return p>l.PENDING&&p<=l.RUNNING},isSleeping:function(){return this.settings.status===l.SLEEPING},isActive:function(){return this.settings.status===l.RUNNING},isPaused:function(){return this.settings.status===l.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,m){return p?this.resume(m):this.pause(m)},start:function(p){var m=this.events,v=this.settings;p&&(v.data=p),v.status=l.START,v.active=!0,v.visible=!0,m.emit(r.START,this),m.emit(r.READY,this,p)},shutdown:function(p){var m=this.events,v=this.settings;m.off(r.TRANSITION_INIT),m.off(r.TRANSITION_START),m.off(r.TRANSITION_COMPLETE),m.off(r.TRANSITION_OUT),v.status=l.SHUTDOWN,v.active=!1,v.visible=!1,m.emit(r.SHUTDOWN,this,p)},destroy:function(){var p=this.events,m=this.settings;m.status=l.DESTROYED,m.active=!1,m.visible=!1,p.emit(r.DESTROY,this),p.removeAllListeners();for(var v=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],g=0;g<v.length;g++)this[v[g]]=null}});o.exports=u},92980:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};o.exports=y},31803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"},94817:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},28977:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="create"},91959:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},363:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},15643:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postupdate"},17058:o=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},77125:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"},76018:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},28620:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"},41538:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"},34268:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},2342:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"},96541:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleep"},74244:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},17046:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioncomplete"},13637:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioninit"},14733:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionout"},33899:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionstart"},52418:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionwake"},31735:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},8470:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wake"},7599:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:t(31803),BOOT:t(94817),CREATE:t(28977),DESTROY:t(91959),PAUSE:t(363),POST_UPDATE:t(15643),PRE_RENDER:t(17058),PRE_UPDATE:t(77125),READY:t(76018),REMOVED_FROM_SCENE:t(28620),RENDER:t(41538),RESUME:t(34268),SHUTDOWN:t(2342),SLEEP:t(96541),START:t(74244),TRANSITION_COMPLETE:t(17046),TRANSITION_INIT:t(13637),TRANSITION_OUT:t(14733),TRANSITION_START:t(33899),TRANSITION_WAKE:t(52418),UPDATE:t(31735),WAKE:t(8470)}},20436:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92980),l=t(98611),a={Events:t(7599),GetPhysicsPlugins:t(47736),GetScenePlugins:t(91088),SceneManager:t(13553),ScenePlugin:t(64051),Settings:t(36765),Systems:t(63946)};a=l(!1,a,s),o.exports=a},25798:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(76038),r=t(98611),i=t(72283),n=new s({Extends:l,initialize:function(d,u,p){l.call(this),this.manager=d,this.key=u,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=r(this.config,p),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(console.error("addMarker "+h.name+" already exists in Sound"),!1):(h=r(!0,{name:"",start:0,duration:this.totalDuration-(h.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},h),this.markers[h.name]=h,!0)},updateMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(this.markers[h.name]=r(!0,this.markers[h.name],h),!0):(console.warn("Audio Marker: "+h.name+" missing in Sound: "+this.key),!1)},removeMarker:function(h){var d=this.markers[h];return d?(this.markers[h]=null,d):null},play:function(h,d){if(h===void 0&&(h=""),typeof h=="object"&&(d=h,h=""),typeof h!="string")return!1;if(!h)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[h])return console.warn("Marker: "+h+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[h],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=r(this.currentConfig,d),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:i,calculateRate:function(){var h=1.0005777895065548,d=this.currentConfig.detune+this.manager.detune,u=Math.pow(h,d);this.totalRate=this.currentConfig.rate*this.manager.rate*u},destroy:function(){this.pendingRemove||(this.stop(),this.emit(a.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});o.exports=n},12486:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(32742),a=t(6659),r=t(76038),i=t(97081),n=t(71608),h=t(51463),d=t(72283),u=t(93736),p=new s({Extends:a,initialize:function(v){a.call(this),this.game=v,this.jsonCache=v.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new u,v.events.on(i.BLUR,this.onGameBlur,this),v.events.on(i.FOCUS,this.onGameFocus,this),v.events.on(i.PRE_STEP,this.update,this),v.events.once(i.DESTROY,this.destroy,this)},add:d,addAudioSprite:function(m,v){v===void 0&&(v={});var g=this.add(m,v);g.spritemap=this.jsonCache.get(m).spritemap;for(var T in g.spritemap)if(g.spritemap.hasOwnProperty(T)){var w=l(v),b=g.spritemap[T];w.loop=b.hasOwnProperty("loop")?b.loop:!1,g.addMarker({name:T,start:b.start,duration:b.end-b.start,config:w})}return g},get:function(m){return h(this.sounds,"key",m)},getAll:function(m){return m?n(this.sounds,"key",m):n(this.sounds)},getAllPlaying:function(){return n(this.sounds,"isPlaying",!0)},play:function(m,v){var g=this.add(m);return g.once(r.COMPLETE,g.destroy,g),v?v.name?(g.addMarker(v),g.play(v.name)):g.play(v):g.play()},playAudioSprite:function(m,v,g){var T=this.addAudioSprite(m);return T.once(r.COMPLETE,T.destroy,T),T.play(v,g)},remove:function(m){var v=this.sounds.indexOf(m);return v!==-1?(m.destroy(),this.sounds.splice(v,1),!0):!1},removeAll:function(){this.sounds.forEach(function(m){m.destroy()}),this.sounds.length=0},removeByKey:function(m){for(var v=0,g=this.sounds.length-1;g>=0;g--){var T=this.sounds[g];T.key===m&&(T.destroy(),this.sounds.splice(g,1),v++)}return v},pauseAll:function(){this.forEachActiveSound(function(m){m.pause()}),this.emit(r.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(m){m.resume()}),this.emit(r.RESUME_ALL,this)},setListenerPosition:d,stopAll:function(){this.forEachActiveSound(function(m){m.stop()}),this.emit(r.STOP_ALL,this)},stopByKey:function(m){var v=0;return this.getAll(m).forEach(function(g){g.stop()&&v++}),v},unlock:d,onBlur:d,onFocus:d,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(m,v){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(r.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(T){T.update(m,v)})},destroy:function(){this.game.events.off(i.BLUR,this.onGameBlur,this),this.game.events.off(i.FOCUS,this.onGameFocus,this),this.game.events.off(i.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(m,v){var g=this;this.sounds.forEach(function(T,w){T&&!T.pendingRemove&&m.call(v||g,T,w,g.sounds)})},setRate:function(m){return this.rate=m,this},rate:{get:function(){return this._rate},set:function(m){this._rate=m,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(r.GLOBAL_RATE,this,m)}},setDetune:function(m){return this.detune=m,this},detune:{get:function(){return this._detune},set:function(m){this._detune=m,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(r.GLOBAL_DETUNE,this,m)}}});o.exports=p},84191:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27622),l=t(17546),a=t(55491),r={create:function(i){var n=i.config.audio,h=i.device.audio;return n.noAudio||!h.webAudio&&!h.audioData?new l(i):h.webAudio&&!n.disableWebAudio?new a(i):new s(i)}};o.exports=r},77578:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},19679:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decodedall"},56951:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decoded"},16436:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},55154:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"},57818:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"},57890:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"},83022:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"},99170:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"},64289:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="looped"},67214:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},53128:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"},73078:o=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pan"},76763:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"},88426:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},13765:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"},80291:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"},11124:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"},55382:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},71157:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seek"},31776:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stopall"},39450:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},21939:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"},33019:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"},76038:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:t(77578),DECODED:t(56951),DECODED_ALL:t(19679),DESTROY:t(16436),DETUNE:t(55154),GLOBAL_DETUNE:t(57818),GLOBAL_MUTE:t(57890),GLOBAL_RATE:t(83022),GLOBAL_VOLUME:t(99170),LOOP:t(67214),LOOPED:t(64289),MUTE:t(53128),PAN:t(73078),PAUSE_ALL:t(76763),PAUSE:t(88426),PLAY:t(13765),RATE:t(80291),RESUME_ALL:t(11124),RESUME:t(55382),SEEK:t(71157),STOP_ALL:t(31776),STOP:t(39450),UNLOCKED:t(21939),VOLUME:t(33019)}},34350:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25798),l=t(56694),a=t(76038),r=t(82897),i=new l({Extends:s,initialize:function(h,d,u){if(u===void 0&&(u={}),this.tags=h.game.cache.audio.get(d),!this.tags)throw new Error('No cached audio asset with key "'+d);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,s.call(this,h,d,u)},play:function(n,h){return this.manager.isLocked(this,"play",[n,h])||!s.prototype.play.call(this,n,h)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!s.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!s.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(a.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var n=this.currentConfig.seek,h=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+n;return this.previousTime=d,this.audio.currentTime=d,this.applyConfig(),h===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+h*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var n=0;n<this.tags.length;n++){var h=this.tags[n];if(h.dataset.used==="false")return h.dataset.used="true",this.audio=h,!0}if(!this.manager.override)return!1;var d=[];this.manager.forEachActiveSound(function(p){p.key===this.key&&p.audio&&d.push(p)},this),d.sort(function(p,m){return p.loop===m.loop?m.seek/m.duration-p.seek/p.duration:p.loop?1:-1});var u=d[0];return this.audio=u.audio,u.reset(),u.audio=null,u.startTime=0,u.previousTime=0,!0},playCatchPromise:function(){var n=this.audio.play();n&&n.catch(function(h){console.warn(h)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){s.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(n){if(this.isPlaying){if(this.startTime>0){this.startTime<n-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,n-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var h=this.currentMarker?this.currentMarker.start:0,d=h+this.duration,u=this.audio.currentTime;if(this.currentConfig.loop)u>=d-this.manager.loopEndOffset?(this.audio.currentTime=h+Math.max(0,u-d),u=this.audio.currentTime):u<h&&(this.audio.currentTime+=h,u=this.audio.currentTime),u<this.previousTime&&this.emit(a.LOOPED,this);else if(u>=d){this.reset(),this.stopAndReleaseAudioTag(),this.emit(a.COMPLETE,this);return}this.previousTime=u}},destroy:function(){s.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=r(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){s.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(n){this.currentConfig.mute=n,!this.manager.isLocked(this,"mute",n)&&(this.updateMute(),this.emit(a.MUTE,this,n))}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.currentConfig.volume},set:function(n){this.currentConfig.volume=n,!this.manager.isLocked(this,"volume",n)&&(this.updateVolume(),this.emit(a.VOLUME,this,n))}},setVolume:function(n){return this.volume=n,this},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,!this.manager.isLocked(this,a.RATE,n)&&(this.calculateRate(),this.emit(a.RATE,this,n))}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,!this.manager.isLocked(this,a.DETUNE,n)&&(this.calculateRate(),this.emit(a.DETUNE,this,n))}},setDetune:function(n){return this.detune=n,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.isLocked(this,"seek",n)||this.startTime>0||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.isPlaying?(this.previousTime=n,this.audio.currentTime=n):this.isPaused&&(this.currentConfig.seek=n),this.emit(a.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,!this.manager.isLocked(this,"loop",n)&&(this.audio&&(this.audio.loop=n),this.emit(a.LOOP,this,n))}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.currentConfig.pan},set:function(n){this.currentConfig.pan=n,this.emit(a.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});o.exports=i},27622:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12486),l=t(56694),a=t(76038),r=t(34350),i=new l({Extends:s,initialize:function(h){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,s.call(this,h)},add:function(n,h){var d=new r(this,n,h);return this.sounds.push(d),d},unlock:function(){this.locked=!1;var n=this;if(this.game.cache.audio.entries.each(function(p,m){for(var v=0;v<m.length;v++)if(m[v].dataset.locked==="true")return n.locked=!0,!1;return!0}),!!this.locked){var h=!1,d=function(){h=!0},u=function(){if(h){h=!1;return}document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",u);var p=[];if(n.game.cache.audio.entries.each(function(v,g){for(var T=0;T<g.length;T++){var w=g[T];w.dataset.locked==="true"&&p.push(w)}return!0}),p.length!==0){var m=p[p.length-1];m.oncanplaythrough=function(){m.oncanplaythrough=null,p.forEach(function(v){v.dataset.locked="false"}),n.unlocked=!0},p.forEach(function(v){v.load()})}};this.once(a.UNLOCKED,function(){for(this.forEachActiveSound(function(m){m.currentMarker===null&&m.duration===0&&(m.duration=m.tags[0].duration),m.totalDuration=m.tags[0].duration});this.lockedActionsQueue.length;){var p=this.lockedActionsQueue.shift();p.sound[p.prop].apply?p.sound[p.prop].apply(p.sound,p.value||[]):p.sound[p.prop]=p.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",u,!1)}},onBlur:function(){this.forEachActiveSound(function(n){n.isPlaying&&(this.onBlurPausedSounds.push(n),n.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(n){n.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){s.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(n,h,d){return n.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:n,prop:h,value:d}),!0):!1},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this._mute},set:function(n){this._mute=n,this.forEachActiveSound(function(h){h.updateMute()}),this.emit(a.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this._volume},set:function(n){this._volume=n,this.forEachActiveSound(function(h){h.updateVolume()}),this.emit(a.GLOBAL_VOLUME,this,n)}}});o.exports=i},56751:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SoundManagerCreator:t(84191),Events:t(76038),BaseSound:t(25798),BaseSoundManager:t(12486),WebAudioSound:t(96008),WebAudioSoundManager:t(55491),HTML5AudioSound:t(34350),HTML5AudioSoundManager:t(27622),NoAudioSound:t(38662),NoAudioSoundManager:t(17546)}},38662:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25798),l=t(56694),a=t(6659),r=t(98611),i=t(72283),n=function(){return!1},h=function(){return null},d=function(){return this},u=new l({Extends:a,initialize:function(m,v,g){g===void 0&&(g={}),a.call(this),this.manager=m,this.key=v,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=r({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:h,play:n,pause:n,resume:n,stop:n,setMute:d,setVolume:d,setRate:d,setDetune:d,setSeek:d,setLoop:d,setPan:d,applyConfig:h,resetConfig:h,update:i,calculateRate:h,destroy:function(){s.prototype.destroy.call(this)}});o.exports=u},17546:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12486),l=t(56694),a=t(6659),r=t(38662),i=t(72283),n=new l({Extends:a,initialize:function(d){a.call(this),this.game=d,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(h,d){var u=new r(this,h,d);return this.sounds.push(u),u},addAudioSprite:function(h,d){var u=this.add(h,d);return u.spritemap={},u},get:function(h){return s.prototype.get.call(this,h)},getAll:function(h){return s.prototype.getAll.call(this,h)},play:function(h,d){return!1},playAudioSprite:function(h,d,u){return!1},remove:function(h){return s.prototype.remove.call(this,h)},removeAll:function(){return s.prototype.removeAll.call(this)},removeByKey:function(h){return s.prototype.removeByKey.call(this,h)},stopByKey:function(h){return s.prototype.stopByKey.call(this,h)},onBlur:i,onFocus:i,onGameBlur:i,onGameFocus:i,pauseAll:i,resumeAll:i,stopAll:i,update:i,setRate:i,setDetune:i,setMute:i,setVolume:i,unlock:i,forEachActiveSound:function(h,d){s.prototype.forEachActiveSound.call(this,h,d)},destroy:function(){s.prototype.destroy.call(this)}});o.exports=n},96008:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25798),l=t(56694),a=t(76038),r=t(72632),i=new l({Extends:s,initialize:function(h,d,u){if(u===void 0&&(u={}),this.audioBuffer=h.game.cache.audio.get(d),!this.audioBuffer)throw new Error('Audio key "'+d+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=h.context.createGain(),this.volumeNode=h.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),h.context.createPanner&&(this.spatialNode=h.context.createPanner(),this.volumeNode.connect(this.spatialNode)),h.context.createStereoPanner?(this.pannerNode=h.context.createStereoPanner(),h.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(h.destination)):h.context.createPanner?this.spatialNode.connect(h.destination):this.volumeNode.connect(h.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,s.call(this,h,d,u)},play:function(n,h){return s.prototype.play.call(this,n,h)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(a.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(a.RESUME,this),!0)},stop:function(){return s.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(a.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,h=this.currentConfig.delay,d=this.manager.context.currentTime+h,u=(this.currentMarker?this.currentMarker.start:0)+n,p=this.duration-n;this.playTime=d-n,this.startTime=d,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,d),Math.max(0,u),Math.max(0,p)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),h=this.currentMarker?this.currentMarker.start:0,d=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,h),Math.max(0,d))},createBufferSource:function(){var n=this,h=this.manager.context.createBufferSource();return h.buffer=this.audioBuffer,h.connect(this.muteNode),h.onended=function(d){d.target===n.source&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},h},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var n=this.currentConfig.source;if(n&&this.manager.context.createPanner){var h=this.spatialNode;h.panningModel=r(n,"panningModel","equalpower"),h.distanceModel=r(n,"distanceModel","inverse"),h.orientationX.value=r(n,"orientationX",0),h.orientationY.value=r(n,"orientationY",0),h.orientationZ.value=r(n,"orientationZ",-1),h.refDistance=r(n,"refDistance",1),h.maxDistance=r(n,"maxDistance",1e4),h.rolloffFactor=r(n,"rolloffFactor",1),h.coneInnerAngle=r(n,"coneInnerAngle",360),h.coneOuterAngle=r(n,"coneOuterAngle",0),h.coneOuterGain=r(n,"coneOuterGain",0),this.spatialSource=r(n,"follow",null),this.spatialSource||(h.positionX.value=r(n,"x",0),h.positionY.value=r(n,"y",0),h.positionZ.value=r(n,"z",0))}s.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(n){this.spatialNode&&(this.spatialNode.positionX.value=n)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(n){this.spatialNode&&(this.spatialNode.positionY.value=n)}},update:function(){if(this.isPlaying&&this.spatialSource){var n=r(this.spatialSource,"x",null),h=r(this.spatialSource,"y",null);n&&n!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=n),h&&h!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=h)}this.hasEnded?(this.hasEnded=!1,s.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(a.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(a.LOOPED,this))},destroy:function(){this.pendingRemove||(s.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){s.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,h=0;h<this.rateUpdates.length;h++){var d=0;h<this.rateUpdates.length-1?d=this.rateUpdates[h+1].time:d=this.manager.context.currentTime-this.playTime,n+=(d-this.rateUpdates[h].time)*this.rateUpdates[h].rate}return n},getLoopTime:function(){for(var n=0,h=0;h<this.rateUpdates.length-1;h++)n+=(this.rateUpdates[h+1].time-this.rateUpdates[h].time)*this.rateUpdates[h].rate;var d=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+d.time+(this.duration-n)/d.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(a.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(a.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(a.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(a.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(a.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(a.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(a.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});o.exports=i},55491:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82329),l=t(12486),a=t(56694),r=t(76038),i=t(97081),n=t(96008),h=t(72632),d=new a({Extends:l,initialize:function(p){this.context=this.createAudioContext(p),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),l.call(this,p),this.locked&&p.isBooted?this.unlock():p.events.once(i.BOOT,this.unlock,this)},createAudioContext:function(u){var p=u.config.audio;if(p.context)return p.context.resume(),p.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(u){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=u,this.masterMuteNode=u.createGain(),this.masterVolumeNode=u.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(u.destination),this.destination=this.masterMuteNode,this},add:function(u,p){var m=new n(this,u,p);return this.sounds.push(m),m},decodeAudio:function(u,p){var m;Array.isArray(u)?m=u:m=[{key:u,data:p}];for(var v=this.game.cache.audio,g=m.length,T=0;T<m.length;T++){var w=m[T],b=w.key,E=w.data;typeof E=="string"&&(E=s(E));var A=(function(I,P){v.add(I,P),this.emit(r.DECODED,I),g--,g===0&&this.emit(r.DECODED_ALL)}).bind(this,b),R=(function(I,P){console.error("Error decoding audio: "+I+" - ",P?P.message:""),g--,g===0&&this.emit(r.DECODED_ALL)}).bind(this,b);this.context.decodeAudioData(E,A,R)}},setListenerPosition:function(u,p){return u===void 0&&(u=this.game.scale.width/2),p===void 0&&(p=this.game.scale.height/2),this.listenerPosition.set(u,p),this},unlock:function(){var u=this,p=document.body,m=function v(){if(u.context&&p){var g=p.removeEventListener.bind(p);u.context.resume().then(function(){g("touchstart",v),g("touchend",v),g("click",v),g("keydown",v),u.unlocked=!0},function(){g("touchstart",v),g("touchend",v),g("click",v),g("keydown",v)})}};p&&(p.addEventListener("touchstart",m,!1),p.addEventListener("touchend",m,!1),p.addEventListener("click",m,!1),p.addEventListener("keydown",m,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var u=this.context;u&&!this.locked&&(u.state==="suspended"||u.state==="interrupted")&&u.resume()},update:function(u,p){var m=this.context.listener;if(m&&m.positionX!==void 0){var v=h(this.listenerPosition,"x",null),g=h(this.listenerPosition,"y",null);v&&v!==this._spatialx&&(this._spatialx=m.positionX.value=v),g&&g!==this._spatialy&&(this._spatialy=m.positionY.value=g)}l.prototype.update.call(this,u,p),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var u=this;this.context.close().then(function(){u.context=null})}l.prototype.destroy.call(this)},setMute:function(u){return this.mute=u,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(u){this.masterMuteNode.gain.setValueAtTime(u?0:1,0),this.emit(r.GLOBAL_MUTE,this,u)}},setVolume:function(u){return this.volume=u,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(u){this.masterVolumeNode.gain.setValueAtTime(u,0),this.emit(r.GLOBAL_VOLUME,this,u)}}});o.exports=d},71207:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59959),l=t(56694),a=t(72283),r=t(17922),i=new l({initialize:function(h){this.parent=h,this.list=[],this.position=0,this.addCallback=a,this.removeCallback=a,this._sortKey=""},add:function(n,h){return h?s.Add(this.list,n):s.Add(this.list,n,0,this.addCallback,this)},addAt:function(n,h,d){return d?s.AddAt(this.list,n,h):s.AddAt(this.list,n,h,0,this.addCallback,this)},getAt:function(n){return this.list[n]},getIndex:function(n){return this.list.indexOf(n)},sort:function(n,h){return n?(h===void 0&&(h=function(d,u){return d[n]-u[n]}),r(this.list,h),this):this},getByName:function(n){return s.GetFirst(this.list,"name",n)},getRandom:function(n,h){return s.GetRandom(this.list,n,h)},getFirst:function(n,h,d,u){return s.GetFirst(this.list,n,h,d,u)},getAll:function(n,h,d,u){return s.GetAll(this.list,n,h,d,u)},count:function(n,h){return s.CountAllMatching(this.list,n,h)},swap:function(n,h){s.Swap(this.list,n,h)},moveTo:function(n,h){return s.MoveTo(this.list,n,h)},moveAbove:function(n,h){return s.MoveAbove(this.list,n,h)},moveBelow:function(n,h){return s.MoveBelow(this.list,n,h)},remove:function(n,h){return h?s.Remove(this.list,n):s.Remove(this.list,n,this.removeCallback,this)},removeAt:function(n,h){return h?s.RemoveAt(this.list,n):s.RemoveAt(this.list,n,this.removeCallback,this)},removeBetween:function(n,h,d){return d?s.RemoveBetween(this.list,n,h):s.RemoveBetween(this.list,n,h,this.removeCallback,this)},removeAll:function(n){for(var h=this.list.length;h--;)this.remove(this.list[h],n);return this},bringToTop:function(n){return s.BringToTop(this.list,n)},sendToBack:function(n){return s.SendToBack(this.list,n)},moveUp:function(n){return s.MoveUp(this.list,n),n},moveDown:function(n){return s.MoveDown(this.list,n),n},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(n,h){return s.Replace(this.list,n,h)},exists:function(n){return this.list.indexOf(n)>-1},setAll:function(n,h,d,u){return s.SetAll(this.list,n,h,d,u),this},each:function(n,h){for(var d=[null],u=2;u<arguments.length;u++)d.push(arguments[u]);for(u=0;u<this.list.length;u++)d[0]=this.list[u],n.apply(h,d)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});o.exports=i},33885:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){this.entries={},this.size=0,this.setAll(r)},setAll:function(a){if(Array.isArray(a))for(var r=0;r<a.length;r++)this.set(a[r][0],a[r][1]);return this},set:function(a,r){return this.has(a)||this.size++,this.entries[a]=r,this},get:function(a){if(this.has(a))return this.entries[a]},getArray:function(){var a=[],r=this.entries;for(var i in r)a.push(r[i]);return a},has:function(a){return this.entries.hasOwnProperty(a)},delete:function(a){return this.has(a)&&(delete this.entries[a],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(a){delete this.entries[a]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var a=[],r=this.entries;for(var i in r)a.push(r[i]);return a},dump:function(){var a=this.entries;console.group("Map");for(var r in a)console.log(r,a[r]);console.groupEnd()},each:function(a){var r=this.entries;for(var i in r)if(a(i,r[i])===!1)break;return this},contains:function(a){var r=this.entries;for(var i in r)if(r[i]===a)return!0;return!1},merge:function(a,r){r===void 0&&(r=!1);var i=this.entries,n=a.entries;for(var h in n)i.hasOwnProperty(h)&&r?i[h]=n[h]:this.set(h,n[h]);return this}});o.exports=l},74623:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(36716),r=new s({Extends:l,initialize:function(){l.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(i){return this._active.indexOf(i)>-1},isPending:function(i){return this._toProcess>0&&this._pending.indexOf(i)>-1},isDestroying:function(i){return this._destroy.indexOf(i)>-1},add:function(i){return this.checkQueue&&this.isActive(i)&&!this.isDestroying(i)||this.isPending(i)||(this._pending.push(i),this._toProcess++),i},remove:function(i){if(this.isPending(i)){var n=this._pending,h=n.indexOf(i);h!==-1&&n.splice(h,1)}else this.isActive(i)&&(this._destroy.push(i),this._toProcess++);return i},removeAll:function(){for(var i=this._active,n=this._destroy,h=i.length;h--;)n.push(i[h]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var i=this._destroy,n=this._active,h,d;for(h=0;h<i.length;h++){d=i[h];var u=n.indexOf(d);u!==-1&&(n.splice(u,1),this.emit(a.PROCESS_QUEUE_REMOVE,d))}for(i.length=0,i=this._pending,h=0;h<i.length;h++)d=i[h],(!this.checkQueue||this.checkQueue&&n.indexOf(d)===-1)&&(n.push(d),this.emit(a.PROCESS_QUEUE_ADD,d));return i.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});o.exports=r},68687:(o,y,t)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(53466);function l(E){if(!(this instanceof l))return new l(E);this._maxEntries=Math.max(4,E||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}l.prototype={all:function(){return this._all(this.data,[])},search:function(E){var A=this.data,R=[],I=this.toBBox;if(!T(E,A))return R;for(var P=[],N,F,O,D;A;){for(N=0,F=A.children.length;N<F;N++)O=A.children[N],D=A.leaf?I(O):O,T(E,D)&&(A.leaf?R.push(O):g(E,D)?this._all(O,R):P.push(O));A=P.pop()}return R},collides:function(E){var A=this.data,R=this.toBBox;if(!T(E,A))return!1;for(var I=[],P,N,F,O;A;){for(P=0,N=A.children.length;P<N;P++)if(F=A.children[P],O=A.leaf?R(F):F,T(E,O)){if(A.leaf||g(E,O))return!0;I.push(F)}A=I.pop()}return!1},load:function(E){if(!(E&&E.length))return this;if(E.length<this._minEntries){for(var A=0,R=E.length;A<R;A++)this.insert(E[A]);return this}var I=this._build(E.slice(),0,E.length-1,0);if(!this.data.children.length)this.data=I;else if(this.data.height===I.height)this._splitRoot(this.data,I);else{if(this.data.height<I.height){var P=this.data;this.data=I,I=P}this._insert(I,this.data.height-I.height-1,!0)}return this},insert:function(E){return E&&this._insert(E,this.data.height-1),this},clear:function(){return this.data=w([]),this},remove:function(E,A){if(!E)return this;for(var R=this.data,I=this.toBBox(E),P=[],N=[],F,O,D,L;R||P.length;){if(R||(R=P.pop(),O=P[P.length-1],F=N.pop(),L=!0),R.leaf&&(D=a(E,R.children,A),D!==-1))return R.children.splice(D,1),P.push(R),this._condense(P),this;!L&&!R.leaf&&g(R,I)?(P.push(R),N.push(F),F=0,O=R,R=R.children[0]):O?(F++,R=O.children[F],L=!1):R=null}return this},toBBox:function(E){return E},compareMinX:h,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(E){return this.data=E,this},_all:function(E,A){for(var R=[];E;)E.leaf?A.push.apply(A,E.children):R.push.apply(R,E.children),E=R.pop();return A},_build:function(E,A,R,I){var P=R-A+1,N=this._maxEntries,F;if(P<=N)return F=w(E.slice(A,R+1)),r(F,this.toBBox),F;I||(I=Math.ceil(Math.log(P)/Math.log(N)),N=Math.ceil(P/Math.pow(N,I-1))),F=w([]),F.leaf=!1,F.height=I;var O=Math.ceil(P/N),D=O*Math.ceil(Math.sqrt(N)),L,z,X,H;for(b(E,A,R,D,this.compareMinX),L=A;L<=R;L+=D)for(X=Math.min(L+D-1,R),b(E,L,X,O,this.compareMinY),z=L;z<=X;z+=O)H=Math.min(z+O-1,X),F.children.push(this._build(E,z,H,I-1));return r(F,this.toBBox),F},_chooseSubtree:function(E,A,R,I){for(var P,N,F,O,D,L,z,X;I.push(A),!(A.leaf||I.length-1===R);){for(z=X=1/0,P=0,N=A.children.length;P<N;P++)F=A.children[P],D=u(F),L=m(E,F)-D,L<X?(X=L,z=D<z?D:z,O=F):L===X&&D<z&&(z=D,O=F);A=O||A.children[0]}return A},_insert:function(E,A,R){var I=this.toBBox,P=R?E:I(E),N=[],F=this._chooseSubtree(P,this.data,A,N);for(F.children.push(E),n(F,P);A>=0&&N[A].children.length>this._maxEntries;)this._split(N,A),A--;this._adjustParentBBoxes(P,N,A)},_split:function(E,A){var R=E[A],I=R.children.length,P=this._minEntries;this._chooseSplitAxis(R,P,I);var N=this._chooseSplitIndex(R,P,I),F=w(R.children.splice(N,R.children.length-N));F.height=R.height,F.leaf=R.leaf,r(R,this.toBBox),r(F,this.toBBox),A?E[A-1].children.push(F):this._splitRoot(R,F)},_splitRoot:function(E,A){this.data=w([E,A]),this.data.height=E.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(E,A,R){var I,P,N,F,O,D,L,z;for(D=L=1/0,I=A;I<=R-A;I++)P=i(E,0,I,this.toBBox),N=i(E,I,R,this.toBBox),F=v(P,N),O=u(P)+u(N),F<D?(D=F,z=I,L=O<L?O:L):F===D&&O<L&&(L=O,z=I);return z},_chooseSplitAxis:function(E,A,R){var I=E.leaf?this.compareMinX:h,P=E.leaf?this.compareMinY:d,N=this._allDistMargin(E,A,R,I),F=this._allDistMargin(E,A,R,P);N<F&&E.children.sort(I)},_allDistMargin:function(E,A,R,I){E.children.sort(I);var P=this.toBBox,N=i(E,0,A,P),F=i(E,R-A,R,P),O=p(N)+p(F),D,L;for(D=A;D<R-A;D++)L=E.children[D],n(N,E.leaf?P(L):L),O+=p(N);for(D=R-A-1;D>=A;D--)L=E.children[D],n(F,E.leaf?P(L):L),O+=p(F);return O},_adjustParentBBoxes:function(E,A,R){for(var I=R;I>=0;I--)n(A[I],E)},_condense:function(E){for(var A=E.length-1,R;A>=0;A--)E[A].children.length===0?A>0?(R=E[A-1].children,R.splice(R.indexOf(E[A]),1)):this.clear():r(E[A],this.toBBox)},compareMinX:function(E,A){return E.left-A.left},compareMinY:function(E,A){return E.top-A.top},toBBox:function(E){return{minX:E.left,minY:E.top,maxX:E.right,maxY:E.bottom}}};function a(E,A,R){if(!R)return A.indexOf(E);for(var I=0;I<A.length;I++)if(R(E,A[I]))return I;return-1}function r(E,A){i(E,0,E.children.length,A,E)}function i(E,A,R,I,P){P||(P=w(null)),P.minX=1/0,P.minY=1/0,P.maxX=-1/0,P.maxY=-1/0;for(var N=A,F;N<R;N++)F=E.children[N],n(P,E.leaf?I(F):F);return P}function n(E,A){return E.minX=Math.min(E.minX,A.minX),E.minY=Math.min(E.minY,A.minY),E.maxX=Math.max(E.maxX,A.maxX),E.maxY=Math.max(E.maxY,A.maxY),E}function h(E,A){return E.minX-A.minX}function d(E,A){return E.minY-A.minY}function u(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function p(E){return E.maxX-E.minX+(E.maxY-E.minY)}function m(E,A){return(Math.max(A.maxX,E.maxX)-Math.min(A.minX,E.minX))*(Math.max(A.maxY,E.maxY)-Math.min(A.minY,E.minY))}function v(E,A){var R=Math.max(E.minX,A.minX),I=Math.max(E.minY,A.minY),P=Math.min(E.maxX,A.maxX),N=Math.min(E.maxY,A.maxY);return Math.max(0,P-R)*Math.max(0,N-I)}function g(E,A){return E.minX<=A.minX&&E.minY<=A.minY&&A.maxX<=E.maxX&&A.maxY<=E.maxY}function T(E,A){return A.minX<=E.maxX&&A.minY<=E.maxY&&A.maxX>=E.minX&&A.maxY>=E.minY}function w(E){return{children:E,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(E,A,R,I,P){for(var N=[A,R],F;N.length;)R=N.pop(),A=N.pop(),!(R-A<=I)&&(F=A+Math.ceil((R-A)/I/2)*I,s(E,F,A,R,P),N.push(A,F,F,R))}o.exports=l},58403:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){if(this.entries=[],Array.isArray(r))for(var i=0;i<r.length;i++)this.set(r[i])},set:function(a){return this.entries.indexOf(a)===-1&&this.entries.push(a),this},get:function(a,r){for(var i=0;i<this.entries.length;i++){var n=this.entries[i];if(n[a]===r)return n}},getArray:function(){return this.entries.slice(0)},delete:function(a){var r=this.entries.indexOf(a);return r>-1&&this.entries.splice(r,1),this},dump:function(){console.group("Set");for(var a=0;a<this.entries.length;a++){var r=this.entries[a];console.log(r)}console.groupEnd()},each:function(a,r){var i,n=this.entries.slice(),h=n.length;if(r)for(i=0;i<h&&a.call(r,n[i],i)!==!1;i++);else for(i=0;i<h&&a(n[i],i)!==!1;i++);return this},iterate:function(a,r){var i,n=this.entries.length;if(r)for(i=0;i<n&&a.call(r,this.entries[i],i)!==!1;i++);else for(i=0;i<n&&a(this.entries[i],i)!==!1;i++);return this},iterateLocal:function(a){var r,i=[];for(r=1;r<arguments.length;r++)i.push(arguments[r]);var n=this.entries.length;for(r=0;r<n;r++){var h=this.entries[r];h[a].apply(h,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(a){return this.entries.indexOf(a)>-1},union:function(a){var r=new l;return a.entries.forEach(function(i){r.set(i)}),this.entries.forEach(function(i){r.set(i)}),r},intersect:function(a){var r=new l;return this.entries.forEach(function(i){a.contains(i)&&r.set(i)}),r},difference:function(a){var r=new l;return this.entries.forEach(function(i){a.contains(i)||r.set(i)}),r},size:{get:function(){return this.entries.length},set:function(a){return a<this.entries.length?this.entries.length=a:this.entries.length}}});o.exports=l},90881:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82897),l=t(56694),a=t(84314),r=t(93736),i=new l({initialize:function(h,d,u,p){h===void 0&&(h=0),d===void 0&&(d=h),u===void 0&&(u=0),p===void 0&&(p=null),this._width=h,this._height=d,this._parent=p,this.aspectMode=u,this.aspectRatio=d===0?1:h/d,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new r},setAspectMode:function(n){return n===void 0&&(n=0),this.aspectMode=n,this.setSize(this._width,this._height)},setSnap:function(n,h){return n===void 0&&(n=0),h===void 0&&(h=n),this.snapTo.set(n,h),this.setSize(this._width,this._height)},setParent:function(n){return this._parent=n,this.setSize(this._width,this._height)},setMin:function(n,h){return n===void 0&&(n=0),h===void 0&&(h=n),this.minWidth=s(n,0,this.maxWidth),this.minHeight=s(h,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(n,h){return n===void 0&&(n=Number.MAX_VALUE),h===void 0&&(h=n),this.maxWidth=s(n,this.minWidth,Number.MAX_VALUE),this.maxHeight=s(h,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(n,h){switch(n===void 0&&(n=0),h===void 0&&(h=n),this.aspectMode){case i.NONE:this._width=this.getNewWidth(a(n,this.snapTo.x)),this._height=this.getNewHeight(a(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case i.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(a(n,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case i.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(a(h,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case i.FIT:this.constrain(n,h,!0);break;case i.ENVELOP:this.constrain(n,h,!1);break}return this},setAspectRatio:function(n){return this.aspectRatio=n,this.setSize(this._width,this._height)},resize:function(n,h){return this._width=this.getNewWidth(a(n,this.snapTo.x)),this._height=this.getNewHeight(a(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(n,h){return h===void 0&&(h=!0),n=s(n,this.minWidth,this.maxWidth),h&&this._parent&&n>this._parent.width&&(n=Math.max(this.minWidth,this._parent.width)),n},getNewHeight:function(n,h){return h===void 0&&(h=!0),n=s(n,this.minHeight,this.maxHeight),h&&this._parent&&n>this._parent.height&&(n=Math.max(this.minHeight,this._parent.height)),n},constrain:function(n,h,d){n===void 0&&(n=0),h===void 0&&(h=n),d===void 0&&(d=!0),n=this.getNewWidth(n),h=this.getNewHeight(h);var u=this.snapTo,p=h===0?1:n/h;return d&&this.aspectRatio>p||!d&&this.aspectRatio<p?(n=a(n,u.x),h=n/this.aspectRatio,u.y>0&&(h=a(h,u.y),n=h*this.aspectRatio)):(d&&this.aspectRatio<p||!d&&this.aspectRatio>p)&&(h=a(h,u.y),n=h*this.aspectRatio,u.x>0&&(n=a(n,u.x),h=n*(1/this.aspectRatio))),this._width=n,this._height=h,this},fitTo:function(n,h){return this.constrain(n,h,!0)},envelop:function(n,h){return this.constrain(n,h,!1)},setWidth:function(n){return this.setSize(n,this._height)},setHeight:function(n){return this.setSize(this._width,n)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(n){n&&n.style&&(n.style.width=this._width+"px",n.style.height=this._height+"px")},copy:function(n){return n.setAspectMode(this.aspectMode),n.aspectRatio=this.aspectRatio,n.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(n){this.setSize(n,this._height)}},height:{get:function(){return this._height},set:function(n){this.setSize(this._width,n)}}});i.NONE=0,i.WIDTH_CONTROLS_HEIGHT=1,i.HEIGHT_CONTROLS_WIDTH=2,i.FIT=3,i.ENVELOP=4,o.exports=i},94160:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},95393:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},36716:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={PROCESS_QUEUE_ADD:t(94160),PROCESS_QUEUE_REMOVE:t(95393)}},20010:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:t(36716),List:t(71207),Map:t(33885),ProcessQueue:t(74623),RTree:t(68687),Set:t(58403),Size:t(90881)}},17487:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82897),a=t(27119),r=t(86459),i=t(28621),n=t(31673),h=new s({Extends:n,initialize:function(u,p,m,v,g){n.call(this,u,p,m,v,g),this.add("__BASE",0,0,0,v,g),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=v,this.height=g,this.imageData=this.context.getImageData(0,0,v,g),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===r.WEBGL&&this.refresh(),this},draw:function(d,u,p,m){return m===void 0&&(m=!0),this.context.drawImage(p,d,u),m&&this.update(),this},drawFrame:function(d,u,p,m,v){p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=!0);var g=this.manager.getFrame(d,u);if(g){var T=g.canvasData,w=g.cutWidth,b=g.cutHeight,E=g.source.resolution;this.context.drawImage(g.source.image,T.x,T.y,w,b,p,m,w/E,b/E),v&&this.update()}return this},setPixel:function(d,u,p,m,v,g){g===void 0&&(g=255),d=Math.abs(Math.floor(d)),u=Math.abs(Math.floor(u));var T=this.getIndex(d,u);if(T>-1){var w=this.context.getImageData(d,u,1,1);w.data[0]=p,w.data[1]=m,w.data[2]=v,w.data[3]=g,this.context.putImageData(w,d,u)}return this},putData:function(d,u,p,m,v,g,T){return m===void 0&&(m=0),v===void 0&&(v=0),g===void 0&&(g=d.width),T===void 0&&(T=d.height),this.context.putImageData(d,u,p,m,v,g,T),this},getData:function(d,u,p,m){d=l(Math.floor(d),0,this.width-1),u=l(Math.floor(u),0,this.height-1),p=l(p,1,this.width-d),m=l(m,1,this.height-u);var v=this.context.getImageData(d,u,p,m);return v},getPixel:function(d,u,p){p||(p=new a);var m=this.getIndex(d,u);if(m>-1){var v=this.data,g=v[m+0],T=v[m+1],w=v[m+2],b=v[m+3];p.setTo(g,T,w,b)}return p},getPixels:function(d,u,p,m){d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=this.width),m===void 0&&(m=p),d=Math.abs(Math.round(d)),u=Math.abs(Math.round(u));for(var v=l(d,0,this.width),g=l(d+p,0,this.width),T=l(u,0,this.height),w=l(u+m,0,this.height),b=new a,E=[],A=T;A<w;A++){for(var R=[],I=v;I<g;I++)b=this.getPixel(I,A,b),R.push({x:I,y:A,color:b.color,alpha:b.alphaGL});E.push(R)}return E},getIndex:function(d,u){return d=Math.abs(Math.round(d)),u=Math.abs(Math.round(u)),d<this.width&&u<this.height?(d+u*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(d,u,p,m,v){return d===void 0&&(d=0),u===void 0&&(u=0),p===void 0&&(p=this.width),m===void 0&&(m=this.height),v===void 0&&(v=!0),this.context.clearRect(d,u,p,m),v&&this.update(),this},setSize:function(d,u){return u===void 0&&(u=d),(d!==this.width||u!==this.height)&&(this.canvas.width=d,this.canvas.height=u,this._source.width=d,this._source.height=u,this._source.isPowerOf2=i(d,u),this.frames.__BASE.setSize(d,u,0,0),this.width=d,this.height=u,this.refresh()),this},destroy:function(){n.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});o.exports=h},845:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(95723),l=t(51052),a=t(61068),r=t(56694),i=t(86459),n=t(82047),h=t(72632),d=t(65641),u=t(37410),p=t(31673),m=t(75512),v=new r({Extends:p,initialize:function(T,w,b,E){b===void 0&&(b=256),E===void 0&&(E=256),this.type="DynamicTexture";var A=T.game.renderer,R=A&&A.type===i.CANVAS,I=R?a.create2D(this,b,E):[this];p.call(this,T,w,I,b,E),this.add("__BASE",0,0,0,b,E),this.renderer=A,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=R?I:null,this.context=R?I.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new l(0,0,b,E).setScene(T.game.scene.systemScene,!1),this.renderTarget=R?null:new u(A,b,E,1,0,!1,!0,!0,!1),this.pipeline=R?null:A.pipelines.get(d.SINGLE_PIPELINE),R||this.setSize(b,E)},setSize:function(g,T){T===void 0&&(T=g);var w=this.get(),b=w.source;if(g!==this.width||T!==this.height){this.canvas&&(this.canvas.width=g,this.canvas.height=T);var E=this.renderTarget;E&&(E.willResize(g,T)&&(E.resize(g,T),this.renderer.deleteTexture(b.glTexture)),this.setFromRenderTarget()),this.camera.setSize(g,T),b.width=g,b.height=T,w.setSize(g,T),this.width=g,this.height=T}else{var A=this.getSourceImage();w.cutX+g>A.width&&(g=A.width-w.cutX),w.cutY+T>A.height&&(T=A.height-w.cutY),w.setSize(g,T,w.cutX,w.cutY)}return this},setFromRenderTarget:function(){var g=this.get(),T=g.source,w=this.renderTarget;return g.glTexture=w.texture,T.isRenderTexture=!0,T.isGLTexture=!0,T.glTexture=w.texture,T.glTexture.flipY=!0,this},setIsSpriteTexture:function(g){return this.isSpriteTexture=g,this},fill:function(g,T,w,b,E,A){var R=this.camera,I=this.renderer;T===void 0&&(T=1),w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=this.width),A===void 0&&(A=this.height);var P=g>>16&255,N=g>>8&255,F=g&255,O=this.renderTarget;if(R.preRender(),O){O.bind(!0);var D=this.pipeline.manager.set(this.pipeline),L=I.width/O.width,z=I.height/O.height,X=O.height-(b+A);D.drawFillRect(w*L,X*z,E*L,A*z,m.getTintFromFloats(F/255,N/255,P/255,1),T),O.unbind(!0)}else{var H=this.context;I.setContext(H),H.globalCompositeOperation="source-over",H.fillStyle="rgba("+P+","+N+","+F+","+T+")",H.fillRect(w,b,E,A),I.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var g=this.context,T=this.renderTarget;T?T.clear():g&&(g.save(),g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,this.width,this.height),g.restore()),this.dirty=!1}return this},stamp:function(g,T,w,b,E){w===void 0&&(w=0),b===void 0&&(b=0);var A=h(E,"alpha",1),R=h(E,"tint",16777215),I=h(E,"angle",0),P=h(E,"rotation",0),N=h(E,"scale",1),F=h(E,"scaleX",N),O=h(E,"scaleY",N),D=h(E,"originX",.5),L=h(E,"originY",.5),z=h(E,"blendMode",0),X=h(E,"erase",!1),H=h(E,"skipBatch",!1),J=this.manager.resetStamp(A,R);return J.setAngle(0),I!==0?J.setAngle(I):P!==0&&J.setRotation(P),J.setScale(F,O),J.setTexture(g,T),J.setOrigin(D,L),J.setBlendMode(z),X&&(this._eraseMode=!0),H?this.batchGameObject(J,w,b):this.draw(J,w,b),X&&(this._eraseMode=!1),this},erase:function(g,T,w){return this._eraseMode=!0,this.draw(g,T,w),this._eraseMode=!1,this},draw:function(g,T,w,b,E){return this.beginDraw(),this.batchDraw(g,T,w,b,E),this.endDraw(),this},drawFrame:function(g,T,w,b,E,A){return this.beginDraw(),this.batchDrawFrame(g,T,w,b,E,A),this.endDraw(),this},repeat:function(g,T,w,b,E,A,R,I,P){if(w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=this.width),A===void 0&&(A=this.height),R===void 0&&(R=1),I===void 0&&(I=16777215),P===void 0&&(P=!1),g instanceof n?T=g:T=this.manager.getFrame(g,T),!T)return this;var N=this.manager.resetStamp(R,I);N.setFrame(T),N.setOrigin(0);var F=T.width,O=T.height;E=Math.floor(E),A=Math.floor(A);var D=Math.ceil(E/F),L=Math.ceil(A/O),z=D*F-E,X=L*O-A;z>0&&(z=F-z),X>0&&(X=O-X),w<0&&(D+=Math.ceil(Math.abs(w)/F)),b<0&&(L+=Math.ceil(Math.abs(b)/O));var H=w,J=b,G=!1,k=this.manager.stampCrop.setTo(0,0,F,O);P||this.beginDraw();for(var M=0;M<L;M++){if(J+O<0){J+=O;continue}for(var B=0;B<D;B++){if(G=!1,H+F<0){H+=F;continue}else H<0&&(G=!0,k.width=F+H,k.x=F-k.width);J<0&&(G=!0,k.height=O+J,k.y=O-k.height),z>0&&B===D-1&&(G=!0,k.width=z),X>0&&M===L-1&&(G=!0,k.height=X),G&&N.setCrop(k),this.batchGameObject(N,H,J),N.isCropped=!1,k.setTo(0,0,F,O),H+=F}H=w,J+=O}return P||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var g=this.camera,T=this.renderer,w=this.renderTarget;g.preRender(),w?T.beginCapture(w.width,w.height):T.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(g,T,w,b,E){return Array.isArray(g)||(g=[g]),this.batchList(g,T,w,b,E),this},batchDrawFrame:function(g,T,w,b,E,A){w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=1),A===void 0&&(A=16777215);var R=this.manager.getFrame(g,T);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,w,b,A,E,this.camera.matrix,null):this.batchTextureFrame(R,w,b,E,A)),this},endDraw:function(g){if(g===void 0&&(g=this._eraseMode),this.isDrawing){var T=this.renderer,w=this.renderTarget;if(w){var b=T.endCapture(),E=T.pipelines.setUtility();E.blitFrame(b,w,1,!1,!1,g,this.isSpriteTexture),T.resetScissor(),T.resetViewport()}else T.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(g,T,w,b,E){var A=g.length;if(A!==0)for(var R=0;R<A;R++){var I=g[R];!I||I===this||(I.renderWebGL||I.renderCanvas?this.batchGameObject(I,T,w):I.isParent||I.list?this.batchGroup(I.getChildren(),T,w):typeof I=="string"?this.batchTextureFrameKey(I,null,T,w,b,E):I instanceof n?this.batchTextureFrame(I,T,w,b,E):Array.isArray(I)&&this.batchList(I,T,w,b,E))}},batchGroup:function(g,T,w){T===void 0&&(T=0),w===void 0&&(w=0);for(var b=0;b<g.length;b++){var E=g[b];E.willRender(this.camera)&&this.batchGameObject(E,E.x+T,E.y+w)}},batchGameObject:function(g,T,w){T===void 0&&(T=g.x),w===void 0&&(w=g.y);var b=g.x,E=g.y,A=this.camera,R=this.renderer,I=this._eraseMode,P=g.mask;if(g.setPosition(T,w),this.canvas){if(I){var N=g.blendMode;g.blendMode=s.ERASE}P&&P.preRenderCanvas(R,g,A),g.renderCanvas(R,g,A,null),P&&P.postRenderCanvas(R,g,A),I&&(g.blendMode=N)}else R&&(P&&P.preRenderWebGL(R,g,A),I||R.setBlendMode(g.blendMode),g.renderWebGL(R,g,A),P&&P.postRenderWebGL(R,A,this.renderTarget));g.setPosition(b,E)},batchTextureFrameKey:function(g,T,w,b,E,A){var R=this.manager.getFrame(g,T);R&&this.batchTextureFrame(R,w,b,E,A)},batchTextureFrame:function(g,T,w,b,E){T===void 0&&(T=0),w===void 0&&(w=0),b===void 0&&(b=1),E===void 0&&(E=16777215);var A=this.camera.matrix,R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(g,T,w,E,b,A,null);else{var I=this.context,P=g.canvasData,N=g.source.image;I.save(),I.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",I.globalAlpha=b,A.setToContext(I),P.width>0&&P.height>0&&I.drawImage(N,P.x,P.y,P.width,P.height,T,w,P.width,P.height),I.restore()}},snapshotArea:function(g,T,w,b,E,A,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,E,!1,g,T,w,b,A,R):this.renderer.snapshotCanvas(this.canvas,E,!1,g,T,w,b,A,R),this},snapshot:function(g,T,w){return this.snapshotArea(0,0,this.width,this.height,g,T,w)},snapshotPixel:function(g,T,w){return this.snapshotArea(g,T,1,1,w,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(g,T,w,b){var E=this.manager.resetStamp();E.setTexture(this),E.setOrigin(0),E.renderWebGL(g,E,w,b)},renderCanvas:function(){},destroy:function(){var g=this.manager.stamp;g&&g.texture===this&&this.manager.resetStamp(),p.prototype.destroy.call(this),a.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});o.exports=v},82047:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82897),a=t(98611),r=new s({initialize:function(n,h,d,u,p,m,v){this.texture=n,this.name=h,this.source=n.source[d],this.sourceIndex=d,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(m,v,u,p)},setSize:function(i,n,h,d){h===void 0&&(h=0),d===void 0&&(d=0),this.cutX=h,this.cutY=d,this.cutWidth=i,this.cutHeight=n,this.width=i,this.height=n,this.halfWidth=Math.floor(i*.5),this.halfHeight=Math.floor(n*.5),this.centerX=Math.floor(i/2),this.centerY=Math.floor(n/2);var u=this.data,p=u.cut;p.x=h,p.y=d,p.w=i,p.h=n,p.r=h+i,p.b=d+n,u.sourceSize.w=i,u.sourceSize.h=n,u.spriteSourceSize.w=i,u.spriteSourceSize.h=n,u.radius=.5*Math.sqrt(i*i+n*n);var m=u.drawImage;return m.x=h,m.y=d,m.width=i,m.height=n,this.updateUVs()},setTrim:function(i,n,h,d,u,p){var m=this.data,v=m.spriteSourceSize;return m.trim=!0,m.sourceSize.w=i,m.sourceSize.h=n,v.x=h,v.y=d,v.w=u,v.h=p,v.r=h+u,v.b=d+p,this.x=h,this.y=d,this.width=u,this.height=p,this.halfWidth=u*.5,this.halfHeight=p*.5,this.centerX=Math.floor(u/2),this.centerY=Math.floor(p/2),this.updateUVs()},setScale9:function(i,n,h,d){var u=this.data;return u.scale9=!0,u.is3Slice=n===0&&d===this.height,u.scale9Borders.x=i,u.scale9Borders.y=n,u.scale9Borders.w=h,u.scale9Borders.h=d,this},setCropUVs:function(i,n,h,d,u,p,m){var v=this.cutX,g=this.cutY,T=this.cutWidth,w=this.cutHeight,b=this.realWidth,E=this.realHeight;n=l(n,0,b),h=l(h,0,E),d=l(d,0,b-n),u=l(u,0,E-h);var A=v+n,R=g+h,I=d,P=u,N=this.data;if(N.trim){var F=N.spriteSourceSize;d=l(d,0,T-n),u=l(u,0,w-h);var O=n+d,D=h+u,L=!(F.r<n||F.b<h||F.x>O||F.y>D);if(L){var z=Math.max(F.x,n),X=Math.max(F.y,h),H=Math.min(F.r,O)-z,J=Math.min(F.b,D)-X;I=H,P=J,p?A=v+(T-(z-F.x)-H):A=v+(z-F.x),m?R=g+(w-(X-F.y)-J):R=g+(X-F.y),n=z,h=X,d=H,u=J}else A=0,R=0,I=0,P=0}else p&&(A=v+(T-n-d)),m&&(R=g+(w-h-u));var G=this.source.width,k=this.source.height;return i.u0=Math.max(0,A/G),i.v0=Math.max(0,R/k),i.u1=Math.min(1,(A+I)/G),i.v1=Math.min(1,(R+P)/k),i.x=n,i.y=h,i.cx=A,i.cy=R,i.cw=I,i.ch=P,i.width=d,i.height=u,i.flipX=p,i.flipY=m,i},updateCropUVs:function(i,n,h){return this.setCropUVs(i,i.x,i.y,i.width,i.height,n,h)},setUVs:function(i,n,h,d,u,p){var m=this.data.drawImage;return m.width=i,m.height=n,this.u0=h,this.v0=d,this.u1=u,this.v1=p,this},updateUVs:function(){var i=this.cutX,n=this.cutY,h=this.cutWidth,d=this.cutHeight,u=this.data.drawImage;u.width=h,u.height=d;var p=this.source.width,m=this.source.height;return this.u0=i/p,this.v0=n/m,this.u1=(i+h)/p,this.v1=(n+d)/m,this},updateUVsInverted:function(){var i=this.source.width,n=this.source.height;return this.u0=(this.cutX+this.cutHeight)/i,this.v0=this.cutY/n,this.u1=this.cutX/i,this.v1=(this.cutY+this.cutWidth)/n,this},clone:function(){var i=new r(this.texture,this.name,this.sourceIndex);return i.cutX=this.cutX,i.cutY=this.cutY,i.cutWidth=this.cutWidth,i.cutHeight=this.cutHeight,i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i.halfWidth=this.halfWidth,i.halfHeight=this.halfHeight,i.centerX=this.centerX,i.centerY=this.centerY,i.rotated=this.rotated,i.data=a(!0,i.data,this.data),i.updateUVs(),i},destroy:function(){this.texture=null,this.source=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});o.exports=r},31673:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(82047),a=t(32547),r='Texture "%s" has no frame "%s"',i=new s({initialize:function(h,d,u,p,m){Array.isArray(u)||(u=[u]),this.manager=h,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var v=0;v<u.length;v++)this.source.push(new a(this,u[v],p,m))},add:function(n,h,d,u,p,m){if(this.has(n))return null;var v=new l(this,n,h,d,u,p,m);return this.frames[n]=v,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,v},remove:function(n){if(this.has(n)){var h=this.get(n);return h.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames.hasOwnProperty(n)},get:function(n){n||(n=this.firstFrame);var h=this.frames[n];return h||(console.warn(r,this.key,n),h=this.frames[this.firstFrame]),h},getTextureSourceIndex:function(n){for(var h=0;h<this.source.length;h++)if(this.source[h]===n)return h;return-1},getFramesFromTextureSource:function(n,h){h===void 0&&(h=!1);var d=[];for(var u in this.frames)if(!(u==="__BASE"&&!h)){var p=this.frames[u];p.sourceIndex===n&&d.push(p)}return d},getFrameNames:function(n){n===void 0&&(n=!1);var h=Object.keys(this.frames);if(!n){var d=h.indexOf("__BASE");d!==-1&&h.splice(d,1)}return h},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var h=this.frames[n];return h?h.source.image:(console.warn(r,this.key,n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var h=this.frames[n],d;return h?d=h.sourceIndex:(console.warn(r,this.key,n),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var h=0;h<n.length;h++){var d=this.source[h];this.dataSource.push(new a(this,n[h],d.width,d.height))}},setFilter:function(n){var h;for(h=0;h<this.source.length;h++)this.source[h].setFilter(n);for(h=0;h<this.dataSource.length;h++)this.dataSource[h].setFilter(n)},destroy:function(){var n,h=this.source,d=this.dataSource;for(n=0;n<h.length;n++)h[n]&&h[n].destroy();for(n=0;n<d.length;n++)d[n]&&d[n].destroy();for(var u in this.frames){var p=this.frames[u];p&&p.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});o.exports=i},6237:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(17487),a=t(56694),r=t(27119),i=t(86459),n=t(845),h=t(6659),d=t(38203),u=t(82047),p=t(97081),m=t(52780),v=t(10850),g=t(1539),T=t(42911),w=t(69150),b=t(74118),E=t(31673),A=new a({Extends:h,initialize:function(I){h.call(this),this.game=I,this.name="TextureManager",this.list={},this._tempCanvas=s.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new b,this.silentWarnings=!1,I.events.once(p.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(d.LOAD,this.updatePending,this),this.on(d.ERROR,this.updatePending,this);var R=this.game.config;this.addBase64("__DEFAULT",R.defaultImage),this.addBase64("__MISSING",R.missingImage),this.addBase64("__WHITE",R.whiteImage),this.game.events.once(p.DESTROY,this.destroy,this),this.game.events.once(p.SYSTEM_READY,function(I){this.stamp=new g(I).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(d.LOAD),this.off(d.ERROR),this.emit(d.READY))},checkKey:function(R){return this.exists(R)?(this.silentWarnings||console.error("Texture key already in use: "+R),!1):!0},remove:function(R){if(typeof R=="string")if(this.exists(R))R=this.get(R);else return this.silentWarnings||console.warn("No texture found matching key: "+R),this;var I=R.key;return this.list.hasOwnProperty(I)&&(R.destroy(),this.emit(d.REMOVE,I),this.emit(d.REMOVE_KEY+I)),this},removeKey:function(R){return this.list.hasOwnProperty(R)&&delete this.list[R],this},addBase64:function(R,I){if(this.checkKey(R)){var P=this,N=new Image;N.onerror=function(){P.emit(d.ERROR,R)},N.onload=function(){var F=P.create(R,N);w.Image(F,0),P.emit(d.ADD,R,F),P.emit(d.ADD_KEY+R,F),P.emit(d.LOAD,R,F)},N.src=I}return this},getBase64:function(R,I,P,N){P===void 0&&(P="image/png"),N===void 0&&(N=.92);var F="",O=this.getFrame(R,I);if(O&&(O.source.isRenderTexture||O.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(O){var D=O.canvasData,L=s.create2D(this,D.width,D.height),z=L.getContext("2d",{willReadFrequently:!0});D.width>0&&D.height>0&&z.drawImage(O.source.image,D.x,D.y,D.width,D.height,0,0,D.width,D.height),F=L.toDataURL(P,N),s.remove(L)}return F},addImage:function(R,I,P){var N=null;return this.checkKey(R)&&(N=this.create(R,I),w.Image(N,0),P&&N.setDataSource(P),this.emit(d.ADD,R,N),this.emit(d.ADD_KEY+R,N)),N},addGLTexture:function(R,I,P,N){var F=null;return this.checkKey(R)&&(P===void 0&&(P=I.width),N===void 0&&(N=I.height),F=this.create(R,I,P,N),F.add("__BASE",0,0,0,P,N),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)),F},addCompressedTexture:function(R,I,P){var N=null;if(this.checkKey(R)){if(N=this.create(R,I),N.add("__BASE",0,0,0,I.width,I.height),P)if(Array.isArray(P))for(var F=0;F<P.length;F++)w.JSONHash(N,F,P[F]);else w.JSONHash(N,0,P);this.emit(d.ADD,R,N),this.emit(d.ADD_KEY+R,N)}return N},addRenderTexture:function(R,I){var P=null;return this.checkKey(R)&&(P=this.create(R,I),P.add("__BASE",0,0,0,I.width,I.height),this.emit(d.ADD,R,P),this.emit(d.ADD_KEY+R,P)),P},generate:function(R,I){if(this.checkKey(R)){var P=s.create(this,1,1);return I.canvas=P,m(I),this.addCanvas(R,P)}else return null},createCanvas:function(R,I,P){if(I===void 0&&(I=256),P===void 0&&(P=256),this.checkKey(R)){var N=s.create(this,I,P,i.CANVAS,!0);return this.addCanvas(R,N)}return null},addCanvas:function(R,I,P){P===void 0&&(P=!1);var N=null;return P?N=new l(this,R,I,I.width,I.height):this.checkKey(R)&&(N=new l(this,R,I,I.width,I.height),this.list[R]=N,this.emit(d.ADD,R,N),this.emit(d.ADD_KEY+R,N)),N},addDynamicTexture:function(R,I,P){var N=null;return typeof R=="string"&&!this.exists(R)?N=new n(this,R,I,P):(N=R,R=N.key),this.checkKey(R)?(this.list[R]=N,this.emit(d.ADD,R,N),this.emit(d.ADD_KEY+R,N)):N=null,N},addAtlas:function(R,I,P,N){return Array.isArray(P.textures)||Array.isArray(P.frames)?this.addAtlasJSONArray(R,I,P,N):this.addAtlasJSONHash(R,I,P,N)},addAtlasJSONArray:function(R,I,P,N){var F=null;if(I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F){if(Array.isArray(P))for(var O=P.length===1,D=0;D<F.source.length;D++){var L=O?P[0]:P[D];w.JSONArray(F,D,L)}else w.JSONArray(F,0,P);N&&F.setDataSource(N),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)}return F},addAtlasJSONHash:function(R,I,P,N){var F=null;if(I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F){if(Array.isArray(P))for(var O=0;O<P.length;O++)w.JSONHash(F,O,P[O]);else w.JSONHash(F,0,P);N&&F.setDataSource(N),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)}return F},addAtlasXML:function(R,I,P,N){var F=null;return I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F&&(w.AtlasXML(F,0,P),N&&F.setDataSource(N),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)),F},addUnityAtlas:function(R,I,P,N){var F=null;return I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F&&(w.UnityYAML(F,0,P),N&&F.setDataSource(N),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)),F},addSpriteSheet:function(R,I,P,N){var F=null;if(I instanceof E?(R=I.key,F=I):this.checkKey(R)&&(F=this.create(R,I)),F){var O=F.source[0].width,D=F.source[0].height;w.SpriteSheet(F,0,0,0,O,D,P),N&&F.setDataSource(N),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)}return F},addSpriteSheetFromAtlas:function(R,I){if(!this.checkKey(R))return null;var P=v(I,"atlas",null),N=v(I,"frame",null);if(!(!P||!N)){var F=this.get(P),O=F.get(N);if(O){var D=this.create(R,O.source.image);return O.trimmed?w.SpriteSheetFromAtlas(D,O,I):w.SpriteSheet(D,0,O.cutX,O.cutY,O.cutWidth,O.cutHeight,I),this.emit(d.ADD,R,D),this.emit(d.ADD_KEY+R,D),D}}},create:function(R,I,P,N){var F=null;return this.checkKey(R)&&(F=new E(this,R,I,P,N),this.list[R]=F),F},exists:function(R){return this.list.hasOwnProperty(R)},get:function(R){return R===void 0&&(R="__DEFAULT"),this.list[R]?this.list[R]:R instanceof E?R:R instanceof u?R.texture:this.list.__MISSING},cloneFrame:function(R,I){if(this.list[R])return this.list[R].get(I).clone()},getFrame:function(R,I){if(this.list[R])return this.list[R].get(I)},parseFrame:function(R){if(R){if(typeof R=="string")return this.getFrame(R);if(Array.isArray(R)&&R.length===2)return this.getFrame(R[0],R[1]);if(T(R))return this.getFrame(R.key,R.frame);if(R instanceof E)return R.get();if(R instanceof u)return R}else return},getTextureKeys:function(){var R=[];for(var I in this.list)I!=="__DEFAULT"&&I!=="__MISSING"&&I!=="__WHITE"&&R.push(I);return R},getPixel:function(R,I,P,N){var F=this.getFrame(P,N);if(F){R-=F.x,I-=F.y;var O=F.data.cut;if(R+=O.x,I+=O.y,R>=O.x&&R<O.r&&I>=O.y&&I<O.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(F.source.image,R,I,1,1,0,0,1,1);var L=D.getImageData(0,0,1,1);return new r(L.data[0],L.data[1],L.data[2],L.data[3])}}return null},getPixelAlpha:function(R,I,P,N){var F=this.getFrame(P,N);if(F){R-=F.x,I-=F.y;var O=F.data.cut;if(R+=O.x,I+=O.y,R>=O.x&&R<O.r&&I>=O.y&&I<O.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(F.source.image,R,I,1,1,0,0,1,1);var L=D.getImageData(0,0,1,1);return L.data[3]}}return null},setTexture:function(R,I,P){return this.list[I]&&(R.texture=this.list[I],R.frame=R.texture.get(P)),R},renameTexture:function(R,I){var P=this.get(R);return P&&R!==I?(P.key=I,this.list[I]=P,delete this.list[R],!0):!1},each:function(R,I){for(var P=[null],N=1;N<arguments.length;N++)P.push(arguments[N]);for(var F in this.list)P[0]=this.list[F],R.apply(I,P)},resetStamp:function(R,I){R===void 0&&(R=1),I===void 0&&(I=16777215);var P=this.stamp;return P.setCrop(),P.setPosition(0),P.setAngle(0),P.setScale(1),P.setAlpha(R),P.setTint(I),P.setTexture("__WHITE"),P},destroy:function(){for(var R in this.list)this.list[R].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,s.remove(this._tempCanvas)}});o.exports=A},32547:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61068),l=t(56694),a=t(28621),r=t(27394),i=new l({initialize:function(h,d,u,p,m){m===void 0&&(m=!1);var v=h.manager.game;this.renderer=v.renderer,this.texture=h,this.source=d,this.image=d.compressed?null:d,this.compressionAlgorithm=d.compressed?d.format:null,this.resolution=1,this.width=u||d.naturalWidth||d.videoWidth||d.width||0,this.height=p||d.naturalHeight||d.videoHeight||d.height||0,this.scaleMode=r.DEFAULT,this.isCanvas=d instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&d instanceof HTMLVideoElement,this.isRenderTexture=d.type==="RenderTexture"||d.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&d instanceof WebGLTexture,this.isPowerOf2=a(this.width,this.height),this.glTexture=null,this.flipY=m,this.init(v)},init:function(n){var h=this.renderer;if(h){var d=this.source;if(h.gl){var u=this.image,p=this.flipY,m=this.width,v=this.height,g=this.scaleMode;this.isCanvas?this.glTexture=h.createCanvasTexture(u,!1,p):this.isVideo?this.glTexture=h.createVideoTexture(u,!1,p):this.isRenderTexture?this.glTexture=h.createTextureFromSource(null,m,v,g):this.isGLTexture?this.glTexture=d:this.compressionAlgorithm?this.glTexture=h.createTextureFromSource(d):this.glTexture=h.createTextureFromSource(u,m,v,g)}else this.isRenderTexture&&(this.image=d.canvas)}n.config.antialias||this.setFilter(1)},setFilter:function(n){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,n),this.scaleMode=n},setFlipY:function(n){return n===void 0&&(n=!0),this.flipY=n,this},update:function(){var n=this.renderer,h=this.image,d=this.flipY,u=n.gl;u&&this.isCanvas?this.glTexture=n.updateCanvasTexture(h,this.glTexture,d):u&&this.isVideo&&(this.glTexture=n.updateVideoTexture(h,this.glTexture,d))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&s.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});o.exports=i},65154:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={LINEAR:0,NEAREST:1};o.exports=y},49644:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture"},29569:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture-"},60079:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onerror"},72665:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onload"},93006:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},69018:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture"},85549:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture-"},38203:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:t(49644),ADD_KEY:t(29569),ERROR:t(60079),LOAD:t(72665),READY:t(93006),REMOVE:t(69018),REMOVE_KEY:t(85549)}},87499:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(65154),a={CanvasTexture:t(17487),DynamicTexture:t(845),Events:t(38203),FilterMode:l,Frame:t(82047),Parsers:t(69150),Texture:t(31673),TextureManager:t(6237),TextureSource:t(32547)};a=s(!1,a,l),o.exports=a},35082:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(!l.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var a=t.source[s];t.add("__BASE",s,0,0,a.width,a.height);for(var r=l.getElementsByTagName("SubTexture"),i,n=0;n<r.length;n++){var h=r[n].attributes,d=h.name.value,u=parseInt(h.x.value,10),p=parseInt(h.y.value,10),m=parseInt(h.width.value,10),v=parseInt(h.height.value,10);if(i=t.add(d,s,u,p,m,v),h.frameX){var g=Math.abs(parseInt(h.frameX.value,10)),T=Math.abs(parseInt(h.frameY.value,10)),w=parseInt(h.frameWidth.value,10),b=parseInt(h.frameHeight.value,10);i.setTrim(m,v,g,T,w,b)}}return t};o.exports=y},83332:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.source[s];return t.add("__BASE",s,0,0,l.width,l.height),t};o.exports=y},21560:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.source[s];return t.add("__BASE",s,0,0,l.width,l.height),t};o.exports=y},64423:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(32742),l=function(a,r,i){if(!i.frames&&!i.textures){console.warn("Invalid Texture Atlas JSON Array");return}var n=a.source[r];a.add("__BASE",r,0,0,n.width,n.height);for(var h=Array.isArray(i.textures)?i.textures[r].frames:i.frames,d,u=0;u<h.length;u++){var p=h[u];if(d=a.add(p.filename,r,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+p.filename);continue}p.trimmed&&d.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(d.rotated=!0,d.updateUVsInverted());var m=p.anchor||p.pivot;m&&(d.customPivot=!0,d.pivotX=m.x,d.pivotY=m.y),p.scale9Borders&&d.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),d.customData=s(p)}for(var v in i)v!=="frames"&&(Array.isArray(i[v])?a.customData[v]=i[v].slice(0):a.customData[v]=i[v]);return a};o.exports=l},17264:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(32742),l=function(a,r,i){if(!i.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=a.source[r];a.add("__BASE",r,0,0,n.width,n.height);var h=i.frames,d;for(var u in h)if(h.hasOwnProperty(u)){var p=h[u];if(d=a.add(u,r,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+u);continue}p.trimmed&&d.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(d.rotated=!0,d.updateUVsInverted());var m=p.anchor||p.pivot;m&&(d.customPivot=!0,d.pivotX=m.x,d.pivotY=m.y),p.scale9Borders&&d.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),d.customData=s(p)}for(var v in i)v!=="frames"&&(Array.isArray(i[v])?a.customData[v]=i[v].slice(0):a.customData[v]=i[v]);return a};o.exports=l},67409:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s=[171,75,84,88,32,49,49,187,13,10,26,10],l,a=new Uint8Array(t,0,12);for(l=0;l<a.length;l++)if(a[l]!==s[l]){console.warn("KTXParser - Invalid file format");return}var r=Uint32Array.BYTES_PER_ELEMENT,i=new DataView(t,12,13*r),n=i.getUint32(0,!0)===67305985,h=i.getUint32(1*r,n);if(h!==0){console.warn("KTXParser - Only compressed formats supported");return}var d=i.getUint32(4*r,n),u=i.getUint32(6*r,n),p=i.getUint32(7*r,n),m=Math.max(1,i.getUint32(11*r,n)),v=i.getUint32(12*r,n),g=new Array(m),T=12+13*4+v,w=u,b=p;for(l=0;l<m;l++){var E=new Int32Array(t,T,1)[0];T+=4,g[l]={data:new Uint8Array(t,T,E),width:w,height:b},w=Math.max(1,w>>1),b=Math.max(1,b>>1),T+=E}return{mipmaps:g,width:u,height:p,internalFormat:d,compressed:!0,generateMipmap:!1}};o.exports=y},24904:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(R,I,P,N,F,O,D){return D===void 0&&(D=16),Math.floor((R+P)/F)*Math.floor((I+N)/O)*D}function t(R,I){return R=Math.max(R,16),I=Math.max(I,8),R*I/4}function s(R,I){return R=Math.max(R,8),I=Math.max(I,8),R*I/2}function l(R,I){return y(R,I,3,3,4,4,8)}function a(R,I){return y(R,I,3,3,4,4)}function r(R,I){return y(R,I,4,3,5,4)}function i(R,I){return y(R,I,4,4,5,5)}function n(R,I){return y(R,I,5,4,6,5)}function h(R,I){return y(R,I,5,5,6,6)}function d(R,I){return y(R,I,7,4,8,5)}function u(R,I){return y(R,I,7,5,8,6)}function p(R,I){return y(R,I,7,7,8,8)}function m(R,I){return y(R,I,9,4,10,5)}function v(R,I){return y(R,I,9,5,10,6)}function g(R,I){return y(R,I,9,7,10,8)}function T(R,I){return y(R,I,9,9,10,10)}function w(R,I){return y(R,I,11,9,12,10)}function b(R,I){return y(R,I,11,11,12,12)}var E={0:{sizeFunc:t,glFormat:35841},1:{sizeFunc:t,glFormat:35843},2:{sizeFunc:s,glFormat:35840},3:{sizeFunc:s,glFormat:35842},6:{sizeFunc:l,glFormat:36196},7:{sizeFunc:l,glFormat:33776},8:{sizeFunc:a,glFormat:33777},9:{sizeFunc:a,glFormat:33778},11:{sizeFunc:a,glFormat:33779},22:{sizeFunc:l,glFormat:37492},23:{sizeFunc:a,glFormat:37496},24:{sizeFunc:l,glFormat:37494},25:{sizeFunc:l,glFormat:37488},26:{sizeFunc:a,glFormat:37490},27:{sizeFunc:a,glFormat:37808},28:{sizeFunc:r,glFormat:37809},29:{sizeFunc:i,glFormat:37810},30:{sizeFunc:n,glFormat:37811},31:{sizeFunc:h,glFormat:37812},32:{sizeFunc:d,glFormat:37813},33:{sizeFunc:u,glFormat:37814},34:{sizeFunc:p,glFormat:37815},35:{sizeFunc:m,glFormat:37816},36:{sizeFunc:v,glFormat:37817},37:{sizeFunc:g,glFormat:37818},38:{sizeFunc:T,glFormat:37819},39:{sizeFunc:w,glFormat:37820},40:{sizeFunc:b,glFormat:37821}},A=function(R){for(var I=new Uint32Array(R,0,13),P=I[2],N=E[P].glFormat,F=E[P].sizeFunc,O=I[11],D=I[7],L=I[6],z=52+I[12],X=new Uint8Array(R,z),H=new Array(O),J=0,G=D,k=L,M=0;M<O;M++){var B=F(G,k);H[M]={data:new Uint8Array(X.buffer,X.byteOffset+J,B),width:G,height:k},G=Math.max(1,G>>1),k=Math.max(1,k>>1),J+=B}return{mipmaps:H,width:D,height:L,internalFormat:N,compressed:!0,generateMipmap:!1}};o.exports=A},6143:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a,r,i,n,h,d,u){var p=s(u,"frameWidth",null),m=s(u,"frameHeight",p);if(p===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var v=a.source[r];a.add("__BASE",r,0,0,v.width,v.height);var g=s(u,"startFrame",0),T=s(u,"endFrame",-1),w=s(u,"margin",0),b=s(u,"spacing",0),E=Math.floor((h-w+b)/(p+b)),A=Math.floor((d-w+b)/(m+b)),R=E*A;R===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",a.key),(g>R||g<-R)&&(g=0),g<0&&(g=R+g),(T===-1||T>R||T<g)&&(T=R);for(var I=w,P=w,N=0,F=0,O=0,D=0;D<R;D++){N=0,F=0;var L=I+p,z=P+m;L>h&&(N=L-h),z>d&&(F=z-d),D>=g&&D<=T&&(a.add(O,r,i+I,n+P,p-N,m-F),O++),I+=p+b,I+p>h&&(I=w,P+=m+b)}return a};o.exports=l},20030:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a,r,i){var n=s(i,"frameWidth",null),h=s(i,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=a.source[0];a.add("__BASE",0,0,0,d.width,d.height),s(i,"startFrame",0),s(i,"endFrame",-1);for(var u=s(i,"margin",0),p=s(i,"spacing",0),m=r.cutX,v=r.cutY,g=r.cutWidth,T=r.cutHeight,w=r.realWidth,b=r.realHeight,E=Math.floor((w-u+p)/(n+p)),A=Math.floor((b-u+p)/(h+p)),R=r.x,I=n-R,P=n-(w-g-R),N=r.y,F=h-N,O=h-(b-T-N),D,L=u,z=u,X=0,H=0,J=0;J<A;J++){for(var G=J===0,k=J===A-1,M=0;M<E;M++){var B=M===0,U=M===E-1;if(D=a.add(X,H,m+L,v+z,n,h),B||G||U||k){var W=B?R:0,K=G?N:0,q=0,_=0;B&&(q+=n-I),U&&(q+=n-P),G&&(_+=h-F),k&&(_+=h-O);var rt=n-q,ft=h-_;D.cutWidth=rt,D.cutHeight=ft,D.setTrim(n,h,W,K,rt,ft)}L+=p,B?L+=I:U?L+=P:L+=n,X++}L=u,z+=p,G?z+=F:k?z+=O:z+=h}return a};o.exports=l},89187:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=0,t=function(l,a,r,i){var n=y-i.y-i.height;l.add(r,a,i.x,n,i.width,i.height)},s=function(l,a,r){var i=l.source[a];l.add("__BASE",a,0,0,i.width,i.height),y=i.height;for(var n=r.split(`
`),h=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",u="",p={x:0,y:0,width:0,height:0},m=0;m<n.length;m++){var v=n[m].match(h);if(v){var g=v[1]==="- ",T=v[2],w=v[3];if(g&&(u!==d&&(t(l,a,u,p),d=u),p={x:0,y:0,width:0,height:0}),T==="name"){u=w;continue}switch(T){case"x":case"y":case"width":case"height":p[T]=parseInt(w,10);break}}}return u!==d&&t(l,a,u,p),l};o.exports=s},69150:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AtlasXML:t(35082),Canvas:t(83332),Image:t(21560),JSONArray:t(64423),JSONHash:t(17264),KTXParser:t(67409),PVRParser:t(24904),SpriteSheet:t(6143),SpriteSheetFromAtlas:t(20030),UnityYAML:t(89187)}},93560:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r,i,n,h,d,u,p){(n===void 0||n<=0)&&(n=32),(h===void 0||h<=0)&&(h=32),d===void 0&&(d=0),u===void 0&&(u=0),this.name=r,this.firstgid=i|0,this.imageWidth=n|0,this.imageHeight=h|0,this.imageMargin=d|0,this.imageSpacing=u|0,this.properties=p||{},this.images=[],this.total=0},containsImageIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},addImage:function(a,r){return this.images.push({gid:a,image:r}),this.total++,this}});o.exports=l},46422:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=new s({initialize:function(r){if(this.gids=[],r!==void 0)for(var i=0;i<r.length;++i)for(var n=r[i],h=0;h<n.total;++h)this.gids[n.firstgid+h]=n;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(a){this.gids=a?this._gids:void 0}},getTypeIncludingTile:function(a){if(a.type!==void 0&&a.type!=="")return a.type;if(!(!this.gids||a.gid===void 0)){var r=this.gids[a.gid];if(r){var i=r.getTileData(a.gid);if(i)return i.type}}},setTextureAndFrame:function(a,r,i,n){if(r===null&&this.gids&&n.gid!==void 0){var h=this.gids[n.gid];h&&(r===null&&h.image!==void 0&&(r=h.image.key),i===null&&(i=n.gid-h.firstgid),a.scene.textures.getFrame(r,i)||(r=null,i=null))}a.setTexture(r,i)},setPropertiesFromTiledObject:function(a,r){if(this.gids!==void 0&&r.gid!==void 0){var i=this.gids[r.gid];i!==void 0&&this.setFromJSON(a,i.getTileProperties(r.gid))}this.setFromJSON(a,r.properties)},setFromJSON:function(a,r){if(r){if(Array.isArray(r)){for(var i=0;i<r.length;i++){var n=r[i];a[n.name]!==void 0?a[n.name]=n.value:a.setData(n.name,n.value)}return}for(var h in r)a[h]!==void 0?a[h]=r[h]:a.setData(h,r[h])}}});o.exports=l},15043:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(16586),a=t(90715),r=t(89797),i=function(n,h,d,u,p,m,v,g){d===void 0&&(d=32),u===void 0&&(u=32),p===void 0&&(p=10),m===void 0&&(m=10),g===void 0&&(g=!1);var T=null;if(Array.isArray(v)){var w=h!==void 0?h:"map";T=a(w,s.ARRAY_2D,v,d,u,g)}else if(h!==void 0){var b=n.cache.tilemap.get(h);b?T=a(h,b.format,b.data,d,u,g):console.warn("No map data found for key "+h)}return T===null&&(T=new l({tileWidth:d,tileHeight:u,width:p,height:m})),new r(n,T)};o.exports=i},29633:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(64937),a=t(12920),r=t(28699),i=t(66658),n=new s({Mixins:[l.AlphaSingle,l.Flip,l.Visible],initialize:function(d,u,p,m,v,g,T,w){this.layer=d,this.index=u,this.x=p,this.y=m,this.width=v,this.height=g,this.right,this.bottom,this.baseWidth=T!==void 0?T:v,this.baseHeight=w!==void 0?w:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(h,d){return!(h<this.pixelX||d<this.pixelY||h>this.right||d>this.bottom)},copy:function(h){return this.index=h.index,this.alpha=h.alpha,this.properties=r(h.properties),this.visible=h.visible,this.setFlip(h.flipX,h.flipY),this.tint=h.tint,this.rotation=h.rotation,this.collideUp=h.collideUp,this.collideDown=h.collideDown,this.collideLeft=h.collideLeft,this.collideRight=h.collideRight,this.collisionCallback=h.collisionCallback,this.collisionCallbackContext=h.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(h){var d=this.tilemapLayer;if(d){var u=d.tileToWorldXY(this.x,this.y,void 0,h);return u.x}return this.x*this.baseWidth},getRight:function(h){var d=this.tilemapLayer;return d?this.getLeft(h)+this.width*d.scaleX:this.getLeft(h)+this.width},getTop:function(h){var d=this.tilemapLayer;if(d){var u=d.tileToWorldXY(this.x,this.y,void 0,h);return u.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(h){var d=this.tilemapLayer;return d?this.getTop(h)+this.height*d.scaleY:this.getTop(h)+this.height},getBounds:function(h,d){return d===void 0&&(d=new i),d.x=this.getLeft(h),d.y=this.getTop(h),d.width=this.getRight(h)-d.x,d.height=this.getBottom(h)-d.y,d},getCenterX:function(h){return(this.getLeft(h)+this.getRight(h))/2},getCenterY:function(h){return(this.getTop(h)+this.getBottom(h))/2},intersects:function(h,d,u,p){return!(u<=this.pixelX||p<=this.pixelY||h>=this.right||d>=this.bottom)},isInteresting:function(h,d){return h&&d?this.canCollide||this.hasInterestingFace:h?this.collides:d?this.hasInterestingFace:!1},resetCollision:function(h){if(h===void 0&&(h=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,h){var d=this.tilemapLayer;d&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(h,d,u,p,m){if(d===void 0&&(d=h),u===void 0&&(u=h),p===void 0&&(p=h),m===void 0&&(m=!0),this.collideLeft=h,this.collideRight=d,this.collideUp=u,this.collideDown=p,this.faceLeft=h,this.faceRight=d,this.faceTop=u,this.faceBottom=p,m){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(h,d){return h===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=h,this.collisionCallbackContext=d),this},setSize:function(h,d,u,p){return h!==void 0&&(this.width=h),d!==void 0&&(this.height=d),u!==void 0&&(this.baseWidth=u),p!==void 0&&(this.baseHeight=p),this.updatePixelXY(),this},updatePixelXY:function(){var h=this.layer.orientation;if(h===a.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(h===a.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(h===a.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(h===a.HEXAGONAL){var d=this.layer.staggerAxis,u=this.layer.staggerIndex,p=this.layer.hexSideLength,m,v;d==="y"?(v=(this.baseHeight-p)/2+p,u==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*v):d==="x"&&(m=(this.baseWidth-p)/2+p,this.pixelX=this.x*m,u==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var h=this.layer.tilemapLayer;if(h){var d=h.gidMap[this.index];if(d)return d}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var h=this.tilemapLayer;return h?h.tilemap:null}}});o.exports=n},89797:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14556),l=t(56694),a=t(75606),r=t(93560),i=t(72632),n=t(94990),h=t(46422),d=t(12920),u=t(52257),p=t(72677),m=t(13747),v=t(29633),g=t(5047),T=t(87177),w=t(47975),b=new l({initialize:function(A,R){this.scene=A,this.tileWidth=R.tileWidth,this.tileHeight=R.tileHeight,this.width=R.width,this.height=R.height,this.orientation=R.orientation,this.renderOrder=R.renderOrder,this.format=R.format,this.version=R.version,this.properties=R.properties,this.widthInPixels=R.widthInPixels,this.heightInPixels=R.heightInPixels,this.imageCollections=R.imageCollections,this.images=R.images,this.layers=R.layers,this.tiles=R.tiles,this.tilesets=R.tilesets,this.objects=R.objects,this.currentLayerIndex=0,this.hexSideLength=R.hexSideLength;var I=this.orientation;this._convert={WorldToTileXY:g.GetWorldToTileXYFunction(I),WorldToTileX:g.GetWorldToTileXFunction(I),WorldToTileY:g.GetWorldToTileYFunction(I),TileToWorldXY:g.GetTileToWorldXYFunction(I),TileToWorldX:g.GetTileToWorldXFunction(I),TileToWorldY:g.GetTileToWorldYFunction(I),GetTileCorners:g.GetTileCornersFunction(I)}},setRenderOrder:function(E){var A=["right-down","left-down","right-up","left-up"];return typeof E=="number"&&(E=A[E]),A.indexOf(E)>-1&&(this.renderOrder=E),this},addTilesetImage:function(E,A,R,I,P,N,F,O){if(E===void 0)return null;if(A==null&&(A=E),!this.scene.sys.textures.exists(A))return console.warn("Invalid Tileset Image: "+A),null;var D=this.scene.sys.textures.get(A),L=this.getTilesetIndex(E);if(L===null&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+E),null;var z=this.tilesets[L];return z?(z.setTileSize(R,I),z.setSpacing(P,N),z.setImage(D),z):(R===void 0&&(R=this.tileWidth),I===void 0&&(I=this.tileHeight),P===void 0&&(P=0),N===void 0&&(N=0),F===void 0&&(F=0),O===void 0&&(O={x:0,y:0}),z=new w(E,F,R,I,P,N,void 0,void 0,O),z.setImage(D),this.tilesets.push(z),this.tiles=s(this),z)},copy:function(E,A,R,I,P,N,F,O){return O=this.getLayer(O),O!==null?(g.Copy(E,A,R,I,P,N,F,O),this):null},createBlankLayer:function(E,A,R,I,P,N,F,O){R===void 0&&(R=0),I===void 0&&(I=0),P===void 0&&(P=this.width),N===void 0&&(N=this.height),F===void 0&&(F=this.tileWidth),O===void 0&&(O=this.tileHeight);var D=this.getLayerIndex(E);if(D!==null)return console.warn("Invalid Tilemap Layer ID: "+E),null;for(var L=new n({name:E,tileWidth:F,tileHeight:O,width:P,height:N,orientation:this.orientation}),z,X=0;X<N;X++){z=[];for(var H=0;H<P;H++)z.push(new v(L,-1,H,X,F,O,this.tileWidth,this.tileHeight));L.data.push(z)}this.layers.push(L),this.currentLayerIndex=this.layers.length-1;var J=new T(this.scene,this,this.currentLayerIndex,A,R,I);return J.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(J),J},createLayer:function(E,A,R,I){var P=this.getLayerIndex(E);if(P===null)return console.warn("Invalid Tilemap Layer ID: "+E),typeof E=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var N=this.layers[P];if(N.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+E),null;this.currentLayerIndex=P,R===void 0&&(R=N.x),I===void 0&&(I=N.y);var F=new T(this.scene,this,P,A,R,I);return F.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(F),F},createFromObjects:function(E,A,R){R===void 0&&(R=!0);var I=[],P=this.getObjectLayer(E);if(!P)return console.warn("createFromObjects: Invalid objectLayerName given: "+E),I;var N=new h(R?this.tilesets:void 0);Array.isArray(A)||(A=[A]);for(var F=P.objects,O=0;O<A.length;O++){var D=A[O],L=i(D,"id",null),z=i(D,"gid",null),X=i(D,"name",null),H=i(D,"type",null);N.enabled=!i(D,"ignoreTileset",null);for(var J,G=[],k=0;k<F.length;k++)J=F[k],(L===null&&z===null&&X===null&&H===null||L!==null&&J.id===L||z!==null&&J.gid===z||X!==null&&J.name===X||H!==null&&N.getTypeIncludingTile(J)===H)&&G.push(J);for(var M=i(D,"classType",m),B=i(D,"scene",this.scene),U=i(D,"container",null),W=i(D,"key",null),K=i(D,"frame",null),q=0;q<G.length;q++){J=G[q];var _=new M(B);if(_.setName(J.name),_.setPosition(J.x,J.y),N.setTextureAndFrame(_,W,K,J),J.width&&(_.displayWidth=J.width),J.height&&(_.displayHeight=J.height),this.orientation===d.ISOMETRIC){var rt=this.tileWidth/this.tileHeight,ft={x:_.x-_.y,y:(_.x+_.y)/rt};_.x=ft.x,_.y=ft.y}var mt={x:_.originX*J.width,y:(_.originY-(J.gid?1:0))*J.height};if(J.rotation){var vt=a(J.rotation);u(mt,vt),_.rotation=vt}_.x+=mt.x,_.y+=mt.y,(J.flippedHorizontal!==void 0||J.flippedVertical!==void 0)&&_.setFlip(J.flippedHorizontal,J.flippedVertical),J.visible||(_.visible=!1),N.setPropertiesFromTiledObject(_,J),U?U.add(_):B.add.existing(_),I.push(_)}}return I},createFromTiles:function(E,A,R,I,P,N){return N=this.getLayer(N),N===null?null:g.CreateFromTiles(E,A,R,I,P,N)},fill:function(E,A,R,I,P,N,F){return N===void 0&&(N=!0),F=this.getLayer(F),F===null?null:(g.Fill(E,A,R,I,P,N,F),this)},filterObjects:function(E,A,R){if(typeof E=="string"){var I=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+I),null}return E.objects.filter(A,R)},filterTiles:function(E,A,R,I,P,N,F,O){return O=this.getLayer(O),O===null?null:g.FilterTiles(E,A,R,I,P,N,F,O)},findByIndex:function(E,A,R,I){return I=this.getLayer(I),I===null?null:g.FindByIndex(E,A,R,I)},findObject:function(E,A,R){if(typeof E=="string"){var I=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+I),null}return E.objects.find(A,R)||null},findTile:function(E,A,R,I,P,N,F,O){return O=this.getLayer(O),O===null?null:g.FindTile(E,A,R,I,P,N,F,O)},forEachTile:function(E,A,R,I,P,N,F,O){return O=this.getLayer(O),O===null?null:(g.ForEachTile(E,A,R,I,P,N,F,O),this)},getImageIndex:function(E){return this.getIndex(this.images,E)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(E){return E.name})},getIndex:function(E,A){for(var R=0;R<E.length;R++)if(E[R].name===A)return R;return null},getLayer:function(E){var A=this.getLayerIndex(E);return A!==null?this.layers[A]:null},getObjectLayer:function(E){var A=this.getIndex(this.objects,E);return A!==null?this.objects[A]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(E){return E.name})},getLayerIndex:function(E){return E===void 0?this.currentLayerIndex:typeof E=="string"?this.getLayerIndexByName(E):typeof E=="number"&&E<this.layers.length?E:E instanceof T&&E.tilemap===this?E.layerIndex:null},getLayerIndexByName:function(E){return this.getIndex(this.layers,E)},getTileAt:function(E,A,R,I){return I=this.getLayer(I),I===null?null:g.GetTileAt(E,A,R,I)},getTileAtWorldXY:function(E,A,R,I,P){return P=this.getLayer(P),P===null?null:g.GetTileAtWorldXY(E,A,R,I,P)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(E){return E.name})},getTilesWithin:function(E,A,R,I,P,N){return N=this.getLayer(N),N===null?null:g.GetTilesWithin(E,A,R,I,P,N)},getTilesWithinShape:function(E,A,R,I){return I=this.getLayer(I),I===null?null:g.GetTilesWithinShape(E,A,R,I)},getTilesWithinWorldXY:function(E,A,R,I,P,N,F){return F=this.getLayer(F),F===null?null:g.GetTilesWithinWorldXY(E,A,R,I,P,N,F)},getTileset:function(E){var A=this.getIndex(this.tilesets,E);return A!==null?this.tilesets[A]:null},getTilesetIndex:function(E){return this.getIndex(this.tilesets,E)},hasTileAt:function(E,A,R){return R=this.getLayer(R),R===null?null:g.HasTileAt(E,A,R)},hasTileAtWorldXY:function(E,A,R,I){return I=this.getLayer(I),I===null?null:g.HasTileAtWorldXY(E,A,R,I)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(E){this.setLayer(E)}},putTileAt:function(E,A,R,I,P){return I===void 0&&(I=!0),P=this.getLayer(P),P===null?null:g.PutTileAt(E,A,R,I,P)},putTileAtWorldXY:function(E,A,R,I,P,N){return I===void 0&&(I=!0),N=this.getLayer(N),N===null?null:g.PutTileAtWorldXY(E,A,R,I,P,N)},putTilesAt:function(E,A,R,I,P){return I===void 0&&(I=!0),P=this.getLayer(P),P===null?null:(g.PutTilesAt(E,A,R,I,P),this)},randomize:function(E,A,R,I,P,N){return N=this.getLayer(N),N===null?null:(g.Randomize(E,A,R,I,P,N),this)},calculateFacesAt:function(E,A,R){return R=this.getLayer(R),R===null?null:(g.CalculateFacesAt(E,A,R),this)},calculateFacesWithin:function(E,A,R,I,P){return P=this.getLayer(P),P===null?null:(g.CalculateFacesWithin(E,A,R,I,P),this)},removeLayer:function(E){var A=this.getLayerIndex(E);if(A!==null){p(this.layers,A);for(var R=A;R<this.layers.length;R++)this.layers[R].tilemapLayer&&this.layers[R].tilemapLayer.layerIndex--;return this.currentLayerIndex===A&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(E){var A=this.getLayerIndex(E);return A!==null?(E=this.layers[A],E.tilemapLayer.destroy(),p(this.layers,A),this.currentLayerIndex===A&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var E=this.layers,A=0;A<E.length;A++)E[A].tilemapLayer&&E[A].tilemapLayer.destroy(!1);return E.length=0,this.currentLayerIndex=0,this},removeTile:function(E,A,R){A===void 0&&(A=-1),R===void 0&&(R=!0);var I=[];Array.isArray(E)||(E=[E]);for(var P=0;P<E.length;P++){var N=E[P];I.push(this.removeTileAt(N.x,N.y,!0,R,N.tilemapLayer)),A>-1&&this.putTileAt(A,N.x,N.y,R,N.tilemapLayer)}return I},removeTileAt:function(E,A,R,I,P){return R===void 0&&(R=!0),I===void 0&&(I=!0),P=this.getLayer(P),P===null?null:g.RemoveTileAt(E,A,R,I,P)},removeTileAtWorldXY:function(E,A,R,I,P,N){return R===void 0&&(R=!0),I===void 0&&(I=!0),N=this.getLayer(N),N===null?null:g.RemoveTileAtWorldXY(E,A,R,I,P,N)},renderDebug:function(E,A,R){return R=this.getLayer(R),R===null?null:(this.orientation===d.ORTHOGONAL&&g.RenderDebug(E,A,R),this)},renderDebugFull:function(E,A){for(var R=this.layers,I=0;I<R.length;I++)g.RenderDebug(E,A,R[I]);return this},replaceByIndex:function(E,A,R,I,P,N,F){return F=this.getLayer(F),F===null?null:(g.ReplaceByIndex(E,A,R,I,P,N,F),this)},setCollision:function(E,A,R,I,P){return A===void 0&&(A=!0),R===void 0&&(R=!0),P===void 0&&(P=!0),I=this.getLayer(I),I===null?null:(g.SetCollision(E,A,R,I,P),this)},setCollisionBetween:function(E,A,R,I,P){return R===void 0&&(R=!0),I===void 0&&(I=!0),P=this.getLayer(P),P===null?null:(g.SetCollisionBetween(E,A,R,I,P),this)},setCollisionByProperty:function(E,A,R,I){return A===void 0&&(A=!0),R===void 0&&(R=!0),I=this.getLayer(I),I===null?null:(g.SetCollisionByProperty(E,A,R,I),this)},setCollisionByExclusion:function(E,A,R,I){return A===void 0&&(A=!0),R===void 0&&(R=!0),I=this.getLayer(I),I===null?null:(g.SetCollisionByExclusion(E,A,R,I),this)},setCollisionFromCollisionGroup:function(E,A,R){return E===void 0&&(E=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(g.SetCollisionFromCollisionGroup(E,A,R),this)},setTileIndexCallback:function(E,A,R,I){return I=this.getLayer(I),I===null?null:(g.SetTileIndexCallback(E,A,R,I),this)},setTileLocationCallback:function(E,A,R,I,P,N,F){return F=this.getLayer(F),F===null?null:(g.SetTileLocationCallback(E,A,R,I,P,N,F),this)},setLayer:function(E){var A=this.getLayerIndex(E);return A!==null&&(this.currentLayerIndex=A),this},setBaseTileSize:function(E,A){this.tileWidth=E,this.tileHeight=A,this.widthInPixels=this.width*E,this.heightInPixels=this.height*A;for(var R=0;R<this.layers.length;R++){this.layers[R].baseTileWidth=E,this.layers[R].baseTileHeight=A;for(var I=this.layers[R].data,P=this.layers[R].width,N=this.layers[R].height,F=0;F<N;F++)for(var O=0;O<P;O++){var D=I[F][O];D!==null&&D.setSize(void 0,void 0,E,A)}}return this},setLayerTileSize:function(E,A,R){if(R=this.getLayer(R),R===null)return this;R.tileWidth=E,R.tileHeight=A;for(var I=R.data,P=R.width,N=R.height,F=0;F<N;F++)for(var O=0;O<P;O++){var D=I[F][O];D!==null&&D.setSize(E,A)}return this},shuffle:function(E,A,R,I,P){return P=this.getLayer(P),P===null?null:(g.Shuffle(E,A,R,I,P),this)},swapByIndex:function(E,A,R,I,P,N,F){return F=this.getLayer(F),F===null?null:(g.SwapByIndex(E,A,R,I,P,N,F),this)},tileToWorldX:function(E,A,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldX(E,A,R)},tileToWorldY:function(E,A,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldY(E,A,R)},tileToWorldXY:function(E,A,R,I,P){return P=this.getLayer(P),P===null?null:this._convert.TileToWorldXY(E,A,R,I,P)},getTileCorners:function(E,A,R,I){return I=this.getLayer(I),I===null?null:this._convert.GetTileCorners(E,A,R,I)},weightedRandomize:function(E,A,R,I,P,N){return N=this.getLayer(N),N===null?null:(g.WeightedRandomize(A,R,I,P,E,N),this)},worldToTileX:function(E,A,R,I){return I=this.getLayer(I),I===null?null:this._convert.WorldToTileX(E,A,R,I)},worldToTileY:function(E,A,R,I){return I=this.getLayer(I),I===null?null:this._convert.WorldToTileY(E,A,R,I)},worldToTileXY:function(E,A,R,I,P,N){return N=this.getLayer(N),N===null?null:this._convert.WorldToTileXY(E,A,R,I,P,N)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});o.exports=b},4843:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(99325),l=t(15043);s.register("tilemap",function(a){var r=a!==void 0?a:{};return l(this.scene,r.key,r.tileWidth,r.tileHeight,r.width,r.height,r.data,r.insertNull)})},37940:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(61286),l=t(15043);s.register("tilemap",function(a,r,i,n,h,d,u){return a===null&&(a=void 0),r===null&&(r=void 0),i===null&&(i=void 0),n===null&&(n=void 0),h===null&&(h=void 0),l(this.scene,a,r,i,n,h,d,u)})},87177:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(95239),a=t(64937),r=t(89980),i=t(5047),n=t(96193),h=t(93736),d=new s({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.Transform,a.Visible,a.ScrollFactor,l,n],initialize:function(p,m,v,g,T,w){r.call(this,p,"TilemapLayer"),this.isTilemap=!0,this.tilemap=m,this.layerIndex=v,this.layer=m.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=i.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new h,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(g),this.setAlpha(this.layer.alpha),this.setPosition(T,w),this.setOrigin(0,0),this.setSize(m.tileWidth*this.layer.width,m.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(u){var p=[],m=[],v=this.tilemap;Array.isArray(u)||(u=[u]);for(var g=0;g<u.length;g++){var T=u[g];if(typeof T=="string"&&(T=v.getTileset(T)),T){m.push(T);for(var w=T.firstgid,b=0;b<T.total;b++)p[w+b]=T}}this.gidMap=p,this.tileset=m},setRenderOrder:function(u){var p=["right-down","left-down","right-up","left-up"];return typeof u=="string"&&(u=p.indexOf(u)),u>=0&&u<4&&(this._renderOrder=u),this},calculateFacesAt:function(u,p){return i.CalculateFacesAt(u,p,this.layer),this},calculateFacesWithin:function(u,p,m,v){return i.CalculateFacesWithin(u,p,m,v,this.layer),this},createFromTiles:function(u,p,m,v,g){return i.CreateFromTiles(u,p,m,v,g,this.layer)},cull:function(u){return this.cullCallback(this.layer,u,this.culledTiles,this._renderOrder)},copy:function(u,p,m,v,g,T,w){return i.Copy(u,p,m,v,g,T,w,this.layer),this},fill:function(u,p,m,v,g,T){return i.Fill(u,p,m,v,g,T,this.layer),this},filterTiles:function(u,p,m,v,g,T,w){return i.FilterTiles(u,p,m,v,g,T,w,this.layer)},findByIndex:function(u,p,m){return i.FindByIndex(u,p,m,this.layer)},findTile:function(u,p,m,v,g,T,w){return i.FindTile(u,p,m,v,g,T,w,this.layer)},forEachTile:function(u,p,m,v,g,T,w){return i.ForEachTile(u,p,m,v,g,T,w,this.layer),this},setTint:function(u,p,m,v,g,T){u===void 0&&(u=16777215);var w=function(b){b.tint=u,b.tintFill=!1};return this.forEachTile(w,this,p,m,v,g,T)},setTintFill:function(u,p,m,v,g,T){u===void 0&&(u=16777215);var w=function(b){b.tint=u,b.tintFill=!0};return this.forEachTile(w,this,p,m,v,g,T)},getTileAt:function(u,p,m){return i.GetTileAt(u,p,m,this.layer)},getTileAtWorldXY:function(u,p,m,v){return i.GetTileAtWorldXY(u,p,m,v,this.layer)},getIsoTileAtWorldXY:function(u,p,m,v,g){m===void 0&&(m=!0);var T=this.tempVec;return i.IsometricWorldToTileXY(u,p,!0,T,g,this.layer,m),this.getTileAt(T.x,T.y,v)},getTilesWithin:function(u,p,m,v,g){return i.GetTilesWithin(u,p,m,v,g,this.layer)},getTilesWithinShape:function(u,p,m){return i.GetTilesWithinShape(u,p,m,this.layer)},getTilesWithinWorldXY:function(u,p,m,v,g,T){return i.GetTilesWithinWorldXY(u,p,m,v,g,T,this.layer)},hasTileAt:function(u,p){return i.HasTileAt(u,p,this.layer)},hasTileAtWorldXY:function(u,p,m){return i.HasTileAtWorldXY(u,p,m,this.layer)},putTileAt:function(u,p,m,v){return i.PutTileAt(u,p,m,v,this.layer)},putTileAtWorldXY:function(u,p,m,v,g){return i.PutTileAtWorldXY(u,p,m,v,g,this.layer)},putTilesAt:function(u,p,m,v){return i.PutTilesAt(u,p,m,v,this.layer),this},randomize:function(u,p,m,v,g){return i.Randomize(u,p,m,v,g,this.layer),this},removeTileAt:function(u,p,m,v){return i.RemoveTileAt(u,p,m,v,this.layer)},removeTileAtWorldXY:function(u,p,m,v,g){return i.RemoveTileAtWorldXY(u,p,m,v,g,this.layer)},renderDebug:function(u,p){return i.RenderDebug(u,p,this.layer),this},replaceByIndex:function(u,p,m,v,g,T){return i.ReplaceByIndex(u,p,m,v,g,T,this.layer),this},setSkipCull:function(u){return u===void 0&&(u=!0),this.skipCull=u,this},setCullPadding:function(u,p){return u===void 0&&(u=1),p===void 0&&(p=1),this.cullPaddingX=u,this.cullPaddingY=p,this},setCollision:function(u,p,m,v){return i.SetCollision(u,p,m,this.layer,v),this},setCollisionBetween:function(u,p,m,v){return i.SetCollisionBetween(u,p,m,v,this.layer),this},setCollisionByProperty:function(u,p,m){return i.SetCollisionByProperty(u,p,m,this.layer),this},setCollisionByExclusion:function(u,p,m){return i.SetCollisionByExclusion(u,p,m,this.layer),this},setCollisionFromCollisionGroup:function(u,p){return i.SetCollisionFromCollisionGroup(u,p,this.layer),this},setTileIndexCallback:function(u,p,m){return i.SetTileIndexCallback(u,p,m,this.layer),this},setTileLocationCallback:function(u,p,m,v,g,T){return i.SetTileLocationCallback(u,p,m,v,g,T,this.layer),this},shuffle:function(u,p,m,v){return i.Shuffle(u,p,m,v,this.layer),this},swapByIndex:function(u,p,m,v,g,T){return i.SwapByIndex(u,p,m,v,g,T,this.layer),this},tileToWorldX:function(u,p){return this.tilemap.tileToWorldX(u,p,this)},tileToWorldY:function(u,p){return this.tilemap.tileToWorldY(u,p,this)},tileToWorldXY:function(u,p,m,v){return this.tilemap.tileToWorldXY(u,p,m,v,this)},getTileCorners:function(u,p,m){return this.tilemap.getTileCorners(u,p,m,this)},weightedRandomize:function(u,p,m,v,g){return i.WeightedRandomize(p,m,v,g,u,this.layer),this},worldToTileX:function(u,p,m){return this.tilemap.worldToTileX(u,p,m,this)},worldToTileY:function(u,p,m){return this.tilemap.worldToTileY(u,p,m,this)},worldToTileXY:function(u,p,m,v,g){return this.tilemap.worldToTileXY(u,p,m,v,g,this)},destroy:function(u){u===void 0&&(u=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),u&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});o.exports=d},17394:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(69360),l=new s,a=new s,r=new s,i=function(n,h,d,u){var p=h.cull(d),m=p.length,v=d.alpha*h.alpha;if(!(m===0||v<=0)){var g=l,T=a,w=r;T.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),g.copyFrom(d.matrix);var b=n.currentContext,E=h.gidMap;b.save(),u?(g.multiplyWithOffset(u,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),T.e=h.x,T.f=h.y,g.multiply(T,w),w.copyToContext(b)):(T.e-=d.scrollX*h.scrollFactorX,T.f-=d.scrollY*h.scrollFactorY,T.copyToContext(b)),(!n.antialias||h.scaleX>1||h.scaleY>1)&&(b.imageSmoothingEnabled=!1);for(var A=0;A<m;A++){var R=p[A],I=E[R.index];if(I){var P=I.image.getSourceImage(),N=I.getTileTextureCoordinates(R.index),F=I.tileWidth,O=I.tileHeight;if(!(N===null||F===0||O===0)){var D=F*.5,L=O*.5;N.x+=I.tileOffset.x,N.y+=I.tileOffset.y,b.save(),b.translate(R.pixelX+D,R.pixelY+L),R.rotation!==0&&b.rotate(R.rotation),(R.flipX||R.flipY)&&b.scale(R.flipX?-1:1,R.flipY?-1:1),b.globalAlpha=v*R.alpha,b.drawImage(P,N.x,N.y,F,O,-D,-L,F,O),b.restore()}}}b.restore()}};o.exports=i},96193:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72283),l=s,a=s;l=t(51395),a=t(17394),o.exports={renderWebGL:l,renderCanvas:a}},51395:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(75512),l=function(a,r,i){var n=r.cull(i),h=n.length,d=i.alpha*r.alpha;if(!(h===0||d<=0)){var u=r.gidMap,p=a.pipelines.set(r.pipeline,r),m=s.getTintAppendFloatAlpha,v=r.scrollFactorX,g=r.scrollFactorY,T=r.x,w=r.y,b=r.scaleX,E=r.scaleY;a.pipelines.preBatch(r);for(var A=0;A<h;A++){var R=n[A],I=u[R.index];if(I){var P=I.getTileTextureCoordinates(R.index);if(P!==null){var N=I.glTexture,F=p.setTexture2D(N,r),O=I.tileWidth,D=I.tileHeight,L=P.x,z=P.y,X=I.tileWidth*.5,H=I.tileHeight*.5,J=I.tileOffset.x,G=I.tileOffset.y,k=m(R.tint,d*R.alpha);p.batchTexture(r,N,N.width,N.height,T+R.pixelX*b+(X*b-J),w+R.pixelY*E+(H*E-G),R.width,R.height,b,E,R.rotation,R.flipX,R.flipY,v,g,X,H,L,z,O,D,k,k,k,k,R.tintFill,0,0,i,null,!0,F,!0)}}}a.pipelines.postBatch(r)}};o.exports=l},47975:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(93736),a=new s({initialize:function(i,n,h,d,u,p,m,v,g){(h===void 0||h<=0)&&(h=32),(d===void 0||d<=0)&&(d=32),u===void 0&&(u=0),p===void 0&&(p=0),m===void 0&&(m={}),v===void 0&&(v={}),this.name=i,this.firstgid=n,this.tileWidth=h,this.tileHeight=d,this.tileMargin=u,this.tileSpacing=p,this.tileProperties=m,this.tileData=v,this.tileOffset=new l,g!==void 0&&this.tileOffset.set(g.x,g.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var i=this.getTileData(r);return i&&i.objectgroup?i.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){return this.image=r,this.glTexture=r.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(r,i){return r!==void 0&&(this.tileWidth=r),i!==void 0&&(this.tileHeight=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,i){return r!==void 0&&(this.tileMargin=r),i!==void 0&&(this.tileSpacing=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,i){var n=(i-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),h=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(n%1!==0||h%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),h=Math.floor(h),this.rows=n,this.columns=h,this.total=n*h,this.texCoordinates.length=0;for(var d=this.tileMargin,u=this.tileMargin,p=0;p<this.rows;p++){for(var m=0;m<this.columns;m++)this.texCoordinates.push({x:d,y:u}),d+=this.tileWidth+this.tileSpacing;d=this.tileMargin,u+=this.tileHeight+this.tileSpacing}return this}});o.exports=a},92839:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15494),l=function(a,r,i){var n=s(a,r,!0,i),h=s(a,r-1,!0,i),d=s(a,r+1,!0,i),u=s(a-1,r,!0,i),p=s(a+1,r,!0,i),m=n&&n.collides;return m&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),h&&h.collides&&(m&&(n.faceTop=!1),h.faceBottom=!m),d&&d.collides&&(m&&(n.faceBottom=!1),d.faceTop=!m),u&&u.collides&&(m&&(n.faceLeft=!1),u.faceRight=!m),p&&p.collides&&(m&&(n.faceRight=!1),p.faceLeft=!m),n&&!n.collides&&n.resetFaces(),n};o.exports=l},60386:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15494),l=t(50811),a=function(r,i,n,h,d){for(var u=null,p=null,m=null,v=null,g=l(r,i,n,h,null,d),T=0;T<g.length;T++){var w=g[T];w&&(w.collides?(u=s(w.x,w.y-1,!0,d),p=s(w.x,w.y+1,!0,d),m=s(w.x-1,w.y,!0,d),v=s(w.x+1,w.y,!0,d),w.faceTop=!(u&&u.collides),w.faceBottom=!(p&&p.collides),w.faceLeft=!(m&&m.collides),w.faceRight=!(v&&v.collides)):w.resetFaces())}};o.exports=a},13125:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=new s,a=function(r,i,n,h){var d=n.tilemapLayer,u=d.cullPaddingX,p=d.cullPaddingY,m=d.tilemap.tileToWorldXY(r,i,l,h,d);return m.x>h.worldView.x+d.scaleX*n.tileWidth*(-u-.5)&&m.x<h.worldView.right+d.scaleX*n.tileWidth*(u-.5)&&m.y>h.worldView.y+d.scaleY*n.tileHeight*(-p-1)&&m.y<h.worldView.bottom+d.scaleY*n.tileHeight*(p-.5)};o.exports=a},17347:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60386),l=t(50811),a=t(62839),r=t(29633),i=function(n,h,d,u,p,m,v,g){v===void 0&&(v=!0);var T=l(n,h,d,u,null,g),w=[];T.forEach(function(N){var F=new r(N.layer,N.index,N.x,N.y,N.width,N.height,N.baseWidth,N.baseHeight);F.copy(N),w.push(F)});for(var b=p-n,E=m-h,A=0;A<w.length;A++){var R=w[A],I=R.x+b,P=R.y+E;a(I,P,g)&&g.data[P][I]&&(R.x=I,R.y=P,R.updatePixelXY(),g.data[P][I]=R)}v&&s(p-1,m-1,d+2,u+2,g),T.length=0,w.length=0};o.exports=i},93604:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(51202),a=function(r,i,n,h,d,u){n||(n={}),Array.isArray(r)||(r=[r]);var p=u.tilemapLayer;h||(h=p.scene),d||(d=h.cameras.main);var m=s(0,0,u.width,u.height,null,u),v=[],g;for(g=0;g<m.length;g++){var T=m[g];if(r.indexOf(T.index)!==-1){var w=p.tileToWorldXY(T.x,T.y,void 0,d,u);n.x=w.x,n.y=w.y,v.push(h.make.sprite(n))}}if(typeof i=="number")for(g=0;g<r.length;g++)l(r[g],i,0,0,u.width,u.height,u);else if(Array.isArray(i))for(g=0;g<r.length;g++)l(r[g],i[g],0,0,u.width,u.height,u);return v};o.exports=a},71586:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74118),l=t(82127),a=t(84314),r=new s,i=function(n,h){var d=n.tilemapLayer.tilemap,u=n.tilemapLayer,p=Math.floor(d.tileWidth*u.scaleX),m=Math.floor(d.tileHeight*u.scaleY),v=a(h.worldView.x-u.x,p,0,!0)-u.cullPaddingX,g=l(h.worldView.right-u.x,p,0,!0)+u.cullPaddingX,T=a(h.worldView.y-u.y,m,0,!0)-u.cullPaddingY,w=l(h.worldView.bottom-u.y,m,0,!0)+u.cullPaddingY;return r.setTo(v,T,g-v,w-T)};o.exports=i},381:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(71586),l=t(6987),a=function(r,i,n,h){n===void 0&&(n=[]),h===void 0&&(h=0),n.length=0;var d=r.tilemapLayer,u=s(r,i);return(d.skipCull||d.scrollFactorX!==1||d.scrollFactorY!==1)&&(u.left=0,u.right=r.width,u.top=0,u.bottom=r.height),l(r,u,h,n),n};o.exports=a},97734:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(60386),a=t(68234),r=function(i,n,h,d,u,p,m){for(var v=m.collideIndexes.indexOf(i)!==-1,g=s(n,h,d,u,null,m),T=0;T<g.length;T++)g[T].index=i,a(g[T],v);p&&l(n-1,h-1,d+2,u+2,m)};o.exports=r},63555:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u,p){var m=s(i,n,h,d,u,p);return m.filter(a,r)};o.exports=l},37982:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){s===void 0&&(s=0),l===void 0&&(l=!1);var r=0,i,n,h;if(l){for(n=a.height-1;n>=0;n--)for(i=a.width-1;i>=0;i--)if(h=a.data[n][i],h&&h.index===t){if(r===s)return h;r+=1}}else for(n=0;n<a.height;n++)for(i=0;i<a.width;i++)if(h=a.data[n][i],h&&h.index===t){if(r===s)return h;r+=1}return null};o.exports=y},48297:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u,p){var m=s(i,n,h,d,u,p);return m.find(a,r)||null};o.exports=l},80916:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u,p){var m=s(i,n,h,d,u,p);m.forEach(a,r)};o.exports=l},31493:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(381),a=t(37524),r=t(20887),i=t(72283),n=t(19242),h=function(d){return d===s.ORTHOGONAL?l:d===s.HEXAGONAL?a:d===s.STAGGERED?n:d===s.ISOMETRIC?r:i};o.exports=h},15494:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62839),l=function(a,r,i,n){if(i===void 0&&(i=!1),s(a,r,n)){var h=n.data[r][a]||null;return h?h.index===-1?i?h:null:h:null}else return null};o.exports=l},24640:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(15494),l=t(93736),a=new l,r=function(i,n,h,d,u){return u.tilemapLayer.worldToTileXY(i,n,!0,a,d),s(a.x,a.y,h,u)};o.exports=r},48495:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n){var h=n.baseTileWidth,d=n.baseTileHeight,u=n.tilemapLayer,p=0,m=0;u&&(i||(i=u.scene.cameras.main),p=u.x+i.scrollX*(1-u.scrollFactorX),m=u.y+i.scrollY*(1-u.scrollFactorY),h*=u.scaleX,d*=u.scaleY);var v=p+a*h,g=m+r*d;return[new s(v,g),new s(v+h,g),new s(v+h,g+d),new s(v,g+d)]};o.exports=l},7160:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(63634),a=t(72283),r=t(48495),i=function(n){return n===s.ORTHOGONAL?r:n===s.ISOMETRIC?a:n===s.HEXAGONAL?l:(n===s.STAGGERED,a)};o.exports=i},16884:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(72283),a=t(44150),r=function(i){return i===s.ORTHOGONAL?a:l};o.exports=r},68182:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(21715),a=t(21808),r=t(72283),i=t(33388),n=t(46836),h=function(d){return d===s.ORTHOGONAL?n:d===s.ISOMETRIC?a:d===s.HEXAGONAL?l:d===s.STAGGERED?i:r};o.exports=h},3752:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(72283),a=t(84132),r=t(42477),i=function(n){return n===s.ORTHOGONAL?r:n===s.STAGGERED?a:l};o.exports=i},50811:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a,r,i,n,h,d){a===void 0&&(a=0),r===void 0&&(r=0),i===void 0&&(i=d.width),n===void 0&&(n=d.height),h||(h={});var u=s(h,"isNotEmpty",!1),p=s(h,"isColliding",!1),m=s(h,"hasInterestingFace",!1);a<0&&(i+=a,a=0),r<0&&(n+=r,r=0),a+i>d.width&&(i=Math.max(d.width-a,0)),r+n>d.height&&(n=Math.max(d.height-r,0));for(var v=[],g=r;g<r+n;g++)for(var T=a;T<a+i;T++){var w=d.data[g][T];if(w!==null){if(u&&w.index===-1||p&&!w.collides||m&&!w.hasInterestingFace)continue;v.push(w)}}return v};o.exports=l},31674:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84068),l=t(50811),a=t(7563),r=t(72283),i=t(93736),n=function(m,v){return a.RectangleToTriangle(v,m)},h=new i,d=new i,u=new i,p=function(m,v,g,T){if(m===void 0)return[];var w=r;m instanceof s.Circle?w=a.CircleToRectangle:m instanceof s.Rectangle?w=a.RectangleToRectangle:m instanceof s.Triangle?w=n:m instanceof s.Line&&(w=a.LineToRectangle),T.tilemapLayer.worldToTileXY(m.left,m.top,!0,d,g);var b=d.x,E=d.y;T.tilemapLayer.worldToTileXY(m.right,m.bottom,!1,u,g);var A=Math.ceil(u.x),R=Math.ceil(u.y),I=Math.max(A-b,1),P=Math.max(R-E,1),N=l(b,E,I,P,v,T),F=T.tileWidth,O=T.tileHeight;T.tilemapLayer&&(F*=T.tilemapLayer.scaleX,O*=T.tilemapLayer.scaleY);for(var D=[],L=new s.Rectangle(0,0,F,O),z=0;z<N.length;z++){var X=N[z];T.tilemapLayer.tileToWorldXY(X.x,X.y,h,g),L.x=h.x,L.y=h.y,w(m,L)&&D.push(X)}return D};o.exports=p},44662:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(93736),a=new l,r=new l,i=function(n,h,d,u,p,m,v){var g=v.tilemapLayer.tilemap._convert.WorldToTileXY;g(n,h,!0,a,m,v);var T=a.x,w=a.y;g(n+d,h+u,!1,r,m,v);var b=Math.ceil(r.x),E=Math.ceil(r.y);return s(T,w,b-T,E-w,p,v)};o.exports=i},29296:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(10618),a=t(806),r=function(i){return i===s.ORTHOGONAL?a:l};o.exports=r},32688:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(11516),a=t(18750),r=t(72283),i=t(90562),n=t(45676),h=function(d){return d===s.ORTHOGONAL?n:d===s.ISOMETRIC?a:d===s.HEXAGONAL?l:d===s.STAGGERED?i:r};o.exports=h},74326:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=t(10618),a=t(3689),r=t(70520),i=function(n){return n===s.ORTHOGONAL?r:n===s.STAGGERED?a:l};o.exports=i},46598:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62839),l=function(a,r,i){if(s(a,r,i)){var n=i.data[r][a];return n!==null&&n.index>-1}else return!1};o.exports=l},28654:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46598),l=t(93736),a=new l,r=function(i,n,h,d){d.tilemapLayer.worldToTileXY(i,n,!0,a,h);var u=a.x,p=a.y;return s(u,p,d)};o.exports=r},6358:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82127),l=t(84314),a=function(r,i){var n=r.tilemapLayer.tilemap,h=r.tilemapLayer,d=Math.floor(n.tileWidth*h.scaleX),u=Math.floor(n.tileHeight*h.scaleY),p=r.hexSideLength,m,v,g,T;if(r.staggerAxis==="y"){var w=(u-p)/2+p;m=l(i.worldView.x-h.x,d,0,!0)-h.cullPaddingX,v=s(i.worldView.right-h.x,d,0,!0)+h.cullPaddingX,g=l(i.worldView.y-h.y,w,0,!0)-h.cullPaddingY,T=s(i.worldView.bottom-h.y,w,0,!0)+h.cullPaddingY}else{var b=(d-p)/2+p;m=l(i.worldView.x-h.x,b,0,!0)-h.cullPaddingX,v=s(i.worldView.right-h.x,b,0,!0)+h.cullPaddingX,g=l(i.worldView.y-h.y,u,0,!0)-h.cullPaddingY,T=s(i.worldView.bottom-h.y,u,0,!0)+h.cullPaddingY}return{left:m,right:v,top:g,bottom:T}};o.exports=a},37524:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6358),l=t(6987),a=function(r,i,n,h){n===void 0&&(n=[]),h===void 0&&(h=0),n.length=0;var d=r.tilemapLayer,u=s(r,i);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(u.left=0,u.right=r.width,u.top=0,u.bottom=r.height),l(r,u,h,n),n};o.exports=a},63634:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(21715),l=t(93736),a=new l,r=function(i,n,h,d){var u=d.baseTileWidth,p=d.baseTileHeight,m=d.tilemapLayer;m&&(u*=m.scaleX,p*=m.scaleY);var v=s(i,n,a,h,d),g=[],T=.5773502691896257,w,b;d.staggerAxis==="y"?(w=T*u,b=p/2):(w=u/2,b=T*p);for(var E=0;E<6;E++){var A=2*Math.PI*(.5-E)/6;g.push(new l(v.x+w*Math.cos(A),v.y+b*Math.sin(A)))}return g};o.exports=r},21715:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h){i||(i=new s);var d=h.baseTileWidth,u=h.baseTileHeight,p=h.tilemapLayer,m=0,v=0;p&&(n||(n=p.scene.cameras.main),m=p.x+n.scrollX*(1-p.scrollFactorX),v=p.y+n.scrollY*(1-p.scrollFactorY),d*=p.scaleX,u*=p.scaleY);var g=d/2,T=u/2,w,b;return h.staggerAxis==="y"?(w=m+d*a+d,b=v+1.5*r*T+T,r%2===0&&(this.staggerIndex==="odd"?w-=g:w+=g)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(w=m+1.5*a*g+g,b=v+u*a+u,a%2===0&&(this.staggerIndex==="odd"?b-=T:b+=T)),i.set(w,b)};o.exports=l},11516:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d){n||(n=new s);var u=d.baseTileWidth,p=d.baseTileHeight,m=d.tilemapLayer;m&&(h||(h=m.scene.cameras.main),a=a-(m.x+h.scrollX*(1-m.scrollFactorX)),r=r-(m.y+h.scrollY*(1-m.scrollFactorY)),u*=m.scaleX,p*=m.scaleY);var v=.5773502691896257,g=-.3333333333333333,T=0,w=.6666666666666666,b=u/2,E=p/2,A,R,I,P,N;d.staggerAxis==="y"?(A=(a-b)/(v*u),R=(r-E)/E,I=v*A+g*R,P=T*A+w*R):(A=(a-b)/b,R=(r-E)/(v*p),I=g*A+v*R,P=w*A+T*R),N=-I-P;var F=Math.round(I),O=Math.round(P),D=Math.round(N),L=Math.abs(F-I),z=Math.abs(O-P),X=Math.abs(D-N);L>z&&L>X?F=-O-D:z>X&&(O=-F-D);var H,J=O;return d.staggerIndex==="odd"?H=J%2===0?O/2+F:O/2+F-.5:H=J%2===0?O/2+F:O/2+F+.5,n.set(H,J)};o.exports=l},62839:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t>=0&&t<l.width&&s>=0&&s<l.height};o.exports=y},20887:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(13125),l=function(a,r,i,n){i===void 0&&(i=[]),n===void 0&&(n=0),i.length=0;var h=a.tilemapLayer,d=a.data,u=a.width,p=a.height,m=h.skipCull,v=0,g=u,T=0,w=p,b,E,A;if(n===0){for(E=T;E<w;E++)for(b=v;b<g;b++)if(m||s(b,E,a,r)){if(A=d[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;i.push(A)}}else if(n===1){for(E=T;E<w;E++)for(b=g;b>=v;b--)if(m||s(b,E,a,r)){if(A=d[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;i.push(A)}}else if(n===2){for(E=w;E>=T;E--)for(b=v;b<g;b++)if(m||s(b,E,a,r)){if(A=d[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;i.push(A)}}else if(n===3){for(E=w;E>=T;E--)for(b=g;b>=v;b--)if(m||s(b,E,a,r)){if(A=d[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;i.push(A)}}return h.tilesDrawn=i.length,h.tilesTotal=u*p,i};o.exports=l},21808:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h){i||(i=new s);var d=h.baseTileWidth,u=h.baseTileHeight,p=h.tilemapLayer,m=0,v=0;p&&(n||(n=p.scene.cameras.main),m=p.x+n.scrollX*(1-p.scrollFactorX),d*=p.scaleX,v=p.y+n.scrollY*(1-p.scrollFactorY),u*=p.scaleY);var g=m+(a-r)*(d/2),T=v+(a+r)*(u/2);return i.set(g,T)};o.exports=l},18750:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d,u){n||(n=new s);var p=d.baseTileWidth,m=d.baseTileHeight,v=d.tilemapLayer;v&&(h||(h=v.scene.cameras.main),r=r-(v.y+h.scrollY*(1-v.scrollFactorY)),m*=v.scaleY,a=a-(v.x+h.scrollX*(1-v.scrollFactorX)),p*=v.scaleX);var g=p/2,T=m/2;a=a-g,u||(r=r-m);var w=.5*(a/g+r/T),b=.5*(-a/g+r/T);return i&&(w=Math.floor(w),b=Math.floor(b)),n.set(w,b)};o.exports=l},29003:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29633),l=t(62839),a=t(92839),r=t(68234),i=function(n,h,d,u,p){if(u===void 0&&(u=!0),!l(h,d,p))return null;var m,v=p.data[d][h],g=v&&v.collides;n instanceof s?(p.data[d][h]===null&&(p.data[d][h]=new s(p,n.index,h,d,p.tileWidth,p.tileHeight)),p.data[d][h].copy(n)):(m=n,p.data[d][h]===null?p.data[d][h]=new s(p,m,h,d,p.tileWidth,p.tileHeight):p.data[d][h].index=m);var T=p.data[d][h],w=p.collideIndexes.indexOf(T.index)!==-1;if(m=n instanceof s?n.index:n,m===-1)T.width=p.tileWidth,T.height=p.tileHeight;else{var b=p.tilemapLayer.tilemap,E=b.tiles,A=E[m][2],R=b.tilesets[A];T.width=R.tileWidth,T.height=R.tileHeight}return r(T,w),u&&g!==T.collides&&a(h,d,p),T};o.exports=i},48565:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29003),l=t(93736),a=new l,r=function(i,n,h,d,u,p){return p.tilemapLayer.worldToTileXY(n,h,!0,a,u,p),s(i,a.x,a.y,d,p)};o.exports=r},56547:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60386),l=t(29003),a=function(r,i,n,h,d){if(h===void 0&&(h=!0),!Array.isArray(r))return null;Array.isArray(r[0])||(r=[r]);for(var u=r.length,p=r[0].length,m=0;m<u;m++)for(var v=0;v<p;v++){var g=r[m][v];l(g,i+v,n+m,!1,d)}h&&s(i-1,n-1,p+2,u+2,d)};o.exports=a},91180:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(72861),a=function(r,i,n,h,d,u){var p,m=s(r,i,n,h,{},u);if(!d)for(d=[],p=0;p<m.length;p++)d.indexOf(m[p].index)===-1&&d.push(m[p].index);for(p=0;p<m.length;p++)m[p].index=l(d)};o.exports=a},929:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29633),l=t(62839),a=t(92839),r=function(i,n,h,d,u){if(h===void 0&&(h=!0),d===void 0&&(d=!0),!l(i,n,u))return null;var p=u.data[n][i];if(p)u.data[n][i]=h?null:new s(u,-1,i,n,u.tileWidth,u.tileHeight);else return null;return d&&p&&p.collides&&a(i,n,u),p};o.exports=r},17384:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(929),l=t(93736),a=new l,r=function(i,n,h,d,u,p){return p.tilemapLayer.worldToTileXY(i,n,!0,a,u,p),s(a.x,a.y,h,d,p)};o.exports=r},93763:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(95509),a=new l(105,210,231,150),r=new l(243,134,48,200),i=new l(40,39,37,150),n=function(h,d,u){d===void 0&&(d={});var p=d.tileColor!==void 0?d.tileColor:a,m=d.collidingTileColor!==void 0?d.collidingTileColor:r,v=d.faceColor!==void 0?d.faceColor:i,g=s(0,0,u.width,u.height,null,u);h.translateCanvas(u.tilemapLayer.x,u.tilemapLayer.y),h.scaleCanvas(u.tilemapLayer.scaleX,u.tilemapLayer.scaleY);for(var T=0;T<g.length;T++){var w=g[T],b=w.width,E=w.height,A=w.pixelX,R=w.pixelY,I=w.collides?m:p;I!==null&&(h.fillStyle(I.color,I.alpha/255),h.fillRect(A,R,b,E)),A+=1,R+=1,b-=2,E-=2,v!==null&&(h.lineStyle(1,v.color,v.alpha/255),w.faceTop&&h.lineBetween(A,R,A+b,R),w.faceRight&&h.lineBetween(A+b,R,A+b,R+E),w.faceBottom&&h.lineBetween(A,R+E,A+b,R+E),w.faceLeft&&h.lineBetween(A,R,A,R+E))}};o.exports=n},51202:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u){for(var p=s(i,n,h,d,null,u),m=0;m<p.length;m++)p[m]&&p[m].index===a&&(p[m].index=r)};o.exports=l},6987:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=t.data,i=t.width,n=t.height,h=t.tilemapLayer,d=Math.max(0,s.left),u=Math.min(i,s.right),p=Math.max(0,s.top),m=Math.min(n,s.bottom),v,g,T;if(l===0)for(g=p;g<m;g++)for(v=d;r[g]&&v<u;v++)T=r[g][v],!(!T||T.index===-1||!T.visible||T.alpha===0)&&a.push(T);else if(l===1)for(g=p;g<m;g++)for(v=u;r[g]&&v>=d;v--)T=r[g][v],!(!T||T.index===-1||!T.visible||T.alpha===0)&&a.push(T);else if(l===2)for(g=m;g>=p;g--)for(v=d;r[g]&&v<u;v++)T=r[g][v],!(!T||T.index===-1||!T.visible||T.alpha===0)&&a.push(T);else if(l===3)for(g=m;g>=p;g--)for(v=u;r[g]&&v>=d;v--)T=r[g][v],!(!T||T.index===-1||!T.visible||T.alpha===0)&&a.push(T);return h.tilesDrawn=a.length,h.tilesTotal=i*n,a};o.exports=y},51710:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=t(91181),r=function(i,n,h,d,u){n===void 0&&(n=!0),h===void 0&&(h=!0),u===void 0&&(u=!0),Array.isArray(i)||(i=[i]);for(var p=0;p<i.length;p++)a(i[p],n,d);if(u)for(var m=0;m<d.height;m++)for(var v=0;v<d.width;v++){var g=d.data[m][v];g&&i.indexOf(g.index)!==-1&&s(g,n)}h&&l(0,0,d.width,d.height,d)};o.exports=r},15216:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=t(91181),r=function(i,n,h,d,u,p){if(h===void 0&&(h=!0),d===void 0&&(d=!0),p===void 0&&(p=!0),!(i>n)){for(var m=i;m<=n;m++)a(m,h,u);if(p)for(var v=0;v<u.height;v++)for(var g=0;g<u.width;g++){var T=u.data[v][g];T&&T.index>=i&&T.index<=n&&s(T,h)}d&&l(0,0,u.width,u.height,u)}};o.exports=r},33158:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=t(91181),r=function(i,n,h,d){n===void 0&&(n=!0),h===void 0&&(h=!0),Array.isArray(i)||(i=[i]);for(var u=0;u<d.height;u++)for(var p=0;p<d.width;p++){var m=d.data[u][p];m&&i.indexOf(m.index)===-1&&(s(m,n),a(m.index,n,d))}h&&l(0,0,d.width,d.height,d)};o.exports=r},4180:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=t(19256),r=function(i,n,h,d){n===void 0&&(n=!0),h===void 0&&(h=!0);for(var u=0;u<d.height;u++)for(var p=0;p<d.width;p++){var m=d.data[u][p];if(m){for(var v in i)if(a(m.properties,v)){var g=i[v];Array.isArray(g)||(g=[g]);for(var T=0;T<g.length;T++)m.properties[v]===g[T]&&s(m,n)}}}h&&l(0,0,d.width,d.height,d)};o.exports=r},18625:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68234),l=t(60386),a=function(r,i,n){r===void 0&&(r=!0),i===void 0&&(i=!0);for(var h=0;h<n.height;h++)for(var d=0;d<n.width;d++){var u=n.data[h][d];if(u){var p=u.getCollisionGroup();p&&p.objects&&p.objects.length>0&&s(u,r)}}i&&l(0,0,n.width,n.height,n)};o.exports=a},91181:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=l.collideIndexes.indexOf(t);s&&a===-1?l.collideIndexes.push(t):!s&&a!==-1&&l.collideIndexes.splice(a,1)};o.exports=y},68234:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)};o.exports=y},11628:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){if(typeof t=="number")a.callbacks[t]=s!==null?{callback:s,callbackContext:l}:void 0;else for(var r=0,i=t.length;r<i;r++)a.callbacks[t[r]]=s!==null?{callback:s,callbackContext:l}:void 0};o.exports=y},72732:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u){for(var p=s(a,r,i,n,null,u),m=0;m<p.length;m++)p[m].setCollisionCallback(h,d)};o.exports=l},34397:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=t(18592),a=function(r,i,n,h,d){var u=s(r,i,n,h,null,d),p=u.map(function(v){return v.index});l(p);for(var m=0;m<u.length;m++)u[m].index=p[m]};o.exports=a},53945:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82127),l=t(84314),a=function(r,i){var n=r.tilemapLayer.tilemap,h=r.tilemapLayer,d=Math.floor(n.tileWidth*h.scaleX),u=Math.floor(n.tileHeight*h.scaleY),p=l(i.worldView.x-h.x,d,0,!0)-h.cullPaddingX,m=s(i.worldView.right-h.x,d,0,!0)+h.cullPaddingX,v=l(i.worldView.y-h.y,u/2,0,!0)-h.cullPaddingY,g=s(i.worldView.bottom-h.y,u/2,0,!0)+h.cullPaddingY;return{left:p,right:m,top:v,bottom:g}};o.exports=a},19242:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(53945),l=t(6987),a=function(r,i,n,h){n===void 0&&(n=[]),h===void 0&&(h=0),n.length=0;var d=r.tilemapLayer,u=s(r,i);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(u.left=0,u.right=r.width,u.top=0,u.bottom=r.height),l(r,u,h,n),n};o.exports=a},33388:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h){i||(i=new s);var d=h.baseTileWidth,u=h.baseTileHeight,p=h.tilemapLayer,m=0,v=0;p&&(n||(n=p.scene.cameras.main),m=p.x+n.scrollX*(1-p.scrollFactorX),d*=p.scaleX,v=p.y+n.scrollY*(1-p.scrollFactorY),u*=p.scaleY);var g=m+a*d+r%2*(d/2),T=v+r*(u/2);return i.set(g,T)};o.exports=l},84132:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=l.baseTileHeight,r=l.tilemapLayer,i=0;return r&&(s===void 0&&(s=r.scene.cameras.main),i=r.y+s.scrollY*(1-r.scrollFactorY),a*=r.scaleY),i+t*(a/2)+a};o.exports=y},90562:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d){n||(n=new s);var u=d.baseTileWidth,p=d.baseTileHeight,m=d.tilemapLayer;m&&(h||(h=m.scene.cameras.main),r=r-(m.y+h.scrollY*(1-m.scrollFactorY)),p*=m.scaleY,a=a-(m.x+h.scrollX*(1-m.scrollFactorX)),u*=m.scaleX);var v=i?Math.floor(r/(p/2)):r/(p/2),g=i?Math.floor((a+v%2*.5*u)/u):(a+v%2*.5*u)/u;return n.set(g,v)};o.exports=l},3689:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=a.baseTileHeight,i=a.tilemapLayer;return i&&(l||(l=i.scene.cameras.main),t=t-(i.y+l.scrollY*(1-i.scrollFactorY)),r*=i.scaleY),s?Math.floor(t/(r/2)):t/(r/2)};o.exports=y},55217:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d,u){for(var p=s(i,n,h,d,null,u),m=0;m<p.length;m++)p[m]&&(p[m].index===a?p[m].index=r:p[m].index===r&&(p[m].index=a))};o.exports=l},44150:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=l.baseTileWidth,r=l.tilemapLayer,i=0;return r&&(s||(s=r.scene.cameras.main),i=r.x+s.scrollX*(1-r.scrollFactorX),a*=r.scaleX),i+t*a};o.exports=y},46836:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44150),l=t(42477),a=t(93736),r=function(i,n,h,d,u){return h||(h=new a(0,0)),h.x=s(i,d,u),h.y=l(n,d,u),h};o.exports=r},42477:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=l.baseTileHeight,r=l.tilemapLayer,i=0;return r&&(s||(s=r.scene.cameras.main),i=r.y+s.scrollY*(1-r.scrollFactorY),a*=r.scaleY),i+t*a};o.exports=y},39677:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50811),l=function(a,r,i,n,h,d){if(h){var u,p=s(a,r,i,n,null,d),m=0;for(u=0;u<h.length;u++)m+=h[u].weight;if(!(m<=0))for(u=0;u<p.length;u++){for(var v=Math.random()*m,g=0,T=-1,w=0;w<h.length;w++)if(g+=h[w].weight,v<=g){var b=h[w].index;T=Array.isArray(b)?b[Math.floor(Math.random()*b.length)]:b;break}p[u].index=T}}};o.exports=l},806:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45676),l=t(93736),a=new l,r=function(i,n,h,d){return s(i,0,n,a,h,d),a.x};o.exports=r},45676:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93736),l=function(a,r,i,n,h,d){i===void 0&&(i=!0),n||(n=new s);var u=d.baseTileWidth,p=d.baseTileHeight,m=d.tilemapLayer;m&&(h||(h=m.scene.cameras.main),a=a-(m.x+h.scrollX*(1-m.scrollFactorX)),r=r-(m.y+h.scrollY*(1-m.scrollFactorY)),u*=m.scaleX,p*=m.scaleY);var v=a/u,g=r/p;return i&&(v=Math.floor(v),g=Math.floor(g)),n.set(v,g)};o.exports=l},70520:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45676),l=t(93736),a=new l,r=function(i,n,h,d){return s(0,i,n,a,h,d),a.y};o.exports=r},5047:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CalculateFacesAt:t(92839),CalculateFacesWithin:t(60386),CheckIsoBounds:t(13125),Copy:t(17347),CreateFromTiles:t(93604),CullBounds:t(71586),CullTiles:t(381),Fill:t(97734),FilterTiles:t(63555),FindByIndex:t(37982),FindTile:t(48297),ForEachTile:t(80916),GetCullTilesFunction:t(31493),GetTileAt:t(15494),GetTileAtWorldXY:t(24640),GetTileCorners:t(48495),GetTileCornersFunction:t(7160),GetTilesWithin:t(50811),GetTilesWithinShape:t(31674),GetTilesWithinWorldXY:t(44662),GetTileToWorldXFunction:t(16884),GetTileToWorldXYFunction:t(68182),GetTileToWorldYFunction:t(3752),GetWorldToTileXFunction:t(29296),GetWorldToTileXYFunction:t(32688),GetWorldToTileYFunction:t(74326),HasTileAt:t(46598),HasTileAtWorldXY:t(28654),HexagonalCullBounds:t(6358),HexagonalCullTiles:t(37524),HexagonalGetTileCorners:t(63634),HexagonalTileToWorldXY:t(21715),HexagonalWorldToTileXY:t(11516),IsInLayerBounds:t(62839),IsometricCullTiles:t(20887),IsometricTileToWorldXY:t(21808),IsometricWorldToTileXY:t(18750),PutTileAt:t(29003),PutTileAtWorldXY:t(48565),PutTilesAt:t(56547),Randomize:t(91180),RemoveTileAt:t(929),RemoveTileAtWorldXY:t(17384),RenderDebug:t(93763),ReplaceByIndex:t(51202),RunCull:t(6987),SetCollision:t(51710),SetCollisionBetween:t(15216),SetCollisionByExclusion:t(33158),SetCollisionByProperty:t(4180),SetCollisionFromCollisionGroup:t(18625),SetLayerCollisionIndex:t(91181),SetTileCollision:t(68234),SetTileIndexCallback:t(11628),SetTileLocationCallback:t(72732),Shuffle:t(34397),StaggeredCullBounds:t(53945),StaggeredCullTiles:t(19242),StaggeredTileToWorldXY:t(33388),StaggeredTileToWorldY:t(84132),StaggeredWorldToTileXY:t(90562),StaggeredWorldToTileY:t(3689),SwapByIndex:t(55217),TileToWorldX:t(44150),TileToWorldXY:t(46836),TileToWorldY:t(42477),WeightedRandomize:t(39677),WorldToTileX:t(806),WorldToTileXY:t(45676),WorldToTileY:t(70520)}},12920:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ORIENTATION:t(12920)};o.exports=s},52678:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=t(84758),a={Components:t(5047),Parsers:t(34124),Formats:t(93560),ImageCollection:t(97042),ParseToTilemap:t(15043),Tile:t(29633),Tilemap:t(89797),TilemapCreator:t(4843),TilemapFactory:t(37940),Tileset:t(47975),TilemapLayer:t(87177),Orientation:t(12920),LayerData:t(94990),MapData:t(16586),ObjectLayer:t(15256)};a=s(!1,a,l.ORIENTATION),o.exports=a},94990:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12920),a=t(72632),r=new s({initialize:function(n){n===void 0&&(n={}),this.name=a(n,"name","layer"),this.id=a(n,"id",0),this.x=a(n,"x",0),this.y=a(n,"y",0),this.width=a(n,"width",0),this.height=a(n,"height",0),this.tileWidth=a(n,"tileWidth",0),this.tileHeight=a(n,"tileHeight",0),this.baseTileWidth=a(n,"baseTileWidth",this.tileWidth),this.baseTileHeight=a(n,"baseTileHeight",this.tileHeight),this.orientation=a(n,"orientation",l.ORTHOGONAL),this.widthInPixels=a(n,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=a(n,"heightInPixels",this.height*this.baseTileHeight),this.alpha=a(n,"alpha",1),this.visible=a(n,"visible",!0),this.properties=a(n,"properties",[]),this.indexes=a(n,"indexes",[]),this.collideIndexes=a(n,"collideIndexes",[]),this.callbacks=a(n,"callbacks",[]),this.bodies=a(n,"bodies",[]),this.data=a(n,"data",[]),this.tilemapLayer=a(n,"tilemapLayer",null),this.hexSideLength=a(n,"hexSideLength",0),this.staggerAxis=a(n,"staggerAxis","y"),this.staggerIndex=a(n,"staggerIndex","odd")}});o.exports=r},16586:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(12920),a=t(72632),r=new s({initialize:function(n){n===void 0&&(n={}),this.name=a(n,"name","map"),this.width=a(n,"width",0),this.height=a(n,"height",0),this.infinite=a(n,"infinite",!1),this.tileWidth=a(n,"tileWidth",0),this.tileHeight=a(n,"tileHeight",0),this.widthInPixels=a(n,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=a(n,"heightInPixels",this.height*this.tileHeight),this.format=a(n,"format",null),this.orientation=a(n,"orientation",l.ORTHOGONAL),this.renderOrder=a(n,"renderOrder","right-down"),this.version=a(n,"version","1"),this.properties=a(n,"properties",{}),this.layers=a(n,"layers",[]),this.images=a(n,"images",[]),this.objects=a(n,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=a(n,"collision",{}),this.tilesets=a(n,"tilesets",[]),this.imageCollections=a(n,"imageCollections",[]),this.tiles=a(n,"tiles",[]),this.hexSideLength=a(n,"hexSideLength",0),this.staggerAxis=a(n,"staggerAxis","y"),this.staggerIndex=a(n,"staggerIndex","odd")}});o.exports=r},15256:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=new s({initialize:function(i){i===void 0&&(i={}),this.name=l(i,"name","object layer"),this.id=l(i,"id",0),this.opacity=l(i,"opacity",1),this.properties=l(i,"properties",{}),this.propertyTypes=l(i,"propertytypes",{}),this.type=l(i,"type","objectgroup"),this.visible=l(i,"visible",!0),this.objects=l(i,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});o.exports=a},21394:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12920),l=function(a){return a=a.toLowerCase(),a==="isometric"?s.ISOMETRIC:a==="staggered"?s.STAGGERED:a==="hexagonal"?s.HEXAGONAL:s.ORTHOGONAL};o.exports=l},90715:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(84346),a=t(96097),r=t(2378),i=t(44909),n=function(h,d,u,p,m,v){var g;switch(d){case s.ARRAY_2D:g=l(h,u,p,m,v);break;case s.CSV:g=a(h,u,p,m,v);break;case s.TILED_JSON:g=r(h,u,v);break;case s.WELTMEISTER:g=i(h,u,v);break;default:console.warn("Unrecognized tilemap data format: "+d),g=null}return g};o.exports=n},84346:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(94990),a=t(16586),r=t(29633),i=function(n,h,d,u,p){for(var m=new l({tileWidth:d,tileHeight:u}),v=new a({name:n,tileWidth:d,tileHeight:u,format:s.ARRAY_2D,layers:[m]}),g=[],T=h.length,w=0,b=0;b<h.length;b++){g[b]=[];for(var E=h[b],A=0;A<E.length;A++){var R=parseInt(E[A],10);isNaN(R)||R===-1?g[b][A]=p?null:new r(m,-1,A,b,d,u):g[b][A]=new r(m,R,A,b,d,u)}w===0&&(w=E.length)}return v.width=m.width=w,v.height=m.height=T,v.widthInPixels=m.widthInPixels=w*d,v.heightInPixels=m.heightInPixels=T*u,m.data=g,v};o.exports=i},96097:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(84346),a=function(r,i,n,h,d){var u=i.trim().split(`
`).map(function(m){return m.split(",")}),p=l(r,u,n,h,d);return p.format=s.CSV,p};o.exports=a},30951:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(94990),l=t(29633),a=function(r,i){for(var n=[],h=0;h<r.layer.length;h++){for(var d=r.layer[h],u=new s({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:d.visible===1}),p=[],m=[],v=0;v<d.data.length;v++){for(var g=0;g<d.data[v].length;g++){var T=d.data[v][g]-1,w;T>-1?w=new l(u,T,g,v,d.tilesize,d.tilesize):w=i?null:new l(u,-1,g,v,d.tilesize,d.tilesize),p.push(w)}m.push(p),p=[]}u.data=m,n.push(u)}return n};o.exports=a},47488:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47975),l=function(a){for(var r=[],i=[],n=0;n<a.layer.length;n++){var h=a.layer[n],d=h.tilesetName;d!==""&&i.indexOf(d)===-1&&(i.push(d),r.push(new s(d,0,h.tilesize,h.tilesize,0,0)))}return r};o.exports=l},44909:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93560),l=t(16586),a=t(30951),r=t(47488),i=function(n,h,d){if(h.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+n),null;for(var u=0,p=0,m=0;m<h.layer.length;m++)h.layer[m].width>u&&(u=h.layer[m].width),h.layer[m].height>p&&(p=h.layer[m].height);var v=new l({width:u,height:p,name:n,tileWidth:h.layer[0].tilesize,tileHeight:h.layer[0].tilesize,format:s.WELTMEISTER});return v.layers=a(h,d),v.tilesets=r(h),v};o.exports=i},24507:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ParseTileLayers:t(30951),ParseTilesets:t(47488),ParseWeltmeister:t(44909)}},34124:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FromOrientationString:t(21394),Parse:t(90715),Parse2DArray:t(84346),ParseCSV:t(96097),Impact:t(24507),Tiled:t(50044)}},48646:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(98611),l=function(a){for(var r,i,n,h,d,u=0;u<a.layers.length;u++){r=a.layers[u],h=null;for(var p=0;p<r.data.length;p++){d=r.data[p];for(var m=0;m<d.length;m++)i=d[m],!(i===null||i.index<0)&&(n=a.tiles[i.index][2],h=a.tilesets[n],i.width=h.tileWidth,i.height=h.tileHeight,h.tileProperties&&h.tileProperties[i.index-h.firstgid]&&(i.properties=s(i.properties,h.tileProperties[i.index-h.firstgid])))}}};o.exports=l},43908:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){for(var s=window.atob(t),l=s.length,a=new Array(l/4),r=0;r<l;r+=4)a[r/4]=(s.charCodeAt(r)|s.charCodeAt(r+1)<<8|s.charCodeAt(r+2)<<16|s.charCodeAt(r+3)<<24)>>>0;return a};o.exports=y},14556:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47975),l=function(a){var r,i,n=[];for(r=0;r<a.imageCollections.length;r++)for(var h=a.imageCollections[r],d=h.images,u=0;u<d.length;u++){var p=d[u];i=new s(p.image,p.gid,h.imageWidth,h.imageHeight,0,0),i.updateTileData(h.imageWidth,h.imageHeight),a.tilesets.push(i)}for(r=0;r<a.tilesets.length;r++){i=a.tilesets[r];for(var m=i.tileMargin,v=i.tileMargin,g=0,T=0,w=0,b=i.firstgid;b<i.firstgid+i.total&&(n[b]=[m,v,r],m+=i.tileWidth+i.tileSpacing,g++,!(g===i.total||(T++,T===i.columns&&(m=i.tileMargin,v+=i.tileHeight+i.tileSpacing,T=0,w++,w===i.rows))));b++);}return n};o.exports=l},92044:(o,y,t)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=function(a,r,i){if(!r)return{i:0,layers:a.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=r.x+s(r,"startx",0)*a.tilewidth+s(r,"offsetx",0),h=r.y+s(r,"starty",0)*a.tileheight+s(r,"offsety",0);return{i:0,layers:r.layers,name:i.name+r.name+"/",opacity:i.opacity*r.opacity,visible:i.visible&&r.visible,x:i.x+n,y:i.y+h}};o.exports=l},8847:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=2147483648,t=1073741824,s=536870912,l=function(a){var r=!!(a&y),i=!!(a&t),n=!!(a&s);a=a&~(y|t|s);var h=0,d=!1;return r&&i&&n?(h=Math.PI/2,d=!0):r&&i&&!n?(h=Math.PI,d=!1):r&&!i&&n?(h=Math.PI/2,d=!1):r&&!i&&!n?(h=0,d=!0):!r&&i&&n?(h=3*Math.PI/2,d=!1):!r&&i&&!n?(h=Math.PI,d=!0):!r&&!i&&n?(h=3*Math.PI/2,d=!0):!r&&!i&&!n&&(h=0,d=!1),{gid:a,flippedHorizontal:r,flippedVertical:i,flippedAntiDiagonal:n,rotation:h,flipped:d}};o.exports=l},78339:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=t(92044),a=function(r){for(var i=[],n=[],h=l(r);h.i<h.layers.length||n.length>0;){if(h.i>=h.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=n.pop();continue}var d=h.layers[h.i];if(h.i++,d.type!=="imagelayer"){if(d.type==="group"){var u=l(r,d,h);n.push(h),h=u}continue}var p=s(d,"offsetx",0)+s(d,"startx",0),m=s(d,"offsety",0)+s(d,"starty",0);i.push({name:h.name+d.name,image:d.image,x:h.x+p+d.x,y:h.y+m+d.y,alpha:h.opacity*d.opacity,visible:h.visible&&d.visible,properties:s(d,"properties",{})})}return i};o.exports=a},2378:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48646),l=t(14556),a=t(12920),r=t(28699),i=t(93560),n=t(21394),h=t(16586),d=t(78339),u=t(61136),p=t(95925),m=t(93392),v=function(g,T,w){var b=r(T),E=new h({width:b.width,height:b.height,name:g,tileWidth:b.tilewidth,tileHeight:b.tileheight,orientation:n(b.orientation),format:i.TILED_JSON,version:b.version,properties:b.properties,renderOrder:b.renderorder,infinite:b.infinite});E.orientation===a.HEXAGONAL&&(E.hexSideLength=b.hexsidelength,E.staggerAxis=b.staggeraxis,E.staggerIndex=b.staggerindex),E.layers=p(b,w),E.images=d(b);var A=m(b);return E.tilesets=A.tilesets,E.imageCollections=A.imageCollections,E.objects=u(b),E.tiles=l(E),s(E),E};o.exports=v},4281:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28820),l=t(8847),a=function(n){return{x:n.x,y:n.y}},r=["id","name","type","rotation","properties","visible","x","y","width","height"],i=function(n,h,d){h===void 0&&(h=0),d===void 0&&(d=0);var u=s(n,r);if(u.x+=h,u.y+=d,n.gid){var p=l(n.gid);u.gid=p.gid,u.flippedHorizontal=p.flippedHorizontal,u.flippedVertical=p.flippedVertical,u.flippedAntiDiagonal=p.flippedAntiDiagonal}else n.polyline?u.polyline=n.polyline.map(a):n.polygon?u.polygon=n.polygon.map(a):n.ellipse?u.ellipse=n.ellipse:n.text?u.text=n.text:n.point?u.point=!0:u.rectangle=!0;return u};o.exports=i},61136:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72632),l=t(4281),a=t(15256),r=t(92044),i=function(n){for(var h=[],d=[],u=r(n);u.i<u.layers.length||d.length>0;){if(u.i>=u.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=d.pop();continue}var p=u.layers[u.i];if(u.i++,p.opacity*=u.opacity,p.visible=u.visible&&p.visible,p.type!=="objectgroup"){if(p.type==="group"){var m=r(n,p,u);d.push(u),u=m}continue}p.name=u.name+p.name;for(var v=u.x+s(p,"startx",0)+s(p,"offsetx",0),g=u.y+s(p,"starty",0)+s(p,"offsety",0),T=[],w=0;w<p.objects.length;w++){var b=l(p.objects[w],v,g);T.push(b)}var E=new a(p);E.objects=T,h.push(E)}return h};o.exports=i},95925:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43908),l=t(12920),a=t(92044),r=t(21394),i=t(72632),n=t(94990),h=t(8847),d=t(29633),u=function(p,m){for(var v=i(p,"infinite",!1),g=[],T=[],w=a(p);w.i<w.layers.length||T.length>0;){if(w.i>=w.layers.length){if(T.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}w=T.pop();continue}var b=w.layers[w.i];if(w.i++,b.type!=="tilelayer"){if(b.type==="group"){var E=a(p,b,w);T.push(w),w=E}continue}if(b.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+b.name+"'");continue}else if(b.encoding&&b.encoding==="base64"){if(b.chunks)for(var A=0;A<b.chunks.length;A++)b.chunks[A].data=s(b.chunks[A].data);b.data&&(b.data=s(b.data)),delete b.encoding}var R,I,P,N,F=[],O=0;if(v){var D=i(b,"startx",0)+b.x,L=i(b,"starty",0)+b.y;R=new n({name:w.name+b.name,id:b.id,x:w.x+i(b,"offsetx",0)+D*p.tilewidth,y:w.y+i(b,"offsety",0)+L*p.tileheight,width:b.width,height:b.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:w.opacity*b.opacity,visible:w.visible&&b.visible,properties:i(b,"properties",[]),orientation:r(p.orientation)}),R.orientation===l.HEXAGONAL&&(R.hexSideLength=p.hexsidelength,R.staggerAxis=p.staggeraxis,R.staggerIndex=p.staggerindex);for(var z=0;z<b.height;z++){F[z]=[null];for(var X=0;X<b.width;X++)F[z][X]=null}for(z=0,_=b.chunks.length;z<_;z++)for(var H=b.chunks[z],J=H.x-D,G=H.y-L,k=0,M=0,B=H.data.length;M<B;M++){var U=O+J,W=k+G;I=h(H.data[M]),I.gid>0?(P=new d(R,I.gid,U,W,p.tilewidth,p.tileheight),P.rotation=I.rotation,P.flipX=I.flipped,F[W][U]=P):(N=m?null:new d(R,-1,U,W,p.tilewidth,p.tileheight),F[W][U]=N),O++,O===H.width&&(k++,O=0)}}else{R=new n({name:w.name+b.name,id:b.id,x:w.x+i(b,"offsetx",0)+b.x,y:w.y+i(b,"offsety",0)+b.y,width:b.width,height:b.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:w.opacity*b.opacity,visible:w.visible&&b.visible,properties:i(b,"properties",[]),orientation:r(p.orientation)}),R.orientation===l.HEXAGONAL&&(R.hexSideLength=p.hexsidelength,R.staggerAxis=p.staggeraxis,R.staggerIndex=p.staggerindex);for(var K=[],q=0,_=b.data.length;q<_;q++)I=h(b.data[q]),I.gid>0?(P=new d(R,I.gid,O,F.length,p.tilewidth,p.tileheight),P.rotation=I.rotation,P.flipX=I.flipped,K.push(P)):(N=m?null:new d(R,-1,O,F.length,p.tilewidth,p.tileheight),K.push(N)),O++,O===b.width&&(F.push(K),O=0,K=[])}R.data=F,g.push(R)}return g};o.exports=u},93392:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47975),l=t(97042),a=t(4281),r=t(39642),i=function(n){for(var h=[],d=[],u=null,p,m=0;m<n.tilesets.length;m++){var v=n.tilesets[m];if(v.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(v.image){var g=new s(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,void 0,void 0,v.tileoffset);if(n.version>1){var T=void 0,w=void 0;if(Array.isArray(v.tiles)){T=T||{},w=w||{};for(var b=0;b<v.tiles.length;b++){var E=v.tiles[b];if(E.properties){var A={};E.properties.forEach(function(z){A[z.name]=z.value}),w[E.id]=A}if(E.objectgroup&&((T[E.id]||(T[E.id]={})).objectgroup=E.objectgroup,E.objectgroup.objects)){var R=E.objectgroup.objects.map(function(z){return a(z)});T[E.id].objectgroup.objects=R}E.animation&&((T[E.id]||(T[E.id]={})).animation=E.animation),E.type&&((T[E.id]||(T[E.id]={})).type=E.type)}}Array.isArray(v.wangsets)&&(T=T||{},w=w||{},r(v.wangsets,T)),T&&(g.tileData=T,g.tileProperties=w)}else if(v.tileproperties&&(g.tileProperties=v.tileproperties),v.tiles){g.tileData=v.tiles;for(p in g.tileData){var I=g.tileData[p].objectgroup;if(I&&I.objects){var P=I.objects.map(function(z){return a(z)});g.tileData[p].objectgroup.objects=P}}}g.updateTileData(v.imagewidth,v.imageheight),h.push(g)}else{var N=new l(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,v.properties),F=0;for(b=0;b<v.tiles.length;b++){E=v.tiles[b];var O=E.image,D=parseInt(E.id,10),L=v.firstgid+D;N.addImage(L,O),F=Math.max(D,F)}N.maxId=F,d.push(N)}u&&(u.lastgid=v.firstgid-1),u=v}return{tilesets:h,imageCollections:d}};o.exports=i},39642:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){for(var l=0;l<t.length;l++){var a=t[l],r=l;if(a.name&&a.name!==""&&(r=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var i={},n={},h,d,u;if(Array.isArray(a.edgecolors))for(h=0;h<a.edgecolors.length;h++)u=1+h,d=a.edgecolors[h],d.name!==""&&(i[u]=d.name);if(Array.isArray(a.cornercolors))for(h=0;h<a.cornercolors.length;h++)u=1+h,d=a.cornercolors[h],d.name!==""&&(n[u]=d.name);if(Array.isArray(a.colors))for(h=0;h<a.colors.length;h++)d=a.colors[h],u=1+h,d.name!==""&&(i[u]=n[u]=d.name);for(var p=[i,n,i,n,i,n,i,n],m=0;m<a.wangtiles.length;m++){var v=a.wangtiles[m],g=s[v.tileid]||(s[v.tileid]={});g=g.wangid||(g.wangid={});for(var T=[],w=0;w<Math.min(p.length,v.wangid.length);w++){if(d=v.wangid[w],d===0){T.push(void 0);continue}var b=p[w][d];if(b!==void 0){T.push(b);continue}T.push(d)}g[r]=T}}}};o.exports=y},50044:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AssignTileProperties:t(48646),Base64Decode:t(43908),BuildTilesetIndex:t(14556),CreateGroupLayer:t(92044),ParseGID:t(8847),ParseImageLayers:t(78339),ParseJSONTiled:t(2378),ParseObject:t(4281),ParseObjectLayers:t(61136),ParseTileLayers:t(95925),ParseTilesets:t(93392)}},73779:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(91963),a=t(7599),r=t(57911),i=t(66458),n=new s({initialize:function(d){this.scene=d,this.systems=d.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],d.sys.events.once(a.BOOT,this.boot,this),d.sys.events.on(a.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var h=this.systems.events;h.on(a.PRE_UPDATE,this.preUpdate,this),h.on(a.UPDATE,this.update,this),h.once(a.SHUTDOWN,this.shutdown,this)},addEvent:function(h){var d;return h instanceof r?(d=h,this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=d.repeat===-1||d.loop?999999999999:d.repeat):d=new r(h),this._pendingInsertion.push(d),d},delayedCall:function(h,d,u,p){return this.addEvent({delay:h,callback:d,args:u,callbackScope:p})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var u=h[d];i(this._pendingRemoval,u),i(this._pendingInsertion,u),i(this._active,u)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var h=this._pendingRemoval.length,d=this._pendingInsertion.length;if(!(h===0&&d===0)){var u,p;for(u=0;u<h;u++){p=this._pendingRemoval[u];var m=this._active.indexOf(p);m>-1&&this._active.splice(m,1),p.destroy()}for(u=0;u<d;u++)p=this._pendingInsertion[u],this._active.push(p);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(h,d){if(this.now=h,!this.paused){d*=this.timeScale;for(var u=0;u<this._active.length;u++){var p=this._active[u];if(!p.paused&&(p.elapsed+=d*p.timeScale,p.elapsed>=p.delay)){var m=p.elapsed-p.delay;if(p.elapsed=p.delay,!p.hasDispatched&&p.callback&&(p.hasDispatched=!0,p.callback.apply(p.callbackScope,p.args)),p.repeatCount>0){if(p.repeatCount--,m>=p.delay)for(;m>=p.delay&&p.repeatCount>0;)p.callback&&p.callback.apply(p.callbackScope,p.args),m-=p.delay,p.repeatCount--;p.elapsed=m,p.hasDispatched=!1}else p.hasDispatched&&this._pendingRemoval.push(p)}}}},shutdown:function(){var h;for(h=0;h<this._pendingInsertion.length;h++)this._pendingInsertion[h].destroy();for(h=0;h<this._active.length;h++)this._active[h].destroy();for(h=0;h<this._pendingRemoval.length;h++)this._pendingRemoval[h].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(a.PRE_UPDATE,this.preUpdate,this),d.off(a.UPDATE,this.update,this),d.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});l.register("Clock",n,"time"),o.exports=n},20517:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(61286),r=t(72632),i=t(7599),n=t(52944),h=new s({Extends:l,initialize:function(u,p){l.call(this),this.scene=u,this.systems=u.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var m=this.systems.events;m.on(i.PRE_UPDATE,this.preUpdate,this),m.on(i.UPDATE,this.update,this),m.once(i.SHUTDOWN,this.destroy,this),p&&this.add(p)},preUpdate:function(d,u){this.paused||(this.elapsed+=u)},update:function(){if(!(this.paused||this.complete)){var d,u=this.events,p=!1,m=this.systems,v;for(d=0;d<u.length;d++){var g=u[d];if(!g.complete&&g.time<=this.elapsed){if(g.complete=!0,this.totalComplete++,v=g.target?g.target:this,g.if&&!g.if.call(v,g))continue;if(g.once&&(p=!0),g.set&&g.target)for(var T in g.set)g.target[T]=g.set[T];g.tween&&m.tweens.add(g.tween),g.sound&&(typeof g.sound=="string"?m.sound.play(g.sound):m.sound.play(g.sound.key,g.sound.config)),g.event&&this.emit(g.event,v),g.run&&g.run.call(v),g.stop&&this.stop()}}if(p)for(d=0;d<u.length;d++)u[d].complete&&u[d].once&&(u.splice(d,1),d--);this.totalComplete>=u.length&&(this.complete=!0),this.complete&&this.emit(n.COMPLETE,this)}},play:function(d){return d===void 0&&(d=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,d&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var d=0;d<this.events.length;d++)this.events[d].complete=!1;return this.play(!1)},add:function(d){Array.isArray(d)||(d=[d]);var u=this.events,p=0;u.length>0&&(p=u[u.length-1].time);for(var m=0;m<d.length;m++){var v=d[m],g=r(v,"at",0),T=r(v,"in",null);T!==null&&(g=this.elapsed+T);var w=r(v,"from",null);w!==null&&(g=p+w),u.push({complete:!1,time:g,if:r(v,"if",null),run:r(v,"run",null),event:r(v,"event",null),target:r(v,"target",null),set:r(v,"set",null),tween:r(v,"tween",null),sound:r(v,"sound",null),once:r(v,"once",!1),stop:r(v,"stop",!1)}),p=g}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var d=Math.min(this.totalComplete,this.events.length);return d/this.events.length},destroy:function(){var d=this.systems.events;d.off(i.PRE_UPDATE,this.preUpdate,this),d.off(i.UPDATE,this.update,this),d.off(i.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});a.register("timeline",function(d){return new h(this.scene,d)}),o.exports=h},57911:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(72632),a=new s({initialize:function(i){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(i)},reset:function(r){if(this.delay=l(r,"delay",0),this.repeat=l(r,"repeat",0),this.loop=l(r,"loop",!1),this.callback=l(r,"callback",void 0),this.callbackScope=l(r,"callbackScope",this),this.args=l(r,"args",[]),this.timeScale=l(r,"timeScale",1),this.startAt=l(r,"startAt",0),this.paused=l(r,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var r=this.delay+this.delay*this.repeat,i=this.elapsed+this.delay*(this.repeat-this.repeatCount);return i/r}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(r){r===void 0&&(r=!1),this.elapsed=this.delay,this.hasDispatched=!r,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});o.exports=a},12144:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},52944:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:t(12144)}},97121:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clock:t(73779),Events:t(52944),Timeline:t(20517),TimerEvent:t(57911)}},64532:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66458),l=t(56694),a=t(5454),r=t(68710),i=t(91963),n=t(7599),h=t(91944),d=t(39366),u=t(68061),p=t(45641),m=t(56034),v=new l({initialize:function(T){this.scene=T,this.events=T.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(n.UPDATE,this.update,this),this.events.once(n.SHUTDOWN,this.shutdown,this)},create:function(g){Array.isArray(g)||(g=[g]);for(var T=[],w=0;w<g.length;w++){var b=g[w];b instanceof d||b instanceof p?T.push(b):Array.isArray(b.tweens)?T.push(m(this,b)):T.push(u(this,b))}return T.length===1?T[0]:T},add:function(g){var T=g,w=this.tweens;return T instanceof d||T instanceof p||(Array.isArray(T.tweens)?T=m(this,T):T=u(this,T)),w.push(T.reset()),T},addMultiple:function(g){for(var T,w=[],b=this.tweens,E=0;E<g.length;E++)T=g[E],T instanceof d||T instanceof p||(Array.isArray(T.tweens)?T=m(this,T):T=u(this,T)),b.push(T.reset()),w.push(T);return w},chain:function(g){var T=m(this,g);return this.tweens.push(T.init()),T},getChainedTweens:function(g){return g.getChainedTweens()},has:function(g){return this.tweens.indexOf(g)>-1},existing:function(g){return this.has(g)||this.tweens.push(g.reset()),this},addCounter:function(g){var T=r(this,g);return this.tweens.push(T.reset()),T},stagger:function(g,T){return h(g,T)},setLagSmooth:function(g,T){return g===void 0&&(g=1/1e-8),T===void 0&&(T=0),this.maxLag=g,this.lagSkip=Math.min(T,this.maxLag),this},setFps:function(g){return g===void 0&&(g=240),this.gap=1e3/g,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(g){var T=Date.now()-this.prevTime;T>this.maxLag&&(this.startTime+=T-this.lagSkip),this.prevTime+=T;var w=this.prevTime-this.startTime,b=w-this.nextTime,E=w-this.time*1e3;return b>0||g?(w/=1e3,this.time=w,this.nextTime+=b+(b>=this.gap?4:this.gap-b)):E=0,E},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(g){g===void 0&&(g=!1);var T=this.getDelta(g);if(!(T<=0)){this.processing=!0;var w,b,E=[],A=this.tweens;for(w=0;w<A.length;w++)b=A[w],b.update(T)&&E.push(b);var R=E.length;if(R&&A.length>0){for(w=0;w<R;w++){b=E[w];var I=A.indexOf(b);I>-1&&(b.isPendingRemove()||b.isDestroyed())&&(A.splice(I,1),b.destroy())}E.length=0}this.processing=!1}},remove:function(g){return this.processing?g.setPendingRemoveState():(s(this.tweens,g),g.setRemovedState()),this},reset:function(g){return this.existing(g),g.seek(),g.setActiveState(),this},makeActive:function(g){return this.existing(g),g.setActiveState(),this},each:function(g,T){var w,b=[null];for(w=1;w<arguments.length;w++)b.push(arguments[w]);return this.tweens.forEach(function(E){b[0]=E,g.apply(T,b)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(g){var T=[],w=this.tweens;Array.isArray(g)?g=a(g):g=[g];for(var b=g.length,E=0;E<w.length;E++)for(var A=w[E],R=0;R<b;R++)!A.isDestroyed()&&A.hasTarget(g[R])&&T.push(A);return T},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(g){return this.timeScale=g,this},isTweening:function(g){for(var T=this.tweens,w,b=0;b<T.length;b++)if(w=T[b],w.isPlaying()&&w.hasTarget(g))return!0;return!1},killAll:function(){for(var g=this.processing?this.getTweens():this.tweens,T=0;T<g.length;T++)g[T].destroy();return this.processing||(g.length=0),this},killTweensOf:function(g){for(var T=this.getTweensOf(g),w=0;w<T.length;w++)T[w].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(n.UPDATE,this.update,this),this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.events=null}});i.register("TweenManager",v,"tweens"),o.exports=v},63130:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){return t&&t.hasOwnProperty(s)?t[s]:l};o.exports=y},21902:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35060),l=t(40587),a=function(r,i){var n=s.Power0;if(typeof r=="string")if(s.hasOwnProperty(r))n=s[r];else{var h="";if(r.indexOf(".")){h=r.substring(r.indexOf(".")+1);var d=h.toLowerCase();d==="in"?h="easeIn":d==="out"?h="easeOut":d==="inout"&&(h="easeInOut")}r=l(r.substring(0,r.indexOf(".")+1)+h),s.hasOwnProperty(r)&&(n=s[r])}else typeof r=="function"&&(n=r);if(!i)return n;var u=i.slice(0);return u.unshift(0),function(p){return u[0]=p,n.apply(this,u)}};o.exports=a},4840:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63210),l=t(88332),a=t(47614),r={bezier:s,catmull:l,catmullrom:l,linear:a},i=function(n){if(n===null)return null;var h=r.linear;return typeof n=="string"?r.hasOwnProperty(n)&&(h=r[n]):typeof n=="function"&&(h=n),h};o.exports=i},28348:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a;if(t.hasOwnProperty(s)){var r=typeof t[s];r==="function"?a=function(i,n,h,d,u,p){return t[s](i,n,h,d,u,p)}:a=function(){return t[s]}}else typeof l=="function"?a=l:a=function(){return l};return a};o.exports=y},92407:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(53709),l=function(a){var r,i=[];if(a.hasOwnProperty("props"))for(r in a.props)r.substring(0,1)!=="_"&&i.push({key:r,value:a.props[r]});else for(r in a)s.indexOf(r)===-1&&r.substring(0,1)!=="_"&&i.push({key:r,value:a[r]});return i};o.exports=l},65868:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l=function(a){var r=s(a,"targets",null);return r===null||(typeof r=="function"&&(r=r.call()),Array.isArray(r)||(r=[r])),r};o.exports=l},9744:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17489),l=t(61616);function a(d){return!!d.getActive&&typeof d.getActive=="function"}function r(d){return!!d.getStart&&typeof d.getStart=="function"}function i(d){return!!d.getEnd&&typeof d.getEnd=="function"}function n(d){return r(d)||i(d)||a(d)}var h=function(d,u){var p,m=function(H,J,G){return G},v=function(H,J,G){return G},g=null,T=typeof u;if(T==="number")m=function(){return u};else if(Array.isArray(u))v=function(){return u[0]},m=function(){return u[u.length-1]};else if(T==="string"){var w=u.toLowerCase(),b=w.substring(0,6)==="random",E=w.substring(0,3)==="int";if(b||E){var A=w.indexOf("("),R=w.indexOf(")"),I=w.indexOf(",");if(A&&R&&I){var P=parseFloat(w.substring(A+1,I)),N=parseFloat(w.substring(I+1,R));b?m=function(){return l(P,N)}:m=function(){return s(P,N)}}else throw new Error("invalid random() format")}else{w=w[0];var F=parseFloat(u.substr(2));switch(w){case"+":m=function(H,J,G){return G+F};break;case"-":m=function(H,J,G){return G-F};break;case"*":m=function(H,J,G){return G*F};break;case"/":m=function(H,J,G){return G/F};break;default:m=function(){return parseFloat(u)}}}}else if(T==="function")m=u;else if(T==="object")if(n(u))a(u)&&(g=u.getActive),i(u)&&(m=u.getEnd),r(u)&&(v=u.getStart);else if(u.hasOwnProperty("value"))p=h(d,u.value);else{var O=u.hasOwnProperty("to"),D=u.hasOwnProperty("from"),L=u.hasOwnProperty("start");if(O&&(D||L)){if(p=h(d,u.to),L){var z=h(d,u.start);p.getActive=z.getEnd}if(D){var X=h(d,u.from);p.getStart=X.getEnd}}}return p||(p={getActive:g,getEnd:m,getStart:v}),p};o.exports=h},68710:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(502),l=t(99730),a=t(20494),r=t(63130),i=t(21902),n=t(28348),h=t(10850),d=t(9744),u=t(72066),p=t(39366),m=function(v,g,T){if(g instanceof p)return g.parent=v,g;T===void 0?T=l:T=u(l,T);var w=h(g,"from",0),b=h(g,"to",1),E=[{value:w}],A=h(g,"delay",T.delay),R=h(g,"easeParams",T.easeParams),I=h(g,"ease",T.ease),P=d("value",b),N=new p(v,E),F=N.add(0,"value",P.getEnd,P.getStart,P.getActive,i(h(g,"ease",I),h(g,"easeParams",R)),n(g,"delay",A),h(g,"duration",T.duration),r(g,"yoyo",T.yoyo),h(g,"hold",T.hold),h(g,"repeat",T.repeat),h(g,"repeatDelay",T.repeatDelay),!1,!1);F.start=w,F.current=w,N.completeDelay=a(g,"completeDelay",0),N.loop=Math.round(a(g,"loop",0)),N.loopDelay=Math.round(a(g,"loopDelay",0)),N.paused=r(g,"paused",!1),N.persist=r(g,"persist",!1),N.callbackScope=h(g,"callbackScope",N);for(var O=s.TYPES,D=0;D<O.length;D++){var L=O[D],z=h(g,L,!1);if(z){var X=h(g,L+"Params",[]);N.setCallback(L,z,X)}}return N};o.exports=m},91944:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(21902),l=t(10850),a=t(83392),r=function(i,n){n===void 0&&(n={});var h,d=l(n,"start",0),u=l(n,"ease",null),p=l(n,"grid",null),m=l(n,"from",0),v=m==="first",g=m==="center",T=m==="last",w=typeof m=="number",b=Array.isArray(i),E=parseFloat(b?i[0]:i),A=b?parseFloat(i[1]):0,R=Math.max(E,A);if(b&&(d+=E),p){var I=p[0],P=p[1],N=0,F=0,O=0,D=0,L=[];T?(N=I-1,F=P-1):w?(N=m%I,F=Math.floor(m/I)):g&&(N=(I-1)/2,F=(P-1)/2);for(var z=a.MIN_SAFE_INTEGER,X=0;X<P;X++){L[X]=[];for(var H=0;H<I;H++){O=N-H,D=F-X;var J=Math.sqrt(O*O+D*D);J>z&&(z=J),L[X][H]=J}}}var G=u?s(u):null;return p?h=function(k,M,B,U){var W=0,K=U%I,q=Math.floor(U/I);K>=0&&K<I&&q>=0&&q<P&&(W=L[q][K]);var _;if(b){var rt=A-E;G?_=W/z*rt*G(W/z):_=W/z*rt}else G?_=W*E*G(W/z):_=W*E;return _+d}:h=function(k,M,B,U,W){W--;var K;v?K=U:g?K=Math.abs(W/2-U):T?K=W-U:w&&(K=Math.abs(m-U));var q;if(b){var _;g?_=(A-E)/W*(K*2):_=(A-E)/W*K,G?q=_*G(K/W):q=_}else G?q=W*R*G(K/W):q=K*E;return q+d},h};o.exports=r},68061:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(502),l=t(99730),a=t(20494),r=t(63130),i=t(21902),n=t(4840),h=t(28348),d=t(92407),u=t(65868),p=t(10850),m=t(9744),v=t(72066),g=t(39366),T=function(w,b,E){if(b instanceof g)return b.parent=w,b;E===void 0?E=l:E=v(l,E);var A=u(b);!A&&E.targets&&(A=E.targets);for(var R=d(b),I=p(b,"delay",E.delay),P=p(b,"duration",E.duration),N=p(b,"easeParams",E.easeParams),F=p(b,"ease",E.ease),O=p(b,"hold",E.hold),D=p(b,"repeat",E.repeat),L=p(b,"repeatDelay",E.repeatDelay),z=r(b,"yoyo",E.yoyo),X=r(b,"flipX",E.flipX),H=r(b,"flipY",E.flipY),J=p(b,"interpolation",E.interpolation),G=function(mt,vt,yt,xt){if(yt==="texture"){var It=xt,$t=void 0;Array.isArray(xt)?(It=xt[0],$t=xt[1]):xt.hasOwnProperty("value")?(It=xt.value,Array.isArray(xt.value)?(It=xt.value[0],$t=xt.value[1]):typeof xt.value=="string"&&(It=xt.value)):typeof xt=="string"&&(It=xt),mt.addFrame(vt,It,$t,h(xt,"delay",I),p(xt,"duration",P),p(xt,"hold",O),p(xt,"repeat",D),p(xt,"repeatDelay",L),r(xt,"flipX",X),r(xt,"flipY",H))}else{var Zt=m(yt,xt),Bt=n(p(xt,"interpolation",J));mt.add(vt,yt,Zt.getEnd,Zt.getStart,Zt.getActive,i(p(xt,"ease",F),p(xt,"easeParams",N)),h(xt,"delay",I),p(xt,"duration",P),r(xt,"yoyo",z),p(xt,"hold",O),p(xt,"repeat",D),p(xt,"repeatDelay",L),r(xt,"flipX",X),r(xt,"flipY",H),Bt,Bt?xt:null)}},k=new g(w,A),M=0;M<R.length;M++)for(var B=R[M].key,U=R[M].value,W=0;W<A.length;W++)B==="scale"&&!A[W].hasOwnProperty("scale")?(G(k,W,"scaleX",U),G(k,W,"scaleY",U)):G(k,W,B,U);k.completeDelay=a(b,"completeDelay",0),k.loop=Math.round(a(b,"loop",0)),k.loopDelay=Math.round(a(b,"loopDelay",0)),k.paused=r(b,"paused",!1),k.persist=r(b,"persist",!1),k.callbackScope=p(b,"callbackScope",k);for(var K=s.TYPES,q=0;q<K.length;q++){var _=K[q],rt=p(b,_,!1);if(rt){var ft=p(b,_+"Params",[]);k.setCallback(_,rt,ft)}}return k};o.exports=T},56034:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(502),l=t(20494),a=t(63130),r=t(65868),i=t(10850),n=t(68061),h=t(45641),d=function(u,p){if(p instanceof h)return p.parent=u,p;var m=new h(u);m.startDelay=i(p,"delay",0),m.completeDelay=l(p,"completeDelay",0),m.loop=Math.round(l(p,"loop",i(p,"repeat",0))),m.loopDelay=Math.round(l(p,"loopDelay",i(p,"repeatDelay",0))),m.paused=a(p,"paused",!1),m.persist=a(p,"persist",!0),m.callbackScope=i(p,"callbackScope",m);var v,g=s.TYPES;for(v=0;v<g.length;v++){var T=g[v],w=i(p,T,!1);if(w){var b=i(p,T+"Params",[]);m.setCallback(T,w,b)}}var E=i(p,"tweens",null);if(Array.isArray(E)){var A=[],R=r(p),I=void 0;for(R&&(I={targets:R}),v=0;v<E.length;v++)A.push(n(m,E[v],I));m.add(A)}return m};o.exports=d},79619:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetBoolean:t(63130),GetEaseFunction:t(21902),GetInterpolationFunction:t(4840),GetNewValue:t(28348),GetProps:t(92407),GetTargets:t(65868),GetValueOp:t(9744),NumberTweenBuilder:t(68710),StaggerBuilder:t(91944),TweenBuilder:t(68061)}},5570:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="active"},6383:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},72582:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},90281:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},80803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="repeat"},13640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},10472:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},5379:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},43449:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},61541:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="yoyo"},54272:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TWEEN_ACTIVE:t(5570),TWEEN_COMPLETE:t(6383),TWEEN_LOOP:t(72582),TWEEN_PAUSE:t(90281),TWEEN_RESUME:t(13640),TWEEN_REPEAT:t(80803),TWEEN_START:t(10472),TWEEN_STOP:t(5379),TWEEN_UPDATE:t(43449),TWEEN_YOYO:t(61541)}},75193:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={States:t(55303),Builders:t(79619),Events:t(54272),TweenManager:t(64532),Tween:t(39366),TweenData:t(15718),TweenFrameData:t(96490),BaseTween:t(502),TweenChain:t(45641)};o.exports=s},502:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(6659),a=t(54272),r=t(55303),i=new s({Extends:l,initialize:function(h){l.call(this),this.parent=h,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=r.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(a.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(a.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(a.TWEEN_COMPLETE,"onComplete")},complete:function(n){return n===void 0&&(n=0),n?(this.setCompleteDelayState(),this.countdown=n):this.onCompleteHandler(),this},completeAfterLoop:function(n){return n===void 0&&(n=0),this.loopCounter>n&&(this.loopCounter=n),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(a.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(n){this.countdown-=n,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(n){return this.countdown-=n,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(a.TWEEN_START,"onStart"),n=0),n},updateCompleteDelay:function(n){this.countdown-=n,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(n,h,d){return d===void 0&&(d=[]),this.callbacks.hasOwnProperty(n)&&(this.callbacks[n]={func:h,params:d}),this},setPendingState:function(){this.state=r.PENDING},setActiveState:function(){this.state=r.ACTIVE},setLoopDelayState:function(){this.state=r.LOOP_DELAY},setCompleteDelayState:function(){this.state=r.COMPLETE_DELAY},setStartDelayState:function(){this.state=r.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=r.PENDING_REMOVE},setRemovedState:function(){this.state=r.REMOVED},setFinishedState:function(){this.state=r.FINISHED},setDestroyedState:function(){this.state=r.DESTROYED},isPending:function(){return this.state===r.PENDING},isActive:function(){return this.state===r.ACTIVE},isLoopDelayed:function(){return this.state===r.LOOP_DELAY},isCompleteDelayed:function(){return this.state===r.COMPLETE_DELAY},isStartDelayed:function(){return this.state===r.START_DELAY},isPendingRemove:function(){return this.state===r.PENDING_REMOVE},isRemoved:function(){return this.state===r.REMOVED},isFinished:function(){return this.state===r.FINISHED},isDestroyed:function(){return this.state===r.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(n){n.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});i.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],o.exports=i},65521:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56694),l=t(54272),a=t(55303),r=new s({initialize:function(n,h,d,u,p,m,v,g,T,w){this.tween=n,this.targetIndex=h,this.duration=u,this.totalDuration=0,this.delay=0,this.getDelay=d,this.yoyo=p,this.hold=m,this.repeat=v,this.repeatDelay=g,this.repeatCounter=0,this.flipX=T,this.flipY=w,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(i){i===void 0&&(i=this.current),this.tween.targets[this.targetIndex][this.key]=i},setCreatedState:function(){this.state=a.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=a.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=a.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=a.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=a.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=a.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=a.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=a.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===a.CREATED},isDelayed:function(){return this.state===a.DELAY},isPendingRender:function(){return this.state===a.PENDING_RENDER},isPlayingForward:function(){return this.state===a.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===a.PLAYING_BACKWARD},isHolding:function(){return this.state===a.HOLD_DELAY},isRepeating:function(){return this.state===a.REPEAT_DELAY},isComplete:function(){return this.state===a.COMPLETE},setStateFromEnd:function(i){this.yoyo?this.onRepeat(i,!0,!0):this.repeatCounter>0?this.onRepeat(i,!0,!1):this.setCompleteState()},setStateFromStart:function(i){this.repeatCounter>0?this.onRepeat(i,!1):this.setCompleteState()},reset:function(){var i=this.tween,n=i.totalTargets,h=this.targetIndex,d=i.targets[h],u=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(d,u,0,h,n,i),this.repeatCounter=this.repeat===-1?a.MAX:this.repeat,this.setPendingRenderState();var p=this.duration+this.hold;this.yoyo&&(p+=this.duration);var m=p+this.repeatDelay;this.totalDuration=this.delay+p,this.repeat===-1?(this.totalDuration+=m*a.MAX,i.isInfinite=!0):this.repeat>0&&(this.totalDuration+=m*this.repeat),this.totalDuration>i.duration&&(i.duration=this.totalDuration),this.delay<i.startDelay&&(i.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(i,n,h){var d=this.tween,u=d.totalTargets,p=this.targetIndex,m=d.targets[p],v=this.key,g=v!=="texture";if(this.elapsed=i,this.progress=i/this.duration,this.flipX&&m.toggleFlipX(),this.flipY&&m.toggleFlipY(),g&&(n||h)&&(this.start=this.getStartValue(m,v,this.start,p,u,d)),h){this.setPlayingBackwardState(),this.dispatchEvent(l.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,g&&(this.end=this.getEndValue(m,v,this.start,p,u,d)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-i,g&&(this.current=this.start,m[v]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});o.exports=r},99730:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};o.exports=y},53709:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(502),l=t(56694),a=t(54272),r=t(99325),i=t(61286),n=t(83392),h=t(55303),d=t(15718),u=t(96490),p=new l({Extends:s,initialize:function(v,g){s.call(this,v),this.targets=g,this.totalTargets=g.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(m,v,g,T,w,b,E,A,R,I,P,N,F,O,D,L){var z=new d(this,m,v,g,T,w,b,E,A,R,I,P,N,F,O,D,L);return this.totalData=this.data.push(z),z},addFrame:function(m,v,g,T,w,b,E,A,R,I){var P=new u(this,m,v,g,T,w,b,E,A,R,I);return this.totalData=this.data.push(P),P},getValue:function(m){m===void 0&&(m=0);var v=null;return this.data&&(v=this.data[m].current),v},hasTarget:function(m){return this.targets&&this.targets.indexOf(m)!==-1},updateTo:function(m,v,g){if(g===void 0&&(g=!1),m!=="texture")for(var T=0;T<this.totalData;T++){var w=this.data[T];w.key===m&&(w.isPlayingForward()||w.isPlayingBackward())&&(w.end=v,g&&(w.start=w.current))}return this},restart:function(){switch(this.state){case h.REMOVED:case h.FINISHED:this.seek(),this.parent.makeActive(this);break;case h.PENDING:case h.PENDING_REMOVE:this.parent.reset(this);break;case h.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,s.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(m,v,g){if(m===void 0&&(m=0),v===void 0&&(v=16.6),g===void 0&&(g=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;g||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive");var T=this.paused;if(this.paused=!1,m>0){for(var w=Math.floor(m/v),b=m-w*v,E=0;E<w;E++)this.update(v);b>0&&this.update(b)}return this.paused=T,this.isSeeking=!1,this},initTweenData:function(m){m===void 0&&(m=!1),this.duration=0,this.startDelay=n.MAX_SAFE_INTEGER;for(var v=this.data,g=0;g<this.totalData;g++)v[g].reset(m);this.duration=Math.max(this.duration,.01);var T=this.duration,w=this.completeDelay,b=this.loopCounter,E=this.loopDelay;b>0?this.totalDuration=T+w+(T+E)*b:this.totalDuration=T+w},reset:function(m){return m===void 0&&(m=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=h.MAX),m||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")),this},update:function(m){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(m*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(m),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(m),!1;this.hasStarted||(this.startDelay-=m,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(a.TWEEN_START,"onStart"),m=0));var v=!1;if(this.isActive())for(var g=this.data,T=0;T<this.totalData;T++)g[T].update(m)&&(v=!0);this.elapsed+=m,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=m,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),v||this.nextState();var w=this.isPendingRemove();return w&&this.persist&&(this.setFinishedState(),w=!1),w},forward:function(m){return this.update(m),this},rewind:function(m){return this.update(-m),this},dispatchEvent:function(m,v){if(!this.isSeeking){this.emit(m,this,this.targets);var g=this.callbacks[v];g&&g.func.apply(this.callbackScope,[this,this.targets].concat(g.params))}},destroy:function(){s.prototype.destroy.call(this),this.targets=null}});i.register("tween",function(m){return this.scene.sys.tweens.add(m)}),r.register("tween",function(m){return this.scene.sys.tweens.create(m)}),o.exports=p},45641:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66458),l=t(502),a=t(56694),r=t(54272),i=t(99325),n=t(61286),h=t(55303),d=new a({Extends:l,initialize:function(p){l.call(this,p),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?h.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(r.TWEEN_ACTIVE,"onActive"),this},add:function(u){var p=this.parent.create(u);Array.isArray(p)||(p=[p]);for(var m=this.data,v=0;v<p.length;v++){var g=p[v];g.parent=this,m.push(g.reset())}return this.totalData=m.length,this},remove:function(u){return s(this.data,u),u.setRemovedState(),u===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(u){for(var p=this.data,m=0;m<this.totalData;m++)if(p[m].hasTarget(u))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(u){return u.seek(),u.setActiveState(),this},makeActive:function(u){return u.reset(),u.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(r.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var u=this.data,p=this.totalData,m=0;m<p;m++)u[m].reset(!1);this.currentIndex=0,this.currentTween=u[0]},update:function(u){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;u*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(u):this.isCompleteDelayed()?this.updateCompleteDelay(u):this.isStartDelayed()&&(u=this.updateStartCountdown(u));var p=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(u)&&this.nextTween()&&this.nextState(),p=this.isPendingRemove(),p&&this.persist&&(this.setFinishedState(),p=!1)),p},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(u){this.currentIndex=u,this.currentTween=this.data[u],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(r.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(u,p){this.emit(u,this);var m=this.callbacks[p];m&&m.func.apply(this.callbackScope,[this].concat(m.params))},destroy:function(){l.prototype.destroy.call(this),this.currentTween=null}});n.register("tweenchain",function(u){return this.scene.sys.tweens.chain(u)}),i.register("tweenchain",function(u){return this.scene.sys.tweens.create(u)}),o.exports=d},15718:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65521),l=t(82897),a=t(56694),r=t(54272),i=new a({Extends:s,initialize:function(h,d,u,p,m,v,g,T,w,b,E,A,R,I,P,N,F){s.call(this,h,d,T,w,b,E,A,R,I,P),this.key=u,this.getActiveValue=v,this.getEndValue=p,this.getStartValue=m,this.ease=g,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=N,this.interpolationData=F},reset:function(n){s.prototype.reset.call(this);var h=this.tween.targets[this.targetIndex],d=this.key;n&&(h[d]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(h[d]=this.getActiveValue(h,d,0))},update:function(n){var h=this.tween,d=h.totalTargets,u=this.targetIndex,p=h.targets[u],m=this.key;if(!p)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(p,m,p[m],u,d,h),this.end=this.getEndValue(p,m,this.start,u,d,h),this.current=this.start,p[m]=this.start,this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),g=this.isPlayingBackward();if(v||g){var T=this.elapsed,w=this.duration,b=0,E=!1;T+=n,T>=w?(b=T-w,T=w,E=!0):T<0&&(T=0);var A=l(T/w,0,1);if(this.elapsed=T,this.progress=A,this.previous=this.current,E)v?(this.current=this.end,p[m]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(b)):(this.current=this.start,p[m]=this.start,this.setStateFromStart(b));else{v||(A=1-A);var R=this.ease(A);this.interpolation?this.current=this.interpolation(this.interpolationData,R):this.current=this.start+(this.end-this.start)*R,p[m]=this.current}this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,h){var d=this.tween;if(!d.isSeeking){var u=d.targets[this.targetIndex],p=this.key,m=this.current,v=this.previous;d.emit(n,d,p,u,m,v);var g=d.callbacks[h];g&&g.func.apply(d.callbackScope,[d,u,p,m,v].concat(g.params))}},destroy:function(){s.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});o.exports=i},96490:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65521),l=t(82897),a=t(56694),r=t(54272),i=new a({Extends:s,initialize:function(h,d,u,p,m,v,g,T,w,b,E){s.call(this,h,d,m,v,!1,g,T,w,b,E),this.key="texture",this.startTexture=null,this.endTexture=u,this.startFrame=null,this.endFrame=p,this.yoyo=T!==0},reset:function(n){s.prototype.reset.call(this);var h=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=h.texture.key,this.startFrame=h.frame.name),n&&h.setTexture(this.startTexture,this.startFrame)},update:function(n){var h=this.tween,d=this.targetIndex,u=h.targets[d];if(!u)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&u.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),m=this.isPlayingBackward();if(p||m){var v=this.elapsed,g=this.duration,T=0,w=!1;v+=n,v>=g?(T=v-g,v=g,w=!0):v<0&&(v=0);var b=l(v/g,0,1);this.elapsed=v,this.progress=b,w&&(p?(u.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(T)):(u.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(T))),this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,h){var d=this.tween;if(!d.isSeeking){var u=d.targets[this.targetIndex],p=this.key;d.emit(n,d,p,u);var m=d.callbacks[h];m&&m.func.apply(d.callbackScope,[d,u,p].concat(m.params))}},destroy:function(){s.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});o.exports=i},55303:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};o.exports=y},56694:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(i){return!!i.get&&typeof i.get=="function"||!!i.set&&typeof i.set=="function"}function t(i,n,h){var d=h?i[n]:Object.getOwnPropertyDescriptor(i,n);return!h&&d.value&&typeof d.value=="object"&&(d=d.value),d&&y(d)?(typeof d.enumerable>"u"&&(d.enumerable=!0),typeof d.configurable>"u"&&(d.configurable=!0),d):!1}function s(i,n){var h=Object.getOwnPropertyDescriptor(i,n);return h?(h.value&&typeof h.value=="object"&&(h=h.value),h.configurable===!1):!1}function l(i,n,h,d){for(var u in n)if(n.hasOwnProperty(u)){var p=t(n,u,h);if(p!==!1){var m=d||i;if(s(m.prototype,u)){if(r.ignoreFinals)continue;throw new Error("cannot override final property '"+u+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(i.prototype,u,p)}else i.prototype[u]=n[u]}}function a(i,n){if(n){Array.isArray(n)||(n=[n]);for(var h=0;h<n.length;h++)l(i,n[h].prototype||n[h])}}function r(i){i||(i={});var n,h;if(i.initialize){if(typeof i.initialize!="function")throw new Error("initialize must be a function");n=i.initialize,delete i.initialize}else if(i.Extends){var d=i.Extends;n=function(){d.apply(this,arguments)}}else n=function(){};i.Extends?(n.prototype=Object.create(i.Extends.prototype),n.prototype.constructor=n,h=i.Extends,delete i.Extends):n.prototype.constructor=n;var u=null;return i.Mixins&&(u=i.Mixins,delete i.Mixins),a(n,u),l(n,i,!0,h),n}r.extend=l,r.mixin=a,r.ignoreFinals=!1,o.exports=r},72283:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){};o.exports=y},10618:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){return null};o.exports=y},78991:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r){if(r===void 0&&(r=t),l>0){var i=l-t.length;if(i<=0)return null}if(!Array.isArray(s))return t.indexOf(s)===-1?(t.push(s),a&&a.call(r,s),s):null;for(var n=s.length-1;n>=0;)t.indexOf(s[n])!==-1&&s.splice(n,1),n--;if(n=s.length,n===0)return null;l>0&&n>i&&(s.splice(i),n=i);for(var h=0;h<n;h++){var d=s[h];t.push(d),a&&a.call(r,d)}return s};o.exports=y},48522:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a,r,i){if(l===void 0&&(l=0),i===void 0&&(i=t),a>0){var n=a-t.length;if(n<=0)return null}if(!Array.isArray(s))return t.indexOf(s)===-1?(t.splice(l,0,s),r&&r.call(i,s),s):null;for(var h=s.length-1;h>=0;)t.indexOf(s[h])!==-1&&s.pop(),h--;if(h=s.length,h===0)return null;a>0&&h>n&&(s.splice(n),h=n);for(var d=h-1;d>=0;d--){var u=s[d];t.splice(l,0,u),r&&r.call(i,u)}return s};o.exports=y},58742:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.indexOf(s);return l!==-1&&l<t.length&&(t.splice(l,1),t.push(s)),s};o.exports=y},30164:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){n===void 0&&(n=0),h===void 0&&(h=a.length);var d=0;if(s(a,n,h))for(var u=n;u<h;u++){var p=a[u];p[r]===i&&d++}return d};o.exports=l},36337:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a,r=[null];for(a=3;a<arguments.length;a++)r.push(arguments[a]);for(a=0;a<t.length;a++)r[0]=t[a],s.apply(l,r);return t};o.exports=y},46208:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){if(n===void 0&&(n=0),h===void 0&&(h=a.length),s(a,n,h)){var d,u=[null];for(d=5;d<arguments.length;d++)u.push(arguments[d]);for(d=n;d<h;d++)u[0]=a[d],r.apply(i,u)}return a};o.exports=l},2406:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(s.length){if(s.length===1)return s[0]}else return NaN;var a=1,r,i;if(l){if(t<s[0][l])return s[0];for(;s[a][l]<t;)a++}else for(;s[a]<t;)a++;return a>s.length&&(a=s.length),l?(r=s[a-1][l],i=s[a][l],i-t<=t-r?s[a]:s[a-1]):(r=s[a-1],i=s[a],i-t<=t-r?i:r)};o.exports=y},5454:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s=[]);for(var l=0;l<t.length;l++)Array.isArray(t[l])?y(t[l],s):s.push(t[l]);return s};o.exports=y},71608:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){n===void 0&&(n=0),h===void 0&&(h=a.length);var d=[];if(s(a,n,h))for(var u=n;u<h;u++){var p=a[u];(!r||r&&i===void 0&&p.hasOwnProperty(r)||r&&i!==void 0&&p[r]===i)&&d.push(p)}return d};o.exports=l},51463:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){if(n===void 0&&(n=0),h===void 0&&(h=a.length),s(a,n,h))for(var d=n;d<h;d++){var u=a[d];if(!r||r&&i===void 0&&u.hasOwnProperty(r)||r&&i!==void 0&&u[r]===i)return u}return null};o.exports=l},72861:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){s===void 0&&(s=0),l===void 0&&(l=t.length);var a=s+Math.floor(Math.random()*l);return t[a]===void 0?null:t[a]};o.exports=y},24218:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(s===l)return t;var a=t.indexOf(s),r=t.indexOf(l);if(a<0||r<0)throw new Error("Supplied items must be elements of the same array");return a>r||(t.splice(a,1),r===t.length-1?t.push(s):t.splice(r,0,s)),t};o.exports=y},58258:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(s===l)return t;var a=t.indexOf(s),r=t.indexOf(l);if(a<0||r<0)throw new Error("Supplied items must be elements of the same array");return a<r||(t.splice(a,1),r===0?t.unshift(s):t.splice(r,0,s)),t};o.exports=y},51172:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.indexOf(s);if(l>0){var a=t[l-1],r=t.indexOf(a);t[l]=a,t[r]=s}return t};o.exports=y},68396:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=t.indexOf(s);if(a===-1||l<0||l>=t.length)throw new Error("Supplied index out of bounds");return a!==l&&(t.splice(a,1),t.splice(l,0,s)),s};o.exports=y},27555:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.indexOf(s);if(l!==-1&&l<t.length-1){var a=t[l+1],r=t.indexOf(a);t[l]=a,t[r]=s}return t};o.exports=y},13401:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=[],i,n=!1;if((l||a)&&(n=!0,l||(l=""),a||(a="")),s<t)for(i=t;i>=s;i--)n?r.push(l+i.toString()+a):r.push(i);else for(i=t;i<=s;i++)n?r.push(l+i.toString()+a):r.push(i);return r};o.exports=y},89955:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67233),l=function(a,r,i){a===void 0&&(a=0),r===void 0&&(r=null),i===void 0&&(i=1),r===null&&(r=a,a=0);for(var n=[],h=Math.max(s((r-a)/(i||1)),0),d=0;d<h;d++)n.push(a),a+=i;return n};o.exports=l},53466:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(l,a,r){var i=l[a];l[a]=l[r],l[r]=i}function t(l,a){return l<a?-1:l>a?1:0}var s=function(l,a,r,i,n){for(r===void 0&&(r=0),i===void 0&&(i=l.length-1),n===void 0&&(n=t);i>r;){if(i-r>600){var h=i-r+1,d=a-r+1,u=Math.log(h),p=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*p*(h-p)/h)*(d-h/2<0?-1:1),v=Math.max(r,Math.floor(a-d*p/h+m)),g=Math.min(i,Math.floor(a+(h-d)*p/h+m));s(l,a,v,g,n)}var T=l[a],w=r,b=i;for(y(l,r,a),n(l[i],T)>0&&y(l,r,i);w<b;){for(y(l,w,b),w++,b--;n(l[w],T)<0;)w++;for(;n(l[b],T)>0;)b--}n(l[r],T)===0?y(l,r,b):(b++,y(l,b,i)),b<=a&&(r=b+1),a<=b&&(i=b-1)}};o.exports=s},75757:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l=t(18592),a=function(i,n,h){for(var d=[],u=0;u<i.length;u++)for(var p=0;p<n.length;p++)for(var m=0;m<h;m++)d.push({a:i[u],b:n[p]});return d},r=function(i,n,h){var d=s(h,"max",0),u=s(h,"qty",1),p=s(h,"random",!1),m=s(h,"randomB",!1),v=s(h,"repeat",0),g=s(h,"yoyo",!1),T=[];if(m&&l(n),v===-1)if(d===0)v=0;else{var w=i.length*n.length*u;g&&(w*=2),v=Math.ceil(d/w)}for(var b=0;b<=v;b++){var E=a(i,n,u);p&&l(E),T=T.concat(E),g&&(E.reverse(),T=T.concat(E))}return d&&T.splice(d),T};o.exports=r},66458:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72677),l=function(a,r,i,n){n===void 0&&(n=a);var h;if(!Array.isArray(r))return h=a.indexOf(r),h!==-1?(s(a,h),i&&i.call(n,r),r):null;for(var d=r.length-1,u=[];d>=0;){var p=r[d];h=a.indexOf(p),h!==-1&&(s(a,h),u.push(p),i&&i.call(n,p)),d--}return u};o.exports=l},8324:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72677),l=function(a,r,i,n){if(n===void 0&&(n=a),r<0||r>a.length-1)throw new Error("Index out of bounds");var h=s(a,r);return i&&i.call(n,h),h};o.exports=l},47427:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){if(r===void 0&&(r=0),i===void 0&&(i=a.length),h===void 0&&(h=a),s(a,r,i)){var d=i-r,u=a.splice(r,d);if(n)for(var p=0;p<u.length;p++){var m=u[p];n.call(h,m)}return u}else return[]};o.exports=l},50147:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72677),l=function(a,r,i){r===void 0&&(r=0),i===void 0&&(i=a.length);var n=r+Math.floor(Math.random()*i);return s(a,n)};o.exports=l},80402:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=t.indexOf(s),r=t.indexOf(l);return a!==-1&&r===-1?(t[a]=l,!0):!1};o.exports=y},77640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s=1);for(var l=null,a=0;a<s;a++)l=t.shift(),t.push(l);return l};o.exports=y},38487:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){s===void 0&&(s=1);for(var l=null,a=0;a<s;a++)l=t.pop(),t.unshift(l);return l};o.exports=y},45838:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){var r=t.length;if(s<0||s>r||s>=l||l>r){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};o.exports=y},27847:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){var l=t.indexOf(s);return l!==-1&&l>0&&(t.splice(l,1),t.unshift(s)),s};o.exports=y},6034:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(45838),l=function(a,r,i,n,h){if(n===void 0&&(n=0),h===void 0&&(h=a.length),s(a,n,h))for(var d=n;d<h;d++){var u=a[d];u.hasOwnProperty(r)&&(u[r]=i)}return a};o.exports=l},18592:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){for(var s=t.length-1;s>0;s--){var l=Math.floor(Math.random()*(s+1)),a=t[s];t[s]=t[l],t[l]=a}return t};o.exports=y},28834:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s=/\D/g;return t.sort(function(l,a){return parseInt(l.replace(s,""),10)-parseInt(a.replace(s,""),10)}),t};o.exports=y},72677:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){if(!(s>=t.length)){for(var l=t.length-1,a=t[s],r=s;r<l;r++)t[r]=t[r+1];return t.length=l,a}};o.exports=y},17922:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77290);function l(n,h){return String(n).localeCompare(h)}function a(n,h){var d=n.length;if(d<=1)return n;for(var u=new Array(d),p=1;p<d;p*=2){r(n,h,p,u);var m=n;n=u,u=m}return n}function r(n,h,d,u){var p=n.length,m=0,v=d*2,g,T,w,b,E;for(g=0;g<p;g+=v)for(T=g+d,w=T+d,T>p&&(T=p),w>p&&(w=p),b=g,E=T;;)if(b<T&&E<w)h(n[b],n[E])<=0?u[m++]=n[b++]:u[m++]=n[E++];else if(b<T)u[m++]=n[b++];else if(E<w)u[m++]=n[E++];else break}var i=function(n,h){if(h===void 0&&(h=l),!n||n.length<2)return n;if(s.features.stableSort)return n.sort(h);var d=a(n,h);return d!==n&&r(d,null,n.length,n),n};o.exports=i},96928:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(s===l)return t;var a=t.indexOf(s),r=t.indexOf(l);if(a<0||r<0)throw new Error("Supplied items must be elements of the same array");return t[a]=l,t[r]=s,t};o.exports=y},59959:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Matrix:t(13515),Add:t(78991),AddAt:t(48522),BringToTop:t(58742),CountAllMatching:t(30164),Each:t(36337),EachInRange:t(46208),FindClosestInSorted:t(2406),Flatten:t(5454),GetAll:t(71608),GetFirst:t(51463),GetRandom:t(72861),MoveDown:t(51172),MoveTo:t(68396),MoveUp:t(27555),MoveAbove:t(24218),MoveBelow:t(58258),NumberArray:t(13401),NumberArrayStep:t(89955),QuickSelect:t(53466),Range:t(75757),Remove:t(66458),RemoveAt:t(8324),RemoveBetween:t(47427),RemoveRandomElement:t(50147),Replace:t(80402),RotateLeft:t(77640),RotateRight:t(38487),SafeRange:t(45838),SendToBack:t(27847),SetAll:t(6034),Shuffle:t(18592),SortByDigits:t(28834),SpliceOne:t(72677),StableSort:t(17922),Swap:t(96928)}},97494:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var s=t[0].length,l=1;l<t.length;l++)if(t[l].length!==s)return!1;return!0};o.exports=y},68428:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(76400),l=t(97494),a=function(r){var i="";if(!l(r))return i;for(var n=0;n<r.length;n++){for(var h=0;h<r[n].length;h++){var d=r[n][h].toString();d!=="undefined"?i+=s(d,2):i+="?",h<r[n].length-1&&(i+=" |")}if(n<r.length-1){i+=`
`;for(var u=0;u<r[n].length;u++)i+="---",u<r[n].length-1&&(i+="+");i+=`
`}}return i};o.exports=a},59521:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.reverse()};o.exports=y},51995:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){for(var s=0;s<t.length;s++)t[s].reverse();return t};o.exports=y},89011:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63515),l=function(a){return s(a,180)};o.exports=l},42549:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63515),l=function(a,r){r===void 0&&(r=1);for(var i=0;i<r;i++)a=s(a,90);return a};o.exports=l},63515:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97494),l=t(78581),a=function(r,i){if(i===void 0&&(i=90),!s(r))return null;if(typeof i!="string"&&(i=(i%360+360)%360),i===90||i===-270||i==="rotateLeft")r=l(r),r.reverse();else if(i===-90||i===270||i==="rotateRight")r.reverse(),r=l(r);else if(Math.abs(i)===180||i==="rotate180"){for(var n=0;n<r.length;n++)r[n].reverse();r.reverse()}return r};o.exports=a},14305:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63515),l=function(a,r){r===void 0&&(r=1);for(var i=0;i<r;i++)a=s(a,-90);return a};o.exports=l},27365:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77640),l=t(38487),a=function(r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=0),n!==0&&(n<0?s(r,Math.abs(n)):l(r,n)),i!==0)for(var h=0;h<r.length;h++){var d=r[h];i<0?s(d,Math.abs(i)):l(d,i)}return r};o.exports=a},78581:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){for(var s=t.length,l=t[0].length,a=new Array(l),r=0;r<l;r++){a[r]=new Array(s);for(var i=s-1;i>-1;i--)a[r][i]=t[i][r]}return a};o.exports=y},13515:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CheckMatrix:t(97494),MatrixToString:t(68428),ReverseColumns:t(59521),ReverseRows:t(51995),Rotate180:t(89011),RotateLeft:t(42549),RotateMatrix:t(63515),RotateRight:t(14305),Translate:t(27365),TransposeMatrix:t(78581)}},40581:o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=function(s,l){for(var a=new Uint8Array(s),r=a.length,i=l?"data:"+l+";base64,":"",n=0;n<r;n+=3)i+=y[a[n]>>2],i+=y[(a[n]&3)<<4|a[n+1]>>4],i+=y[(a[n+1]&15)<<2|a[n+2]>>6],i+=y[a[n+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i};o.exports=t},82329:o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),s=0;s<y.length;s++)t[y.charCodeAt(s)]=s;var l=function(a){a=a.substr(a.indexOf(",")+1);var r=a.length,i=r*.75,n=0,h,d,u,p;a[r-1]==="="&&(i--,a[r-2]==="="&&i--);for(var m=new ArrayBuffer(i),v=new Uint8Array(m),g=0;g<r;g+=4)h=t[a.charCodeAt(g)],d=t[a.charCodeAt(g+1)],u=t[a.charCodeAt(g+2)],p=t[a.charCodeAt(g+3)],v[n++]=h<<2|d>>4,v[n++]=(d&15)<<4|u>>2,v[n++]=(u&3)<<6|p&63;return m};o.exports=l},78417:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ArrayBufferToBase64:t(40581),Base64ToArrayBuffer:t(82329)}},22178:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Array:t(59959),Base64:t(78417),Objects:t(64615),String:t(50379),NOOP:t(72283),NULL:t(10618)}},32742:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s={};for(var l in t)Array.isArray(t[l])?s[l]=t[l].slice(0):s[l]=t[l];return s};o.exports=y},28699:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){var s,l,a;if(typeof t!="object"||t===null)return t;s=Array.isArray(t)?[]:{};for(a in t)l=t[a],s[a]=y(l);return s};o.exports=y},98611:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42911),l=function(){var a,r,i,n,h,d,u=arguments[0]||{},p=1,m=arguments.length,v=!1;for(typeof u=="boolean"&&(v=u,u=arguments[1]||{},p=2),m===p&&(u=this,--p);p<m;p++)if((a=arguments[p])!=null)for(r in a)i=u[r],n=a[r],u!==n&&(v&&n&&(s(n)||(h=Array.isArray(n)))?(h?(h=!1,d=i&&Array.isArray(i)?i:[]):d=i&&s(i)?i:{},u[r]=l(v,d,n)):n!==void 0&&(u[r]=n));return u};o.exports=l},20494:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5923),l=t(10850),a=function(r,i,n){var h=l(r,i,null);if(h===null)return n;if(Array.isArray(h))return s.RND.pick(h);if(typeof h=="object"){if(h.hasOwnProperty("randInt"))return s.RND.integerInRange(h.randInt[0],h.randInt[1]);if(h.hasOwnProperty("randFloat"))return s.RND.realInRange(h.randFloat[0],h.randFloat[1])}else if(typeof h=="function")return h(i);return h};o.exports=a},72632:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){var a=typeof t;return!t||a==="number"||a==="string"?l:t.hasOwnProperty(s)&&t[s]!==void 0?t[s]:l};o.exports=y},94324:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10850),l=t(82897),a=function(r,i,n,h,d){d===void 0&&(d=n);var u=s(r,i,d);return l(u,n,h)};o.exports=a},10850:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){if(!t&&!a||typeof t=="number")return l;if(t&&t.hasOwnProperty(s))return t[s];if(a&&a.hasOwnProperty(s))return a[s];if(s.indexOf(".")!==-1){for(var r=s.split("."),i=t,n=a,h=l,d=l,u=!0,p=!0,m=0;m<r.length;m++)i&&i.hasOwnProperty(r[m])?(h=i[r[m]],i=i[r[m]]):u=!1,n&&n.hasOwnProperty(r[m])?(d=n[r[m]],n=n[r[m]]):p=!1;return u?h:p?d:l}else return l};o.exports=y},87701:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){for(var l=0;l<s.length;l++)if(!t.hasOwnProperty(s[l]))return!1;return!0};o.exports=y},53523:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){for(var l=0;l<s.length;l++)if(t.hasOwnProperty(s[l]))return!0;return!1};o.exports=y},19256:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.hasOwnProperty(s)};o.exports=y},42911:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){if(!t||typeof t!="object"||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};o.exports=y},30657:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(32742),l=function(a,r){var i=s(a);for(var n in r)i.hasOwnProperty(n)||(i[n]=r[n]);return i};o.exports=l},72066:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(32742),l=function(a,r){var i=s(a);for(var n in r)i.hasOwnProperty(n)&&(i[n]=r[n]);return i};o.exports=l},28820:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19256),l=function(a,r){for(var i={},n=0;n<r.length;n++){var h=r[n];s(a,h)&&(i[h]=a[h])}return i};o.exports=l},22440:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l){if(!t||typeof t=="number")return!1;if(t.hasOwnProperty(s))return t[s]=l,!0;if(s.indexOf(".")!==-1){for(var a=s.split("."),r=t,i=t,n=0;n<a.length;n++)if(r.hasOwnProperty(a[n]))i=r,r=r[a[n]];else return!1;return i[a[a.length-1]]=l,!0}return!1};o.exports=y},64615:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clone:t(32742),DeepCopy:t(28699),Extend:t(98611),GetAdvancedValue:t(20494),GetFastValue:t(72632),GetMinMaxValue:t(94324),GetValue:t(10850),HasAll:t(87701),HasAny:t(53523),HasValue:t(19256),IsPlainObject:t(42911),Merge:t(30657),MergeRight:t(72066),Pick:t(28820),SetValue:t(22440)}},69429:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return t.replace(/%([0-9]+)/g,function(l,a){return s[Number(a)-1]})};o.exports=y},76400:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s,l,a){s===void 0&&(s=0),l===void 0&&(l=" "),a===void 0&&(a=3),t=t.toString();var r=0;if(s+1>=t.length)switch(a){case 1:t=new Array(s+1-t.length).join(l)+t;break;case 3:var i=Math.ceil((r=s-t.length)/2),n=r-i;t=new Array(n+1).join(l)+t+new Array(i+1).join(l);break;default:t=t+new Array(s+1-t.length).join(l);break}return t};o.exports=y},76872:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t,s){return s===0?t.slice(1):t.slice(0,s-1)+t.slice(s)};o.exports=y},8051:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t.split("").reverse().join("")};o.exports=y},76583:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var s=Math.random()*16|0,l=t==="x"?s:s&3|8;return l.toString(16)})};o.exports=y},40587:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(t){return t&&t[0].toUpperCase()+t.slice(1)};o.exports=y},50379:(o,y,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Format:t(69429),Pad:t(76400),RemoveAt:t(76872),Reverse:t(8051),UppercaseFirst:t(40587),UUID:t(76583)}}},x={};function S(o){var y=x[o];if(y!==void 0)return y.exports;var t=x[o]={exports:{}};return f[o](t,t.exports,S),t.exports}S.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var C=S(92491);return C})())})(_p);var bo=_p.exports,Fn=(c=>(c[c.None=0]="None",c[c.LeftEye=1]="LeftEye",c[c.RightEye=2]="RightEye",c[c.Both=3]="Both",c))(Fn||{});class nr extends bo.Scene{constructor(f){super(f);Gt(this,"showUserInterface",!0);Gt(this,"sceneStopped",!1);Gt(this,"parent");Gt(this,"sizer")}get windowWidth(){return window.innerWidth}get windowHeight(){return window.innerHeight}get widthScale(){return this.windowWidth/this.sceneWidth}get heightScale(){return this.windowHeight/this.sceneHeight}get defaultUIScene(){return this.scene.get("UserInterface")}get mask(){const f=this.add.image(window.innerWidth/2,window.innerHeight/2,"interface","eye_view_01.png");f.setScale(.11);const x=this.add.bitmapMask(f);return x.invertAlpha=!0,x}preload(){console.log("Preload")}create(){}update(){}onBlinkStatusChanged(f){switch(f){case 0:return;case 1:return;case 2:return;case 3:return}}}Gt(nr,"sceneName"),Gt(nr,"title"),Gt(nr,"subtitle");/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V2=1e-7,z2=1e-4;class tm{constructor(e,f){this.backend=e,this.dataMover=f,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,f){this.dataIdsCount++,this.data.set(e,f)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Oh{refCount(e){return Gn("refCount")}incRef(e){return Gn("incRef")}timerAvailable(){return!0}time(e){return Gn("time")}read(e){return Gn("read")}readSync(e){return Gn("readSync")}readToGPU(e,f){return Gn("readToGPU")}numDataIds(){return Gn("numDataIds")}disposeData(e,f){return Gn("disposeData")}write(e,f,x){return Gn("write")}move(e,f,x,S,C){return Gn("move")}createTensorFromGPUData(e,f,x){return Gn("createTensorFromGPUData")}memory(){return Gn("memory")}floatPrecision(){return Gn("floatPrecision")}epsilon(){return this.floatPrecision()===32?V2:z2}dispose(){return Gn("dispose")}}function Gn(c){throw new Error(`'${c}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ao(c,e,f){return Math.max(c,Math.min(e,f))}function Dh(c){return c%2===0?c:c+1}function ga(c,e,f){const x=c[e];c[e]=c[f],c[f]=x}function k2(c){let e=0;for(let f=0;f<c.length;f++)e+=c[f];return e}function it(c,e){if(!c)throw new Error(typeof e=="string"?e:e())}function kn(c,e,f=""){it(je(c,e),()=>f+` Shapes ${c} and ${e} must match`)}function ta(c){it(c!=null,()=>"The input to the tensor constructor must be a non-null value.")}function bt(c){if(c.length===0)return 1;let e=c[0];for(let f=1;f<c.length;f++)e*=c[f];return e}function W2(c,e){if(c===e)return!0;if(c==null||e==null||c.length!==e.length)return!1;for(let f=0;f<c.length;f++)if(c[f]!==null&&e[f]!==null&&c[f]!==e[f])return!1;return!0}function je(c,e){if(c===e)return!0;if(c==null||e==null||c.length!==e.length)return!1;for(let f=0;f<c.length;f++)if(c[f]!==e[f])return!1;return!0}function Hr(c){return c%1===0}function Vl(c){const e=Math.ceil(Math.sqrt(c));return[e,Math.ceil(c/e)]}function Ur(c,e){return e<=c.length?c:c+" ".repeat(e-c.length)}function Ad(c,e=S=>0,f,x){return new Promise((S,C)=>{let o=0;const y=()=>{if(c()){S();return}o++;const t=e(o);if(f!=null&&o>=f){C();return}x!=null?x(y,t):setTimeout(y,t)};y()})}function em(c,e){let f=1,x=-1;for(let C=0;C<c.length;++C)if(c[C]>=0)f*=c[C];else if(c[C]===-1){if(x!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${x} and dim ${C}`);x=C}else if(c[C]<0)throw Error(`Shapes can not be < 0. Found ${c[C]} at dim ${C}`);if(x===-1){if(e>0&&e!==f)throw Error(`Size(${e}) must match the product of shape ${c}`);return c}if(f===0)throw Error(`Cannot infer the missing size in [${c}] when there are 0 elements`);if(e%f!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${f}`);const S=c.slice();return S[x]=e/f,S}function Qe(c,e){const f=e.length;return c=c==null?e.map((x,S)=>S):[].concat(c),it(c.every(x=>x>=-f&&x<f),()=>`All values in axis param must be in range [-${f}, ${f}) but got axis ${c}`),it(c.every(x=>Hr(x)),()=>`All values in axis param must be integers but got axis ${c}`),c.map(x=>x<0?f+x:x)}function Ii(c,e){const f=[],x=[],S=e!=null&&Array.isArray(e)&&e.length===0,C=e==null||S?null:Qe(e,c).sort();let o=0;for(let y=0;y<c.length;++y){if(C!=null){if(C[o]===y&&c[y]!==1)throw new Error(`Can't squeeze axis ${y} since its dim '${c[y]}' is not 1`);(C[o]==null||C[o]>y)&&c[y]===1&&(f.push(c[y]),x.push(y)),C[o]<=y&&o++}c[y]!==1&&(f.push(c[y]),x.push(y))}return{newShape:f,keptDims:x}}function Ei(c,e){return ln(c,e)}function ln(c,e){let f=null;if(c==null||c==="float32")f=new Float32Array(e);else if(c==="int32")f=new Int32Array(e);else if(c==="bool")f=new Uint8Array(e);else if(c==="string")f=new Array(e);else throw new Error(`Unknown data type ${c}`);return f}function X2(c,e){for(let f=0;f<c.length;f++){const x=c[f];if(isNaN(x)||!isFinite(x))throw Error(`A tensor of type ${e} being uploaded contains ${x}.`)}}function H2(c){return c==="bool"||c==="complex64"||c==="float32"||c==="int32"||c==="string"}function Y2(c,e){return!(e==="complex64"||e==="float32"&&c!=="complex64"||e==="int32"&&c!=="float32"&&c!=="complex64"||e==="bool"&&c==="bool")}function Yr(c){if(c==="float32"||c==="int32")return 4;if(c==="complex64")return 8;if(c==="bool")return 1;throw new Error(`Unknown dtype ${c}`)}function K2(c){if(c==null)return 0;let e=0;return c.forEach(f=>e+=f.length),e}function Zo(c){return typeof c=="string"||c instanceof String}function j2(c){return typeof c=="boolean"}function Z2(c){return typeof c=="number"}function ea(c){return Array.isArray(c)?ea(c[0]):c instanceof Float32Array?"float32":c instanceof Int32Array||c instanceof Uint8Array||c instanceof Uint8ClampedArray?"int32":Z2(c)?"float32":Zo(c)?"string":j2(c)?"bool":"float32"}function zl(c){return!!(c&&c.constructor&&c.call&&c.apply)}function kl(c,e){for(let f=e;f<c;++f)if(c%f===0)return f;return c}function Ne(c){const e=c.length;if(e<2)return[];const f=new Array(e-1);f[e-2]=c[e-1];for(let x=e-3;x>=0;--x)f[x]=f[x+1]*c[x+1];return f}function nm(c,e,f,x=!1){const S=new Array;if(e.length===1){const C=e[0]*(x?2:1);for(let o=0;o<C;o++)S[o]=f[c+o]}else{const C=e[0],o=e.slice(1),y=o.reduce((t,s)=>t*s)*(x?2:1);for(let t=0;t<C;t++)S[t]=nm(c+t*y,o,f,x)}return S}function Wl(c,e,f=!1){if(c.length===0)return e[0];const x=c.reduce((S,C)=>S*C)*(f?2:1);if(x===0)return[];if(x!==e.length)throw new Error(`[${c}] does not match the input size ${e.length}${f?" for a complex tensor":""}.`);return nm(0,c,e,f)}function sm(c,e){const f=wi(c,e);for(let x=0;x<f.length;x++)f[x]=1;return f}function wi(c,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(c);if(e==="int32")return new Int32Array(c);if(e==="bool")return new Uint8Array(c);throw new Error(`Unknown data type ${e}`)}function Zn(c){c.forEach(e=>{it(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${c}].`)})}function Xl(c,e,f){if(e===0)return 0;if(e===1)return c[0];let x=c[c.length-1];for(let S=0;S<c.length-1;++S)x+=f[S]*c[S];return x}function Lh(c,e,f){if(e===0)return[];if(e===1)return[c];const x=new Array(e);for(let S=0;S<x.length-1;++S)x[S]=Math.floor(c/f[S]),c-=x[S]*f[S];return x[x.length-1]=c,x}function rr(c){return c&&c.then&&typeof c.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rd="tfjsflags";class Q2{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=J2,this.populateURLFlags()}setPlatform(e,f){this.platform!=null&&(St().getBool("IS_TEST")||St().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=f}registerFlag(e,f,x){if(this.flagRegistry[e]={evaluationFn:f,setHook:x},this.urlFlags[e]!=null){const S=this.urlFlags[e];St().getBool("IS_TEST")||St().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${S}.`),this.set(e,S)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const f=this.evaluateFlag(e);if(rr(f))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=f,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,f){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=f,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(f)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);Rd in e&&e[Rd].split(",").forEach(x=>{const[S,C]=x.split(":");this.urlFlags[S]=_2(S,C)})}}function J2(c){const e={};return c.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(f,...x)=>(q2(e,x[0],x[1]),x.join("="))),e}function q2(c,e,f){c[decodeURIComponent(e)]=decodeURIComponent(f||"")}function _2(c,e){const f=e.toLowerCase();return f==="true"||f==="false"?f==="true":`${+f}`===f?+f:e}function St(){return im}let im=null;function tx(c){im=c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let xl;function rm(){if(xl==null){let c;if(typeof window<"u")c=window;else if(typeof global<"u")c=global;else if(typeof process<"u")c=process;else if(typeof self<"u")c=self;else throw new Error("Could not find a global object");xl=c}return xl}function ex(){const c=rm();return c._tfGlobals==null&&(c._tfGlobals=new Map),c._tfGlobals}function Bh(c,e){const f=ex();if(f.has(c))return f.get(c);{const x=e();return f.set(c,x),f.get(c)}}const $h="Abs",Gh="Acos",Uh="Acosh",Qo="Add",Jo="AddN",qo="All",_o="Any",Vh="ArgMax",zh="ArgMin",kh="Asin",Wh="Asinh",Xh="Atan",Hh="Atanh",Yh="Atan2",tu="AvgPool",am="AvgPoolGrad",Kh="AvgPool3D",om="AvgPool3DGrad",eu="BatchMatMul",jh="BatchToSpaceND",nu="Bincount",Zh="BitwiseAnd",Qh="BroadcastArgs",su="Cast",Jh="Ceil",iu="ClipByValue",um="Complex",lm="ComplexAbs",qh="Concat",ru="Conv2D",hm="Conv2DBackpropFilter",au="Conv2DBackpropInput",ou="Conv3D",_h="Conv3DBackpropFilterV2",uu="Conv3DBackpropInputV2",tf="Cos",ef="Cosh",lu="Cumprod",hu="Cumsum",fu="CropAndResize",nf="DenseBincount",cu="DepthToSpace",du="DepthwiseConv2dNative",fm="DepthwiseConv2dNativeBackpropFilter",cm="DepthwiseConv2dNativeBackpropInput",sf="Diag",pu="Dilation2D",dm="Dilation2DBackpropInput",pm="Dilation2DBackpropFilter",nx="Draw",rf="RealDiv",mm="Einsum",af="Elu",of="EluGrad",uf="Erf",lf="Equal",hf="Exp",ff="ExpandDims",cf="Expm1",vm="FFT",df="Fill",mu="FlipLeftRight",pf="Floor",mf="FloorDiv",vu="FusedBatchNorm",vf="GatherV2",gu="GatherNd",gf="Greater",xf="GreaterEqual",xu="Identity",gm="IFFT",xm="Imag",yf="IsFinite",Tf="IsInf",Sf="IsNan",yu="LeakyRelu",Cf="Less",Ef="LessEqual",Tu="LinSpace",wf="Log",bf="Log1p",Af="LogicalAnd",Rf="LogicalNot",If="LogicalOr",sx="LogicalXor",Su="LRN",Pf="LRNGrad",Cu="Max",Ff="Maximum",Eu="MaxPool",ym="MaxPoolGrad",Nf="MaxPool3D",Tm="MaxPool3DGrad",Mf="MaxPoolWithArgmax",wu="Mean",bu="Min",Of="Minimum",Au="MirrorPad",Df="Mod",Ru="Multinomial",Lf="Multiply",Bf="Neg",$f="NotEqual",Iu="NonMaxSuppressionV3",Pu="NonMaxSuppressionV4",Fu="NonMaxSuppressionV5",Gf="OnesLike",Nu="OneHot",Uf="Pack",Mu="PadV2",Vf="Pow",Ou="Prelu",Du="Prod",Sm="RaggedGather",Cm="RaggedRange",Em="RaggedTensorToTensor",zf="Range",wm="Real",kf="Reciprocal",Wf="Relu",Xf="Reshape",Lu="ResizeNearestNeighbor",Hf="ResizeNearestNeighborGrad",Bu="ResizeBilinear",Yf="ResizeBilinearGrad",Kf="Relu6",$u="Reverse",jf="Round",Zf="Rsqrt",Gu="ScatterNd",Uu="TensorScatterUpdate",Vu="SearchSorted",Qf="Select",Jf="Selu",qf="Slice",_f="Sin",tc="Sinh",ec="Sign",nc="Sigmoid",sc="Softplus",ic="Sqrt",zu="Sum",rc="SpaceToBatchND",ac="SplitV",ku="Softmax",oc="SparseFillEmptyRows",Wu="SparseReshape",uc="SparseSegmentMean",lc="SparseSegmentSum",Xu="SparseToDense",hc="SquaredDifference",bm="Square",Am="StaticRegexReplace",Hu="StridedSlice",fc="StringNGrams",cc="StringSplit",dc="StringToHashBucketFast",pc="Sub",mc="Tan",vc="Tanh",Ka="Tile",Yu="TopK",Ku="Transform",Vr="Transpose",gc="Unique",xc="Unpack",Rm="UnsortedSegmentSum",yc="ZerosLike",ju="Step",Hl="FromPixels",Zu="RotateWithOffset",Fa="_FusedMatMul",Na="FusedConv2D",Ma="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xs(...c){St().getBool("IS_TEST")||St().getBool("PROD")||console.warn(...c)}function ix(...c){St().getBool("IS_TEST")||St().getBool("PROD")||console.log(...c)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ro=Bh("kernelRegistry",()=>new Map),rx=Bh("gradRegistry",()=>new Map);function Io(c,e){const f=Pm(c,e);return Ro.get(f)}function Id(c){return rx.get(c)}function Pd(c){const e=Ro.entries(),f=[];for(;;){const{done:x,value:S}=e.next();if(x)break;const[C,o]=S,[y]=C.split("_");y===c&&f.push(o)}return f}function Im(c){const{kernelName:e,backendName:f}=c,x=Pm(e,f);Ro.has(x)&&xs(`The kernel '${e}' for backend '${f}' is already registered`),Ro.set(x,c)}function Pm(c,e){return`${e}_${c}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fm(c){return c instanceof Float32Array||c instanceof Int32Array||c instanceof Uint8Array||c instanceof Uint8ClampedArray}var Nm=ze,rs=null;try{rs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ze(c,e,f){this.low=c|0,this.high=e|0,this.unsigned=!!f}ze.prototype.__isLong__;Object.defineProperty(ze.prototype,"__isLong__",{value:!0});function Wn(c){return(c&&c.__isLong__)===!0}ze.isLong=Wn;var Fd={},Nd={};function vr(c,e){var f,x,S;return e?(c>>>=0,(S=0<=c&&c<256)&&(x=Nd[c],x)?x:(f=ke(c,(c|0)<0?-1:0,!0),S&&(Nd[c]=f),f)):(c|=0,(S=-128<=c&&c<128)&&(x=Fd[c],x)?x:(f=ke(c,c<0?-1:0,!1),S&&(Fd[c]=f),f))}ze.fromInt=vr;function as(c,e){if(isNaN(c))return e?_i:os;if(e){if(c<0)return _i;if(c>=Mm)return Lm}else{if(c<=-Od)return Vn;if(c+1>=Od)return Dm}return c<0?as(-c,e).neg():ke(c%Kr|0,c/Kr|0,e)}ze.fromNumber=as;function ke(c,e,f){return new ze(c,e,f)}ze.fromBits=ke;var Po=Math.pow;function Tc(c,e,f){if(c.length===0)throw Error("empty string");if(c==="NaN"||c==="Infinity"||c==="+Infinity"||c==="-Infinity")return os;if(typeof e=="number"?(f=e,e=!1):e=!!e,f=f||10,f<2||36<f)throw RangeError("radix");var x;if((x=c.indexOf("-"))>0)throw Error("interior hyphen");if(x===0)return Tc(c.substring(1),e,f).neg();for(var S=as(Po(f,8)),C=os,o=0;o<c.length;o+=8){var y=Math.min(8,c.length-o),t=parseInt(c.substring(o,o+y),f);if(y<8){var s=as(Po(f,y));C=C.mul(s).add(as(t))}else C=C.mul(S),C=C.add(as(t))}return C.unsigned=e,C}ze.fromString=Tc;function Es(c,e){return typeof c=="number"?as(c,e):typeof c=="string"?Tc(c,e):ke(c.low,c.high,typeof e=="boolean"?e:c.unsigned)}ze.fromValue=Es;var Md=65536,ax=1<<24,Kr=Md*Md,Mm=Kr*Kr,Od=Mm/2,Dd=vr(ax),os=vr(0);ze.ZERO=os;var _i=vr(0,!0);ze.UZERO=_i;var $r=vr(1);ze.ONE=$r;var Om=vr(1,!0);ze.UONE=Om;var Yl=vr(-1);ze.NEG_ONE=Yl;var Dm=ke(-1,2147483647,!1);ze.MAX_VALUE=Dm;var Lm=ke(-1,-1,!0);ze.MAX_UNSIGNED_VALUE=Lm;var Vn=ke(0,-2147483648,!1);ze.MIN_VALUE=Vn;var jt=ze.prototype;jt.toInt=function(){return this.unsigned?this.low>>>0:this.low};jt.toNumber=function(){return this.unsigned?(this.high>>>0)*Kr+(this.low>>>0):this.high*Kr+(this.low>>>0)};jt.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Vn)){var f=as(e),x=this.div(f),S=x.mul(f).sub(this);return x.toString(e)+S.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var C=as(Po(e,6),this.unsigned),o=this,y="";;){var t=o.div(C),s=o.sub(t.mul(C)).toInt()>>>0,l=s.toString(e);if(o=t,o.isZero())return l+y;for(;l.length<6;)l="0"+l;y=""+l+y}};jt.getHighBits=function(){return this.high};jt.getHighBitsUnsigned=function(){return this.high>>>0};jt.getLowBits=function(){return this.low};jt.getLowBitsUnsigned=function(){return this.low>>>0};jt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Vn)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,f=31;f>0&&!(e&1<<f);f--);return this.high!=0?f+33:f+1};jt.isZero=function(){return this.high===0&&this.low===0};jt.eqz=jt.isZero;jt.isNegative=function(){return!this.unsigned&&this.high<0};jt.isPositive=function(){return this.unsigned||this.high>=0};jt.isOdd=function(){return(this.low&1)===1};jt.isEven=function(){return(this.low&1)===0};jt.equals=function(e){return Wn(e)||(e=Es(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};jt.eq=jt.equals;jt.notEquals=function(e){return!this.eq(e)};jt.neq=jt.notEquals;jt.ne=jt.notEquals;jt.lessThan=function(e){return this.comp(e)<0};jt.lt=jt.lessThan;jt.lessThanOrEqual=function(e){return this.comp(e)<=0};jt.lte=jt.lessThanOrEqual;jt.le=jt.lessThanOrEqual;jt.greaterThan=function(e){return this.comp(e)>0};jt.gt=jt.greaterThan;jt.greaterThanOrEqual=function(e){return this.comp(e)>=0};jt.gte=jt.greaterThanOrEqual;jt.ge=jt.greaterThanOrEqual;jt.compare=function(e){if(Wn(e)||(e=Es(e)),this.eq(e))return 0;var f=this.isNegative(),x=e.isNegative();return f&&!x?-1:!f&&x?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};jt.comp=jt.compare;jt.negate=function(){return!this.unsigned&&this.eq(Vn)?Vn:this.not().add($r)};jt.neg=jt.negate;jt.add=function(e){Wn(e)||(e=Es(e));var f=this.high>>>16,x=this.high&65535,S=this.low>>>16,C=this.low&65535,o=e.high>>>16,y=e.high&65535,t=e.low>>>16,s=e.low&65535,l=0,a=0,r=0,i=0;return i+=C+s,r+=i>>>16,i&=65535,r+=S+t,a+=r>>>16,r&=65535,a+=x+y,l+=a>>>16,a&=65535,l+=f+o,l&=65535,ke(r<<16|i,l<<16|a,this.unsigned)};jt.subtract=function(e){return Wn(e)||(e=Es(e)),this.add(e.neg())};jt.sub=jt.subtract;jt.multiply=function(e){if(this.isZero())return os;if(Wn(e)||(e=Es(e)),rs){var f=rs.mul(this.low,this.high,e.low,e.high);return ke(f,rs.get_high(),this.unsigned)}if(e.isZero())return os;if(this.eq(Vn))return e.isOdd()?Vn:os;if(e.eq(Vn))return this.isOdd()?Vn:os;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Dd)&&e.lt(Dd))return as(this.toNumber()*e.toNumber(),this.unsigned);var x=this.high>>>16,S=this.high&65535,C=this.low>>>16,o=this.low&65535,y=e.high>>>16,t=e.high&65535,s=e.low>>>16,l=e.low&65535,a=0,r=0,i=0,n=0;return n+=o*l,i+=n>>>16,n&=65535,i+=C*l,r+=i>>>16,i&=65535,i+=o*s,r+=i>>>16,i&=65535,r+=S*l,a+=r>>>16,r&=65535,r+=C*s,a+=r>>>16,r&=65535,r+=o*t,a+=r>>>16,r&=65535,a+=x*l+S*s+C*t+o*y,a&=65535,ke(i<<16|n,a<<16|r,this.unsigned)};jt.mul=jt.multiply;jt.divide=function(e){if(Wn(e)||(e=Es(e)),e.isZero())throw Error("division by zero");if(rs){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var f=(this.unsigned?rs.div_u:rs.div_s)(this.low,this.high,e.low,e.high);return ke(f,rs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?_i:os;var x,S,C;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _i;if(e.gt(this.shru(1)))return Om;C=_i}else{if(this.eq(Vn)){if(e.eq($r)||e.eq(Yl))return Vn;if(e.eq(Vn))return $r;var o=this.shr(1);return x=o.div(e).shl(1),x.eq(os)?e.isNegative()?$r:Yl:(S=this.sub(e.mul(x)),C=x.add(S.div(e)),C)}else if(e.eq(Vn))return this.unsigned?_i:os;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();C=os}for(S=this;S.gte(e);){x=Math.max(1,Math.floor(S.toNumber()/e.toNumber()));for(var y=Math.ceil(Math.log(x)/Math.LN2),t=y<=48?1:Po(2,y-48),s=as(x),l=s.mul(e);l.isNegative()||l.gt(S);)x-=t,s=as(x,this.unsigned),l=s.mul(e);s.isZero()&&(s=$r),C=C.add(s),S=S.sub(l)}return C};jt.div=jt.divide;jt.modulo=function(e){if(Wn(e)||(e=Es(e)),rs){var f=(this.unsigned?rs.rem_u:rs.rem_s)(this.low,this.high,e.low,e.high);return ke(f,rs.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};jt.mod=jt.modulo;jt.rem=jt.modulo;jt.not=function(){return ke(~this.low,~this.high,this.unsigned)};jt.and=function(e){return Wn(e)||(e=Es(e)),ke(this.low&e.low,this.high&e.high,this.unsigned)};jt.or=function(e){return Wn(e)||(e=Es(e)),ke(this.low|e.low,this.high|e.high,this.unsigned)};jt.xor=function(e){return Wn(e)||(e=Es(e)),ke(this.low^e.low,this.high^e.high,this.unsigned)};jt.shiftLeft=function(e){return Wn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ke(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ke(0,this.low<<e-32,this.unsigned)};jt.shl=jt.shiftLeft;jt.shiftRight=function(e){return Wn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ke(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ke(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};jt.shr=jt.shiftRight;jt.shiftRightUnsigned=function(e){if(Wn(e)&&(e=e.toInt()),e&=63,e===0)return this;var f=this.high;if(e<32){var x=this.low;return ke(x>>>e|f<<32-e,f>>>e,this.unsigned)}else return e===32?ke(f,0,this.unsigned):ke(f>>>e-32,0,this.unsigned)};jt.shru=jt.shiftRightUnsigned;jt.shr_u=jt.shiftRightUnsigned;jt.toSigned=function(){return this.unsigned?ke(this.low,this.high,!1):this};jt.toUnsigned=function(){return this.unsigned?this:ke(this.low,this.high,!0)};jt.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};jt.toBytesLE=function(){var e=this.high,f=this.low;return[f&255,f>>>8&255,f>>>16&255,f>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};jt.toBytesBE=function(){var e=this.high,f=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,f>>>24,f>>>16&255,f>>>8&255,f&255]};ze.fromBytes=function(e,f,x){return x?ze.fromBytesLE(e,f):ze.fromBytesBE(e,f)};ze.fromBytesLE=function(e,f){return new ze(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,f)};ze.fromBytesBE=function(e,f){return new ze(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],f)};const Bm=Mh(Nm),ox=Nh({__proto__:null,default:Bm},[Nm]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ji=Bm||ox;function Qu(c){return ji.fromString(c,!0,16)}const $m=Qu("c3a5c85c97cb3127"),Ki=Qu("b492b66fbe98f273"),En=Qu("9ae16a3b2f90404f");function Kl(c){return c.xor(c.shru(47))}function Gm(c,e,f){const x=c.slice(e,e+f);return ji.fromBytes(Array.from(x),!0,!0)}function $e(c,e){return Gm(c,e,8)}function Ld(c,e){return Gm(c,e,4)}function un(c,e){return e===0?c:c.shru(e).or(c.shl(64-e))}function yi(c,e,f=Qu("9ddfea08eb382d69")){let x=c.xor(e).mul(f);x=x.xor(x.shru(47));let S=e.xor(x).mul(f);return S=S.xor(S.shru(47)),S=S.mul(f),S}function ux(c,e,f,x,S,C){S=S.add(c),C=un(C.add(S).add(x),21);const o=S;return S=S.add(e),S=S.add(f),C=C.add(un(S,44)),[S.add(x),C.add(o)]}function uo(c,e,f,x){return ux($e(c,e),$e(c,e+8),$e(c,e+16),$e(c,e+24),f,x)}function lx(c,e=c.length){if(e>=8){const f=En.add(e*2),x=$e(c,0).add(En),S=$e(c,e-8),C=un(S,37).mul(f).add(x),o=un(x,25).add(S).mul(f);return yi(C,o,f)}if(e>=4){const f=En.add(e*2),x=Ld(c,0);return yi(x.shl(3).add(e),Ld(c,e-4),f)}if(e>0){const f=c[0],x=c[e>>1],S=c[e-1],C=f+(x<<8),o=e+(S<<2);return Kl(En.mul(C).xor($m.mul(o))).mul(En)}return En}function hx(c,e=c.length){const f=En.add(e*2),x=$e(c,0).mul(Ki),S=$e(c,8),C=$e(c,e-8).mul(f),o=$e(c,e-16).mul(En);return yi(un(x.add(S),43).add(un(C,30)).add(o),x.add(un(S.add(En),18)).add(C),f)}function fx(c,e=c.length){const f=En.add(e*2),x=$e(c,0).mul(En),S=$e(c,8),C=$e(c,e-8).mul(f),o=$e(c,e-16).mul(En),y=un(x.add(S),43).add(un(C,30)).add(o),t=yi(y,x.add(un(S.add(En),18)).add(C),f),s=$e(c,16).mul(f),l=$e(c,24),a=y.add($e(c,e-32)).mul(f),r=t.add($e(c,e-24)).mul(f);return yi(un(s.add(l),43).add(un(a,30)).add(r),s.add(un(l.add(x),18)).add(a),f)}function cx(c,e=c.length){const f=ji.fromNumber(81,!0);if(e<=32)return e<=16?lx(c,e):hx(c,e);if(e<=64)return fx(c,e);let x=f,S=f.mul(Ki).add(113),C=Kl(S.mul(En).add(113)).mul(En),o=[ji.UZERO,ji.UZERO],y=[ji.UZERO,ji.UZERO];x=x.mul(En).add($e(c,0));let t=0;const s=(e-1>>6)*64,l=s+(e-1&63)-63;do x=un(x.add(S).add(o[0]).add($e(c,t+8)),37).mul(Ki),S=un(S.add(o[1]).add($e(c,t+48)),42).mul(Ki),x=x.xor(y[1]),S=S.add(o[0]).add($e(c,t+40)),C=un(C.add(y[0]),33).mul(Ki),o=uo(c,t,o[1].mul(Ki),x.add(y[0])),y=uo(c,t+32,C.add(y[1]),S.add($e(c,t+16))),[C,x]=[x,C],t+=64;while(t!==s);const a=Ki.add(C.and(255).shl(1));return t=l,y[0]=y[0].add(e-1&63),o[0]=o[0].add(y[0]),y[0]=y[0].add(o[0]),x=un(x.add(S).add(o[0]).add($e(c,t+8)),37).mul(a),S=un(S.add(o[1]).add($e(c,t+48)),42).mul(a),x=x.xor(y[1].mul(9)),S=S.add(o[0].mul(9).add($e(c,t+40))),C=un(C.add(y[0]),33).mul(a),o=uo(c,t,o[1].mul(a),x.add(y[0])),y=uo(c,t+32,C.add(y[1]),S.add($e(c,t+16))),[C,x]=[x,C],yi(yi(o[0],y[0],a).add(Kl(S).mul($m)).add(C),yi(o[1],y[1],a).add(x),a)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function na(c,e){return e==="string"?sr(c):Ju([c],e)}function dx(c,e){return c instanceof Float32Array&&e==="float32"||c instanceof Int32Array&&e==="int32"||c instanceof Uint8Array&&e==="bool"}function Ju(c,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(c)&&(c=ar(c)),St().getBool("DEBUG")&&X2(c,e),dx(c,e))return c;if(e==null||e==="float32"||e==="complex64")return new Float32Array(c);if(e==="int32")return new Int32Array(c);if(e==="bool"){const f=new Uint8Array(c.length);for(let x=0;x<f.length;++x)Math.round(c[x])!==0&&(f[x]=1);return f}else throw new Error(`Unknown data type ${e}`)}function Hn(){return St().platform.now()}function px(c,e){return St().platform.fetch(c,e)}function sr(c,e="utf-8"){return e=e||"utf-8",St().platform.encode(c,e)}function jr(c,e="utf-8"){return e=e||"utf-8",St().platform.decode(c,e)}function ls(c){return St().platform.isTypedArray!=null?St().platform.isTypedArray(c):Fm(c)}function ar(c,e=[],f=!1){if(e==null&&(e=[]),typeof c=="boolean"||typeof c=="number"||typeof c=="string"||rr(c)||c==null||ls(c)&&f)e.push(c);else if(Array.isArray(c)||ls(c))for(let x=0;x<c.length;++x)ar(c[x],e,f);else{let x=-1;for(const S of Object.keys(c))/^([1-9]+[0-9]*|0)$/.test(S)&&(x=Math.max(x,Number(S)));for(let S=0;S<=x;S++)ar(c[S],e,f)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mx{constructor(e,f){this.backendTimer=e,this.logger=f,f==null&&(this.logger=new gx)}profileKernel(e,f,x){let S;const C=()=>{S=x()};let o;const y=Hn();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(C);else{C();for(const s of S)s.dataSync();o=Promise.resolve({kernelMs:Hn()-y})}if(St().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<S.length;s++){const l=S[s];l.data().then(a=>{vx(a,l.dtype,e)})}return{kernelName:e,outputs:S,inputs:f,timeMs:o.then(s=>s.kernelMs),extraInfo:o.then(s=>s.getExtraProfileInfo!=null?s.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:f,outputs:x,timeMs:S,inputs:C,extraInfo:o}=e;x.forEach(y=>{Promise.all([y.data(),S,o]).then(t=>{this.logger.logKernelProfile(f,y,t[0],t[1],C,t[2])})})}}function vx(c,e,f){if(e!=="float32")return!1;for(let x=0;x<c.length;x++){const S=c[x];if(isNaN(S)||!isFinite(S))return console.warn(`Found ${S} in the result of '${f}'`),!0}return!1}class gx{logKernelProfile(e,f,x,S,C,o){const y=typeof S=="number"?Ur(`${S}ms`,9):S.error,t=Ur(e,25),s=f.rank,l=f.size,a=Ur(f.shape.toString(),14);let r="";for(const i in C){const n=C[i];if(n!=null){const h=n.shape||f.shape,d=h.length;r+=`${i}: ${d}D ${d>0?h:""} `}}console.log(`%c${t}	%c${y}	%c${s}D ${a}	%c${l}	%c${r}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xx(c,e,f){const x={},S={};for(let t=0;t<e.length;t++)x[e[t].id]=!0;for(let t=0;t<c.length;t++){const s=c[t],l=s.inputs;for(const a in l){const r=l[a];let i=!1;for(let n=0;n<e.length;n++)if(x[r.id]){s.outputs.forEach(h=>x[h.id]=!0),i=!0,S[s.id]=!0;break}if(i)break}}const C={};C[f.id]=!0;const o={};for(let t=c.length-1;t>=0;t--){const s=c[t],l=s.inputs;for(let a=0;a<s.outputs.length;a++)if(C[s.outputs[a].id]){for(const r in l)C[l[r].id]=!0,o[s.id]=!0;break}}const y=[];for(let t=0;t<c.length;t++){const s=c[t];if(S[s.id]&&o[s.id]){const l={};for(const r in s.inputs){const i=s.inputs[r];x[i.id]&&(l[r]=i)}const a=Object.assign({},s);a.inputs=l,a.outputs=s.outputs,y.push(a)}}return y}function yx(c,e,f,x){for(let S=e.length-1;S>=0;S--){const C=e[S],o=[];if(C.outputs.forEach(t=>{const s=c[t.id];s!=null?o.push(s):o.push(null)}),C.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${C.kernelName}.`);const y=C.gradient(o);for(const t in C.inputs){if(!(t in y))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(y)}.`);const s=f(()=>y[t]());if(s.dtype!=="float32")throw new Error(`Error in gradient for op ${C.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${s.dtype}'`);const l=C.inputs[t];if(!je(s.shape,l.shape))throw new Error(`Error in gradient for op ${C.kernelName}. The gradient of input '${t}' has shape '${s.shape}', which does not match the shape of the input '${l.shape}'`);if(c[l.id]==null)c[l.id]=s;else{const a=c[l.id];c[l.id]=x(a,s),a.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bd=20,xa=3,yl=7;function Tx(c,e,f,x){const S=Ne(e),C=Sx(c,e,f,S),o=e.length,y=To(c,e,f,S,C),t=["Tensor"];return x&&(t.push(`  dtype: ${f}`),t.push(`  rank: ${o}`),t.push(`  shape: [${e}]`),t.push("  values:")),t.push(y.map(s=>"    "+s).join(`
`)),t.join(`
`)}function Sx(c,e,f,x){const S=bt(e),C=x[x.length-1],o=new Array(C).fill(0),y=e.length,t=f==="complex64"?Sa(c):c;if(y>1)for(let s=0;s<S/C;s++){const l=s*C;for(let a=0;a<C;a++)o[a]=Math.max(o[a],Ta(t[l+a],0,f).length)}return o}function Ta(c,e,f){let x;return Array.isArray(c)?x=`${parseFloat(c[0].toFixed(yl))} + ${parseFloat(c[1].toFixed(yl))}j`:Zo(c)?x=`'${c}'`:f==="bool"?x=Um(c):x=parseFloat(c.toFixed(yl)).toString(),Ur(x,e)}function Um(c){return c===0?"false":"true"}function To(c,e,f,x,S,C=!0){const o=f==="complex64"?2:1,y=e[0],t=e.length;if(t===0){if(f==="complex64"){const h=Sa(c);return[Ta(h[0],0,f)]}return f==="bool"?[Um(c[0])]:[c[0].toString()]}if(t===1){if(y>Bd){const d=xa*o;let u=Array.from(c.slice(0,d)),p=Array.from(c.slice((y-xa)*o,y*o));return f==="complex64"&&(u=Sa(u),p=Sa(p)),["["+u.map((m,v)=>Ta(m,S[v],f)).join(", ")+", ..., "+p.map((m,v)=>Ta(m,S[y-xa+v],f)).join(", ")+"]"]}return["["+(f==="complex64"?Sa(c):Array.from(c)).map((d,u)=>Ta(d,S[u],f)).join(", ")+"]"]}const s=e.slice(1),l=x.slice(1),a=x[0]*o,r=[];if(y>Bd){for(let h=0;h<xa;h++){const d=h*a,u=d+a;r.push(...To(c.slice(d,u),s,f,l,S,!1))}r.push("...");for(let h=y-xa;h<y;h++){const d=h*a,u=d+a;r.push(...To(c.slice(d,u),s,f,l,S,h===y-1))}}else for(let h=0;h<y;h++){const d=h*a,u=d+a;r.push(...To(c.slice(d,u),s,f,l,S,h===y-1))}const i=t===2?",":"";r[0]="["+(y>0?r[0]+i:"");for(let h=1;h<r.length-1;h++)r[h]=" "+r[h]+i;let n=`,
`;for(let h=2;h<t;h++)n+=`
`;return r[r.length-1]=" "+r[r.length-1]+"]"+(C?"":n),r}function Sa(c){const e=[];for(let f=0;f<c.length;f+=2)e.push([c[f],c[f+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zr{constructor(e,f,x){if(this.dtype=f,this.shape=e.slice(),this.size=bt(e),x!=null){const S=x.length;it(S===this.size,()=>`Length of values '${S}' does not match the size inferred by the shape '${this.size}'.`)}if(f==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=x||ln(f,this.size),this.strides=Ne(e)}set(e,...f){f.length===0&&(f=[0]),it(f.length===this.rank,()=>`The number of provided coordinates (${f.length}) must match the rank (${this.rank})`);const x=this.locToIndex(f);this.values[x]=e}get(...e){e.length===0&&(e=[0]);let f=0;for(const S of e){if(S<0||S>=this.shape[f]){const C=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(C)}f++}let x=e[e.length-1];for(let S=0;S<e.length-1;++S)x+=this.strides[S]*e[S];return this.values[x]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let f=e[e.length-1];for(let x=0;x<e.length-1;++x)f+=this.strides[x]*e[x];return f}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const f=new Array(this.shape.length);for(let x=0;x<f.length-1;++x)f[x]=Math.floor(e/this.strides[x]),e-=f[x]*this.strides[x];return f[f.length-1]=e,f}get rank(){return this.shape.length}toTensor(){return vs().makeTensor(this.values,this.shape,this.dtype)}}let vs=null,Dr=null;function Cx(c){vs=c}function Ex(c){Dr=c}class Je{constructor(e,f,x,S){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=f||"float32",this.size=bt(e),this.strides=Ne(e),this.dataId=x,this.id=S,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Dr.buffer(this.shape,this.dtype,e)}bufferSync(){return Dr.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Wl(this.shape,e,this.dtype==="complex64")}arraySync(){return Wl(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=vs().read(this.dataId);if(this.dtype==="string"){const f=await e;try{return f.map(x=>jr(x))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),vs().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=vs().readSync(this.dataId);if(this.dtype==="string")try{return e.map(f=>jr(f))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await vs().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),vs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Dr.print(this,e)}clone(){return this.throwIfDisposed(),Dr.clone(this)}toString(e=!1){const f=this.dataSync();return Tx(f,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Dr.cast(this,e)}variable(e=!0,f,x){return this.throwIfDisposed(),vs().makeVariable(this,e,f,x)}}Object.defineProperty(Je,Symbol.hasInstance,{value:c=>!!c&&c.data!=null&&c.dataSync!=null&&c.throwIfDisposed!=null});function Vm(){return Bh("Tensor",()=>Je)}Vm();class Fo extends Je{constructor(e,f,x,S){super(e.shape,e.dtype,e.dataId,S),this.trainable=f,this.name=x}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!je(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);vs().disposeTensor(this),this.dataId=e.dataId,vs().incRef(this,null)}dispose(){vs().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Fo,Symbol.hasInstance,{value:c=>c instanceof Je&&c.assign!=null&&c.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var $d;(function(c){c.R0="R0",c.R1="R1",c.R2="R2",c.R3="R3",c.R4="R4",c.R5="R5",c.R6="R6"})($d||($d={}));var jl;(function(c){c.float32="float32",c.int32="int32",c.bool="int32",c.complex64="complex64"})(jl||(jl={}));var Zl;(function(c){c.float32="float32",c.int32="int32",c.bool="bool",c.complex64="complex64"})(Zl||(Zl={}));var Ql;(function(c){c.float32="float32",c.int32="float32",c.bool="float32",c.complex64="complex64"})(Ql||(Ql={}));var Jl;(function(c){c.float32="complex64",c.int32="complex64",c.bool="complex64",c.complex64="complex64"})(Jl||(Jl={}));const wx={float32:Ql,int32:jl,bool:Zl,complex64:Jl};function Ms(c,e){if(c==="string"||e==="string"){if(c==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${c} with ${e}`)}return wx[c][e]}function Sc(c){return Ms(c,"int32")}function zm(c){return c!=null&&typeof c=="object"&&"texture"in c&&c.texture instanceof WebGLTexture}function km(c){return typeof GPUBuffer<"u"&&c!=null&&typeof c=="object"&&"buffer"in c&&c.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qe(c,e){if(c.dtype===e.dtype)return[c,e];const f=Ms(c.dtype,e.dtype);return[c.cast(f),e.cast(f)]}function bx(c,e){it(c.dtype===e.dtype,()=>`The dtypes of the first(${c.dtype}) and second(${e.dtype}) input must match`)}function Wm(c){const e=[];return Xm(c,e,new Set),e}function Xm(c,e,f){if(c==null)return;if(c instanceof Je){e.push(c);return}if(!Ax(c))return;const x=c;for(const S in x){const C=x[S];f.has(C)||(f.add(C),Xm(C,e,f))}}function Ax(c){return Array.isArray(c)||typeof c=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tl(c){return c.kernelName!=null}class Gd{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Qr{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Gd}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let f=0;f<e.length;f++){const x=e[f];if(await this.initializeBackend(x).success){await this.setBackend(x);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:f}=this.initializeBackendsAndReturnBest();if(f)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:f}=this.initializeBackend(e);if(f)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,f,x=1){return e in this.registryFactory?(xs(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:f,priority:x},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:f,asyncInit:x}=this.initializeBackend(e);if(!(x?await f:f))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new mx(this.backendInstance),!0}setupRegisteredKernels(){Pd(this.backendName).forEach(f=>{f.setupFunc!=null&&f.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Pd(e).forEach(x=>{x.disposeFunc!=null&&x.disposeFunc(this.registry[e])})}initializeBackend(e){const f=this.registryFactory[e];if(f==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const x=f.factory();if(x&&!(x instanceof Oh)&&typeof x.then=="function"){const S=++this.pendingBackendInitId,C=x.then(o=>S<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(S<this.pendingBackendInitId||(this.pendingBackendInit=null,xs(`Initialization of backend ${e} failed`),xs(o.stack||o.message)),!1));return this.pendingBackendInit=C,{success:C,asyncInit:!0}}else return this.registry[e]=x,{success:!0,asyncInit:!1}}catch(x){return xs(`Initialization of backend ${e} failed`),xs(x.stack||x.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,f)=>this.registryFactory[f].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let f=0;f<e.length;f++){const x=e[f],{success:S,asyncInit:C}=this.initializeBackend(x);if(C||S)return{name:x,asyncInit:C}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,f){const x=this.state.tensorInfo.get(f),S=x.backend,C=this.readSync(f),o=S.refCount(f);S.disposeData(f,!0),x.backend=e,e.move(f,C,x.shape,x.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,f){let x=null;if(f==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");f=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof f!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");x=e}let S;return this.scopedRun(()=>this.startScope(x),()=>this.endScope(S),()=>(S=f(),S instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),S))}scopedRun(e,f,x){e();try{const S=x();return f(),S}catch(S){throw f(),S}}nextTensorId(){return Qr.nextTensorId++}nextVariableId(){return Qr.nextVariableId++}clone(e){const f=pt.runKernel(xu,{x:e}),x={x:e},S=o=>({x:()=>{const y="float32",t={x:o},s={dtype:y};return pt.runKernel(su,t,s)}}),C=[];return this.addTapeNode(this.state.activeScope.name,x,[f],S,C,{}),f}runKernel(e,f,x){if(this.backendName==null&&this.backend,!(Io(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:f,attrs:x})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,f,x){const S=this.backend.numDataIds();let C=0;x.forEach(t=>{C+=t.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],y=S-f-C-o;if(y>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${y} data ids) after running '${e}'`)}runKernelFunc(e){let f,x=[];const S=this.isTapeOn(),C=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let y;this.backendName==null&&this.backend;let t;const s=Tl(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Tl(e)){const{kernelName:n,inputs:h,attrs:d}=e;this.backendName==null&&this.backend;const u=Io(n,this.backendName);it(u!=null,()=>`Cannot find registered kernel '${n}' for backend '${this.backendName}'`),y=()=>{const p=this.backend.numDataIds();t=u.kernelFunc({inputs:h,attrs:d,backend:this.backend});const m=Array.isArray(t)?t:[t];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(n,p,m);const v=m.map(g=>g.rank!=null?g:this.makeTensorFromTensorInfo(g));if(S){const g=this.getTensorsForGradient(n,h,v);x=this.saveTensorsForBackwardMode(g)}return v}}else{const{forwardFunc:n}=e,h=d=>{S&&(x=d.map(u=>this.keep(this.clone(u))))};y=()=>{const d=this.backend.numDataIds();t=this.tidy(()=>n(this.backend,h));const u=Array.isArray(t)?t:[t];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(s,d,u),u}}const{inputs:l,attrs:a}=e,r=Tl(e)?null:e.backwardsFunc;let i;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?f=y():(i=this.profiler.profileKernel(s,l,()=>y()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(i),f=i.outputs)}),S&&this.addTapeNode(s,l,f,r,x,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-C,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map(n=>l[n]!=null?l[n].shape:null),outputShapes:f.map(n=>n.shape),kernelTimeMs:i.timeMs,extraInfo:i.extraInfo}),Array.isArray(t)?f:f[0]}saveTensorsForBackwardMode(e){return e.map(x=>this.keep(this.clone(x)))}getTensorsForGradient(e,f,x){const S=Id(e);if(S!=null){const C=S.inputsToSave||[],o=S.outputsToSave||[];let y;S.saveAllInputs?(it(Array.isArray(f),()=>"saveAllInputs is true, expected inputs to be an array."),y=Object.keys(f).map(s=>f[s])):y=C.map(s=>f[s]);const t=x.filter((s,l)=>o[l]);return y.concat(t)}return[]}makeTensor(e,f,x,S){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");x=x||"float32",S=S||this.backend;let C=e;x==="string"&&Zo(e[0])&&(C=e.map(t=>sr(t)));const o=S.write(C,f,x),y=new Je(f,x,o,this.nextTensorId());if(this.trackTensor(y,S),x==="string"){const t=this.state.tensorInfo.get(o),s=K2(C);this.state.numBytes+=s-t.bytes,t.bytes=s}return y}makeTensorFromDataId(e,f,x,S){x=x||"float32";const C={dataId:e,shape:f,dtype:x};return this.makeTensorFromTensorInfo(C,S)}makeTensorFromTensorInfo(e,f){const{dataId:x,shape:S,dtype:C}=e,o=new Je(S,C,x,this.nextTensorId());return this.trackTensor(o,f),o}makeVariable(e,f=!0,x,S){x=x||this.nextVariableId().toString(),S!=null&&S!==e.dtype&&(e=e.cast(S));const C=new Fo(e,f,x,this.nextTensorId());if(this.state.registeredVariables[C.name]!=null)throw new Error(`Variable with name ${C.name} was already registered`);return this.state.registeredVariables[C.name]=C,this.incRef(C,this.backend),C}trackTensor(e,f){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let x=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(x=e.size*Yr(e.dtype)),this.state.numBytes+=x,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:f||this.backend,dtype:e.dtype,shape:e.shape,bytes:x})),e instanceof Fo||this.track(e)}incRef(e,f){this.trackTensor(e,f),this.backend.incRef(e.dataId)}removeDataId(e,f){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===f&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const f=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=f.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const x=e.size*Yr(e.dtype);this.state.numBytes-=x}f.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,f.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const f=this.state.registeredVariables[e];this.disposeVariable(f)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const f=this.state.numBytes,x=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(S=>S.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-f,this.state.activeProfile.newTensors=this.state.numTensors-x;for(const S of this.state.activeProfile.kernels)S.kernelTimeMs=await S.kernelTimeMs,S.extraInfo=await S.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,f,x,S,C,o){const y={id:this.state.nextTapeNodeId++,kernelName:e,inputs:f,outputs:x,saved:C},t=Id(e);t!=null&&(S=t.gradFunc),S!=null&&(y.gradient=s=>(s=s.map((l,a)=>{if(l==null){const r=x[a],i=wi(r.size,r.dtype);return this.makeTensor(i,r.shape,r.dtype)}return l}),S(s.length>1?s:s[0],C,o))),this.state.activeTape.push(y)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const f={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(f.name=e),this.state.scopeStack.push(f),this.state.activeScope=f}endScope(e){const f=Wm(e),x=new Set(f.map(C=>C.id));for(let C=0;C<this.state.activeScope.track.length;C++){const o=this.state.activeScope.track[C];!o.kept&&!x.has(o.id)&&o.dispose()}const S=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],f.forEach(C=>{!C.kept&&C.scopeId===S.id&&this.track(C)})}gradients(e,f,x,S=!1){if(it(f.length>0,()=>"gradients() received an empty list of xs."),x!=null&&x.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${x.dtype}'`);const C=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));it(C instanceof Je,()=>"The result y returned by f() must be a tensor.");const o=xx(this.state.activeTape,f,C);if(!S&&o.length===0&&f.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const y={};y[C.id]=x??Rx(C.shape),yx(y,o,s=>this.tidy(s),Ix);const t=f.map(s=>y[s.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(s=>{for(const l of s.saved)l.dispose()}),this.state.activeTape=null),{value:C,grads:t}})}customGrad(e){return it(zl(e),()=>"The f passed in customGrad(f) must be a function."),(...f)=>{it(f.every(y=>y instanceof Je),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let x;const S={};f.forEach((y,t)=>{S[t]=y});const C=(y,t)=>(x=e(...f,t),it(x.value instanceof Je,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),it(zl(x.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),x.value),o=(y,t)=>{const s=x.gradFunc(y,t),l=Array.isArray(s)?s:[s];it(l.length===f.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),it(l.every(r=>r instanceof Je),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const a={};return l.forEach((r,i)=>{a[i]=()=>r}),a};return this.runKernelFunc({forwardFunc:C,backwardsFunc:o,inputs:S})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,f){return this.state.tensorInfo.get(e).backend.readToGPU(e,f)}async time(e){const f=Hn(),x=await this.backend.time(e);return x.wallMs=Hn()-f,x}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Gd;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Qr.nextTensorId=0;Qr.nextVariableId=0;function Rx(c){const e=sm(bt(c),"float32");return pt.makeTensor(e,c,"float32")}function Hm(){const c=rm();if(c._tfengine==null){const e=new Q2(c);c._tfengine=new Qr(e)}return tx(c._tfengine.ENV),Cx(()=>c._tfengine),c._tfengine}const pt=Hm();function Ix(c,e){const f={a:c,b:e};return pt.runKernel(Qo,f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Px(){return typeof navigator<"u"&&navigator!=null}function Ym(c){if(c||Px()){if(c||(c=navigator),c.product==="ReactNative")return!0;const e=c.userAgent||c.vendor||(typeof window<"u"?window.opera:"");if(!e){const f=c;return f.userAgentData&&f.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Km(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const On=St();On.registerFlag("DEBUG",()=>!1,c=>{c&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});On.registerFlag("IS_BROWSER",()=>Km());On.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");On.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));On.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));On.registerFlag("PROD",()=>!1);On.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>On.getBool("DEBUG"));On.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);On.registerFlag("IS_TEST",()=>!1);On.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>On.getBool("DEBUG"));On.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);On.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);On.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pi(c,e){let f=c;if(ls(c))return e==="string"?[]:[c.length];if(zm(c)){const S=c.channels||"RGBA";return[c.height,c.width*S.length]}else if(km(c))return[c.buffer.size/(e==null?4:Yr(e))];if(!Array.isArray(c))return[];const x=[];for(;Array.isArray(f)||ls(f)&&e!=="string";)x.push(f.length),f=f[0];return Array.isArray(c)&&St().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&jm(c,x,[]),x}function jm(c,e,f){if(f=f||[],!Array.isArray(c)&&!ls(c)){it(e.length===0,()=>`Element arr[${f.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}it(e.length>0,()=>`Element arr[${f.join("][")}] should be a primitive, but is an array of ${c.length} elements`),it(c.length===e[0],()=>`Element arr[${f.join("][")}] should have ${e[0]} elements, but has ${c.length} elements`);const x=e.slice(1);for(let S=0;S<c.length;++S)jm(c[S],x,f.concat(S))}function Ud(c,e,f,x){if(c!=="string_or_numeric"){if(c==null)throw new Error("Expected dtype cannot be null.");if(c!=="numeric"&&c!==e||c==="numeric"&&e==="string")throw new Error(`Argument '${f}' passed to '${x}' must be ${c} tensor, but got ${e} tensor`)}}function st(c,e,f,x="numeric"){if(c instanceof Vm())return Ud(x,c.dtype,e,f),c;let S=ea(c);if(S!=="string"&&["bool","int32","float32"].indexOf(x)>=0&&(S=x),Ud(x,S,e,f),c==null||!ls(c)&&!Array.isArray(c)&&typeof c!="number"&&typeof c!="boolean"&&typeof c!="string"){const t=c==null?"null":c.constructor.name;throw new Error(`Argument '${e}' passed to '${f}' must be a Tensor or TensorLike, but got '${t}'`)}const C=Pi(c,S);!ls(c)&&!Array.isArray(c)&&(c=[c]);const y=S!=="string"?Ju(c,S):ar(c,[],!0);return pt.makeTensor(y,C,S)}function No(c,e,f,x="numeric"){if(!Array.isArray(c))throw new Error(`Argument ${e} passed to ${f} must be a \`Tensor[]\` or \`TensorLike[]\``);return c.map((C,o)=>st(C,`${e}[${o}]`,f,x))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zm="__op";function ct(c){const e=Object.keys(c);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let f=e[0];const x=c[f];f.endsWith("_")&&(f=f.substring(0,f.length-1)),f=f+Zm;const S=(...C)=>{pt.startScope(f);try{const o=x(...C);return rr(o)&&console.error("Cannot return a Promise inside of tidy."),pt.endScope(o),o}catch(o){throw pt.endScope(null),o}};return Object.defineProperty(S,"name",{value:f,configurable:!0}),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fx(c,e){const f=st(c,"real","complex"),x=st(e,"imag","complex");kn(f.shape,x.shape,`real and imag shapes, ${f.shape} and ${x.shape}, must match in call to tf.complex().`);const S={real:f,imag:x};return pt.runKernel(um,S)}const bi=ct({complex_:Fx});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fi(c,e,f,x){if(x==null)x=ea(c);else if(x==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(km(c)||zm(c)){if(x!=="float32"&&x!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${x}.`);return pt.backend.createTensorFromGPUData(c,e||f,x)}if(!ls(c)&&!Array.isArray(c)&&typeof c!="number"&&typeof c!="boolean"&&typeof c!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Zn(e);const S=bt(e),C=bt(f);it(S===C,()=>`Based on the provided shape, [${e}], the tensor should have ${S} values but has ${C}`);for(let o=0;o<f.length;++o){const y=f[o],t=o===f.length-1?y!==bt(e.slice(o)):!0;it(f[o]===e[o]||!t,()=>`Error creating a new Tensor. Inferred shape (${f}) does not match the provided shape (${e}). `)}}return!ls(c)&&!Array.isArray(c)&&(c=[c]),e=e||f,c=x!=="string"?Ju(c,x):ar(c,[],!0),pt.makeTensor(c,e,x)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ys(c,e,f){const x=Pi(c,f);return Fi(c,e,x,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ql={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class ws{static join(e){return new ws(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(x=>ls(x)?x.buffer:x),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let f=0;for(let x=0;x<e.length;x++){const S=e[x];x!==e.length-1&&S.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const C=f+S.byteLength;this.shards.push({buffer:S,start:f,end:C}),f=C}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,f=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,f=isNaN(Number(f))?0:f,e=Math.max(0,e),f=Math.min(this.byteLength,f),f<=e)return new ArrayBuffer(0);const x=this.findShardForByte(e);if(x===-1)throw new Error(`Could not find start shard for byte ${e}`);const S=f-e,C=new ArrayBuffer(S),o=new Uint8Array(C);let y=0;for(let t=x;t<this.shards.length;t++){const s=this.shards[t],a=e+y-s.start,r=y,n=Math.min(f,s.end)-s.start,h=new Uint8Array(s.buffer,a,n-a);if(o.set(h,r),y+=h.length,f<s.end)break}return C}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function f(S){return e<S.start?-1:e>=S.end?1:0}if(f(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const x=Nx(this.shards,f);return x===-1?-1:(this.previousShardIndex=x,this.previousShardIndex)}}function Nx(c,e){let f=0,x=c.length;for(;f<=x;){const S=Math.floor((x-f)/2)+f,C=e(c[S]);if(C===0)return S;C<0?x=S:f=S+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mo=4;async function Mx(c,e){const f=[],x=[],S=Array.isArray(c)?c.map(o=>o.name):Object.keys(c);for(let o=0;o<S.length;++o){const y=S[o],t=Array.isArray(c)?c[o].tensor:c[y];if(t.dtype!=="float32"&&t.dtype!=="int32"&&t.dtype!=="bool"&&t.dtype!=="string"&&t.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${y}': ${t.dtype}`);const s={name:y,shape:t.shape,dtype:t.dtype};if(t.dtype==="string"){const l=new Promise(async a=>{const r=await t.bytes(),i=r.reduce((d,u)=>d+u.length,0)+Mo*r.length,n=new Uint8Array(i);let h=0;for(let d=0;d<r.length;d++){const u=r[d],p=new Uint8Array(new Uint32Array([u.length]).buffer);n.set(p,h),h+=Mo,n.set(u,h),h+=u.length}a(n)});x.push(l)}else x.push(t.data());e!=null&&(s.group=e),f.push(s)}const C=await Promise.all(x);return{data:Ox(C),specs:f}}function Qm(c,e){const f=new ws(c),x={};let S,C=0;for(const o of e){const y=o.name,t=o.dtype,s=o.shape,l=bt(s);let a;if("quantization"in o){const r=o.quantization;if(r.dtype==="uint8"||r.dtype==="uint16"){if(!("min"in r&&"scale"in r))throw new Error(`Weight ${o.name} with quantization ${r.dtype} doesn't have corresponding metadata min and scale.`)}else if(r.dtype==="float16"){if(t!=="float32")throw new Error(`Weight ${o.name} is quantized with ${r.dtype} which only supports weights of type float32 not ${t}.`)}else throw new Error(`Weight ${o.name} has unknown quantization dtype ${r.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const i=ql[r.dtype],n=f.slice(C,C+l*i),h=r.dtype==="uint8"?new Uint8Array(n):new Uint16Array(n);if(t==="float32")if(r.dtype==="uint8"||r.dtype==="uint16"){a=new Float32Array(h.length);for(let d=0;d<h.length;d++){const u=h[d];a[d]=u*r.scale+r.min}}else if(r.dtype==="float16")S===void 0&&(S=Vx()),a=S(h);else throw new Error(`Unsupported quantization type ${r.dtype} for weight type float32.`);else if(t==="int32"){if(r.dtype!=="uint8"&&r.dtype!=="uint16")throw new Error(`Unsupported quantization type ${r.dtype} for weight type int32.`);a=new Int32Array(h.length);for(let d=0;d<h.length;d++){const u=h[d];a[d]=Math.round(u*r.scale+r.min)}}else throw new Error(`Unsupported dtype in weight '${y}': ${t}`);C+=l*i}else if(t==="string"){const r=bt(o.shape);a=[];for(let i=0;i<r;i++){const n=new Uint32Array(f.slice(C,C+Mo))[0];C+=Mo;const h=new Uint8Array(f.slice(C,C+n));a.push(h),C+=n}}else{const r=ql[t],i=f.slice(C,C+l*r);if(t==="float32")a=new Float32Array(i);else if(t==="int32")a=new Int32Array(i);else if(t==="bool")a=new Uint8Array(i);else if(t==="complex64"){a=new Float32Array(i);const n=new Float32Array(a.length/2),h=new Float32Array(a.length/2);for(let p=0;p<n.length;p++)n[p]=a[p*2],h[p]=a[p*2+1];const d=ys(n,s,"float32"),u=ys(h,s,"float32");x[y]=bi(d,u),d.dispose(),u.dispose()}else throw new Error(`Unsupported dtype in weight '${y}': ${t}`);C+=l*r}t!=="complex64"&&(x[y]=ys(a,s,t))}return x}function Ox(c){if(c===null)throw new Error(`Invalid input value: ${JSON.stringify(c)}`);let e=0;const f=[];c.forEach(C=>{if(e+=C.byteLength,f.push(C.byteLength===C.buffer.byteLength?C:new C.constructor(C)),!(C instanceof Float32Array||C instanceof Int32Array||C instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${C.constructor.name}`)});const x=new Uint8Array(e);let S=0;return f.forEach(C=>{x.set(new Uint8Array(C.buffer),S),S+=C.byteLength}),x.buffer}const Cc=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Vd(c){return Cc?Buffer.byteLength(c,"utf8"):new Blob([c]).size}function Dx(c){if(Cc)return Buffer.from(c).toString("base64");const e=new Uint8Array(c);let f="";for(let x=0,S=e.length;x<S;x++)f+=String.fromCharCode(e[x]);return btoa(f)}function Lx(c){if(Cc){const x=Buffer.from(c,"base64");return x.buffer.slice(x.byteOffset,x.byteOffset+x.byteLength)}const e=atob(c),f=new Uint8Array(e.length);for(let x=0;x<e.length;++x)f.set([e.charCodeAt(x)],x);return f.buffer}function Bx(c){return ws.join(c)}function zd(c){const e="/";for(c=c.trim();c.endsWith(e);)c=c.slice(0,c.length-1);const f=c.split(e);return f[f.length-1]}function Jm(c,e){const f={modelTopology:c.modelTopology,format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,weightsManifest:e};return c.signature!=null&&(f.signature=c.signature),c.userDefinedMetadata!=null&&(f.userDefinedMetadata=c.userDefinedMetadata),c.modelInitializer!=null&&(f.modelInitializer=c.modelInitializer),c.initializerSignature!=null&&(f.initializerSignature=c.initializerSignature),c.trainingConfig!=null&&(f.trainingConfig=c.trainingConfig),f}function qm(c,e,f){const x={modelTopology:c.modelTopology,format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy};if(c.trainingConfig!=null&&(x.trainingConfig=c.trainingConfig),c.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!f)throw new Error("modelJSON has weightsManifest but weightData is null");x.weightSpecs=e,x.weightData=f}return c.signature!=null&&(x.signature=c.signature),c.userDefinedMetadata!=null&&(x.userDefinedMetadata=c.userDefinedMetadata),c.modelInitializer!=null&&(x.modelInitializer=c.modelInitializer),c.initializerSignature!=null&&(x.initializerSignature=c.initializerSignature),x}async function Ec(c,e){let f,x;return c.weightsManifest!=null&&([f,x]=await e(c.weightsManifest)),qm(c,f,x)}function ja(c){if(c.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:c.modelTopology==null?0:Vd(JSON.stringify(c.modelTopology)),weightSpecsBytes:c.weightSpecs==null?0:Vd(JSON.stringify(c.weightSpecs)),weightDataBytes:c.weightData==null?0:new ws(c.weightData).byteLength}}function _m(c){const e=[];for(const f of c)e.push(...f.weights);return e}function $x(){const c=f=>{let x=f<<13,S=0;for(;!(x&8388608);)S-=8388608,x<<=1;return x&=-8388609,S+=947912704,x|S},e=new Uint32Array(2048);e[0]=0;for(let f=1;f<1024;f++)e[f]=c(f);for(let f=1024;f<2048;f++)e[f]=939524096+(f-1024<<13);return e}function Gx(){const c=new Uint32Array(64);c[0]=0,c[31]=1199570944,c[32]=2147483648,c[63]=3347054592;for(let e=1;e<31;e++)c[e]=e<<23;for(let e=33;e<63;e++)c[e]=2147483648+(e-32<<23);return c}function Ux(){const c=new Uint32Array(64);for(let e=0;e<64;e++)c[e]=1024;return c[0]=c[32]=0,c}function Vx(){const c=$x(),e=Gx(),f=Ux();return x=>{const S=new ArrayBuffer(4*x.length),C=new Uint32Array(S);for(let o=0;o<x.length;o++){const y=x[o],t=c[f[y>>10]+(y&1023)]+e[y>>10];C[o]=t}return new Float32Array(S)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ye{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ye.instance==null&&(Ye.instance=new Ye),Ye.instance}static registerSaveRouter(e){Ye.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ye.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ye.getHandlers(e,"save")}static getLoadHandlers(e,f){return Ye.getHandlers(e,"load",f)}static getHandlers(e,f,x){const S=[];return(f==="load"?Ye.getInstance().loadRouters:Ye.getInstance().saveRouters).forEach(o=>{const y=o(e,x);y!==null&&S.push(y)}),S}}const zx=c=>Ye.registerSaveRouter(c),kx=c=>Ye.registerLoadRouter(c),Wx=c=>Ye.getSaveHandlers(c),Xx=(c,e)=>Ye.getLoadHandlers(c,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _l="tensorflowjs",th=1,tr="models_store",gi="model_info_store";function tv(){if(!St().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const c=typeof window>"u"?self:window,e=c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB||c.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function eh(c){const e=c.result;e.createObjectStore(tr,{keyPath:"modelPath"}),e.createObjectStore(gi,{keyPath:"modelPath"})}class or{constructor(e){if(this.indexedDB=tv(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,f){return new Promise((x,S)=>{const C=this.indexedDB.open(_l,th);C.onupgradeneeded=()=>eh(C),C.onsuccess=()=>{const o=C.result;if(f==null){const y=o.transaction(tr,"readonly"),s=y.objectStore(tr).get(this.modelPath);s.onsuccess=()=>{if(s.result==null)return o.close(),S(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));x(s.result.modelArtifacts)},s.onerror=l=>(o.close(),S(s.error)),y.oncomplete=()=>o.close()}else{f.weightData=ws.join(f.weightData);const y=ja(f),t=o.transaction(gi,"readwrite");let s=t.objectStore(gi),l;try{l=s.put({modelPath:this.modelPath,modelArtifactsInfo:y})}catch(r){return S(r)}let a;l.onsuccess=()=>{a=o.transaction(tr,"readwrite");const r=a.objectStore(tr);let i;try{i=r.put({modelPath:this.modelPath,modelArtifacts:f,modelArtifactsInfo:y})}catch(n){return S(n)}i.onsuccess=()=>x({modelArtifactsInfo:y}),i.onerror=n=>{s=t.objectStore(gi);const h=s.delete(this.modelPath);h.onsuccess=()=>(o.close(),S(i.error)),h.onerror=d=>(o.close(),S(i.error))}},l.onerror=r=>(o.close(),S(l.error)),t.oncomplete=()=>{a==null?o.close():a.oncomplete=()=>o.close()}}},C.onerror=o=>S(C.error)})}}or.URL_SCHEME="indexeddb://";const ev=c=>St().getBool("IS_BROWSER")&&!Array.isArray(c)&&c.startsWith(or.URL_SCHEME)?Hx(c.slice(or.URL_SCHEME.length)):null;Ye.registerSaveRouter(ev);Ye.registerLoadRouter(ev);function Hx(c){return new or(c)}function Yx(c){return c.startsWith(or.URL_SCHEME)?c.slice(or.URL_SCHEME.length):c}class Kx{constructor(){this.indexedDB=tv()}async listModels(){return new Promise((e,f)=>{const x=this.indexedDB.open(_l,th);x.onupgradeneeded=()=>eh(x),x.onsuccess=()=>{const S=x.result,C=S.transaction(gi,"readonly"),y=C.objectStore(gi).getAll();y.onsuccess=()=>{const t={};for(const s of y.result)t[s.modelPath]=s.modelArtifactsInfo;e(t)},y.onerror=t=>(S.close(),f(y.error)),C.oncomplete=()=>S.close()},x.onerror=S=>f(x.error)})}async removeModel(e){return e=Yx(e),new Promise((f,x)=>{const S=this.indexedDB.open(_l,th);S.onupgradeneeded=()=>eh(S),S.onsuccess=()=>{const C=S.result,o=C.transaction(gi,"readwrite"),y=o.objectStore(gi),t=y.get(e);let s;t.onsuccess=()=>{if(t.result==null)return C.close(),x(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const l=y.delete(e),a=()=>{s=C.transaction(tr,"readwrite");const i=s.objectStore(tr).delete(e);i.onsuccess=()=>f(t.result.modelArtifactsInfo),i.onerror=n=>x(t.error)};l.onsuccess=a,l.onerror=r=>(a(),C.close(),x(t.error))}},t.onerror=l=>(C.close(),x(t.error)),o.oncomplete=()=>{s==null?C.close():s.oncomplete=()=>C.close()}},S.onerror=C=>x(S.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xs="/",Lr="tensorflowjs_models",nv="info",jx="model_topology",Zx="weight_specs",Qx="weight_data",Jx="model_metadata";function sv(c){return{info:[Lr,c,nv].join(Xs),topology:[Lr,c,jx].join(Xs),weightSpecs:[Lr,c,Zx].join(Xs),weightData:[Lr,c,Qx].join(Xs),modelMetadata:[Lr,c,Jx].join(Xs)}}function iv(c){for(const e of Object.values(c))window.localStorage.removeItem(e)}function qx(c){const e=c.split(Xs);if(e.length<3)throw new Error(`Invalid key format: ${c}`);return e.slice(1,e.length-1).join(Xs)}function _x(c){return c.startsWith(ur.URL_SCHEME)?c.slice(ur.URL_SCHEME.length):c}class ur{constructor(e){if(!St().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=sv(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const f=JSON.stringify(e.modelTopology),x=JSON.stringify(e.weightSpecs),S=ja(e),C=ws.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(S)),this.LS.setItem(this.keys.topology,f),this.LS.setItem(this.keys.weightSpecs,x),this.LS.setItem(this.keys.weightData,Dx(C));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:S}}catch{throw iv(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${S.modelTopologyBytes}, weightSpecsBytes=${S.weightSpecsBytes}, weightDataBytes=${S.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const f={},x=JSON.parse(this.LS.getItem(this.keys.topology));if(x==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);f.modelTopology=x;const S=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(S==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);f.weightSpecs=S;const C=this.LS.getItem(this.keys.modelMetadata);if(C!=null){const y=JSON.parse(C);f.format=y.format,f.generatedBy=y.generatedBy,f.convertedBy=y.convertedBy,y.signature!=null&&(f.signature=y.signature),y.userDefinedMetadata!=null&&(f.userDefinedMetadata=y.userDefinedMetadata),y.modelInitializer!=null&&(f.modelInitializer=y.modelInitializer),y.initializerSignature!=null&&(f.initializerSignature=y.initializerSignature),y.trainingConfig!=null&&(f.trainingConfig=y.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return f.weightData=Lx(o),f}}ur.URL_SCHEME="localstorage://";const rv=c=>St().getBool("IS_BROWSER")&&!Array.isArray(c)&&c.startsWith(ur.URL_SCHEME)?ty(c.slice(ur.URL_SCHEME.length)):null;Ye.registerSaveRouter(rv);Ye.registerLoadRouter(rv);function ty(c){return new ur(c)}class ey{constructor(){it(St().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),it(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},f=Lr+Xs,x=Xs+nv;for(let S=0;S<this.LS.length;++S){const C=this.LS.key(S);if(C.startsWith(f)&&C.endsWith(x)){const o=qx(C);e[o]=JSON.parse(this.LS.getItem(C))}}return e}async removeModel(e){e=_x(e);const f=sv(e);if(this.LS.getItem(f.info)==null)throw new Error(`Cannot find model at path '${e}'`);const x=JSON.parse(this.LS.getItem(f.info));return iv(f),x}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zr="://";class Cn{constructor(){this.managers={}}static getInstance(){return Cn.instance==null&&(Cn.instance=new Cn),Cn.instance}static registerManager(e,f){it(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(zr)&&(e=e.slice(0,e.indexOf(zr))),it(e.length>0,()=>"scheme must not be an empty string.");const x=Cn.getInstance();it(x.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),x.managers[e]=f}static getManager(e){const f=Cn.getInstance().managers[e];if(f==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return f}static getSchemes(){return Object.keys(Cn.getInstance().managers)}}function So(c){if(c.indexOf(zr)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Cn.getSchemes().join(",")}`);return{scheme:c.split(zr)[0],path:c.split(zr)[1]}}async function av(c,e,f=!1){it(c!==e,()=>`Old path and new path are the same: '${c}'`);const x=Ye.getLoadHandlers(c);it(x.length>0,()=>`Copying failed because no load handler is found for source URL ${c}.`),it(x.length<2,()=>`Copying failed because more than one (${x.length}) load handlers for source URL ${c}.`);const S=x[0],C=Ye.getSaveHandlers(e);it(C.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),it(C.length<2,()=>`Copying failed because more than one (${x.length}) save handlers for destination URL ${e}.`);const o=C[0],y=So(c).scheme,t=So(c).path,s=y===So(c).scheme,l=await S.load();f&&s&&await Cn.getManager(y).removeModel(t);const a=await o.save(l);return f&&!s&&await Cn.getManager(y).removeModel(t),a.modelArtifactsInfo}async function ny(){const c=Cn.getSchemes(),e={};for(const f of c){const x=await Cn.getManager(f).listModels();for(const S in x){const C=f+zr+S;e[C]=x[S]}}return e}async function sy(c){const e=So(c);return Cn.getManager(e.scheme).removeModel(e.path)}async function iy(c,e){return av(c,e,!1)}async function ry(c,e){return av(c,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ay{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,f){return fetch(e,f)}now(){return performance.now()}encode(e,f){if(f!=="utf-8"&&f!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${f}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,f){return new TextDecoder(f).decode(e)}setTimeoutCustom(e,f){if(typeof window>"u"||!St().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,f);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},f),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",x=>{if(x.source===window&&x.data.name===this.messageName){x.stopPropagation();const S=this.functionRefs[x.data.index];S(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return Fm(e)}}if(St().get("IS_BROWSER")){St().setPlatform("browser",new ay);try{Cn.registerManager(ur.URL_SCHEME,new ey)}catch{}try{Cn.registerManager(or.URL_SCHEME,new Kx)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oy={importFetch:()=>require("node-fetch")};let Sl;class uy{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,f){return St().global.fetch!=null?St().global.fetch(e,f):(Sl==null&&(Sl=oy.importFetch()),Sl(e,f))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,f){if(f!=="utf-8"&&f!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${f}`);return this.textEncoder.encode(e)}decode(e,f){return e.length===0?"":new this.util.TextDecoder(f).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}St().get("IS_NODE")&&!St().get("IS_BROWSER")&&St().setPlatform("node",new uy);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ze(c,e="float32",f){return e=e||"float32",Zn(c),new Zr(c,e,f)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ly(c,e){const f=st(c,"x","cast");if(!H2(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&f.dtype!=="string"||e!=="string"&&f.dtype==="string")throw new Error("Only strings can be casted to strings");const x={x:f},S={dtype:e};return pt.runKernel(su,x,S)}const We=ct({cast_:ly});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hy(c){const f={x:st(c,"x","clone","string_or_numeric")};return pt.runKernel(xu,f)}const Ti=ct({clone_:hy});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ov(c,e=!1){console.log(c.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Hm();const fy={buffer:Ze,cast:We,clone:Ti,print:ov};Ex(fy);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zs(){return pt}function de(c,e){return pt.tidy(c,e)}function Ke(c){Wm(c).forEach(f=>f.dispose())}function Is(c){return pt.keep(c)}function uv(c,e,f=1){return pt.registerBackend(c,e,f)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cy(c,e){let f=st(c,"a","add"),x=st(e,"b","add");[f,x]=qe(f,x);const S={a:f,b:x};return pt.runKernel(Qo,S)}const ne=ct({add_:cy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dy(c,e){let f=st(c,"a","floorDiv"),x=st(e,"b","floorDiv");[f,x]=qe(f,x);const S={a:f,b:x};return pt.runKernel(mf,S)}const lv=ct({floorDiv_:dy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function py(c,e){let f=st(c,"a","div"),x=st(e,"b","div");if([f,x]=qe(f,x),f.dtype==="int32"&&x.dtype==="int32")return lv(f,x);const S={a:f,b:x},C={};return pt.runKernel(rf,S,C)}const ye=ct({div_:py});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function my(c,e){let f=st(c,"a","mul"),x=st(e,"b","mul");[f,x]=qe(f,x);const S={a:f,b:x};return pt.runKernel(Lf,S)}const Wt=ct({mul_:my});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vy(c){const e=st(c,"x","abs");if(e.dtype==="complex64"){const f={x:e};return pt.runKernel(lm,f)}else{const f={x:e};return pt.runKernel($h,f)}}const Xn=ct({abs_:vy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gy(c){const f={x:st(c,"x","acos")};return pt.runKernel(Gh,f)}const xy=ct({acos_:gy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yy(c){const f={x:st(c,"x","acosh")};return pt.runKernel(Uh,f)}const Ty=ct({acosh_:yy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sy(c){it(Array.isArray(c),()=>"The argument passed to tf.addN() must be a list of tensors"),it(c.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${c.length}`);const e=c.map((S,C)=>st(S,`tensors${C}`,"addN")),f=e[0];e.forEach(S=>{if(S.dtype!==f.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(S=>{if(!je(S.shape,f.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const x=e;return pt.runKernel(Jo,x)}const Cy=ct({addN_:Sy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ey(c,e=null,f=!1){const S={x:st(c,"x","all","bool")},C={axis:e,keepDims:f};return pt.runKernel(qo,S,C)}const wy=ct({all_:Ey});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function by(c,e=null,f=!1){const S={x:st(c,"x","any","bool")},C={axis:e,keepDims:f};return pt.runKernel(_o,S,C)}const Ay=ct({any_:by});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ry(c,e=0){const x={x:st(c,"x","argMax")},S={axis:e};return pt.runKernel(Vh,x,S)}const Iy=ct({argMax_:Ry});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Py(c,e=0){const x={x:st(c,"x","argMin")},S={axis:e};return pt.runKernel(zh,x,S)}const Fy=ct({argMin_:Py});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ny(c){const f={x:st(c,"x","asin")};return pt.runKernel(kh,f)}const My=ct({asin_:Ny});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oy(c){const f={x:st(c,"x","asinh")};return pt.runKernel(Wh,f)}const Dy=ct({asinh_:Oy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ly(c){const f={x:st(c,"x","atan")};return pt.runKernel(Xh,f)}const By=ct({atan_:Ly});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $y(c,e){let f=st(c,"a","atan2"),x=st(e,"b","atan2");[f,x]=qe(f,x);const S={a:f,b:x};return pt.runKernel(Yh,S)}const Gy=ct({atan2_:$y});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uy(c){const f={x:st(c,"x","atanh")};return pt.runKernel(Hh,f)}const Vy=ct({atanh_:Uy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Za(c,e,f,x,S="NHWC",C){const o=c[3],y=[...e,o],t=Mi(S);return dn(c,y,f,C,x,null,null,t)}function hs(c,e,f,x,S,C,o="channelsLast"){const[y,t]=Oa(e);let s;if(o==="channelsLast")s=[y,t,c[3],c[3]];else if(o==="channelsFirst")s=[y,t,c[1],c[1]];else throw new Error(`Unknown dataFormat ${o}`);return dn(c,s,f,x,S,C,!1,o)}function _s(c,e,f,x,S,C,o="NDHWC"){const[y,t,s]=nh(e);let l,a;if(o==="NDHWC")a="channelsLast",l=[y,t,s,c[4],c[4]];else if(o==="NCDHW")a="channelsFirst",l=[y,t,s,c[1],c[1]];else throw new Error(`Unknown dataFormat ${o}`);return Ni(c,l,f,x,S,!1,a,C)}function dn(c,e,f,x,S,C,o=!1,y="channelsLast"){let[t,s,l,a]=[-1,-1,-1,-1];if(y==="channelsLast")[t,s,l,a]=c;else if(y==="channelsFirst")[t,a,s,l]=c;else throw new Error(`Unknown dataFormat ${y}`);const[r,i,,n]=e,[h,d]=Oa(f),[u,p]=Oa(x),m=kr(r,u),v=kr(i,p),{padInfo:g,outHeight:T,outWidth:w}=Wy(S,s,l,h,d,m,v,C,y),b=o?n*a:n;let E;return y==="channelsFirst"?E=[t,b,T,w]:y==="channelsLast"&&(E=[t,T,w,b]),{batchSize:t,dataFormat:y,inHeight:s,inWidth:l,inChannels:a,outHeight:T,outWidth:w,outChannels:b,padInfo:g,strideHeight:h,strideWidth:d,filterHeight:r,filterWidth:i,effectiveFilterHeight:m,effectiveFilterWidth:v,dilationHeight:u,dilationWidth:p,inShape:c,outShape:E,filterShape:e}}function Ni(c,e,f,x,S,C=!1,o="channelsLast",y){let[t,s,l,a,r]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[t,s,l,a,r]=c;else if(o==="channelsFirst")[t,r,s,l,a]=c;else throw new Error(`Unknown dataFormat ${o}`);const[i,n,h,,d]=e,[u,p,m]=nh(f),[v,g,T]=nh(x),w=kr(i,v),b=kr(n,g),E=kr(h,T),{padInfo:A,outDepth:R,outHeight:I,outWidth:P}=Xy(S,s,l,a,u,p,m,w,b,E,y),N=C?d*r:d;let F;return o==="channelsFirst"?F=[t,N,R,I,P]:o==="channelsLast"&&(F=[t,R,I,P,N]),{batchSize:t,dataFormat:o,inDepth:s,inHeight:l,inWidth:a,inChannels:r,outDepth:R,outHeight:I,outWidth:P,outChannels:N,padInfo:A,strideDepth:u,strideHeight:p,strideWidth:m,filterDepth:i,filterHeight:n,filterWidth:h,effectiveFilterDepth:w,effectiveFilterHeight:b,effectiveFilterWidth:E,dilationDepth:v,dilationHeight:g,dilationWidth:T,inShape:c,outShape:F,filterShape:e}}function zy(c,e,f,x,S){x==null&&(x=wc(c,e,f));const C=c[0],o=c[1],y=Da((C-e+2*x)/f+1,S),t=Da((o-e+2*x)/f+1,S);return[y,t]}function ky(c,e,f,x,S,C){S==null&&(S=wc(c,e[0],x[0]));const o=[0,0,0,f];for(let y=0;y<3;y++)c[y]+2*S>=e[y]&&(o[y]=Da((c[y]-e[y]+2*S)/x[y]+1,C));return o}function wc(c,e,f,x=1){const S=kr(e,x);return Math.floor((c[0]*(f-1)-f+S)/2)}function Oa(c){return typeof c=="number"?[c,c,c]:c.length===2?[c[0],c[1],1]:c}function nh(c){return typeof c=="number"?[c,c,c]:c}function kr(c,e){return e<=1?c:c+(c-1)*(e-1)}function Wy(c,e,f,x,S,C,o,y,t){let s,l,a;if(typeof c=="number"){s={top:c,bottom:c,left:c,right:c,type:c===0?"VALID":"NUMBER"};const i=zy([e,f],C,x,c,y);l=i[0],a=i[1]}else if(c==="same"){l=Math.ceil(e/x),a=Math.ceil(f/S);const r=Math.max(0,(l-1)*x+C-e),i=Math.max(0,(a-1)*S+o-f),n=Math.floor(r/2),h=r-n,d=Math.floor(i/2),u=i-d;s={top:n,bottom:h,left:d,right:u,type:"SAME"}}else if(c==="valid")s={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-C+1)/x),a=Math.ceil((f-o+1)/S);else if(typeof c=="object"){const r=t==="channelsLast"?c[1][0]:c[2][0],i=t==="channelsLast"?c[1][1]:c[2][1],n=t==="channelsLast"?c[2][0]:c[3][0],h=t==="channelsLast"?c[2][1]:c[3][1];s={top:r,bottom:i,left:n,right:h,type:r===0&&i===0&&n===0&&h===0?"VALID":"EXPLICIT"},l=Da((e-C+r+i)/x+1,y),a=Da((f-o+n+h)/S+1,y)}else throw Error(`Unknown padding parameter: ${c}`);return{padInfo:s,outHeight:l,outWidth:a}}function Xy(c,e,f,x,S,C,o,y,t,s,l){let a,r,i,n;if(c==="valid"&&(c=0),typeof c=="number"){a={top:c,bottom:c,left:c,right:c,front:c,back:c,type:c===0?"VALID":"NUMBER"};const d=ky([e,f,x,1],[y,t,s],1,[S,C,o],c,l);r=d[0],i=d[1],n=d[2]}else if(c==="same"){r=Math.ceil(e/S),i=Math.ceil(f/C),n=Math.ceil(x/o);const h=(r-1)*S+y-e,d=(i-1)*C+t-f,u=(n-1)*o+s-x,p=Math.floor(h/2),m=h-p,v=Math.floor(d/2),g=d-v,T=Math.floor(u/2),w=u-T;a={top:v,bottom:g,left:T,right:w,front:p,back:m,type:"SAME"}}else throw Error(`Unknown padding parameter: ${c}`);return{padInfo:a,outDepth:r,outHeight:i,outWidth:n}}function Da(c,e){if(!e)return Math.trunc(c);switch(e){case"round":return Math.round(c);case"ceil":return Math.ceil(c);case"floor":return Math.floor(c);default:throw new Error(`Unknown roundingMode ${e}`)}}function La(c){const[e,f,x]=Oa(c);return e===1&&f===1&&x===1}function Dn(c,e){return La(c)||La(e)}function lr(c){return Oa(c).every(e=>e>0)}function Mi(c){if(c==="NHWC")return"channelsLast";if(c==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${c}`)}function fs(c,e,f){if(f!=null){if(typeof e=="string")throw Error(`Error in ${c}: pad must be an integer when using dimRoundingMode ${f} but got pad ${e}.`);if(typeof e=="number")it(Hr(e),()=>`Error in ${c}: pad must be an integer when using dimRoundingMode ${f} but got pad ${e}.`);else if(typeof e=="object")e.forEach(x=>{x.forEach(S=>{it(Hr(S),()=>`Error in ${c}: pad must be an integer when using dimRoundingMode ${f} but got pad ${S}.`)})});else throw Error(`Error in ${c}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hy(c,e){const x={x:st(c,"x","reshape","string_or_numeric")},S={shape:e};return pt.runKernel(Xf,x,S)}const Nt=ct({reshape_:Hy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yy(c,e,f,x,S){const C=st(c,"x","avgPool","float32"),o=1;it(Dn(f,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${f} and dilations '${o}'`);let y=C,t=!1;C.rank===3&&(t=!0,y=Nt(C,[1,C.shape[0],C.shape[1],C.shape[2]])),it(y.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${y.rank}.`),fs("avgPool",x,S);const s={x:y},l={filterSize:e,strides:f,pad:x,dimRoundingMode:S};let a=pt.runKernel(tu,s,l);return a=We(a,C.dtype),t?Nt(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const hv=ct({avgPool_:Yy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ky(c,e,f,x,S,C="NDHWC"){const o=st(c,"x","avgPool3d","float32");let y=o,t=!1;o.rank===4&&(t=!0,y=Nt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),it(y.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${y.rank}.`),it(C==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${C}`),it(typeof f=="number"&&f>0||Array.isArray(f)&&f[0]>0&&f[1]>0&&f[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${f}'`),fs("avgPool3d",x,S);const s={x:y},l={filterSize:e,strides:f,pad:x,dimRoundingMode:S,dataFormat:C};let a=pt.runKernel(Kh,s,l);return a=We(a,y.dtype),t?Nt(a,[a.shape[1],a.shape[2],a.shape[3],a.shape[4]]):a}const jy=ct({avgPool3d_:Ky});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zy(c,e=0){it(c.length>=1,()=>"Pass at least one tensor to concat");const f=No(c,"tensors","concat","string_or_numeric");if(f[0].dtype==="complex64"&&f.forEach(C=>{if(C.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${C.dtype}. `)}),f.length===1)return Ti(f[0]);const x=f,S={axis:e};return pt.runKernel(qh,x,S)}const cn=ct({concat_:Zy});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qy(c,e,f=!1,x=!1){let S=st(c,"a","matMul"),C=st(e,"b","matMul");[S,C]=qe(S,C);const o={a:S,b:C},y={transposeA:f,transposeB:x};return pt.runKernel(eu,o,y)}const Oe=ct({matMul_:Qy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jy(c){const f={x:st(c,"x","sigmoid","float32")};return pt.runKernel(nc,f)}const ir=ct({sigmoid_:Jy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qy(c,e,f){const x=st(c,"x","slice","string_or_numeric");if(x.rank===0)throw new Error("Slicing scalar is not possible");const S={x},C={begin:e,size:f};return pt.runKernel(qf,S,C)}const me=ct({slice_:qy});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _y(c){const f={x:st(c,"x","tanh","float32")};return pt.runKernel(vc,f)}const sh=ct({tanh_:_y});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3(c,e,f,x,S,C){const o=st(c,"forgetBias","basicLSTMCell"),y=st(e,"lstmKernel","basicLSTMCell"),t=st(f,"lstmBias","basicLSTMCell"),s=st(x,"data","basicLSTMCell"),l=st(S,"c","basicLSTMCell"),a=st(C,"h","basicLSTMCell"),r=cn([s,a],1),i=Oe(r,y),n=ne(i,t),h=n.shape[0],d=n.shape[1]/4,u=[h,d],p=me(n,[0,0],u),m=me(n,[0,d],u),v=me(n,[0,d*2],u),g=me(n,[0,d*3],u),T=ne(Wt(ir(p),sh(m)),Wt(l,ir(ne(o,v)))),w=Wt(sh(T),ir(g));return[T,w]}const e3=ct({basicLSTMCell_:t3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3(c,e,f){const x=st(c,"x","batchToSpaceND"),S=e.reduce((y,t)=>y*t);it(x.rank>=1+e.length,()=>`input rank is ${x.rank} but should be > than blockShape.length ${e.length}`),it(f.length===e.length,()=>`crops.length is ${f.length} but should be equal to blockShape.length  ${e.length}`),it(x.shape[0]%S===0,()=>`input tensor batch is ${x.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${S}`);const C={x},o={blockShape:e,crops:f};return pt.runKernel(jh,C,o)}const fv=ct({batchToSpaceND_:n3});function s3(c){let e;return c.rank===0||c.rank===1?e=Nt(c,[1,1,1,c.size]):c.rank===2?e=Nt(c,[1,1,c.shape[0],c.shape[1]]):c.rank===3?e=Nt(c,[1,c.shape[0],c.shape[1],c.shape[2]]):e=c,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i3(c,e,f,x,S,C){C==null&&(C=.001);const o=st(c,"x","batchNorm"),y=st(e,"mean","batchNorm"),t=st(f,"variance","batchNorm");let s;S!=null&&(s=st(S,"scale","batchNorm"));let l;x!=null&&(l=st(x,"offset","batchNorm")),it(y.rank===t.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),it(l==null||y.rank===l.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),it(s==null||y.rank===s.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const r={x:s3(o),scale:s,offset:l,mean:y,variance:t},i={varianceEpsilon:C},n=pt.runKernel(vu,r,i);return Nt(n,o.shape)}const qu=ct({batchNorm_:i3});function r3(c,e,f,x,S,C){const o=st(c,"x","batchNorm"),y=st(e,"mean","batchNorm"),t=st(f,"variance","batchNorm");let s;S!=null&&(s=st(S,"scale","batchNorm"));let l;return x!=null&&(l=st(x,"offset","batchNorm")),it(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),it(y.rank===2||y.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${y.rank}.`),it(t.rank===2||t.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${t.rank}.`),s!=null&&it(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${s.rank}.`),l!=null&&it(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${l.rank}.`),qu(o,y,t,l,s,C)}const a3=ct({batchNorm2d_:r3});function o3(c,e,f,x,S,C){const o=st(c,"x","batchNorm"),y=st(e,"mean","batchNorm"),t=st(f,"variance","batchNorm");let s;S!=null&&(s=st(S,"scale","batchNorm"));let l;return x!=null&&(l=st(x,"offset","batchNorm")),it(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),it(y.rank===3||y.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${y.rank}.`),it(t.rank===3||t.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${t.rank}.`),s!=null&&it(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${s.rank}.`),l!=null&&it(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${l.rank}.`),qu(o,y,t,l,s,C)}const u3=ct({batchNorm3d_:o3});function l3(c,e,f,x,S,C){const o=st(c,"x","batchNorm"),y=st(e,"mean","batchNorm"),t=st(f,"variance","batchNorm");let s;S!=null&&(s=st(S,"scale","batchNorm"));let l;return x!=null&&(l=st(x,"offset","batchNorm")),it(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),it(y.rank===4||y.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${y.rank}.`),it(t.rank===4||t.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${t.rank}.`),s!=null&&it(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${s.rank}.`),l!=null&&it(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${l.rank}.`),qu(o,y,t,l,s,C)}const h3=ct({batchNorm4d_:l3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3(c,e,f){const x=st(c,"x","bincount"),S=st(e,"weights","bincount");it(x.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${x.dtype}`),it(f>=0,()=>`size must be non-negative, but got ${f}.`),it(S.size===x.size||S.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${x.shape}, weights shape: ${S.shape}.`);const C={x,weights:S},o={size:f};return pt.runKernel(nu,C,o)}const cv=ct({bincount_:f3});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3(c,e){const f=st(c,"x","bitwiseAnd"),x=st(e,"y","bitwiseAnd");if(!je(f.shape,x.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${f.shape}, y: ${x.shape}`);if(f.dtype!=="int32"||x.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${f.dtype} and type of y: ${x.dtype}`);const S={a:f,b:x};return pt.runKernel(Zh,S)}const d3=ct({bitwiseAnd_:c3});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3(c,e){const f=st(c,"s0","broadcastArgs","int32"),x=st(e,"s1","broadcastArgs","int32");if(f.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${f.rank}`);if(x.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${x.rank}`);const S={s0:f,s1:x};return pt.runKernel(Qh,S)}const m3=ct({broadcastArgs_:p3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3(c,e){let f=st(c,"broadcastTo","x");const x=f.shape;if(Zn(e),e.length<f.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${f.rank}.`);if(e.length>f.rank){const s=f.shape.slice();for(;s.length<e.length;)s.unshift(1);f=Nt(f,s)}const S=f.shape,C=Array.from(e);for(let s=e.length-1;s>=0;s--)if(S[s]===e[s])C[s]=1;else if(f.shape[s]!==1)throw new Error(`broadcastTo(): [${x}] cannot be broadcast to [${e}].`);if(C.map((s,l)=>s>1?l:-1).filter(s=>s>=0).length===0)return Ti(f);const y={x:f},t={reps:C};return pt.runKernel(Ka,y,t)}const ba=ct({broadcastTo_:v3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3(c){const f={x:st(c,"x","ceil","float32")};return pt.runKernel(Jh,f)}const x3=ct({ceil_:g3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qa(c,e,f){Zn(c),f=f||ea(e);const x={shape:c,value:e,dtype:f};return pt.runKernel(df,{},x)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3(c,e,f){const x=st(c,"x","clipByValue");if(it(e<=f,()=>`Error in clip: min (${e}) must be less than or equal to max (${f}).`),e===f)return Qa(x.shape,e,x.dtype);const S={x},C={clipValueMin:e,clipValueMax:f};return pt.runKernel(iu,S,C)}const dv=ct({clipByValue_:y3});function T3(c){return cn(c,0)}const S3=ct({concat1d_:T3});function C3(c,e){return cn(c,e)}const E3=ct({concat2d_:C3});function w3(c,e){return cn(c,e)}const b3=ct({concat3d_:w3});function A3(c,e){return cn(c,e)}const R3=ct({concat4d_:A3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3(c,e,f,x,S="NHWC",C=[1,1],o){const y=st(c,"x","conv2d","float32"),t=st(e,"filter","conv2d","float32");let s=y,l=!1;y.rank===3&&(l=!0,s=Nt(y,[1,y.shape[0],y.shape[1],y.shape[2]])),it(s.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${s.rank}.`),it(t.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${t.rank}.`),fs("conv2d",x,o);const a=S==="NHWC"?s.shape[3]:s.shape[1];it(a===t.shape[2],()=>`Error in conv2d: depth of input (${a}) must match input depth for filter ${t.shape[2]}.`),it(Dn(f,C),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${f} and dilations '${C}'`),it(lr(C),()=>"Error in conv2D: Dilated rates should be larger than 0."),it(lr(f),()=>"Error in conv2D: Strides should be larger than 0.");const r={x:s,filter:t},i={strides:f,pad:x,dataFormat:S,dilations:C,dimRoundingMode:o},n=pt.runKernel(ru,r,i);return l?Nt(n,[n.shape[1],n.shape[2],n.shape[3]]):n}const _u=ct({conv2d_:I3});function P3(c,e,f,x,S="NWC",C=1,o){const y=st(c,"x","conv1d"),t=st(e,"filter","conv1d");let s=y,l=!1;y.rank===2&&(l=!0,s=Nt(y,[1,y.shape[0],y.shape[1]])),it(s.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${s.rank}.`),it(t.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${t.rank}.`),fs("conv1d",x,o),it(s.shape[2]===t.shape[1],()=>`Error in conv1d: depth of input (${s.shape[2]}) must match input depth for filter ${t.shape[1]}.`),it(Dn(f,C),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${f} and dilation '${C}'`),it(lr(C),()=>"Error in conv1D: Dilated rates should be larger than 0."),it(lr(f),()=>"Error in conv1D: Stride should be larger than 0."),it(S==="NWC",()=>`Error in conv1d: got dataFormat of ${S} but only NWC is currently supported.`);const a=Nt(t,[1,t.shape[0],t.shape[1],t.shape[2]]),r=Nt(s,[s.shape[0],1,s.shape[1],s.shape[2]]),d=_u(r,a,[1,f],x,"NHWC",[1,C],o);return l?Nt(d,[d.shape[2],d.shape[3]]):Nt(d,[d.shape[0],d.shape[2],d.shape[3]])}const F3=ct({conv1d_:P3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3(c,e,f,x,S,C="NHWC",o){it(c.length===e.rank,()=>`Length of inShape (${c.length}) and rank of dy (${e.rank}) must match`);let y=c,t=e,s=!1;e.rank===3&&(s=!0,t=Nt(e,[1,e.shape[0],e.shape[1],e.shape[2]]),y=[1,c[0],c[1],c[2]]),it(y.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${y.length}.`),it(t.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${t.rank}`),it(f.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${f.rank}`);const l=C==="NHWC"?y[3]:y[1],a=C==="NHWC"?t.shape[3]:t.shape[1];it(l===f.shape[2],()=>`Error in conv2dDerInput: depth of input (${l}) must match input depth for filter ${f.shape[2]}.`),it(a===f.shape[3],()=>`Error in conv2dDerInput: depth of output (${a}) must match output depth for filter ${f.shape[3]}.`),fs("conv2dDerInput",S,o);const r={dy:t,filter:f},i={strides:x,pad:S,dataFormat:C,dimRoundingMode:o,inputShape:y},n=pt.runKernel(au,r,i);return s?Nt(n,[n.shape[1],n.shape[2],n.shape[3]]):n}const pv=ct({conv2DBackpropInput_:N3});function M3(c,e,f,x,S,C){const o=st(c,"x","conv2dTranspose"),y=st(e,"filter","conv2dTranspose");return pv(f,o,y,x,S,"NHWC",C)}const O3=ct({conv2dTranspose_:M3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3(c,e,f,x,S="NDHWC",C=[1,1,1]){const o=st(c,"x","conv3d"),y=st(e,"filter","conv3d");let t=o,s=!1;o.rank===4&&(s=!0,t=Nt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),it(t.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${t.rank}.`),it(y.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${y.rank}.`),it(t.shape[4]===y.shape[3],()=>`Error in conv3d: depth of input (${t.shape[4]}) must match input depth for filter ${y.shape[3]}.`),it(Dn(f,C),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${f} and dilations '${C}'`),it(S==="NDHWC",()=>`Error in conv3d: got dataFormat of ${S} but only NDHWC is currently supported.`),it(lr(C),()=>"Error in conv3D: Dilated rates should be larger than 0."),it(lr(f),()=>"Error in conv3D: Strides should be larger than 0.");const l={x:t,filter:y},a={strides:f,pad:x,dataFormat:S,dilations:C},r=pt.runKernel(ou,l,a);return s?Nt(r,[r.shape[1],r.shape[2],r.shape[3],r.shape[4]]):r}const L3=ct({conv3d_:D3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3(c,e,f,x,S){it(c.length===e.rank,()=>`Length of inShape (${c.length}) and rank of dy (${e.rank}) must match`);let C=c,o=e,y=!1;e.rank===4&&(y=!0,o=Nt(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),C=[1,c[0],c[1],c[2],c[3]]);const t=C[4],s=o.shape[4];it(C.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${C.length}.`),it(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),it(f.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${f.rank}`),it(t===f.shape[3],()=>`Error in conv3dDerInput: depth of input (${t}) must match input depth for filter ${f.shape[3]}.`),it(s===f.shape[4],()=>`Error in conv3dDerInput: depth of output (${s}) must match output depth for filter ${f.shape[4]}.`);const l={dy:o,filter:f},a={pad:S,strides:x,inputShape:C},r=pt.runKernel(uu,l,a);return y?Nt(r,[r.shape[1],r.shape[2],r.shape[3],r.shape[4]]):r}const $3=ct({conv3DBackpropInput_:B3});function G3(c,e,f,x,S){const C=st(c,"x","conv3dTranspose"),o=st(e,"filter","conv3dTranspose");return $3(f,C,o,x,S)}const U3=ct({conv3dTranspose_:G3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3(c){const f={x:st(c,"x","cos","float32")};return pt.runKernel(tf,f)}const z3=ct({cos_:V3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k3(c){const f={x:st(c,"x","cosh","float32")};return pt.runKernel(ef,f)}const W3=ct({cosh_:k3});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3(c,e=0,f=!1,x=!1){const C={x:st(c,"x","cumprod")},o={axis:e,exclusive:f,reverse:x};return pt.runKernel(lu,C,o)}const H3=ct({cumprod_:X3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y3(c,e=0,f=!1,x=!1){const C={x:st(c,"x","cumsum")},o={axis:e,exclusive:f,reverse:x};return pt.runKernel(hu,C,o)}const K3=ct({cumsum_:Y3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3(c,e,f,x=!1){const S=st(c,"x","denseBincount"),C=st(e,"weights","denseBincount");it(S.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${S.dtype}`),it(S.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${S.rank}.`),it(f>=0,()=>`size must be non-negative, but got ${f}.`),it(C.size===S.size||C.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${S.shape}, weights shape: ${C.shape}.`);const o={x:S,weights:C},y={size:f,binaryOutput:x};return pt.runKernel(nf,o,y)}const Z3=ct({denseBincount_:j3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q3(c,e,f="NHWC"){const x=st(c,"x","depthToSpace","float32"),S=f==="NHWC"?x.shape[1]:x.shape[2],C=f==="NHWC"?x.shape[2]:x.shape[3],o=f==="NHWC"?x.shape[3]:x.shape[1];it(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),it(S*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${S} and ${e}  for depthToSpace with input shape
    ${x.shape}`),it(C*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${C} and ${e} for depthToSpace with input shape
        ${x.shape}`),it(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${x.shape}`);const y={x},t={blockSize:e,dataFormat:f};return pt.runKernel(cu,y,t)}const J3=ct({depthToSpace_:Q3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q3(c,e,f,x,S="NHWC",C=[1,1],o){const y=st(c,"x","depthwiseConv2d","float32"),t=st(e,"filter","depthwiseConv2d","float32");let s=y,l=!1;y.rank===3&&(l=!0,s=Nt(y,[1,y.shape[0],y.shape[1],y.shape[2]])),it(s.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${s.rank}.`),it(t.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${t.rank}.`);const a=S==="NHWC"?s.shape[3]:s.shape[1];it(a===t.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${a}) must match the inChannels dimension in filter ${t.shape[2]}.`),fs("depthwiseConv2d",x,o);const r={x:s,filter:t},i={strides:f,pad:x,dataFormat:S,dilations:C,dimRoundingMode:o},n=pt.runKernel(du,r,i);return l?Nt(n,[n.shape[1],n.shape[2],n.shape[3]]):n}const bc=ct({depthwiseConv2d_:q3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3(c){const f={x:st(c,"x","diag")};return pt.runKernel(sf,f)}const tT=ct({diag_:_3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(c,e,f,x,S=[1,1],C="NHWC"){const o=st(c,"x","dilation2d"),y=st(e,"filter","dilation2d");it(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),it(y.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${y.rank}.`),it(C==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${C}`);let t=o,s=!1;o.rank===3&&(t=Nt(o,[1,o.shape[0],o.shape[1],o.shape[2]]),s=!0),it(t.shape[3]===y.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${t.shape[3]} vs ${y.shape[2]}`);const l={x:t,filter:y},a={strides:f,pad:x,dilations:S},r=pt.runKernel(pu,l,a);return s?Nt(r,[r.shape[1],r.shape[2],r.shape[3]]):r}const nT=ct({dilation2d_:eT});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oo(c,e){const f=c.length,x=[];for(let S=0;S<f;S++){const C=f-1-S,o=c[C]||1;(e[e.length-1-S]||1)>1&&o===1&&x.unshift(C)}return x}function mv(c,e){const f=[];for(let x=0;x<e.length;x++){const S=c[c.length-x-1],C=e.length-x-1,o=e[C];(S==null||S===1&&o>1)&&f.unshift(C)}return f}function Te(c,e){const f=Math.max(c.length,e.length),x=new Array(f);for(let S=0;S<f;S++){let C=c[c.length-S-1];C==null&&(C=1);let o=e[e.length-S-1];if(o==null&&(o=1),C===1)x[f-S-1]=o;else if(o===1)x[f-S-1]=C;else if(C!==o){const y=`Operands could not be broadcast together with shapes ${c} and ${e}.`;throw Error(y)}else x[f-S-1]=C}return x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sT(c,e){let f=st(c,"a","equal","string_or_numeric"),x=st(e,"b","equal","string_or_numeric");[f,x]=qe(f,x),Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel(lf,S)}const vv=ct({equal_:sT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iT(c,e,f){const x=st(e,"a","where"),S=st(f,"b","where"),C=st(c,"condition","where","bool"),o=Te(Te(C.shape,x.shape),S.shape),y=ba(C,o),t=ba(x,o),s=ba(S,o),l={condition:y,t,e:s};return pt.runKernel(Qf,l)}const Si=ct({where_:iT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rT(c){const f={x:st(c,"x","zerosLike")};return pt.runKernel(yc,f)}const jn=ct({zerosLike_:rT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aT(c,e){let f=st(c,"a","div"),x=st(e,"b","div");[f,x]=qe(f,x);const S=ye(f,x),C=jn(S),o=vv(x,C);return Si(o,C,S)}const oT=ct({divNoNan_:aT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uT(c,e){const f=st(c,"t1","dot"),x=st(e,"t2","dot");it((f.rank===1||f.rank===2)&&(x.rank===1||x.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${f.rank} and ${x.rank}.`);const S=f.rank===1?f.size:f.shape[1],C=x.rank===1?x.size:x.shape[0];if(it(S===C,()=>`Error in dot: inner dimensions of inputs must match, but got ${S} and ${C}.`),f.rank===1&&x.rank===1){const o=Nt(f,[1,-1]),y=Nt(x,[-1,1]),t=Oe(o,y);return Nt(t,[])}else if(f.rank===1&&x.rank===2){const o=Nt(f,[1,-1]),y=Nt(x,[x.shape[0],x.shape[1]]),t=Oe(o,y);return Nt(t,[t.size])}else if(f.rank===2&&x.rank===1){const o=Nt(x,[-1,1]),y=Oe(f,o);return Nt(y,[y.size])}else{const o=Nt(x,[x.shape[0],x.shape[1]]);return Oe(f,o)}}const lT=ct({dot_:uT});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hT(c,...e){const f=e.map((S,C)=>st(S,`tensors${C}`,"einsum")),x={equation:c};return pt.runKernel(mm,f,x)}const Br=ct({einsum_:hT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fT(c){const f={x:st(c,"x","elu","float32")};return pt.runKernel(af,f)}const gv=ct({elu_:fT});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cT(c,e){const f=st(c,"x","ensureShape","string_or_numeric");if(!W2(f.shape,e))throw new Error(`EnsureShape: Shape of tensor ${f.shape} is not compatible with expected shape ${e}`);return c}const dT=ct({ensureShape_:cT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pT(c){let e=st(c,"x","erf");it(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=We(e,"float32"));const f={x:e};return pt.runKernel(uf,f)}const mT=ct({erf_:pT});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ac(c,e){for(let f=0;f<c.length;++f)if(c[c.length-f-1]!==e-1-f)return!1;return!0}function xv(c,e,f){const x=c.length+e.length,S=[];let C=0,o=0;for(let y=0;y<x;y++)f.indexOf(y)===-1?S.push(c[C++]):S.push(e[o++]);return S}function yn(c,e){const f=[],x=c.length;for(let C=0;C<x;C++)e.indexOf(C)===-1&&f.push(c[C]);const S=e.map(C=>c[C]);return[f,S]}function rn(c,e){const f=e.map(x=>1);return xv(c,f,e)}function an(c,e,f){it(Ac(e,f),()=>`${c} supports only inner-most axes for now. Got axes ${e} and rank-${f} input.`)}function Ln(c,e){if(Ac(c,e))return null;const f=[];for(let x=0;x<e;++x)c.indexOf(x)===-1&&f.push(x);return c.forEach(x=>f.push(x)),f}function Ja(c){return c.map((e,f)=>[f,e]).sort((e,f)=>e[1]-f[1]).map(e=>e[0])}function pn(c,e){const f=[];for(let x=e-c;x<e;++x)f.push(x);return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vT(c,e=null,f=!1){const S={x:st(c,"x","max")},C={reductionIndices:e,keepDims:f};return pt.runKernel(Cu,S,C)}const Wr=ct({max_:vT});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gT(c,e=null,f=!1){const S={x:st(c,"x","min")},C={axis:e,keepDims:f};return pt.runKernel(bu,S,C)}const ih=ct({min_:gT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xT(c,e){let f=st(c,"base","pow"),x=st(e,"exp","pow");[f,x]=qe(f,x);const S={a:f,b:x};return pt.runKernel(Vf,S)}const Ba=ct({pow_:xT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ce(c,e){if((ls(c)&&e!=="string"||Array.isArray(c))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ls(c)&&!(c instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Fi(c,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yT(c){const f={x:st(c,"x","sqrt","float32")};return pt.runKernel(ic,f)}const Ks=ct({sqrt_:yT});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TT(c){const e=st(c,"x","square"),f={};return pt.runKernel("Square",{x:e},f)}const Ts=ct({square_:TT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ST(c,e=null,f=!1){let x=st(c,"x","sum");x.dtype==="bool"&&(x=We(x,"int32"));const S={x},C={axis:e,keepDims:f};return pt.runKernel(zu,S,C)}const Ve=ct({sum_:ST});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CT(c,e="euclidean",f=null,x=!1){c=st(c,"x","norm");const S=yv(c,e,f);let C=S.shape;if(x){const o=Qe(f,c.shape);C=rn(S.shape,o)}return Nt(S,C)}function yv(c,e,f=null){if(c.rank===0)return Xn(c);if(c.rank!==1&&f===null)return yv(Nt(c,[-1]),e,f);if(c.rank===1||typeof f=="number"||Array.isArray(f)&&f.length===1){if(e===1)return Ve(Xn(c),f);if(e===1/0)return Wr(Xn(c),f);if(e===-1/0)return ih(Xn(c),f);if(e==="euclidean"||e===2)return Ks(Ve(Ba(Xn(c),Ce(2,"int32")),f));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(f)&&f.length===2){if(e===1)return Wr(Ve(Xn(c),f[0]),f[1]-1);if(e===1/0)return Wr(Ve(Xn(c),f[1]),f[0]);if(e===-1/0)return ih(Ve(Xn(c),f[1]),f[0]);if(e==="fro"||e==="euclidean")return Ks(Ve(Ts(c),f));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${f}`)}const tl=ct({norm_:CT});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ET(c,e=null,f=!1){return tl(c,"euclidean",e,f)}const wT=ct({euclideanNorm_:ET});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bT(c){const f={x:st(c,"x","exp")};return pt.runKernel(hf,f)}const js=ct({exp_:bT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AT(c,e=0){const f=st(c,"x","expandDims","string_or_numeric");it(e<=f.rank,()=>"Axis must be <= rank of the tensor");const x={input:f},S={dim:e};return pt.runKernel(ff,x,S)}const is=ct({expandDims_:AT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RT(c){const f={x:st(c,"x","expm1")};return pt.runKernel(cf,f)}const IT=ct({expm1_:RT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PT(c,e){const f=st(c,"x","tile","string_or_numeric");it(f.rank===e.length,()=>`Error in transpose: rank of input ${f.rank} must match length of reps ${e}.`);const x={x:f},S={reps:e};return pt.runKernel(Ka,x,S)}const Aa=ct({tile_:PT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FT(c,e,f,x="float32"){e==null&&(e=c);const S=Ze([c,e],x),C=c<=e?c:e;for(let y=0;y<C;++y)S.set(1,y,y);const o=Nt(S.toTensor(),[c,e]);if(f==null)return o;if(f.length===1)return Aa(is(o,0),[f[0],1,1]);if(f.length===2)return Aa(is(is(o,0),0),[f[0],f[1],1,1]);if(f.length===3)return Aa(is(is(is(o,0),0),0),[f[0],f[1],f[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${f.length}D.`)}const Tv=ct({eye_:FT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NT(c){const f={x:st(c,"x","floor","float32")};return pt.runKernel(pf,f)}const Sv=ct({floor_:NT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MT(c,e,f=0,x=0){const S=st(c,"x","gather"),C=st(e,"indices","gather","int32"),o={x:S,indices:C},y={axis:f,batchDims:x};return pt.runKernel(vf,o,y)}const Cv=ct({gather_:MT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OT(c,e){let f=st(c,"a","greater","string_or_numeric"),x=st(e,"b","greater","string_or_numeric");[f,x]=qe(f,x),Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel(gf,S)}const el=ct({greater_:OT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DT(c,e){let f=st(c,"a","greaterEqual","string_or_numeric"),x=st(e,"b","greaterEqual","string_or_numeric");[f,x]=qe(f,x),Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel(xf,S)}const Ev=ct({greaterEqual_:DT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LT(c){const f={input:st(c,"input","imag")};return pt.runKernel(xm,f)}const nl=ct({imag_:LT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BT(c){const f={x:st(c,"x","isFinite")};return pt.runKernel(yf,f)}const $T=ct({isFinite_:BT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GT(c){const f={x:st(c,"x","isInf")};return pt.runKernel(Tf,f)}const UT=ct({isInf_:GT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VT(c){const f={x:st(c,"x","isNaN")};return pt.runKernel(Sf,f)}const zT=ct({isNaN_:VT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kT(c,e=.2){const x={x:st(c,"x","leakyRelu")},S={alpha:e};return pt.runKernel(yu,x,S)}const wv=ct({leakyRelu_:kT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WT(c,e){let f=st(c,"a","less","string_or_numeric"),x=st(e,"b","less","string_or_numeric");[f,x]=qe(f,x),Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel(Cf,S)}const rh=ct({less_:WT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XT(c,e){let f=st(c,"a","lessEqual","string_or_numeric"),x=st(e,"b","lessEqual","string_or_numeric");[f,x]=qe(f,x),Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel(Ef,S)}const Rc=ct({lessEqual_:XT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HT(c,e,f){if(f<=0)throw new Error("The number of values should be positive.");const x={start:c,stop:e,num:f};return pt.runKernel(Tu,{},x)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YT(c,e=5,f=1,x=1,S=.5){const C=st(c,"x","localResponseNormalization");it(C.rank===4||C.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${C.rank}.`),it(Hr(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=C,y=!1;C.rank===3&&(y=!0,o=Nt(C,[1,C.shape[0],C.shape[1],C.shape[2]]));const t={x:o},s={depthRadius:e,bias:f,alpha:x,beta:S},l=pt.runKernel(Su,t,s);return y?Nt(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const KT=ct({localResponseNormalization_:YT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jT(c){const f={x:st(c,"x","log","float32")};return pt.runKernel(wf,f)}const $a=ct({log_:jT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZT(c){const f={x:st(c,"x","log1p")};return pt.runKernel(bf,f)}const bv=ct({log1p_:ZT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QT(c,e){it(zl(c),()=>"The f passed in variableGrads(f) must be a function"),it(e==null||Array.isArray(e)&&e.every(s=>s instanceof Fo),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const f=e!=null;if(!f){e=[];for(const s in pt.registeredVariables)e.push(pt.registeredVariables[s])}const x=f?e.filter(s=>!s.trainable):null,S=e.length;e=e.filter(s=>s.trainable),it(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${S} variables is trainable.`);const C=!0,{value:o,grads:y}=pt.gradients(c,e,null,C);it(y.some(s=>s!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),it(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const t={};return e.forEach((s,l)=>{y[l]!=null&&(t[s.name]=y[l])}),x!=null&&x.forEach(s=>t[s.name]=null),{value:o,grads:t}}function Zs(c){return pt.customGrad(c)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JT(c){const f={x:st(c,"x","neg")};return pt.runKernel(Bf,f)}const Fs=ct({neg_:JT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qT(c){const f={x:st(c,"x","softplus")};return pt.runKernel(sc,f)}const Av=ct({softplus_:qT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _T(c){const e=st(c,"x","logSigmoid");return Zs(x=>({value:Fs(Av(Fs(x))),gradFunc:o=>Wt(o,ir(Fs(x)))}))(e)}const t4=ct({logSigmoid_:_T});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e4(c,e){let f=st(c,"a","sub"),x=st(e,"b","sub");[f,x]=qe(f,x);const S={a:f,b:x};return pt.runKernel(pc,S)}const ve=ct({sub_:e4});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n4(c,e=-1){const f=st(c,"logits","logSoftmax");if(e===-1&&(e=f.rank-1),e!==f.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${f.rank} and axis was ${e}`);return Zs((S,C)=>{const y=Wr(S,e,!0),t=ve(S,y),s=ve(We(t,"float32"),$a(Ve(js(t),e,!0)));return C([s]),{value:s,gradFunc:(a,r)=>{const[i]=r,n=!0,h=js(i);return ve(a,Wt(Ve(a,e,n),h))}}})(f)}const s4=ct({logSoftmax_:n4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4(c,e=null,f=!1){const x=st(c,"x","logSumExp"),S=Qe(e,x.shape),C=Wr(x,S,!0),o=ve(x,C),y=js(o),t=Ve(y,S),s=$a(t),l=ne(Nt(C,s.shape),s);if(f){const a=rn(l.shape,S);return Nt(l,a)}return l}const Rv=ct({logSumExp_:i4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r4(c,e){const f=st(c,"a","logicalAnd","bool"),x=st(e,"b","logicalAnd","bool");Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel(Af,S)}const Do=ct({logicalAnd_:r4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a4(c){const f={x:st(c,"x","logicalNot","bool")};return pt.runKernel(Rf,f)}const Iv=ct({logicalNot_:a4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4(c,e){const f=st(c,"a","logicalOr","bool"),x=st(e,"b","logicalOr","bool");Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel(If,S)}const Pv=ct({logicalOr_:o4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u4(c,e){const f=st(c,"a","logicalXor","bool"),x=st(e,"b","logicalXor","bool");return Te(f.shape,x.shape),Do(Pv(c,e),Iv(Do(c,e)))}const l4=ct({logicalXor_:u4});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lo=2147483648;function h4(c,e,f="left"){const x=st(c,"sortedSequence","searchSorted"),S=st(e,"values","searchSorted"),C=x.shape[x.shape.length-1],o=S.shape[S.shape.length-1],y=Nt(x,[-1,C]),t=Nt(S,[-1,o]);if(y.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(y.shape[0]!==t.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(bt(t.shape)>=lo)throw new Error(`values tensor size must less than ${lo}`);if(y.shape[1]>=lo)throw new Error(`trailing dim_size must less than ${lo} for int32 output type, was ${y.shape[1]}`);const s={sortedSequence:y,values:t},l={side:f};return pt.runKernel(Vu,s,l)}const Ic=ct({searchSorted_:h4});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f4(c,e){return Ic(c,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c4(c,e,f,x,S){const C=st(c,"x","maxPool"),o=1;let y=C,t=!1;C.rank===3&&(t=!0,y=Nt(C,[1,C.shape[0],C.shape[1],C.shape[2]])),it(y.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${y.rank}.`),it(Dn(f,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${f} and dilations '${o}'`),fs("maxPool",x,S);const s={x:y},l={filterSize:e,strides:f,pad:x,dimRoundingMode:S},a=pt.runKernel(Eu,s,l);return t?Nt(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const Fv=ct({maxPool_:c4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d4(c,e=[1,1,1],f,x,S,C="NDHWC"){const o=st(c,"x","maxPool3d");let y=o,t=!1;o.rank===4&&(t=!0,y=Nt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),it(y.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${y.rank}.`),it(C==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${C}`),fs("maxPool3d",x,S);const s={x:y},l={filterSize:e,strides:f,pad:x,dimRoundingMode:S,dataFormat:C},a=pt.runKernel(Nf,s,l);return t?Nt(a,[a.shape[1],a.shape[2],a.shape[3],a.shape[4]]):a}const p4=ct({maxPool3d_:d4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m4(c,e,f,x,S=!1){const o={x:st(c,"x","maxPoolWithArgmax")},y={filterSize:e,strides:f,pad:x,includeBatchInIndex:S},t=pt.runKernel(Mf,o,y);return{result:t[0],indexes:t[1]}}const v4=ct({maxPoolWithArgmax_:m4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4(c,e){let f=st(c,"a","maximum"),x=st(e,"b","maximum");[f,x]=qe(f,x),f.dtype==="bool"&&(f=We(f,"int32"),x=We(x,"int32")),Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel(Ff,S)}const Nv=ct({maximum_:g4});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x4(c,e=null,f=!1){const S={x:st(c,"x","mean")},C={axis:e,keepDims:f};return pt.runKernel(wu,S,C)}const Lo=ct({mean_:x4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hr(c,e="float32"){if(Zn(c),e==="complex64"){const x=hr(c,"float32"),S=hr(c,"float32");return bi(x,S)}const f=wi(bt(c),e);return pt.makeTensor(f,c,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function er(c,e="float32"){if(Zn(c),e==="complex64"){const x=er(c,"float32"),S=hr(c,"float32");return bi(x,S)}const f=sm(bt(c),e);return pt.makeTensor(f,c,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y4(c,e,{indexing:f="xy"}={}){if(f!=="xy"&&f!=="ij")throw new TypeError(`${f} is not a valid third argument to meshgrid`);if(c===void 0)return[];let x=st(c,"x","meshgrid",c instanceof Je?c.dtype:"float32");if(e===void 0)return[x];let S=st(e,"y","meshgrid",e instanceof Je?e.dtype:"float32");const C=bt(x.shape),o=bt(S.shape);return f==="xy"?(x=Nt(x,[1,-1]),S=Nt(S,[-1,1]),[Oe(er([o,1],x.dtype),x),Oe(S,er([1,C],S.dtype))]):(x=Nt(x,[-1,1]),S=Nt(S,[1,-1]),[Oe(x,er([1,o],x.dtype)),Oe(er([C,1],S.dtype),S)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T4(c,e){let f=st(c,"a","minimum"),x=st(e,"b","minimum");[f,x]=qe(f,x),f.dtype==="bool"&&(f=We(f,"int32"),x=We(x,"int32")),Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel(Of,S)}const Bo=ct({minimum_:T4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4(c,e,f){it(f==="reflect"||f==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${f}.`);const x=st(c,"x","mirrorPad");if(x.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");it(e.length===x.rank,()=>`Padding doesn't match input. Must be ${x.rank}. Got ${e.length}.`);const S=f==="reflect"?1:0;for(let y=0;y<x.rank;y++)it(e[y].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),it(e[y][0]>=0&&e[y][0]<=x.shape[y]-S&&e[y][1]>=0&&e[y][1]<=x.shape[y]-S,()=>`Padding in dimension ${y} cannot be greater than or equal to ${x.shape[y]-S} or less than 0 for input of shape ${x.shape}`);const C={paddings:e,mode:f},o={x};return pt.runKernel(Au,o,C)}const C4=ct({mirrorPad_:S4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E4(c,e){let f=st(c,"a","mod"),x=st(e,"b","mod");[f,x]=qe(f,x);const S={a:f,b:x};return pt.runKernel(Df,S)}const w4=ct({mod_:E4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b4(c,e=null,f=!1){c=st(c,"x","moments");const x=Qe(e,c.shape),S=Lo(c,x,f);let C=S.shape;f||(C=rn(S.shape,x));const o=Ts(ve(We(c,"float32"),Nt(S,C))),y=Lo(o,x,f);return{mean:S,variance:y}}const A4=ct({moments_:b4});function R4(c,e,f,x){const S=st(e,"data","multiRNNCell"),C=No(f,"c","multiRNNCell"),o=No(x,"h","multiRNNCell");let y=S;const t=[];for(let a=0;a<c.length;a++){const r=c[a](y,C[a],o[a]);t.push(r[0]),t.push(r[1]),y=r[1]}const s=[],l=[];for(let a=0;a<t.length;a+=2)s.push(t[a]),l.push(t[a+1]);return[s,l]}const I4=ct({multiRNNCell_:R4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P4(c,e,f,x=!1){const S=st(c,"logits","multinomial"),C=S.size,o=S.rank;if(C<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${C}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);f=f||Math.random();const t={logits:o===1?Nt(S,[1,-1]):S},s={numSamples:e,seed:f,normalized:x},l=pt.runKernel(Ru,t,s);return o===1?Nt(l,[l.size]):l}const F4=ct({multinomial_:P4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N4(c,e){let f=st(c,"a","notEqual","string_or_numeric"),x=st(e,"b","notEqual","string_or_numeric");[f,x]=qe(f,x),Te(f.shape,x.shape);const S={a:f,b:x};return pt.runKernel($f,S)}const Mv=ct({notEqual_:N4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M4(c,e,f=1,x=0,S="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:st(c,"indices","oneHot","int32")},y={dtype:S,depth:e,onValue:f,offValue:x};return pt.runKernel(Nu,o,y)}const O4=ct({oneHot_:M4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4(c){const f={x:st(c,"x","onesLike")};return pt.runKernel(Gf,f)}const L4=ct({onesLike_:D4});function B4(c,e){const f=st(c,"v1","outerProduct"),x=st(e,"v2","outerProduct");it(f.rank===1&&x.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${f.rank} and ${x.rank}.`);const S=Nt(f,[-1,1]),C=Nt(x,[1,-1]);return Oe(S,C)}const $4=ct({outerProduct_:B4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G4(c,e,f=0){const x=st(c,"x","pad");if(x.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const S={paddings:e,constantValue:f},C={x};return pt.runKernel(Mu,C,S)}const qa=ct({pad_:G4});function U4(c,e,f=0){return it(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),qa(c,[e],f)}const V4=ct({pad1d_:U4});function z4(c,e,f=0){return it(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),qa(c,e,f)}const k4=ct({pad2d_:z4});function W4(c,e,f=0){return it(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),qa(c,e,f)}const X4=ct({pad3d_:W4});function H4(c,e,f=0){return it(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),qa(c,e,f)}const Y4=ct({pad4d_:H4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K4(c,e,f){const x=st(c,"x","spaceToBatchND");it(x.rank>=1+e.length,()=>`input rank ${x.rank} should be > than [blockShape] ${e.length}`),it(f.length===e.length,()=>`paddings.shape[0] ${f.length} must be equal to [blockShape] ${e.length}`),it(x.shape.reduce((o,y,t)=>t>0&&t<=e.length?o&&(y+f[t-1][0]+f[t-1][1])%e[t-1]===0:o,!0),()=>`input spatial dimensions ${x.shape.slice(1)} with paddings ${f.toString()} must be divisible by blockShapes ${e.toString()}`);const S={x},C={blockShape:e,paddings:f};return pt.runKernel(rc,S,C)}const Ov=ct({spaceToBatchND_:K4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j4(c,e,f,x,S,C,o){S==null&&(S=[1,1]),C==null&&(C=1),x===0&&(x="valid");const y=st(c,"x","maxPool");let t=y,s=!1;y.rank===3&&(s=!0,t=Nt(y,[1,y.shape[0],y.shape[1],y.shape[2]])),it(Dn(C,S),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${C} and dilations '${S}'`);const l=hs(t.shape,e,C,S,x),a=[l.dilationHeight,l.dilationWidth];let r;x==="same"?r=Q4([l.filterHeight,l.filterWidth],a):r=[[0,0],[0,0]];const i=a[0]===1&&a[1]===1,[n,h]=Z4([l.inHeight,l.inWidth],a,r),d=i?x:"valid",u=i?t:Ov(t,a,n),m=(f==="avg"?()=>hv(u,e,C,d,o):()=>Fv(u,e,C,d,o))(),v=i?m:fv(m,a,h);return s?Nt(v,[v.shape[1],v.shape[2],v.shape[3]]):v}function Z4(c,e,f){const x=f.map(l=>l[0]),S=f.map(l=>l[1]),C=c.concat(x,S),o=e.map((l,a)=>(l-C[a]%l)%l),y=S.map((l,a)=>l+o[a]),t=e.map((l,a)=>[x[a],y[a]]),s=e.map((l,a)=>[0,o[a]]);return[t,s]}function Q4(c,e){const x=c.map((o,y)=>o+(o-1)*(e[y]-1)).map(o=>o-1),S=x.map(o=>Math.floor(o/2)),C=x.map((o,y)=>o-S[y]);return x.map((o,y)=>[S[y],C[y]])}const J4=ct({pool_:j4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q4(c,e){const f=st(c,"x","prelu"),x=st(e,"alpha","prelu"),S={x:f,alpha:x};return pt.runKernel(Ou,S)}const Dv=ct({prelu_:q4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _4(c,e=null,f=!1){let x=st(c,"x","prod");x.dtype==="bool"&&(x=We(x,"int32"));const S={x},C={axis:e,keepDims:f};return pt.runKernel(Du,S,C)}const tS=ct({prod_:_4});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eS(c,e,f,x){const S=c.map((l,a)=>st(l,`tensors${a}`,"raggedGather","int32")),C=st(e,"paramsDenseValues","raggedGather"),o=st(f,"indices","raggedGather","int32"),y={paramsNestedSplits:S,paramsDenseValues:C,indices:o},t={outputRaggedRank:x},s=pt.runKernel(Sm,y,t);return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}const nS=ct({raggedGather_:eS});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sS(c,e,f){const x=st(c,"starts","raggedRange"),S=st(e,"limits","raggedRange",x.dtype),C=st(f,"deltas","raggedRange",x.dtype),o={starts:x,limits:S,deltas:C},y=pt.runKernel(Cm,o);return{rtNestedSplits:y[0],rtDenseValues:y[1]}}const iS=ct({raggedRange_:sS});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rS(c,e,f,x,S){const C=st(c,"shape","raggedTensorToTensor","int32"),o=st(e,"values","raggedTensorToTensor"),y=st(f,"defaultValue","raggedTensorToTensor",o.dtype),t=x.map((a,r)=>st(a,`tensors${r}`,"raggedTensorToTensor","int32")),s={shape:C,values:o,defaultValue:y,rowPartitionTensors:t},l={rowPartitionTypes:S};return pt.runKernel(Em,s,l)}const aS=ct({raggedTensorToTensor_:rS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oS(c,e,f){Zn(c);const x=bt(c);let S=null;if(f==null||f==="float32")S=new Float32Array(x);else if(f==="int32")S=new Int32Array(x);else if(f==="bool")S=new Uint8Array(x);else throw new Error(`Unknown data type ${f}`);for(let C=0;C<x;C++)S[C]=e();return pt.makeTensor(S,c,f)}const uS=ct({rand_:oS});var Pc={exports:{}};Pc.exports;(function(c){(function(e,f,x){function S(t){var s=this,l=y();s.next=function(){var a=2091639*s.s0+s.c*23283064365386963e-26;return s.s0=s.s1,s.s1=s.s2,s.s2=a-(s.c=a|0)},s.c=1,s.s0=l(" "),s.s1=l(" "),s.s2=l(" "),s.s0-=l(t),s.s0<0&&(s.s0+=1),s.s1-=l(t),s.s1<0&&(s.s1+=1),s.s2-=l(t),s.s2<0&&(s.s2+=1),l=null}function C(t,s){return s.c=t.c,s.s0=t.s0,s.s1=t.s1,s.s2=t.s2,s}function o(t,s){var l=new S(t),a=s&&s.state,r=l.next;return r.int32=function(){return l.next()*4294967296|0},r.double=function(){return r()+(r()*2097152|0)*11102230246251565e-32},r.quick=r,a&&(typeof a=="object"&&C(a,l),r.state=function(){return C(l,{})}),r}function y(){var t=4022871197,s=function(l){l=String(l);for(var a=0;a<l.length;a++){t+=l.charCodeAt(a);var r=.02519603282416938*t;t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=r*4294967296}return(t>>>0)*23283064365386963e-26};return s}f&&f.exports?f.exports=o:x&&x.amd?x(function(){return o}):this.alea=o})(Kn,c,!1)})(Pc);var lS=Pc.exports,Fc={exports:{}};Fc.exports;(function(c){(function(e,f,x){function S(y){var t=this,s="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var a=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^a^a>>>8},y===(y|0)?t.x=y:s+=y;for(var l=0;l<s.length+64;l++)t.x^=s.charCodeAt(l)|0,t.next()}function C(y,t){return t.x=y.x,t.y=y.y,t.z=y.z,t.w=y.w,t}function o(y,t){var s=new S(y),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(typeof l=="object"&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:x&&x.amd?x(function(){return o}):this.xor128=o})(Kn,c,!1)})(Fc);var hS=Fc.exports,Nc={exports:{}};Nc.exports;(function(c){(function(e,f,x){function S(y){var t=this,s="";t.next=function(){var a=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(a^a<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,y===(y|0)?t.x=y:s+=y;for(var l=0;l<s.length+64;l++)t.x^=s.charCodeAt(l)|0,l==s.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function C(y,t){return t.x=y.x,t.y=y.y,t.z=y.z,t.w=y.w,t.v=y.v,t.d=y.d,t}function o(y,t){var s=new S(y),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(typeof l=="object"&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:x&&x.amd?x(function(){return o}):this.xorwow=o})(Kn,c,!1)})(Nc);var fS=Nc.exports,Mc={exports:{}};Mc.exports;(function(c){(function(e,f,x){function S(y){var t=this;t.next=function(){var l=t.x,a=t.i,r,i;return r=l[a],r^=r>>>7,i=r^r<<24,r=l[a+1&7],i^=r^r>>>10,r=l[a+3&7],i^=r^r>>>3,r=l[a+4&7],i^=r^r<<7,r=l[a+7&7],r=r^r<<13,i^=r^r<<9,l[a]=i,t.i=a+1&7,i};function s(l,a){var r,i=[];if(a===(a|0))i[0]=a;else for(a=""+a,r=0;r<a.length;++r)i[r&7]=i[r&7]<<15^a.charCodeAt(r)+i[r+1&7]<<13;for(;i.length<8;)i.push(0);for(r=0;r<8&&i[r]===0;++r);for(r==8?i[7]=-1:i[r],l.x=i,l.i=0,r=256;r>0;--r)l.next()}s(t,y)}function C(y,t){return t.x=y.x.slice(),t.i=y.i,t}function o(y,t){y==null&&(y=+new Date);var s=new S(y),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(l.x&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:x&&x.amd?x(function(){return o}):this.xorshift7=o})(Kn,c,!1)})(Mc);var cS=Mc.exports,Oc={exports:{}};Oc.exports;(function(c){(function(e,f,x){function S(y){var t=this;t.next=function(){var l=t.w,a=t.X,r=t.i,i,n;return t.w=l=l+1640531527|0,n=a[r+34&127],i=a[r=r+1&127],n^=n<<13,i^=i<<17,n^=n>>>15,i^=i>>>12,n=a[r]=n^i,t.i=r,n+(l^l>>>16)|0};function s(l,a){var r,i,n,h,d,u=[],p=128;for(a===(a|0)?(i=a,a=null):(a=a+"\0",i=0,p=Math.max(p,a.length)),n=0,h=-32;h<p;++h)a&&(i^=a.charCodeAt((h+32)%a.length)),h===0&&(d=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,h>=0&&(d=d+1640531527|0,r=u[h&127]^=i+d,n=r==0?n+1:0);for(n>=128&&(u[(a&&a.length||0)&127]=-1),n=127,h=4*128;h>0;--h)i=u[n+34&127],r=u[n=n+1&127],i^=i<<13,r^=r<<17,i^=i>>>15,r^=r>>>12,u[n]=i^r;l.w=d,l.X=u,l.i=n}s(t,y)}function C(y,t){return t.i=y.i,t.w=y.w,t.X=y.X.slice(),t}function o(y,t){y==null&&(y=+new Date);var s=new S(y),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(l.X&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:x&&x.amd?x(function(){return o}):this.xor4096=o})(Kn,c,!1)})(Oc);var dS=Oc.exports,Dc={exports:{}};Dc.exports;(function(c){(function(e,f,x){function S(y){var t=this,s="";t.next=function(){var a=t.b,r=t.c,i=t.d,n=t.a;return a=a<<25^a>>>7^r,r=r-i|0,i=i<<24^i>>>8^n,n=n-a|0,t.b=a=a<<20^a>>>12^r,t.c=r=r-i|0,t.d=i<<16^r>>>16^n,t.a=n-a|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,y===Math.floor(y)?(t.a=y/4294967296|0,t.b=y|0):s+=y;for(var l=0;l<s.length+20;l++)t.b^=s.charCodeAt(l)|0,t.next()}function C(y,t){return t.a=y.a,t.b=y.b,t.c=y.c,t.d=y.d,t}function o(y,t){var s=new S(y),l=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do var r=s.next()>>>11,i=(s.next()>>>0)/4294967296,n=(r+i)/(1<<21);while(n===0);return n},a.int32=s.next,a.quick=a,l&&(typeof l=="object"&&C(l,s),a.state=function(){return C(s,{})}),a}f&&f.exports?f.exports=o:x&&x.amd?x(function(){return o}):this.tychei=o})(Kn,c,!1)})(Dc);var pS=Dc.exports,Lv={exports:{}};const mS={},vS=Object.freeze(Object.defineProperty({__proto__:null,default:mS},Symbol.toStringTag,{value:"Module"})),vi=U2(vS);(function(c){(function(e,f,x){var S=256,C=6,o=52,y="random",t=x.pow(S,C),s=x.pow(2,o),l=s*2,a=S-1,r;function i(v,g,T){var w=[];g=g==!0?{entropy:!0}:g||{};var b=u(d(g.entropy?[v,m(f)]:v??p(),3),w),E=new n(w),A=function(){for(var R=E.g(C),I=t,P=0;R<s;)R=(R+P)*S,I*=S,P=E.g(1);for(;R>=l;)R/=2,I/=2,P>>>=1;return(R+P)/I};return A.int32=function(){return E.g(4)|0},A.quick=function(){return E.g(4)/4294967296},A.double=A,u(m(E.S),f),(g.pass||T||function(R,I,P,N){return N&&(N.S&&h(N,E),R.state=function(){return h(E,{})}),P?(x[y]=R,I):R})(A,b,"global"in g?g.global:this==x,g.state)}function n(v){var g,T=v.length,w=this,b=0,E=w.i=w.j=0,A=w.S=[];for(T||(v=[T++]);b<S;)A[b]=b++;for(b=0;b<S;b++)A[b]=A[E=a&E+v[b%T]+(g=A[b])],A[E]=g;(w.g=function(R){for(var I,P=0,N=w.i,F=w.j,O=w.S;R--;)I=O[N=a&N+1],P=P*S+O[a&(O[N]=O[F=a&F+I])+(O[F]=I)];return w.i=N,w.j=F,P})(S)}function h(v,g){return g.i=v.i,g.j=v.j,g.S=v.S.slice(),g}function d(v,g){var T=[],w=typeof v,b;if(g&&w=="object")for(b in v)try{T.push(d(v[b],g-1))}catch{}return T.length?T:w=="string"?v:v+"\0"}function u(v,g){for(var T=v+"",w,b=0;b<T.length;)g[a&b]=a&(w^=g[a&b]*19)+T.charCodeAt(b++);return m(g)}function p(){try{var v;return r&&(v=r.randomBytes)?v=v(S):(v=new Uint8Array(S),(e.crypto||e.msCrypto).getRandomValues(v)),m(v)}catch{var g=e.navigator,T=g&&g.plugins;return[+new Date,e,T,e.screen,m(f)]}}function m(v){return String.fromCharCode.apply(0,v)}if(u(x.random(),f),c.exports){c.exports=i;try{r=vi}catch{}}else x["seed"+y]=i})(typeof self<"u"?self:Kn,[],Math)})(Lv);var gS=Lv.exports,xS=lS,yS=hS,TS=fS,SS=cS,CS=dS,ES=pS,gr=gS;gr.alea=xS;gr.xor128=yS;gr.xorwow=TS;gr.xorshift7=SS;gr.xor4096=CS;gr.tychei=ES;var Lc=gr;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bc{constructor(e,f,x,S,C){this.mean=e,this.stdDev=f,this.dtype=x,this.nextVal=NaN,this.truncated=S,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=C||Math.random();this.random=Lc.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const S=this.nextVal;return this.nextVal=NaN,S}let e,f,x=!1;for(;!x;){let S,C,o;do S=2*this.random()-1,C=2*this.random()-1,o=S*S+C*C;while(o>=1||o===0);const y=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*S*y,f=this.mean+this.stdDev*C*y,(!this.truncated||this.isValidTruncated(e))&&(x=!0)}return(!this.truncated||this.isValidTruncated(f))&&(this.nextVal=this.convertValue(f)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class wS{constructor(e,f,x,S){this.alpha=e,this.beta=1/f,this.dtype=x;const C=S||Math.random();this.randu=Lc.alea(C.toString()),this.randn=new Bc(0,1,x,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,f,x,S,C,o;for(;;){do S=this.randn.nextValue(),o=1+this.c*S;while(o<=0);if(o*=o*o,e=S*S,f=1-.331*e*e,x=.5*e+this.d*(1-o+Math.log(o)),C=this.randu(),C<f||Math.log(C)<x)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class bS{constructor(e=0,f=1,x,S){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=f-e,this.dtype=x,S==null&&(S=Math.random()),typeof S=="number"&&(S=S.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${f} <= 1 and dtype is not float`);this.random=Lc.alea(S)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AS(c,e,f=1,x="float32",S){if(Zn(c),f==null&&(f=1),x==null&&(x="float32"),x!=="float32"&&x!=="int32")throw new Error(`Unsupported data type ${x}`);const C=new wS(e,f,x,S),o=Ze(c,x);for(let y=0;y<o.values.length;y++)o.values[y]=C.nextValue();return o.toTensor()}const RS=ct({randomGamma_:AS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IS(c,e=0,f=1,x,S){if(Zn(c),x!=null&&x==="bool")throw new Error(`Unsupported data type ${x}`);const C=new Bc(e,f,x,!1,S),o=Ze(c,x);for(let y=0;y<o.values.length;y++)o.values[y]=C.nextValue();return o.toTensor()}const Bv=ct({randomNormal_:IS});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PS(c,e,f){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return Bv(c,0,1,e,f)}const FS=ct({randomStandardNormal_:PS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NS(c,e=0,f=1,x="float32",S){Zn(c);const C=Ze(c,x),o=new bS(e,f,null,S);for(let y=0;y<C.values.length;y++)C.values[y]=o.nextValue();return C.toTensor()}const $c=ct({randomUniform_:NS});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MS(c,e,f,x){return $c(c,e,f,"int32",x)}const OS=ct({randomUniformInt_:MS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ga(c,e,f=1,x="float32"){if(f===0)throw new Error("Cannot have a step of zero");const S={start:c,stop:e,step:f,dtype:x};return pt.runKernel(zf,{},S)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DS(c){const f={input:st(c,"input","real")};return pt.runKernel(wm,f)}const Ua=ct({real_:DS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LS(c){const f={x:st(c,"x","reciprocal")};return pt.runKernel(kf,f)}const BS=ct({reciprocal_:LS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $S(c){const f={x:st(c,"x","relu")};return pt.runKernel(Wf,f)}const sl=ct({relu_:$S});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GS(c){const f={x:st(c,"x","relu6")};return pt.runKernel(Kf,f)}const $v=ct({relu6_:GS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function US(c,e){const x={x:st(c,"x","reverse")},S={dims:e};return pt.runKernel($u,x,S)}const fr=ct({reverse_:US});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VS(c){const e=st(c,"x","reverse");return it(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),fr(e,0)}const zS=ct({reverse1d_:VS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kS(c,e){const f=st(c,"x","reverse");return it(f.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${f.rank}.`),fr(f,e)}const WS=ct({reverse2d_:kS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XS(c,e){const f=st(c,"x","reverse");return it(f.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${f.rank}.`),fr(f,e)}const HS=ct({reverse3d_:XS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YS(c,e){const f=st(c,"x","reverse");return it(f.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${f.rank}.`),fr(f,e)}const KS=ct({reverse4d_:YS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jS(c){const f={x:st(c,"x","round")};return pt.runKernel(jf,f)}const Gv=ct({round_:jS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZS(c){const f={x:st(c,"x","rsqrt","float32")};return pt.runKernel(Zf,f)}const QS=ct({rsqrt_:ZS});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JS(c){const f={x:st(c,"x","selu")};return pt.runKernel(Jf,f)}const qS=ct({selu_:JS});function _S(c,e,f,x,S,C=[1,1],o="NHWC"){const y=st(c,"x","separableConv2d"),t=st(e,"depthwiseFilter","separableConv2d"),s=st(f,"pointwiseFilter","separableConv2d");let l=y,a=!1;if(y.rank===3&&(a=!0,l=Nt(y,[1,y.shape[0],y.shape[1],y.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");it(l.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${l.rank}.`),it(t.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${t.rank}.`),it(s.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${t.rank}.`),it(s.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${s.shape[0]}.`),it(s.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${s.shape[1]}.`);const r=t.shape[2],i=t.shape[3];it(s.shape[2]===r*i,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${r*i}, but got ${s.shape[2]}.`);const n=bc(l,t,x,S,o,C),d=_u(n,s,1,"valid",o);return a?Nt(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const tC=ct({separableConv2d_:_S});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function eC(c,e){const f=st(c,"x","setdiff1d"),x=st(e,"y","setdiff1d");it(f.dtype===x.dtype,()=>`x and y should have the same dtype, but got x (${f.dtype}) and y (${x.dtype}).`),it(f.rank===1,()=>`x should be 1D tensor, but got x (${f.shape}).`),it(x.rank===1,()=>`y should be 1D tensor, but got y (${x.shape}).`);const S=await f.data(),C=await x.data(),o=new Set(C);let y=0;for(let l=0;l<S.length;l++)o.has(S[l])||y++;const t=new Zr([y],f.dtype),s=new Zr([y],"int32");for(let l=0,a=0;l<S.length;l++)o.has(S[l])||(t.values[a]=S[l],s.values[a]=l,a++);return[t.toTensor(),s.toTensor()]}const nC=eC;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sC(c){const f={x:st(c,"x","sign")};return pt.runKernel(ec,f)}const iC=ct({sign_:sC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rC(c){const f={x:st(c,"x","sin","float32")};return pt.runKernel(_f,f)}const aC=ct({sin_:rC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oC(c){const f={x:st(c,"x","sinh")};return pt.runKernel(tc,f)}const uC=ct({sinh_:oC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lC(c,e,f){const x=st(c,"x","slice1d");return it(x.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${x.rank} tensor`),me(x,[e],[f])}const hC=ct({slice1d_:lC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fC(c,e,f){const x=st(c,"x","slice2d");return it(x.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${x.rank} tensor`),me(x,e,f)}const cC=ct({slice2d_:fC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dC(c,e,f){const x=st(c,"x","slice3d");return it(x.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${x.rank} tensor`),me(x,e,f)}const pC=ct({slice3d_:dC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mC(c,e,f){const x=st(c,"x","slice4d");return it(x.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${x.rank} tensor`),me(x,e,f)}const vC=ct({slice4d_:mC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gC(c,e=-1){const f=st(c,"logits","softmax","float32");if(e===-1&&(e=f.rank-1),e!==f.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${f.rank} and dim was ${e}`);const x={logits:f},S={dim:e};return pt.runKernel(ku,x,S)}const xC=ct({softmax_:gC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yC(c){it(c.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${c.dtype}.`);const e={input:c};return pt.runKernel(vm,e)}const Gc=ct({fft_:yC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TC(c){it(c.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${c.dtype}.`);const e={input:c};return pt.runKernel(gm,e)}const $o=ct({ifft_:TC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SC(c){const e=c.shape[c.shape.length-1],f=c.size/e;let x;if(e<=2){const S=Nt(c,[f,e]);x=$o(S)}else{const S=[f,2*(e-1)],C=Nt(Ua(c),[f,e]),o=Nt(nl(c),[f,e]),y=fr(me(C,[0,1],[f,e-2]),1),t=Wt(fr(me(o,[0,1],[f,e-2]),1),Ce(-1)),s=cn([C,y],1),l=cn([o,t],1),a=Nt(bi(s,l),[S[0],S[1]]);x=$o(a)}if(x=Ua(x),c.rank===3&&c.shape[0]!==0){const S=x,C=c.shape[0];x=Nt(x,[C,x.shape[0]/C,x.shape[1]]),S.dispose()}return x}const Uv=ct({irfft_:SC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CC(c,e,f=0){const S={x:st(c,"x","split")},C={numOrSizeSplits:e,axis:f};return pt.runKernel(ac,S,C)}const Va=ct({split_:CC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EC(c,e){it(c.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${c.dtype}`);let f=c.shape[c.shape.length-1];const x=c.size/f;let S;if(e!=null&&e<f){const n=c.shape.map(d=>0),h=c.shape.map(d=>d);h[c.shape.length-1]=e,S=me(c,n,h),f=e}else if(e!=null&&e>f){const n=c.shape.map(h=>h);n[c.shape.length-1]=e-f,S=cn([c,hr(n)],c.shape.length-1),f=e}else S=c;const C=jn(S),o=Nt(bi(S,C),[x,f]),y=Gc(o),t=Math.floor(f/2)+1,s=Ua(y),l=nl(y),a=Va(s,[t,f-t],s.shape.length-1),r=Va(l,[t,f-t],l.shape.length-1),i=S.shape.slice();return i[S.shape.length-1]=t,Nt(bi(a[0],r[0]),i)}const Uc=ct({rfft_:EC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wC(c,e){let f=st(c,"a","squaredDifference"),x=st(e,"b","squaredDifference");[f,x]=qe(f,x),Te(f.shape,x.shape);const S={a:f,b:x},C={};return pt.runKernel(hc,S,C)}const Vv=ct({squaredDifference_:wC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bC(c,e){const f=st(c,"x","squeeze","string_or_numeric");return Nt(f,Ii(f.shape,e).newShape)}const on=ct({squeeze_:bC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AC(c,e=0){const f=No(c,"tensors","stack","string_or_numeric");it(f.length>=1,()=>"Pass at least one tensor to tf.stack"),f.length>0&&it(e<=f[0].rank,()=>"Axis must be <= rank of the tensor");const x=f,S={axis:e};return pt.runKernel(Uf,x,S)}const Qs=ct({stack_:AC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RC(c,e=0){const x={x:st(c,"x","step")},S={alpha:e};return pt.runKernel(ju,x,S)}const zv=ct({step_:RC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IC(c,e,f,x,S=0,C=0,o=0,y=0,t=0){const l={x:st(c,"x","stridedSlice","string_or_numeric")},a={begin:e,end:f,strides:x,beginMask:S,endMask:C,ellipsisMask:o,newAxisMask:y,shrinkAxisMask:t};return pt.runKernel(Hu,l,a)}const PC=ct({stridedSlice_:IC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FC(c){const f={x:st(c,"x","tan","float32")};return pt.runKernel(mc,f)}const NC=ct({tan_:FC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xn(c,e){ta(c);const f=Pi(c,e);if(f.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Fi(c,null,f,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ci(c,e,f){if(ta(c),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const x=Pi(c,f);if(x.length!==2&&x.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(x.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Fi(c,e,x,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kv(c,e,f){if(ta(c),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const x=Pi(c,f);if(x.length!==3&&x.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(x.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Fi(c,e,x,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MC(c,e,f){if(ta(c),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const x=Pi(c,f);if(x.length!==4&&x.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(x.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Fi(c,e,x,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OC(c,e,f){if(ta(c),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const x=Pi(c,f);if(x.length!==5&&x.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(x.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Fi(c,e,x,f)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DC(c,e,f){if(ta(c),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const x=Pi(c,f);if(x.length!==6&&x.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(x.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||x,Fi(c,e,x,f)}function Wv(c,e,f){const x=e.rank>1?e.shape[e.rank-1]:1,S=e.rank>1?e.rank-1:1,C=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${f.shape}, indices.shape: ${e.shape}, shape: ${c}, sliceDim: ${x}, and batchDim: ${S}.`;if(f.rank<S)throw new Error(C+` update.rank < ${S}. `);if(c.length<x+(f.rank-S))throw new Error(C+` Output shape length < ${x+(f.rank-S)}`);if(f.rank!==S+c.length-x)throw new Error(C+` update.rank != ${S+c.length-x}`);for(let o=0;o<S;++o)if(f.shape[o]!==e.shape[o])throw new Error(C+` updates.shape[${o}] (${f.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<f.rank-S;++o)if(f.shape[o+S]!==c[o+x])throw new Error(C+` updates.shape[${o+S}] (${f.shape[o+S]}) != shape[${o+S}] (${c[o+S]})`)}function Vc(c,e,f){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(c.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${c.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(f.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${f}`);if(f.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(c.size===0)throw new Error(`Updates specified for empty output. updates shape: ${c.shape}`)}Wv(f,e,c)}function xr(c,e,f){const x=e.shape.length,S=x>1?e.shape[x-1]:1,C=f.length;let o=1;for(let a=S;a<C;++a)o*=f[a];const y=S<1?1:S,t=bt(e.shape)/y,s=[...Ne(f.slice(0,S)),1],l=bt(f);return{sliceRank:S,numUpdates:t,sliceSize:o,strides:s,outputSize:l}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LC(c,e,f){const x=st(c,"tensor","tensorScatterupdate"),S=st(e,"indices","tensorScatterupdate","int32"),C=st(f,"updates","tensorScatterupdate");if(Vc(C,S,x.shape),x.dtype!==C.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${x.dtype} and ${C.dtype}.`);const o={tensor:x,indices:S,updates:C},y={};return pt.runKernel(Uu,o,y)}const BC=ct({tensorScatterUpdate_:LC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $C(c,e=1,f=!0){const x=st(c,"x","topk");if(x.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const S=x.shape[x.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>S)throw new Error(`'k' passed to topk() must be <= the last dimension (${S}) but got ${e}`);const C={x},o={k:e,sorted:f},[y,t]=pt.runKernel(Yu,C,o);return{values:y,indices:t}}const GC=ct({topk_:$C});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UC(c,e=0,f=1,x,S){if(Zn(c),x!=null&&x==="bool")throw new Error("Unsupported data type $ { dtype }");const C=new Bc(e,f,x,!0,S),o=Ze(c,x);for(let y=0;y<o.values.length;y++)o.values[y]=C.nextValue();return o.toTensor()}const VC=ct({truncatedNormal_:UC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zC(c,e=0){const f=st(c,"x","unique","string_or_numeric");it(f.rank>0,()=>"The input tensor must be at least 1D");const x={x:f},S={axis:e},[C,o]=pt.runKernel(gc,x,S);return{values:C,indices:o}}const kC=ct({unique_:zC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WC(c,e,f){const x=st(c,"x","unsortedSegmentSum"),S=st(e,"segmentIds","unsortedSegmentSum","int32");it(Hr(f),()=>"numSegments must be of dtype int");const C={x,segmentIds:S},o={numSegments:f};return pt.runKernel(Rm,C,o)}const XC=ct({unsortedSegmentSum_:WC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HC(c,e=0){const f=st(c,"x","unstack","string_or_numeric");it(e>=-f.shape.length&&e<f.shape.length,()=>`Axis = ${e} is not in [-${f.shape.length}, ${f.shape.length})`);const x={value:f},S={axis:e};return pt.runKernel(xc,x,S)}const yr=ct({unstack_:HC});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YC(c,e){return Ic(c,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KC(c,e=!0,f,x){return pt.makeVariable(c,e,f,x)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xv(c,e){const f=[];for(let C=0;C<e.length;C++)e[C]&&f.push(C);const x=Ze(c,"int32"),S=Ze([f.length,c.length],"int32");for(let C=0;C<f.length;C++){const o=x.indexToLoc(f[C]),y=C*c.length;S.values.set(o,y)}return S.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function jC(c){const e=st(c,"condition","whereAsync","bool"),f=await e.data(),x=Xv(e.shape,f);return c!==e&&e.dispose(),x}const Hv=jC;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ZC(c,e,f){const x=st(c,"tensor","boolMask"),S=st(e,"mask","boolMask","bool"),C=f??0,o=S.rank,y=x.shape;it(o>0,()=>"mask cannot be scalar"),kn(y.slice(C,C+o),S.shape,"mask's shape must match the first K dimensions of tensor's shape,");let t=1;for(let h=C;h<C+o;h++)t*=y[h];const s=y.slice(0,C).concat([t],y.slice(C+o)),l=Nt(x,s),a=Nt(S,[-1]),r=await Hv(a),i=on(r,[1]),n=Cv(l,i,C);return c!==x&&x.dispose(),e!==S&&S.dispose(),i.dispose(),l.dispose(),a.dispose(),r.dispose(),n}const QC=ZC;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JC(c,e,f){const x=st(c,"x","transpose");if(e==null&&(e=x.shape.map((o,y)=>y).reverse()),it(x.rank===e.length,()=>`Error in transpose: rank of input ${x.rank} must match length of perm ${e}.`),e.forEach(o=>{it(o>=0&&o<x.rank,()=>`All entries in 'perm' must be between 0 and ${x.rank-1} but got ${e}`)}),x.rank<=1)return x.clone();const S={x},C={perm:e};return x.dtype==="complex64"?de(()=>{let o=Ua(x),y=nl(x);return o=pt.runKernel(Vr,{x:o},C),y=pt.runKernel(Vr,{x:y},C),f&&(y=Fs(y)),bi(o,y)}):pt.runKernel(Vr,S,C)}const ah=ct({transpose_:JC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qC(c,e,f,x,S=!0){const C=st(c,"v","movingAverage"),o=st(e,"x","movingAverage"),y=st(f,"decay","movingAverage");bx(C,o),it(je(C.shape,o.shape),()=>"Shape mismatch in v and x");const t=Ce(1),s=ve(t,y);let l=Wt(ve(o,C),s);if(S){it(x!=null,()=>"When using zeroDebias: true, step is required.");const a=st(x,"step","movingAverage");l=ye(l,ve(t,Ba(y,a)))}return ne(C,l)}const _C=ct({movingAverage_:qC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tE(c,e,f){Zn(f);const x=st(c,"indices","scatterND","int32"),S=st(e,"updates","scatterND");Vc(S,x,f);const C={indices:x,updates:S},o={shape:f};return pt.runKernel(Gu,C,o)}const eE=ct({scatterND_:tE});function nE(c,e,f,x){if(c.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${c.dtype}.`);if(c.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${c.shape}.`);const S=c.rank>0?c.shape[0]:1,C=c.rank>1?c.shape[1]:1;if(f.length!==C)throw new Error(`outputShape has incorrect number of elements:, ${f.length}, should be: ${C}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===S))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${S}]`);if(e.dtype!==x.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sE(c,e,f,x=0){Zn(f);const S=st(c,"sparseIndices","sparseToDense","int32"),C=st(e,"sparseValues","sparseToDense","string_or_numeric"),o=st(x,"defaultValue","sparseToDense",C.dtype);nE(S,C,f,o);const y={sparseIndices:S,sparseValues:C,defaultValue:o},t={outputShape:f};return pt.runKernel(Xu,y,t)}const iE=ct({sparseToDense_:sE});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rE(c,e){const f=st(e,"indices","gatherND","int32"),S={params:st(c,"x","gatherND","string_or_numeric"),indices:f};return pt.runKernel(gu,S)}const aE=ct({gatherND_:rE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oE(c,e){if(e==null)return c.shape.slice();if(je(c.shape,e))return e;if(c.shape.length===e.length){const f=[];for(let x=0;x<c.shape.length;x++)e[x]==null&&c.shape[x]!=null?f.push(c.shape[x]):f.push(e[x]);return f}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uE(c,e,f,x){const S=st(c,"x","dropout");if(it(S.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${S.dtype} tensor instead.`),it(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return c instanceof Je?S.clone():S;const C=oE(S,f),o=1-e,y=ye(Sv(ne($c(C,0,1,"float32",x),o)),o);return Wt(S,y)}const lE=ct({dropout_:uE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yv(c){return Math.floor(Math.pow(2,Math.ceil(Math.log(c)/Math.log(2))))}function zc(c,e,f){const x=1-c%2,S=new Float32Array(c);for(let C=0;C<c;++C){const o=2*Math.PI*C/(c+x-1);S[C]=e-f*Math.cos(o)}return xn(S,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function hE(c,e,f=1){const x=st(c,"predictions","inTopK"),S=st(e,"targets","inTopK");it(x.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${x.rank}`),it(x.rank-1===S.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${x.rank} and targets rank ${S.rank}`),kn(x.shape.slice(0,x.shape.length-1),S.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const C=x.shape[x.shape.length-1];it(f>0&&f<=C,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${C}), but got ${f}`);const o=await x.data(),y=await S.data(),[t,s]=[o.length/C,C],l=Ei("bool",t);for(let a=0;a<t;a++){const r=a*s,i=o.subarray(r,r+s),n=[];for(let h=0;h<i.length;h++)n.push({value:i[h],index:h});n.sort((h,d)=>d.value-h.value),l[a]=0;for(let h=0;h<f;h++)if(n[h].index===y[a]){l[a]=1;break}}return c!==x&&x.dispose(),e!==S&&S.dispose(),ys(l,S.shape,"bool")}const fE=hE;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cE(c,e,f,x,S,C="NHWC",o){let y=c;c.rank===3&&(y=Nt(c,[1,c.shape[0],c.shape[1],c.shape[2]]));let t=e;t.rank===3&&(t=Nt(e,[1,e.shape[0],e.shape[1],e.shape[2]])),it(y.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${y.shape}.`),it(t.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${t.shape}.`),it(f.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${f}.`);const s=C==="NHWC"?y.shape[3]:y.shape[1],l=C==="NHWC"?t.shape[3]:t.shape[1];it(s===f[2],()=>`Error in conv2dDerFilter: depth of input ${s}) must match input depth in filter (${f[2]}.`),it(l===f[3],()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${f[3]}).`),fs("conv2dDerFilter",S,o);const a={x:y,dy:t},r={strides:x,pad:S,dataFormat:C,dimRoundingMode:o,filterShape:f};return pt.runKernel(hm,a,r)}const dE=ct({conv2DBackpropFilter_:cE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function il(c,e,f){if(f==null||f==="linear")return c;if(f==="relu")return Wt(c,zv(e));throw new Error(`Cannot compute gradient for fused activation ${f}.`)}function rl(c,e){let f=e;const x=mv(c.shape,e.shape);return x.length>0&&(f=Ve(f,x)),Nt(f,c.shape)}function al(c,e,f,x){if(e==="linear")return c;if(e==="relu")return sl(c);if(e==="elu")return gv(c);if(e==="relu6")return $v(c);if(e==="prelu")return Dv(c,f);if(e==="leakyrelu")return wv(c,x);if(e==="sigmoid")return ir(c);throw new Error(`Unknown fused activation ${e}.`)}const ol=(c,e)=>!(c>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pE({x:c,filter:e,strides:f,pad:x,dataFormat:S="NHWC",dilations:C=[1,1],dimRoundingMode:o,bias:y,activation:t="linear",preluActivationWeights:s,leakyreluAlpha:l}){if(t=t||"linear",ol(pt.state.gradientDepth,t)===!1){it(S==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${S} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let T=_u(c,e,f,x,S,C,o);return y!=null&&(T=ne(T,y)),al(T,t,s,l)}const a=st(c,"x","conv2d","float32"),r=st(e,"filter","conv2d","float32");let i=a,n=!1;a.rank===3&&(n=!0,i=Nt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),it(i.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${i.rank}.`),it(r.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${r.rank}.`),fs("fused conv2d",x,o);const h=S==="NHWC"?i.shape[3]:i.shape[1];it(r.shape[2]===h,()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${r.shape[2]}.`),it(Dn(f,C),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${f} and dilations '${C}'`);const d=dn(i.shape,r.shape,f,C,x,o);let u;y!=null&&(u=st(y,"bias","fused conv2d"),[u]=qe(u,a),S==="NHWC"?Te(d.outShape,u.shape):(it(u.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${u.shape.length}.`),it(u.shape.length===0||u.shape[0]===d.outChannels||u.shape[0]===1,()=>`Error in fused conv2d: bias shape (${u.shape}) is not compatible with the number of output channels (${d.outChannels})`)));let p;if(s!=null){const T=s.shape;if(it(T.length<=1||T.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${T.length}.`),T.length===1)it(T[0]===1||T[0]===d.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the number of output channels (${d.outChannels}).`);else if(T.length===3)try{Te(T,d.outShape)}catch{const b=`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the output shape of the conv2d (${d.outShape}).`;throw Error(b)}p=st(s,"prelu weights","fused conv2d")}const m=(T,w)=>{it(S==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${S} but only NHWC is currently supported.`);const[b,E,A,R]=w,I=il(T,A,t);it(La(C),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${C}'`);const P=pv(E.shape,I,b,f,x),N=dE(E,I,b.shape,f,x),F=[P,N];if(R!=null){const O=rl(R,I);F.push(O)}return F},v={x:i,filter:r,bias:u,preluActivationWeights:p},g={strides:f,pad:x,dataFormat:S,dilations:C,dimRoundingMode:o,activation:t,leakyreluAlpha:l};return y==null?Zs((w,b,E)=>{let A=pt.runKernel(Na,v,g);return E([b,w,A]),n&&(A=Nt(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:m}})(i,r):Zs((w,b,E,A)=>{let R=pt.runKernel(Na,v,g);return A([b,w,R,E]),n&&(R=Nt(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:m}})(i,r,u)}const mE=ct({fusedConv2d_:pE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vE(c,e,f,x,S,C=[1,1],o){let y=c;c.rank===3&&(y=Nt(c,[1,c.shape[0],c.shape[1],c.shape[2]]));let t=e;t.rank===3&&(t=Nt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const s={x:y,dy:t},l={strides:x,pad:S,dimRoundingMode:o,dilations:C,filterShape:f};return pt.runKernel(fm,s,l)}const gE=ct({depthwiseConv2dNativeBackpropFilter_:vE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xE(c,e,f,x,S,C=[1,1],o){let y=e,t=!1;e.rank===3&&(t=!0,y=Nt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const s={dy:y,filter:f},l={strides:x,pad:S,dimRoundingMode:o,dilations:C,inputShape:c},a=pt.runKernel(cm,s,l);return t?Nt(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const yE=ct({depthwiseConv2dNativeBackpropInput_:xE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TE({x:c,filter:e,strides:f,pad:x,dataFormat:S="NHWC",dilations:C=[1,1],dimRoundingMode:o,bias:y,activation:t="linear",preluActivationWeights:s,leakyreluAlpha:l}){if(ol(pt.state.gradientDepth,t)===!1){let g=bc(c,e,f,x,S,C,o);return y!=null&&(g=ne(g,y)),al(g,t,s,l)}const a=st(c,"x","depthwiseConv2d","float32"),r=st(e,"filter","depthwiseConv2d","float32");let i=a,n=!1;a.rank===3&&(n=!0,i=Nt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),it(i.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${i.rank}.`),it(r.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${r.rank}.`),it(i.shape[3]===r.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${i.shape[3]}) must match the inChannels dimension in filter ${r.shape[2]}.`),C==null&&(C=[1,1]),it(Dn(f,C),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${f} and dilations '${C}'`),fs("fused depthwiseConv2d",x,o);const h=dn(i.shape,r.shape,f,C,x,o,!0);let d;y!=null&&(d=st(y,"bias","fused conv2d"),[d]=qe(d,a),Te(h.outShape,d.shape));let u;s!=null&&(u=st(s,"prelu weights","fused depthwiseConv2d"));const p=(g,T)=>{it(La(C),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${C}'`);const[w,b,E,A]=T,R=il(g,E,t),I=yE(b.shape,R,w,f,x,C,o),P=gE(b,R,w.shape,f,x,C,o);if(A!=null){const N=rl(d,R);return[I,P,N]}return[I,P]},m={x:i,filter:r,bias:d,preluActivationWeights:u},v={strides:f,pad:x,dataFormat:S,dilations:C,dimRoundingMode:o,activation:t,leakyreluAlpha:l};return y==null?Zs((T,w,b)=>{let E=pt.runKernel(Ma,m,v);return b([w,T,E]),n&&(E=Nt(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:p}})(i,r):Zs((T,w,b,E)=>{let A=pt.runKernel(Ma,m,v);return E([w,T,A,b]),n&&(A=Nt(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:p}})(i,r,d)}const SE=ct({fusedDepthwiseConv2d_:TE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CE({a:c,b:e,transposeA:f=!1,transposeB:x=!1,bias:S,activation:C="linear",preluActivationWeights:o,leakyreluAlpha:y=.2}){if(ol(pt.state.gradientDepth,C)===!1){let R=Oe(c,e,f,x);return S!=null&&(R=ne(R,S)),al(R,C,o,y)}let t=st(c,"a","fused matMul"),s=st(e,"b","fused matMul");[t,s]=qe(t,s);const l=f?t.shape[t.rank-2]:t.shape[t.rank-1],a=x?s.shape[s.rank-1]:s.shape[s.rank-2],r=f?t.shape[t.rank-1]:t.shape[t.rank-2],i=x?s.shape[s.rank-2]:s.shape[s.rank-1],n=t.shape.slice(0,-2),h=s.shape.slice(0,-2),d=bt(n),u=bt(h);it(l===a,()=>`Error in fused matMul: inner shapes (${l}) and (${a}) of Tensors with shapes ${t.shape} and ${s.shape} and transposeA=${f} and transposeB=${x} must match.`);const m=Te(t.shape.slice(0,-2),s.shape.slice(0,-2)).concat([r,i]),v=f?Nt(t,[d,l,r]):Nt(t,[d,r,l]),g=x?Nt(s,[u,i,a]):Nt(s,[u,a,i]);let T;S!=null&&(T=st(S,"bias","fused matMul"),[T]=qe(T,t),Te(m,T.shape));let w;o!=null&&(w=st(o,"prelu weights","fused matMul"));const b=(R,I)=>{const[P,N,F,O]=I,D=il(Nt(R,F.shape),F,C);let L,z;if(!f&&!x?(L=Oe(D,N,!1,!0),z=Oe(P,D,!0,!1)):!f&&x?(L=Oe(D,N,!1,!1),z=Oe(D,P,!0,!1)):f&&!x?(L=Oe(N,D,!1,!0),z=Oe(P,D,!1,!1)):(L=Oe(N,D,!0,!0),z=Oe(D,P,!0,!0)),S!=null){const X=rl(O,D);return[L,z,X]}else return[L,z]},E={a:v,b:g,bias:T,preluActivationWeights:w},A={transposeA:f,transposeB:x,activation:C,leakyreluAlpha:y};return S==null?Zs((I,P,N)=>{const F=pt.runKernel(Fa,E,A);return N([I,P,F]),{value:Nt(F,m),gradFunc:b}})(v,g):Zs((I,P,N,F)=>{const O=pt.runKernel(Fa,E,A);return F([I,P,O,N]),{value:Nt(O,m),gradFunc:b}})(v,g,T)}const EE=ct({fusedMatMul_:CE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wE=Object.freeze(Object.defineProperty({__proto__:null,conv2d:mE,depthwiseConv2d:SE,matMul:EE},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bE(c){return zc(c,.54,.46)}const AE=ct({hammingWindow_:bE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RE(c){return zc(c,.5,.5)}const Kv=ct({hannWindow_:RE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IE(c,e,f,x=!1,S=0){let C=0;const o=[];for(;C+e<=c.size;)o.push(me(c,C,e)),C+=f;if(x)for(;C<c.size;){const y=C+e-c.size,t=cn([me(c,C,e-y),Qa([y],S)]);o.push(t),C+=f}return o.length===0?Ci([],[0,e]):Nt(cn(o),[o.length,e])}const jv=ct({frame_:IE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PE(c,e,f,x,S=Kv){x==null&&(x=Yv(e));const C=jv(c,e,f),o=Wt(C,S(e));return Uc(o,x)}const FE=ct({stft_:PE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NE(c,e,f,x,S="bilinear",C=0){const o=st(c,"image","cropAndResize"),y=st(e,"boxes","cropAndResize","float32"),t=st(f,"boxInd","cropAndResize","int32"),s=y.shape[0];it(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),it(y.rank===2&&y.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${s},4] but had shape ${y.shape}.`),it(t.rank===1&&t.shape[0]===s,()=>`Error in cropAndResize: boxInd must be have size [${s}] but had shape ${y.shape}.`),it(x.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${x.length}.`),it(x[0]>=1&&x[1]>=1,()=>`cropSize must be atleast [1,1], but was ${x}`),it(S==="bilinear"||S==="nearest",()=>`method must be bilinear or nearest, but was ${S}`);const l={image:o,boxes:y,boxInd:t},a={method:S,extrapolationValue:C,cropSize:x};return pt.runKernel(fu,l,a)}const ME=ct({cropAndResize_:NE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OE(c){const e=st(c,"image","flipLeftRight","float32");it(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const f={image:e};return pt.runKernel(mu,f,{})}const DE=ct({flipLeftRight_:OE});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LE(c){const e=st(c,"image","grayscaleToRGB"),f=e.rank-1,x=e.shape[f];it(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),it(x===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${x}.`);const S=new Array(e.rank);return S.fill(1,0,f),S[f]=3,Aa(e,S)}const BE=ct({grayscaleToRGB_:LE});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $E(c){const e=st(c,"image","RGBToGrayscale"),f=e.rank-1,x=e.shape[f];it(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),it(x===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${x}.`);const S=e.dtype,C=We(e,"float32"),o=xn([.2989,.587,.114]);let y;switch(e.rank){case 2:y=Br("ij,j->i",C,o);break;case 3:y=Br("ijk,k->ij",C,o);break;case 4:y=Br("ijkl,l->ijk",C,o);break;case 5:y=Br("ijklm,m->ijkl",C,o);break;case 6:y=Br("ijklmn,n->ijklm",C,o);break;default:throw new Error("Not a valid tensor rank.")}return y=is(y,-1),We(y,S)}const GE=ct({rgbToGrayscale_:$E});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UE(c,e,f=0,x=.5){const S=st(c,"image","rotateWithOffset","float32");it(S.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${S.rank}.`);const C={image:S},o={radians:e,fillValue:f,center:x};return pt.runKernel(Zu,C,o)}const VE=ct({rotateWithOffset_:UE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sa(c,e,f,x,S,C){x==null&&(x=.5),S==null&&(S=Number.NEGATIVE_INFINITY),C==null&&(C=0);const o=c.shape[0];return f=Math.min(f,o),it(0<=x&&x<=1,()=>`iouThreshold must be in [0, 1], but was '${x}'`),it(c.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${c.rank}'`),it(c.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${c.shape[1]}`),it(e.rank===1,()=>"scores must be a 1D tensor"),it(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),it(0<=C&&C<=1,()=>`softNmsSigma must be in [0, 1], but was '${C}'`),{maxOutputSize:f,iouThreshold:x,scoreThreshold:S,softNmsSigma:C}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zE(c,e,f,x=.5,S=Number.NEGATIVE_INFINITY){const C=st(c,"boxes","nonMaxSuppression","float32"),o=st(e,"scores","nonMaxSuppression","float32"),y=sa(C,o,f,x,S);f=y.maxOutputSize,x=y.iouThreshold,S=y.scoreThreshold;const t={maxOutputSize:f,iouThreshold:x,scoreThreshold:S};return pt.runKernel(Iu,{boxes:C,scores:o},t)}const kE=ct({nonMaxSuppression_:zE});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WE(c,e,f){const x=XE(c,e,f),S=x<0?-(x+1):x;c.splice(S,0,e)}function XE(c,e,f){return YE(c,e,f||HE)}function HE(c,e){return c>e?1:c<e?-1:0}function YE(c,e,f){let x=0,S=c.length,C=0,o=!1;for(;x<S;){C=x+(S-x>>>1);const y=f(e,c[C]);y>0?x=C+1:(S=C,o=!y)}return o?x:-x-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zv(c,e,f,x,S){return kc(c,e,f,x,S,0)}function Qv(c,e,f,x,S,C){return kc(c,e,f,x,S,0,!1,C,!0)}function Jv(c,e,f,x,S,C){return kc(c,e,f,x,S,C,!0)}function kc(c,e,f,x,S,C,o=!1,y=!1,t=!1){const s=[];for(let d=0;d<e.length;d++)e[d]>S&&s.push({score:e[d],boxIndex:d,suppressBeginIndex:0});s.sort(kd);const l=C>0?-.5/C:0,a=[],r=[];for(;a.length<f&&s.length>0;){const d=s.pop(),{score:u,boxIndex:p,suppressBeginIndex:m}=d;if(u<S)break;let v=!1;for(let g=a.length-1;g>=m;--g){const T=KE(c,p,a[g]);if(T>=x){v=!0;break}if(d.score=d.score*jE(x,l,T),d.score<=S)break}d.suppressBeginIndex=a.length,v||(d.score===u?(a.push(p),r.push(d.score)):d.score>S&&WE(s,d,kd))}const i=a.length,n=f-i;y&&n>0&&(a.push(...new Array(n).fill(0)),r.push(...new Array(n).fill(0)));const h={selectedIndices:a};return o&&(h.selectedScores=r),t&&(h.validOutputs=i),h}function KE(c,e,f){const x=c.subarray(e*4,e*4+4),S=c.subarray(f*4,f*4+4),C=Math.min(x[0],x[2]),o=Math.min(x[1],x[3]),y=Math.max(x[0],x[2]),t=Math.max(x[1],x[3]),s=Math.min(S[0],S[2]),l=Math.min(S[1],S[3]),a=Math.max(S[0],S[2]),r=Math.max(S[1],S[3]),i=(y-C)*(t-o),n=(a-s)*(r-l);if(i<=0||n<=0)return 0;const h=Math.max(C,s),d=Math.max(o,l),u=Math.min(y,a),p=Math.min(t,r),m=Math.max(u-h,0)*Math.max(p-d,0);return m/(i+n-m)}function jE(c,e,f){const x=Math.exp(e*f*f);return f<=c?x:0}function kd(c,e){return c.score-e.score||c.score===e.score&&e.boxIndex-c.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ZE(c,e,f,x=.5,S=Number.NEGATIVE_INFINITY){const C=st(c,"boxes","nonMaxSuppressionAsync"),o=st(e,"scores","nonMaxSuppressionAsync"),y=sa(C,o,f,x,S);f=y.maxOutputSize,x=y.iouThreshold,S=y.scoreThreshold;const t=await Promise.all([C.data(),o.data()]),s=t[0],l=t[1],{selectedIndices:a}=Zv(s,l,f,x,S);return C!==c&&C.dispose(),o!==e&&o.dispose(),xn(a,"int32")}const QE=ZE;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JE(c,e,f,x=.5,S=Number.NEGATIVE_INFINITY,C=0){const o=st(c,"boxes","nonMaxSuppression"),y=st(e,"scores","nonMaxSuppression"),t=sa(o,y,f,x,S,C);f=t.maxOutputSize,x=t.iouThreshold,S=t.scoreThreshold,C=t.softNmsSigma;const s={boxes:o,scores:y},l={maxOutputSize:f,iouThreshold:x,scoreThreshold:S,softNmsSigma:C},a=pt.runKernel(Fu,s,l);return{selectedIndices:a[0],selectedScores:a[1]}}const qE=ct({nonMaxSuppressionWithScore_:JE});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _E(c,e,f,x=.5,S=Number.NEGATIVE_INFINITY,C=0){const o=st(c,"boxes","nonMaxSuppressionAsync"),y=st(e,"scores","nonMaxSuppressionAsync"),t=sa(o,y,f,x,S,C);f=t.maxOutputSize,x=t.iouThreshold,S=t.scoreThreshold,C=t.softNmsSigma;const s=await Promise.all([o.data(),y.data()]),l=s[0],a=s[1],{selectedIndices:r,selectedScores:i}=Jv(l,a,f,x,S,C);return o!==c&&o.dispose(),y!==e&&y.dispose(),{selectedIndices:xn(r,"int32"),selectedScores:xn(i)}}const tw=_E;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ew(c,e,f,x=.5,S=Number.NEGATIVE_INFINITY,C=!1){const o=st(c,"boxes","nonMaxSuppression"),y=st(e,"scores","nonMaxSuppression"),t=sa(o,y,f,x,S,null),s=t.maxOutputSize,l=t.iouThreshold,a=t.scoreThreshold,r={boxes:o,scores:y},i={maxOutputSize:s,iouThreshold:l,scoreThreshold:a,padToMaxOutputSize:C},n=pt.runKernel(Pu,r,i);return{selectedIndices:n[0],validOutputs:n[1]}}const nw=ct({nonMaxSuppressionPadded_:ew});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function sw(c,e,f,x=.5,S=Number.NEGATIVE_INFINITY,C=!1){const o=st(c,"boxes","nonMaxSuppressionAsync"),y=st(e,"scores","nonMaxSuppressionAsync"),t=sa(o,y,f,x,S,null),s=t.maxOutputSize,l=t.iouThreshold,a=t.scoreThreshold,[r,i]=await Promise.all([o.data(),y.data()]),{selectedIndices:n,validOutputs:h}=Qv(r,i,s,l,a,C);return o!==c&&o.dispose(),y!==e&&y.dispose(),{selectedIndices:xn(n,"int32"),validOutputs:Ce(h,"int32")}}const iw=sw;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rw(c,e,f=!1,x=!1){const S=st(c,"images","resizeBilinear");it(S.rank===3||S.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${S.rank}.`),it(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),it(x===!1||f===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let C=S,o=!1;S.rank===3&&(o=!0,C=Nt(S,[1,S.shape[0],S.shape[1],S.shape[2]]));const y={images:C},t={alignCorners:f,halfPixelCenters:x,size:e},s=pt.runKernel(Bu,y,t);return o?Nt(s,[s.shape[1],s.shape[2],s.shape[3]]):s}const aw=ct({resizeBilinear_:rw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ow(c,e,f=!1,x=!1){const S=st(c,"images","resizeNearestNeighbor");it(S.rank===3||S.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${S.rank}.`),it(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),it(S.dtype==="float32"||S.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),it(x===!1||f===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let C=S,o=!1;S.rank===3&&(o=!0,C=Nt(S,[1,S.shape[0],S.shape[1],S.shape[2]]));const y={images:C},t={alignCorners:f,halfPixelCenters:x,size:e},s=pt.runKernel(Lu,y,t);return o?Nt(s,[s.shape[1],s.shape[2],s.shape[3]]):s}const uw=ct({resizeNearestNeighbor_:ow});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lw(c,e="binary",f=!1,x=.5){const S=st(c,"image","threshold"),C=.2989,o=.587,y=.114,t=S.shape[0]*S.shape[1];let s=Wt(xn([x]),255),l,a,r,i;if(it(S.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${S.rank}.`),it(S.shape[2]===3||S.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${S.shape[2]}.`),it(S.dtype==="int32"||S.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${S.dtype}.`),it(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),S.shape[2]===3){[l,a,r]=Va(S,[1,1,1],-1);const d=Wt(l,C),u=Wt(a,o),p=Wt(r,y);i=ne(ne(d,u),p)}else i=c;if(e==="otsu"){const d=cv(We(Gv(i),"int32"),ys([]),256);s=hw(d,t)}const n=f?Rc(i,s):el(i,s);return We(Wt(n,255),"int32")}function hw(c,e){let f=xn([-1]),x=xn([0]),S=xn([0]),C,o,y,t,s,l;for(let a=0;a<c.size-1;a++){C=me(c,0,a+1),o=me(c,a+1),s=ye(Ve(C),e),l=ye(Ve(o),e);const r=Ve(Wt(C,Ga(0,C.size)));y=ye(r,Ve(C));const i=Qa(o.shape,C.size),n=ne(Ga(0,o.size),i),h=Wt(o,n);t=ye(Ve(h),Ve(o));const d=ve(y,t),u=ve(y,t),p=Wt(s,l);S=Wt(Wt(p,d),u);const m=el(S,x);x=Si(m,S,x),f=Si(m,xn([a]),f)}return f}const fw=ct({threshold_:lw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cw(c,e,f="nearest",x="constant",S=0,C){const o=st(c,"image","transform","float32"),y=st(e,"transforms","transform","float32");it(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),it(y.rank===2&&(y.shape[0]===o.shape[0]||y.shape[0]===1)&&y.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),it(C==null||C.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${C}.`);const t={image:o,transforms:y},s={interpolation:f,fillMode:x,fillValue:S,outputShape:C};return pt.runKernel(Ku,t,s)}const dw=ct({transform_:cw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pw(c,e,f){const x=st(c,"a","bandPart");it(x.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${x.rank}.`);const S=x.shape,[C,o]=x.shape.slice(-2);let y,t;typeof e=="number"?(it(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),it(e<=C,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${C}).`),y=st(e<0?C:e,"numLower","bandPart")):(it(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),y=Si(rh(e,0),C,Bo(e,C))),typeof f=="number"?(it(f%1===0,()=>`bandPart(): numUpper must be an integer, got ${f}.`),it(f<=o,()=>`bandPart(): numUpper (${f}) must not be greater than the number of columns (${o}).`),t=st(f<0?o:f,"numUpper","bandPart")):(it(f.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),t=Si(rh(f,0),o,Bo(f,o)));const s=Nt(Ga(0,C,1,"int32"),[-1,1]),l=Ga(0,o,1,"int32"),a=ve(s,l),r=Do(Rc(a,y),Ev(a,Fs(t))),i=hr([C,o],x.dtype);return Nt(Qs(yr(Nt(x,[-1,C,o])).map(n=>Si(r,n,i))),S)}const mw=ct({bandPart_:pw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vw(c){let e;if(Array.isArray(c)){e=!1,it(c!=null&&c.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const S=c[0].shape[0];for(let C=1;C<c.length;++C)it(c[C].shape[0]===S,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${c[C].shape[0]} vs. ${S})`)}else e=!0,c=Va(c,c.shape[0],0).map(S=>on(S,[0]));it(c.length<=c[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${c.length}) exceeds number of dimensions (${c[0].shape[0]}).`);const f=[],x=c;for(let S=0;S<c.length;++S)f.push(pt.tidy(()=>{let C=x[S];if(S>0)for(let o=0;o<S;++o){const y=Wt(Ve(Wt(f[o],C)),f[o]);C=ve(C,y)}return ye(C,tl(C,"euclidean"))}));return e?Qs(f,0):f}const gw=ct({gramSchmidt_:vw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xw(c,e=!1){if(it(c.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${c.rank}`),c.rank===2)return Wd(c,e);{const f=c.shape.slice(0,c.shape.length-2).reduce((t,s)=>t*s),x=yr(Nt(c,[f,c.shape[c.shape.length-2],c.shape[c.shape.length-1]]),0),S=[],C=[];x.forEach(t=>{const[s,l]=Wd(t,e);S.push(s),C.push(l)});const o=Nt(Qs(S,0),c.shape),y=Nt(Qs(C,0),c.shape);return[o,y]}}function Wd(c,e=!1){return pt.tidy(()=>{it(c.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${c.shape.length}D Tensor.`);const f=c.shape[0],x=c.shape[1];let S=Tv(f),C=Ti(c);const o=Ci([[1]],[1,1]);let y=Ti(o);const t=f>=x?x:f;for(let s=0;s<t;++s){const l=C,a=y,r=S;[y,C,S]=pt.tidy(()=>{const i=me(C,[s,s],[f-s,1]),n=tl(i),h=me(C,[s,s],[1,1]),d=Si(el(h,0),Ci([[-1]]),Ci([[1]])),u=ve(h,Wt(d,n)),p=ye(i,u);p.shape[0]===1?y=Ti(o):y=cn([o,me(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);const m=Fs(ye(Oe(d,u),n)),v=me(C,[s,0],[f-s,x]),g=Wt(m,y),T=ah(y);if(s===0)C=ve(v,Oe(g,Oe(T,v)));else{const E=ve(v,Oe(g,Oe(T,v)));C=cn([me(C,[0,0],[s,x]),E],0)}const w=ah(g),b=me(S,[0,s],[f,S.shape[1]-s]);if(s===0)S=ve(b,Oe(Oe(b,y),w));else{const E=ve(b,Oe(Oe(b,y),w));S=cn([me(S,[0,0],[f,s]),E],1)}return[y,C,S]}),Ke([l,a,r])}return!e&&f>x&&(S=me(S,[0,0],[f,x]),C=me(C,[0,0],[x,x])),[S,C]})}const yw=ct({qr_:xw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Nn;(function(c){c[c.NONE=0]="NONE",c[c.MEAN=1]="MEAN",c[c.SUM=2]="SUM",c[c.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Nn||(Nn={}));function Tw(c,e,f=Nn.SUM_BY_NONZERO_WEIGHTS){const x=st(c,"losses","computeWeightedLoss");let S=null;e!=null&&(S=st(e,"weights","computeWeightedLoss"));const C=S==null?x:Wt(x,S);if(f===Nn.NONE)return C;if(f===Nn.SUM)return Ve(C);if(f===Nn.MEAN){if(S==null)return Lo(C);{const o=x.size/S.size,y=ye(Ve(C),Ve(S));return o>1?ye(y,Ce(o)):y}}if(f===Nn.SUM_BY_NONZERO_WEIGHTS){if(S==null)return ye(Ve(C),Ce(x.size));{const o=Wt(S,er(x.shape)),y=We(Ve(Mv(o,Ce(0))),"float32");return ye(Ve(C),y)}}throw Error(`Unknown reduction: ${f}`)}const ti=ct({computeWeightedLoss_:Tw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sw(c,e,f,x=Nn.SUM_BY_NONZERO_WEIGHTS){const S=st(c,"labels","absoluteDifference"),C=st(e,"predictions","absoluteDifference");let o=null;f!=null&&(o=st(f,"weights","absoluteDifference")),kn(S.shape,C.shape,"Error in absoluteDifference: ");const y=Xn(ve(S,C));return ti(y,o,x)}const Cw=ct({absoluteDifference_:Sw});function Ew(c,e,f,x,S=Nn.SUM_BY_NONZERO_WEIGHTS){const C=st(c,"labels","cosineDistance"),o=st(e,"predictions","cosineDistance");let y=null;x!=null&&(y=st(x,"weights","cosineDistance")),kn(C.shape,o.shape,"Error in cosineDistance: ");const t=Ce(1),s=ve(t,Ve(Wt(C,o),f,!0));return ti(s,y,S)}const ww=ct({cosineDistance_:Ew});function bw(c,e,f,x=Nn.SUM_BY_NONZERO_WEIGHTS){let S=st(c,"labels","hingeLoss");const C=st(e,"predictions","hingeLoss");let o=null;f!=null&&(o=st(f,"weights","hingeLoss")),kn(S.shape,C.shape,"Error in hingeLoss: ");const y=Ce(1);S=ve(Wt(Ce(2),S),y);const t=sl(ve(y,Wt(S,C)));return ti(t,o,x)}const Aw=ct({hingeLoss_:bw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rw(c,e,f,x=1,S=Nn.SUM_BY_NONZERO_WEIGHTS){const C=st(c,"labels","huberLoss"),o=st(e,"predictions","huberLoss");let y=null;f!=null&&(y=st(f,"weights","huberLoss")),kn(C.shape,o.shape,"Error in huberLoss: ");const t=Ce(x),s=Xn(ve(o,C)),l=Bo(s,t),a=ve(s,l),r=ne(Wt(Ce(.5),Ts(l)),Wt(t,a));return ti(r,y,S)}const Iw=ct({huberLoss_:Rw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pw(c,e,f,x=1e-7,S=Nn.SUM_BY_NONZERO_WEIGHTS){const C=st(c,"labels","logLoss"),o=st(e,"predictions","logLoss");let y=null;f!=null&&(y=st(f,"weights","logLoss")),kn(C.shape,o.shape,"Error in logLoss: ");const t=Ce(1),s=Ce(x),l=Fs(Wt(C,$a(ne(o,s)))),a=Wt(ve(t,C),$a(ne(ve(t,o),s))),r=ve(l,a);return ti(r,y,S)}const Fw=ct({logLoss_:Pw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nw(c,e,f,x=Nn.SUM_BY_NONZERO_WEIGHTS){const S=st(c,"labels","meanSquaredError"),C=st(e,"predictions","meanSquaredError");let o=null;f!=null&&(o=st(f,"weights","meanSquaredError")),kn(S.shape,C.shape,"Error in meanSquaredError: ");const y=Vv(S,C);return ti(y,o,x)}const Mw=ct({meanSquaredError_:Nw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ow(c,e){const f=st(c,"labels","sigmoidCrossEntropyWithLogits"),x=st(e,"logits","sigmoidCrossEntropyWithLogits");kn(f.shape,x.shape,"Error in sigmoidCrossEntropyWithLogits: ");const S=sl(x),C=Wt(x,f),o=bv(js(Fs(Xn(x))));return ne(ve(S,C),o)}function Dw(c,e,f,x=0,S=Nn.SUM_BY_NONZERO_WEIGHTS){let C=st(c,"multiClassLabels","sigmoidCrossEntropy");const o=st(e,"logits","sigmoidCrossEntropy");let y=null;if(f!=null&&(y=st(f,"weights","sigmoidCrossEntropy")),kn(C.shape,o.shape,"Error in sigmoidCrossEntropy: "),x>0){const s=Ce(x),l=Ce(1),a=Ce(.5);C=ne(Wt(C,ve(l,s)),Wt(a,s))}const t=Ow(C,o);return ti(t,y,S)}const Lw=ct({sigmoidCrossEntropy_:Dw});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bw(c,e,f=-1){if(f===-1&&(f=e.rank-1),f!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${f}`);return Zs((S,C,o)=>{const t=Rv(C,[f],!0),s=ve(We(C,"float32"),t);o([S,s]);const l=Fs(Wt(s,S));return{value:Ve(l,[f]),gradFunc:(i,n)=>{const[h,d]=n,u=rn(i.shape,[f]);return[Wt(Nt(i,u),ve(We(h,"float32"),js(d))),Wt(Nt(i,u),ve(js(d),We(h,"float32")))]}}})(c,e)}function $w(c,e,f,x=0,S=Nn.SUM_BY_NONZERO_WEIGHTS){let C=st(c,"onehotLabels","softmaxCrossEntropy");const o=st(e,"logits","softmaxCrossEntropy");let y=null;if(f!=null&&(y=st(f,"weights","softmaxCrossEntropy")),kn(C.shape,o.shape,"Error in softmaxCrossEntropy: "),x>0){const s=Ce(x),l=Ce(1),a=Ce(C.shape[1]);C=ne(Wt(C,ve(l,s)),ye(s,a))}const t=Bw(C,o);return ti(t,y,S)}const Gw=ct({softmaxCrossEntropy_:$w});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uw(c,e,f,x){const S=st(c,"indices","sparseFillEmptyRows","int32"),C=st(e,"values","sparseFillEmptyRows"),o=st(f,"denseShape","sparseFillEmptyRows","int32"),y=st(x,"defaultValue","sparseFillEmptyRows",C.dtype);if(S.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${S.shape}`);if(C.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${C.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(y.rank!==0)throw new Error(`Default value should be a scalar but received shape ${y.shape}`);const t={indices:S,values:C,denseShape:o,defaultValue:y},s=pt.runKernel(oc,t);return{outputIndices:s[0],outputValues:s[1],emptyRowIndicator:s[2],reverseIndexMap:s[3]}}const Vw=ct({sparseFillEmptyRows_:Uw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zw(c,e,f){const x=st(c,"inputIndices","sparseReshape","int32"),S=st(e,"inputShape","sparseReshape","int32"),C=st(f,"newShape","sparseReshape","int32");if(x.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${x.shape}`);if(S.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${S.shape}`);if(C.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${C.shape}`);const o={inputIndices:x,inputShape:S,newShape:C},y=pt.runKernel(Wu,o);return{outputIndices:y[0],outputShape:y[1]}}const kw=ct({sparseReshape_:zw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ww(c,e,f){const x=st(c,"data","sparseSegmentMean"),S=st(e,"indices","sparseSegmentMean","int32"),C=st(f,"segmentIds","sparseSegmentMean","int32");if(x.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(S.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${S.shape}`);if(C.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${C.shape}`);const o={data:x,indices:S,segmentIds:C};return pt.runKernel(uc,o)}const Xw=ct({sparseSegmentMean_:Ww});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hw(c,e,f){const x=st(c,"data","sparseSegmentSum"),S=st(e,"indices","sparseSegmentSum","int32"),C=st(f,"segmentIds","sparseSegmentSum","int32");if(x.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(S.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${S.shape}`);if(C.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${C.shape}`);const o={data:x,indices:S,segmentIds:C};return pt.runKernel(lc,o)}const Yw=ct({sparseSegmentSum_:Hw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kw(c,e,f,x,S,C,o,y){const t=st(c,"data","stringNGrams","string");if(t.dtype!=="string")throw new Error("Data must be of datatype string");if(t.shape.length!==1)throw new Error(`Data must be a vector, saw: ${t.shape}`);const s=st(e,"dataSplits","stringNGrams");if(s.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const l={separator:f,nGramWidths:x,leftPad:S,rightPad:C,padWidth:o,preserveShortSequences:y},a={data:t,dataSplits:s},r=pt.runKernel(fc,a,l);return{nGrams:r[0],nGramsSplits:r[1]}}const jw=ct({stringNGrams_:Kw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zw(c,e,f=!0){const x=st(c,"input","stringSplit","string"),S=st(e,"delimiter","stringSplit","string");if(x.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${x.shape}`);if(S.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${S.shape}`);const C={skipEmpty:f},o={input:x,delimiter:S},y=pt.runKernel(cc,o,C);return{indices:y[0],values:y[1],shape:y[2]}}const Qw=ct({stringSplit_:Zw});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jw(c,e){const f=st(c,"input","stringToHashBucketFast","string"),x={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const S={input:f};return pt.runKernel(dc,S,x)}const qw=ct({stringToHashBucketFast_:Jw});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _w(c,e,f,x=!0){const S=st(c,"input","staticRegexReplace","string"),C={pattern:e,rewrite:f,replaceGlobal:x};return pt.runKernel(Am,{x:S},C)}const t6=ct({staticRegexReplace_:_w});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e6={fft:Gc,ifft:$o,rfft:Uc,irfft:Uv},n6={hammingWindow:AE,hannWindow:Kv,frame:jv,stft:FE},ia={flipLeftRight:DE,grayscaleToRGB:BE,resizeNearestNeighbor:uw,resizeBilinear:aw,rgbToGrayscale:GE,rotateWithOffset:VE,cropAndResize:ME,nonMaxSuppression:kE,nonMaxSuppressionAsync:QE,nonMaxSuppressionWithScore:qE,nonMaxSuppressionWithScoreAsync:tw,nonMaxSuppressionPadded:nw,nonMaxSuppressionPaddedAsync:iw,threshold:fw,transform:dw},s6={bandPart:mw,gramSchmidt:gw,qr:yw},i6={absoluteDifference:Cw,computeWeightedLoss:ti,cosineDistance:ww,hingeLoss:Aw,huberLoss:Iw,logLoss:Fw,meanSquaredError:Mw,sigmoidCrossEntropy:Lw,softmaxCrossEntropy:Gw},r6={sparseFillEmptyRows:Vw,sparseReshape:kw,sparseSegmentMean:Xw,sparseSegmentSum:Yw},a6={stringNGrams:jw,stringSplit:Qw,stringToHashBucketFast:qw,staticRegexReplace:t6};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o6=new Map,u6=new Map;class l6{getClassName(){return this.constructor.className}static fromConfig(e,f){return new e(f)}}class Zi{constructor(){this.classNameMap={}}static getMap(){return Zi.instance==null&&(Zi.instance=new Zi),Zi.instance}static register(e){Zi.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function h6(c,e,f){it(c.className!=null,()=>"Class being registered does not have the static className property defined."),it(typeof c.className=="string",()=>"className is required to be a string, but got type "+typeof c.className),it(c.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof f>"u"&&(f=c.className);const x=f,S=e+">"+x;return Zi.register(c),o6.set(S,c),u6.set(c,S),c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tr extends l6{minimize(e,f=!1,x){const{value:S,grads:C}=this.computeGradients(e,x);if(x!=null){const o=x.map(y=>({name:y.name,tensor:C[y.name]}));this.applyGradients(o)}else this.applyGradients(C);return Ke(C),f?S:(S.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,f){return QT(e,f)}dispose(){this.iterations_!=null&&Ke(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ce(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Tr,Symbol.hasInstance,{value:c=>c.minimize!=null&&c.computeGradients!=null&&c.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f6 extends Tr{static get className(){return"Adadelta"}constructor(e,f,x=null){super(),this.learningRate=e,this.rho=f,this.epsilon=x,this.accumulatedGrads=[],this.accumulatedUpdates=[],x==null&&(this.epsilon=pt.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(x=>x.name):Object.keys(e)).forEach((x,S)=>{const C=pt.registeredVariables[x],o=!1;this.accumulatedGrads[S]==null&&(this.accumulatedGrads[S]={originalName:`${x}/accum_grad`,variable:de(()=>jn(C).variable(o))}),this.accumulatedUpdates[S]==null&&(this.accumulatedUpdates[S]={originalName:`${x}/accum_var`,variable:de(()=>jn(C).variable(o))});const y=Array.isArray(e)?e[S].tensor:e[x];if(y==null)return;const t=this.accumulatedGrads[S].variable,s=this.accumulatedUpdates[S].variable;de(()=>{const l=ne(Wt(t,this.rho),Wt(Ts(y),1-this.rho)),a=Wt(ye(Ks(ne(s,this.epsilon)),Ks(ne(t,this.epsilon))),y),r=ne(Wt(s,this.rho),Wt(Ts(a),1-this.rho));t.assign(l),s.assign(r);const i=ne(Wt(a,-this.learningRate),C);C.assign(i)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Ke(this.accumulatedGrads.map(e=>e.variable)),Ke(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(f=>({name:f.originalName,tensor:f.variable})))}async setWeights(e){e=await this.extractIterations(e);const f=e.length/2,x=!1;this.accumulatedGrads=e.slice(0,f).map(S=>({originalName:S.name,variable:S.tensor.variable(x)})),this.accumulatedUpdates=e.slice(f,f*2).map(S=>({originalName:S.name,variable:S.tensor.variable(x)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,f){return new e(f.learningRate,f.rho,f.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c6 extends Tr{static get className(){return"Adagrad"}constructor(e,f=.1){super(),this.learningRate=e,this.initialAccumulatorValue=f,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(x=>x.name):Object.keys(e)).forEach((x,S)=>{const C=pt.registeredVariables[x];this.accumulatedGrads[S]==null&&(this.accumulatedGrads[S]={originalName:`${x}/accumulator`,variable:de(()=>Qa(C.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[S].tensor:e[x];if(o==null)return;const y=this.accumulatedGrads[S].variable;de(()=>{const t=ne(y,Ts(o));y.assign(t);const s=ne(Wt(ye(o,Ks(ne(t,pt.backend.epsilon()))),-this.learningRate),C);C.assign(s)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Ke(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const f=!1;this.accumulatedGrads=e.map(x=>({originalName:x.name,variable:x.tensor.variable(f)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,f){return new e(f.learningRate,f.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d6 extends Tr{static get className(){return"Adam"}constructor(e,f,x,S=null){super(),this.learningRate=e,this.beta1=f,this.beta2=x,this.epsilon=S,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],de(()=>{this.accBeta1=Ce(f).variable(),this.accBeta2=Ce(x).variable()}),S==null&&(this.epsilon=pt.backend.epsilon())}applyGradients(e){const f=Array.isArray(e)?e.map(x=>x.name):Object.keys(e);de(()=>{const x=ve(1,this.accBeta1),S=ve(1,this.accBeta2);f.forEach((C,o)=>{const y=pt.registeredVariables[C],t=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${C}/m`,variable:de(()=>jn(y).variable(t))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${C}/v`,variable:de(()=>jn(y).variable(t))});const s=Array.isArray(e)?e[o].tensor:e[C];if(s==null)return;const l=this.accumulatedFirstMoment[o].variable,a=this.accumulatedSecondMoment[o].variable,r=ne(Wt(l,this.beta1),Wt(s,1-this.beta1)),i=ne(Wt(a,this.beta2),Wt(Ts(s),1-this.beta2)),n=ye(r,x),h=ye(i,S);l.assign(r),a.assign(i);const d=ne(Wt(ye(n,ne(Ks(h),this.epsilon)),-this.learningRate),y);y.assign(d)}),this.accBeta1.assign(Wt(this.accBeta1,this.beta1)),this.accBeta2.assign(Wt(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Ke(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(f=>({name:f.originalName,tensor:f.variable})))}async setWeights(e){e=await this.extractIterations(e),de(()=>{this.accBeta1.assign(Ba(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ba(this.beta2,this.iterations_+1))});const f=e.length/2,x=!1;this.accumulatedFirstMoment=e.slice(0,f).map(S=>({originalName:S.name,variable:S.tensor.variable(x)})),this.accumulatedSecondMoment=e.slice(f,f*2).map(S=>({originalName:S.name,variable:S.tensor.variable(x)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,f){return new e(f.learningRate,f.beta1,f.beta2,f.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p6 extends Tr{static get className(){return"Adamax"}constructor(e,f,x,S=null,C=0){super(),this.learningRate=e,this.beta1=f,this.beta2=x,this.epsilon=S,this.decay=C,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],de(()=>{this.iteration=Ce(0).variable(),this.accBeta1=Ce(f).variable()}),S==null&&(this.epsilon=pt.backend.epsilon())}applyGradients(e){const f=Array.isArray(e)?e.map(x=>x.name):Object.keys(e);de(()=>{const x=ve(1,this.accBeta1),S=ye(-this.learningRate,ne(Wt(this.iteration,this.decay),1));f.forEach((C,o)=>{const y=pt.registeredVariables[C],t=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${C}/m`,variable:jn(y).variable(t)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${C}/v`,variable:jn(y).variable(t)});const s=Array.isArray(e)?e[o].tensor:e[C];if(s==null)return;const l=this.accumulatedFirstMoment[o].variable,a=this.accumulatedWeightedInfNorm[o].variable,r=ne(Wt(l,this.beta1),Wt(s,1-this.beta1)),i=Wt(a,this.beta2),n=Xn(s),h=Nv(i,n);l.assign(r),a.assign(h);const d=ne(Wt(ye(S,x),ye(r,ne(h,this.epsilon))),y);y.assign(d)}),this.iteration.assign(ne(this.iteration,1)),this.accBeta1.assign(Wt(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Ke(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,f){return new e(f.learningRate,f.beta1,f.beta2,f.epsilon,f.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qv extends Tr{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(x=>x.name):Object.keys(e)).forEach((x,S)=>{const C=Array.isArray(e)?e[S].tensor:e[x];if(C==null)return;const o=pt.registeredVariables[x];de(()=>{const y=ne(Wt(this.c,C),o);o.assign(y)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Is(Ce(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,f){return new e(f.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m6 extends qv{static get className(){return"Momentum"}constructor(e,f,x=!1){super(e),this.learningRate=e,this.momentum=f,this.useNesterov=x,this.accumulations=[],this.m=Ce(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(x=>x.name):Object.keys(e)).forEach((x,S)=>{const C=pt.registeredVariables[x];this.accumulations[S]==null&&(this.accumulations[S]={originalName:`${x}/momentum`,variable:de(()=>jn(C).variable(!1))});const o=this.accumulations[S].variable,y=Array.isArray(e)?e[S].tensor:e[x];y!=null&&de(()=>{let t;const s=ne(Wt(this.m,o),y);this.useNesterov?t=ne(Wt(this.c,ne(y,Wt(s,this.m))),C):t=ne(Wt(this.c,s),C),o.assign(s),C.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Ke(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const f=!1;this.accumulations=e.map(x=>({originalName:x.name,variable:x.tensor.variable(f)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,f){return new e(f.learningRate,f.momentum,f.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v6 extends Tr{static get className(){return"RMSProp"}constructor(e,f=.9,x=0,S=null,C=!1){if(super(),this.learningRate=e,this.decay=f,this.momentum=x,this.epsilon=S,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=C,S==null&&(this.epsilon=pt.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(x=>x.name):Object.keys(e)).forEach((x,S)=>{const C=pt.registeredVariables[x],o=!1;this.accumulatedMeanSquares[S]==null&&(this.accumulatedMeanSquares[S]={originalName:`${x}/rms`,variable:de(()=>jn(C).variable(o))}),this.accumulatedMoments[S]==null&&(this.accumulatedMoments[S]={originalName:`${x}/momentum`,variable:de(()=>jn(C).variable(o))}),this.accumulatedMeanGrads[S]==null&&this.centered&&(this.accumulatedMeanGrads[S]={originalName:`${x}/mg`,variable:de(()=>jn(C).variable(o))});const y=Array.isArray(e)?e[S].tensor:e[x];if(y==null)return;const t=this.accumulatedMeanSquares[S].variable,s=this.accumulatedMoments[S].variable;de(()=>{const l=ne(Wt(t,this.decay),Wt(Ts(y),1-this.decay));if(this.centered){const a=this.accumulatedMeanGrads[S].variable,r=ne(Wt(a,this.decay),Wt(y,1-this.decay)),i=ye(Wt(y,this.learningRate),Ks(ve(l,ne(Ts(r),this.epsilon)))),n=ne(Wt(s,this.momentum),i);t.assign(l),a.assign(r),s.assign(n);const h=ve(C,n);C.assign(h)}else{const a=ne(Wt(t,this.decay),Wt(Ts(y),1-this.decay)),r=ne(Wt(s,this.momentum),ye(Wt(y,this.learningRate),Ks(ne(a,this.epsilon))));t.assign(a),s.assign(r);const i=ve(C,r);C.assign(i)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Ke(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Ke(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Ke(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(f=>({name:f.originalName,tensor:f.variable})))}async setWeights(e){e=await this.extractIterations(e);const f=this.centered?e.length/3:e.length/2,x=!1;this.accumulatedMeanSquares=e.slice(0,f).map(S=>({originalName:S.name,variable:S.tensor.variable(x)})),this.accumulatedMoments=e.slice(f,f*2).map(S=>({originalName:S.name,variable:S.tensor.variable(x)})),this.centered&&(this.accumulatedMeanGrads=e.slice(f*2,f*3).map(S=>({originalName:S.name,variable:S.tensor.variable(x)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,f){return new e(f.learningRate,f.decay,f.momentum,f.epsilon,f.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6=[f6,c6,d6,p6,m6,v6,qv];function x6(){for(const c of g6)h6(c)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y6="model",T6=".json",S6=".weights.bin";function Xd(c){return new Promise(e=>setTimeout(e)).then(c)}class cr{constructor(e){if(!St().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(cr.URL_SCHEME)&&(e=e.slice(cr.URL_SCHEME.length)),(e==null||e.length===0)&&(e=y6),this.modelJsonFileName=e+T6,this.weightDataFileName=e+S6}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const f=ws.join(e.weightData),x=window.URL.createObjectURL(new Blob([f],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const S=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],C=Jm(e,S),o=window.URL.createObjectURL(new Blob([JSON.stringify(C)],{type:"application/json"})),y=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(y.download=this.modelJsonFileName,y.href=o,await Xd(()=>y.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const t=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=x,await Xd(()=>t.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:ja(e)}}}}cr.URL_SCHEME="downloads://";class C6{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,f)=>{const x=new FileReader;x.onload=S=>{const C=JSON.parse(S.target.result),o=C.modelTopology;if(o==null){f(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(C.weightsManifest==null){f(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const t=Ec(C,s=>this.loadWeights(s));e(t)},x.onerror=S=>f(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),x.readAsText(this.jsonFile)})}loadWeights(e){const f=[],x=[];for(const o of e)f.push(...o.weights),x.push(...o.paths);const S=this.checkManifestAndWeightFiles(e),C=x.map(o=>this.loadWeightsFile(o,S[o]));return Promise.all(C).then(o=>[f,o])}loadWeightsFile(e,f){return new Promise((x,S)=>{const C=new FileReader;C.onload=o=>{const y=o.target.result;x(y)},C.onerror=o=>S(`Failed to weights data from file of path '${e}'.`),C.readAsArrayBuffer(f)})}checkManifestAndWeightFiles(e){const f=[],x=this.weightsFiles.map(C=>zd(C.name)),S={};for(const C of e)C.paths.forEach(o=>{const y=zd(o);if(f.indexOf(y)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${y}'`);if(f.push(y),x.indexOf(y)===-1)throw new Error(`Weight file with basename '${y}' is not provided.`);S[o]=this.weightsFiles[x.indexOf(y)]});if(f.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${f.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return S}}const E6=c=>St().getBool("IS_BROWSER")&&!Array.isArray(c)&&c.startsWith(cr.URL_SCHEME)?w6(c.slice(cr.URL_SCHEME.length)):null;Ye.registerSaveRouter(E6);function w6(c="model"){return new cr(c)}function b6(c){return new C6(c)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hd(c,e,f,x){o(c),f=f??0,x=x??1,y(f,x);let S=0;const C=t=>(t.then(s=>{const l=f+ ++S/c.length*(x-f);return e(l),s}),t);function o(t){it(t!=null&&Array.isArray(t)&&t.length>0,()=>"promises must be a none empty array")}function y(t,s){it(t>=0&&t<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${t}`),it(s>=0&&s<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${s}`),it(s>=t,()=>`startFraction must be no more than endFraction, but got startFraction ${t} and endFraction ${s}`)}return Promise.all(c.map(C))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _v(c,e){e==null&&(e={});const f=e.fetchFunc==null?St().platform.fetch:e.fetchFunc,x=c.map(a=>f(a,e.requestInit,{isBinary:!0})),S=0,C=.5,y=(e.onProgress==null?await Promise.all(x):await Hd(x,e.onProgress,S,C)).map(a=>a.arrayBuffer()),t=.5,s=1;return e.onProgress==null?await Promise.all(y):await Hd(y,e.onProgress,t,s)}async function A6(c,e="",f,x){return tg(o=>_v(o,{requestInit:x}))(c,e,f)}function tg(c){return async(e,f="",x)=>{const S=e.map(()=>!1),C={},o=x!=null?x.map(()=>!1):[],y=[];if(e.forEach((i,n)=>{let h=0;i.weights.forEach(d=>{const u="quantization"in d?d.quantization.dtype:d.dtype,p=ql[u]*bt(d.shape),m=()=>{S[n]=!0,C[n]==null&&(C[n]=[]),C[n].push({manifestEntry:d,groupOffset:h,sizeBytes:p})};x!=null?x.forEach((v,g)=>{v===d.name&&(m(),o[g]=!0)}):m(),y.push(d.name),h+=p})}),!o.every(i=>i)){const i=x.filter((n,h)=>!o[h]);throw new Error(`Could not find weights in manifest with names: ${i.join(", ")}. 
Manifest JSON has weights with names: ${y.join(", ")}.`)}const t=S.reduce((i,n,h)=>(n&&i.push(h),i),[]),s=[];t.forEach(i=>{e[i].paths.forEach(n=>{const h=f+(f.endsWith("/")?"":"/")+n;s.push(h)})});const l=await c(s),a={};let r=0;return t.forEach(i=>{const n=e[i].paths.length,h=new ws(l.slice(r,r+n));C[i].forEach(u=>{const p=h.slice(u.groupOffset,u.groupOffset+u.sizeBytes),m=Qm(p,[u.manifestEntry]);for(const v in m)a[v]=m[v]}),r+=n}),a}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R6="application/octet-stream",I6="application/json";class Wc{constructor(e,f){if(this.DEFAULT_METHOD="POST",f==null&&(f={}),this.weightPathPrefix=f.weightPathPrefix,this.onProgress=f.onProgress,this.weightUrlConverter=f.weightUrlConverter,f.fetchFunc!=null?(it(typeof f.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=f.fetchFunc):this.fetch=St().platform.fetch,it(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&it(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,f.requestInit!=null&&f.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=f.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const f=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);f.body=new FormData;const x=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],S=Jm(e,x);if(f.body.append("model.json",new Blob([JSON.stringify(S)],{type:I6}),"model.json"),e.weightData!=null){const o=ws.join(e.weightData);f.body.append("model.weights.bin",new Blob([o],{type:R6}),"model.weights.bin")}const C=await this.fetch(this.path,f);if(C.ok)return{modelArtifactsInfo:ja(e),responses:[C]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${C.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let f;try{f=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const x=f.modelTopology,S=f.weightsManifest;if(x==null&&S==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return Ec(f,C=>this.loadWeights(C))}async loadWeights(e){const f=Array.isArray(this.path)?this.path[1]:this.path,[x,S]=P6(f),C=this.weightPathPrefix||x,o=_m(e),y=[],t=[];for(const l of e)for(const a of l.paths)this.weightUrlConverter!=null?t.push(this.weightUrlConverter(a)):y.push(C+a+S);this.weightUrlConverter&&y.push(...await Promise.all(t));const s=await _v(y,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,s]}}Wc.URL_SCHEME_REGEX=/^https?:\/\//;function P6(c){const e=c.lastIndexOf("/"),f=c.lastIndexOf("?"),x=c.substring(0,e),S=f>e?c.substring(f):"";return[x+"/",S]}function oh(c){return c.match(Wc.URL_SCHEME_REGEX)!=null}const eg=(c,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let f=!0;if(Array.isArray(c)?f=c.every(x=>oh(x)):f=oh(c),f)return Xc(c,e)}return null};Ye.registerSaveRouter(eg);Ye.registerLoadRouter(eg);function Xc(c,e){return new Wc(c,e)}function F6(c,e){return Xc(c,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cl{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class ng{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class N6{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=f=>Promise.resolve(e.save(f)))}}function M6(c,e,f,x){const S=arguments;return new N6(sg(...S))}function sg(c,e,f,x){return arguments.length===1?c.modelTopology!=null||c.weightSpecs!=null?new Cl(c):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Cl({modelTopology:c})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Cl({modelTopology:c,weightSpecs:e,weightData:f,trainingConfig:x}))}function O6(c){return new ng(c)}function D6(c){return new ng(c)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ig=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:ws,browserFiles:b6,browserHTTPRequest:F6,concatenateArrayBuffers:Bx,copyModel:iy,decodeWeights:Qm,encodeWeights:Mx,fromMemory:M6,fromMemorySync:sg,getLoadHandlers:Xx,getModelArtifactsForJSON:Ec,getModelArtifactsForJSONSync:qm,getModelArtifactsInfoForJSON:ja,getSaveHandlers:Wx,getWeightSpecs:_m,http:Xc,isHTTPScheme:oh,listModels:ny,loadWeights:A6,moveModel:ry,registerLoadRouter:kx,registerSaveRouter:zx,removeModel:sy,weightsLoaderFactory:tg,withSaveHandler:O6,withSaveHandlerSync:D6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Wi,Yd=!1;function L6(c,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(c==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let f=!1,x=!1,S=!1,C=!1,o=!1,y=!1;if(c.data instanceof Uint8Array)f=!0;else if(typeof ImageData<"u"&&c instanceof ImageData)x=!0;else if(typeof HTMLVideoElement<"u"&&c instanceof HTMLVideoElement)S=!0;else if(typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement)C=!0;else if(c.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&c instanceof ImageBitmap)y=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${c.constructor.name}`);if(Io(Hl,pt.backendName)!=null){const n={pixels:c},h={numChannels:e};return pt.runKernel(Hl,n,h)}const[s,l]=S?[c.videoWidth,c.videoHeight]:[c.width,c.height];let a;if(o)a=c.getContext("2d").getImageData(0,0,s,l).data;else if(x||f)a=c.data;else if(C||S||y){if(Wi==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Wi=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Wi=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Wi.canvas.width=s,Wi.canvas.height=l,Wi.drawImage(c,0,0,s,l),a=Wi.getImageData(0,0,s,l).data}let r;if(e===4)r=new Int32Array(a);else{const n=s*l;r=new Int32Array(n*e);for(let h=0;h<n;h++)for(let d=0;d<e;++d)r[h*e+d]=a[h*4+d]}return kv(r,[l,s,e],"int32")}function B6(c){if(c.rank!==2&&c.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${c.rank}.`);const e=c.rank===2?1:c.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(c.dtype!=="float32"&&c.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${c.dtype}. Please use float32 or int32 tensors.`)}async function rg(c,e){let f=st(c,"img","toPixels");if(!(c instanceof Je)){const s=f;f=We(s,"int32"),s.dispose()}B6(f);const[x,S]=f.shape.slice(0,2),C=f.rank===2?1:f.shape[2],o=await f.data(),y=f.dtype==="float32"?255:1,t=new Uint8ClampedArray(S*x*4);for(let s=0;s<x*S;++s){const l=[0,0,0,255];for(let r=0;r<C;r++){const i=o[s*C+r];if(f.dtype==="float32"){if(i<0||i>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${i}.`)}else if(f.dtype==="int32"&&(i<0||i>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${i}.`);C===1?(l[0]=i*y,l[1]=i*y,l[2]=i*y):l[r]=i*y}const a=s*4;t[a+0]=Math.round(l[0]),t[a+1]=Math.round(l[1]),t[a+2]=Math.round(l[2]),t[a+3]=Math.round(l[3])}if(e!=null){Yd||Io(nx,pt.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),Yd=!0),e.width=S,e.height=x;const s=e.getContext("2d"),l=new ImageData(t,S,x);s.putImageData(l,0,0)}return f!==c&&f.dispose(),t}const ag=ct({fromPixels_:L6});function Hc(c,e){const f=c.shape.length,x=e.shape.length;if(f<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${f}.`);if(x<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${x}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[x-1]>f)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[x-1]} vs. ${f}`);if(bt(c.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${c.shape}.`);const S=e.shape,C=S[S.length-1];let o=1;for(let a=0;a<S.length-1;++a)o*=S[a];const y=c.shape,t=S.slice();t.pop();let s=1;for(let a=C;a<f;++a)s*=y[a],t.push(y[a]);const l=[...Ne(c.shape).map(a=>a/s),1].slice(0,C);return[t,o,s,l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uh=-2,$6=-1;function og(c,e,f){const x=c.shape.length;it(x===e.length,()=>`Error in slice${x}D: Length of begin ${e} must match the rank of the array (${x}).`),it(x===f.length,()=>`Error in slice${x}D: Length of size ${f} must match the rank of the array (${x}).`);for(let S=0;S<x;++S)it(e[S]+f[S]<=c.shape[S],()=>`Error in slice${x}D: begin[${S}] + size[${S}] (${e[S]+f[S]}) would overflow input.shape[${S}] (${c.shape[S]})`)}function G6(c){const e=[];let f=0;for(;c>0;)c&1&&e.push(f),c/=2,f++;return e}function Yc(c,e,f){const x=[];for(let S=0;S<c.length;S++)x[S]=Math.ceil((e[S]-c[S])/f[S]);return x}function ug(c,e,f,x){const S=[...c];for(let C=S.length;C<x.length;C++)S.push(1);for(let C=0;C<f;C++)C===0?S[e]=1:(S.splice(e,0,1),S.pop());return S}function lg(c,e,f){return f<=c?f:f-(e-1)}function hg(c,e){const f=[];for(let x=0;x<c;x++)f.push(e+x);return f}function U6(c,e,f,x,S,C,o,y,t){const s=c.length;let l=new Array(s),a=new Array(s),r=new Array(s);if(e.length&&f>0){const i=e[0],n=f+1;l=fg(o,i,n,x,c),a=cg(y,i,n,S,c),r=ug(C,i,n,c)}else for(let i=0;i<s;i++)l[i]=pg(o,x,C,c,i,t),a[i]=mg(y,S,C,c,i,t),r[i]=dg(C,i,t);return{begin:l,end:a,strides:r}}function fg(c,e,f,x,S){const C=[...S],o=hg(f,e);for(let y=0;y<C.length;y++)if(o.indexOf(y)>-1)C[y]=0;else{const t=lg(e,f,y);let s=x[t];c&1<<t&&(s=0),C[y]=s}return C}function cg(c,e,f,x,S){const C=[...S],o=hg(f,e);for(let y=0;y<C.length;y++)if(o.indexOf(y)>-1)C[y]=Number.MAX_SAFE_INTEGER;else{const t=lg(e,f,y);let s=x[t];c&1<<t&&(s=Number.MAX_SAFE_INTEGER),C[y]=s}for(let y=0;y<C.length;y++){const t=S[y];C[y]<0&&(C[y]+=t),C[y]=Ao(0,C[y],S[y])}return C}function dg(c,e,f){let x=c[e];return(f&1<<e||x==null)&&(x=1),x}function pg(c,e,f,x,S,C){let o=e[S];const y=f[S]||1;(c&1<<S||C&1<<S||o==null)&&(y>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const t=x[S];return o<0&&(o+=t),o=Ao(0,o,t-1),o}function mg(c,e,f,x,S,C){let o=e[S];const y=f[S]||1;(c&1<<S||C&1<<S||o==null)&&(y>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const t=x[S];return o<0&&(o+=t),y>0?o=Ao(0,o,t):o=Ao(-1,o,t-1),o}function ul(c,e,f){let x=f.length;for(let S=0;S<f.length;S++)if(f[S]>1){x=S;break}for(let S=x+1;S<f.length;S++)if(e[S]>0||f[S]!==c[S])return!1;return!0}function ll(c,e){let f=c.length>0?c[c.length-1]:1;for(let x=0;x<c.length-1;x++)f+=c[x]*e[x];return f}function Kc(c,e,f){let x;const S=c.shape.length;typeof e=="number"?x=[e,...new Array(S-1).fill(0)]:e.length<S?x=e.concat(new Array(S-e.length).fill(0)):x=e.slice(),x.forEach(o=>{it(o!==-1,()=>"slice() does not support negative begin indexing.")});let C;return f==null?C=new Array(S).fill(-1):typeof f=="number"?C=[f,...new Array(S-1).fill(-1)]:f.length<S?C=f.concat(new Array(S-f.length).fill(-1)):C=f,C=C.map((o,y)=>o>=0?o:(it(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${y}.`),c.shape[y]-x[y])),[x,C]}function jc(c,e,f,x,S,C,o,y,t){let s;if(x==null?(s=new Array(e.length),s.fill(1)):s=x,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let l=!1;const a={dims:s.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:f.slice(),strides:s.slice(),beginMask:S,endMask:C,ellipsisMask:o,newAxisMask:y,shrinkAxisMask:t};for(let m=0;m<a.dims;m++)l&&1<<m&y&&a.numAddAxisAfterEllipsis++,1<<m&o&&(l=!0);l||(a.ellipsisMask|=1<<a.dims,a.dims++);const r={dims:c.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};V6(a,r);let i=!0,n=!0,h=!0;const d=[],u=[];for(let m=0;m<c.length;++m){if(r.strides[m]===0)throw Error(`strides[${m}] must be non-zero`);const v=!!(r.shrinkAxisMask&1<<m),g=c[m];if(g===-1){d.push(v?1:-1);continue}const T=[r.beginMask&1<<m,r.endMask&1<<m],w=[r.strides[m]>0?0:-1,r.strides[m]>0?g:g-1];if(v&&r.strides[m]<=0)throw Error("only stride 1 allowed on non-range indexing.");h=h&&r.strides[m]===1;const b=!!(r.beginMask&1<<m&&r.endMask&1<<m);if(r.beginValid&&r.endValid){if(v){const I=r.begin[m]<0?g+r.begin[m]:r.begin[m];if(r.begin[m]=I,r.end[m]=r.begin[m]+1,I<0||I>=g)throw Error(`slice index ${r.begin[m]} of dimension ${m} out of bounds.`)}else r.begin[m]=Kd(r.begin[m],0,r.strides[m],g,T,w),r.end[m]=Kd(r.end[m],1,r.strides[m],g,T,w);const R=r.strides[m]===1&&r.begin[m]===0&&r.end[m]===g;i=i&&R,n=n&&(m===0&&r.strides[m]===1||R)}else i=i&&r.strides[m]===1&&b,n=n&&(m===0&&r.strides[m]===1||b);let E,A=!1;if(r.beginValid&&r.endValid?(E=r.end[m]-r.begin[m],A=!0):v?(E=1,A=!0):b&&g>=0&&(r.strides[m]<0?E=-g:E=g,A=!0),A){let R;E===0||E<0!=r.strides[m]<0?R=0:R=Math.trunc(E/r.strides[m])+(E%r.strides[m]!==0?1:0),d.push(R)}else d.push(-1)}for(let m=0;m<r.finalShapeGatherIndices.length;++m){const v=r.finalShapeGatherIndices[m];v>=0?u.push(d[v]):v===uh&&u.push(1)}return{finalShapeSparse:u.filter((m,v)=>r.finalShapeGatherIndices[v]!==uh),finalShape:u,isIdentity:i,sliceDim0:n,isSimpleSlice:h,begin:r.begin,end:r.end,strides:r.strides}}function V6(c,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let f=0;e.beginValid=c.begin!=null,e.endValid=c.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let x=0;x<c.dims;x++)if(1<<x&c.ellipsisMask){const S=Math.min(e.dims-(c.dims-x)+1+c.numAddAxisAfterEllipsis,e.dims);for(;f<S;f++)e.begin[f]=0,e.end[f]=0,e.strides[f]=1,e.beginMask|=1<<f,e.endMask|=1<<f,e.finalShapeGatherIndices.push(f),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[f]=x}else if(1<<x&c.newAxisMask)e.finalShapeGatherIndices.push(uh),e.finalShapeGatherIndicesSparse.push(-1);else{if(f===e.begin.length)throw Error(`Index out of range using input dim ${f}; input has only ${e.dims} dims, ${e.begin.length}.`);c.begin!=null&&(e.begin[f]=c.begin[x]),c.end!=null&&(e.end[f]=c.end[x]),e.strides[f]=c.strides[x],c.beginMask&1<<x&&(e.beginMask|=1<<f),c.endMask&1<<x&&(e.endMask|=1<<f),c.shrinkAxisMask&1<<x?(e.finalShapeGatherIndices.push($6),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<f):(e.finalShapeGatherIndices.push(f),e.finalShapeGatherIndicesSparse.push(x)),e.inputShapeGatherIndicesSparse[f]=x,f++}}function Kd(c,e,f,x,S,C){if(S[e])return f>0?C[e]:C[e+1&1];{const o=c<0?x+c:c;return o<C[0]?C[0]:o>C[1]?C[1]:o}}const z6=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:og,computeFlatOffset:ll,computeOutShape:Yc,getNormalizedAxes:U6,isSliceContinous:ul,maskToAxes:G6,parseSliceParams:Kc,sliceInfo:jc,startForAxis:pg,startIndicesWithElidedDims:fg,stopForAxis:mg,stopIndicesWithElidedDims:cg,stridesForAxis:dg,stridesWithElidedDims:ug},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k6=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:c=>c())();function W6(){return new Promise(c=>k6(()=>c()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zc(c,e){const f=c[0].length;c.forEach((S,C)=>{it(S.length===f,()=>`Error in concat${f}D: rank of tensors[${C}] must be the same as the rank of the rest (${f})`)}),it(e>=0&&e<f,()=>`Error in concat${f}D: axis must be between 0 and ${f-1}.`);const x=c[0];c.forEach((S,C)=>{for(let o=0;o<f;o++)it(o===e||S[o]===x[o],()=>`Error in concat${f}D: Shape of tensors[${C}] (${S}) does not match the shape of the rest (${x}) along the non-concatenated axis ${C}.`)})}function Ns(c,e){const f=c[0].slice();for(let x=1;x<c.length;x++)f[e]+=c[x][e];return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gs;(function(c){c[c.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",c[c.VALUE_ROWIDS=1]="VALUE_ROWIDS",c[c.ROW_LENGTHS=2]="ROW_LENGTHS",c[c.ROW_SPLITS=3]="ROW_SPLITS",c[c.ROW_LIMITS=4]="ROW_LIMITS",c[c.ROW_STARTS=5]="ROW_STARTS"})(gs||(gs={}));function vg(c,e,f){let x=new Array;if(f==null&&e==null)return x;if(e==null)for(;x.length<c+f.length;)x.push(-1);else x=e.slice();if(f==null)return x;if(c+f.length!==x.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${c+f.length}, but shape.rank = ${x.length}`);for(let S=1;S<f.length;++S){const C=f[S],o=x[x.length-f.length+S],y=x[o];if(C>=0)if(y>=0){if(y!==C)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${S+c}] = ${C} but shape[${S+c}] = ${y}`)}else x[o]=C}return x}function gg(c){const e={FIRST_DIM_SIZE:gs.FIRST_DIM_SIZE,VALUE_ROWIDS:gs.VALUE_ROWIDS,ROW_LENGTHS:gs.ROW_LENGTHS,ROW_SPLITS:gs.ROW_SPLITS,ROW_LIMITS:gs.ROW_LIMITS,ROW_STARTS:gs.ROW_STARTS},f=[];for(const x of c)if(x in e)f.push(e[x]);else break;return f}function xg(c){return c.length===0?0:c[0]===gs.FIRST_DIM_SIZE?c.length-1:c.length}function yg(c,e){if(c==null||e==null)return;const f=c.length,x=e.length;if(f>=x)throw new Error(`defaultValue.shape=${c} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${f} must be less than ragged tensor input flatValues.rank = ${x})`);for(let S=0;S<Math.min(f,x-1);++S){const C=c[S],o=e[S+1];if(C>=0&&o>=0&&C!==1&&C!==o)throw new Error(`defaultValue.shape=${c}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${S-c.length}] = ${C} but ragged tensor input.flatValues.shape[${S-c.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qc=30;function hl(c){return c<=Qc?c:kl(c,Math.floor(Math.sqrt(c)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jc(c,e,f){const x=f*(typeof c=="number"?c:c[0]),S=e*(typeof c=="number"?c:c[1]);return[x,S]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _a(c,e,f,x=!0){let S=[];if(x)S=S.concat(e.slice(0)),S.push(c[0]/f),S=S.concat(c.slice(1));else{S=S.concat(c[0]);const C=e.length;for(let o=0;o<C;++o)S=S.concat([c[o+1]/e[o],e[o]]);S=S.concat(c.slice(C+1))}return S}function to(c,e,f=!0){const x=[];if(f){x.push(e);for(let S=e+1;S<c;++S)S<=2*e?(x.push(S),x.push(S-(e+1))):x.push(S)}else{const S=[],C=[];for(let o=1;o<c;++o)o>=e*2+1||o%2===1?C.push(o):S.push(o);x.push(...S),x.push(0),x.push(...C)}return x}function eo(c,e,f,x=!0){const S=[];x?S.push(c[0]/f):S.push(c[0]*f);for(let C=1;C<c.length;++C)C<=e.length?x?S.push(e[C-1]*c[C]):S.push(c[C]/e[C-1]):S.push(c[C]);return S}function qc(c,e){const f=[0];for(let x=0;x<e;++x)f.push(c[x][0]);return f}function _c(c,e,f){const x=c.slice(0,1);for(let S=0;S<f;++S)x.push(c[S+1]-e[S][0]-e[S][1]);return x}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tg=1.7580993408473768,Sg=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cg=.3275911,Eg=.254829592,wg=-.284496736,bg=1.421413741,Ag=-1.453152027,Rg=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lh(c,e){if(c.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${c.length}, imag: ${e.length}.`);const f=new Float32Array(c.length*2);for(let x=0;x<f.length;x+=2)f[x]=c[x/2],f[x+1]=e[x/2];return f}function X6(c){const e=new Float32Array(c.length/2),f=new Float32Array(c.length/2);for(let x=0;x<c.length;x+=2)e[x/2]=c[x],f[x/2]=c[x+1];return{real:e,imag:f}}function H6(c){const e=Math.ceil(c.length/4),f=new Float32Array(e),x=new Float32Array(e);for(let S=0;S<c.length;S+=4)f[Math.floor(S/4)]=c[S],x[Math.floor(S/4)]=c[S+1];return{real:f,imag:x}}function Y6(c){const e=Math.floor(c.length/4),f=new Float32Array(e),x=new Float32Array(e);for(let S=2;S<c.length;S+=4)f[Math.floor(S/4)]=c[S],x[Math.floor(S/4)]=c[S+1];return{real:f,imag:x}}function K6(c,e){const f=c[e*2],x=c[e*2+1];return{real:f,imag:x}}function j6(c,e,f,x){c[x*2]=e,c[x*2+1]=f}function Z6(c,e){const f=new Float32Array(c/2),x=new Float32Array(c/2);for(let S=0;S<Math.ceil(c/2);S++){const C=(e?2:-2)*Math.PI*(S/c);f[S]=Math.cos(C),x[S]=Math.sin(C)}return{real:f,imag:x}}function Q6(c,e,f){const x=(f?2:-2)*Math.PI*(c/e),S=Math.cos(x),C=Math.sin(x);return{real:S,imag:C}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const El="->",J6=/->/g,jd=",",Zd="...";function Ig(c,e){c=c.replace(/\s/g,"");const f=(c.length-c.replace(J6,"").length)/El.length;if(f<1)throw new Error("Equations without an arrow are not supported.");if(f>1)throw new Error(`Equation must contain exactly one arrow ("${El}").`);const[x,S]=c.split(El);it(x.indexOf(Zd)===-1,()=>`The ellipsis notation ("${Zd}") is not supported yet.`);const C=x.split(jd),o=C.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const y=[];for(let r=0;r<S.length;++r){const i=S[r];if(!C.some(n=>n.indexOf(i)!==-1))throw new Error(`Output subscripts contain the label ${i} not present in the input subscripts.`);y.indexOf(i)===-1&&y.push(i)}for(let r=0;r<x.length;++r){const i=x[r];y.indexOf(i)===-1&&i!==jd&&y.push(i)}const t=new Array(C.length);for(let r=0;r<o;++r){if(new Set(C[r].split("")).size!==C[r].length)throw new Error(`Found duplicate axes in input component ${C[r]}. Support for duplicate axes in input is not implemented yet.`);t[r]=[];for(let i=0;i<C[r].length;++i)t[r].push(y.indexOf(C[r][i]))}const s=y.length,l=S.length,a=[];for(let r=l;r<s;++r)a.push(r);return{allDims:y,summedDims:a,idDims:t}}function Pg(c,e){let f=new Array(c);f.fill(-1);for(let S=0;S<e.length;++S)f[e[S]]=S;const x=[];for(let S=0;S<c;++S)f[S]===-1&&x.push(S);return f=f.filter(S=>S!==-1),{permutationIndices:f,expandDims:x}}function Fg(c,e,f){const x=new Array(c);for(let S=0;S<f.length;++S){const C=f[S].shape;for(let o=0;o<e[S].length;++o)x[e[S][o]]===void 0?x[e[S][o]]=C[o]:it(x[e[S][o]]===C[o],()=>`Expected dimension ${x[e[S][o]]} at axis ${o} of input shaped ${JSON.stringify(C)}, but got dimension ${C[o]}`)}}function Ng(c,e){const f=c,x=[];let S=0;c.length===0&&f.push(-1),S=c.length+1;for(let o=0;o<S;++o)x.push([]);const C=[];for(let o=0;o<f.length;++o){const y=f[o],t=q6(e,y);for(const s of t)C.indexOf(s)===-1&&(x[o].push(s),C.push(s))}return{path:f,steps:x}}function Mg(c){return c.every((e,f)=>e===f)}function q6(c,e){const f=[];for(let x=0;x<c.length;++x)(c[x].length===0||c[x].indexOf(e)!==-1||e===-1)&&f.push(x);return f}function td(c,e,f=0){let x=[];if(typeof e=="number")it(c.shape[f]%e===0,()=>"Number of splits must evenly divide the axis."),x=new Array(e).fill(c.shape[f]/e);else{const S=e.reduce((o,y)=>(y===-1&&(o+=1),o),0);it(S<=1,()=>"There should be only one negative value in split array.");const C=e.indexOf(-1);if(C!==-1){const o=e.reduce((y,t)=>t>0?y+t:y);e[C]=c.shape[f]-o}it(c.shape[f]===e.reduce((o,y)=>o+y),()=>"The sum of sizes must match the size of the axis dimension."),x=e}return x}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ed(c){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${c}`}function nd(c,e){return`indices(${c}, 0) is invalid: ${e} < 0`}function sd(c,e,f){return`indices(${c}, 0) is invalid: ${e} >= ${f}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function id(c,e){return`only one output dimension may be -1, not both ${c} and ${e}`}function rd(c,e){return`size ${c} must be non-negative, not ${e}`}function ad(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function od(c,e){const f=bt(c),x=bt(e);return`Input to reshape is a SparseTensor with ${f}
  dense values, but the requested shape requires a multiple of ${x}. inputShape=${c} outputShape= ${e}`}function ud(c,e){const f=bt(c),x=bt(e);return`Input to reshape is a tensor with ${f} dense values, but the requested shape has ${x}. inputShape=${c} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function za(){return"segment ids must be >= 0"}function ld(){return"segment ids are not increasing"}function hd(c,e){return`Segment id ${c} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function fd(c,e,f){return`Bad: indices[${c}] == ${e} out of range [0, ${f})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Og(c,e){let f=!1,x;for(c<=Qc?(x=c,f=!0):x=kl(c,Math.floor(Math.sqrt(c)));!f;)x>e||x===c?f=!0:x=kl(c,x+1);return x}function Dg(c,e,f){const x=[],S=c.length;for(let C=0;C<S;C++)C!==e?x.push(c[C]):x.push(f);return x}function cd(c,e,f,x){const S=e.shape.length,C=c.shape.length;if(x!==0&&(x<-S||x>S))throw new Error(`Expect batchDims in the range of [-${S}, ${S}], but got ${x}`);if(x<0&&(x+=S),x>C)throw new Error(`batchDims (${x}) must be less than rank(x) (
    ${C}).`);if(f<x)throw new Error(`batchDims (${x}) must be less than or equal to axis (${f}).`);for(let a=0;a<x;++a)if(c.shape[a]!==e.shape[a])throw new Error(`x.shape[${a}]: ${c.shape[a]} should be equal to indices.shape[${a}]: ${e.shape[a]}.`);const o=c.shape[f],y=[];let t=1,s=1,l=1;for(let a=0;a<x;++a)y.push(c.shape[a]),t*=c.shape[a];for(let a=x;a<f;a++)y.push(c.shape[a]),s*=c.shape[a];for(let a=x;a<S;a++)y.push(e.shape[a]);for(let a=f+1;a<C;a++)y.push(c.shape[a]),l*=c.shape[a];return{batchSize:t,sliceSize:l,outerSize:s,dimSize:o,outputShape:y}}const _6=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:cd,computeOutShape:Dg,segOpComputeOptimalWindowSize:Og},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jr(c){try{return c.map(e=>jr(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function dd(c){return c.map(e=>sr(e))}const t5=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Eg,ERF_A2:wg,ERF_A3:bg,ERF_A4:Ag,ERF_A5:Rg,ERF_P:Cg,PARALLELIZE_THRESHOLD:Qc,get RowPartitionType(){return gs},SELU_SCALE:Sg,SELU_SCALEALPHA:Tg,applyActivation:al,assertAndGetBroadcastShape:Te,assertAxesAreInnerMostDims:an,assertParamsConsistent:Zc,assignToTypedArray:j6,axesAreInnerMostDims:Ac,calculateShapes:xr,checkEinsumDimSizes:Fg,checkPadOnDimRoundingMode:fs,combineLocations:xv,combineRaggedTensorToTensorShapes:vg,complexWithEvenIndex:H6,complexWithOddIndex:Y6,computeConv2DInfo:dn,computeConv3DInfo:Ni,computeDefaultPad:wc,computeDilation2DInfo:Za,computeOptimalWindowSize:hl,computeOutAndReduceShapes:yn,computeOutShape:Ns,computePool2DInfo:hs,computePool3DInfo:_s,convertConv2DDataFormat:Mi,decodeEinsumEquation:Ig,eitherStridesOrDilationsAreOne:Dn,expandShapeToKeepDim:rn,exponent:Q6,exponents:Z6,fromStringArrayToUint8:dd,fromUint8ToStringArray:Jr,getAxesPermutation:Ln,getBroadcastDims:Oo,getComplexWithIndex:K6,getEinsumComputePath:Ng,getEinsumPermutation:Pg,getFusedBiasGradient:rl,getFusedDyActivation:il,getImageCenter:Jc,getInnerMostAxes:pn,getPermuted:to,getRaggedRank:xg,getReductionAxes:mv,getReshaped:_a,getReshapedPermuted:eo,getRowPartitionTypesHelper:gg,getSliceBeginCoords:qc,getSliceSize:_c,getSparseFillEmptyRowsIndicesDenseShapeMismatch:ed,getSparseFillEmptyRowsNegativeIndexErrorMessage:nd,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:sd,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:ad,getSparseReshapeInputOutputMismatchErrorMessage:ud,getSparseReshapeInputOutputMultipleErrorMessage:od,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:id,getSparseReshapeNegativeOutputDimErrorMessage:rd,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:fd,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:za,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:ld,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:hd,getUndoAxesPermutation:Ja,isIdentityPermutation:Mg,log:ix,mergeRealAndImagArrays:lh,prepareAndValidate:Hc,prepareSplitSize:td,segment_util:_6,shouldFuse:ol,slice_util:z6,splitRealAndImagArrays:X6,stridesOrDilationsArePositive:lr,tupleValuesAreOne:La,upcastType:Ms,validateDefaultValueShape:yg,validateInput:Vc,validateUpdateShape:Wv,warn:xs},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */x6();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qi={},ho={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function e5(c,e){Qi[c]=e}function Cs(c,e){if(!(c in Qi)||e!=null){const x=s5(c,e);if(x!==null)Qi[c]=x;else return console.log("Could not get context for WebGL version",c),null}const f=Qi[c];return f==null||f.isContextLost()?(delete Qi[c],Cs(c)):(f.disable(f.DEPTH_TEST),f.disable(f.STENCIL_TEST),f.disable(f.BLEND),f.disable(f.DITHER),f.disable(f.POLYGON_OFFSET_FILL),f.disable(f.SAMPLE_COVERAGE),f.enable(f.SCISSOR_TEST),f.enable(f.CULL_FACE),f.cullFace(f.BACK),Qi[c])}function n5(c){if(!St().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&c===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function s5(c,e){if(c!==1&&c!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const f=e??n5(c);return f.addEventListener("webglcontextlost",x=>{x.preventDefault(),delete Qi[c]},!1),St().getBool("SOFTWARE_WEBGL_ENABLED")&&(ho.failIfMajorPerformanceCaveat=!1),c===1?f.getContext("webgl",ho)||f.getContext("experimental-webgl",ho):f.getContext("webgl2",ho)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ka;(function(c){c[c.DENSE=0]="DENSE",c[c.SHARED_BATCH=1]="SHARED_BATCH"})(ka||(ka={}));var Yn;(function(c){c[c.RENDER=0]="RENDER",c[c.UPLOAD=1]="UPLOAD",c[c.PIXELS=2]="PIXELS",c[c.DOWNLOAD=3]="DOWNLOAD"})(Yn||(Yn={}));var hn;(function(c){c[c.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",c[c.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",c[c.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",c[c.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",c[c.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(hn||(hn={}));function no(c,e){return[e,c]}function i5(c,e){return c*e}function fo(c){const e=bt(c),f=Math.ceil(e/4);return Vl(f)}function ra(c,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(c/2))]}function r5(c,e){const[f,x]=ra(c,e);return f*x*4}function pd(c,e){const f=c;let x,S,C,o,y,t,s,l,a,r;return St().getNumber("WEBGL_VERSION")===2?(x=f.R32F,S=f.R16F,C=f.RGBA16F,o=f.RGBA32F,y=f.RED,s=4,l=1,a=f.HALF_FLOAT,r=f.FLOAT,t=f.RGBA8):(x=c.RGBA,S=c.RGBA,C=c.RGBA,o=f.RGBA,y=c.RGBA,s=4,l=4,a=e!=null?e.HALF_FLOAT_OES:null,r=c.FLOAT,t=c.RGBA),{internalFormatFloat:x,internalFormatHalfFloat:S,internalFormatPackedHalfFloat:C,internalFormatPackedFloat:o,textureFormatFloat:y,downloadTextureFormat:t,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:a,textureTypeFloat:r}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jt(c,e){const f=e();return St().getBool("DEBUG")&&a5(c),f}function a5(c){const e=c.getError();if(e!==c.NO_ERROR)throw new Error("WebGL Error: "+h5(c,e))}const o5=596e-10,u5=65504;function l5(c){return!!(St().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||c===0||o5<Math.abs(c)&&Math.abs(c)<u5)}function h5(c,e){switch(e){case c.NO_ERROR:return"NO_ERROR";case c.INVALID_ENUM:return"INVALID_ENUM";case c.INVALID_VALUE:return"INVALID_VALUE";case c.INVALID_OPERATION:return"INVALID_OPERATION";case c.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case c.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case c.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function co(c,e){return ei(c,()=>c.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function f5(c,e){const f=ei(c,()=>c.createShader(c.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Jt(c,()=>c.shaderSource(f,e)),Jt(c,()=>c.compileShader(f)),c.getShaderParameter(f,c.COMPILE_STATUS)===!1)throw console.log(c.getShaderInfoLog(f)),new Error("Failed to compile vertex shader.");return f}function c5(c,e){const f=ei(c,()=>c.createShader(c.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Jt(c,()=>c.shaderSource(f,e)),Jt(c,()=>c.compileShader(f)),St().get("ENGINE_COMPILE_ONLY"))return f;if(c.getShaderParameter(f,c.COMPILE_STATUS)===!1)throw Lg(e,c.getShaderInfoLog(f)),new Error("Failed to compile fragment shader.");return f}const d5=/ERROR: [0-9]+:([0-9]+):/g;function Lg(c,e){const f=d5.exec(e);if(f==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(c);return}const x=+f[1],S=c.split(`
`),C=S.length.toString().length+2,o=S.map((a,r)=>Ur((r+1).toString(),C)+a);let y=0;for(let a=0;a<o.length;a++)y=Math.max(o[a].length,y);const t=o.slice(0,x-1),s=o.slice(x-1,x),l=o.slice(x);console.log(t.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Ur(s[0],y)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join(`
`))}function p5(c){return ei(c,()=>c.createProgram(),"Unable to create WebGLProgram.")}function m5(c,e){if(Jt(c,()=>c.linkProgram(e)),!St().get("ENGINE_COMPILE_ONLY")&&c.getProgramParameter(e,c.LINK_STATUS)===!1)throw console.log(c.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function wl(c,e){if(Jt(c,()=>c.validateProgram(e)),c.getProgramParameter(e,c.VALIDATE_STATUS)===!1)throw console.log(c.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function v5(c,e){const f=ei(c,()=>c.createBuffer(),"Unable to create WebGLBuffer");return Jt(c,()=>c.bindBuffer(c.ARRAY_BUFFER,f)),Jt(c,()=>c.bufferData(c.ARRAY_BUFFER,e,c.STATIC_DRAW)),f}function g5(c,e){const f=ei(c,()=>c.createBuffer(),"Unable to create WebGLBuffer");return Jt(c,()=>c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,f)),Jt(c,()=>c.bufferData(c.ELEMENT_ARRAY_BUFFER,e,c.STATIC_DRAW)),f}function x5(c){return ei(c,()=>c.createTexture(),"Unable to create WebGLTexture.")}function y5(c,e){const f=St().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(c<=0||e<=0){const x=`[${c}x${e}]`;throw new Error("Requested texture size "+x+" is invalid.")}if(c>f||e>f){const x=`[${c}x${e}]`,S=`[${f}x${f}]`;throw new Error("Requested texture size "+x+" greater than WebGL maximum on this browser / GPU "+S+".")}}function T5(c){return ei(c,()=>c.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Qd(c,e,f,x,S,C,o){const y=c.getAttribLocation(e,f);return y===-1?!1:(Jt(c,()=>c.bindBuffer(c.ARRAY_BUFFER,x)),Jt(c,()=>c.vertexAttribPointer(y,S,c.FLOAT,!1,C,o)),Jt(c,()=>c.enableVertexAttribArray(y)),!0)}function S5(c,e,f){A5(c,f),Jt(c,()=>c.activeTexture(c.TEXTURE0+f)),Jt(c,()=>c.bindTexture(c.TEXTURE_2D,e))}function C5(c,e,f){return ei(c,()=>c.getUniformLocation(e,f),'uniform "'+f+'" not present in program.')}function E5(c,e,f){return c.getUniformLocation(e,f)}function w5(c,e,f,x){Jt(c,()=>S5(c,e,x)),Jt(c,()=>c.uniform1i(f,x))}function bl(c,e,f){Jt(c,()=>c.bindFramebuffer(c.FRAMEBUFFER,f)),Jt(c,()=>c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,e,0))}function Jd(c,e){Jt(c,()=>c.bindFramebuffer(c.FRAMEBUFFER,e)),Jt(c,()=>c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0))}function po(c){const e=c.checkFramebufferStatus(c.FRAMEBUFFER);if(e!==c.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+b5(c,e))}function b5(c,e){switch(e){case c.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case c.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case c.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case c.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ei(c,e,f){const x=Jt(c,()=>e());if(x==null)throw new Error(f);return x}function A5(c,e){const f=c.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,x=e+c.TEXTURE0;if(x<c.TEXTURE0||x>f){const S=`[gl.TEXTURE0, gl.TEXTURE${f}]`;throw new Error(`textureUnit must be in ${S}.`)}}function qr(c,e=2){return bt(c.slice(0,c.length-e))}function _r(c){if(c.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[c.length>1?c[c.length-2]:1,c[c.length-1]]}function mo(c){let e=[1,1,1];return c.length===0||c.length===1&&c[0]===1||(e=[qr(c),..._r(c)]),e}function R5(c,e=!1){let f=St().getNumber("WEBGL_MAX_TEXTURE_SIZE"),x=St().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");x===1/0&&St().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(x=f/2),e&&(f=f*2,x=x*2,c=c.map((y,t)=>t>=c.length-2?Dh(c[t]):c[t]),c.length===1&&(c=[2,c[0]])),c.length!==2&&(c=Ii(c).newShape);let S=bt(c),C=null;c.length<=1&&S<=f?C=[1,S]:c.length===2&&c[0]<=f&&c[1]<=f?C=c:c.length===3&&c[0]*c[1]<=f&&c[2]<=f?C=[c[0]*c[1],c[2]]:c.length===3&&c[0]<=f&&c[1]*c[2]<=f?C=[c[0],c[1]*c[2]]:c.length===4&&c[0]*c[1]*c[2]<=f&&c[3]<=f?C=[c[0]*c[1]*c[2],c[3]]:c.length===4&&c[0]<=f&&c[1]*c[2]*c[3]<=f&&(C=[c[0],c[1]*c[2]*c[3]]);const o=C!=null&&Math.max(...C)>x&&Math.min(...C)<=(e?2:1)&&Math.min(...C)>0;if(C==null||o)if(e){const y=qr(c);let t=2,s=2;c.length&&([t,s]=_r(c)),S=y*(t/2)*(s/2),C=Vl(S).map(l=>l*2)}else C=Vl(S);return C}function vo(c){return c%2===0}function Go(c,e){if(c=c.slice(-2),e=e.slice(-2),je(c,e)||!c.length||!e.length||c[0]===0||c[1]===0||e[0]===0||e[1]===0)return!0;if(c.length!==e.length){const f=c[c.length-1],x=e[e.length-1];if(f===x||vo(f)&&vo(x)&&(c[0]===1||e[0]===1))return!0}return c[1]===e[1]&&vo(c[0])&&vo(e[0])}let Al,Rl;function I5(c){if(Al==null){const e=Cs(c);Al=e.getParameter(e.MAX_TEXTURE_SIZE)}return Al}function P5(c){if(Rl==null){const e=Cs(c);Rl=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Rl)}function F5(c){if(c===0)return 0;let e;const f=Cs(c);return us(f,"EXT_disjoint_timer_query_webgl2")&&c===2?e=2:us(f,"EXT_disjoint_timer_query")?e=1:e=0,e}function us(c,e){return c.getExtension(e)!=null}function qd(c){try{if(Cs(c)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function N5(c){if(c===0)return!1;const e=Cs(c);if(c===1){if(!us(e,"OES_texture_float"))return!1}else if(!us(e,"EXT_color_buffer_float"))return!1;return hh(e)}function M5(c){if(c===0)return!1;const e=Cs(c);if(c===1){if(!us(e,"OES_texture_float")||!us(e,"WEBGL_color_buffer_float"))return!1}else{if(us(e,"EXT_color_buffer_float"))return hh(e);const x="EXT_color_buffer_half_float";if(us(e,x)){const S=e.getExtension(x);return O5(e,S)}return!1}return hh(e)}function hh(c){const e=pd(c),f=c.createTexture();c.bindTexture(c.TEXTURE_2D,f);const x=1,S=1;c.texImage2D(c.TEXTURE_2D,0,e.internalFormatFloat,x,S,0,e.textureFormatFloat,e.textureTypeFloat,null);const C=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,C),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,f,0);const o=c.checkFramebufferStatus(c.FRAMEBUFFER)===c.FRAMEBUFFER_COMPLETE;return c.bindTexture(c.TEXTURE_2D,null),c.bindFramebuffer(c.FRAMEBUFFER,null),c.deleteTexture(f),c.deleteFramebuffer(C),o}function O5(c,e){const f=pd(c,e),x=c.createTexture();c.bindTexture(c.TEXTURE_2D,x);const S=1,C=1;c.texImage2D(c.TEXTURE_2D,0,f.internalFormatHalfFloat,S,C,0,f.textureFormatFloat,f.textureTypeHalfFloat,null);const o=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,o),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,x,0);const y=c.checkFramebufferStatus(c.FRAMEBUFFER)===c.FRAMEBUFFER_COMPLETE;return c.bindTexture(c.TEXTURE_2D,null),c.bindFramebuffer(c.FRAMEBUFFER,null),c.deleteTexture(x),c.deleteFramebuffer(o),y}function D5(c){return c!==2?!1:Cs(c).fenceSync!=null}function so(c,e){Array.isArray(c)||(c=[c]),c.forEach(f=>{f!=null&&it(f.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qt=St();qt.registerFlag("HAS_WEBGL",()=>qt.getNumber("WEBGL_VERSION")>0);qt.registerFlag("WEBGL_VERSION",()=>qd(2)?2:qd(1)?1:0);qt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);qt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>qt.get("WEBGL_VERSION")===2);qt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);qt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);qt.registerFlag("WEBGL_PACK",()=>qt.getBool("HAS_WEBGL"));qt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_CLIP",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_REDUCE",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_LAZILY_UNPACK",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_CONV_IM2COL",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>qt.getBool("WEBGL_PACK"));qt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>I5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>P5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const c=qt.getNumber("WEBGL_VERSION");return c===0?0:F5(c)});qt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>qt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Ym());qt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>N5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>qt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:qt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));qt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>M5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>D5(qt.getNumber("WEBGL_VERSION")));qt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>qt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);qt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,c=>{if(typeof c!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${c}.`);if(c<0&&c!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${c}.`)});qt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Ym()?1:-1,c=>{if(typeof c!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${c}.`);if(c<0&&c!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${c}.`)});qt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);qt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);qt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);qt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);qt.registerFlag("WEBGL_EXP_CONV",()=>!1);qt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>qt.getBool("IS_TEST"));qt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);qt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);qt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);qt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function An(){let c,e,f,x,S,C,o,y,t,s;return St().getNumber("WEBGL_VERSION")===2?(c="#version 300 es",e="in",f="out",x="in",S="texture",C="outputColor",o="out vec4 outputColor;",y=St().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",t="",s=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(c="",e="attribute",f="varying",x="varying",S="texture2D",C="gl_FragColor",o="",y=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,t=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,s=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:c,attribute:e,varyingVs:f,varyingFs:x,texture2D:S,output:C,defineOutput:o,defineSpecialNaN:y,defineSpecialInf:t,defineRound:s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sr(c,e,f="index"){const x=Ne(e);return x.map((S,C)=>{const o=`int ${c[C]} = ${f} / ${S}`,y=C===x.length-1?`int ${c[C+1]} = ${f} - ${c[C]} * ${S}`:`index -= ${c[C]} * ${S}`;return`${o}; ${y};`}).join("")}function fl(c,e,f="index"){const x=Ne(e);return x.map((S,C)=>{const o=`int ${c[C]} = ${f} / outShapeStrides[${C}]`,y=C===x.length-1?`int ${c[C+1]} = ${f} - ${c[C]} * outShapeStrides[${C}]`:`index -= ${c[C]} * outShapeStrides[${C}]`;return`${o}; ${y};`}).join("")}function L5(c,e){const f=c.length,x=c.map(C=>`${e}[${C}]`),S=new Array(f-1);S[f-2]=x[f-1];for(let C=f-3;C>=0;--C)S[C]=`(${S[C+1]} * ${x[C+1]})`;return S}function B5(c,e,f="index"){const x=c.map((C,o)=>o),S=L5(x,e);return S.map((C,o)=>{const y=`int ${c[o]} = ${f} / ${S[o]}`,t=o===S.length-1?`int ${c[o+1]} = ${f} - ${c[o]} * ${S[o]}`:`index -= ${c[o]} * ${S[o]}`;return`${y}; ${t};`}).join("")}function md(c){const e=Ne(c).map(f=>f.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function vd(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Bg=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:$g}=t5;function $5(c,e,f){const x=[];if(c.forEach(i=>{const n=bt(i.shapeInfo.logicalShape);if(i.shapeInfo.isUniform?x.push(`uniform float ${i.name}${n>1?`[${n}]`:""};`):(x.push(`uniform sampler2D ${i.name};`),x.push(`uniform int offset${i.name};`)),f.enableShapeUniforms){const{uniformShape:h}=gd(f.packedInputs,i.shapeInfo.logicalShape,i.shapeInfo.texShape);switch(h.length){case 1:x.push(`uniform int ${i.name}Shape;`);break;case 2:x.push(`uniform ivec2 ${i.name}Shape;`);break;case 3:x.push(`uniform ivec3 ${i.name}Shape;`);break;case 4:x.push(`uniform ivec4 ${i.name}Shape;`);break}x.push(`uniform ivec2 ${i.name}TexShape;`)}}),f.enableShapeUniforms){switch(e.logicalShape.length){case 1:x.push("uniform int outShape;");break;case 2:x.push("uniform ivec2 outShape;"),x.push("uniform int outShapeStrides;");break;case 3:x.push("uniform ivec3 outShape;"),x.push("uniform ivec2 outShapeStrides;");break;case 4:x.push("uniform ivec4 outShape;"),x.push("uniform ivec3 outShapeStrides;");break}x.push("uniform ivec2 outTexShape;")}f.customUniforms&&f.customUniforms.forEach(i=>{x.push(`uniform ${i.type} ${i.name}${i.arrayIndex?`[${i.arrayIndex}]`:""};`)});const S=x.join(`
`),C=c.map(i=>G5(i,e,f.packedInputs,f.enableShapeUniforms)).join(`
`),o=e.texShape,y=An(),t=z5(y);let s,l,a=X5(y);return e.isPacked?(s=U5(e.logicalShape,o,f.enableShapeUniforms),l=W5(y)):(s=V5(e.logicalShape,o,f.enableShapeUniforms),l=k5(y)),f.packedInputs&&(a+=j5),[a,t,l,S,s,C,f.userCode].join(`
`)}function aa(c,e=!1){const f=c.shapeInfo.logicalShape;switch(f.length){case 0:return ab(c,e);case 1:return ub(c,e);case 2:return hb(c,e);case 3:return cb(c,e);case 4:return pb(c,e);case 5:return mb(c);case 6:return vb(c);default:throw new Error(`${f.length}-D input sampling is not yet supported`)}}function Gg(c,e){switch(c.shapeInfo.logicalShape.length){case 0:return rb(c);case 1:return ob(c,e);case 2:return lb(c,e);case 3:return fb(c,e);default:return db(c,e)}}function G5(c,e,f=!1,x){let S="";f?S+=Gg(c,x):S+=aa(c,x);const C=c.shapeInfo.logicalShape,o=e.logicalShape;return C.length<=o.length&&(f?S+=gb(c,e):S+=xb(c,e)),S}function U5(c,e,f){switch(c.length){case 0:return Ug();case 1:return Z5(c,e,f);case 2:return sb(c,e,f);case 3:return J5(c,e,f);default:return _5(c,e,f)}}function V5(c,e,f){switch(c.length){case 0:return Ug();case 1:return Q5(c,e,f);case 2:return ib(c,e,f);case 3:return q5(c,e,f);case 4:return tb(c,e,f);case 5:return eb(c,e);case 6:return nb(c,e);default:throw new Error(`${c.length}-D output sampling is not yet supported`)}}function z5(c){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${c.texture2D}(textureSampler, uv).r;
    }
  `}function k5(c){return`
    void setOutput(float val) {
      ${c.output} = vec4(val, 0, 0, 0);
    }
  `}function W5(c){return`
    void setOutput(vec4 val) {
      ${c.output} = val;
    }
  `}function X5(c){return`${c.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${c.varyingFs} vec2 resultUV;
    ${c.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${c.defineSpecialNaN}
    ${c.defineSpecialInf}
    ${c.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${H5}
    ${Y5}
    ${K5}
  `}const H5=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Y5=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,K5=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,j5=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Ug(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Z5(c,e,f){const x=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return x[0]===1?f?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${x[1]}.0);
      }
    `:x[1]===1?f?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${x[0]}.0);
      }
    `:f?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${x[0]}, ${x[1]}));
      return 2 * (resTexRC.x * ${x[1]} + resTexRC.y);
    }
  `}function Q5(c,e,f){return e[0]===1?f?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?f?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:f?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function J5(c,e,f){if(f)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const x=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],S=Math.ceil(c[2]/2),C=S*Math.ceil(c[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${x[0]}, ${x[1]}));
      int index = resTexRC.x * ${x[1]} + resTexRC.y;

      int b = index / ${C};
      index -= b * ${C};

      int r = 2 * (index / ${S});
      int c = imod(index, ${S}) * 2;

      return ivec3(b, r, c);
    }
  `}function q5(c,e,f){if(f)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${fl(["r","c","d"],c)}
    return ivec3(r, c, d);
  }
`;const x=Sr(["r","c","d"],c);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${x}
      return ivec3(r, c, d);
    }
  `}function _5(c,e,f){if(f)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const x=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],S=Math.ceil(c[c.length-1]/2),C=S*Math.ceil(c[c.length-2]/2);let o=C,y="",t="b, r, c";for(let s=2;s<c.length-1;s++)o*=c[c.length-s-1],y=`
      int b${s} = index / ${o};
      index -= b${s} * ${o};
    `+y,t=`b${s}, `+t;return`
    ivec${c.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${x[0]}, ${x[1]}));
      int index = resTexRC.x * ${x[1]} + resTexRC.y;

      ${y}

      int b = index / ${C};
      index -= b * ${C};

      int r = 2 * (index / ${S});
      int c = imod(index, ${S}) * 2;

      return ivec${c.length}(${t});
    }
  `}function tb(c,e,f){if(f)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${fl(["r","c","d","d2"],c)}
      return ivec4(r, c, d, d2);
    }
  `;const x=Sr(["r","c","d","d2"],c);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${x}
      return ivec4(r, c, d, d2);
    }
  `}function eb(c,e){const f=Sr(["r","c","d","d2","d3"],c);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${f}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function nb(c,e){const f=Sr(["r","c","d","d2","d3","d4"],c);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${f}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function sb(c,e,f){const x=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(je(c,e))return f?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${x[0]}, ${x[1]}));
      }
    `;const S=Math.ceil(c[1]/2);return f?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${x[0]}, ${x[1]}));

      int index = resTexRC.x * ${x[1]} + resTexRC.y;
      int r = 2 * (index / ${S});
      int c = imod(index, ${S}) * 2;

      return ivec2(r, c);
    }
  `}function ib(c,e,f){return je(c,e)?f?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:c[1]===1?f?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:c[0]===1?f?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:f?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${c[1]};
      int c = index - r * ${c[1]};
      return ivec2(r, c);
    }
  `}function Cr(c){return`offset${c}`}function rb(c){const e=c.name,f="get"+e.charAt(0).toUpperCase()+e.slice(1),x=An();return`
    vec4 ${f}() {
      return ${x.texture2D}(${e}, halfCR);
    }
  `}function ab(c,e){const f=c.name,x="get"+f.charAt(0).toUpperCase()+f.slice(1);if(c.shapeInfo.isUniform)return`float ${x}() {return ${f};}`;const[S,C]=c.shapeInfo.texShape;if(S===1&&C===1)return`
      float ${x}() {
        return sampleTexture(${f}, halfCR);
      }
    `;const o=Cr(f);if(e)return`
    float ${x}() {
      vec2 uv = uvFromFlat(${f}TexShape[0], ${f}TexShape[1], ${o});
      return sampleTexture(${f}, uv);
    }
  `;const[y,t]=c.shapeInfo.texShape;return`
    float ${x}() {
      vec2 uv = uvFromFlat(${y}, ${t}, ${o});
      return sampleTexture(${f}, uv);
    }
  `}function ob(c,e){const f=c.name,x="get"+f.charAt(0).toUpperCase()+f.slice(1),S=c.shapeInfo.texShape,C=An();if(e)return`
    vec4 ${x}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${f}TexShape[0]) / 2.0), ceil(float(${f}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${C.texture2D}(${f}, uv);
    }
  `;const o=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];return`
    vec4 ${x}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${C.texture2D}(${f}, uv);
    }
  `}function ub(c,e){const f=c.name,x="get"+f.charAt(0).toUpperCase()+f.slice(1);if(c.shapeInfo.isUniform)return`
      float ${x}(int index) {
        ${oa(c)}
      }
    `;const S=c.shapeInfo.texShape,C=S[0],o=S[1];if(o===1&&C===1)return`
      float ${x}(int index) {
        return sampleTexture(${f}, halfCR);
      }
    `;const y=Cr(f);return o===1?e?`
      float ${x}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${y}) + 0.5) / float(${f}TexShape[0]));
        return sampleTexture(${f}, uv);
      }
    `:`
      float ${x}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${y}) + 0.5) / ${C}.0);
        return sampleTexture(${f}, uv);
      }
    `:C===1?e?`
      float ${x}(int index) {
        vec2 uv = vec2((float(index + ${y}) + 0.5) / float(${f}TexShape[1]), 0.5);
        return sampleTexture(${f}, uv);
      }
    `:`
      float ${x}(int index) {
        vec2 uv = vec2((float(index + ${y}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${f}, uv);
      }
    `:e?`
    float ${x}(int index) {
      vec2 uv = uvFromFlat(${f}TexShape[0], ${f}TexShape[1], index + ${y});
      return sampleTexture(${f}, uv);
    }
  `:`
    float ${x}(int index) {
      vec2 uv = uvFromFlat(${C}, ${o}, index + ${y});
      return sampleTexture(${f}, uv);
    }
  `}function lb(c,e){const f=c.shapeInfo.logicalShape,x=c.name,S="get"+x.charAt(0).toUpperCase()+x.slice(1),C=c.shapeInfo.texShape,o=C[0],y=C[1],t=An();if(C!=null&&je(f,C))return e?`
      vec4 ${S}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${x}TexShape[1], ${x}TexShape[0]);

        return ${t.texture2D}(${x}, uv);
      }
    `:`
      vec4 ${S}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${y}.0, ${o}.0);

        return ${t.texture2D}(${x}, uv);
      }
    `;if(e)return`
    vec4 ${S}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${x}TexShape[0]) / 2.0), ceil(float(${x}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${x}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${t.texture2D}(${x}, uv);
    }
  `;const s=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)],l=Math.ceil(f[1]/2);return`
    vec4 ${S}(int row, int col) {
      vec2 uv = packedUVfrom2D(${l}, ${s[0]}, ${s[1]}, row, col);
      return ${t.texture2D}(${x}, uv);
    }
  `}function hb(c,e){const f=c.shapeInfo.logicalShape,x=c.name,S="get"+x.charAt(0).toUpperCase()+x.slice(1),C=c.shapeInfo.texShape;if(C!=null&&je(f,C)){if(e)return`
      float ${S}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${x}TexShape[1], ${x}TexShape[0]);
        return sampleTexture(${x}, uv);
      }
    `;const r=C[0],i=C[1];return`
    float ${S}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${r}.0);
      return sampleTexture(${x}, uv);
    }
  `}const{newShape:o,keptDims:y}=Ii(f),t=o;if(t.length<f.length){const r=ua(c,t),i=["row","col"];return`
      ${aa(r,e)}
      float ${S}(int row, int col) {
        return ${S}(${la(i,y)});
      }
    `}if(c.shapeInfo.isUniform)return`
      float ${S}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${f[1]}, 1)));
        ${oa(c)}
      }
    `;const s=C[0],l=C[1],a=Cr(x);return l===1?e?`
      float ${S}(int row, int col) {
        float index = dot(vec3(row, col, ${a}), vec3(${x}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${x}TexShape[0]));
        return sampleTexture(${x}, uv);
      }
    `:`
    float ${S}(int row, int col) {
      float index = dot(vec3(row, col, ${a}), vec3(${f[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${s}.0);
      return sampleTexture(${x}, uv);
    }
  `:s===1?e?`
      float ${S}(int row, int col) {
        float index = dot(vec3(row, col, ${a}), vec3(${x}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${x}TexShape[1]), 0.5);
        return sampleTexture(${x}, uv);
      }
    `:`
    float ${S}(int row, int col) {
      float index = dot(vec3(row, col, ${a}), vec3(${f[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);
      return sampleTexture(${x}, uv);
    }
  `:e?`
      float ${S}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${x}Shape[1] + col + ${a};
        vec2 uv = uvFromFlat(${x}TexShape[0], ${x}TexShape[1], index);
        return sampleTexture(${x}, uv);
      }
    `:`
  float ${S}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${f[1]} + col + ${a};
    vec2 uv = uvFromFlat(${s}, ${l}, index);
    return sampleTexture(${x}, uv);
  }
`}function fb(c,e){const f=c.shapeInfo.logicalShape,x=c.name,S="get"+x.charAt(0).toUpperCase()+x.slice(1),C=c.shapeInfo.texShape,o=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];if(f[0]===1){const r=f.slice(1),i=[1,2],n=ua(c,r),h=["b","row","col"];return`
        ${Gg(n,e)}
        vec4 ${S}(int b, int row, int col) {
          return ${S}(${la(h,i)});
        }
      `}const y=An();if(e)return`
    vec4 ${S}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${x}TexShape[0]) / 2.0), ceil(float(${x}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${x}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${x}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${y.texture2D}(${x}, uv);
    }
  `;const t=o[0],s=o[1],l=Math.ceil(f[2]/2),a=l*Math.ceil(f[1]/2);return`
    vec4 ${S}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${t}, ${s}, ${a}, ${l}, b, row, col);
      return ${y.texture2D}(${x}, uv);
    }
  `}function cb(c,e){const f=c.shapeInfo.logicalShape,x=c.name,S="get"+x.charAt(0).toUpperCase()+x.slice(1),C=f[1]*f[2],o=f[2],{newShape:y,keptDims:t}=Ii(f),s=y;if(s.length<f.length){const h=ua(c,s),d=["row","col","depth"];return`
        ${aa(h,e)}
        float ${S}(int row, int col, int depth) {
          return ${S}(${la(d,t)});
        }
      `}if(c.shapeInfo.isUniform)return`
      float ${S}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${C}, ${o}, 1)));
        ${oa(c)}
      }
    `;const l=c.shapeInfo.texShape,a=l[0],r=l[1],i=c.shapeInfo.flatOffset;if(r===C&&i==null)return e?`
      float ${S}(int row, int col, int depth) {
        int stride1 = ${x}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${x}TexShape[1], ${x}TexShape[0]);
        return sampleTexture(${x}, uv);
      }
    `:`
        float ${S}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${r}.0, ${a}.0);
          return sampleTexture(${x}, uv);
        }
      `;if(r===o&&i==null)return e?`
      float ${S}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${x}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${x}TexShape[1], ${x}TexShape[0]);
        return sampleTexture(${x}, uv);
      }
    `:`
    float ${S}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${f[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${a}.0);
      return sampleTexture(${x}, uv);
    }
  `;const n=Cr(x);return e?`
    float ${S}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${x}Shape[1] * ${x}Shape[2];
      int stride1 = ${x}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${n};
      vec2 uv = uvFromFlat(${x}TexShape[0], ${x}TexShape[1], index);
      return sampleTexture(${x}, uv);
    }
    `:`
      float ${S}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${C} + col * ${o} + depth + ${n};
        vec2 uv = uvFromFlat(${a}, ${r}, index);
        return sampleTexture(${x}, uv);
      }
  `}function db(c,e){const f=c.name,x="get"+f.charAt(0).toUpperCase()+f.slice(1),S=An();if(e)return`
    vec4 ${x}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${f}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${f}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${f}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${f}TexShape[0]) / 2.0), ceil(float(${f}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${S.texture2D}(${f}, uv);
    }
  `;const C=c.shapeInfo.logicalShape,o=C.length,y=c.shapeInfo.texShape,t=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],s=t[0],l=t[1],a=Math.ceil(C[o-1]/2);let r=a*Math.ceil(C[o-2]/2),i="int b, int row, int col",n=`b * ${r} + (row / 2) * ${a} + (col / 2)`;for(let h=2;h<o-1;h++)i=`int b${h}, `+i,r*=C[o-h-1],n=`b${h} * ${r} + `+n;return`
    vec4 ${x}(${i}) {
      int index = ${n};
      int texR = index / ${l};
      int texC = index - texR * ${l};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${s});
      return ${S.texture2D}(${f}, uv);
    }
  `}function pb(c,e){const f=c.shapeInfo.logicalShape,x=c.name,S="get"+x.charAt(0).toUpperCase()+x.slice(1),C=f[3],o=f[2]*C,y=f[1]*o,{newShape:t,keptDims:s}=Ii(f);if(t.length<f.length){const p=ua(c,t),m=["row","col","depth","depth2"];return`
      ${aa(p,e)}
      float ${S}(int row, int col, int depth, int depth2) {
        return ${S}(${la(m,s)});
      }
    `}if(c.shapeInfo.isUniform)return`
      float ${S}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${y}, ${o}, ${C}, 1)));
        ${oa(c)}
      }
    `;const l=c.shapeInfo.flatOffset,a=c.shapeInfo.texShape,r=a[0],i=a[1],n=`int stride2 = ${x}Shape[3];`,h=`int stride1 = ${x}Shape[2] * stride2;`,d=`int stride0 = ${x}Shape[1] * stride1;`;if(i===y&&l==null)return e?`
      float ${S}(int row, int col, int depth, int depth2) {
        ${n}
        ${h}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${x}TexShape[1], ${x}TexShape[0]);
        return sampleTexture(${x}, uv);
      }
    `:`
      float ${S}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${C}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}.0, ${r}.0);
        return sampleTexture(${x}, uv);
      }
    `;if(i===C&&l==null)return e?`
      float ${S}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${x}Shape[1] * ${x}Shape[2], ${x}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${x}TexShape[1], ${x}TexShape[0]);
        return sampleTexture(${x}, uv);
      }
    `:`
      float ${S}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${f[1]*f[2]}, ${f[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${i}.0, ${r}.0);
        return sampleTexture(${x}, uv);
      }
    `;const u=Cr(x);return e?`
    float ${S}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${n}
      ${h}
      ${d}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${x}TexShape[0], ${x}TexShape[1], index + ${u});
      return sampleTexture(${x}, uv);
    }
  `:`
    float ${S}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${y} + col * ${o} +
          depth * ${C} + depth2;
      vec2 uv = uvFromFlat(${r}, ${i}, index + ${u});
      return sampleTexture(${x}, uv);
    }
  `}function mb(c){const e=c.shapeInfo.logicalShape,f=c.name,x="get"+f.charAt(0).toUpperCase()+f.slice(1),S=e[4],C=e[3]*S,o=e[2]*C,y=e[1]*o,{newShape:t,keptDims:s}=Ii(e);if(t.length<e.length){const h=ua(c,t),d=["row","col","depth","depth2","depth3"];return`
      ${aa(h)}
      float ${x}(int row, int col, int depth, int depth2, int depth3) {
        return ${x}(${la(d,s)});
      }
    `}if(c.shapeInfo.isUniform)return`
      float ${x}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${y}, ${o}, ${C}, ${S})) +
          depth3;
        ${oa(c)}
      }
    `;const l=c.shapeInfo.flatOffset,a=c.shapeInfo.texShape,r=a[0],i=a[1];if(i===y&&l==null)return`
      float ${x}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${C}, ${S}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}.0, ${r}.0);
        return sampleTexture(${f}, uv);
      }
    `;if(i===S&&l==null)return`
      float ${x}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${i}.0, ${r}.0);
        return sampleTexture(${f}, uv);
      }
    `;const n=Cr(f);return`
    float ${x}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${y} + col * ${o} + depth * ${C} +
          depth2 * ${S} + depth3 + ${n};
      vec2 uv = uvFromFlat(${r}, ${i}, index);
      return sampleTexture(${f}, uv);
    }
  `}function vb(c){const e=c.shapeInfo.logicalShape,f=c.name,x="get"+f.charAt(0).toUpperCase()+f.slice(1),{newShape:S,keptDims:C}=Ii(e);if(S.length<e.length){const d=ua(c,S),u=["row","col","depth","depth2","depth3","depth4"];return`
      ${aa(d)}
      float ${x}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${x}(${la(u,C)});
      }
    `}const o=e[5],y=e[4]*o,t=e[3]*y,s=e[2]*t,l=e[1]*s;if(c.shapeInfo.isUniform)return`
      float ${x}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${l}, ${s}, ${t}, ${y})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${oa(c)}
      }
    `;const a=c.shapeInfo.flatOffset,r=c.shapeInfo.texShape,i=r[0],n=r[1];if(n===l&&a==null)return`
      float ${x}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${s}, ${t}, ${y}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${n}.0, ${i}.0);
        return sampleTexture(${f}, uv);
      }
    `;if(n===o&&a==null)return`
      float ${x}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${n}.0, ${i}.0);
        return sampleTexture(${f}, uv);
      }
    `;const h=Cr(f);return`
    float ${x}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${s} + depth * ${t} +
          depth2 * ${y} + depth3 * ${o} + depth4 + ${h};
      vec2 uv = uvFromFlat(${i}, ${n}, index);
      return sampleTexture(${f}, uv);
    }
  `}function oa(c){const e=c.name,f=bt(c.shapeInfo.logicalShape);return f<2?`return ${e};`:`
    for (int i = 0; i < ${f}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function gb(c,e){const f=c.name,x=f.charAt(0).toUpperCase()+f.slice(1),S="get"+x+"AtOutCoords",C=c.shapeInfo.logicalShape.length,o=e.logicalShape.length,y=$g(c.shapeInfo.logicalShape,e.logicalShape),t=De(o),s=o-C;let l;const a=["x","y","z","w","u","v"];C===0?l="":o<2&&y.length>=1?l="coords = 0;":l=y.map(p=>`coords.${a[p+s]} = 0;`).join(`
`);let r="";o<2&&C>0?r="coords":r=c.shapeInfo.logicalShape.map((p,m)=>`coords.${a[m+s]}`).join(", ");let i="return outputValue;";const h=bt(c.shapeInfo.logicalShape)===1,u=bt(e.logicalShape)===1;if(C===1&&!h&&!u)i=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(h&&!u)o===1?i=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:i=`
        return vec4(outputValue.x);
      `;else if(y.length){const p=C-2,m=C-1;y.indexOf(p)>-1&&y.indexOf(m)>-1?i="return vec4(outputValue.x);":y.indexOf(p)>-1?i="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":y.indexOf(m)>-1&&(i="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${S}() {
      ${t} coords = getOutputCoords();
      ${l}
      vec4 outputValue = get${x}(${r});
      ${i}
    }
  `}function xb(c,e){const f=c.name,x=f.charAt(0).toUpperCase()+f.slice(1),S="get"+x+"AtOutCoords",C=e.texShape,o=c.shapeInfo.texShape,y=c.shapeInfo.logicalShape.length,t=e.logicalShape.length;if(!c.shapeInfo.isUniform&&y===t&&c.shapeInfo.flatOffset==null&&je(o,C))return`
      float ${S}() {
        return sampleTexture(${f}, resultUV);
      }
    `;const s=De(t),l=$g(c.shapeInfo.logicalShape,e.logicalShape),a=t-y;let r;const i=["x","y","z","w","u","v"];y===0?r="":t<2&&l.length>=1?r="coords = 0;":r=l.map(h=>`coords.${i[h+a]} = 0;`).join(`
`);let n="";return t<2&&y>0?n="coords":n=c.shapeInfo.logicalShape.map((h,d)=>`coords.${i[d+a]}`).join(", "),`
    float ${S}() {
      ${s} coords = getOutputCoords();
      ${r}
      return get${x}(${n});
    }
  `}function De(c){if(c<=1)return"int";if(c===2)return"ivec2";if(c===3)return"ivec3";if(c===4)return"ivec4";if(c===5)return"ivec5";if(c===6)return"ivec6";throw Error(`GPU for rank ${c} is not yet supported`)}function gd(c,e,f){const{newShape:x,keptDims:S}=Ii(e),C=e.length,o=c&&C===3&&e[0]===1,y=o?e.slice(1):x,t=!c&&C>1&&!je(e,f)&&x.length<C||o;return{useSqueezeShape:t,uniformShape:t?y:e,keptDims:S}}function ua(c,e){const f=JSON.parse(JSON.stringify(c));return f.shapeInfo.logicalShape=e,f}function la(c,e){return e.map(f=>c[f]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yb(c,e,f,x){const S=f.map((l,a)=>{const r={logicalShape:l.shape,texShape:l.isUniform?null:l.texData.texShape,isUniform:l.isUniform,isPacked:l.isUniform?!1:l.texData.isPacked,flatOffset:null};return l.texData!=null&&l.texData.slice!=null&&l.texData.slice.flatOffset>0&&(r.flatOffset=l.texData.slice.flatOffset),{name:e.variableNames[a],shapeInfo:r}}),C=S.map(l=>l.shapeInfo),o={logicalShape:x.shape,texShape:x.texData.texShape,isUniform:!1,isPacked:x.texData.isPacked,flatOffset:null},y=$5(S,o,e),t=c5(c.gl,y),s=c.createProgram(t);return St().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:t,source:y,webGLProgram:s,inShapeInfos:C,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(c.buildVao(s),Object.assign({program:e,fragmentShader:t,source:y,webGLProgram:s,inShapeInfos:C,outShapeInfo:o},Vg(c,e,s)))}function Vg(c,e,f){const x=[],S=[];let C,o,y,t=null,s=null;s=c.getUniformLocation(f,"NAN",!1),St().getNumber("WEBGL_VERSION")===1&&(t=c.getUniformLocation(f,"INFINITY",!1));const l=!1;for(const a of e.variableNames){const r={name:a,uniform:c.getUniformLocation(f,a,l),offset:c.getUniformLocation(f,`offset${a}`,l)};e.enableShapeUniforms&&(r.shape=c.getUniformLocation(f,`${a}Shape`,l),r.texShape=c.getUniformLocation(f,`${a}TexShape`,l)),x.push(r)}if(e.enableShapeUniforms&&(C=c.getUniformLocation(f,"outShape",l),y=c.getUniformLocation(f,"outShapeStrides",l),o=c.getUniformLocation(f,"outTexShape",l)),e.customUniforms)for(const a of e.customUniforms)S.push(c.getUniformLocation(f,a.name,l));return{variablesLocations:x,customUniformLocations:S,infLoc:t,nanLoc:s,outShapeLocation:C,outShapeStridesLocation:y,outTexShapeLocation:o}}function _d(c,e){if(c.length!==e.length)throw Error(`Binary was compiled with ${c.length} inputs, but was executed with ${e.length} inputs`);c.forEach((f,x)=>{const S=f.logicalShape,C=e[x],o=C.shape;if(!je(S,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${S} and ${o} must match`);if(f.isUniform&&C.isUniform)return;const y=f.texShape,t=C.isUniform?null:C.texData.texShape;if(!je(y,t))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${y} and ${t} must match`)})}function Tb(c,e,f,x,S){e.program.enableShapeUniforms||(_d(e.inShapeInfos,f),_d([e.outShapeInfo],[x]));const C=x.texData.texture,o=x.texData.texShape;x.texData.isPacked?c.setOutputPackedMatrixTexture(C.texture,o[0],o[1]):c.setOutputMatrixTexture(C.texture,o[0],o[1]),c.setProgram(e.webGLProgram),c.bindVertexArray(e.webGLProgram.vao),St().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&c.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&c.gl.uniform1f(e.nanLoc,NaN);for(let t=0;t<f.length;++t){const s=f[t],{uniform:l,offset:a,shape:r,texShape:i}=e.variablesLocations[t];if(r){const{uniformShape:n}=gd(e.program.packedInputs,s.shape,s.texData.texShape);switch(n.length){case 1:c.gl.uniform1iv(r,new Int32Array(n));break;case 2:c.gl.uniform2iv(r,new Int32Array(n));break;case 3:c.gl.uniform3iv(r,new Int32Array(n));break;case 4:c.gl.uniform4iv(r,new Int32Array(n));break}}if(i&&c.gl.uniform2i(i,s.texData.texShape[0],s.texData.texShape[1]),l!=null){if(s.isUniform){if(bt(s.shape)<2)c.gl.uniform1f(l,s.uniformValues[0]);else{let n=s.uniformValues;n instanceof Float32Array||(n=new Float32Array(n)),c.gl.uniform1fv(l,n)}continue}s.texData.slice!=null&&a!=null&&c.gl.uniform1i(a,s.texData.slice.flatOffset),c.setInputMatrixTexture(s.texData.texture.texture,l,t)}}const y=e.outShapeLocation;if(y)switch(x.shape.length){case 1:c.gl.uniform1iv(y,new Int32Array(x.shape));break;case 2:c.gl.uniform2iv(y,new Int32Array(x.shape));break;case 3:c.gl.uniform3iv(y,new Int32Array(x.shape));break;case 4:c.gl.uniform4iv(y,new Int32Array(x.shape));break}if(e.outShapeStridesLocation){const t=Ne(x.shape);switch(x.shape.length){case 2:c.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(t));break;case 3:c.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(t));break;case 4:c.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(t));break}}if(e.outTexShapeLocation&&c.gl.uniform2i(e.outTexShapeLocation,x.texData.texShape[0],x.texData.texShape[1]),e.program.customUniforms&&S)for(let t=0;t<e.program.customUniforms.length;++t){const s=e.program.customUniforms[t],l=e.customUniformLocations[t],a=S[t];if(s.type==="float")c.gl.uniform1fv(l,a);else if(s.type==="vec2")c.gl.uniform2fv(l,a);else if(s.type==="vec3")c.gl.uniform3fv(l,a);else if(s.type==="vec4")c.gl.uniform4fv(l,a);else if(s.type==="int")c.gl.uniform1iv(l,a);else if(s.type==="ivec2")c.gl.uniform2iv(l,a);else if(s.type==="ivec3")c.gl.uniform3iv(l,a);else if(s.type==="ivec4")c.gl.uniform4iv(l,a);else throw Error(`uniform type ${s.type} is not supported yet.`)}c.executeProgram()}function Sb(c,e,f){let x="";e.concat(f).forEach(o=>{const y=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(c.enableShapeUniforms&&!o.isUniform){const t=o.texData.texShape,{useSqueezeShape:s,uniformShape:l,keptDims:a}=gd(c.packedInputs,o.shape,t);let r="",i="",n="";if(l.length===1&&c.packedInputs){const g=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];r=`${g[0]>1}_${g[1]>1}`}else if(l.length===2&&!c.packedInputs)i=`${l[0]>1}_${l[1]>1}`;else if(l.length>2&&!c.packedInputs){const g=Ne(l);n=`${g[0]===t[1]}_${g[g.length-1]===t[1]}`}const h=o.shape.length,d=l.length===2&&je(o.shape,t),u=bt(o.shape)===1,p=Oo(o.shape,f.shape),m=!c.packedInputs&&h===f.shape.length&&je(t,f.texData.texShape),v=c.packedInputs||l.length>2?"":`${t[0]>1}_${t[1]>1}`;x+=`${h}_${m}_${s?a:""}_${l.length}_${u}_${p}_${d}_${r}_${i}_${n}_${v}_${y}`}else{const t=o.isUniform?"uniform":o.texData.texShape;x+=`${o.shape}_${t}_${y}`}});const S=c.userCode;let C=c.constructor.name;return C+="_"+x+"_"+S+`${St().getNumber("WEBGL_VERSION")}`,C}function Tn(c){return St().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&c<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cb{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ka.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const f=An();this.outputShape=e,this.enableShapeUniforms=Tn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?fl(["r","c","d"],e):Sr(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${f.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eb{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ka.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const f=An();this.outputShape=e,this.enableShapeUniforms=Tn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?fl(["r","c","d"],e):Sr(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${f.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wb{constructor(e){this.variableNames=["A"],this.outTexUsage=Yn.DOWNLOAD;const f=An();this.outputShape=e,this.userCode=`
      ${Bg}

      void main() {
        float x = getAAtOutCoords();
        ${f.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bb{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Yn.DOWNLOAD;const f=An();this.outputShape=e,this.userCode=`
      ${Bg}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${f.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ab={R:0,G:1,B:2,A:3};class tp{constructor(e,f=!1,x="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const S=An();this.outputShape=e,this.enableShapeUniforms=Tn(this.outputShape.length);let C="result";f&&(C="floor(result * 255. + 0.5)");let o="";for(let y=0;y<x.length;y++){const t=x[y];o+=`
          if(offset == ${y}) {
            result = values[${Ab[t]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?vd():md(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${x.length});

        flatIndex = idiv(flatIndex, ${x.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${S.texture2D}(A, uv);
          ${o}
        }
        ${S.output} = vec4(${C}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rb{constructor(e,f=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const x=An();this.outputShape=e,this.enableShapeUniforms=Tn(this.outputShape.length);let S="",C="result";f&&(C="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let y=0;y<=1;y++){const t=o*2+y;S+=`
          localCoords = coords;
          if(localCoords[2] + ${y} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${y};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${x.texture2D}(A, uv);

            if (offset == 0) {
              result[${t}] = values[0];
            } else if (offset == 1) {
              result[${t}] = values[1];
            } else if (offset == 2) {
              result[${t}] = values[2];
            } else {
              result[${t}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?vd():md(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${S}

          ${x.output} = ${C};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ib(c){const e=An(),f=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return f5(c,f)}function Pb(c){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return v5(c,e)}function Fb(c){const e=new Uint16Array([0,1,2,2,1,3]);return g5(c,e)}function io(c,e,f,x,S,C){y5(e,f);const o=x5(c),y=c.TEXTURE_2D;return Jt(c,()=>c.bindTexture(y,o)),Jt(c,()=>c.texParameteri(y,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE)),Jt(c,()=>c.texParameteri(y,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)),Jt(c,()=>c.texParameteri(y,c.TEXTURE_MIN_FILTER,c.NEAREST)),Jt(c,()=>c.texParameteri(y,c.TEXTURE_MAG_FILTER,c.NEAREST)),St().getNumber("WEBGL_VERSION")===1?Jt(c,()=>c.texImage2D(y,0,x,e,f,0,S,C,null)):Jt(c,()=>c.texStorage2D(y,1,x,e,f)),Jt(c,()=>c.bindTexture(c.TEXTURE_2D,null)),{texture:o,texShape:[f,e]}}function zg(c){return c.internalFormatFloat}function Nb(c,e,f,x){const[S,C]=no(e,f);return io(c,S,C,zg(x),x.textureFormatFloat,c.FLOAT)}function kg(c){return c.internalFormatHalfFloat}function Mb(c,e,f,x){const[S,C]=no(e,f);return io(c,S,C,kg(x),x.textureFormatFloat,x.textureTypeHalfFloat)}function Wg(c){return c.downloadTextureFormat}function Ob(c,e,f,x){const[S,C]=no(e,f);return io(c,S,C,Wg(x),c.RGBA,c.UNSIGNED_BYTE)}function Xg(c){return c.internalFormatPackedFloat}function Db(c,e,f,x){const[S,C]=ra(e,f);return io(c,S,C,Xg(x),c.RGBA,c.FLOAT)}function Hg(c){return c.internalFormatPackedHalfFloat}function Lb(c,e,f,x){const[S,C]=ra(e,f);return io(c,S,C,Hg(x),c.RGBA,x.textureTypeHalfFloat)}function Bb(c,e,f){return Jt(c,()=>c.bindBuffer(c.ARRAY_BUFFER,f)),Qd(c,e,"clipSpacePos",f,3,20,0)&&Qd(c,e,"uv",f,2,20,12)}function $b(c,e,f,x,S,C){Jt(c,()=>c.bindTexture(c.TEXTURE_2D,e));let o,y,t;S instanceof Uint8Array?(o=new Uint8Array(f*x*4),y=c.UNSIGNED_BYTE,t=c.RGBA):(o=new Float32Array(f*x*4),y=c.FLOAT,t=C.internalFormatPackedFloat),o.set(S),St().getNumber("WEBGL_VERSION")===2?Jt(c,()=>c.texSubImage2D(c.TEXTURE_2D,0,0,0,f,x,c.RGBA,y,o)):Jt(c,()=>c.texImage2D(c.TEXTURE_2D,0,t,f,x,0,c.RGBA,y,o)),Jt(c,()=>c.bindTexture(c.TEXTURE_2D,null))}function Gb(c,e,f){Jt(c,()=>c.bindTexture(c.TEXTURE_2D,e)),f.data instanceof Uint8Array?St().getNumber("WEBGL_VERSION")===2?Jt(c,()=>c.texSubImage2D(c.TEXTURE_2D,0,0,0,f.width,f.height,c.RGBA,c.UNSIGNED_BYTE,f.data)):Jt(c,()=>c.texImage2D(c.TEXTURE_2D,0,c.RGBA,f.width,f.height,0,c.RGBA,c.UNSIGNED_BYTE,f.data)):St().getNumber("WEBGL_VERSION")===2?Jt(c,()=>c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,f)):Jt(c,()=>c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,f)),Jt(c,()=>c.bindTexture(c.TEXTURE_2D,null))}function Ub(c,e,f,x){const S=c.createBuffer();Jt(c,()=>c.bindBuffer(c.PIXEL_PACK_BUFFER,S));const y=4*4*e*f;return Jt(c,()=>c.bufferData(c.PIXEL_PACK_BUFFER,y,c.STREAM_READ)),Jt(c,()=>c.readPixels(0,0,f,e,c.RGBA,c.FLOAT,0)),Jt(c,()=>c.bindBuffer(c.PIXEL_PACK_BUFFER,null)),S}function Vb(c,e,f){const x=c,S=new Float32Array(f);return x.bindBuffer(x.PIXEL_PACK_BUFFER,e),x.getBufferSubData(x.PIXEL_PACK_BUFFER,0,S),x.bindBuffer(x.PIXEL_PACK_BUFFER,null),S}function zb(c,e,f,x){const[S,C]=no(e,f),o=4,y=new Uint8Array(i5(e*f,o));return Jt(c,()=>c.readPixels(0,0,S,C,x.downloadTextureFormat,c.UNSIGNED_BYTE,y)),new Float32Array(y.buffer)}function kb(c,e,f,x,S,C,o,y){const t=c,s=new Float32Array(r5(C,o));return t.bindBuffer(t.PIXEL_PACK_BUFFER,e),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,s),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),s}function Wb(c,e,f){const x=new Float32Array(e*f*4);return Jt(c,()=>c.readPixels(0,0,f,e,c.RGBA,c.FLOAT,x)),x}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Il{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const f=St().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,e5(f,e)):this.gl=Cs(f),e=this.gl,St().getNumber("WEBGL_VERSION")===2){const C=e;this.createVertexArray=()=>Jt(C,()=>C.createVertexArray()),this.bindVertexArray=o=>Jt(C,()=>C.bindVertexArray(o)),this.deleteVertexArray=o=>Jt(C,()=>C.deleteVertexArray(o)),this.getVertexArray=()=>Jt(C,()=>C.getParameter(C.VERTEX_ARRAY_BINDING))}else if(e!=null){const C=e.getExtension("OES_vertex_array_object");if(C==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Jt(e,()=>C.createVertexArrayOES()),this.bindVertexArray=o=>Jt(e,()=>C.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Jt(e,()=>C.deleteVertexArrayOES(o)),this.getVertexArray=()=>Jt(e,()=>e.getParameter(C.VERTEX_ARRAY_BINDING_OES))}let x="WEBGL_color_buffer_float";const S="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),St().getNumber("WEBGL_VERSION")===1){const C="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=co(this.gl,C),us(this.gl,o))this.textureHalfFloatExtension=co(this.gl,o);else if(St().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(x),us(this.gl,S))this.colorBufferHalfFloatExtension=co(this.gl,S);else if(St().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(x="EXT_color_buffer_float",us(this.gl,x))this.colorBufferFloatExtension=this.gl.getExtension(x);else if(us(this.gl,S))this.colorBufferHalfFloatExtension=this.gl.getExtension(S);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Pb(this.gl),this.indexBuffer=Fb(this.gl),this.framebuffer=T5(this.gl),this.textureConfig=pd(this.gl,this.textureHalfFloatExtension)}get debug(){return St().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Jt(e,()=>e.finish()),Jt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Jt(e,()=>e.deleteFramebuffer(this.framebuffer)),Jt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Jt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Jt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,f){return this.throwIfDisposed(),Nb(this.gl,e,f,this.textureConfig)}createFloat16MatrixTexture(e,f){return this.throwIfDisposed(),Mb(this.gl,e,f,this.textureConfig)}createUnsignedBytesMatrixTexture(e,f){return this.throwIfDisposed(),Ob(this.gl,e,f,this.textureConfig)}uploadPixelDataToTexture(e,f){this.throwIfDisposed(),Gb(this.gl,e,f)}uploadDenseMatrixToTexture(e,f,x,S){this.throwIfDisposed(),$b(this.gl,e,f,x,S,this.textureConfig)}createFloat16PackedMatrixTexture(e,f){return this.throwIfDisposed(),Lb(this.gl,e,f,this.textureConfig)}createPackedMatrixTexture(e,f){return this.throwIfDisposed(),Db(this.gl,e,f,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Jd(this.gl,this.framebuffer),this.outputTexture=null),Jt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,f,x){return this.downloadMatrixDriver(e,()=>zb(this.gl,f,x,this.textureConfig))}downloadPackedMatrixFromBuffer(e,f,x,S,C,o){return kb(this.gl,e,f,x,S,C,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,f){return Vb(this.gl,e,f)}createBufferFromTexture(e,f,x){this.bindTextureToFrameBuffer(e);const S=Ub(this.gl,f,x,this.textureConfig);return this.unbindTextureToFrameBuffer(),S}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let f,x;if(St().getBool("WEBGL_FENCE_API_ENABLED")){const S=e,C=S.fenceSync(S.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),x=()=>{const o=S.clientWaitSync(C,0,0);return o===S.ALREADY_SIGNALED||o===S.CONDITION_SATISFIED},f=C}else St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(f=this.beginQuery(),this.endQuery(),x=()=>this.isQueryAvailable(f,St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):x=()=>!0;return{query:f,isFencePassed:x}}downloadMatrixFromPackedTexture(e,f,x){return this.downloadMatrixDriver(e,()=>Wb(this.gl,f,x))}createProgram(e){this.throwIfDisposed();const f=this.gl;this.vertexShader==null&&(this.vertexShader=Ib(f));const x=p5(f);Jt(f,()=>f.attachShader(x,this.vertexShader)),Jt(f,()=>f.attachShader(x,e)),m5(f,x);const S=Object.assign(x,{vao:this.createVertexArray()});return this.debug&&wl(f,S),S}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const f=this.gl;Jt(f,()=>f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Bb(f,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Jt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&wl(this.gl,this.program),Jt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,f,x=!0){return this.throwIfDisposed(),x?C5(this.gl,e,f):E5(this.gl,e,f)}getAttributeLocation(e,f){return this.throwIfDisposed(),Jt(this.gl,()=>this.gl.getAttribLocation(e,f))}getUniformLocationNoThrow(e,f){return this.throwIfDisposed(),this.gl.getUniformLocation(e,f)}setInputMatrixTexture(e,f,x){this.throwIfDisposed(),this.throwIfNoProgram(),w5(this.gl,e,f,x)}setOutputMatrixTexture(e,f,x){this.setOutputMatrixTextureDriver(e,x,f)}setOutputPackedMatrixTexture(e,f,x){this.throwIfDisposed();const[S,C]=ra(f,x);this.setOutputMatrixTextureDriver(e,S,C)}setOutputMatrixWriteRegion(e,f,x,S){this.setOutputMatrixWriteRegionDriver(x,e,S,f)}setOutputPackedMatrixWriteRegion(e,f,x,S){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&wl(this.gl,this.program),po(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const f=this.getVertexArray();console.assert(f===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Jt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Jt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=co(this.gl,St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const x=this.gl,S=this.getQueryTimerExtensionWebGL2(),C=x.createQuery();return x.beginQuery(S.TIME_ELAPSED_EXT,C),C}const e=this.getQueryTimerExtensionWebGL1(),f=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,f),f}endQuery(){if(St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const f=this.gl,x=this.getQueryTimerExtensionWebGL2();f.endQuery(x.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Ad(()=>this.disposed||this.isQueryAvailable(e,St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,f){if(f===0)return null;if(f===2){const x=this.gl;return x.getQueryParameter(e,x.QUERY_RESULT)/1e6}else{const x=this.getQueryTimerExtensionWebGL1();return x.getQueryObjectEXT(e,x.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,f){if(f===0)return!0;if(f===2){const x=this.gl,S=this.getQueryTimerExtensionWebGL2(),C=x.getQueryParameter(e,x.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(S.GPU_DISJOINT_EXT)),C&&!this.disjoint}else{const x=this.getQueryTimerExtensionWebGL1(),S=x.getQueryObjectEXT(e,x.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(x.GPU_DISJOINT_EXT)),S&&!this.disjoint}}pollFence(e){return new Promise(f=>{this.addItemToPoll(()=>e.isFencePassed(),()=>f())})}pollItems(){const e=Xb(this.itemsToPoll.map(f=>f.isDoneFn));for(let f=0;f<=e;++f){const{resolveFn:x}=this.itemsToPoll[f];x()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,f){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:f}),this.itemsToPoll.length>1)return;let x;"setTimeoutCustom"in St().platform&&(x=St().platform.setTimeoutCustom.bind(St().platform)),Ad(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,x)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),bl(this.gl,e,this.framebuffer),this.debug&&po(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(bl(this.gl,this.outputTexture,this.framebuffer),this.debug&&po(this.gl)):Jd(this.gl,this.framebuffer)}downloadMatrixDriver(e,f){this.bindTextureToFrameBuffer(e);const x=f();return this.unbindTextureToFrameBuffer(),x}setOutputMatrixTextureDriver(e,f,x){this.throwIfDisposed();const S=this.gl;bl(S,e,this.framebuffer),this.debug&&po(S),this.outputTexture=e,Jt(S,()=>S.viewport(0,0,f,x)),Jt(S,()=>S.scissor(0,0,f,x))}setOutputMatrixWriteRegionDriver(e,f,x,S){this.throwIfDisposed(),Jt(this.gl,()=>this.gl.scissor(e,f,x,S))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Xb(c){let e=0;for(;e<c.length&&c[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hb(c){const e=new Float32Array(c.length);for(let f=0;f<c.length;++f)e[f]=Math.abs(c[f]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bn(c){return(e,f,x,S,C)=>{const o=Te(e,f),y=o.length,t=Ne(o),s=bt(o),l=Ei(C,s),a=e.length,r=f.length,i=Ne(e),n=Ne(f),h=Oo(e,o),d=Oo(f,o);if(h.length+d.length===0)for(let u=0;u<l.length;++u)l[u]=c(x[u%x.length],S[u%S.length]);else for(let u=0;u<l.length;++u){const p=Lh(u,y,t),m=p.slice(-a);h.forEach(w=>m[w]=0);const v=Xl(m,a,i),g=p.slice(-r);d.forEach(w=>g[w]=0);const T=Xl(g,r,n);l[u]=c(x[v],S[T])}return[l,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yb(c,e,f,x){if(x==="int32"){const S=Int32Array.from(c);return[e,"int32",S]}if(x==="bool"){const S=Ju([0],f),[C,o]=Bn((y,t)=>y!==t?1:0)(e,[],c,S,"bool");return[o,"bool",C]}throw new Error(`Error in Cast: failed to cast ${f} to ${x}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kb=Bn((c,e)=>c+e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jb(c,e,f,x,S){const C=bt(x),o=wi(S,f);for(let y=0;y<c.length;y++){const t=c[y];if(t<0)throw new Error("Input x must be non-negative!");t>=S||(C>0?o[t]+=e[y]:o[t]+=1)}return o}function Zb(c,e,f,x=!1){const S=c.shape[0],C=c.shape[1],o=Ze([S,f],e.dtype);for(let y=0;y<S;y++)for(let t=0;t<C;t++){const s=c.get(y,t);if(s<0)throw new Error("Input x must be non-negative!");s>=f||(x?o.set(1,y,s):e.size>0?o.set(o.get(y,s)+e.get(y,t),y,s):o.set(o.get(y,s)+1,y,s))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qb=Bn((c,e)=>c&e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ni(c){return(e,f,x)=>{const S=ln(f,e.length);for(let C=0;C<e.length;++C)S[C]=c(e[C],x);return S}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jb=ni(c=>Math.ceil(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yg(c,e,f,x){const S=ln(f,bt(e));if(x&&f!=="string"){let C=0;c.forEach(o=>{const y=bt(o.shape);S.set(o.vals,C),C+=y})}else{let C=0;c.forEach(o=>{const y=f==="string"?Jr(o.vals):o.vals;let t=0;for(let s=0;s<o.shape[0];++s){const l=s*e[1]+C;for(let a=0;a<o.shape[1];++a)S[l+a]=y[t++]}C+=o.shape[1]})}return S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qb=Bn((c,e)=>c===e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _b=ni(c=>Math.exp(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tA=ni(c=>Math.expm1(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eA=ni(c=>Math.floor(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nA=Bn((c,e)=>Math.floor(c/e));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sA(c,e,f,x,S,C,o,y,t){const s=Ze([x,C],f);for(let l=0;l<x;l++){const a=[];let r=0;for(let i=0;i<S;i++){const n=c[l*S+i];r+=n*o[i],a.push(n)}if(r<0||r>=t/C)throw new Error(`Invalid indices: ${a} does not index into ${y}`);for(let i=0;i<C;i++)s.values[l*C+i]=e.get(...e.indexToLoc(r*C+i))}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iA(c,e,f){const x=Ze(f,c.dtype);for(let S=0;S<x.size;++S){const o=x.indexToLoc(S).slice(),y=o[0],t=o[2],s=e.locToIndex([y,t]);o[2]=e.values[s];const l=c.locToIndex(o);0<=l&&l<c.values.length&&(x.values[S]=c.values[l])}return x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rA=Bn((c,e)=>c>e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aA=Bn((c,e)=>c>=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oA=Bn((c,e)=>c<e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uA=Bn((c,e)=>c<=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lA(c,e,f){const x=(e-c)/(f-1),S=wi(f,"float32");S[0]=c;for(let C=1;C<S.length;C++)S[C]=S[C-1]+x;return S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hA=ni(c=>Math.log(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fA(c,e,f,x){const S=Ei(x,bt(f));for(let C=0;C<S.length;++C){const o=C*e;let y=c[o];for(let t=0;t<e;++t){const s=c[o+t];(Number.isNaN(s)||s>y)&&(y=s)}S[C]=y}return S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cA=Bn((c,e)=>Math.max(c,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dA=Bn((c,e)=>Math.min(c,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kg=Bn((c,e)=>c*e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pA(c,e,f){const x=na(-1,f);return Kg([],e,x,c,f)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mA=Bn((c,e)=>c!==e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vA(c,e,f,x,S){const C=e.length,o=bt(e),y=Ne(e),t=Ne(S),s=Ei(f,bt(S));for(let l=0;l<o;++l){const a=Lh(l,C,y),r=new Array(a.length);for(let n=0;n<r.length;n++)r[n]=a[x[n]];const i=Xl(r,C,t);s[i]=c[l]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gA(c,e,f,x){const[S,C]=yn(c,x),o=Ms(e,"int32"),y=wi(bt(S),o),t=bt(C);for(let s=0;s<y.length;++s){const l=s*t;let a=1;for(let r=0;r<t;++r)a*=f[l+r];y[s]=a}return{outVals:y,outShape:S,outDtype:o}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xA(c,e,f){c.forEach((x,S)=>{if(x<0||x>=f){const C=Lh(S,e.length,Ne(e)).join(",");throw new Error(`indices[${C}] = ${x} is not in [0, ${f})`)}})}function yA(c,e){for(let f=0;f<c.length;++f){const x=c[f],S=f===c.length-1?e:c[f+1].length;if(x.length===0)throw new Error("Ragged splits may not be empty");if(x[0]<0)throw new Error("Ragged splits must be non-negative");if(x[x.length-1]>S)throw new Error("Ragged splits must not point past values");for(let C=1;C<x.length;++C)if(x[C-1]>x[C])throw new Error("Ragged splits must be sorted in ascending order")}}function TA(c,e,f,x){const S=[];let C=0;const o=e.length-1+f.length,y=new Array(o).fill(null).map(()=>[0]);yA(f,x);let t=1;for(let s=0;s<e.length-1;++s){t*=e[s];const l=e[s+1];for(let a=1;a<t+1;++a)y[s].push(a*l)}for(let s=0;s<c.length;++s){let l=c[s],a=c[s]+1;for(let r=0;r<f.length;++r){const i=f[r],n=r+e.length-1;if(n>=0){const h=y[n],d=h[h.length-1]-i[l];for(let u=l;u<a;++u)y[n].push(i[u+1]+d)}l=i[l],a=i[a]}a!==l&&(S.push([l,a]),C+=a-l)}return{outSplits:y,valueSlices:S,numValues:C}}function SA(c){const e=[];for(let f=0;f<c.length;++f){const x=c[f].length,S=ln("int32",x);e.push(S),c[f].forEach((C,o)=>S[o]=C)}return e}function ep(c,e){const f=c.slice(0,e);for(;f.length<e;)f.push(1);for(let x=e;x<c.length;x++)f[e-1]*=c[x];return f}function CA(c,e,f,x,S,C){const o=ep(e,2)[1],y=ep(C,2)[1];let t=0;for(const s of f)for(let l=s[0];l<s[1];++l){for(let a=0;a<x;++a)S[t*y+a]=c[l*o+a];++t}}function EA(c,e,f,x,S){const C=e.slice();C[0]=S;const o=ln(f,bt(C)),y=c.length,t=y===0?0:y/e[0];return CA(c,e,x,t,o,C),[o,C]}function wA(c,e,f,x,S,C,o,y){if(c.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const t=e[0][0]-1;if(xA(C,o,t),x.length===0)throw new Error("params.rank must be nonzero");const s=x[0],{outSplits:l,valueSlices:a,numValues:r}=TA(C,o,c,s),i=SA(l),n=EA(f,x,S,a,r);return[i,n[0],n[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const np=2147483647;function bA(c,e,f,x,S,C,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(S.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const y=e.length===0,t=S.length===0,s=o.length===0,l=[];y||l.push(e[0]),t||l.push(S[0]),s||l.push(o[0]);for(let d=1;d<l.length;++d)if(l[d]!==l[d-1])throw new Error("starts, limits, and deltas must have the same shape");const a=l.length===0?1:l[0],r=ln("int32",a+1);r[0]=0;for(let d=0;d<a;++d){const u=y?c[0]:c[d],p=t?x[0]:x[d],m=s?C[0]:C[d];if(m===0)throw new Error("Requires delta != 0");let v;if(m>0&&p<u||m<0&&p>u)v=0;else if(v=Math.ceil(Math.abs((p-u)/m)),v>np)throw new Error(`Requires ((limit - start) / delta) <= ${np}`);r[d+1]=r[d]+v}const i=r[a],n=ln(f,i);let h=0;for(let d=0;d<a;++d){const u=r[d+1]-r[d];let p=y?c[0]:c[d];const m=s?C[0]:C[d];for(let v=0;v<u;++v)n[h++]=p,p+=m}return[r,n]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var es=gs;class Uo{constructor(e,f,x,S,C,o,y,t,s,l){this.shape=e,this.shapeShape=f,this.values=x,this.valuesShape=S,this.valuesDType=C,this.defaultValue=o,this.defaultValueShape=y,this.rowPartitionValues=t,this.rowPartitionValuesShapes=s,this.rowPartitionTypes=gg(l),this.raggedRank=xg(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===es.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===es.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const f=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case es.VALUE_ROWIDS:return Uo.getMaxWidthValueRowID(f);case es.ROW_SPLITS:return Uo.getMaxWidthRowSplit(f);default:throw new Error(`Cannot handle partition type ${es[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const f=e.length;if(f===0||f===1)return 0;let x=0;for(let S=0;S<f-1;++S){const C=e[S+1]-e[S];C>x&&(x=C)}return x}static getMaxWidthValueRowID(e){const f=e.length;if(f===0)return 0;let x=0,S=e[0],C=0;for(let o=1;o<f;++o){const y=e[o];y!==S&&(S=y,C=Math.max(o-x,C),x=o)}return Math.max(f-x,C)}tensorShapeFromTensor(e,f,x=!0){if(f.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return ip(e,x)}calculateOutputSize(e){const f=this.valuesShape,x=this.defaultValueShape;yg(x,f);const S=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=vg(this.raggedRank,S,f);o[0]<0&&(o[0]=e);for(let y=1;y<=this.raggedRank;++y)o[y]<0&&(o[y]=this.getMaxWidth(y));return o}calculateFirstParentOutputIndex(e,f,x){const S=Math.min(e,x),C=[];let o=0;for(let y=0;y<S;++y,o+=f)C.push(o);for(let y=S;y<e;++y)C.push(-1);return it(C.length===e,()=>"Final length of result must be equal to firstDimension."),C}calculateOutputIndexRowSplit(e,f,x,S){const C=e.length,o=[];for(let y=0;y<C-1;++y){const t=e[y+1]-e[y];let s=Math.min(S,t),l=f[y];l===-1&&(s=0);for(let a=0;a<s;++a)o.push(l),l+=x;for(let a=0;a<t-s;++a)o.push(-1)}if(C>0&&o.length!==e[C-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,f,x,S){const C=e.length,o=[];if(C===0)return[];let y=0,t=e[0];if(t>=f.length)throw new Error(`Got currentValueRowId=${t}, which is not less than ${f.length}`);let s=f[t];o.push(s);for(let l=1;l<C;++l){const a=e[l];if(a===t)s>=0&&(++y,y<S?s+=x:s=-1);else{if(y=0,t=a,a>=f.length)throw new Error(`Got nextValueRowId=${a} which is not less than ${f.length}`);s=f[a]}o.push(s)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,f,x,S){const C=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case es.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(C,f,x,S);case es.ROW_SPLITS:if(C.length-1>f.length)throw new Error(`Row partition size is greater than output size: ${C.length-1} > ${f.length}`);return this.calculateOutputIndexRowSplit(C,f,x,S);default:throw new Error(`Unsupported partition type: ${es[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const f=this.rowPartitionTypes[0];switch(f){case es.FIRST_DIM_SIZE:return e[0];case es.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case es.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${es[f]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const f=this.getFirstDimensionSize(),x=this.calculateOutputSize(f),S=new Array(this.raggedRank+1);S[S.length-1]=1;for(let t=S.length-2;t>=0;--t)S[t]=S[t+1]*x[t+1];const C=ip(x,!1),o=ln(this.valuesDType,bt(C));if(S[0]*x[0]>0){let t=this.calculateFirstParentOutputIndex(f,S[0],x[0]);for(let s=1;s<=this.raggedRank;++s)t=this.calculateOutputIndex(s-1,t,S[s],x[s]);this.setOutput(this.raggedRank,t,o,C)}return[C,o]}setOutput(e,f,x,S){if(x.length===0)return;const C=this.values,o=x;let y=S.slice();y=y.slice(e+1);const t=bt(y),s=f.length;let l=this.defaultValue;if(l.length!==t&&l.length!==1){const n=this.defaultValueShape;de(()=>{const h=Nt(l,n);l=ba(h,y).dataSync()})}let a=0,r=0,i=0;for(let n=0;n<=s;++n){let h=n<s?f[n]:-1;if(h===i){++i;continue}if(r<i){const d=C.subarray(a*t),u=o.subarray(r*t),p=(i-r)*t;sp(u,d,p)}if(n>=s){const d=x.length;h=Math.floor(d/t)}if(h>i)if(this.defaultValue.length===1)o.subarray(i*t,h*t).fill(this.defaultValue[0]),i=h;else for(;h>i;){const d=o.slice(i*t);sp(d,l,t),++i}h<0?(a=n+1,r=i):(a=n,r=i,i=r+1)}}}function sp(c,e,f){for(let x=0;x<f;x++)c[x]=e[x]}function ip(c,e){const f=[];for(let x of c){if(x<0){if(!e)throw new Error(`Dimension ${x} must be >= 0`);if(x<-1)throw new Error(`Dimension ${x} must be >= -1`);x=-1}f.push(x)}return f}function AA(c,e,f,x,S,C,o,y,t,s){return new Uo(c,e,f,x,S,C,o,y,t,s).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jg(c,e,f,x){const S=c===e,C=c<e&&f<0,o=e<c&&f>1;if(S||C||o)return wi(0,x);const y=Math.abs(Math.ceil((e-c)/f)),t=wi(y,x);e<c&&f===1&&(f=-1),t[0]=c;for(let s=1;s<t.length;s++)t[s]=t[s-1]+f;return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RA=ni(c=>1/Math.sqrt(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IA(c,e,f,x,S,C,o,y,t,s){const l=[x/S,S],a=c.values,r=e.values;if(x===0)return Ze(f,e.dtype);const i=t instanceof Zr?t:Ze(l,e.dtype);typeof t=="string"||typeof t=="number"?i.values.fill(t):typeof t=="boolean"&&i.values.fill(+t);for(let n=0;n<C;n++){const h=[];let d=0;for(let u=0;u<o;u++){const p=a[n*o+u];h.push(p),d+=p*y[u]}if(d<0||d>=x/S)throw new Error(`Invalid indices: ${h} does not index into ${f}`);for(let u=0;u<S;u++)s?i.values[d*S+u]+=r[n*S+u]:i.values[d*S+u]=e.rank===0?r[0]:r[n*S+u]}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PA=ni(c=>1/(1+Math.exp(-c)));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fh(c,e,f,x,S){const C=ul(x,e,f),o=bt(f),y=Ne(x);if(C){const a=ll(e,y);return S==="string"?c.slice(a,a+o):c.subarray(a,a+o)}const t=S==="string"?Jr(c):c,s=Ze(x,S,t),l=Ze(f,S);for(let a=0;a<l.size;++a){const r=l.indexToLoc(a),i=r.map((n,h)=>n+e[h]);l.set(s.get(...i),...r)}return S==="string"?dd(l.values):l.values}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FA(c,e,f,x,S,C,o){const y=e[0],t=C[0],s=new Array(t),l=new Array(y),a=e[1];if(t===0){if(y!==0)throw new Error(ed(y));const d=ln(f,0),u=ln(S,0);return[d,[0,a],u,s,l]}let r=!0,i=0;const n=new Array(t).fill(0);for(let d=0;d<y;++d){const u=c[d*a];if(u<0)throw new Error(nd(d,u));if(u>=t)throw new Error(sd(d,u,t));++n[u],r=r&&u>=i,i=u}let h=!0;for(let d=0;d<t;++d){const u=n[d]===0;s[d]=u,h=h&&!u,n[d]=Math.max(n[d],1),d>0&&(n[d]+=n[d-1])}if(h&&r){const d=c,u=x;for(let p=0;p<y;++p)l[p]=p;return[d,[y,a],u,s,l]}else{const d=n[t-1],u=ln(f,d*a),p=ln(S,d),m=new Array(t).fill(0);for(let v=0;v<y;++v){const g=c[v*a],T=m[g],w=(g===0?0:n[g-1])+T;m[g]++;for(let b=0;b<a;++b)u[w*a+b]=c[v*a+b];p[w]=x[v],l[v]=w}for(let v=0;v<t;++v)if(m[v]===0){const T=v===0?0:n[v-1];u[T*a+0]=v;for(let w=1;w<a;++w)u[T*a+w]=0;p[T]=o}return[u,[d,a],p,s,l]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NA(c,e,f,x,S){const C=bt(x),o=e[0],y=S.length,t=[];let s=1,l=-1;for(let d=0;d<y;++d){const u=S[d];if(u===-1){if(l!==-1)throw new Error(id(l,d));l=d,t.push(1)}else{if(u<0)throw new Error(rd(d,u));s*=u,t.push(u)}}if(l!==-1){if(s<=0)throw new Error(ad());const d=Math.trunc(C/s);if(s*d!==C)throw new Error(od(x,t));t[l]=d}if(bt(t)!==C)throw new Error(ud(x,t));const r=x.length,i=[];if(r>0){i[r-1]=1;for(let d=r-2;d>=0;--d)i[d]=i[d+1]*x[d+1]}const n=[];if(y>0){n[y-1]=1;for(let d=y-2;d>=0;--d)n[d]=n[d+1]*t[d+1]}const h=ln(f,o*y);for(let d=0;d<o;++d){let u=0;for(let p=0;p<r;++p)u+=c[d*r+p]*i[p];for(let p=0;p<y;++p)h[d*y+p]=Math.trunc(u/n[p]),u%=n[p]}return[h,[o,y],t]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MA(c,e,f,x,S,C=!1,o=0){const y=x.length,t=[e[0],c.length/e[0]],s=t[1],a=y>0?S[y-1]+1:0;if(a<0)throw new Error(za());const r=e.slice();r[0]=a;const i=r.reduce((m,v)=>m*v,1),n=ln(f,i);if(y===0)return a>0&&n.fill(o),[n,r];if(a<=0)throw new Error(za());let h=0,d=1,u=0,p=S[h];for(;;){let m=0;if(d<y){if(m=S[d],p===m){++d;continue}if(p>=m)throw new Error(ld())}if(p<0||p>=a)throw new Error(hd(p,a));p>u&&n.fill(o,u*s,p*s);for(let v=h;v<d;++v){const g=x[v];if(g<0||g>=t[0])throw new Error(fd(v,x[v],t[0]));for(let T=0;T<s;T++)n[p*s+T]+=c[g*s+T]}if(C)for(let v=0;v<s;v++)n[p*s+v]/=d-h;if(h=d,++d,u=p+1,p=m,d>y)break}return u<a&&n.fill(o,u*s,a*s),[n,r]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OA=ni(c=>Math.sqrt(c));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DA=Bn((c,e)=>{const f=c-e;return f*f});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LA=ni((c,e)=>{const{pattern:f,replaceGlobal:x,rewrite:S}=e;return c.replace(new RegExp(f,x?"g":""),S)});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BA(c,e,f,x){const S=Ze(c,e.dtype);for(let C=0;C<S.size;C++){const o=S.indexToLoc(C),y=new Array(o.length);for(let t=0;t<y.length;t++)y[t]=o[t]*f[t]+x[t];S.set(e.get(...y),...o)}return S}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $A{constructor(e,f,x,S,C,o){this.separator=sr(e),this.nGramWidths=f,this.leftPad=sr(x),this.rightPad=sr(S),this.padWidth=C,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,f){const x=this.getPadWidth(f);return Math.max(0,e+2*x-f+1)}createNGrams(e,f,x,S,C,o){for(let y=0;y<C;++y){const t=this.getPadWidth(o),s=Math.max(0,t-y),l=Math.max(0,t-(C-(y+1))),a=o-(s+l),r=f+(s>0?0:y-t);let i=0;i+=s*this.leftPad.length;for(let p=0;p<a;++p)i+=e[r+p].length;i+=l*this.rightPad.length;const n=s+l+a-1;i+=n*this.separator.length,x[S+y]=new Uint8Array(i);const h=x[S+y];let d=0;const u=p=>p.forEach(m=>h[d++]=m);for(let p=0;p<s;++p)u(this.leftPad),u(this.separator);for(let p=0;p<a-1;++p)u(e[r+p]),u(this.separator);if(a>0){u(e[r+a-1]);for(let p=0;p<l;++p)u(this.separator),u(this.rightPad)}else{for(let p=0;p<l-1;++p)u(this.rightPad),u(this.separator);u(this.rightPad)}}}compute(e,f){const x=e.length,S=f.length;if(S>0){let t=f[0];if(t!==0)throw new Error(`First split value must be 0, got ${t}`);for(let s=1;s<S;++s){let l=f[s]>=t;if(l=l&&f[s]<=x,!l)throw new Error(`Invalid split value ${f[s]}, must be in [${t}, ${x}]`);t=f[s]}if(t!==x)throw new Error(`Last split value must be data size. Expected ${x}, got ${t}`)}const C=S-1,o=ln("int32",S);if(x===0||S===0){const t=new Array(x);for(let s=0;s<=C;++s)o[s]=0;return[t,o]}o[0]=0;for(let t=1;t<=C;++t){const s=f[t]-f[t-1];let l=0;this.nGramWidths.forEach(a=>{l+=this.getNumNGrams(s,a)}),this.preserveShort&&s>0&&l===0&&(l=1),o[t]=o[t-1]+l}const y=new Array(o[C]);for(let t=0;t<C;++t){const s=f[t];let l=o[t];if(this.nGramWidths.forEach(a=>{const r=f[t+1]-f[t],i=this.getNumNGrams(r,a);this.createNGrams(e,s,y,l,i,a),l+=i}),this.preserveShort&&l===o[t]){const a=f[t+1]-f[t];if(a===0)continue;const r=a+2*this.padWidth,i=1;this.createNGrams(e,s,y,l,i,r)}}return[y,o]}}function Zg(c,e,f,x,S,C,o,y){return new $A(f,x,S,C,o,y).compute(c,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GA(c,e,f,x){if(!c.length)return;if(e.length===0){for(let C=0;C<c.length;++C)x.push(c.subarray(C,C+1));return}if(e.length===1){const C=e[0];let o=c.indexOf(C);for(;o!==-1;){const y=c.subarray(0,o);(!f||y.length!==0)&&x.push(y),c=c.subarray(o+1),o=c.indexOf(C)}(!f||c.length!==0)&&x.push(c);return}let S=0;for(let C=0;C<c.length+1;C++)if(C===c.length||e.indexOf(c[C])!==-1){const o=c.subarray(S,C);(!f||o.length!==0)&&x.push(o),S=C+1}}function Qg(c,e,f){const x=c.length,S=[];let C=0,o=0;const y=new Array(x);for(let r=0;r<x;++r){const i=S.length;GA(c[r],e,f,S);const n=S.length-i;y[r]=n,C+=n,o=Math.max(o,n)}const t=ln("int32",C*2),s=new Array(C),l=[x,o];let a=0;for(let r=0;r<x;++r)for(let i=0;i<y[r];++i)t[a*2]=r,t[a*2+1]=i,s[a]=S[a],++a;return[t,s,l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jg(c,e){const f=ln("int32",c.length);for(let x=0;x<c.length;++x)f[x]=cx(c[x]).modulo(e).getLowBitsUnsigned();return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UA=Bn((c,e)=>c-e);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VA(c,e){const f=new Array(c.rank);for(let S=0;S<f.length;S++)f[S]=c.shape[S]*e[S];const x=Ze(f,c.dtype);for(let S=0;S<x.values.length;++S){const C=x.indexToLoc(S),o=new Array(c.rank);for(let t=0;t<o.length;t++)o[t]=C[t]%c.shape[t];const y=c.locToIndex(o);x.values[S]=c.values[y]}return x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ca=(c,e)=>{const f=e.value-c.value;return f===0?c.index-e.index:f};function qg(c,e,f=0,x=c.length-1){for(;x>f;){if(x-f>600){const y=x-f+1,t=e-f+1,s=Math.log(y),l=.5*Math.exp(2*s/3),a=.5*Math.sqrt(s*l*(y-l)/y)*Math.sign(t-y/2),r=Math.max(f,Math.floor(e-t*l/y+a)),i=Math.min(x,Math.floor(e+(y-t)*l/y+a));qg(c,e,r,i)}const S=c[e];let C=f,o=x;for(ga(c,f,e),Ca(c[x],S)>0&&ga(c,f,x);C<o;){for(ga(c,C,o),C++,o--;Ca(c[C],S)<0;)C=C+1;for(;Ca(c[o],S)>0;)o=o-1}Ca(c[f],S)===0?ga(c,f,o):(o=o+1,ga(c,o,x)),o<=e&&(f=o+1),e<=o&&(x=o-1)}}function zA(c,e,f,x,S){const C=e[e.length-1],[o,y]=[c.length/C,C],t=Ei(f,o*x),s=Ei("int32",o*x);for(let a=0;a<o;a++){const r=a*y,i=c.subarray(r,r+y);let n=new Array(i.length);i.forEach((p,m)=>n[m]={value:p,index:m}),x<n.length&&(qg(n,x),n=n.slice(0,x)),S&&n.sort(Ca);const h=a*x,d=t.subarray(h,h+x),u=s.subarray(h,h+x);for(let p=0;p<x;p++)d[p]=n[p].value,u[p]=n[p].index}const l=e.slice();return l[l.length-1]=x,[Ze(l,f,t),Ze(l,"int32",s)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _g(c,e,f,x){const S=Qe(e,f)[0],C=[1,f[0],1];for(let n=0;n<S;n++)C[0]*=f[n];C[1]=f[S];for(let n=S+1;n<f.length;n++)C[2]*=f[n];const o=new Map,y=new Int32Array(f[S]),t=new Zr(C,x,c),s=[],l=C[0]===1&&C[2]===1;for(let n=0;n<f[S];n++){let h;if(l)h=c[n].toString();else{const u=[];for(let p=0;p<C[0];p++)for(let m=0;m<C[2];m++)u.push(t.get(p,n,m));h=u.join(",")}const d=o.get(h);if(d!=null)y[n]=d;else{const u=o.size;o.set(h,u),y[n]=u,s.push(n)}}const a=C.slice();a[1]=o.size;const r=new Zr(a,x);s.forEach((n,h)=>{for(let d=0;d<C[0];d++)for(let u=0;u<C[2];u++)r.set(t.get(d,n,u),d,h,u)});const i=f.slice();return i[S]=a[1],{outputValues:r.values,outputShape:i,indices:y}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kA=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Kb,bincountImpl:jb,bincountReduceImpl:Zb,bitwiseAndImpl:Qb,castImpl:Yb,ceilImpl:Jb,concatImpl:Yg,equalImpl:qb,expImpl:_b,expm1Impl:tA,floorDivImpl:nA,floorImpl:eA,gatherNdImpl:sA,gatherV2Impl:iA,greaterEqualImpl:aA,greaterImpl:rA,lessEqualImpl:uA,lessImpl:oA,linSpaceImpl:lA,logImpl:hA,maxImpl:fA,maximumImpl:cA,minimumImpl:dA,multiplyImpl:Kg,negImpl:pA,notEqualImpl:mA,prodImpl:gA,raggedGatherImpl:wA,raggedRangeImpl:bA,raggedTensorToTensorImpl:AA,rangeImpl:jg,rsqrtImpl:RA,scatterImpl:IA,sigmoidImpl:PA,simpleAbsImpl:Hb,sliceImpl:fh,sparseFillEmptyRowsImpl:FA,sparseReshapeImpl:NA,sparseSegmentReductionImpl:MA,sqrtImpl:OA,squaredDifferenceImpl:DA,staticRegexReplaceImpl:LA,stridedSliceImpl:BA,stringNGramsImpl:Zg,stringSplitImpl:Qg,stringToHashBucketFastImpl:Jg,subImpl:UA,tileImpl:VA,topKImpl:zA,transposeImpl:vA,uniqueImpl:_g},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:WA,bincountImpl:t0,bincountReduceImpl:XA,bitwiseAndImpl:HA,castImpl:YA,ceilImpl:KA,concatImpl:jA,equalImpl:ZA,expImpl:QA,expm1Impl:JA,floorImpl:qA,gatherNdImpl:_A,gatherV2Impl:tR,greaterImpl:eR,greaterEqualImpl:nR,lessImpl:sR,lessEqualImpl:iR,linSpaceImpl:rR,logImpl:aR,maxImpl:oR,maximumImpl:uR,minimumImpl:lR,multiplyImpl:hR,negImpl:fR,notEqualImpl:cR,prodImpl:dR,raggedGatherImpl:pR,raggedRangeImpl:mR,raggedTensorToTensorImpl:vR,rangeImpl:gR,rsqrtImpl:xR,scatterImpl:yR,sigmoidImpl:TR,simpleAbsImpl:e0,sliceImpl:SR,sparseFillEmptyRowsImpl:CR,sparseReshapeImpl:ER,sparseSegmentReductionImpl:n0,sqrtImpl:wR,staticRegexReplaceImpl:bR,stridedSliceImpl:AR,stringNGramsImpl:RR,stringSplitImpl:IR,stringToHashBucketFastImpl:PR,subImpl:FR,tileImpl:NR,topKImpl:MR,transposeImpl:xd,uniqueImpl:OR}=kA;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0(c,e){return["x","y","z","w","u","v"].slice(0,e).map(f=>`${c}.${f}`)}function wn(c,e){return e===1?[c]:s0(c,e)}function DR(c,e){if(c===1)return"rc";let f="";for(let x=0;x<c;x++)f+=e[x],x<c-1&&(f+=",");return f}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LR{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Tn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const f=wn("rc",this.rank),x=De(this.rank),S=this.getOutOfBoundsCondition(f),C=this.getSetup(f),o=this.getOutput(f);this.userCode=`
        void main() {
          ${x} rc = getOutputCoords();

          if(${S}) {
            setOutput(vec4(0));
          } else {
            ${C}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const f=[];for(let x=0;x<=1;x++)for(let S=0;S<=1;S++){let C=`${x===0?"r":"rp1"}, ${S===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)C=`${e[e.length-1-o]},`+C;f.push(C)}return f}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let f="";for(let x=this.rank-2;x<this.rank;x++)f+=`${e[x]} >= ${this.enableShapeUniforms?`outShape[${x}]`:this.outputShape[x]}`,x<this.rank-1&&(f+="||");return f}getSetup(e){if(this.rank===1)return"";const f=e.slice(-2),x=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],S=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${f[0]};
      int c = ${f[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${x};
      bool rEdge = rp1 >= ${S};
    `}getOutput(e){const f=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${f[0]}),
            cEdge ? 0. : getA(${f[1]}),
            rEdge ? 0. : getA(${f[2]}),
            rEdge || cEdge ? 0. : getA(${f[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i0{constructor(e,f){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Tn(this.outputShape.length);let x="";for(let S=0;S<4;S++){let C="thisRC = rc;";S%2===1&&(C+="thisRC.z += 1;"),S>1&&(C+="thisRC.y += 1;"),x+=`
        ${C}
        ${S>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${S}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${S>0?"}":""}
      `}this.userCode=`
      ${BR(f,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?vd():md(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${x}

        setOutput(result);
      }
    `}}function BR(c,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?B5(["r","c","d"],"inputShape"):Sr(["r","c","d"],c)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $R{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,f,x){const S=ap(f,x),C=op(e,S,x);C in this.freeTextures||(this.freeTextures[C]=[]),C in this.usedTextures||(this.usedTextures[C]=[]);const o=rp(e,S,this.gpgpu.gl,this.gpgpu.textureConfig,x);if(this.freeTextures[C].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const t=this.freeTextures[C].pop();return this.usedTextures[C].push(t),t}let y;return S===hn.PACKED_2X2_FLOAT32?y=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):S===hn.PACKED_2X2_FLOAT16?y=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):S===hn.UNPACKED_FLOAT32?y=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):S===hn.UNPACKED_FLOAT16?y=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):S===hn.PACKED_4X1_UNSIGNED_BYTE&&(y=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[C].push(y),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),y}releaseTexture(e,f,x,S){if(this.freeTextures==null)return;const C=ap(x,S),o=op(f,C,S);o in this.freeTextures||(this.freeTextures[o]=[]);const y=rp(f,C,this.gpgpu.gl,this.gpgpu.textureConfig,S),t=St().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");t!==-1&&this._numBytesAllocated>t?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=y):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=y),this.numUsedTextures--;const s=this.usedTextures[o],l=s&&s.indexOf(e);if(l==null||l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s[l]=s[s.length-1],s.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const f=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*f)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(f=>{this.gpgpu.deleteMatrixTexture(f.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(f=>{this.gpgpu.deleteMatrixTexture(f.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function GR(c,e){const f=c;if(e===f.R32F)return 4;if(e===f.R16F)return 2;if(e===f.RGBA32F)return 16;if(e===c.RGBA)return 16;if(e===f.RGBA16F)return 8;if(e===f.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function rp(c,e,f,x,S){const C=UR(e,x);let o;if(S){const[t,s]=ra(c[0],c[1]);o=t*s}else{const[t,s]=no(c[0],c[1]);o=t*s}const y=GR(f,C);return o*y}function UR(c,e){switch(c){case hn.PACKED_2X2_FLOAT32:return Xg(e);case hn.PACKED_2X2_FLOAT16:return Hg(e);case hn.UNPACKED_FLOAT32:return zg(e);case hn.UNPACKED_FLOAT16:return kg(e);case hn.PACKED_4X1_UNSIGNED_BYTE:return Wg(e);default:throw new Error(`Unknown physical texture type ${c}`)}}function VR(c){return St().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?c?hn.PACKED_2X2_FLOAT32:hn.UNPACKED_FLOAT32:c?hn.PACKED_2X2_FLOAT16:hn.UNPACKED_FLOAT16}function ap(c,e){if(c===Yn.UPLOAD)return hn.PACKED_2X2_FLOAT32;if(c===Yn.RENDER||c==null)return VR(e);if(c===Yn.DOWNLOAD||c===Yn.PIXELS)return hn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${c}`)}function op(c,e,f){return`${c[0]}_${c[1]}_${e}_${f}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ps{constructor(e,f){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Tn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${f}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const cs="if (isnan(x)) return x;",zR="return x;",up="return abs(x);",kR="return (x >= 0.0) ? x : (exp(x) - 1.0);",WR=cs+`
  return (x < 0.0) ? 0.0 : x;
`,XR=cs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,mi="return x;",HR="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YR="return x;",KR=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,jR=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ZR=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,QR="return 1.0 / (1.0 + exp(-1.0 * x));";class xi{constructor(e,f){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Tn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${f}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JR{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Tn(this.outputShape.length);const f=e.length,x=wn("rc",f),S=De(f),C=DR(f,x),o=x.slice(-2),y=f<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${S} rc = getOutputCoords();
        vec4 packedInput = getA(${C});

        setOutput(getChannel(packedInput, ${y}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qR=Xv,_R=1e-7,tI=1e-4,go={};function eI(c){return c in go||(go[c]={}),go[c]}const nI=St().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),sI=600;function iI(){return St().global.screen==null?1024:St().global.screen.height*St().global.screen.width*window.devicePixelRatio*sI/1024/1024}class cl extends Oh{nextDataId(){return cl.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!St().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let f;if(e!=null){if(e instanceof Il)f=e;else{const x=Cs(St().getNumber("WEBGL_VERSION"),e);f=new Il(x)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const x=Cs(St().getNumber("WEBGL_VERSION"));f=new Il(x),this.binaryCache=eI(St().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=f,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new $R(this.gpgpu),this.numMBBeforeWarning=iI(),this.texData=new tm(this,zs())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,f,x,S,C,o){const y=this.makeTensorInfo(f,x),t=this.texData.get(y.dataId);t.isPacked=!1,t.texture={texture:e,texShape:[S,C]},t.texShape=[S,C];const s=mo(f),l=new tp(s,!1,o),a=this.runWebGLProgram(l,[y],x,[[S,C]]);return a.shape=f,t.texture=null,this.disposeIntermediateTensorInfo(y),a.dataId}write(e,f,x){if((St().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||St().getBool("DEBUG"))&&this.checkNumericalProblems(e),x==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const S={id:this.nextDataId()};return this.texData.set(S,{shape:f,dtype:x,values:e,usage:Yn.UPLOAD,refCount:1}),S}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const f=this.texData.get(e);f.refCount++}decRef(e){if(this.texData.has(e)){const f=this.texData.get(e);f.refCount--}}move(e,f,x,S,C){if(St().getBool("DEBUG")&&this.checkNumericalProblems(f),S==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:x,dtype:S,values:f,usage:Yn.UPLOAD,refCount:C})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const f=this.texData.get(e),{values:x,dtype:S,complexTensorInfos:C,slice:o,shape:y,isPacked:t}=f;if(o!=null){let r;t?r=new xi(y,mi):r=new Ps(y,mi);const i=this.runWebGLProgram(r,[{dataId:e,shape:y,dtype:S}],S),n=this.readSync(i.dataId);return this.disposeIntermediateTensorInfo(i),n}if(x!=null)return this.convertAndCacheOnCPU(e);if(S==="string")return x;const s=this.activeTimers!=null;let l;s&&(l=Hn());let a;if(S==="complex64"){const r=this.readSync(C.real.dataId),i=this.readSync(C.imag.dataId);a=lh(r,i)}else a=this.getValuesFromTexture(e);return s&&(this.downloadWaitMs+=Hn()-l),this.convertAndCacheOnCPU(e,a)}async read(e){if(this.pendingRead.has(e)){const n=this.pendingRead.get(e);return new Promise(h=>n.push(h))}const f=this.texData.get(e),{values:x,shape:S,slice:C,dtype:o,complexTensorInfos:y,isPacked:t}=f;if(C!=null){let n;t?n=new xi(S,mi):n=new Ps(S,mi);const h=this.runWebGLProgram(n,[{dataId:e,shape:S,dtype:o}],o),d=this.read(h.dataId);return this.disposeIntermediateTensorInfo(h),d}if(x!=null)return this.convertAndCacheOnCPU(e);if(St().getBool("DEBUG")&&!St().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&St().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let s=null,l;if(o!=="complex64"&&St().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const n=this.texData.get(l.dataId);s=this.gpgpu.createBufferFromTexture(n.texture.texture,...fo(S))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let a;if(o==="complex64"){const n=await Promise.all([this.read(y.real.dataId),this.read(y.imag.dataId)]),h=n[0],d=n[1];a=lh(h,d)}else if(s==null)a=this.getValuesFromTexture(e);else{const n=bt(S);a=this.gpgpu.downloadFloat32MatrixFromBuffer(s,n)}if(l!=null&&this.disposeIntermediateTensorInfo(l),s!=null){const n=this.gpgpu.gl;Jt(n,()=>n.deleteBuffer(s))}const r=this.convertAndCacheOnCPU(e,a),i=this.pendingRead.get(e);return this.pendingRead.delete(e),i.forEach(n=>n(r)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&zs().removeDataId(e,this),this.pendingDeletes--),r}readToGPU(e,f={}){const x=this.texData.get(e),{values:S,shape:C,slice:o,dtype:y,isPacked:t,texture:s}=x;if(y==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let i;t?i=new xi(C,mi):i=new Ps(C,mi);const n=this.runWebGLProgram(i,[{dataId:e,shape:C,dtype:y}],y),h=this.readToGPU(n,f);return this.disposeIntermediateTensorInfo(n),h}if(s==null)throw S!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const l=this.decode(e,f.customTexShape),a=zs().makeTensorFromTensorInfo(l),r=this.texData.get(l.dataId);return Object.assign({tensorRef:a},r.texture)}bufferSync(e){const f=this.readSync(e.dataId);if(e.dtype==="string")try{const x=f.map(S=>jr(S));return Ze(e.shape,e.dtype,x)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ze(e.shape,e.dtype,f)}checkNumericalProblems(e){if(e!=null)for(let f=0;f<e.length;f++){const x=e[f];if(!l5(x))throw St().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${x} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${x} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:f,dtype:x,isPacked:S}=this.texData.get(e),C=bt(f);if(St().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const r=this.decode(e),i=this.texData.get(r.dataId),n=this.gpgpu.downloadMatrixFromPackedTexture(i.texture.texture,...fo(f)).subarray(0,C);return this.disposeIntermediateTensorInfo(r),n}const o=St().getBool("WEBGL_PACK")&&S===!0,y=o?mo(f):f,t=o?new bb(y):new wb(y),s=this.runWebGLProgram(t,[{shape:y,dtype:x,dataId:e}],"float32"),l=this.texData.get(s.dataId),a=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture.texture,l.texShape[0],l.texShape[1]).subarray(0,C);return this.disposeIntermediateTensorInfo(s),a}timerAvailable(){return St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const f=this.activeTimers,x=[];let S=!1;this.programTimersStack==null?(this.programTimersStack=x,S=!0):this.activeTimers.push(x),this.activeTimers=x,e();const C=ar(this.activeTimers.map(t=>t.query)).filter(t=>t!=null),o=ar(this.activeTimers.map(t=>t.name)).filter(t=>t!=null);this.activeTimers=f,S&&(this.programTimersStack=null);const y={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(C);y.kernelMs=k2(t),y.getExtraProfileInfo=()=>t.map((s,l)=>({name:o[l],ms:s})).map(s=>`${s.name}: ${s.ms}`).join(", ")}else y.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,y})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Hn(),endMs:null}}endTimer(e){return St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Hn(),e)}async getQueryTime(e){if(St().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const f=e;return f.endMs-f.startMs}disposeData(e,f=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(f?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!f&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:x}=this.texData.get(e);return x!=null&&(this.disposeData(x.real.dataId,f),this.disposeData(x.imag.dataId,f)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:f,dtype:x,texShape:S,usage:C,isPacked:o,slice:y}=this.texData.get(e),t=y&&y.origDataId||e,s=this.dataRefCount.get(t);s>1?this.dataRefCount.set(t,s-1):(this.dataRefCount.delete(t),f!=null&&(this.numBytesInGPU-=this.computeBytes(S,x),this.textureManager.releaseTexture(f,S,C,o)));const l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,f=nI){return St().getBool("WEBGL_CPU_FORWARD")&&e.every(x=>this.texData.get(x.dataId).texture==null&&bt(x.shape)<f)}getGPGPUContext(){return this.gpgpu}where(e){xs("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const f=e.dataSync();return qR(e.shape,f)}packedUnaryOp(e,f,x){const S=new xi(e.shape,f),C=this.compileAndRun(S,[e],x);return zs().makeTensorFromTensorInfo(C)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const S=e0(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,S)}if(St().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,up,e.dtype);const f=new Ps(e.shape,up),x=this.compileAndRun(f,[e]);return zs().makeTensorFromTensorInfo(x)}makeTensorInfo(e,f,x){let S;if(f==="string"&&x!=null&&x.length>0&&Zo(x[0])){const C=x.map(o=>sr(o));S=this.write(C,e,f)}else S=this.write(x,e,f);return this.texData.get(S).usage=null,{dataId:S,shape:e,dtype:f}}makeOutput(e,f,x){return zs().makeTensorFromTensorInfo(this.makeTensorInfo(e,f,x),this)}unpackTensor(e){const f=new JR(e.shape);return this.runWebGLProgram(f,[e],e.dtype)}packTensor(e){const f=new LR(e.shape),x=!0;return this.runWebGLProgram(f,[e],e.dtype,null,x)}packedReshape(e,f){const x=[qr(e.shape),..._r(e.shape)],S={dtype:e.dtype,shape:x,dataId:e.dataId},C=[qr(f),..._r(f)],o=new i0(C,x),y=!0,t=[x],s=this.runWebGLProgram(o,[S],e.dtype,t,y);return{dataId:s.dataId,shape:f,dtype:s.dtype}}decode(e,f){const x=this.texData.get(e),{isPacked:S,shape:C,dtype:o}=x;if(f!=null){const r=bt(C),i=f[0]*f[1]*4;it(r<=i,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const y=mo(C);let t;S?t=new Eb(y):t=new Cb(y);const s=!0,l=[f??fo(y)],a=this.runWebGLProgram(t,[{shape:y,dtype:o,dataId:e}],o,l,s,f);return{dtype:o,shape:C,dataId:a.dataId}}runWebGLProgram(e,f,x,S,C=!1,o){const y=this.makeTensorInfo(e.outputShape,x),t=this.texData.get(y.dataId);if(e.packedOutput&&(t.isPacked=!0),e.outPackingScheme===ka.DENSE){const u=o??fo(e.outputShape);t.texShape=u.map(p=>p*2)}if(e.outTexUsage!=null&&(t.usage=e.outTexUsage),bt(y.shape)===0)return t.values=Ei(y.dtype,0),y;const s=[],l=f.map(u=>{if(u.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let p=this.texData.get(u.dataId);if(p.texture==null){if(!e.packedInputs&&bt(u.shape)<=St().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:u.shape,texData:null,isUniform:!0,uniformValues:p.values};e.packedInputs&&(p.isPacked=!0,p.shape=u.shape)}if(this.uploadToGPU(u.dataId),!!p.isPacked!=!!e.packedInputs)u=p.isPacked?this.unpackTensor(u):this.packTensor(u),s.push(u),p=this.texData.get(u.dataId);else if(p.isPacked&&!Go(p.shape,u.shape)){const m=u,v=u.shape;u.shape=p.shape,u=this.packedReshape(u,v),s.push(u),p=this.texData.get(u.dataId),m.shape=v}return{shape:u.shape,texData:p,isUniform:!1}});this.uploadToGPU(y.dataId);const a={shape:y.shape,texData:t,isUniform:!1},r=Sb(e,l,a),i=this.getAndSaveBinary(r,()=>yb(this.gpgpu,e,l,a)),n=this.activeTimers!=null;let h;n&&(h=this.startTimer()),St().get("ENGINE_COMPILE_ONLY")||Tb(this.gpgpu,i,l,a,S),s.forEach(u=>this.disposeIntermediateTensorInfo(u)),n&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));const d=St().getNumber("WEBGL_FLUSH_THRESHOLD");if(d>0){const u=Hn();u-this.lastGlFlushTime>d&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=u)}if(!St().getBool("WEBGL_LAZILY_UNPACK")&&t.isPacked&&C===!1){const u=this.unpackTensor(y);return this.disposeIntermediateTensorInfo(y),u}return y}compileAndRun(e,f,x,S,C=!1){return x=x||f[0].dtype,this.runWebGLProgram(e,f,x,S,C)}getAndSaveBinary(e,f){return e in this.binaryCache||(this.binaryCache[e]=f()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(St().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(f=>{this.gpgpu.deleteProgram(this.binaryCache[f].webGLProgram),delete this.binaryCache[f]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=de(()=>{if(!St().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=St().getBool("DEBUG");St().set("DEBUG",!1);const f=this.abs(Ce(1e-8)).dataSync()[0];if(St().set("DEBUG",e),f>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?_R:tI}uploadToGPU(e){const f=this.texData.get(e),{shape:x,dtype:S,values:C,texture:o,usage:y,isPacked:t}=f;if(o!=null)return;const s=this.activeTimers!=null;let l;s&&(l=Hn());let a=f.texShape;if(a==null&&(a=R5(x,t),f.texShape=a),C!=null){const r=mo(x);let i,n=a[1],h=a[0];const d=C instanceof Uint8Array||C instanceof Uint8ClampedArray;(t||!d)&&([n,h]=ra(a[0],a[1])),t?i=new Rb(r,d):i=new tp(r,d);const u=d?[h,n]:a,p=this.makeTensorInfo(u,S),m=this.texData.get(p.dataId);d?m.usage=Yn.PIXELS:m.usage=Yn.UPLOAD,m.texShape=u,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),n,h,C);const v=[[h,n]],g=!0,T=this.runWebGLProgram(i,[p],S,v,g),w=this.texData.get(T.dataId);f.texShape=w.texShape,f.isPacked=w.isPacked,f.usage=w.usage,St().get("ENGINE_COMPILE_ONLY")?this.disposeData(T.dataId):(f.texture=w.texture,f.values=null,this.texData.delete(T.dataId)),this.disposeIntermediateTensorInfo(p),s&&(this.uploadWaitMs+=Hn()-l)}else{const r=this.acquireTexture(a,y,S,t);f.texture=r}}convertAndCacheOnCPU(e,f){const x=this.texData.get(e),{dtype:S}=x;return f!=null&&(x.values=rI(f,S)),x.values}acquireTexture(e,f,x,S){if(this.numBytesInGPU+=this.computeBytes(e,x),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const C=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${C} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,f,S)}computeBytes(e,f){return e[0]*e[1]*Yr(f)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,f]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(f));return Promise.all(e)}else{for(const[,f]of Object.entries(this.binaryCache)){const x=new Promise(S=>{try{this.checkCompletion_(f),S(!0)}catch(C){throw C}});e.push(x)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await W6(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(Lg(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:f,customUniformLocations:x,infLoc:S,nanLoc:C,outShapeLocation:o,outShapeStridesLocation:y,outTexShapeLocation:t}=Vg(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=f,e.customUniformLocations=x,e.infLoc=S,e.nanLoc=C,e.outShapeLocation=o,e.outShapeStridesLocation=y,e.outTexShapeLocation=t}}createTensorFromGPUData(e,f,x){e.channels=e.channels||"RGBA";const{texture:S,height:C,width:o,channels:y}=e,t=zs().backend;if(!t.gpgpu.gl.isTexture(S))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const s=t.writeTexture(S,f,x,C,o,y);return zs().makeTensorFromDataId(s,f,x,t)}}cl.nextDataId=0;function rI(c,e){if(e==="float32"||e==="complex64")return c;if(e==="int32"||e==="bool"){const f=e==="int32"?new Int32Array(c.length):new Uint8Array(c.length);for(let x=0;x<f.length;++x)f[x]=Math.round(c[x]);return f}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Km()&&uv("webgl",()=>new cl,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yd=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class dr{constructor(e,f,x){this.variableNames=["A","B"],this.outputShape=Te(f,x),this.enableShapeUniforms=Tn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Er=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class ha{constructor(e,f,x,S=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Te(f,x);const C=this.outputShape.length;this.enableShapeUniforms=Tn(C);let o="";if(S)if(C===0||bt(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${De(C)} coords = getOutputCoords();
        `,C===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const t=wn("coords",C);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${t[C-2]} + 1) >= outShape[${C} - 2];
            bool nextColOutOfBounds =
              (${t[C-1]} + 1) >= outShape[${C} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${t[C-2]} + 1) >= ${this.outputShape[C-2]};
            bool nextColOutOfBounds =
              (${t[C-1]} + 1) >= ${this.outputShape[C-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zn(c){const{inputs:e,backend:f}=c,{x}=e;return f.incRef(x.dataId),{dataId:x.dataId,shape:x.shape,dtype:x.dtype}}const aI={kernelName:xu,backendName:"webgl",kernelFunc:zn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oi(c){const{inputs:e,backend:f}=c,{real:x,imag:S}=e,C=f.makeTensorInfo(x.shape,"complex64"),o=f.texData.get(C.dataId),y=zn({inputs:{x},backend:f}),t=zn({inputs:{x:S},backend:f});return o.complexTensorInfos={real:y,imag:t},C}const oI={kernelName:um,backendName:"webgl",kernelFunc:Oi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r0="return (a < 0.) ? b * a : a;",a0=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function uI(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{alpha:C}=x,o=f.makeTensorInfo([],"float32",na(C,"float32")),y=St().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ha(a0,S.shape,o.shape):new dr(r0,S.shape,o.shape),t=f.runWebGLProgram(y,[S,o],"float32");return f.disposeIntermediateTensorInfo(o),t}const lI={kernelName:yu,backendName:"webgl",kernelFunc:uI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o0="return (a < 0.) ? b * a : a;",u0=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function hI(c){const{inputs:e,backend:f}=c,{x,alpha:S}=e,C=St().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ha(u0,x.shape,S.shape):new dr(o0,x.shape,S.shape);return f.runWebGLProgram(C,[x,S],"float32")}const fI={kernelName:Ou,backendName:"webgl",kernelFunc:hI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fa="if (isnan(x)) return x;";function be({opSnippet:c,packedOpSnippet:e,cpuKernelImpl:f,dtype:x}){return({inputs:S,backend:C})=>{const{x:o}=S,y=C,t=x||o.dtype;if(y.shouldExecuteOnCPU([o])&&f!=null){const a=y.texData.get(o.dataId),r=f(a.values,t);return y.makeTensorInfo(o.shape,t,r)}const s=St().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let l;return s?l=new xi(o.shape,e):l=new Ps(o.shape,c),y.runWebGLProgram(l,[o],t)}}function mn({opSnippet:c,packedOpSnippet:e,checkOutOfBounds:f=!1,supportsComplex:x=!1,cpuKernelImpl:S,dtype:C}){return({inputs:o,backend:y})=>{const{a:t,b:s}=o,l=y;if(x&&t.dtype==="complex64"){const n=l.texData.get(t.dataId),h=l.texData.get(s.dataId),[d,u]=[[n.complexTensorInfos.real,h.complexTensorInfos.real],[n.complexTensorInfos.imag,h.complexTensorInfos.imag]].map(m=>{const[v,g]=m,T={dataId:v.dataId,dtype:v.dtype,shape:t.shape},w={dataId:g.dataId,dtype:g.dtype,shape:s.shape},b=new dr(c,t.shape,s.shape);return l.runWebGLProgram(b,[T,w],Ms(v.dtype,g.dtype))}),p=Oi({inputs:{real:d,imag:u},backend:l});return l.disposeIntermediateTensorInfo(d),l.disposeIntermediateTensorInfo(u),p}const a=C||Ms(t.dtype,s.dtype);if((t.dtype==="string"||s.dtype==="string"||l.shouldExecuteOnCPU([t,s]))&&S!=null){const n=l.texData.get(t.dataId).values,h=l.texData.get(s.dataId).values,d=t.dtype==="string"?Jr(n):n,u=t.dtype==="string"?Jr(h):h,[p,m]=S(t.shape,s.shape,d,u,a),v=l.makeTensorInfo(m,a),g=l.texData.get(v.dataId);return g.values=p,v}const r=St().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let i;return r?i=new ha(e,t.shape,s.shape,f):i=new dr(c,t.shape,s.shape),l.runWebGLProgram(i,[t,s],a)}}function Wa(c,e=!1){if(c==="linear")return e?YR:zR;if(c==="relu")return e?jR:WR;if(c==="elu")return e?KR:kR;if(c==="relu6")return e?ZR:XR;if(c==="prelu")return e?u0:o0;if(c==="leakyrelu")return e?a0:r0;if(c==="sigmoid")return e?QR:HR;throw new Error(`Activation ${c} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l0{constructor(e,f,x,S=!1,C=!1,o=!1,y=null,t=!1,s=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=x,this.enableShapeUniforms=Tn(this.outputShape.length);const l=S?e[1]:e[2],a=Math.ceil(l/2),r=S?"i * 2, rc.y":"rc.y, i * 2",i=C?"rc.z, i * 2":"i * 2, rc.z",n=S?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=C?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let d="",u="";y&&(t?d=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${y}
        }`:s?d=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${y}
        }`:d=`vec4 activation(vec4 x) {
          ${y}
        }`,u="result = activation(result);");const p=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),t&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha");let m="rc.x",v="rc.x";e[0]<f[0]?m=`imod(rc.x, ${e[0]})`:f[0]<e[0]&&(v=`imod(rc.x, ${f[0]})`),this.userCode=`
      ${d}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${a}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${m};
        int batchB = ${v};
        for (int i = 0; i < ${a}; i++) {
          vec4 a = getMatrixA(batchA, ${r});
          vec4 b = getMatrixB(batchB, ${i});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${n[0]} * ${h[0]});
          result += (${n[1]} * ${h[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${p}

        ${u}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lp={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class hp{constructor(e,f,x){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Te(f,x),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fp="return a * b;";function Td(c){const{inputs:e,backend:f}=c,{a:x,b:S}=e,C=Ms(x.dtype,S.dtype);if(x.dtype==="complex64"){const y=f.texData.get(x.dataId),t=f.texData.get(S.dataId),s=new hp(lp.REAL,x.shape,S.shape),l=new hp(lp.IMAG,x.shape,S.shape),a=[{dataId:y.complexTensorInfos.real.dataId,dtype:y.complexTensorInfos.real.dtype,shape:x.shape},{dataId:y.complexTensorInfos.imag.dataId,dtype:y.complexTensorInfos.imag.dtype,shape:x.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:S.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:S.shape}],r=f.runWebGLProgram(s,a,"float32"),i=f.runWebGLProgram(l,a,"float32"),n=Oi({inputs:{real:r,imag:i},backend:f});return f.disposeIntermediateTensorInfo(r),f.disposeIntermediateTensorInfo(i),n}if(f.shouldExecuteOnCPU([x,S])){const y=f.texData.get(x.dataId),t=f.texData.get(S.dataId),[s,l]=hR(x.shape,S.shape,y.values,t.values,C),a=f.makeTensorInfo(l,C),r=f.texData.get(a.dataId);return r.values=s,a}let o;return St().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new ha(fp,x.shape,S.shape):o=new dr(fp,x.shape,S.shape),f.runWebGLProgram(o,[x,S],C)}const cI={kernelName:Lf,backendName:"webgl",kernelFunc:Td};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dI(c,e,f){const x=[qr(c.shape),..._r(c.shape)],S={dtype:c.dtype,shape:x,dataId:c.dataId},C=[qr(e),..._r(e)],o=new i0(C,x),y=!0,t=[x],s=f.runWebGLProgram(o,[S],c.dtype,t,y);return{dataId:s.dataId,shape:e,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{shape:C}=x,o=f,y=bt(S.shape),t=em(C,y),s=bt(t);it(y===s,()=>`The new shape (${t}) has ${s} elements and the old shape (${S.shape}) has ${y} elements. The new shape and old shape must have the same number of elements.`);const l=o.texData.get(S.dataId);return l.isPacked&&!Go(S.shape,t)&&!(l.texture!==null&&Go(l.shape,t))?dI(S,t,o):(o.incRef(S.dataId),{dataId:S.dataId,shape:t,dtype:S.dtype})}const pI={kernelName:Xf,backendName:"webgl",kernelFunc:Yt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cp{constructor(e,f){this.variableNames=["x"];const{windowSize:x,batchSize:S,inSize:C,outSize:o}=e;this.outputShape=[S,o];const y=Math.floor(x/4)*4,t=x%4;let s="sumValue += dot(values, ones);";if(f!=null){const a=1/f;s=`sumValue += dot(values * ${Hr(a)?a.toPrecision(2):a}, ones);`}let l="";C%x>0&&(l=`
        if (inIdx < 0 || inIdx >= ${C}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${l}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${x};

        float sumValue = 0.0;

        for (int i = 0; i < ${y}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${s}
        }

        int inIdx = inOffset + ${y};
        if (${t===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${s}
        } else if (${t===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${s}
        } else if (${t===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${s}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mI{constructor(e,f){this.variableNames=["x"];const{windowSize:x,batchSize:S,inSize:C,outSize:o}=e;this.outputShape=[S,o];let y="0.0",t="";f==="prod"?y="1.0":f==="min"?(y="1.0 / 1e-20",t="min"):f==="max"&&(y="-1.0 / 1e-20",t="max");let s=`${f}(${f}(${f}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;f==="sum"?s="sumValue":f==="prod"?s="prodValue":f==="all"?s="allValue":f==="any"&&(s="anyValue");const l=Math.floor(x/4)*4,a=x%4;let r=`
      if (${f==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${f==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${t}(values, minMaxValue);
        if (${f==="min"} || ${f==="max"}) {
          minMaxValue = ${t}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,i="vec4";f==="all"?(y="1.0",r=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,i="bvec4"):f==="any"&&(y="0.0",r=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,i="bvec4");let n="";C%x>0&&(n=`
        if (inIdx < 0 || inIdx >= ${C}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${n}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${x};

        vec4 minMaxValue = vec4(${y});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          ${i} values = ${i}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${r}
        }

        int inIdx = inOffset + ${l};
        if (${a===1}) {
          ${i} values = ${i}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${r}
        } else if (${a===2}) {
          ${i} values = ${i}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${r}
        } else if (${a===3}) {
          ${i} values = ${i}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${r}
        }
        setOutput(${s});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vI(c){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const f=e.length?e[e.length-1].outSize:c[1],x=hl(f);e.push({inSize:f,windowSize:x,outSize:Math.ceil(f/x)})}return e}function wr(c,e,f,x){const S=vI(c.shape);let C=c;for(let o=0;o<S.length;o++){const{inSize:y,windowSize:t,outSize:s}=S[o];let l,a;f==="mean"?l=o===0?new cp({windowSize:t,inSize:y,batchSize:c.shape[0],outSize:s},y):new cp({windowSize:t,inSize:y,batchSize:c.shape[0],outSize:s}):l=new mI({windowSize:t,inSize:y,batchSize:c.shape[0],outSize:s},f),a=C,C=x.runWebGLProgram(l,[C],e),a.dataId!==c.dataId&&x.disposeIntermediateTensorInfo(a)}return C}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gI{constructor(e,f){this.variableNames=["A"];const x=new Array(e.length);for(let o=0;o<x.length;o++)x[o]=e[f[o]];this.outputShape=x,this.rank=x.length;const S=De(this.rank),C=xI(f);this.userCode=`
    void main() {
      ${S} resRC = getOutputCoords();
      setOutput(getA(${C}));
    }
    `}}function xI(c){const e=c.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const f=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],x=new Array(e);for(let S=0;S<c.length;S++)x[c[S]]=f[S];return x.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yI{constructor(e,f){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const x=new Array(e.length);for(let l=0;l<x.length;l++)x[l]=e[f[l]];if(this.outputShape=x,this.rank=x.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const S=De(this.rank),C=s0("rc",this.rank),o=new Array(this.rank);for(let l=0;l<f.length;l++)o[f[l]]=C[l];const y=`vec2(${o.slice(-2).join()})`,t=`++${C[this.rank-1]} < ${x[this.rank-1]}`,s=`getChannel(getA(${o.join()}), ${y})`;this.userCode=`
    void main() {
      ${S} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${s};
      if(${t}) {
        result[1] = ${s};
      }
      --${C[this.rank-1]};
      if(++${C[this.rank-2]} < ${x[this.rank-2]}) {
        result[2] = ${s};
        if(${t}) {
          result[3] = ${s};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dl(c,e,f){const x=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yI(c.shape,e):new gI(c.shape,e);return f.runWebGLProgram(x,[c],c.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TI(c,e,f,x){const S=e,C=c.shape.length,o=Qe(S,c.shape);let y=o;const t=Ln(y,C),s=t!=null;let l=c;s&&(l=dl(c,t,x),y=pn(y.length,C)),an("sum",y,C);const[a,r]=yn(l.shape,y);let i=a;f&&(i=rn(a,o));const n=bt(r),d=bt(c.shape)/n,u=Yt({inputs:{x:l},attrs:{shape:[d,n]},backend:x}),p=Sc(c.dtype),m=wr(u,p,"sum",x),v=Yt({inputs:{x:m},attrs:{shape:i},backend:x});return x.disposeIntermediateTensorInfo(u),x.disposeIntermediateTensorInfo(m),s&&x.disposeIntermediateTensorInfo(l),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pl(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C,keepDims:o}=x;return TI(S,C,o,f)}const SI={kernelName:zu,backendName:"webgl",kernelFunc:pl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bn(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{perm:C}=x,o=f,y=S.shape.length,t=new Array(y);for(let l=0;l<t.length;l++)t[l]=S.shape[C[l]];let s;if(o.shouldExecuteOnCPU([S])){const a=o.texData.get(S.dataId).values,r=xd(a,S.shape,S.dtype,C,t);s=o.makeTensorInfo(t,S.dtype);const i=o.texData.get(s.dataId);i.values=r}else s=dl(S,C,o);return s}const CI={kernelName:Vr,backendName:"webgl",kernelFunc:bn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0=1e3;function Vo({a:c,b:e,transposeA:f,transposeB:x,backend:S,bias:C=null,preluActivationWeights:o=null,leakyreluAlpha:y=0,activation:t=null}){const s=c.shape.length,l=e.shape.length,a=f?c.shape[s-2]:c.shape[s-1],r=x?e.shape[l-1]:e.shape[l-2],i=f?c.shape[s-1]:c.shape[s-2],n=x?e.shape[l-2]:e.shape[l-1],h=c.shape.slice(0,-2),d=e.shape.slice(0,-2),u=bt(h),p=bt(d),v=Te(c.shape.slice(0,-2),e.shape.slice(0,-2)).concat([i,n]);it(a===r,()=>`Error in matMul: inner shapes (${a}) and (${r}) of Tensors with shapes ${c.shape} and ${e.shape} and transposeA=${f} and transposeB=${x} must match.`);const g=f?[u,a,i]:[u,i,a],T=x?[p,n,r]:[p,r,n],w=Yt({inputs:{x:c},backend:S,attrs:{shape:g}}),b=Yt({inputs:{x:e},backend:S,attrs:{shape:T}}),E=[w,b],A=Math.max(u,p),R=f?w.shape[1]:w.shape[2],I=C!=null,P=o!=null,N=t==="leakyrelu",F=t!=null?Wa(t,!0):null,O=I||P||N||F!=null;let D;if((i===1||n===1)&&R>h0&&O===!1){let z=w,X=b;f&&(z=bn({inputs:{x:w},backend:S,attrs:{perm:[0,2,1]}}),E.push(z)),x&&(X=bn({inputs:{x:b},backend:S,attrs:{perm:[0,2,1]}}),E.push(X));const H=n!==1,J=n===1;let G=z;H&&(G=Yt({inputs:{x:z},backend:S,attrs:{shape:[A,R,1]}}),E.push(G));const k=n===1?2:1;let M=X;J&&(M=Yt({inputs:{x:X},backend:S,attrs:{shape:[A,1,R]}}),E.push(M));const B=Td({inputs:{a:G,b:M},backend:S});D=pl({inputs:{x:B},backend:S,attrs:{axis:k,keepDims:!0}}),E.push(B)}else{const z=Ms(c.dtype,e.dtype),X=new l0(g,T,[A,i,n],f,x,I,F,P,N),H=[w,b];if(C!=null&&H.push(C),P&&H.push(o),N){const J=S.makeTensorInfo([],"float32",na(y,"float32"));H.push(J),E.push(J)}D=S.runWebGLProgram(X,H,z)}const L=Yt({inputs:{x:D},backend:S,attrs:{shape:v}});E.push(D);for(const z of E)S.disposeIntermediateTensorInfo(z);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EI(c){const{inputs:e,backend:f,attrs:x}=c,{a:S,b:C,bias:o,preluActivationWeights:y}=e,{transposeA:t,transposeB:s,activation:l,leakyreluAlpha:a}=x;return Vo({a:S,b:C,transposeA:t,transposeB:s,backend:f,bias:o,preluActivationWeights:y,leakyreluAlpha:a,activation:l})}const wI={kernelName:Fa,backendName:"webgl",kernelFunc:EI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dp="return abs(x);";function bI(c){const{inputs:e,backend:f}=c,{x}=e;if(f.shouldExecuteOnCPU([x])&&x.dtype!=="complex64"){const C=f.texData.get(x.dataId),o=e0(C.values);return f.makeTensorInfo(x.shape,x.dtype,o)}let S;return St().getBool("WEBGL_PACK_UNARY_OPERATIONS")?S=new xi(x.shape,dp):S=new Ps(x.shape,dp),f.runWebGLProgram(S,[x],x.dtype)}const AI={kernelName:$h,backendName:"webgl",kernelFunc:bI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RI=cs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,II=be({opSnippet:RI}),PI={kernelName:Gh,backendName:"webgl",kernelFunc:II};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FI=cs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,NI=be({opSnippet:FI}),MI={kernelName:Uh,backendName:"webgl",kernelFunc:NI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pp="return a + b;",OI=mn({opSnippet:pp,packedOpSnippet:pp,supportsComplex:!0,cpuKernelImpl:WA}),DI={kernelName:Qo,backendName:"webgl",kernelFunc:OI};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LI{constructor(e,f){this.outputShape=[],this.outputShape=e,this.variableNames=f.map((C,o)=>`T${o}`);const x=[];this.variableNames.forEach(C=>{x.push(`float v${C} = get${C}AtOutCoords();`)});const S=this.variableNames.map(C=>`v${C}`).join(" + ");this.userCode=`
      void main() {
        ${x.join(`
        `)}

        float result = ${S};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BI{constructor(e,f){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=f.map((C,o)=>`T${o}`);const x=[];this.variableNames.forEach(C=>{x.push(`vec4 v${C} = get${C}AtOutCoords();`)});const S=this.variableNames.map(C=>`v${C}`).join(" + ");this.userCode=`
      void main() {
        ${x.join(`
        `)}

        vec4 result = ${S};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Co(c){const{inputs:e,backend:f}=c,x=e;if(x.length===1)return zn({inputs:{x:x[0]},backend:f});if(x.length>St().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(x.length/2),s=Co({inputs:x.slice(0,t),backend:f}),l=Co({inputs:x.slice(t),backend:f});return Co({inputs:[s,l],backend:f})}const S=x.map(t=>t.dtype).reduce((t,s)=>Ms(t,s)),C=x.map(t=>t.shape),y=St().getBool("WEBGL_PACK")?new BI(x[0].shape,C):new LI(x[0].shape,C);return f.runWebGLProgram(y,x,S)}const $I={kernelName:Jo,backendName:"webgl",kernelFunc:Co};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GI(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C,keepDims:o}=x,y=S.shape.length,t=Qe(C,S.shape);let s=t;const l=Ln(s,y);let a=S;l!=null&&(a=bn({inputs:{x:S},backend:f,attrs:{perm:l}}),s=pn(s.length,y)),an("all",s,y);const[r,i]=yn(a.shape,s),n=bt(i),h=Yt({inputs:{x:a},backend:f,attrs:{shape:[-1,n]}}),d=wr(h,h.dtype,"all",f);let u;if(o){const p=rn(r,t);u=Yt({inputs:{x:d},backend:f,attrs:{shape:p}})}else u=Yt({inputs:{x:d},backend:f,attrs:{shape:r}});return f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(d),l!=null&&f.disposeIntermediateTensorInfo(a),u}const UI={kernelName:qo,backendName:"webgl",kernelFunc:GI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VI(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C,keepDims:o}=x,y=S.shape.length,t=Qe(C,S.shape);let s=t;const l=Ln(s,y);let a=S;l!=null&&(a=bn({inputs:{x:S},backend:f,attrs:{perm:l}}),s=pn(s.length,y)),an("any",s,y);const[r,i]=yn(a.shape,s),n=bt(i),h=Yt({inputs:{x:a},backend:f,attrs:{shape:[-1,n]}}),d=wr(h,h.dtype,"any",f);let u;if(o){const p=rn(r,t);u=Yt({inputs:{x:d},backend:f,attrs:{shape:p}})}else u=Yt({inputs:{x:d},backend:f,attrs:{shape:r}});return f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(d),l!=null&&f.disposeIntermediateTensorInfo(a),u}const zI={kernelName:_o,backendName:"webgl",kernelFunc:VI};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kI{constructor(e,f,x){this.variableNames=["A"];const{windowSize:S,batchSize:C,outSize:o}=e;x||this.variableNames.push("bestIndicesA"),this.outputShape=[C,o];const y=f==="max"?">":"<",t=x?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${S};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${S}; i++) {
          int inIdx = ${t};
          float candidate = getA(batch, inIdx);
          if (candidate ${y} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WI{constructor(e,f,x,S){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,it(e.length>2,()=>`Packed arg${x.charAt(0).toUpperCase()+x.slice(1)} supports only inputs with rank above 2.`);const C=e[e.length-1],o=Math.ceil(C/f);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),S||this.variableNames.push("bestIndicesA");const y=this.outputShape,t=y.length,s=De(t),l=wn("coords",t);let a,r;if(o===1){r=t+1;const b=De(r);a=`
        ${b} sourceLocR = ${b}(${l.join()}, 0);
        ++${l[t-1]};
        ${b} sourceLocG = ${b}(${l.join()}, 0);
        ++${l[t-2]};
        ${b} sourceLocA = ${b}(${l.join()}, 0);
        --${l[t-1]};
        ${b} sourceLocB = ${b}(${l.join()}, 0);
        --${l[t-2]};`}else r=t,a=`
        ${s} sourceLocR = coords;
        ++${l[t-1]};
        ${s} sourceLocG = coords;
        ++${l[t-2]};
        ${s} sourceLocA = coords;
        --${l[t-1]};
        ${s} sourceLocB = coords;
        --${l[t-2]};`;const i=["x","y","z","w","u","v"].slice(0,r),n="."+i[r-1],h=i.map(b=>"int "+b),d=wn("sourceLocR",r-1).concat("inIdx.r"),u=wn("sourceLocG",r-1).concat("inIdx.g"),p=wn("sourceLocB",r-1).concat("inIdx.b"),m=wn("sourceLocA",r-1).concat("inIdx.a"),v=x==="max"?"greaterThan":"lessThan",g=S?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${d.join()}),
                             getBestIndicesAChannel(${u.join()}),
                             getBestIndicesAChannel(${p.join()}),
                             getBestIndicesAChannel(${m.join()})));`,T=`vec4(
            getAChannel(${d.join()}),
            hasNextCol ? getAChannel(${u.join()}) : 0.,
            hasNextRow ? getAChannel(${p.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${m.join()}) : 0.)`,w=S?"":`
      float getBestIndicesAChannel(${h.join()}) {
        return getChannel(getBestIndicesA(${i.join()}),
                                          vec2(${i.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${h.join()}) {
        return getChannel(getA(${i.join()}),
                               vec2(${i.slice(-2).join()}));
      }
      ${w}
      void main() {
        ${s} coords = getOutputCoords();
        bool hasNextCol = ${l[t-1]} < ${y[t-1]-1};
        bool hasNextRow = ${l[t-2]} < ${y[t-2]-1};
        ${a}
        ivec4 srcIdx = ivec4(sourceLocR${n}, sourceLocG${n},
          sourceLocB${n}, sourceLocA${n}) * ${f};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${T};

        for (int i = 0; i < ${f}; i++) {
          inIdx = srcIdx;
          ${g}
          vec4 candidate = ${T};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${v}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f0(c,e,f,x=null){let S=e.shape[0],C=e.shape[1];x!=null&&(S=x.shape[0],C=x.shape[1]);const o=hl(C),y={windowSize:o,inSize:C,batchSize:S,outSize:Math.ceil(C/o)},t=new kI(y,f,x==null),s=[e];x!=null&&s.push(x);const l=c.runWebGLProgram(t,s,"int32");if(l.shape[1]===1)return l;const a=f0(c,e,f,l);return c.disposeIntermediateTensorInfo(l),a}function c0(c,e,f,x=null){const S=x!=null?x.shape:e.shape,C=S[S.length-1],o=hl(C),y=new WI(S,o,f,x==null),t=x==null?[e]:[e,x],s=c.runWebGLProgram(y,t,"int32");if(s.shape.length===e.shape.length){const l=c0(c,e,f,s);return c.disposeIntermediateTensorInfo(s),l}return s}function d0(c,e,f,x){const S=[f];if(an("arg"+x.charAt(0).toUpperCase()+x.slice(1),S,e.shape.length),!St().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const C=[],o=c.texData.get(e.dataId),y=o!==null&&o.isPacked;let t=e;y&&(t=c.unpackTensor(e),C.push(t));const[s,l]=yn(t.shape,S),a=bt(l),r=Yt({inputs:{x:t},backend:c,attrs:{shape:[-1,a]}});C.push(r);const i=f0(c,r,x);C.push(i);const n=Yt({inputs:{x:i},backend:c,attrs:{shape:s}});return C.forEach(h=>c.disposeIntermediateTensorInfo(h)),n}return c0(c,e,x)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XI(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C}=x;let o=Qe(C,S.shape);const y=Ln(o,S.shape.length);let t=S;const s=[];y!=null&&(t=bn({inputs:{x:S},backend:f,attrs:{perm:y}}),s.push(t),o=pn(o.length,t.shape.length)),an("argMax",[o[0]],t.shape.length);const l=d0(f,t,o[0],"max");return s.forEach(a=>f.disposeIntermediateTensorInfo(a)),l}const HI={kernelName:Vh,backendName:"webgl",kernelFunc:XI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YI(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C}=x;let o=Qe(C,S.shape);const y=Ln(o,S.shape.length);let t=S;const s=[];y!=null&&(t=bn({inputs:{x:S},backend:f,attrs:{perm:y}}),s.push(t),o=pn(o.length,t.shape.length)),an("argMin",[o[0]],t.shape.length);const l=d0(f,t,o[0],"min");return s.forEach(a=>f.disposeIntermediateTensorInfo(a)),l}const KI={kernelName:zh,backendName:"webgl",kernelFunc:YI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jI=cs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,ZI=be({opSnippet:jI}),QI={kernelName:kh,backendName:"webgl",kernelFunc:ZI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JI=cs+"return log(x + sqrt(x * x + 1.0));",qI=be({opSnippet:JI}),_I={kernelName:Wh,backendName:"webgl",kernelFunc:qI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t9=cs+`
  return atan(x);
`,e9=be({opSnippet:t9}),n9={kernelName:Xh,backendName:"webgl",kernelFunc:e9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s9=yd+`
  return atan(a, b);
`,i9=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Er+`
  return result;
`,r9=mn({opSnippet:s9,packedOpSnippet:i9}),a9={kernelName:Yh,backendName:"webgl",kernelFunc:r9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o9=cs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,u9=be({opSnippet:o9}),l9={kernelName:Hh,backendName:"webgl",kernelFunc:u9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xa{constructor(e,f,x,S=!1,C=!1){if(this.variableNames=["x"],f==="avg"&&x)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,y=e.strideHeight,t=e.strideWidth,s=e.dilationHeight,l=e.dilationWidth,a=e.effectiveFilterHeight,r=e.effectiveFilterWidth,i=e.padInfo.top,n=e.padInfo.left;this.outputShape=e.outShape;const h=f==="avg",d=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,u=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let p="0.0";if(h||(p="-1.0 / 1e-20"),x){const b=">=";this.userCode=`
        const ivec2 strides = ivec2(${y}, ${t});
        const ivec2 pads = ivec2(${i}, ${n});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${a};
              wR += ${s}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${r};
                wC += ${l}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${b} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${S?C?d:u:`wR * ${r} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const m="max";let v=`${f}(${f}(${f}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;f==="avg"&&(v="avgValue / max(count, 1.0)");const g=Math.floor(o/4)*4,T=o%4,w=`
      if (${h}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${m}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${y}, ${t});
      const ivec2 pads = ivec2(${i}, ${n});
      const float initializationValue = ${p};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${p});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${a};
            wR += ${s}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC += 4) {
            int xC = xCCorner + wC * ${l};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              getValue(batch, xR, xC + 2 * ${l}, d),
              getValue(batch, xR, xC + 3 * ${l}, d)
            );

            ${w}
          }

          int xC = xCCorner + ${g};
          if (${T===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${w}
          } else if (${T===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              initializationValue,
              initializationValue
            );

            ${w}
          } else if (${T===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              getValue(batch, xR, xC + 2 * ${l}, d),
              initializationValue
            );

            ${w}
          }
        }
        setOutput(${v});
      }
    `}}class Sd{constructor(e,f,x,S=!1,C=!1){if(this.variableNames=["x"],f==="avg"&&x)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,y=e.strideDepth,t=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,a=e.dilationHeight,r=e.dilationWidth,i=e.effectiveFilterDepth,n=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,u=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=f==="avg";let v="0.0";if(m||(v="-1.0 / 1e-20"),x){const A=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${y}, ${t}, ${s});
        const ivec3 pads = ivec3(${d}, ${u}, ${p});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${i};
              wD += ${l}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${n};
                wR += ${a}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${h};
                  wC += ${r}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${A} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${S?C?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${n} * ${h} +
                      wR * ${h} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const g="max";let T=`${f}(${f}(${f}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;f==="avg"&&(T="avgValue / max(count, 1.0)");const w=Math.floor(o/4)*4,b=o%4,E=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${g}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${y}, ${t}, ${s});
      const ivec3 pads = ivec3(${d}, ${u}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${i};
            wD += ${l}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${n};
            wR += ${a}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${w}; wC += 4) {
              int xC = xCCorner + wC * ${r};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${r}, ch),
                getValue(batch, xD, xR, xC + 2 * ${r}, ch),
                getValue(batch, xD, xR, xC + 3 * ${r}, ch)
              );

              ${E}
            }

            int xC = xCCorner + ${w};
            if (${b===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${b===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${r}, ch),
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${b===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${r}, ch),
                getValue(batch, xD, xR, xC + 2 * ${r}, ch),
                initializationValue
              );

              ${E}
            }
          }
        }
        setOutput(${T});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h9(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e;so(S,"avgPool");const{filterSize:C,strides:o,pad:y,dimRoundingMode:t}=x,s=1;it(Dn(o,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const l=hs(S.shape,C,o,s,y,t);if(l.filterWidth===1&&l.filterHeight===1&&je(l.inShape,l.outShape))return zn({inputs:{x:S},backend:f});const a=new Xa(l,"avg",!1);return f.runWebGLProgram(a,[S],"float32")}const f9={kernelName:tu,backendName:"webgl",kernelFunc:h9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{filterSize:C,strides:o,pad:y,dimRoundingMode:t,dataFormat:s}=x,l=[1,1,1],a=_s(S.shape,C,o,l,y,t,s),r=new Sd(a,"avg",!1);return f.runWebGLProgram(r,[S],"float32")}const d9={kernelName:Kh,backendName:"webgl",kernelFunc:c9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p9{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const f=e.filterHeight,x=e.filterWidth,S=e.strideHeight,C=e.strideWidth,o=e.dilationHeight,y=e.dilationWidth,t=e.effectiveFilterHeight,s=e.effectiveFilterWidth,l=t-1-e.padInfo.top,a=s-1-e.padInfo.left,r=1/(f*x);this.userCode=`
      const ivec2 pads = ivec2(${l}, ${a});
      const float avgMultiplier = float(${r});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${S}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s};
            wC+= ${y}) {
            float dyC = float(dyCCorner + wC) / ${C}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class m9{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const f=e.filterDepth,x=e.filterHeight,S=e.filterWidth,C=e.strideDepth,o=e.strideHeight,y=e.strideWidth,t=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,a=e.effectiveFilterDepth,r=e.effectiveFilterHeight,i=e.effectiveFilterWidth,n=a-1-e.padInfo.front,h=r-1-e.padInfo.top,d=i-1-e.padInfo.left,u=1/(f*x*S);this.userCode=`
      const ivec3 pads = ivec3(${n}, ${h}, ${d});
      const float avgMultiplier = float(${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${a};
            wD += ${t}) {
          float dyD = float(dyDCorner + wD) / ${C}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${r};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${i};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${y}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v9(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,input:C}=e,o=C,{filterSize:y,strides:t,pad:s,dimRoundingMode:l}=x,a=[1,1,1],r=_s(o.shape,y,t,a,s,l),i=new m9(r);return f.runWebGLProgram(i,[S],o.dtype)}const g9={kernelName:om,backendName:"webgl",kernelFunc:v9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x9(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,input:C}=e,o=C;so([S,C],"avgPoolGrad");const{filterSize:y,strides:t,pad:s}=x,l=hs(o.shape,y,t,1,s),a=new p9(l);return f.runWebGLProgram(a,[S],o.dtype)}const y9={kernelName:am,backendName:"webgl",kernelFunc:x9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9(c){const{inputs:e,backend:f,attrs:x}=c,{a:S,b:C}=e,{transposeA:o,transposeB:y}=x;return Vo({a:S,b:C,transposeA:o,transposeB:y,backend:f})}const S9={kernelName:eu,backendName:"webgl",kernelFunc:T9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C9{constructor(e,f,x,S,C,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Te(e,f),Te(e,x);let y="0.0";S!=null&&(Te(e,S),this.variableNames.push("offset"),y="getOffsetAtOutCoords()");let t="1.0";C!=null&&(Te(e,C),this.variableNames.push("scale"),t="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${y};
        float scale = ${t};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E9{constructor(e,f,x,S,C,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Te(e,f),Te(e,x);let y="vec4(0.0)";S!=null&&(Te(e,S),this.variableNames.push("offset"),y="getOffsetAtOutCoords()");let t="vec4(1.0)";C!=null&&(Te(e,C),this.variableNames.push("scale"),t="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${y};
        vec4 scale = ${t};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w9=({inputs:c,backend:e,attrs:f})=>{const{x,mean:S,variance:C,offset:o,scale:y}=c;it(S.shape.length===C.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),it(o==null||S.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),it(y==null||S.shape.length===y.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:t}=f;t==null&&(t=.001);const s=[x,S,C];let l=null;o!=null&&(l=o.shape,s.push(o));let a=null;y!=null&&(a=y.shape,s.push(y));const r=St().getBool("WEBGL_PACK_NORMALIZATION")?new E9(x.shape,S.shape,C.shape,l,a,t):new C9(x.shape,S.shape,C.shape,l,a,t);return e.runWebGLProgram(r,s,s[0].dtype)},b9={kernelName:vu,backendName:"webgl",kernelFunc:w9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A9{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const f=De(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const x=R9(this.rank);let S;const C=e.map((o,y)=>`sourceLoc.${ch[y]} = start[${y}] + coords.${ch[y]};`);S=`
        ${f} sourceLoc;
        ${f} coords = getOutputCoords();
        ${C.join(`
`)}
      `,this.userCode=`
      void main() {
        ${S}
        setOutput(getSource(${x}));
      }
    `}}const ch=["x","y","z","w","u","v"];function R9(c){if(c===1)return"sourceLoc";if(c<=6)return ch.slice(0,c).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${c} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I9{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const f=De(this.rank),x=wn("coords",this.rank),S=wn("sourceLoc",this.rank),C=this.rank===1?"sourceLoc":`vec2(${S.slice(-2).join()})`,o=`getChannel(getSource(${S.join()}), ${C})`,y=`
      result.x = ${o};
      if (++${x[this.rank-1]} < ${e[this.rank-1]}) {
        ++${S[this.rank-1]};
        result.y = ${o};
        --${S[this.rank-1]};
      }
    `,t=this.rank===1?"":`
      --${x[this.rank-1]};
      if (++${x[this.rank-2]} < ${e[this.rank-2]}) {
        ++${S[this.rank-2]};
        result.z = ${o};
        if (++${x[this.rank-1]} < ${e[this.rank-1]}) {
          ++${S[this.rank-1]};
          result.w = ${o};
        }
      }
    `,s=this.rank<=4?`sourceLoc = coords +
            ${f}(${e.map((l,a)=>`start[${a}]`).join()});`:e.map((l,a)=>`${S[a]} = ${x[a]} + start[${a}];`).join(`
`);this.userCode=`
      void main() {
        ${f} coords = getOutputCoords();
        ${f} sourceLoc;
        ${s}
        vec4 result = vec4(0.);
        ${y}
        ${t}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P9(c,e,f,x){const S=x.texData.get(c.dataId),C=x.makeTensorInfo(f,c.dtype),o=x.texData.get(C.dataId);Object.assign(o,S),o.refCount=1,o.shape=f,o.dtype=c.dtype;let y=ll(e,Ne(c.shape));S.slice&&(y+=S.slice.flatOffset),o.slice={flatOffset:y,origDataId:S.slice&&S.slice.origDataId||c.dataId};const t=x.dataRefCount.get(o.slice.origDataId)||1;return x.dataRefCount.set(o.slice.origDataId,t+1),C}function ca(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{begin:C,size:o}=x,[y,t]=Kc(S,C,o);if(og(S,y,t),bt(t)===0)return f.makeTensorInfo(t,S.dtype,[]);if(f.shouldExecuteOnCPU([S])||S.dtype==="string"){const a=f.texData.get(S.dataId),r=SR(a.values,y,t,S.shape,S.dtype);return f.makeTensorInfo(t,S.dtype,r)}const{isPacked:s}=f.texData.get(S.dataId),l=ul(S.shape,y,t);if(s||!l){const a=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new I9(t):new A9(t),r=[y];return f.runWebGLProgram(a,[S],S.dtype,r)}return f.uploadToGPU(S.dataId),P9(S,y,t,f)}const F9={kernelName:qf,backendName:"webgl",kernelFunc:ca};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N9=c=>{const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{blockShape:C,crops:o}=x;it(S.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const y=C.reduce((p,m)=>p*m),t=_a(S.shape,C,y),s=to(t.length,C.length),l=eo(S.shape,C,y),a=qc(o,C.length),r=_c(l,o,C.length),i=[],n=Yt({inputs:{x:S},backend:f,attrs:{shape:t}}),h=bn({inputs:{x:n},backend:f,attrs:{perm:s}}),d=Yt({inputs:{x:h},backend:f,attrs:{shape:l}}),u=ca({inputs:{x:d},backend:f,attrs:{begin:a,size:r}});return i.push(n),i.push(h),i.push(d),i.forEach(p=>f.disposeIntermediateTensorInfo(p)),u},M9={kernelName:jh,backendName:"webgl",kernelFunc:N9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O9(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,weights:C}=e,{size:o}=x,y=f.readSync(S.dataId),t=f.readSync(C.dataId),s=t0(y,t,C.dtype,C.shape,o);return f.makeTensorInfo([o],C.dtype,s)}const D9={kernelName:nu,backendName:"webgl",kernelFunc:O9};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L9=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,B9=`
  return float(int(a.r) & int(b.r));
`;function $9(c){const{inputs:e,backend:f}=c,{a:x,b:S}=e,C=St().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=St().getNumber("WEBGL_VERSION");if(f.shouldExecuteOnCPU([x,S])||o===1){const t=f.texData.get(x.dataId).values,s=f.texData.get(S.dataId).values,[l,a]=HA(x.shape,S.shape,t,s,x.dtype),r=f.makeTensorInfo(a,x.dtype),i=f.texData.get(r.dataId);return i.values=l,r}let y;return C?y=new ha(L9,x.shape,S.shape,!1):y=new dr(B9,x.shape,S.shape),f.runWebGLProgram(y,[x,S],x.dtype)}const G9={kernelName:Zh,backendName:"webgl",kernelFunc:$9};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U9(c){const{inputs:e,backend:f}=c,{s0:x,s1:S}=e,C=f.readSync(x.dataId),o=f.readSync(S.dataId),y=Te(Array.from(C),Array.from(o));return f.makeTensorInfo([y.length],"int32",Int32Array.from(y))}const V9={kernelName:Qh,backendName:"webgl",kernelFunc:U9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z9="return float(a != b);",p0=mn({opSnippet:z9,cpuKernelImpl:cR,dtype:"bool"}),k9={kernelName:$f,backendName:"webgl",kernelFunc:p0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ro(c){const{inputs:e,backend:f}=c,{input:x}=e,S=f.texData.get(x.dataId);return zn({inputs:{x:S.complexTensorInfos.real},backend:f})}const W9={kernelName:wm,backendName:"webgl",kernelFunc:ro};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X9="return float(int(x));";function H9(c,e){const f=new Ps(c.shape,X9),x=e.runWebGLProgram(f,[c],"int32");return{dataId:x.dataId,shape:x.shape,dtype:x.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dh(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{dtype:C}=x;if(C==="complex64"){if(S.dtype==="complex64")return zn({inputs:{x:S},backend:f});const o=hr(S.shape),y=dh({inputs:{x:S},backend:f,attrs:{dtype:"float32"}}),t=Oi({inputs:{real:y,imag:o},backend:f});return o.dispose(),f.disposeIntermediateTensorInfo(y),t}if(S.dtype==="complex64"){const o=ro({inputs:{input:S},backend:f}),y=dh({inputs:{x:o},backend:f,attrs:{dtype:C}});return f.disposeIntermediateTensorInfo(o),y}if(!Y2(S.dtype,C)){const o=zn({inputs:{x:S},backend:f});return{dataId:o.dataId,shape:o.shape,dtype:C}}if(f.shouldExecuteOnCPU([S])){const o=f.texData.get(S.dataId).values,[y,t,s]=YA(o,S.shape,S.dtype,C);return f.makeTensorInfo(y,t,s)}if(C==="int32")return H9(S,f);if(C==="bool"){const o=f.makeTensorInfo([],"bool",Ei("bool",1)),t=p0({inputs:{a:S,b:o},backend:f});return f.disposeIntermediateTensorInfo(o),t}throw new Error(`Error in Cast: failed to cast ${S.dtype} to ${C}`)}const Y9={kernelName:su,backendName:"webgl",kernelFunc:dh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mp="return ceil(x);",K9=be({opSnippet:mp,packedOpSnippet:mp,cpuKernelImpl:KA}),j9={kernelName:Jh,backendName:"webgl",kernelFunc:K9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z9{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q9{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{clipValueMin:C,clipValueMax:o}=x;let y;St().getBool("WEBGL_PACK_CLIP")?y=new Q9(S.shape):y=new Z9(S.shape);const t=[[C],[o]];return f.runWebGLProgram(y,[S],S.dtype,t)}const q9={kernelName:iu,backendName:"webgl",kernelFunc:J9};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _9{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vp(c,e){return{dataId:e.dataId,dtype:e.dtype,shape:c.shape}}function tP(c){const{inputs:e,backend:f}=c,{x}=e,S=f.texData.get(x.dataId),C=new _9(x.shape),o=[vp(x,S.complexTensorInfos.real),vp(x,S.complexTensorInfos.imag)];return f.runWebGLProgram(C,o,o[0].dtype)}const eP={kernelName:lm,backendName:"webgl",kernelFunc:tP};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nP{constructor(e){this.outputShape=[],this.outputShape=Ns(e,1),this.variableNames=e.map((o,y)=>`T${y}`);const f=new Array(e.length-1);f[0]=e[0][1];for(let o=1;o<f.length;o++)f[o]=f[o-1]+e[o][1];const x=[`if (yC < ${f[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<f.length;o++){const y=f[o-1];x.push(`else if (yC < ${f[o]}) setOutput(getT${o}(yR, yC-${y}));`)}const S=f.length,C=f[f.length-1];x.push(`else setOutput(getT${S}(yR, yC-${C}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${x.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sP{constructor(e,f){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ns(e,f);const x=this.outputShape,S=x.length,C=De(S),o=wn("coords",S),y=["x","y","z","w","u","v"].slice(0,S);this.variableNames=e.map((h,d)=>`T${d}`);const t=new Array(e.length-1);t[0]=e[0][f];for(let h=1;h<t.length;h++)t[h]=t[h-1]+e[h][f];const s=y[f],l=y.slice(-2),a=y.join();let r=`if (${s} < ${t[0]}) {
        return getChannel(
            getT0(${a}), vec2(${l.join()}));
        }`;for(let h=1;h<t.length;h++){const d=t[h-1];r+=`
        if (${s} < ${t[h]}  && ${s} >= ${t[h-1]}) {
          return getChannel(
            getT${h}(${xo(y,s,d)}),
            vec2(${xo(l,s,d)}));
        }`}const i=t.length,n=t[t.length-1];r+=`
        return getChannel(
          getT${i}(${xo(y,s,n)}),
          vec2(${xo(l,s,n)}));`,this.userCode=`
      float getValue(${y.map(h=>"int "+h)}) {
        ${r}
      }

      void main() {
        ${C} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[S-1]} = ${o[S-1]} + 1;
        if (${o[S-1]} < ${x[S-1]}) {
          result.g = getValue(${o});
        }

        ${o[S-2]} = ${o[S-2]} + 1;
        if (${o[S-2]} < ${x[S-2]}) {
          result.a = getValue(${o});
        }

        ${o[S-1]} = ${o[S-1]} - 1;
        if (${o[S-2]} < ${x[S-2]} &&
            ${o[S-1]} < ${x[S-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function xo(c,e,f){const x=c.indexOf(e);return c.map((C,o)=>o===x?`${C} - ${f}`:C).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ml(c){const{inputs:e,backend:f}=c,{input:x}=e,S=f.texData.get(x.dataId);return zn({inputs:{x:S.complexTensorInfos.imag},backend:f})}const iP={kernelName:xm,backendName:"webgl",kernelFunc:ml};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ea(c,e,f){const x=c[0].dtype;if(x==="complex64"){const i=c.map(p=>ro({inputs:{input:p},backend:f})),n=c.map(p=>ml({inputs:{input:p},backend:f})),h=Ea(i,e,f),d=Ea(n,e,f),u=Oi({inputs:{real:h,imag:d},backend:f});return i.forEach(p=>f.disposeIntermediateTensorInfo(p)),n.forEach(p=>f.disposeIntermediateTensorInfo(p)),f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(d),u}let S=f.shouldExecuteOnCPU(c);if(x==="string"&&(S=!0),S){const i=c.map(v=>{const T=[-1,bt(v.shape.slice(e))];return Yt({inputs:{x:v},backend:f,attrs:{shape:T}})}),n=i.map(v=>({vals:f.readSync(v.dataId),shape:v.shape})),h=Ns(i.map(v=>v.shape),1),d=i[0].shape[0]===1,u=jA(n,h,x,d),p=Ns(c.map(v=>v.shape),e),m=f.makeTensorInfo(p,x,u);return i.forEach(v=>f.disposeIntermediateTensorInfo(v)),m}const C=c.filter(i=>bt(i.shape)>0),o=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&C[0].shape.length>1;if(C.length===1){const i=o?new Ps(c[0].shape,mi):new xi(c[0].shape,mi);return f.runWebGLProgram(i,c,x)}const y=St().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(C.length>y){const i=[];for(let h=0;h<C.length;h+=y){const d=C.slice(h,h+y);i.push(Ea(d,e,f))}const n=Ea(i,e,f);for(const h of i)f.disposeIntermediateTensorInfo(h);return n}if(o){const i=new sP(C.map(n=>n.shape),e);return f.runWebGLProgram(i,C,x)}const{tensors2D:t,outShape:s}=rP(C,e,f),l=new nP(t.map(i=>i.shape)),a=f.runWebGLProgram(l,t,x);t.forEach(i=>f.disposeIntermediateTensorInfo(i));const r=Yt({inputs:{x:a},attrs:{shape:s},backend:f});return f.disposeIntermediateTensorInfo(a),r}function rP(c,e,f){const x=Ns(c.map(C=>C.shape),e);return{tensors2D:c.map(C=>Yt({inputs:{x:C},attrs:{shape:[-1,bt(C.shape.slice(e))]},backend:f})),outShape:x}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0(c){const{inputs:e,backend:f,attrs:x}=c,{axis:S}=x,C=Qe(S,e[0].shape)[0],o=e.map(s=>s.shape);Zc(o,C);const y=Ns(e.map(s=>s.shape),C);if(bt(y)===0)return f.makeTensorInfo(y,e[0].dtype,[]);const t=e.filter(s=>bt(s.shape)>0);return t.length===1?zn({inputs:{x:t[0]},backend:f}):Ea(t,C,f)}const aP={kernelName:qh,backendName:"webgl",kernelFunc:m0};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v0{constructor(e,f=!1,x=null,S=!1,C=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,y=e.padInfo.left,t=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,a=e.dilationWidth,r=e.filterHeight,i=e.filterWidth,n=Math.floor(e.inChannels/4)*4,h=e.inChannels%4,d=e.dataFormat==="channelsLast",u=d?1:2,p=d?2:3,m=d?3:1;let v="",g="";x&&(S?v=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${x}
        }`:C?v=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${x}
        }`:v=`
          float activation(float x) {
            ${x}
          }
        `,g="result = activation(result);");const T=f?"result += getBiasAtOutCoords();":"";f&&this.variableNames.push("bias"),S&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${v}

      const ivec2 strides = ivec2(${t}, ${s});
      const ivec2 pads = ivec2(${o}, ${y});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${m}];

        ivec2 xRCCorner =
            ivec2(coords[${u}], coords[${p}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r}; wR++) {
          int xR = xRCorner + wR * ${l};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${i}; wC++) {
            int xC = xCCorner + wC * ${a};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${n}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${d}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${h===1}) {

              if (${d}) {
                dotProd +=
                    getX(batch, xR, xC, ${n}) *
                    getW(wR, wC, ${n}, d2);
              } else {
                dotProd +=
                    getX(batch, ${n}, xR, xC) *
                    getW(wR, wC, ${n}, d2);
              }

            } else if (${h===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${n}, d2),
                getW(wR, wC, ${n} + 1, d2)
              );

              if (${d}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${n}),
                  getX(batch, xR, xC, ${n} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${n}, xR, xC),
                  getX(batch, ${n} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${h===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${n}, d2),
                getW(wR, wC, ${n} + 1, d2),
                getW(wR, wC, ${n} + 2, d2)
              );

              if (${d}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${n}),
                  getX(batch, xR, xC, ${n} + 1),
                  getX(batch, xR, xC, ${n} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${n}, xR, xC),
                  getX(batch, ${n} + 1, xR, xC),
                  getX(batch, ${n} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${T}
        ${g}
        setOutput(result);
      }
    `}}class oP{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const f=e.padInfo.front,x=e.padInfo.top,S=e.padInfo.left,C=e.strideDepth,o=e.strideHeight,y=e.strideWidth,t=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,a=e.filterDepth,r=e.filterHeight,i=e.filterWidth,n=Math.floor(e.inChannels/4)*4,h=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${C}, ${o}, ${y});
      const ivec3 pads = ivec3(${f}, ${x}, ${S});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${a}; wF++) {
          int xF = xFCorner + wF * ${t};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${r}; wR++) {
            int xR = xRCorner + wR * ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${i}; wC++) {
              int xC = xCCorner + wC * ${l};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${n}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${h===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${n}) *
                  getW(wF, wR, wC, ${n}, d2);
              } else if (${h===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${n}),
                  getX(batch, xF, xR, xC, ${n} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${n}, d2),
                  getW(wF, wR, wC, ${n} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${h===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${n}),
                  getX(batch, xF, xR, xC, ${n} + 1),
                  getX(batch, xF, xR, xC, ${n} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${n}, d2),
                  getW(wF, wR, wC, ${n} + 1, d2),
                  getW(wF, wR, wC, ${n} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g0{constructor(e,f=!1,x=null,S=!1,C=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Tn(this.outputShape.length);const o=e.padInfo.left,y=e.strideWidth,t=e.dilationWidth,s=e.filterHeight,l=e.filterWidth,a=l;let r=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let d=0;d<l;d++)r+=`
           vec4 xTexelC${d*2};
           int xTexelC${d*2}Ready;
           vec4 xTexelC${d*2+1};
           int xTexelC${d*2+1}Ready;
           vec4 xC${d};`;r+=`
     for (int r = 0; r < ${s}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let d=0;d<l;d++)r+=`
           xTexelC${d*2} = vec4(0.0);
           xTexelC${d*2}Ready = 0;
           xTexelC${d*2+1} = vec4(0.0);
           xTexelC${d*2+1}Ready = 0;
           xC${d} = vec4(0.0);`;r+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let d=0;d<(a+1)/2;d++){const u=d*2;if(r+=`
           xC = xCCorner + ${u*t};
           `,y===1){if(u<l&&(o%2===1?(r+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u}Ready == 0) {
                   xTexelC${u} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${u}.zw = vec2(0.0);
                   }
                   xTexelC${u}Ready = 1;
                 }
               `,t===1&&u>0?r+=`
                 xC${u} = vec4(xTexelC${u-2}.zw, xTexelC${u}.xy);
                 `:r+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${u} = vec4(previous.zw, xTexelC${u}.xy);
                   } else {
                     xC${u} = vec4(0.0, 0.0, xTexelC${u}.xy);
                   }
                   `):r+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${u}Ready == 0) {
                   xTexelC${u} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${u}.zw = vec2(0.0);
                   }
                   xTexelC${u}Ready = 1;
                 }

                 xC${u} = xTexelC${u};
                 `,u+1<l)){const p=o%2===0?Dh(t):t;t%2===0&&o%2===1||t%2!==0&&o%2!==1?(r+=`
                   xCOffset = xC + imod(pads[1], 2) + ${p};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u+1}Ready == 0) {
                     xTexelC${u+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${u+1}.zw = vec2(0.0);
                     }
                     xTexelC${u+1}Ready = 1;
                   }
                   `,t>1?r+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${u+1} = vec4(previous.zw, xTexelC${u+1}.xy);
                     } else {
                      xC${u+1} = vec4(0.0, 0.0, xTexelC${u+1}.xy);
                     }
                     `:r+=`
                     xC${u+1} = vec4(xTexelC${u}.zw, xTexelC${u+1}.xy);
                     `):p===1?r+=`
                     xC${u+1} = xTexelC${u};
                     `:r+=`
                     xCOffset = xC + ${p};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u+1}Ready == 0) {
                       xTexelC${u+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${u+1}.zw = vec2(0.0);
                       }
                       xTexelC${u+1}Ready = 1;
                     }

                     xC${u+1} = xTexelC${u+1};
                     `}}else u<l&&(o%2===1?(r+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u}Ready == 0) {
                   xTexelC${u} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${u}.zw = vec2(0.0);
                   }
                   xTexelC${u}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${u+1}Ready == 0) {
                   xTexelC${u+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${u+1}.zw = vec2(0.0);
                   }
                   xTexelC${u+1}Ready = 1;
                 }

                 xC${u} = vec4(xTexelC${u}.zw, xTexelC${u+1}.zw);
               `,u+1<l&&(r+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${u+1} = vec4(xTexelC${u+1}.xy, final.xy);
                 `)):(r+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${u}Ready == 0) {
                   xTexelC${u} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${u}.zw = vec2(0.0);
                   }
                   xTexelC${u}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${u+1}Ready == 0) {
                   xTexelC${u+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${u+1}.zw = vec2(0.);
                   }
                   xTexelC${u+1}Ready = 1;
                 }

                 xC${u} = vec4(
                   xTexelC${u}.xy, xTexelC${u+1}.xy);
               `,u+1<l&&(r+=`
                   xC${u+1} = vec4(xTexelC${u}.zw, xTexelC${u+1}.zw);
                 `)));u<l&&(r+=`
             wTexel = getW(r, ${u}, d1, d2);
             dotProd += xC${u}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${u}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,u+1<l&&(r+=`
               wTexel = getW(r, ${u+1}, d1, d2);
               dotProd += xC${u+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${u+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}r+=`
     }
   `,r+=`
     }
   `,r+=`
     }
   `;let i="",n="";x&&(S?i=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${x}
         }`:C?i=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${x}
         }`:i=`vec4 activation(vec4 x) {
           ${x}
         }`,n="result = activation(result);");const h=f?"result += getBiasAtOutCoords();":"";f&&this.variableNames.push("bias"),S&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${i}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${r}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${h}
         ${n}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uP{constructor(e,f){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Tn(this.outputShape.length);const{dataFormat:x}=f,S=An(),C=x==="channelsLast",o=C?1:2,y=C?2:3,t=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let s="";for(let l=0;l<=1;l++)for(let a=0;a<=1;a++)s+=`
          blockIndex = rc.z + ${a};
          pos = rc.y + ${l};

          ${t}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${y}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${C}) {
                  innerDims = vec2(d1, ch);
                  result[${l*2+a}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${l*2+a}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${s}

        ${S.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zo(c,e){const f=c.length;return f>=3?e?[...c.slice(0,-3),c[f-3]*c[f-2],c[f-1]]:[...c.slice(0,-3),c[f-3],c[f-2]*c[f-1]]:!e&&f===1&&c[0]>1?[c[0],1]:null}function x0({x:c,filter:e,convInfo:f,backend:x,bias:S=null,preluActivationWeights:C=null,leakyreluAlpha:o=0,activation:y=null}){const t=c.shape,s=x.texData.get(c.dataId),l=f.inChannels,a=t[0]*t[1]*t[2],r=f.outChannels,i=f.dataFormat==="channelsLast",n=!1,h=!1;let d;const u=[];if(C!=null){const v=zo(C.shape,i);v!=null&&(C=Yt({inputs:{x:C},backend:x,attrs:{shape:v}}),u.push(C))}if(S!=null){const v=zo(S.shape,i);v!=null&&(S=Yt({inputs:{x:S},backend:x,attrs:{shape:v}}),u.push(S))}if(!((a===1||r===1)&&l>h0)&&s.isPacked&&i&&s.texture!=null&&t[2]%2!==0&&je(s.shape.slice(-3),t.slice(-3))){const v=t[0]*t[1]*(t[2]+1),g={dataId:c.dataId,shape:[1,v,f.inChannels],dtype:c.dtype},T=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,it(Go(s.shape,g.shape),()=>`packed reshape ${s.shape} to ${g.shape} isn't free`);const w=Yt({inputs:{x:e},backend:x,attrs:{shape:[1,f.inChannels,f.outChannels]}});u.push(w);const b=Vo({a:g,b:w,backend:x,transposeA:n,transposeB:h,bias:S,activation:y,preluActivationWeights:C,leakyreluAlpha:o}),E=x.texData.get(b.dataId);it(E.isPacked,()=>"batchMatMul result is expected to be packed"),s.shape=T,E.shape=f.outShape,d=zn({inputs:{x:b},backend:x}),d.shape=f.outShape,u.push(b)}else{const v=f.outHeight*f.outWidth,g=Yt({inputs:{x:c},backend:x,attrs:{shape:i?[f.batchSize,v,f.inChannels]:[f.batchSize,f.inChannels,v]}}),T=Yt({inputs:{x:e},backend:x,attrs:{shape:[1,f.inChannels,f.outChannels]}}),w=Vo({a:i?g:T,b:i?T:g,transposeA:!i,transposeB:h,backend:x,bias:S,activation:y,preluActivationWeights:C,leakyreluAlpha:o});d=Yt({inputs:{x:w},backend:x,attrs:{shape:f.outShape}}),u.push(g),u.push(T),u.push(w)}for(const v of u)x.disposeIntermediateTensorInfo(v);return d}function y0({x:c,filter:e,convInfo:f,backend:x,bias:S=null,preluActivationWeights:C=null,leakyreluAlpha:o=0,activation:y=null}){const{filterWidth:t,filterHeight:s,inChannels:l,outWidth:a,outHeight:r,dataFormat:i}=f,n=i==="channelsLast",h=t*s*l,d=r*a,u=[f.batchSize,h,d],p=!0,m=!1,v=[];if(C!=null){const L=zo(C.shape,n);L!=null&&(C=Yt({inputs:{x:C},backend:x,attrs:{shape:L}}),v.push(C))}if(S!=null){const L=zo(S.shape,n);L!=null&&(S=Yt({inputs:{x:S},backend:x,attrs:{shape:L}}),v.push(S))}const g=Yt({inputs:{x:e},backend:x,attrs:{shape:[1,h,bt(e.shape)/h]}});v.push(g);const T=new uP(u,f),w=[c.shape,[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inChannels],[f.filterWidth*f.inChannels],[f.outWidth]],b=x.runWebGLProgram(T,[c],"float32",w),E=Yt({inputs:{x:b},backend:x,attrs:{shape:u}});v.push(b),v.push(E);const A=S!=null,R=C!=null,I=y==="leakyrelu",P=y?Wa(y,!0):null,N=new l0(n?E.shape:g.shape,n?g.shape:E.shape,n?[f.batchSize,d,f.outChannels]:[f.batchSize,f.outChannels,d],p,m,A,P,R,I),F=n?[E,g]:[g,E];if(S&&F.push(S),R&&F.push(C),I){const L=x.makeTensorInfo([],"float32",na(o,"float32"));F.push(L),v.push(L)}const O=x.runWebGLProgram(N,F,"float32"),D=Yt({inputs:{x:O},backend:x,attrs:{shape:f.outShape}});v.push(O);for(const L of v)x.disposeIntermediateTensorInfo(L);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C}=e,{strides:o,pad:y,dataFormat:t,dilations:s,dimRoundingMode:l}=x,a=Mi(t),r=dn(S.shape,C.shape,o,s,y,l,!1,a);let i;if(r.filterHeight===1&&r.filterWidth===1&&r.dilationHeight===1&&r.dilationWidth===1&&r.strideHeight===1&&r.strideWidth===1&&(r.padInfo.type==="SAME"||r.padInfo.type==="VALID"))i=x0({x:S,filter:C,convInfo:r,backend:f});else if(r.strideWidth<=2&&a==="channelsLast"&&St().getBool("WEBGL_EXP_CONV")){const h=new g0(r),d=[[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inHeight,r.inWidth]];i=f.runWebGLProgram(h,[S,C],"float32",d)}else if(St().getBool("WEBGL_CONV_IM2COL"))i=y0({x:S,filter:C,convInfo:r,backend:f});else{const h=new v0(r);i=f.runWebGLProgram(h,[S,C],"float32")}const n=Yt({inputs:{x:i},backend:f,attrs:{shape:r.outShape}});return f.disposeIntermediateTensorInfo(i),n}const hP={kernelName:ru,backendName:"webgl",kernelFunc:lP};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fP{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const f=e.strideHeight,x=e.strideWidth,S=e.padInfo.top,C=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${f} - ${S};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${x} - ${C};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cP{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const f=e.filterHeight,x=e.filterWidth,S=e.strideHeight,C=e.strideWidth,o=e.dataFormat==="channelsLast",y=f-1-e.padInfo.top,t=x-1-e.padInfo.left,s=o?1:2,l=o?2:3,a=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${y}, ${t});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${a}];

        ivec2 dyCorner = ivec2(coords[${s}], coords[${l}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          float dyR = float(dyRCorner + wR) / ${S}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${f} - 1 - wR;

          for (int wC = 0; wC < ${x}; wC++) {
            float dyC = float(dyCCorner + wC) / ${C}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${x} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class dP{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const f=e.strideDepth,x=e.strideHeight,S=e.strideWidth,C=e.padInfo.front,o=e.padInfo.top,y=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${f} - ${C};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${x} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${S} - ${y};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class pP{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const f=e.filterDepth,x=e.filterHeight,S=e.filterWidth,C=e.strideDepth,o=e.strideHeight,y=e.strideWidth,t=f-1-e.padInfo.front,s=x-1-e.padInfo.top,l=S-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${t}, ${s}, ${l});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          float dyF = float(dyFCorner + wF) / ${C}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${f} - 1 - wF;

          for (int wR = 0; wR < ${x}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${x} - 1 - wR;

            for (int wC = 0; wC < ${S}; wC++) {
              float dyC = float(dyCCorner + wC) / ${y}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${S} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,dy:C}=e,{strides:o,pad:y,dataFormat:t,dimRoundingMode:s,filterShape:l}=x,a=Mi(t),r=dn(S.shape,l,o,1,y,s,!1,a),i=new fP(r);return f.runWebGLProgram(i,[S,C],"float32")}const vP={kernelName:hm,backendName:"webgl",kernelFunc:mP};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gP{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Tn(this.outputShape.length);const f=e.filterHeight,x=e.filterWidth,S=f-1-e.padInfo.top,C=x-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${S}, ${C});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${f}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${f} - 1 - wR;

          for (int wC = 0; wC < ${x}; wC++) {
            int wCPerm = ${x} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xP(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,filter:C}=e,{inputShape:o,strides:y,pad:t,dataFormat:s,dimRoundingMode:l}=x,a=Mi(s),r=dn(o,C.shape,y,1,t,l,!1,a);if(St().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&a==="channelsLast"){const i=[[r.strideHeight,r.strideWidth]],n=new gP(r);return f.runWebGLProgram(n,[S,C],"float32",i)}else{const i=new cP(r);return f.runWebGLProgram(i,[S,C],"float32")}}const yP={kernelName:au,backendName:"webgl",kernelFunc:xP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C}=e,{strides:o,pad:y,dilations:t}=x,s=Ni(S.shape,C.shape,o,t,y),l=new oP(s);return f.runWebGLProgram(l,[S,C],"float32")}const SP={kernelName:ou,backendName:"webgl",kernelFunc:TP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,dy:C}=e,{strides:o,pad:y,filterShape:t}=x,s=Ni(S.shape,t,o,1,y),l=new dP(s);return f.runWebGLProgram(l,[S,C],"float32")}const EP={kernelName:_h,backendName:"webgl",kernelFunc:CP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wP(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,filter:C}=e,{pad:o,strides:y,inputShape:t}=x,s=Ni(t,C.shape,y,1,o),l=new pP(s);return f.runWebGLProgram(l,[S,C],"float32")}const bP={kernelName:uu,backendName:"webgl",kernelFunc:wP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AP=fa+`
  return cos(x);
`,RP=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Er}
  return result;
`,IP=be({opSnippet:AP,packedOpSnippet:RP}),PP={kernelName:tf,backendName:"webgl",kernelFunc:IP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FP=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,NP=be({opSnippet:FP}),MP={kernelName:ef,backendName:"webgl",kernelFunc:NP};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OP{constructor(e,f,x,S,C){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,y,t,s]=e,[l]=f,[a,r]=x;this.outputShape=[l,a,r,s];const i=S==="bilinear"?1:0,[n,h]=[`${y-1}.0`,`${t-1}.0`],[d,u,p]=a>1?[`${(y-1)/(a-1)}`,"(y2-y1) * height_ratio",`y1*${n} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${n}`],[m,v,g]=r>1?[`${(t-1)/(r-1)}`,"(x2-x1) * width_ratio",`x1*${h} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${h}`];this.userCode=`
      const float height_ratio = float(${d});
      const float width_ratio = float(${m});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${u};
        float width_scale = ${v};

        float in_y = ${p};
        if( in_y < 0.0 || in_y > ${n} ) {
          setOutput(float(${C}));
          return;
        }
        float in_x = ${g};
        if( in_x < 0.0 || in_x > ${h} ) {
          setOutput(float(${C}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${i} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DP=c=>{const{inputs:e,backend:f,attrs:x}=c,{image:S,boxes:C,boxInd:o}=e,{cropSize:y,method:t,extrapolationValue:s}=x,l=new OP(S.shape,C.shape,y,t,s);return f.runWebGLProgram(l,[S,C,o],"float32")},LP={kernelName:fu,backendName:"webgl",kernelFunc:DP};var Ha;(function(c){c.Prod="*",c.Sum="+"})(Ha||(Ha={}));class gp{constructor(e,f,x,S){this.op=e,this.outputShape=f,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const C=this.outputShape.length,o=this.op===Ha.Prod?"1.0":"0.0",y=x?o:`getX(${xp(C,"coords",this.op)})`,t=this.outputShape[this.outputShape.length-1];let s="",l="";x?(s=S?`end != ${t-1}`:"end != 0",l=S?"end + 1":"end - 1"):(s=S?`end + pow2 < ${t}`:"end >= pow2",l=S?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${De(C)} coords = getOutputCoords();
        int end = ${yp(C,"coords",this.op)};
        float val = ${y};
        int pow2 = int(pow(2.0, index));
        if (${s}) {
          int idx = ${l};
          ${yp(C,"coords",this.op)} = idx;
          val ${this.op}= getX(${xp(C,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function xp(c,e,f){if(c===1)return`${e}`;if(c===2)return`${e}.x, ${e}.y`;if(c===3)return`${e}.x, ${e}.y, ${e}.z`;if(c===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${f} for rank ${c} is not yet supported`)}function yp(c,e,f){if(c===1)return`${e}`;if(c===2)return`${e}.y`;if(c===3)return`${e}.z`;if(c===4)return`${e}.w`;throw new Error(`Cumulative ${f} for rank ${c} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0(c,e,f,x,S,C){const o=e.shape.length,y=Ln([x],o);let t=e;y!=null&&(t=bn({inputs:{x:e},backend:f,attrs:{perm:y}}));const s=pn(1,o)[0];if(s!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${x}`);const l=t.shape[s];let a=zn({inputs:{x:t},backend:f});for(let r=0;r<=Math.ceil(Math.log2(l))-1;r++){const i=new gp(c,t.shape,!1,C),n=[[r]],h=a;a=f.runWebGLProgram(i,[a],a.dtype,n),f.disposeIntermediateTensorInfo(h)}if(S){const r=new gp(c,t.shape,S,C),i=a;a=f.runWebGLProgram(r,[a],a.dtype),f.disposeIntermediateTensorInfo(i)}if(y!=null){const r=Ja(y),i=bn({inputs:{x:a},backend:f,attrs:{perm:r}});return f.disposeIntermediateTensorInfo(a),f.disposeIntermediateTensorInfo(t),i}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C,exclusive:o,reverse:y}=x;return T0(Ha.Prod,S,f,C,o,y)}const $P={kernelName:lu,backendName:"webgl",kernelFunc:BP};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C,exclusive:o,reverse:y}=x;return T0(Ha.Sum,S,f,C,o,y)}const UP={kernelName:hu,backendName:"webgl",kernelFunc:GP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,weights:C}=e,{size:o,binaryOutput:y}=x;if(S.shape.length===1){const t=f.readSync(S.dataId),s=f.readSync(C.dataId),l=t0(t,s,C.dtype,C.shape,o);return f.makeTensorInfo([o],C.dtype,l)}else if(S.shape.length===2){const t=f.bufferSync(S),s=f.bufferSync(C),l=XA(t,s,o,y);return f.makeTensorInfo(l.shape,C.dtype,l.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${S.shape.length}.`)}const zP={kernelName:nf,backendName:"webgl",kernelFunc:VP};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kP{constructor(e,f,x){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=f,this.dataFormat=x,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${f};
      int offset_h = imod(h, ${f});
      int in_w = w / ${f};
      int offset_w = imod(w, ${f});
      int offset_d = (offset_h * ${f} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{blockSize:C,dataFormat:o}=x,y=S.shape[0],t=o==="NHWC"?S.shape[1]:S.shape[2],s=o==="NHWC"?S.shape[2]:S.shape[3],l=o==="NHWC"?S.shape[3]:S.shape[1],a=t*C,r=s*C,i=l/(C*C),n=o==="NHWC"?[y,a,r,i]:[y,i,a,r],h=new kP(n,C,o);return f.runWebGLProgram(h,[S],S.dtype)}const XP={kernelName:cu,backendName:"webgl",kernelFunc:WP};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S0{constructor(e,f=!1,x=null,S=!1,C=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Tn(this.outputShape.length);const o=e.filterHeight,y=e.filterWidth,t=e.outChannels/e.inChannels;let s="",l="";x&&(S?s=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${x}
        }`:C?s=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${x}
        }`:s=`
          float activation(float x) {
            ${x}
          }
        `,l="result = activation(result);");const a=f?"result += getBiasAtOutCoords();":"";f&&this.variableNames.push("bias"),S&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${s}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${t};
        int q = d2 - d1 * ${t};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${y}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C0{constructor(e,f=!1,x=null,S=!1,C=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Tn(this.outputShape.length);const o=e.outChannels/e.inChannels,y=e.padInfo.left,t=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,a=e.filterWidth,r=a;let i=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let u=0;u<a;u++)i+=`
          vec4 xTexelC${u*2};
          int xTexelC${u*2}Ready;
          vec4 xTexelC${u*2+1};
          int xTexelC${u*2+1}Ready;
          vec4 xC${u};`;i+=`
    for (int r = 0; r < ${l}; r++) {
      `;for(let u=0;u<a;u++)i+=`
          xTexelC${u*2} = vec4(0.0);
          xTexelC${u*2}Ready = 0;
          xTexelC${u*2+1} = vec4(0.0);
          xTexelC${u*2+1}Ready = 0;
          xC${u} = vec4(0.0);`;i+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let u=0;u<(r+1)/2;u++){const p=u*2;if(i+=`
          xC = xCCorner + ${p*s};
          `,t===1){if(p<a&&(y%2===1?(i+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }
              `,s===1&&p>0?i+=`
                xC${p} = vec4(xTexelC${p-2}.zw, xTexelC${p}.xy);
                `:i+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${p} = vec4(previous.zw, xTexelC${p}.xy);
                  } else {
                    xC${p} = vec4(0.0, 0.0, xTexelC${p}.xy);
                  }
                  `):i+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }

                xC${p} = xTexelC${p};
                `,p+1<a)){const m=y%2===0?Dh(s):s;s%2===0&&y%2===1||s%2!==0&&y%2!==1?(i+=`
                  xCOffset = xC + imod(pads[1], 2) + ${m};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p+1}Ready == 0) {
                    xTexelC${p+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${p+1}.zw = vec2(0.0);
                    }
                    xTexelC${p+1}Ready = 1;
                  }
                  `,s>1?i+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${p+1} = vec4(previous.zw, xTexelC${p+1}.xy);
                    } else {
                     xC${p+1} = vec4(0.0, 0.0, xTexelC${p+1}.xy);
                    }
                    `:i+=`
                    xC${p+1} = vec4(xTexelC${p}.zw, xTexelC${p+1}.xy);
                    `):m===1?i+=`
                    xC${p+1} = xTexelC${p};
                    `:i+=`
                    xCOffset = xC + ${m};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p+1}Ready == 0) {
                      xTexelC${p+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${p+1}.zw = vec2(0.0);
                      }
                      xTexelC${p+1}Ready = 1;
                    }

                    xC${p+1} = xTexelC${p+1};
                    `}}else p<a&&(y%2===1?(i+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${p+1}Ready == 0) {
                  xTexelC${p+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${p+1}.zw = vec2(0.0);
                  }
                  xTexelC${p+1}Ready = 1;
                }

                xC${p} = vec4(xTexelC${p}.zw, xTexelC${p+1}.zw);
              `,p+1<a&&(i+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${p+1} = vec4(xTexelC${p+1}.xy, final.xy);
                `)):(i+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p+1}Ready == 0) {
                  xTexelC${p+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${p+1}.zw = vec2(0.);
                  }
                  xTexelC${p+1}Ready = 1;
                }

                xC${p} = vec4(
                  xTexelC${p}.xy, xTexelC${p+1}.xy);
              `,p+1<a&&(i+=`
                  xC${p+1} = vec4(xTexelC${p}.zw, xTexelC${p+1}.zw);
                `)));p<a&&(i+=`
            wTexel = getW(r, ${p}, d1, q);
            dotProd += xC${p} * vec4(wTexel.xz, wTexel.xz);
          `,p+1<a&&(i+=`
              wTexel = getW(r, ${p+1}, d1, q);
              dotProd += xC${p+1} * vec4(wTexel.xz, wTexel.xz);
            `))}i+=`
    }
  `,i+=`
      }
    `;let n="",h="";x&&(S?n=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${x}
        }`:C?n=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${x}
        }`:n=`vec4 activation(vec4 x) {
          ${x}
        }`,h="result = activation(result);");const d=f?"result += getBiasAtOutCoords();":"";f&&this.variableNames.push("bias"),S&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${n}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${i}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${d}
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C}=e,{strides:o,pad:y,dilations:t,dimRoundingMode:s}=x;let l=t;l==null&&(l=[1,1]),it(Dn(o,l),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const a=dn(S.shape,C.shape,o,l,y,s,!0);let r;St().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels===1?r=new C0(a):r=new S0(a);const i=[[a.padInfo.top,a.padInfo.left],[a.strideHeight,a.strideWidth],[a.dilationHeight,a.dilationWidth],[a.inHeight,a.inWidth]];return f.runWebGLProgram(r,[S,C],"float32",i)}const YP={kernelName:du,backendName:"webgl",kernelFunc:HP};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KP{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const f=e.strideHeight,x=e.strideWidth,S=e.padInfo.top,C=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${f} - ${S};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${x} - ${C};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class jP{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const f=e.filterHeight,x=e.filterWidth,S=e.strideHeight,C=e.strideWidth,o=f-1-e.padInfo.top,y=x-1-e.padInfo.left,t=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${y});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${f}; wR++) {
          float dyR = float(dyRCorner + wR) / ${S}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${f} - 1 - wR;

          for (int wC = 0; wC < ${x}; wC++) {
            float dyC = float(dyCCorner + wC) / ${C}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${x} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${t}; dm++) {
              int d2 = d1 * ${t} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZP(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,dy:C}=e,{strides:o,dilations:y,pad:t,dimRoundingMode:s,filterShape:l}=x,a=dn(S.shape,l,o,y,t,s,!0),r=new KP(a);return f.runWebGLProgram(r,[S,C],"float32")}const QP={kernelName:fm,backendName:"webgl",kernelFunc:ZP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JP(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,filter:C}=e,{strides:o,dilations:y,pad:t,dimRoundingMode:s,inputShape:l}=x,a=dn(l,C.shape,o,y,t,s,!0),r=new jP(a);return f.runWebGLProgram(r,[S,C],"float32")}const qP={kernelName:cm,backendName:"webgl",kernelFunc:JP};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _P{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t8(c){const{inputs:e,backend:f}=c,{x}=e,S=[...x.shape,...x.shape],C=bt(x.shape),o=Yt({inputs:{x},backend:f,attrs:{shape:[C]}}),y=new _P(C),t=f.runWebGLProgram(y,[o],o.dtype),s=Yt({inputs:{x:t},backend:f,attrs:{shape:S}});return f.disposeIntermediateTensorInfo(o),f.disposeIntermediateTensorInfo(t),s}const e8={kernelName:sf,backendName:"webgl",kernelFunc:t8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n8{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:f,inWidth:x,padInfo:S,strideHeight:C,strideWidth:o,filterHeight:y,filterWidth:t,dilationHeight:s,dilationWidth:l}=e,{top:a,left:r}=S;this.userCode=`
      const ivec2 strides = ivec2(${C}, ${o});
      const ivec2 pads = ivec2(${a}, ${r});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${y}; h++) {
          int hIn = hBeg + h * ${s};

          if (hIn >= 0 && hIn < ${f}) {
            for (int w = 0; w < ${t}; w++) {
              int wIn = wBeg + w * ${l};

              if (wIn >= 0 && wIn < ${x}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C}=e,{strides:o,pad:y,dilations:t}=x,s=Za(S.shape,C.shape,o,y,"NHWC",t);let l;const a=new n8(s);l=f.runWebGLProgram(a,[S,C],"float32");const r=Yt({inputs:{x:l},backend:f,attrs:{shape:s.outShape}});return f.disposeIntermediateTensorInfo(l),r}const i8={kernelName:pu,backendName:"webgl",kernelFunc:s8};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8(c){const{inputs:e,backend:f,attrs:x}=c,{equation:S}=x,C=e,{allDims:o,summedDims:y,idDims:t}=Ig(S,C.length);Fg(o.length,t,C);const{path:s,steps:l}=Ng(y,t),a=l.length;let r=null,i=o.length;const n=[];for(let h=0;h<a;++h){for(const d of l[h]){const{permutationIndices:u,expandDims:p}=Pg(i,t[d]);let m;Mg(u)?m=C[d]:(m=bn({inputs:{x:C[d]},backend:f,attrs:{perm:u}}),n.push(m));const v=m.shape.slice();for(let g=0;g<p.length;++g)v.splice(p[g],0,1);je(m.shape,v)||(m=Yt({inputs:{x:m},backend:f,attrs:{shape:v}}),n.push(m)),r===null?r=m:(r=Td({inputs:{a:m,b:r},backend:f}),n.push(r))}h<a-1&&(s[h]>=0&&(r=pl({inputs:{x:r},backend:f,attrs:{axis:s[h]-(o.length-i),keepDims:!1}}),n.push(r)),i--)}for(const h of n)h!==r&&f.disposeIntermediateTensorInfo(h);return r}const a8={kernelName:mm,backendName:"webgl",kernelFunc:r8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o8="return (x >= 0.0) ? x : (exp(x) - 1.0);",u8=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,l8=be({opSnippet:o8,packedOpSnippet:u8}),h8={kernelName:af,backendName:"webgl",kernelFunc:l8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f8="return (b >= 0.0) ? a : a * (b + 1.0);",c8=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,d8=c=>{const{inputs:e,backend:f}=c,{dy:x,y:S}=e,C=St().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ha(c8,x.shape,S.shape):new dr(f8,x.shape,S.shape);return f.runWebGLProgram(C,[x,S],x.dtype)},p8={kernelName:of,backendName:"webgl",kernelFunc:d8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m8=`
  return vec4(equal(a, b));
`,v8="return float(a == b);",g8=mn({opSnippet:v8,packedOpSnippet:m8,dtype:"bool",cpuKernelImpl:ZA}),x8={kernelName:lf,backendName:"webgl",kernelFunc:g8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y8=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${Cg};
  float a1 = ${Eg};
  float a2 = ${wg};
  float a3 = ${bg};
  float a4 = ${Ag};
  float a5 = ${Rg};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,T8=be({opSnippet:y8}),S8={kernelName:uf,backendName:"webgl",kernelFunc:T8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C8=fa+`
  return exp(x);
`,E8=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,E0=be({opSnippet:C8,packedOpSnippet:E8,cpuKernelImpl:QA,dtype:"float32"}),w8={kernelName:hf,backendName:"webgl",kernelFunc:E0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ph(c){const{inputs:e,attrs:f,backend:x}=c,{dim:S}=f,{input:C}=e,o=C.shape.length,y=C.shape.slice();let t=S;return S<0&&(it(-(o+1)<=S,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),t=o+S+1),y.splice(t,0,1),Yt({inputs:{x:C},backend:x,attrs:{shape:y}})}const b8={kernelName:ff,backendName:"webgl",kernelFunc:ph};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tp="return exp(x) - 1.0;",A8=be({opSnippet:Tp,packedOpSnippet:Tp,cpuKernelImpl:JA}),R8={kernelName:cf,backendName:"webgl",kernelFunc:A8};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sp{constructor(e,f,x){this.variableNames=["real","imag"];const S=f[1];this.outputShape=f;const C=x?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=x?`${S}.0`:"1.0";let y;if(e==="real")y="return real * expR - imag * expI;";else if(e==="imag")y="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${C};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${y}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${S});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${S}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w0(c,e,f){const x=f.texData.get(c.dataId),S=bt(c.shape),C=c.shape[c.shape.length-1],o=S/C,y=Yt({inputs:{x:c},backend:f,attrs:{shape:[o,C]}}),t=y.shape,s=new Sp("real",t,e),l=new Sp("imag",t,e),a=[{dataId:x.complexTensorInfos.real.dataId,dtype:x.complexTensorInfos.real.dtype,shape:t},{dataId:x.complexTensorInfos.imag.dataId,dtype:x.complexTensorInfos.imag.dtype,shape:t}],r=f.runWebGLProgram(s,a,"float32"),i=f.runWebGLProgram(l,a,"float32"),n=Oi({inputs:{real:r,imag:i},backend:f});f.disposeIntermediateTensorInfo(r),f.disposeIntermediateTensorInfo(i);const h=Yt({inputs:{x:n},backend:f,attrs:{shape:c.shape}});return f.disposeIntermediateTensorInfo(y),f.disposeIntermediateTensorInfo(n),h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8(c){const{inputs:e,backend:f}=c,{input:x}=e;return w0(x,!1,f)}const P8={kernelName:vm,backendName:"webgl",kernelFunc:I8};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F8{constructor(e,f){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ao(c){const{backend:e,attrs:f}=c,{shape:x,value:S}=f;let{dtype:C}=f;if(C=C||ea(S),C==="string"){const o=ln(C,bt(x));return o.fill(S),e.makeTensorInfo(x,C,o)}else{const o=new F8(x,S),y=[[S]];return e.runWebGLProgram(o,[],C,y)}}const N8={kernelName:df,backendName:"webgl",kernelFunc:ao};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M8{constructor(e){this.variableNames=["Image"],this.outputShape=[];const f=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${f} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${f}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O8={kernelName:mu,backendName:"webgl",kernelFunc:({inputs:c,backend:e})=>{const{image:f}=c,x=e,S=new M8(f.shape);return x.runWebGLProgram(S,[f],f.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cp="return floor(x);",D8=be({opSnippet:Cp,packedOpSnippet:Cp,cpuKernelImpl:qA}),L8={kernelName:pf,backendName:"webgl",kernelFunc:D8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B8=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,$8=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,G8=mn({opSnippet:B8,packedOpSnippet:$8,dtype:"int32"}),U8={kernelName:mf,backendName:"webgl",kernelFunc:G8};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V8{constructor(e){this.variableNames=["A"];const f=An(),[x,S]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${S}.0, ${x}.0);

        vec4 values = ${f.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z8{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const f=An(),[x,S]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${S}.0, ${x}.0);
            vec4 values = ${f.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${f.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k8={kernelName:Hl,backendName:"webgl",kernelFunc:W8};let Or,Pl=St().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function W8(c){const{inputs:e,backend:f,attrs:x}=c;let{pixels:S}=e;const{numChannels:C}=x,o=typeof HTMLVideoElement<"u"&&S instanceof HTMLVideoElement,y=typeof HTMLImageElement<"u"&&S instanceof HTMLImageElement,[t,s]=o?[S.videoWidth,S.videoHeight]:[S.width,S.height],l=[s,t],a=[s,t,C];if(y||o){const h=St().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Or==null||h!==Pl)&&(Pl=h,Or=document.createElement("canvas").getContext("2d",{willReadFrequently:Pl})),Or.canvas.width=t,Or.canvas.height=s,Or.drawImage(S,0,0,t,s),S=Or.canvas}const r=f.makeTensorInfo(l,"int32");f.texData.get(r.dataId).usage=Yn.PIXELS,f.gpgpu.uploadPixelDataToTexture(f.getTexture(r.dataId),S);const i=St().getBool("WEBGL_PACK")?new z8(a):new V8(a),n=f.runWebGLProgram(i,[r],"int32");return f.disposeData(r.dataId),n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X8(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C,bias:o,preluActivationWeights:y}=e,{strides:t,pad:s,dataFormat:l,dilations:a,dimRoundingMode:r,activation:i,leakyreluAlpha:n}=x,h=Mi(l),d=dn(S.shape,C.shape,t,a,s,r,!1,h);let u;const p=[],m=o!=null,v=y!=null,g=i==="leakyrelu",T=()=>{const b=[S,C],E=(A,R)=>{if(R==="NCHW"&&A.shape.length===1&&A.shape[0]!==1){const I=Yt({inputs:{x:A},backend:f,attrs:{shape:[A.shape[0],1,1]}});return p.push(I),I}return A};if(m&&b.push(E(o,l)),v&&b.push(E(y,l)),g){const A=f.makeTensorInfo([],"float32",na(n,"float32"));b.push(A),p.push(A)}return b};if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))u=x0({x:S,filter:C,convInfo:d,backend:f,bias:o,activation:i,preluActivationWeights:y,leakyreluAlpha:n});else if(d.strideWidth<=2&&h==="channelsLast"&&St().getBool("WEBGL_EXP_CONV")){const b=i?Wa(i,!0):null,E=new g0(d,m,b,v,g),A=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]],R=T();u=f.runWebGLProgram(E,R,"float32",A)}else if(St().getBool("WEBGL_CONV_IM2COL"))u=y0({x:S,filter:C,convInfo:d,backend:f,bias:o,activation:i,preluActivationWeights:y,leakyreluAlpha:n});else{const b=i?Wa(i,!1):null,E=new v0(d,m,b,v,g),A=T();u=f.runWebGLProgram(E,A,"float32")}const w=Yt({inputs:{x:u},backend:f,attrs:{shape:d.outShape}});return p.push(u),p.forEach(b=>f.disposeIntermediateTensorInfo(b)),w}const H8={kernelName:Na,backendName:"webgl",kernelFunc:X8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C,bias:o,preluActivationWeights:y}=e,{strides:t,pad:s,dilations:l,dimRoundingMode:a,activation:r,leakyreluAlpha:i}=x,n=[];let h=l;h==null&&(h=[1,1]),it(Dn(t,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${h}'`);const d=dn(S.shape,C.shape,t,h,s,a,!0),u=St().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1,p=r?Wa(r,u):null,m=[S,C],v=o!=null,g=y!=null,T=r==="leakyrelu";if(v&&m.push(o),g&&m.push(y),T){const A=f.makeTensorInfo([],"float32",na(i,"float32"));m.push(A),n.push(A)}let w;u?w=new C0(d,v,p,g,T):w=new S0(d,v,p,g,T);const b=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]],E=f.runWebGLProgram(w,m,"float32",b);return n.forEach(A=>f.disposeIntermediateTensorInfo(A)),E}const K8={kernelName:Ma,backendName:"webgl",kernelFunc:Y8};class j8{constructor(e,f,x,S){this.sliceDim=e,this.strides=f,this.paramsShape=S,this.variableNames=["x","indices"],this.outputShape=x;const C=De(x.length);let o=`
    int index;`;for(let y=0;y<this.sliceDim;y++)o+=`
          index = round(getIndices(coords[0], ${y}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[y]};
          flattenIndex += index * ${this.strides[y]};`;this.userCode=`
         void main() {
          ${C} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z8(c){const{inputs:e,backend:f}=c,{params:x,indices:S}=e,C=S.shape,o=C[C.length-1],y=bt(x.shape),[t,s,l,a]=Hc(x,S),r=Yt({inputs:{x:S},backend:f,attrs:{shape:[s,o]}}),i=Yt({inputs:{x},backend:f,attrs:{shape:[bt(x.shape)/l,l]}});if(f.shouldExecuteOnCPU([x,S])||x.dtype==="string"){const u=f.readSync(S.dataId),p=f.bufferSync(x),m=_A(u,p,x.dtype,s,o,l,a,x.shape,y);return f.makeTensorInfo(t,x.dtype,m.values)}const n=new j8(o,a,[s,l],x.shape),h=f.runWebGLProgram(n,[i,r],i.dtype),d=Yt({inputs:{x:h},backend:f,attrs:{shape:t}});return f.disposeIntermediateTensorInfo(r),f.disposeIntermediateTensorInfo(i),f.disposeIntermediateTensorInfo(h),d}const Q8={kernelName:gu,backendName:"webgl",kernelFunc:Z8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J8{constructor(e,f){this.variableNames=["A","indices"],this.outputShape=f,this.rank=f.length;const x=De(this.rank),S=q8(e);this.userCode=`
      void main() {
        ${x} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${S}));
      }
    `}}function q8(c,e){const f=["resRC.x","resRC.y","resRC.z","resRC.w"],x=[];for(let S=0;S<c.length;S++)S===2?x.push("index"):x.push(`${f[S]}`);return x.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b0(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,indices:C}=e,{axis:o,batchDims:y}=x,t=Qe(o,S.shape)[0];if(St().get("DEBUG")){const p=f.readSync(C.dataId),m=S.shape[t];for(let v=0;v<p.length;++v){const g=p[v];it(g<=m-1&&g>=0,()=>`GatherV2: the index value ${g} is not in [0, ${m-1}]`)}}const s=cd(S,C,t,y),l=bt(C.shape),a=[],r=Yt({inputs:{x:S},backend:f,attrs:{shape:[s.batchSize,s.outerSize,s.dimSize,s.sliceSize]}}),i=Yt({inputs:{x:C},backend:f,attrs:{shape:[s.batchSize,l/s.batchSize]}});a.push(r),a.push(i);const n=[s.batchSize,s.outerSize,l/s.batchSize,s.sliceSize];if(f.shouldExecuteOnCPU([S,C])||S.dtype==="string"){const p=f.bufferSync(i),m=f.bufferSync(r),v=tR(m,p,n);return a.forEach(g=>f.disposeIntermediateTensorInfo(g)),f.makeTensorInfo(s.outputShape,v.dtype,v.values)}const h=new J8(r.shape,n),d=f.runWebGLProgram(h,[r,i],r.dtype);a.push(d);const u=Yt({inputs:{x:d},backend:f,attrs:{shape:s.outputShape}});return a.forEach(p=>f.disposeIntermediateTensorInfo(p)),u}const _8={kernelName:vf,backendName:"webgl",kernelFunc:b0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tF="return float(a > b);",eF=`
  return vec4(greaterThan(a, b));
`,nF=mn({opSnippet:tF,packedOpSnippet:eF,cpuKernelImpl:eR,dtype:"bool"}),sF={kernelName:gf,backendName:"webgl",kernelFunc:nF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iF="return float(a >= b);",rF=`
  return vec4(greaterThanEqual(a, b));
`,aF=mn({opSnippet:iF,packedOpSnippet:rF,dtype:"bool",cpuKernelImpl:nR}),oF={kernelName:xf,backendName:"webgl",kernelFunc:aF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uF(c){const{inputs:e,backend:f}=c,{input:x}=e;return w0(x,!0,f)}const lF={kernelName:gm,backendName:"webgl",kernelFunc:uF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hF="return float(!isnan(x) && !isinf(x));",fF=be({opSnippet:hF,dtype:"bool"}),cF={kernelName:yf,backendName:"webgl",kernelFunc:fF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dF="return float(isinf(x));",pF=be({opSnippet:dF,dtype:"bool"}),mF={kernelName:Tf,backendName:"webgl",kernelFunc:pF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vF="return float(isnan(x));",gF=be({opSnippet:vF,dtype:"bool"}),xF={kernelName:Sf,backendName:"webgl",kernelFunc:gF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yF="return float(a < b);",TF=`
  return vec4(lessThan(a, b));
`,SF=mn({opSnippet:yF,packedOpSnippet:TF,cpuKernelImpl:sR,dtype:"bool"}),CF={kernelName:Cf,backendName:"webgl",kernelFunc:SF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EF="return float(a <= b);",wF=`
  return vec4(lessThanEqual(a, b));
`,bF=mn({opSnippet:EF,packedOpSnippet:wF,cpuKernelImpl:iR,dtype:"bool"}),AF={kernelName:Ef,backendName:"webgl",kernelFunc:bF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RF(c){const{backend:e,attrs:f}=c,{start:x,stop:S,num:C}=f,o=rR(x,S,C);return e.makeTensorInfo([o.length],"float32",o)}const IF={kernelName:Tu,backendName:"webgl",kernelFunc:RF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PF=fa+`
  return x < 0.0 ? 0./0. : log(x);
`,FF=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,NF=be({opSnippet:PF,packedOpSnippet:FF,cpuKernelImpl:aR}),MF={kernelName:wf,backendName:"webgl",kernelFunc:NF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OF=fa+`
  return log(1.0 + x);
`,DF=be({opSnippet:OF}),LF={kernelName:bf,backendName:"webgl",kernelFunc:DF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BF="return float(a >= 1.0 && b >= 1.0);",$F=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,GF=mn({opSnippet:BF,packedOpSnippet:$F,dtype:"bool"}),UF={kernelName:Af,backendName:"webgl",kernelFunc:GF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VF="return float(!(x >= 1.0));",zF=be({opSnippet:VF}),kF={kernelName:Rf,backendName:"webgl",kernelFunc:zF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WF="return float(a >= 1.0 || b >= 1.0);",XF=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,HF=mn({opSnippet:WF,packedOpSnippet:XF,dtype:"bool"}),YF={kernelName:If,backendName:"webgl",kernelFunc:HF};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KF{constructor(e,f,x,S,C){this.variableNames=["x"],this.outputShape=[];const o=f,y=e[3]-1;this.outputShape=e;let t;const s=`float(${x}) + float(${S}) * sum`;C===.5?t=`inversesqrt(${s})`:C===1?t=`1.0/(${s})`:t=`exp(log(${s}) * float(-${C}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${y}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${t};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jF{constructor(e,f,x,S,C){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=f,y=e[3]-1;this.outputShape=e;let t;const s=`float(${x}) + float(${S}) * sum`;C===.5?t=`inversesqrt(${s})`:C===1?t=`1.0/(${s})`:t=`exp(log(${s}) * float(-${C}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${y}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${t};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZF=c=>{const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{depthRadius:C,bias:o,alpha:y,beta:t}=x,s=St().getBool("WEBGL_PACK_NORMALIZATION")?new jF(S.shape,C,o,y,t):new KF(S.shape,C,o,y,t);return f.runWebGLProgram(s,[S],S.dtype)},QF={kernelName:Su,backendName:"webgl",kernelFunc:ZF};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JF{constructor(e,f,x,S,C){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=f,this.bias=x,this.alpha=S,this.beta=C,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${f})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${f} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${S}) * norm + float(${x});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${S})
                * float(${C})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${C});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qF=c=>{const{inputs:e,backend:f,attrs:x}=c,{x:S,y:C,dy:o}=e,{depthRadius:y,bias:t,alpha:s,beta:l}=x,a=new JF(S.shape,y,t,s,l);return f.runWebGLProgram(a,[S,C,o],S.dtype)},_F={kernelName:Pf,backendName:"webgl",kernelFunc:qF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t7(c,e,f,x){const S=bt(e),o=bt(c.shape)/S,y=Yt({inputs:{x:c},attrs:{shape:[o,S]},backend:x}),t=wr(y,c.dtype,"max",x),s=Yt({inputs:{x:t},attrs:{shape:f},backend:x});return x.disposeIntermediateTensorInfo(y),x.disposeIntermediateTensorInfo(t),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{reductionIndices:C,keepDims:o}=x,y=S.shape.length,t=Qe(C,S.shape);let s=t;const l=Ln(s,y),a=l!=null,r=f.shouldExecuteOnCPU([S]);let i=S;if(a){if(r){const m=f.texData.get(i.dataId).values,v=new Array(y);for(let w=0;w<v.length;w++)v[w]=S.shape[l[w]];const g=xd(m,S.shape,S.dtype,l,v);i=f.makeTensorInfo(v,S.dtype);const T=f.texData.get(i.dataId);T.values=g}else i=dl(S,l,f);s=pn(s.length,y)}an("max",s,y);const[n,h]=yn(i.shape,s);let d=n;o&&(d=rn(n,t));let u;if(r){const m=f.texData.get(i.dataId).values,v=oR(m,bt(h),d,S.dtype);u=f.makeTensorInfo(d,S.dtype);const g=f.texData.get(u.dataId);g.values=v}else u=t7(i,h,d,f);return a&&f.disposeIntermediateTensorInfo(i),u}const e7={kernelName:Cu,backendName:"webgl",kernelFunc:A0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n7=yd+`
  return max(a, b);
`,s7=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Er+`
  return result;
`,i7=mn({opSnippet:n7,packedOpSnippet:s7,cpuKernelImpl:uR}),r7={kernelName:Ff,backendName:"webgl",kernelFunc:i7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e;so(S,"maxPool");const{filterSize:C,strides:o,pad:y,dimRoundingMode:t}=x,s=1;it(Dn(o,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const l=hs(S.shape,C,o,s,y,t);if(l.filterWidth===1&&l.filterHeight===1&&je(l.inShape,l.outShape))return zn({inputs:{x:S},backend:f});const a=new Xa(l,"max",!1);return f.runWebGLProgram(a,[S],S.dtype)}const o7={kernelName:Eu,backendName:"webgl",kernelFunc:a7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u7(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{filterSize:C,strides:o,pad:y,dataFormat:t,dimRoundingMode:s}=x,l=[1,1,1],a=_s(S.shape,C,o,l,y,s,t),r=new Sd(a,"max",!1);return f.runWebGLProgram(r,[S],S.dtype)}const l7={kernelName:Nf,backendName:"webgl",kernelFunc:u7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h7{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const f=e.strideHeight,x=e.strideWidth,S=e.dilationHeight,C=e.effectiveFilterHeight,o=e.effectiveFilterWidth,y=C-1-e.padInfo.top,t=o-1-e.padInfo.left,s=C*o-1;this.userCode=`
      const ivec2 pads = ivec2(${y}, ${t});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${C};
          wR += ${S}) {
          float dyR = float(dyRCorner + wR) / ${f}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${x}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${s} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class f7{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const f=e.strideDepth,x=e.strideHeight,S=e.strideWidth,C=e.dilationDepth,o=e.dilationHeight,y=e.dilationWidth,t=e.effectiveFilterDepth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,a=t-1-e.padInfo.front,r=s-1-e.padInfo.top,i=l-1-e.padInfo.left,n=t*s*l-1;this.userCode=`
      const ivec3 pads = ivec3(${a}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${t};
           wD += ${C}) {
          float dyD = float(dyDCorner + wD) / ${f}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${s};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${x}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${l};
                wC += ${y}) {
              float dyC = float(dyCCorner + wC) / ${S}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${n} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${s} * ${l} +
                  wR * ${l} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,input:C}=e,o=C,{filterSize:y,strides:t,pad:s,dimRoundingMode:l}=x,a=[1,1,1],r=_s(o.shape,y,t,a,s,l),i=new Sd(r,"max",!0),n=f.runWebGLProgram(i,[o],o.dtype),h=new f7(r),d=f.runWebGLProgram(h,[S,n],o.dtype);return f.disposeIntermediateTensorInfo(n),d}const d7={kernelName:Tm,backendName:"webgl",kernelFunc:c7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p7(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,input:C,output:o}=e,y=C;so([C,o],"maxPoolGrad");const{filterSize:t,strides:s,pad:l,dimRoundingMode:a}=x,r=hs(y.shape,t,s,1,l,a),i=!0,n=new Xa(r,"max",i),h=f.runWebGLProgram(n,[y],y.dtype),d=new h7(r),u=f.runWebGLProgram(d,[S,h],y.dtype);return f.disposeIntermediateTensorInfo(h),u}const m7={kernelName:ym,backendName:"webgl",kernelFunc:p7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v7(c,e,f,x){let S=new Xa(f,"max",!1);const C=x.runWebGLProgram(S,[c],"float32");S=new Xa(f,"max",!0,!0,e);const o=x.runWebGLProgram(S,[c],"float32");return[C,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g7={kernelName:Mf,backendName:"webgl",kernelFunc:({inputs:c,attrs:e,backend:f})=>{const{x}=c,{filterSize:S,strides:C,pad:o,includeBatchInIndex:y}=e,t=f;it(x.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${x.shape.length}.`);const s=[1,1];it(Dn(C,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${C} and dilations '${s}'`);const l=hs(x.shape,S,C,s,o),[a,r]=v7(x,y,l,t);return[a,r]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x7(c,e,f,x){const S=bt(e),o=bt(c.shape)/S,y=Yt({inputs:{x:c},attrs:{shape:[o,S]},backend:x}),t=wr(y,"float32","mean",x),s=Yt({inputs:{x:t},attrs:{shape:f},backend:x});return x.disposeIntermediateTensorInfo(y),x.disposeIntermediateTensorInfo(t),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y7={kernelName:wu,backendName:"webgl",kernelFunc:({inputs:c,attrs:e,backend:f})=>{const{x}=c,{keepDims:S,axis:C}=e,o=f,y=x.shape.length,t=Qe(C,x.shape);let s=t;const l=Ln(s,y),a=l!=null,r=o.shouldExecuteOnCPU([x]),i=[];let n=x;if(a){if(r){const v=o.texData.get(n.dataId).values,g=new Array(y);for(let b=0;b<g.length;b++)g[b]=x.shape[l[b]];const T=xd(v,x.shape,x.dtype,l,g);n=o.makeTensorInfo(g,x.dtype);const w=o.texData.get(n.dataId);w.values=T}else n=dl(x,l,o);i.push(n),s=pn(s.length,y)}an("sum",s,y);const[h,d]=yn(n.shape,s);let u=h;S&&(u=rn(h,t));const p=x7(n,d,u,o);for(const m of i)o.disposeIntermediateTensorInfo(m);return p}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T7(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C,keepDims:o}=x,y=S.shape.length,t=Qe(C,S.shape);let s=t;const l=Ln(s,y);let a=S;l!=null&&(a=bn({inputs:{x:S},backend:f,attrs:{perm:l}}),s=pn(s.length,S.shape.length)),an("min",s,y);const[r,i]=yn(a.shape,s),n=bt(i),h=Yt({inputs:{x:a},backend:f,attrs:{shape:[-1,n]}}),d=wr(h,h.dtype,"min",f);let u;if(o){const p=rn(r,t);u=Yt({inputs:{x:d},backend:f,attrs:{shape:p}})}else u=Yt({inputs:{x:d},backend:f,attrs:{shape:r}});return f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(d),l!=null&&f.disposeIntermediateTensorInfo(a),u}const S7={kernelName:bu,backendName:"webgl",kernelFunc:T7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C7=yd+`
  return min(a, b);
`,E7=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Er+`
  return result;
`,w7=mn({opSnippet:C7,packedOpSnippet:E7,cpuKernelImpl:lR}),b7={kernelName:Of,backendName:"webgl",kernelFunc:w7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A7{constructor(e,f,x){this.variableNames=["x"],this.outputShape=f.map((l,a)=>l[0]+e[a]+l[1]);const S=e.length,C=De(S),o=f.map(l=>l[0]).join(","),y=f.map((l,a)=>l[0]+e[a]).join(","),t=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,S),s=x==="reflect"?0:1;if(S===1){this.userCode=`
        int start = ${o};
        int end = ${y};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${s};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${s};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${C} start = ${C}(${o});
      ${C} end = ${C}(${y});

      void main() {
        ${C} outC = getOutputCoords();
        for (int i = 0; i < ${S}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${s};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${s};
          }
        }
        ${C} coords = outC - start;
        setOutput(getX(${t}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R7{constructor(e,f,x){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=f.map((n,h)=>n[0]+e[h]+n[1]);const S=e.length,C=De(S),o=f.map(n=>n[0]).join(","),y=f.map((n,h)=>n[0]+e[h]).join(","),t=wn("rc",S),s=wn("source",S),l=`${t[S-1]} < ${this.outputShape[S-1]}`,a=S===1?"source":`vec2(${s.slice(-2).join()})`,r=x==="reflect"?0:1;let i="";if(S===1){const n=`
        ${C} source = rc;
        if (source < start) {
          source = start * 2 - source - ${r};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${r};
        }
        source -= start;
      `;i=`
        ${C} rc = outputLoc;
        ${n}
        result[0] = getChannel(getX(${s.join()}), ${a});
        ${t[S-1]} += 1;
        if(${l}) {
          ${n}
          result[1] = getChannel(getX(${s.join()}), ${a});
        }
      `}else{const n=`
        ${C} source = rc;
        ${C} lt = ${C}(lessThan(source, start));
        ${C} gte = ${C}(greaterThanEqual(source, end));
        ${C} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${r}) +
                gte * ((end - 1) * 2 - source + ${r});
        source -= start;
      `;i=`
        ${C} rc = outputLoc;
        ${n}
        result[0] = getChannel(getX(${s.join()}), ${a});
        ${t[S-1]} += 1;
        if(${l}) {
          ${n}
          result[1] = getChannel(getX(${s.join()}), ${a});
        }
        rc = outputLoc;
        ${t[S-2]} += 1;
        if(${t[S-2]} < ${this.outputShape[S-2]}) {
          ${n}
          result[2] = getChannel(getX(${s.join()}), ${a});
          ${t[S-1]} += 1;
          if(${l}) {
            ${n}
            result[3] = getChannel(getX(${s.join()}), ${a});
          }
        }
      `}this.userCode=`
      const ${C} start = ${C}(${o});
      const ${C} end = ${C}(${y});

      void main() {
        ${C} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${i}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I7=({inputs:c,backend:e,attrs:f})=>{const{x}=c,{paddings:S,mode:C}=f,o=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new R7(x.shape,S,C):new A7(x.shape,S,C);return e.runWebGLProgram(o,[x],x.dtype)},P7={kernelName:Au,backendName:"webgl",kernelFunc:I7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F7=`if (b == 0.0) return NAN;
  return mod(a, b);`,N7=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Er+`
  return result;
`,M7=mn({opSnippet:F7,packedOpSnippet:N7}),O7={kernelName:Df,backendName:"webgl",kernelFunc:M7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D7{constructor(e,f,x){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,x],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${f-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${f-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L7=`
if (a == b) {
  return 1.0;
};
return a / b;`,B7=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,R0=mn({opSnippet:L7,packedOpSnippet:B7,checkOutOfBounds:!0}),$7={kernelName:rf,backendName:"webgl",kernelFunc:R0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ep="return a - b;",I0=mn({opSnippet:Ep,packedOpSnippet:Ep,supportsComplex:!0,cpuKernelImpl:FR}),G7={kernelName:pc,backendName:"webgl",kernelFunc:I0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0(c){const{inputs:e,backend:f,attrs:x}=c,{logits:S}=e,{dim:C}=x,o=Qe([C],S.shape),y=A0({inputs:{x:S},backend:f,attrs:{reductionIndices:o,keepDims:!1}}),t=rn(y.shape,o),s=Yt({inputs:{x:y},backend:f,attrs:{shape:t}}),l=I0({inputs:{a:S,b:s},backend:f}),a=E0({inputs:{x:l},backend:f}),r=pl({inputs:{x:a},backend:f,attrs:{axis:o,keepDims:!1}}),i=Yt({inputs:{x:r},backend:f,attrs:{shape:t}}),n=R0({inputs:{a,b:i},backend:f});return f.disposeIntermediateTensorInfo(y),f.disposeIntermediateTensorInfo(s),f.disposeIntermediateTensorInfo(l),f.disposeIntermediateTensorInfo(a),f.disposeIntermediateTensorInfo(r),f.disposeIntermediateTensorInfo(i),n}const U7={kernelName:ku,backendName:"webgl",kernelFunc:P0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7(c){const{inputs:e,backend:f,attrs:x}=c,{logits:S}=e,{numSamples:C,seed:o,normalized:y}=x,t=y?S:P0({inputs:{logits:S},backend:f,attrs:{dim:S.shape.length-1}}),s=t.shape[0],l=t.shape[1],a=new D7(s,l,C),r=[[o]],i=f.runWebGLProgram(a,[t],"int32",r);return y||f.disposeIntermediateTensorInfo(t),i}const z7={kernelName:Ru,backendName:"webgl",kernelFunc:V7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k7=cs+`
  return -x;
`,W7=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function X7(c){const{inputs:e,backend:f}=c,{x}=e;if(f.shouldExecuteOnCPU([x])){const C=f.texData.get(x.dataId),[o,y]=fR(C.values,x.shape,x.dtype);return f.makeTensorInfo(y,x.dtype,o)}let S;return St().getBool("WEBGL_PACK_UNARY_OPERATIONS")?S=new xi(x.shape,W7):S=new Ps(x.shape,k7),f.runWebGLProgram(S,[x],x.dtype)}const H7={kernelName:Bf,backendName:"webgl",kernelFunc:X7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y7=Zv;function K7(c){xs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:f,attrs:x}=c,{boxes:S,scores:C}=e,{maxOutputSize:o,iouThreshold:y,scoreThreshold:t}=x,s=f.readSync(S.dataId),l=f.readSync(C.dataId),{selectedIndices:a}=Y7(s,l,o,y,t);return f.makeTensorInfo([a.length],"int32",new Int32Array(a))}const j7={kernelName:Iu,backendName:"webgl",kernelFunc:K7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z7=Qv;function Q7(c){xs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:f,attrs:x}=c,{boxes:S,scores:C}=e,{maxOutputSize:o,iouThreshold:y,scoreThreshold:t,padToMaxOutputSize:s}=x,l=f.readSync(S.dataId),a=f.readSync(C.dataId),{selectedIndices:r,validOutputs:i}=Z7(l,a,o,y,t,s);return[f.makeTensorInfo([r.length],"int32",new Int32Array(r)),f.makeTensorInfo([],"int32",new Int32Array([i]))]}const J7={kernelName:Pu,backendName:"webgl",kernelFunc:Q7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q7=Jv;function _7(c){xs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:f,attrs:x}=c,{boxes:S,scores:C}=e,{maxOutputSize:o,iouThreshold:y,scoreThreshold:t,softNmsSigma:s}=x,l=f.readSync(S.dataId),a=f.readSync(C.dataId),r=o,i=y,n=t,h=s,{selectedIndices:d,selectedScores:u}=q7(l,a,r,i,n,h);return[f.makeTensorInfo([d.length],"int32",new Int32Array(d)),f.makeTensorInfo([u.length],"float32",new Float32Array(u))]}const tN={kernelName:Fu,backendName:"webgl",kernelFunc:_7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eN{constructor(e,f,x,S){this.variableNames=["indices"],this.outputShape=[e,f],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${S}), float(${x}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nN=c=>{const{inputs:e,backend:f,attrs:x}=c,{indices:S}=e,{dtype:C,depth:o,onValue:y,offValue:t}=x,s=bt(S.shape),l=new eN(s,o,y,t),a=Yt({inputs:{x:S},backend:f,attrs:{shape:[s]}}),r=f.runWebGLProgram(l,[a],C);f.disposeIntermediateTensorInfo(a);const i=[...S.shape,o],n=Yt({inputs:{x:r},backend:f,attrs:{shape:i}});return f.disposeIntermediateTensorInfo(r),n},sN={kernelName:Nu,backendName:"webgl",kernelFunc:nN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ko(c){const{inputs:e,backend:f}=c,{x}=e;if(x.dtype==="complex64"){const S=ro({inputs:{input:x},backend:f}),C=ko({inputs:{x:S},backend:f}),o=ml({inputs:{input:x},backend:f}),y=ko({inputs:{x:o},backend:f}),t=Oi({inputs:{real:C,imag:y},backend:f});return f.disposeIntermediateTensorInfo(S),f.disposeIntermediateTensorInfo(C),f.disposeIntermediateTensorInfo(o),f.disposeIntermediateTensorInfo(y),t}else return ao({attrs:{shape:x.shape,dtype:x.dtype,value:x.dtype==="string"?"":0},backend:f})}const iN={kernelName:yc,backendName:"webgl",kernelFunc:ko};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F0(c){const{inputs:e,backend:f}=c,{x}=e;if(x.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(x.dtype==="complex64"){const S=ro({inputs:{input:x},backend:f}),C=F0({inputs:{x:S},backend:f}),o=ml({inputs:{input:x},backend:f}),y=ko({inputs:{x:o},backend:f}),t=Oi({inputs:{real:C,imag:y},backend:f});return f.disposeIntermediateTensorInfo(S),f.disposeIntermediateTensorInfo(C),f.disposeIntermediateTensorInfo(o),f.disposeIntermediateTensorInfo(y),t}else return ao({attrs:{shape:x.shape,dtype:x.dtype,value:1},backend:f})}const rN={kernelName:Gf,backendName:"webgl",kernelFunc:F0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aN(c){const{inputs:e,backend:f,attrs:x}=c,{axis:S}=x;if(e.length===1)return ph({inputs:{input:e[0]},backend:f,attrs:{dim:S}});const C=e[0].shape,o=e[0].dtype;e.forEach(l=>{kn(C,l.shape,"All tensors passed to stack must have matching shapes"),it(o===l.dtype,()=>"All tensors passed to stack must have matching dtypes")});const y=[],t=e.map(l=>{const a=ph({inputs:{input:l},backend:f,attrs:{dim:S}});return y.push(a),a}),s=m0({inputs:t,backend:f,attrs:{axis:S}});return y.forEach(l=>f.disposeIntermediateTensorInfo(l)),s}const oN={kernelName:Uf,backendName:"webgl",kernelFunc:aN};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uN{constructor(e,f,x){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=f.map((s,l)=>s[0]+e[l]+s[1]);const S=e.length,C=De(S),o=f.map(s=>s[0]).join(","),y=f.map((s,l)=>s[0]+e[l]).join(","),t=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,S);if(S===1){this.userCode=`
        int start = ${o};
        int end = ${y};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${C} start = ${C}(${o});
      ${C} end = ${C}(${y});

      void main() {
        ${C} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${C} coords = outC - start;
          setOutput(getX(${t}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lN{constructor(e,f,x){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=f.map((h,d)=>h[0]+e[d]+h[1]);const S=e.length,C=De(S),o=f.map(h=>h[0]).join(","),y=f.map((h,d)=>h[0]+e[d]).join(","),t=wn("rc",S),s=wn("source",S),l=`${t[S-1]} < ${this.outputShape[S-1]}`,a=S===1?"source":`vec2(${s.slice(-2).join()})`,r=[`${C} rc = outputLoc;`,`${t[S-1]} += 1;
       if(${l}) {
      `,S===1?"":`}
       rc = outputLoc;
       ${t[S-2]} += 1;
       if(${t[S-2]} < ${this.outputShape[S-2]}) {`,S===1?"":`  ${t[S-1]} += 1;
         if(${l}) {`],i=S===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let n="";for(let h=0,d=S===1?2:4;h<d;h++)n+=`
        ${r[h]}
        if (${i}) {
          result[${h}] = float(value);
        } else {
          ${C} source = rc - start;
          result[${h}] = getChannel(getX(${s.join()}), ${a});
        }
      `;n+=S===1?"} ":"}}",this.userCode=`
      const ${C} start = ${C}(${o});
      const ${C} end = ${C}(${y});

      void main() {
        ${C} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${n}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N0=c=>{const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{paddings:C,constantValue:o}=x;if(bt(S.shape)===0){const s=C.map((l,a)=>l[0]+S.shape[a]+l[1]);return ao({backend:f,attrs:{shape:s,value:o,dtype:S.dtype}})}const y=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lN(S.shape,C,o):new uN(S.shape,C,o),t=[[o]];return f.runWebGLProgram(y,[S],S.dtype,t)},hN={kernelName:Mu,backendName:"webgl",kernelFunc:N0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fN=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,cN=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Er+`
  return result;
`,dN=mn({opSnippet:fN,packedOpSnippet:cN}),pN={kernelName:Vf,backendName:"webgl",kernelFunc:dN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mN(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C,keepDims:o}=x,y=S.shape.length,t=[],s=Qe(C,S.shape);let l=s;const a=Ln(l,y);let r=S;a!=null&&(r=bn({inputs:{x:S},backend:f,attrs:{perm:a}}),l=pn(l.length,y),t.push(r)),an("prod",l,y);let i;if(f.shouldExecuteOnCPU([r])){const n=f.texData.get(r.dataId).values,{outVals:h,outShape:d,outDtype:u}=dR(r.shape,r.dtype,n,l);i=f.makeTensorInfo(d,u,h)}else{const[n,h]=yn(r.shape,l),d=bt(h),u=Yt({inputs:{x:r},backend:f,attrs:{shape:[-1,d]}}),p=Sc(S.dtype),m=wr(u,p,"prod",f);i=Yt({inputs:{x:m},backend:f,attrs:{shape:n}}),t.push(u),t.push(m)}if(o){t.push(i);const n=rn(i.shape,s);i=Yt({inputs:{x:i},backend:f,attrs:{shape:n}})}return t.forEach(n=>f.disposeIntermediateTensorInfo(n)),i}const vN={kernelName:Du,backendName:"webgl",kernelFunc:mN};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gN(c){const{inputs:e,backend:f,attrs:x}=c,{paramsNestedSplits:S,paramsDenseValues:C,indices:o}=e,{outputRaggedRank:y}=x,t=S.map(u=>f.readSync(u.dataId)),s=S.map(u=>u.shape),l=f.readSync(C.dataId),a=f.readSync(o.dataId),[r,i,n]=pR(t,s,l,C.shape,C.dtype,a,o.shape,y),h=r.map(u=>f.makeTensorInfo([u.length],"int32",u)),d=f.makeTensorInfo(n,C.dtype,i);return h.concat([d])}const xN={kernelName:Sm,backendName:"webgl",kernelFunc:gN};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yN(c){const{inputs:e,backend:f}=c,{starts:x,limits:S,deltas:C}=e,o=f.readSync(x.dataId),y=f.readSync(S.dataId),t=f.readSync(C.dataId),[s,l]=mR(o,x.shape,x.dtype,y,S.shape,t,C.shape),a=f.makeTensorInfo([s.length],"int32",s),r=f.makeTensorInfo([l.length],x.dtype,l);return[a,r]}const TN={kernelName:Cm,backendName:"webgl",kernelFunc:yN};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SN(c){const{inputs:e,backend:f,attrs:x}=c,{shape:S,values:C,defaultValue:o,rowPartitionTensors:y}=e,{rowPartitionTypes:t}=x,s=f.readSync(S.dataId),l=f.readSync(C.dataId),a=f.readSync(o.dataId),r=y.map(d=>f.readSync(d.dataId)),i=y.map(d=>d.shape),[n,h]=vR(s,S.shape,l,C.shape,C.dtype,a,o.shape,r,i,t);return f.makeTensorInfo(n,C.dtype,h)}const CN={kernelName:Em,backendName:"webgl",kernelFunc:SN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M0=c=>{const{backend:e,attrs:f}=c,{start:x,stop:S,step:C,dtype:o}=f,y=gR(x,S,C,o);return e.makeTensorInfo([y.length],o,y)},EN={kernelName:zf,backendName:"webgl",kernelFunc:M0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wN="return 1.0 / x;",bN=be({opSnippet:wN}),AN={kernelName:kf,backendName:"webgl",kernelFunc:bN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RN=cs+`
  return (x < 0.0) ? 0.0 : x;
`,IN=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,PN=be({opSnippet:RN,packedOpSnippet:IN}),FN={kernelName:Wf,backendName:"webgl",kernelFunc:PN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NN=cs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,MN=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ON=be({opSnippet:NN,packedOpSnippet:MN}),DN={kernelName:Kf,backendName:"webgl",kernelFunc:ON};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LN{constructor(e,f,x,S,C){this.variableNames=["A"],this.outputShape=[];const[o,y,t,s]=e;this.outputShape=[o,f,x,s];const l=[S&&f>1?y-1:y,S&&x>1?t-1:t],a=[S&&f>1?f-1:f,S&&x>1?x-1:x];let r;C?r="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":r="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${l[0]/a[0]},
          ${l[1]/a[1]});
      const vec2 inputShapeRC = vec2(${y}.0, ${t}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${r};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BN{constructor(e,f,x,S,C){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,y,t,s]=e;this.outputShape=[o,f,x,s];const l=[S&&f>1?y-1:y,S&&x>1?t-1:t],a=[S&&f>1?f-1:f,S&&x>1?x-1:x];let r;C?r="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":r="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${l[0]/a[0]},
          ${l[1]/a[1]},
          ${l[1]/a[1]});
      const vec3 inputShapeRC = vec3(${y}.0, ${t}.0,
                                     ${t}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${r};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${s-1};
        bool hasNextRow = coords.z < ${x-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $N(c){const{inputs:e,backend:f,attrs:x}=c,{images:S}=e,{alignCorners:C,halfPixelCenters:o,size:y}=x,[t,s]=y,l=St().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new BN(S.shape,t,s,C,o):new LN(S.shape,t,s,C,o);return f.runWebGLProgram(l,[S],"float32")}const GN={kernelName:Bu,backendName:"webgl",kernelFunc:$N};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UN{constructor(e,f,x){this.variableNames=["dy"],this.outputShape=[],this.outputShape=f;const[,S,C]=f,[,o,y]=e,t=[x&&o>1?S-1:S,x&&y>1?C-1:C],s=[x&&o>1?o-1:o,x&&y>1?y-1:y],l=t[0]/s[0],a=t[1]/s[1],r=1/l,i=1/a,n=Math.ceil(r)*2+2,h=Math.ceil(i)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${l});
        const float widthScale = float(${a});

        const float invHeightScale = float(${r});
        const float invWidthScale = float(${i});

        const int winHeight = int(${n});
        const int winWidth = int(${h});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${y}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${S-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${C-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VN(c){const{inputs:e,backend:f,attrs:x}=c,{images:S,dy:C}=e,{alignCorners:o}=x,y=new UN(C.shape,S.shape,o);return f.runWebGLProgram(y,[C],C.dtype)}const zN={kernelName:Yf,backendName:"webgl",kernelFunc:VN};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kN{constructor(e,f,x,S,C){this.variableNames=["A"],this.outputShape=[];const[o,y,t,s]=e;this.outputShape=[o,f,x,s];const l=[S&&f>1?y-1:y,S&&x>1?t-1:t],a=[S&&f>1?f-1:f,S&&x>1?x-1:x],r=S?"0.5":"0.0";let i;C?i="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":i="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${l[0]/a[0]},
          ${l[1]/a[1]});
      const vec2 inputShapeRC = vec2(${y}.0, ${t}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${i};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WN{constructor(e,f,x,S,C){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,y,t,s]=e;this.outputShape=[o,f,x,s];const l=[S&&f>1?y-1:y,S&&x>1?t-1:t],a=[S&&f>1?f-1:f,S&&x>1?x-1:x],r=S?"0.5":"0.0";let i;C?i="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":i="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${l[0]/a[0]},
          ${l[1]/a[1]},
          ${l[1]/a[1]});
      const vec3 inputShapeRC = vec3(${y}.0, ${t}.0,
                                     ${t}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${i};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${s-1};
        bool hasNextRow = coords.z < ${x-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XN(c){const{inputs:e,backend:f,attrs:x}=c,{images:S}=e,{alignCorners:C,halfPixelCenters:o,size:y}=x,[t,s]=y,l=St().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new WN(S.shape,t,s,C,o):new kN(S.shape,t,s,C,o);return f.runWebGLProgram(l,[S],S.dtype)}const HN={kernelName:Lu,backendName:"webgl",kernelFunc:XN};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YN{constructor(e,f,x){this.variableNames=["dy"],this.outputShape=[],this.outputShape=f;const[,S,C]=f,[,o,y]=e,t=[x&&o>1?S-1:S,x&&y>1?C-1:C],s=[x&&o>1?o-1:o,x&&y>1?y-1:y],l=t[0]/s[0],a=t[1]/s[1],r=1/l,i=1/a,n=Math.ceil(r)*2+2,h=Math.ceil(i)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${l});
        const float widthScale = float(${a});

        const float invHeightScale = float(${r});
        const float invWidthScale = float(${i});

        const int winHeight = int(${n});
        const int winWidth = int(${h});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${y}) {
              continue;
            }

            float sourceFracRow =
              float(${t[0]}) *
                (float(dyR) / float(${s[0]}));

            float sourceFracCol =
                float(${t[1]}) *
                  (float(dyC) / float(${s[1]}));

            int sourceNearestRow = int(min(
                float(int(${S}) - 1),
                ${x} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${C}) - 1),
                ${x} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KN(c){const{inputs:e,backend:f,attrs:x}=c,{images:S,dy:C}=e,{alignCorners:o}=x,y=new YN(C.shape,S.shape,o);return f.runWebGLProgram(y,[C],C.dtype)}const jN={kernelName:Hf,backendName:"webgl",kernelFunc:KN};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZN{constructor(e,f){this.variableNames=["x"];const x=e.length;if(x>4)throw new Error(`WebGL backend: Reverse of rank-${x} tensor is not yet supported`);if(this.outputShape=e,x===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const S=y=>f.indexOf(y)!==-1&&e[y]!==1?`${e[y]} - coords[${y}] - 1`:`coords[${y}]`,C=e.map((y,t)=>S(t)).join(","),o=De(x);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${C}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QN{constructor(e,f){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const x=e.length;if(x>4)throw new Error(`WebGL backend: Reverse of rank-${x} tensor is not yet supported`);this.outputShape=e;const S=wn("rc",x),C=`${S[x-1]} + 1 < ${this.outputShape[x-1]}`,o=`${S[x-2]} + 1 < ${this.outputShape[x-2]}`,y=De(x);x===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${C}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${y} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${t(S.slice())};
          if(${C}){
            result.g = ${s(S.slice())};
          }
          if(${o}) {
            result.b = ${l(S.slice())};
            if(${C}) {
              result.a = ${a(S.slice())};
            }
          }
          setOutput(result);
        }
    `;function t(n){return r(n)}function s(n){return n[x-1]="("+n[x-1]+" + 1)",r(n)}function l(n){return n[x-2]="("+n[x-2]+" + 1)",r(n)}function a(n){return n[x-1]="("+n[x-1]+" + 1)",n[x-2]="("+n[x-2]+" + 1)",r(n)}function r(n){const h=e.map((p,m)=>i(m,n)),d=h.join(","),u=h.slice(-2).join(",");return`getChannel(getX(${d}), vec2(${u}))`}function i(n,h){return f.indexOf(n)!==-1&&e[n]!==1?`${e[n]} - ${h[n]} - 1`:`${h[n]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JN(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{dims:C}=x,o=S.shape.length,y=Qe(C,S.shape);if(o===0)return zn({inputs:{x:S},backend:f});const t=St().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new QN(S.shape,y):new ZN(S.shape,y);return f.runWebGLProgram(t,[S],S.dtype)}const qN={kernelName:$u,backendName:"webgl",kernelFunc:JN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _N{constructor(e,f){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const x=e[1],S=e[2];this.outputShape=e;let C="";typeof f=="number"?C=`float outputValue = ${f.toFixed(2)};`:C=`
        vec3 fill = vec3(${f.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${C}
          if(coordX >= 0 && coordX < ${S} && coordY >= 0 && coordY < ${x}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tM={kernelName:Zu,backendName:"webgl",kernelFunc:({inputs:c,attrs:e,backend:f})=>{const{image:x}=c,{radians:S,fillValue:C,center:o}=e,y=f,t=new _N(x.shape,C),[s,l]=Jc(o,x.shape[1],x.shape[2]),a=[[s,l,Math.sin(S),Math.cos(S)]];return y.runWebGLProgram(t,[x],x.dtype,a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eM=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,nM=be({opSnippet:eM}),sM={kernelName:jf,backendName:"webgl",kernelFunc:nM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iM="return inversesqrt(x);",rM=be({opSnippet:iM,cpuKernelImpl:xR}),aM={kernelName:Zf,backendName:"webgl",kernelFunc:rM};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cd{constructor(e,f,x,S,C,o,y=!0,t=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=De(C.length),l=De(o.length);let a="";x===1?a="i":x===2&&(a="i, j");const r=`getIndices(${a})`;let i="";S===1?i="i":S===2&&(i="i, coords[1]");const n=`getUpdates(${i})`;let h="";t&&(h="coords[0], coords[1]");const d=`getDefaultValue(${h})`,u=f>1?"strides[j]":"strides";this.userCode=`
        ${s} strides = ${s}(${C});

        void main() {
          ${l} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${f}; j++) {
              int index = round(${r});
              flattenedIndex += index * ${u};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${n};
              found = true;
            }
          }
          setOutput(mix(${d}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oM{constructor(e,f,x,S,C,o,y=!0,t=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const s=De(C.length),l=De(o.length);let a="";x===1?a="i":x===2&&(a="i, j");const r=`getIndices(${a})`;let i="";S===1?i="i":S===2&&(i="i, coords[1]");const n=`getUpdates(${i})`;let h="";t&&(h="coords[0], coords[1]");const d=`getDefaultValue(${h})`,u=f>1?"strides[j]":"strides",p=f>1?"strides[j + 1]":"strides";this.userCode=`
        ${s} strides = ${s}(${C});

        void main() {
          ${l} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${f}; j+=2) {
              ivec4 index = round(${r});
              flattenedIndex += index.xz * ${u};
              if (j + 1 < ${f}) {
                flattenedIndex += index.yw * ${p};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${n};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${d}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uM(c){const{inputs:e,backend:f,attrs:x}=c,{indices:S,updates:C}=e,{shape:o}=x,{sliceRank:y,numUpdates:t,sliceSize:s,strides:l,outputSize:a}=xr(C,S,o),r=[a/s,s];if(a===0)return f.makeTensorInfo(o,S.dtype);const i=Yt({inputs:{x:S},backend:f,attrs:{shape:[t,y]}}),n=Yt({inputs:{x:C},backend:f,attrs:{shape:[t,s]}}),h=f.makeTensorInfo([],"float32",new Float32Array([0]));let d;St().getBool("WEBGL_PACK")?d=new oM(t,y,i.shape.length,n.shape.length,l,r):d=new Cd(t,y,i.shape.length,n.shape.length,l,r);const u=f.runWebGLProgram(d,[n,i,h],n.dtype),p=Yt({inputs:{x:u},backend:f,attrs:{shape:o}});return f.disposeIntermediateTensorInfo(i),f.disposeIntermediateTensorInfo(n),f.disposeIntermediateTensorInfo(u),f.disposeIntermediateTensorInfo(h),p}const lM={kernelName:Gu,backendName:"webgl",kernelFunc:uM};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hM{constructor(e,f,x,S){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,x];const C="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(f+1))}; ++i) { if (left >= right) break;`,y=St().getNumber("WEBGL_VERSION")===2?C:o,t=S==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${y}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${t} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fM(c){const{inputs:e,backend:f,attrs:x}=c,{sortedSequence:S,values:C}=e,{side:o}=x,y=new hM(S.shape[0],S.shape[1],C.shape[1],o),t=[[S.shape[1]]];return f.runWebGLProgram(y,[S,C],"int32",t)}const cM={kernelName:Vu,backendName:"webgl",kernelFunc:fM};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dM{constructor(e,f,x){this.variableNames=["c","a","b"],this.outputShape=f;let S,C;if(x>4)throw Error(`Where for rank ${x} is not yet supported`);if(x===1)C="resRC",S="resRC";else{const y=["resRC.x","resRC.y","resRC.z","resRC.w"],t=[],s=[];for(let l=0;l<f.length;l++)s.push(`${y[l]}`),l<e&&t.push(`${y[l]}`);S=t.join(),C=s.join()}const o=De(x);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${S});
        if (cVal >= 1.0) {
          setOutput(getA(${C}));
        } else {
          setOutput(getB(${C}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pM(c){const{inputs:e,backend:f}=c,{condition:x,t:S,e:C}=e,o=new dM(x.shape.length,S.shape,S.shape.length);return f.runWebGLProgram(o,[x,S,C],Ms(S.dtype,C.dtype))}const mM={kernelName:Qf,backendName:"webgl",kernelFunc:pM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vM=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Tg};
  float scale = ${Sg};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,gM=be({opSnippet:vM}),xM={kernelName:Jf,backendName:"webgl",kernelFunc:gM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yM=fa+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,TM=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SM=be({opSnippet:yM,packedOpSnippet:TM,cpuKernelImpl:TR}),CM={kernelName:nc,backendName:"webgl",kernelFunc:SM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EM=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,wM=be({opSnippet:EM}),bM={kernelName:ec,backendName:"webgl",kernelFunc:wM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AM=fa+`
  return sin(x);
`,RM=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Er}
  return result;
`,IM=be({opSnippet:AM,packedOpSnippet:RM}),PM={kernelName:_f,backendName:"webgl",kernelFunc:IM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FM=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,NM=be({opSnippet:FM}),MM={kernelName:tc,backendName:"webgl",kernelFunc:NM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OM=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,DM=be({opSnippet:OM}),LM={kernelName:sc,backendName:"webgl",kernelFunc:DM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BM=c=>{const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{blockShape:C,paddings:o}=x;it(S.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const y=C.reduce((u,p)=>u*p),t=[[0,0]];t.push(...o);for(let u=1+C.length;u<S.shape.length;++u)t.push([0,0]);const s=[],l=N0({inputs:{x:S},backend:f,attrs:{paddings:t,constantValue:0}}),a=_a(l.shape,C,y,!1),r=to(a.length,C.length,!1),i=eo(l.shape,C,y,!1),n=Yt({inputs:{x:l},backend:f,attrs:{shape:a}}),h=bn({inputs:{x:n},backend:f,attrs:{perm:r}}),d=Yt({inputs:{x:h},backend:f,attrs:{shape:i}});return s.push(l),s.push(n),s.push(h),s.forEach(u=>f.disposeIntermediateTensorInfo(u)),d},$M={kernelName:rc,backendName:"webgl",kernelFunc:BM};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GM(c){const{inputs:e,backend:f}=c,{indices:x,values:S,denseShape:C,defaultValue:o}=e;if(C.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${C.shape}`);if(x.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${x.shape}`);if(S.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${S.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const y=f.readSync(x.dataId),t=f.readSync(S.dataId),s=f.readSync(C.dataId),l=f.readSync(o.dataId)[0],[a,r,i,n,h]=CR(y,x.shape,x.dtype,t,S.dtype,s,l);return[f.makeTensorInfo(r,x.dtype,a),f.makeTensorInfo([r[0]],S.dtype,i),f.makeTensorInfo([n.length],"bool",new Uint8Array(n.map(d=>Number(d)))),f.makeTensorInfo([h.length],x.dtype,new Int32Array(h))]}const UM={kernelName:oc,backendName:"webgl",kernelFunc:GM};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VM(c){const{inputs:e,backend:f}=c,{inputIndices:x,inputShape:S,newShape:C}=e;if(x.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${x.shape}`);if(S.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${S.shape}`);if(C.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${C.shape}`);const o=Array.from(f.readSync(S.dataId)),y=f.readSync(x.dataId),t=Array.from(f.readSync(C.dataId)),[s,l,a]=ER(y,x.shape,x.dtype,o,t);return[f.makeTensorInfo(l,x.dtype,s),f.makeTensorInfo([a.length],C.dtype,new Int32Array(a))]}const zM={kernelName:Wu,backendName:"webgl",kernelFunc:VM};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kM(c){const{inputs:e,backend:f}=c,{data:x,indices:S,segmentIds:C}=e;if(x.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(S.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${S.shape}`);if(C.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${C.shape}`);const o=f.readSync(x.dataId),y=f.readSync(S.dataId),t=f.readSync(C.dataId),[s,l]=n0(o,x.shape,x.dtype,y,t,!0);return f.makeTensorInfo(l,x.dtype,s)}const WM={kernelName:uc,backendName:"webgl",kernelFunc:kM};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XM(c){const{inputs:e,backend:f}=c,{data:x,indices:S,segmentIds:C}=e;if(x.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(S.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${S.shape}`);if(C.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${C.shape}`);const o=f.readSync(x.dataId),y=f.readSync(S.dataId),t=f.readSync(C.dataId),[s,l]=n0(o,x.shape,x.dtype,y,t);return f.makeTensorInfo(l,x.dtype,s)}const HM={kernelName:lc,backendName:"webgl",kernelFunc:XM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YM(c){const{inputs:e,backend:f,attrs:x}=c,{sparseIndices:S,sparseValues:C,defaultValue:o}=e,{outputShape:y}=x,{sliceRank:t,numUpdates:s,sliceSize:l,strides:a,outputSize:r}=xr(C,S,y),i=!1;if(C.dtype==="string"){const u=f.bufferSync(S),p=f.bufferSync(C),m=jr(f.readSync(o.dataId)[0]),v=yR(u,p,y,r,l,s,t,a,m,i);return f.makeTensorInfo(y,v.dtype,v.values)}const n=new Cd(s,t,S.shape.length,C.shape.length,a,[r,1],i),h=f.runWebGLProgram(n,[C,S,o],C.dtype),d=Yt({inputs:{x:h},backend:f,attrs:{shape:y}});return f.disposeIntermediateTensorInfo(h),d}const KM={kernelName:Xu,backendName:"webgl",kernelFunc:YM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jM(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{numOrSizeSplits:C,axis:o}=x,y=Qe(o,S.shape)[0],t=td(S,C,y),s=S.shape.length,l=new Array(s).fill(0),a=S.shape.slice();return t.map(r=>{const i=[...a];i[y]=r;const n=ca({inputs:{x:S},backend:f,attrs:{begin:l,size:i}});return l[y]+=r,n})}const ZM={kernelName:ac,backendName:"webgl",kernelFunc:jM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wp="return sqrt(x);",QM=be({opSnippet:wp,packedOpSnippet:wp,cpuKernelImpl:wR}),JM={kernelName:ic,backendName:"webgl",kernelFunc:QM};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qM="return x * x;",_M=be({opSnippet:qM}),tO={kernelName:bm,backendName:"webgl",kernelFunc:_M};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bp="return (a - b) * (a - b);",eO=mn({opSnippet:bp,packedOpSnippet:bp}),nO={kernelName:hc,backendName:"webgl",kernelFunc:eO};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sO(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e;if(S.dtype!=="string")throw new Error("Input must be of datatype string");const C=f.readSync(S.dataId),o=Jr(C),y=bR(o,"string",x);return f.makeTensorInfo(S.shape,"string",y)}const iO={kernelName:Am,backendName:"webgl",kernelFunc:sO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rO({inputs:c,attrs:e,backend:f}){const{x}=c,S=cs+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,C=new Ps(x.shape,S);return f.runWebGLProgram(C,[x],x.dtype)}const aO={kernelName:ju,backendName:"webgl",kernelFunc:rO};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oO{constructor(e,f,x){this.variableNames=["x"],this.outputShape=x;const S=x.length,C=De(x.length),o=De(x.length);let y="";if(S===1)y="coords * strides + begin";else{let t=0;y=x.map((s,l)=>(t++,x.length===1?`coords * strides[${l}] + begin[${l}]`:`coords[${t-1}] * strides[${l}] + begin[${l}]`)).join(",")}this.userCode=`
      ${C} begin = ${C}(${e});
      ${C} strides = ${C}(${f});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${y}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uO(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{begin:C,end:o,strides:y,beginMask:t,endMask:s,ellipsisMask:l,newAxisMask:a,shrinkAxisMask:r}=x,{finalShapeSparse:i,finalShape:n,isIdentity:h,sliceDim0:d,isSimpleSlice:u,begin:p,end:m,strides:v}=jc(S.shape,C,o,y,t,s,l,a,r);let g;if(h)g=Yt({inputs:{x:S},backend:f,attrs:{shape:n}});else if(d||u){it(S.shape.length>=1,()=>`Input must have rank at least 1, got: ${S.shape.length}`);const w=Yc(p,m,v),b=ca({inputs:{x:S},backend:f,attrs:{begin:p,size:w}});g=Yt({inputs:{x:b},backend:f,attrs:{shape:n}}),f.disposeIntermediateTensorInfo(b)}else if(f.shouldExecuteOnCPU([S])){const b=f.readSync(S.dataId),E=Ze(S.shape,S.dtype,b),A=AR(i,E,v,p);g=f.makeTensorInfo(n,S.dtype,A.values)}else{const b=new oO(p,v,i);g=f.runWebGLProgram(b,[S],S.dtype)}const T=Yt({inputs:{x:g},backend:f,attrs:{shape:n}});return f.disposeIntermediateTensorInfo(g),T}const lO={kernelName:Hu,backendName:"webgl",kernelFunc:uO};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hO(c){const{inputs:e,backend:f,attrs:x}=c,{separator:S,nGramWidths:C,leftPad:o,rightPad:y,padWidth:t,preserveShortSequences:s}=x,{data:l,dataSplits:a}=e,r=f.readSync(l.dataId),i=f.readSync(a.dataId),[n,h]=RR(r,i,S,C,o,y,t,s);return[f.makeTensorInfo([n.length],"string",n),f.makeTensorInfo(a.shape,"int32",h)]}const fO={kernelName:fc,backendName:"webgl",kernelFunc:hO};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cO(c){const{inputs:e,backend:f,attrs:x}=c,{skipEmpty:S}=x,{input:C,delimiter:o}=e;if(C.dtype!=="string")throw new Error("Input must be of datatype string");if(C.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${C.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const y=f.readSync(C.dataId),t=f.readSync(o.dataId)[0],[s,l,a]=IR(y,t,S),r=l.length;return[f.makeTensorInfo([r,2],"int32",s),f.makeTensorInfo([r],"string",l),f.makeTensorInfo([2],"int32",new Int32Array(a))]}const dO={kernelName:cc,backendName:"webgl",kernelFunc:cO};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pO(c){const{inputs:e,backend:f,attrs:x}=c,{numBuckets:S}=x,{input:C}=e;if(C.dtype!=="string")throw new Error("Input must be of datatype string");if(S<=0)throw new Error("Number of buckets must be at least 1");const o=f.readSync(C.dataId),y=PR(o,S);return f.makeTensorInfo(C.shape,"int32",y)}const mO={kernelName:dc,backendName:"webgl",kernelFunc:pO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vO="return tan(x);",gO=be({opSnippet:vO}),xO={kernelName:mc,backendName:"webgl",kernelFunc:gO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yO=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,TO=be({opSnippet:yO}),SO={kernelName:vc,backendName:"webgl",kernelFunc:TO};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CO(c){const{inputs:e,backend:f,attrs:x}=c,{tensor:S,indices:C,updates:o}=e,{sliceRank:y,numUpdates:t,sliceSize:s,strides:l,outputSize:a}=xr(o,C,S.shape),r=[a/s,s];if(a===0)return f.makeTensorInfo(S.shape,C.dtype);const i=Yt({inputs:{x:C},backend:f,attrs:{shape:[t,y]}}),n=Yt({inputs:{x:o},backend:f,attrs:{shape:[t,s]}}),h=Yt({inputs:{x:S},backend:f,attrs:{shape:r}}),d=new Cd(t,y,i.shape.length,n.shape.length,l,r,!1,!0),u=f.runWebGLProgram(d,[n,i,h],h.dtype),p=Yt({inputs:{x:u},backend:f,attrs:{shape:S.shape}});return f.disposeIntermediateTensorInfo(i),f.disposeIntermediateTensorInfo(n),f.disposeIntermediateTensorInfo(h),f.disposeIntermediateTensorInfo(u),p}const EO={kernelName:Uu,backendName:"webgl",kernelFunc:CO};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wO{constructor(e,f){this.variableNames=["A"];const x=new Array(e.length);for(let o=0;o<x.length;o++)x[o]=e[o]*f[o];this.outputShape=x,this.rank=x.length;const S=De(this.rank),C=bO(e);this.userCode=`
      void main() {
        ${S} resRC = getOutputCoords();
        setOutput(getA(${C}));
      }
    `}}function bO(c){const e=c.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${c[0]})`;const f=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],x=[];for(let S=0;S<c.length;S++)x.push(`imod(${f[S]}, ${c[S]})`);return x.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O0(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{reps:C}=x;if(S.dtype==="string"||S.shape.length>5){const t=f.readSync(S.dataId),s=S.dtype==="string"?t.map(r=>jr(r)):t,l=Ze(S.shape,S.dtype,s),a=NR(l,C);return f.makeTensorInfo(a.shape,a.dtype,a.values)}const o=new wO(S.shape,C);return f.runWebGLProgram(o,[S],S.dtype)}const AO={kernelName:Ka,backendName:"webgl",kernelFunc:O0};class RO{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class IO{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xi(c,e){e!==null&&c.disposeIntermediateTensorInfo(e)}function Ap(c){let e=1;for(;e<c;)e*=2;return e}function PO(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{k:C,sorted:o}=x,y=St().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),t=St().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),s=S.shape,l=s[s.length-1];if(f.shouldExecuteOnCPU([S])||l<y||C>t){const A=f.readSync(S.dataId),[R,I]=MR(A,s,S.dtype,C,o);return[f.makeTensorInfo(R.shape,R.dtype,R.values),f.makeTensorInfo(I.shape,I.dtype,I.values)]}if(C===0)return s[s.length-1]=0,[f.makeTensorInfo(s,S.dtype,[]),f.makeTensorInfo(s,"int32",[])];if(l===1)return[S,ao({attrs:{shape:s,dtype:"int32",value:0},backend:f})];const a=f.texData.get(S.dataId),r=a!==null&&a.isPacked,i=r?f.unpackTensor(S):S,h=bt(s)/l,d=Yt({inputs:{x:i},attrs:{shape:[h,l]},backend:f});r&&Xi(f,i);const u=Ap(C),p=Ap(l);let m=null;const v=()=>m===null?[d,d]:[d,m],g=(A,R,I)=>{const P=v(),N=new RO(I),O=[[l],[m===null?1:0],[Number.NEGATIVE_INFINITY],[A],[R]],D=m;m=f.runWebGLProgram(N,P,"int32",O),Xi(f,D)};for(let A=1;A<u;A*=2){const R=A*2;for(let I=A;I>=1;I/=2)g(R,I,[h,p])}for(let A=p;A>u;A/=2){const R=v(),I=new IO([h,A/2]),N=[[l],[m===null?1:0],[u]],F=m;m=f.runWebGLProgram(I,R,"int32",N),Xi(f,F);const O=u/2,D=O*2;for(let L=O;L>=1;L/=2)g(D,L,m.shape)}let T=m;m=ca({inputs:{x:m},backend:f,attrs:{begin:0,size:[h,C]}}),Xi(f,T);let w=b0({inputs:{x:d,indices:m},backend:f,attrs:{axis:1,batchDims:1}});Xi(f,d);const b=s.slice(0,-1);b.push(C),T=m,m=Yt({inputs:{x:m},attrs:{shape:b},backend:f}),Xi(f,T);const E=w;return w=Yt({inputs:{x:w},attrs:{shape:b},backend:f}),Xi(f,E),[w,m]}const FO={kernelName:Yu,backendName:"webgl",kernelFunc:PO};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NO{constructor(e,f,x,S,C,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const y=x==="nearest"?1:2;let t;switch(S){case"constant":t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4;break;default:t=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${t} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${t} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${t} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${f}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${C});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${C});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${f}));
                float mapY = mapCoord(inY, float(${e}));

                if (${y} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MO(c){const{inputs:e,backend:f,attrs:x}=c,{image:S,transforms:C}=e,{interpolation:o,fillMode:y,fillValue:t,outputShape:s}=x,[l,a,r,i]=S.shape,[n,h]=s??[a,r],d=[l,n,h,i],u=new NO(a,r,o,y,t,d);return f.runWebGLProgram(u,[S,C],"float32")}const OO={kernelName:Ku,backendName:"webgl",kernelFunc:MO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DO(c){const{inputs:e,attrs:f,backend:x}=c,{axis:S}=f,{x:C}=e;so(C,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=x.readSync(C.dataId),{outputValues:y,outputShape:t,indices:s}=OR(o,S,C.shape,C.dtype);return[x.makeTensorInfo(t,C.dtype,y),x.makeTensorInfo([s.length],"int32",s)]}const LO={kernelName:gc,backendName:"webgl",kernelFunc:DO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BO(c){const{inputs:e,backend:f,attrs:x}=c,{value:S}=e;let{axis:C}=x;C<0&&(C+=S.shape.length);const o=S,y=o.shape.length,t=S.shape[C],s=new Array(y-1);let l=0;for(let h=0;h<y;h++)h!==C&&(s[l++]=o.shape[h]);const a=[],r=new Array(y).fill(0),i=o.shape.slice();i[C]=1;const n=new Array(t);for(let h=0;h<n.length;h++){r[C]=h;const d=ca({inputs:{x:o},backend:f,attrs:{begin:r,size:i}}),u=Yt({inputs:{x:d},backend:f,attrs:{shape:s}});n[h]=u,a.push(d)}return a.forEach(h=>f.disposeIntermediateTensorInfo(h)),n}const $O={kernelName:xc,backendName:"webgl",kernelFunc:BO};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GO{constructor(e,f){this.variableNames=["x","segmentIds"];const x=e.windowSize,S=e.batchSize,C=e.inSize,o=e.numSegments,y=o*Math.ceil(C/x);this.outputShape=[S,y];const t="0.0",s="sumValue",l=Math.floor(x/4)*4,a=x%4,r=`
        sumValue += dot(values, segFilter);
    `;let i="";C%x>0&&(i=`
        if (inIdx < 0 || inIdx >= ${C}) {
          return initializationValue;
        }
      `);let n="";C%x>0&&(n=`
        if (inIdx < 0 || inIdx >= ${C}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${t};

      float getValue(int batch, int inIdx) {
        ${i}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${n}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${x}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${r}
        }

        int inIdx = inOffset + ${l};
        if (${a===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${r}
        } else if (${a===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${r}
        } else if (${a===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${r}
        }
        setOutput(${s});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UO(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,segmentIds:C}=e,{numSegments:o}=x,y=S.shape.length,t=[];let s=0;const l=Ln([s],y);let a=S;l!=null&&(a=bn({inputs:{x:S},backend:f,attrs:{perm:l}}),t.push(a),s=pn(1,y)[0]);const r=Dg(a.shape,s,o),i=bt([a.shape[s]]),n=Yt({inputs:{x:a},backend:f,attrs:{shape:[-1,i]}});t.push(n);const h=Sc(S.dtype),d=(v,g,T,w,b)=>{const E=v.shape[0],A=v.shape[1],R=Og(A,b),I={windowSize:R,inSize:A,batchSize:E,numSegments:b},P=new GO(I,g),N=f.compileAndRun(P,[v,T],w);if(t.push(N),N.shape[1]===b)return N;const F=M0({backend:f,attrs:{start:0,stop:b,step:1,dtype:"float32"}}),O=O0({inputs:{x:F},backend:f,attrs:{reps:[A/R]}});return t.push(F),t.push(O),d(N,g,O,w,b)},u=d(n,"unsortedSegmentSum",C,h,o),p=Yt({inputs:{x:u},backend:f,attrs:{shape:r}});let m=p;if(l!=null){t.push(p);const v=Ja(l);m=bn({inputs:{x:m},backend:f,attrs:{perm:v}})}return t.forEach(v=>f.disposeIntermediateTensorInfo(v)),m}const VO={kernelName:Rm,backendName:"webgl",kernelFunc:UO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zO=[wI,AI,PI,MI,DI,$I,UI,zI,HI,KI,QI,_I,n9,a9,l9,f9,d9,g9,y9,S9,b9,M9,D9,G9,V9,Y9,j9,q9,oI,eP,aP,hP,vP,yP,SP,EP,bP,PP,MP,LP,$P,UP,zP,XP,YP,QP,qP,e8,i8,a8,h8,p8,x8,S8,w8,b8,R8,P8,N8,O8,L8,U8,k8,H8,K8,Q8,_8,sF,oF,aI,lF,iP,cF,mF,xF,lI,CF,AF,IF,MF,LF,UF,kF,YF,QF,_F,e7,r7,o7,l7,d7,m7,g7,y7,S7,b7,P7,O7,z7,cI,H7,j7,J7,tN,k9,sN,rN,oN,hN,pN,fI,vN,xN,TN,CN,EN,W9,$7,AN,FN,DN,pI,GN,zN,HN,jN,qN,tM,sM,aM,lM,cM,mM,xM,CM,bM,PM,MM,F9,U7,LM,$M,UM,zM,WM,HM,KM,ZM,JM,tO,nO,iO,aO,lO,fO,dO,mO,G7,SI,xO,SO,EO,AO,FO,OO,CI,LO,$O,VO,iN];for(const c of zO)Im(c);var D0={};(function(){var c;function e(V){var j=0;return function(){return j<V.length?{done:!1,value:V[j++]}:{done:!0}}}var f=typeof Object.defineProperties=="function"?Object.defineProperty:function(V,j,Q){return V==Array.prototype||V==Object.prototype||(V[j]=Q.value),V};function x(V){V=[typeof globalThis=="object"&&globalThis,V,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kn=="object"&&Kn];for(var j=0;j<V.length;++j){var Q=V[j];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var S=x(this);function C(V,j){if(j)t:{var Q=S;V=V.split(".");for(var ht=0;ht<V.length-1;ht++){var gt=V[ht];if(!(gt in Q))break t;Q=Q[gt]}V=V[V.length-1],ht=Q[V],j=j(ht),j!=ht&&j!=null&&f(Q,V,{configurable:!0,writable:!0,value:j})}}C("Symbol",function(V){function j(Rt){if(this instanceof j)throw new TypeError("Symbol is not a constructor");return new Q(ht+(Rt||"")+"_"+gt++,Rt)}function Q(Rt,Ct){this.g=Rt,f(this,"description",{configurable:!0,writable:!0,value:Ct})}if(V)return V;Q.prototype.toString=function(){return this.g};var ht="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",gt=0;return j}),C("Symbol.iterator",function(V){if(V)return V;V=Symbol("Symbol.iterator");for(var j="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Q=0;Q<j.length;Q++){var ht=S[j[Q]];typeof ht=="function"&&typeof ht.prototype[V]!="function"&&f(ht.prototype,V,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return V});function o(V){return V={next:V},V[Symbol.iterator]=function(){return this},V}function y(V){var j=typeof Symbol<"u"&&Symbol.iterator&&V[Symbol.iterator];return j?j.call(V):{next:e(V)}}function t(V){if(!(V instanceof Array)){V=y(V);for(var j,Q=[];!(j=V.next()).done;)Q.push(j.value);V=Q}return V}var s=typeof Object.create=="function"?Object.create:function(V){function j(){}return j.prototype=V,new j},l;if(typeof Object.setPrototypeOf=="function")l=Object.setPrototypeOf;else{var a;t:{var r={a:!0},i={};try{i.__proto__=r,a=i.a;break t}catch{}a=!1}l=a?function(V,j){if(V.__proto__=j,V.__proto__!==j)throw new TypeError(V+" is not extensible");return V}:null}var n=l;function h(V,j){if(V.prototype=s(j.prototype),V.prototype.constructor=V,n)n(V,j);else for(var Q in j)if(Q!="prototype")if(Object.defineProperties){var ht=Object.getOwnPropertyDescriptor(j,Q);ht&&Object.defineProperty(V,Q,ht)}else V[Q]=j[Q];V.ea=j.prototype}function d(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function u(V){if(V.l)throw new TypeError("Generator is already running");V.l=!0}d.prototype.o=function(V){this.h=V};function p(V,j){V.j={U:j,V:!0},V.g=V.m||V.s}d.prototype.return=function(V){this.j={return:V},this.g=this.s};function m(V,j,Q){return V.g=Q,{value:j}}function v(V){this.g=new d,this.h=V}function g(V,j){u(V.g);var Q=V.g.i;return Q?T(V,"return"in Q?Q.return:function(ht){return{value:ht,done:!0}},j,V.g.return):(V.g.return(j),w(V))}function T(V,j,Q,ht){try{var gt=j.call(V.g.i,Q);if(!(gt instanceof Object))throw new TypeError("Iterator result "+gt+" is not an object");if(!gt.done)return V.g.l=!1,gt;var Rt=gt.value}catch(Ct){return V.g.i=null,p(V.g,Ct),w(V)}return V.g.i=null,ht.call(V.g,Rt),w(V)}function w(V){for(;V.g.g;)try{var j=V.h(V.g);if(j)return V.g.l=!1,{value:j.value,done:!1}}catch(Q){V.g.h=void 0,p(V.g,Q)}if(V.g.l=!1,V.g.j){if(j=V.g.j,V.g.j=null,j.V)throw j.U;return{value:j.return,done:!0}}return{value:void 0,done:!0}}function b(V){this.next=function(j){return u(V.g),V.g.i?j=T(V,V.g.i.next,j,V.g.o):(V.g.o(j),j=w(V)),j},this.throw=function(j){return u(V.g),V.g.i?j=T(V,V.g.i.throw,j,V.g.o):(p(V.g,j),j=w(V)),j},this.return=function(j){return g(V,j)},this[Symbol.iterator]=function(){return this}}function E(V,j){return j=new b(new v(j)),n&&V.prototype&&n(j,V.prototype),j}function A(V,j){V instanceof String&&(V+="");var Q=0,ht=!1,gt={next:function(){if(!ht&&Q<V.length){var Rt=Q++;return{value:j(Rt,V[Rt]),done:!1}}return ht=!0,{done:!0,value:void 0}}};return gt[Symbol.iterator]=function(){return gt},gt}var R=typeof Object.assign=="function"?Object.assign:function(V,j){for(var Q=1;Q<arguments.length;Q++){var ht=arguments[Q];if(ht)for(var gt in ht)Object.prototype.hasOwnProperty.call(ht,gt)&&(V[gt]=ht[gt])}return V};C("Object.assign",function(V){return V||R}),C("Promise",function(V){function j(Ct){this.h=0,this.i=void 0,this.g=[],this.o=!1;var et=this.j();try{Ct(et.resolve,et.reject)}catch(lt){et.reject(lt)}}function Q(){this.g=null}function ht(Ct){return Ct instanceof j?Ct:new j(function(et){et(Ct)})}if(V)return V;Q.prototype.h=function(Ct){if(this.g==null){this.g=[];var et=this;this.i(function(){et.l()})}this.g.push(Ct)};var gt=S.setTimeout;Q.prototype.i=function(Ct){gt(Ct,0)},Q.prototype.l=function(){for(;this.g&&this.g.length;){var Ct=this.g;this.g=[];for(var et=0;et<Ct.length;++et){var lt=Ct[et];Ct[et]=null;try{lt()}catch(Tt){this.j(Tt)}}}this.g=null},Q.prototype.j=function(Ct){this.i(function(){throw Ct})},j.prototype.j=function(){function Ct(Tt){return function(Lt){lt||(lt=!0,Tt.call(et,Lt))}}var et=this,lt=!1;return{resolve:Ct(this.C),reject:Ct(this.l)}},j.prototype.C=function(Ct){if(Ct===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Ct instanceof j)this.F(Ct);else{t:switch(typeof Ct){case"object":var et=Ct!=null;break t;case"function":et=!0;break t;default:et=!1}et?this.u(Ct):this.m(Ct)}},j.prototype.u=function(Ct){var et=void 0;try{et=Ct.then}catch(lt){this.l(lt);return}typeof et=="function"?this.G(et,Ct):this.m(Ct)},j.prototype.l=function(Ct){this.s(2,Ct)},j.prototype.m=function(Ct){this.s(1,Ct)},j.prototype.s=function(Ct,et){if(this.h!=0)throw Error("Cannot settle("+Ct+", "+et+"): Promise already settled in state"+this.h);this.h=Ct,this.i=et,this.h===2&&this.D(),this.A()},j.prototype.D=function(){var Ct=this;gt(function(){if(Ct.B()){var et=S.console;typeof et<"u"&&et.error(Ct.i)}},1)},j.prototype.B=function(){if(this.o)return!1;var Ct=S.CustomEvent,et=S.Event,lt=S.dispatchEvent;return typeof lt>"u"?!0:(typeof Ct=="function"?Ct=new Ct("unhandledrejection",{cancelable:!0}):typeof et=="function"?Ct=new et("unhandledrejection",{cancelable:!0}):(Ct=S.document.createEvent("CustomEvent"),Ct.initCustomEvent("unhandledrejection",!1,!0,Ct)),Ct.promise=this,Ct.reason=this.i,lt(Ct))},j.prototype.A=function(){if(this.g!=null){for(var Ct=0;Ct<this.g.length;++Ct)Rt.h(this.g[Ct]);this.g=null}};var Rt=new Q;return j.prototype.F=function(Ct){var et=this.j();Ct.J(et.resolve,et.reject)},j.prototype.G=function(Ct,et){var lt=this.j();try{Ct.call(et,lt.resolve,lt.reject)}catch(Tt){lt.reject(Tt)}},j.prototype.then=function(Ct,et){function lt(Xt,Mt){return typeof Xt=="function"?function(Ft){try{Tt(Xt(Ft))}catch($){Lt($)}}:Mt}var Tt,Lt,Kt=new j(function(Xt,Mt){Tt=Xt,Lt=Mt});return this.J(lt(Ct,Tt),lt(et,Lt)),Kt},j.prototype.catch=function(Ct){return this.then(void 0,Ct)},j.prototype.J=function(Ct,et){function lt(){switch(Tt.h){case 1:Ct(Tt.i);break;case 2:et(Tt.i);break;default:throw Error("Unexpected state: "+Tt.h)}}var Tt=this;this.g==null?Rt.h(lt):this.g.push(lt),this.o=!0},j.resolve=ht,j.reject=function(Ct){return new j(function(et,lt){lt(Ct)})},j.race=function(Ct){return new j(function(et,lt){for(var Tt=y(Ct),Lt=Tt.next();!Lt.done;Lt=Tt.next())ht(Lt.value).J(et,lt)})},j.all=function(Ct){var et=y(Ct),lt=et.next();return lt.done?ht([]):new j(function(Tt,Lt){function Kt(Ft){return function($){Xt[Ft]=$,Mt--,Mt==0&&Tt(Xt)}}var Xt=[],Mt=0;do Xt.push(void 0),Mt++,ht(lt.value).J(Kt(Xt.length-1),Lt),lt=et.next();while(!lt.done)})},j}),C("Object.is",function(V){return V||function(j,Q){return j===Q?j!==0||1/j===1/Q:j!==j&&Q!==Q}}),C("Array.prototype.includes",function(V){return V||function(j,Q){var ht=this;ht instanceof String&&(ht=String(ht));var gt=ht.length;for(Q=Q||0,0>Q&&(Q=Math.max(Q+gt,0));Q<gt;Q++){var Rt=ht[Q];if(Rt===j||Object.is(Rt,j))return!0}return!1}}),C("String.prototype.includes",function(V){return V||function(j,Q){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(j instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(j,Q||0)!==-1}}),C("Array.prototype.keys",function(V){return V||function(){return A(this,function(j){return j})}});var I=this||self;function P(V,j){V=V.split(".");var Q=I;V[0]in Q||typeof Q.execScript>"u"||Q.execScript("var "+V[0]);for(var ht;V.length&&(ht=V.shift());)V.length||j===void 0?Q[ht]&&Q[ht]!==Object.prototype[ht]?Q=Q[ht]:Q=Q[ht]={}:Q[ht]=j}function N(V,j){return j=String.fromCharCode.apply(null,j),V==null?j:V+j}var F,O=typeof TextDecoder<"u",D,L=typeof TextEncoder<"u";function z(V){if(L)V=(D||(D=new TextEncoder)).encode(V);else{var j=void 0;j=j===void 0?!1:j;for(var Q=0,ht=new Uint8Array(3*V.length),gt=0;gt<V.length;gt++){var Rt=V.charCodeAt(gt);if(128>Rt)ht[Q++]=Rt;else{if(2048>Rt)ht[Q++]=Rt>>6|192;else{if(55296<=Rt&&57343>=Rt){if(56319>=Rt&&gt<V.length){var Ct=V.charCodeAt(++gt);if(56320<=Ct&&57343>=Ct){Rt=1024*(Rt-55296)+Ct-56320+65536,ht[Q++]=Rt>>18|240,ht[Q++]=Rt>>12&63|128,ht[Q++]=Rt>>6&63|128,ht[Q++]=Rt&63|128;continue}else gt--}if(j)throw Error("Found an unpaired surrogate");Rt=65533}ht[Q++]=Rt>>12|224,ht[Q++]=Rt>>6&63|128}ht[Q++]=Rt&63|128}}V=ht.subarray(0,Q)}return V}var X={},H=null;function J(V,j){j===void 0&&(j=0),M(),j=X[j];for(var Q=Array(Math.floor(V.length/3)),ht=j[64]||"",gt=0,Rt=0;gt<V.length-2;gt+=3){var Ct=V[gt],et=V[gt+1],lt=V[gt+2],Tt=j[Ct>>2];Ct=j[(Ct&3)<<4|et>>4],et=j[(et&15)<<2|lt>>6],lt=j[lt&63],Q[Rt++]=Tt+Ct+et+lt}switch(Tt=0,lt=ht,V.length-gt){case 2:Tt=V[gt+1],lt=j[(Tt&15)<<2]||ht;case 1:V=V[gt],Q[Rt]=j[V>>2]+j[(V&3)<<4|Tt>>4]+lt+ht}return Q.join("")}function G(V){var j=V.length,Q=3*j/4;Q%3?Q=Math.floor(Q):"=.".indexOf(V[j-1])!=-1&&(Q="=.".indexOf(V[j-2])!=-1?Q-2:Q-1);var ht=new Uint8Array(Q),gt=0;return k(V,function(Rt){ht[gt++]=Rt}),ht.subarray(0,gt)}function k(V,j){function Q(lt){for(;ht<V.length;){var Tt=V.charAt(ht++),Lt=H[Tt];if(Lt!=null)return Lt;if(!/^[\s\xa0]*$/.test(Tt))throw Error("Unknown base64 encoding at char: "+Tt)}return lt}M();for(var ht=0;;){var gt=Q(-1),Rt=Q(0),Ct=Q(64),et=Q(64);if(et===64&&gt===-1)break;j(gt<<2|Rt>>4),Ct!=64&&(j(Rt<<4&240|Ct>>2),et!=64&&j(Ct<<6&192|et))}}function M(){if(!H){H={};for(var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),j=["+/=","+/","-_=","-_.","-_"],Q=0;5>Q;Q++){var ht=V.concat(j[Q].split(""));X[Q]=ht;for(var gt=0;gt<ht.length;gt++){var Rt=ht[gt];H[Rt]===void 0&&(H[Rt]=gt)}}}}var B=typeof Uint8Array.prototype.slice=="function",U;function W(V,j,Q){return j===Q?U||(U=new Uint8Array(0)):B?V.slice(j,Q):new Uint8Array(V.subarray(j,Q))}var K=0,q=0;function _(V,j){j=j===void 0?{}:j,j=j.v===void 0?!1:j.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=j,V&&rt(this,V)}function rt(V,j){j=j.constructor===Uint8Array?j:j.constructor===ArrayBuffer?new Uint8Array(j):j.constructor===Array?new Uint8Array(j):j.constructor===String?G(j):j instanceof Uint8Array?new Uint8Array(j.buffer,j.byteOffset,j.byteLength):new Uint8Array(0),V.h=j,V.l=0,V.j=V.h.length,V.g=V.l}_.prototype.reset=function(){this.g=this.l};function ft(V){for(var j=128,Q=0,ht=0,gt=0;4>gt&&128<=j;gt++)j=V.h[V.g++],Q|=(j&127)<<7*gt;if(128<=j&&(j=V.h[V.g++],Q|=(j&127)<<28,ht|=(j&127)>>4),128<=j)for(gt=0;5>gt&&128<=j;gt++)j=V.h[V.g++],ht|=(j&127)<<7*gt+3;if(128>j)return V=Q>>>0,j=ht>>>0,(ht=j&2147483648)&&(V=~V+1>>>0,j=~j>>>0,V==0&&(j=j+1>>>0)),V=4294967296*j+(V>>>0),ht?-V:V;V.m=!0}_.prototype.i=function(){var V=this.h,j=V[this.g],Q=j&127;return 128>j?(this.g+=1,Q):(j=V[this.g+1],Q|=(j&127)<<7,128>j?(this.g+=2,Q):(j=V[this.g+2],Q|=(j&127)<<14,128>j?(this.g+=3,Q):(j=V[this.g+3],Q|=(j&127)<<21,128>j?(this.g+=4,Q):(j=V[this.g+4],Q|=(j&15)<<28,128>j?(this.g+=5,Q>>>0):(this.g+=5,128<=V[this.g++]&&128<=V[this.g++]&&128<=V[this.g++]&&128<=V[this.g++]&&this.g++,Q)))))},_.prototype.o=function(){var V=this.h[this.g],j=this.h[this.g+1],Q=this.h[this.g+2],ht=this.h[this.g+3];return this.g+=4,Q=(V<<0|j<<8|Q<<16|ht<<24)>>>0,V=2*(Q>>31)+1,j=Q>>>23&255,Q&=8388607,j==255?Q?NaN:1/0*V:j==0?V*Math.pow(2,-149)*Q:V*Math.pow(2,j-150)*(Q+Math.pow(2,23))};var mt=[];function vt(){this.g=new Uint8Array(64),this.h=0}vt.prototype.push=function(V){if(!(this.h+1<this.g.length)){var j=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(j)}this.g[this.h++]=V},vt.prototype.length=function(){return this.h},vt.prototype.end=function(){var V=this.g,j=this.h;return this.h=0,W(V,0,j)};function yt(V,j){for(;127<j;)V.push(j&127|128),j>>>=7;V.push(j)}function xt(V){var j={},Q=j.N===void 0?!1:j.N;this.o={v:j.v===void 0?!1:j.v},this.N=Q,j=this.o,mt.length?(Q=mt.pop(),j&&(Q.v=j.v),V&&rt(Q,V),V=Q):V=new _(V,j),this.g=V,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}xt.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function It(V){var j=V.g;if((j=j.g==j.j)||(j=V.j)||(j=V.g,j=j.m||0>j.g||j.g>j.j),j)return!1;V.m=V.g.g,j=V.g.i();var Q=j&7;return Q!=0&&Q!=5&&Q!=1&&Q!=2&&Q!=3&&Q!=4?(V.j=!0,!1):(V.i=j,V.l=j>>>3,V.h=Q,!0)}function $t(V){switch(V.h){case 0:if(V.h!=0)$t(V);else{for(V=V.g;V.h[V.g]&128;)V.g++;V.g++}break;case 1:V.h!=1?$t(V):(V=V.g,V.g+=8);break;case 2:if(V.h!=2)$t(V);else{var j=V.g.i();V=V.g,V.g+=j}break;case 5:V.h!=5?$t(V):(V=V.g,V.g+=4);break;case 3:j=V.l;do{if(!It(V)){V.j=!0;break}if(V.h==4){V.l!=j&&(V.j=!0);break}$t(V)}while(1);break;default:V.j=!0}}function Zt(V,j,Q){var ht=V.g.j,gt=V.g.i(),Rt=V.g.g+gt;if(V.g.j=Rt,Q(j,V),Q=Rt-V.g.g,Q!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+gt+" bytes, instead read "+(gt-Q)+" bytes, either the data ended unexpectedly or the message misreported its own length");return V.g.g=Rt,V.g.j=ht,j}function Bt(V){return V.g.o()}function At(V){var j=V.g.i();V=V.g;var Q=V.g;V.g+=j,V=V.h;var ht;if(O)(ht=F)||(ht=F=new TextDecoder("utf-8",{fatal:!1})),ht=ht.decode(V.subarray(Q,Q+j));else{j=Q+j;for(var gt=[],Rt=null,Ct,et,lt;Q<j;)Ct=V[Q++],128>Ct?gt.push(Ct):224>Ct?Q>=j?gt.push(65533):(et=V[Q++],194>Ct||(et&192)!==128?(Q--,gt.push(65533)):gt.push((Ct&31)<<6|et&63)):240>Ct?Q>=j-1?gt.push(65533):(et=V[Q++],(et&192)!==128||Ct===224&&160>et||Ct===237&&160<=et||((ht=V[Q++])&192)!==128?(Q--,gt.push(65533)):gt.push((Ct&15)<<12|(et&63)<<6|ht&63)):244>=Ct?Q>=j-2?gt.push(65533):(et=V[Q++],(et&192)!==128||(Ct<<28)+(et-144)>>30||((ht=V[Q++])&192)!==128||((lt=V[Q++])&192)!==128?(Q--,gt.push(65533)):(Ct=(Ct&7)<<18|(et&63)<<12|(ht&63)<<6|lt&63,Ct-=65536,gt.push((Ct>>10&1023)+55296,(Ct&1023)+56320))):gt.push(65533),8192<=gt.length&&(Rt=N(Rt,gt),gt.length=0);ht=N(Rt,gt)}return ht}function kt(V,j,Q){var ht=V.g.i();for(ht=V.g.g+ht;V.g.g<ht;)Q.push(j.call(V.g))}function Ut(V,j){V.h==2?kt(V,_.prototype.o,j):j.push(Bt(V))}function ee(){this.h=[],this.i=0,this.g=new vt}function te(V,j){j.length!==0&&(V.h.push(j),V.i+=j.length)}function fe(V){var j=V.i+V.g.length();if(j===0)return new Uint8Array(0);j=new Uint8Array(j);for(var Q=V.h,ht=Q.length,gt=0,Rt=0;Rt<ht;Rt++){var Ct=Q[Rt];Ct.length!==0&&(j.set(Ct,gt),gt+=Ct.length)}return Q=V.g,ht=Q.h,ht!==0&&(j.set(Q.g.subarray(0,ht),gt),Q.h=0),V.h=[j],j}function ae(V,j,Q){if(Q!=null){yt(V.g,8*j+5),V=V.g;var ht=Q;ht=(Q=0>ht?1:0)?-ht:ht,ht===0?0<1/ht?K=q=0:(q=0,K=2147483648):isNaN(ht)?(q=0,K=2147483647):34028234663852886e22<ht?(q=0,K=(Q<<31|2139095040)>>>0):11754943508222875e-54>ht?(ht=Math.round(ht/Math.pow(2,-149)),q=0,K=(Q<<31|ht)>>>0):(j=Math.floor(Math.log(ht)/Math.LN2),ht*=Math.pow(2,-j),ht=Math.round(8388608*ht),16777216<=ht&&++j,q=0,K=(Q<<31|j+127<<23|ht&8388607)>>>0),Q=K,V.push(Q>>>0&255),V.push(Q>>>8&255),V.push(Q>>>16&255),V.push(Q>>>24&255)}}var le=typeof Uint8Array=="function";function re(V,j,Q){if(V!=null)return typeof V=="object"?le&&V instanceof Uint8Array?Q(V):we(V,j,Q):j(V)}function we(V,j,Q){if(Array.isArray(V)){for(var ht=Array(V.length),gt=0;gt<V.length;gt++)ht[gt]=re(V[gt],j,Q);return Array.isArray(V)&&V.W&&ce(ht),ht}ht={};for(gt in V)ht[gt]=re(V[gt],j,Q);return ht}function Se(V){return typeof V=="number"?isFinite(V)?V:String(V):V}var Me={W:{value:!0,configurable:!0}};function ce(V){return Array.isArray(V)&&!Object.isFrozen(V)&&Object.defineProperties(V,Me),V}var se;function Ae(V,j,Q){var ht=se;se=null,V||(V=ht),ht=this.constructor.ca,V||(V=ht?[ht]:[]),this.j=ht?0:-1,this.m=this.g=null,this.h=V;t:{if(ht=this.h.length,V=ht-1,ht&&(ht=this.h[V],!(ht===null||typeof ht!="object"||Array.isArray(ht)||le&&ht instanceof Uint8Array))){this.l=V-this.j,this.i=ht;break t}j!==void 0&&-1<j?(this.l=Math.max(j,V+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(Q)for(j=0;j<Q.length;j++)V=Q[j],V<this.l?(V+=this.j,(ht=this.h[V])?ce(ht):this.h[V]=Le):(nn(this),(ht=this.i[V])?ce(ht):this.i[V]=Le)}var Le=Object.freeze(ce([]));function nn(V){var j=V.l+V.j;V.h[j]||(V.i=V.h[j]={})}function ge(V,j,Q){return j===-1?null:Q!==void 0&&Q||j>=V.l?V.i?V.i[j]:void 0:V.h[j+V.j]}function Xe(V,j){var Q=Q===void 0?!1:Q,ht=ge(V,j,Q);return ht==null&&(ht=Le),ht===Le&&(ht=ce([]),ue(V,j,ht,Q)),ht}function Qn(V){var j=Xe(V,3);if(V.m||(V.m={}),!V.m[3]){for(var Q=0;Q<j.length;Q++)j[Q]=+j[Q];V.m[3]=!0}return j}function Rn(V,j,Q){return V=ge(V,j),V??Q}function tn(V,j,Q){return V=ge(V,j),V=V==null?V:+V,V??(Q===void 0?0:Q)}function ue(V,j,Q,ht){ht!==void 0&&ht||j>=V.l?(nn(V),V.i[j]=Q):V.h[j+V.j]=Q}function Os(V,j,Q){if(Q===-1)return null;if(V.g||(V.g={}),!V.g[Q]){var ht=ge(V,Q,!1);ht&&(V.g[Q]=new j(ht))}return V.g[Q]}function wt(V,j){V.g||(V.g={});var Q=V.g[1];if(!Q){var ht=Xe(V,1);Q=[];for(var gt=0;gt<ht.length;gt++)Q[gt]=new j(ht[gt]);V.g[1]=Q}return Q}function Dt(V,j,Q){var ht=ht===void 0?!1:ht;V.g||(V.g={});var gt=Q&&zt(Q);V.g[j]=Q,ue(V,j,gt,ht)}function _t(V,j,Q,ht){var gt=wt(V,Q);j=j||new Q,V=Xe(V,1),ht!=null?(gt.splice(ht,0,j),V.splice(ht,0,zt(j))):(gt.push(j),V.push(zt(j)))}Ae.prototype.toJSON=function(){var V=zt(this);return we(V,Se,J)};function zt(V,j){if(V.g)for(var Q in V.g){var ht=V.g[Q];if(Array.isArray(ht))for(var gt=0;gt<ht.length;gt++)ht[gt]&&zt(ht[gt]);else ht&&zt(ht)}return V.h}Ae.prototype.toString=function(){return zt(this).toString()};function Re(V,j){if(V=V.o){te(j,j.g.end());for(var Q=0;Q<V.length;Q++)te(j,V[Q])}}function xe(V,j){if(j.h==4)return!1;var Q=j.m;return $t(j),j.N||(j=W(j.g.h,Q,j.g.g),(Q=V.o)?Q.push(j):V.o=[j]),!0}function ie(V){Ae.call(this,V,-1,He)}h(ie,Ae),ie.prototype.getRows=function(){return ge(this,1)},ie.prototype.getCols=function(){return ge(this,2)},ie.prototype.getPackedDataList=function(){return Qn(this)},ie.prototype.getLayout=function(){return Rn(this,4,0)};function oe(V,j){for(;It(j);)switch(j.i){case 8:var Q=j.g.i();ue(V,1,Q);break;case 16:Q=j.g.i(),ue(V,2,Q);break;case 29:case 26:Ut(j,V.getPackedDataList());break;case 32:Q=ft(j.g),ue(V,4,Q);break;default:if(!xe(V,j))return V}return V}var He=[3];function Pe(V,j){var Q=void 0;return new(Q||(Q=Promise))(function(ht,gt){function Rt(lt){try{et(j.next(lt))}catch(Tt){gt(Tt)}}function Ct(lt){try{et(j.throw(lt))}catch(Tt){gt(Tt)}}function et(lt){lt.done?ht(lt.value):new Q(function(Tt){Tt(lt.value)}).then(Rt,Ct)}et((j=j.apply(V,void 0)).next())})}function sn(V){Ae.call(this,V)}h(sn,Ae);function Ds(V,j){for(;It(j);)switch(j.i){case 8:var Q=j.g.i();ue(V,1,Q);break;case 21:Q=Bt(j),ue(V,2,Q);break;case 26:Q=At(j),ue(V,3,Q);break;case 34:Q=At(j),ue(V,4,Q);break;default:if(!xe(V,j))return V}return V}function Jn(V){Ae.call(this,V,-1,Ls)}h(Jn,Ae),Jn.prototype.addClassification=function(V,j){return _t(this,V,sn,j),this};var Ls=[1];function Ge(V){Ae.call(this,V)}h(Ge,Ae);function qn(V,j){for(;It(j);)switch(j.i){case 13:var Q=Bt(j);ue(V,1,Q);break;case 21:Q=Bt(j),ue(V,2,Q);break;case 29:Q=Bt(j),ue(V,3,Q);break;case 37:Q=Bt(j),ue(V,4,Q);break;case 45:Q=Bt(j),ue(V,5,Q);break;default:if(!xe(V,j))return V}return V}function Bs(V){Ae.call(this,V,-1,si)}h(Bs,Ae);function br(V){t:{var j=new Bs;for(V=new xt(V);It(V);)switch(V.i){case 10:var Q=Zt(V,new Ge,qn);_t(j,Q,Ge,void 0);break;default:if(!xe(j,V))break t}}return j}var si=[1];function ii(V){Ae.call(this,V)}h(ii,Ae);function ds(V){Ae.call(this,V,-1,$s)}h(ds,Ae),ds.prototype.getVertexType=function(){return Rn(this,1,0)},ds.prototype.getPrimitiveType=function(){return Rn(this,2,0)},ds.prototype.getVertexBufferList=function(){return Qn(this)},ds.prototype.getIndexBufferList=function(){return Xe(this,4)};function da(V,j){for(;It(j);)switch(j.i){case 8:var Q=ft(j.g);ue(V,1,Q);break;case 16:Q=ft(j.g),ue(V,2,Q);break;case 29:case 26:Ut(j,V.getVertexBufferList());break;case 32:case 34:Q=j;var ht=V.getIndexBufferList();Q.h==2?kt(Q,_.prototype.i,ht):ht.push(Q.g.i());break;default:if(!xe(V,j))return V}return V}var $s=[3,4];function ri(V){Ae.call(this,V)}h(ri,Ae),ri.prototype.getMesh=function(){return Os(this,ds,1)},ri.prototype.getPoseTransformMatrix=function(){return Os(this,ie,2)};function Ar(V){t:{var j=new ri;for(V=new xt(V);It(V);)switch(V.i){case 10:var Q=Zt(V,new ds,da);Dt(j,1,Q);break;case 18:Q=Zt(V,new ie,oe),Dt(j,2,Q);break;default:if(!xe(j,V))break t}}return j}function ai(V,j,Q){if(Q=V.createShader(Q===0?V.VERTEX_SHADER:V.FRAGMENT_SHADER),V.shaderSource(Q,j),V.compileShader(Q),!V.getShaderParameter(Q,V.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+V.getShaderInfoLog(Q));return Q}function Bi(V){return wt(V,sn).map(function(j){return{index:Rn(j,1,0),Y:tn(j,2),label:ge(j,3)!=null?Rn(j,3,""):void 0,displayName:ge(j,4)!=null?Rn(j,4,""):void 0}})}function Gs(V){return{x:tn(V,1),y:tn(V,2),z:tn(V,3),visibility:ge(V,4)!=null?tn(V,4):void 0}}function Us(V,j){this.h=V,this.g=j,this.l=0}function bs(V,j,Q){return In(V,j),typeof V.g.canvas.transferToImageBitmap=="function"?Promise.resolve(V.g.canvas.transferToImageBitmap()):Q?Promise.resolve(V.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(V.g.canvas):(V.i===void 0&&(V.i=document.createElement("canvas")),new Promise(function(ht){V.i.height=V.g.canvas.height,V.i.width=V.g.canvas.width,V.i.getContext("2d",{}).drawImage(V.g.canvas,0,0,V.g.canvas.width,V.g.canvas.height),ht(V.i)}))}function In(V,j){var Q=V.g;if(V.m===void 0){var ht=ai(Q,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),gt=ai(Q,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Rt=Q.createProgram();if(Q.attachShader(Rt,ht),Q.attachShader(Rt,gt),Q.linkProgram(Rt),!Q.getProgramParameter(Rt,Q.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Q.getProgramInfoLog(Rt));ht=V.m=Rt,Q.useProgram(ht),gt=Q.getUniformLocation(ht,"sampler0"),V.j={I:Q.getAttribLocation(ht,"aVertex"),H:Q.getAttribLocation(ht,"aTex"),da:gt},V.s=Q.createBuffer(),Q.bindBuffer(Q.ARRAY_BUFFER,V.s),Q.enableVertexAttribArray(V.j.I),Q.vertexAttribPointer(V.j.I,2,Q.FLOAT,!1,0,0),Q.bufferData(Q.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Q.STATIC_DRAW),Q.bindBuffer(Q.ARRAY_BUFFER,null),V.o=Q.createBuffer(),Q.bindBuffer(Q.ARRAY_BUFFER,V.o),Q.enableVertexAttribArray(V.j.H),Q.vertexAttribPointer(V.j.H,2,Q.FLOAT,!1,0,0),Q.bufferData(Q.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Q.STATIC_DRAW),Q.bindBuffer(Q.ARRAY_BUFFER,null),Q.uniform1i(gt,0)}ht=V.j,Q.useProgram(V.m),Q.canvas.width=j.width,Q.canvas.height=j.height,Q.viewport(0,0,j.width,j.height),Q.activeTexture(Q.TEXTURE0),V.h.bindTexture2d(j.glName),Q.enableVertexAttribArray(ht.I),Q.bindBuffer(Q.ARRAY_BUFFER,V.s),Q.vertexAttribPointer(ht.I,2,Q.FLOAT,!1,0,0),Q.enableVertexAttribArray(ht.H),Q.bindBuffer(Q.ARRAY_BUFFER,V.o),Q.vertexAttribPointer(ht.H,2,Q.FLOAT,!1,0,0),Q.bindFramebuffer(Q.DRAW_FRAMEBUFFER?Q.DRAW_FRAMEBUFFER:Q.FRAMEBUFFER,null),Q.clearColor(0,0,0,0),Q.clear(Q.COLOR_BUFFER_BIT),Q.colorMask(!0,!0,!0,!0),Q.drawArrays(Q.TRIANGLE_FAN,0,4),Q.disableVertexAttribArray(ht.I),Q.disableVertexAttribArray(ht.H),Q.bindBuffer(Q.ARRAY_BUFFER,null),V.h.bindTexture2d(0)}function As(V){this.g=V}var $i=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Rr(V,j){return j+V}function Gi(V,j){window[V]=j}function Sn(V){var j=document.createElement("script");return j.setAttribute("src",V),j.setAttribute("crossorigin","anonymous"),new Promise(function(Q){j.addEventListener("load",function(){Q()},!1),j.addEventListener("error",function(){Q()},!1),document.body.appendChild(j)})}function Ir(){return Pe(this,function V(){return E(V,function(j){switch(j.g){case 1:return j.m=2,m(j,WebAssembly.instantiate($i),4);case 4:j.g=3,j.m=0;break;case 2:return j.m=0,j.j=null,j.return(!1);case 3:return j.return(!0)}})})}function _n(V){if(this.g=V,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=V&&V.locateFile||Rr,typeof window=="object")var j=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")j=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=j,V.options){j=y(Object.keys(V.options));for(var Q=j.next();!Q.done;Q=j.next()){Q=Q.value;var ht=V.options[Q].default;ht!==void 0&&(this.j[Q]=typeof ht=="function"?ht():ht)}}}c=_n.prototype,c.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Ui(V,j){return V.g.files===void 0?[]:typeof V.g.files=="function"?V.g.files(j):V.g.files}function Vi(V){return Pe(V,function j(){var Q=this,ht,gt,Rt,Ct,et,lt,Tt,Lt,Kt,Xt,Mt;return E(j,function(Ft){switch(Ft.g){case 1:return ht=Q,Q.R?(gt=Ui(Q,Q.j),m(Ft,Ir(),2)):Ft.return();case 2:if(Rt=Ft.h,typeof window=="object")return Gi("createMediapipeSolutionsWasm",{locateFile:Q.locateFile}),Gi("createMediapipeSolutionsPackedAssets",{locateFile:Q.locateFile}),lt=gt.filter(function($){return $.data!==void 0}),Tt=gt.filter(function($){return $.data===void 0}),Lt=Promise.all(lt.map(function($){var Z=ps(ht,$.url);if($.path!==void 0){var tt=$.path;Z=Z.then(function(nt){return ht.overrideFile(tt,nt),Promise.resolve(nt)})}return Z})),Kt=Promise.all(Tt.map(function($){return $.simd===void 0||$.simd&&Rt||!$.simd&&!Rt?Sn(ht.locateFile($.url,ht.S)):Promise.resolve()})).then(function(){return Pe(ht,function $(){var Z,tt,nt=this;return E($,function(ut){if(ut.g==1)return Z=window.createMediapipeSolutionsWasm,tt=window.createMediapipeSolutionsPackedAssets,m(ut,Z(tt),2);nt.h=ut.h,ut.g=0})})}),Xt=function(){return Pe(ht,function $(){var Z=this;return E($,function(tt){return Z.g.graph&&Z.g.graph.url?tt=m(tt,ps(Z,Z.g.graph.url),0):(tt.g=0,tt=void 0),tt})})}(),m(Ft,Promise.all([Kt,Lt,Xt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Ct=gt.filter(function($){return $.simd===void 0||$.simd&&Rt||!$.simd&&!Rt}).map(function($){return ht.locateFile($.url,ht.S)}),importScripts.apply(null,t(Ct)),m(Ft,createMediapipeSolutionsWasm(Module),6);case 6:Q.h=Ft.h,Q.l=new OffscreenCanvas(1,1),Q.h.canvas=Q.l,et=Q.h.GL.createContext(Q.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),Q.h.GL.makeContextCurrent(et),Ft.g=4;break;case 7:if(Q.l=document.createElement("canvas"),Mt=Q.l.getContext("webgl2",{}),!Mt&&(Mt=Q.l.getContext("webgl",{}),!Mt))return alert("Failed to create WebGL canvas context when passing video frame."),Ft.return();Q.D=Mt,Q.h.canvas=Q.l,Q.h.createContext(Q.l,!0,!0,{});case 4:Q.i=new Q.h.SolutionWasm,Q.R=!1,Ft.g=0}})})}function pa(V){return Pe(V,function j(){var Q=this,ht,gt,Rt,Ct,et,lt,Tt,Lt;return E(j,function(Kt){if(Kt.g==1){if(Q.g.graph&&Q.g.graph.url&&Q.P===Q.g.graph.url)return Kt.return();if(Q.o=!0,!Q.g.graph||!Q.g.graph.url){Kt.g=2;return}return Q.P=Q.g.graph.url,m(Kt,ps(Q,Q.g.graph.url),3)}for(Kt.g!=2&&(ht=Kt.h,Q.i.loadGraph(ht)),gt=y(Object.keys(Q.B)),Rt=gt.next();!Rt.done;Rt=gt.next())Ct=Rt.value,Q.i.overrideFile(Ct,Q.B[Ct]);if(Q.B={},Q.g.listeners)for(et=y(Q.g.listeners),lt=et.next();!lt.done;lt=et.next())Tt=lt.value,ma(Q,Tt);Lt=Q.j,Q.j={},Q.setOptions(Lt),Kt.g=0})})}c.reset=function(){return Pe(this,function V(){var j=this;return E(V,function(Q){j.i&&(j.i.reset(),j.m={},j.s={}),Q.g=0})})},c.setOptions=function(V,j){var Q=this;if(j=j||this.g.options){for(var ht=[],gt=[],Rt={},Ct=y(Object.keys(V)),et=Ct.next();!et.done;Rt={K:Rt.K,L:Rt.L},et=Ct.next()){var lt=et.value;lt in this.j&&this.j[lt]===V[lt]||(this.j[lt]=V[lt],et=j[lt],et!==void 0&&(et.onChange&&(Rt.K=et.onChange,Rt.L=V[lt],ht.push(function(Tt){return function(){return Pe(Q,function Lt(){var Kt,Xt=this;return E(Lt,function(Mt){if(Mt.g==1)return m(Mt,Tt.K(Tt.L),2);Kt=Mt.h,Kt===!0&&(Xt.o=!0),Mt.g=0})})}}(Rt))),et.graphOptionXref&&(lt={valueNumber:et.type===1?V[lt]:0,valueBoolean:et.type===0?V[lt]:!1,valueString:et.type===2?V[lt]:""},et=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),et.graphOptionXref),lt),gt.push(et))))}(ht.length!==0||gt.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(gt),this.u=(this.u===void 0?[]:this.u).concat(ht))}};function Pr(V){return Pe(V,function j(){var Q=this,ht,gt,Rt,Ct,et,lt,Tt;return E(j,function(Lt){switch(Lt.g){case 1:if(!Q.o)return Lt.return();if(!Q.u){Lt.g=2;break}ht=y(Q.u),gt=ht.next();case 3:if(gt.done){Lt.g=5;break}return Rt=gt.value,m(Lt,Rt(),4);case 4:gt=ht.next(),Lt.g=3;break;case 5:Q.u=void 0;case 2:if(Q.A){for(Ct=new Q.h.GraphOptionChangeRequestList,et=y(Q.A),lt=et.next();!lt.done;lt=et.next())Tt=lt.value,Ct.push_back(Tt);Q.i.changeOptions(Ct),Ct.delete(),Q.A=void 0}Q.o=!1,Lt.g=0}})})}c.initialize=function(){return Pe(this,function V(){var j=this;return E(V,function(Q){return Q.g==1?m(Q,Vi(j),2):Q.g!=3?m(Q,pa(j),3):m(Q,Pr(j),0)})})};function ps(V,j){return Pe(V,function Q(){var ht=this,gt,Rt;return E(Q,function(Ct){return j in ht.F?Ct.return(ht.F[j]):(gt=ht.locateFile(j,""),Rt=fetch(gt).then(function(et){return et.arrayBuffer()}),ht.F[j]=Rt,Ct.return(Rt))})})}c.overrideFile=function(V,j){this.i?this.i.overrideFile(V,j):this.B[V]=j},c.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},c.send=function(V,j){return Pe(this,function Q(){var ht=this,gt,Rt,Ct,et,lt,Tt,Lt,Kt,Xt;return E(Q,function(Mt){switch(Mt.g){case 1:return ht.g.inputs?(gt=1e3*(j??performance.now()),m(Mt,ht.C,2)):Mt.return();case 2:return m(Mt,ht.initialize(),3);case 3:for(Rt=new ht.h.PacketDataList,Ct=y(Object.keys(V)),et=Ct.next();!et.done;et=Ct.next())if(lt=et.value,Tt=ht.g.inputs[lt]){t:{var Ft=ht,$=V[lt];switch(Tt.type){case"video":var Z=Ft.m[Tt.stream];if(Z||(Z=new Us(Ft.h,Ft.D),Ft.m[Tt.stream]=Z),Ft=Z,Ft.l===0&&(Ft.l=Ft.h.createTexture()),typeof HTMLVideoElement<"u"&&$ instanceof HTMLVideoElement){var tt=$.videoWidth;Z=$.videoHeight}else typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(tt=$.naturalWidth,Z=$.naturalHeight):(tt=$.width,Z=$.height);Z={glName:Ft.l,width:tt,height:Z},tt=Ft.g,tt.canvas.width=Z.width,tt.canvas.height=Z.height,tt.activeTexture(tt.TEXTURE0),Ft.h.bindTexture2d(Ft.l),tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,tt.RGBA,tt.UNSIGNED_BYTE,$),Ft.h.bindTexture2d(0),Ft=Z;break t;case"detections":for(Z=Ft.m[Tt.stream],Z||(Z=new As(Ft.h),Ft.m[Tt.stream]=Z),Ft=Z,Ft.data||(Ft.data=new Ft.g.DetectionListData),Ft.data.reset($.length),Z=0;Z<$.length;++Z){tt=$[Z];var nt=Ft.data,ut=nt.setBoundingBox,at=Z,ot=tt.T,dt=new ii;ue(dt,1,ot.Z),ue(dt,2,ot.$),ue(dt,3,ot.height),ue(dt,4,ot.width),ue(dt,5,ot.rotation),ue(dt,6,ot.X);var Et=ot=new ee;ae(Et,1,ge(dt,1)),ae(Et,2,ge(dt,2)),ae(Et,3,ge(dt,3)),ae(Et,4,ge(dt,4)),ae(Et,5,ge(dt,5));var Pt=ge(dt,6);if(Pt!=null&&Pt!=null){yt(Et.g,48);var Ot=Et.g,Vt=Pt;Pt=0>Vt,Vt=Math.abs(Vt);var Ht=Vt>>>0;for(Vt=Math.floor((Vt-Ht)/4294967296),Vt>>>=0,Pt&&(Vt=~Vt>>>0,Ht=(~Ht>>>0)+1,4294967295<Ht&&(Ht=0,Vt++,4294967295<Vt&&(Vt=0))),K=Ht,q=Vt,Pt=K,Ht=q;0<Ht||127<Pt;)Ot.push(Pt&127|128),Pt=(Pt>>>7|Ht<<25)>>>0,Ht>>>=7;Ot.push(Pt)}if(Re(dt,Et),ot=fe(ot),ut.call(nt,at,ot),tt.O)for(nt=0;nt<tt.O.length;++nt)dt=tt.O[nt],Et=!!dt.visibility,ut=Ft.data,at=ut.addNormalizedLandmark,ot=Z,dt=Object.assign(Object.assign({},dt),{visibility:Et?dt.visibility:0}),Et=new Ge,ue(Et,1,dt.x),ue(Et,2,dt.y),ue(Et,3,dt.z),dt.visibility&&ue(Et,4,dt.visibility),Ot=dt=new ee,ae(Ot,1,ge(Et,1)),ae(Ot,2,ge(Et,2)),ae(Ot,3,ge(Et,3)),ae(Ot,4,ge(Et,4)),ae(Ot,5,ge(Et,5)),Re(Et,Ot),dt=fe(dt),at.call(ut,ot,dt);if(tt.M)for(nt=0;nt<tt.M.length;++nt){if(ut=Ft.data,at=ut.addClassification,ot=Z,dt=tt.M[nt],Et=new sn,ue(Et,2,dt.Y),dt.index&&ue(Et,1,dt.index),dt.label&&ue(Et,3,dt.label),dt.displayName&&ue(Et,4,dt.displayName),Ot=dt=new ee,Ht=ge(Et,1),Ht!=null&&Ht!=null)if(yt(Ot.g,8),Pt=Ot.g,0<=Ht)yt(Pt,Ht);else{for(Vt=0;9>Vt;Vt++)Pt.push(Ht&127|128),Ht>>=7;Pt.push(1)}ae(Ot,2,ge(Et,2)),Pt=ge(Et,3),Pt!=null&&(Pt=z(Pt),yt(Ot.g,26),yt(Ot.g,Pt.length),te(Ot,Ot.g.end()),te(Ot,Pt)),Pt=ge(Et,4),Pt!=null&&(Pt=z(Pt),yt(Ot.g,34),yt(Ot.g,Pt.length),te(Ot,Ot.g.end()),te(Ot,Pt)),Re(Et,Ot),dt=fe(dt),at.call(ut,ot,dt)}}Ft=Ft.data;break t;default:Ft={}}}switch(Lt=Ft,Kt=Tt.stream,Tt.type){case"video":Rt.pushTexture2d(Object.assign(Object.assign({},Lt),{stream:Kt,timestamp:gt}));break;case"detections":Xt=Lt,Xt.stream=Kt,Xt.timestamp=gt,Rt.pushDetectionList(Xt);break;default:throw Error("Unknown input config type: '"+Tt.type+"'")}}return ht.i.send(Rt),m(Mt,ht.C,4);case 4:Rt.delete(),Mt.g=0}})})};function Fr(V,j,Q){return Pe(V,function ht(){var gt,Rt,Ct,et,lt,Tt,Lt=this,Kt,Xt,Mt,Ft,$,Z,tt,nt;return E(ht,function(ut){switch(ut.g){case 1:if(!Q)return ut.return(j);for(gt={},Rt=0,Ct=y(Object.keys(Q)),et=Ct.next();!et.done;et=Ct.next())lt=et.value,Tt=Q[lt],typeof Tt!="string"&&Tt.type==="texture"&&j[Tt.stream]!==void 0&&++Rt;1<Rt&&(Lt.G=!1),Kt=y(Object.keys(Q)),et=Kt.next();case 2:if(et.done){ut.g=4;break}if(Xt=et.value,Mt=Q[Xt],typeof Mt=="string")return tt=gt,nt=Xt,m(ut,Nr(Lt,Xt,j[Mt]),14);if(Ft=j[Mt.stream],Mt.type==="detection_list"){if(Ft){for(var at=Ft.getRectList(),ot=Ft.getLandmarksList(),dt=Ft.getClassificationsList(),Et=[],Pt=0;Pt<at.size();++Pt){var Ot=at.get(Pt);t:{var Vt=new ii;for(Ot=new xt(Ot);It(Ot);)switch(Ot.i){case 13:var Ht=Bt(Ot);ue(Vt,1,Ht);break;case 21:Ht=Bt(Ot),ue(Vt,2,Ht);break;case 29:Ht=Bt(Ot),ue(Vt,3,Ht);break;case 37:Ht=Bt(Ot),ue(Vt,4,Ht);break;case 45:Ht=Bt(Ot),ue(Vt,5,Ht);break;case 48:Ht=ft(Ot.g),ue(Vt,6,Ht);break;default:if(!xe(Vt,Ot))break t}}Vt={Z:tn(Vt,1),$:tn(Vt,2),height:tn(Vt,3),width:tn(Vt,4),rotation:tn(Vt,5,0),X:Rn(Vt,6,0)},Ot=wt(br(ot.get(Pt)),Ge).map(Gs);var Qt=dt.get(Pt);t:for(Ht=new Jn,Qt=new xt(Qt);It(Qt);)switch(Qt.i){case 10:Ht.addClassification(Zt(Qt,new sn,Ds));break;default:if(!xe(Ht,Qt))break t}Vt={T:Vt,O:Ot,M:Bi(Ht)},Et.push(Vt)}at=Et}else at=[];gt[Xt]=at,ut.g=7;break}if(Mt.type==="proto_list"){if(Ft){for(at=Array(Ft.size()),ot=0;ot<Ft.size();ot++)at[ot]=Ft.get(ot);Ft.delete()}else at=[];gt[Xt]=at,ut.g=7;break}if(Ft===void 0){ut.g=3;break}if(Mt.type==="float_list"){gt[Xt]=Ft,ut.g=7;break}if(Mt.type==="proto"){gt[Xt]=Ft,ut.g=7;break}if(Mt.type!=="texture")throw Error("Unknown output config type: '"+Mt.type+"'");return $=Lt.s[Xt],$||($=new Us(Lt.h,Lt.D),Lt.s[Xt]=$),m(ut,bs($,Ft,Lt.G),13);case 13:Z=ut.h,gt[Xt]=Z;case 7:Mt.transform&&gt[Xt]&&(gt[Xt]=Mt.transform(gt[Xt])),ut.g=3;break;case 14:tt[nt]=ut.h;case 3:et=Kt.next(),ut.g=2;break;case 4:return ut.return(gt)}})})}function Nr(V,j,Q){return Pe(V,function ht(){var gt=this,Rt;return E(ht,function(Ct){return typeof Q=="number"||Q instanceof Uint8Array||Q instanceof gt.h.Uint8BlobList?Ct.return(Q):Q instanceof gt.h.Texture2dDataOut?(Rt=gt.s[j],Rt||(Rt=new Us(gt.h,gt.D),gt.s[j]=Rt),Ct.return(bs(Rt,Q,gt.G))):Ct.return(void 0)})})}function ma(V,j){for(var Q=j.name||"$",ht=[].concat(t(j.wants)),gt=new V.h.StringList,Rt=y(j.wants),Ct=Rt.next();!Ct.done;Ct=Rt.next())gt.push_back(Ct.value);Rt=V.h.PacketListener.implement({onResults:function(et){for(var lt={},Tt=0;Tt<j.wants.length;++Tt)lt[ht[Tt]]=et.get(Tt);var Lt=V.listeners[Q];Lt&&(V.C=Fr(V,lt,j.outs).then(function(Kt){Kt=Lt(Kt);for(var Xt=0;Xt<j.wants.length;++Xt){var Mt=lt[ht[Xt]];typeof Mt=="object"&&Mt.hasOwnProperty&&Mt.hasOwnProperty("delete")&&Mt.delete()}Kt&&(V.C=Kt)}))}}),V.i.attachMultiListener(gt,Rt),gt.delete()}c.onResults=function(V,j){this.listeners[j||"$"]=V},P("Solution",_n),P("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function va(V){V=Ar(V);var j=V.getMesh();if(!j)return V;var Q=new Float32Array(j.getVertexBufferList());j.getVertexBufferList=function(){return Q};var ht=new Uint32Array(j.getIndexBufferList());return j.getIndexBufferList=function(){return ht},V}var oi={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(V){return V.map(va)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(V){return V.map(function(j){return wt(br(j),Ge).map(Gs)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Rs=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],ui=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],li=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],hi=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Vs=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],fi=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],zi=[].concat(t(Rs),t(ui),t(li),t(hi),t(Vs),t(fi));function ci(V){V=V||{},V=Object.assign(Object.assign({},oi),V),this.g=new _n(V)}c=ci.prototype,c.close=function(){return this.g.close(),Promise.resolve()},c.onResults=function(V){this.g.onResults(V)},c.initialize=function(){return Pe(this,function V(){var j=this;return E(V,function(Q){return m(Q,j.g.initialize(),0)})})},c.reset=function(){this.g.reset()},c.send=function(V){return Pe(this,function j(){var Q=this;return E(j,function(ht){return m(ht,Q.g.send(V),0)})})},c.setOptions=function(V){this.g.setOptions(V)},P("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),P("FaceMesh",ci),P("FACEMESH_LIPS",Rs),P("FACEMESH_LEFT_EYE",ui),P("FACEMESH_LEFT_EYEBROW",li),P("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),P("FACEMESH_RIGHT_EYE",hi),P("FACEMESH_RIGHT_EYEBROW",Vs),P("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),P("FACEMESH_FACE_OVAL",fi),P("FACEMESH_CONTOURS",zi),P("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),P("matrixDataToMatrix",function(V){for(var j=V.getCols(),Q=V.getRows(),ht=V.getPackedDataList(),gt=[],Rt=0;Rt<Q;Rt++)gt.push(Array(j));for(Rt=0;Rt<Q;Rt++)for(var Ct=0;Ct<j;Ct++){var et=V.getLayout()===1?Rt*j+Ct:Ct*Q+Rt;gt[Rt][Ct]=ht[et]}return gt}),P("VERSION","0.4.1633559619")}).call(Kn);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ie;(function(c){c[c.float32=0]="float32",c[c.int32=1]="int32",c[c.bool=2]="bool",c[c.string=3]="string",c[c.complex64=4]="complex64"})(Ie||(Ie={}));var Ya;(function(c){c[c.linear=0]="linear",c[c.relu=1]="relu",c[c.relu6=2]="relu6",c[c.prelu=3]="prelu",c[c.leakyrelu=4]="leakyrelu",c[c.sigmoid=5]="sigmoid",c[c.elu=6]="elu"})(Ya||(Ya={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let L0;function kO(c){L0=c.wasm.cwrap(Fa,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function WO(c){const{inputs:e,backend:f,attrs:x}=c,{a:S,b:C,bias:o,preluActivationWeights:y}=e;if(S.dtype!=="float32"||C.dtype!=="float32")throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:t,transposeB:s,activation:l,leakyreluAlpha:a}=x,r=f.dataIdMap.get(S.dataId).id,i=f.dataIdMap.get(C.dataId).id;let n=0;if(o!=null){const b=f.dataIdMap.get(o.dataId);if(b.shape.length!==1)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${b.shape.length}.`);n=b.id}const h=y==null?0:f.dataIdMap.get(y.dataId).id,d=Ya[l];if(d==null)throw new Error(`${l} activation not yet supported for FusedConv2D in the wasm backend.`);const u=t?S.shape[2]:S.shape[1],p=s?C.shape[1]:C.shape[2],m=Te(S.shape.slice(0,-2),C.shape.slice(0,-2)),v=f.makeOutput([...m,u,p],S.dtype),g=f.dataIdMap.get(v.dataId).id,T=new Uint8Array(new Int32Array(S.shape).buffer),w=new Uint8Array(new Int32Array(C.shape).buffer);return L0(r,T,S.shape.length,i,w,C.shape.length,t,s,d,n,h,a||0,g),v}const XO={kernelName:Fa,backendName:"wasm",setupFunc:kO,kernelFunc:WO};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ee(c,e){let f;function x(C){f=C.wasm.cwrap(c,null,["number","number","number"])}function S(C){const{backend:o,inputs:{x:y}}=C,t=o.dataIdMap.get(y.dataId).id,s=o.makeOutput(y.shape,e||y.dtype),l=o.dataIdMap.get(s.dataId).id;return bt(s.shape)===0||f(t,Ie[y.dtype],l),s}return{kernelName:c,backendName:"wasm",setupFunc:x,kernelFunc:S}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HO=Ee($h);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YO=Ee(Gh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KO=Ee(Uh);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function en(c,e,f){let x;function S(o){x=o.wasm.cwrap(c,null,["number","array","number","number","array","number","number","number"])}function C(o){const{backend:y,inputs:t}=o,{a:s,b:l}=t,a=y.dataIdMap.get(s.dataId).id,r=y.dataIdMap.get(l.dataId).id,i=f??s.dtype,n=Te(s.shape,l.shape),h=y.makeOutput(n,i);if(bt(n)===0)return h;const d=new Uint8Array(new Int32Array(s.shape).buffer),u=new Uint8Array(new Int32Array(l.shape).buffer),p=y.dataIdMap.get(h.dataId).id;return(()=>x(a,d,s.shape.length,r,u,l.shape.length,Ie[s.dtype],p))(),h}return{kernelName:c,backendName:"wasm",setupFunc:S,kernelFunc:C}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jO=en(Qo);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let B0;function ZO(c){B0=c.wasm.cwrap(Jo,null,["array","number","number","number"])}function QO(c){const{inputs:e,backend:f}=c,x=f.makeOutput(e[0].shape,e[0].dtype);if(bt(x.shape)===0)return x;const S=e.map(y=>f.dataIdMap.get(y.dataId).id),C=new Uint8Array(new Int32Array(S).buffer),o=f.dataIdMap.get(x.dataId).id;return B0(C,S.length,Ie[x.dtype],o),x}const JO={kernelName:Jo,backendName:"wasm",setupFunc:ZO,kernelFunc:QO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vl(c){const{inputs:{x:e},backend:f}=c;if(e.dtype==="string")return ys(f.readSync(e.dataId),e.shape,e.dtype);const x=f.makeOutput(e.shape,e.dtype),S=f.typedArrayFromHeap(e);return f.typedArrayFromHeap(x).set(S),x}const qO={kernelName:xu,backendName:"wasm",kernelFunc:vl};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let $0;function _O(c){$0=c.wasm.cwrap(Vr,null,["number","array","number","number","number","array","number"])}function Ai(c){const{inputs:e,backend:f,attrs:x}=c,[S,C]=eD(e.x.shape,x.perm);let o=!0;for(let n=0;n<C.length;n++)C[n]!==n&&(o=!1);const y=tD(e.x.shape,x.perm),t={dataId:e.x.dataId,shape:S,dtype:e.x.dtype};if(o){const n=vl({inputs:e,backend:f});return n.shape=y,n}const s=f.makeOutput(y,t.dtype),l=f.dataIdMap.get(t.dataId).id,a=f.dataIdMap.get(s.dataId).id,r=new Uint8Array(new Int32Array(C).buffer),i=new Uint8Array(new Int32Array(t.shape).buffer);return $0(l,i,t.shape.length,Ie[t.dtype],a,r,C.length),s}function tD(c,e){const f=new Array(c.length);for(let x=0;x<f.length;x++)f[x]=c[e[x]];return f}function eD(c,e){const f=[],x=[];for(let S=0;S<c.length;++S)c[S]!==1&&f.push(c[S]),c[e[S]]!==1&&x.push(e[S]);for(let S=0;S<x.length;++S){let C=-1;for(let o=0;o<x.length;++o)x[o]>=S&&(C===-1||x[C]>x[o])&&(C=o);x[C]=S}return[f,x]}const nD={kernelName:Vr,backendName:"wasm",kernelFunc:Ai,setupFunc:_O};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Di(c,e,f){const x=c.shape,S=c.shape.length,C=Qe(e,x);let o=C;const y=Ln(o,S);let t=null,s=!1;if(y!=null){const l=new Array(S);for(let i=0;i<l.length;i++)l[i]=x[y[i]];o=pn(o.length,S),t=Ai({inputs:{x:c},attrs:{perm:y},backend:f});const a=f.dataIdMap.get(c.dataId).id;f.dataIdMap.get(t.dataId).id!==a&&(s=!0)}return{transposed:t,originalAxes:C,axes:o,inputWasTransposed:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let G0;function sD(c){G0=c.wasm.cwrap(qo,null,["number, number, number"])}function iD(c){const{backend:e,inputs:f,attrs:x}=c,{axis:S,keepDims:C}=x,{x:o}=f;let t=e.dataIdMap.get(o.dataId).id,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Di(o,S,e);if(i){const m=e.dataIdMap.get(l.dataId).id;s=l,t=m}const n=s.shape.length;an("all",a,n);const[h,d]=yn(s.shape,a),u=bt(d),p=e.makeOutput(h,o.dtype);if(bt(s.shape)!==0){const m=e.dataIdMap.get(p.dataId).id;G0(t,u,m)}if(i&&e.disposeData(l.dataId),C){const m=rn(p.shape,r);p.shape=m}return p}const rD={kernelName:qo,backendName:"wasm",setupFunc:sD,kernelFunc:iD};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let U0;function aD(c){U0=c.wasm.cwrap(_o,null,["number, number, number"])}function oD(c){const{backend:e,inputs:f,attrs:x}=c,{axis:S,keepDims:C}=x,{x:o}=f;let t=e.dataIdMap.get(o.dataId).id,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Di(o,S,e);if(i){const m=e.dataIdMap.get(l.dataId).id;s=l,t=m}const n=s.shape.length;an("any",a,n);const[h,d]=yn(s.shape,a),u=bt(d),p=e.makeOutput(h,o.dtype);if(bt(s.shape)!==0){const m=e.dataIdMap.get(p.dataId).id;U0(t,u,m)}if(i&&e.disposeData(l.dataId),C){const m=rn(p.shape,r);p.shape=m}return p}const uD={kernelName:_o,backendName:"wasm",setupFunc:aD,kernelFunc:oD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V0(c){let e;function f(S){e=S.wasm.cwrap(c,null,["number","number","number","number","number"])}function x(S){const{backend:C,inputs:o,attrs:y}=S,{axis:t}=y,{x:s}=o,l=C.dataIdMap.get(s.dataId).id;let a=l,r=s;const{transposed:i,axes:n,inputWasTransposed:h}=Di(s,t,C);if(h){const g=C.dataIdMap.get(i.dataId).id;g!==l&&(r=i,a=g)}const d=r.shape.slice(0,-1),u=C.makeOutput(d,"int32"),p=C.dataIdMap.get(u.dataId).id,m=bt(u.shape),v=r.shape[n[0]];return e(a,Ie[r.dtype],m,v,p),h&&C.disposeData(i.dataId),u}return{kernelName:c,backendName:"wasm",setupFunc:f,kernelFunc:x}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lD=V0(Vh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hD=V0(zh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fD=Ee(kh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cD=Ee(Wh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dD=Ee(Xh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pD=en(Yh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mD=Ee(Hh);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let z0;function vD(c){z0=c.wasm.cwrap(tu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function gD(c){const{inputs:e,attrs:f,backend:x}=c,S=e.x,C=x.dataIdMap.get(S.dataId).id,{filterSize:o,strides:y,pad:t,dimRoundingMode:s}=f,l=hs(S.shape,o,y,1,t,s),a=l.filterHeight,r=l.filterWidth,i=l.padInfo.top,n=l.padInfo.right,h=l.padInfo.bottom,d=l.padInfo.left,u=l.strideHeight,p=l.strideWidth,m=l.inChannels;if(l.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);if(l.dilationWidth!==1||l.dilationHeight!==1)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${l.dilationHeight}, ${l.dilationWidth}].`);const v=x.makeOutput(l.outShape,"float32"),g=x.dataIdMap.get(v.dataId).id;return z0(C,S.shape[0],S.shape[1],S.shape[2],a,r,i,n,h,d,u,p,m,g),v}const xD={kernelName:tu,backendName:"wasm",setupFunc:vD,kernelFunc:gD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let k0;function yD(c){k0=c.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function TD(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{filterSize:C,strides:o,pad:y,dimRoundingMode:t,dataFormat:s}=x,l=_s(S.shape,C,o,1,y,t,s),a=f.makeOutput(l.outShape,S.dtype);return k0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),a}const SD={kernelName:Kh,backendName:"wasm",setupFunc:yD,kernelFunc:TD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let W0;function CD(c){W0=c.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function ED(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,input:C}=e,{filterSize:o,strides:y,pad:t,dimRoundingMode:s}=x,l=_s(C.shape,o,y,1,t,s),a=f.makeOutput(C.shape,C.dtype);return W0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left,l.filterDepth,l.filterHeight,l.filterWidth),a}const wD={kernelName:om,backendName:"wasm",setupFunc:CD,kernelFunc:ED};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let X0;function bD(c){X0=c.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function AD(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,input:C}=e,{filterSize:o,strides:y,pad:t}=x,s=hs(C.shape,o,y,1,t),l=f.makeOutput(C.shape,C.dtype);return X0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(l.dataId).id,s.batchSize,s.inChannels,s.inHeight,s.inWidth,s.outHeight,s.outWidth,s.strideHeight,s.strideWidth,s.dilationHeight,s.dilationWidth,s.effectiveFilterHeight,s.effectiveFilterWidth,s.padInfo.top,s.padInfo.left,s.filterHeight,s.filterWidth),l}const RD={kernelName:am,backendName:"wasm",setupFunc:bD,kernelFunc:AD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mn(c){const{inputs:e,attrs:f}=c,{x}=e,{shape:S}=f,C=bt(x.shape),o=em(S,C);return it(C===bt(o),()=>`new shape: ${o}, old shape: ${x.shape}. New shape and old shape must have the same number of elements.`),c.backend.incRef(x.dataId),{dataId:x.dataId,shape:o,dtype:x.dtype}}const ID={kernelName:Xf,backendName:"wasm",kernelFunc:Mn};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let H0;function PD(c){H0=c.wasm.cwrap(eu,null,["number","array","number","number","array","number","number","number","number"])}function FD(c){const{inputs:e,backend:f,attrs:x}=c,{a:S,b:C}=e,{transposeA:o,transposeB:y}=x;if(S.dtype!=="float32"||C.dtype!=="float32")throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const t=S.shape.length,s=C.shape.length,l=o?S.shape[t-2]:S.shape[t-1],a=y?C.shape[s-1]:C.shape[s-2],r=o?S.shape[t-1]:S.shape[t-2],i=y?C.shape[s-2]:C.shape[s-1],n=S.shape.slice(0,-2),h=C.shape.slice(0,-2),d=bt(n),u=bt(h),m=Te(S.shape.slice(0,-2),C.shape.slice(0,-2)).concat([r,i]);it(l===a,()=>`Error in matMul: inner shapes (${l}) and (${a}) of Tensors with shapes ${S.shape} and ${C.shape} and transposeA=${o} and transposeB=${y} must match.`);const v=o?[d,l,r]:[d,r,l],g=y?[u,i,a]:[u,a,i],T=Mn({inputs:{x:S},backend:f,attrs:{shape:v}}),w=Mn({inputs:{x:C},backend:f,attrs:{shape:g}}),b=f.dataIdMap.get(T.dataId).id,E=f.dataIdMap.get(w.dataId).id,A=o?T.shape[2]:T.shape[1],R=y?w.shape[1]:w.shape[2],I=Math.max(d,u),P=f.makeOutput([I,A,R],T.dtype),N=f.dataIdMap.get(P.dataId).id,F=new Uint8Array(new Int32Array(T.shape).buffer),O=new Uint8Array(new Int32Array(w.shape).buffer);return H0(b,F,T.shape.length,E,O,w.shape.length,o,y,N),f.disposeData(T.dataId),f.disposeData(w.dataId),P.shape=m,P}const ND={kernelName:eu,backendName:"wasm",setupFunc:PD,kernelFunc:FD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pr(c){const{inputs:{x:e},attrs:{begin:f,size:x},backend:S}=c,[C,o]=Kc(e,f,x),y=ul(e.shape,C,o),t=S.readSync(e.dataId),s=S.makeOutput(o,e.dtype),l=Ne(e.shape),a=S.dataIdMap.get(s.dataId);if(y){const n=ll(C,l);return e.dtype==="string"?a.stringBytes=t.slice(n,n+bt(o)):S.typedArrayFromHeap(s).set(t.subarray(n,n+bt(o))),s}if(e.dtype==="string"){const n=fh(t,C,o,e.shape,e.dtype);return a.stringBytes=n,s}const r=S.typedArrayFromHeap(s),i=e.shape.length;if(i===2)MD(t,l[0],r,C,o);else if(i===3)OD(t,l[0],l[1],r,C,o);else if(i===4)DD(t,l[0],l[1],l[2],r,C,o);else{const n=fh(t,C,o,e.shape,e.dtype);r.set(n)}return s}function MD(c,e,f,x,S){let C=0;const o=x[0],y=x[1],t=o+S[0];for(let s=o;s<t;s++){const l=s*e+y;f.set(c.subarray(l,l+S[1]),C),C+=S[1]}}function OD(c,e,f,x,S,C){let o=0;const y=S[0],t=S[1],s=S[2],l=y+C[0],a=t+C[1];for(let r=y;r<l;r++)for(let i=t;i<a;i++){const n=r*e+i*f+s;x.set(c.subarray(n,n+C[2]),o),o+=C[2]}}function DD(c,e,f,x,S,C,o){let y=0;const t=C[0],s=C[1],l=C[2],a=t+o[0],r=s+o[1],i=l+o[2],n=C[3];for(let h=t;h<a;h++)for(let d=s;d<r;d++)for(let u=l;u<i;u++){const p=h*e+d*f+u*x+n;S.set(c.subarray(p,p+o[3]),y),y+=o[3]}}const LD={kernelName:qf,backendName:"wasm",kernelFunc:pr};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BD(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{blockShape:C,crops:o}=x,y=C.reduce((u,p)=>u*p),t=_a(S.shape,C,y),s=to(t.length,C.length),l=eo(S.shape,C,y),a=qc(o,C.length),r=_c(l,o,C.length),i=Mn({inputs:{x:S},backend:f,attrs:{shape:t}}),n=Ai({inputs:{x:i},backend:f,attrs:{perm:s}}),h=Mn({inputs:{x:n},backend:f,attrs:{shape:l}}),d=pr({inputs:{x:h},backend:f,attrs:{begin:a,size:r}});return f.disposeData(i.dataId),f.disposeData(n.dataId),f.disposeData(h.dataId),d}const $D={kernelName:jh,backendName:"wasm",kernelFunc:BD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Y0;function GD(c){Y0=c.wasm.cwrap(nu,null,["number","number","boolean","number","number","number"])}function UD(c){const{backend:e,inputs:f,attrs:x}=c,{x:S,weights:C}=f,{size:o}=x,y=C.shape.reduce((a,r)=>a*r,1)!==0,t=S.shape.length===1?[o]:[S.shape[0],o],s=e.makeOutput(t,C.dtype);function l(a){return e.dataIdMap.get(a.dataId).id}return Y0(l(S),o,y,l(C),Ie[C.dtype],l(s)),s}const VD={kernelName:nu,backendName:"wasm",setupFunc:GD,kernelFunc:UD};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zD=en(Zh);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kD(c){const{inputs:e,backend:f}=c,{s0:x,s1:S}=e,C=f.typedArrayFromHeap(x),o=f.typedArrayFromHeap(S),y=Te(Array.from(C),Array.from(o));return f.makeOutput([y.length],"int32",void 0,new Int32Array(y))}const WD={kernelName:Qh,backendName:"wasm",kernelFunc:kD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Li(c){const{inputs:{x:e},attrs:{dtype:f},backend:x}=c,S=x.makeOutput(e.shape,f),C=x.typedArrayFromHeap(e);return x.typedArrayFromHeap(S).set(C),S}const XD={kernelName:su,backendName:"wasm",kernelFunc:Li};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HD=Ee(Jh);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let K0;function YD(c){K0=c.wasm.cwrap(iu,null,["number","number","number","number"])}function KD(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{clipValueMin:C,clipValueMax:o}=x,y=f.dataIdMap.get(S.dataId).id,t=f.makeOutput(S.shape,S.dtype),s=f.dataIdMap.get(t.dataId).id;return K0(y,C,o,s),t}const jD={kernelName:iu,backendName:"wasm",setupFunc:YD,kernelFunc:KD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0(c){const{inputs:e,backend:f}=c,x=Qe(c.attrs.axis,e[0].shape)[0],S=e.map(i=>i.shape);Zc(S,x);let C=Ns(e.map(i=>i.shape),x);const o=e.filter(i=>bt(i.shape)>0);if(o.length===1)return vl({inputs:{x:o[0]},backend:f});const y=f.makeOutput(C,e[0].dtype);if(bt(C)===0)return y;if(o[0].dtype==="string"){const i=o.map(m=>{const g=[-1,bt(m.shape.slice(x))];return Mn({inputs:{x:m},backend:f,attrs:{shape:g}})}),n=i.map(m=>({vals:f.readSync(m.dataId),shape:m.shape}));C=Ns(i.map(m=>m.shape),1);const h=i[0].shape[0]===1,d=Yg(n,C,e[0].dtype,h),u=Ns(o.map(m=>m.shape),x);y.shape=u;const p=f.dataIdMap.get(y.dataId);return p.stringBytes=dd(d),i.forEach(m=>f.disposeData(m.dataId)),y}const t=bt(o[0].shape.slice(0,x));let s=0;const l=o.map(i=>{const n=bt(i.shape.slice(x));return s+=n,n}),a=o.map(i=>f.typedArrayFromHeap(i)),r=f.typedArrayFromHeap(y);for(let i=0;i<t;i++){let n=i*s;for(let h=0;h<a.length;h++){const d=l[h],u=i*d,p=a[h].subarray(u,u+d);r.set(p,n),n+=d}}return y}const ZD={kernelName:qh,backendName:"wasm",kernelFunc:j0};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Z0;function QD(c){Z0=c.wasm.cwrap(ru,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function JD(c){const{inputs:e,attrs:f,backend:x}=c,{x:S,filter:C}=e,o=x.dataIdMap.get(S.dataId).id,y=x.dataIdMap.get(C.dataId).id,{strides:t,dilations:s,pad:l,dimRoundingMode:a,dataFormat:r}=f,i=Mi(r),n=dn(S.shape,C.shape,t,s,l,a,!1,i),h=n.filterHeight,d=n.filterWidth,u=n.padInfo.top,p=n.padInfo.right,m=n.padInfo.bottom,v=n.padInfo.left,g=n.dilationHeight,T=n.dilationWidth,w=n.strideHeight,b=n.strideWidth,E=n.inChannels,A=n.outChannels,R=n.padInfo.type==="SAME"?1:0;if(n.dataFormat!=="channelsLast")throw new Error(`wasm backend Conv2D does not support dataFormat:'${n.dataFormat}'. Please use 'channelsLast'.`);const I=x.makeOutput(n.outShape,"float32"),P=x.dataIdMap.get(I.dataId).id;return Z0(o,S.shape[0],S.shape[1],S.shape[2],y,h,d,u,p,m,v,R,g,T,w,b,E,A,P),I}const qD={kernelName:ru,backendName:"wasm",setupFunc:QD,kernelFunc:JD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Q0;function _D(c){Q0=c.wasm.cwrap(au,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function tL(c){const{backend:e,inputs:f,attrs:x}=c,{dy:S,filter:C}=f,{strides:o,pad:y,dataFormat:t,dimRoundingMode:s,inputShape:l}=x,a=1,r=Mi(t),i=dn(l,C.shape,o,a,y,s,!1,r),{batchSize:n,filterHeight:h,filterWidth:d,inChannels:u,inHeight:p,inWidth:m,outChannels:v,outHeight:g,outWidth:T,strideHeight:w,strideWidth:b}=i,E=h-1-i.padInfo.top,A=d-1-i.padInfo.left,R=i.dataFormat==="channelsLast",I=Ne(i.inShape),P=Ne(S.shape),[N,F,O]=Ne(C.shape),D=I[0],L=R?I[1]:I[2],z=R?I[2]:1,X=R?1:I[1],H=P[0],J=R?P[1]:P[2],G=R?P[2]:1,k=R?1:P[1],M=e.makeOutput(i.inShape,"float32"),B=e.dataIdMap.get(M.dataId).id,U=e.dataIdMap.get(S.dataId).id,W=e.dataIdMap.get(C.dataId).id;return Q0(U,W,n,h,d,p,m,u,g,T,v,w,b,E,A,N,F,O,D,L,z,X,H,J,G,k,B),M}const eL={kernelName:au,backendName:"wasm",setupFunc:_D,kernelFunc:tL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let J0;function nL(c){J0=c.wasm.cwrap(ou,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function sL(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C}=e,{strides:o,pad:y,dilations:t}=x;if(S.dtype!=="float32")throw new Error(`Tensor x must have dtype float32, got ${S.dtype}`);if(C.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${C.dtype}`);const s=Ni(S.shape,C.shape,o,t,y),l=f.makeOutput(s.outShape,S.dtype);return J0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(l.dataId).id,s.batchSize,s.inDepth,s.inHeight,s.inWidth,s.inChannels,s.outDepth,s.outHeight,s.outWidth,s.outChannels,s.strideDepth,s.strideHeight,s.strideWidth,s.dilationDepth,s.dilationHeight,s.dilationWidth,s.filterDepth,s.filterHeight,s.filterWidth,s.padInfo.front,s.padInfo.top,s.padInfo.left),l}const iL={kernelName:ou,backendName:"wasm",setupFunc:nL,kernelFunc:sL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let q0;function rL(c){q0=c.wasm.cwrap(_h,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function aL(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,dy:C}=e,{strides:o,pad:y,filterShape:t}=x;if(S.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${S.dtype}`);if(C.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${C.dtype}`);const s=Ni(S.shape,t,o,1,y),l=f.makeOutput(s.filterShape,C.dtype);return q0(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(l.dataId).id,s.batchSize,s.inDepth,s.inHeight,s.inWidth,s.inChannels,s.outDepth,s.outHeight,s.outWidth,s.outChannels,s.strideDepth,s.strideHeight,s.strideWidth,s.dilationDepth,s.dilationHeight,s.dilationWidth,s.filterDepth,s.filterHeight,s.filterWidth,s.padInfo.front,s.padInfo.top,s.padInfo.left),l}const oL={kernelName:_h,backendName:"wasm",setupFunc:rL,kernelFunc:aL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _0;function uL(c){_0=c.wasm.cwrap(uu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function lL(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,filter:C}=e,{pad:o,strides:y,inputShape:t}=x;if(S.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${S.dtype}`);if(C.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${C.dtype}`);const s=Ni(t,C.shape,y,1,o),l=f.makeOutput(s.inShape,S.dtype);return _0(f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(l.dataId).id,s.batchSize,s.inDepth,s.inHeight,s.inWidth,s.inChannels,s.outDepth,s.outHeight,s.outWidth,s.outChannels,s.strideDepth,s.strideHeight,s.strideWidth,s.dilationDepth,s.dilationHeight,s.dilationWidth,s.filterDepth,s.filterHeight,s.filterWidth,s.padInfo.front,s.padInfo.top,s.padInfo.left),l}const hL={kernelName:uu,backendName:"wasm",setupFunc:uL,kernelFunc:lL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fL=Ee(tf);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cL=Ee(ef);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var mh;(function(c){c[c.bilinear=0]="bilinear",c[c.nearest=1]="nearest"})(mh||(mh={}));let t1;function dL(c){t1=c.wasm.cwrap(fu,null,["number","number","number","number","array","number","number","number","number","number"])}function pL(c){const{backend:e,inputs:f,attrs:x}=c,{method:S,extrapolationValue:C,cropSize:o}=x,{image:y,boxes:t,boxInd:s}=f,l=t.shape[0],[a,r]=o,i=[l,a,r,y.shape[3]];let n=e.dataIdMap.get(y.dataId),h;y.dtype!=="float32"&&(h=Li({backend:e,inputs:{x:y},attrs:{dtype:"float32"}}),n=e.dataIdMap.get(h.dataId));const d=n.id,u=e.dataIdMap.get(t.dataId).id,p=e.dataIdMap.get(s.dataId).id,m=e.makeOutput(i,"float32"),v=e.dataIdMap.get(m.dataId).id,g=new Uint8Array(new Int32Array(y.shape).buffer);return t1(d,u,p,l,g,a,r,mh[S],C,v),h!=null&&e.disposeData(h.dataId),m}const mL={kernelName:fu,backendName:"wasm",setupFunc:dL,kernelFunc:pL};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e1;function vL(c){e1=c.wasm.cwrap(lu,null,["number","number","number","number","number","number"])}function gL(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C,exclusive:o,reverse:y}=x,t=S.shape.length;it(S.dtype==="float32"||S.dtype==="int32",()=>`cumprod does not support ${S.dtype} tensors in the WASM backend`);const s=Ln([C],t);let l=S;s!==null&&(l=Ai({inputs:{x:S},attrs:{perm:s},backend:f}));const a=pn(1,t)[0];an("cumprod",[a],t);const r=f.makeOutput(l.shape,l.dtype),i=l.shape[a],n=f.dataIdMap.get(l.dataId).id,h=f.dataIdMap.get(r.dataId).id;e1(n,o?1:0,y?1:0,i,h,Ie[S.dtype]);let d=r;if(s!==null){const u=Ja(s);d=Ai({inputs:{x:r},attrs:{perm:u},backend:f}),f.disposeData(l.dataId),f.disposeData(r.dataId)}return d}const xL={kernelName:lu,backendName:"wasm",setupFunc:vL,kernelFunc:gL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let n1;function yL(c){n1=c.wasm.cwrap(hu,null,["number","number","number","number","number","number"])}function TL(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{axis:C,exclusive:o,reverse:y}=x,t=S.shape.length;it(S.dtype==="float32"||S.dtype==="int32",()=>`cumsum does not support ${S.dtype} tensors in the WASM backend`);const s=Ln([C],t);let l=S;s!==null&&(l=Ai({inputs:{x:S},attrs:{perm:s},backend:f}));const a=pn(1,t)[0];an("cumsum",[a],t);const r=f.makeOutput(l.shape,l.dtype),i=l.shape[a],n=f.dataIdMap.get(l.dataId).id,h=f.dataIdMap.get(r.dataId).id;n1(n,o?1:0,y?1:0,i,h,Ie[S.dtype]);let d=r;if(s!==null){const u=Ja(s);d=Ai({inputs:{x:r},attrs:{perm:u},backend:f}),f.disposeData(l.dataId),f.disposeData(r.dataId)}return d}const SL={kernelName:hu,backendName:"wasm",setupFunc:yL,kernelFunc:TL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let s1;function CL(c){s1=c.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])}function EL(c){const{backend:e,inputs:f,attrs:x}=c,{x:S,weights:C}=f,{size:o,binaryOutput:y}=x,t=C.shape.reduce((r,i)=>r*i,1)!==0,s=S.shape.length===1?[o]:[S.shape[0],o],l=e.makeOutput(s,C.dtype);function a(r){return e.dataIdMap.get(r.dataId).id}return s1(a(S),new Uint8Array(new Int32Array(S.shape).buffer),S.shape.length,o,t,a(C),Ie[C.dtype],y,a(l)),l}const wL={kernelName:nf,backendName:"wasm",setupFunc:CL,kernelFunc:EL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let i1;function bL(c){i1=c.wasm.cwrap(cu,null,["number","number","number","array","number","array","array","number","number"])}function AL(c){const{backend:e,inputs:f,attrs:x}=c,{x:S}=f,{blockSize:C,dataFormat:o}=x,y=S.shape[0],t=o==="NHWC"?S.shape[1]:S.shape[2],s=o==="NHWC"?S.shape[2]:S.shape[3],l=o==="NHWC"?S.shape[3]:S.shape[1],a=t*C,r=s*C,i=l/(C*C),n=o==="NHWC"?[y,a,r,i]:[y,i,a,r],h=e.makeOutput(n,"float32"),u=e.dataIdMap.get(S.dataId).id,p=new Uint8Array(new Int32Array(Ne(S.shape)).buffer),m=new Uint8Array(new Int32Array(n).buffer),v=new Uint8Array(new Int32Array(Ne(n)).buffer),g=e.dataIdMap.get(h.dataId).id;return i1(u,C,o==="NHWC"?1:0,p,S.shape.length-1,m,v,n.length,g),h}const RL={kernelName:cu,backendName:"wasm",setupFunc:bL,kernelFunc:AL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let r1;function IL(c){r1=c.wasm.cwrap(du,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function PL(c){const{inputs:e,attrs:f,backend:x}=c,{x:S,filter:C}=e,o=x.dataIdMap.get(S.dataId).id,y=x.dataIdMap.get(C.dataId).id,{strides:t,dilations:s,pad:l,dimRoundingMode:a}=f,r=s??[1,1],i=dn(S.shape,C.shape,t,r,l,a,!0),n=i.filterHeight,h=i.filterWidth,d=i.padInfo.top,u=i.padInfo.right,p=i.padInfo.bottom,m=i.padInfo.left,v=i.dilationHeight,g=i.dilationWidth,T=i.strideHeight,w=i.strideWidth,b=i.inChannels,E=i.outChannels,A=i.padInfo.type==="SAME"?1:0;if(i.dataFormat!=="channelsLast")throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${i.dataFormat}'. Please use 'channelsLast'.`);const R=x.makeOutput(i.outShape,"float32"),I=x.dataIdMap.get(R.dataId).id;return r1(o,S.shape[0],S.shape[1],S.shape[2],y,n,h,d,u,p,m,A,v,g,T,w,b,E,I),R}const FL={kernelName:du,backendName:"wasm",setupFunc:IL,kernelFunc:PL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let a1;function NL(c){a1=c.wasm.cwrap("Diag",null,["number","number","number","number"])}function ML(c){const{inputs:e,backend:f}=c,{x}=e,S=bt(x.shape),C=f.makeOutput([...x.shape,...x.shape],x.dtype);return a1(f.dataIdMap.get(x.dataId).id,Ie[x.dtype],S,f.dataIdMap.get(C.dataId).id),C}const OL={kernelName:sf,backendName:"wasm",setupFunc:NL,kernelFunc:ML};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let o1;function DL(c){o1=c.wasm.cwrap(pu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function LL(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C}=e,{strides:o,pad:y,dilations:t}=x;if(S.dtype!==C.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${S.dtype} and ${C.dtype}`);const s=Za(S.shape,C.shape,o,y,"NHWC",t),l=f.makeOutput(s.outShape,S.dtype);return o1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(l.dataId).id,Ie[S.dtype],s.batchSize,s.inChannels,s.inHeight,s.inWidth,s.outHeight,s.outWidth,s.strideHeight,s.strideWidth,s.dilationHeight,s.dilationWidth,s.filterHeight,s.filterWidth,s.padInfo.top,s.padInfo.left),l}const BL={kernelName:pu,backendName:"wasm",setupFunc:DL,kernelFunc:LL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let u1;function $L(c){u1=c.wasm.cwrap(pm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function GL(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C,dy:o}=e,{strides:y,pad:t,dilations:s}=x;if(S.dtype!==C.dtype||S.dtype!==o.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${S.dtype}, ${C.dtype}, and ${o.dtype}`);const l=Za(S.shape,C.shape,y,t,"NHWC",s),a=f.makeOutput(C.shape,C.dtype);return u1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(o.dataId).id,f.dataIdMap.get(a.dataId).id,Ie[S.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),a}const UL={kernelName:pm,backendName:"wasm",setupFunc:$L,kernelFunc:GL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let l1;function VL(c){l1=c.wasm.cwrap(dm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function zL(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,filter:C,dy:o}=e,{strides:y,pad:t,dilations:s}=x;if(S.dtype!==C.dtype||S.dtype!==o.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${S.dtype}, ${C.dtype}, and ${o.dtype}`);const l=Za(S.shape,C.shape,y,t,"NHWC",s),a=f.makeOutput(S.shape,S.dtype);return l1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(o.dataId).id,f.dataIdMap.get(a.dataId).id,Ie[S.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),a}const kL={kernelName:dm,backendName:"wasm",setupFunc:VL,kernelFunc:zL};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WL=Ee(af);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let h1;function XL(c){h1=c.wasm.cwrap(of,null,["number","number","number"])}function HL(c){const{inputs:e,backend:f}=c,{dy:x,y:S}=e,C=f.makeOutput(S.shape,"float32"),o=y=>f.dataIdMap.get(y.dataId).id;return h1(o(S),o(x),o(C)),C}const YL={kernelName:of,backendName:"wasm",setupFunc:XL,kernelFunc:HL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KL=!1,jL=en(lf,KL,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZL=Ee(uf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QL=Ee(hf,"float32");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vh(c){const{inputs:e,attrs:f,backend:x}=c,{input:S}=e,{dim:C}=f,o=S.shape.length,y=S.shape.slice();let t=C;return C<0&&(it(-(o+1)<=C,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),t=o+C+1),y.splice(t,0,1),Mn({inputs:{x:S},backend:x,attrs:{shape:y}})}const JL={kernelName:ff,backendName:"wasm",kernelFunc:vh};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qL=Ee(cf,"float32");/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1(c){const{attrs:{shape:e,value:f},backend:x}=c;let{attrs:{dtype:S}}=c;S=S||ea(f);const C=x.makeOutput(e,S);return x.typedArrayFromHeap(C).fill(f),C}const _L={kernelName:df,backendName:"wasm",kernelFunc:f1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let c1;function tB(c){c1=c.wasm.cwrap(mu,null,["number","number","number","number","number","number"])}function eB(c){const{inputs:e,backend:f}=c,{image:x}=e,S=f.makeOutput(x.shape,x.dtype),C=f.dataIdMap.get(x.dataId).id,o=f.dataIdMap.get(S.dataId).id,[y,t,s,l]=x.shape;return c1(C,y,t,s,l,o),S}const nB={kernelName:mu,backendName:"wasm",kernelFunc:eB,setupFunc:tB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sB=Ee(pf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iB=en(mf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let d1;function rB(c){d1=c.wasm.cwrap(vu,null,["number","number","number","number","number","number","number"])}function aB(c){const{backend:e,inputs:f,attrs:x}=c,{varianceEpsilon:S}=x,{x:C,mean:o,variance:y,offset:t,scale:s}=f,l=e.dataIdMap.get(C.dataId).id,a=e.dataIdMap.get(o.dataId).id,r=e.dataIdMap.get(y.dataId).id,i=t!=null?e.dataIdMap.get(t.dataId).id:0,n=s!=null?e.dataIdMap.get(s.dataId).id:0,h=e.makeOutput(C.shape,C.dtype);if(bt(C.shape)===0)return h;const d=e.dataIdMap.get(h.dataId).id;return d1(l,a,r,i,n,S,d),h}const oB={kernelName:vu,backendName:"wasm",setupFunc:rB,kernelFunc:aB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let p1;function uB(c){p1=c.wasm.cwrap(Na,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function lB(c){const{inputs:e,attrs:f,backend:x}=c,{x:S,filter:C,bias:o,preluActivationWeights:y}=e,{strides:t,pad:s,dilations:l,dataFormat:a,dimRoundingMode:r,activation:i,leakyreluAlpha:n}=f,h=dn(S.shape,C.shape,t,l,s,r),d=Ya[i];if(d==null)throw new Error(`${i} activation not yet supported for FusedConv2D in the wasm backend.`);const u=x.dataIdMap.get(S.dataId).id,p=x.dataIdMap.get(C.dataId).id,m=h.outChannels;let v=0;if(o!=null){const G=x.dataIdMap.get(o.dataId);if(G.shape.length!==1)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${G.shape.length}.`);if(G.shape[0]!==m)throw new Error(`FusedConv2D bias shape (${G.shape}) does not match the number of output channels (${m})`);v=G.id}const g=h.filterHeight,T=h.filterWidth,w=h.padInfo.top,b=h.padInfo.right,E=h.padInfo.bottom,A=h.padInfo.left,R=h.dilationHeight,I=h.dilationWidth,P=h.strideHeight,N=h.strideWidth,F=h.inChannels,O=h.padInfo.type==="SAME"?1:0,D=h.batchSize,L=h.inHeight,z=h.inWidth;if(a!=="NHWC")throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${a}'. Please use 'NHWC'.`);const X=x.makeOutput(h.outShape,"float32"),H=x.dataIdMap.get(X.dataId).id,J=y==null?0:x.dataIdMap.get(y.dataId).id;return p1(u,D,L,z,p,g,T,v,w,b,E,A,O,R,I,P,N,F,m,d,J,n||0,H),X}const hB={kernelName:Na,backendName:"wasm",setupFunc:uB,kernelFunc:lB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let m1;function fB(c){m1=c.wasm.cwrap(Ma,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function cB(c){const{inputs:e,attrs:f,backend:x}=c,{x:S,filter:C,bias:o,preluActivationWeights:y}=e,{strides:t,pad:s,dilations:l,dataFormat:a,dimRoundingMode:r,activation:i,leakyreluAlpha:n}=f,h=dn(S.shape,C.shape,t,l,s,r,!0),d=Ya[i];if(d==null)throw new Error(`${i} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);const u=x.dataIdMap.get(S.dataId).id,p=x.dataIdMap.get(C.dataId).id,m=h.outChannels;let v=0;if(o!=null){const G=x.dataIdMap.get(o.dataId);if(G.shape.length!==1)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${G.shape.length}.`);if(G.shape[0]!==m)throw new Error(`FusedDepthwiseConv2D bias shape (${G.shape}) does not match the number of output channels (${m})`);v=G.id}const g=h.filterHeight,T=h.filterWidth,w=h.padInfo.top,b=h.padInfo.right,E=h.padInfo.bottom,A=h.padInfo.left,R=h.dilationHeight,I=h.dilationWidth,P=h.strideHeight,N=h.strideWidth,F=h.inChannels,O=h.padInfo.type==="SAME"?1:0,D=h.batchSize,L=h.inHeight,z=h.inWidth;if(a!=="NHWC")throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${a}'. Please use 'NHWC'.`);const X=x.makeOutput(h.outShape,"float32"),H=x.dataIdMap.get(X.dataId).id,J=y==null?0:x.dataIdMap.get(y.dataId).id;return m1(u,D,L,z,p,g,T,v,w,b,E,A,O,R,I,P,N,F,m,d,J,n||0,H),X}const dB={kernelName:Ma,backendName:"wasm",setupFunc:fB,kernelFunc:cB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let v1;function pB(c){v1=c.wasm.cwrap(gu,null,["number","number","number","number","number","number","array","number"])}function mB(c){const{backend:e,inputs:f}=c,{params:x,indices:S}=f,[C,o,y,t]=Hc(x,S),s=e.makeOutput(C,x.dtype);if(o===0)return s;const l=S.shape,a=l[l.length-1],i=e.dataIdMap.get(x.dataId).id,h=e.dataIdMap.get(S.dataId).id,d=new Uint8Array(new Int32Array(t).buffer),u=e.dataIdMap.get(s.dataId).id;return v1(i,Ie[x.dtype],h,o,a,y,d,u),s}const vB={kernelName:gu,backendName:"wasm",setupFunc:pB,kernelFunc:mB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g1;function gB(c){g1=c.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function xB(c){const{backend:e,inputs:f,attrs:x}=c,{x:S,indices:C}=f,{axis:o,batchDims:y}=x,t=Qe(o,S.shape)[0],s=e.readSync(C.dataId),l=S.shape[t];for(let E=0;E<s.length;++E){const A=s[E];it(A<=l-1&&A>=0,()=>`GatherV2: the index value ${A} is not in [0, ${l-1}]`)}const a=cd(S,C,t,y),r=Mn({inputs:{x:S},attrs:{shape:[a.batchSize,a.outerSize,a.dimSize,a.sliceSize]},backend:e}),i=bt(C.shape),n=Mn({inputs:{x:C},attrs:{shape:[a.batchSize,i/a.batchSize]},backend:e}),h=[a.batchSize,a.outerSize,i/a.batchSize,a.sliceSize],d=e.makeOutput(h,S.dtype);if(bt(S.shape)===0)return d;const u=r.shape.length-1,m=e.dataIdMap.get(r.dataId).id,g=e.dataIdMap.get(n.dataId).id,T=e.dataIdMap.get(d.dataId).id,w=new Uint8Array(new Int32Array(Ne(r.shape)).buffer),b=new Uint8Array(new Int32Array(Ne(h)).buffer);return g1(m,Ie[S.dtype],w,u,g,a.batchSize,b,T),e.disposeData(r.dataId),e.disposeData(n.dataId),d.shape=a.outputShape,d}const yB={kernelName:vf,backendName:"wasm",setupFunc:gB,kernelFunc:xB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TB=!1,SB=en(gf,TB,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CB=!1,EB=en(xf,CB,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wB=Ee(yf,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bB=Ee(Tf,"bool");/**
 * @license
 * Copyright 2022 The TensorFlow Authors. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AB=Ee(Sf,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let x1;function RB(c){x1=c.wasm.cwrap(yu,null,["number","number","number","number"])}function IB(c){const{inputs:{x:e},attrs:{alpha:f},backend:x}=c,S=x.dataIdMap.get(e.dataId).id,C=x.makeOutput(e.shape,"float32");if(bt(e.shape)!==0){const o=x.dataIdMap.get(C.dataId).id;x1(S,Ie[e.dtype],f,o)}return C}const PB={kernelName:yu,backendName:"wasm",setupFunc:RB,kernelFunc:IB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FB=!1,NB=en(Cf,FB,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MB=!1,OB=en(Ef,MB,"bool");/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let y1;function DB(c){y1=c.wasm.cwrap(Tu,null,["number","number","number","number"])}function LB(c){const{attrs:e,backend:f}=c,{start:x,stop:S,num:C}=e,o=Math.floor(C),y=f.makeOutput([o],"float32");return y1(f.dataIdMap.get(y.dataId).id,x,S,o),y}const BB={kernelName:Tu,backendName:"wasm",setupFunc:DB,kernelFunc:LB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $B=Ee(wf);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GB=Ee(bf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UB=!1,VB=en(Af,UB,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zB=Ee(Rf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kB=!1,WB=en(If,kB,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XB=!1,HB=en(sx,XB,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let T1;function YB(c){T1=c.wasm.cwrap(Su,null,["number","number","number","number","number","number","number"])}function KB(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{depthRadius:C,bias:o,alpha:y,beta:t}=x;if(S.dtype!=="float32")throw new Error("LRN error: x must have dtype float32");const s=f.makeOutput(S.shape,S.dtype);return T1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(s.dataId).id,S.shape[3],C,o,y,t),s}const jB={kernelName:Su,backendName:"wasm",setupFunc:YB,kernelFunc:KB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let S1;function ZB(c){S1=c.wasm.cwrap(Pf,null,["number","number","number","number","number","number","number","number","number"])}function QB(c){const{inputs:e,backend:f,attrs:x}=c,{x:S,y:C,dy:o}=e,{depthRadius:y,bias:t,alpha:s,beta:l}=x;if(S.dtype!=="float32"||C.dtype!=="float32"||o.dtype!=="float32")throw new Error("LRNGrad error: x, y, and dy must have dtype float32");const a=f.makeOutput(S.shape,S.dtype);return S1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(o.dataId).id,f.dataIdMap.get(a.dataId).id,o.shape[3],y,t,s,l),a}const JB={kernelName:Pf,backendName:"wasm",setupFunc:ZB,kernelFunc:QB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let C1;function qB(c){C1=c.wasm.cwrap(Cu,null,["number","number","number","number"])}function _B(c){const{backend:e,inputs:f,attrs:x}=c,{reductionIndices:S,keepDims:C}=x,{x:o}=f;let t=e.dataIdMap.get(o.dataId).id,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Di(o,S,e);if(i){const m=e.dataIdMap.get(l.dataId).id;s=l,t=m}const n=s.shape.length;an("max",a,n);const[h,d]=yn(s.shape,a),u=bt(d),p=e.makeOutput(h,o.dtype);if(bt(s.shape)!==0){const m=e.dataIdMap.get(p.dataId).id;C1(t,Ie[o.dtype],u,m)}if(i&&e.disposeData(l.dataId),C){const m=rn(p.shape,r);p.shape=m}return p}const t$={kernelName:Cu,backendName:"wasm",setupFunc:qB,kernelFunc:_B};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e$=en(Ff);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let E1;function n$(c){E1=c.wasm.cwrap(Eu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function s$(c){const{inputs:e,attrs:f,backend:x}=c,S=e.x,C=x.dataIdMap.get(S.dataId).id;it(S.dtype==="float32",()=>`Error in MaxPool: only float32 input is supported. Got ${S.dtype}.`);const{filterSize:o,strides:y,pad:t,dimRoundingMode:s}=f,l=hs(S.shape,o,y,1,t,s),a=l.filterHeight,r=l.filterWidth,i=l.padInfo.top,n=l.padInfo.right,h=l.padInfo.bottom,d=l.padInfo.left,u=l.dilationHeight,p=l.dilationWidth,m=l.strideHeight,v=l.strideWidth,g=l.inChannels,T=l.outChannels;if(l.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);const w=x.makeOutput(l.outShape,"float32"),b=x.dataIdMap.get(w.dataId).id;return E1(C,S.shape[0],S.shape[1],S.shape[2],a,r,i,n,h,d,u,p,m,v,g,T,b),w}const i$={kernelName:Eu,backendName:"wasm",setupFunc:n$,kernelFunc:s$};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let w1;function r$(c){w1=c.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function a$(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{filterSize:C,strides:o,pad:y,dimRoundingMode:t,dataFormat:s}=x,l=_s(S.shape,C,o,1,y,t,s),a=f.makeOutput(l.outShape,S.dtype);return w1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),a}const o$={kernelName:Nf,backendName:"wasm",setupFunc:r$,kernelFunc:a$};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let b1;function u$(c){b1=c.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function l$(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,input:C}=e,{filterSize:o,strides:y,pad:t,dimRoundingMode:s}=x,l=_s(C.shape,o,y,1,t,s),a=f.makeOutput(C.shape,C.dtype);return b1(f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),a}const h$={kernelName:Tm,backendName:"wasm",setupFunc:u$,kernelFunc:l$};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let A1;function f$(c){A1=c.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function c$(c){const{inputs:e,backend:f,attrs:x}=c,{dy:S,input:C}=e,{filterSize:o,strides:y,pad:t,dimRoundingMode:s}=x,l=hs(C.shape,o,y,1,t,s),a=f.makeOutput(C.shape,C.dtype);return A1(f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left),a}const d$={kernelName:ym,backendName:"wasm",setupFunc:f$,kernelFunc:c$};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let R1;function p$(c){R1=c.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function m$(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{filterSize:C,strides:o,pad:y,includeBatchInIndex:t}=x;it(S.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${S.shape.length}.`);const s=[1,1];it(Dn(o,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const l=hs(S.shape,C,o,[1,1],y),a=f.makeOutput(l.outShape,S.dtype),r=f.makeOutput(l.outShape,"int32");return R1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(a.dataId).id,f.dataIdMap.get(r.dataId).id,Ie[S.dtype],t,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left),[a,r]}const v$={kernelName:Mf,backendName:"wasm",setupFunc:p$,kernelFunc:m$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let I1;function g$(c){I1=c.wasm.cwrap(wu,null,["number, number, number"])}function x$(c){const{backend:e,inputs:f,attrs:x}=c,{axis:S,keepDims:C}=x,{x:o}=f,y=e.dataIdMap.get(o.dataId).id;let t=y,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Di(o,S,e);let n=a;if(i){const v=e.dataIdMap.get(l.dataId).id;v!==y&&(s=l,t=v,n=pn(n.length,s.shape.length))}an("mean",n,s.shape.length);const[h,d]=yn(s.shape,n),u=bt(d);let p=s;s.dtype!=="float32"&&(p=Li({backend:e,inputs:{x:s},attrs:{dtype:"float32"}}),t=e.dataIdMap.get(p.dataId).id);const m=e.makeOutput(h,"float32");if(bt(s.shape)!==0){const v=e.dataIdMap.get(m.dataId).id;I1(t,u,v)}if(i&&e.disposeData(l.dataId),C){const v=rn(m.shape,r);m.shape=v}return s.dtype!=="float32"&&e.disposeData(p.dataId),m}const y$={kernelName:wu,backendName:"wasm",setupFunc:g$,kernelFunc:x$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let P1;function T$(c){P1=c.wasm.cwrap(bu,null,["number","number","number","number"])}function S$(c){const{backend:e,inputs:f,attrs:x}=c,{axis:S,keepDims:C}=x,{x:o}=f,y=e.dataIdMap.get(o.dataId).id;let t=y,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Di(o,S,e);if(i){const m=e.dataIdMap.get(l.dataId).id;m!==y&&(s=l,t=m)}const n=s.shape.length;an("min",a,n);const[h,d]=yn(s.shape,a),u=bt(d),p=e.makeOutput(h,s.dtype);if(bt(s.shape)!==0){const m=e.dataIdMap.get(p.dataId).id;P1(t,Ie[o.dtype],u,m)}if(i&&e.disposeData(l.dataId),C){const m=rn(p.shape,r);p.shape=m}return p}const C$={kernelName:bu,backendName:"wasm",setupFunc:T$,kernelFunc:S$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$=en(Of);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gh;(function(c){c[c.reflect=0]="reflect",c[c.symmetric=1]="symmetric"})(gh||(gh={}));let F1;function w$(c){F1=c.wasm.cwrap(Au,null,["number","array","number","number","array","array","number","number"])}function b$(c){const{inputs:{x:e},backend:f,attrs:{paddings:x,mode:S}}=c,C=x.map((n,h)=>n[0]+e.shape[h]+n[1]),o=f.dataIdMap.get(e.dataId).id,y=f.makeOutput(C,e.dtype),t=f.dataIdMap.get(y.dataId).id,s=new Uint8Array(new Int32Array(e.shape).buffer),l=x.map(n=>n[0]),a=x.map(n=>n[1]),r=new Uint8Array(new Int32Array(l).buffer),i=new Uint8Array(new Int32Array(a).buffer);return F1(o,s,e.shape.length,Ie[e.dtype],r,i,gh[S],t),y}const A$={kernelName:Au,backendName:"wasm",kernelFunc:b$,setupFunc:w$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let N1;function R$(c){N1=c.wasm.cwrap(ku,null,["number","number","number","number"])}function M1(c){const{backend:e,inputs:{logits:f},attrs:{dim:x}}=c,S=e.dataIdMap.get(f.dataId).id,C=e.makeOutput(f.shape,f.dtype),o=e.dataIdMap.get(C.dataId).id,y=f.shape[x],t=bt(f.shape)/y;return bt(C.shape)===0||N1(S,o,y,t),C}const I$={kernelName:ku,backendName:"wasm",setupFunc:R$,kernelFunc:M1};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let O1;function P$(c){O1=c.wasm.cwrap(Ru,null,["number","number","number","number","number","number"])}function F$(c){const{inputs:e,backend:f,attrs:x}=c,{logits:S}=e,{numSamples:C,seed:o,normalized:y}=x;if(S.dtype!=="float32")throw new Error(`Tensor logits must have dtype float32, got ${S.dtype}`);const t=y?S:M1({inputs:{logits:S},backend:f,attrs:{dim:S.shape.length-1}}),[s,l]=t.shape,a=f.makeOutput([s,C],"int32");return O1(f.dataIdMap.get(t.dataId).id,s,l,C,o,f.dataIdMap.get(a.dataId).id),y||f.disposeData(t.dataId),a}const N$={kernelName:Ru,backendName:"wasm",setupFunc:P$,kernelFunc:F$};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M$=en(Df);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O$=en(Lf);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D$=Ee(Bf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ed(c,e){const f=new Int32Array(c.wasm.HEAPU8.buffer,e,4),x=f[0],S=f[1],C=f[2],o=f[3];return c.wasm._free(e),{pSelectedIndices:x,selectedSize:S,pSelectedScores:C,pValidOutputs:o}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let D1;function L$(c){D1=c.wasm.cwrap(Iu,"number",["number","number","number","number","number"])}function B$(c){const{backend:e,inputs:f,attrs:x}=c,{iouThreshold:S,maxOutputSize:C,scoreThreshold:o}=x,{boxes:y,scores:t}=f,s=e.dataIdMap.get(y.dataId).id,l=e.dataIdMap.get(t.dataId).id,a=D1(s,l,C,S,o),{pSelectedIndices:r,selectedSize:i,pSelectedScores:n,pValidOutputs:h}=Ed(e,a);return e.wasm._free(n),e.wasm._free(h),e.makeOutput([i],"int32",r)}const $$={kernelName:Iu,backendName:"wasm",setupFunc:L$,kernelFunc:B$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let L1;function G$(c){L1=c.wasm.cwrap(Pu,"number",["number","number","number","number","number","bool"])}function U$(c){const{backend:e,inputs:f,attrs:x}=c,{iouThreshold:S,maxOutputSize:C,scoreThreshold:o,padToMaxOutputSize:y}=x,{boxes:t,scores:s}=f,l=e.dataIdMap.get(t.dataId).id,a=e.dataIdMap.get(s.dataId).id,r=L1(l,a,C,S,o,y),{pSelectedIndices:i,selectedSize:n,pSelectedScores:h,pValidOutputs:d}=Ed(e,r);e.wasm._free(h);const u=e.makeOutput([n],"int32",i),p=e.makeOutput([],"int32",d);return[u,p]}const V$={kernelName:Pu,backendName:"wasm",setupFunc:G$,kernelFunc:U$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let B1;function z$(c){B1=c.wasm.cwrap(Fu,"number",["number","number","number","number","number","number"])}function k$(c){const{backend:e,inputs:f,attrs:x}=c,{iouThreshold:S,maxOutputSize:C,scoreThreshold:o,softNmsSigma:y}=x,{boxes:t,scores:s}=f,l=e.dataIdMap.get(t.dataId).id,a=e.dataIdMap.get(s.dataId).id,r=B1(l,a,C,S,o,y),{pSelectedIndices:i,selectedSize:n,pSelectedScores:h,pValidOutputs:d}=Ed(e,r);e.wasm._free(d);const u=e.makeOutput([n],"int32",i),p=e.makeOutput([n],"float32",h);return[u,p]}const W$={kernelName:Fu,backendName:"wasm",setupFunc:z$,kernelFunc:k$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X$=!1,H$=en($f,X$,"bool");/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let $1;function Y$(c){$1=c.wasm.cwrap(Nu,null,["number","number","number","number","number"])}function K$(c){const{inputs:e,backend:f,attrs:x}=c,{indices:S}=e,{dtype:C,depth:o,onValue:y,offValue:t}=x,s=f.makeOutput([...S.shape,o],C),l=f.dataIdMap.get(s.dataId).id,r=f.dataIdMap.get(S.dataId).id;return $1(r,o,y,t,l),s}const j$={kernelName:Nu,backendName:"wasm",setupFunc:Y$,kernelFunc:K$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$(c){const{inputs:{x:e},backend:f}=c,x=f.makeOutput(e.shape,e.dtype);return f.typedArrayFromHeap(x).fill(1),x}const Q$={kernelName:Gf,backendName:"wasm",kernelFunc:Z$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$(c){const{inputs:e,backend:f,attrs:x}=c,{axis:S}=x;if(e.length===1)return vh({inputs:{input:e[0]},backend:f,attrs:{dim:S}});const C=e[0].shape,o=e[0].dtype;e.forEach(l=>{kn(C,l.shape,"All tensors passed to stack must have matching shapes"),it(o===l.dtype,()=>"All tensors passed to stack must have matching dtypes")});const y=[],t=e.map(l=>{const a=vh({inputs:{input:l},backend:f,attrs:{dim:S}});return y.push(a),a}),s=j0({inputs:t,backend:f,attrs:{axis:S}});return y.forEach(l=>f.disposeData(l.dataId)),s}const q$={kernelName:Uf,backendName:"wasm",kernelFunc:J$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let G1;function _$(c){G1=c.wasm.cwrap(Mu,null,["number","array","number","number","array","array","number","number"])}function tG(c){const{inputs:{x:e},backend:f,attrs:{paddings:x,constantValue:S}}=c,C=x.map((h,d)=>h[0]+e.shape[d]+h[1]);if(bt(e.shape)===0)return f1({backend:f,attrs:{shape:C,value:S,dtype:e.dtype}});const o=f.dataIdMap.get(e.dataId).id,y=f.makeOutput(C,e.dtype),s=f.dataIdMap.get(y.dataId).id,l=new Uint8Array(new Int32Array(e.shape).buffer),a=x.map(h=>h[0]),r=x.map(h=>h[1]),i=new Uint8Array(new Int32Array(a).buffer),n=new Uint8Array(new Int32Array(r).buffer);return G1(o,l,e.shape.length,Ie[e.dtype],i,n,S,s),y}const U1={kernelName:Mu,backendName:"wasm",kernelFunc:tG,setupFunc:_$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eG=en(Vf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let V1;function nG(c){V1=c.wasm.cwrap(Ou,null,["number","number","number"])}function sG(c){const{inputs:e,backend:f}=c,{x,alpha:S}=e,C=f.dataIdMap.get(x.dataId).id,o=f.dataIdMap.get(S.dataId).id;let y=C;const t=x;let s=t;t.dtype!=="float32"&&(s=Li({backend:f,inputs:{x},attrs:{dtype:"float32"}}),y=f.dataIdMap.get(s.dataId).id);const l=f.makeOutput(x.shape,"float32"),a=f.dataIdMap.get(l.dataId).id;return V1(y,o,a),t.dtype!=="float32"&&f.disposeData(s.dataId),l}const iG={kernelName:Ou,backendName:"wasm",setupFunc:nG,kernelFunc:sG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let z1;function rG(c){z1=c.wasm.cwrap(Du,null,["number","number","number","number"])}function aG(c){const{backend:e,inputs:f,attrs:x}=c,{axis:S,keepDims:C}=x,{x:o}=f,y=e.dataIdMap.get(o.dataId).id;let t=y,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Di(o,S,e);let n=a;if(i){const m=e.dataIdMap.get(l.dataId).id;m!==y&&(s=l,t=m,n=pn(n.length,s.shape.length))}an("prod",n,s.shape.length);const[h,d]=yn(s.shape,n),u=bt(d),p=e.makeOutput(h,s.dtype);if(bt(s.shape)!==0){const m=e.dataIdMap.get(p.dataId).id;z1(t,u,Ie[p.dtype],m)}if(i&&e.disposeData(l.dataId),C){const m=rn(p.shape,r);p.shape=m}return p}const oG={kernelName:Du,backendName:"wasm",setupFunc:rG,kernelFunc:aG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uG=c=>{const{backend:e,attrs:f}=c,{start:x,stop:S,step:C,dtype:o}=f,y=jg(x,S,C,o),t=e.makeOutput([y.length],o);return e.typedArrayFromHeap(t).set(y),t},lG={kernelName:zf,backendName:"wasm",kernelFunc:uG};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hG=en(rf);/**
 * @license
 * Copyright 2022 The TensorFlow Authors. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fG=Ee(kf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cG=Ee(Wf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dG=Ee(Kf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let k1;function pG(c){k1=c.wasm.cwrap(Bu,null,["number","number","number","number","number","number","number","number","number","number"])}function mG(c){const{backend:e,inputs:f,attrs:x}=c,{images:S}=f,{alignCorners:C,halfPixelCenters:o,size:y}=x,[t,s]=y,[l,a,r,i]=S.shape,n=[l,t,s,i];let h=e.dataIdMap.get(S.dataId),d;h.dtype!=="float32"&&(d=Li({backend:e,inputs:{x:S},attrs:{dtype:"float32"}}),h=e.dataIdMap.get(d.dataId));const u=h.id,p=e.makeOutput(n,"float32");if(bt(S.shape)===0)return p;const m=e.dataIdMap.get(p.dataId).id;return k1(u,l,a,r,i,t,s,C?1:0,o?1:0,m),d!=null&&e.disposeData(d.dataId),p}const vG={kernelName:Bu,backendName:"wasm",setupFunc:pG,kernelFunc:mG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let W1;function gG(c){W1=c.wasm.cwrap(Yf,null,["number","number","number","array","array","boolean"])}function xG(c){const{inputs:e,backend:f,attrs:x}=c,{images:S,dy:C}=e,{alignCorners:o}=x,y=f.makeOutput(S.shape,"float32");let t=f.dataIdMap.get(S.dataId),s;return t.dtype!=="float32"&&(s=Li({backend:f,inputs:{x:S},attrs:{dtype:"float32"}}),t=f.dataIdMap.get(s.dataId)),W1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(y.dataId).id,new Uint8Array(new Int32Array(S.shape).buffer),new Uint8Array(new Int32Array(C.shape).buffer),o),s!=null&&f.disposeData(s.dataId),y}const yG={kernelName:Yf,backendName:"wasm",setupFunc:gG,kernelFunc:xG};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let X1;function TG(c){X1=c.wasm.cwrap(Lu,null,["number","number","number","number","number","number","number","number","number","number"])}function SG(c){const{backend:e,inputs:f,attrs:x}=c,{images:S}=f,{alignCorners:C,halfPixelCenters:o,size:y}=x,[t,s]=y,[l,a,r,i]=S.shape,n=[l,t,s,i],h=e.makeOutput(n,"float32");if(bt(S.shape)===0)return h;let d=e.dataIdMap.get(S.dataId),u;d.dtype!=="float32"&&(u=Li({backend:e,inputs:{x:S},attrs:{dtype:"float32"}}),d=e.dataIdMap.get(u.dataId));const p=d.id,m=e.dataIdMap.get(h.dataId).id;return X1(p,l,a,r,i,t,s,C?1:0,o?1:0,m),u!=null&&e.disposeData(u.dataId),h}const CG={kernelName:Lu,backendName:"wasm",setupFunc:TG,kernelFunc:SG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let H1;function EG(c){H1=c.wasm.cwrap(Hf,null,["number","number","number","array","array","boolean"])}function wG(c){const{inputs:e,backend:f,attrs:x}=c,{images:S,dy:C}=e,{alignCorners:o}=x,y=f.makeOutput(S.shape,"float32");let t=f.dataIdMap.get(S.dataId),s;return t.dtype!=="float32"&&(s=Li({backend:f,inputs:{x:S},attrs:{dtype:"float32"}}),t=f.dataIdMap.get(s.dataId)),H1(f.dataIdMap.get(S.dataId).id,f.dataIdMap.get(C.dataId).id,f.dataIdMap.get(y.dataId).id,new Uint8Array(new Int32Array(S.shape).buffer),new Uint8Array(new Int32Array(C.shape).buffer),o),s!=null&&f.disposeData(s.dataId),y}const bG={kernelName:Hf,backendName:"wasm",setupFunc:EG,kernelFunc:wG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Y1;function AG(c){Y1=c.wasm.cwrap($u,null,["number","array","number","array","number","number"])}function RG(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{dims:C}=x,o=Qe(C,S.shape);if(S.shape.length===0)return vl({inputs:{x:S},backend:f});const y=f.makeOutput(S.shape,S.dtype),t=f.dataIdMap.get(S.dataId).id,s=f.dataIdMap.get(y.dataId).id,l=new Uint8Array(new Int32Array(o).buffer),a=new Uint8Array(new Int32Array(S.shape).buffer);Y1(t,l,o.length,a,S.shape.length,s);const r=Mn({inputs:{x:y},attrs:{shape:S.shape},backend:f});return f.disposeData(y.dataId),r}const IG={kernelName:$u,backendName:"wasm",kernelFunc:RG,setupFunc:AG};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let K1;function PG(c){K1=c.wasm.cwrap(Zu,null,["number","number","number","number","number","number","number","number","array","number","number"])}function FG(c){const{inputs:e,backend:f,attrs:x}=c,{image:S}=e,{radians:C,fillValue:o,center:y}=x,t=f.makeOutput(S.shape,S.dtype),s=f.dataIdMap.get(S.dataId).id,l=f.dataIdMap.get(t.dataId).id,[a,r,i,n]=S.shape,[h,d]=Jc(y,r,i),u=o===0,p=255,m=typeof o=="number"?[o,o,o,u?0:p]:[...o,p],v=new Uint8Array(new Int32Array(m).buffer);return K1(s,a,r,i,n,C,h,d,v,m.length,l),t}const NG={kernelName:Zu,backendName:"wasm",kernelFunc:FG,setupFunc:PG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MG=Ee(jf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OG=Ee(Zf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let j1;function DG(c){j1=c.wasm.cwrap(Gu,null,["number","number","number","number","number","number","array","number","number"])}function LG(c){const{backend:e,inputs:f,attrs:x}=c,{indices:S,updates:C}=f,{shape:o}=x,y=e.makeOutput(o,C.dtype);if(bt(o)===0)return y;const{sliceRank:t,numUpdates:s,sliceSize:l,strides:a,outputSize:r}=xr(C,S,o),n=e.dataIdMap.get(S.dataId).id,d=e.dataIdMap.get(C.dataId).id,u=new Uint8Array(new Int32Array(a).buffer),p=e.dataIdMap.get(y.dataId).id;return j1(n,d,Ie[C.dtype],t,s,l,u,r,p),y}const BG={kernelName:Gu,backendName:"wasm",setupFunc:DG,kernelFunc:LG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Z1;function $G(c){Z1=c.wasm.cwrap(Vu,null,["number","number","number","number","number","number","bool","number"])}function GG(c){const{inputs:e,backend:f,attrs:x}=c,{sortedSequence:S,values:C}=e,{side:o}=x;if(S.dtype!==C.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${S.dtype} and ${C.dtype}`);const y=f.makeOutput(C.shape,"int32");function t(s){return f.dataIdMap.get(s.dataId).id}return Z1(t(S),t(C),S.shape[0],S.shape[1],C.shape[1],Ie[S.dtype],o==="left",t(y)),y}const UG={kernelName:Vu,backendName:"wasm",setupFunc:$G,kernelFunc:GG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Q1;function VG(c){Q1=c.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function zG(c){const{inputs:e,backend:f}=c,{condition:x,t:S,e:C}=e,o=f.dataIdMap.get(x.dataId).id,y=f.dataIdMap.get(S.dataId).id,t=f.dataIdMap.get(C.dataId).id,s=f.makeOutput(S.shape,S.dtype),l=f.dataIdMap.get(s.dataId).id,a=x.shape.length,r=S.shape.length,i=a===0||a>1||r===1?1:bt(S.shape.slice(1));return Q1(o,y,t,i,l),s}const kG={kernelName:Qf,backendName:"wasm",kernelFunc:zG,setupFunc:VG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WG=Ee(Jf);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let J1;function XG(c){J1=c.wasm.cwrap(nc,null,["number","number"])}function HG(c){const{backend:e,inputs:{x:f}}=c,x=e.dataIdMap.get(f.dataId).id,S=e.makeOutput(f.shape,f.dtype),C=e.dataIdMap.get(S.dataId).id;return bt(S.shape)===0||J1(x,C),S}const YG={kernelName:"Sigmoid",backendName:"wasm",setupFunc:XG,kernelFunc:HG};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KG=Ee(ec);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jG=Ee(_f);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZG=Ee(tc);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QG=Ee(sc);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JG(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,{blockShape:C,paddings:o}=x,y=bt(C),t=[[0,0]];t.push(...o);for(let T=1+C.length;T<S.shape.length;++T)t.push([0,0]);const s=U1.kernelFunc({inputs:{x:S},backend:f,attrs:{paddings:t,constantValue:0}}),l=_a(s.shape,C,y,!1),a=to(l.length,C.length,!1),r=eo(s.shape,C,y,!1),h=Mn({inputs:{x:s},backend:f,attrs:{shape:l}}),p=Ai({inputs:{x:h},backend:f,attrs:{perm:a}}),g=Mn({inputs:{x:p},backend:f,attrs:{shape:r}});return f.disposeData(s.dataId),f.disposeData(h.dataId),f.disposeData(p.dataId),g}const qG={kernelName:rc,backendName:"wasm",kernelFunc:JG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let q1;function _G(c){q1=c.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function tU(c){const{backend:e,inputs:f}=c,{indices:x,values:S,denseShape:C,defaultValue:o}=f,y=x.shape[0],t=x.shape[1],s=e.readSync(C.dataId)[0],l=[y+s,t],a=e.dataIdMap.get(x.dataId).id,r=e.dataIdMap.get(S.dataId).id,i=e.dataIdMap.get(o.dataId).id,n=e.makeOutput(l,x.dtype),h=e.dataIdMap.get(n.dataId).id,d=e.makeOutput(l.slice(0,1),S.dtype),u=e.dataIdMap.get(d.dataId).id,p=e.makeOutput([s],"bool"),m=e.dataIdMap.get(p.dataId).id,v=e.makeOutput([y],x.dtype),g=e.dataIdMap.get(v.dataId).id,T=e.makeOutput([4],"int32"),w=e.dataIdMap.get(T.dataId).id,b=q1(a,r,Ie[S.dtype],y,s,t,i,h,u,m,g,w),E=e.readSync(T.dataId);let A;switch(E[0]){case 1:{A=ed(E[1]);break}case 2:{A=nd(E[1],E[2]);break}case 3:A=sd(E[1],E[2],E[3]);break;default:A=""}if(e.disposeData(T.dataId),A)throw e.disposeData(n.dataId),e.disposeData(d.dataId),e.disposeData(p.dataId),e.disposeData(v.dataId),new Error(A);let R=n,I=d;return b!==l[0]&&(R=pr({inputs:{x:n},attrs:{begin:0,size:[b,t]},backend:e}),I=pr({inputs:{x:d},attrs:{begin:0,size:b},backend:e}),e.disposeData(n.dataId),e.disposeData(d.dataId)),[R,I,p,v]}const eU={kernelName:oc,backendName:"wasm",setupFunc:_G,kernelFunc:tU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _1;function nU(c){_1=c.wasm.cwrap(Wu,null,["number","number","number","number","number","number","number"])}function sU(c){const{backend:e,inputs:f}=c,{inputIndices:x,inputShape:S,newShape:C}=f;if(x.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${x.shape}`);if(S.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${S.shape}`);if(C.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${C.shape}`);const o=e.dataIdMap.get(x.dataId).id,y=e.dataIdMap.get(S.dataId).id,t=e.dataIdMap.get(C.dataId).id,s=x.shape[0],l=bt(C.shape),a=e.makeOutput([s,l],x.dtype),r=e.dataIdMap.get(a.dataId).id,i=e.makeOutput([l],C.dtype),n=e.dataIdMap.get(i.dataId).id,h=e.makeOutput([3],"int32"),d=e.dataIdMap.get(h.dataId).id;_1(o,y,t,s,r,n,d);const u=e.readSync(h.dataId);let p;switch(u[0]){case 0:{p=id(u[1],u[2]);break}case 1:{p=rd(u[1],u[2]);break}case 2:p=ad();break;case 3:{const m=Array.from(e.readSync(S.dataId)),v=Array.from(e.readSync(i.dataId));p=od(m,v);break}case 4:{const m=Array.from(e.readSync(S.dataId)),v=Array.from(e.readSync(i.dataId));p=ud(m,v);break}default:p=""}if(e.disposeData(h.dataId),p)throw e.disposeData(a.dataId),e.disposeData(i.dataId),new Error(p);return[a,i]}const iU={kernelName:Wu,backendName:"wasm",setupFunc:nU,kernelFunc:sU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let t2;function e2(c){t2=c.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function n2(c,e){const{backend:f,inputs:x}=c,{data:S,indices:C,segmentIds:o}=x,y=C.shape[0],t=f.readSync(o.dataId,y-1,y)[0],l=y>0?t+1:0;if(l<0)throw new Error(za());const a=S.shape.slice();a[0]=l;const r=f.dataIdMap.get(S.dataId).id,i=f.dataIdMap.get(C.dataId).id,n=f.dataIdMap.get(o.dataId).id,h=f.makeOutput(a,S.dtype),d=f.dataIdMap.get(h.dataId).id,u=f.makeOutput([4],"int32"),p=f.dataIdMap.get(u.dataId).id;t2(r,Ie[S.dtype],S.shape[0],i,n,d,p,e,0);const m=f.readSync(u.dataId);let v;switch(m[0]){case 0:{v=za();break}case 1:{v=ld();break}case 2:v=hd(m[1],m[2]);break;case 3:v=fd(m[1],m[2],m[3]);break;default:v=""}if(f.disposeData(u.dataId),v)throw f.disposeData(h.dataId),new Error(v);return h}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rU(c){return n2(c,!0)}const aU={kernelName:uc,backendName:"wasm",setupFunc:e2,kernelFunc:rU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oU(c){return n2(c,!1)}const uU={kernelName:lc,backendName:"wasm",setupFunc:e2,kernelFunc:oU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let s2;function lU(c){s2=c.wasm.cwrap(Xu,null,["number","number","number","number","number","number","number","number","array","number","number"])}function hU(c){const{backend:e,inputs:f,attrs:x}=c,{sparseIndices:S,sparseValues:C,defaultValue:o}=f,{outputShape:y}=x,t=e.makeOutput(y,o.dtype);if(bt(y)===0)return t;const{sliceRank:s,numUpdates:l,sliceSize:a,strides:r,outputSize:i}=xr(C,S,y),n=e.dataIdMap.get(S.dataId).id,h=e.dataIdMap.get(C.dataId).id,d=e.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(r).buffer),p=e.dataIdMap.get(t.dataId).id;return s2(n,h,C.shape.length,d,Ie[o.dtype],s,l,a,u,i,p),t}const fU={kernelName:Xu,backendName:"wasm",setupFunc:lU,kernelFunc:hU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cU(c){const{inputs:e,attrs:f,backend:x}=c,{x:S}=e,{numOrSizeSplits:C,axis:o}=f,y=Qe(o,S.shape)[0],t=td(S,C,y),s=new Array(S.shape.length).fill(0),l=S.shape.slice();return t.map(a=>{const r=[...l];r[y]=a;const i=pr({inputs:{x:S},attrs:{begin:s,size:r},backend:x});return s[y]+=a,i})}const dU={kernelName:ac,backendName:"wasm",kernelFunc:cU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pU=Ee(ic);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mU=Ee(bm);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vU=en(hc);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let i2;function gU(c){i2=c.wasm.cwrap(ju,null,["number","number","number","number"])}function xU(c){const{backend:e,inputs:f,attrs:x}=c,{alpha:S}=x,{x:C}=f,o=e.dataIdMap.get(C.dataId).id,y=e.makeOutput(C.shape,C.dtype),t=e.dataIdMap.get(y.dataId).id;return i2(o,S,Ie[C.dtype],t),y}const yU={kernelName:ju,backendName:"wasm",setupFunc:gU,kernelFunc:xU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let r2;function TU(c){r2=c.wasm.cwrap(Hu,null,["number","array","number","array","array","array","array","array","number","number"])}function SU(c){const{backend:e,inputs:f,attrs:x}=c,{x:S}=f,{begin:C,end:o,strides:y,beginMask:t,endMask:s,ellipsisMask:l,newAxisMask:a,shrinkAxisMask:r}=x,{finalShapeSparse:i,finalShape:n,isIdentity:h,sliceDim0:d,isSimpleSlice:u,begin:p,end:m,strides:v}=jc(S.shape,C,o,y,t,s,l,a,r);let g;if(h)g=Mn({inputs:{x:S},backend:e,attrs:{shape:n}});else if(d||u){it(S.shape.length>=1,()=>`Input must have rank at least 1, got: ${S.shape.length}`);const T=Yc(p,m,v),w=pr({inputs:{x:S},backend:e,attrs:{begin:p,size:T}});g=Mn({inputs:{x:w},backend:e,attrs:{shape:n}}),e.disposeData(w.dataId)}else{const T=e.makeOutput(i,"float32"),w=e.dataIdMap.get(S.dataId).id,b=new Uint8Array(new Int32Array(Ne(S.shape)).buffer),E=new Uint8Array(new Int32Array(p).buffer),A=new Uint8Array(new Int32Array(m).buffer),R=new Uint8Array(new Int32Array(v).buffer),I=new Uint8Array(new Int32Array(i).buffer),P=new Uint8Array(new Int32Array(Ne(i)).buffer),N=e.dataIdMap.get(T.dataId).id;r2(w,b,S.shape.length,E,A,R,I,P,i.length,N),g=Mn({inputs:{x:T},backend:e,attrs:{shape:n}}),e.disposeData(T.dataId)}return g}const CU={kernelName:Hu,backendName:"wasm",setupFunc:TU,kernelFunc:SU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EU(c){const{backend:e,inputs:f,attrs:x}=c,{data:S,dataSplits:C}=f,{separator:o,nGramWidths:y,leftPad:t,rightPad:s,padWidth:l,preserveShortSequences:a}=x,r=e.readSync(S.dataId),i=e.readSync(C.dataId),[n,h]=Zg(r,i,o,y,t,s,l,a),d=e.makeOutput([n.length],"string"),u=e.dataIdMap.get(d.dataId);u.stringBytes=n;const p=e.makeOutput(C.shape,"int32");return e.typedArrayFromHeap(p).set(h),[d,p]}const wU={kernelName:fc,backendName:"wasm",kernelFunc:EU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bU(c){const{backend:e,inputs:f,attrs:x}=c,{input:S,delimiter:C}=f,{skipEmpty:o}=x,y=e.readSync(S.dataId),t=e.readSync(C.dataId),[s,l,a]=Qg(y,t[0],o),r=l.length,i=e.makeOutput([r,2],"int32");e.typedArrayFromHeap(i).set(s);const h=e.makeOutput([r],"string"),d=e.dataIdMap.get(h.dataId);d.stringBytes=l;const u=e.makeOutput([2],"int32");return e.typedArrayFromHeap(u).set(a),[i,h,u]}const AU={kernelName:cc,backendName:"wasm",kernelFunc:bU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RU(c){const{backend:e,inputs:f,attrs:x}=c,{input:S}=f,{numBuckets:C}=x,o=e.readSync(S.dataId),y=Jg(o,C),t=e.makeOutput(S.shape,"int32");return e.typedArrayFromHeap(t).set(y),t}const IU={kernelName:dc,backendName:"wasm",kernelFunc:RU};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PU=en(pc);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let a2;function FU(c){a2=c.wasm.cwrap(zu,null,["number","number","number","number"])}function NU(c){const{backend:e,inputs:f,attrs:x}=c,{axis:S,keepDims:C}=x,{x:o}=f,y=e.dataIdMap.get(o.dataId).id;let t=y,s=o;const{transposed:l,axes:a,originalAxes:r,inputWasTransposed:i}=Di(o,S,e);let n=a;if(i){const m=e.dataIdMap.get(l.dataId).id;m!==y&&(s=l,t=m,n=pn(n.length,s.shape.length))}an("sum",n,s.shape.length);const[h,d]=yn(s.shape,n),u=bt(d),p=e.makeOutput(h,s.dtype);if(bt(s.shape)!==0){const m=e.dataIdMap.get(p.dataId).id;a2(t,u,Ie[p.dtype],m)}if(i&&e.disposeData(l.dataId),C){const m=rn(p.shape,r);p.shape=m}return p}const MU={kernelName:zu,backendName:"wasm",setupFunc:FU,kernelFunc:NU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OU=Ee(mc);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DU=Ee(vc);/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let o2;function LU(c){o2=c.wasm.cwrap(Uu,null,["number","number","number","number","number","number","array","number","number","number"])}function BU(c){const{backend:e,inputs:f,attrs:x}=c,{tensor:S,indices:C,updates:o}=f,y=e.makeOutput(S.shape,S.dtype);if(bt(S.shape)===0)return y;const{sliceRank:t,numUpdates:s,sliceSize:l,strides:a,outputSize:r}=xr(o,C,S.shape),n=e.dataIdMap.get(C.dataId).id,d=e.dataIdMap.get(o.dataId).id,p=e.dataIdMap.get(S.dataId).id,m=new Uint8Array(new Int32Array(a).buffer),v=e.dataIdMap.get(y.dataId).id;return o2(n,d,Ie[o.dtype],t,s,l,m,r,v,p),y}const $U={kernelName:Uu,backendName:"wasm",setupFunc:LU,kernelFunc:BU};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let u2;function GU(c){u2=c.wasm.cwrap(Ka,null,["number","array","number","array","number","number"])}function UU(c){const{inputs:e,backend:f,attrs:x}=c,{x:S}=e,C=f.dataIdMap.get(S.dataId).id,{reps:o}=x,y=new Array(S.shape.length);for(let r=0;r<y.length;r++)y[r]=S.shape[r]*o[r];const t=new Uint8Array(new Int32Array(S.shape).buffer),s=new Uint8Array(new Int32Array(y).buffer),l=f.makeOutput(y,S.dtype),a=f.dataIdMap.get(l.dataId).id;return u2(C,t,S.shape.length,s,y.length,Ie[l.dtype],a),l}const VU={kernelName:Ka,backendName:"wasm",setupFunc:GU,kernelFunc:UU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let l2;function zU(c){l2=c.wasm.cwrap(Yu,null,["number","array","number","number","number","bool","number","number"])}const kU=({inputs:c,backend:e,attrs:f})=>{const{x}=c,{k:S,sorted:C}=f,o=e.dataIdMap.get(x.dataId).id,y=new Uint8Array(new Int32Array(x.shape).buffer),t=x.shape.slice();t[t.length-1]=S;const s=e.makeOutput(t,x.dtype),l=e.dataIdMap.get(s.dataId).id,a=e.makeOutput(t,"int32"),r=e.dataIdMap.get(a.dataId).id;return l2(o,y,x.shape.length,Ie[x.dtype],S,C,l,r),[s,a]},WU={kernelName:Yu,backendName:"wasm",setupFunc:zU,kernelFunc:kU};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let h2;function XU(c){h2=c.wasm.cwrap(Ku,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])}function HU(c){const{backend:e,inputs:f,attrs:x}=c,{image:S,transforms:C}=f,{interpolation:o,fillMode:y,fillValue:t,outputShape:s}=x,[l,a,r,i]=S.shape,[n,h]=s??[a,r],d=[l,n,h,i],u=new Uint8Array(new Int32Array(Ne(S.shape)).buffer),p=new Uint8Array(new Int32Array(Ne(d)).buffer),m=e.makeOutput(d,S.dtype),v=e.dataIdMap.get(m.dataId).id,T=e.dataIdMap.get(S.dataId).id,b=e.dataIdMap.get(C.dataId).id,E=o==="nearest"?1:2;let A;switch(y){case"constant":A=1;break;case"reflect":A=2;break;case"wrap":A=3;break;case"nearest":A=4;break;default:A=1;break}return h2(T,b,C.shape[0]>1,l,n,h,i,r,a,u,S.shape.length-1,p,d.length-1,E,A,t,v),m}const YU={kernelName:Ku,backendName:"wasm",setupFunc:XU,kernelFunc:HU};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KU(c){const{inputs:e,attrs:f,backend:x}=c,{axis:S}=f,{x:C}=e,{outputValues:o,outputShape:y,indices:t}=_g(x.readSync(C.dataId),S,C.shape,C.dtype);return[x.makeOutput(y,C.dtype,void 0,o),x.makeOutput([t.length],"int32",void 0,t)]}const jU={kernelName:gc,backendName:"wasm",kernelFunc:KU};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZU(c){const{inputs:e,backend:f,attrs:x}=c,{value:S}=e;let{axis:C}=x;C<0&&(C+=S.shape.length);const o=S.shape[C],y=S.shape.length,t=new Array(y-1);let s=0;for(let i=0;i<y;i++)i!==C&&(t[s++]=S.shape[i]);const l=new Array(o),a=new Array(y).fill(0),r=S.shape.slice();r[C]=1;for(let i=0;i<l.length;i++)a[C]=i,l[i]=pr({inputs:{x:S},attrs:{begin:a,size:r},backend:f});return l.map(({dataId:i,dtype:n})=>({dataId:i,dtype:n,shape:t}))}const QU={kernelName:xc,backendName:"wasm",kernelFunc:ZU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JU(c){const{inputs:{x:e},backend:f}=c,x=f.makeOutput(e.shape,e.dtype);return f.typedArrayFromHeap(x).fill(0),x}const qU={kernelName:yc,backendName:"wasm",kernelFunc:JU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _U=[XO,HO,YO,KO,jO,JO,rD,uD,lD,hD,fD,cD,dD,pD,mD,xD,RD,SD,wD,ND,$D,VD,zD,WD,XD,HD,jD,ZD,qD,eL,iL,oL,hL,fL,cL,mL,xL,SL,wL,RL,FL,OL,BL,UL,kL,WL,YL,jL,ZL,QL,JL,qL,_L,nB,sB,iB,oB,hB,dB,vB,yB,SB,EB,qO,wB,bB,AB,PB,NB,OB,BB,GB,$B,VB,zB,WB,HB,jB,JB,t$,e$,i$,o$,h$,d$,v$,y$,C$,E$,A$,N$,M$,O$,D$,$$,V$,W$,H$,j$,Q$,q$,U1,eG,iG,oG,lG,hG,fG,cG,dG,ID,vG,yG,CG,bG,IG,NG,MG,OG,BG,UG,kG,WG,YG,KG,jG,ZG,LD,I$,QG,qG,eU,iU,aU,uU,fU,dU,pU,mU,vU,yU,CU,wU,AU,IU,PU,MU,OU,DU,$U,VU,WU,YU,nD,jU,QU,qU];for(const c of _U)Im(c);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xh=St();xh.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch{return!1}});xh.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(xh.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}});var f2={exports:{}};(function(c,e){var f=(()=>{var x=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(x=x||__filename),function(S){S=S||{};function C(){return L.buffer!=W&&mt(L.buffer),K}function o(){return L.buffer!=W&&mt(L.buffer),q}function y(){return L.buffer!=W&&mt(L.buffer),_}function t(){return L.buffer!=W&&mt(L.buffer),rt}function s(){return L.buffer!=W&&mt(L.buffer),ft}var l=typeof S<"u"?S:{},a,r;l.ready=new Promise(function(et,lt){a=et,r=lt});var i;typeof process<"u"&&process.listeners&&(i={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var n=Object.assign({},l),h=(et,lt)=>{throw lt},d=typeof window=="object",u=typeof importScripts=="function",p=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",m=l.ENVIRONMENT_IS_PTHREAD||!1,v="";function g(et){return l.locateFile?l.locateFile(et,v):v+et}var T,w,b;function E(et){if(et instanceof Xe)return;F("exiting due to exception: "+et)}if(p){var A=vi,R=vi;u?v=R.dirname(v)+"/":v=__dirname+"/",T=(lt,Tt)=>(lt=ce(lt)?new URL(lt):R.normalize(lt),A.readFileSync(lt,Tt?void 0:"utf8")),b=lt=>{var Tt=T(lt,!0);return Tt.buffer||(Tt=new Uint8Array(Tt)),Tt},w=(lt,Tt,Lt)=>{lt=ce(lt)?new URL(lt):R.normalize(lt),A.readFile(lt,function(Kt,Xt){Kt?Lt(Kt):Tt(Xt.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(lt){if(!(lt instanceof Xe))throw lt}),process.on("unhandledRejection",function(lt){throw lt}),h=(lt,Tt)=>{if(Zt())throw process.exitCode=lt,Tt;E(Tt),process.exit(lt)},l.inspect=function(){return"[Emscripten Module object]"};let et;try{et=vi}catch(lt){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),lt}Kn.Worker=et.Worker}else(d||u)&&(u?v=self.location.href:typeof document<"u"&&document.currentScript&&(v=document.currentScript.src),typeof x<"u"&&x&&(v=x),v.indexOf("blob:")!==0?v=v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):v="",p||(T=et=>{var lt=new XMLHttpRequest;return lt.open("GET",et,!1),lt.send(null),lt.responseText},u&&(b=et=>{var lt=new XMLHttpRequest;return lt.open("GET",et,!1),lt.responseType="arraybuffer",lt.send(null),new Uint8Array(lt.response)}),w=(et,lt,Tt)=>{var Lt=new XMLHttpRequest;Lt.open("GET",et,!0),Lt.responseType="arraybuffer",Lt.onload=()=>{if(Lt.status==200||Lt.status==0&&Lt.response){lt(Lt.response);return}Tt()},Lt.onerror=Tt,Lt.send(null)}));p&&typeof performance>"u"&&(Kn.performance=vi.performance);var I=console.log.bind(console),P=console.warn.bind(console);p&&(I=et=>A.writeSync(1,et+`
`),P=et=>A.writeSync(2,et+`
`));var N=l.print||I,F=l.printErr||P;Object.assign(l,n),n=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram,l.quit&&(h=l.quit);var O;l.wasmBinary&&(O=l.wasmBinary);var D=l.noExitRuntime||!0;typeof WebAssembly!="object"&&we("no native wasm support detected");var L,z,X=!1,H;function J(et,lt){et||we(lt)}var G=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function k(et,lt,Tt){lt>>>=0;for(var Lt=lt+Tt,Kt=lt;et[Kt]&&!(Kt>=Lt);)++Kt;if(Kt-lt>16&&et.buffer&&G)return G.decode(et.buffer instanceof SharedArrayBuffer?et.slice(lt,Kt):et.subarray(lt,Kt));for(var Xt="";lt<Kt;){var Mt=et[lt++];if(!(Mt&128)){Xt+=String.fromCharCode(Mt);continue}var Ft=et[lt++]&63;if((Mt&224)==192){Xt+=String.fromCharCode((Mt&31)<<6|Ft);continue}var $=et[lt++]&63;if((Mt&240)==224?Mt=(Mt&15)<<12|Ft<<6|$:Mt=(Mt&7)<<18|Ft<<12|$<<6|et[lt++]&63,Mt<65536)Xt+=String.fromCharCode(Mt);else{var Z=Mt-65536;Xt+=String.fromCharCode(55296|Z>>10,56320|Z&1023)}}return Xt}function M(et,lt){return et>>>=0,et?k(o(),et,lt):""}function B(et,lt,Tt,Lt){if(Tt>>>=0,!(Lt>0))return 0;for(var Kt=Tt,Xt=Tt+Lt-1,Mt=0;Mt<et.length;++Mt){var Ft=et.charCodeAt(Mt);if(Ft>=55296&&Ft<=57343){var $=et.charCodeAt(++Mt);Ft=65536+((Ft&1023)<<10)|$&1023}if(Ft<=127){if(Tt>=Xt)break;lt[Tt++>>>0]=Ft}else if(Ft<=2047){if(Tt+1>=Xt)break;lt[Tt++>>>0]=192|Ft>>6,lt[Tt++>>>0]=128|Ft&63}else if(Ft<=65535){if(Tt+2>=Xt)break;lt[Tt++>>>0]=224|Ft>>12,lt[Tt++>>>0]=128|Ft>>6&63,lt[Tt++>>>0]=128|Ft&63}else{if(Tt+3>=Xt)break;lt[Tt++>>>0]=240|Ft>>18,lt[Tt++>>>0]=128|Ft>>12&63,lt[Tt++>>>0]=128|Ft>>6&63,lt[Tt++>>>0]=128|Ft&63}}return lt[Tt>>>0]=0,Tt-Kt}function U(et,lt,Tt){return B(et,o(),lt,Tt)}var W,K,q,_,rt,ft;m&&(W=l.buffer);function mt(et){W=et,l.HEAP8=K=new Int8Array(et),l.HEAP16=new Int16Array(et),l.HEAP32=_=new Int32Array(et),l.HEAPU8=q=new Uint8Array(et),l.HEAPU16=new Uint16Array(et),l.HEAPU32=rt=new Uint32Array(et),l.HEAPF32=new Float32Array(et),l.HEAPF64=ft=new Float64Array(et)}var vt=l.INITIAL_MEMORY||16777216;if(m)L=l.wasmMemory,W=l.buffer;else if(l.wasmMemory)L=l.wasmMemory;else if(L=new WebAssembly.Memory({initial:vt/65536,maximum:65536,shared:!0}),!(L.buffer instanceof SharedArrayBuffer))throw F("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),p&&F("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");L&&(W=L.buffer),vt=W.byteLength,mt(W);var yt,xt=[],It=[],$t=[];function Zt(){return D}function Bt(){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)Ut(l.preRun.shift());Re(xt)}function At(){m||Re(It)}function kt(){if(!m){if(l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;)te(l.postRun.shift());Re($t)}}function Ut(et){xt.unshift(et)}function ee(et){It.unshift(et)}function te(et){$t.unshift(et)}var fe=0,ae=null;function le(et){fe++,l.monitorRunDependencies&&l.monitorRunDependencies(fe)}function re(et){if(fe--,l.monitorRunDependencies&&l.monitorRunDependencies(fe),fe==0&&ae){var lt=ae;ae=null,lt()}}function we(et){l.onAbort&&l.onAbort(et),et="Aborted("+et+")",F(et),X=!0,H=1,et+=". Build with -sASSERTIONS for more info.";var lt=new WebAssembly.RuntimeError(et);throw r(lt),lt}var Se="data:application/octet-stream;base64,";function Me(et){return et.startsWith(Se)}function ce(et){return et.startsWith("file://")}var se;se="tfjs-backend-wasm-threaded-simd.wasm",Me(se)||(se=g(se));function Ae(et){try{if(et==se&&O)return new Uint8Array(O);if(b)return b(et);throw"both async and sync fetching of the wasm failed"}catch(lt){we(lt)}}function Le(){if(!O&&(d||u)){if(typeof fetch=="function"&&!ce(se))return fetch(se,{credentials:"same-origin"}).then(function(et){if(!et.ok)throw"failed to load wasm binary file at '"+se+"'";return et.arrayBuffer()}).catch(function(){return Ae(se)});if(w)return new Promise(function(et,lt){w(se,function(Tt){et(new Uint8Array(Tt))},lt)})}return Promise.resolve().then(function(){return Ae(se)})}function nn(){var et={env:oi,wasi_snapshot_preview1:oi};function lt(Mt,Ft){var $=Mt.exports;if(l.asm=$,sn(l.asm._emscripten_tls_init),yt=l.asm.__indirect_function_table,ee(l.asm.__wasm_call_ctors),z=Ft,!m){var Z=zt.unusedWorkers.length;zt.unusedWorkers.forEach(function(tt){zt.loadWasmModuleToWorker(tt,function(){--Z||re()})})}}m||le();function Tt(Mt){lt(Mt.instance,Mt.module)}function Lt(Mt){return Le().then(function(Ft){return WebAssembly.instantiate(Ft,et)}).then(function(Ft){return Ft}).then(Mt,function(Ft){F("failed to asynchronously prepare wasm: "+Ft),we(Ft)})}function Kt(){return!O&&typeof WebAssembly.instantiateStreaming=="function"&&!Me(se)&&!ce(se)&&!p&&typeof fetch=="function"?fetch(se,{credentials:"same-origin"}).then(function(Mt){var Ft=WebAssembly.instantiateStreaming(Mt,et);return Ft.then(Tt,function($){return F("wasm streaming compile failed: "+$),F("falling back to ArrayBuffer instantiation"),Lt(Tt)})}):Lt(Tt)}if(l.instantiateWasm)try{var Xt=l.instantiateWasm(et,lt);return Xt}catch(Mt){F("Module.instantiateWasm callback failed with error: "+Mt),r(Mt)}return Kt().catch(r),{}}var ge={};function Xe(et){this.name="ExitStatus",this.message="Program terminated with exit("+et+")",this.status=et}function Qn(et){var lt=zt.pthreads[et];delete zt.pthreads[et],lt.terminate(),Vs(et),zt.runningWorkers.splice(zt.runningWorkers.indexOf(lt),1),lt.pthread_ptr=0}function Rn(et){var lt=zt.pthreads[et];lt.postMessage({cmd:"cancel"})}function tn(et){var lt=zt.pthreads[et];J(lt),zt.returnWorkerToPool(lt)}function ue(et){var lt=zt.getNewWorker();if(!lt)return 6;zt.runningWorkers.push(lt),zt.pthreads[et.pthread_ptr]=lt,lt.pthread_ptr=et.pthread_ptr;var Tt={cmd:"run",start_routine:et.startRoutine,arg:et.arg,pthread_ptr:et.pthread_ptr};return lt.runPthread=()=>{p&&lt.ref(),lt.postMessage(Tt,et.transferList),delete lt.runPthread},lt.loaded&&lt.runPthread(),0}function Os(et){if(m)return As(1,1,et);H=et,Zt()||(zt.terminateAllThreads(),l.onExit&&l.onExit(et),X=!0),h(et,new Xe(et))}function wt(et,lt){if(H=et,!lt&&m)throw ie(et),"unwind";Os(et)}var Dt=wt;function _t(et){if(et instanceof Xe||et=="unwind")return H;h(1,et)}var zt={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){m?zt.initWorker():zt.initMainThread()},initMainThread:function(){for(var et=8;et--;)zt.allocateUnusedWorker()},initWorker:function(){D=!1},setExitStatus:function(et){H=et},terminateAllThreads:function(){for(var et of Object.values(zt.pthreads))zt.returnWorkerToPool(et);for(var et of zt.unusedWorkers)et.terminate();zt.unusedWorkers=[]},returnWorkerToPool:function(et){var lt=et.pthread_ptr;delete zt.pthreads[lt],zt.unusedWorkers.push(et),zt.runningWorkers.splice(zt.runningWorkers.indexOf(et),1),et.pthread_ptr=0,p&&et.unref(),Vs(lt)},receiveObjectTransfer:function(et){},threadInitTLS:function(){zt.tlsInitFunctions.forEach(et=>et())},loadWasmModuleToWorker:function(et,lt){et.onmessage=Xt=>{var Mt=Xt.data,Ft=Mt.cmd;if(et.pthread_ptr&&(zt.currentProxiedOperationCallerThread=et.pthread_ptr),Mt.targetThread&&Mt.targetThread!=Rs()){var $=zt.pthreads[Mt.targetThread];$?$.postMessage(Mt,Mt.transferList):F('Internal error! Worker sent a message "'+Ft+'" to target pthread '+Mt.targetThread+", but that thread no longer exists!"),zt.currentProxiedOperationCallerThread=void 0;return}Ft==="processProxyingQueue"?si(Mt.queue):Ft==="spawnThread"?ue(Mt):Ft==="cleanupThread"?tn(Mt.thread):Ft==="killThread"?Qn(Mt.thread):Ft==="cancelThread"?Rn(Mt.thread):Ft==="loaded"?(et.loaded=!0,p&&et.unref(),lt&&lt(et),et.runPthread&&et.runPthread()):Ft==="print"?N("Thread "+Mt.threadId+": "+Mt.text):Ft==="printErr"?F("Thread "+Mt.threadId+": "+Mt.text):Ft==="alert"?alert("Thread "+Mt.threadId+": "+Mt.text):Mt.target==="setimmediate"?et.postMessage(Mt):Ft==="callHandler"?l[Mt.handler](...Mt.args):Ft&&F("worker sent an unknown command "+Ft),zt.currentProxiedOperationCallerThread=void 0},et.onerror=Xt=>{var Mt="worker sent an error!";throw F(Mt+" "+Xt.filename+":"+Xt.lineno+": "+Xt.message),Xt},p&&(et.on("message",function(Xt){et.onmessage({data:Xt})}),et.on("error",function(Xt){et.onerror(Xt)}),et.on("detachedExit",function(){}));var Tt=[],Lt=["onExit","onAbort","print","printErr"];for(var Kt of Lt)l.hasOwnProperty(Kt)&&Tt.push(Kt);et.postMessage({cmd:"load",handlers:Tt,urlOrBlob:l.mainScriptUrlOrBlob||x,wasmMemory:L,wasmModule:z})},allocateUnusedWorker:function(){var et,lt=g("tfjs-backend-wasm-threaded-simd.worker.js");et=new Worker(lt),zt.unusedWorkers.push(et)},getNewWorker:function(){return zt.unusedWorkers.length==0&&(zt.allocateUnusedWorker(),zt.loadWasmModuleToWorker(zt.unusedWorkers[0])),zt.unusedWorkers.pop()}};l.PThread=zt;function Re(et){for(;et.length>0;)et.shift()(l)}function xe(){var et=Rs(),lt=y()[et+52>>>2],Tt=y()[et+56>>>2],Lt=lt-Tt;zi(lt,Lt),V(lt)}l.establishStackSpace=xe;function ie(et){if(m)return As(2,0,et);try{Dt(et)}catch(lt){_t(lt)}}var oe=[];function He(et){var lt=oe[et];return lt||(et>=oe.length&&(oe.length=et+1),oe[et]=lt=yt.get(et)),lt}function Pe(et,lt){var Tt=He(et)(lt);Zt()?zt.setExitStatus(Tt):fi(Tt)}l.invokeEntryPoint=Pe;function sn(et){zt.tlsInitFunctions.push(et)}function Ds(et){ui(et,!u,1,!d),zt.threadInitTLS()}function Jn(et){m?postMessage({cmd:"cleanupThread",thread:et}):tn(et)}function Ls(et,lt,Tt,Lt){return m?As(3,1,et,lt,Tt,Lt):Ge(et,lt,Tt,Lt)}function Ge(et,lt,Tt,Lt){if(typeof SharedArrayBuffer>"u")return F("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Kt=[],Xt=0;if(m&&(Kt.length===0||Xt))return Ls(et,lt,Tt,Lt);var Mt={startRoutine:Tt,pthread_ptr:et,arg:Lt,transferList:Kt};return m?(Mt.cmd="spawnThread",postMessage(Mt,Kt),0):ue(Mt)}function qn(){return 65536}var Bs=!0;function br(){return Bs}function si(et){Atomics.store(y(),et>>2,1),Rs()&&hi(et),Atomics.compareExchange(y(),et>>2,1,0)}l.executeNotifiedProxyingQueue=si;function ii(et,lt,Tt,Lt){if(et==lt)setTimeout(()=>si(Lt));else if(m)postMessage({targetThread:et,cmd:"processProxyingQueue",queue:Lt});else{var Kt=zt.pthreads[et];if(!Kt)return;Kt.postMessage({cmd:"processProxyingQueue",queue:Lt})}return 1}function ds(et,lt,Tt){return-1}function da(){we("")}function $s(et){$s.shown||($s.shown={}),$s.shown[et]||($s.shown[et]=1,p&&(et="warning: "+et),F(et))}function ri(){p||u||$s("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function Ar(){return Date.now()}function ai(){return 4294901760}function Bi(){return ai()}var Gs;p?Gs=()=>{var et=process.hrtime();return et[0]*1e3+et[1]/1e6}:Gs=()=>performance.timeOrigin+performance.now();function Us(et,lt,Tt){o().copyWithin(et>>>0,lt>>>0,lt+Tt>>>0)}function bs(){return p?vi.cpus().length:navigator.hardwareConcurrency}function In(et){var lt=ci(),Tt=et();return V(lt),Tt}function As(et,lt){var Tt=arguments.length-2,Lt=arguments;return In(()=>{for(var Kt=Tt,Xt=j(Kt*8),Mt=Xt>>3,Ft=0;Ft<Tt;Ft++){var $=Lt[2+Ft];s()[Mt+Ft>>>0]=$}return li(et,Kt,Xt,lt)})}var $i=[];function Rr(et,lt,Tt){$i.length=lt;for(var Lt=Tt>>3,Kt=0;Kt<lt;Kt++)$i[Kt]=s()[Lt+Kt>>>0];var Xt=et<0,Mt=Xt?ge[-et-1]:va[et];return Mt.apply(null,$i)}function Gi(et){try{return L.grow(et-W.byteLength+65535>>>16),mt(L.buffer),1}catch{}}function Sn(et){var lt=o().length;if(et=et>>>0,et<=lt)return!1;var Tt=ai();if(et>Tt)return!1;let Lt=($,Z)=>$+(Z-$%Z)%Z;for(var Kt=1;Kt<=4;Kt*=2){var Xt=lt*(1+.2/Kt);Xt=Math.min(Xt,et+100663296);var Mt=Math.min(Tt,Lt(Math.max(et,Xt),65536)),Ft=Gi(Mt);if(Ft)return!0}return!1}function Ir(){throw"unwind"}function _n(et){return m?As(4,1,et):52}function Ui(et,lt,Tt,Lt,Kt){return m?As(5,1,et,lt,Tt,Lt,Kt):70}var Vi=[null,[],[]];function pa(et,lt){var Tt=Vi[et];lt===0||lt===10?((et===1?N:F)(k(Tt,0)),Tt.length=0):Tt.push(lt)}function Pr(et,lt,Tt,Lt){if(m)return As(6,1,et,lt,Tt,Lt);for(var Kt=0,Xt=0;Xt<Tt;Xt++){var Mt=t()[lt>>>2],Ft=t()[lt+4>>>2];lt+=8;for(var $=0;$<Ft;$++)pa(et,o()[Mt+$>>>0]);Kt+=Ft}return t()[Lt>>>2]=Kt,0}function ps(et){var lt=l["_"+et];return lt}function Fr(et,lt){C().set(et,lt>>>0)}function Nr(et,lt,Tt,Lt,Kt){var Xt={string:ot=>{var dt=0;if(ot!=null&&ot!==0){var Et=(ot.length<<2)+1;dt=j(Et),U(ot,dt,Et)}return dt},array:ot=>{var dt=j(ot.length);return Fr(ot,dt),dt}};function Mt(ot){return lt==="string"?M(ot):lt==="boolean"?!!ot:ot}var Ft=ps(et),$=[],Z=0;if(Lt)for(var tt=0;tt<Lt.length;tt++){var nt=Xt[Tt[tt]];nt?(Z===0&&(Z=ci()),$[tt]=nt(Lt[tt])):$[tt]=Lt[tt]}var ut=Ft.apply(null,$);function at(ot){return Z!==0&&V(Z),Mt(ot)}return ut=at(ut),ut}function ma(et,lt,Tt,Lt){Tt=Tt||[];var Kt=Tt.every(Mt=>Mt==="number"||Mt==="boolean"),Xt=lt!=="string";return Xt&&Kt&&!Lt?ps(et):function(){return Nr(et,lt,Tt,arguments)}}zt.init();var va=[null,Os,ie,Ls,_n,Ui,Pr],oi={__emscripten_init_main_thread_js:Ds,__emscripten_thread_cleanup:Jn,__pthread_create_js:Ge,_emscripten_default_pthread_stack_size:qn,_emscripten_get_now_is_monotonic:br,_emscripten_notify_task_queue:ii,_emscripten_set_offscreencanvas_size:ds,abort:da,emscripten_check_blocking_allowed:ri,emscripten_date_now:Ar,emscripten_get_heap_max:Bi,emscripten_get_now:Gs,emscripten_memcpy_big:Us,emscripten_num_logical_cores:bs,emscripten_receive_on_main_thread_js:Rr,emscripten_resize_heap:Sn,emscripten_unwind_to_js_event_loop:Ir,exit:Dt,fd_close:_n,fd_seek:Ui,fd_write:Pr,memory:L||l.wasmMemory};nn(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.__wasm_call_ctors).apply(null,arguments)},l._init=function(){return(l._init=l.asm.init).apply(null,arguments)},l._init_with_threads_count=function(){return(l._init_with_threads_count=l.asm.init_with_threads_count).apply(null,arguments)},l._get_threads_count=function(){return(l._get_threads_count=l.asm.get_threads_count).apply(null,arguments)},l._register_tensor=function(){return(l._register_tensor=l.asm.register_tensor).apply(null,arguments)},l._dispose_data=function(){return(l._dispose_data=l.asm.dispose_data).apply(null,arguments)},l._dispose=function(){return(l._dispose=l.asm.dispose).apply(null,arguments)},l._Abs=function(){return(l._Abs=l.asm.Abs).apply(null,arguments)},l._Acos=function(){return(l._Acos=l.asm.Acos).apply(null,arguments)},l._Acosh=function(){return(l._Acosh=l.asm.Acosh).apply(null,arguments)},l._Add=function(){return(l._Add=l.asm.Add).apply(null,arguments)},l._AddN=function(){return(l._AddN=l.asm.AddN).apply(null,arguments)},l._All=function(){return(l._All=l.asm.All).apply(null,arguments)},l._Any=function(){return(l._Any=l.asm.Any).apply(null,arguments)},l._ArgMax=function(){return(l._ArgMax=l.asm.ArgMax).apply(null,arguments)},l._ArgMin=function(){return(l._ArgMin=l.asm.ArgMin).apply(null,arguments)},l._Asin=function(){return(l._Asin=l.asm.Asin).apply(null,arguments)},l._Asinh=function(){return(l._Asinh=l.asm.Asinh).apply(null,arguments)},l._Atan=function(){return(l._Atan=l.asm.Atan).apply(null,arguments)},l._Atan2=function(){return(l._Atan2=l.asm.Atan2).apply(null,arguments)},l._Atanh=function(){return(l._Atanh=l.asm.Atanh).apply(null,arguments)},l._AvgPool=function(){return(l._AvgPool=l.asm.AvgPool).apply(null,arguments)},l._AvgPool3D=function(){return(l._AvgPool3D=l.asm.AvgPool3D).apply(null,arguments)},l._AvgPool3DGrad=function(){return(l._AvgPool3DGrad=l.asm.AvgPool3DGrad).apply(null,arguments)},l._AvgPoolGrad=function(){return(l._AvgPoolGrad=l.asm.AvgPoolGrad).apply(null,arguments)},l._BatchMatMul=function(){return(l._BatchMatMul=l.asm.BatchMatMul).apply(null,arguments)},l._Bincount=function(){return(l._Bincount=l.asm.Bincount).apply(null,arguments)},l._BitwiseAnd=function(){return(l._BitwiseAnd=l.asm.BitwiseAnd).apply(null,arguments)},l._Ceil=function(){return(l._Ceil=l.asm.Ceil).apply(null,arguments)},l._ClipByValue=function(){return(l._ClipByValue=l.asm.ClipByValue).apply(null,arguments)},l._Conv2D=function(){return(l._Conv2D=l.asm.Conv2D).apply(null,arguments)},l._Conv2DBackpropInput=function(){return(l._Conv2DBackpropInput=l.asm.Conv2DBackpropInput).apply(null,arguments)},l._Conv3D=function(){return(l._Conv3D=l.asm.Conv3D).apply(null,arguments)},l._Conv3DBackpropFilterV2=function(){return(l._Conv3DBackpropFilterV2=l.asm.Conv3DBackpropFilterV2).apply(null,arguments)},l._Conv3DBackpropInputV2=function(){return(l._Conv3DBackpropInputV2=l.asm.Conv3DBackpropInputV2).apply(null,arguments)},l._Cos=function(){return(l._Cos=l.asm.Cos).apply(null,arguments)},l._Cosh=function(){return(l._Cosh=l.asm.Cosh).apply(null,arguments)},l._CropAndResize=function(){return(l._CropAndResize=l.asm.CropAndResize).apply(null,arguments)},l._Cumprod=function(){return(l._Cumprod=l.asm.Cumprod).apply(null,arguments)},l._Cumsum=function(){return(l._Cumsum=l.asm.Cumsum).apply(null,arguments)},l._DenseBincount=function(){return(l._DenseBincount=l.asm.DenseBincount).apply(null,arguments)},l._DepthToSpace=function(){return(l._DepthToSpace=l.asm.DepthToSpace).apply(null,arguments)},l._DepthwiseConv2dNative=function(){return(l._DepthwiseConv2dNative=l.asm.DepthwiseConv2dNative).apply(null,arguments)},l._Diag=function(){return(l._Diag=l.asm.Diag).apply(null,arguments)},l._Dilation2D=function(){return(l._Dilation2D=l.asm.Dilation2D).apply(null,arguments)},l._Dilation2DBackpropFilter=function(){return(l._Dilation2DBackpropFilter=l.asm.Dilation2DBackpropFilter).apply(null,arguments)},l._Dilation2DBackpropInput=function(){return(l._Dilation2DBackpropInput=l.asm.Dilation2DBackpropInput).apply(null,arguments)},l._Elu=function(){return(l._Elu=l.asm.Elu).apply(null,arguments)},l._EluGrad=function(){return(l._EluGrad=l.asm.EluGrad).apply(null,arguments)},l._Equal=function(){return(l._Equal=l.asm.Equal).apply(null,arguments)},l._Erf=function(){return(l._Erf=l.asm.Erf).apply(null,arguments)},l._Exp=function(){return(l._Exp=l.asm.Exp).apply(null,arguments)},l._Expm1=function(){return(l._Expm1=l.asm.Expm1).apply(null,arguments)},l._FlipLeftRight=function(){return(l._FlipLeftRight=l.asm.FlipLeftRight).apply(null,arguments)},l._Floor=function(){return(l._Floor=l.asm.Floor).apply(null,arguments)},l._FloorDiv=function(){return(l._FloorDiv=l.asm.FloorDiv).apply(null,arguments)},l._FusedBatchNorm=function(){return(l._FusedBatchNorm=l.asm.FusedBatchNorm).apply(null,arguments)},l._FusedConv2D=function(){return(l._FusedConv2D=l.asm.FusedConv2D).apply(null,arguments)},l._FusedDepthwiseConv2D=function(){return(l._FusedDepthwiseConv2D=l.asm.FusedDepthwiseConv2D).apply(null,arguments)},l._Gather=function(){return(l._Gather=l.asm.Gather).apply(null,arguments)},l._GatherNd=function(){return(l._GatherNd=l.asm.GatherNd).apply(null,arguments)},l._Greater=function(){return(l._Greater=l.asm.Greater).apply(null,arguments)},l._GreaterEqual=function(){return(l._GreaterEqual=l.asm.GreaterEqual).apply(null,arguments)},l._IsFinite=function(){return(l._IsFinite=l.asm.IsFinite).apply(null,arguments)},l._IsInf=function(){return(l._IsInf=l.asm.IsInf).apply(null,arguments)},l._IsNan=function(){return(l._IsNan=l.asm.IsNan).apply(null,arguments)},l._LRN=function(){return(l._LRN=l.asm.LRN).apply(null,arguments)},l._LRNGrad=function(){return(l._LRNGrad=l.asm.LRNGrad).apply(null,arguments)},l._LeakyRelu=function(){return(l._LeakyRelu=l.asm.LeakyRelu).apply(null,arguments)},l._Less=function(){return(l._Less=l.asm.Less).apply(null,arguments)},l._LessEqual=function(){return(l._LessEqual=l.asm.LessEqual).apply(null,arguments)},l._LinSpace=function(){return(l._LinSpace=l.asm.LinSpace).apply(null,arguments)},l._Log=function(){return(l._Log=l.asm.Log).apply(null,arguments)},l._Log1p=function(){return(l._Log1p=l.asm.Log1p).apply(null,arguments)},l._LogicalAnd=function(){return(l._LogicalAnd=l.asm.LogicalAnd).apply(null,arguments)},l._LogicalNot=function(){return(l._LogicalNot=l.asm.LogicalNot).apply(null,arguments)},l._LogicalOr=function(){return(l._LogicalOr=l.asm.LogicalOr).apply(null,arguments)},l._LogicalXor=function(){return(l._LogicalXor=l.asm.LogicalXor).apply(null,arguments)},l._Max=function(){return(l._Max=l.asm.Max).apply(null,arguments)},l._MaxPool=function(){return(l._MaxPool=l.asm.MaxPool).apply(null,arguments)},l._MaxPool3D=function(){return(l._MaxPool3D=l.asm.MaxPool3D).apply(null,arguments)},l._MaxPool3DGrad=function(){return(l._MaxPool3DGrad=l.asm.MaxPool3DGrad).apply(null,arguments)},l._MaxPoolGrad=function(){return(l._MaxPoolGrad=l.asm.MaxPoolGrad).apply(null,arguments)},l._MaxPoolWithArgmax=function(){return(l._MaxPoolWithArgmax=l.asm.MaxPoolWithArgmax).apply(null,arguments)},l._Maximum=function(){return(l._Maximum=l.asm.Maximum).apply(null,arguments)},l._Mean=function(){return(l._Mean=l.asm.Mean).apply(null,arguments)},l._Min=function(){return(l._Min=l.asm.Min).apply(null,arguments)},l._Minimum=function(){return(l._Minimum=l.asm.Minimum).apply(null,arguments)},l._MirrorPad=function(){return(l._MirrorPad=l.asm.MirrorPad).apply(null,arguments)},l._Mod=function(){return(l._Mod=l.asm.Mod).apply(null,arguments)},l._Multinomial=function(){return(l._Multinomial=l.asm.Multinomial).apply(null,arguments)},l._Multiply=function(){return(l._Multiply=l.asm.Multiply).apply(null,arguments)},l._Neg=function(){return(l._Neg=l.asm.Neg).apply(null,arguments)},l._NonMaxSuppressionV3=function(){return(l._NonMaxSuppressionV3=l.asm.NonMaxSuppressionV3).apply(null,arguments)},l._NonMaxSuppressionV4=function(){return(l._NonMaxSuppressionV4=l.asm.NonMaxSuppressionV4).apply(null,arguments)},l._NonMaxSuppressionV5=function(){return(l._NonMaxSuppressionV5=l.asm.NonMaxSuppressionV5).apply(null,arguments)},l._NotEqual=function(){return(l._NotEqual=l.asm.NotEqual).apply(null,arguments)},l._OneHot=function(){return(l._OneHot=l.asm.OneHot).apply(null,arguments)},l._PadV2=function(){return(l._PadV2=l.asm.PadV2).apply(null,arguments)},l._Pow=function(){return(l._Pow=l.asm.Pow).apply(null,arguments)},l._Prelu=function(){return(l._Prelu=l.asm.Prelu).apply(null,arguments)},l._Prod=function(){return(l._Prod=l.asm.Prod).apply(null,arguments)},l._RealDiv=function(){return(l._RealDiv=l.asm.RealDiv).apply(null,arguments)},l._Reciprocal=function(){return(l._Reciprocal=l.asm.Reciprocal).apply(null,arguments)},l._Relu=function(){return(l._Relu=l.asm.Relu).apply(null,arguments)},l._Relu6=function(){return(l._Relu6=l.asm.Relu6).apply(null,arguments)},l._ResizeBilinear=function(){return(l._ResizeBilinear=l.asm.ResizeBilinear).apply(null,arguments)},l._ResizeBilinearGrad=function(){return(l._ResizeBilinearGrad=l.asm.ResizeBilinearGrad).apply(null,arguments)},l._ResizeNearestNeighbor=function(){return(l._ResizeNearestNeighbor=l.asm.ResizeNearestNeighbor).apply(null,arguments)},l._ResizeNearestNeighborGrad=function(){return(l._ResizeNearestNeighborGrad=l.asm.ResizeNearestNeighborGrad).apply(null,arguments)},l._Reverse=function(){return(l._Reverse=l.asm.Reverse).apply(null,arguments)},l._RotateWithOffset=function(){return(l._RotateWithOffset=l.asm.RotateWithOffset).apply(null,arguments)},l._Round=function(){return(l._Round=l.asm.Round).apply(null,arguments)},l._Rsqrt=function(){return(l._Rsqrt=l.asm.Rsqrt).apply(null,arguments)},l._ScatterNd=function(){return(l._ScatterNd=l.asm.ScatterNd).apply(null,arguments)},l._SearchSorted=function(){return(l._SearchSorted=l.asm.SearchSorted).apply(null,arguments)},l._SelectV2=function(){return(l._SelectV2=l.asm.SelectV2).apply(null,arguments)},l._Selu=function(){return(l._Selu=l.asm.Selu).apply(null,arguments)},l._Sigmoid=function(){return(l._Sigmoid=l.asm.Sigmoid).apply(null,arguments)},l._Sign=function(){return(l._Sign=l.asm.Sign).apply(null,arguments)},l._Sin=function(){return(l._Sin=l.asm.Sin).apply(null,arguments)},l._Sinh=function(){return(l._Sinh=l.asm.Sinh).apply(null,arguments)},l._Softmax=function(){return(l._Softmax=l.asm.Softmax).apply(null,arguments)},l._Softplus=function(){return(l._Softplus=l.asm.Softplus).apply(null,arguments)},l._SparseFillEmptyRows=function(){return(l._SparseFillEmptyRows=l.asm.SparseFillEmptyRows).apply(null,arguments)},l._SparseReshape=function(){return(l._SparseReshape=l.asm.SparseReshape).apply(null,arguments)},l._SparseSegmentReduction=function(){return(l._SparseSegmentReduction=l.asm.SparseSegmentReduction).apply(null,arguments)},l._SparseToDense=function(){return(l._SparseToDense=l.asm.SparseToDense).apply(null,arguments)},l._Sqrt=function(){return(l._Sqrt=l.asm.Sqrt).apply(null,arguments)},l._Square=function(){return(l._Square=l.asm.Square).apply(null,arguments)},l._SquaredDifference=function(){return(l._SquaredDifference=l.asm.SquaredDifference).apply(null,arguments)},l._Step=function(){return(l._Step=l.asm.Step).apply(null,arguments)},l._StridedSlice=function(){return(l._StridedSlice=l.asm.StridedSlice).apply(null,arguments)},l._Sub=function(){return(l._Sub=l.asm.Sub).apply(null,arguments)},l._Sum=function(){return(l._Sum=l.asm.Sum).apply(null,arguments)},l._Tan=function(){return(l._Tan=l.asm.Tan).apply(null,arguments)},l._Tanh=function(){return(l._Tanh=l.asm.Tanh).apply(null,arguments)},l._TensorScatterUpdate=function(){return(l._TensorScatterUpdate=l.asm.TensorScatterUpdate).apply(null,arguments)},l._Tile=function(){return(l._Tile=l.asm.Tile).apply(null,arguments)},l._TopK=function(){return(l._TopK=l.asm.TopK).apply(null,arguments)},l._Transform=function(){return(l._Transform=l.asm.Transform).apply(null,arguments)},l._Transpose=function(){return(l._Transpose=l.asm.Transpose).apply(null,arguments)},l.__FusedMatMul=function(){return(l.__FusedMatMul=l.asm._FusedMatMul).apply(null,arguments)},l._malloc=function(){return(l._malloc=l.asm.malloc).apply(null,arguments)},l._free=function(){return(l._free=l.asm.free).apply(null,arguments)},l.__emscripten_tls_init=function(){return(l.__emscripten_tls_init=l.asm._emscripten_tls_init).apply(null,arguments)};var Rs=l._pthread_self=function(){return(Rs=l._pthread_self=l.asm.pthread_self).apply(null,arguments)};l.___errno_location=function(){return(l.___errno_location=l.asm.__errno_location).apply(null,arguments)};var ui=l.__emscripten_thread_init=function(){return(ui=l.__emscripten_thread_init=l.asm._emscripten_thread_init).apply(null,arguments)};l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm._emscripten_thread_crashed).apply(null,arguments)},l._emscripten_main_thread_process_queued_calls=function(){return(l._emscripten_main_thread_process_queued_calls=l.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},l._emscripten_main_browser_thread_id=function(){return(l._emscripten_main_browser_thread_id=l.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var li=l._emscripten_run_in_main_runtime_thread_js=function(){return(li=l._emscripten_run_in_main_runtime_thread_js=l.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};l._emscripten_dispatch_to_thread_=function(){return(l._emscripten_dispatch_to_thread_=l.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var hi=l.__emscripten_proxy_execute_task_queue=function(){return(hi=l.__emscripten_proxy_execute_task_queue=l.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},Vs=l.__emscripten_thread_free_data=function(){return(Vs=l.__emscripten_thread_free_data=l.asm._emscripten_thread_free_data).apply(null,arguments)},fi=l.__emscripten_thread_exit=function(){return(fi=l.__emscripten_thread_exit=l.asm._emscripten_thread_exit).apply(null,arguments)},zi=l._emscripten_stack_set_limits=function(){return(zi=l._emscripten_stack_set_limits=l.asm.emscripten_stack_set_limits).apply(null,arguments)},ci=l.stackSave=function(){return(ci=l.stackSave=l.asm.stackSave).apply(null,arguments)},V=l.stackRestore=function(){return(V=l.stackRestore=l.asm.stackRestore).apply(null,arguments)},j=l.stackAlloc=function(){return(j=l.stackAlloc=l.asm.stackAlloc).apply(null,arguments)};l.dynCall_iijjiiii=function(){return(l.dynCall_iijjiiii=l.asm.dynCall_iijjiiii).apply(null,arguments)},l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.dynCall_jiji).apply(null,arguments)},l.keepRuntimeAlive=Zt,l.wasmMemory=L,l.cwrap=ma,l.ExitStatus=Xe,l.PThread=zt;var Q;ae=function et(){Q||ht(),Q||(ae=et)};function ht(et){if(fe>0)return;if(m){a(l),At(),startWorker(l);return}if(Bt(),fe>0)return;function lt(){Q||(Q=!0,l.calledRun=!0,!X&&(At(),a(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),kt()))}l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),lt()},1)):lt()}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();ht();var gt;i&&(gt={uncaughtException:process.listeners("uncaughtException").filter(function(et){return!i.uncaughtException.indexOf(et)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(et){return!i.unhandledRejection.indexOf(et)>-1})});var Rt;if(typeof WasmBackendModule<"u")Rt=WasmBackendModule;else if(typeof S<"u")Rt=S;else throw new Error("Could not find wasm module in post.js");if(gt){var Ct=Rt._dispose;Rt._dispose=function(){Ct(),gt.uncaughtException.forEach(function(et){process.removeListener("uncaughtException",et)}),gt.unhandledRejection.forEach(function(et){process.removeListener("unhandledRejection",et)})}}return S.ready}})();c.exports=f})(f2);var c2=f2.exports;const d2=Mh(c2),tV=Nh({__proto__:null,default:d2},[c2]);var eV=`"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"
");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};`,p2={exports:{}};(function(c,e){var f=(()=>{var x=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(x=x||__filename),function(S){S=S||{};var C=typeof S<"u"?S:{},o,y;C.ready=new Promise(function(wt,Dt){o=wt,y=Dt});var t;typeof process<"u"&&process.listeners&&(t={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var s=Object.assign({},C),l=typeof window=="object",a=typeof importScripts=="function",r=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",i="";function n(wt){return C.locateFile?C.locateFile(wt,i):i+wt}var h,d,u;if(r){var p=vi,m=vi;a?i=m.dirname(i)+"/":i=__dirname+"/",h=(wt,Dt)=>(wt=vt(wt)?new URL(wt):m.normalize(wt),p.readFileSync(wt,Dt?void 0:"utf8")),u=wt=>{var Dt=h(wt,!0);return Dt.buffer||(Dt=new Uint8Array(Dt)),Dt},d=(wt,Dt,_t)=>{wt=vt(wt)?new URL(wt):m.normalize(wt),p.readFile(wt,function(zt,Re){zt?_t(zt):Dt(Re.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(wt){if(!(wt instanceof Zt))throw wt}),process.on("unhandledRejection",function(wt){throw wt}),C.inspect=function(){return"[Emscripten Module object]"}}else(l||a)&&(a?i=self.location.href:typeof document<"u"&&document.currentScript&&(i=document.currentScript.src),x&&(i=x),i.indexOf("blob:")!==0?i=i.substr(0,i.replace(/[?#].*/,"").lastIndexOf("/")+1):i="",h=wt=>{var Dt=new XMLHttpRequest;return Dt.open("GET",wt,!1),Dt.send(null),Dt.responseText},a&&(u=wt=>{var Dt=new XMLHttpRequest;return Dt.open("GET",wt,!1),Dt.responseType="arraybuffer",Dt.send(null),new Uint8Array(Dt.response)}),d=(wt,Dt,_t)=>{var zt=new XMLHttpRequest;zt.open("GET",wt,!0),zt.responseType="arraybuffer",zt.onload=()=>{if(zt.status==200||zt.status==0&&zt.response){Dt(zt.response);return}_t()},zt.onerror=_t,zt.send(null)});var v=C.print||console.log.bind(console),g=C.printErr||console.warn.bind(console);Object.assign(C,s),s=null,C.arguments&&C.arguments,C.thisProgram&&C.thisProgram,C.quit&&C.quit;var T;C.wasmBinary&&(T=C.wasmBinary),C.noExitRuntime,typeof WebAssembly!="object"&&rt("no native wasm support detected");var w,b=!1,E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function A(wt,Dt,_t){Dt>>>=0;for(var zt=Dt+_t,Re=Dt;wt[Re]&&!(Re>=zt);)++Re;if(Re-Dt>16&&wt.buffer&&E)return E.decode(wt.subarray(Dt,Re));for(var xe="";Dt<Re;){var ie=wt[Dt++];if(!(ie&128)){xe+=String.fromCharCode(ie);continue}var oe=wt[Dt++]&63;if((ie&224)==192){xe+=String.fromCharCode((ie&31)<<6|oe);continue}var He=wt[Dt++]&63;if((ie&240)==224?ie=(ie&15)<<12|oe<<6|He:ie=(ie&7)<<18|oe<<12|He<<6|wt[Dt++]&63,ie<65536)xe+=String.fromCharCode(ie);else{var Pe=ie-65536;xe+=String.fromCharCode(55296|Pe>>10,56320|Pe&1023)}}return xe}function R(wt,Dt){return wt>>>=0,wt?A(O,wt,Dt):""}function I(wt,Dt,_t,zt){if(_t>>>=0,!(zt>0))return 0;for(var Re=_t,xe=_t+zt-1,ie=0;ie<wt.length;++ie){var oe=wt.charCodeAt(ie);if(oe>=55296&&oe<=57343){var He=wt.charCodeAt(++ie);oe=65536+((oe&1023)<<10)|He&1023}if(oe<=127){if(_t>=xe)break;Dt[_t++>>>0]=oe}else if(oe<=2047){if(_t+1>=xe)break;Dt[_t++>>>0]=192|oe>>6,Dt[_t++>>>0]=128|oe&63}else if(oe<=65535){if(_t+2>=xe)break;Dt[_t++>>>0]=224|oe>>12,Dt[_t++>>>0]=128|oe>>6&63,Dt[_t++>>>0]=128|oe&63}else{if(_t+3>=xe)break;Dt[_t++>>>0]=240|oe>>18,Dt[_t++>>>0]=128|oe>>12&63,Dt[_t++>>>0]=128|oe>>6&63,Dt[_t++>>>0]=128|oe&63}}return Dt[_t>>>0]=0,_t-Re}function P(wt,Dt,_t){return I(wt,O,Dt,_t)}var N,F,O,D;function L(wt){N=wt,C.HEAP8=F=new Int8Array(wt),C.HEAP16=new Int16Array(wt),C.HEAP32=new Int32Array(wt),C.HEAPU8=O=new Uint8Array(wt),C.HEAPU16=new Uint16Array(wt),C.HEAPU32=D=new Uint32Array(wt),C.HEAPF32=new Float32Array(wt),C.HEAPF64=new Float64Array(wt)}C.INITIAL_MEMORY;var z=[],X=[],H=[];function J(){if(C.preRun)for(typeof C.preRun=="function"&&(C.preRun=[C.preRun]);C.preRun.length;)M(C.preRun.shift());Bt(z)}function G(){Bt(X)}function k(){if(C.postRun)for(typeof C.postRun=="function"&&(C.postRun=[C.postRun]);C.postRun.length;)U(C.postRun.shift());Bt(H)}function M(wt){z.unshift(wt)}function B(wt){X.unshift(wt)}function U(wt){H.unshift(wt)}var W=0,K=null;function q(wt){W++,C.monitorRunDependencies&&C.monitorRunDependencies(W)}function _(wt){if(W--,C.monitorRunDependencies&&C.monitorRunDependencies(W),W==0&&K){var Dt=K;K=null,Dt()}}function rt(wt){C.onAbort&&C.onAbort(wt),wt="Aborted("+wt+")",g(wt),b=!0,wt+=". Build with -sASSERTIONS for more info.";var Dt=new WebAssembly.RuntimeError(wt);throw y(Dt),Dt}var ft="data:application/octet-stream;base64,";function mt(wt){return wt.startsWith(ft)}function vt(wt){return wt.startsWith("file://")}var yt;yt="tfjs-backend-wasm.wasm",mt(yt)||(yt=n(yt));function xt(wt){try{if(wt==yt&&T)return new Uint8Array(T);if(u)return u(wt);throw"both async and sync fetching of the wasm failed"}catch(Dt){rt(Dt)}}function It(){if(!T&&(l||a)){if(typeof fetch=="function"&&!vt(yt))return fetch(yt,{credentials:"same-origin"}).then(function(wt){if(!wt.ok)throw"failed to load wasm binary file at '"+yt+"'";return wt.arrayBuffer()}).catch(function(){return xt(yt)});if(d)return new Promise(function(wt,Dt){d(yt,function(_t){wt(new Uint8Array(_t))},Dt)})}return Promise.resolve().then(function(){return xt(yt)})}function $t(){var wt={env:Le,wasi_snapshot_preview1:Le};function Dt(ie,oe){var He=ie.exports;C.asm=He,w=C.asm.memory,L(w.buffer),C.asm.__indirect_function_table,B(C.asm.__wasm_call_ctors),_()}q();function _t(ie){Dt(ie.instance)}function zt(ie){return It().then(function(oe){return WebAssembly.instantiate(oe,wt)}).then(function(oe){return oe}).then(ie,function(oe){g("failed to asynchronously prepare wasm: "+oe),rt(oe)})}function Re(){return!T&&typeof WebAssembly.instantiateStreaming=="function"&&!mt(yt)&&!vt(yt)&&!r&&typeof fetch=="function"?fetch(yt,{credentials:"same-origin"}).then(function(ie){var oe=WebAssembly.instantiateStreaming(ie,wt);return oe.then(_t,function(He){return g("wasm streaming compile failed: "+He),g("falling back to ArrayBuffer instantiation"),zt(_t)})}):zt(_t)}if(C.instantiateWasm)try{var xe=C.instantiateWasm(wt,Dt);return xe}catch(ie){g("Module.instantiateWasm callback failed with error: "+ie),y(ie)}return Re().catch(y),{}}function Zt(wt){this.name="ExitStatus",this.message="Program terminated with exit("+wt+")",this.status=wt}function Bt(wt){for(;wt.length>0;)wt.shift()(C)}function At(){rt("")}function kt(){return 4294901760}function Ut(){return kt()}function ee(wt,Dt,_t){O.copyWithin(wt>>>0,Dt>>>0,Dt+_t>>>0)}function te(wt){try{return w.grow(wt-N.byteLength+65535>>>16),L(w.buffer),1}catch{}}function fe(wt){var Dt=O.length;wt=wt>>>0;var _t=kt();if(wt>_t)return!1;let zt=(He,Pe)=>He+(Pe-He%Pe)%Pe;for(var Re=1;Re<=4;Re*=2){var xe=Dt*(1+.2/Re);xe=Math.min(xe,wt+100663296);var ie=Math.min(_t,zt(Math.max(wt,xe),65536)),oe=te(ie);if(oe)return!0}return!1}function ae(wt){return 52}function le(wt,Dt,_t,zt,Re){return 70}var re=[null,[],[]];function we(wt,Dt){var _t=re[wt];Dt===0||Dt===10?((wt===1?v:g)(A(_t,0)),_t.length=0):_t.push(Dt)}function Se(wt,Dt,_t,zt){for(var Re=0,xe=0;xe<_t;xe++){var ie=D[Dt>>>2],oe=D[Dt+4>>>2];Dt+=8;for(var He=0;He<oe;He++)we(wt,O[ie+He>>>0]);Re+=oe}return D[zt>>>2]=Re,0}function Me(wt){var Dt=C["_"+wt];return Dt}function ce(wt,Dt){F.set(wt,Dt>>>0)}function se(wt,Dt,_t,zt,Re){var xe={string:Ge=>{var qn=0;if(Ge!=null&&Ge!==0){var Bs=(Ge.length<<2)+1;qn=Xe(Bs),P(Ge,qn,Bs)}return qn},array:Ge=>{var qn=Xe(Ge.length);return ce(Ge,qn),qn}};function ie(Ge){return Dt==="string"?R(Ge):Dt==="boolean"?!!Ge:Ge}var oe=Me(wt),He=[],Pe=0;if(zt)for(var sn=0;sn<zt.length;sn++){var Ds=xe[_t[sn]];Ds?(Pe===0&&(Pe=nn()),He[sn]=Ds(zt[sn])):He[sn]=zt[sn]}var Jn=oe.apply(null,He);function Ls(Ge){return Pe!==0&&ge(Pe),ie(Ge)}return Jn=Ls(Jn),Jn}function Ae(wt,Dt,_t,zt){_t=_t||[];var Re=_t.every(ie=>ie==="number"||ie==="boolean"),xe=Dt!=="string";return xe&&Re&&!zt?Me(wt):function(){return se(wt,Dt,_t,arguments)}}var Le={abort:At,emscripten_get_heap_max:Ut,emscripten_memcpy_big:ee,emscripten_resize_heap:fe,fd_close:ae,fd_seek:le,fd_write:Se};$t(),C.___wasm_call_ctors=function(){return(C.___wasm_call_ctors=C.asm.__wasm_call_ctors).apply(null,arguments)},C._init=function(){return(C._init=C.asm.init).apply(null,arguments)},C._init_with_threads_count=function(){return(C._init_with_threads_count=C.asm.init_with_threads_count).apply(null,arguments)},C._get_threads_count=function(){return(C._get_threads_count=C.asm.get_threads_count).apply(null,arguments)},C._register_tensor=function(){return(C._register_tensor=C.asm.register_tensor).apply(null,arguments)},C._dispose_data=function(){return(C._dispose_data=C.asm.dispose_data).apply(null,arguments)},C._dispose=function(){return(C._dispose=C.asm.dispose).apply(null,arguments)},C._Abs=function(){return(C._Abs=C.asm.Abs).apply(null,arguments)},C._Acos=function(){return(C._Acos=C.asm.Acos).apply(null,arguments)},C._Acosh=function(){return(C._Acosh=C.asm.Acosh).apply(null,arguments)},C._Add=function(){return(C._Add=C.asm.Add).apply(null,arguments)},C._AddN=function(){return(C._AddN=C.asm.AddN).apply(null,arguments)},C._All=function(){return(C._All=C.asm.All).apply(null,arguments)},C._Any=function(){return(C._Any=C.asm.Any).apply(null,arguments)},C._ArgMax=function(){return(C._ArgMax=C.asm.ArgMax).apply(null,arguments)},C._ArgMin=function(){return(C._ArgMin=C.asm.ArgMin).apply(null,arguments)},C._Asin=function(){return(C._Asin=C.asm.Asin).apply(null,arguments)},C._Asinh=function(){return(C._Asinh=C.asm.Asinh).apply(null,arguments)},C._Atan=function(){return(C._Atan=C.asm.Atan).apply(null,arguments)},C._Atan2=function(){return(C._Atan2=C.asm.Atan2).apply(null,arguments)},C._Atanh=function(){return(C._Atanh=C.asm.Atanh).apply(null,arguments)},C._AvgPool=function(){return(C._AvgPool=C.asm.AvgPool).apply(null,arguments)},C._AvgPool3D=function(){return(C._AvgPool3D=C.asm.AvgPool3D).apply(null,arguments)},C._AvgPool3DGrad=function(){return(C._AvgPool3DGrad=C.asm.AvgPool3DGrad).apply(null,arguments)},C._AvgPoolGrad=function(){return(C._AvgPoolGrad=C.asm.AvgPoolGrad).apply(null,arguments)},C._BatchMatMul=function(){return(C._BatchMatMul=C.asm.BatchMatMul).apply(null,arguments)},C._Bincount=function(){return(C._Bincount=C.asm.Bincount).apply(null,arguments)},C._BitwiseAnd=function(){return(C._BitwiseAnd=C.asm.BitwiseAnd).apply(null,arguments)},C._Ceil=function(){return(C._Ceil=C.asm.Ceil).apply(null,arguments)},C._ClipByValue=function(){return(C._ClipByValue=C.asm.ClipByValue).apply(null,arguments)},C._Conv2D=function(){return(C._Conv2D=C.asm.Conv2D).apply(null,arguments)},C._Conv2DBackpropInput=function(){return(C._Conv2DBackpropInput=C.asm.Conv2DBackpropInput).apply(null,arguments)},C._Conv3D=function(){return(C._Conv3D=C.asm.Conv3D).apply(null,arguments)},C._Conv3DBackpropFilterV2=function(){return(C._Conv3DBackpropFilterV2=C.asm.Conv3DBackpropFilterV2).apply(null,arguments)},C._Conv3DBackpropInputV2=function(){return(C._Conv3DBackpropInputV2=C.asm.Conv3DBackpropInputV2).apply(null,arguments)},C._Cos=function(){return(C._Cos=C.asm.Cos).apply(null,arguments)},C._Cosh=function(){return(C._Cosh=C.asm.Cosh).apply(null,arguments)},C._CropAndResize=function(){return(C._CropAndResize=C.asm.CropAndResize).apply(null,arguments)},C._Cumprod=function(){return(C._Cumprod=C.asm.Cumprod).apply(null,arguments)},C._Cumsum=function(){return(C._Cumsum=C.asm.Cumsum).apply(null,arguments)},C._DenseBincount=function(){return(C._DenseBincount=C.asm.DenseBincount).apply(null,arguments)},C._DepthToSpace=function(){return(C._DepthToSpace=C.asm.DepthToSpace).apply(null,arguments)},C._DepthwiseConv2dNative=function(){return(C._DepthwiseConv2dNative=C.asm.DepthwiseConv2dNative).apply(null,arguments)},C._Diag=function(){return(C._Diag=C.asm.Diag).apply(null,arguments)},C._Dilation2D=function(){return(C._Dilation2D=C.asm.Dilation2D).apply(null,arguments)},C._Dilation2DBackpropFilter=function(){return(C._Dilation2DBackpropFilter=C.asm.Dilation2DBackpropFilter).apply(null,arguments)},C._Dilation2DBackpropInput=function(){return(C._Dilation2DBackpropInput=C.asm.Dilation2DBackpropInput).apply(null,arguments)},C._Elu=function(){return(C._Elu=C.asm.Elu).apply(null,arguments)},C._EluGrad=function(){return(C._EluGrad=C.asm.EluGrad).apply(null,arguments)},C._Equal=function(){return(C._Equal=C.asm.Equal).apply(null,arguments)},C._Erf=function(){return(C._Erf=C.asm.Erf).apply(null,arguments)},C._Exp=function(){return(C._Exp=C.asm.Exp).apply(null,arguments)},C._Expm1=function(){return(C._Expm1=C.asm.Expm1).apply(null,arguments)},C._FlipLeftRight=function(){return(C._FlipLeftRight=C.asm.FlipLeftRight).apply(null,arguments)},C._Floor=function(){return(C._Floor=C.asm.Floor).apply(null,arguments)},C._FloorDiv=function(){return(C._FloorDiv=C.asm.FloorDiv).apply(null,arguments)},C._FusedBatchNorm=function(){return(C._FusedBatchNorm=C.asm.FusedBatchNorm).apply(null,arguments)},C._FusedConv2D=function(){return(C._FusedConv2D=C.asm.FusedConv2D).apply(null,arguments)},C._FusedDepthwiseConv2D=function(){return(C._FusedDepthwiseConv2D=C.asm.FusedDepthwiseConv2D).apply(null,arguments)},C._Gather=function(){return(C._Gather=C.asm.Gather).apply(null,arguments)},C._GatherNd=function(){return(C._GatherNd=C.asm.GatherNd).apply(null,arguments)},C._Greater=function(){return(C._Greater=C.asm.Greater).apply(null,arguments)},C._GreaterEqual=function(){return(C._GreaterEqual=C.asm.GreaterEqual).apply(null,arguments)},C._IsFinite=function(){return(C._IsFinite=C.asm.IsFinite).apply(null,arguments)},C._IsInf=function(){return(C._IsInf=C.asm.IsInf).apply(null,arguments)},C._IsNan=function(){return(C._IsNan=C.asm.IsNan).apply(null,arguments)},C._LRN=function(){return(C._LRN=C.asm.LRN).apply(null,arguments)},C._LRNGrad=function(){return(C._LRNGrad=C.asm.LRNGrad).apply(null,arguments)},C._LeakyRelu=function(){return(C._LeakyRelu=C.asm.LeakyRelu).apply(null,arguments)},C._Less=function(){return(C._Less=C.asm.Less).apply(null,arguments)},C._LessEqual=function(){return(C._LessEqual=C.asm.LessEqual).apply(null,arguments)},C._LinSpace=function(){return(C._LinSpace=C.asm.LinSpace).apply(null,arguments)},C._Log=function(){return(C._Log=C.asm.Log).apply(null,arguments)},C._Log1p=function(){return(C._Log1p=C.asm.Log1p).apply(null,arguments)},C._LogicalAnd=function(){return(C._LogicalAnd=C.asm.LogicalAnd).apply(null,arguments)},C._LogicalNot=function(){return(C._LogicalNot=C.asm.LogicalNot).apply(null,arguments)},C._LogicalOr=function(){return(C._LogicalOr=C.asm.LogicalOr).apply(null,arguments)},C._LogicalXor=function(){return(C._LogicalXor=C.asm.LogicalXor).apply(null,arguments)},C._Max=function(){return(C._Max=C.asm.Max).apply(null,arguments)},C._MaxPool=function(){return(C._MaxPool=C.asm.MaxPool).apply(null,arguments)},C._MaxPool3D=function(){return(C._MaxPool3D=C.asm.MaxPool3D).apply(null,arguments)},C._MaxPool3DGrad=function(){return(C._MaxPool3DGrad=C.asm.MaxPool3DGrad).apply(null,arguments)},C._MaxPoolGrad=function(){return(C._MaxPoolGrad=C.asm.MaxPoolGrad).apply(null,arguments)},C._MaxPoolWithArgmax=function(){return(C._MaxPoolWithArgmax=C.asm.MaxPoolWithArgmax).apply(null,arguments)},C._Maximum=function(){return(C._Maximum=C.asm.Maximum).apply(null,arguments)},C._Mean=function(){return(C._Mean=C.asm.Mean).apply(null,arguments)},C._Min=function(){return(C._Min=C.asm.Min).apply(null,arguments)},C._Minimum=function(){return(C._Minimum=C.asm.Minimum).apply(null,arguments)},C._MirrorPad=function(){return(C._MirrorPad=C.asm.MirrorPad).apply(null,arguments)},C._Mod=function(){return(C._Mod=C.asm.Mod).apply(null,arguments)},C._Multinomial=function(){return(C._Multinomial=C.asm.Multinomial).apply(null,arguments)},C._Multiply=function(){return(C._Multiply=C.asm.Multiply).apply(null,arguments)},C._Neg=function(){return(C._Neg=C.asm.Neg).apply(null,arguments)},C._NonMaxSuppressionV3=function(){return(C._NonMaxSuppressionV3=C.asm.NonMaxSuppressionV3).apply(null,arguments)},C._NonMaxSuppressionV4=function(){return(C._NonMaxSuppressionV4=C.asm.NonMaxSuppressionV4).apply(null,arguments)},C._NonMaxSuppressionV5=function(){return(C._NonMaxSuppressionV5=C.asm.NonMaxSuppressionV5).apply(null,arguments)},C._NotEqual=function(){return(C._NotEqual=C.asm.NotEqual).apply(null,arguments)},C._OneHot=function(){return(C._OneHot=C.asm.OneHot).apply(null,arguments)},C._PadV2=function(){return(C._PadV2=C.asm.PadV2).apply(null,arguments)},C._Pow=function(){return(C._Pow=C.asm.Pow).apply(null,arguments)},C._Prelu=function(){return(C._Prelu=C.asm.Prelu).apply(null,arguments)},C._Prod=function(){return(C._Prod=C.asm.Prod).apply(null,arguments)},C._RealDiv=function(){return(C._RealDiv=C.asm.RealDiv).apply(null,arguments)},C._Reciprocal=function(){return(C._Reciprocal=C.asm.Reciprocal).apply(null,arguments)},C._Relu=function(){return(C._Relu=C.asm.Relu).apply(null,arguments)},C._Relu6=function(){return(C._Relu6=C.asm.Relu6).apply(null,arguments)},C._ResizeBilinear=function(){return(C._ResizeBilinear=C.asm.ResizeBilinear).apply(null,arguments)},C._ResizeBilinearGrad=function(){return(C._ResizeBilinearGrad=C.asm.ResizeBilinearGrad).apply(null,arguments)},C._ResizeNearestNeighbor=function(){return(C._ResizeNearestNeighbor=C.asm.ResizeNearestNeighbor).apply(null,arguments)},C._ResizeNearestNeighborGrad=function(){return(C._ResizeNearestNeighborGrad=C.asm.ResizeNearestNeighborGrad).apply(null,arguments)},C._Reverse=function(){return(C._Reverse=C.asm.Reverse).apply(null,arguments)},C._RotateWithOffset=function(){return(C._RotateWithOffset=C.asm.RotateWithOffset).apply(null,arguments)},C._Round=function(){return(C._Round=C.asm.Round).apply(null,arguments)},C._Rsqrt=function(){return(C._Rsqrt=C.asm.Rsqrt).apply(null,arguments)},C._ScatterNd=function(){return(C._ScatterNd=C.asm.ScatterNd).apply(null,arguments)},C._SearchSorted=function(){return(C._SearchSorted=C.asm.SearchSorted).apply(null,arguments)},C._SelectV2=function(){return(C._SelectV2=C.asm.SelectV2).apply(null,arguments)},C._Selu=function(){return(C._Selu=C.asm.Selu).apply(null,arguments)},C._Sigmoid=function(){return(C._Sigmoid=C.asm.Sigmoid).apply(null,arguments)},C._Sign=function(){return(C._Sign=C.asm.Sign).apply(null,arguments)},C._Sin=function(){return(C._Sin=C.asm.Sin).apply(null,arguments)},C._Sinh=function(){return(C._Sinh=C.asm.Sinh).apply(null,arguments)},C._Softmax=function(){return(C._Softmax=C.asm.Softmax).apply(null,arguments)},C._Softplus=function(){return(C._Softplus=C.asm.Softplus).apply(null,arguments)},C._SparseFillEmptyRows=function(){return(C._SparseFillEmptyRows=C.asm.SparseFillEmptyRows).apply(null,arguments)},C._SparseReshape=function(){return(C._SparseReshape=C.asm.SparseReshape).apply(null,arguments)},C._SparseSegmentReduction=function(){return(C._SparseSegmentReduction=C.asm.SparseSegmentReduction).apply(null,arguments)},C._SparseToDense=function(){return(C._SparseToDense=C.asm.SparseToDense).apply(null,arguments)},C._Sqrt=function(){return(C._Sqrt=C.asm.Sqrt).apply(null,arguments)},C._Square=function(){return(C._Square=C.asm.Square).apply(null,arguments)},C._SquaredDifference=function(){return(C._SquaredDifference=C.asm.SquaredDifference).apply(null,arguments)},C._Step=function(){return(C._Step=C.asm.Step).apply(null,arguments)},C._StridedSlice=function(){return(C._StridedSlice=C.asm.StridedSlice).apply(null,arguments)},C._Sub=function(){return(C._Sub=C.asm.Sub).apply(null,arguments)},C._Sum=function(){return(C._Sum=C.asm.Sum).apply(null,arguments)},C._Tan=function(){return(C._Tan=C.asm.Tan).apply(null,arguments)},C._Tanh=function(){return(C._Tanh=C.asm.Tanh).apply(null,arguments)},C._TensorScatterUpdate=function(){return(C._TensorScatterUpdate=C.asm.TensorScatterUpdate).apply(null,arguments)},C._Tile=function(){return(C._Tile=C.asm.Tile).apply(null,arguments)},C._TopK=function(){return(C._TopK=C.asm.TopK).apply(null,arguments)},C._Transform=function(){return(C._Transform=C.asm.Transform).apply(null,arguments)},C._Transpose=function(){return(C._Transpose=C.asm.Transpose).apply(null,arguments)},C.__FusedMatMul=function(){return(C.__FusedMatMul=C.asm._FusedMatMul).apply(null,arguments)},C._malloc=function(){return(C._malloc=C.asm.malloc).apply(null,arguments)},C._free=function(){return(C._free=C.asm.free).apply(null,arguments)},C.___errno_location=function(){return(C.___errno_location=C.asm.__errno_location).apply(null,arguments)};var nn=C.stackSave=function(){return(nn=C.stackSave=C.asm.stackSave).apply(null,arguments)},ge=C.stackRestore=function(){return(ge=C.stackRestore=C.asm.stackRestore).apply(null,arguments)},Xe=C.stackAlloc=function(){return(Xe=C.stackAlloc=C.asm.stackAlloc).apply(null,arguments)};C.dynCall_iijjiiii=function(){return(C.dynCall_iijjiiii=C.asm.dynCall_iijjiiii).apply(null,arguments)},C.dynCall_jiji=function(){return(C.dynCall_jiji=C.asm.dynCall_jiji).apply(null,arguments)},C.cwrap=Ae;var Qn;K=function wt(){Qn||Rn(),Qn||(K=wt)};function Rn(wt){if(W>0||(J(),W>0))return;function Dt(){Qn||(Qn=!0,C.calledRun=!0,!b&&(G(),o(C),C.onRuntimeInitialized&&C.onRuntimeInitialized(),k()))}C.setStatus?(C.setStatus("Running..."),setTimeout(function(){setTimeout(function(){C.setStatus("")},1),Dt()},1)):Dt()}if(C.preInit)for(typeof C.preInit=="function"&&(C.preInit=[C.preInit]);C.preInit.length>0;)C.preInit.pop()();Rn();var tn;t&&(tn={uncaughtException:process.listeners("uncaughtException").filter(function(wt){return!t.uncaughtException.indexOf(wt)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(wt){return!t.unhandledRejection.indexOf(wt)>-1})});var ue;if(typeof S<"u")ue=S;else if(typeof WasmBackendModuleThreadedSimd<"u")ue=WasmBackendModuleThreadedSimd;else throw new Error("Could not find wasm module in post.js");if(tn){var Os=ue._dispose;ue._dispose=function(){Os(),tn.uncaughtException.forEach(function(wt){process.removeListener("uncaughtException",wt)}),tn.unhandledRejection.forEach(function(wt){process.removeListener("unhandledRejection",wt)})}}return S.ready}})();c.exports=f})(p2);var m2=p2.exports;const v2=Mh(m2),nV=Nh({__proto__:null,default:v2},[m2]);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rp=d2||tV,sV=v2||nV;class iV extends Oh{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(fV),this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new tm(this,zs())}write(e,f,x){const S={id:this.dataIdNextNumber++};return this.move(S,e,f,x,1),S}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){const f=Hn();return e(),{kernelMs:Hn()-f}}move(e,f,x,S,C){const o=this.dataIdNextNumber++;if(S==="string"){const l=f;this.dataIdMap.set(e,{id:o,stringBytes:l,shape:x,dtype:S,memoryOffset:null,refCount:C});return}const y=bt(x),t=y*Yr(S),s=this.wasm._malloc(t)>>>0;this.dataIdMap.set(e,{id:o,memoryOffset:s,shape:x,dtype:S,refCount:C}),this.wasm.tfjs.registerTensor(o,y,s),f!=null&&this.wasm.HEAPU8.set(new Uint8Array(f.buffer,f.byteOffset,t),s)}async read(e){return this.readSync(e)}readSync(e,f,x){const{memoryOffset:S,dtype:C,shape:o,stringBytes:y}=this.dataIdMap.get(e);if(C==="string")return(f==null||f===0)&&(x==null||x>=y.length)?y:y.slice(f,x);f=f||0,x=x||bt(o);const t=Yr(C),s=this.wasm.HEAPU8.slice(S+f*t,S+x*t);return oV(s.buffer,C)}disposeData(e,f=!1){if(this.dataIdMap.has(e)){const x=this.dataIdMap.get(e);if(x.refCount--,!f&&x.refCount>0)return!1;this.wasm._free(x.memoryOffset),this.wasm.tfjs.disposeData(x.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){const f=this.dataIdMap.get(e);f!=null&&f.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,f,x,S){let C;if(x==null)C=this.write(S??null,e,f);else{const o=this.dataIdNextNumber++;C={id:o},this.dataIdMap.set(C,{id:o,memoryOffset:x,shape:e,dtype:f,refCount:1});const y=bt(e);this.wasm.tfjs.registerTensor(o,y,x)}return{dataId:C,shape:e,dtype:f}}typedArrayFromHeap({shape:e,dtype:f,dataId:x}){const S=this.wasm.HEAPU8.buffer,{memoryOffset:C}=this.dataIdMap.get(x),o=bt(e);switch(f){case"float32":return new Float32Array(S,C,o);case"int32":return new Int32Array(S,C,o);case"bool":return new Uint8Array(S,C,o);default:throw new Error(`Unknown dtype ${f}`)}}}function rV(c){return(e,f)=>(px(c,{credentials:"same-origin"}).then(x=>{x.ok||e.env.a(`failed to load wasm binary file at '${c}'`),x.arrayBuffer().then(S=>{WebAssembly.instantiate(S,e).then(C=>{f(C.instance,C.module)})})}),{})}function Ip(c,e,f){let x="tfjs-backend-wasm.wasm";return c&&e?x="tfjs-backend-wasm-threaded-simd.wasm":c&&(x="tfjs-backend-wasm-simd.wasm"),Ra!=null&&Ra[x]!=null?Ra[x]:f+x}async function aV(){const[c,e]=await Promise.all([St().getAsync("WASM_HAS_SIMD_SUPPORT"),St().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((f,x)=>{const S={};S.locateFile=(y,t)=>{if(y.endsWith(".worker.js")){const s=eV.replace(/\n/g,"\\n"),l=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(l)}return y.endsWith(".wasm")?Ip(c,e,wa??t):t+y},g2&&(S.instantiateWasm=rV(Ip(c,e,wa??"")));let C=!1;S.onAbort=()=>{if(C||Eo)return;Eo=!0,x({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})};let o;e&&c&&lV==null?(S.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+Rp.toString()],{type:"text/javascript"}),o=Rp(S)):o=sV(S),o.then(y=>{C=!0,Eo=!1;const t=null;y.tfjs={init:y.cwrap("init",null,[]),initWithThreadsCount:y.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:y.cwrap("get_threads_count","number",[]),registerTensor:y.cwrap("register_tensor",null,["number","number","number"]),disposeData:y.cwrap("dispose_data",t,["number"]),dispose:y.cwrap("dispose",t,[])},f({wasm:y})}).catch(x)})}function oV(c,e){switch(e){case"float32":return new Float32Array(c);case"int32":return new Int32Array(c);case"bool":return new Uint8Array(c);default:throw new Error(`Unknown dtype ${e}`)}}const uV=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let lV=null,wa=null,Ra={},Eo=!1,g2=!1;function hV(c,e=!1){if(Eo)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if(typeof c=="string")wa=c;else{Ra=c;const f=uV.filter(x=>Ra[x]==null);if(f.length>0)throw new Error(`There were no entries found for the following binaries: ${f.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}g2=e}let fV=-1;/** @license See the LICENSE file. */const cV="4.14.0";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dV=2;uv("wasm",async()=>{const{wasm:c}=await aV();return new iV(c)},dV);const Pp={"640 X 480":{width:640,height:480},"640 X 360":{width:640,height:360},"360 X 270":{width:360,height:270}};function pV(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}function mV(){return/Android/i.test(navigator.userAgent)}function Fp(){return mV()||pV()}const Gr=class Gr{constructor(){Gt(this,"video");this.video=document.getElementById("video")}static async setup(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw Error("No Camrea Available");const e=await navigator.mediaDevices.getUserMedia(Gr.videoConfig);this.defaultCamera=new Gr,this.defaultCamera.video.srcObject=e,await new Promise(S=>{this.defaultCamera.video.onloadedmetadata=()=>{S(this.defaultCamera.video)}}),this.defaultCamera.video.play();const f=this.defaultCamera.video.videoWidth,x=this.defaultCamera.video.videoHeight;return this.defaultCamera.video.width=f,this.defaultCamera.video.height=x,!0}};Gt(Gr,"defaultCamera"),Gt(Gr,"videoConfig",{audio:!1,video:{facingMode:"user",width:Fp()?Pp["360 X 270"].width:640,height:Fp()?Pp["360 X 270"].height:480,frameRate:{ideal:60}}});let ms=Gr;/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vV=St();vV.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,c=>{c&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ns;(function(c){c[c.DT_INVALID=0]="DT_INVALID",c[c.DT_FLOAT=1]="DT_FLOAT",c[c.DT_DOUBLE=2]="DT_DOUBLE",c[c.DT_INT32=3]="DT_INT32",c[c.DT_UINT8=4]="DT_UINT8",c[c.DT_INT16=5]="DT_INT16",c[c.DT_INT8=6]="DT_INT8",c[c.DT_STRING=7]="DT_STRING",c[c.DT_COMPLEX64=8]="DT_COMPLEX64",c[c.DT_INT64=9]="DT_INT64",c[c.DT_BOOL=10]="DT_BOOL",c[c.DT_QINT8=11]="DT_QINT8",c[c.DT_QUINT8=12]="DT_QUINT8",c[c.DT_QINT32=13]="DT_QINT32",c[c.DT_BFLOAT16=14]="DT_BFLOAT16",c[c.DT_QINT16=15]="DT_QINT16",c[c.DT_QUINT16=16]="DT_QUINT16",c[c.DT_UINT16=17]="DT_UINT16",c[c.DT_COMPLEX128=18]="DT_COMPLEX128",c[c.DT_HALF=19]="DT_HALF",c[c.DT_RESOURCE=20]="DT_RESOURCE",c[c.DT_VARIANT=21]="DT_VARIANT",c[c.DT_UINT32=22]="DT_UINT32",c[c.DT_UINT64=23]="DT_UINT64",c[c.DT_FLOAT_REF=101]="DT_FLOAT_REF",c[c.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",c[c.DT_INT32_REF=103]="DT_INT32_REF",c[c.DT_UINT8_REF=104]="DT_UINT8_REF",c[c.DT_INT16_REF=105]="DT_INT16_REF",c[c.DT_INT8_REF=106]="DT_INT8_REF",c[c.DT_STRING_REF=107]="DT_STRING_REF",c[c.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",c[c.DT_INT64_REF=109]="DT_INT64_REF",c[c.DT_BOOL_REF=110]="DT_BOOL_REF",c[c.DT_QINT8_REF=111]="DT_QINT8_REF",c[c.DT_QUINT8_REF=112]="DT_QUINT8_REF",c[c.DT_QINT32_REF=113]="DT_QINT32_REF",c[c.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",c[c.DT_QINT16_REF=115]="DT_QINT16_REF",c[c.DT_QUINT16_REF=116]="DT_QUINT16_REF",c[c.DT_UINT16_REF=117]="DT_UINT16_REF",c[c.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",c[c.DT_HALF_REF=119]="DT_HALF_REF",c[c.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",c[c.DT_VARIANT_REF=121]="DT_VARIANT_REF",c[c.DT_UINT32_REF=122]="DT_UINT32_REF",c[c.DT_UINT64_REF=123]="DT_UINT64_REF"})(ns||(ns={}));var Np;(function(c){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(c.CheckpointFormatVersion||(c.CheckpointFormatVersion={}))})(Np||(Np={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gV={};function x2(c){return gV[c]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y(c,e,f,x,S){const C=e.inputParams[c];if(C&&C.inputIndexStart!==void 0){const y=C.inputIndexStart,t=C.inputIndexEnd===0?void 0:C.inputIndexEnd===void 0?y+1:C.inputIndexEnd,s=y<0?e.inputNames.length+y:y;if(C.type==="tensor")return fn(e.inputNames[s],f,x,S);if(C.type==="tensors"){const r=e.inputs.slice(y,t);return e.inputNames.slice(y,t).filter((n,h)=>{var d;return((d=r[h])===null||d===void 0?void 0:d.op)!=="NoOp"}).map(n=>fn(n,f,x,S))}const l=fn(e.inputNames[s],f,x,S),a=l.dataSync();return C.type==="number"?a[0]:Wl(l.shape,a)}const o=e.attrParams[c];return o&&o.value}function fn(c,e,f,x){const[S,C]=Un(c,f);if(x!=null){const y=x.getHashTableHandleByName(S);if(y!=null)return y}const o=f.currentContextIds.find(y=>!!e[Wo(S,y)]);return o!==void 0?e[Wo(S,o)][C]:void 0}function Mp(c,e,f){return e[Wo(c,f.currentContextId)]}function ks(c,e){const[f,x,S]=Un(c,e);return[Wo(f,e&&e.currentContextId),x,S]}function Wo(c,e){return e?`${c}-${e}`:c}function Un(c,e){if(c==="")return["",0,void 0];const f=e!=null&&e.parseNodeNameCache!=null;if(f){const C=e.parseNodeNameCache.get(c);if(C!=null)return C}const x=c.split(":");let S;if(x.length===1)S=[c,0,void 0];else{const C=x[0],o=x.length===3?x[1]:void 0,y=Number(x[x.length-1]);S=[C,y,o]}return f&&e.parseNodeNameCache.set(c,S),S}function wo(c,e,f){let x=Y("pad",c,e,f);if(x==="explicit"){x=Y("explicitPaddings",c,e,f);const S=[[0,0],[0,0],[0,0],[0,0]];for(let C=0;C<4;C++)S[C][0]=x[C*2],S[C][1]=x[C*2+1];return S}return x}function Ws(c){return c.kept?c:Ti(c)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xV=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],yV=Object.freeze(Object.defineProperty({__proto__:null,json:xV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TV=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],SV=Object.freeze(Object.defineProperty({__proto__:null,json:TV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CV=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],EV=Object.freeze(Object.defineProperty({__proto__:null,json:CV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wV=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],bV=Object.freeze(Object.defineProperty({__proto__:null,json:wV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AV=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],RV=Object.freeze(Object.defineProperty({__proto__:null,json:AV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IV=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],PV=Object.freeze(Object.defineProperty({__proto__:null,json:IV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FV=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],NV=Object.freeze(Object.defineProperty({__proto__:null,json:FV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MV=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],OV=Object.freeze(Object.defineProperty({__proto__:null,json:MV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DV=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],LV=Object.freeze(Object.defineProperty({__proto__:null,json:DV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BV=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],$V=Object.freeze(Object.defineProperty({__proto__:null,json:BV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GV=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],UV=Object.freeze(Object.defineProperty({__proto__:null,json:GV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VV=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],zV=Object.freeze(Object.defineProperty({__proto__:null,json:VV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kV=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],WV=Object.freeze(Object.defineProperty({__proto__:null,json:kV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XV=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],HV=Object.freeze(Object.defineProperty({__proto__:null,json:XV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YV=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],KV=Object.freeze(Object.defineProperty({__proto__:null,json:YV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jV=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ZV=Object.freeze(Object.defineProperty({__proto__:null,json:jV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QV=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],JV=Object.freeze(Object.defineProperty({__proto__:null,json:QV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qV=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],_V=Object.freeze(Object.defineProperty({__proto__:null,json:qV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tz=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],ez=Object.freeze(Object.defineProperty({__proto__:null,json:tz},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Op{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[yV,SV,EV,bV,RV,PV,NV,OV,LV,$V,UV,zV,WV,HV,KV,ZV,JV,_V,ez],f=[].concat(...e.map(x=>x.json));this.opMappers=f.reduce((x,S)=>(x[S.tfOpName]=S,x),{})}transformGraph(e,f={}){const x=e.node,S=[],C=[],o=[],y=x.reduce((h,d)=>(h[d.name]=this.mapNode(d),d.op.startsWith("Placeholder")?S.push(h[d.name]):d.op==="Const"?C.push(h[d.name]):(d.input==null||d.input.length===0)&&o.push(h[d.name]),h),{});let t=[];const s=[];let l={},a={};f!=null&&(l=this.mapSignatureEntries(f.inputs),a=this.mapSignatureEntries(f.outputs));const r=Object.keys(y);r.forEach(h=>{const d=y[h];d.inputNames.forEach((u,p)=>{const[m,,v]=ks(u),g=y[m];if(g.outputs!=null){const T=g.outputs.indexOf(v);if(T!==-1){const w=`${m}:${T}`;d.inputNames[p]=w}}d.inputs.push(g),g.children.push(d)})}),Object.keys(a).length===0?r.forEach(h=>{const d=y[h];d.children.length===0&&s.push(d)}):Object.keys(a).forEach(h=>{const[d]=ks(h),u=y[d];u!=null&&(u.signatureKey=a[h],s.push(u))}),Object.keys(l).length>0?Object.keys(l).forEach(h=>{const[d]=ks(h),u=y[d];u&&(u.signatureKey=l[h],t.push(u))}):t=S;let i={};e.library!=null&&e.library.function!=null&&(i=e.library.function.reduce((h,d)=>(h[d.signature.name]=this.mapFunction(d),h),{}));const n={nodes:y,inputs:t,outputs:s,weights:C,placeholders:S,signature:f,functions:i};return o.length>0&&(n.initNodes=o),n}mapSignatureEntries(e){return Object.keys(e||{}).reduce((f,x)=>(f[e[x].name]=x,f),{})}mapNode(e){const f=x2(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const x={name:e.name,op:e.op,category:f.category,inputNames:(e.input||[]).map(S=>S.startsWith("^")?S.slice(1):S),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:f.outputs};return f.inputs!=null&&(x.inputParams=f.inputs.reduce((S,C)=>(S[C.name]={type:C.type,inputIndexStart:C.start,inputIndexEnd:C.end},S),{})),f.attrs!=null&&(x.attrParams=f.attrs.reduce((S,C)=>{const o=C.type;let y;switch(C.type){case"string":y=yh(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=yh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"string[]":y=Ah(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=Ah(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"number":y=Sh(e.attr,C.tfName,C.defaultValue||0),y===void 0&&C.tfDeprecatedName&&(y=Sh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"number[]":y=bh(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=bh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"bool":y=Th(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=Th(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"bool[]":y=Ih(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=Ih(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"shape":y=wh(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=wh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"shape[]":y=Rh(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=Rh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"dtype":y=Ch(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=Ch(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"dtype[]":y=Eh(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=Eh(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"func":y=Dp(e.attr,C.tfName,C.defaultValue),y===void 0&&C.tfDeprecatedName&&(y=Dp(e.attr,C.tfDeprecatedName,C.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${C.type} for op: ${e.op}`)}return S[C.name]={value:y,type:o},S},{})),x}mapFunction(e){const f=e.nodeDef,x=[],S=[];let C={};f!=null&&(C=f.reduce((a,r)=>(a[r.name]=this.mapNode(r),r.op==="Const"&&S.push(a[r.name]),a),{}));const o=[],y=[];e.signature.inputArg.forEach(a=>{const[r]=ks(a.name),i={name:r,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:wd(a.type),type:"dtype"}},children:[]};i.signatureKey=a.name,o.push(i),C[r]=i}),Object.keys(C).forEach(a=>{const r=C[a];r.inputNames.forEach((i,n)=>{const[h,,d]=ks(i),u=C[h];if(u.outputs!=null){const p=u.outputs.indexOf(d);if(p!==-1){const m=`${h}:${p}`;r.inputNames[n]=m}}r.inputs.push(u),u.children.push(r)})});const s=e.ret;e.signature.outputArg.forEach(a=>{const[r,i]=ks(s[a.name]),n=C[r];n!=null&&(n.defaultOutput=i,y.push(n))});const l=this.mapArgsToSignature(e);return{nodes:C,inputs:o,outputs:y,weights:S,placeholders:x,signature:l}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((f,x)=>(f[x.name]=this.mapArgToTensorInfo(x),f),{}),outputs:e.signature.outputArg.reduce((f,x)=>(f[x.name]=this.mapArgToTensorInfo(x,e.ret),f),{})}}mapArgToTensorInfo(e,f){let x=e.name;return f!=null&&(x=f[x]),{name:x,dtype:e.type}}}function nz(c){const e=St().global;if(typeof e.atob<"u")return e.atob(c);if(typeof Buffer<"u")return new Buffer(c,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function y2(c,e){const f=Array.isArray(c)?String.fromCharCode.apply(null,c):nz(c);return e?f:f.toLowerCase()}function yh(c,e,f,x=!1){const S=c[e];return S!=null?y2(S.s,x):f}function Th(c,e,f){const x=c[e];return x?x.b:f}function Sh(c,e,f){const x=c[e]||{},S=x.i!=null?x.i:x.f!=null?x.f:f;return typeof S=="number"?S:parseInt(S,10)}function wd(c){switch(typeof c=="string"&&(c=ns[c]),c){case ns.DT_FLOAT:case ns.DT_HALF:return"float32";case ns.DT_INT32:case ns.DT_INT64:case ns.DT_INT8:case ns.DT_UINT8:return"int32";case ns.DT_BOOL:return"bool";case ns.DT_DOUBLE:return"float32";case ns.DT_STRING:return"string";default:return null}}function Dp(c,e,f){const x=c[e];return x&&x.func?x.func.name:f}function Ch(c,e,f){const x=c[e];return x&&x.type?wd(x.type):f}function Eh(c,e,f){const x=c[e];return x&&x.list&&x.list.type?x.list.type.map(S=>wd(S)):f}function T2(c){if(!c.unknownRank)return c.dim!=null?c.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function wh(c,e,f){const x=c[e];return x&&x.shape?T2(x.shape):f}function bh(c,e,f){const x=c[e];return x?((x.list.f&&x.list.f.length?x.list.f:x.list.i)||[]).map(S=>typeof S=="number"?S:parseInt(S,10)):f}function Ah(c,e,f,x=!1){const S=c[e];return S&&S.list&&S.list.s?S.list.s.map(C=>y2(C,x)):f}function Rh(c,e,f){const x=c[e];return x&&x.list&&x.list.shape?x.list.shape.map(S=>T2(S)):f}function Ih(c,e,f){const x=c[e];return x&&x.list&&x.list.b?x.list.b:f}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sz{constructor(e,f,x){this.node=e,this.tensorMap=f,this.context=x,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(S=>this.getInput(S)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((S,C)=>(S[C]=this.getAttr(C),S),{}))}getInput(e){return fn(e,this.tensorMap,this.context)}getAttr(e,f){const x=this.node.rawAttrs[e];if(x.tensor!=null)return fn(e,this.tensorMap,this.context);if(x.i!=null||x.f!=null)return Sh(this.node.rawAttrs,e,f);if(x.s!=null)return yh(this.node.rawAttrs,e,f);if(x.b!=null)return Th(this.node.rawAttrs,e,f);if(x.shape!=null)return wh(this.node.rawAttrs,e,f);if(x.type!=null)return Ch(this.node.rawAttrs,e,f);if(x.list!=null){if(x.list.i!=null||x.list.f!=null)return bh(this.node.rawAttrs,e,f);if(x.list.s!=null)return Ah(this.node.rawAttrs,e,f);if(x.list.shape!=null)return Rh(this.node.rawAttrs,e,f);if(x.list.b!=null)return Ih(this.node.rawAttrs,e,f);if(x.list.type!=null)return Eh(this.node.rawAttrs,e,f)}return f}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vn=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:Zm,abs:Xn,acos:xy,acosh:Ty,add:ne,addN:Cy,all:wy,any:Ay,argMax:Iy,argMin:Fy,asin:My,asinh:Dy,atan:By,atan2:Gy,atanh:Vy,avgPool:hv,avgPool3d:jy,basicLSTMCell:e3,batchNorm:qu,batchNorm2d:a3,batchNorm3d:u3,batchNorm4d:h3,batchToSpaceND:fv,bincount:cv,bitwiseAnd:d3,booleanMaskAsync:QC,broadcastArgs:m3,broadcastTo:ba,buffer:Ze,cast:We,ceil:x3,clipByValue:dv,clone:Ti,complex:bi,concat:cn,concat1d:S3,concat2d:E3,concat3d:b3,concat4d:R3,conv1d:F3,conv2d:_u,conv2dTranspose:O3,conv3d:L3,conv3dTranspose:U3,cos:z3,cosh:W3,cosineWindow:zc,cumprod:H3,cumsum:K3,denseBincount:Z3,depthToSpace:J3,depthwiseConv2d:bc,diag:tT,dilation2d:nT,div:ye,divNoNan:oT,dot:lT,dropout:lE,einsum:Br,elu:gv,enclosingPowerOfTwo:Yv,ensureShape:dT,equal:vv,erf:mT,euclideanNorm:wT,exp:js,expandDims:is,expm1:IT,eye:Tv,fft:Gc,fill:Qa,floor:Sv,floorDiv:lv,fused:wE,gather:Cv,gatherND:aE,greater:el,greaterEqual:Ev,ifft:$o,imag:nl,image:ia,inTopKAsync:fE,irfft:Uv,isFinite:$T,isInf:UT,isNaN:zT,leakyRelu:wv,less:rh,lessEqual:Rc,linalg:s6,linspace:HT,localResponseNormalization:KT,log:$a,log1p:bv,logSigmoid:t4,logSoftmax:s4,logSumExp:Rv,logicalAnd:Do,logicalNot:Iv,logicalOr:Pv,logicalXor:l4,losses:i6,lowerBound:f4,matMul:Oe,max:Wr,maxPool:Fv,maxPool3d:p4,maxPoolWithArgmax:v4,maximum:Nv,mean:Lo,meshgrid:y4,min:ih,minimum:Bo,mirrorPad:C4,mod:w4,moments:A4,movingAverage:_C,mul:Wt,multiRNNCell:I4,multinomial:F4,neg:Fs,norm:tl,notEqual:Mv,oneHot:O4,ones:er,onesLike:L4,op:ct,outerProduct:$4,pad:qa,pad1d:V4,pad2d:k4,pad3d:X4,pad4d:Y4,pool:J4,pow:Ba,prelu:Dv,print:ov,prod:tS,raggedGather:nS,raggedRange:iS,raggedTensorToTensor:aS,rand:uS,randomGamma:RS,randomNormal:Bv,randomStandardNormal:FS,randomUniform:$c,randomUniformInt:OS,range:Ga,real:Ua,reciprocal:BS,relu:sl,relu6:$v,reshape:Nt,reverse:fr,reverse1d:zS,reverse2d:WS,reverse3d:HS,reverse4d:KS,rfft:Uc,round:Gv,rsqrt:QS,scalar:Ce,scatterND:eE,searchSorted:Ic,selu:qS,separableConv2d:tC,setdiff1dAsync:nC,sigmoid:ir,sign:iC,signal:n6,sin:aC,sinh:uC,slice:me,slice1d:hC,slice2d:cC,slice3d:pC,slice4d:vC,softmax:xC,softplus:Av,spaceToBatchND:Ov,sparse:r6,sparseToDense:iE,spectral:e6,split:Va,sqrt:Ks,square:Ts,squaredDifference:Vv,squeeze:on,stack:Qs,step:zv,stridedSlice:PC,string:a6,sub:ve,sum:Ve,tan:NC,tanh:sh,tensor:ys,tensor1d:xn,tensor2d:Ci,tensor3d:kv,tensor4d:MC,tensor5d:OC,tensor6d:DC,tensorScatterUpdate:BC,tile:Aa,topk:GC,transpose:ah,truncatedNormal:VC,unique:kC,unsortedSegmentSum:XC,unstack:yr,upperBound:YC,variable:KC,where:Si,whereAsync:Hv,zeros:hr,zerosLike:jn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iz=(c,e,f,x=vn)=>{switch(c.op){case"BiasAdd":case"AddV2":case"Add":return[x.add(Y("a",c,e,f),Y("b",c,e,f))];case"AddN":return[x.addN(Y("tensors",c,e,f))];case"FloorMod":case"Mod":return[x.mod(Y("a",c,e,f),Y("b",c,e,f))];case"Mul":return[x.mul(Y("a",c,e,f),Y("b",c,e,f))];case"RealDiv":case"Div":return[x.div(Y("a",c,e,f),Y("b",c,e,f))];case"DivNoNan":return[x.divNoNan(Y("a",c,e,f),Y("b",c,e,f))];case"FloorDiv":return[x.floorDiv(Y("a",c,e,f),Y("b",c,e,f))];case"Sub":return[x.sub(Y("a",c,e,f),Y("b",c,e,f))];case"Minimum":return[x.minimum(Y("a",c,e,f),Y("b",c,e,f))];case"Maximum":return[x.maximum(Y("a",c,e,f),Y("b",c,e,f))];case"Pow":return[x.pow(Y("a",c,e,f),Y("b",c,e,f))];case"SquaredDifference":return[x.squaredDifference(Y("a",c,e,f),Y("b",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rz=(c,e,f,x=vn)=>{switch(c.op){case"Abs":case"ComplexAbs":return[x.abs(Y("x",c,e,f))];case"Acos":return[x.acos(Y("x",c,e,f))];case"Acosh":return[x.acosh(Y("x",c,e,f))];case"Asin":return[x.asin(Y("x",c,e,f))];case"Asinh":return[x.asinh(Y("x",c,e,f))];case"Atan":return[x.atan(Y("x",c,e,f))];case"Atan2":return[x.atan2(Y("x",c,e,f),Y("y",c,e,f))];case"Atanh":return[x.atanh(Y("x",c,e,f))];case"Ceil":return[x.ceil(Y("x",c,e,f))];case"Complex":return[x.complex(Y("real",c,e,f),Y("imag",c,e,f))];case"Cos":return[x.cos(Y("x",c,e,f))];case"Cosh":return[x.cosh(Y("x",c,e,f))];case"Elu":return[x.elu(Y("x",c,e,f))];case"Erf":return[x.erf(Y("x",c,e,f))];case"Exp":return[x.exp(Y("x",c,e,f))];case"Expm1":return[x.expm1(Y("x",c,e,f))];case"Floor":return[x.floor(Y("x",c,e,f))];case"Log":return[x.log(Y("x",c,e,f))];case"Log1p":return[x.log1p(Y("x",c,e,f))];case"Imag":return[x.imag(Y("x",c,e,f))];case"Neg":return[x.neg(Y("x",c,e,f))];case"Reciprocal":return[x.reciprocal(Y("x",c,e,f))];case"Real":return[x.real(Y("x",c,e,f))];case"Relu":return[x.relu(Y("x",c,e,f))];case"Round":return[x.round(Y("x",c,e,f))];case"Selu":return[x.selu(Y("x",c,e,f))];case"Sigmoid":return[x.sigmoid(Y("x",c,e,f))];case"Sin":return[x.sin(Y("x",c,e,f))];case"Sign":return[x.sign(Y("x",c,e,f))];case"Sinh":return[x.sinh(Y("x",c,e,f))];case"Softplus":return[x.softplus(Y("x",c,e,f))];case"Sqrt":return[x.sqrt(Y("x",c,e,f))];case"Square":return[x.square(Y("x",c,e,f))];case"Tanh":return[x.tanh(Y("x",c,e,f))];case"Tan":return[x.tan(Y("x",c,e,f))];case"ClipByValue":return[x.clipByValue(Y("x",c,e,f),Y("clipValueMin",c,e,f),Y("clipValueMax",c,e,f))];case"Relu6":return[x.relu6(Y("x",c,e,f))];case"Rsqrt":return[x.rsqrt(fn(c.inputNames[0],e,f))];case"LeakyRelu":return[x.leakyRelu(Y("x",c,e,f),Y("alpha",c,e,f))];case"Prelu":return[x.prelu(Y("x",c,e,f),Y("alpha",c,e,f))];case"IsNan":return[x.isNaN(fn(c.inputNames[0],e,f))];case"IsInf":return[x.isInf(fn(c.inputNames[0],e,f))];case"IsFinite":return[x.isFinite(fn(c.inputNames[0],e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ss(c,e,f=""){if(!(typeof c=="number"||typeof e=="number")){it(c.length===e.length,()=>f+` Shapes ${c} and ${e} must match`);for(let x=0;x<c.length;x++){const S=c[x],C=e[x];it(S<0||C<0||S===C,()=>f+` Shapes ${c} and ${e} must match`)}}}function Lp(c){return!(typeof c=="number"||c.some(e=>e<0))}function ya(c,e,f){let x=Ph(c,f);const S=!Lp(x);if(S&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${x}`);if(S&&e.forEach(C=>{x=Ph(C.shape,x)}),!Lp(x))throw new Error(`Non-fully-defined elementShape: ${x}`);return x}function Ph(c,e){if(typeof c=="number")return e;if(typeof e=="number")return c;if(c.length!==e.length)throw new Error(`Incompatible ranks during merge: ${c} vs. ${e}`);const f=[];for(let x=0;x<c.length;++x){const S=c[x],C=e[x];if(S>=0&&C>=0&&S!==C)throw new Error(`Incompatible shape during merge: ${c} vs. ${e}`);f[x]=S>=0?S:C}return f}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class az{constructor(e,f,x,S,C,o,y){this.name=e,this.dtype=f,this.maxSize=x,this.elementShape=S,this.identicalElementShapes=C,this.dynamicSize=o,this.clearAfterRead=y,this.tensors=[],this.closed_=!1,this.idTensor=Ce(0),Is(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(f=>{(e==null||!e.has(f.tensor.id))&&f.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const f=this.tensors[e];if(f.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(f.cleared=!0),f.read=!0,f.tensor}readMany(e){return e.map(f=>this.read(f))}write(e,f){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const x=this.tensors[e]||{};if(f.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${f.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=f.shape),ss(this.elementShape,f.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),x.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(x.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);x.tensor=f,Is(f),x.written=!0,this.tensors[e]=x}writeMany(e,f){if(e.length!==f.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${f.length}.`);e.forEach((x,S)=>this.write(x,f[S]))}gather(e,f){if(f&&f!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${f}`);if(e)e=e.slice(0,this.size());else{e=[];for(let S=0;S<this.size();S++)e.push(S)}if(e.length===0)return ys([],[0].concat(this.elementShape));const x=this.readMany(e);return ss(this.elementShape,x[0].shape,"TensorArray shape mismatch: "),Qs(x,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ys([],[0].concat(this.elementShape));const f=[];for(let S=0;S<this.size();S++)f.push(S);const x=this.readMany(f);return ss(this.elementShape,x[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${x[0].shape})`),cn(x,0)}scatter(e,f){if(f.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${f.dtype}`);if(e.length!==f.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${f.shape[0]}`);const x=Math.max(...e);if(!this.dynamicSize&&x>=this.maxSize)throw new Error(`Max index must be < array size (${x}  vs. ${this.maxSize})`);this.writeMany(e,yr(f,0))}split(e,f){if(f.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${f.dtype}`);let x=0;const S=e.map(t=>(x+=t,x));if(x!==f.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${x}, and tensor's shape is: ${f.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const C=x===0?0:f.size/x,o=[];de(()=>{f=Nt(f,[1,x,C]);for(let t=0;t<e.length;++t){const l=[0,t===0?0:S[t-1],0],a=[1,e[t],C];o[t]=Nt(me(f,l,a),this.elementShape)}return o});const y=[];for(let t=0;t<e.length;t++)y[t]=t;this.writeMany(y,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mr{get id(){return this.idTensor.id}constructor(e,f,x,S=-1){this.tensors=e,this.elementShape=f,this.elementDtype=x,e!=null&&e.forEach(C=>{if(x!==C.dtype)throw new Error(`Invalid data types; op elements ${x}, but list elements ${C.dtype}`);ss(f,C.shape,"TensorList shape mismatch: "),Is(C)}),this.idTensor=Ce(0),this.maxNumElements=S,Is(this.idTensor)}copy(){return new mr([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(f=>{(e==null||!e.has(f.id))&&f.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,f,x=-1){if(f!==this.elementDtype)throw new Error(`Invalid data types; op elements ${f}, but list elements ${this.elementDtype}`);if(x!==-1&&this.tensors.length!==x)throw new Error(`Operation expected a list with ${x} elements but got a list with ${this.tensors.length} elements.`);ss(e,this.elementShape,"TensorList shape mismatch: ");const S=ya(this.elementShape,this.tensors,e);return de(()=>{const C=this.tensors.map(o=>Nt(o,S));return Qs(C,0)})}popBack(e,f){if(f!==this.elementDtype)throw new Error(`Invalid data types; op elements ${f}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const x=ya(this.elementShape,this.tensors,e),S=this.tensors.pop();return S.kept=!1,ss(S.shape,e,"TensorList shape mismatch: "),Nt(S,x)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ss(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Is(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const f=new mr([],this.elementShape,this.elementDtype,this.maxNumElements);f.tensors.length=e;for(let x=0;x<Math.min(this.tensors.length,e);++x)f.tensors[x]=this.tensors[x];return f}getItem(e,f,x){if(x!==this.elementDtype)throw new Error(`Invalid data types; op elements ${x}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);ss(this.tensors[e].shape,f,"TensorList shape mismatch: ");const S=ya(this.elementShape,this.tensors,f);return Nt(this.tensors[e],S)}setItem(e,f){if(f.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${f.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ss(this.elementShape,f.shape,"TensorList shape mismatch: "),Is(f),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=f}gather(e,f,x){if(f!==this.elementDtype)throw new Error(`Invalid data types; op elements ${f}, but list elements ${this.elementDtype}`);ss(this.elementShape,x,"TensorList shape mismatch: "),e=e.slice(0,this.size());const S=ya(this.elementShape,this.tensors,x);return e.length===0?ys([],[0].concat(S)):de(()=>{const C=e.map(o=>Nt(this.tensors[o],S));return Qs(C,0)})}concat(e,f){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ss(this.elementShape,f,"TensorList shape mismatch: ");const x=ya(this.elementShape,this.tensors,f);return this.size()===0?ys([],[0].concat(x)):de(()=>{const S=this.tensors.map(C=>Nt(C,x));return cn(S,0)})}}function oz(c,e,f){const x=c.dtype;if(c.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${c.shape}`);if(c.dtype!==f)throw new Error(`Invalid data types; op elements ${c.dtype}, but list elements ${f}`);const S=c.shape.slice(1);ss(S,e,"TensorList shape mismatch: ");const C=yr(c);return new mr(C,e,x)}function uz(c,e,f,x){return new mr([],c,e,x)}function lz(c,e,f,x){if(e.length!==c.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${c.shape[0]}`);const S=Math.max(...e);if(x!=null&&x!==-1&&S>=x)throw new Error(`Max index must be < array size (${S}  vs. ${x})`);const C=new mr([],f,c.dtype,x),o=yr(c,0);return e.forEach((y,t)=>{C.setItem(y,o[t])}),C}function hz(c,e,f){let x=0;const S=e.map(l=>(x+=l,x));if(x!==c.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${x}, and tensor's shape is: ${c.shape}`);const C=c.shape.slice(1),o=Ph(C,f),y=x===0?0:c.size/x,t=de(()=>{const l=[];c=Nt(c,[1,x,y]);for(let a=0;a<e.length;++a){const i=[0,a===0?0:S[a-1],0],n=[1,e[a],y];l[a]=Nt(me(c,i,n),o)}return c.dispose(),l}),s=new mr([],f,c.dtype,e.length);for(let l=0;l<t.length;l++)s.setItem(l,t[l]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fz=async(c,e,f)=>{switch(c.op){case"If":case"StatelessIf":{const x=Y("thenBranch",c,e,f),S=Y("elseBranch",c,e,f),C=Y("cond",c,e,f),o=Y("args",c,e,f);return(await C.data())[0]?f.functionMap[x].executeFunctionAsync(o,f.tensorArrayMap,f.tensorListMap):f.functionMap[S].executeFunctionAsync(o,f.tensorArrayMap,f.tensorListMap)}case"While":case"StatelessWhile":{const x=Y("body",c,e,f),S=Y("cond",c,e,f),C=Y("args",c,e,f),o=await f.functionMap[S].executeFunctionAsync(C,f.tensorArrayMap,f.tensorListMap),y=C.map(l=>l.id);let t=await o[0].data();o.forEach(l=>{!l.kept&&y.indexOf(l.id)===-1&&l.dispose()});let s=C;for(;t[0];){const l=s;s=await f.functionMap[x].executeFunctionAsync(s,f.tensorArrayMap,f.tensorListMap);const a=s.map(i=>i.id);l.forEach(i=>{!i.kept&&y.indexOf(i.id)===-1&&a.indexOf(i.id)===-1&&i.dispose()});const r=await f.functionMap[S].executeFunctionAsync(s,f.tensorArrayMap,f.tensorListMap);t=await r[0].data(),r.forEach(i=>{!i.kept&&y.indexOf(i.id)===-1&&a.indexOf(i.id)===-1&&i.dispose()})}return s}case"LoopCond":{const x=Y("pred",c,e,f);return[Ws(x)]}case"Switch":{const x=Y("pred",c,e,f);let S=Y("data",c,e,f);return S.kept||(S=Ws(S)),(await x.data())[0]?[void 0,S]:[S,void 0]}case"Merge":{const x=c.inputNames.find(S=>fn(S,e,f)!==void 0);if(x){const S=fn(x,e,f);return[Ws(S)]}return}case"Enter":{const x=Y("frameName",c,e,f),S=Y("tensor",c,e,f);return f.enterFrame(x),[Ws(S)]}case"Exit":{const x=Y("tensor",c,e,f);return f.exitFrame(),[Ws(x)]}case"NextIteration":{const x=Y("tensor",c,e,f);return f.nextIteration(),[Ws(x)]}case"TensorArrayV3":{const x=Y("size",c,e,f),S=Y("dtype",c,e,f),C=Y("elementShape",c,e,f),o=Y("dynamicSize",c,e,f),y=Y("clearAfterRead",c,e,f),t=Y("identicalElementShapes",c,e,f),s=Y("name",c,e,f),l=new az(s,S,x,C,t,o,y);return f.addTensorArray(l),[l.idTensor,Ce(1)]}case"TensorArrayWriteV3":{const x=Y("tensorArrayId",c,e,f),S=Y("index",c,e,f),C=Y("tensor",c,e,f),o=f.getTensorArray(x.id);return o.write(S,C),[o.idTensor]}case"TensorArrayReadV3":{const x=Y("tensorArrayId",c,e,f),S=Y("index",c,e,f);return[f.getTensorArray(x.id).read(S)]}case"TensorArrayGatherV3":{const x=Y("tensorArrayId",c,e,f),S=Y("indices",c,e,f),C=Y("dtype",c,e,f);return[f.getTensorArray(x.id).gather(S,C)]}case"TensorArrayScatterV3":{const x=Y("tensorArrayId",c,e,f),S=Y("indices",c,e,f),C=Y("tensor",c,e,f),o=f.getTensorArray(x.id);return o.scatter(S,C),[o.idTensor]}case"TensorArrayConcatV3":{const x=Y("tensorArrayId",c,e,f),S=f.getTensorArray(x.id),C=Y("dtype",c,e,f);return[S.concat(C)]}case"TensorArraySplitV3":{const x=Y("tensorArrayId",c,e,f),S=Y("tensor",c,e,f),C=Y("lengths",c,e,f),o=f.getTensorArray(x.id);return o.split(C,S),[o.idTensor]}case"TensorArraySizeV3":{const x=Y("tensorArrayId",c,e,f),S=f.getTensorArray(x.id);return[Ce(S.size(),"int32")]}case"TensorArrayCloseV3":{const x=Y("tensorArrayId",c,e,f),S=f.getTensorArray(x.id);return S.clearAndClose(),[S.idTensor]}case"TensorListSetItem":{const x=Y("tensorListId",c,e,f),S=Y("index",c,e,f),C=Y("tensor",c,e,f),o=f.getTensorList(x.id);return o.setItem(S,C),[o.idTensor]}case"TensorListGetItem":{const x=Y("tensorListId",c,e,f),S=Y("index",c,e,f),C=Y("elementShape",c,e,f),o=Y("elementDType",c,e,f);return[f.getTensorList(x.id).getItem(S,C,o)]}case"TensorListScatterV2":case"TensorListScatter":{const x=Y("indices",c,e,f),S=Y("tensor",c,e,f),C=Y("elementShape",c,e,f),o=Y("numElements",c,e,f),y=lz(S,x,C,o);return f.addTensorList(y),[y.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const x=Y("elementShape",c,e,f),S=Y("elementDType",c,e,f);let C;c.op==="TensorListReserve"?C="numElements":C="maxNumElements";const o=Y(C,c,e,f),y=c.op==="TensorListReserve"?-1:o,t=uz(x,S,o,y);return f.addTensorList(t),[t.idTensor]}case"TensorListGather":{const x=Y("tensorListId",c,e,f),S=Y("indices",c,e,f),C=Y("elementShape",c,e,f),o=Y("elementDType",c,e,f);return[f.getTensorList(x.id).gather(S,o,C)]}case"TensorListStack":{const x=Y("tensorListId",c,e,f),S=Y("elementShape",c,e,f),C=Y("elementDType",c,e,f),o=Y("numElements",c,e,f);return[f.getTensorList(x.id).stack(S,C,o)]}case"TensorListFromTensor":{const x=Y("tensor",c,e,f),S=Y("elementShape",c,e,f),C=Y("elementDType",c,e,f),o=oz(x,S,C);return f.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const x=Y("tensorListId",c,e,f),S=f.getTensorList(x.id),C=Y("dtype",c,e,f),o=Y("elementShape",c,e,f);return[S.concat(C,o)]}case"TensorListPushBack":{const x=Y("tensorListId",c,e,f),S=Y("tensor",c,e,f),C=f.getTensorList(x.id);return C.pushBack(S),[C.idTensor]}case"TensorListPopBack":{const x=Y("tensorListId",c,e,f),S=Y("elementShape",c,e,f),C=Y("elementDType",c,e,f);return[f.getTensorList(x.id).popBack(S,C)]}case"TensorListSplit":{const x=Y("tensor",c,e,f),S=Y("elementShape",c,e,f),C=Y("lengths",c,e,f),o=hz(x,C,S);return f.addTensorList(o),[o.idTensor]}case"TensorListLength":{const x=Y("tensorListId",c,e,f),S=f.getTensorList(x.id);return[Ce(S.size(),"int32")]}case"TensorListResize":{const x=Y("tensorListId",c,e,f),S=Y("size",c,e,f),o=f.getTensorList(x.id).resize(S);return f.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bp(c,e,f){const[x,S]=Y("fusedOps",c,e,f),C=x==="biasadd",o=!C,y=S==="prelu",t=x==="fusedbatchnorm",s=Y("numArgs",c,e,f);if(C){if(y&&s!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!y&&C&&s!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(t)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const l=Y("strides",c,e,f),a=wo(c,e,f),r=Y("dataFormat",c,e,f).toUpperCase(),i=Y("dilations",c,e,f);let[n,h]=Y("args",c,e,f);o&&(h=n,n=void 0);const d=Y("leakyreluAlpha",c,e,f);return{stride:l,pad:a,dataFormat:r,dilations:i,biasArg:n,preluArg:h,activationFunc:S,leakyreluAlpha:d}}const cz=(c,e,f,x=vn)=>{switch(c.op){case"Conv1D":{const S=Y("stride",c,e,f),C=Y("pad",c,e,f),o=Y("dataFormat",c,e,f).toUpperCase(),y=Y("dilation",c,e,f);return[x.conv1d(Y("x",c,e,f),Y("filter",c,e,f),S,C,o,y)]}case"Conv2D":{const S=Y("strides",c,e,f),C=wo(c,e,f),o=Y("dataFormat",c,e,f).toUpperCase(),y=Y("dilations",c,e,f);return[x.conv2d(Y("x",c,e,f),Y("filter",c,e,f),[S[1],S[2]],C,o,[y[1],y[2]])]}case"_FusedConv2D":{const{stride:S,pad:C,dataFormat:o,dilations:y,biasArg:t,preluArg:s,activationFunc:l,leakyreluAlpha:a}=Bp(c,e,f);return[x.fused.conv2d({x:Y("x",c,e,f),filter:Y("filter",c,e,f),strides:[S[1],S[2]],pad:C,dataFormat:o,dilations:[y[1],y[2]],bias:t,activation:l,preluActivationWeights:s,leakyreluAlpha:a})]}case"FusedDepthwiseConv2dNative":{const{stride:S,pad:C,dataFormat:o,dilations:y,biasArg:t,preluArg:s,activationFunc:l,leakyreluAlpha:a}=Bp(c,e,f);return[x.fused.depthwiseConv2d({x:Y("x",c,e,f),filter:Y("filter",c,e,f),strides:[S[1],S[2]],pad:C,dataFormat:o,dilations:[y[1],y[2]],bias:t,activation:l,preluActivationWeights:s,leakyreluAlpha:a})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const S=Y("outputShape",c,e,f),C=Y("strides",c,e,f),o=wo(c,e,f);return[x.conv2dTranspose(Y("x",c,e,f),Y("filter",c,e,f),S,[C[1],C[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const S=Y("strides",c,e,f),C=wo(c,e,f),o=Y("dilations",c,e,f),y=Y("dataFormat",c,e,f).toUpperCase();return[x.depthwiseConv2d(Y("input",c,e,f),Y("filter",c,e,f),[S[1],S[2]],C,y,[o[1],o[2]])]}case"Conv3D":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("dataFormat",c,e,f).toUpperCase(),y=Y("dilations",c,e,f);return[x.conv3d(Y("x",c,e,f),Y("filter",c,e,f),[S[1],S[2],S[3]],C,o,[y[1],y[2],y[3]])]}case"AvgPool":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f);return[x.avgPool(Y("x",c,e,f),[o[1],o[2]],[S[1],S[2]],C)]}case"MaxPool":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f);return[x.maxPool(Y("x",c,e,f),[o[1],o[2]],[S[1],S[2]],C)]}case"MaxPoolWithArgmax":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f),y=Y("includeBatchInIndex",c,e,f),{result:t,indexes:s}=x.maxPoolWithArgmax(Y("x",c,e,f),[o[1],o[2]],[S[1],S[2]],C,y);return[t,s]}case"AvgPool3D":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f);return[x.avgPool3d(Y("x",c,e,f),[o[1],o[2],o[3]],[S[1],S[2],S[3]],C)]}case"MaxPool3D":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("kernelSize",c,e,f);return[x.maxPool3d(Y("x",c,e,f),[o[1],o[2],o[3]],[S[1],S[2],S[3]],C)]}case"Dilation2D":{const S=Y("strides",c,e,f),C=Y("pad",c,e,f),o=Y("dilations",c,e,f),y=S[1],t=S[2],s=o[1],l=o[2];return[x.dilation2d(Y("x",c,e,f),Y("filter",c,e,f),[y,t],C,[s,l],"NHWC")]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dz=(c,e,f,x=vn)=>{switch(c.op){case"Fill":{const S=Y("shape",c,e,f),C=Y("dtype",c,e,f),o=Y("value",c,e,f);return[x.fill(S,o,C)]}case"LinSpace":{const S=Y("start",c,e,f),C=Y("stop",c,e,f),o=Y("num",c,e,f);return[x.linspace(S,C,o)]}case"Multinomial":{const S=Y("logits",c,e,f),C=Y("numSamples",c,e,f),o=Y("seed",c,e,f);return[x.multinomial(S,C,o)]}case"OneHot":{const S=Y("indices",c,e,f),C=Y("depth",c,e,f),o=Y("onValue",c,e,f),y=Y("offValue",c,e,f),t=Y("dtype",c,e,f);return[x.oneHot(S,C,o,y,t)]}case"Ones":return[x.ones(Y("shape",c,e,f),Y("dtype",c,e,f))];case"OnesLike":return[x.onesLike(Y("x",c,e,f))];case"RandomStandardNormal":return[x.randomStandardNormal(Y("shape",c,e,f),Y("dtype",c,e,f),Y("seed",c,e,f))];case"RandomUniform":return[x.randomUniform(Y("shape",c,e,f),Y("minval",c,e,f),Y("maxval",c,e,f),Y("dtype",c,e,f))];case"RandomUniformInt":return[x.randomUniformInt(Y("shape",c,e,f),Y("minval",c,e,f),Y("maxval",c,e,f),Y("seed",c,e,f))];case"Range":{const S=Y("start",c,e,f),C=Y("stop",c,e,f),o=Y("step",c,e,f);return[x.range(S,C,o,Y("dtype",c,e,f))]}case"TruncatedNormal":{const S=Y("shape",c,e,f),C=Y("mean",c,e,f),o=Y("stdDev",c,e,f),y=Y("seed",c,e,f);return[x.truncatedNormal(S,C,o,Y("dtype",c,e,f),y)]}case"Zeros":return[x.zeros(Y("shape",c,e,f),Y("dtype",c,e,f))];case"ZerosLike":return[x.zerosLike(Y("x",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fl(c,e,f){const x=Y("boxes",c,e,f),S=Y("scores",c,e,f),C=Y("maxOutputSize",c,e,f),o=Y("iouThreshold",c,e,f),y=Y("scoreThreshold",c,e,f),t=Y("softNmsSigma",c,e,f);return{boxes:x,scores:S,maxOutputSize:C,iouThreshold:o,scoreThreshold:y,softNmsSigma:t}}const pz=async(c,e,f,x,S=vn)=>{switch(c.op){case"NonMaxSuppressionV5":{const{boxes:C,scores:o,maxOutputSize:y,iouThreshold:t,scoreThreshold:s,softNmsSigma:l}=Fl(c,e,f),a=await S.image.nonMaxSuppressionWithScoreAsync(C,o,y,t,s,l);return[a.selectedIndices,a.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:C,scores:o,maxOutputSize:y,iouThreshold:t,scoreThreshold:s}=Fl(c,e,f),l=Y("padToMaxOutputSize",c,e,f),a=await S.image.nonMaxSuppressionPaddedAsync(C,o,y,t,s,l);return[a.selectedIndices,a.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:C,scores:o,maxOutputSize:y,iouThreshold:t,scoreThreshold:s}=Fl(c,e,f);return[await S.image.nonMaxSuppressionAsync(C,o,y,t,s)]}case"Where":{const C=S.cast(Y("condition",c,e,f),"bool"),o=[await S.whereAsync(C)];return C.dispose(),o}case"ListDiff":return S.setdiff1dAsync(Y("x",c,e,f),Y("y",c,e,f));default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mz=(c,e,f,x=vn)=>{switch(c.op){case"LowerBound":{const S=Y("sortedSequence",c,e,f),C=Y("values",c,e,f);return[x.lowerBound(S,C)]}case"TopKV2":{const S=Y("x",c,e,f),C=Y("k",c,e,f),o=Y("sorted",c,e,f),y=x.topk(S,C,o);return[y.values,y.indices]}case"UpperBound":{const S=Y("sortedSequence",c,e,f),C=Y("values",c,e,f);return[x.upperBound(S,C)]}case"Unique":{const S=Y("x",c,e,f),C=x.unique(S);return[C.values,C.indices]}case"UniqueV2":{const S=Y("x",c,e,f),C=Y("axis",c,e,f),o=x.unique(S,C);return[o.values,o.indices]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vz=(c,e,f,x=vn)=>{switch(c.op){case"Const":return e[c.name];case"PlaceholderWithDefault":const S=Y("default",c,e,f);return[fn(c.name,e,f)||S];case"Placeholder":return[fn(c.name,e,f)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const l=Y("x",c,e,f);return[Ws(l)]}case"IdentityN":return Y("x",c,e,f).map(l=>Ws(l));case"Snapshot":const C=Y("x",c,e,f);return[Ws(C)];case"Shape":return[x.tensor1d(Y("x",c,e,f).shape,"int32")];case"ShapeN":return Y("x",c,e,f).map(l=>x.tensor1d(l.shape));case"Size":return[x.scalar(Y("x",c,e,f).size,"int32")];case"Rank":return[x.scalar(Y("x",c,e,f).rank,"int32")];case"NoOp":return[x.scalar(1)];case"Print":const o=Y("x",c,e,f),y=Y("data",c,e,f),t=Y("message",c,e,f),s=Y("summarize",c,e,f);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(t);for(let l=0;l<y.length;l++)console.log(Array.prototype.slice.call(y[l].dataSync()).slice(0,s));return[o];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gz{get id(){return this.handle.id}constructor(e,f){this.keyDType=e,this.valueDType=f,this.handle=Ce(0),this.tensorMap=new Map,Is(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ce(this.size(),"int32")}async import(e,f){this.checkKeyAndValueTensor(e,f);const x=await e.data();return this.tensorMap.forEach(S=>S.dispose()),this.tensorMap.clear(),de(()=>{const S=yr(f),C=x.length,o=S.length;it(C===o,()=>`The number of elements doesn't match, keys has ${C} elements, the values has ${o} elements.`);for(let y=0;y<C;y++){const t=x[y],s=S[y];Is(s),this.tensorMap.set(t,s)}return this.handle})}async find(e,f){this.checkKeyAndValueTensor(e,f);const x=await e.data();return de(()=>{const S=[];for(let C=0;C<x.length;C++){const o=x[C],y=this.findWithDefault(o,f);S.push(y)}return Qs(S)})}findWithDefault(e,f){const x=this.tensorMap.get(e);return x??f}checkKeyAndValueTensor(e,f){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(f.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${f.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xz=async(c,e,f,x)=>{switch(c.op){case"HashTable":case"HashTableV2":{const S=x.getHashTableHandleByName(c.name);if(S!=null)return[S];{const C=Y("keyDType",c,e,f),o=Y("valueDType",c,e,f),y=new gz(C,o);return x.addHashTable(c.name,y),[y.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const S=Y("tableHandle",c,e,f,x),C=Y("keys",c,e,f),o=Y("values",c,e,f);return[await x.getHashTableById(S.id).import(C,o)]}case"LookupTableFind":case"LookupTableFindV2":{const S=Y("tableHandle",c,e,f,x),C=Y("keys",c,e,f),o=Y("defaultValue",c,e,f);return[await x.getHashTableById(S.id).find(C,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const S=Y("tableHandle",c,e,f,x);return[x.getHashTableById(S.id).tensorSize()]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yz=(c,e,f,x=vn)=>{switch(c.op){case"ResizeBilinear":{const S=Y("images",c,e,f),C=Y("size",c,e,f),o=Y("alignCorners",c,e,f),y=Y("halfPixelCenters",c,e,f);return[x.image.resizeBilinear(S,[C[0],C[1]],o,y)]}case"ResizeNearestNeighbor":{const S=Y("images",c,e,f),C=Y("size",c,e,f),o=Y("alignCorners",c,e,f),y=Y("halfPixelCenters",c,e,f);return[x.image.resizeNearestNeighbor(S,[C[0],C[1]],o,y)]}case"CropAndResize":{const S=Y("image",c,e,f),C=Y("boxes",c,e,f),o=Y("boxInd",c,e,f),y=Y("cropSize",c,e,f),t=Y("method",c,e,f),s=Y("extrapolationValue",c,e,f);return[x.image.cropAndResize(S,C,o,y,t,s)]}case"ImageProjectiveTransformV3":{const S=Y("images",c,e,f),C=Y("transforms",c,e,f),o=Y("outputShape",c,e,f),y=Y("fillValue",c,e,f),t=Y("interpolation",c,e,f),s=Y("fillMode",c,e,f);return[x.image.transform(S,C,t.toLowerCase(),s.toLowerCase(),y,o)]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tz=(c,e,f,x=vn)=>{switch(c.op){case"Equal":return[x.equal(Y("a",c,e,f),Y("b",c,e,f))];case"NotEqual":return[x.notEqual(Y("a",c,e,f),Y("b",c,e,f))];case"Greater":return[x.greater(Y("a",c,e,f),Y("b",c,e,f))];case"GreaterEqual":return[x.greaterEqual(Y("a",c,e,f),Y("b",c,e,f))];case"Less":return[x.less(Y("a",c,e,f),Y("b",c,e,f))];case"LessEqual":return[x.lessEqual(Y("a",c,e,f),Y("b",c,e,f))];case"LogicalAnd":return[x.logicalAnd(Y("a",c,e,f),Y("b",c,e,f))];case"LogicalNot":return[x.logicalNot(Y("a",c,e,f))];case"LogicalOr":return[x.logicalOr(Y("a",c,e,f),Y("b",c,e,f))];case"Select":case"SelectV2":return[x.where(Y("condition",c,e,f),Y("a",c,e,f),Y("b",c,e,f))];case"BitwiseAnd":return[x.bitwiseAnd(Y("a",c,e,f),Y("b",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sz=(c,e,f,x=vn)=>{switch(c.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[x.matMul(Y("a",c,e,f),Y("b",c,e,f),Y("transposeA",c,e,f),Y("transposeB",c,e,f))];case"Einsum":return[x.einsum(Y("equation",c,e,f),...Y("tensors",c,e,f))];case"Transpose":return[x.transpose(Y("x",c,e,f),Y("perm",c,e,f))];case"_FusedMatMul":const[S,C]=Y("fusedOps",c,e,f),o=S==="biasadd",y=C==="prelu",t=Y("numArgs",c,e,f),s=Y("leakyreluAlpha",c,e,f);if(o){if(y&&t!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!y&&t!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[l,a]=Y("args",c,e,f);return[x.fused.matMul({a:Y("a",c,e,f),b:Y("b",c,e,f),transposeA:Y("transposeA",c,e,f),transposeB:Y("transposeB",c,e,f),bias:l,activation:C,preluActivationWeights:a,leakyreluAlpha:s})];case"MatrixBandPart":return[x.linalg.bandPart(Y("a",c,e,f),Y("numLower",c,e,f),Y("numUpper",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cz=(c,e,f,x=vn)=>{switch(c.op){case"EuclideanNorm":return[x.euclideanNorm(Y("x",c,e,f),Y("axis",c,e,f),Y("keepDims",c,e,f))];case"FusedBatchNorm":case"FusedBatchNormV2":return[x.batchNorm(Y("x",c,e,f),Y("mean",c,e,f),Y("variance",c,e,f),Y("offset",c,e,f),Y("scale",c,e,f),Y("epsilon",c,e,f))];case"FusedBatchNormV3":return[x.batchNorm(Y("x",c,e,f),Y("mean",c,e,f),Y("variance",c,e,f),Y("offset",c,e,f),Y("scale",c,e,f),Y("epsilon",c,e,f))];case"LRN":return[x.localResponseNormalization(Y("x",c,e,f),Y("radius",c,e,f),Y("bias",c,e,f),Y("alpha",c,e,f),Y("beta",c,e,f))];case"Softmax":return[x.softmax(Y("x",c,e,f))];case"LogSoftmax":return[x.logSoftmax(Y("x",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ez=(c,e,f,x=vn)=>{switch(c.op){case"RaggedGather":{const{outputNestedSplits:S,outputDenseValues:C}=x.raggedGather(Y("paramsNestedSplits",c,e,f),Y("paramsDenseValues",c,e,f),Y("indices",c,e,f),Y("outputRaggedRank",c,e,f));return S.concat(C)}case"RaggedRange":{const{rtNestedSplits:S,rtDenseValues:C}=x.raggedRange(Y("starts",c,e,f),Y("limits",c,e,f),Y("splits",c,e,f));return[S,C]}case"RaggedTensorToTensor":return[x.raggedTensorToTensor(Y("shape",c,e,f),Y("values",c,e,f),Y("defaultValue",c,e,f),Y("rowPartitionTensors",c,e,f),Y("rowPartitionTypes",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wz=(c,e,f,x=vn)=>{switch(c.op){case"Max":{const y=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[x.max(Y("x",c,e,f),y,t)]}case"Mean":{const y=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[x.mean(Y("x",c,e,f),y,t)]}case"Min":{const y=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[x.min(Y("x",c,e,f),y,t)]}case"Sum":{const y=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[x.sum(Y("x",c,e,f),y,t)]}case"All":{const y=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[x.all(Y("x",c,e,f),y,t)]}case"Any":{const y=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[x.any(Y("x",c,e,f),y,t)]}case"ArgMax":{const y=Y("axis",c,e,f);return[x.argMax(Y("x",c,e,f),y)]}case"ArgMin":{const y=Y("axis",c,e,f);return[x.argMin(Y("x",c,e,f),y)]}case"Prod":{const y=Y("axis",c,e,f),t=Y("keepDims",c,e,f);return[x.prod(Y("x",c,e,f),y,t)]}case"Cumprod":{const y=Y("axis",c,e,f),t=Y("exclusive",c,e,f),s=Y("reverse",c,e,f);return[x.cumprod(Y("x",c,e,f),y,t,s)]}case"Cumsum":{const y=Y("axis",c,e,f),t=Y("exclusive",c,e,f),s=Y("reverse",c,e,f);return[x.cumsum(Y("x",c,e,f),y,t,s)]}case"Bincount":const S=Y("x",c,e,f),C=Y("weights",c,e,f),o=Y("size",c,e,f);return[x.bincount(S,C,o)];case"DenseBincount":{const y=Y("x",c,e,f),t=Y("weights",c,e,f),s=Y("size",c,e,f),l=Y("binaryOutput",c,e,f);return[x.denseBincount(y,t,s,l)]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bz=(c,e,f,x=vn)=>{switch(c.op){case"ConcatV2":case"Concat":{const S=Y("n",c,e,f),C=Y("axis",c,e,f);let o=Y("tensors",c,e,f);return o=o.slice(0,S),[x.concat(o,C)]}case"Gather":{const S=Y("x",c,e,f),C=Y("indices",c,e,f);return[x.gather(S,x.cast(C,"int32"),0)]}case"GatherV2":{const S=Y("axis",c,e,f),C=Y("batchDims",c,e,f),o=Y("x",c,e,f),y=Y("indices",c,e,f);return[x.gather(o,x.cast(y,"int32"),S,C)]}case"Reverse":{const S=Y("dims",c,e,f),C=[];for(let y=0;y<S.length;y++)S[y]&&C.push(y);const o=Y("x",c,e,f);return[x.reverse(o,C)]}case"ReverseV2":{const S=Y("axis",c,e,f),C=Y("x",c,e,f);return[x.reverse(C,S)]}case"Slice":{const S=Y("begin",c,e,f),C=Y("size",c,e,f);return[x.slice(Y("x",c,e,f),S,C)]}case"StridedSlice":{const S=Y("begin",c,e,f),C=Y("end",c,e,f),o=Y("strides",c,e,f),y=Y("beginMask",c,e,f),t=Y("endMask",c,e,f),s=Y("ellipsisMask",c,e,f),l=Y("newAxisMask",c,e,f),a=Y("shrinkAxisMask",c,e,f),r=Y("x",c,e,f);return[x.stridedSlice(r,S,C,o,y,t,s,l,a)]}case"Pack":return de(()=>{const S=Y("axis",c,e,f),C=Y("tensors",c,e,f),o=C[0].shape,y=x.squeeze(C[0]).shape,t=C.map(s=>{const l=je(s.shape,o);if(!l&&!je(x.squeeze(s).shape,y))throw new Error("the input tensors shape does not match");return l?s:x.reshape(s,o)});return[x.stack(t,S)]});case"Unpack":{const S=Y("axis",c,e,f),C=Y("tensor",c,e,f);return x.unstack(C,S)}case"Tile":{const S=Y("reps",c,e,f);return[x.tile(Y("x",c,e,f),S)]}case"Split":case"SplitV":{const S=Y("axis",c,e,f),C=Y("numOrSizeSplits",c,e,f),o=Y("x",c,e,f);return x.split(o,C,S)}case"ScatterNd":{const S=Y("indices",c,e,f),C=Y("values",c,e,f),o=Y("shape",c,e,f);return[x.scatterND(S,C,o)]}case"GatherNd":{const S=Y("x",c,e,f),C=Y("indices",c,e,f);return[x.gatherND(S,C)]}case"SparseToDense":{const S=Y("sparseIndices",c,e,f),C=Y("outputShape",c,e,f),o=Y("sparseValues",c,e,f),y=Y("defaultValue",c,e,f);return[x.sparseToDense(S,o,C,o.dtype===y.dtype?y:x.cast(y,o.dtype))]}case"TensorScatterUpdate":{const S=Y("indices",c,e,f),C=Y("values",c,e,f),o=Y("tensor",c,e,f);return[x.tensorScatterUpdate(o,S,C)]}default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Az=(c,e,f,x=vn)=>{switch(c.op){case"SparseFillEmptyRows":{const{outputIndices:S,outputValues:C,emptyRowIndicator:o,reverseIndexMap:y}=x.sparse.sparseFillEmptyRows(Y("indices",c,e,f),Y("values",c,e,f),Y("denseShape",c,e,f),Y("defaultValue",c,e,f));return[S,C,o,y]}case"SparseReshape":{const{outputIndices:S,outputShape:C}=x.sparse.sparseReshape(Y("inputIndices",c,e,f),Y("inputShape",c,e,f),Y("newShape",c,e,f));return[S,C]}case"SparseSegmentMean":return[x.sparse.sparseSegmentMean(Y("data",c,e,f),Y("indices",c,e,f),Y("segmentIds",c,e,f))];case"SparseSegmentSum":return[x.sparse.sparseSegmentSum(Y("data",c,e,f),Y("indices",c,e,f),Y("segmentIds",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rz=(c,e,f,x=vn)=>{switch(c.op){case"FFT":return[x.fft(Y("x",c,e,f))];case"IFFT":return[x.ifft(Y("x",c,e,f))];case"RFFT":return[x.rfft(Y("x",c,e,f))];case"IRFFT":return[x.irfft(Y("x",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iz=(c,e,f,x=vn)=>{switch(c.op){case"StaticRegexReplace":return[x.string.staticRegexReplace(Y("input",c,e,f),Y("pattern",c,e,f),Y("rewrite",c,e,f),Y("replaceGlobal",c,e,f))];case"StringNGrams":{const{nGrams:S,nGramsSplits:C}=x.string.stringNGrams(Y("data",c,e,f),Y("dataSplits",c,e,f),Y("separator",c,e,f),Y("nGramWidths",c,e,f),Y("leftPad",c,e,f),Y("rightPad",c,e,f),Y("padWidth",c,e,f),Y("preserveShortSequences",c,e,f));return[S,C]}case"StringSplit":{const{indices:S,values:C,shape:o}=x.string.stringSplit(Y("input",c,e,f),Y("delimiter",c,e,f),Y("skipEmpty",c,e,f));return[S,C,o]}case"StringToHashBucketFast":return[x.string.stringToHashBucketFast(Y("input",c,e,f),Y("numBuckets",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pz=(c,e,f,x=vn)=>{switch(c.op){case"Cast":return[x.cast(Y("x",c,e,f),Y("dtype",c,e,f))];case"ExpandDims":{const S=Y("axis",c,e,f);return[x.expandDims(Y("x",c,e,f),S)]}case"Squeeze":{const S=Y("axis",c,e,f);return[x.squeeze(Y("x",c,e,f),S)]}case"Reshape":return[x.reshape(Y("x",c,e,f),Y("shape",c,e,f))];case"EnsureShape":return[x.ensureShape(Y("x",c,e,f),Y("shape",c,e,f))];case"MirrorPad":return[x.mirrorPad(Y("x",c,e,f),Y("padding",c,e,f),Y("mode",c,e,f))];case"PadV2":case"Pad":return[x.pad(Y("x",c,e,f),Y("padding",c,e,f),Y("constantValue",c,e,f))];case"SpaceToBatchND":{const S=Y("blockShape",c,e,f),C=Y("paddings",c,e,f);return[x.spaceToBatchND(Y("x",c,e,f),S,C)]}case"BatchToSpaceND":{const S=Y("blockShape",c,e,f),C=Y("crops",c,e,f);return[x.batchToSpaceND(Y("x",c,e,f),S,C)]}case"DepthToSpace":{const S=Y("blockSize",c,e,f),C=Y("dataFormat",c,e,f).toUpperCase();return[x.depthToSpace(Y("x",c,e,f),S,C)]}case"BroadcastTo":return[x.broadcastTo(Y("x",c,e,f),Y("shape",c,e,f))];case"BroadcastArgs":return[x.broadcastArgs(Y("s0",c,e,f),Y("s1",c,e,f))];default:throw TypeError(`Node type ${c.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $p(c,e,f,x,S=de){const C=((o,y,t)=>{switch(o.category){case"arithmetic":return S(()=>iz(o,y,t));case"basic_math":return S(()=>rz(o,y,t));case"control":return fz(o,y,t);case"convolution":return S(()=>cz(o,y,t));case"creation":return S(()=>dz(o,y,t));case"dynamic":return pz(o,y,t);case"evaluation":return S(()=>mz(o,y,t));case"image":return S(()=>yz(o,y,t));case"graph":return S(()=>vz(o,y,t));case"logical":return S(()=>Tz(o,y,t));case"matrices":return S(()=>Sz(o,y,t));case"normalization":return S(()=>Cz(o,y,t));case"ragged":return S(()=>Ez(o,y,t));case"reduction":return S(()=>wz(o,y,t));case"slice_join":return S(()=>bz(o,y,t));case"sparse":return S(()=>Az(o,y,t));case"spectral":return S(()=>Rz(o,y,t));case"string":return S(()=>Iz(o,y,t));case"transformation":return S(()=>Pz(o,y,t));case"hash_table":return xz(o,y,t,x);case"custom":const s=x2(o.op);if(s&&s.customExecutor)return s.customExecutor(new sz(o,y,t));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(c,e,f);return rr(C)?C.then(o=>[].concat(o)):[].concat(C)}class Gp{constructor(e={},f={},x={},S={},C){this.weightMap=e,this.tensorArrayMap=f,this.tensorListMap=x,this.functionMap=S,this.parseNodeNameCache=C,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,f){return{id:e,frameName:f,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let f=0;f<this.contexts.length-1;f++){const x=this.contexts.slice(0,this.contexts.length-f);e.push(this.contextIdforContexts(x))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(f=>f.id===0&&f.iterationId===0?"":`${f.frameName}-${f.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const f in this.tensorArrayMap)this.tensorArrayMap[f].clearAndClose(e);for(const f in this.tensorListMap)this.tensorListMap[f].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Up(c,e,f,x){const S=new Set,C=[];let o=null,y=null;const t=new Set,s=new Set(Object.keys(c).map(r=>Un(r)[0]));x=x||[];const l=new Set(x.map(r=>Un(r.name)[0])),a=[...e];for(;a.length>0;){const r=a.pop();if((Ji(r)||$z(r)||Gz(r))&&o==null&&(o=r,y=o.children.map(i=>i.name).filter(i=>S.has(i))),S.add(r.name),f[r.name]==null&&!s.has(r.name)&&!l.has(r.name)){if(r.inputs.length===0){C.push(r.name);continue}r.inputs.forEach(i=>{t.has(i.name)||(t.add(i.name),a.push(i))})}}return{inputs:c,outputs:e,usedNodes:S,missingInputs:C,dynamicNode:o,syncInputs:y}}function Fz(c,e){const{usedNodes:f,inputs:x}=e,S=Object.keys(x).map(d=>Un(d)[0]).map(d=>c.nodes[d]),C=c.initNodes||[],o=d=>f.has(typeof d=="string"?d:d.name);function y(d){return[...new Map(d.map(u=>[u.name,u])).values()]}const t=y([...S,...c.weights,...C]).filter(o),s=y([...t,...Object.values(c.nodes)]).filter(o),l=new Map(s.map(d=>[d.name,d])),a={};for(const d of s){a[d.name]=a[d.name]||0;for(const u of d.children)o(u)||(a[u.name]=Number.POSITIVE_INFINITY),a[u.name]=(a[u.name]||0)+1}const r=Object.entries(a).filter(([,d])=>d===0).map(([d])=>d),i=[...r];for(;r.length>0;){const d=r.pop(),u=l.get(d);for(const p of u.children.filter(o))--a[p.name]===0&&(i.push(p.name),r.push(p.name))}const n=i.map(d=>l.get(d)),h=Nz(n,t);return Mz(h,t),h}function Nz(c,e){const f=new Map(c.map(o=>[o.name,o])),x=e.map(o=>o.name),S=new Set(x);for(;x.length>0;){const o=x.pop(),y=f.get(o);for(const t of y.children)!f.has(t.name)||S.has(t.name)||(S.add(t.name),x.push(t.name))}return c.filter(o=>S.has(o.name))}class yo extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Mz(c,e){const f=new Map(c.map((y,t)=>[y.name,t])),x=new Set(e.map(y=>y.name)),S=y=>x.has(typeof y=="string"?y:y.name),C=new Set(c.map(y=>y.name)),o=y=>C.has(typeof y=="string"?y:y.name);for(const y of c){for(const t of y.children.filter(o)){if(!f.has(t.name))throw new yo(`Child ${t.name} of node ${y.name} is unreachable.`);if(f.get(y.name)>f.get(t.name))throw new yo(`Node ${y.name} is scheduled to run after its child ${t.name}.`)}if(!S(y))for(const t of y.inputs){if(!f.has(t.name))throw new yo(`Input ${t.name} of node ${y.name} is unreachable.`);if(f.get(t.name)>f.get(y.name))throw new yo(`Node ${y.name} is scheduled to run before its input ${t.name}.`)}}}function Oz(c){const e=new Map(c.map((y,t)=>[y.name,t])),f=Number.MAX_SAFE_INTEGER,x=c.map((y,t)=>Ji(y)?f:t),S=y=>{const t=x[e.get(y.name)];return t??-1},C=c.map((y,t)=>y.children.map(S).reduce((s,l)=>Math.max(s,l),x[t])),o=new Map;for(let y=0;y<c.length;++y){const t=C[y];if(t===f)continue;const s=c[y],l=c[t];o.has(l.name)||o.set(l.name,[]),o.get(l.name).push(s)}return o}const Dz=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Lz=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Bz=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Ji(c){return Dz.has(c.op)}function $z(c){return Lz.has(c.op)}function Gz(c){return Bz.has(c.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xo{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const f=Object.keys(e).map(x=>e[x].map(S=>S.id));this._weightIds=[].concat(...f),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const f=e.signatureKey||e.name;return e.defaultOutput?`${f}:${e.defaultOutput}`:f})}get functions(){return Object.keys(this._functions).reduce((e,f)=>(e[f]=this._functions[f].signature,e),{})}constructor(e,f){this.graph=e,this.parent=f,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(x=>{this._functionExecutorMap[x]=new Xo(e.functions[x],this)})}getCompilationKey(e,f){const x=e.map(C=>C.name).sort(),S=f.map(C=>C.name).sort();return x.join(this.SEPARATOR)+"--"+S.join(this.SEPARATOR)}compile(e,f){const x=Up(e,f,this.weightMap,this._initNodes),{missingInputs:S,dynamicNode:C,syncInputs:o}=x;if(C!=null)throw new Error(`This execution contains the node '${C.name}', which has the dynamic op '${C.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(S.length>0){const s=f.map(a=>a.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${l}]. Missing the following inputs: [${S}]`)}const y=Fz(this.graph,x),t=Oz(y);return{orderedNodes:y,nodeLiveUntilMap:t}}cloneAndKeepTensor(e){if(e==null)return null;const f=e.clone();return Is(f),f}cloneTensorList(e){return e?e.map(x=>this.cloneAndKeepTensor(x)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([f,x])=>[f,this.cloneTensorList(x)]))}execute(e,f){this.disposeIntermediateTensors(),e=this.mapInputs(e);const x=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),f=this.mapOutputs(f),this.checkOutputs(f);const S=x.map(r=>this.graph.nodes[Un(r)[0]]),C=f.map(r=>Un(r)[0]),o=new Set(C);let y=C.map(r=>this.graph.nodes[r]);y.length===0&&(y=this._outputs);const t=this.getCompilationKey(S,y);let s=this.compiledMap.get(t);s==null&&(s=this.compile(e,y),this.compiledMap.set(t,s));try{this.keepIntermediateTensors=St().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(r){this.keepIntermediateTensors=!1,console.warn(r.message)}const l={},a={};return de(()=>{const r=new Gp(this.weightMap,l,a,this.functionExecutorMap,this.parseNodeNameCache),i=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(u=>{const[p,m]=Un(u,r),v=[];v[m]=e[u],i[p]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(v))});const n=this.getFrozenTensorIds(i),{orderedNodes:h,nodeLiveUntilMap:d}=s;for(const u of h){if(i[u.name])continue;const p=$p(u,i,r,this._resourceManager);if(rr(p))throw new Error(`The execution of the op '${u.op}' returned a promise. Please use model.executeAsync() instead.`);i[u.name]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[u.name]=this.cloneTensorList(p)),this.checkTensorForDisposalWithNodeLiveUntilInfo(u,i,r,n,o,d.get(u.name))}return this.parent==null&&r.dispose(n),f.map(u=>fn(u,i,r))})}getFrozenTensorIds(e){const f=[].concat.apply([],Object.keys(e).map(x=>e[x]).map(x=>x.map(S=>S.id)));return new Set(f)}checkTensorForDisposal(e,f,x,S,C,o,y){if(!(Ji(f)||o.has(e))){for(const t of x[e])t!=null&&(y[t.id]=(y[t.id]||0)+f.children.length);for(const t of f.inputs){if(Ji(t))continue;const s=Mp(t.name,x,S);if(s!=null)for(const l of s){if(!l||l.kept||C.has(l.id))continue;const a=y[l.id];a===1?(l.dispose(),delete y[l.id]):a!=null&&y[l.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,f,x,S,C,o){function y(t){return Ji(t)||C.has(t.name)}if(!(Ji(e)||o==null))for(const t of o){if(y(t))continue;const s=Mp(t.name,f,x);for(const l of s)!l||l.kept||S.has(l.id)||l.dispose()}}async executeAsync(e,f){return this._executeAsync(e,f)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const f of e)f&&!f.isDisposed&&f.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,f,x=!1,S={},C={}){this.disposeIntermediateTensors(),x||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),f=this.mapOutputs(f),this.checkOutputs(f));try{this.keepIntermediateTensors=St().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(r){this.keepIntermediateTensors=!1,console.warn(r.message)}const o=new Gp(this.weightMap,S,C,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const y=await this.executeWithControlFlow(e,o,f,x),t=f.map(r=>fn(r,y,o)),s=t.map(r=>r.id),l=Object.keys(e).map(r=>e[r].id),a=new Set([...s,...l,...this.weightIds]);return Object.values(y).forEach(r=>{r.forEach(i=>{i&&!i.isDisposed&&!a.has(i.id)&&i.dispose()})}),this.parent==null&&o.dispose(a),t}async executeFunctionAsync(e,f,x){const S=e.reduce((C,o,y)=>(C[this.inputs[y].name]=o,C),{});return this._executeAsync(S,this.outputNodes,!0,f,x)}async executeWithControlFlow(e,f,x,S){const C=Object.keys(e),o=C.map(v=>this.graph.nodes[Un(v)[0]]),y=x.map(v=>Un(v)[0]),t=new Set(y);let s=y.map(v=>this.graph.nodes[v]);s.length===0&&(s=this._outputs);const{usedNodes:l,missingInputs:a,dynamicNode:r,syncInputs:i}=Up(e,s,this.weightMap,this._initNodes),n=[...o,...this.graph.weights,...this._initNodes||[]].map(v=>({node:v,contexts:f.currentContext})),h=Object.assign({},this.weightMap);Object.keys(e).forEach(v=>{const[g,T]=Un(v),w=[];w[T]=e[v],h[g]=w});const d={},u=this.getFrozenTensorIds(h),p={};for(;n.length>0;){const v=this.processStack(o,n,f,h,p,u,t,d,l);await Promise.all(v)}r==null&&!S&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const m=s.filter(v=>!Ji(v)&&!fn(v.name,h,f)).map(v=>v.name);if(m.length>0){let v="";throw r!=null&&(v=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${i}]`),new Error(`Cannot compute the outputs [${m}] from the provided inputs [${C}]. Consider providing the following inputs: [${a}]. ${v}`)}return h}processStack(e,f,x,S,C,o,y,t,s){const l=[];for(;f.length>0;){const a=f.pop();x.currentContext=a.contexts;let r="";if(a.node.op==="Enter"&&Y("isConstant",a.node,S,x)&&([r]=ks(a.node.name,x)),S[a.node.name]==null){const i=$p(a.node,S,x,this._resourceManager);r||([r]=ks(a.node.name,x));const n=x.currentContext;rr(i)?l.push(i.then(h=>(S[r]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[r]=this.cloneTensorList(h)),x.currentContext=n,this.checkTensorForDisposal(r,a.node,S,x,o,y,t),this.processChildNodes(a.node,f,x,S,C,s),h))):(S[r]=i,this.keepIntermediateTensors&&(this.clonedTensorsMap[r]=this.cloneTensorList(i)),this.checkTensorForDisposal(r,a.node,S,x,o,y,t),this.processChildNodes(a.node,f,x,S,C,s))}else this.processChildNodes(a.node,f,x,S,C,s)}return l}processChildNodes(e,f,x,S,C,o){e.children.forEach(y=>{const[t]=ks(y.name,x);C[t]||!o.has(y.name)||(y.op==="Merge"?y.inputNames.some(s=>!!fn(s,S,x))&&(C[t]=!0,f.push({contexts:x.currentContext,node:y})):y.inputNames.every(s=>!!fn(s,S,x))&&(C[t]=!0,f.push({contexts:x.currentContext,node:y})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(f=>f.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(f=>{const x=e[f],[S]=Un(f),C=this.graph.nodes[S];if(C.attrParams.shape&&C.attrParams.shape.value){const o=C.attrParams.shape.value,y=o.length===x.shape.length&&x.shape.every((t,s)=>o[s]===-1||o[s]===t);it(y,()=>`The shape of dict['${C.name}'] provided in model.execute(dict) must be [${o}], but was [${x.shape}]`)}C.attrParams.dtype&&C.attrParams.dtype.value&&it(x.dtype===C.attrParams.dtype.value,()=>`The dtype of dict['${C.name}'] provided in model.execute(dict) must be ${C.attrParams.dtype.value}, but was ${x.dtype}`)})}mapInputs(e){var f,x;const S={};for(const C in e){const o=(x=(f=this._signature)===null||f===void 0?void 0:f.inputs)===null||x===void 0?void 0:x[C];o!=null?S[o.name]=e[C]:S[C]=e[C]}return S}checkInputs(e){const f=Object.keys(e).filter(x=>{const[S]=Un(x);return this.graph.nodes[S]==null});if(f.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${f}] that are not part of graph`)}mapOutputs(e){return e.map(f=>{var x,S;const C=(S=(x=this._signature)===null||x===void 0?void 0:x.outputs)===null||S===void 0?void 0:S[f];return C!=null?C.name:f},{})}checkOutputs(e){e.forEach(f=>{const[x]=Un(f);if(!this.graph.nodes[x])throw new Error(`The output '${f}' is not found in the graph`)})}}class Uz{constructor(e={},f={}){this.hashTableNameToHandle=e,this.hashTableMap=f}addHashTable(e,f){this.hashTableNameToHandle[e]=f.handle,this.hashTableMap[f.id]=f}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vz="?tfjs-format=file",zz="model.json";class kz{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,f={},x=ig){this.modelUrl=e,this.loadOptions=f,this.version="n/a",this.io=x,f==null&&(this.loadOptions={}),this.resourceManager=new Uz}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const f=this.io.getLoadHandlers(e,this.loadOptions);if(f.length===0)f.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(f.length>1)throw new Error(`Found more than one (${f.length}) load handlers for URL '${[e]}'`);this.handler=f[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return rr(e)?e.then(f=>this.loadSync(f)):this.loadSync(e)}loadSync(e){this.artifacts=e;const f=this.artifacts.modelTopology;let x=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const C=this.artifacts.userDefinedMetadata;C.signature!=null&&(x=C.signature),C.structuredOutputKeys!=null&&(this.structuredOutputKeys=C.structuredOutputKeys)}this.signature=x,this.version=`${f.versions.producer}.${f.versions.minConsumer}`;const S=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Xo(Op.Instance.transformGraph(f,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(S),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const C=Op.Instance.transformGraph(e.modelInitializer);this.initializer=new Xo(C),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,f){if(typeof e=="string"){const x=this.io.getSaveHandlers(e);if(x.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(x.length>1)throw new Error(`Found more than one (${x.length}) save handlers for URL '${e}'`);e=x[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const f=e instanceof Je?[e]:e,x={};return f.forEach((S,C)=>x[this.structuredOutputKeys[C]]=S),x}return e}predict(e,f){const x=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(x)}async predictAsync(e,f){const x=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(x)}normalizeInputs(e){var f;if(!(e instanceof Je)&&!Array.isArray(e)){const C=(f=this.signature)===null||f===void 0?void 0:f.inputs;if(C!=null)for(const o in C){const y=C[o];y.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[y.resourceId])}return e}e=Array.isArray(e)?e:[e];const x=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+x!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-x} non-resource placeholders, while there are ${e.length} input tensors provided.`);let S=0;return this.inputNodes.reduce((C,o)=>{var y,t,s;const l=(s=(t=(y=this.signature)===null||y===void 0?void 0:y.inputs)===null||t===void 0?void 0:t[o])===null||s===void 0?void 0:s.resourceId;return l!=null?C[o]=this.resourceIdToCapturedInput[l]:C[o]=e[S++],C},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const f=this.initializerSignature.outputs,x=Object.keys(f);for(let S=0;S<x.length;S++){const C=x[S],o=f[C];this.resourceIdToCapturedInput[o.resourceId]=e[S]}}}execute(e,f){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),f=this.normalizeOutputs(f);const x=this.executor.execute(e,f);return x.length>1?x:x[0]}async executeAsync(e,f){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),f=this.normalizeOutputs(f);const x=await this.executor.executeAsync(e,f);return x.length>1?x:x[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((f,x)=>(f[x]=[e[x]],f),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Ke(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function S2(c,e={},f=ig){if(c==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof c=="string"&&(c=Wz(c));const x=new kz(c,e,f);return await x.load(),x}function Wz(c){return c.endsWith("/")||(c=c+"/"),`${c}${zz}${Vz}`}/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var Ss=function(){return Ss=Object.assign||function(c){for(var e,f=1,x=arguments.length;f<x;f++)for(var S in e=arguments[f])Object.prototype.hasOwnProperty.call(e,S)&&(c[S]=e[S]);return c},Ss.apply(this,arguments)};function Hs(c,e,f,x){return new(f||(f=Promise))(function(S,C){function o(s){try{t(x.next(s))}catch(l){C(l)}}function y(s){try{t(x.throw(s))}catch(l){C(l)}}function t(s){var l;s.done?S(s.value):(l=s.value,l instanceof f?l:new f(function(a){a(l)})).then(o,y)}t((x=x.apply(c,e||[])).next())})}function Ys(c,e){var f,x,S,C,o={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return C={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function y(t){return function(s){return function(l){if(f)throw new TypeError("Generator is already executing.");for(;o;)try{if(f=1,x&&(S=2&l[0]?x.return:l[0]?x.throw||((S=x.return)&&S.call(x),0):x.next)&&!(S=S.call(x,l[1])).done)return S;switch(x=0,S&&(l=[2&l[0],S.value]),l[0]){case 0:case 1:S=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,x=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(S=o.trys,!((S=S.length>0&&S[S.length-1])||l[0]!==6&&l[0]!==2)){o=0;continue}if(l[0]===3&&(!S||l[1]>S[0]&&l[1]<S[3])){o.label=l[1];break}if(l[0]===6&&o.label<S[1]){o.label=S[1],S=l;break}if(S&&o.label<S[2]){o.label=S[2],o.ops.push(l);break}S[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(c,o)}catch(a){l=[6,a],x=0}finally{f=S=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([t,s])}}}function pi(c){var e=c.map(function(f){return f[0]});return e.push(c[c.length-1][1]),e}var Xz={lips:pi([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:pi([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:pi([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:pi([[474,475],[475,476],[476,477],[477,474]]),rightEye:pi([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:pi([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:pi([[469,470],[470,471],[471,472],[472,469]]),faceOval:pi([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},Hz=Object.entries(Xz).map(function(c){var e=c[0];return c[1].map(function(f){return[f,e]})}).flat(),C2=new Map(Hz);function Fh(c){for(var e={locationData:{relativeKeypoints:[]}},f=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,S=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER,o=0;o<c.length;++o){var y=c[o];f=Math.min(f,y.x),x=Math.max(x,y.x),S=Math.min(S,y.y),C=Math.max(C,y.y),e.locationData.relativeKeypoints.push({x:y.x,y:y.y})}return e.locationData.relativeBoundingBox={xMin:f,yMin:S,xMax:x,yMax:C,width:x-f,height:C-S},e}var Nl={runtime:"mediapipe",maxFaces:1,refineLandmarks:!1},Yz=function(){function c(e){var f=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new D0.FaceMesh({locateFile:function(x,S){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+x:S+"/"+x}}),this.faceMeshSolution.setOptions({refineLandmarks:e.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:e.maxFaces}),this.faceMeshSolution.onResults(function(x){if(f.height=x.image.height,f.width=x.image.width,f.faces=[],x.multiFaceLandmarks!==null)for(var S=x.multiFaceLandmarks,C=0;C<S.length;C++){var o=f.translateOutput(S[C]);f.faces.push({keypoints:o,box:Fh(o).locationData.relativeBoundingBox})}})}return c.prototype.translateOutput=function(e){var f=this;return e.map(function(x,S){var C={x:x.x*f.width,y:x.y*f.height,z:x.z*f.width},o=C2.get(S);return o!=null&&(C.name=o),C})},c.prototype.estimateFaces=function(e,f){return Hs(this,void 0,void 0,function(){var x,S;return Ys(this,function(C){switch(C.label){case 0:return f&&f.flipHorizontal&&f.flipHorizontal!==this.selfieMode&&(this.selfieMode=f.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Je?(S=ImageData.bind,[4,rg(e)]):[3,2];case 1:return x=new(S.apply(ImageData,[void 0,C.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:x=e,C.label=3;case 3:return e=x,[4,this.faceMeshSolution.send({image:e})];case 4:return C.sent(),[2,this.faces]}})})},c.prototype.dispose=function(){this.faceMeshSolution.close()},c.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},c.prototype.initialize=function(){return this.faceMeshSolution.initialize()},c}();function Kz(c){return Hs(this,void 0,void 0,function(){var e,f;return Ys(this,function(x){switch(x.label){case 0:return e=function(S){if(S==null)return Ss({},Nl);var C=Ss({},S);return C.runtime="mediapipe",C.maxFaces==null&&(C.maxFaces=Nl.maxFaces),C.refineLandmarks==null&&(C.refineLandmarks=Nl.refineLandmarks),C}(c),[4,(f=new Yz(e)).initialize()];case 1:return x.sent(),[2,f]}})})}var Ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jz={};(function(){var c;function e($){var Z=0;return function(){return Z<$.length?{done:!1,value:$[Z++]}:{done:!0}}}var f=typeof Object.defineProperties=="function"?Object.defineProperty:function($,Z,tt){return $==Array.prototype||$==Object.prototype||($[Z]=tt.value),$},x=function($){$=[typeof globalThis=="object"&&globalThis,$,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ml=="object"&&Ml];for(var Z=0;Z<$.length;++Z){var tt=$[Z];if(tt&&tt.Math==Math)return tt}throw Error("Cannot find global object")}(this);function S($,Z){if(Z)t:{var tt=x;$=$.split(".");for(var nt=0;nt<$.length-1;nt++){var ut=$[nt];if(!(ut in tt))break t;tt=tt[ut]}(Z=Z(nt=tt[$=$[$.length-1]]))!=nt&&Z!=null&&f(tt,$,{configurable:!0,writable:!0,value:Z})}}function C($){return($={next:$})[Symbol.iterator]=function(){return this},$}function o($){var Z=typeof Symbol<"u"&&Symbol.iterator&&$[Symbol.iterator];return Z?Z.call($):{next:e($)}}function y($){if(!($ instanceof Array)){$=o($);for(var Z,tt=[];!(Z=$.next()).done;)tt.push(Z.value);$=tt}return $}S("Symbol",function($){function Z(ut,at){this.g=ut,f(this,"description",{configurable:!0,writable:!0,value:at})}if($)return $;Z.prototype.toString=function(){return this.g};var tt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",nt=0;return function ut(at){if(this instanceof ut)throw new TypeError("Symbol is not a constructor");return new Z(tt+(at||"")+"_"+nt++,at)}}),S("Symbol.iterator",function($){if($)return $;$=Symbol("Symbol.iterator");for(var Z="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),tt=0;tt<Z.length;tt++){var nt=x[Z[tt]];typeof nt=="function"&&typeof nt.prototype[$]!="function"&&f(nt.prototype,$,{configurable:!0,writable:!0,value:function(){return C(e(this))}})}return $});var t,s=typeof Object.create=="function"?Object.create:function($){function Z(){}return Z.prototype=$,new Z};if(typeof Object.setPrototypeOf=="function")t=Object.setPrototypeOf;else{var l;t:{var a={};try{a.__proto__={a:!0},l=a.a;break t}catch{}l=!1}t=l?function($,Z){if($.__proto__=Z,$.__proto__!==Z)throw new TypeError($+" is not extensible");return $}:null}var r=t;function i($,Z){if($.prototype=s(Z.prototype),$.prototype.constructor=$,r)r($,Z);else for(var tt in Z)if(tt!="prototype")if(Object.defineProperties){var nt=Object.getOwnPropertyDescriptor(Z,tt);nt&&Object.defineProperty($,tt,nt)}else $[tt]=Z[tt];$.na=Z.prototype}function n(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function h($){if($.l)throw new TypeError("Generator is already running");$.l=!0}function d($,Z){$.j={da:Z,ea:!0},$.g=$.o||$.u}function u($,Z,tt){return $.g=tt,{value:Z}}function p($){this.g=new n,this.h=$}function m($,Z,tt,nt){try{var ut=Z.call($.g.i,tt);if(!(ut instanceof Object))throw new TypeError("Iterator result "+ut+" is not an object");if(!ut.done)return $.g.l=!1,ut;var at=ut.value}catch(ot){return $.g.i=null,d($.g,ot),v($)}return $.g.i=null,nt.call($.g,at),v($)}function v($){for(;$.g.g;)try{var Z=$.h($.g);if(Z)return $.g.l=!1,{value:Z.value,done:!1}}catch(tt){$.g.h=void 0,d($.g,tt)}if($.g.l=!1,$.g.j){if(Z=$.g.j,$.g.j=null,Z.ea)throw Z.da;return{value:Z.return,done:!0}}return{value:void 0,done:!0}}function g($){this.next=function(Z){return h($.g),$.g.i?Z=m($,$.g.i.next,Z,$.g.s):($.g.s(Z),Z=v($)),Z},this.throw=function(Z){return h($.g),$.g.i?Z=m($,$.g.i.throw,Z,$.g.s):(d($.g,Z),Z=v($)),Z},this.return=function(Z){return function(tt,nt){h(tt.g);var ut=tt.g.i;return ut?m(tt,"return"in ut?ut.return:function(at){return{value:at,done:!0}},nt,tt.g.return):(tt.g.return(nt),v(tt))}($,Z)},this[Symbol.iterator]=function(){return this}}function T($){return function(Z){function tt(ut){return Z.next(ut)}function nt(ut){return Z.throw(ut)}return new Promise(function(ut,at){(function ot(dt){dt.done?ut(dt.value):Promise.resolve(dt.value).then(tt,nt).then(ot,at)})(Z.next())})}(new g(new p($)))}n.prototype.s=function($){this.h=$},n.prototype.return=function($){this.j={return:$},this.g=this.u},S("Promise",function($){function Z(ot){this.h=0,this.i=void 0,this.g=[],this.s=!1;var dt=this.j();try{ot(dt.resolve,dt.reject)}catch(Et){dt.reject(Et)}}function tt(){this.g=null}function nt(ot){return ot instanceof Z?ot:new Z(function(dt){dt(ot)})}if($)return $;tt.prototype.h=function(ot){if(this.g==null){this.g=[];var dt=this;this.i(function(){dt.l()})}this.g.push(ot)};var ut=x.setTimeout;tt.prototype.i=function(ot){ut(ot,0)},tt.prototype.l=function(){for(;this.g&&this.g.length;){var ot=this.g;this.g=[];for(var dt=0;dt<ot.length;++dt){var Et=ot[dt];ot[dt]=null;try{Et()}catch(Pt){this.j(Pt)}}}this.g=null},tt.prototype.j=function(ot){this.i(function(){throw ot})},Z.prototype.j=function(){function ot(Pt){return function(Ot){Et||(Et=!0,Pt.call(dt,Ot))}}var dt=this,Et=!1;return{resolve:ot(this.D),reject:ot(this.l)}},Z.prototype.D=function(ot){if(ot===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(ot instanceof Z)this.H(ot);else{t:switch(typeof ot){case"object":var dt=ot!=null;break t;case"function":dt=!0;break t;default:dt=!1}dt?this.A(ot):this.o(ot)}},Z.prototype.A=function(ot){var dt=void 0;try{dt=ot.then}catch(Et){return void this.l(Et)}typeof dt=="function"?this.I(dt,ot):this.o(ot)},Z.prototype.l=function(ot){this.u(2,ot)},Z.prototype.o=function(ot){this.u(1,ot)},Z.prototype.u=function(ot,dt){if(this.h!=0)throw Error("Cannot settle("+ot+", "+dt+"): Promise already settled in state"+this.h);this.h=ot,this.i=dt,this.h===2&&this.G(),this.B()},Z.prototype.G=function(){var ot=this;ut(function(){if(ot.C()){var dt=x.console;dt!==void 0&&dt.error(ot.i)}},1)},Z.prototype.C=function(){if(this.s)return!1;var ot=x.CustomEvent,dt=x.Event,Et=x.dispatchEvent;return Et===void 0||(typeof ot=="function"?ot=new ot("unhandledrejection",{cancelable:!0}):typeof dt=="function"?ot=new dt("unhandledrejection",{cancelable:!0}):(ot=x.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,ot),ot.promise=this,ot.reason=this.i,Et(ot))},Z.prototype.B=function(){if(this.g!=null){for(var ot=0;ot<this.g.length;++ot)at.h(this.g[ot]);this.g=null}};var at=new tt;return Z.prototype.H=function(ot){var dt=this.j();ot.M(dt.resolve,dt.reject)},Z.prototype.I=function(ot,dt){var Et=this.j();try{ot.call(dt,Et.resolve,Et.reject)}catch(Pt){Et.reject(Pt)}},Z.prototype.then=function(ot,dt){function Et(Ht,Qt){return typeof Ht=="function"?function(he){try{Pt(Ht(he))}catch(pe){Ot(pe)}}:Qt}var Pt,Ot,Vt=new Z(function(Ht,Qt){Pt=Ht,Ot=Qt});return this.M(Et(ot,Pt),Et(dt,Ot)),Vt},Z.prototype.catch=function(ot){return this.then(void 0,ot)},Z.prototype.M=function(ot,dt){function Et(){switch(Pt.h){case 1:ot(Pt.i);break;case 2:dt(Pt.i);break;default:throw Error("Unexpected state: "+Pt.h)}}var Pt=this;this.g==null?at.h(Et):this.g.push(Et),this.s=!0},Z.resolve=nt,Z.reject=function(ot){return new Z(function(dt,Et){Et(ot)})},Z.race=function(ot){return new Z(function(dt,Et){for(var Pt=o(ot),Ot=Pt.next();!Ot.done;Ot=Pt.next())nt(Ot.value).M(dt,Et)})},Z.all=function(ot){var dt=o(ot),Et=dt.next();return Et.done?nt([]):new Z(function(Pt,Ot){function Vt(he){return function(pe){Ht[he]=pe,--Qt==0&&Pt(Ht)}}var Ht=[],Qt=0;do Ht.push(void 0),Qt++,nt(Et.value).M(Vt(Ht.length-1),Ot),Et=dt.next();while(!Et.done)})},Z});var w=typeof Object.assign=="function"?Object.assign:function($,Z){for(var tt=1;tt<arguments.length;tt++){var nt=arguments[tt];if(nt)for(var ut in nt)Object.prototype.hasOwnProperty.call(nt,ut)&&($[ut]=nt[ut])}return $};S("Object.assign",function($){return $||w}),S("Object.is",function($){return $||function(Z,tt){return Z===tt?Z!==0||1/Z==1/tt:Z!=Z&&tt!=tt}}),S("Array.prototype.includes",function($){return $||function(Z,tt){var nt=this;nt instanceof String&&(nt=String(nt));var ut=nt.length;for(0>(tt=tt||0)&&(tt=Math.max(tt+ut,0));tt<ut;tt++){var at=nt[tt];if(at===Z||Object.is(at,Z))return!0}return!1}}),S("String.prototype.includes",function($){return $||function(Z,tt){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Z instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Z,tt||0)!==-1}}),S("Array.prototype.keys",function($){return $||function(){return function(Z,tt){Z instanceof String&&(Z+="");var nt=0,ut=!1,at={next:function(){if(!ut&&nt<Z.length){var ot=nt++;return{value:tt(ot,Z[ot]),done:!1}}return ut=!0,{done:!0,value:void 0}}};return at[Symbol.iterator]=function(){return at},at}(this,function(Z){return Z})}});var b=this||self;function E($,Z){$=$.split(".");var tt,nt=b;for(($[0]in nt)||nt.execScript===void 0||nt.execScript("var "+$[0]);$.length&&(tt=$.shift());)$.length||Z===void 0?nt=nt[tt]&&nt[tt]!==Object.prototype[tt]?nt[tt]:nt[tt]={}:nt[tt]=Z}function A(){throw Error("Invalid UTF8")}function R($,Z){return Z=String.fromCharCode.apply(null,Z),$==null?Z:$+Z}var I,P,N=typeof TextDecoder<"u",F=typeof TextEncoder<"u",O={},D=null;function L($){var Z;Z===void 0&&(Z=0),X(),Z=O[Z];for(var tt=Array(Math.floor($.length/3)),nt=Z[64]||"",ut=0,at=0;ut<$.length-2;ut+=3){var ot=$[ut],dt=$[ut+1],Et=$[ut+2],Pt=Z[ot>>2];ot=Z[(3&ot)<<4|dt>>4],dt=Z[(15&dt)<<2|Et>>6],Et=Z[63&Et],tt[at++]=Pt+ot+dt+Et}switch(Pt=0,Et=nt,$.length-ut){case 2:Et=Z[(15&(Pt=$[ut+1]))<<2]||nt;case 1:$=$[ut],tt[at]=Z[$>>2]+Z[(3&$)<<4|Pt>>4]+Et+nt}return tt.join("")}function z($){var Z=$.length,tt=3*Z/4;tt%3?tt=Math.floor(tt):"=.".indexOf($[Z-1])!=-1&&(tt="=.".indexOf($[Z-2])!=-1?tt-2:tt-1);var nt=new Uint8Array(tt),ut=0;return function(at,ot){function dt(Qt){for(;Et<at.length;){var he=at.charAt(Et++),pe=D[he];if(pe!=null)return pe;if(!/^[\s\xa0]*$/.test(he))throw Error("Unknown base64 encoding at char: "+he)}return Qt}X();for(var Et=0;;){var Pt=dt(-1),Ot=dt(0),Vt=dt(64),Ht=dt(64);if(Ht===64&&Pt===-1)break;ot(Pt<<2|Ot>>4),Vt!=64&&(ot(Ot<<4&240|Vt>>2),Ht!=64&&ot(Vt<<6&192|Ht))}}($,function(at){nt[ut++]=at}),ut!==tt?nt.subarray(0,ut):nt}function X(){if(!D){D={};for(var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Z=["+/=","+/","-_=","-_.","-_"],tt=0;5>tt;tt++){var nt=$.concat(Z[tt].split(""));O[tt]=nt;for(var ut=0;ut<nt.length;ut++){var at=nt[ut];D[at]===void 0&&(D[at]=ut)}}}}var H,J=typeof Uint8Array=="function";function G($){return J&&$!=null&&$ instanceof Uint8Array}function k($){if(this.L=$,$!==null&&$.length===0)throw Error("ByteString should be constructed with non-empty values")}var M=typeof Uint8Array.prototype.slice=="function",B=0;function U($,Z){return Error("Invalid wire type: "+$+" (at position "+Z+")")}function W(){return Error("Failed to read varint, encoding is invalid.")}function K($,Z){Z=(Z=Z===void 0?{}:Z).v!==void 0&&Z.v,this.h=null,this.g=this.i=this.j=0,this.v=Z,$&&q(this,$)}function q($,Z){$.h=function(tt,nt){if(tt.constructor===Uint8Array)return tt;if(tt.constructor===ArrayBuffer)return new Uint8Array(tt);if(tt.constructor===Array)return new Uint8Array(tt);if(tt.constructor===String)return z(tt);if(tt.constructor===k)return!nt&&(nt=tt.L)&&nt.constructor===Uint8Array?nt:(nt=(nt=tt.L)==null||G(nt)?nt:typeof nt=="string"?z(nt):null,(tt=tt.L=nt)?new Uint8Array(tt):H||(H=new Uint8Array(0)));if(tt instanceof Uint8Array)return new Uint8Array(tt.buffer,tt.byteOffset,tt.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(Z,$.v),$.j=0,$.i=$.h.length,$.g=$.j}function _($){if($.g>$.i)throw Error("Tried to read past the end of the data "+$.g+" > "+$.i)}function rt($){var Z=$.h,tt=Z[$.g],nt=127&tt;if(128>tt)return $.g+=1,_($),nt;if(nt|=(127&(tt=Z[$.g+1]))<<7,128>tt)return $.g+=2,_($),nt;if(nt|=(127&(tt=Z[$.g+2]))<<14,128>tt)return $.g+=3,_($),nt;if(nt|=(127&(tt=Z[$.g+3]))<<21,128>tt)return $.g+=4,_($),nt;if(tt=Z[$.g+4],$.g+=5,nt|=(15&tt)<<28,128>tt)return _($),nt;if(128<=Z[$.g++]&&128<=Z[$.g++]&&128<=Z[$.g++]&&128<=Z[$.g++]&&128<=Z[$.g++])throw W();return _($),nt}K.prototype.reset=function(){this.g=this.j};var ft=[];function mt(){this.g=[]}function vt($,Z){for(;127<Z;)$.g.push(127&Z|128),Z>>>=7;$.g.push(Z)}function yt($){var Z={},tt=Z.W!==void 0&&Z.W;this.l={v:Z.v!==void 0&&Z.v},this.W=tt,Z=this.l,ft.length?(tt=ft.pop(),Z&&(tt.v=Z.v),$&&q(tt,$),$=tt):$=new K($,Z),this.g=$,this.j=this.g.g,this.h=this.i=-1}function xt($){var Z=$.g;if(Z.g==Z.i)return!1;$.j=$.g.g;var tt=rt($.g)>>>0;if(Z=tt>>>3,!(0<=(tt&=7)&&5>=tt))throw U(tt,$.j);if(1>Z)throw Error("Invalid field number: "+Z+" (at position "+$.j+")");return $.i=Z,$.h=tt,!0}function It($){switch($.h){case 0:if($.h!=0)It($);else t:{for(var Z=($=$.g).g,tt=Z+10;Z<tt;)if(!(128&$.h[Z++])){$.g=Z,_($);break t}throw W()}break;case 1:($=$.g).g+=8,_($);break;case 2:$.h!=2?It($):(Z=rt($.g)>>>0,($=$.g).g+=Z,_($));break;case 5:($=$.g).g+=4,_($);break;case 3:for(Z=$.i;;){if(!xt($))throw Error("Unmatched start-group tag: stream EOF");if($.h==4){if($.i!=Z)throw Error("Unmatched end-group tag");break}It($)}break;default:throw U($.h,$.j)}}mt.prototype.length=function(){return this.g.length},mt.prototype.end=function(){var $=this.g;return this.g=[],$},yt.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var $t=[];function Zt(){this.i=[],this.h=0,this.g=new mt}function Bt($,Z){Z.length!==0&&($.i.push(Z),$.h+=Z.length)}var At=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function kt($,Z){Object.isFrozen($)||(At?$[At]|=Z:$.N!==void 0?$.N|=Z:Object.defineProperties($,{N:{value:Z,configurable:!0,writable:!0,enumerable:!1}}))}function Ut($){var Z;return(Z=At?$[At]:$.N)==null?0:Z}function ee($){return kt($,1),$}function te($){return!!Array.isArray($)&&!!(2&Ut($))}function fe($){if(!Array.isArray($))throw Error("cannot mark non-array as immutable");kt($,2)}function ae($){return $!==null&&typeof $=="object"&&!Array.isArray($)&&$.constructor===Object}var le=Object.freeze(ee([]));function re($){if(te($.m))throw Error("Cannot mutate an immutable Message")}var we,Se=typeof Symbol<"u"&&Symbol.hasInstance!==void 0;function Me($){return{value:$,configurable:!1,writable:!1,enumerable:!1}}function ce($,Z,tt){return Z===-1?null:Z>=$.i?$.g?$.g[Z]:void 0:tt!==void 0&&tt&&$.g&&(tt=$.g[Z])!=null?tt:$.m[Z+$.h]}function se($,Z,tt,nt){nt=nt!==void 0&&nt,re($),Z<$.i&&!nt?$.m[Z+$.h]=tt:($.g||($.g=$.m[$.i+$.h]={}))[Z]=tt}function Ae($,Z,tt,nt){tt=tt===void 0||tt;var ut=ce($,Z,nt=nt!==void 0&&nt);return ut==null&&(ut=le),te($.m)?tt&&(fe(ut),Object.freeze(ut)):(ut===le||te(ut))&&se($,Z,ut=ee(ut.slice()),nt),ut}function Le($,Z,tt){return($=($=ce($,Z))==null?$:+$)==null?tt===void 0?0:tt:$}function nn($,Z,tt,nt){$.j||($.j={});var ut=te($.m),at=$.j[tt];if(!at){nt=Ae($,tt,!0,nt!==void 0&&nt),at=[],ut=ut||te(nt);for(var ot=0;ot<nt.length;ot++)at[ot]=new Z(nt[ot]),ut&&fe(at[ot].m);ut&&(fe(at),Object.freeze(at)),$.j[tt]=at}return at}function ge($,Z,tt,nt,ut){var at=at!==void 0&&at;return re($),at=nn($,tt,Z,at),tt=nt||new tt,$=Ae($,Z),ut!=null?(at.splice(ut,0,tt),$.splice(ut,0,tt.m)):(at.push(tt),$.push(tt.m)),tt}function Xe($,Z){return($=ce($,Z))==null?0:$}function Qn($,Z){return($=ce($,Z))==null?"":$}function Rn($){var Z=Os;return ue($,Z=Z===void 0?wt:Z)}function tn($,Z){if($!=null){if(Array.isArray($))$=ue($,Z);else if(ae($)){var tt,nt={};for(tt in $)nt[tt]=tn($[tt],Z);$=nt}else $=Z($);return $}}function ue($,Z){for(var tt=$.slice(),nt=0;nt<tt.length;nt++)tt[nt]=tn(tt[nt],Z);return Array.isArray($)&&1&Ut($)&&ee(tt),tt}function Os($){return $&&typeof $=="object"&&$.toJSON?$.toJSON():($=function(Z){switch(typeof Z){case"number":return isFinite(Z)?Z:String(Z);case"object":if(Z&&!Array.isArray(Z)){if(G(Z))return L(Z);if(Z instanceof k){var tt=Z.L;return tt=tt==null||typeof tt=="string"?tt:J&&tt instanceof Uint8Array?L(tt):null,(Z.L=tt)||""}}}return Z}($),Array.isArray($)?Rn($):$)}function wt($){return G($)?new Uint8Array($):$}function Dt($,Z,tt){$||($=we),we=null;var nt=this.constructor.h;if($||($=nt?[nt]:[]),this.h=(nt?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=$,$=(nt=this.m.length)-1,nt&&ae(nt=this.m[$])?(this.i=$-this.h,this.g=nt):Z!==void 0&&-1<Z?(this.i=Math.max(Z,$+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,tt)for(Z=0;Z<tt.length;Z++)if(($=tt[Z])<this.i)$+=this.h,(nt=this.m[$])?Array.isArray(nt)&&ee(nt):this.m[$]=le;else{var ut=(nt=this.g||(this.g=this.m[this.i+this.h]={}))[$];ut?Array.isArray(ut)&&ee(ut):nt[$]=le}}function _t(){Dt.apply(this,arguments)}if(Dt.prototype.toJSON=function(){return Rn(this.m)},Dt.prototype.toString=function(){return this.m.toString()},i(_t,Dt),Se){var zt={};Object.defineProperties(_t,(zt[Symbol.hasInstance]=Me(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),zt))}function Re($,Z,tt){if(tt){var nt,ut={};for(nt in tt){var at=tt[nt],ot=at.ha;ot||(ut.F=at.la||at.fa.P,at.aa?(ut.U=Ds(at.aa),ot=function(dt){return function(Et,Pt,Ot){return dt.F(Et,Pt,Ot,dt.U)}}(ut)):at.ca?(ut.T=Jn(at.X.g,at.ca),ot=function(dt){return function(Et,Pt,Ot){return dt.F(Et,Pt,Ot,dt.T)}}(ut)):ot=ut.F,at.ha=ot),ot(Z,$,at.X),ut={F:ut.F,U:ut.U,T:ut.T}}}(function(dt,Et){if(Et=Et.ba){Bt(dt,dt.g.end());for(var Pt=0;Pt<Et.length;Pt++)Bt(dt,Et[Pt])}})(Z,$)}var xe=Symbol();function ie($,Z,tt){return $[xe]||($[xe]=function(nt,ut){return Z(nt,ut,tt)})}function oe($){var Z=$[xe];if(!Z){var tt=Ar($);Z=function(nt,ut){return ai(nt,ut,tt)},$[xe]=Z}return Z}function He($){var Z=function(ut){var at=ut.aa;return at?oe(at):(at=ut.ka)?ie(ut.X.g,at,ut.ca):void 0}($),tt=$.X,nt=$.fa.O;return Z?function(ut,at){return nt(ut,at,tt,Z)}:function(ut,at){return nt(ut,at,tt)}}function Pe($,Z,tt,nt,ut,at){var ot=0;for(($=$()).length&&typeof $[0]!="number"&&(tt(Z,$[0]),ot++);ot<$.length;){tt=$[ot++];for(var dt=ot+1;dt<$.length&&typeof $[dt]!="number";)dt++;var Et=$[ot++];switch(dt-=ot){case 0:nt(Z,tt,Et);break;case 1:nt(Z,tt,Et,$[ot++]);break;case 2:ut(Z,tt,Et,$[ot++],$[ot++]);break;case 3:dt=$[ot++];var Pt=$[ot++],Ot=$[ot++];Array.isArray(Ot)?ut(Z,tt,Et,dt,Pt,Ot):at(Z,tt,Et,dt,Pt,Ot);break;case 4:at(Z,tt,Et,$[ot++],$[ot++],$[ot++],$[ot++]);break;default:throw Error("unexpected number of binary field arguments: "+dt)}}return Z}var sn=Symbol();function Ds($){var Z=$[sn];if(!Z){var tt=si($);Z=function(nt,ut){return Gs(nt,ut,tt)},$[sn]=Z}return Z}function Jn($,Z){var tt=$[sn];return tt||(tt=function(nt,ut){return Re(nt,ut,Z)},$[sn]=tt),tt}var Ls=Symbol();function Ge($,Z){$.push(Z)}function qn($,Z,tt){$.push(Z,tt.P)}function Bs($,Z,tt,nt,ut){var at=Ds(ut),ot=tt.P;$.push(Z,function(dt,Et,Pt){return ot(dt,Et,Pt,nt,at)})}function br($,Z,tt,nt,ut,at){var ot=Jn(nt,at),dt=tt.P;$.push(Z,function(Et,Pt,Ot){return dt(Et,Pt,Ot,nt,ot)})}function si($){var Z=$[Ls];return Z||Pe($,$[Ls]=[],Ge,qn,Bs,br)}var ii=Symbol();function ds($,Z){$[0]=Z}function da($,Z,tt,nt){var ut=tt.O;$[Z]=nt?function(at,ot,dt){return ut(at,ot,dt,nt)}:ut}function $s($,Z,tt,nt,ut,at){var ot=tt.O,dt=oe(ut);$[Z]=function(Et,Pt,Ot){return ot(Et,Pt,Ot,nt,dt,at)}}function ri($,Z,tt,nt,ut,at,ot){var dt=tt.O,Et=ie(nt,ut,at);$[Z]=function(Pt,Ot,Vt){return dt(Pt,Ot,Vt,nt,Et,ot)}}function Ar($){var Z=$[ii];return Z||Pe($,$[ii]={},ds,da,$s,ri)}function ai($,Z,tt){for(;xt(Z)&&Z.h!=4;){var nt=Z.i,ut=tt[nt];if(!ut){var at=tt[0];at&&(at=at[nt])&&(ut=tt[nt]=He(at))}if(!(ut&&ut(Z,$,nt)||(ut=Z,nt=$,at=ut.j,It(ut),ut.W))){var ot=ut.g.h;ut=at===(ut=ut.g.g)?H||(H=new Uint8Array(0)):M?ot.slice(at,ut):new Uint8Array(ot.subarray(at,ut)),(at=nt.ba)?at.push(ut):nt.ba=[ut]}}return $}function Bi($,Z,tt){if($t.length){var nt=$t.pop();$&&(q(nt.g,$),nt.i=-1,nt.h=-1),$=nt}else $=new yt($);try{return ai(new Z,$,Ar(tt))}finally{(Z=$.g).h=null,Z.j=0,Z.i=0,Z.g=0,Z.v=!1,$.i=-1,$.h=-1,100>$t.length&&$t.push($)}}function Gs($,Z,tt){for(var nt=tt.length,ut=nt%2==1,at=ut?1:0;at<nt;at+=2)(0,tt[at+1])(Z,$,tt[at]);Re($,Z,ut?tt[0]:void 0)}function Us($,Z){var tt=new Zt;Gs($,tt,si(Z)),Bt(tt,tt.g.end()),$=new Uint8Array(tt.h);for(var nt=(Z=tt.i).length,ut=0,at=0;at<nt;at++){var ot=Z[at];$.set(ot,ut),ut+=ot.length}return tt.i=[$],$}function bs($,Z){return{O:$,P:Z}}var In=bs(function($,Z,tt){if($.h!==5)return!1;var nt=($=$.g).h[$.g],ut=$.h[$.g+1],at=$.h[$.g+2],ot=$.h[$.g+3];return $.g+=4,_($),$=2*((ut=(nt<<0|ut<<8|at<<16|ot<<24)>>>0)>>31)+1,nt=ut>>>23&255,ut&=8388607,se(Z,tt,nt==255?ut?NaN:1/0*$:nt==0?$*Math.pow(2,-149)*ut:$*Math.pow(2,nt-150)*(ut+Math.pow(2,23))),!0},function($,Z,tt){if((Z=ce(Z,tt))!=null){vt($.g,8*tt+5),$=$.g;var nt=Z;(nt=(tt=0>nt?1:0)?-nt:nt)===0?0<1/nt?B=0:B=2147483648:isNaN(nt)?B=2147483647:34028234663852886e22<nt?B=(tt<<31|2139095040)>>>0:11754943508222875e-54>nt?(nt=Math.round(nt/Math.pow(2,-149)),B=(tt<<31|nt)>>>0):(Z=Math.floor(Math.log(nt)/Math.LN2),nt*=Math.pow(2,-Z),16777216<=(nt=Math.round(8388608*nt))&&++Z,B=(tt<<31|Z+127<<23|8388607&nt)>>>0),tt=B,$.g.push(tt>>>0&255),$.g.push(tt>>>8&255),$.g.push(tt>>>16&255),$.g.push(tt>>>24&255)}}),As=bs(function($,Z,tt){if($.h!==0)return!1;for(var nt=$.g,ut=128,at=0,ot=$=0;4>ot&&128<=ut;ot++)ut=nt.h[nt.g++],_(nt),at|=(127&ut)<<7*ot;if(128<=ut&&(ut=nt.h[nt.g++],_(nt),at|=(127&ut)<<28,$|=(127&ut)>>4),128<=ut)for(ot=0;5>ot&&128<=ut;ot++)ut=nt.h[nt.g++],_(nt),$|=(127&ut)<<7*ot+3;if(!(128>ut))throw W();return nt=at>>>0,($=2147483648&(ut=$>>>0))&&(ut=~ut>>>0,(nt=1+~nt>>>0)==0&&(ut=ut+1>>>0)),nt=4294967296*ut+(nt>>>0),se(Z,tt,$?-nt:nt),!0},function($,Z,tt){if((Z=ce(Z,tt))!=null&&Z!=null){vt($.g,8*tt),$=$.g;var nt=Z;for(tt=0>nt,Z=(nt=Math.abs(nt))>>>0,nt=Math.floor((nt-Z)/4294967296),nt>>>=0,tt&&(nt=~nt>>>0,4294967295<(Z=1+(~Z>>>0))&&(Z=0,4294967295<++nt&&(nt=0))),tt=B=Z,Z=nt;0<Z||127<tt;)$.g.push(127&tt|128),tt=(tt>>>7|Z<<25)>>>0,Z>>>=7;$.g.push(tt)}}),$i=bs(function($,Z,tt){return $.h===0&&(se(Z,tt,rt($.g)),!0)},function($,Z,tt){if((Z=ce(Z,tt))!=null&&Z!=null)if(vt($.g,8*tt),$=$.g,0<=(tt=Z))vt($,tt);else{for(Z=0;9>Z;Z++)$.g.push(127&tt|128),tt>>=7;$.g.push(1)}}),Rr=bs(function($,Z,tt){if($.h!==2)return!1;var nt,ut=rt($.g)>>>0,at=($=$.g).g;if($.g+=ut,_($),$=$.h,N)(nt=I)||(nt=I=new TextDecoder("utf-8",{fatal:!0})),nt=nt.decode($.subarray(at,at+ut));else{ut=at+ut;for(var ot,dt,Et,Pt=[],Ot=null;at<ut;)128>(ot=$[at++])?Pt.push(ot):224>ot?at>=ut?A():(dt=$[at++],194>ot||(192&dt)!=128?(at--,A()):Pt.push((31&ot)<<6|63&dt)):240>ot?at>=ut-1?A():(192&(dt=$[at++]))!=128||ot===224&&160>dt||ot===237&&160<=dt||(192&(nt=$[at++]))!=128?(at--,A()):Pt.push((15&ot)<<12|(63&dt)<<6|63&nt):244>=ot?at>=ut-2?A():(192&(dt=$[at++]))!=128||dt-144+(ot<<28)>>30||(192&(nt=$[at++]))!=128||(192&(Et=$[at++]))!=128?(at--,A()):(ot=(7&ot)<<18|(63&dt)<<12|(63&nt)<<6|63&Et,ot-=65536,Pt.push(55296+(ot>>10&1023),56320+(1023&ot))):A(),8192<=Pt.length&&(Ot=R(Ot,Pt),Pt.length=0);nt=R(Ot,Pt)}return se(Z,tt,nt),!0},function($,Z,tt){if((Z=ce(Z,tt))!=null){var nt=!1;if(nt=nt!==void 0&&nt,F){if(nt&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(Z))throw Error("Found an unpaired surrogate");Z=(P||(P=new TextEncoder)).encode(Z)}else{for(var ut=0,at=new Uint8Array(3*Z.length),ot=0;ot<Z.length;ot++){var dt=Z.charCodeAt(ot);if(128>dt)at[ut++]=dt;else{if(2048>dt)at[ut++]=dt>>6|192;else{if(55296<=dt&&57343>=dt){if(56319>=dt&&ot<Z.length){var Et=Z.charCodeAt(++ot);if(56320<=Et&&57343>=Et){dt=1024*(dt-55296)+Et-56320+65536,at[ut++]=dt>>18|240,at[ut++]=dt>>12&63|128,at[ut++]=dt>>6&63|128,at[ut++]=63&dt|128;continue}ot--}if(nt)throw Error("Found an unpaired surrogate");dt=65533}at[ut++]=dt>>12|224,at[ut++]=dt>>6&63|128}at[ut++]=63&dt|128}}Z=at.subarray(0,ut)}vt($.g,8*tt+2),vt($.g,Z.length),Bt($,$.g.end()),Bt($,Z)}}),Gi=bs(function($,Z,tt,nt,ut){if($.h!==2)return!1;Z=ge(Z,tt,nt),tt=$.g.i,nt=rt($.g)>>>0;var at=$.g.g+nt,ot=at-tt;if(0>=ot&&($.g.i=at,ut(Z,$),ot=at-$.g.g),ot)throw Error("Message parsing ended unexpectedly. Expected to read "+nt+" bytes, instead read "+(nt-ot)+" bytes, either the data ended unexpectedly or the message misreported its own length");return $.g.g=at,$.g.i=tt,!0},function($,Z,tt,nt,ut){if((Z=nn(Z,nt,tt))!=null)for(nt=0;nt<Z.length;nt++){var at=$;vt(at.g,8*tt+2);var ot=at.g.end();Bt(at,ot),ot.push(at.h),at=ot,ut(Z[nt],$),ot=$;var dt=at.pop();for(dt=ot.h+ot.g.length()-dt;127<dt;)at.push(127&dt|128),dt>>>=7,ot.h++;at.push(dt),ot.h++}});function Sn(){_t.apply(this,arguments)}if(i(Sn,_t),Se){var Ir={};Object.defineProperties(Sn,(Ir[Symbol.hasInstance]=Me(Object[Symbol.hasInstance]),Ir))}function _n($){Sn.call(this,$)}function Ui(){return[1,$i,2,In,3,Rr,4,Rr]}function Vi($){Sn.call(this,$,-1,Pr)}function pa(){return[1,Gi,_n,Ui]}i(_n,Sn),i(Vi,Sn),Vi.prototype.addClassification=function($,Z){return ge(this,1,_n,$,Z),this};var Pr=[1];function ps($){Sn.call(this,$)}function Fr(){return[1,In,2,In,3,In,4,In,5,In]}function Nr($){Sn.call(this,$,-1,va)}function ma(){return[1,Gi,ps,Fr]}i(ps,Sn),i(Nr,Sn);var va=[1];function oi($){Sn.call(this,$)}function Rs(){return[1,In,2,In,3,In,4,In,5,In,6,As]}i(oi,Sn);var ui=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],li=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],hi=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Vs=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],fi=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],zi=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],ci=[].concat(y(ui),y(li),y(hi),y(Vs),y(fi),y(zi));function V($,Z,tt){if(tt=$.createShader(tt===0?$.VERTEX_SHADER:$.FRAGMENT_SHADER),$.shaderSource(tt,Z),$.compileShader(tt),!$.getShaderParameter(tt,$.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+$.getShaderInfoLog(tt));return tt}function j($){return nn($,_n,1).map(function(Z){return{index:Xe(Z,1),ga:Le(Z,2),label:ce(Z,3)!=null?Qn(Z,3):void 0,displayName:ce(Z,4)!=null?Qn(Z,4):void 0}})}function Q($){return{x:Le($,1),y:Le($,2),z:Le($,3),visibility:ce($,4)!=null?Le($,4):void 0}}function ht($,Z){this.h=$,this.g=Z,this.l=0}function gt($,Z,tt){return function(nt,ut){var at=nt.g;if(nt.o===void 0){var ot=V(at,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),dt=V(at,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Et=at.createProgram();if(at.attachShader(Et,ot),at.attachShader(Et,dt),at.linkProgram(Et),!at.getProgramParameter(Et,at.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+at.getProgramInfoLog(Et));ot=nt.o=Et,at.useProgram(ot),dt=at.getUniformLocation(ot,"sampler0"),nt.j={K:at.getAttribLocation(ot,"aVertex"),J:at.getAttribLocation(ot,"aTex"),ma:dt},nt.u=at.createBuffer(),at.bindBuffer(at.ARRAY_BUFFER,nt.u),at.enableVertexAttribArray(nt.j.K),at.vertexAttribPointer(nt.j.K,2,at.FLOAT,!1,0,0),at.bufferData(at.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),at.STATIC_DRAW),at.bindBuffer(at.ARRAY_BUFFER,null),nt.s=at.createBuffer(),at.bindBuffer(at.ARRAY_BUFFER,nt.s),at.enableVertexAttribArray(nt.j.J),at.vertexAttribPointer(nt.j.J,2,at.FLOAT,!1,0,0),at.bufferData(at.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),at.STATIC_DRAW),at.bindBuffer(at.ARRAY_BUFFER,null),at.uniform1i(dt,0)}ot=nt.j,at.useProgram(nt.o),at.canvas.width=ut.width,at.canvas.height=ut.height,at.viewport(0,0,ut.width,ut.height),at.activeTexture(at.TEXTURE0),nt.h.bindTexture2d(ut.glName),at.enableVertexAttribArray(ot.K),at.bindBuffer(at.ARRAY_BUFFER,nt.u),at.vertexAttribPointer(ot.K,2,at.FLOAT,!1,0,0),at.enableVertexAttribArray(ot.J),at.bindBuffer(at.ARRAY_BUFFER,nt.s),at.vertexAttribPointer(ot.J,2,at.FLOAT,!1,0,0),at.bindFramebuffer(at.DRAW_FRAMEBUFFER?at.DRAW_FRAMEBUFFER:at.FRAMEBUFFER,null),at.clearColor(0,0,0,0),at.clear(at.COLOR_BUFFER_BIT),at.colorMask(!0,!0,!0,!0),at.drawArrays(at.TRIANGLE_FAN,0,4),at.disableVertexAttribArray(ot.K),at.disableVertexAttribArray(ot.J),at.bindBuffer(at.ARRAY_BUFFER,null),nt.h.bindTexture2d(0)}($,Z),typeof $.g.canvas.transferToImageBitmap=="function"?Promise.resolve($.g.canvas.transferToImageBitmap()):tt?Promise.resolve($.g.canvas):typeof createImageBitmap=="function"?createImageBitmap($.g.canvas):($.i===void 0&&($.i=document.createElement("canvas")),new Promise(function(nt){$.i.height=$.g.canvas.height,$.i.width=$.g.canvas.width,$.i.getContext("2d",{}).drawImage($.g.canvas,0,0,$.g.canvas.width,$.g.canvas.height),nt($.i)}))}function Rt($){this.g=$}var Ct=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function et($,Z){return Z+$}function lt($,Z){window[$]=Z}function Tt($){if(this.g=$,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=$&&$.locateFile||et,typeof window=="object")var Z=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if(typeof location>"u")throw Error("solutions can only be loaded on a web page or in a web worker");Z=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=Z,$.options)for(var tt=(Z=o(Object.keys($.options))).next();!tt.done;tt=Z.next()){tt=tt.value;var nt=$.options[tt].default;nt!==void 0&&(this.j[tt]=typeof nt=="function"?nt():nt)}}function Lt($){var Z,tt,nt,ut,at,ot,dt,Et,Pt,Ot,Vt;return T(function(Ht){switch(Ht.g){case 1:return $.Z?(Z=$.g.files===void 0?[]:typeof $.g.files=="function"?$.g.files($.j):$.g.files,u(Ht,T(function(Qt){switch(Qt.g){case 1:return Qt.o=2,u(Qt,WebAssembly.instantiate(Ct),4);case 4:Qt.g=3,Qt.o=0;break;case 2:return Qt.o=0,Qt.j=null,Qt.return(!1);case 3:return Qt.return(!0)}}),2)):Ht.return();case 2:if(tt=Ht.h,typeof window=="object")return lt("createMediapipeSolutionsWasm",{locateFile:$.locateFile}),lt("createMediapipeSolutionsPackedAssets",{locateFile:$.locateFile}),ot=Z.filter(function(Qt){return Qt.data!==void 0}),dt=Z.filter(function(Qt){return Qt.data===void 0}),Et=Promise.all(ot.map(function(Qt){var he=Kt($,Qt.url);if(Qt.path!==void 0){var pe=Qt.path;he=he.then(function(Be){return $.overrideFile(pe,Be),Promise.resolve(Be)})}return he})),Pt=Promise.all(dt.map(function(Qt){return Qt.simd===void 0||Qt.simd&&tt||!Qt.simd&&!tt?function(he){var pe=document.createElement("script");return pe.setAttribute("src",he),pe.setAttribute("crossorigin","anonymous"),new Promise(function(Be){pe.addEventListener("load",function(){Be()},!1),pe.addEventListener("error",function(){Be()},!1),document.body.appendChild(pe)})}($.locateFile(Qt.url,$.$)):Promise.resolve()})).then(function(){var Qt,he,pe;return T(function(Be){if(Be.g==1)return Qt=window.createMediapipeSolutionsWasm,he=window.createMediapipeSolutionsPackedAssets,pe=$,u(Be,Qt(he),2);pe.h=Be.h,Be.g=0})}),Ot=T(function(Qt){return $.g.graph&&$.g.graph.url?Qt=u(Qt,Kt($,$.g.graph.url),0):(Qt.g=0,Qt=void 0),Qt}),u(Ht,Promise.all([Pt,Et,Ot]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return nt=Z.filter(function(Qt){return Qt.simd===void 0||Qt.simd&&tt||!Qt.simd&&!tt}).map(function(Qt){return $.locateFile(Qt.url,$.$)}),importScripts.apply(null,y(nt)),ut=$,u(Ht,createMediapipeSolutionsWasm(Module),6);case 6:ut.h=Ht.h,$.l=new OffscreenCanvas(1,1),$.h.canvas=$.l,at=$.h.GL.createContext($.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),$.h.GL.makeContextCurrent(at),Ht.g=4;break;case 7:if($.l=document.createElement("canvas"),!(Vt=$.l.getContext("webgl2",{}))&&!(Vt=$.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),Ht.return();$.G=Vt,$.h.canvas=$.l,$.h.createContext($.l,!0,!0,{});case 4:$.i=new $.h.SolutionWasm,$.Z=!1,Ht.g=0}})}function Kt($,Z){var tt,nt;return T(function(ut){return Z in $.H?ut.return($.H[Z]):(tt=$.locateFile(Z,""),nt=fetch(tt).then(function(at){return at.arrayBuffer()}),$.H[Z]=nt,ut.return(nt))})}function Xt($,Z,tt){var nt,ut,at,ot,dt,Et,Pt,Ot,Vt,Ht,Qt,he,pe,Be;return T(function(Ue){switch(Ue.g){case 1:if(!tt)return Ue.return(Z);for(nt={},ut=0,at=o(Object.keys(tt)),ot=at.next();!ot.done;ot=at.next())dt=ot.value,typeof(Et=tt[dt])!="string"&&Et.type==="texture"&&Z[Et.stream]!==void 0&&++ut;1<ut&&($.I=!1),Pt=o(Object.keys(tt)),ot=Pt.next();case 2:if(ot.done){Ue.g=4;break}if(Ot=ot.value,typeof(Vt=tt[Ot])=="string")return pe=nt,Be=Ot,u(Ue,function(ki,bd,Mr){var oo;return T(function(gl){return typeof Mr=="number"||Mr instanceof Uint8Array||Mr instanceof ki.h.Uint8BlobList?gl.return(Mr):Mr instanceof ki.h.Texture2dDataOut?((oo=ki.u[bd])||(oo=new ht(ki.h,ki.G),ki.u[bd]=oo),gl.return(gt(oo,Mr,ki.I))):gl.return(void 0)})}($,Ot,Z[Vt]),14);if(Ht=Z[Vt.stream],Vt.type==="detection_list"){if(Ht){for(var Pn=Ht.getRectList(),ts=Ht.getLandmarksList(),$n=Ht.getClassificationsList(),Fe=[],gn=0;gn<Pn.size();++gn){var di=Bi(Pn.get(gn),oi,Rs);di={boundingBox:{xCenter:Le(di,1),yCenter:Le(di,2),height:Le(di,3),width:Le(di,4),rotation:Le(di,5,0),rectId:Xe(di,6)},landmarks:nn(Bi(ts.get(gn),Nr,ma),ps,1).map(Q),V:j(Bi($n.get(gn),Vi,pa))},Fe.push(di)}Pn=Fe}else Pn=[];nt[Ot]=Pn,Ue.g=7;break}if(Vt.type==="proto_list"){if(Ht){for(Pn=Array(Ht.size()),ts=0;ts<Ht.size();ts++)Pn[ts]=Ht.get(ts);Ht.delete()}else Pn=[];nt[Ot]=Pn,Ue.g=7;break}if(Ht===void 0){Ue.g=3;break}if(Vt.type==="float_list"){nt[Ot]=Ht,Ue.g=7;break}if(Vt.type==="proto"){nt[Ot]=Ht,Ue.g=7;break}if(Vt.type!=="texture")throw Error("Unknown output config type: '"+Vt.type+"'");return(Qt=$.u[Ot])||(Qt=new ht($.h,$.G),$.u[Ot]=Qt),u(Ue,gt(Qt,Ht,$.I),13);case 13:he=Ue.h,nt[Ot]=he;case 7:Vt.transform&&nt[Ot]&&(nt[Ot]=Vt.transform(nt[Ot])),Ue.g=3;break;case 14:pe[Be]=Ue.h;case 3:ot=Pt.next(),Ue.g=2;break;case 4:return Ue.return(nt)}})}function Mt($,Z){for(var tt=Z.name||"$",nt=[].concat(y(Z.wants)),ut=new $.h.StringList,at=o(Z.wants),ot=at.next();!ot.done;ot=at.next())ut.push_back(ot.value);at=$.h.PacketListener.implement({onResults:function(dt){for(var Et={},Pt=0;Pt<Z.wants.length;++Pt)Et[nt[Pt]]=dt.get(Pt);var Ot=$.listeners[tt];Ot&&($.D=Xt($,Et,Z.outs).then(function(Vt){Vt=Ot(Vt);for(var Ht=0;Ht<Z.wants.length;++Ht){var Qt=Et[nt[Ht]];typeof Qt=="object"&&Qt.hasOwnProperty&&Qt.hasOwnProperty("delete")&&Qt.delete()}Vt&&($.D=Vt)}))}}),$.i.attachMultiListener(ut,at),ut.delete()}function Ft($){var Z=this;$=$||{};var tt={url:"face_detection_short.binarypb"},nt={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Tt({locateFile:$.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:tt,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window=="object"&&window.navigator!==void 0&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(ut){var at,ot,dt,Et,Pt;return T(function(Ot){switch(Ot.g){case 1:at=o(ut==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),ot=at.next();case 2:if(ot.done){Ot.g=4;break}return dt=ot.value,Et="third_party/mediapipe/modules/face_detection/"+dt,u(Ot,Kt(Z.g,dt),5);case 5:Pt=Ot.h,Z.g.overrideFile(Et,Pt),ot=at.next(),Ot.g=2;break;case 4:return tt.url=ut==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",nt.graphOptionXref.calculatorName=ut==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",Ot.return(!0)}})}},minDetectionConfidence:nt}})}(c=Tt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},c.reset=function(){var $=this;return T(function(Z){$.i&&($.i.reset(),$.o={},$.u={}),Z.g=0})},c.setOptions=function($,Z){var tt=this;if(Z=Z||this.g.options){for(var nt=[],ut=[],at={},ot=o(Object.keys($)),dt=ot.next();!dt.done;at={R:at.R,S:at.S},dt=ot.next()){var Et=dt.value;Et in this.j&&this.j[Et]===$[Et]||(this.j[Et]=$[Et],(dt=Z[Et])!==void 0&&(dt.onChange&&(at.R=dt.onChange,at.S=$[Et],nt.push(function(Pt){return function(){return T(function(Ot){if(Ot.g==1)return u(Ot,Pt.R(Pt.S),2);Ot.h===!0&&(tt.s=!0),Ot.g=0})}}(at))),dt.graphOptionXref&&(Et={valueNumber:dt.type===1?$[Et]:0,valueBoolean:dt.type===0&&$[Et],valueString:dt.type===2?$[Et]:""},dt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),dt.graphOptionXref),Et),ut.push(dt))))}nt.length===0&&ut.length===0||(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(ut),this.A=(this.A===void 0?[]:this.A).concat(nt))}},c.initialize=function(){var $=this;return T(function(Z){return Z.g==1?u(Z,Lt($),2):Z.g!=3?u(Z,function(tt){var nt,ut,at,ot,dt,Et,Pt,Ot;return T(function(Vt){if(Vt.g==1)return tt.g.graph&&tt.g.graph.url&&tt.Y===tt.g.graph.url?Vt.return():(tt.s=!0,tt.g.graph&&tt.g.graph.url?(tt.Y=tt.g.graph.url,u(Vt,Kt(tt,tt.g.graph.url),3)):void(Vt.g=2));for(Vt.g!=2&&(nt=Vt.h,tt.i.loadGraph(nt)),ut=o(Object.keys(tt.C)),at=ut.next();!at.done;at=ut.next())ot=at.value,tt.i.overrideFile(ot,tt.C[ot]);if(tt.C={},tt.g.listeners)for(dt=o(tt.g.listeners),Et=dt.next();!Et.done;Et=dt.next())Pt=Et.value,Mt(tt,Pt);Ot=tt.j,tt.j={},tt.setOptions(Ot),Vt.g=0})}($),3):u(Z,function(tt){var nt,ut,at,ot,dt,Et;return T(function(Pt){switch(Pt.g){case 1:if(!tt.s)return Pt.return();if(!tt.A){Pt.g=2;break}nt=o(tt.A),ut=nt.next();case 3:if(ut.done){Pt.g=5;break}return u(Pt,(0,ut.value)(),4);case 4:ut=nt.next(),Pt.g=3;break;case 5:tt.A=void 0;case 2:if(tt.B){for(at=new tt.h.GraphOptionChangeRequestList,ot=o(tt.B),dt=ot.next();!dt.done;dt=ot.next())Et=dt.value,at.push_back(Et);tt.i.changeOptions(at),at.delete(),tt.B=void 0}tt.s=!1,Pt.g=0}})}($),0)})},c.overrideFile=function($,Z){this.i?this.i.overrideFile($,Z):this.C[$]=Z},c.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},c.send=function($,Z){var tt,nt,ut,at,ot,dt,Et,Pt,Ot,Vt=this;return T(function(Ht){switch(Ht.g){case 1:return Vt.g.inputs?(tt=1e3*(Z??performance.now()),u(Ht,Vt.D,2)):Ht.return();case 2:return u(Ht,Vt.initialize(),3);case 3:for(nt=new Vt.h.PacketDataList,ut=o(Object.keys($)),at=ut.next();!at.done;at=ut.next())if(ot=at.value,dt=Vt.g.inputs[ot]){t:{var Qt=$[ot];switch(dt.type){case"video":var he=Vt.o[dt.stream];if(he||(he=new ht(Vt.h,Vt.G),Vt.o[dt.stream]=he),he.l===0&&(he.l=he.h.createTexture()),typeof HTMLVideoElement<"u"&&Qt instanceof HTMLVideoElement)var pe=Qt.videoWidth,Be=Qt.videoHeight;else typeof HTMLImageElement<"u"&&Qt instanceof HTMLImageElement?(pe=Qt.naturalWidth,Be=Qt.naturalHeight):(pe=Qt.width,Be=Qt.height);Be={glName:he.l,width:pe,height:Be},(pe=he.g).canvas.width=Be.width,pe.canvas.height=Be.height,pe.activeTexture(pe.TEXTURE0),he.h.bindTexture2d(he.l),pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,pe.RGBA,pe.UNSIGNED_BYTE,Qt),he.h.bindTexture2d(0),he=Be;break t;case"detections":for((he=Vt.o[dt.stream])||(he=new Rt(Vt.h),Vt.o[dt.stream]=he),he.data||(he.data=new he.g.DetectionListData),he.data.reset(Qt.length),Be=0;Be<Qt.length;++Be){pe=Qt[Be];var Ue=he.data,Pn=Ue.setBoundingBox,ts=Be,$n=pe.boundingBox,Fe=new oi;if(se(Fe,1,$n.xCenter),se(Fe,2,$n.yCenter),se(Fe,3,$n.height),se(Fe,4,$n.width),se(Fe,5,$n.rotation),se(Fe,6,$n.rectId),$n=Us(Fe,Rs),Pn.call(Ue,ts,$n),pe.landmarks)for(Ue=0;Ue<pe.landmarks.length;++Ue){var gn=!!(Fe=pe.landmarks[Ue]).visibility;ts=(Pn=he.data).addNormalizedLandmark,$n=Be,Fe=Object.assign(Object.assign({},Fe),{visibility:gn?Fe.visibility:0}),se(gn=new ps,1,Fe.x),se(gn,2,Fe.y),se(gn,3,Fe.z),Fe.visibility&&se(gn,4,Fe.visibility),Fe=Us(gn,Fr),ts.call(Pn,$n,Fe)}if(pe.V)for(Ue=0;Ue<pe.V.length;++Ue)ts=(Pn=he.data).addClassification,$n=Be,Fe=pe.V[Ue],se(gn=new _n,2,Fe.ga),Fe.index&&se(gn,1,Fe.index),Fe.label&&se(gn,3,Fe.label),Fe.displayName&&se(gn,4,Fe.displayName),Fe=Us(gn,Ui),ts.call(Pn,$n,Fe)}he=he.data;break t;default:he={}}}switch(Et=he,Pt=dt.stream,dt.type){case"video":nt.pushTexture2d(Object.assign(Object.assign({},Et),{stream:Pt,timestamp:tt}));break;case"detections":(Ot=Et).stream=Pt,Ot.timestamp=tt,nt.pushDetectionList(Ot);break;default:throw Error("Unknown input config type: '"+dt.type+"'")}}return Vt.i.send(nt),u(Ht,Vt.D,4);case 4:nt.delete(),Ht.g=0}})},c.onResults=function($,Z){this.listeners[Z||"$"]=$},E("Solution",Tt),E("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(c=Ft.prototype).close=function(){return this.g.close(),Promise.resolve()},c.onResults=function($){this.g.onResults($)},c.initialize=function(){var $=this;return T(function(Z){return u(Z,$.g.initialize(),0)})},c.reset=function(){this.g.reset()},c.send=function($){var Z=this;return T(function(tt){return u(tt,Z.g.send($),0)})},c.setOptions=function($){this.g.setOptions($)},E("FaceDetection",Ft),E("FACEDETECTION_LIPS",ui),E("FACEDETECTION_LEFT_EYE",li),E("FACEDETECTION_LEFT_EYEBROW",hi),E("FACEDETECTION_RIGHT_EYE",Vs),E("FACEDETECTION_RIGHT_EYEBROW",fi),E("FACEDETECTION_FACE_OVAL",zi),E("FACEDETECTION_CONTOURS",ci),E("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),E("VERSION","0.4.1646425229")}).call(Ml);var Ri=function(){return Ri=Object.assign||function(c){for(var e,f=1,x=arguments.length;f<x;f++)for(var S in e=arguments[f])Object.prototype.hasOwnProperty.call(e,S)&&(c[S]=e[S]);return c},Ri.apply(this,arguments)};function Js(c,e,f,x){return new(f||(f=Promise))(function(S,C){function o(s){try{t(x.next(s))}catch(l){C(l)}}function y(s){try{t(x.throw(s))}catch(l){C(l)}}function t(s){var l;s.done?S(s.value):(l=s.value,l instanceof f?l:new f(function(a){a(l)})).then(o,y)}t((x=x.apply(c,e||[])).next())})}function qs(c,e){var f,x,S,C,o={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return C={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function y(t){return function(s){return function(l){if(f)throw new TypeError("Generator is already executing.");for(;o;)try{if(f=1,x&&(S=2&l[0]?x.return:l[0]?x.throw||((S=x.return)&&S.call(x),0):x.next)&&!(S=S.call(x,l[1])).done)return S;switch(x=0,S&&(l=[2&l[0],S.value]),l[0]){case 0:case 1:S=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,x=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((S=(S=o.trys).length>0&&S[S.length-1])||l[0]!==6&&l[0]!==2)){o=0;continue}if(l[0]===3&&(!S||l[1]>S[0]&&l[1]<S[3])){o.label=l[1];break}if(l[0]===6&&o.label<S[1]){o.label=S[1],S=l;break}if(S&&o.label<S[2]){o.label=S[2],o.ops.push(l);break}S[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(c,o)}catch(a){l=[6,a],x=0}finally{f=S=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([t,s])}}}var E2=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],Ol={modelType:"short",runtime:"mediapipe",maxFaces:1},Zz=function(){function c(e){var f=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new jz.FaceDetection({locateFile:function(x,S){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+x:S+"/"+x}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults(function(x){if(f.height=x.image.height,f.width=x.image.width,f.faces=[],x.detections!==null)for(var S=0,C=x.detections;S<C.length;S++){var o=C[S];f.faces.push(f.normalizedToAbsolute(o.landmarks,{xMin:t=(y=o.boundingBox).xCenter-y.width/2,xMax:t+y.width,yMin:s=y.yCenter-y.height/2,yMax:s+y.height,width:y.width,height:y.height}))}var y,t,s})}return c.prototype.normalizedToAbsolute=function(e,f){var x=this;return{keypoints:e.map(function(S,C){return{x:S.x*x.width,y:S.y*x.height,name:E2[C]}}),box:{xMin:f.xMin*this.width,yMin:f.yMin*this.height,xMax:f.xMax*this.width,yMax:f.yMax*this.height,width:f.width*this.width,height:f.height*this.height}}},c.prototype.estimateFaces=function(e,f){return Js(this,void 0,void 0,function(){var x,S;return qs(this,function(C){switch(C.label){case 0:return f&&f.flipHorizontal&&f.flipHorizontal!==this.selfieMode&&(this.selfieMode=f.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Je?(S=ImageData.bind,[4,rg(e)]):[3,2];case 1:return x=new(S.apply(ImageData,[void 0,C.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:x=e,C.label=3;case 3:return e=x,[4,this.faceDetectorSolution.send({image:e})];case 4:return C.sent(),[2,this.faces]}})})},c.prototype.dispose=function(){this.faceDetectorSolution.close()},c.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},c.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},c}();function Qz(c){return Js(this,void 0,void 0,function(){var e,f;return qs(this,function(x){switch(x.label){case 0:return e=function(S){if(S==null)return Ri({},Ol);var C=Ri({},S);return C.runtime="mediapipe",C.modelType==null&&(C.modelType=Ol.modelType),C.maxFaces==null&&(C.maxFaces=Ol.maxFaces),C}(c),[4,(f=new Zz(e)).initialize()];case 1:return x.sent(),[2,f]}})})}function w2(c){return c instanceof Je?{height:c.shape[0],width:c.shape[1]}:{height:c.height,width:c.width}}function b2(c){return c instanceof Je?c:ag(c)}function Dl(c,e){it(c.width!==0,function(){return e+" width cannot be 0."}),it(c.height!==0,function(){return e+" height cannot be 0."})}function Jz(c,e,f){var x=e.outputTensorSize,S=e.keepAspectRatio,C=e.borderMode,o=e.outputTensorFloatRange,y=w2(c),t=function(r,i){return i?{xCenter:i.xCenter*r.width,yCenter:i.yCenter*r.height,width:i.width*r.width,height:i.height*r.height,rotation:i.rotation}:{xCenter:.5*r.width,yCenter:.5*r.height,width:r.width,height:r.height,rotation:0}}(y,f),s=function(r,i,n){if(n===void 0&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var h=i.height,d=i.width;Dl(i,"targetSize"),Dl(r,"roi");var u,p,m=h/d,v=r.height/r.width,g=0,T=0;return m>v?(u=r.width,p=r.width*m,T=(1-v/m)/2):(u=r.height/m,p=r.height,g=(1-m/v)/2),r.width=u,r.height=p,{top:T,left:g,right:g,bottom:T}}(t,x,S),l=function(r,i,n,h){var d=r.width,u=r.height,p=h?-1:1,m=Math.cos(r.rotation),v=Math.sin(r.rotation),g=r.xCenter,T=r.yCenter,w=1/i,b=1/n,E=new Array(16);return E[0]=d*m*p*w,E[1]=-u*v*w,E[2]=0,E[3]=(-.5*d*m*p+.5*u*v+g)*w,E[4]=d*v*p*b,E[5]=u*m*b,E[6]=0,E[7]=(-.5*u*m-.5*d*v*p+T)*b,E[8]=0,E[9]=0,E[10]=d*w,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,function(A){if(A.length!==16)throw new Error("Array length must be 16 but got "+A.length);return[[A[0],A[1],A[2],A[3]],[A[4],A[5],A[6],A[7]],[A[8],A[9],A[10],A[11]],[A[12],A[13],A[14],A[15]]]}(E)}(t,y.width,y.height,!1),a=de(function(){var r=b2(c),i=Ci(function(d,u,p){return Dl(p,"inputResolution"),[1/p.width*d[0][0]*u.width,1/p.height*d[0][1]*u.width,d[0][3]*u.width,1/p.width*d[1][0]*u.height,1/p.height*d[1][1]*u.height,d[1][3]*u.height,0,0]}(l,y,x),[1,8]),n=C==="zero"?"constant":"nearest",h=ia.transform(is(We(r,"float32")),i,"bilinear",n,0,[x.height,x.width]);return o!=null?function(d,u){var p=function(m,v,g,T){var w=(T-g)/255;return{scale:w,offset:g-0*w}}(0,0,u[0],u[1]);return de(function(){return ne(Wt(d,p.scale),p.offset)})}(h,o):h});return{imageTensor:a,padding:s,transformationMatrix:l}}function Vp(c){c.reduceBoxesInLowestLayer==null&&(c.reduceBoxesInLowestLayer=!1),c.interpolatedScaleAspectRatio==null&&(c.interpolatedScaleAspectRatio=1),c.fixedAnchorSize==null&&(c.fixedAnchorSize=!1);for(var e=[],f=0;f<c.numLayers;){for(var x=[],S=[],C=[],o=[],y=f;y<c.strides.length&&c.strides[y]===c.strides[f];){var t=zp(c.minScale,c.maxScale,y,c.strides.length);if(y===0&&c.reduceBoxesInLowestLayer)C.push(1),C.push(2),C.push(.5),o.push(.1),o.push(t),o.push(t);else{for(var s=0;s<c.aspectRatios.length;++s)C.push(c.aspectRatios[s]),o.push(t);if(c.interpolatedScaleAspectRatio>0){var l=y===c.strides.length-1?1:zp(c.minScale,c.maxScale,y+1,c.strides.length);o.push(Math.sqrt(t*l)),C.push(c.interpolatedScaleAspectRatio)}}y++}for(var a=0;a<C.length;++a){var r=Math.sqrt(C[a]);x.push(o[a]/r),S.push(o[a]*r)}var i=0,n=0;if(c.featureMapHeight.length>0)i=c.featureMapHeight[f],n=c.featureMapWidth[f];else{var h=c.strides[f];i=Math.ceil(c.inputSizeHeight/h),n=Math.ceil(c.inputSizeWidth/h)}for(var d=0;d<i;++d)for(var u=0;u<n;++u)for(var p=0;p<x.length;++p){var m={xCenter:(u+c.anchorOffsetX)/n,yCenter:(d+c.anchorOffsetY)/i,width:0,height:0};c.fixedAnchorSize?(m.width=1,m.height=1):(m.width=S[p],m.height=x[p]),e.push(m)}f=y}return e}function zp(c,e,f,x){return x===1?.5*(c+e):c+(e-c)*f/(x-1)}function kp(c,e){var f=e[0],x=e[1];return[f*c[0]+x*c[1]+c[3],f*c[4]+x*c[5]+c[7]]}function qz(c,e,f,x){return Js(this,void 0,void 0,function(){var S,C,o,y,t;return qs(this,function(s){switch(s.label){case 0:return c.sort(function(l,a){return Math.max.apply(Math,a.score)-Math.max.apply(Math,l.score)}),S=Ci(c.map(function(l){return[l.locationData.relativeBoundingBox.yMin,l.locationData.relativeBoundingBox.xMin,l.locationData.relativeBoundingBox.yMax,l.locationData.relativeBoundingBox.xMax]})),C=xn(c.map(function(l){return l.score[0]})),[4,ia.nonMaxSuppressionAsync(S,C,e,f)];case 1:return[4,(o=s.sent()).array()];case 2:return y=s.sent(),t=c.filter(function(l,a){return y.indexOf(a)>-1}),Ke([S,C,o]),[2,t]}})})}function _z(c,e,f){return Js(this,void 0,void 0,function(){var x,S,C,o,y;return qs(this,function(t){switch(t.label){case 0:return x=c[0],S=c[1],C=function(s,l,a){return de(function(){var r,i,n,h;a.reverseOutputOrder?(i=on(me(s,[0,a.boxCoordOffset+0],[-1,1])),r=on(me(s,[0,a.boxCoordOffset+1],[-1,1])),h=on(me(s,[0,a.boxCoordOffset+2],[-1,1])),n=on(me(s,[0,a.boxCoordOffset+3],[-1,1]))):(r=on(me(s,[0,a.boxCoordOffset+0],[-1,1])),i=on(me(s,[0,a.boxCoordOffset+1],[-1,1])),n=on(me(s,[0,a.boxCoordOffset+2],[-1,1])),h=on(me(s,[0,a.boxCoordOffset+3],[-1,1]))),i=ne(Wt(ye(i,a.xScale),l.w),l.x),r=ne(Wt(ye(r,a.yScale),l.h),l.y),a.applyExponentialOnBoxSize?(n=Wt(js(ye(n,a.hScale)),l.h),h=Wt(js(ye(h,a.wScale)),l.w)):(n=Wt(ye(n,a.hScale),l.h),h=Wt(ye(h,a.wScale),l.h));var d=ve(r,ye(n,2)),u=ve(i,ye(h,2)),p=ne(r,ye(n,2)),m=ne(i,ye(h,2)),v=cn([Nt(d,[a.numBoxes,1]),Nt(u,[a.numBoxes,1]),Nt(p,[a.numBoxes,1]),Nt(m,[a.numBoxes,1])],1);if(a.numKeypoints)for(var g=0;g<a.numKeypoints;++g){var T=a.keypointCoordOffset+g*a.numValuesPerKeypoint,w=void 0,b=void 0;a.reverseOutputOrder?(w=on(me(s,[0,T],[-1,1])),b=on(me(s,[0,T+1],[-1,1]))):(b=on(me(s,[0,T],[-1,1])),w=on(me(s,[0,T+1],[-1,1])));var E=ne(Wt(ye(w,a.xScale),l.w),l.x),A=ne(Wt(ye(b,a.yScale),l.h),l.y);v=cn([v,Nt(E,[a.numBoxes,1]),Nt(A,[a.numBoxes,1])],1)}return v})}(S,e,f),o=de(function(){var s=x;return f.sigmoidScore?(f.scoreClippingThresh!=null&&(s=dv(x,-f.scoreClippingThresh,f.scoreClippingThresh)),s=ir(s)):s}),[4,tk(C,o,f)];case 1:return y=t.sent(),Ke([C,o]),[2,y]}})})}function tk(c,e,f){return Js(this,void 0,void 0,function(){var x,S,C,o,y,t,s,l,a,r,i,n;return qs(this,function(h){switch(h.label){case 0:return x=[],[4,c.data()];case 1:return S=h.sent(),[4,e.data()];case 2:for(C=h.sent(),o=0;o<f.numBoxes;++o)if(!(f.minScoreThresh!=null&&C[o]<f.minScoreThresh||(y=o*f.numCoords,t=ek(S[y+0],S[y+1],S[y+2],S[y+3],C[o],f.flipVertically,o),(s=t.locationData.relativeBoundingBox).width<0||s.height<0))){if(f.numKeypoints>0)for((l=t.locationData).relativeKeypoints=[],a=f.numKeypoints*f.numValuesPerKeypoint,r=0;r<a;r+=f.numValuesPerKeypoint)i=y+f.keypointCoordOffset+r,n={x:S[i+0],y:f.flipVertically?1-S[i+1]:S[i+1]},l.relativeKeypoints.push(n);x.push(t)}return[2,x]}})})}function ek(c,e,f,x,S,C,o){return{score:[S],ind:o,locationData:{relativeBoundingBox:{xMin:e,yMin:C?1-f:c,xMax:x,yMax:C?1-c:f,width:x-e,height:f-c}}}}var Ho,nk={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},sk={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},Ll={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},ik={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},rk={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},ak={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},ok={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},uk=function(){function c(e,f,x){this.detectorModel=f,this.maxFaces=x,e==="full"?(this.imageToTensorConfig=ok,this.tensorsToDetectionConfig=rk,this.anchors=Vp(sk)):(this.imageToTensorConfig=ak,this.tensorsToDetectionConfig=ik,this.anchors=Vp(nk));var S=xn(this.anchors.map(function(t){return t.width})),C=xn(this.anchors.map(function(t){return t.height})),o=xn(this.anchors.map(function(t){return t.xCenter})),y=xn(this.anchors.map(function(t){return t.yCenter}));this.anchorTensor={x:o,y,w:S,h:C}}return c.prototype.dispose=function(){this.detectorModel.dispose(),Ke([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},c.prototype.reset=function(){},c.prototype.detectFaces=function(e,f){return f===void 0&&(f=!1),Js(this,void 0,void 0,function(){var x,S,C,o,y,t,s,l,a,r,i;return qs(this,function(n){switch(n.label){case 0:return e==null?(this.reset(),[2,[]]):(x=de(function(){var h=We(b2(e),"float32");return f&&(h=on(ia.flipLeftRight(is(h,0)),[0])),h}),S=Jz(x,this.imageToTensorConfig),C=S.imageTensor,o=S.transformationMatrix,y=this.detectorModel.execute(C,"Identity:0"),t=function(h){return de(function(){var d=function(m){return de(function(){return[me(m,[0,0,0],[1,-1,1]),me(m,[0,0,1],[1,-1,-1])]})}(h),u=d[0],p=d[1];return{boxes:on(p),logits:on(u)}})}(y),s=t.boxes,[4,_z([l=t.logits,s],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return(a=n.sent()).length===0?(Ke([x,C,y,l,s]),[2,a]):[4,qz(a,this.maxFaces,.3)];case 2:return r=n.sent(),i=function(h,d){h===void 0&&(h=[]);var u,p=(u=d,[].concat.apply([],u));return h.forEach(function(m){var v=m.locationData;v.relativeKeypoints.forEach(function(A){var R=kp(p,[A.x,A.y]),I=R[0],P=R[1];A.x=I,A.y=P});var g=v.relativeBoundingBox,T=Number.MAX_VALUE,w=Number.MAX_VALUE,b=Number.MIN_VALUE,E=Number.MIN_VALUE;[[g.xMin,g.yMin],[g.xMin+g.width,g.yMin],[g.xMin+g.width,g.yMin+g.height],[g.xMin,g.yMin+g.height]].forEach(function(A){var R=kp(p,A),I=R[0],P=R[1];T=Math.min(T,I),b=Math.max(b,I),w=Math.min(w,P),E=Math.max(E,P)}),v.relativeBoundingBox={xMin:T,xMax:b,yMin:w,yMax:E,width:b-T,height:E-w}}),h}(r,o),Ke([x,C,y,l,s]),[2,i]}})})},c.prototype.estimateFaces=function(e,f){return Js(this,void 0,void 0,function(){var x,S;return qs(this,function(C){return x=w2(e),S=!!f&&f.flipHorizontal,[2,this.detectFaces(e,S).then(function(o){return o.map(function(y){for(var t=y.locationData.relativeKeypoints.map(function(n,h){return Ri(Ri({},n),{x:n.x*x.width,y:n.y*x.height,name:E2[h]})}),s=y.locationData.relativeBoundingBox,l=0,a=["width","xMax","xMin"];l<a.length;l++)s[a[l]]*=x.width;for(var r=0,i=["height","yMax","yMin"];r<i.length;r++)s[i[r]]*=x.height;return{keypoints:t,box:s}})})]})})},c}();function lk(c){return Js(this,void 0,void 0,function(){var e,f,x;return qs(this,function(S){switch(S.label){case 0:return e=function(C){if(C==null)return Ri({},Ll);var o=Ri({},C);return o.modelType==null&&(o.modelType=Ll.modelType),o.maxFaces==null&&(o.maxFaces=Ll.maxFaces),o.detectorModelUrl==null&&(o.modelType==="full"?o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),o}(c),f=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,S2(e.detectorModelUrl,{fromTFHub:f})];case 1:return x=S.sent(),[2,new uk(e.modelType,x,e.maxFaces)]}})})}function hk(c,e){return Js(this,void 0,void 0,function(){var f,x;return qs(this,function(S){if(c===Ho.MediaPipeFaceDetector){if(x=void 0,(f=e)!=null){if(f.runtime==="tfjs")return[2,lk(f)];if(f.runtime==="mediapipe")return[2,Qz(f)];x=f.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+x)}throw new Error(c+" is not a supported model name.")})})}function Bl(c){return c.width*c.height}function Wp(c){var e=c.xCenter-c.width/2,f=e+c.width,x=c.yCenter-c.height/2;return{xMin:e,xMax:f,yMin:x,yMax:x+c.height,width:c.width,height:c.height}}function fk(c,e){var f=Wp(c),x=Wp(e);if(!function(o,y){return!(o.xMax<y.xMin||y.xMax<o.xMin||o.yMax<y.yMin||y.yMax<o.yMin)}(f,x))return 0;var S=Bl(function(o,y){var t=Math.max(o.xMin,y.xMin),s=Math.min(o.xMax,y.xMax),l=Math.max(o.yMin,y.yMin),a=Math.min(o.yMax,y.yMax);return{xMin:t,xMax:s,yMin:l,yMax:a,width:Math.max(s-t,0),height:Math.max(a-l,0)}}(f,x)),C=Bl(f)+Bl(x)-S;return C>0?S/C:0}function ck(c,e,f,x){var S=c.width,C=c.height,o=x?-1:1,y=Math.cos(c.rotation),t=Math.sin(c.rotation),s=c.xCenter,l=c.yCenter,a=1/e,r=1/f,i=new Array(16);return i[0]=S*y*o*a,i[1]=-C*t*a,i[2]=0,i[3]=(-.5*S*y*o+.5*C*t+s)*a,i[4]=S*t*o*r,i[5]=C*y*r,i[6]=0,i[7]=(-.5*C*y-.5*S*t*o+l)*r,i[8]=0,i[9]=0,i[10]=S*a,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,function(n){if(n.length!==16)throw new Error("Array length must be 16 but got "+n.length);return[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]],[n[8],n[9],n[10],n[11]],[n[12],n[13],n[14],n[15]]]}(i)}function A2(c){return c instanceof Je?{height:c.shape[0],width:c.shape[1]}:{height:c.height,width:c.width}}function R2(c){return c-2*Math.PI*Math.floor((c+Math.PI)/(2*Math.PI))}function I2(c){return c instanceof Je?c:ag(c)}function $l(c,e){it(c.width!==0,function(){return e+" width cannot be 0."}),it(c.height!==0,function(){return e+" height cannot be 0."})}function dk(c,e){var f=function(x,S,C,o){var y=S-x,t=o-C;if(y===0)throw new Error("Original min and max are both "+x+", range cannot be 0.");var s=t/y;return{scale:s,offset:C-x*s}}(0,255,e[0],e[1]);return de(function(){return ne(Wt(c,f.scale),f.offset)})}function pk(c,e,f){var x=e.outputTensorSize,S=e.keepAspectRatio,C=e.borderMode,o=e.outputTensorFloatRange,y=A2(c),t=function(r,i){return i?{xCenter:i.xCenter*r.width,yCenter:i.yCenter*r.height,width:i.width*r.width,height:i.height*r.height,rotation:i.rotation}:{xCenter:.5*r.width,yCenter:.5*r.height,width:r.width,height:r.height,rotation:0}}(y,f),s=function(r,i,n){if(n===void 0&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var h=i.height,d=i.width;$l(i,"targetSize"),$l(r,"roi");var u,p,m=h/d,v=r.height/r.width,g=0,T=0;return m>v?(u=r.width,p=r.width*m,T=(1-v/m)/2):(u=r.height/m,p=r.height,g=(1-m/v)/2),r.width=u,r.height=p,{top:T,left:g,right:g,bottom:T}}(t,x,S),l=ck(t,y.width,y.height,!1),a=de(function(){var r=I2(c),i=Ci(function(d,u,p){return $l(p,"inputResolution"),[1/p.width*d[0][0]*u.width,1/p.height*d[0][1]*u.width,d[0][3]*u.width,1/p.width*d[1][0]*u.height,1/p.height*d[1][1]*u.height,d[1][3]*u.height,0,0]}(l,y,x),[1,8]),n=C==="zero"?"constant":"nearest",h=ia.transform(is(We(r,"float32")),i,"bilinear",n,0,[x.height,x.width]);return o!=null?dk(h,o):h});return{imageTensor:a,padding:s,transformationMatrix:l}}function Xp(c){return{xCenter:c.xMin+c.width/2,yCenter:c.yMin+c.height/2,width:c.width,height:c.height}}function Hp(c){var e=c.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var f=Number.MAX_VALUE,x=Number.MAX_VALUE,S=Number.MIN_VALUE,C=Number.MIN_VALUE;return e.forEach(function(o){f=Math.min(f,o.x),S=Math.max(S,o.x),x=Math.min(x,o.y),C=Math.max(C,o.y)}),{xCenter:(f+S)/2,yCenter:(x+C)/2,width:S-f,height:C-x}}function Yp(c,e,f,x,S){var C=f==="rect"?function(o,y,t){var s,l=o.locationData;if(y==="boundingbox")s=Xp(l.boundingBox);else{s=Hp(l);var a=t.width,r=t.height;s.xCenter=Math.round(s.xCenter*a),s.yCenter=Math.round(s.yCenter*r),s.width=Math.round(s.width*a),s.height=Math.round(s.height*r)}return s}(c,e,x):function(o,y){var t=o.locationData;return y==="boundingbox"?Xp(t.relativeBoundingBox):Hp(t)}(c,e);return S&&(C.rotation=function(o,y,t){var s,l=o.locationData,a=t.rotationVectorStartKeypointIndex,r=t.rotationVectorEndKeypointIndex;s=t.rotationVectorTargetAngle?t.rotationVectorTargetAngle:Math.PI*t.rotationVectorTargetAngleDegree/180;var i=l.relativeKeypoints[a].x*y.width,n=l.relativeKeypoints[a].y*y.height,h=l.relativeKeypoints[r].x*y.width,d=l.relativeKeypoints[r].y*y.height;return R2(s-Math.atan2(-(d-n),h-i))}(c,x,S)),C}function mk(c,e,f){for(var x=0;x<e.length;++x){var S=e[x],C=f[c[x]];C.x=S.x,C.y=S.y}}function vk(c,e,f,x){if(typeof e=="string"){if(e==="copy")for(var S=0;S<f.length;++S)x[c[S]].z=f[S].z}else{var C=function(o,y){for(var t=0,s=0;s<y.length;++s)t+=o[y[s]].z;return t/y.length}(x,e);for(S=0;S<c.length;++S)x[c[S]].z=C}}function gk(c,e){for(var f=function(y){var t=[].concat.apply([],y.map(function(i){return i.indexesMapping}));if(t.length===0)throw new Error("There should be at least one landmark in indexes mapping");var s=t[0],l=t[0],a=new Set(t);a.forEach(function(i){s=Math.min(s,i),l=Math.max(l,i)});var r=a.size;if(s!==0)throw new Error("Indexes are expected to start with 0 instead of "+s);if(l+1!==r)throw new Error("Indexes should have no gaps but "+(l-r+1)+" indexes are missing");return r}(e),x=new Array(f).fill(null).map(Object),S=0;S<c.length;++S){var C=c[S],o=e[S];if(C.length!==o.indexesMapping.length)throw new Error("There are "+C.length+" refinement landmarks while mapping has "+o.indexesMapping.length);mk(o.indexesMapping,C,x),vk(o.indexesMapping,o.zRefinement,C,x)}return x}function xk(c,e){return c.map(function(f){var x=Ss(Ss({},f),{x:f.x*e.width,y:f.y*e.height});return f.z!=null&&(x.z=f.z*e.width),x})}function yk(c,e){return c==="none"?e:function(f){return 1/(1+Math.exp(-f))}(e)}function Hi(c,e,f,x){return Hs(this,void 0,void 0,function(){var S,C,o,y,t,s,l,a;return Ys(this,function(r){switch(r.label){case 0:return f=f||e.flipHorizontally||!1,x=x||e.flipVertically||!1,S=c.size,C=S/e.numLandmarks,[4,c.data()];case 1:for(o=r.sent(),y=[],t=0;t<e.numLandmarks;++t)s=t*C,(a={x:0,y:0}).x=f?e.inputImageWidth-o[s]:o[s],C>1&&(a.y=x?e.inputImageHeight-o[s+1]:o[s+1]),C>2&&(a.z=o[s+2]),C>3&&(a.score=yk(e.visibilityActivation,o[s+3])),y.push(a);for(l=0;l<y.length;++l)(a=y[l]).x=a.x/e.inputImageWidth,a.y=a.y/e.inputImageHeight,a.z=a.z/e.inputImageWidth/(e.normalizeZ||1);return[2,y]}})})}function Kp(c,e,f){var x=c.width,S=c.height,C=c.rotation;if(f.rotation==null&&f.rotationDegree==null||(C=function(l,a){return a.rotation!=null?l+=a.rotation:a.rotationDegree!=null&&(l+=Math.PI*a.rotationDegree/180),R2(l)}(C,f)),C===0)c.xCenter=c.xCenter+x*f.shiftX,c.yCenter=c.yCenter+S*f.shiftY;else{var o=(e.width*x*f.shiftX*Math.cos(C)-e.height*S*f.shiftY*Math.sin(C))/e.width,y=(e.width*x*f.shiftX*Math.sin(C)+e.height*S*f.shiftY*Math.cos(C))/e.height;c.xCenter=c.xCenter+o,c.yCenter=c.yCenter+y}if(f.squareLong){var t=Math.max(x*e.width,S*e.height);x=t/e.width,S=t/e.height}else if(f.squareShort){var s=Math.min(x*e.width,S*e.height);x=s/e.width,S=s/e.height}return c.width=x*f.scaleX,c.height=S*f.scaleY,c}(Ho||(Ho={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var Gl={runtime:"tfjs",maxFaces:1,refineLandmarks:!1,landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"},Ul={flipHorizontal:!1,staticImageMode:!1},jp={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5,squareLong:!0},Tk={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1],borderMode:"replicate"},Zp={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Sk={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Qp={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Jp={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Ck={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},Ek={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},wk={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},bk={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},Ak={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},Rk={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]},Yo,Ik=function(){function c(e,f,x,S){this.detector=e,this.landmarkModel=f,this.maxFaces=x,this.withAttention=S,this.prevFaceRectsFromLandmarks=null}return c.prototype.estimateFaces=function(e,f){return Hs(this,void 0,void 0,function(){var x,S,C,o,y,t,s,l,a,r,i,n,h,d=this;return Ys(this,function(u){switch(u.label){case 0:return x=function(v){if(v==null)return Ss({},Ul);var g=Ss({},v);return g.flipHorizontal==null&&(g.flipHorizontal=Ul.flipHorizontal),g.staticImageMode==null&&(g.staticImageMode=Ul.staticImageMode),g}(f),e==null?(this.reset(),[2,[]]):(S=A2(e),C=de(function(){var v=We(I2(e),"float32");return x.flipHorizontal&&(v=on(ia.flipLeftRight(is(v,0)),[0])),v}),o=this.prevFaceRectsFromLandmarks,x.staticImageMode||o==null||o.length<this.maxFaces?[4,this.detector.detectFaces(C,!1)]:[3,2]);case 1:return(t=u.sent()).length===0?(this.reset(),C.dispose(),[2,[]]):(y=t.map(function(v){return d.faceDetectionFrontDetectionToRoi(v,S)}),[3,3]);case 2:y=[],u.label=3;case 3:return p=.5,m=[],[y,o||[]].forEach(function(v){return v.forEach(function(g){(m=m.filter(function(T){return fk(g,T)<=p})).push(g)})}),s=m,[4,Promise.all(s.map(function(v){return d.faceLandmark(v,C)}))];case 4:for(l=u.sent(),a=[],this.prevFaceRectsFromLandmarks=[],r=0;r<l.length;++r)(i=l[r])!=null&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(i,S)),(n=xk(i,S))!=null&&n.forEach(function(v,g){var T=C2.get(g);T!=null&&(v.name=T)}),h=Fh(n),a.push({keypoints:n,box:h.locationData.relativeBoundingBox}));return C.dispose(),[2,a]}var p,m})})},c.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},c.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},c.prototype.faceDetectionFrontDetectionToRoi=function(e,f){return Kp(Yp(e,"boundingbox","normRect",f,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),f,jp)},c.prototype.faceLandmark=function(e,f){return Hs(this,void 0,void 0,function(){var x,S,C,o,y,t,s;return Ys(this,function(l){switch(l.label){case 0:return x=pk(f,Tk,e).imageTensor,S=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),C=this.landmarkModel.execute(x,S),o=C[0],y=C.slice(1),[4,o.data()];case 1:return l.sent()[0]<.5?(Ke(C),Ke(x),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(y)]:[3,3];case 2:return t=l.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(y)];case 4:t=l.sent(),l.label=5;case 5:return s=function(a,r,i){i===void 0&&(i={ignoreRotation:!1});for(var n=[],h=0,d=a;h<d.length;h++){var u=d[h],p=u.x-.5,m=u.y-.5,v=i.ignoreRotation?0:r.rotation,g=Math.cos(v)*p-Math.sin(v)*m,T=Math.sin(v)*p+Math.cos(v)*m;g=g*r.width+r.xCenter,T=T*r.height+r.yCenter;var w=u.z*r.width,b=Ss({},u);b.x=g,b.y=T,b.z=w,n.push(b)}return n}(t,e),Ke(C),Ke(x),[2,s]}})})},c.prototype.tensorsToFaceLandmarks=function(e){return Hs(this,void 0,void 0,function(){return Ys(this,function(f){return[2,Hi(e[0],Zp)]})})},c.prototype.tensorsToFaceLandmarksWithAttention=function(e){return Hs(this,void 0,void 0,function(){var f,x,S,C,o,y;return Ys(this,function(t){switch(t.label){case 0:return[4,Hi(e[0],Zp)];case 1:return f=t.sent(),[4,Hi(e[1],Sk)];case 2:return x=t.sent(),[4,Hi(e[3],Qp)];case 3:return S=t.sent(),[4,Hi(e[5],Qp)];case 4:return C=t.sent(),[4,Hi(e[4],Jp)];case 5:return o=t.sent(),[4,Hi(e[2],Jp)];case 6:return y=t.sent(),[2,gk([f,x,S,C,o,y],[Ck,Ek,wk,bk,Ak,Rk])]}})})},c.prototype.faceLandmarksToRoi=function(e,f){return Kp(Yp(Fh(e),"boundingbox","normRect",f,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),f,jp)},c}();function Pk(c){return Hs(this,void 0,void 0,function(){var e,f,x,S;return Ys(this,function(C){switch(C.label){case 0:return e=function(o){if(o==null)return Ss({},Gl);var y=Ss({},o);return y.runtime="tfjs",y.maxFaces==null&&(y.maxFaces=Gl.maxFaces),y.refineLandmarks==null&&(y.refineLandmarks=Gl.refineLandmarks),y.landmarkModelUrl==null&&(y.landmarkModelUrl=y.refineLandmarks?"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/attention_mesh/1":"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"),y}(c),f=typeof e.landmarkModelUrl=="string"&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,S2(e.landmarkModelUrl,{fromTFHub:f})];case 1:return x=C.sent(),[4,hk(Ho.MediaPipeFaceDetector,{modelType:"short",maxFaces:e.maxFaces,detectorModelUrl:e.detectorModelUrl,runtime:e.runtime})];case 2:return S=C.sent(),[2,new Ik(S,x,e.maxFaces,e.refineLandmarks)]}})})}function Fk(c,e){return Hs(this,void 0,void 0,function(){var f,x;return Ys(this,function(S){if(c===Yo.MediaPipeFaceMesh){if(x=void 0,(f=e)!=null){if(f.runtime==="tfjs")return[2,Pk(f)];if(f.runtime==="mediapipe")return[2,Kz(f)];x=f.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+x)}throw new Error(c+" is not a supported model name.")})})}(function(c){c.MediaPipeFaceMesh="MediaPipeFaceMesh"})(Yo||(Yo={}));hV(`https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@${cV}/dist/`);const qi=class qi{constructor(){Gt(this,"detector");Gt(this,"startInferenceTime",0);Gt(this,"numInferences",0);Gt(this,"inferenceTimeSum",0);Gt(this,"lastPanelUpdate",0);Gt(this,"rafId");Gt(this,"translateX",0);Gt(this,"translateY",0);Gt(this,"scale",0);Gt(this,"blinkingStatus",Fn.None);Gt(this,"_previousBlink",Fn.None);Gt(this,"blinkConfirmationDelay",0);Gt(this,"smoothFace");Gt(this,"smoothingFactor",.8);Gt(this,"faceInit",!0)}static async setup(){qi.default=new qi,await ms.setup();const e={runtime:"mediapipe",refineLandmarks:!0,solutionPath:`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@${D0.VERSION}`};qi.default.detector=await Fk(Yo.MediaPipeFaceMesh,e),await qi.default.renderPrediction()}beginEstimateFaceStats(){this.startInferenceTime=(performance||Date).now()}endEstimateFaceStats(){const e=(performance||Date).now();this.inferenceTimeSum+=e-this.startInferenceTime,++this.numInferences;const f=1e3;e-this.lastPanelUpdate>=f&&(this.inferenceTimeSum=0,this.numInferences=0,this.lastPanelUpdate=e)}async renderPrediction(){await this.renderResult(),this.rafId=requestAnimationFrame(()=>this.renderPrediction())}async renderResult(){var f,x;ms.defaultCamera.video.readyState<2&&await new Promise(S=>{ms.defaultCamera.video.onloadeddata=()=>{S(ms.defaultCamera.video)}});let e=null;if(this.detector!=null){this.beginEstimateFaceStats();try{if(e=await((f=this.detector)==null?void 0:f.estimateFaces(ms.defaultCamera.video,{flipHorizontal:!1})),e.length==1){let S=e[0];this.smoothFace==null&&this.faceInit==!0?(console.log("First Face"),this.smoothFace=S,this.faceInit=!1):this.smoothFace={box:{xMin:Math.round(this.smoothFace.box.xMin*this.smoothingFactor+S.box.xMin*(1-this.smoothingFactor)),xMax:Math.round(this.smoothFace.box.xMax*this.smoothingFactor+S.box.xMax*(1-this.smoothingFactor)),yMin:Math.round(this.smoothFace.box.yMin*this.smoothingFactor+S.box.yMin*(1-this.smoothingFactor)),yMax:Math.round(this.smoothFace.box.yMax*this.smoothingFactor+S.box.yMax*(1-this.smoothingFactor)),width:Math.round(this.smoothFace.box.width*this.smoothingFactor+S.box.width*(1-this.smoothingFactor)),height:Math.round(this.smoothFace.box.height*this.smoothingFactor+S.box.height*(1-this.smoothingFactor))},keypoints:[...S.keypoints]},await this.calculatePosition(this.smoothFace)}}catch(S){(x=this.detector)==null||x.dispose(),alert(S)}this.endEstimateFaceStats()}}async calculatePosition(e){this.translateX=(ms.videoConfig.video.width-(e.box.xMin+e.box.width/2))/ms.videoConfig.video.width,this.translateY=(e.box.yMin+e.box.height/1.8)/ms.videoConfig.video.height,this.translateX=this.translateX*2.4-.7,this.translateY=this.translateY*2.4-.7,this.translateX=Math.round(this.translateX*1e3)/1e3,this.translateY=Math.round(this.translateY*1e3)/1e3,this.scale=Math.round(ms.videoConfig.video.height/2/e.box.height*100)/100;let f=Math.round(e.keypoints[159].y-e.keypoints[145].y),x=Math.round(e.keypoints[385].y-e.keypoints[380].y),S;if(f>-4&&x>-4?S=Fn.Both:f<-4&&x>=-4?S=Fn.LeftEye:f>=-4&&x<-4?S=Fn.RightEye:S=Fn.None,this.blinkingStatus!=S)if(this.blinkConfirmationDelay==10){this.blinkingStatus=this._previousBlink,this.blinkConfirmationDelay=0;let C=B2.scene.getAt(0);C&&C.onBlinkStatusChanged(this.blinkingStatus)}else S!=this._previousBlink?(this._previousBlink=S,this.blinkConfirmationDelay=0):this.blinkConfirmationDelay+=1}};Gt(qi,"default");let _e=qi;const P2="Chapter1Scene",Nk={active:!1,visible:!1,key:P2};class Xr extends nr{constructor(){super(Nk);Gt(this,"sceneWidth",8525);Gt(this,"sceneHeight",4796);Gt(this,"depth",1);Gt(this,"blackBackground");Gt(this,"backgroundSprites");Gt(this,"phoneSprites");Gt(this,"scaleRate");Gt(this,"phonesPosition",[{x:833.56,y:-1913.68},{x:2475.68,y:-1279.96},{x:-629.34,y:-838.02},{x:350.1,y:-612.88},{x:-475.138,y:-120.91},{x:516.81,y:-112.57},{x:-1271.18,y:341.88},{x:33.34,y:358.55},{x:-129.2,y:1438.39}]);Gt(this,"phoneTrigger",[1,5,9]);Gt(this,"scope",150);Gt(this,"phoneMap",new Map);Gt(this,"isNear",(f,x,S,C)=>Math.abs(f-S)<this.scope&&Math.abs(x-C)<this.scope);Gt(this,"playFrameAnimation",(f,x)=>{const S=f.anims.create({key:"frameAnimation",frames:x.map(C=>({key:f.texture.key,frame:C})),frameRate:.2,repeat:-1});console.log(S),f.anims.play("frameAnimation")})}preload(){console.log("Preload"),this.load.multiatlas("backgrounds","/Chapter1/background.json","/Chapter1/");for(let f=0;f<this.phonesPosition.length;f++)this.load.multiatlas(`phone_0${f+1}`,`/Chapter1/phone_0${f+1}.json`,"/Chapter1/")}create(){this.backgroundSprites=this.add.group(),this.phoneSprites=this.add.group();const f=this.textures.get("backgrounds");for(let x=0;x<f.getFrameNames().length;x++)this.backgroundSprites.create(this.windowWidth/2,this.windowHeight/2,"backgrounds",f.getFrameNames()[x]);this.backgroundSprites.children.iterate(x=>(x instanceof Phaser.GameObjects.Sprite&&(x.setScale(this.widthScale,this.heightScale),x.setDepth(this.depth),this.depth++),!0)),this.phonesPosition=this.phonesPosition.map(x=>({x:(this.sceneWidth/2+x.x)*this.widthScale,y:(this.sceneHeight/2+x.y)*this.heightScale})),console.log(this.phonesPosition);for(let x=0;x<this.phonesPosition.length;x++){const S=this.textures.get(`phone_0${x+1}`);this.phoneSprites.create(this.phonesPosition[x].x,this.phonesPosition[x].y,`phone_0${x+1}`,S.getFrameNames()[0])}this.phoneSprites.children.iterate(x=>(x instanceof Phaser.GameObjects.Sprite&&(x.setScale(this.widthScale,this.heightScale),this.playFrameAnimation(x,x.texture.getFrameNames()),x.setDepth(this.depth),this.depth++),!0)),this.blackBackground=this.add.rectangle(this.windowWidth/2,this.windowHeight/2,this.windowWidth,this.windowHeight,0),this.mask.invertAlpha=!0,this.blackBackground.setDepth(100),this.blackBackground.setMask(this.mask)}updatePostionAndScale(f,x,S){f=f-.3,x=x-.3,this.scaleRate=2/S,this.backgroundSprites.children.iterate(C=>(C instanceof Phaser.GameObjects.Sprite&&(C.setPosition(f*window.innerWidth*this.scaleRate,x*window.innerHeight*this.scaleRate),C.setScale(this.widthScale*this.scaleRate,this.heightScale*this.scaleRate)),!0)),this.phoneSprites.children.iterate((C,o)=>{let y=(f*window.innerWidth+this.phonesPosition[o].x-this.windowWidth/2)*this.scaleRate,t=(x*window.innerHeight+this.phonesPosition[o].y-this.windowHeight/2)*this.scaleRate;return C instanceof Phaser.GameObjects.Sprite&&(C.setPosition(y,t),C.setScale(this.widthScale*this.scaleRate,this.heightScale*this.scaleRate)),!0})}update(){this.blackBackground.width=this.windowWidth,this.blackBackground.height=this.windowHeight;const f=.15,x=.2;_e.default.translateX>=f&&_e.default.translateX<=1-f&&_e.default.translateY>=x&&_e.default.translateY<=1-x&&this.updatePostionAndScale(_e.default.translateX,_e.default.translateY,_e.default.scale)}onBlinkStatusChanged(f){switch(f){case Fn.None:console.log("None");return;case Fn.LeftEye:console.log("LeftEye");return;case Fn.RightEye:console.log("RightEye",_e.default.translateX*window.innerWidth,_e.default.translateY*window.innerHeight);for(let x=0;x<this.phoneTrigger.length;x++)this.isNear(this.phonesPosition[this.phoneTrigger[x]-1].x,this.phonesPosition[this.phoneTrigger[x]-1].y,_e.default.translateX*window.innerWidth,_e.default.translateY*window.innerHeight)&&!this.phoneMap.get(this.phoneTrigger[x])&&(this.phoneMap.set(this.phoneTrigger[x],!0),this.defaultUIScene.foundHiddenObject(0,x));this.phoneMap.size===this.phonesPosition.length&&this.scene.start("Chapter3Scene");return;case Fn.Both:console.log("Both");return}}}Gt(Xr,"title","Lost in the Flood"),Gt(Xr,"subtitle","Chapter 1"),Gt(Xr,"sceneName",P2);const Mk={active:!1,visible:!1,key:"Chapter2Scene"};class Ok extends Phaser.Scene{constructor(){super(Mk)}preload(){console.log("Preload")}create(){}update(){}}const F2="Chapter3Scene",Dk={active:!1,visible:!1,key:F2};class N2 extends nr{constructor(){super(Dk);Gt(this,"sceneWidth",8e3);Gt(this,"sceneHeight",4500);Gt(this,"title","Lost in the Flood");Gt(this,"subtitle","Chapter 3");Gt(this,"depth",1);Gt(this,"background");Gt(this,"blackBackground");Gt(this,"iconList",["icons/fight.png","icons/wheel.png","icons/brain.png","icons/goggles.png"]);Gt(this,"icons")}preload(){console.log("Preload"),this.load.multiatlas("chapter_3_factory","/Chapter3/chapter_3_factory.json","/Chapter3/")}create(){const f=this.textures.get("chapter_3_factory");console.log(f.getFrameNames()),this.background=this.add.image(this.windowWidth/2,this.windowHeight/2,"chapter_3_factory","background/factory_03.png"),this.background.setScale(this.widthScale,this.heightScale),this.background.setDepth(this.depth),this.depth++,this.blackBackground=this.add.rectangle(this.windowWidth/2,this.windowHeight/2,this.windowWidth,this.windowHeight,0),this.blackBackground.setDepth(100),this.blackBackground.setMask(this.mask),this.icons=[];for(let x=0;x<this.iconList.length;x++)this.icons.push(this.add.sprite(this.windowWidth/2+this.windowWidth/8*(x-1.5),this.windowHeight/10*9,"chapter_3_factory",this.iconList[x])),this.icons[x].setScale(this.widthScale,this.heightScale),this.icons[x].setDepth(1e3)}update(){_e.default.translateX>=.15&&_e.default.translateX<=1-.15&&_e.default.translateY>=.2&&_e.default.translateY<=1-.2&&(this.background.setX(_e.default.translateX*window.innerWidth),this.background.setY(_e.default.translateY*window.innerHeight))}}Gt(N2,"sceneName",F2);const Lk={active:!1,visible:!1,key:"Chapter4Scene"};class Bk extends Phaser.Scene{constructor(){super(Lk)}preload(){console.log("Preload")}create(){}update(){}}const $k={active:!1,visible:!1,key:"Chapter5Scene"};class Gk extends Phaser.Scene{constructor(){super($k)}preload(){console.log("Preload")}create(){}update(){}}const M2="MainMenuScene",Uk={active:!1,visible:!1,key:M2};class O2 extends nr{constructor(){super(Uk);Gt(this,"title");Gt(this,"subtitle");Gt(this,"sceneHeight",1080);Gt(this,"sceneWidth",1920);Gt(this,"colour",16777215);Gt(this,"background")}preload(){console.log("Preload"),this.load.image("background","Interface/main_menu_edit.png"),this.load.multiatlas("icons","/Interface/main_menu_icon_edit.json","/Interface/")}create(){super.create(),this.load.on("progress",f=>{console.log(f)}),this.load.on("fileprogress",f=>{console.log(f.src)}),this.load.on("complete",f=>{console.log(f)}),this.background=this.add.image(0,0,"background"),this.background.setOrigin(.5,.5)}update(){super.update(),this.background.scale=.2}onBlinkStatusChanged(f){switch(f){case Fn.None:this.colour=16777215;return;case Fn.LeftEye:this.colour=65535;return;case Fn.RightEye:this.colour=16711935;return;case Fn.Both:this.colour=16776960;return}}}Gt(O2,"sceneName",M2);class Yi{constructor(e,f,x,S){Gt(this,"imageName");Gt(this,"name");Gt(this,"description");Gt(this,"referenceLink");Gt(this,"isFound",!1);this.imageName=e,this.name=f,this.description=x,this.referenceLink=S}}const jo=class jo{constructor(){Gt(this,"allHiddenObjects",[[new Yi("oil","","",""),new Yi("flag","","",""),new Yi("flowers","","","")],[],[new Yi("goggles","","",""),new Yi("wheel","","",""),new Yi("fight","","",""),new Yi("brain","","","")],[],[]])}static get shared(){return this._shared}};Gt(jo,"_shared",new jo);let Ko=jo;const Vk={active:!1,visible:!1,key:"UserInterface"},qp="Road Rage",Ia="Gaegu",zk=128,D2=32,kk=22,Wk=18;class Xk extends Phaser.Scene{constructor(){super(Vk);Gt(this,"showUserInterface",!1);Gt(this,"currentScene");Gt(this,"isUserInterfaceVisible",!1);Gt(this,"isLoadingVisible",!1);Gt(this,"hiddenObjectIndicators",[]);Gt(this,"zoomIndicator");Gt(this,"zoomIndicatorBackground");Gt(this,"cutsceneBackground");Gt(this,"cutsceneTitleText");Gt(this,"cutsceneSubtitleText");Gt(this,"iconTween",f=>{this.tweens.add({targets:f,duration:1e3,scaleX:.1,scaleY:.1,alpha:.3,repeat:0})})}preload(){this.load.multiatlas("interface","Interface/hidden_object_games_icons_edit_packed.json","Interface"),this.load.bitmapFont(qp,"Fonts/RoadRage_0.png","Fonts/RoadRage.fnt"),this.load.bitmapFont(Ia,"Fonts/Gaegu_0.png","Fonts/Gaegu.fnt")}create(){this.zoomIndicatorBackground=this.add.image(100,100,"interface","slider_map.png"),this.zoomIndicatorBackground.setScale(.2),this.zoomIndicatorBackground.setDepth(1),this.zoomIndicatorBackground.setAlpha(0),this.zoomIndicator=this.add.image(100,100,"interface","slider_eye.png"),this.zoomIndicator.setScale(.2),this.zoomIndicator.setDepth(2),this.zoomIndicator.setAlpha(0),this.changeScene(Pa),this.scale.on("resize",this.resize,this)}update(){if(this.cutsceneBackground&&(this.cutsceneBackground.width=window.innerWidth*2,this.cutsceneBackground.height=window.innerHeight*2),_e.default){let f=window.innerHeight/2-this.zoomIndicatorBackground.height*.1+(this.zoomIndicatorBackground.height-20)/4*(_e.default.scale-1),x=this.zoomIndicatorBackground.y-this.zoomIndicatorBackground.height*.1,S=this.zoomIndicatorBackground.y+this.zoomIndicatorBackground.height*.1-40;f<=x?f=x:f>=S&&(f=S),this.zoomIndicator.y=f}this.zoomIndicatorBackground.y=window.innerHeight/2}changeScene(f,x){f.title&&f.subtitle?this.showCutscene(f):this.launchScene(f)}launchScene(f){this.currentScene=this.scene.get(f.sceneName),console.log("Loading Scene "+f.sceneName+", Activated: "+this.scene.isActive(f.sceneName)),this.scene.launch(this.currentScene),this.currentScene.load.on("fileprogress",(x,S)=>{console.log(x,S)}),this.currentScene.load.on("complete",()=>{switch(console.log("Launching Scene "+f.sceneName),this.scene.setActive(!0,f.sceneName),this.scene.sendToBack(this.currentScene),f.sceneName){case"Chapter1Scene":this.reloadIcons(1);break;case"Chapter3Scene":this.reloadIcons(3);break}})}reloadIcons(f=0){if(this.hiddenObjectIndicators.length!=0){for(let x=0;x<this.hiddenObjectIndicators.length;x++)this.hiddenObjectIndicators[x].removedFromScene();this.hiddenObjectIndicators=[]}if(f!=0){this.zoomIndicator.setAlpha(1),this.zoomIndicatorBackground.setAlpha(1);const x=Ko.shared.allHiddenObjects[f-1];for(let S=0;S<x.length;S++)this.hiddenObjectIndicators.push(this.add.sprite(window.innerWidth/2+window.innerWidth/6*(S-1),window.innerHeight/12*11,"interface",x[S].imageName+"_white.png")),this.hiddenObjectIndicators[S].setDepth(1),this.hiddenObjectIndicators[S].setScale(.125)}}showCutscene(f,x=3e3){this.cutsceneBackground=this.add.rectangle(0,0,window.innerWidth,window.innerHeight,0),this.cutsceneBackground.setDepth(100),this.cutsceneBackground.alpha=0,this.cutsceneTitleText=this.add.bitmapText(0,0,qp,f.title,zk),this.cutsceneTitleText.tint=16777215,this.cutsceneTitleText.x=window.innerWidth/2-this.cutsceneTitleText.width/2,this.cutsceneTitleText.y=window.innerHeight/2-this.cutsceneTitleText.height/2,this.cutsceneTitleText.setDepth(101),this.cutsceneTitleText.alpha=0,this.cutsceneSubtitleText=this.add.bitmapText(0,0,Ia,f.subtitle.toUpperCase(),D2),this.cutsceneSubtitleText.letterSpacing=.5,this.cutsceneSubtitleText.tint=16777215,this.cutsceneSubtitleText.x=window.innerWidth/2-this.cutsceneSubtitleText.width/2,this.cutsceneSubtitleText.y=window.innerHeight/2+this.cutsceneTitleText.height/2,this.cutsceneSubtitleText.setDepth(102),this.cutsceneSubtitleText.alpha=0,this.tweens.add({targets:[this.cutsceneBackground,this.cutsceneSubtitleText,this.cutsceneTitleText],duration:700,alpha:1,complete:()=>{this.currentScene&&(this.scene.stop(this.currentScene),this.scene.remove(this.currentScene))}}),this.time.delayedCall(x,()=>{this.tweens.add({targets:[this.cutsceneBackground,this.cutsceneSubtitleText,this.cutsceneTitleText],duration:700,alpha:0,onComplete:()=>{this.cutsceneBackground.removedFromScene(),this.cutsceneTitleText.removedFromScene(),this.cutsceneSubtitleText.removedFromScene(),this.launchScene(f)}})},[],this)}foundHiddenObject(f,x){const S=Ko.shared.allHiddenObjects[f][x];S.isFound||(this.iconTween(this.hiddenObjectIndicators[x]),S.isFound=!0)}resize(){if(this.currentScene==null)return;const f=this.currentScene.scale.gameSize.width,x=this.currentScene.scale.gameSize.height;this.currentScene.parent=new Phaser.Structs.Size(f,x),this.currentScene.sizer=new Phaser.Structs.Size(this.currentScene.scale.width,this.currentScene.scale.height);const S=this.currentScene.sizer.width/this.game.canvas.width,C=this.currentScene.sizer.height/this.game.canvas.height;this.currentScene.cameras.main.setZoom(Math.max(S,C)),this.currentScene.cameras.main.centerOn(this.game.canvas.width/2,this.game.canvas.height/2)}}const L2="PermissionScene",Hk={active:!1,visible:!1,key:L2};class Pa extends nr{constructor(){super(Hk);Gt(this,"sceneWidth",1920);Gt(this,"sceneHeight",1080);Gt(this,"background");Gt(this,"headline");Gt(this,"description");Gt(this,"image");Gt(this,"cameraPermissionButton");Gt(this,"keyboardButton")}preload(){this.load.image("permission","Interface/Image_Permission.svg")}create(){this.background=this.add.rectangle(0,0,window.innerWidth,window.innerHeight,16777215),this.headline=this.add.bitmapText(0,0,Ia,`Hi there, little eye.
How would you like to play this game ?`,D2),this.headline.tint=0,this.headline.lineSpacing=.5,this.headline.setCenterAlign();const f=`We recommend granting us access to your camera.
Then, blink, wink, and bob your way through this game using face tracking.
If people around you start to stare,
you can always switch to using your cursor.`;this.description=this.add.bitmapText(0,0,Ia,f,kk,.5),this.description.tint=0,this.description.setCenterAlign(),this.image=this.add.image(0,0,"permission"),this.input.topOnly=!1,this.cameraPermissionButton=this.createButton("Great, face tracking it is!"),this.keyboardButton=this.createButton("I wanna use cursor instead"),this.input.on("pointerup",(x,S)=>{S[0]==this.cameraPermissionButton?this.askCameraPermission():this.enterGameWithoutCameraPermission()})}createButton(f){const x=this.add.graphics();x.fillStyle(0),x.fillRoundedRect(0,0,300,48,24);const S=this.add.bitmapText(0,0,Ia,f,Wk);S.tint=16777215;const C=this.add.container(0,0,[x,S]);return C.setInteractive(new Phaser.Geom.Rectangle(0,0,300,48),Phaser.Geom.Rectangle.Contains),C}update(){this.background.width=this.windowWidth*2,this.background.height=this.windowHeight*2,this.headline.x=window.innerWidth/2-this.headline.width/2,this.headline.y=100,this.description.x=window.innerWidth/2-this.description.width/2,this.description.y=window.innerHeight/2+30,this.image.x=window.innerWidth/2,this.image.y=window.innerHeight/2-this.image.height/2,this.cameraPermissionButton.x=window.innerWidth/2-320,this.cameraPermissionButton.y=window.innerHeight-150,this.keyboardButton.x=window.innerWidth/2+20,this.keyboardButton.y=window.innerHeight-150}enterGameWithoutCameraPermission(){this.defaultUIScene.changeScene(Xr)}async askCameraPermission(){try{await _e.setup(),this.defaultUIScene.changeScene(Xr)}catch(f){console.log(f)}}}Gt(Pa,"sceneName",L2),Gt(Pa,"title"),Gt(Pa,"subtitle");const Yk=1920,Kk=1080,jk=270,Zk=480,Qk=540,Jk=960,qk={title:"focus-but-what",type:bo.AUTO,scale:{mode:bo.Scale.RESIZE,parent:"game",width:Qk,height:Jk,min:{width:jk,height:Zk},max:{width:Yk,height:Kk}},physics:{default:"arcade",arcade:{debug:!0}},dom:{createContainer:!0},backgroundColor:"#000000",scene:[Xk,Pa,O2,Xr,Ok,N2,Bk,Gk]},B2=new bo.Game(qk);B2.input.globalTopOnly=!1;
